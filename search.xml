<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÊ®°Êùø & ‰∫åÂèâÊ†ëÈÅçÂéÜÊ®°Êùø & ‰∫åÂàÜÊ®°Êùø]]></title>
    <url>%2F2020%2F08%2F02%2F%E6%8E%92%E5%BA%8F%E6%A8%A1%E6%9D%BF%20%26%20%E4%BA%8C%E5%8F%89%E6%A0%91%E9%81%8D%E5%8E%86%E6%A8%A1%E6%9D%BF%20%26%20%E4%BA%8C%E5%88%86%E6%A8%A1%E6%9D%BF.html</url>
    <content type="text"><![CDATA[ÊéíÂ∫èËøôÈáåÂè™ÁÆÄÂçïÁöÑÊîæ‰∏äÁõ∏Â∫îÁöÑÊ®°ÊùøÔºåÂÖ∑‰ΩìÁöÑÁÆóÊ≥ïÊÄùÊÉ≥ËßÅÊàëÂè¶Â§ñ‰∏ÄÁØáÊñáÁ´† „ÄäÂçÅÂ§ßÂÜÖÈÉ®ÊéíÂ∫è„Äã) ÁªÜËäÇÂàÜÁ±ª Â§çÊùÇÂ∫¶ Ë°•ÂÖÖÔºö Âú®ËøôÈáåË¶ÅËØ¥ÊòéÁöÑÊòØÔºåËøô‰∏™ÂõæÈáåÁöÑÂø´ÊéíÁ©∫Èó¥Â§çÊùÇÂ∫¶Èîô‰∫ÜÔºåÂø´ÊéíÁöÑÂπ≥ÂùáÁ©∫Èó¥Â§çÊùÇÂ∫¶Â∫îËØ•ÊòØ O(logn)ÔºåÂ∞±ÊòØÊ†àÁöÑÊ∑±Â∫¶Ôºå‰ΩÜÊòØÊúÄÂ∑ÆÁöÑÊÉÖÂÜµ‰∏ãÔºåÊØîÂ¶ÇÂÖ®ÊòØÂÄíÂ∫èÔºåÂàôÁ©∫Èó¥Â§çÊùÇÂ∫¶‰∏∫Ê†àÊ∑±Â∫¶ O(n)„ÄÇÂΩíÂπ∂ÊéíÂ∫èÊØèÊ¨°ÈÄíÂΩíÈúÄË¶ÅÁî®Âà∞‰∏Ä‰∏™ËæÖÂä©Ë°®ÔºåÈïøÂ∫¶‰∏éÂæÖÊéíÂ∫èÁöÑË°®Áõ∏Á≠âÔºåËôΩÁÑ∂ÈÄíÂΩíÊ¨°Êï∞ÊòØO(log2n)Ôºå‰ΩÜÊØèÊ¨°ÈÄíÂΩíÈÉΩ‰ºöÈáäÊîæÊéâÊâÄÂç†ÁöÑËæÖÂä©Á©∫Èó¥ÔºåÊâÄ‰ª•‰∏ãÊ¨°ÈÄíÂΩíÁöÑÊ†àÁ©∫Èó¥ÂíåËæÖÂä©Á©∫Èó¥‰∏éËøôÈÉ®ÂàÜÈáäÊîæÁöÑÁ©∫Èó¥Â∞±‰∏çÁõ∏ÂÖ≥‰∫ÜÔºåÂõ†ËÄåÁ©∫Èó¥Â§çÊùÇÂ∫¶ËøòÊòØ O(n)„ÄÇ Á®≥ÂÆöÊÄß Á®≥ÂÆöÔºöÂ¶ÇÊûúaÂéüÊú¨Âú®bÂâçÈù¢ÔºåËÄåa=bÔºåÊéíÂ∫è‰πãÂêéa‰ªçÁÑ∂Âú®bÁöÑÂâçÈù¢„ÄÇ ‰∏çÁ®≥ÂÆöÔºöÂ¶ÇÊûúaÂéüÊú¨Âú®bÁöÑÂâçÈù¢ÔºåËÄåa=bÔºåÊéíÂ∫è‰πãÂêé a ÂèØËÉΩ‰ºöÂá∫Áé∞Âú® b ÁöÑÂêéÈù¢„ÄÇ ‰∏çÁ®≥ÂÆöÊéíÂ∫èÁÆóÊ≥ïÔºöË∞êÈü≥ËÆ∞ÂøÜÊ≥ïÔºöÂø´ÔºàÂø´ÊéíÔºâ ‰∫õÔºàÂ∏åÂ∞îÔºâÈÄâÔºàÈÄâÊã©ÔºâÂØπÔºàÂ†ÜÔºâ„ÄÇ ÊÄªÂÖ±4‰∏™‰∏çÁ®≥ÂÆöÔºå6‰∏™Á®≥ÂÆö„ÄÇ Èù¢ËØïÁÇπjdkÂ±ÇÈù¢ÂÆûÁé∞ÁöÑsortÊÄªÂÖ±ÊòØ‰∏§Á±ªÔºå‰∏Ä‰∏™ÊòØ Arrays.sort()Ôºå Collections.sort()Ôºö Arrays.sort() Â¶ÇÊûúÊï∞ÁªÑÂÜÖÂÖÉÁ¥†ÊòØÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºåÊúÄ‰∏ªË¶ÅÈááÁî®ÁöÑÊòØÂèåËΩ¥Âø´ÈÄüÊéíÂ∫è„ÄåÂÖ∂ÂÆûÂ∞±ÊòØ‰∏âË∑ØÂø´Êéí‰∏ÄÊ®°‰∏ÄÊ†∑ÁöÑÊÄùË∑ØÔºåÂè™‰∏çËøá‰∏âË∑ØÂø´Êéí‰∏≠Èó¥ÊòØ = pivot1ÔºåËÄåÂèåËΩ¥Âø´ÈÄüÊéíÂ∫èÊòØÔºàpivot1Ôºåpivot2ÔºâÔºåÂÖ∑‰ΩìÊà≥ÈìæÊé•Ôºöhttps://www.cnblogs.com/nullzx/p/5880191.html „ÄÇ ÊÄªÁªì‰∏Ä‰∏ãÔºöÊï∞ÁªÑÈïøÂ∫¶Â∞è‰∫é47ÁöÑÊó∂ÂÄôÊòØÁî®Áõ¥Êé•ÊèíÂÖ•ÁÆóÊ≥ïÔºåÂ§ß‰∫é47Âπ∂‰∏îÂ∞è‰∫é286ÊòØÈááÁî®ÂèåËΩ¥Âø´ÈÄüÊéíÂ∫èÔºåÂ§ß‰∫é286Â¶ÇÊûúËøûÁª≠ÊÄßÂ•Ω„Äå‰πüÂ∞±ÊòØÂÖÉÁ¥†Â§ßÂ§öÊúâÂ∫èÔºåÊúâ‰∏Ä‰∏™flag‰∏ìÈó®Áî®Êù•ËÆ∞ÂΩïÊï∞ÁªÑÂÖÉÁ¥†ÁöÑÂçáÈôçÊ¨°Êï∞Ôºå‰ª£Ë°®Ëøô‰∏™Êï∞ÁªÑÁöÑËøûÁª≠ÊÄß„ÄçÈááÁî®ÁöÑÊòØÂΩíÂπ∂ÊéíÂ∫èÔºåÂê¶ÂàôËøòÊòØ‰æùÊóßÈááÁî®ÂèåËΩ¥Âø´ÈÄüÊéíÂ∫è„ÄÇ Â¶ÇÊûúÊï∞ÁªÑÂÜÖÂÖÉÁ¥†ÊòØÂØπË±°ÔºåÈááÁî®ÁöÑÊòØTimSort.sort()ÔºåË∑ü Collections.sort()‰∏ÄÊ†∑ÔºåÈÉΩÊòØÈááÁî®ÁöÑËøô‰∏™ÂáΩÊï∞ÔºåËøôÊòØÂΩíÂπ∂ÊéíÂ∫èÁÆóÊ≥ïÂíåÊèíÂÖ•ÊéíÂ∫èÁöÑÁªìÂêà„ÄÇ Collections.sort()ÔºåÈááÁî® TimSort.sort()„ÄÇ TimSort.sort() Â§ßÊ¶ÇÂéüÁêÜÔºö ÂΩìÂæÖÊéíÂ∫èÂÖÉÁ¥†Â∞è‰∫é32‰∏™Êó∂ÔºåÈááÁî®‰∫åÂàÜÊèíÂÖ•ÊéíÂ∫èÔºåÊòØÊèíÂÖ•ÊéíÂ∫èÁöÑ‰∏ÄÁßçÊîπËøõÔºåÂèØ‰ª•ÂáèÂ∞ëÊèíÂÖ•ÊéíÂ∫èÊØîËæÉÁöÑÊ¨°Êï∞„ÄÇÂΩìÊâæÂà∞ÊèíÂÖ•‰ΩçÁΩÆÊó∂ÔºåÁõ¥Êé•Âà©Áî®System.copy()ÂáΩÊï∞Âç≥ÂèØ„ÄÇ ÂΩìÂæÖÊéíÂ∫èÂÖÉÁ¥†Â§ß‰∫éÁ≠â‰∫é32‰∏™Êó∂ÔºåËøõË°åÂΩíÂπ∂ÊéíÂ∫èÔºàÂíå‰º†ÁªüÁöÑÂΩíÂπ∂‰∏ç‰∏ÄÊ†∑ÔºâÔºåÈ¶ñÂÖàÂ∞ÜÊéíÂ∫èÂÖÉÁ¥†ÂàÜÂå∫ÔºåÊØè‰∏™ÂàÜÂå∫ÁöÑÂ§ßÂ∞èÂå∫Èó¥‰∏∫[16,32)ÔºåÁÑ∂Âêé‰æùÊ¨°ÂØπÊØè‰∏™ÂàÜÂå∫ËøõË°åÊéíÂ∫èÔºàÂÖ∑‰ΩìÂÆûÁé∞‰æùÁÑ∂ÊòØ‰∫åÂàÜÊèíÂÖ•ÊéíÂ∫èÔºâÔºåÊéíÂÆåÂ∫èÁöÑÂàÜÂå∫ÂéãÂÖ•Ê†àÔºàÂáÜÁ°ÆÁöÑËØ¥‰∏çÊòØÊ†àÔºåËÄåÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÁî®Êù•ËÆ∞ÂΩïÊéíÂ∫èÂ•ΩÁöÑÂàÜÂå∫ÔºâÔºåÂΩìÊ†àÂÜÖÁöÑÂàÜÂå∫Êï∞Êª°Ë∂≥Êù°‰ª∂Êó∂ÔºåËøõË°åÂàÜÂå∫ÂêàÂπ∂ÔºåÂêàÂπ∂‰∏∫‰∏Ä‰∏™Êõ¥Â§ßÁöÑÂàÜÂå∫ÔºåÂΩìÊ†à‰∏≠Âè™Ââ©‰∏Ä‰∏™ÂàÜÂå∫Êó∂ÔºåÊéíÂ∫èÂÆåÊàê„ÄÇ Ê®°Êùø‰∫§Êç¢ÊéíÂ∫è‰πãÂÜíÊ≥°1234567891011121314151617181920212223242526272829303132333435363738public class BubbleSort &#123; public static void main(String[] args) &#123; Scanner scanner = new Scanner(System.in); int len = scanner.nextInt(); System.out.println("Ë¶ÅËæìÂÖ•ÁöÑÊï∞Â≠óÁöÑ‰∏™Êï∞Ôºö" + len); int[] nums = new int[len]; for(int i = 0;i &lt; len;i++)&#123; nums[i] = scanner.nextInt(); &#125; Bubble(nums); System.out.println(Arrays.toString(nums)); &#125; /** * Ê≥®ÊÑèÁÇπÔºöÂ§ñÂæ™ÁéØÊòØ n - 1 Ê¨°ÔºåÊâÄ‰ª•ÂèØ‰ª• i ‰ªé 1 ÂºÄÂßãÂèñ * ÂÜÖÂæ™ÁéØÊòØ‰ªé 0 Âà∞ n - i // Ëøô‰∏™Ë≤å‰ººÊòØÊúÄÂÆπÊòìÂøòËÆ∞ÁöÑ * ÊØîËæÉÁöÑÊòØ j Âíå j+1 * @param nums */ public static void Bubble(int[] nums)&#123; for(int i = 1;i &lt; nums.length;i++)&#123; boolean flag = true; for(int j = 0;j &lt; nums.length - i;j++)&#123; if(nums[j] &gt; nums[j+1])&#123; swap(nums,j,j+1); flag = false; &#125; &#125; if(flag) return; &#125; &#125; private static void swap(int[] nums, int j, int i) &#123; int temp = nums[j]; nums[j] = nums[i]; nums[i] = temp; &#125;&#125; ‰∫§Êç¢ÊéíÂ∫è‰πãÂø´Êéí123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354public static void main(String[] args) &#123; Scanner scanner = new Scanner(System.in); System.out.print("ËØ∑ËæìÂÖ•Êï∞ÁªÑÁöÑÂ§ßÂ∞èÔºö "); int len = scanner.nextInt(); int[] nums = new int[len]; for (int i = 0;i &lt; len;i++)&#123; nums[i] = scanner.nextInt(); &#125; quick(nums,0,len-1); System.out.println(Arrays.toString(nums)); &#125;public static void quick(int[] nums,int left,int right)&#123; if(left &lt; right)&#123; int partition = partition(nums,left,right); quick(nums,left,partition-1); quick(nums,partition+1,right); &#125; &#125; private static int partition(int[] nums, int left, int right) &#123; // Âü∫ÂáÜÂÄº // ‰ºòÂåñÔºåÂ∞±ÊòØÂ∞ΩÈáèËÉΩÂÅöÂà∞ÂàÜÊ≤ªÔºå‰πüÂ∞±ÊòØÈÄâÂèñÁöÑÂü∫ÂáÜÂÄºÂ∞ΩÈáèÂú®‰∏≠Èó¥ÊòØÊÄßËÉΩÊúÄÂ•ΩÁöÑ int mid = (left + right)/2; dealPivot(nums,left,mid,right); int pivot = left; // ÂÆö‰πâ‰∏§‰∏™ÊåáÈíà int p = left; int q = right; while(p &lt; q)&#123; while(p &lt; q &amp;&amp; nums[q] &gt;= nums[pivot])&#123; q--; &#125; while(p &lt; q &amp;&amp; nums[p] &lt;= nums[pivot])&#123; p++; &#125; swap(nums,p,q); &#125; swap(nums,p,pivot); return p; &#125; private static void dealPivot(int[] nums, int left, int mid, int right) &#123; if((left - mid) * (mid - right) &gt; 0)&#123; // left &lt; mid &lt; right swap(nums,left,mid); return; &#125; else if((mid - left) * (left - right) &gt; 0)&#123; // left ÊòØ‰∏≠Èó¥ÂÄº swap(nums,left,right); return; &#125; return; &#125; ‰∫§Êç¢ÊéíÂ∫è‰πã‰∏âË∑ØÂø´Êéí123456789101112131415161718192021222324252627282930313233343536373839private static void quickSortByThreeWays(int[] nums, int left, int right) &#123; if(left &lt; right)&#123; int[] par = quickThreePartition(nums,left,right); int lt = par[0]; int gt = par[1]; quickSortByThreeWays(nums,left,lt-1); quickSortByThreeWays(nums,gt+1,right); &#125; &#125; // nums[left...lt-1] ÈÉΩÊòØ Â∞è‰∫é pivot ÁöÑ // nums[gt+1...right] ÈÉΩÊòØ Â§ß‰∫é pivot ÁöÑ private static int[] quickThreePartition(int[] nums, int left, int right) &#123; int pivot = left; // ‰∏â‰∏™ÊåáÈíàÔºåÁ±ª‰ºº‰∫é‰∏âËâ≤ÊóóÔºåËøôÈáåÊòØ‰∏âËâ≤ÊóóÁöÑËøõÈò∂ÁâàÔºåÂõ†‰∏∫Â§ö‰∫Ü‰∏Ä‰∏™ pivot int lt = left + 1; int cur = left + 1; int gt = right; while(cur &lt;= gt)&#123; if(nums[cur] &gt; nums[pivot])&#123; swap(nums,cur,gt); gt--; &#125; else if(nums[cur] &lt; nums[pivot])&#123; swap(nums,lt,cur); cur++; lt++; &#125; else cur++; &#125; swap(nums,pivot,lt-1); return new int[]&#123;lt-1,gt&#125;; &#125; private static void swap(int[] nums, int p, int q) &#123; int temp = nums[p]; nums[p] = nums[q]; nums[q] = temp; &#125; ÊèíÂÖ•ÊéíÂ∫è‰πãÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫è123456789101112131415161718192021222324252627282930/** * Áõ¥Êé•ÊèíÂÖ•ÊéíÂ∫è */public class EasyInsertSort &#123; public static void main(String[] args) &#123; Scanner scanner = new Scanner(System.in); System.out.print("ËæìÂÖ•ÁöÑÊï∞ÁöÑ‰∏™Êï∞Ôºö" ); int len = scanner.nextInt(); int[] nums = new int[len]; for(int i = 0;i &lt; len;i++)&#123; nums[i] = scanner.nextInt(); &#125; EasyInsert(nums); System.out.println(Arrays.toString(nums)); &#125; // Áõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èÔºå n-1 ËΩÆ private static void EasyInsert(int[] nums) &#123; for(int i = 1;i &lt; nums.length;i++)&#123; int temp = nums[i]; int j = i; while(j &gt; 0 &amp;&amp; nums[j-1] &gt; temp)&#123; nums[j] = nums[j-1]; j--; &#125; nums[j] = temp; &#125; &#125;&#125; ÊèíÂÖ•ÊéíÂ∫è‰πãÂ∏åÂ∞îÊéíÂ∫è1234567891011121314151617181920212223/*** ÂÖ∂ÂÆûÂ∞±ÊòØÂ∞ÜÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èÁöÑÈó¥Èöî1Âèò‰∏∫Êõ¥Â§ßÔºå‰πüÂ∞±ÊòØÂÖ∂ÂÆûÂ∞±Â§ö‰∫Ü‰∏Ä‰∏™Âæ™ÁéØÔºåÂ∞±ÊòØÂ§öÊ¨°Áº©Â∞èÈó¥ÈöîÁöÑÂæ™ÁéØÔºåÂÖ∂‰ªñË∑üÁõ¥Êé•ÊèíÂÖ•ÊòØ‰∏ÄÊ†∑ÁöÑ** @param sortArray* @return*/public static int[] ShellSort2(int[] sortArray) &#123; int[] arr = Arrays.copyOf(sortArray, sortArray.length); int size = sortArray.length; for (int increment = size / 2; increment &gt; 0; increment /= 2) &#123; for (int i = increment; i &lt; size; i++) &#123; int temp = arr[i]; int j = i; for (; (j &gt; 0 &amp;&amp; arr[j - increment] &gt; temp); j -= increment) &#123; //Ëøô‰∏ÄÊ≠•ÊúÄÂÖ≥ÈîÆÔºåÂõ†‰∏∫Ë¶ÅÊ≥®ÊÑèÊØèÂΩìÊèíÂÖ•‰∏Ä‰∏™Êï∞Â≠óÔºåÂÖ∂ÂêéÈù¢ÈÉΩË¶ÅÂæÄÂêéÈ°∫Áßªincrement‰ΩçÔºå‰∏çÁÑ∂ÁöÑËØùÂ∞±Á©∫‰∏çÂá∫Ë¶ÅÊèíÂÖ•ÁöÑ‰ΩçÁΩÆÔºÅÔºÅÔºÅ arr[j] = arr[j - increment]; &#125; //Â¶ÇÊûúÊ≤°ÊúâÂèòÂåñÔºåÂàôtemp‰æùÁÑ∂Á≠â‰∫éarr[i],Â¶ÇÊûúÂèòÂåñÔºåÂàôÂ∞Üarr[i]ÁßªÂä®ËøáÊù•Â∞±Ë°å arr[j] = temp; &#125; &#125; return arr;&#125; ÈÄâÊã©ÊéíÂ∫è‰πãÁÆÄÂçïÈÄâÊã©ÊéíÂ∫è12345678910111213141516171819202122232425262728/** * ÁÆÄÂçïÈÄâÊã©ÊéíÂ∫è */public class SelectSort &#123; public static void main(String[] args) &#123; Scanner scanner = new Scanner(System.in); System.out.print("please input length: "); int len = scanner.nextInt(); int[] nums = new int[len]; for(int i = 0;i &lt; nums.length;i++)&#123; nums[i] = scanner.nextInt(); &#125; for(int i = 0;i &lt; nums.length;i++)&#123; int min = i; for(int j = i+1;j &lt; nums.length;j++)&#123; if(nums[min] &gt; nums[j]) min = j; &#125; if(min != i) swap(nums,i,min); &#125; System.out.println(Arrays.toString(nums)); &#125; private static void swap(int[] nums, int i, int min) &#123; int temp = nums[i]; nums[i] = nums[min]; nums[min] = temp; &#125;&#125; ÈÄâÊã©ÊéíÂ∫è‰πãÂ†ÜÊéíÂ∫è123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354/** * Â†ÜÊéíÂ∫è */public class HeapSort &#123; public static void main(String[] args) &#123; Scanner scanner = new Scanner(System.in); System.out.print("Ë¶ÅËæìÂÖ•ÁöÑÊï∞Â≠óÁöÑ‰∏™Êï∞Ôºö"); int len = scanner.nextInt(); int[] nums = new int[len]; for(int i = 0;i &lt; len;i++)&#123; nums[i] = scanner.nextInt(); &#125; heapSort(nums,len-1); System.out.println(Arrays.toString(nums)); &#125; public static void heapSort(int[] sortArray, int max_index) &#123; BuildHeap(sortArray,max_index); for(int i = max_index;i &gt; 0;i--)&#123; swap(sortArray,i,0); AdjustDown(sortArray,0,i-1); &#125; &#125; private static void BuildHeap(int[] sortArray, int max_index) &#123; double max = max_index; for(int i = (int) (Math.round(max/2) - 1); i &gt;= 0; i--)&#123; AdjustDown(sortArray,i,max_index); &#125; &#125; private static void AdjustDown(int[] sortArray, int i, int max_index) &#123; int left = 2 * i + 1; int right = 2 * i + 2; int largest = i; if(left &lt;= max_index &amp;&amp; sortArray[left] &gt; sortArray[largest])&#123; largest = left; &#125; if(right &lt;= max_index &amp;&amp; sortArray[right] &gt; sortArray[largest])&#123; largest = right; &#125; if(largest != i)&#123; swap(sortArray,largest,i); AdjustDown(sortArray,largest,max_index); &#125; &#125; private static void swap(int[] sortArray, int largest, int i) &#123; int temp = sortArray[largest]; sortArray[largest] = sortArray[i]; sortArray[i] = temp; &#125;&#125; ‰∫åË∑ØÂΩíÂπ∂ÊéíÂ∫è123456789101112131415161718192021222324252627282930313233343536373839404142434445/** * ÂΩíÂπ∂ÊéíÂ∫è */public class mergeSort &#123; public static void main(String[] args) &#123; int[] nums = new int[]&#123;3,6,7,1,2,3,1,5,7,9,4,2,1,4,5,6&#125;; mergeSort(nums,0,nums.length-1); System.out.println(Arrays.toString(nums)); &#125; public static void mergeSort(int[] nums,int left,int right)&#123; int mid = left + (right - left)/2; if(left &lt; right)&#123; mergeSort(nums,left,mid); mergeSort(nums,mid+1,right); mergeTwo(nums,left,mid,right); &#125; &#125; private static void mergeTwo(int[] nums, int left, int mid, int right) &#123; // Áî®‰∏Ä‰∏™Êï∞ÁªÑÊù•Â≠òÂÇ®ÂêàÂπ∂ÂêéÁöÑÊï∞ÁªÑÔºåÁÑ∂ÂêéÂ§çÂà∂ÁªôÂéüÊï∞ÁªÑ int[] temp = new int[right-left+1]; int i = left; int j = mid + 1; int k = 0; while (i &lt;= mid &amp;&amp; j &lt;= right)&#123; if(nums[i] &lt; nums[j])&#123; temp[k++] = nums[i++]; &#125; else &#123; temp[k++] = nums[j++]; &#125; &#125; while (i &lt;= mid)&#123; temp[k++] = nums[i++]; &#125; while (j &lt;= right)&#123; temp[k++] = nums[j++]; &#125; for(int t = 0;t &lt; temp.length;t++)&#123; nums[left+t] = temp[t]; &#125; &#125;&#125; ËÆ°Êï∞ÊéíÂ∫è123456789101112131415161718192021222324252627282930/** * ËÆ°Êï∞ÊéíÂ∫è */public class courtSort &#123; public static void main(String[] args) &#123; int[] nums = new int[]&#123;2,4,1,2,4,1,4,3,2,1,-2,3,1,2,-2,3,4,5,1&#125;; court(nums); System.out.println(Arrays.toString(nums)); &#125; public static void court(int[] nums)&#123; if(nums.length == 0) return; int max = Integer.MIN_VALUE; int min = Integer.MAX_VALUE; for(int i = 0;i &lt; nums.length;i++)&#123; max = Math.max(max,nums[i]); min = Math.min(min,nums[i]); &#125; int[] temp = new int[max-min+1]; for(int i = 0;i &lt; nums.length;i++)&#123; temp[nums[i] - min]++; &#125; int t = 0; for(int i = 0;i &lt; temp.length;i++)&#123; while (temp[i] != 0)&#123; nums[t++] = i + min; temp[i]--; &#125; &#125; &#125;&#125; Ê°∂ÊéíÂ∫è1234567891011121314151617181920212223242526272829303132333435363738394041public class BucketSort &#123; public static void main(String[] args) &#123; int[] array = new int[]&#123;200,123,978,2123,3092,3412,300,321,302,9991,2329,7618,9283&#125;; radixSort(array); &#125; public static void radixSort(int[] array) &#123; if (array == null || array.length &lt; 2) return; // 1.ÂÖàÁÆóÂá∫ÊúÄÂ§ßÊï∞ÁöÑ‰ΩçÊï∞Ôºõ int max = array[0]; for (int i = 1; i &lt; array.length; i++) &#123; max = Math.max(max, array[i]); &#125; int maxDigit = 0; while (max != 0) &#123; max /= 10; maxDigit++; &#125; int mod = 10, div = 1; //Ê°∂ÂèØ‰ª•Áî®‰∫åÁª¥Êï∞ÁªÑÂÆûÁé∞Ôºå‰πüÂèØ‰ª•Áî®ArrayListÂÆûÁé∞ÔºåÊé®ËçêÂàóË°®ÔºåÂõ†‰∏∫ÊòØÂä®ÊÄÅÁöÑ ArrayList&lt;ArrayList&lt;Integer&gt;&gt; bucketList = new ArrayList&lt;ArrayList&lt;Integer&gt;&gt;(); for (int i = 0; i &lt; 10; i++) &#123; bucketList.add(new ArrayList&lt;Integer&gt;()); &#125; for (int i = 0; i &lt; maxDigit; i++, mod *= 10, div *= 10) &#123; for (int j = 0; j &lt; array.length; j++) &#123; int num = (array[j] % mod) / div; bucketList.get(num).add(array[j]); &#125; int index = 0; for (int j = 0; j &lt; bucketList.size(); j++) &#123; for (int k = 0; k &lt; bucketList.get(j).size(); k++) &#123; array[index++] = bucketList.get(j).get(k); &#125; bucketList.get(j).clear(); &#125; &#125; System.out.println(Arrays.toString(array)); &#125;&#125; Âü∫Êï∞ÊéíÂ∫è123456789101112131415161718192021222324252627282930313233343536373839/** Âü∫Êï∞ÊéíÂ∫è * ÂèØ‰ª•ÈááÁî®Ê°∂ÁöÑÊÄùÊÉ≥Ôºå‰πüÂèØ‰ª•ÈááÁî®ÈòüÂàóÁöÑÊÄùÊÉ≥ * * @param array */ public static void radixSort(int[] array) &#123; if (array == null || array.length &lt; 2) return; // 1.ÂÖàÁÆóÂá∫ÊúÄÂ§ßÊï∞ÁöÑ‰ΩçÊï∞Ôºõ int max = array[0]; for (int i = 1; i &lt; array.length; i++) &#123; max = Math.max(max, array[i]); &#125; int maxDigit = 0; while (max != 0) &#123; max /= 10; maxDigit++; &#125; int mod = 10, div = 1; //Ê°∂ÂèØ‰ª•Áî®‰∫åÁª¥Êï∞ÁªÑÂÆûÁé∞Ôºå‰πüÂèØ‰ª•Áî®ArrayListÂÆûÁé∞ÔºåÊé®ËçêÂàóË°®ÔºåÂõ†‰∏∫ÊòØÂä®ÊÄÅÁöÑ ArrayList&lt;ArrayList&lt;Integer&gt;&gt; bucketList = new ArrayList&lt;ArrayList&lt;Integer&gt;&gt;(); for (int i = 0; i &lt; 10; i++) &#123; bucketList.add(new ArrayList&lt;Integer&gt;()); &#125; for (int i = 0; i &lt; maxDigit; i++, mod *= 10, div *= 10) &#123; for (int j = 0; j &lt; array.length; j++) &#123; int num = (array[j] % mod) / div; bucketList.get(num).add(array[j]); &#125; int index = 0; for (int j = 0; j &lt; bucketList.size(); j++) &#123; for (int k = 0; k &lt; bucketList.get(j).size(); k++) &#123; array[index++] = bucketList.get(j).get(k); &#125; bucketList.get(j).clear(); &#125; &#125; System.out.println(Arrays.toString(array)); &#125; ‰∫åÂèâÊ†ëÈÅçÂéÜËøôÈáåÂè™Êèê‰æõ‰∫åÂèâÊ†ëÈÅçÂéÜÊ®°ÊùøÔºåÂÖ∑‰ΩìÊúâÂÖ≥‰∫åÂèâÊ†ëÁöÑÂÜÖÂÆπÂèØ‰ª•ÁßªÊ≠•ÊàëÁöÑÂè¶Â§ñ‰∏ÄÁØáÊñáÁ´†Ôºö‰∫åÂèâÊ†ë‰∏ìÈ¢òÊÄªÁªì ÂâçÂ∫èÈÄíÂΩí1234567891011121314class Solution &#123; public List&lt;Integer&gt; preorderTraversal(TreeNode root) &#123; List&lt;Integer&gt; result = new LinkedList&lt;&gt;(); preorderHelper(root, result); return result; &#125; private void preorderHelper(TreeNode root, List&lt;Integer&gt; result) &#123; if (root == null) return; result.add(root.val); // ËÆøÈóÆÊ†πËäÇÁÇπ preorderHelper(root.left, result); // ÈÄíÂΩíÈÅçÂéÜÂ∑¶Â≠êÊ†ë preorderHelper(root.right, result); //ÈÄíÂΩíÈÅçÂéÜÂè≥Â≠êÊ†ë &#125;&#125; ÈùûÈÄíÂΩí1234567891011121314151617181920212223242526272829303132// 1.1 ÈùûÈÄíÂΩíÂÖàÂ∫èprivate static void preOrder(TreeNode root) &#123; ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;&gt;(); Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;(); TreeNode cur = root; while (cur != null || !stack.isEmpty()) &#123; while (cur != null) &#123; arrayList.add(cur.val); stack.push(cur); cur = cur.left; &#125; cur = stack.pop(); cur = cur.right; &#125; System.out.println(arrayList);&#125;// 1.2 ÈùûÈÄíÂΩíÂÖàÂ∫è2private static void preOrder2(TreeNode root) &#123; ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;&gt;(); Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;(); TreeNode cur = root; stack.push(cur); while (!stack.isEmpty()) &#123; cur = stack.pop(); arrayList.add(cur.val); if (cur.right != null) stack.push(cur.right); if (cur.left != null) stack.push(cur.left); &#125; System.out.println(arrayList);&#125; ‰∏≠Â∫èÈÄíÂΩí1234567891011121314class Solution &#123; public List&lt;Integer&gt; preorderTraversal(TreeNode root) &#123; List&lt;Integer&gt; result = new LinkedList&lt;&gt;(); preorderHelper(root, result); return result; &#125; private void preorderHelper(TreeNode root, List&lt;Integer&gt; result) &#123; if (root == null) return; preorderHelper(root.left, result); // ÈÄíÂΩíÈÅçÂéÜÂ∑¶Â≠êÊ†ë result.add(root.val); // ËÆøÈóÆÊ†πËäÇÁÇπ preorderHelper(root.right, result); //ÈÄíÂΩíÈÅçÂéÜÂè≥Â≠êÊ†ë &#125;&#125; ÈùûÈÄíÂΩí12345678910111213141516// 2. ‰∏≠Â∫èÈùûÈÄíÂΩíprivate static void InOrder(TreeNode root) &#123; ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;&gt;(); Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;(); TreeNode cur = root; while (cur != null || !stack.isEmpty()) &#123; while (cur != null) &#123; stack.push(cur); cur = cur.left; &#125; cur = stack.pop(); arrayList.add(cur.val); cur = cur.right; &#125; System.out.println(arrayList);&#125; ÂêéÂ∫èÈÄíÂΩí1234567891011121314class Solution &#123; public List&lt;Integer&gt; preorderTraversal(TreeNode root) &#123; List&lt;Integer&gt; result = new LinkedList&lt;&gt;(); preorderHelper(root, result); return result; &#125; private void preorderHelper(TreeNode root, List&lt;Integer&gt; result) &#123; if (root == null) return; preorderHelper(root.left, result); // ÈÄíÂΩíÈÅçÂéÜÂ∑¶Â≠êÊ†ë preorderHelper(root.right, result); //ÈÄíÂΩíÈÅçÂéÜÂè≥Â≠êÊ†ë result.add(root.val); // ËÆøÈóÆÊ†πËäÇÁÇπ &#125;&#125; ÈùûÈÄíÂΩí1234567891011121314151617//3. ÂêéÂ∫èÈùûÈÄíÂΩí Â∑¶Âè≥Ê†π ÂèçËøáÊù•ËÆ≤Â∞±ÊòØ Ê†πÂè≥Â∑¶private static void postOrder(TreeNode root) &#123; ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;&gt;(); Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;(); TreeNode cur = root; while (cur != null || !stack.isEmpty()) &#123; while (cur != null) &#123; arrayList.add(cur.val); stack.push(cur); cur = cur.right; &#125; cur = stack.pop(); cur = cur.left; &#125; Collections.reverse(arrayList); System.out.println(arrayList);&#125; Â±ÇÂ∫èÈÄíÂΩí123456789101112131415161718192021public List&lt;List&lt;Integer&gt;&gt; levelOrder(Node root) &#123; if (root == null) return res; List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;(); helper(root, 0, res); return res;&#125;private void helper(Node root, int depth, List&lt;List&lt;Integer&gt;&gt; res) &#123; if (root == null) return; //Âà§Êñ≠ÊòØÂê¶ÊòØÊñ∞ÁöÑ‰∏ÄÂ±Ç if (depth + 1 &gt; res.size()) &#123; res.add(new ArrayList&lt;&gt;()); &#125; res.get(depth).add(root.val); //Â§ÑÁêÜÂ≠êËäÇÁÇπ for (Node node : root.children) &#123; if (node != null) &#123; helper(node, depth + 1, res); &#125; &#125;&#125; ÈùûÈÄíÂΩí1234567891011121314151617181920212223242526272829303132333435363738//4.1 Â±ÇÂ∫èÈÅçÂéÜprivate static void levelOrder(TreeNode root) &#123; ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;&gt;(); Queue&lt;TreeNode&gt; queue = new ArrayDeque&lt;&gt;(); TreeNode cur = root; queue.add(cur); while (!queue.isEmpty()) &#123; cur = queue.poll(); arrayList.add(cur.val); if (cur.left != null) queue.add(cur.left); if (cur.right != null) queue.add(cur.right); &#125; System.out.println(arrayList);&#125;//4.2 Â±ÇÂ∫èÈÅçÂéÜ 2private static void levelOrder2(TreeNode root) &#123; ArrayList&lt;ArrayList&lt;Integer&gt;&gt; arrayLists = new ArrayList&lt;&gt;(); Queue&lt;TreeNode&gt; queue = new ArrayDeque&lt;&gt;(); TreeNode cur = root; queue.add(cur); int count; while (!queue.isEmpty())&#123; ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;&gt;(); count = queue.size(); while (count &gt; 0)&#123; cur = queue.poll(); count--; arrayList.add(cur.val); if(cur.left != null) queue.add(cur.left); if(cur.right != null) queue.add(cur.right); &#125; arrayLists.add(arrayList); &#125; System.out.println(arrayLists);&#125; ‰∫åÂàÜÈù¢ËØïÁöÑÊó∂ÂÄôÁªèÂ∏∏Á¢∞Âà∞‰∫åÂàÜÔºåÊØîÂ¶ÇÊ±ÇÊ†πÂè∑nÔºåÊ±ÇÊúÄÂ∑¶‰æßtargetÁöÑ‰∏ãÊ†áÔºåÊ±ÇÁøªËΩ¨ÂêéÁöÑÊúâÂ∫èÊï∞ÁªÑÂØπÂ∫îÁöÑÊúÄÂ∑¶‰æßtarget‰∏ãÊ†áÁ≠âÁ≠â„ÄÇ Ê®°ÊùøÂ∑¶Èó≠Âè≥ÂºÄ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071public class binarySearch &#123; int binarySearch(int nums[],int target)&#123; int left = 0; int right = nums.length; // Êü•ÊâæËåÉÂõ¥‰∏∫ [a,b) while(left &lt; right)&#123; // left == right Êó∂ÈÄÄÂá∫ÔºåÊ≠§Êó∂[a,a)ÔºåÊâÄ‰ª•Ê≠§Êó∂ÈÉΩÈÅçÂéÜÂà∞‰∫Ü //Èò≤Ê≠¢ËÆ°ÁÆómidÊó∂Ê∫¢Âá∫ int mid = left + (right - left) / 2; if(nums[mid] == target) return mid; else if(nums[mid] &lt; target) left = mid + 1; else if(nums[mid] &gt; target) right = mid; &#125; return -1; &#125; /** * ËøîÂõûÁöÑÊòØÊØîtargetÂ∞èÁöÑÊï∞ÈáèÔºåÂêåÊó∂‰πüÊòØÊúÄÂ∑¶targetÁöÑ‰∏ãÊ†á * @param nums * @param target * @return */ int binarySearchLeft(int nums[],int target)&#123; int left = 0; int right = nums.length; while(left &lt; right)&#123; //Èò≤Ê≠¢ËÆ°ÁÆómidÊó∂Ê∫¢Âá∫ int mid = left + (right - left) / 2; if(nums[mid] == target) right = mid; else if(nums[mid] &lt; target) left = mid + 1; else if(nums[mid] &gt; target) right = mid; &#125; //Ë¶ÅÊó∂ÂàªÊ≥®ÊÑèÂ§ÑÁêÜËæπÁïåÔºåÂ¶ÇÊûúÊï¥‰∏™Êï∞ÁªÑÈÉΩÊ≤°ÊúâËøô‰∏™targetÔºåÂàôleft‰ºöÂà∞nums.length //leftÁöÑÂèñÂÄºÊòØ[0,nums.length] // target ÊØîÊâÄÊúâÊï∞ÈÉΩÂ§ß if (left == nums.length) return -1; // Á±ª‰ºº‰πãÂâçÁÆóÊ≥ïÁöÑÂ§ÑÁêÜÊñπÂºè return nums[left] == target ? left : -1; &#125; /** * ËøîÂõûÁöÑÊòØÊúÄÂè≥targetÁöÑ‰∏ãÊ†á * @param nums * @param target * @return */ int binarySearchRight(int nums[],int target)&#123; int left = 0; int right = nums.length; while(left &lt; right)&#123; //Èò≤Ê≠¢ËÆ°ÁÆómidÊó∂Ê∫¢Âá∫ int mid = left + (right - left) / 2; if(nums[mid] == target) left = mid + 1; else if(nums[mid] &lt; target) left = mid + 1; else if(nums[mid] &gt; target) right = mid; &#125; //Ë¶ÅÊó∂ÂàªÊ≥®ÊÑèÂ§ÑÁêÜËæπÁïåÔºåÂ¶ÇÊûúÊï¥‰∏™Êï∞ÁªÑÈÉΩÊ≤°ÊúâËøô‰∏™targetÔºåÂàôleft‰ºöÂà∞nums.length // target ÊØîÊâÄÊúâÊï∞ÈÉΩÂ§ß // return left - 1; if (left == 0) return -1; // Á±ª‰ºº‰πãÂâçÁÆóÊ≥ïÁöÑÂ§ÑÁêÜÊñπÂºè return nums[left-1] == target ? (left-1) : -1; &#125;&#125; Â∑¶Èó≠Âè≥Èó≠12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364package ‰∫åÂàÜÊü•Êâæ;import java.util.Arrays;public class binarySearch2 &#123; public static void main(String[] args) &#123; binarySearch2 binarySearch2 = new binarySearch2(); int[] nums = new int[]&#123;1,2,2,2,2,2,3&#125;; int target = 2;// int res = binarySearch2.binarySearch(nums,target);// int res = binarySearch2.binarySearchLeft(nums,target); int res = binarySearch2.binarySearchRight(nums,target); System.out.println(res); &#125; public int binarySearch(int[] nums, int target) &#123; int left = 0; int right = nums.length - 1; while (left &lt;= right) &#123; int mid = left + (right - left) / 2; if (nums[mid] == target) return mid; else if (nums[mid] &gt; target) right = mid - 1; else if (nums[mid] &lt; target) left = mid + 1; &#125; return -1; &#125; public int binarySearchLeft(int[] nums,int target)&#123; int left = 0; int right = nums.length - 1; while(left &lt;= right)&#123; int mid = left + (right - left)/2; if(nums[mid] == target) right = mid - 1; else if(nums[mid] &gt; target) right = mid -1; else if(nums[mid] &lt; target) left = mid + 1; &#125; if(left &gt;= nums.length || nums[left] != target)&#123; return -1; &#125; return left; &#125; public int binarySearchRight(int[] nums,int target)&#123; int left = 0, right = nums.length - 1; while (left &lt;= right) &#123; int mid = left + (right - left) / 2; if (nums[mid] &lt; target) &#123; left = mid + 1; &#125; else if (nums[mid] &gt; target) &#123; right = mid - 1; &#125; else if (nums[mid] == target) &#123; // Âà´ËøîÂõûÔºåÈîÅÂÆöÂè≥‰æßËæπÁïå left = mid + 1; &#125; &#125; // ÊúÄÂêéË¶ÅÊ£ÄÊü• right Ë∂äÁïåÁöÑÊÉÖÂÜµÔºåËøôÈáå left = right + 1 if (right &lt; 0 || nums[right] != target) return -1; return right; &#125;&#125; Áõ∏ÂÖ≥È¢òÁõÆÊ†πÂè∑n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162package ÁªÉÊâãÁÆóÊ≥ï;import java.text.DecimalFormat;class Main &#123; public static double sqrt(double num) &#123; if (num &lt; 0) &#123; return -1; &#125; double low = 0; double high = num / 2; double precision = 0.000001; //Ê†ºÂºèÂåñÔºå‰øùËØÅËæìÂá∫‰ΩçÊï∞ DecimalFormat df = new DecimalFormat("#.00"); double res = high; while (Math.abs(num - (res * res)) &gt; precision) &#123; if (high * high &gt; num) &#123; double n = high - (high - low) / 2; if (n * n &gt; num) &#123; high = n; &#125; else if (n * n &lt; num) &#123; low = n; &#125; else &#123; return Double.valueOf(df.format(n)); &#125; res = n; &#125; else if (high * high &lt; num) &#123; double m = high + (high - low) / 2; if (m * m &gt; num) &#123; low = high; high = m; &#125; else if (m * m &lt; num) &#123; low = high; high = m; &#125; else &#123; return Double.valueOf(df.format(m)); &#125; res = m; &#125; else &#123; return Double.valueOf(df.format(high)); &#125; &#125; return Double.valueOf(df.format(res)); &#125; public static void main(String[] args) &#123; System.out.println(sqrt(16)); &#125;&#125;public class SqrtN &#123; public static void main(String[] args) &#123; &#125;&#125; 34. Âú®ÊéíÂ∫èÊï∞ÁªÑ‰∏≠Êü•ÊâæÂÖÉÁ¥†ÁöÑÁ¨¨‰∏Ä‰∏™ÂíåÊúÄÂêé‰∏Ä‰∏™‰ΩçÁΩÆÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ÊåâÁÖßÂçáÂ∫èÊéíÂàóÁöÑÊï¥Êï∞Êï∞ÁªÑ numsÔºåÂíå‰∏Ä‰∏™ÁõÆÊ†áÂÄº target„ÄÇÊâæÂá∫ÁªôÂÆöÁõÆÊ†áÂÄºÂú®Êï∞ÁªÑ‰∏≠ÁöÑÂºÄÂßã‰ΩçÁΩÆÂíåÁªìÊùü‰ΩçÁΩÆ„ÄÇ ‰Ω†ÁöÑÁÆóÊ≥ïÊó∂Èó¥Â§çÊùÇÂ∫¶ÂøÖÈ°ªÊòØ O(log n) Á∫ßÂà´„ÄÇ Â¶ÇÊûúÊï∞ÁªÑ‰∏≠‰∏çÂ≠òÂú®ÁõÆÊ†áÂÄºÔºåËøîÂõû [-1, -1]„ÄÇ ‰ª£Á†Å12345678910111213141516171819202122232425262728293031323334353637383940414243444546class Solution &#123; public int[] searchRange(int[] nums, int target) &#123; if(nums.length == 0) return new int[]&#123;-1,-1&#125;; return new int[]&#123;searchLeft(nums,target),searchRight(nums,target)&#125;; &#125; public int searchLeft(int[] nums,int target)&#123; int left = 0; int right = nums.length - 1; while(left &lt;= right)&#123; // Èò≤Ê≠¢Ê∫¢Âá∫ int mid = left + (right - left)/2; if(nums[mid] &gt;= target) right = mid - 1; else left = mid + 1; &#125; // ‰∏äÈù¢ÁöÑwhileÂæ™ÁéØÂêéÔºåÊúÄÂêé‰∏ÄÊ¨°Âæ™ÁéØ left == mid, right = left - 1 = mid - 1 // Ëã•ÊúâÁ¨¶ÂêàË¶ÅÊ±ÇÁöÑtargetÔºåÂàô‰ºöÊúâ‰∏§ÁßçÊÉÖÂÜµÔºö // 1. left Âíå right Âú® target ÂÄºÁöÑÊúÄÂ∑¶Á¥¢ÂºïÂ§ÑÁöÑÂâç‰∏Ä‰ΩçÁõ∏ÈÅáÔºåÊ≠§Êó∂ left ‰ºöÂêëÂè≥‰∏Ä‰ΩçÔºåÂà∞ËææÊúÄÂ∑¶ target Â§Ñ,ËÄå right ‰ºöÂÅúÂú®ÂéüÂú∞ÔºåÂºπÂá∫ while // 2. left Âíå right Âú® target ÂÄºÁöÑÊúÄÂ∑¶Á¥¢ÂºïÂ§ÑÁõ∏ÈÅáÔºåÊ≠§Êó∂ left ‰∏çÂä®ÔºåÂà∞ËææÊúÄÂ∑¶ target Â§Ñ,ËÄå right ‰ºöÂêëÂ∑¶‰∏Ä‰ΩçÔºåÂºπÂá∫ while // Ê≥®ÊÑèÔºöÊ≠§Êó∂ÁöÑ left ÈÉΩÊòØÂ§ÑÂú® target ÊúÄÂ∑¶Á¥¢ÂºïÂ§Ñ // Â¶ÇÊûúÊ≤°ÊúâÁ¨¶ÂêàË¶ÅÊ±ÇÁöÑtargetÔºåÂàôÊúâ‰∏âÁßçÊÉÖÂÜµÔºö // 1.ÊâÄÊúâÂÄºÂùáÂ∞è‰∫étargetÔºåÊ≠§Êó∂Ôºåleft‰ºöÂú® nums[nums.length-1]Â§Ñ‰∏érightÁõ∏ÈÅáÔºåÁÑ∂Âêéleft Âä† 1ÔºåË∑≥Âá∫Âæ™ÁéØÔºåÊ≠§Êó∂left == nums.length // 2.ÊâÄÊúâÂÄºÂùáÂ§ß‰∫étargetÔºåÊ≠§Êó∂right‰ºö‰∏çÊñ≠ÂêëÂ∑¶ÔºåÁõ¥Ëá≥ left = right = 0 Áõ∏ÈÅáÔºåÊ≠§Êó∂ right Âáè 1ÔºåË∑≥Âá∫Âæ™ÁéØÔºåÊ≠§Êó∂ left == 0 // 3.target‰Ωç‰∫éÂÄºÁöÑ‰∏≠Èó¥Ôºå‰ΩÜÊòØÊ≤°ÊúâÂÄºÂèñÂà∞ÔºåÊ≠§Êó∂Ë∑üÊúâtargetÊÉÖÂÜµÊòØÁ±ª‰ººÁöÑÔºåÊúÄÁªà left ‰ºöÂÅúÁïôÂú®ÊØî target Â§ßÁöÑÁ¨¨‰∏Ä‰∏™Êï∞‰∏ä // ÊÄªÁªì‰∏äÈù¢ 5 ÁßçÊÉÖÂÜµÔºåleft ‰∏∫ nums.length Êó∂ÔºåÂè¶ÂÖ∂‰∏∫ nums.length - 1,Ê≠§Êó∂Áõ¥Êé•Âà§Êñ≠ nums[left] Âç≥ÂèØÔºåËã•‰∏∫targetÂàôÁõ¥Êé•ËøîÂõû left // Âê¶ÂàôËøîÂõû -1 int pos = (left == nums.length) ? nums.length - 1 : left; if(nums[pos] != target) return -1; return left; &#125; public int searchRight(int[] nums,int target)&#123; int left = 0; int right = nums.length - 1; while(left &lt;= right)&#123; // Èò≤Ê≠¢Ê∫¢Âá∫ int mid = left + (right - left)/2; if(nums[mid] &lt;= target) left = mid + 1; else right = mid - 1; &#125; // Âêå‰∏äÂàÜÊûê int pos = (right == -1)? 0 : right; if(nums[pos] != target) return -1; return right; &#125;&#125; 33. ÊêúÁ¥¢ÊóãËΩ¨ÊéíÂ∫èÊï∞ÁªÑÈ¢òÁõÆÂÅáËÆæÊåâÁÖßÂçáÂ∫èÊéíÂ∫èÁöÑÊï∞ÁªÑÂú®È¢ÑÂÖàÊú™Áü•ÁöÑÊüê‰∏™ÁÇπ‰∏äËøõË°å‰∫ÜÊóãËΩ¨„ÄÇ ( ‰æãÂ¶ÇÔºåÊï∞ÁªÑ [0,1,2,4,5,6,7] ÂèØËÉΩÂèò‰∏∫ [4,5,6,7,0,1,2] )„ÄÇ ÊêúÁ¥¢‰∏Ä‰∏™ÁªôÂÆöÁöÑÁõÆÊ†áÂÄºÔºåÂ¶ÇÊûúÊï∞ÁªÑ‰∏≠Â≠òÂú®Ëøô‰∏™ÁõÆÊ†áÂÄºÔºåÂàôËøîÂõûÂÆÉÁöÑÁ¥¢ÂºïÔºåÂê¶ÂàôËøîÂõû -1 „ÄÇ ‰Ω†ÂèØ‰ª•ÂÅáËÆæÊï∞ÁªÑ‰∏≠‰∏çÂ≠òÂú®ÈáçÂ§çÁöÑÂÖÉÁ¥†„ÄÇ ‰Ω†ÁöÑÁÆóÊ≥ïÊó∂Èó¥Â§çÊùÇÂ∫¶ÂøÖÈ°ªÊòØ O(log n) Á∫ßÂà´„ÄÇ ‰ª£Á†Å123456789101112131415161718192021222324252627282930313233343536class Solution &#123; public int search(int[] nums, int target) &#123; int start = 0; int end = nums.length - 1; while(start &lt;= end)&#123; int mid = start + (end - start)/2; if(nums[mid] == target) return mid; if (nums[start] == nums[mid]) &#123; start++; continue; &#125; //ÊúÄÂÆπÊòìÈîôÁöÑÁÇπÔºåÂ∞±ÊòØÂàóË°®Âè™Êúâ‰∏§‰∏™Êï∞Â≠óÊó∂ÔºåmidÂíåstartÊòØÂêå‰∏Ä‰∏™Êï∞ÔºåÊ≠§Êó∂ÂøÖÈ°ªÊòØÂâçÂçäÈÉ®ÂàÜÊúâÂ∫è // num[mid] == nums[start] Âè™‰ºöÂú®ÂàóË°®Âè™Êúâ‰∏§‰∏™Êï∞Êó∂ÊâçÁõ∏Á≠âÔºåÊâÄ‰ª•ÊâçÂèØ‰ª•‰∏äÈù¢ÈÇ£Ê†∑Â§ÑÁêÜ // Ê≠£Â∏∏ÂÖ∂ÂÆûÊòØ‰∏çÂ∫îËØ•ÈÇ£Ê†∑Â§ÑÁêÜÔºåËÄåÂ∫îËØ•ÊòØÂΩìnum[mid] == nums[start]ÔºåÁõ¥Êé•start++ÔºåÁÑ∂ÂêéËøõË°å‰∏ã‰∏ÄÊ¨°Âæ™ÁéØ if(nums[mid] &gt; nums[start])&#123; // ËØ¥ÊòéÂâçÂçäÈÉ®ÂàÜÊúâÂ∫è if(nums[start] &lt;= target &amp;&amp; target &lt; nums[mid])&#123; end = mid - 1; &#125; else &#123; start = mid + 1; &#125; &#125; else &#123; // ËØ¥ÊòéÂêéÂçäÈÉ®ÂàÜÊúâÂ∫è if(nums[mid] &lt; target &amp;&amp; target &lt;= nums[end])&#123; start = mid + 1; &#125; else &#123; end = mid - 1; &#125; &#125; &#125; return -1; &#125;&#125; 81. ÊêúÁ¥¢ÊóãËΩ¨ÊéíÂ∫èÊï∞ÁªÑ IIÂú®‰∏äÈù¢ÁöÑÂü∫Á°Ä‰∏äÔºåÂéªÈô§‰∏çÂèØÈáçÂ§çÔºåËøôÈáåÁöÑÊï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†ÂåÖÂê´‰∫ÜÂèØÈáçÂ§çÁöÑÂÖÉÁ¥†ÔºåÂêåÊó∂Âä†Â§ßÈöæÂ∫¶ÔºåË¶ÅÊ±ÇÊâæÂá∫Á¨¨Â∑¶‰æßÁöÑtargetÁöÑ‰∏ãÊ†á„ÄåËøô‰∏™Êàë‰∏ç‰ºö „Äç„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041class Solution &#123; public boolean search(int[] nums, int target) &#123; if (nums == null || nums.length == 0) &#123; return false; &#125; int start = 0; int end = nums.length - 1; int mid; while (start &lt;= end) &#123; mid = start + (end - start) / 2; if (nums[mid] == target) &#123; return true; &#125; if (nums[start] == nums[mid]) &#123; start++; continue; &#125; //ÂâçÂçäÈÉ®ÂàÜÊúâÂ∫è if (nums[start] &lt;= nums[mid]) &#123; //targetÂú®ÂâçÂçäÈÉ®ÂàÜ if (nums[mid] &gt; target &amp;&amp; nums[start] &lt;= target) &#123; end = mid - 1; &#125; else &#123; //Âê¶ÂàôÔºåÂéªÂêéÂçäÈÉ®ÂàÜÊâæ start = mid + 1; &#125; &#125; else &#123; //ÂêéÂçäÈÉ®ÂàÜÊúâÂ∫è //targetÂú®ÂêéÂçäÈÉ®ÂàÜ if (nums[mid] &lt; target &amp;&amp; nums[end] &gt;= target) &#123; start = mid + 1; &#125; else &#123; //Âê¶ÂàôÔºåÂéªÂêéÂçäÈÉ®ÂàÜÊâæ end = mid - 1; &#125; &#125; &#125; //‰∏ÄÁõ¥Ê≤°ÊâæÂà∞ÔºåËøîÂõûfalse return false; &#125;&#125; 287. ÂØªÊâæÈáçÂ§çÊï∞È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ÂåÖÂê´ n + 1 ‰∏™Êï¥Êï∞ÁöÑÊï∞ÁªÑ numsÔºåÂÖ∂Êï∞Â≠óÈÉΩÂú® 1 Âà∞ n ‰πãÈó¥ÔºàÂåÖÊã¨ 1 Âíå nÔºâÔºåÂèØÁü•Ëá≥Â∞ëÂ≠òÂú®‰∏Ä‰∏™ÈáçÂ§çÁöÑÊï¥Êï∞„ÄÇÂÅáËÆæÂè™Êúâ‰∏Ä‰∏™ÈáçÂ§çÁöÑÊï¥Êï∞ÔºåÊâæÂá∫Ëøô‰∏™ÈáçÂ§çÁöÑÊï∞„ÄÇ ‰ª£Á†Å1234567891011121314151617181920212223class Solution &#123; public int findDuplicate(int[] nums) &#123; int left = 0; int right = nums.length - 1; while(left &lt;= right)&#123; int mid = left + (right - left)/2; int count = 0; int mid_count = 0; for(int i = 0;i &lt; nums.length;i++)&#123; if(nums[i] &lt;= mid) count++; if(nums[i] == mid) mid_count++; &#125; // Â¶ÇÊûú [left,mid] Ê≤°ÊúâÂá∫Áé∞ÈáçÂ§çÊï∞Â≠óÔºåcount &lt;= mid // Âê¶ÂàôËØ¥ÊòéÂú®Ëøô‰∏™Âå∫Èó¥Âá∫Áé∞‰∫ÜÈáçÂ§çÁöÑ // ËøôÈáåË∑üÂ∏∏ËßÅÁöÑ ‰∫åÂàÜÊúâ‰∏ÄÁÇπÁÇπ‰∏çÂêåÔºåËøôÈáå right = midÔºå‰∏çÊòØ right = mid - 1 // Âõ†‰∏∫ÊàëÂú®‰∏äÈù¢ËÆ°ÁÆó count ÁöÑÊó∂ÂÄô ÊòØÊúâËÆ°ÁÆó mid ÁöÑ if(mid_count &gt; 1) return mid; if(count &gt; mid) right = mid - 1; else left = mid + 1; &#125; return -1; &#125;&#125;]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>JAVA</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂêêÊßΩ]]></title>
    <url>%2F2020%2F05%2F24%2F%E5%90%90%E6%A7%BD.html</url>
    <content type="text"><![CDATA[ÂÅúÊõ¥‰∏Ä‰∏™Êúà‰∫ÜÔºåÊúÄËøë‰∏Ä‰∏™ÊúàÂü∫Êú¨Ê≤°ÁúãÂ§™Â§ö‰π¶Ôºå‰∏ÄÁõ¥Âú®ÂøôÁùÄÂÅöÁÆóÊ≥ïËÆæËÆ°ÁöÑÂÆûÈ™åËøòÊúâÂ§ÑÁêÜÂÆ∂‰∫ãÂíå‰∏Ä‰∫õÂÖ∂‰ªñÈùûÂ∏∏ËÆ©‰∫∫ÁÉ¶ÂøÉÁöÑ‰∫ãÔºåË∂ÖÁ∫ßÊÄÄÂøµÂèØ‰ª•‰∏ìÂøÉÂ≠¶‰π†ÂíåÂÜôÂçöÂÆ¢ÁöÑÊó•Â≠êÔºåÊâÄÂπ∏Ôºå‰∏ÄÂàáÈÉΩÂëä‰∏ÄÊÆµËêΩÂï¶Ôºå5 Êúà 28 Âè∑‰πüË¶ÅÂÖ•ËÅåÂï¶ÔºåÂ∏åÊúõÂú®Êé•‰∏ãÊù•ÁöÑÊó∂Èó¥ÈáåÔºåËá™Â∑±ËÉΩÂ§ü‰∏ìÂøÉÂ∑•‰ΩúÔºå‰∏ìÂøÉÂÜôÂçöÂÆ¢Ôºå‰∏ìÂøÉÂÅö‰∏Ä‰∫õÊäÄÊúØÊ≤âÊ∑ÄÔºåÂä†Ê≤πüÜô]]></content>
  </entry>
  <entry>
    <title><![CDATA[ÈáçÊûÑÈ°πÁõÆ‰ª£Á†Å]]></title>
    <url>%2F2020%2F05%2F05%2F%E4%BA%94%E4%B8%80%E5%81%87%E6%9C%9F%E4%B9%8B%E9%87%8D%E6%9E%84%E9%A1%B9%E7%9B%AE.html</url>
    <content type="text"><![CDATA[ÂâçË®ÄË∂ÅÁùÄ‰∫î‰∏ÄÂÅáÊúüÔºåËá™Â∑±‰πüÊ≤°Âá∫ÂéªÁé©ÔºåÊâÄ‰ª•ÊúâÂ§ßÊääÁöÑÁ©∫Èó≤Êó∂Èó¥ÔºåÊÉ≥Âà∞È©¨‰∏äÂÆû‰π†Âéª‰∫ÜÔºåÂèØËÉΩÈ°πÁõÆË¶Å‰∫§Êé•Ôºå‰∫éÊòØËá™Â∑±ÂÜ≥ÂÆöÈáçÊûÑ‰∏Ä‰∏ã‰ª£Á†Å‚Ä¶ Âõ†‰∏∫ÊàëÊòØÂú®Â∏àÂÖÑÁöÑ‰ª£Á†ÅÁöÑÂü∫Á°Ä‰∏äËøõË°åÁª¥Êä§‰øÆÊîπÁöÑÔºåÊîπÂà∞ÂêéÈù¢ÁúüÁöÑÊòØË∂äÊù•Ë∂äÂ§çÊùÇÔºåË∂äÊù•Ë∂äÈ∫ªÁÉ¶Ôºå‰ª•Ëá≥‰∫éÁé∞Âú®ÊàëÈöè‰æøÂä†ÁÇπÊñ∞ÂäüËÉΩÔºåÂÆåÂÖ®Ê≤°ÊúâÂèØÊâ©Â±ïÊÄßÔºåËÄå‰∏î‰ª£Á†ÅÊ≤°Êúâ‰ªª‰ΩïÂèØËØªÊÄß‚Ä¶ÊàëÈÉΩ‰∏çÁü•ÈÅìÊàëÊòØÊÄé‰πàËØª‰∏ãÂéªËøô‰∏™‰ª£Á†ÅÂπ∂‰∏î‰øÆÊîπÁöÑÔºåÁÆÄÁõ¥Â∞±ÊòØÂú® ‚Äùshi‰∏äÈõïËä±‚ÄúÔºåÊÉ≥ÊÉ≥ËøòÊòØ‰∏çËÉΩÂùëÂà´‰∫∫Ôºå‰∫éÊòØÁã†‰∏ãÂøÉÊù•ÔºåÂÜ≥ÂÆöÂ∞ÜÂéüÊù•Áî® node ÂÜôÁöÑÊîπÊàê javaÔºåËøòÂ•ΩÔºå‰∏ÄÂàáÈÉΩÊØîËæÉÈ°∫Âà©ÔºåÁªèËøá2Â§©ÁöÑÈáçÊûÑ + 1Â§©ÁöÑÊµãËØïÔºåËÉΩÂ§üÈ°∫Âà©Ë∑ëÈÄö‰∫ÜÔºåÂ¶ÇÊûúÂêéÊúüË¶Å‰∫§Êé•ÁöÑËØùÔºåÂ∞±Â∞ÜËøô‰ªΩ‰ª£Á†Å‰∏äÁ∫ø‚Ä¶ ‰∏∫‰∫ÜÊúÄÂ§ßÈôêÂ∫¶ÁöÑÂáèÂ∞ë‰øÆÊîπÂíåÂØπÂâçÊúü‰ª£Á†ÅÁöÑÂÖºÂÆπÔºåÊàëÂè™‰øÆÊîπ‰∫Ü node ÈÉ®ÂàÜÁöÑ‰ª£Á†ÅÔºåÂÖ®ÈÉ®ËΩ¨Êàê javaÔºåËøôÊ†∑ÂêåÊó∂‰πüËß£ÂÜ≥‰∫Ü kafka ÂØπ node Êó†Ê≥ïËøõË°å kerberos Âä†ÂØÜÁöÑÁº∫ÁÇπÔºåÁªà‰∫é‰∏çÁî®Ë£∏Â•î‰∫Ü‚Ä¶ ‰ΩÜÊòØÁõÆÂâç‰ª£Á†ÅÂØπË∞∑Ê≠åÈ™åËØÅÁöÑÂ∞ÅÂ†µËÉΩÂäõËøòÊ≤°ÊúâËøõË°åËÄÉÈ™åÔºåÊâÄ‰ª•‰∏çÂà∞‰∏á‰∏çÂæóÂ∑≤Ëøô‰ªΩ‰ª£Á†ÅËøòÊòØ‰∏ç‰ºö‰∏äÁ∫øÁöÑ‚Ä¶Èô§ÈùûÁúüÁöÑË¶ÅÊ∑ªÂä†Êñ∞ÂäüËÉΩÊàñËÄÖË¶Å‰∫§Êé•‚Ä¶ Áé∞Âú®ËÆ∞ÂΩï‰∏Ä‰∏ãÂú®ÈáçÊûÑ‰∏≠ÈÅáÂà∞ÁöÑ‰∏Ä‰∫õÂ∞èÈóÆÈ¢ò„ÄÇ„Äå‰ª£Á†ÅÁõ¥Êé•Âú® leetcode Â∑•Á®ã‰∏≠ÂÜôÁöÑÔºåÊ≤°ÊúâÁã¨Á´ãÂá∫Êù•ÔºåÊñá‰ª∂Â§πÂêçÂ≠ó‰∏∫ ReWrite_xxx_List„Äç ÈóÆÈ¢òQ1ÔºöJavaÁâàÊú¨ÁöÑ Kafka ‰∏≠ÁöÑÂ∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñÔºå‰∏çÊîØÊåÅ JSONÔºåËÄå Python ÈÇ£‰∏™Ê®°ÂùóÁöÑ‰ª£Á†ÅË¶ÅÊ±ÇÁî® json ‰º†ÈÄíÊ∂àÊÅØ ÊàëÂèëÁé∞ Java ËøôËæπÁöÑ StringÔºåË¶ÅÊÉ≥Ê≠£Â∏∏ÁöÑÂú® python Ê®°ÂùóÂèò‰∏∫ jsonÔºåÂ∞±ÂøÖÈ°ª‰ΩøÂæó String ‰∏≠ÁöÑÂçïÂºïÂè∑ÂÖ®ÈÉ®Âèò‰∏∫ÂèåÂºïÂè∑ÔºåÂê¶ÂàôÂ∞±Êó†Ê≥ïËΩ¨Êç¢„Äåjson.loads(str) ‰ºöÊä•Èîô„Äç„ÄÇ ‰æãÂ¶ÇÔºö 12&gt; String msg = "&#123;\"params\": \"apple\", \"task_id\": \"W2155_1588604670842_0310\",\"is_cycle\": 0, \"task_type\": 9, \"cron_expression\": \"---\", \"priority \": 1, \"operation\": \"init\", \"quantity\": 100, \"comments\": 0, \"follower\": 0, \"followed\": 0, \"u_id\": \"0452mlppa555\", \"address\": \"0452_m\", \"remain_count\": 50&#125;";&gt; ËøôÊ†∑Â∞±Ê≤°ÈóÆÈ¢òÔºåÂêåÁêÜÔºåÂú®ÊàëÂ∞ùËØïÊäìÂèñÂàóË°®È°µÁöÑÁÆÄÂéÜÁöÑ name Êó∂Ôºå‰πüÂêåÊ†∑ÂèëÁé∞‰∫ÜËøô‰∏™ÈóÆÈ¢òÔºå‰ΩÜÊòØÂΩìÊó∂Ê≤°ÊúâÊ≥®ÊÑèÂà∞ÔºåÂú® selenium_test Êñá‰ª∂Â§π‰∏ãÁöÑ url_test ‰∏≠ÔºåÊúâ 12&gt; JSONObject resultsJson = (JSONObject) JSONObject.parse(results);&gt; Ë¶ÅÊÉ≥Â∞ùËØïËΩ¨Êç¢ÊàêÂäüÔºåÂ∞±ÂøÖÈ°ªÊää results ‰∏≠ÁöÑ ÂçïÂºïÂè∑ ÂÖ®ÈÉ®ÊõøÊç¢Êàê ÂèåÂºïÂè∑„ÄÇ ËØùËØ¥ÔºåÈÄöËøáÊ≠§Ê¨°ÈáçÊûÑÔºåÂ∞ÜËá™Â∑±ÂâçÂá†Â§©ÁúãÁöÑ kafka ÂÆåÁæéÁöÑËûçÂÖ•‰∫ÜËøõÊù•ÔºåÁÆÄÁõ¥ÁæéÊªãÊªã‚Ä¶ Q2ÔºöÈÅáÂà∞ÁöÑÁ¨¨‰∏Ä‰∏™Â§ßÈóÆÈ¢òÔºåÂÖ∂ÂÆûËøòÊòØËÄÉËôëÂ¶Ç‰ΩïÂ∞ÜÁôªÂΩïÂêéÁöÑÁïåÈù¢ÊãøÂà∞ÔºåÂõ†‰∏∫ÊàëÂêéÁª≠ÁöÑÊìç‰ΩúÈÉΩÊòØË¶ÅÂü∫‰∫éÂ∑≤ÁªèÁôªÂΩïÂêéÁöÑËøô‰∏™Ê†áÁ≠æÈ°µÁöÑ ËøôÁöÑÁ°ÆÊòØ‰∏Ä‰∏™ÈöæÈ¢òÔºåÊàëËøôËæπÊúÄÂêéÁöÑÂÅöÊ≥ïÊòØÂ∞Ü driver Ëøô‰∏™chromeÁöÑÈ©±Âä®Âèò‰∏∫‰∏Ä‰∏™ static volatileÔºåËøôÊ†∑Âú®Â§öÁ∫øÁ®ãÊìç‰ΩúÁöÑÊó∂ÂÄôÔºåËÉΩÂ§üÂêåÊ≠• driver ÁöÑÁä∂ÊÄÅÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÊï¥‰∏™ Crawl Á±ªÂè™Êúâ‰∏Ä‰∏™ driver ÂÆû‰æãÔºåËÄå‰∏îÊàëÁî®‰∫ÜÂçï‰æãÊ®°Âºè‰∏ãÁöÑÈ•øÊ±âÊ®°ÂºèÔºåÁõ¥Êé•Âú®Á¨¨‰∏ÄÊ¨°ÂàùÂßãÂåñÁöÑÊó∂ÂÄôÂ∞±Â∞Ü driver ËøõË°åÂÆû‰æãÂåñ‰∫ÜÔºålogin() ÊâßË°åÁöÑÊó∂ÂÄôÊòØÊãøÂà∞ÂîØ‰∏ÄÁöÑ driver ÂÆû‰æãÔºåÁÑ∂ÂêéÂêéÊúü crawl ÁöÑÊó∂ÂÄôÔºåÁî±‰∫éÊòØÂçï‰æãÂåñÁöÑÔºåÊâÄ‰ª•ÂøÖÁÑ∂‰πüÊòØÊãøÂà∞Âêå‰∏Ä‰∏™ driverÔºåÊÅ©ÔºåÊàëÁúüÊòØ‰∏™Â§©Êâç‚Ä¶ Q3ÔºöÊúÄË¥πÊó∂Èó¥ÁöÑËøòÊòØË¶ÅÂØπ python Ê®°ÂùóËøõË°å‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÂØπÊé• Âú®‰∏çÊîπÂèò pythonÊ®°ÂùóÁöÑ‰ª£Á†ÅÁöÑÂâçÊèê‰∏ãÔºåËøõË°å‰ª£Á†ÅÁöÑÈáçÊûÑÔºåËøôÁöÑÁ°ÆÊúâÁÇπÊµ™Ë¥πÊó∂Èó¥ÔºåÂ∞§ÂÖ∂ÊòØË¶ÅËÄÉËôëÂà∞ kafka Ê∂àÊÅØ‰º†ÈÄíÁöÑ‰∏çÂèòÔºåÊâÄ‰ª•ÂèØËÉΩ‰ºöÊØîËæÉËä±Ë¥πÊó∂Èó¥Âêß.. Q4ÔºöÂ¶Ç‰ΩïÂêØÂä®Áà¨Ëô´ÁöÑ ÊàëÊòØÁõ¥Êé•Â∞Ü‰∏öÂä°ÂÖ®ÈÉ®ÂÜôÂú® Consumer Ëøô‰∏™Á±ª‰∏≠‰∫ÜÔºåÁÑ∂Âêé Crawl Ëøô‰∏™Á±ªÂ∞±Ë¥üË¥£ËøõË°åÁôªÂΩï„ÄÅÁà¨ÂèñÁ≠âÊìç‰ΩúÔºåÂÖ∂‰∏≠ÔºåConsumer Á±ª‰∏≠Áõ¥Êé•ÈÄöËøáÁ∫øÁ®ãÊ±†Ë∞ÉÁî® Crawl ‰∏≠ÁöÑÊñπÊ≥ïÔºåÂπ∂ÈÄöËøá future.get() ËøõË°åÁªìÊûúÁöÑËé∑Âèñ„ÄÇ Producer Ëøô‰∏™Á±ªË¥üË¥£ËøõË°å‰ªªÂä°ÁöÑÂèëÈÄÅÔºåËÄå Utils ÂàôÊòØÂåÖÂê´‰∏Ä‰∫õÂ∑•ÂÖ∑ÊñπÊ≥ïÔºåÊØîÂ¶ÇÂØπ keyword ÁöÑÂ§ÑÁêÜÔºåËØ¥Âà∞ÂØπ keyword ÁöÑÂ§ÑÁêÜÔºå‰∏ªË¶ÅËøòÊòØË¶ÅÊª°Ë∂≥ url ÁºñÁ†ÅÁöÑËßÑËåÉÔºåÊâÄ‰ª•ÈúÄË¶ÅËøõË°å‰∏ÄÂÆöÁöÑÂ§ÑÁêÜ„ÄÇ Q5ÔºöÊäìÂèñÂêçÂ≠óÊòØÊäìÂèñ html ËøòÊòØÈÄöËøá rpc Ëé∑ÂèñÔºü ÁªèËøáËá™Â∑±ÁöÑÊµãËØïÔºåËøòÊòØ rpc ÁöÑÈù†Ë∞±‰∏Ä‰∫õÔºå‰ΩÜÊòØ‰∏§ËÄÖÈÉΩ‰∏çÂ§üÈù†Ë∞±‚Ä¶ 123&gt; // 1. ÈÄöËøá rpcÔºåËøôÁßçÊñπÂºèÁöÑÂ•ΩÂ§ÑÊòØÂΩìÈ°µÈù¢‰∏ÄÁõ¥Â§Ñ‰∫é loading Áä∂ÊÄÅÂπ∂‰∏îÊó†Ê≥ïÂä†ËΩΩÊï∞ÊçÆÊó∂ÔºåÈÄöËøá rpc ÂèçËÄåÂèØ‰ª•Ëé∑ÂæóÊï∞ÊçÆÔºåÂùèÂ§ÑÂ∞±ÊòØÊúâÁöÑÊó∂ÂÄôÈ°µÈù¢Âä†ËΩΩÂá∫Êù•‰∫ÜÊï∞ÊçÆ‰ΩÜÊòØÂç¥Êã¶Êà™‰∏çÂà∞ËØ•ËØ∑Ê±Ç&gt; // 2. Áõ¥Êé•ÈÄöËøáÈ°µÈù¢ÊäìÂèñÊàë‰ª¨ÈúÄË¶ÅÁöÑÊï∞ÊçÆÔºåÂ•ΩÂ§ÑÂ∞±ÊòØ‰∏çÁî®ÊâøÊãÖ rpc ÂèØËÉΩÊã¶Êà™‰∏çÂà∞ÁöÑÈ£éÈô©ÔºåÂùèÂ§ÑÂ∞±ÊòØÊúâÁöÑÊó∂ÂÄô‰ºö loadingÔºåÂØºËá¥Êäì‰∏çÂà∞Êï∞ÊçÆ&gt; ÊÑüËßâÊúÄÂ•ΩÁöÑÊñπÂºèÊòØÔºöÂÖàËøõË°åÈ°µÈù¢ÁöÑÊäìÂèñÔºåÂ¶ÇÊûúÂèëÁé∞ÊòØ loading Áä∂ÊÄÅÔºåÂàôËΩ¨‰∏∫ rpc Ë∞ÉÁî®Ôºå‰∏§ËÄÖÈÉΩÊ≤°ÊúâÊï∞ÊçÆÔºåËØ¥Êòé no match„ÄÇ ÊáíÂæóËØï‰∫Ü‚Ä¶Âà∞Êó∂ÂÄôÂ¶ÇÊûúË¶Å‰∏äÁ∫øÔºåÂÜçËØïËØï‚Ä¶ Q6Ôºö java ‰∏≠Â¶Ç‰Ωï‰ΩøÁî® webdriverÔºü http://www.testclass.net/selenium_java ‰∏ªË¶ÅÊòØÂèÇËÄÉËøô‰∏™ÁΩëÂùÄÔºåÂâ©‰∏ãÁöÑÁúãchrome‰∏≠ÁöÑ ‚ÄùÂÖ∂‰ªñ‰π¶Á≠æ‚Äú Q7ÔºöËÆæÁΩÆ cookieÔºå‰∏çÈúÄË¶ÅÂÜçÁôªÂΩï‰∫Ü Êî∂Ëé∑ ÂØπ kafka Âíå java ÁöÑÂØπÊé•ÁöÑÁÜüÊÇâÔºåÁõ¥Êé•Â∞ÜÂâçÂá†Â§©ÁúãÁöÑÂÖ®ÈÉ®ÁªôÁî®‰∏ä‰∫ÜÔºåÈ°∫Â∏¶Ëá™Â∑±ÂÜô‰∫Ü‰∏™Ëá™ÂÆö‰πâÁöÑÂ∫èÂàóÂåñÂô®„ÄÇ Á∫øÁ®ãÊ±†„ÄÅseleniumÁöÑËøêÁî®„ÄÅrequestÁöÑËøêÁî®Ôºå‰ª•ÂâçÈÉΩÂè™ÊòØÂú® python ‰∏≠Áî®ÔºåÁé∞Âú®ÊÑüËßâÂú® java ‰∏≠‰πüÂêåÊ†∑ÊòØÂçÅÂàÜÊñπ‰æøÁöÑ„ÄÇ Ëá™Â∑±È°∫Â∏¶ÈáçÂÜô‰∫Ü‰∏™ request ÊúâÂÖ≥ÁöÑÂ∑•ÂÖ∑Á±ªÔºåÈáåÈù¢ÊúâÂæàÂ§öÂÆûÁî®ÁöÑÂ∑•ÂÖ∑ÊñπÊ≥ïÔºåÂú® leetcode Êñá‰ª∂Â§π‰∏ãÁöÑ Áà¨Ëô´demo„ÄÇ ÂØπ‰∏öÂä°ÁöÑÂÜçÊ¨°ÁÜüÊÇâÔºåÊÑüËßâ‰∏ÄÊï¥Â•ó‰∏ãÊù•ÔºåÈÄªËæëÂ∑≤ÁªèÊòØÈùûÂ∏∏Ê∏ÖÊô∞‰∫ÜÔºåÊàëÁöÑ‰ª£Á†ÅËá™Â∑±ËßâÂæóÂÜôÁöÑ‰πüÊòØÂæàÊ∏ÖÊô∞ÁöÑÔºåÁªà‰∫é‰∏çÁî®ÊãÖÂøÉ‰∫§Êé•ÁöÑÊó∂ÂÄôÂùëÂà´‰∫∫‰∫Ü‚Ä¶ ÊúÄÂ§ßÁöÑÊî∂Ëé∑ÂΩìÁÑ∂ÊòØÊõ¥Âä†Ëá™‰ø°‰∫ÜÔºåÊÑüËßâÂÜôËµ∑Êù•ËøòÊòØÊå∫ÁÆÄÂçïÁöÑÔºå‰ª•ÂâçËä±‰∫Ü‰∏™ÊääÊúàÊâçÁÜüÊÇâÁöÑ nodeÔºåÁî® java ÂÜô‰∏§Â§©‰∏çÂà∞Â∞±ÊêûÂÆö‰∫ÜÔºåÊúÄÁªàÂèØËÉΩËøô‰ªΩ‰ª£Á†Å‰πüÁî®‰∏ç‰∏äÔºå‰ΩÜÊòØÁªôËá™Â∑±ÁöÑ‰ø°ÂøÉÊòØÂÆûÊâìÂÆûÁöÑÔºÅ ËøòÈúÄË¶ÅÂÅöÁöÑÂ∑•‰Ωú Â∞ÜËØ•Â∑•Á®ãÁã¨Á´ãÂá∫ÂéªÔºåÂΩ¢Êàê‰∏Ä‰∏™mavenÁÆ°ÁêÜÁöÑÂçïÁã¨ÁöÑÂ∑•Á®ã Ë∑üÂéüÊù•ÁöÑÈÉ®ÂàÜ‰ª£Á†ÅÂØπÊé•Â•ΩÔºåÂ∞§ÂÖ∂ÊòØ topic ‰∏çË¶ÅÂºÑÈîô‰∫Ü „ÄåÂ∑≤ÂÆåÊàê„Äç Âä†ÂØÜÂçèËÆÆÂÜôÂ•Ω „Äåchangze ÈÇ£ËæπÂ∑≤ÁªèÂÜôÂÆå‰∫Ü„Äç ÊúçÂä°Âô®‰∏äÁöÑÊüê‰∫õ‰∏úË•øÂíåmacÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑÔºåÊØîÂ¶Ç chromeDriver ÁöÑÂú∞ÂùÄÈúÄË¶ÅÊîπÂä®ÔºåËøòÊúâÂ∞±ÊòØ‰ªòË¥πË¥¶Âè∑ÊòØÊã•ÊúâÁúüÂÆûÂßìÂêçÔºåÊâÄ‰ª•Âú®ÈÄöËøákeywordÁöÑÁ¨¨‰∫åÁßçÊñπÊ≥ïËé∑ÂèñÂêçÂ≠óÊó∂ÔºåclassName ÊòØÊúâÂèòÂåñÁöÑ „Äå‰∫ÜËß£‰∫Ü„Äç Â∞ΩÈáèÂáèÂ∞ëË∞∑Ê≠åÈ™åËØÅÂá∫Áé∞ÁöÑÊ¨°Êï∞ ÂÜô‰∏Ä‰∏™ ReadMe.txt „ÄåÂ∑≤ÂÆåÊàê„Äç Â•Ω‰∫ÜÔºåÈ°πÁõÆËøôÂùóÂ∞±ËøôÊ†∑‰∫Ü‚Ä¶ ÂæóÊäìÁ¥ßÊó∂Èó¥ÂÜô‰∏Ä‰∏ãÂÆûÈ™åÂíåÂ§ç‰π†ËÄÉËØïÁßëÁõÆ‰∫Ü‚Ä¶ Âä†Ê≤πÔºÅÔºÅÔºÅ]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Ê∑±ÂÖ•ÁêÜËß£ kafkaÔºà‰∏âÔºâ]]></title>
    <url>%2F2020%2F04%2F29%2F%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%20kafka%EF%BC%88%E4%B8%89%EF%BC%89.html</url>
    <content type="text"><![CDATA[Á¨¨ÂõõÁ´† ‰∏ªÈ¢òÂíåÂàÜÂå∫‰ªéKafkaÁöÑÂ∫ïÂ±ÇÂÆûÁé∞Êù•ËØ¥Ôºå‰∏ªÈ¢òÂíåÂàÜÂå∫ÈÉΩÊòØÈÄªËæë‰∏äÁöÑÊ¶ÇÂøµÔºåÂàÜÂå∫ÂèØ‰ª•Êúâ‰∏ÄËá≥Â§ö‰∏™ÂâØÊú¨ÔºåÊØè‰∏™ÂâØÊú¨ÂØπÂ∫î‰∏Ä‰∏™Êó•ÂøóÊñá‰ª∂ÔºåÊØè‰∏™Êó•ÂøóÊñá‰ª∂ÂØπÂ∫î‰∏ÄËá≥Â§ö‰∏™Êó•ÂøóÂàÜÊÆµÔºàLogSegmentÔºâÔºåÊØè‰∏™Êó•ÂøóÂàÜÊÆµËøòÂèØ‰ª•ÁªÜÂàÜ‰∏∫Á¥¢ÂºïÊñá‰ª∂„ÄÅÊó•ÂøóÂ≠òÂÇ®Êñá‰ª∂ÂíåÂø´ÁÖßÊñá‰ª∂Á≠â„ÄÇ ‰∏ªÈ¢òÁöÑÁÆ°ÁêÜ‰∏ªÈ¢òÁöÑÁÆ°ÁêÜÂåÖÊã¨ÂàõÂª∫‰∏ªÈ¢ò„ÄÅÊü•Áúã‰∏ªÈ¢ò‰ø°ÊÅØ„ÄÅ‰øÆÊîπ‰∏ªÈ¢òÂíåÂà†Èô§‰∏ªÈ¢òÁ≠âÊìç‰Ωú„ÄÇÂèØ‰ª•ÈÄöËøá kafka Êèê‰æõÁöÑ kafka-topics.sh ËÑöÊú¨ÊàñËÄÖ KafkaAdminClient ÁöÑÊñπÂºèÊù•ÂÆûÁé∞„ÄÇ Ëøô‰∏ÄÂ∞èËäÇÔºåÊàë‰ª¨‰∏ªË¶ÅËÆ≤ kafka-topics.sh ÁöÑÂÆûÁé∞„ÄÇ ÂàõÂª∫‰∏ªÈ¢òÈ¶ñÂÖàÂª∫ËÆÆÂÖàÂ∞ÜbrokerÁ´ØÈÖçÁΩÆÂèÇÊï∞auto.create.topics.enableËÆæÁΩÆ‰∏∫falseÔºàÈªòËÆ§ÂÄºÂ∞±ÊòØtrueÔºâÔºåÂõ†‰∏∫Â¶ÇÊûúÊòØÈªòËÆ§ÂÄºÔºåÂΩìÁîü‰∫ßËÄÖÊàñËÄÖÊ∂àË¥πËÄÖ‰∏é‰∏Ä‰∏™‰∏çÂ≠òÂú®ÁöÑ‰∏ªÈ¢òÊúâÂÖ≥Á≥ªÊó∂‰ºöËá™Âä®ÂàõÂª∫ËØ• topicÔºåËøôÁßçËá™Âä®ÂàõÂª∫‰∏ªÈ¢òÁöÑË°å‰∏∫ÊòØÈùûÈ¢ÑÊúüÁöÑÔºå‰ºöÂ¢ûÂä†‰∏ªÈ¢òÁöÑÁÆ°ÁêÜ‰∏éÁª¥Êä§ÁöÑÈöæÂ∫¶ÔºåÊâÄ‰ª•Âú®Áîü‰∫ßÁéØÂ¢É‰∏≠ÊúÄÂ•Ω‰∏çË¶ÅËøôÊ†∑„ÄÇ Êõ¥Âä†Êé®ËçêÁöÑÊñπÂºèÊòØÈÄöËøá kafka-topics.sh ËÑöÊú¨Êù•ÂàõÂª∫‰∏ªÈ¢òÔºåÂ¶ÇÂõæÊâÄÁ§∫Ôºö Êàë‰ª¨‰∏ç‰ªÖÂèØ‰ª•ÈÄöËøáÊó•ÂøóÊñá‰ª∂ÁöÑÊ†πÁõÆÂΩïÊù•Êü•ÁúãÈõÜÁæ§‰∏≠ÂêÑ‰∏™brokerÁöÑÂàÜÂå∫ÂâØÊú¨ÁöÑÂàÜÈÖçÊÉÖÂÜµÔºåËøòÂèØ‰ª•ÈÄöËøáZooKeeperÂÆ¢Êà∑Á´ØÊù•Ëé∑Âèñ„ÄÇÂΩìÂàõÂª∫‰∏Ä‰∏™‰∏ªÈ¢òÊó∂‰ºöÂú®ZooKeeperÁöÑ/brokers/topics/ÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™ÂêåÂêçÁöÑÂÆûËäÇÁÇπÔºåËØ•ËäÇÁÇπ‰∏≠ËÆ∞ÂΩï‰∫ÜËØ•‰∏ªÈ¢òÁöÑÂàÜÂå∫ÂâØÊú¨ÂàÜÈÖçÊñπÊ°à„ÄÇÁ§∫‰æãÂ¶Ç‰∏ãÔºöÔøº Á§∫‰æãÊï∞ÊçÆ‰∏≠ÁöÑ‚Äù2‚ÄùÔºö[1Ôºå2]Ë°®Á§∫ÂàÜÂå∫ 2 ÂàÜÈÖç‰∫Ü 2 ‰∏™ÂâØÊú¨ÔºåÂàÜÂà´Âú® brokerId ‰∏∫ 1 Âíå 2 ÁöÑ brokerËäÇÁÇπ‰∏≠„ÄÇ Âà∞ÁõÆÂâç‰∏∫Ê≠¢ÔºåÂàõÂª∫‰∏ªÈ¢òÊó∂ÁöÑÂàÜÂå∫ÂâØÊú¨ÈÉΩÊòØÊåâÁÖßÊó¢ÂÆöÁöÑÂÜÖÈÉ®ÈÄªËæëÊù•ËøõË°åÂàÜÈÖçÁöÑ„ÄÇ kafka-topics.sh ËÑöÊú¨‰∏≠ËøòÊèê‰æõ‰∫Ü‰∏Ä‰∏™ replica-assignment ÂèÇÊï∞Êù•ÊâãÂä®ÊåáÂÆöÂàÜÂå∫ÂâØÊú¨ÁöÑÂàÜÈÖçÊñπÊ°àÔºåÂ¶ÇÂõæÊâÄÁ§∫Ôºö Ê≥®ÊÑè‰∫ãÈ°πÔºö ‰∏ªÈ¢òÁöÑÂëΩÂêçÂêåÊ†∑‰∏çÊé®ËçêÔºàËôΩÁÑ∂ÂèØ‰ª•ËøôÊ†∑ÂÅöÔºâ‰ΩøÁî®Âèå‰∏ãÁîªÁ∫ø‚Äú‚ÄùÂºÄÂ§¥ÔºåÂõ†‰∏∫‰ª•Âèå‰∏ãÁîªÁ∫øÂºÄÂ§¥ÁöÑ‰∏ªÈ¢ò‰∏ÄËà¨Áúã‰ΩúKafkaÁöÑÂÜÖÈÉ®‰∏ªÈ¢òÔºåÊØîÂ¶Çconsumer_offsetsÂíå__transaction_state„ÄÇ ÂàÜÂå∫ÂâØÊú¨ÁöÑÂàÜÈÖçËøôÈáåÁöÑÂàÜÂå∫ÂàÜÈÖçÔºåË∑üÂâçÈù¢ÁöÑÁîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÁöÑÂàÜÂå∫ÂàÜÈÖç‰∏ç‰∏ÄÊ†∑„ÄÇÁîü‰∫ßËÄÖÁöÑÂàÜÂå∫ÂàÜÈÖçÊòØÊåá‰∏∫ÊØèÊù°Ê∂àÊÅØÊåáÂÆöÂÖ∂ÊâÄË¶ÅÂèëÂæÄÁöÑÂàÜÂå∫ÔºåÊ∂àË¥πËÄÖ‰∏≠ÁöÑÂàÜÂå∫ÂàÜÈÖçÊòØÊåá‰∏∫Ê∂àË¥πËÄÖÊåáÂÆöÂÖ∂ÂèØ‰ª•Ê∂àË¥πÊ∂àÊÅØÁöÑÂàÜÂå∫ÔºåËÄåËøôÈáåÁöÑÂàÜÂå∫ÂàÜÈÖçÊòØÊåá‰∏∫ÈõÜÁæ§Âà∂ÂÆöÂàõÂª∫‰∏ªÈ¢òÊó∂ÁöÑÂàÜÂå∫ÂâØÊú¨ÂàÜÈÖçÊñπÊ°àÔºåÂç≥Âú®Âì™‰∏™broker‰∏≠ÂàõÂª∫Âì™‰∫õÂàÜÂå∫ÁöÑÂâØÊú¨„ÄÇ Âú®ÂàõÂª∫‰∏ªÈ¢òÊó∂ÔºåÂ¶ÇÊûú‰ΩøÁî®‰∫Üreplica-assignmentÂèÇÊï∞ÔºåÈÇ£‰πàÂ∞±ÊåâÁÖßÊåáÂÆöÁöÑÊñπÊ°àÊù•ËøõË°åÂàÜÂå∫ÂâØÊú¨ÁöÑÂàõÂª∫ÔºõÂ¶ÇÊûúÊ≤°Êúâ‰ΩøÁî®replica-assignmentÂèÇÊï∞ÔºåÈÇ£‰πàÂ∞±ÈúÄË¶ÅÊåâÁÖßÂÜÖÈÉ®ÁöÑÈÄªËæëÊù•ËÆ°ÁÆóÂàÜÈÖçÊñπÊ°à‰∫Ü„ÄÇ ‰ΩøÁî®kafka-topics.shËÑöÊú¨ÂàõÂª∫‰∏ªÈ¢òÊó∂ÁöÑÂÜÖÈÉ®ÂàÜÈÖçÈÄªËæëÊåâÁÖßÊú∫Êû∂‰ø°ÊÅØÂàíÂàÜÊàê‰∏§ÁßçÁ≠ñÁï•ÔºöÊú™ÊåáÂÆöÊú∫Êû∂‰ø°ÊÅØÂíåÊåáÂÆöÊú∫Êû∂‰ø°ÊÅØ„ÄÇÈªòËÆ§Â∞±ÊòØ Êú™ÊåáÂÆöÊú∫Êû∂‰ø°ÊÅØÁöÑÂàÜÈÖçÁ≠ñÁï•„ÄåÂç≥ broker.rack ÂèÇÊï∞‰∏∫ null„Äç„ÄÇ Êü•Áúã‰∏ªÈ¢òÂú® kafka-topics.sh ‰∏≠‰ΩøÁî® list ÊàñËÄÖ describe Â∞±ÂèØ‰ª•Êü•Áúã‰∏ªÈ¢ò‰ø°ÊÅØ„ÄÇlist ÂèØ‰ª•Êü•ÁúãÊâÄÊúâÁöÑÂΩìÂâçÂèØÁî®‰∏ªÈ¢òÔºå describe ÂèØ‰ª•Êü•ÁúãÂçï‰∏™‰ø°ÊÅØÁöÑ‰∏ªÈ¢òÁöÑËØ¶ÁªÜ‰ø°ÊÅØ„ÄÇ]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
        <category>kafka Á≥ªÂàó</category>
      </categories>
      <tags>
        <tag>kafka</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∑±ÂÖ•ÁêÜËß£ kafkaÔºà‰∫åÔºâ]]></title>
    <url>%2F2020%2F04%2F25%2F%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%20kafka%EF%BC%88%E4%BA%8C%EF%BC%89.html</url>
    <content type="text"><![CDATA[Á¨¨‰∫åÁ´† Áîü‰∫ßËÄÖÂÆ¢Êà∑Á´ØÂºÄÂèë12345678910111213141516171819202122232425262728293031323334353637383940package Kafka.Demo1;import org.apache.kafka.clients.Metadata;import org.apache.kafka.clients.producer.KafkaProducer;import org.apache.kafka.clients.producer.ProducerConfig;import org.apache.kafka.clients.producer.ProducerRecord;import org.apache.kafka.clients.producer.RecordMetadata;import org.apache.kafka.common.serialization.StringSerializer;import java.util.Properties;import java.util.concurrent.Future;public class ProducerFastStart &#123; public static final String brokerList = "localhost:9092"; public static final String topic = "topic-demo"; public static void main(String[] args) &#123; Properties properties = new Properties();// properties.put("key.serializer","org.apache.kafka.common.serialization.StringSerializer"); properties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());// properties.put("value.serializer","org.apache.kafka.common.serialization.StringSerializer"); properties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG,StringSerializer.class.getName()); properties.put("bootstrap.servers",brokerList); KafkaProducer&lt;String,String&gt; producer = new KafkaProducer&lt;String, String&gt;(properties); // ÊûÑÈÄ†Ë¶ÅÂèëÈÄÅÁöÑÊ∂àÊÅØ ProducerRecord&lt;String, String&gt; record = new ProducerRecord&lt;&gt;(topic,"hello,baby"); // ÂèëÈÄÅÊ∂àÊÅØ try&#123; Future&lt;RecordMetadata&gt; future = producer.send(record); RecordMetadata recordMetadata = future.get(); System.out.println(recordMetadata.topic() + "-" + recordMetadata.partition() + "-" + recordMetadata.offset()); &#125; catch (Exception e)&#123; e.printStackTrace(); &#125; producer.close(); &#125;&#125; Áî±‰∏äËø∞‰ª£Á†ÅÂèØÁü•ÔºåÂú®Áîü‰∫ßËÄÖÂÆ¢Êà∑Á´ØÔºå‰∏Ä‰∏™Ê≠£Â∏∏ÁöÑÁîü‰∫ßÈÄªËæëÈúÄË¶ÅÂÖ∑Â§á‰ª•‰∏ãÂá†‰∏™Ê≠•È™§Ôºö ÈÖçÁΩÆÁîü‰∫ßËÄÖÂÆ¢Êà∑Á´ØÂèÇÊï∞ÂèäÂàõÂª∫Áõ∏Â∫îÁöÑÁîü‰∫ßËÄÖÂÆû‰æã„ÄÇ ÊûÑÂª∫ÂæÖÂèëÈÄÅÁöÑÊ∂àÊÅØ„ÄÇ ÂèëÈÄÅÊ∂àÊÅØ„ÄÇ ÂÖ≥Èó≠Áîü‰∫ßËÄÖÂÆû‰æã„ÄÇ ÈÖçÁΩÆÁîü‰∫ßËÄÖÂÆ¢Êà∑Á´ØÂèÇÊï∞ÂèäÂàõÂª∫Áîü‰∫ßËÄÖÂÆû‰æãÈ¶ñÂÖàÊòØÊúâ‰∏â‰∏™ÂøÖÈ°ªÈÖçÁΩÆÁöÑÂèÇÊï∞ÔºåÂàÜÂà´ÊòØ bootstrap.servers„ÄÅkey.serializer„ÄÅvalue.serializer„ÄÇ Bootstrap.servers ËØ•ÂèÇÊï∞Áî®Êù•ÊåáÂÆöÁîü‰∫ßËÄÖÂÆ¢Êà∑Á´ØËøûÊé•KafkaÈõÜÁæ§ÊâÄÈúÄÁöÑbrokerÂú∞ÂùÄÊ∏ÖÂçï„ÄÇÊ≥®ÊÑèËøôÈáåÂπ∂ÈùûÈúÄË¶ÅÊâÄÊúâÁöÑbrokerÂú∞ÂùÄÔºåÂõ†‰∏∫Áîü‰∫ßËÄÖ‰ºö‰ªéÁªôÂÆöÁöÑbrokerÈáåÊü•ÊâæÂà∞ÂÖ∂‰ªñbrokerÁöÑ‰ø°ÊÅØ„ÄÇ‰∏çËøáÂª∫ËÆÆËá≥Â∞ëË¶ÅËÆæÁΩÆ‰∏§‰∏™‰ª•‰∏äÁöÑbroker Âú∞ÂùÄ‰ø°ÊÅØÔºåÂΩìÂÖ∂‰∏≠‰ªªÊÑè‰∏Ä‰∏™ÂÆïÊú∫Êó∂ÔºåÁîü‰∫ßËÄÖ‰ªçÁÑ∂ÂèØ‰ª•ËøûÊé•Âà∞ KafkaÈõÜÁæ§‰∏ä„ÄÇ key.serializer &amp; value.serializer broker Á´ØÊé•Êî∂ÁöÑÊ∂àÊÅØÂøÖÈ°ª‰ª•Â≠óËäÇÊï∞ÁªÑÔºàbyte[]ÔºâÁöÑÂΩ¢ÂºèÂ≠òÂú®„ÄÇÂú®ÂèëÂæÄbroker‰πãÂâçÈúÄË¶ÅÂ∞ÜÊ∂àÊÅØ‰∏≠ÂØπÂ∫îÁöÑkeyÂíåvalueÂÅöÁõ∏Â∫îÁöÑÂ∫èÂàóÂåñÊìç‰ΩúÊù•ËΩ¨Êç¢ÊàêÂ≠óËäÇÊï∞ÁªÑ„ÄÇkey.serializerÂíåvalue.serializerËøô‰∏§‰∏™ÂèÇÊï∞ÂàÜÂà´Áî®Êù•ÊåáÂÆökeyÂíåvalueÂ∫èÂàóÂåñÊìç‰ΩúÁöÑÂ∫èÂàóÂåñÂô®ÔºåËøô‰∏§‰∏™ÂèÇÊï∞Êó†ÈªòËÆ§ÂÄº„ÄÇÊ≥®ÊÑèËøôÈáåÂøÖÈ°ªÂ°´ÂÜôÂ∫èÂàóÂåñÂô®ÁöÑÂÖ®ÈôêÂÆöÂêç„ÄÇ ÈÖçÁΩÆÂÆåÂèÇÊï∞‰πãÂêéÔºåÁõ¥Êé•ÂàõÂª∫Áîü‰∫ßËÄÖÂÆû‰æãÂ∞±ÂèØ‰ª•‰∫ÜÔºåÊ≥®ÊÑèËøôÈáåÁöÑ KafkaProducer ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÂèØ‰ª•Âú®Â§ö‰∏™Á∫øÁ®ã‰∏≠ÂÖ±‰∫´Âçï‰∏™KafkaProducerÂÆû‰æãÔºå‰πüÂèØ‰ª•Â∞ÜKafkaProducerÂÆû‰æãËøõË°åÊ±†ÂåñÊù•‰æõÂÖ∂‰ªñÁ∫øÁ®ãË∞ÉÁî®„ÄÇ Ê∂àÊÅØÁöÑÂèëÈÄÅÊ∂àÊÅØÁöÑÂèëÈÄÅÊúâ‰∏âÁßçÊñπÂºèÔºö ÂèëÂêéÂç≥Âøò„ÄÇ‰πüÂ∞±ÊòØÁõ¥Êé•ÊòæÂºèË∞ÉÁî® producer.send(record)Ôºå‰∏çÂÖ≥ÂøÉÊ∂àÊÅØÊòØÂê¶Ê≠£Á°ÆÂà∞ËææÊúçÂä°Âô®Á´ØÔºõ ÂêåÊ≠•„ÄÇproducer.send(record) ÁöÑËøîÂõûÁ±ªÂûã‰∏∫ Future&lt;RecordMetadata&gt;ÔºåÊâÄ‰ª•ÂèØ‰ª•‰ΩøÁî® future.get() ËøõË°åÂêåÊ≠•ÔºåRecordMetadata ÂØπË±°ÂåÖÂê´‰∫ÜÊ∂àÊÅØÁöÑ‰∏Ä‰∫õÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÔºåÊØîÂ¶ÇÂΩìÂâçÊ∂àÊÅØÁöÑ‰∏ªÈ¢ò„ÄÅÂàÜÂå∫Âè∑„ÄÅÂàÜÂå∫‰∏≠ÁöÑÂÅèÁßªÈáè„ÄÅÊó∂Èó¥Êà≥Á≠âÁ≠â„ÄÇ ÂºÇÊ≠•„ÄÇÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÔºåÁõ¥Êé•Âú® send() ‰∏≠‰ΩøÁî®ÂõûË∞ÉÂáΩÊï∞„ÄÇ Ê∂àÊÅØÂú®ÈÄöËøá send() ÊñπÊ≥ïÂèëÂæÄbrokerÁöÑËøáÁ®ã‰∏≠ÔºåÊúâÂèØËÉΩÈúÄË¶ÅÁªèËøáÊã¶Êà™Âô®ÔºàInterceptorÔºâ„ÄÅÂ∫èÂàóÂåñÂô®ÔºàSerializerÔºâÂíåÂàÜÂå∫Âô®ÔºàPartitionerÔºâÁöÑ‰∏ÄÁ≥ªÂàó‰ΩúÁî®‰πãÂêéÊâçËÉΩË¢´ÁúüÊ≠£Âú∞ÂèëÂæÄ broker„ÄÇÁîü‰∫ßËÄÖÊã¶Êà™Âô®ÂèØ‰ª•Áî®Êù•Âú®Ê∂àË¥πÊ∂àÊÅØÈí±ÂÅö‰∏Ä‰∫õÂáÜÂ§áÂ∑•‰ΩúÔºåÁÑ∂ÂêéÊ∂àÊÅØÁªèËøáÂ∫èÂàóÂåñ‰πãÂêéÂ∞±ÈúÄË¶ÅÁ°ÆÂÆöÂÆÉÂèëÂæÄÁöÑÂàÜÂå∫ÔºåÂ¶ÇÊûúÊ∂àÊÅØProducerRecord‰∏≠ÊåáÂÆö‰∫ÜpartitionÂ≠óÊÆµÔºåÈÇ£‰πàÂ∞±‰∏çÈúÄË¶ÅÂàÜÂå∫Âô®ÁöÑ‰ΩúÁî®ÔºåÂõ†‰∏∫partition‰ª£Ë°®ÁöÑÂ∞±ÊòØÊâÄË¶ÅÂèëÂæÄÁöÑÂàÜÂå∫Âè∑„ÄÇ Êã¶Êà™Âô®Ôºå‰∏ÄËà¨‰∏çÊòØÂøÖÈúÄÁöÑ„ÄÇÁîü‰∫ßËÄÖÊã¶Êà™Âô®Êó¢ÂèØ‰ª•Áî®Êù•Âú®Ê∂àÊÅØÂèëÈÄÅÂâçÂÅö‰∏Ä‰∫õÂáÜÂ§áÂ∑•‰ΩúÔºåÊØîÂ¶ÇÊåâÁÖßÊüê‰∏™ËßÑÂàôËøáÊª§‰∏çÁ¨¶ÂêàË¶ÅÊ±ÇÁöÑÊ∂àÊÅØ„ÄÅ‰øÆÊîπÊ∂àÊÅØÁöÑÂÜÖÂÆπÁ≠âÔºå‰πüÂèØ‰ª•Áî®Êù•Âú®ÂèëÈÄÅÂõûË∞ÉÈÄªËæëÂâçÂÅö‰∏Ä‰∫õÂÆöÂà∂ÂåñÁöÑÈúÄÊ±ÇÔºåÊØîÂ¶ÇÁªüËÆ°Á±ªÂ∑•‰Ωú„ÄÇKafkaProducer‰∏≠‰∏ç‰ªÖÂèØ‰ª•ÊåáÂÆö‰∏Ä‰∏™Êã¶Êà™Âô®ÔºåËøòÂèØ‰ª•ÊåáÂÆöÂ§ö‰∏™Êã¶Êà™Âô®‰ª•ÂΩ¢ÊàêÊã¶Êà™Èìæ„ÄÇ Áîü‰∫ßËÄÖÈúÄË¶ÅÁî®Â∫èÂàóÂåñÂô®ÔºàSerializerÔºâÊääÂØπË±°ËΩ¨Êç¢ÊàêÂ≠óËäÇÊï∞ÁªÑÊâçËÉΩÈÄöËøáÁΩëÁªúÂèëÈÄÅÁªôKafkaÔºåËøôÊòØÂøÖÈ°ªÁöÑ„ÄÇ ÂàÜÂå∫Âô®ÁöÑ‰ΩúÁî®Â∞±ÊòØ‰∏∫Ê∂àÊÅØÂàÜÈÖçÂàÜÂå∫„ÄÇÂ¶ÇÊûúÊ∂àÊÅØProducerRecord‰∏≠Ê≤°ÊúâÊåáÂÆöpartitionÂ≠óÊÆµÔºåÈÇ£‰πàÂ∞±ÈúÄË¶Å‰æùËµñÂàÜÂå∫Âô®ÔºåÊ†πÊçÆkeyËøô‰∏™Â≠óÊÆµÊù•ËÆ°ÁÆópartitionÁöÑÂÄº„ÄÇÂ¶ÇÊûúkey‰∏∫nullÔºåÈÇ£‰πàÊ∂àÊÅØÂ∞Ü‰ºö‰ª•ËΩÆËØ¢ÁöÑÊñπÂºèÂèëÂæÄ‰∏ªÈ¢òÂÜÖÁöÑÂêÑ‰∏™ÂèØÁî®ÂàÜÂå∫„ÄÇ ÂéüÁêÜÂàÜÊûêÂú®ÂâçÈù¢ÁöÑÁ´†ËäÇ‰∏≠ÔºåÊàë‰ª¨Â∑≤Áªè‰∫ÜËß£‰∫ÜKafkaProducerÁöÑÂÖ∑‰Ωì‰ΩøÁî®ÊñπÊ≥ïÔºåËÄåÊú¨ËäÇÁöÑÂÜÖÂÆπ‰∏ªË¶ÅÊòØÂØπKafka Áîü‰∫ßËÄÖÂÆ¢Êà∑Á´ØÁöÑÂÜÖÈÉ®ÂéüÁêÜËøõË°åÂàÜÊûêÔºåÈÄöËøá‰∫ÜËß£Áîü‰∫ßËÄÖÂÆ¢Êà∑Á´ØÁöÑÊï¥‰ΩìËÑâÁªúÂèØ‰ª•ËÆ©Êàë‰ª¨Êõ¥Â•ΩÂú∞‰ΩøÁî®ÂÆÉÔºåÈÅøÂÖçÂõ†‰∏∫‰∏Ä‰∫õÁêÜËß£‰∏äÁöÑÂÅèÂ∑ÆËÄåÈÄ†Êàê‰ΩøÁî®‰∏äÁöÑÈîôËØØ„ÄÇ Êï¥‰ΩìÊû∂ÊûÑ Áî±Ââç‰∏ÄÂ∞èÁªìÂèØÁü•ÔºåÁîü‰∫ßËÄÖÂÆ¢Êà∑Á´ØÁöÑsend()ÊòØÂºÇÊ≠•ÁöÑÔºåËØ¥ÊòéÊúâ‰∏§‰∏™Á∫øÁ®ãÂú®ËøêË°åÔºå‰πüÂ∞±ÊòØ‰∏ªÁ∫øÁ®ãÂíåsendÁ∫øÁ®ã„ÄÇÂú®‰∏ªÁ∫øÁ®ã‰∏≠Áî±KafkaProducerÂàõÂª∫Ê∂àÊÅØÔºåÁÑ∂ÂêéÈÄöËøáÂèØËÉΩÁöÑÊã¶Êà™Âô®„ÄÅÂ∫èÂàóÂåñÂô®ÂíåÂàÜÂå∫Âô®ÁöÑ‰ΩúÁî®‰πãÂêéÁºìÂ≠òÂà∞Ê∂àÊÅØÁ¥ØÂä†Âô®ÔºàRecordAccumulatorÔºå‰πüÁß∞‰∏∫Ê∂àÊÅØÊî∂ÈõÜÂô®Ôºâ‰∏≠„ÄÇSender Á∫øÁ®ãË¥üË¥£‰ªéRecordAccumulator‰∏≠Ëé∑ÂèñÊ∂àÊÅØÂπ∂Â∞ÜÂÖ∂ÂèëÈÄÅÂà∞Kafka‰∏≠„ÄÇRecordAccumulator ÁöÑÂÜÖÈÉ®‰∏∫ÊØè‰∏™ÂàÜÂå∫ÈÉΩÁª¥Êä§‰∫Ü‰∏Ä‰∏™ÂèåÁ´ØÈòüÂàóÔºåÈòüÂàó‰∏≠ÁöÑÂÜÖÂÆπÂ∞±ÊòØProducerBatchÔºåProducerBatch‰∏≠ÂèØ‰ª•ÂåÖÂê´‰∏ÄËá≥Â§ö‰∏™ ProducerRecord„ÄÇÊâÄ‰ª•Êàë‰ª¨ÂÖ∂ÂÆûÊúÄÁªàÂèëÈÄÅÁöÑÊ∂àÊÅØÊòØ ProducerBatch„ÄÇ ÂÖÉÊï∞ÊçÆÁöÑÊõ¥Êñ∞ÂÖÉÊï∞ÊçÆÊòØÊåáKafkaÈõÜÁæ§ÁöÑÂÖÉÊï∞ÊçÆÔºåËøô‰∫õÂÖÉÊï∞ÊçÆÂÖ∑‰ΩìËÆ∞ÂΩï‰∫ÜÈõÜÁæ§‰∏≠ÊúâÂì™‰∫õ‰∏ªÈ¢òÔºåËøô‰∫õ‰∏ªÈ¢òÊúâÂì™‰∫õÂàÜÂå∫ÔºåÊØè‰∏™ÂàÜÂå∫ÁöÑleaderÂâØÊú¨ÂàÜÈÖçÂú®Âì™‰∏™ËäÇÁÇπ‰∏äÔºåfollowerÂâØÊú¨ÂàÜÈÖçÂú®Âì™‰∫õËäÇÁÇπ‰∏äÔºåÂì™‰∫õÂâØÊú¨Âú®AR„ÄÅISRÁ≠âÈõÜÂêà‰∏≠ÔºåÈõÜÁæ§‰∏≠ÊúâÂì™‰∫õËäÇÁÇπÔºåÊéßÂà∂Âô®ËäÇÁÇπÂèàÊòØÂì™‰∏Ä‰∏™Á≠â‰ø°ÊÅØ„ÄÇ Âú®‰∏äÈù¢ÁöÑÁ¨¨ 8 Ê≠•‰πãÂâçÔºåÊàë‰ª¨Ë¶ÅÊåëÂá∫Ë¥üËΩΩÊúÄÂ∞èÁöÑ broker„ÄåÊØè‰∏™NodeÂú®InFlightRequests‰∏≠ËøòÊú™Á°ÆËÆ§ÁöÑËØ∑Ê±ÇÊï∞ÂÜ≥ÂÆöÁöÑÔºåÊú™Á°ÆËÆ§ÁöÑËØ∑Ê±ÇË∂äÂ§öÂàôËÆ§‰∏∫Ë¥üËΩΩË∂äÂ§ß„ÄçÔºåËøôÊ†∑Â∞±ËÉΩÂ§üÂ∞ΩÂø´ÁöÑÂèëÂá∫ÔºåÂõ†‰∏∫Âú®ÂèëÂá∫ÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨Ë¶ÅÂÖàËé∑ÂæóÂØπÂ∫îÁöÑ partition Âú®Âì™‰∏™ broker„ÄÅbroker ÊòØÂì™‰∏™ipÔºåÊâÄ‰ª•Âú®ÂèëÂá∫‰πãÂâçÈ¶ñÂÖàË¶ÅËøõË°åÂÖÉÊï∞ÊçÆÁöÑÊõ¥Êñ∞ÔºåËøôÈáåÊàë‰ª¨ËÇØÂÆöÊòØÂÖàÊåëÈÄâÂá∫leastLoadedNodeÔºåÁÑ∂ÂêéÂêëËøô‰∏™NodeÂèëÈÄÅMetadataRequestËØ∑Ê±ÇÊù•Ëé∑ÂèñÂÖ∑‰ΩìÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØ„ÄÇËøô‰∏™Êõ¥Êñ∞Êìç‰ΩúÊòØÁî±SenderÁ∫øÁ®ãÂèëËµ∑ÁöÑÔºåÂú®ÂàõÂª∫ÂÆåMetadataRequest‰πãÂêéÂêåÊ†∑‰ºöÂ≠òÂÖ•InFlightRequestsÔºå‰πãÂêéÁöÑÊ≠•È™§Â∞±ÂíåÂèëÈÄÅÊ∂àÊÅØÊó∂ÁöÑÁ±ª‰ºº„ÄÇÂÖÉÊï∞ÊçÆËôΩÁÑ∂Áî±SenderÁ∫øÁ®ãË¥üË¥£Êõ¥Êñ∞Ôºå‰ΩÜÊòØ‰∏ªÁ∫øÁ®ã‰πüÈúÄË¶ÅËØªÂèñËøô‰∫õ‰ø°ÊÅØÔºåËøôÈáåÁöÑÊï∞ÊçÆÂêåÊ≠•ÈÄöËøásynchronizedÂíåfinalÂÖ≥ÈîÆÂ≠óÊù•‰øùÈöú„ÄÇ ÈáçË¶ÅÁöÑÁîü‰∫ßËÄÖÂèÇÊï∞ acks„ÄÇËøô‰∏™ÂèÇÊï∞Áî®Êù•ÊåáÂÆöÂàÜÂå∫‰∏≠ÂøÖÈ°ªË¶ÅÊúâÂ§öÂ∞ë‰∏™ÂâØÊú¨Êî∂Âà∞ËøôÊù°Ê∂àÊÅØÔºå‰πãÂêéÁîü‰∫ßËÄÖÊâç‰ºöËÆ§‰∏∫ËøôÊù°Ê∂àÊÅØÊòØÊàêÂäüÂÜôÂÖ•ÁöÑ„ÄÇ acks = 1„ÄÇÁîü‰∫ßËÄÖÂèëÈÄÅÊ∂àÊÅØ‰πãÂêéÔºåÂè™Ë¶ÅÂàÜÂå∫ÁöÑleaderÂâØÊú¨ÊàêÂäüÂÜôÂÖ•Ê∂àÊÅØÔºåÈÇ£‰πàÂÆÉÂ∞±‰ºöÊî∂Âà∞Êù•Ëá™ÊúçÂä°Á´ØÁöÑÊàêÂäüÂìçÂ∫îÔºåÊòØÊ∂àÊÅØÂèØÈù†ÊÄßÂíåÂêûÂêêÈáèÁöÑÊäò‰∏≠ÊñπÊ°à„ÄÇ acks=0„ÄÇÁîü‰∫ßËÄÖÂèëÈÄÅÊ∂àÊÅØ‰πãÂêé‰∏çÈúÄË¶ÅÁ≠âÂæÖ‰ªª‰ΩïÊúçÂä°Á´ØÁöÑÂìçÂ∫îÔºåÂèØ‰ª•Ëé∑ÂèñÊúÄÂ§ßÁöÑÂêûÂêêÈáè„ÄÇ acks=-1Êàñacks=all„ÄÇÁîü‰∫ßËÄÖÂú®Ê∂àÊÅØÂèëÈÄÅ‰πãÂêéÔºåÈúÄË¶ÅÁ≠âÂæÖISR‰∏≠ÁöÑÊâÄÊúâÂâØÊú¨ÈÉΩÊàêÂäüÂÜôÂÖ•Ê∂àÊÅØ‰πãÂêéÊâçËÉΩÂ§üÊî∂Âà∞Êù•Ëá™ÊúçÂä°Á´ØÁöÑÊàêÂäüÂìçÂ∫î„ÄÇ‰ΩÜËøôÂπ∂‰∏çÊÑèÂë≥ÁùÄÊ∂àÊÅØÂ∞±‰∏ÄÂÆöÂèØÈù†ÔºåÂõ†‰∏∫ISR‰∏≠ÂèØËÉΩÂè™ÊúâleaderÂâØÊú¨ÔºåËøôÊ†∑Â∞±ÈÄÄÂåñÊàê‰∫Üacks=1ÁöÑÊÉÖÂÜµ„ÄÇ Ê≥®ÊÑèÂì¶ÔºåËøôÈáåÁöÑ acks ÂèÇÊï∞ÈÖçÁΩÆÁöÑÂÄºÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåËÄå‰∏çÊòØÊï¥Êï∞Âûã„ÄÇ Max.request.size„ÄÇËøô‰∏™ÂèÇÊï∞Áî®Êù•ÈôêÂà∂Áîü‰∫ßËÄÖÂÆ¢Êà∑Á´ØËÉΩÂèëÈÄÅÁöÑÊ∂àÊÅØÁöÑÊúÄÂ§ßÂÄºÔºåÈªòËÆ§ÂÄº‰∏∫ 1048576BÔºåÂç≥ 1MB„ÄÇ retriesÂíåretry.backoff.ms„ÄÇretriesÂèÇÊï∞Áî®Êù•ÈÖçÁΩÆÁîü‰∫ßËÄÖÈáçËØïÁöÑÊ¨°Êï∞ÔºåÈªòËÆ§ÂÄº‰∏∫0ÔºåÂç≥Âú®ÂèëÁîüÂºÇÂ∏∏ÁöÑÊó∂ÂÄô‰∏çËøõË°å‰ªª‰ΩïÈáçËØïÂä®‰Ωú„ÄÇretry.backoff.msÂèÇÊï∞Áî®Êù•ËÆæÂÆö‰∏§Ê¨°ÈáçËØï‰πãÈó¥ÁöÑÊó∂Èó¥Èó¥Èöî„ÄÇ compression.type„ÄÇÈªòËÆ§‰∏∫ ‚Äúnone‚ÄùÔºåÂéãÁº©ÂèØ‰ª•ÂáèÂ∞ëÁΩëÁªú‰º†ËæìÈáèÔºåÈôç‰ΩéÁΩëÁªúI/O„ÄÇ request.timeout.ms„ÄÇËøô‰∏™ÂèÇÊï∞Áî®Êù•ÈÖçÁΩÆProducerÁ≠âÂæÖËØ∑Ê±ÇÂìçÂ∫îÁöÑÊúÄÈïøÊó∂Èó¥ÔºåÈªòËÆ§ÂÄº‰∏∫30000ÔºàmsÔºâ„ÄÇËØ∑Ê±ÇË∂ÖÊó∂‰πãÂêéÂèØ‰ª•ÈÄâÊã©ËøõË°åÈáçËØï„ÄÇ ÊÄªÁªìÊú¨Á´†‰∏ªË¶ÅËÆ≤Ëø∞‰∫ÜÁîü‰∫ßËÄÖÂÆ¢Êà∑Á´ØÁöÑÂÖ∑‰ΩìÁî®Ê≥ïÂèäÂÖ∂Êï¥‰ΩìÊû∂ÊûÑÔºå‰∏ªË¶ÅÂÜÖÂÆπÂåÖÊã¨ÈÖçÁΩÆÂèÇÊï∞ÁöÑËØ¶Ëß£„ÄÅÊ∂àÊÅØÁöÑÂèëÈÄÅÊñπÂºè„ÄÅÂ∫èÂàóÂåñÂô®„ÄÅÂàÜÂå∫Âô®„ÄÅÊã¶Êà™Âô®Á≠â„ÄÇ ÂØπ‰∫éKafkaProducerËÄåË®ÄÔºåÂÆÉÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÊàë‰ª¨ÂèØ‰ª•Âú®Â§öÁ∫øÁ®ãÁöÑÁéØÂ¢É‰∏≠Â§çÁî®ÂÆÉÔºåËÄåÂØπ‰∫é‰∏ã‰∏ÄÁ´†ÁöÑÊ∂àË¥πËÄÖÂÆ¢Êà∑Á´ØKafkaConsumerËÄåË®ÄÔºåÂÆÉÊòØÈùûÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÂõ†‰∏∫ÂÆÉÂÖ∑Â§á‰∫ÜÁä∂ÊÄÅ„ÄÇ Á¨¨‰∏âÁ´† Ê∂àË¥πËÄÖÊ∂àË¥πËÄÖÂíåÊ∂àË¥πËÄÖÁªÑÁöÑÊ¶ÇÂøµÊ∂àË¥πËÄÖÔºàConsumerÔºâË¥üË¥£ËÆ¢ÈòÖKafka‰∏≠ÁöÑ‰∏ªÈ¢òÔºàTopicÔºâÔºåÂπ∂‰∏î‰ªéËÆ¢ÈòÖÁöÑ‰∏ªÈ¢ò‰∏äÊãâÂèñÊ∂àÊÅØ„ÄÇ‰∏éÂÖ∂‰ªñ‰∏Ä‰∫õÊ∂àÊÅØ‰∏≠Èó¥‰ª∂‰∏çÂêåÁöÑÊòØÔºöÂú®KafkaÁöÑÊ∂àË¥πÁêÜÂøµ‰∏≠ËøòÊúâ‰∏ÄÂ±ÇÊ∂àË¥πÁªÑÔºàConsumer GroupÔºâÁöÑÊ¶ÇÂøµÔºåÊØè‰∏™Ê∂àË¥πËÄÖÈÉΩÊúâ‰∏Ä‰∏™ÂØπÂ∫îÁöÑÊ∂àË¥πÁªÑ„ÄÇÂΩìÊ∂àÊÅØÂèëÂ∏ÉÂà∞‰∏ªÈ¢òÂêéÔºåÂè™‰ºöË¢´ÊäïÈÄíÁªôËÆ¢ÈòÖÂÆÉÁöÑÊØè‰∏™Ê∂àË¥πÁªÑ‰∏≠ÁöÑ‰∏Ä‰∏™Ê∂àË¥πËÄÖ„ÄÇ ÂØπ‰∫éÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ËÄåË®ÄÔºå‰∏ÄËà¨Êúâ‰∏§ÁßçÊ∂àÊÅØÊäïÈÄíÊ®°ÂºèÔºöÁÇπÂØπÁÇπÔºàP2PÔºåPoint-to-PointÔºâÊ®°ÂºèÂíåÂèëÂ∏É/ËÆ¢ÈòÖÔºàPub/SubÔºâÊ®°Âºè„ÄÇ Â¶ÇÊûúÊâÄÊúâÁöÑÊ∂àË¥πËÄÖÈÉΩÈö∂Â±û‰∫éÂêå‰∏Ä‰∏™Ê∂àË¥πÁªÑÔºåÈÇ£‰πàÊâÄÊúâÁöÑÊ∂àÊÅØÈÉΩ‰ºöË¢´ÂùáË°°Âú∞ÊäïÈÄíÁªôÊØè‰∏Ä‰∏™Ê∂àË¥πËÄÖÔºåÂç≥ÊØèÊù°Ê∂àÊÅØÂè™‰ºöË¢´‰∏Ä‰∏™Ê∂àË¥πËÄÖÂ§ÑÁêÜÔºåËøôÂ∞±Áõ∏ÂΩì‰∫éÁÇπÂØπÁÇπÊ®°ÂºèÁöÑÂ∫îÁî®„ÄÇ Â¶ÇÊûúÊâÄÊúâÁöÑÊ∂àË¥πËÄÖÈÉΩÈö∂Â±û‰∫é‰∏çÂêåÁöÑÊ∂àË¥πÁªÑÔºåÈÇ£‰πàÊâÄÊúâÁöÑÊ∂àÊÅØÈÉΩ‰ºöË¢´ÂπøÊí≠ÁªôÊâÄÊúâÁöÑÊ∂àË¥πËÄÖÔºåÂç≥ÊØèÊù°Ê∂àÊÅØ‰ºöË¢´ÊâÄÊúâÁöÑÊ∂àË¥πËÄÖÂ§ÑÁêÜÔºåËøôÂ∞±Áõ∏ÂΩì‰∫éÂèëÂ∏É/ËÆ¢ÈòÖÊ®°ÂºèÁöÑÂ∫îÁî®„ÄÇ ÂÆ¢Êà∑Á´ØÂºÄÂèë‰∏Ä‰∏™Ê≠£Â∏∏ÁöÑÊ∂àË¥πÈÄªËæëÈúÄË¶ÅÂÖ∑Â§á‰ª•‰∏ãÂá†‰∏™Ê≠•È™§Ôºö ÈÖçÁΩÆÊ∂àË¥πËÄÖÂÆ¢Êà∑Á´ØÂèÇÊï∞ÂèäÂàõÂª∫Áõ∏Â∫îÁöÑÊ∂àË¥πËÄÖÂÆû‰æã„ÄÇ ËÆ¢ÈòÖ‰∏ªÈ¢ò„ÄÇ ÊãâÂèñÊ∂àÊÅØÂπ∂Ê∂àË¥π„ÄÇ Êèê‰∫§Ê∂àË¥π‰ΩçÁßª„ÄÇ ÂÖ≥Èó≠Ê∂àË¥πËÄÖÂÆû‰æã„ÄÇ Demo: 1234567891011121314151617181920212223242526272829303132333435package Kafka.Chapter1;import org.apache.kafka.clients.consumer.ConsumerRecord;import org.apache.kafka.clients.consumer.ConsumerRecords;import org.apache.kafka.clients.consumer.KafkaConsumer;import java.time.Duration;import java.util.Collections;import java.util.Properties;public class ConsumerFastStart &#123; public static final String brokerList = "localhost:9092"; public static final String topic = "topic-demo"; public static final String groupId = "group.demo"; public static void main(String[] args) &#123; Properties properties = new Properties(); properties.put("key.deserializer","org.apache.kafka.common.serialization.StringDeserializer"); properties.put("value.deserializer","org.apache.kafka.common.serialization.StringDeserializer"); properties.put("bootstrap.servers",brokerList); properties.put("group.id",groupId); KafkaConsumer&lt;String,String&gt; consumer = new KafkaConsumer&lt;String, String&gt;(properties); // ËÆ¢ÈòÖ‰∏ªÈ¢ò consumer.subscribe(Collections.singletonList(topic)); // Âæ™ÁéØËØªÂèñÊ∂àÊÅØ while (true)&#123; ConsumerRecords&lt;String,String&gt; records = consumer.poll(Duration.ZERO); for(ConsumerRecord&lt;String,String&gt; records1 : records)&#123; System.out.println(records1.value()); &#125; &#125; &#125;&#125; ÈÖçÁΩÆÊ∂àË¥πËÄÖÂÆ¢Êà∑Á´ØÂèÇÊï∞ÂèäÂàõÂª∫Áõ∏Â∫îÁöÑÊ∂àË¥πËÄÖÂÆû‰æãË∑üÁîü‰∫ßËÄÖÂÆ¢Êà∑Á´ØÂèÇÊï∞Â∑Æ‰∏çÂ§öÔºåËøôÈáåÂ§ö‰∫Ü‰∏Ä‰∏™ group.id„ÄÇ bootstrap.servers„ÄÇ group.idÔºöÊ∂àË¥πËÄÖÈö∂Â±ûÁöÑÊ∂àË¥πÁªÑÁöÑÂêçÁß∞ÔºåÈªòËÆ§ÂÄº‰∏∫‚Äú‚Äù„ÄÇÂ¶ÇÊûúËÆæÁΩÆ‰∏∫Á©∫ÔºåÂàô‰ºöÊä•Âá∫ÂºÇÂ∏∏ÔºöException in thread ‚Äúmain‚Äù org.apache.kafka.common.errors.InvalidGroupIdExceptionÔºöThe configured groupId is invalid„ÄÇ‰∏ÄËà¨ËÄåË®ÄÔºåËøô‰∏™ÂèÇÊï∞ÈúÄË¶ÅËÆæÁΩÆÊàêÂÖ∑Êúâ‰∏ÄÂÆöÁöÑ‰∏öÂä°ÊÑè‰πâÁöÑÂêçÁß∞„ÄÇ key.deserializer Âíå value.deserializer„ÄÇÊ∂àË¥πËÄÖ‰ªébrokerÁ´ØËé∑ÂèñÁöÑÊ∂àÊÅØÊ†ºÂºèÈÉΩÊòØÂ≠óËäÇÊï∞ÁªÑÔºàbyte[]ÔºâÁ±ªÂûãÔºåÊâÄ‰ª•ÈúÄË¶ÅÊâßË°åÁõ∏Â∫îÁöÑÂèçÂ∫èÂàóÂåñÊìç‰ΩúÊâçËÉΩËøòÂéüÊàêÂéüÊúâÁöÑÂØπË±°Ê†ºÂºè„ÄÇËøô‰∏§‰∏™ÂèÇÊï∞ÂàÜÂà´Áî®Êù•ÊåáÂÆöÊ∂àÊÅØ‰∏≠keyÂíåvalueÊâÄÈúÄÂèçÂ∫èÂàóÂåñÊìç‰ΩúÁöÑÂèçÂ∫èÂàóÂåñÂô®ÔºåËøô‰∏§‰∏™ÂèÇÊï∞Êó†ÈªòËÆ§ÂÄº„ÄÇÊ≥®ÊÑèËøôÈáåÂøÖÈ°ªÂ°´ÂÜôÂèçÂ∫èÂàóÂåñÂô®Á±ªÁöÑÂÖ®ÈôêÂÆöÂêçÔºåÊØîÂ¶ÇÁ§∫‰æã‰∏≠ÁöÑorg.apache.kafka.common.serialization.StringDeserializerÔºåÂçïÂçïÊåáÂÆöStringDeserializerÊòØÈîôËØØÁöÑ„ÄÇ Ê∂àÊÅØÁöÑÊ∂àË¥πËÆ¢ÈòÖ‰∏ªÈ¢òÈÖçÁΩÆÂÆåÂèÇÊï∞„ÄÅÂàõÂª∫ÂÆåÊ∂àË¥πËÄÖÂÆû‰æã‰πãÂêéÔºåÂ∞±ÊòØÈÄâÊã©ËÆ¢ÈòÖ‰∏ªÈ¢ò‰∫Ü„ÄÇÈõÜÂêàËÆ¢ÈòÖÁöÑÊñπÂºèsubscribeÔºàCollectionÔºâ„ÄÅÊ≠£ÂàôË°®ËææÂºèËÆ¢ÈòÖÁöÑÊñπÂºèsubscribeÔºàPatternÔºâÂíåÊåáÂÆöÂàÜÂå∫ÁöÑËÆ¢ÈòÖÊñπÂºè assignÔºàCollectionÔºâÂàÜË°®‰ª£Ë°®‰∫Ü‰∏âÁßç‰∏çÂêåÁöÑËÆ¢ÈòÖÁä∂ÊÄÅÔºöAUTO_TOPICS„ÄÅAUTO_PATTERNÂíåUSER_ASSIGNEDÔºàÂ¶ÇÊûúÊ≤°ÊúâËÆ¢ÈòÖÔºåÈÇ£‰πàËÆ¢ÈòÖÁä∂ÊÄÅ‰∏∫NONEÔºâ„ÄÇ ÈõÜÂêàËÆ¢ÈòÖÁöÑÊñπÂºèsubscribeÔºàCollectionÔºâ„ÄÅÊ≠£ÂàôË°®ËææÂºèËÆ¢ÈòÖÁöÑÊñπÂºèsubscribeÔºàPatternÔºâÂíåÊåáÂÆöÂàÜÂå∫ÁöÑËÆ¢ÈòÖÊñπÂºè assignÔºàCollectionÔºâÂàÜË°®‰ª£Ë°®‰∫Ü‰∏âÁßç‰∏çÂêåÁöÑËÆ¢ÈòÖÁä∂ÊÄÅÔºöAUTO_TOPICS„ÄÅAUTO_PATTERNÂíåUSER_ASSIGNEDÔºàÂ¶ÇÊûúÊ≤°ÊúâËÆ¢ÈòÖÔºåÈÇ£‰πàËÆ¢ÈòÖÁä∂ÊÄÅ‰∏∫NONEÔºâ„ÄÇ ÈÄöËøá assign() ÊñπÊ≥ïËÆ¢ÈòÖÂàÜÂå∫Êó∂ÔºåÊòØ‰∏çÂÖ∑Â§áÊ∂àË¥πËÄÖËá™Âä®ÂùáË°°ÁöÑÂäüËÉΩÁöÑÔºåÂõ†‰∏∫ÂÖ∂ÊåáÂÆö‰∫Ü TopicPartition„ÄÇ ÊãâÂèñÊ∂àÊÅØËÆ¢ÈòÖÂÆå‰∏ªÈ¢ò‰πãÂêéÔºåÂ∞±Ë¶ÅÂºÄÂßãÊãâÂèñÊ∂àÊÅØ‰∫Ü„ÄÇKafka‰∏≠ÁöÑÊ∂àË¥πÊòØÂü∫‰∫éÊãâÊ®°ÂºèÁöÑ„ÄÇÊ∂àÊÅØÁöÑÊ∂àË¥π‰∏ÄËà¨Êúâ‰∏§ÁßçÊ®°ÂºèÔºöÊé®Ê®°ÂºèÂíåÊãâÊ®°Âºè„ÄÇÊé®Ê®°ÂºèÊòØÊúçÂä°Á´Ø‰∏ªÂä®Â∞ÜÊ∂àÊÅØÊé®ÈÄÅÁªôÊ∂àË¥πËÄÖÔºåËÄåÊãâÊ®°ÂºèÊòØÊ∂àË¥πËÄÖ‰∏ªÂä®ÂêëÊúçÂä°Á´ØÂèëËµ∑ËØ∑Ê±ÇÊù•ÊãâÂèñÊ∂àÊÅØ„ÄÇ‰∏ÄËà¨Â∞±ÊòØÈááÁî® poll() ËøõË°åÊ∂àÊÅØÁöÑÊ∂àË¥πÔºåËØ•ÊñπÊ≥ïÊ∂âÂèäÊ∂àË¥π‰ΩçÁßª„ÄÅÊ∂àË¥πËÄÖÂçèË∞ÉÂô®„ÄÅÁªÑÂçèË∞ÉÂô®„ÄÅÊ∂àË¥πËÄÖÁöÑÈÄâ‰∏æ„ÄÅÂàÜÂå∫ÂàÜÈÖçÁöÑÂàÜÂèë„ÄÅÂÜçÂùáË°°ÁöÑÈÄªËæë„ÄÅÂøÉË∑≥Á≠âÂÜÖÂÆπÔºåÂêéÁª≠Á´†ËäÇ‰ºöËØ¶ÁªÜ‰ªãÁªç„ÄÇ ‰øÆÊîπÂÅèÁßªÈáèÊ∂àË¥πÂÆåÊ∂àÊÅØ‰πãÂêéÔºåÂ∞±ÈúÄË¶Å‰øÆÊîπÂÅèÁßªÈáè‰∫Ü„ÄÇÂú®ÊØèÊ¨°Ë∞ÉÁî®pollÔºàÔºâÊñπÊ≥ïÊó∂ÔºåÂÆÉËøîÂõûÁöÑÊòØËøòÊ≤°ÊúâË¢´Ê∂àË¥πËøáÁöÑÊ∂àÊÅØÈõÜÔºåË¶ÅÂÅöÂà∞Ëøô‰∏ÄÁÇπÔºåÂ∞±ÈúÄË¶ÅËÆ∞ÂΩï‰∏ä‰∏ÄÊ¨°Ê∂àË¥πÊó∂ÁöÑÊ∂àË¥π‰ΩçÁßª„ÄÇÊ∂àË¥π‰ΩçÁßªÂ≠òÂÇ®Âú®KafkaÂÜÖÈÉ®ÁöÑ‰∏ªÈ¢ò__consumer_offsets‰∏≠„ÄÇ Âú® Kafka ‰∏≠ÔºåÊúâ Ëá™Âä®Êèê‰∫§ÂÅèÁßªÈáè Âíå ÊâãÂä®Êèê‰∫§ÂÅèÁßªÈáèÔºåÈªòËÆ§ÁöÑÊòØËá™Âä®Êèê‰∫§ÂÅèÁßªÈáèÔºåÔºåÂ•ΩÂ§ÑÂ∞±ÊòØÂÖçÂéª‰∫ÜÂ§çÊùÇÁöÑ‰ΩçÁßªÊèê‰∫§ÈÄªËæëÔºåÂùèÂ§ÑÂ∞±ÊòØÂÅèÁßªÈáèÁöÑ‰øÆÊîπ‰∫§Áî±ÊúçÂä°Âô®Ëá™Ë∫´ÂéªÂ§ÑÁêÜÁöÑËØù‰ºöÂØºËá¥ÈáçÂ§çÊ∂àË¥πÂíåÊ∂àÊÅØ‰∏¢Â§±ÁöÑÊÉÖÂÜµÔºåËá™Âä®‰ΩçÁßªÊèê‰∫§ÁöÑÂä®‰ΩúÊòØÂú®pollÔºàÔºâÊñπÊ≥ïÁöÑÈÄªËæëÈáåÂÆåÊàêÁöÑÔºåÂú®ÊØèÊ¨°ÁúüÊ≠£ÂêëÊúçÂä°Á´ØÂèëËµ∑ÊãâÂèñËØ∑Ê±Ç‰πãÂâç‰ºöÊ£ÄÊü•ÊòØÂê¶ÂèØ‰ª•ËøõË°å‰ΩçÁßªÊèê‰∫§ÔºåÂ¶ÇÊûúÂèØ‰ª•ÔºåÈÇ£‰πàÂ∞±‰ºöÊèê‰∫§‰∏ä‰∏ÄÊ¨°ËΩÆËØ¢ÁöÑ‰ΩçÁßª„ÄÇ ÊâÄ‰ª•ÔºåÊúâÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÈúÄË¶ÅÊâãÂä®ÊéßÂà∂‰ΩçÁßªÊèê‰∫§ÔºåÂºÄÂêØÊâãÂä®Êèê‰∫§ÂäüËÉΩÁöÑÂâçÊèêÊòØÊ∂àË¥πËÄÖÂÆ¢Êà∑Á´ØÂèÇÊï∞ enable.auto.commit ÈÖçÁΩÆ‰∏∫ false„ÄÇÊâãÂä®Êèê‰∫§ÂèØ‰ª•ÁªÜÂàÜ‰∏∫ÂêåÊ≠•Êèê‰∫§ÂíåÂºÇÊ≠•Êèê‰∫§ÔºåÂØπÂ∫î‰∫é KafkaConsumer ‰∏≠ÁöÑ commitSyncÔºàÔºâÂíåcommitAsyncÔºàÔºâ‰∏§ÁßçÁ±ªÂûãÁöÑÊñπÊ≥ï„ÄÇÂêåÊ≠•Êèê‰∫§‰ºöÈòªÂ°ûÊ∂àË¥πËÄÖÁ∫øÁ®ãÁõ¥Âà∞‰ΩçÁßªÊèê‰∫§ÂÆåÊàêÔºåÂºÇÊ≠•Êèê‰∫§‰∏ç‰ºöÈòªÂ°ûÔºå‰ΩÜÊòØÂæàÂèØËÉΩÂØºËá¥ÈáçÂ§çÊ∂àË¥πÁöÑÈóÆÈ¢òÔºåÊâÄ‰ª•‰∏ÄËà¨ÈááÁî®‰ª•‰∏ãÁöÑÊñπÂºèÔºö ÊåáÂÆö‰ΩçÁßªÊ∂àË¥πÂú® Kafka ‰∏≠ÊØèÂΩìÊ∂àË¥πËÄÖÊü•Êâæ‰∏çÂà∞ÊâÄËÆ∞ÂΩïÁöÑÊ∂àË¥π‰ΩçÁßªÊó∂ÔºåÂ∞±‰ºöÊ†πÊçÆÊ∂àË¥πËÄÖÂÆ¢Êà∑Á´ØÂèÇÊï∞auto.offset.resetÁöÑÈÖçÁΩÆÊù•ÂÜ≥ÂÆö‰ªé‰ΩïÂ§ÑÂºÄÂßãËøõË°åÊ∂àË¥πÔºåËøô‰∏™ÂèÇÊï∞ÁöÑÈªòËÆ§ÂÄº‰∏∫‚Äúlatest‚ÄùÔºåË°®Á§∫‰ªéÂàÜÂå∫Êú´Â∞æÂºÄÂßãÊ∂àË¥πÊ∂àÊÅØ„ÄÇËøòÊúâ‰∏Ä‰∏™ÂØπÂ∫îÁöÑÂÄºÊòØ‚Äùearliest‚Äú„ÄÇ auto.offset.resetÂèÇÊï∞ËøòÊúâ‰∏Ä‰∏™ÂèØÈÖçÁΩÆÁöÑÂÄº‚Äî‚Äúnone‚ÄùÔºåÈÖçÁΩÆ‰∏∫Ê≠§ÂÄºÂ∞±ÊÑèÂë≥ÁùÄÂá∫Áé∞Êü•Âà∞‰∏çÂà∞Ê∂àË¥π‰ΩçÁßªÁöÑÊó∂ÂÄôÔºåÊó¢‰∏ç‰ªéÊúÄÊñ∞ÁöÑÊ∂àÊÅØ‰ΩçÁΩÆÂ§ÑÂºÄÂßãÊ∂àË¥πÔºå‰πü‰∏ç‰ªéÊúÄÊó©ÁöÑÊ∂àÊÅØ‰ΩçÁΩÆÂ§ÑÂºÄÂßãÊ∂àË¥πÔºåÊ≠§Êó∂‰ºöÊä•Âá∫NoOffsetForPartitionExceptionÂºÇÂ∏∏„ÄÇ Âà∞ÁõÆÂâç‰∏∫Ê≠¢ÔºåÊàë‰ª¨‰∏ÄÁõ¥ÈÉΩÊòØ‰ΩøÁî® poll() ‰∏≠ÁöÑÈÄªËæëÊù•ËøõË°åÊï∞ÊçÆÁöÑÊãâÂèñÔºåÊØîÂ¶ÇËá™Âä®‰øÆÊîπÂÅèÁßªÈáè„ÄÅ‰ΩøÁî® auto.offset.reset Êù•ÂÜ≥ÂÆö‰ªéÊú´Â∞æÂºÄÂßãÊ∂àË¥πÔºå‰ΩÜÊòØÊàë‰ª¨Âè™ËÉΩÁ≤óÁ≤íÂ∫¶ÁöÑ‰ªéÂºÄÂ§¥ÊàñËÄÖÊú´Â∞æËøõË°åÊ∂àË¥πÔºåÈÇ£ÊúâÊ≤°Êúâ‰∏Ä‰∏™Êõ¥ÁªÜÁ≤íÂ∫¶ÁöÑÊñπÊ≥ïÂë¢ÔºüÂΩìÁÑ∂ÊúâÔºåÈÇ£Â∞±ÊòØKafkaConsumer ‰∏≠ÁöÑ seekÔºàÔºâÊñπÊ≥ï„ÄÇ 1public void seek(TopicPartition partition,long offset) seekÔºàÔºâÊñπÊ≥ï‰∏≠ÁöÑÂèÇÊï∞partitionË°®Á§∫ÂàÜÂå∫ÔºåËÄåoffsetÂèÇÊï∞Áî®Êù•ÊåáÂÆö‰ªéÂàÜÂå∫ÁöÑÂì™‰∏™‰ΩçÁΩÆÂºÄÂßãÊ∂àË¥π„ÄÇseekÔºàÔºâÊñπÊ≥ïÂè™ËÉΩÈáçÁΩÆÊ∂àË¥πËÄÖÂàÜÈÖçÂà∞ÁöÑÂàÜÂå∫ÁöÑÊ∂àË¥π‰ΩçÁΩÆÔºåËÄåÂàÜÂå∫ÁöÑÂàÜÈÖçÊòØÂú® pollÔºàÔºâÊñπÊ≥ïÁöÑË∞ÉÁî®ËøáÁ®ã‰∏≠ÂÆûÁé∞ÁöÑ„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂú®ÊâßË°åseekÔºàÔºâÊñπÊ≥ï‰πãÂâçÈúÄË¶ÅÂÖàÊâßË°å‰∏ÄÊ¨°pollÔºàÔºâÊñπÊ≥ïÔºåÁ≠âÂà∞ÂàÜÈÖçÂà∞ÂàÜÂå∫‰πãÂêéÊâçÂèØ‰ª•ÈáçÁΩÆÊ∂àË¥π‰ΩçÁΩÆ„ÄÇ seekÔºàÔºâÊñπÊ≥ï‰∏∫Êàë‰ª¨Êèê‰æõ‰∫Ü‰ªéÁâπÂÆö‰ΩçÁΩÆËØªÂèñÊ∂àÊÅØÁöÑËÉΩÂäõÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáËøô‰∏™ÊñπÊ≥ïÊù•ÂêëÂâçË∑≥ËøáËã•Âπ≤Ê∂àÊÅØÔºå‰πüÂèØ‰ª•ÈÄöËøáËøô‰∏™ÊñπÊ≥ïÊù•ÂêëÂêéÂõûÊ∫ØËã•Âπ≤Ê∂àÊÅØÔºåËøôÊ†∑‰∏∫Ê∂àÊÅØÁöÑÊ∂àË¥πÊèê‰æõ‰∫ÜÂæàÂ§ßÁöÑÁÅµÊ¥ªÊÄß„ÄÇseekÔºàÔºâÊñπÊ≥ï‰πü‰∏∫Êàë‰ª¨Êèê‰æõ‰∫ÜÂ∞ÜÊ∂àË¥π‰ΩçÁßª‰øùÂ≠òÂú®Â§ñÈÉ®Â≠òÂÇ®‰ªãË¥®‰∏≠ÁöÑËÉΩÂäõÔºåËøòÂèØ‰ª•ÈÖçÂêàÂÜçÂùáË°°ÁõëÂê¨Âô®Êù•Êèê‰æõÊõ¥Âä†Á≤æÂáÜÁöÑÊ∂àË¥πËÉΩÂäõ„ÄÇ Â§öÁ∫øÁ®ãÂÆûÁé∞Ê∂àË¥πËÄÖÂÆ¢Êà∑Á´ØKafkaProducerÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÁÑ∂ËÄåKafkaConsumerÂç¥ÊòØÈùûÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇ KafkaConsumer ÈùûÁ∫øÁ®ãÂÆâÂÖ®Âπ∂‰∏çÊÑèÂë≥ÁùÄÊàë‰ª¨Âú®Ê∂àË¥πÊ∂àÊÅØÁöÑÊó∂ÂÄôÂè™ËÉΩ‰ª•ÂçïÁ∫øÁ®ãÁöÑÊñπÂºèÊâßË°å„ÄÇÂ¶ÇÊûúÁîü‰∫ßËÄÖÂèëÈÄÅÊ∂àÊÅØÁöÑÈÄüÂ∫¶Â§ß‰∫éÊ∂àË¥πËÄÖÂ§ÑÁêÜÊ∂àÊÅØÁöÑÈÄüÂ∫¶ÔºåÈÇ£‰πàÂ∞±‰ºöÊúâË∂äÊù•Ë∂äÂ§öÁöÑÊ∂àÊÅØÂæó‰∏çÂà∞ÂèäÊó∂ÁöÑÊ∂àË¥πÔºåÈÄ†Êàê‰∫Ü‰∏ÄÂÆöÁöÑÂª∂Ëøü„ÄÇ Ê∂àÊÅØÂ†ÜÁßØÈóÆÈ¢òÁöÑËß£ÂÜ≥Êé™ÊñΩÔºåÁÆÄËÄåË®Ä‰πãÂ∞±ÊòØ‰ΩøÁî®Â§öÁ∫øÁ®ãÔºåÂÖ∑‰ΩìÊù•ËØ¥ÔºåÂèØ‰ª•ÈááÁî®‰∏âÁßçÊñπÂºèÔºö ÊØè‰∏Ä‰∏™Á∫øÁ®ãÂØπÂ∫î‰∏Ä‰∏™ KafkaConsumerÔºåÊØè‰∏Ä‰∏™ KafkaConsumer ÂØπÂ∫î topic ‰∏≠ÁöÑ‰∏Ä‰∏™ partitionÔºåËøô‰∫õ KafkaConsumer Èö∂Â±û‰∫éÂêå‰∏Ä‰∏™Ê∂àË¥πÁªÑÔºåËøôÊ†∑ËÉΩ‰øùËØÅÂêå‰∏ÄÊù°Ê∂àÊÅØ‰∏çË¢´Â§ö‰∏™ Consumer Ê∂àË¥π„ÄÇÂ•ΩÂ§ÑÂ∞±ÊòØÂèØ‰ª•‰∏çÁî®Â§ÑÁêÜÂÅèÁßªÈáèÂíåÈ°∫Â∫èÊéßÂà∂ÔºåÂõ†‰∏∫ partition ÂÜÖÈÉ®‰ΩøÊåâÂ∫èÁöÑÔºåÁº∫ÁÇπ‰πüÂæàÊòéÊòæÔºåÂ∞±ÊòØËØ•Â§öÁ∫øÁ®ãÁöÑËÉΩÂäõÂèóÈôê‰∫éÂàÜÂå∫Êï∞ÔºåÂ¶ÇÊûúÈúÄÊ±ÇÊòØÊâÄÊúâÊ∂àÊÅØÈÉΩÂøÖÈ°ªÊåâÂ∫èÔºå‰πüÂ∞±ÊòØËØ¥ÊâÄÊúâÊ∂àÊÅØÈÉΩÂú®‰∏Ä‰∏™ partition ÂÜÖÔºåÊ≠§Êó∂ÔºåËØ•ÊñπÊ≥ïÂ§±ÊïàÔºõ ‰∏∫‰∫ÜËß£ÂÜ≥‰∏äËø∞ÈóÆÈ¢òÔºå‰πüÂ∞±ÊòØÂú®Âè™Êúâ‰∏Ä‰∏™ÂàÜÂå∫ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ¶Ç‰ΩïËß£ÂÜ≥Ê∂àÊÅØÂ†ÜÁßØ„ÄÇËøô‰∏™Â∞±ÂøÖÈ°ªÈÄöËøáÊâãÂä®ÊéßÂà∂offset‰∫ÜÔºåÈÄöËøá assign()„ÄÅseek() Á≠âÊñπÊ≥ïËß£ÂÜ≥„ÄÇÂ•ΩÂ§ÑÂ∞±ÊòØÊâìÁ†¥‰∫ÜÂéüÊúâÁöÑÊ∂àË¥πÁ∫øÁ®ãÁöÑ‰∏™Êï∞ÂèóÂàÜÂå∫Êï∞ÁöÑÈôêÂà∂ÔºåÂùèÂ§ÑÂ∞±ÊòØËøôÁßçÂÆûÁé∞ÊñπÂºèÂØπ‰∫é‰ΩçÁßªÊèê‰∫§ÂíåÈ°∫Â∫èÊéßÂà∂ÁöÑÂ§ÑÁêÜ‰ºöÂèòÂæóÂçÅÂàÜÂ§çÊùÇÔºåÂÆûÈôÖÂ∫îÁî®Âü∫Êú¨‰∏ç‰ºöÊ∂âÂèä„ÄÇ ‰∏äËø∞‰∏§ÁßçÊñπÊ≥ïÈÉΩÊòØ‰ªéÊèêÈ´òÊãâÂèñÊ∂àÊÅØÁöÑÈÄüÁéáËÄÉËôëÁöÑÔºå‰ΩÜÊòØÂú®ÂÆûÈôÖÊÉÖÂÜµ‰∏≠Ôºåpoll() ÊãâÂèñÊ∂àÊÅØÁöÑÈÄüÂ∫¶ÊòØÁõ∏ÂΩìÂø´ÁöÑÔºåÊï¥‰ΩìÁöÑÊ∂àË¥πÊÄßËÉΩÁì∂È¢àÂπ∂‰∏çÂú®‰∫éÊ≠§ÔºåËÄåÊòØÂú®‰∫éÂ§ÑÁêÜÊ∂àÊÅØËøô‰∏ÄÂùó„ÄÇÊâÄ‰ª•ÔºåÊàë‰ª¨ÂèØ‰ª•Âú®Â§ÑÁêÜÊ∂àÊÅØÊ®°ÂùóÊîπÊàêÂ§öÁ∫øÁ®ãÁöÑÂÆûÁé∞ÊñπÂºèÔºå‰ΩÜÊòØËøôÊ†∑ÂêåÊ†∑‰ºöÈÅáÂà∞‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ∞±ÊòØÊ∂àÊÅØÁöÑÈ°∫Â∫èÈóÆÈ¢òÔºåÂõ†‰∏∫Â§öÁ∫øÁ®ãÂ§ÑÁêÜÊ∂àÊÅØÔºåÂéüÊú¨ partition ÁöÑÊ∂àÊÅØÊòØÊåâÂ∫èÊãâÂèñÁöÑÔºå‰ΩÜÊòØÂ§öÁ∫øÁ®ãÂ§ÑÁêÜÂÆå‰πãÂêéÂèØËÉΩÂ∞±‰∏çÊòØÊåâÈ°∫Â∫èÁöÑ‰∫ÜÔºåÊâÄ‰ª•Êàë‰ª¨ÈúÄË¶ÅËøõ‰∏ÄÊ≠•ËøõË°åÂ§ÑÁêÜÔºå‰ΩúËÄÖÂú®ËØ•‰π¶‰∏≠ÊèêÂá∫‰∫ÜÊªëÂä®Á™óÂè£ÁöÑËß£ÂÜ≥ÊÄùË∑ØÔºåÂç≥Â¶ÇÊûúÊåâÂ∫èÊãâÂèñÂêéÁöÑÊ≠£Âú®Â§ÑÁêÜÁöÑÊ∂àÊÅØÂ§ÑÁêÜÂÆåÊàêÔºåÂ∞ÜÂÖ∂ÊîæÂà∞Á™óÂè£ÁºìÂ≠òÔºåÂΩìÂÖ®ÈÉ®ÂÆåÊàê‰πãÂêéÁ™óÂè£ÊâçÂêëÂêéÊªëÂä®ÔºåÁ±ª‰ºº‰∫é TCP ‰∏≠ÁöÑ GBN ÂçèËÆÆÂíå SR ÂçèËÆÆ„ÄÇ ## ÈáçË¶ÅÁöÑÊ∂àË¥πËÄÖÂèÇÊï∞ fetch.min.bytes ËØ•ÂèÇÊï∞Áî®Êù•ÈÖçÁΩÆConsumerÂú®‰∏ÄÊ¨°ÊãâÂèñËØ∑Ê±ÇÔºàË∞ÉÁî®pollÔºàÔºâÊñπÊ≥ïÔºâ‰∏≠ËÉΩ‰ªéKafka‰∏≠ÊãâÂèñÁöÑÊúÄÂ∞èÊï∞ÊçÆÈáèÔºåÈªòËÆ§ÂÄº‰∏∫1ÔºàBÔºâ„ÄÇ fetch.max.bytes ‰∏é‰∏äËø∞ÂØπÂ∫îÔºåÈªòËÆ§ÂÄº‰∏∫ 50 MB„ÄÇ Max.poll.records Ëøô‰∏™ÂèÇÊï∞Áî®Êù•ÈÖçÁΩÆConsumerÂú®‰∏ÄÊ¨°ÊãâÂèñËØ∑Ê±Ç‰∏≠ÊãâÂèñÁöÑÊúÄÂ§ßÊ∂àÊÅØÊï∞ÔºåÈªòËÆ§ÂÄº‰∏∫500ÔºàÊù°Ôºâ„ÄÇ connections.max.idle.ms Ëøô‰∏™ÂèÇÊï∞Áî®Êù•ÊåáÂÆöÂú®Â§ö‰πÖ‰πãÂêéÂÖ≥Èó≠ÈôêÂà∂ÁöÑËøûÊé•ÔºåÈªòËÆ§ÂÄºÊòØ540000ÔºàmsÔºâÔºåÂç≥9ÂàÜÈíü„ÄÇ metadata.max.age.msËøô‰∏™ÂèÇÊï∞Áî®Êù•ÈÖçÁΩÆÂÖÉÊï∞ÊçÆÁöÑËøáÊúüÊó∂Èó¥ÔºåÈªòËÆ§ÂÄº‰∏∫300000ÔºàmsÔºâÔºåÂç≥5ÂàÜÈíü„ÄÇÂ¶ÇÊûúÂÖÉÊï∞ÊçÆÂú®Ê≠§ÂèÇÊï∞ÊâÄÈôêÂÆöÁöÑÊó∂Èó¥ËåÉÂõ¥ÂÜÖÊ≤°ÊúâËøõË°åÊõ¥Êñ∞ÔºåÂàô‰ºöË¢´Âº∫Âà∂Êõ¥Êñ∞ÔºåÂç≥‰ΩøÊ≤°Êúâ‰ªª‰ΩïÂàÜÂå∫ÂèòÂåñÊàñÊúâÊñ∞ÁöÑbrokerÂä†ÂÖ•„ÄÇ]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
        <category>kafka Á≥ªÂàó</category>
      </categories>
      <tags>
        <tag>kafka</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∑±ÂÖ•ÁêÜËß£ kafkaÔºà‰∏ÄÔºâ]]></title>
    <url>%2F2020%2F04%2F23%2F%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%20kafka%EF%BC%88%E4%B8%80%EF%BC%89.html</url>
    <content type="text"><![CDATA[ÂâçË®ÄÈ°πÁõÆÊúÄËøë kafka ÂèàÂ¥©‰∫Ü‚Ä¶ ÂøÉÊÄÅÁÇ∏‰∫Ü‚Ä¶ ÊÄªÊòØ nobrokerÔºåËá™Â∑±‰πüÊÄªÊòØÊ≤°ÊúâÂΩªÂ∫ïËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÊâÄ‰ª•ÔºåÂèó‰∏ç‰∫Ü‰∫ÜÔºåÊàëË¶ÅÂºÄÂßãÊ∑±ÂÖ•ÁêÜËß£‰∏Ä‰∏ã kafka ‰∫Ü‚Ä¶ Áî±‰∫é‰πãÂâç‰∏ÄÁØáÊñáÁ´†ÈÉΩÊòØÂá†‰∏áÂ≠óÔºåÂØºËá¥ÂèØËØªÊÄßÊØîËæÉÊãâËÉØÔºåÊâÄ‰ª•‰ªéÁé∞Âú®ÂºÄÂßãÔºåÊàëÊØè‰∏ÄÁ´†Âá∫‰∏ÄÁØáÊñáÁ´†‚Ä¶ËøôÊ†∑ÂèØËØªÊÄßÂº∫‰∏Ä‰∫õ‚Ä¶ Á¨¨‰∏ÄÁ´† ÂàùËØÜ kafkaKafkaËµ∑ÂàùÊòØÁî±LinkedInÂÖ¨Âè∏ÈááÁî®ScalaËØ≠Ë®ÄÂºÄÂèëÁöÑ‰∏Ä‰∏™Â§öÂàÜÂå∫„ÄÅÂ§öÂâØÊú¨‰∏îÂü∫‰∫éZooKeeperÂçèË∞ÉÁöÑÂàÜÂ∏ÉÂºèÊ∂àÊÅØÁ≥ªÁªüÔºåÁé∞Â∑≤Ë¢´ÊçêÁåÆÁªôApacheÂü∫Èáë‰ºö„ÄÇÁõÆÂâçKafkaÂ∑≤ÁªèÂÆö‰Ωç‰∏∫‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÊµÅÂºèÂ§ÑÁêÜÂπ≥Âè∞ÔºåÂÆÉ‰ª•È´òÂêûÂêê„ÄÅÂèØÊåÅ‰πÖÂåñ„ÄÅÂèØÊ∞¥Âπ≥Êâ©Â±ï„ÄÅÊîØÊåÅÊµÅÊï∞ÊçÆÂ§ÑÁêÜÁ≠âÂ§öÁßçÁâπÊÄßËÄåË¢´ÂπøÊ≥õ‰ΩøÁî®„ÄÇ Kafka‰∏ªË¶ÅÊâÆÊºî‰∏âÂ§ßËßíËâ≤Ôºö Ê∂àÊÅØÁ≥ªÁªü„ÄÇÊèê‰æõ‰º†ÁªüÁöÑÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÁöÑÂäüËÉΩÔºöÁ≥ªÁªüËß£ËÄ¶„ÄÅÂÜó‰ΩôÂ≠òÂÇ®„ÄÅÊµÅÈáèÂâäÂ≥∞„ÄÅÂºÇÊ≠•ÈÄö‰ø°Á≠âÔºåÂêåÊó∂ËøòÊèê‰æõ‰∫ÜÊ∂àÊÅØÁöÑÈ°∫Â∫èÊÄß‰øùÈöú‰ª•ÂèäÂõûÊ∫ØÊ∂àË¥πÁöÑÂäüËÉΩ„ÄÇ Â≠òÂÇ®Á≥ªÁªü„ÄÇKafkaÊúâÂ§öÂâØÊú¨Êú∫Âà∂ÔºåÊâÄ‰ª•ÂèØ‰ª•Áî®Êù•ÂΩìÊï∞ÊçÆÂ≠òÂÇ®Á≥ªÁªü‰ΩøÁî®„ÄÇ ÊµÅÂºèÂ§ÑÁêÜÂπ≥Âè∞„ÄÇ‰∏∫ÊØè‰∏™ÊµÅË°åÁöÑÊµÅÂºèÂ§ÑÁêÜÊ°ÜÊû∂Êèê‰æõ‰∫ÜÂèØÈù†ÁöÑÊï∞ÊçÆÊù•Ê∫êÔºåËøòÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÊµÅÂºèÂ§ÑÁêÜÁ±ªÂ∫ì„ÄÇ Âü∫Êú¨Ê¶ÇÂøµÁªÑÊàê Producer„ÄÇÁîü‰∫ßËÄÖÔºåË¥üË¥£ÂàõÂª∫Ê∂àÊÅØÂèëÈÄÅÂà∞ broker ‰∏≠„ÄÇ Consumer„ÄÇ‰ªé broker ‰∏≠Êé•Êî∂Ê∂àÊÅØ„ÄÇ Zookeeper„ÄÇË¥üË¥£ÈõÜÁæ§ÂÖÉÊï∞ÊçÆÁöÑÁÆ°ÁêÜ„ÄÅÊéßÂà∂Âô®ÁöÑÈÄâ‰∏æÁ≠âÁ≠â„ÄÇ Broker„ÄÇË¥üË¥£Â∞ÜÊî∂Âà∞ÁöÑÊ∂àÊÅØÂ≠òÂÇ®Âà∞Á£ÅÁõò‰∏≠ÔºåÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÈõÜÁæ§„ÄÇ ÈáçË¶ÅÁöÑÊ¶ÇÂøµTopic Âíå PartitionKafka‰∏≠ÁöÑÊ∂àÊÅØ‰ª• topic ‰∏∫Âçï‰ΩçËøõË°åÂΩíÁ±ªÔºåÁîü‰∫ßËÄÖË¥üË¥£Â∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞ÁâπÂÆöÁöÑ‰∏ªÈ¢òÔºåËÄåÊ∂àË¥πËÄÖË¥üË¥£ËÆ¢ÈòÖ‰∏ªÈ¢òÂπ∂ËøõË°åÊ∂àË¥π„ÄÇ topic ‰ªÖ‰ªÖÊòØ‰∏Ä‰∏™ÈÄªËæë‰∏äÁöÑÊ¶ÇÂøµÔºåÂÆûÈôÖÁöÑÂÆûÁé∞ËøòÊòØÂàÜÂå∫Ôºå‰∏Ä‰∏™‰∏ªÈ¢òÂèØ‰ª•ÊúâÂ§ö‰∏™ÂàÜÂå∫ÔºåÊØè‰∏™ÂàÜÂå∫ÈÉΩÂèØ‰ª•ÂàÜÊï£Âà∞‰∏çÂêå broker ‰∏≠ÔºåÂàÜÂå∫Âú®Â≠òÂÇ®Â±ÇÈù¢ÂèØ‰ª•Áúã‰ΩúÊòØ‰∏Ä‰∏™ÂèØËøΩÂä†ÁöÑ log Êñá‰ª∂ÔºåËÄå offset ÊòØÊ∂àÊÅØÂú®ÂàÜÂå∫‰∏≠ÁöÑÂîØ‰∏ÄÊ†áËØÜÔºåKafka ÈÄöËøáÂÆÉÊù•‰øùËØÅÂàÜÂå∫ÂÜÖÁöÑÊ∂àÊÅØÁöÑÈ°∫Â∫èÊÄßÔºåÊâÄ‰ª• Kafka ‰ªÖ‰øùËØÅÂàÜÂå∫ÊúâÂ∫èÔºå‰∏ç‰øùËØÅ‰∏ªÈ¢òÊúâÂ∫è„ÄÇ Â§öÂâØÊú¨Êú∫Âà∂Kafka ‰∏∫ÂàÜÂå∫ÂºïÂÖ•‰∫ÜÂ§öÂâØÊú¨Êú∫Âà∂Ôºå‰øùËØÅÈ´òÂèØÁî®„ÄÇÂú®ËøôÈáåÂíå Mysql ‰∏ÄÊ†∑ÔºåÂêåÊ†∑ÊòØ‰∏Ä‰∏ªÂ§ö‰ªéÔºåÊâÄ‰ª•ÂÖ≥ÈîÆÂ∞±ÊòØ‰∏ª‰ªéÂêåÊ≠•ÁöÑÈóÆÈ¢òÔºåÂêåÊó∂Ëøò‰ºöÊ∂âÂèäÂà∞‰∏ªÂ§áÂàáÊç¢„ÄÅ‰∏ª‰ªéÂª∂ËøüÁ≠âÈÄöÁî®ÈóÆÈ¢ò„ÄÇ ÂàÜÂå∫‰∏≠ÊâÄÊúâÂâØÊú¨ÁªüÁß∞‰∏∫ AR(Assigned Replicas)ÔºåAR = ISR(In-Sync Replicas) + OSR(Out-of-Sync Replicas)ÔºåÂΩì leaderÂâØÊú¨ÂèëÁîüÊïÖÈöúÊó∂ÔºåÂè™ÊúâÂú® ISR ‰∏≠ÁöÑ ÂâØÊú¨ÊâçÊúâËµÑÊ†ºË¢´ÈÄâÂèñ‰∏∫Êñ∞ÁöÑ leader„ÄÇ Âú®ËØªÂèñ offset ÁöÑËøáÁ®ã‰∏≠Ôºå‰πüÂºïÂÖ•‰∫Ü HW(È´òÊ∞¥‰Ωç) Âíå LEO(Log End Offset)ÁöÑÊ¶ÇÂøµÔºåÂú® Mysql ‰∏≠ÂÆûÁé∞ mvcc ‰∏≠Ôºå‰πüÂêåÊ†∑ÈááÁî®‰∫Ü È´òÊ∞¥‰ΩçÁöÑÊ¶ÇÂøµÔºå‰∏çËøáÂú®ÈÇ£ÈáåÊòØÂú®‰∫ãÂä°ÁöÑËßÜÂõæ‰∏≠Âá∫Áé∞ÁöÑ„ÄÇËøôÈáåÁöÑ HW Âíå LEO ÂêåÊ†∑ËÆ©ÊàëÊÉ≥Âà∞‰∫Ü NIO ‰∏≠ÁöÑ buffer ‰πüÊòØÊã•ÊúâÂêåÊ†∑ÁöÑÊ¶ÇÂøµÁöÑ„ÄÇ Kafka ÁöÑÂ§çÂà∂Êú∫Âà∂Êó¢‰∏çÊòØÂÆåÂÖ®ÁöÑÂêåÊ≠•Â§çÂà∂Ôºå‰πü‰∏çÊòØÂçïÁ∫ØÁöÑÂºÇÊ≠•Â§çÂà∂„ÄÇËøôÈáåÊàë‰ª¨ÂèØ‰ª•Á±ªÊØî‰∫ãÂä°Â§ÑÁêÜ„ÄÇÂêåÊ≠•ÊÑèÂë≥ÁùÄÊâÄÊúâÈÉΩÂÆåÊàêÊâçÊèê‰∫§‰∫ãÂä°„ÄåÂç≥Ë¶ÅÊ±ÇÊâÄÊúâ follower ÂâØÊú¨ÂÖ®ÈÉ®Â§çÂà∂ÂÆåÊâçÂèØ‰ª•ËøõË°åËØªÂèñÊ∂àÊÅØ„ÄçÔºåËÄåÂºÇÊ≠•ÂàôÊÑèÂë≥ÁùÄÂè™Ë¶ÅleaderËØªÂÖ•ÊàêÂäüÂàôÁõ¥Êé•Êèê‰∫§‰∫ãÂä°„ÄåMysql ÊòØÂºÇÊ≠•Â§çÂà∂„Äç„ÄÇÂâçËÄÖÂΩ±ÂìçÊïàÁéáÔºåÂêéËÄÖÂàôÂ≠òÂú®‰∏çÂèØÈù†ÊÄßÔºåÂõ†‰∏∫‰∏ÄÊó¶leaderÂÆïÊú∫ËÄåfollowerÊ≤°ÊúâÂêåÊ≠•ÂÆåÊàêÔºåÊï∞ÊçÆÂ∞±‰ºöÂá∫Áé∞ÈóÆÈ¢ò„ÄÇÊâÄ‰ª•ËøôÈáåÈááÁî®Êäò‰∏≠ÁöÑÊñπÊ°àÔºåÊØèÂêåÊ≠•ÂÆå‰∏Ä‰∏™Ê∂àÊÅØÔºåÂ∞±ËøõË°å‰∏ÄÊ¨°‰∫ãÂä°Êèê‰∫§„ÄåÂç≥ÊØèÂÖ®ÈÉ®ÂêåÊ≠•ÂÆå‰∏ÄÊù°Ê∂àÊÅØÂ∞±Êèê‰∫§‰∏ÄÊ¨°‰∫ãÂä°„Äç„ÄÇ ÂÆâË£ÖÂíåÈÖçÁΩÆÂçö‰∏ª‰ΩøÁî®ÁöÑ macOS Á≥ªÁªüÔºåÊâÄ‰ª•Êé•‰∏ãÊù•ÂØπÂú® macOS ‰∏ãÂ¶Ç‰ΩïÂÆâË£ÖËøêË°å kafka ÂÅö‰∏Ä‰∏™ËØ¶ÁªÜÁöÑÂèôËø∞„ÄÇ JDK ÁöÑÂÆâË£ÖÂíåÈÖçÁΩÆKafkaÊòØÂª∫Á´ãÂú® jvm ‰πã‰∏äÁöÑÔºåÊâÄ‰ª•ÈúÄË¶ÅÂÖàÂÆâË£Ö jvmÔºåËøô‰∏™ÂæàÁÆÄÂçïÂï¶‚Ä¶ https://www.jianshu.com/p/194531d106ae ‰∏ãËΩΩ ÈÖçÁéØÂ¢É Êü•ÁúãÈÖçÁΩÆÊòØÂê¶ÊàêÂäü ËøôÈáåÊàë‰∏çËØ¶ÁªÜÂèôËø∞ÔºåÁõ¥Êé•ÁúãËØ•ÁΩëÂùÄÂ∞±Ë°åÔºå‰∏ãÈù¢ÁöÑÊàë‰ºöËØ¶ÁªÜÂèôËø∞„ÄÇ Zookeeper ÁöÑÂÆâË£ÖÂíåÈÖçÁΩÆÈ¶ñÂÖàÂÜçÁÆÄÂçï‰ªãÁªç‰∏Ä‰∏ã ZookeeperÔºåÂÖ∂ÂÆû kafka Áé∞Âú®Â∑≤ÁªèÂÜÖÁΩÆ‰∫Ü ZookeeperÔºåËøôÈáåÊàë‰ª¨Â∞±ÊöÇÊó∂‰∏ç‰ΩøÁî®ÂÜÖÁΩÆÁöÑ zk ‰∫ÜÔºåÂõ†‰∏∫ÂÜÖÁΩÆÁöÑÂè™ËÉΩÊòØÂçïÊú∫ÁâàÔºå‰ΩÜÊòØÂú®Áîü‰∫ßÁéØÂ¢É‰∏≠ zk ‰∏ÄËà¨ÈÉΩÊòØÈõÜÁæ§ÔºåÊâÄ‰ª•ËøôÈáåÊàë‰ª¨ÂÜçÂçïÁã¨ËøõË°å zk ÁöÑÂÆâË£ÖÂíåÈÖçÁΩÆ„ÄÇ ZooKeeperÊòØ‰∏Ä‰∏™ÂºÄÊ∫êÁöÑÂàÜÂ∏ÉÂºèÂçèË∞ÉÊúçÂä°ÔºåÊòØGoogle ChubbyÁöÑ‰∏Ä‰∏™ÂºÄÊ∫êÂÆûÁé∞„ÄÇÂàÜÂ∏ÉÂºèÂ∫îÁî®Á®ãÂ∫èÂèØ‰ª•Âü∫‰∫éZooKeeperÂÆûÁé∞ËØ∏Â¶ÇÊï∞ÊçÆÂèëÂ∏É/ËÆ¢ÈòÖ„ÄÅË¥üËΩΩÂùáË°°„ÄÅÂëΩÂêçÊúçÂä°„ÄÅÂàÜÂ∏ÉÂºèÂçèË∞É/ÈÄöÁü•„ÄÅÈõÜÁæ§ÁÆ°ÁêÜ„ÄÅMasterÈÄâ‰∏æ„ÄÅÈÖçÁΩÆÁª¥Êä§Á≠âÂäüËÉΩ„ÄÇÂú®ZooKeeper‰∏≠ÂÖ±Êúâ3‰∏™ËßíËâ≤Ôºöleader„ÄÅfollowerÂíåobserverÔºåÂêå‰∏ÄÊó∂Âàª ZooKeeperÈõÜÁæ§‰∏≠Âè™‰ºöÊúâ‰∏Ä‰∏™leaderÔºåÂÖ∂‰ªñÁöÑÈÉΩÊòØfollowerÂíåobserver„ÄÇobserver‰∏çÂèÇ‰∏éÊäïÁ•®ÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ã ZooKeeper ‰∏≠Âè™Êúâ leader Âíå follower ‰∏§‰∏™ËßíËâ≤„ÄÇ ‰∏ãËΩΩ Zookeeper brew install zookeeper ËøôÈáåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºå‰∏ãËΩΩ‰πãÂêéÔºåZookeeper ‰∏≠ÁöÑ bin ÁõÆÂΩïÂíåÈÖçÁΩÆÊñá‰ª∂‰∏çÂú®‰∏ÄÂùó„ÄÇ bin ÁõÆÂΩïÁöÑ‰ΩçÁΩÆÔºö‚Äù/usr/local/Cellar/zookeeper/3.4.14‚Äù ÈÖçÁΩÆÊñá‰ª∂ÁöÑ‰ΩçÁΩÆÔºö‚Äù/usr/local/etc/zookeeper‚Äù Zookeeper ÁöÑ ÂêØÂä®ÂÅúÊ≠¢Êó•ÂøóÔºö/usr/local/var/log/zookeeper ÈÖçÁéØÂ¢É ÂëΩ‰ª§Ôºöopen -e .bash_profile 123456789101112131415MONGODB_HOME=/usr/local/mongodbKAFKA_HOME=/usr/local/Cellar/kafka/2.4.0ZOOKEEPER_HOME=/usr/local/Cellar/zookeeper/3.4.14PATH="/Library/Frameworks/Python.framework/Versions/3.7/bin:$ZOOKEEPER_HOME/bin:$KAFKA_HOME/bin:$MONGODB_HOME/bin:$&#123;PATH&#125;:"export PATHexport PATH="/Users/yangweijie/anaconda3/bin:$PATH"export JAVA_HOME=/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Homeexport CLASSPAHT=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jarexport PATH=$JAVA_HOME/bin:$PATH: ÂëΩ‰ª§Ôºösource .bash_profile ËÆ©ÈÖçÁΩÆÊñá‰ª∂ÁîüÊïà ‰øÆÊîπ Zookeeper ÈÖçÁΩÆÊñá‰ª∂ ËøõÂÖ•Âà∞ /usr/local/etc/zookeeperÔºåÁÑ∂ÂêéÂ∞Ü zoo_sample.cfg Êñá‰ª∂‰øÆÊîπ‰∏∫ zoo.cfg cd /usr/local/etc/zookeepercp zoo_sample.cfg zoo.cfg ‰øÆÊîπ zoo.cfg ÈÖçÁΩÆÊñá‰ª∂Ôºå‰∏ªË¶ÅÊòØÂàõÂª∫Êï∞ÊçÆÁõÆÂΩïÂíåÊó•ÂøóÁõÆÂΩïÔºåÂõ†‰∏∫ÈªòËÆ§ÊòØÊ≤°ÊúâÁöÑÔºåÊàë‰ª¨ÈúÄË¶ÅËá™Â∑±ÂàõÂª∫ open -e zoo.cfgmkdir -p tmp/datamkdir -p tmp/log 123456789101112131415161718192021222324252627282930313233343536373839404142# zoo.cfg Êñá‰ª∂ÂÜÖÂÆπ# The number of milliseconds of each tick# zookeeper ÊúçÂä°Âô®ÂøÉË∑≥Êó∂Èó¥ÔºåÂçï‰Ωç‰∏∫ mstickTime=2000# The number of ticks that the initial # synchronization phase can take# ÊäïÁ•®ÈÄâ‰∏æÊñ∞leaderÁöÑÂàùÂßãÂåñÊó∂Èó¥initLimit=10# The number of ticks that can pass between # sending a request and getting an acknowledgement# leader‰∏éfollower ÂøÉË∑≥Ê£ÄÊµãÊúÄÂ§ßÂÆπÂøçÊó∂Èó¥ÔºåÂìçÂ∫îÊó∂Èó¥Ë∂ÖËøá syncLimit * tickTimeÔºålead# erÂ∞±ËÆ§‰∏∫ follower Ê≠ªÊéâ‰∫ÜÔºå‰ªéÊúçÂä°Âô®‰∏≠Âà†Èô§ followersyncLimit=5# the directory where the snapshot is stored.# do not use /tmp for storage, /tmp here is just # example sakes.# Êï∞ÊçÆÁõÆÂΩïdataDir=/usr/local/etc/zookeeper/tmp/data# the port at which the clients will connect# ÂØπÂ§ñÊúçÂä°Á´ØÂè£clientPort=2181# the maximum number of client connections.# increase this if you need to handle more clients#maxClientCnxns=60# Êó•ÂøóÁõÆÂΩïdataLogDir=/usr/local/etc/zookeeper/tmp/log# # Be sure to read the maintenance section of the # administrator guide before turning on autopurge.## http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance## The number of snapshots to retain in dataDir#autopurge.snapRetainCount=3# Purge task interval in hours# Set to "0" to disable auto purge feature#autopurge.purgeInterval=1 dataDirÔºö‚Äù/usr/local/etc/zookeeper/tmp/data‚Äù Log: ‚Äú/usr/local/etc/zookeeper/tmp/log‚Äù ÂêØÂä® ZookeeperÂêØÂä® zookeeperÔºö zkServer start Êü•Áúã zookeeper Áä∂ÊÄÅÔºö zkServer status Ëøô‰∏™ÂÖ∂ÂÆûÁúã‰∏çÂá∫Êù• Zookeeper ÊòØÂê¶ÁúüÁöÑËøêË°åËµ∑Êù•‰∫ÜÔºåÊàëÂú®‰∏ãÈù¢ÁöÑÈóÆÈ¢òÊ®°Âùó‰πüÊúâËÆ≤Âà∞ÔºåÂ¶ÇÊûúÊÉ≥Áúã Zookeeper ÊòØÂê¶ÁúüÁöÑËøêË°åËµ∑Êù•‰∫ÜÔºåÂèØ‰ª•Êü•Áúã ‚Äú/usr/local/etc/zookeeper/tmp/data/zookeeper_server.pid‚Äù ÊòØÂê¶Â≠òÂú®ÔºåÂΩì zk stopÊó∂ËØ•Êñá‰ª∂Â∞±‰ºöÊ∂àÂ§±„ÄÇ Kafka ÁöÑÂÆâË£ÖÂíåÈÖçÁΩÆ‰∏ãËΩΩ kafka brew install kafka ÂêåÊ†∑ÁöÑÔºåbin Âíå ÈÖçÁΩÆÊñá‰ª∂‰ΩçÁΩÆ‰∏çÂú®‰∏ÄËµ∑„ÄÇ bin ÁõÆÂΩïÁöÑ‰ΩçÁΩÆÔºö‚Äù/usr/local/Cellar/kafka/2.4.0‚Äù ÈÖçÁΩÆÊñá‰ª∂ÁöÑ‰ΩçÁΩÆÔºö‚Äù/usr/local/etc/kafka‚Äù Kafka ÁöÑÂêØÂä®ÂÅúÊ≠¢Êó•ÂøóÔºö/usr/local/var/log/kafka ÈÖçÁéØÂ¢ÉËßÅ‰∏äÈù¢ÁöÑ bash_profile ‰øÆÊîπ Kafka ÈÖçÁΩÆÊñá‰ª∂Â∞Ü /usr/local/etc/kafka/server.properties ËøõË°åÁõ∏Â∫îÁöÑ‰øÆÊîπÔºå‰∏ªË¶ÅÊòØÂØπÊó•ÂøóÊñá‰ª∂ÁöÑÂú∞ÂùÄËøõË°å‰øÆÊîπÔºåÁÑ∂Âêé‰øÆÊîπÂÆå‰πãÂêéËá™Â∑±ÂàõÂª∫Â•ΩÁõ∏Â∫îÁöÑÁõÆÂΩï„ÄÇ ËøôÈáåÊàëÁöÑ kafka ÁöÑÊ∂àÊÅØ log ÊòØ /usr/local/etc/kafka/tmp/kafka-logs„ÄÇ ÂêØÂä® Kafka ÂêØÂä® kafka 1kafka-server-start /usr/local/etc/kafka/server.properties Â∏∏Áî®Êåá‰ª§Ôºö ÂàõÂª∫ topicÔºö 1kafka-topics --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test Êü•Áúã topic : 1kafka-topics --list --zookeeper localhost:2181 ÂèëÈÄÅÊ∂àÊÅØÔºö 1kafka-console-producer --broker-list localhost:9092 --topic test Ê∂àË¥πÊ∂àÊÅØÔºö 1kafka-console-consumer --bootstrap-server localhost:9092 --topic test --from-beginning Êü•Áúã java ÊúâÂÖ≥ÁöÑËøõÁ®ãÔºö 1jps -l ÈÅáÂà∞ÁöÑÈóÆÈ¢òQ1ÈóÆÈ¢òÁ≥ªÁªüÊòØ macOSÔºåkafka ÁâàÊú¨‰∏∫ 2.4.0Ôºåzookeeper ÁâàÊú¨‰∏∫3.4.14ÔºåÂú®ÂÆâË£ÖÂêØÂä®ÈÅáÂà∞ËøôÊ†∑‰∏Ä‰∏™ÈóÆÈ¢òÔºö Áî® ‚Äúkafka-server-stop /usr/local/etc/kafka/server.properties‚Äù Êó†Ê≥ïÊùÄÊ≠ª kafka ËøõÁ®ã‚Ä¶ ‰ΩøÁî®ÂÆåËøô‰∏™ÂëΩ‰ª§‰πãÂêé Áî®ÂëΩ‰ª§ ‚Äújps -l‚Äù ÂèØ‰ª•ÁúãÂà∞ÔºåÂéüÂÖàÁöÑKafka.kafka ÂØπÂ∫îÁöÑËøõÁ®ãÁöÑÁ°ÆÊ≤°‰∫ÜÔºå‰ΩÜÊòØËé´ÂêçÂÖ∂Â¶ôÂèàËµ∑‰∫Ü‰∏Ä‰∏™ËøõÁ®ãÊù•ËøêË°å kafkaÔºåËøôÊòØÂï•ÊÉÖÂÜµ‚Ä¶ ‰∏∫Âï•‰ºöÊùÄ‰∏çÊ≠ª„ÄÇ „Äå‰ªéÂêéÊñáÂèØ‰ª•Áü•ÈÅìÔºåjps ÂÆûÈôÖ‰∏äÊó†Ê≥ïÂáÜÂ§áÁöÑÁ°ÆËÆ§ kafkaÊúçÂä° ÊòØÂê¶Ê≠£Â∏∏ÂêØÂä®„ÄÇ„Äç Â∞ùËØïËß£ÂÜ≥ÊñπÊ°à ÈáçÂÜôkafka-server-stop.sh ËÑöÊú¨ 12345678PIDS=$(ps -ef |grep java|grep kafka | grep -v grep | awk '&#123;print $2&#125;')for PID in $PIDSdo kill -9 $PIDdoneecho -e "Stop Finished!\n" Âéü kafka-server-stop.sh ÂÜÖÂÆπÔºö 123456789SIGNAL=$&#123;SIGNAL:-TERM&#125;PIDS=$(ps ax | grep -i 'kafka\.Kafka' | grep java | grep -v grep | awk '&#123;print $1&#125;')if [ -z "$PIDS" ]; then echo "No kafka server to stop" exit 1else kill -s $SIGNAL $PIDSfi ÁªìÊûúÔºöÊó†Êïà„ÄÇ„ÄÇ„ÄÇ„ÄÇ ÂèÇËÄÉÔºö https://blog.csdn.net/dengjili/article/details/95041267 ‰æùÊóßÊòØ‰øÆÊîπ kafka-server-stop.sh ÁöÑÂÜÖÂÆπ 1PIDS=$(ps ax | grep -i ‚Äòkafka.Kafka‚Äô | grep java | grep -v grep | awk ‚Äò&#123;print $1&#125;‚Äô) ‰øÆÊîπ‰∏∫Ôºö 1PIDS=$(jps -lm | grep -i 'kafka.Kafka' | awk '&#123;print $1&#125;') ÁªìÊûúÔºö‰æùÊóßÂ§±Ë¥•„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇÂøÉÊÄÅÁÇ∏‰∫Ü Âú®Ëß£ÂÜ≥Á¨¨‰∏â‰∏™ÈóÆÈ¢òÁöÑÊó∂ÂÄôÂèëÁé∞ÔºåÂèëÁé∞Âπ∂‰∏çËÉΩ‰ªÖ‰ªÖÈÄöËøá jps ÂéªÁúã kafka ÊòØÂê¶ÂÅúÊ≠¢ËøêË°åÔºåÂõ†‰∏∫ÂÖ∂ÈùûÂ∏∏ÁöÑ‰∏çÂáÜÁ°ÆÔºåÂÖ∂ÂÆû kafka ÂèØËÉΩÂ∑≤ÁªèÂÅúÊ≠¢‰∫ÜÔºå‰πüÂ∞±ÊòØËØ¥Ôºå‚Äùkafka-server-stop /usr/local/etc/kafka/server.properties‚Äù ÂÖ∂ÂÆûÂ∑≤ÁªèÊùÄÊ≠ª kafka ÊúçÂä°ËøõÁ®ãÔºåÂè™ÊòØÊàë‰ª¨‰∏çÁü•ÈÅìËÄåÂ∑≤„ÄÇ„ÄÇ„ÄÇ„ÄÇ Êàë‰ª¨ÂèØ‰ª•ÈÄöËøáÁîü‰∫ßÊ∂àÊÅØÔºökafka-console-producer --broker-list localhost:9092 --topic testÊù•Âà§Êñ≠ kafka ÊòØÂê¶ÊòØÊ≠£Â∏∏ÂêØÂä®ÁöÑ„ÄÇ ÁªìÊûúÔºöÂ∑≤Ëß£ÂÜ≥ÔºÅÔºÅÔºÅ Q2ÈóÆÈ¢ò‰ΩøÁî®ÂëΩ‰ª§ ‚ÄúzkServer stop‚Äù Êó†Ê≥ïÂÅúÊ≠¢ zookeeperÔºåÊä•ÈîôÔºö 123ZooKeeper JMX enabled by defaultUsing config: /usr/local/etc/zookeeper/zoo.cfgStopping zookeeper ... no zookeeper to stop (could not find file /usr/local/etc/zookeeper/tmp/data/zookeeper_server.pid) Â∞ùËØïËß£ÂÜ≥ÊñπÊ°àÂéüÊù•ÊòØÂõ†‰∏∫ÊàëÊ†πÊú¨Ê≤°ÊúâÊää Zookeeper Ëµ∑Êù•Ôºå‰ΩøÁî® zkServer statusÂπ∂‰∏çËÉΩÊòæÁ§∫ zk ÊòØÂê¶ÁúüÁöÑËµ∑Êù•‰∫Ü‚Ä¶ Âú®ÊàëÂÜçÊ¨°ÂêØÂä® zk Êó∂ÔºåÁöÑÁ°ÆÂú® ‚Äú/usr/local/etc/zookeeper/tmp/data ‰∏ã Âá∫Áé∞‰∫Ü zookeeper_server.pid‚Äù Ëøô‰∏™Êñá‰ª∂„ÄÇ ÊâÄ‰ª•ËØ¥ÔºåÊÉ≥Áúã zk Âà∞Â∫ïÊòØÂê¶ÁúüÁöÑËµ∑Êù•‰∫ÜÔºåÂèØ‰ª•Êü•Áúã ‚Äú/usr/local/etc/zookeeper/tmp/data/zookeeper_server.pid‚Äù ÊòØÂê¶Â≠òÂú®ÔºåÂΩì zk stopÊó∂ËØ•Êñá‰ª∂Â∞±‰ºöÊ∂àÂ§±„ÄÇ ÁªìÊûúÔºöËØ•ÈóÆÈ¢òËß£ÂÜ≥ÔºÅÔºÅÔºÅ Q3ÈóÆÈ¢òÂú®Êàë‰∏ÄÁõ¥Êó†Ê≥ïÂÖ≥Èó≠ kafka ‰πãÂêéÔºåÊàëËøõË°å‰∫ÜÁîµËÑëÈáçÂêØÔºåÈáçÂêØ‰πãÂêéÔºå‰ΩøÁî® ‚Äújps -l‚Äù ÁöÑÁ°ÆÊ≤°ÊúâÂÜçÂá∫Áé∞ ‚Äúkafka.Kafka‚ÄùÔºåËØ¥ÊòéËøôÊó∂ kafka ÁöÑÁ°ÆÂÅúÊ≠¢‰∫ÜÔºå‰ΩÜÊòØÊñ∞ÁöÑÈóÆÈ¢òÂèàÂá∫Áé∞‰∫Ü‚Ä¶ Âú®‰ΩøÁî® kafka-server-start /usr/local/etc/kafka/server.properties ÂëΩ‰ª§‰πãÂêéÔºåÂÜç‰πüÊó†Ê≥ïÂêØÂä® kafka ‰∫Ü‚Ä¶ ÊàëÂ§™Èöæ‰∫Ü‚Ä¶ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647[2020-04-24 23:16:58,980] INFO Registered kafka:type=kafka.Log4jController MBean (kafka.utils.Log4jControllerRegistration$)[2020-04-24 23:16:59,391] INFO Registered signal handlers for TERM, INT, HUP (org.apache.kafka.common.utils.LoggingSignalHandler)[2020-04-24 23:16:59,392] INFO starting (kafka.server.KafkaServer)[2020-04-24 23:16:59,392] INFO Connecting to zookeeper on localhost:2181 (kafka.server.KafkaServer)[2020-04-24 23:16:59,406] INFO [ZooKeeperClient Kafka server] Initializing a new session to localhost:2181. (kafka.zookeeper.ZooKeeperClient)[2020-04-24 23:16:59,410] INFO Client environment:zookeeper.version=3.5.6-c11b7e26bc554b8523dc929761dd28808913f091, built on 10/08/2019 20:18 GMT (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,410] INFO Client environment:host.name=localhost (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,411] INFO Client environment:java.version=1.8.0_222 (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,411] INFO Client environment:java.vendor=AdoptOpenJDK (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,411] INFO Client environment:java.home=/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/jre (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,411] INFO Client environment:java.class.path=/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/activation-1.1.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/aopalliance-repackaged-2.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/argparse4j-0.7.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/audience-annotations-0.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/commons-cli-1.4.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/commons-lang3-3.8.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-api-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-basic-auth-extension-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-file-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-json-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-mirror-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-mirror-client-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-runtime-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-transforms-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/guava-20.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/hk2-api-2.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/hk2-locator-2.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/hk2-utils-2.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-annotations-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-core-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-databind-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-dataformat-csv-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-datatype-jdk8-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-jaxrs-base-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-jaxrs-json-provider-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-module-jaxb-annotations-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-module-paranamer-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-module-scala_2.12-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jakarta.activation-api-1.2.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jakarta.annotation-api-1.3.4.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jakarta.inject-2.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jakarta.ws.rs-api-2.1.5.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jakarta.xml.bind-api-2.3.2.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/javassist-3.22.0-CR2.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/javax.servlet-api-3.1.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/javax.ws.rs-api-2.1.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jaxb-api-2.3.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-client-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-common-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-container-servlet-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-container-servlet-core-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-hk2-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-media-jaxb-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-server-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-client-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-continuation-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-http-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-io-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-security-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-server-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-servlet-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-servlets-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-util-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jopt-simple-5.0.4.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-clients-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-log4j-appender-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-streams-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-streams-examples-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-streams-scala_2.12-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-streams-test-utils-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-tools-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka_2.12-2.4.0-sources.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka_2.12-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/log4j-1.2.17.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/lz4-java-1.6.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/maven-artifact-3.6.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/metrics-core-2.2.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-buffer-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-codec-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-common-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-handler-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-resolver-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-transport-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-transport-native-epoll-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-transport-native-unix-common-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/osgi-resource-locator-1.0.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/paranamer-2.8.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/plexus-utils-3.2.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/reflections-0.9.11.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/rocksdbjni-5.18.3.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/scala-collection-compat_2.12-2.1.2.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/scala-java8-compat_2.12-0.9.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/scala-library-2.12.10.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/scala-logging_2.12-3.9.2.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/scala-reflect-2.12.10.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/slf4j-api-1.7.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/slf4j-log4j12-1.7.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/snappy-java-1.1.7.3.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/validation-api-2.0.1.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/zookeeper-3.5.6.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/zookeeper-jute-3.5.6.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/zstd-jni-1.4.3-1.jar (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,411] INFO Client environment:java.library.path=/Users/yangweijie/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:. (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,412] INFO Client environment:java.io.tmpdir=/var/folders/cp/p4lwr_6n66s065dhcw80dzd80000gn/T/ (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,412] INFO Client environment:java.compiler=&lt;NA&gt; (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,412] INFO Client environment:os.name=Mac OS X (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,412] INFO Client environment:os.arch=x86_64 (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,412] INFO Client environment:os.version=10.15.4 (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,412] INFO Client environment:user.name=yangweijie (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,412] INFO Client environment:user.home=/Users/yangweijie (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,412] INFO Client environment:user.dir=/usr/local/etc/kafka/tmp (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,412] INFO Client environment:os.memory.free=978MB (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,412] INFO Client environment:os.memory.max=1024MB (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,412] INFO Client environment:os.memory.total=1024MB (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,414] INFO Initiating client connection, connectString=localhost:2181 sessionTimeout=6000 watcher=kafka.zookeeper.ZooKeeperClient$ZooKeeperClientWatcher$@7722c3c3 (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,417] INFO Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation (org.apache.zookeeper.common.X509Util)[2020-04-24 23:16:59,422] INFO jute.maxbuffer value is 4194304 Bytes (org.apache.zookeeper.ClientCnxnSocket)[2020-04-24 23:16:59,426] INFO zookeeper.request.timeout value is 0. feature enabled= (org.apache.zookeeper.ClientCnxn)[2020-04-24 23:16:59,428] INFO [ZooKeeperClient Kafka server] Waiting until connected. (kafka.zookeeper.ZooKeeperClient)[2020-04-24 23:16:59,430] INFO Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)[2020-04-24 23:16:59,440] INFO Socket connection established, initiating session, client: /0:0:0:0:0:0:0:1:51131, server: localhost/0:0:0:0:0:0:0:1:2181 (org.apache.zookeeper.ClientCnxn)[2020-04-24 23:16:59,444] INFO Session establishment complete on server localhost/0:0:0:0:0:0:0:1:2181, sessionid = 0x10000053312004f, negotiated timeout = 6000 (org.apache.zookeeper.ClientCnxn)[2020-04-24 23:16:59,447] INFO [ZooKeeperClient Kafka server] Connected. (kafka.zookeeper.ZooKeeperClient)[2020-04-24 23:16:59,612] INFO Cluster ID = I5sBHS6MSMG4MmUddyviFQ (kafka.server.KafkaServer)[2020-04-24 23:16:59,621] ERROR Fatal error during KafkaServer startup. Prepare to shutdown (kafka.server.KafkaServer)kafka.common.InconsistentClusterIdException: The Cluster ID I5sBHS6MSMG4MmUddyviFQ doesn't match stored clusterId Some(Lz_cYIXrTryPr_06DLt6hQ) in meta.properties. The broker is trying to join the wrong cluster. Configured zookeeper.connect may be wrong. at kafka.server.KafkaServer.startup(KafkaServer.scala:220) at kafka.server.KafkaServerStartable.startup(KafkaServerStartable.scala:44) at kafka.Kafka$.main(Kafka.scala:84) at kafka.Kafka.main(Kafka.scala)[2020-04-24 23:16:59,623] INFO shutting down (kafka.server.KafkaServer)[2020-04-24 23:16:59,625] INFO [ZooKeeperClient Kafka server] Closing. (kafka.zookeeper.ZooKeeperClient)[2020-04-24 23:16:59,732] INFO Session: 0x10000053312004f closed (org.apache.zookeeper.ZooKeeper)[2020-04-24 23:16:59,732] INFO EventThread shut down for session: 0x10000053312004f (org.apache.zookeeper.ClientCnxn)[2020-04-24 23:16:59,734] INFO [ZooKeeperClient Kafka server] Closed. (kafka.zookeeper.ZooKeeperClient)[2020-04-24 23:16:59,737] INFO shut down completed (kafka.server.KafkaServer)[2020-04-24 23:16:59,737] ERROR Exiting Kafka. (kafka.server.KafkaServerStartable)[2020-04-24 23:16:59,739] INFO shutting down (kafka.server.KafkaServer) ÈÄöËøá ‚Äújps -l‚Äù ÁöÑÁªìÊûúÁúãÔºåÁöÑÁ°ÆÊòØÊ≤°ÊúâÂêØÂä®Ëµ∑Êù•„ÄÇ 123yangweijieMacBook-Pro:tmp yangweijie$ jps -l640 org.apache.zookeeper.server.quorum.QuorumPeerMain30653 sun.tools.jps.Jps ÁÑ∂ÂêéÊàëÂ∞±ÂéªÊ¥óÊæ°‰∫Ü.. ÂõûÊù• ‚Äújps -l‚ÄùÔºåÊàëÊì¶Ôºåkafka Ëµ∑Êù•‰∫ÜÔºåËá™Â∑±Ëµ∑Êù•‰∫ÜÔºüÔºüÔºüÊàëÁöÑÂ¶àÔºåÂèó‰∏ç‰∫Ü‰∫Ü‚Ä¶ 1234yangweijieMacBook-Pro:~ yangweijie$ jps -l26240 sun.tools.jps.Jps25920 kafka.Kafka640 org.apache.zookeeper.server.quorum.QuorumPeerMain ÁÑ∂ÂêéÊàë‰∏ç‰ø°ÔºåÊàëÂ∞±ËØïÁùÄÂéªÁîü‰∫ß‰∏Ä‰∏™Ê∂àÊÅØ 1kafka-console-producer --broker-list localhost:9092 --topic test ÁöÑÁ°ÆÔºåÊä•Èîô‰∫Ü 1WARN [Producer clientId=console-producer] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient) ËøôÊàëÂ∞±ÊÉ≥‰∏çÈÄö‰∫Ü‚Ä¶ Ëøô‰∏™ kafka.Kafka ÈöæÈÅì‰∏çËÉΩ‰ª£Ë°® kafka ÊúçÂä°Á´ØÊ¥ªÁùÄÔºü ÁÑ∂ÂêéÊàëÂèàÂéªÂ∞ùËØïÁöÑ ‚Äújps -l‚Äù ÔºåÂ¶àÁöÑÔºåÈÇ£‰∏™ËøõÁ®ãÂèàÊ≠ª‰∫Ü‚Ä¶ 123yangweijieMacBook-Pro:~ yangweijie$ jps -l640 org.apache.zookeeper.server.quorum.QuorumPeerMain32381 sun.tools.jps.Jps ‰∏∫‰∫ÜËØÅÊòéÊàëÁúºÁùõÊ≤°Ëä±ÔºåÊàëÂèàÂ∞ùËØïÁöÑ‰∏ÄÈÅçÔºåÂ¶àÁöÑÔºåÂèàÂá∫Áé∞‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑ kafka ËøõÁ®ã„ÄÇ„ÄÇ„ÄÇ 1234yangweijieMacBook-Pro:~ yangweijie$ jps -l32704 sun.tools.jps.Jps640 org.apache.zookeeper.server.quorum.QuorumPeerMain32384 kafka.Kafka ÁÑ∂ÂêéÊàëÂèàËØï‰∫Ü‰∏ÄÈÅçÔºåkafka ËøõÁ®ãÂèàÊ≤°‰∫Ü‚Ä¶ ÁÑ∂ÂêéÊàëÊé•ÁùÄËØï‰∫ÜÂæàÂ§öÈÅçÔºåkafkaËøõÁ®ã‰∏ÄÁõ¥Ê≤°Êúâ‚Ä¶ ËøôÊ¨°ÔºåÊàëÂÜ≥ÂÆöÂÜçÊ¨°ÂêØÂä®‰∏Ä‰∏ã kafka ËØïËØï‚Ä¶ ËøòÊòØÂêØÂä®‰∏ç‰∫Ü‚Ä¶ ÁÑ∂ÂêéÊàëÊó†ËÅäÁöÑÊµãËØï‰∏ã ‚Äújsp -l‚Äù Ëøô‰∏™ÂëΩ‰ª§ÔºåÂèëÁé∞ÂÖ∂ÊâßË°å 5-6 Ê¨°Â∞±‰ºöÊúâ‰∏ÄÊ¨° ‚Äúkafka.Kafka‚Äù ÁöÑËøõÁ®ã‰∫ßÁîüÔºåÁÑ∂ÂêéÂèà‰ºöËá™Â∑±Ê∂àÂ§±‚Ä¶ ÁéÑÂ≠¶ÔºüÔºüÔºüÔºüÔºüÔºüÂ¥©‰∫Ü‚Ä¶ Â∞ùËØïËß£ÂÜ≥ÊñπÊ°à ÂèÇËÄÉÔºöhttps://blog.csdn.net/Sakitaf/article/details/104954268 Êàë‰ª¨ÂõûÂà∞Á¨¨‰∏â‰∏™ÊúÄÂàùÁöÑÈóÆÈ¢òÔºå‰πüÂ∞±ÊòØ‰∏ÄÁõ¥ÂêØÂä®‰∏ç‰∫Ü kafkaÔºå‰πüÂ∞±ÊòØ‰∏äÈù¢ÁöÑÊä•ÈîôÔºö 1kafka.common.InconsistentClusterIdException: The Cluster ID I5sBHS6MSMG4MmUddyviFQ doesn't match stored clusterId Some(Lz_cYIXrTryPr_06DLt6hQ) in meta.properties. The broker is trying to join the wrong cluster. Configured zookeeper.connect may be wrong. ‰∫éÊòØÔºåÊàëÂ∞±Â∞ùËØïÂéªÊâæ meta.propertiesÔºåÂéüÊù•Ëøô‰∏™ meta.properties Âú®/usr/local/etc/kafka/tmp/kafka-logs/ÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂ÈáåÈù¢ÁöÑ meta.properties ‰∏≠ÁöÑ Cluster ID Êîπ‰∏∫Êä•Èîô‰∏≠ÈúÄË¶ÅÁöÑ„ÄÇËøôÂ∫îËØ•Â∞±ÊòØ 2.4.0 ÁöÑbug‰∫ÜÔºåÂú®Êàë‰∏äÊ¨°Êö¥ÂäõÂÖ≥Èó≠ kafka Êó∂Ôºå‰∏ç‰ºö‰∏ªÂä®ÁöÑ‰∏éÊñ∞ÁöÑzkÂÆû‰æãÂª∫Á´ãËøûÊé•„ÄÇ ÁªìÊûúÔºöÂ∑≤Ëß£ÂÜ≥ÔºÅÔºÅÔºÅÔºÅ Q4ÈóÆÈ¢òÊúÄËøëÊÉ≥Êü•‰∏Ä‰∏ã kafka ÁöÑÂêØÂä®Êó•ÂøóÔºåÁªìÊûú‰∏çÊü•‰∏çÁü•ÈÅìÔºå‰∏ÄÊü•Âêì‰∏ÄË∑≥Ôºå‰∏Ä‰∏™ÂêØÂä®Êó•ÂøóÂç†‰∫Ü4‰∏™Â§ögÁöÑÂ≠òÂÇ®‚Ä¶ Áúã‰∫Ü‰∏ãÔºåÂÖ®ÊòØÂêØÂä®Êó•ÂøóÔºå10ÂàÜÈíüÂ∞±Êõ¥Êñ∞‰∏ÄÊ¨°‚Ä¶ ÂêìÂæóÊàëËµ∂Á¥ßÂà†‰∫ÜÔºåÂæóÁ†îÁ©∂‰∏Ä‰∏ãÂ¶Ç‰Ωï‰∏çËÆ©‰ªñÊõ¥Êñ∞ÁöÑËøô‰πàÈ¢ëÁπÅÔºåÊàëÁöÑ256gÁöÑÁîµËÑëÁëüÁëüÂèëÊäñ‚Ä¶ Â∞ùËØïËß£ÂÜ≥ÊñπÊ°àÁúã‰∫Ü‰∏ãÔºåÂ∫îËØ•ÊòØ‰ª•ÂâçÊää Zookeeper ÂÖ≥Èó≠‰∫ÜÔºå‰ΩÜÊòØ kafka ‰∏ÄÁõ¥Ê≤°ÂÖ≥Èó≠ÔºåÁÑ∂Âêé kafka ‰∏ÄÁõ¥Â§±Ë¥•ÈáçËøûÔºåÊó•ÂøóÁñØÁãÇÂ¢ûÂä†‚Ä¶ ÂÜçÊ¨°Â∞ùËØïÁöÑ‰ΩøÁî®ÂëΩ‰ª§ ‚Äúkafka-server-stop /usr/local/etc/kafka/server.properties‚ÄùÔºåÁÑ∂ÂêéÁúã ‚Äú/usr/local/var/log/kafka‚Äù ‰∏ãÁöÑÊó•Âøó„ÄÇ È¶ñÂÖàÔºåÁöÑÁ°ÆÊúâ shutdownÔºåËøôÊòØÊàëÊêúÁ¥¢ shutdown ÂêéËøáÊª§ÂæóÂà∞ÁöÑÊó•ÂøóÔºåÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425 controlled.shutdown.enable = true controlled.shutdown.max.retries = 3 controlled.shutdown.retry.backoff.ms = 5000 controlled.shutdown.enable = true controlled.shutdown.max.retries = 3 controlled.shutdown.retry.backoff.ms = 5000[2020-04-29 18:21:19,508] ERROR [KafkaServer id=0] Fatal error during KafkaServer startup. Prepare to shutdown (kafka.server.KafkaServer)[2020-04-29 18:21:19,517] INFO [LogDirFailureHandler]: Shutdown completed (kafka.server.ReplicaManager$LogDirFailureHandler)[2020-04-29 18:21:19,518] INFO [ReplicaFetcherManager on broker 0] shutdown completed (kafka.server.ReplicaFetcherManager)[2020-04-29 18:21:19,519] INFO [ReplicaAlterLogDirsManager on broker 0] shutdown completed (kafka.server.ReplicaAlterLogDirsManager)[2020-04-29 18:21:19,637] INFO [ExpirationReaper-0-Fetch]: Shutdown completed (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:19,911] INFO [ExpirationReaper-0-Produce]: Shutdown completed (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:19,912] INFO [ExpirationReaper-0-DeleteRecords]: Shutdown completed (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:20,187] INFO [ExpirationReaper-0-ElectLeader]: Shutdown completed (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:20,262] INFO Shutdown complete. (kafka.log.LogManager)[2020-04-29 18:21:20,714] INFO [ThrottledChannelReaper-Fetch]: Shutdown completed (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:21,714] INFO [ThrottledChannelReaper-Produce]: Shutdown completed (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:22,786] INFO [ThrottledChannelReaper-Request]: Shutdown completed (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:22,814] INFO [SocketServer brokerId=0] Shutdown completed (kafka.network.SocketServer) controlled.shutdown.enable = true controlled.shutdown.max.retries = 3 controlled.shutdown.retry.backoff.ms = 5000 controlled.shutdown.enable = true controlled.shutdown.max.retries = 3 controlled.shutdown.retry.backoff.ms = 5000 ‰ΩÜÊòØÔºå‰ΩøÁî® jps -l ÁúãÁöÑÁ°Æ kafka ËøõÁ®ãËøòÊ≤°Ê≠ªÔºåÊî∂ÂèëÊ∂àÊÅØ‰πüÊ≠£Â∏∏ÔºåÊâÄ‰ª•Êàë‰ª¨ÂÜçÁúã‰∏Ä‰∏ãÂÆåÊï¥ÁöÑÊó•ÂøóÔºåÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697989910010110210310410510610710810911011111211311411511611711811912012112212312412512612712812913013113213313413513613713813914014114214314414514614714814915015115215315415515615715815916016116216316416516616716816917017117217317417517617717817918018118218318418518618718818919019119219319419519619719819920020120220320420520620720820921021121221321421521621721821922022122222322422522622722822923023123223323423523623723823924024124224324424524624724824925025125225325425525625725825926026126226326426526626726826927027127227327427527627727827928028128228328428528628728828929029129229329429529629729829930030130230330430530630730830931031131231331431531631731831932032132232332432532632732832933033133233333433533633733833934034134234334434534634734834935035135235335435535635735835936036136236336436536636736836937037137237337437537637737837938038138238338438538638738838939039139239339439539639739839940040140240340440540640740840941041141241341441541641741841942042142242342442542642742842943043143243343443543643743843944044144244344444544644744844945045145245345445545645745845946046146246346446546646746846947047147247347447547647747847948048148248348448548648748848949049149249349449549649749849950050150250350450550650750850951051151251351451551651751851952052152252352452552652752852953053153253353453553653753853954054154254354454554654754854955055155255355455555655755855956056156256356456556656756856957057157257357457557657757857958058158258358458558658758858959059159259359459559659759859960060160260360460560660760860961061161261361461561661761861962062162262362462562662762862963063163263363463563663763863964064164264364464564664764864965065165265365465565665765865966066166266366466566666766866967067167267367467567667767867968068168268368468568668768868969069169269369469569669769869970070170270370470570670770870971071171271371471571671771871972072172272372472572672772872973073173273373473573673773873974074174274374474574674774874975075175275375475575675775875976076176276376476576676776876977077177277377477577677777877978078178278378478578678778878979079179279379479579679779879980080180280380480580680780880981081181281381481581681781881982082182282382482582682782882983083183283383483583683783883984084184284384484584684784884985085185285385485585685785885986086186286386486586686786886987087187287387487587687787887988088188288388488588688788888989089189289389489589689789889990090190290390490590690790890991091191291391491591691791891992092192292392492592692792892993093193293393493593693793893994094194294394494594694794894995095195295395495595695795895996096196296396496596696796896997097197297397497597697797897998098198298398498598698798898999099199299399499599699799899910001001100210031004100510061007100810091010101110121013101410151016101710181019102010211022102310241025102610271028102910301031103210331034103510361037103810391040104110421043104410451046104710481049105010511052105310541055105610571058105910601061106210631064106510661067106810691070107110721073107410751076107710781079108010811082108310841085108610871088108910901091109210931094109510961097109810991100110111021103110411051106110711081109111011111112111311141115111611171118111911201121112211231124112511261127112811291130113111321133113411351136113711381139114011411142114311441145114611471148114911501151115211531154115511561157115811591160116111621163116411651166116711681169117011711172117311741175117611771178117911801181118211831184118511861187118811891190119111921193119411951196119711981199120012011202120312041205120612071208120912101211121212131214121512161217121812191220122112221223122412251226122712281229123012311232123312341235123612371238123912401241124212431244124512461247124812491250125112521253125412551256125712581259126012611262126312641265126612671268126912701271127212731274127512761277127812791280128112821283128412851286128712881289129012911292129312941295129612971298129913001301130213031304130513061307130813091310131113121313131413151316131713181319132013211322132313241325132613271328132913301331133213331334133513361337133813391340134113421343134413451346134713481349135013511352135313541355135613571358135913601361136213631364136513661367136813691370137113721373137413751376137713781379138013811382138313841385138613871388138913901391139213931394139513961397139813991400140114021403140414051406140714081409141014111412141314141415141614171418141914201421142214231424142514261427142814291430143114321433143414351436143714381439144014411442144314441445144614471448144914501451145214531454145514561457145814591460146114621463146414651466146714681469147014711472147314741475147614771478147914801481148214831484148514861487148814891490149114921493149414951496149714981499150015011502150315041505150615071508150915101511151215131514151515161517[2020-04-29 18:21:17,883] INFO Registered kafka:type=kafka.Log4jController MBean (kafka.utils.Log4jControllerRegistration$)[2020-04-29 18:21:18,347] INFO Registered signal handlers for TERM, INT, HUP (org.apache.kafka.common.utils.LoggingSignalHandler)[2020-04-29 18:21:18,348] INFO starting (kafka.server.KafkaServer)[2020-04-29 18:21:18,348] INFO Connecting to zookeeper on localhost:2181 (kafka.server.KafkaServer)[2020-04-29 18:21:18,364] INFO [ZooKeeperClient Kafka server] Initializing a new session to localhost:2181. (kafka.zookeeper.ZooKeeperClient)[2020-04-29 18:21:18,370] INFO Client environment:zookeeper.version=3.5.6-c11b7e26bc554b8523dc929761dd28808913f091, built on 10/08/2019 20:18 GMT (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,370] INFO Client environment:host.name=localhost (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,370] INFO Client environment:java.version=1.8.0_222 (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,370] INFO Client environment:java.vendor=AdoptOpenJDK (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,370] INFO Client environment:java.home=/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/jre (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,370] INFO Client environment:java.class.path=/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/activation-1.1.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/aopalliance-repackaged-2.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/argparse4j-0.7.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/audience-annotations-0.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/commons-cli-1.4.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/commons-lang3-3.8.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-api-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-basic-auth-extension-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-file-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-json-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-mirror-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-mirror-client-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-runtime-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-transforms-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/guava-20.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/hk2-api-2.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/hk2-locator-2.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/hk2-utils-2.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-annotations-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-core-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-databind-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-dataformat-csv-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-datatype-jdk8-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-jaxrs-base-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-jaxrs-json-provider-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-module-jaxb-annotations-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-module-paranamer-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-module-scala_2.12-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jakarta.activation-api-1.2.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jakarta.annotation-api-1.3.4.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jakarta.inject-2.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jakarta.ws.rs-api-2.1.5.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jakarta.xml.bind-api-2.3.2.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/javassist-3.22.0-CR2.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/javax.servlet-api-3.1.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/javax.ws.rs-api-2.1.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jaxb-api-2.3.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-client-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-common-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-container-servlet-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-container-servlet-core-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-hk2-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-media-jaxb-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-server-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-client-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-continuation-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-http-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-io-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-security-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-server-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-servlet-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-servlets-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-util-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jopt-simple-5.0.4.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-clients-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-log4j-appender-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-streams-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-streams-examples-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-streams-scala_2.12-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-streams-test-utils-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-tools-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka_2.12-2.4.0-sources.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka_2.12-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/log4j-1.2.17.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/lz4-java-1.6.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/maven-artifact-3.6.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/metrics-core-2.2.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-buffer-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-codec-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-common-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-handler-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-resolver-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-transport-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-transport-native-epoll-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-transport-native-unix-common-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/osgi-resource-locator-1.0.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/paranamer-2.8.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/plexus-utils-3.2.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/reflections-0.9.11.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/rocksdbjni-5.18.3.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/scala-collection-compat_2.12-2.1.2.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/scala-java8-compat_2.12-0.9.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/scala-library-2.12.10.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/scala-logging_2.12-3.9.2.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/scala-reflect-2.12.10.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/slf4j-api-1.7.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/slf4j-log4j12-1.7.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/snappy-java-1.1.7.3.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/validation-api-2.0.1.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/zookeeper-3.5.6.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/zookeeper-jute-3.5.6.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/zstd-jni-1.4.3-1.jar (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,370] INFO Client environment:java.library.path=/Users/yangweijie/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:. (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,371] INFO Client environment:java.io.tmpdir=/var/folders/cp/p4lwr_6n66s065dhcw80dzd80000gn/T/ (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,371] INFO Client environment:java.compiler=&lt;NA&gt; (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,371] INFO Client environment:os.name=Mac OS X (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,371] INFO Client environment:os.arch=x86_64 (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,371] INFO Client environment:os.version=10.15.4 (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,371] INFO Client environment:user.name=yangweijie (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,371] INFO Client environment:user.home=/Users/yangweijie (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,371] INFO Client environment:user.dir=/usr/local (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,371] INFO Client environment:os.memory.free=978MB (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,371] INFO Client environment:os.memory.max=1024MB (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,371] INFO Client environment:os.memory.total=1024MB (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,373] INFO Initiating client connection, connectString=localhost:2181 sessionTimeout=6000 watcher=kafka.zookeeper.ZooKeeperClient$ZooKeeperClientWatcher$@7722c3c3 (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:18,377] INFO Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation (org.apache.zookeeper.common.X509Util)[2020-04-29 18:21:18,383] INFO jute.maxbuffer value is 4194304 Bytes (org.apache.zookeeper.ClientCnxnSocket)[2020-04-29 18:21:18,388] INFO zookeeper.request.timeout value is 0. feature enabled= (org.apache.zookeeper.ClientCnxn)[2020-04-29 18:21:18,389] INFO [ZooKeeperClient Kafka server] Waiting until connected. (kafka.zookeeper.ZooKeeperClient)[2020-04-29 18:21:18,392] INFO Opening socket connection to server localhost/127.0.0.1:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)[2020-04-29 18:21:18,403] INFO Socket connection established, initiating session, client: /127.0.0.1:56049, server: localhost/127.0.0.1:2181 (org.apache.zookeeper.ClientCnxn)[2020-04-29 18:21:18,408] INFO Session establishment complete on server localhost/127.0.0.1:2181, sessionid = 0x100000533120320, negotiated timeout = 6000 (org.apache.zookeeper.ClientCnxn)[2020-04-29 18:21:18,411] INFO [ZooKeeperClient Kafka server] Connected. (kafka.zookeeper.ZooKeeperClient)[2020-04-29 18:21:18,600] INFO Cluster ID = I5sBHS6MSMG4MmUddyviFQ (kafka.server.KafkaServer)[2020-04-29 18:21:18,659] INFO KafkaConfig values: advertised.host.name = null advertised.listeners = null advertised.port = null alter.config.policy.class.name = null alter.log.dirs.replication.quota.window.num = 11 alter.log.dirs.replication.quota.window.size.seconds = 1 authorizer.class.name = auto.create.topics.enable = true auto.leader.rebalance.enable = true background.threads = 10 broker.id = 0 broker.id.generation.enable = true broker.rack = null client.quota.callback.class = null compression.type = producer connection.failed.authentication.delay.ms = 100 connections.max.idle.ms = 600000 connections.max.reauth.ms = 0 control.plane.listener.name = null controlled.shutdown.enable = true controlled.shutdown.max.retries = 3 controlled.shutdown.retry.backoff.ms = 5000 controller.socket.timeout.ms = 30000 create.topic.policy.class.name = null default.replication.factor = 1 delegation.token.expiry.check.interval.ms = 3600000 delegation.token.expiry.time.ms = 86400000 delegation.token.master.key = null delegation.token.max.lifetime.ms = 604800000 delete.records.purgatory.purge.interval.requests = 1 delete.topic.enable = true fetch.purgatory.purge.interval.requests = 1000 group.initial.rebalance.delay.ms = 0 group.max.session.timeout.ms = 1800000 group.max.size = 2147483647 group.min.session.timeout.ms = 6000 host.name = inter.broker.listener.name = null inter.broker.protocol.version = 2.4-IV1 kafka.metrics.polling.interval.secs = 10 kafka.metrics.reporters = [] leader.imbalance.check.interval.seconds = 300 leader.imbalance.per.broker.percentage = 10 listener.security.protocol.map = PLAINTEXT:PLAINTEXT,SSL:SSL,SASL_PLAINTEXT:SASL_PLAINTEXT,SASL_SSL:SASL_SSL listeners = PLAINTEXT://:9092 log.cleaner.backoff.ms = 15000 log.cleaner.dedupe.buffer.size = 134217728 log.cleaner.delete.retention.ms = 86400000 log.cleaner.enable = true log.cleaner.io.buffer.load.factor = 0.9 log.cleaner.io.buffer.size = 524288 log.cleaner.io.max.bytes.per.second = 1.7976931348623157E308 log.cleaner.max.compaction.lag.ms = 9223372036854775807 log.cleaner.min.cleanable.ratio = 0.5 log.cleaner.min.compaction.lag.ms = 0 log.cleaner.threads = 1 log.cleanup.policy = [delete] log.dir = /tmp/kafka-logs log.dirs = /usr/local/etc/kafka/tmp/kafka-logs log.flush.interval.messages = 9223372036854775807 log.flush.interval.ms = null log.flush.offset.checkpoint.interval.ms = 60000 log.flush.scheduler.interval.ms = 9223372036854775807 log.flush.start.offset.checkpoint.interval.ms = 60000 log.index.interval.bytes = 4096 log.index.size.max.bytes = 10485760 log.message.downconversion.enable = true log.message.format.version = 2.4-IV1 log.message.timestamp.difference.max.ms = 9223372036854775807 log.message.timestamp.type = CreateTime log.preallocate = false log.retention.bytes = -1 log.retention.check.interval.ms = 300000 log.retention.hours = 168 log.retention.minutes = null log.retention.ms = null log.roll.hours = 168 log.roll.jitter.hours = 0 log.roll.jitter.ms = null log.roll.ms = null log.segment.bytes = 1073741824 log.segment.delete.delay.ms = 60000 max.connections = 2147483647 max.connections.per.ip = 2147483647 max.connections.per.ip.overrides = max.incremental.fetch.session.cache.slots = 1000 message.max.bytes = 1000012 metric.reporters = [] metrics.num.samples = 2 metrics.recording.level = INFO metrics.sample.window.ms = 30000 min.insync.replicas = 1 num.io.threads = 8 num.network.threads = 3 num.partitions = 1 num.recovery.threads.per.data.dir = 1 num.replica.alter.log.dirs.threads = null num.replica.fetchers = 1 offset.metadata.max.bytes = 4096 offsets.commit.required.acks = -1 offsets.commit.timeout.ms = 5000 offsets.load.buffer.size = 5242880 offsets.retention.check.interval.ms = 600000 offsets.retention.minutes = 10080 offsets.topic.compression.codec = 0 offsets.topic.num.partitions = 50 offsets.topic.replication.factor = 1 offsets.topic.segment.bytes = 104857600 password.encoder.cipher.algorithm = AES/CBC/PKCS5Padding password.encoder.iterations = 4096 password.encoder.key.length = 128 password.encoder.keyfactory.algorithm = null password.encoder.old.secret = null password.encoder.secret = null port = 9092 principal.builder.class = null producer.purgatory.purge.interval.requests = 1000 queued.max.request.bytes = -1 queued.max.requests = 500 quota.consumer.default = 9223372036854775807 quota.producer.default = 9223372036854775807 quota.window.num = 11 quota.window.size.seconds = 1 replica.fetch.backoff.ms = 1000 replica.fetch.max.bytes = 1048576 replica.fetch.min.bytes = 1 replica.fetch.response.max.bytes = 10485760 replica.fetch.wait.max.ms = 500 replica.high.watermark.checkpoint.interval.ms = 5000 replica.lag.time.max.ms = 10000 replica.selector.class = null replica.socket.receive.buffer.bytes = 65536 replica.socket.timeout.ms = 30000 replication.quota.window.num = 11 replication.quota.window.size.seconds = 1 request.timeout.ms = 30000 reserved.broker.max.id = 1000 sasl.client.callback.handler.class = null sasl.enabled.mechanisms = [GSSAPI] sasl.jaas.config = null sasl.kerberos.kinit.cmd = /usr/bin/kinit sasl.kerberos.min.time.before.relogin = 60000 sasl.kerberos.principal.to.local.rules = [DEFAULT] sasl.kerberos.service.name = null sasl.kerberos.ticket.renew.jitter = 0.05 sasl.kerberos.ticket.renew.window.factor = 0.8 sasl.login.callback.handler.class = null sasl.login.class = null sasl.login.refresh.buffer.seconds = 300 sasl.login.refresh.min.period.seconds = 60 sasl.login.refresh.window.factor = 0.8 sasl.login.refresh.window.jitter = 0.05 sasl.mechanism.inter.broker.protocol = GSSAPI sasl.server.callback.handler.class = null security.inter.broker.protocol = PLAINTEXT security.providers = null socket.receive.buffer.bytes = 102400 socket.request.max.bytes = 104857600 socket.send.buffer.bytes = 102400 ssl.cipher.suites = [] ssl.client.auth = none ssl.enabled.protocols = [TLSv1.2, TLSv1.1, TLSv1] ssl.endpoint.identification.algorithm = https ssl.key.password = null ssl.keymanager.algorithm = SunX509 ssl.keystore.location = null ssl.keystore.password = null ssl.keystore.type = JKS ssl.principal.mapping.rules = DEFAULT ssl.protocol = TLS ssl.provider = null ssl.secure.random.implementation = null ssl.trustmanager.algorithm = PKIX ssl.truststore.location = null ssl.truststore.password = null ssl.truststore.type = JKS transaction.abort.timed.out.transaction.cleanup.interval.ms = 60000 transaction.max.timeout.ms = 900000 transaction.remove.expired.transaction.cleanup.interval.ms = 3600000 transaction.state.log.load.buffer.size = 5242880 transaction.state.log.min.isr = 1 transaction.state.log.num.partitions = 50 transaction.state.log.replication.factor = 1 transaction.state.log.segment.bytes = 104857600 transactional.id.expiration.ms = 604800000 unclean.leader.election.enable = false zookeeper.connect = localhost:2181 zookeeper.connection.timeout.ms = 6000 zookeeper.max.in.flight.requests = 10 zookeeper.session.timeout.ms = 6000 zookeeper.set.acl = false zookeeper.sync.time.ms = 2000 (kafka.server.KafkaConfig)[2020-04-29 18:21:18,667] INFO KafkaConfig values: advertised.host.name = null advertised.listeners = null advertised.port = null alter.config.policy.class.name = null alter.log.dirs.replication.quota.window.num = 11 alter.log.dirs.replication.quota.window.size.seconds = 1 authorizer.class.name = auto.create.topics.enable = true auto.leader.rebalance.enable = true background.threads = 10 broker.id = 0 broker.id.generation.enable = true broker.rack = null client.quota.callback.class = null compression.type = producer connection.failed.authentication.delay.ms = 100 connections.max.idle.ms = 600000 connections.max.reauth.ms = 0 control.plane.listener.name = null controlled.shutdown.enable = true controlled.shutdown.max.retries = 3 controlled.shutdown.retry.backoff.ms = 5000 controller.socket.timeout.ms = 30000 create.topic.policy.class.name = null default.replication.factor = 1 delegation.token.expiry.check.interval.ms = 3600000 delegation.token.expiry.time.ms = 86400000 delegation.token.master.key = null delegation.token.max.lifetime.ms = 604800000 delete.records.purgatory.purge.interval.requests = 1 delete.topic.enable = true fetch.purgatory.purge.interval.requests = 1000 group.initial.rebalance.delay.ms = 0 group.max.session.timeout.ms = 1800000 group.max.size = 2147483647 group.min.session.timeout.ms = 6000 host.name = inter.broker.listener.name = null inter.broker.protocol.version = 2.4-IV1 kafka.metrics.polling.interval.secs = 10 kafka.metrics.reporters = [] leader.imbalance.check.interval.seconds = 300 leader.imbalance.per.broker.percentage = 10 listener.security.protocol.map = PLAINTEXT:PLAINTEXT,SSL:SSL,SASL_PLAINTEXT:SASL_PLAINTEXT,SASL_SSL:SASL_SSL listeners = PLAINTEXT://:9092 log.cleaner.backoff.ms = 15000 log.cleaner.dedupe.buffer.size = 134217728 log.cleaner.delete.retention.ms = 86400000 log.cleaner.enable = true log.cleaner.io.buffer.load.factor = 0.9 log.cleaner.io.buffer.size = 524288 log.cleaner.io.max.bytes.per.second = 1.7976931348623157E308 log.cleaner.max.compaction.lag.ms = 9223372036854775807 log.cleaner.min.cleanable.ratio = 0.5 log.cleaner.min.compaction.lag.ms = 0 log.cleaner.threads = 1 log.cleanup.policy = [delete] log.dir = /tmp/kafka-logs log.dirs = /usr/local/etc/kafka/tmp/kafka-logs log.flush.interval.messages = 9223372036854775807 log.flush.interval.ms = null log.flush.offset.checkpoint.interval.ms = 60000 log.flush.scheduler.interval.ms = 9223372036854775807 log.flush.start.offset.checkpoint.interval.ms = 60000 log.index.interval.bytes = 4096 log.index.size.max.bytes = 10485760 log.message.downconversion.enable = true log.message.format.version = 2.4-IV1 log.message.timestamp.difference.max.ms = 9223372036854775807 log.message.timestamp.type = CreateTime log.preallocate = false log.retention.bytes = -1 log.retention.check.interval.ms = 300000 log.retention.hours = 168 log.retention.minutes = null log.retention.ms = null log.roll.hours = 168 log.roll.jitter.hours = 0 log.roll.jitter.ms = null log.roll.ms = null log.segment.bytes = 1073741824 log.segment.delete.delay.ms = 60000 max.connections = 2147483647 max.connections.per.ip = 2147483647 max.connections.per.ip.overrides = max.incremental.fetch.session.cache.slots = 1000 message.max.bytes = 1000012 metric.reporters = [] metrics.num.samples = 2 metrics.recording.level = INFO metrics.sample.window.ms = 30000 min.insync.replicas = 1 num.io.threads = 8 num.network.threads = 3 num.partitions = 1 num.recovery.threads.per.data.dir = 1 num.replica.alter.log.dirs.threads = null num.replica.fetchers = 1 offset.metadata.max.bytes = 4096 offsets.commit.required.acks = -1 offsets.commit.timeout.ms = 5000 offsets.load.buffer.size = 5242880 offsets.retention.check.interval.ms = 600000 offsets.retention.minutes = 10080 offsets.topic.compression.codec = 0 offsets.topic.num.partitions = 50 offsets.topic.replication.factor = 1 offsets.topic.segment.bytes = 104857600 password.encoder.cipher.algorithm = AES/CBC/PKCS5Padding password.encoder.iterations = 4096 password.encoder.key.length = 128 password.encoder.keyfactory.algorithm = null password.encoder.old.secret = null password.encoder.secret = null port = 9092 principal.builder.class = null producer.purgatory.purge.interval.requests = 1000 queued.max.request.bytes = -1 queued.max.requests = 500 quota.consumer.default = 9223372036854775807 quota.producer.default = 9223372036854775807 quota.window.num = 11 quota.window.size.seconds = 1 replica.fetch.backoff.ms = 1000 replica.fetch.max.bytes = 1048576 replica.fetch.min.bytes = 1 replica.fetch.response.max.bytes = 10485760 replica.fetch.wait.max.ms = 500 replica.high.watermark.checkpoint.interval.ms = 5000 replica.lag.time.max.ms = 10000 replica.selector.class = null replica.socket.receive.buffer.bytes = 65536 replica.socket.timeout.ms = 30000 replication.quota.window.num = 11 replication.quota.window.size.seconds = 1 request.timeout.ms = 30000 reserved.broker.max.id = 1000 sasl.client.callback.handler.class = null sasl.enabled.mechanisms = [GSSAPI] sasl.jaas.config = null sasl.kerberos.kinit.cmd = /usr/bin/kinit sasl.kerberos.min.time.before.relogin = 60000 sasl.kerberos.principal.to.local.rules = [DEFAULT] sasl.kerberos.service.name = null sasl.kerberos.ticket.renew.jitter = 0.05 sasl.kerberos.ticket.renew.window.factor = 0.8 sasl.login.callback.handler.class = null sasl.login.class = null sasl.login.refresh.buffer.seconds = 300 sasl.login.refresh.min.period.seconds = 60 sasl.login.refresh.window.factor = 0.8 sasl.login.refresh.window.jitter = 0.05 sasl.mechanism.inter.broker.protocol = GSSAPI sasl.server.callback.handler.class = null security.inter.broker.protocol = PLAINTEXT security.providers = null socket.receive.buffer.bytes = 102400 socket.request.max.bytes = 104857600 socket.send.buffer.bytes = 102400 ssl.cipher.suites = [] ssl.client.auth = none ssl.enabled.protocols = [TLSv1.2, TLSv1.1, TLSv1] ssl.endpoint.identification.algorithm = https ssl.key.password = null ssl.keymanager.algorithm = SunX509 ssl.keystore.location = null ssl.keystore.password = null ssl.keystore.type = JKS ssl.principal.mapping.rules = DEFAULT ssl.protocol = TLS ssl.provider = null ssl.secure.random.implementation = null ssl.trustmanager.algorithm = PKIX ssl.truststore.location = null ssl.truststore.password = null ssl.truststore.type = JKS transaction.abort.timed.out.transaction.cleanup.interval.ms = 60000 transaction.max.timeout.ms = 900000 transaction.remove.expired.transaction.cleanup.interval.ms = 3600000 transaction.state.log.load.buffer.size = 5242880 transaction.state.log.min.isr = 1 transaction.state.log.num.partitions = 50 transaction.state.log.replication.factor = 1 transaction.state.log.segment.bytes = 104857600 transactional.id.expiration.ms = 604800000 unclean.leader.election.enable = false zookeeper.connect = localhost:2181 zookeeper.connection.timeout.ms = 6000 zookeeper.max.in.flight.requests = 10 zookeeper.session.timeout.ms = 6000 zookeeper.set.acl = false zookeeper.sync.time.ms = 2000 (kafka.server.KafkaConfig)[2020-04-29 18:21:18,688] INFO [ThrottledChannelReaper-Fetch]: Starting (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:18,688] INFO [ThrottledChannelReaper-Produce]: Starting (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:18,688] INFO [ThrottledChannelReaper-Request]: Starting (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:18,721] INFO Loading logs. (kafka.log.LogManager)[2020-04-29 18:21:18,768] INFO [Log partition=__consumer_offsets-9, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,770] INFO [Log partition=__consumer_offsets-9, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,802] INFO [Log partition=__consumer_offsets-9, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,804] INFO [Log partition=__consumer_offsets-9, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 60 ms (kafka.log.Log)[2020-04-29 18:21:18,812] INFO [Log partition=__consumer_offsets-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,812] INFO [Log partition=__consumer_offsets-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,814] INFO [Log partition=__consumer_offsets-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,815] INFO [Log partition=__consumer_offsets-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:18,819] INFO [Log partition=__consumer_offsets-7, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,819] INFO [Log partition=__consumer_offsets-7, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,821] INFO [Log partition=__consumer_offsets-7, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,822] INFO [Log partition=__consumer_offsets-7, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 5 ms (kafka.log.Log)[2020-04-29 18:21:18,826] INFO [Log partition=__consumer_offsets-31, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,826] INFO [Log partition=__consumer_offsets-31, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,828] INFO [Log partition=__consumer_offsets-31, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,829] INFO [Log partition=__consumer_offsets-31, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:18,832] INFO [Log partition=__consumer_offsets-36, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,832] INFO [Log partition=__consumer_offsets-36, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,834] INFO [Log partition=__consumer_offsets-36, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,835] INFO [Log partition=__consumer_offsets-36, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:18,838] INFO [Log partition=__consumer_offsets-38, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,839] INFO [Log partition=__consumer_offsets-38, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,841] INFO [Log partition=__consumer_offsets-38, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,841] INFO [Log partition=__consumer_offsets-38, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:18,845] INFO [Log partition=__consumer_offsets-6, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,845] INFO [Log partition=__consumer_offsets-6, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,847] INFO [Log partition=__consumer_offsets-6, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,847] INFO [Log partition=__consumer_offsets-6, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:18,850] INFO [Log partition=__consumer_offsets-1, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,851] INFO [Log partition=__consumer_offsets-1, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,853] INFO [Log partition=__consumer_offsets-1, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,853] INFO [Log partition=__consumer_offsets-1, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:18,857] INFO [Log partition=__consumer_offsets-8, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,857] INFO [Log partition=__consumer_offsets-8, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,859] INFO [Log partition=__consumer_offsets-8, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,859] INFO [Log partition=__consumer_offsets-8, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:18,863] INFO [Log partition=__consumer_offsets-39, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,863] INFO [Log partition=__consumer_offsets-39, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,865] INFO [Log partition=__consumer_offsets-39, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,865] INFO [Log partition=__consumer_offsets-39, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:18,869] INFO [Log partition=__consumer_offsets-37, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,869] INFO [Log partition=__consumer_offsets-37, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,871] INFO [Log partition=__consumer_offsets-37, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,871] INFO [Log partition=__consumer_offsets-37, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:18,874] INFO [Log partition=__consumer_offsets-30, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,874] INFO [Log partition=__consumer_offsets-30, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,876] INFO [Log partition=__consumer_offsets-30, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,877] INFO [Log partition=__consumer_offsets-30, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:18,881] INFO [Log partition=test-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,881] INFO [Log partition=test-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,891] INFO [ProducerStateManager partition=test-0] Writing producer snapshot at offset 13 (kafka.log.ProducerStateManager)[2020-04-29 18:21:18,898] INFO [Log partition=test-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 13 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,899] INFO [ProducerStateManager partition=test-0] Loading producer state from snapshot file '/usr/local/etc/kafka/tmp/kafka-logs/test-0/00000000000000000013.snapshot' (kafka.log.ProducerStateManager)[2020-04-29 18:21:18,906] INFO [Log partition=test-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 13 in 27 ms (kafka.log.Log)[2020-04-29 18:21:18,909] INFO [Log partition=__consumer_offsets-12, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,909] INFO [Log partition=__consumer_offsets-12, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,924] INFO [ProducerStateManager partition=__consumer_offsets-12] Writing producer snapshot at offset 430 (kafka.log.ProducerStateManager)[2020-04-29 18:21:18,926] INFO [Log partition=__consumer_offsets-12, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 430 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,926] INFO [ProducerStateManager partition=__consumer_offsets-12] Loading producer state from snapshot file '/usr/local/etc/kafka/tmp/kafka-logs/__consumer_offsets-12/00000000000000000430.snapshot' (kafka.log.ProducerStateManager)[2020-04-29 18:21:18,927] INFO [Log partition=__consumer_offsets-12, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 430 in 20 ms (kafka.log.Log)[2020-04-29 18:21:18,929] INFO [Log partition=__consumer_offsets-15, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,930] INFO [Log partition=__consumer_offsets-15, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,931] INFO [Log partition=__consumer_offsets-15, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,932] INFO [Log partition=__consumer_offsets-15, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:18,935] INFO [Log partition=__consumer_offsets-23, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,935] INFO [Log partition=__consumer_offsets-23, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,936] INFO [ProducerStateManager partition=__consumer_offsets-23] Writing producer snapshot at offset 3 (kafka.log.ProducerStateManager)[2020-04-29 18:21:18,938] INFO [Log partition=__consumer_offsets-23, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 3 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,938] INFO [ProducerStateManager partition=__consumer_offsets-23] Loading producer state from snapshot file '/usr/local/etc/kafka/tmp/kafka-logs/__consumer_offsets-23/00000000000000000003.snapshot' (kafka.log.ProducerStateManager)[2020-04-29 18:21:18,938] INFO [Log partition=__consumer_offsets-23, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 3 in 5 ms (kafka.log.Log)[2020-04-29 18:21:18,941] INFO [Log partition=__consumer_offsets-24, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,941] INFO [Log partition=__consumer_offsets-24, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,943] INFO [Log partition=__consumer_offsets-24, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,944] INFO [Log partition=__consumer_offsets-24, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:18,947] INFO [Log partition=test2-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,947] INFO [Log partition=test2-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,948] INFO [Log partition=test2-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,949] INFO [Log partition=test2-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 3 ms (kafka.log.Log)[2020-04-29 18:21:18,951] INFO [Log partition=__consumer_offsets-48, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,952] INFO [Log partition=__consumer_offsets-48, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,953] INFO [Log partition=__consumer_offsets-48, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,954] INFO [Log partition=__consumer_offsets-48, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:18,957] INFO [Log partition=__consumer_offsets-41, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,957] INFO [Log partition=__consumer_offsets-41, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,959] INFO [Log partition=__consumer_offsets-41, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,960] INFO [Log partition=__consumer_offsets-41, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 5 ms (kafka.log.Log)[2020-04-29 18:21:18,962] INFO [Log partition=__consumer_offsets-46, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,962] INFO [Log partition=__consumer_offsets-46, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,964] INFO [Log partition=__consumer_offsets-46, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,965] INFO [Log partition=__consumer_offsets-46, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:18,968] INFO [Log partition=__consumer_offsets-25, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,968] INFO [Log partition=__consumer_offsets-25, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,970] INFO [Log partition=__consumer_offsets-25, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,970] INFO [Log partition=__consumer_offsets-25, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:18,973] INFO [Log partition=__consumer_offsets-22, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,973] INFO [Log partition=__consumer_offsets-22, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,975] INFO [Log partition=__consumer_offsets-22, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,975] INFO [Log partition=__consumer_offsets-22, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 3 ms (kafka.log.Log)[2020-04-29 18:21:18,978] INFO [Log partition=__consumer_offsets-14, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,978] INFO [Log partition=__consumer_offsets-14, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,980] INFO [Log partition=__consumer_offsets-14, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,980] INFO [Log partition=__consumer_offsets-14, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 3 ms (kafka.log.Log)[2020-04-29 18:21:18,983] INFO [Log partition=__consumer_offsets-13, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,984] INFO [Log partition=__consumer_offsets-13, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,985] INFO [ProducerStateManager partition=__consumer_offsets-13] Writing producer snapshot at offset 3 (kafka.log.ProducerStateManager)[2020-04-29 18:21:18,986] INFO [Log partition=__consumer_offsets-13, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 3 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,987] INFO [ProducerStateManager partition=__consumer_offsets-13] Loading producer state from snapshot file '/usr/local/etc/kafka/tmp/kafka-logs/__consumer_offsets-13/00000000000000000003.snapshot' (kafka.log.ProducerStateManager)[2020-04-29 18:21:18,987] INFO [Log partition=__consumer_offsets-13, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 3 in 5 ms (kafka.log.Log)[2020-04-29 18:21:18,990] INFO [Log partition=__consumer_offsets-47, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,990] INFO [Log partition=__consumer_offsets-47, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,992] INFO [Log partition=__consumer_offsets-47, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,992] INFO [Log partition=__consumer_offsets-47, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 3 ms (kafka.log.Log)[2020-04-29 18:21:18,995] INFO [Log partition=__consumer_offsets-40, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,995] INFO [Log partition=__consumer_offsets-40, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,997] INFO [Log partition=__consumer_offsets-40, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:18,997] INFO [Log partition=__consumer_offsets-40, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 3 ms (kafka.log.Log)[2020-04-29 18:21:18,999] INFO [Log partition=__consumer_offsets-49, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:18,999] INFO [Log partition=__consumer_offsets-49, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,001] INFO [Log partition=__consumer_offsets-49, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,002] INFO [Log partition=__consumer_offsets-49, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:19,004] INFO [Log partition=__consumer_offsets-35, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,004] INFO [Log partition=__consumer_offsets-35, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,006] INFO [Log partition=__consumer_offsets-35, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,007] INFO [Log partition=__consumer_offsets-35, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:19,009] INFO [Log partition=__consumer_offsets-32, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,009] INFO [Log partition=__consumer_offsets-32, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,010] INFO [ProducerStateManager partition=__consumer_offsets-32] Writing producer snapshot at offset 3 (kafka.log.ProducerStateManager)[2020-04-29 18:21:19,012] INFO [Log partition=__consumer_offsets-32, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 3 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,012] INFO [ProducerStateManager partition=__consumer_offsets-32] Loading producer state from snapshot file '/usr/local/etc/kafka/tmp/kafka-logs/__consumer_offsets-32/00000000000000000003.snapshot' (kafka.log.ProducerStateManager)[2020-04-29 18:21:19,012] INFO [Log partition=__consumer_offsets-32, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 3 in 4 ms (kafka.log.Log)[2020-04-29 18:21:19,015] INFO [Log partition=__consumer_offsets-4, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,015] INFO [Log partition=__consumer_offsets-4, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,016] INFO [Log partition=__consumer_offsets-4, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,017] INFO [Log partition=__consumer_offsets-4, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:19,019] INFO [Log partition=__consumer_offsets-3, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,019] INFO [Log partition=__consumer_offsets-3, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,021] INFO [Log partition=__consumer_offsets-3, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,022] INFO [Log partition=__consumer_offsets-3, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:19,024] INFO [Log partition=__consumer_offsets-33, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,024] INFO [Log partition=__consumer_offsets-33, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,026] INFO [Log partition=__consumer_offsets-33, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,027] INFO [Log partition=__consumer_offsets-33, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:19,028] INFO [Log partition=__consumer_offsets-34, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,029] INFO [Log partition=__consumer_offsets-34, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,030] INFO [Log partition=__consumer_offsets-34, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,031] INFO [Log partition=__consumer_offsets-34, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 3 ms (kafka.log.Log)[2020-04-29 18:21:19,033] INFO [Log partition=__consumer_offsets-2, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,033] INFO [Log partition=__consumer_offsets-2, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,039] INFO [Log partition=__consumer_offsets-2, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,040] INFO [Log partition=__consumer_offsets-2, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 8 ms (kafka.log.Log)[2020-04-29 18:21:19,042] INFO [Log partition=__consumer_offsets-5, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,042] INFO [Log partition=__consumer_offsets-5, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,044] INFO [Log partition=__consumer_offsets-5, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,044] INFO [Log partition=__consumer_offsets-5, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 3 ms (kafka.log.Log)[2020-04-29 18:21:19,046] INFO [Log partition=jerome-1, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,046] INFO [Log partition=jerome-1, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,048] INFO [Log partition=jerome-1, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,048] INFO [Log partition=jerome-1, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 3 ms (kafka.log.Log)[2020-04-29 18:21:19,050] INFO [Log partition=__consumer_offsets-45, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,050] INFO [Log partition=__consumer_offsets-45, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,052] INFO [Log partition=__consumer_offsets-45, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,052] INFO [Log partition=__consumer_offsets-45, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 3 ms (kafka.log.Log)[2020-04-29 18:21:19,054] INFO [Log partition=__consumer_offsets-42, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,055] INFO [Log partition=__consumer_offsets-42, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,056] INFO [Log partition=__consumer_offsets-42, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,057] INFO [Log partition=__consumer_offsets-42, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:19,059] INFO [Log partition=__consumer_offsets-29, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,059] INFO [Log partition=__consumer_offsets-29, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,060] INFO [Log partition=__consumer_offsets-29, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,061] INFO [Log partition=__consumer_offsets-29, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 3 ms (kafka.log.Log)[2020-04-29 18:21:19,063] INFO [Log partition=__consumer_offsets-16, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,063] INFO [Log partition=__consumer_offsets-16, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,065] INFO [Log partition=__consumer_offsets-16, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,065] INFO [Log partition=__consumer_offsets-16, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 3 ms (kafka.log.Log)[2020-04-29 18:21:19,067] INFO [Log partition=topic-demo-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,067] INFO [Log partition=topic-demo-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,069] INFO [ProducerStateManager partition=topic-demo-0] Writing producer snapshot at offset 20 (kafka.log.ProducerStateManager)[2020-04-29 18:21:19,070] INFO [Log partition=topic-demo-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 20 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,071] INFO [ProducerStateManager partition=topic-demo-0] Loading producer state from snapshot file '/usr/local/etc/kafka/tmp/kafka-logs/topic-demo-0/00000000000000000020.snapshot' (kafka.log.ProducerStateManager)[2020-04-29 18:21:19,071] INFO [Log partition=topic-demo-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 20 in 5 ms (kafka.log.Log)[2020-04-29 18:21:19,073] INFO [Log partition=__consumer_offsets-11, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,073] INFO [Log partition=__consumer_offsets-11, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,075] INFO [Log partition=__consumer_offsets-11, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,075] INFO [Log partition=__consumer_offsets-11, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 3 ms (kafka.log.Log)[2020-04-29 18:21:19,077] INFO [Log partition=__consumer_offsets-18, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,077] INFO [Log partition=__consumer_offsets-18, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,080] INFO [Log partition=__consumer_offsets-18, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,080] INFO [Log partition=__consumer_offsets-18, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:19,083] INFO [Log partition=__consumer_offsets-27, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,083] INFO [Log partition=__consumer_offsets-27, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,084] INFO [ProducerStateManager partition=__consumer_offsets-27] Writing producer snapshot at offset 3 (kafka.log.ProducerStateManager)[2020-04-29 18:21:19,085] INFO [Log partition=__consumer_offsets-27, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 3 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,086] INFO [ProducerStateManager partition=__consumer_offsets-27] Loading producer state from snapshot file '/usr/local/etc/kafka/tmp/kafka-logs/__consumer_offsets-27/00000000000000000003.snapshot' (kafka.log.ProducerStateManager)[2020-04-29 18:21:19,086] INFO [Log partition=__consumer_offsets-27, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 3 in 5 ms (kafka.log.Log)[2020-04-29 18:21:19,088] INFO [Log partition=__consumer_offsets-20, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,088] INFO [Log partition=__consumer_offsets-20, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,090] INFO [Log partition=__consumer_offsets-20, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,090] INFO [Log partition=__consumer_offsets-20, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 3 ms (kafka.log.Log)[2020-04-29 18:21:19,092] INFO [Log partition=__consumer_offsets-43, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,092] INFO [Log partition=__consumer_offsets-43, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,094] INFO [Log partition=__consumer_offsets-43, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,094] INFO [Log partition=__consumer_offsets-43, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 3 ms (kafka.log.Log)[2020-04-29 18:21:19,096] INFO [Log partition=__consumer_offsets-44, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,096] INFO [Log partition=__consumer_offsets-44, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,098] INFO [Log partition=__consumer_offsets-44, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,098] INFO [Log partition=__consumer_offsets-44, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 3 ms (kafka.log.Log)[2020-04-29 18:21:19,100] INFO [Log partition=jerome-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,100] INFO [Log partition=jerome-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,102] INFO [Log partition=jerome-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,103] INFO [Log partition=jerome-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:19,104] INFO [Log partition=__consumer_offsets-21, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,104] INFO [Log partition=__consumer_offsets-21, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,106] INFO [Log partition=__consumer_offsets-21, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,107] INFO [Log partition=__consumer_offsets-21, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:19,108] INFO [Log partition=__consumer_offsets-19, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,108] INFO [Log partition=__consumer_offsets-19, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,110] INFO [Log partition=__consumer_offsets-19, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,111] INFO [Log partition=__consumer_offsets-19, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:19,112] INFO [Log partition=__consumer_offsets-26, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,112] INFO [Log partition=__consumer_offsets-26, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,114] INFO [Log partition=__consumer_offsets-26, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,115] INFO [Log partition=__consumer_offsets-26, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:19,116] INFO [Log partition=__consumer_offsets-10, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,116] INFO [Log partition=__consumer_offsets-10, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,118] INFO [Log partition=__consumer_offsets-10, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,119] INFO [Log partition=__consumer_offsets-10, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:19,120] INFO [Log partition=__consumer_offsets-28, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,120] INFO [Log partition=__consumer_offsets-28, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,122] INFO [Log partition=__consumer_offsets-28, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,122] INFO [Log partition=__consumer_offsets-28, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 3 ms (kafka.log.Log)[2020-04-29 18:21:19,124] INFO [Log partition=__consumer_offsets-17, dir=/usr/local/etc/kafka/tmp/kafka-logs] Recovering unflushed segment 0 (kafka.log.Log)[2020-04-29 18:21:19,124] INFO [Log partition=__consumer_offsets-17, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,126] INFO [Log partition=__consumer_offsets-17, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:19,127] INFO [Log partition=__consumer_offsets-17, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 4 ms (kafka.log.Log)[2020-04-29 18:21:19,128] INFO Logs loading complete in 407 ms. (kafka.log.LogManager)[2020-04-29 18:21:19,137] INFO Starting log cleanup with a period of 300000 ms. (kafka.log.LogManager)[2020-04-29 18:21:19,138] INFO Starting log flusher with a default period of 9223372036854775807 ms. (kafka.log.LogManager)[2020-04-29 18:21:19,399] INFO Awaiting socket connections on 0.0.0.0:9092. (kafka.network.Acceptor)[2020-04-29 18:21:19,420] INFO [SocketServer brokerId=0] Created data-plane acceptor and processors for endpoint : EndPoint(null,9092,ListenerName(PLAINTEXT),PLAINTEXT) (kafka.network.SocketServer)[2020-04-29 18:21:19,421] INFO [SocketServer brokerId=0] Started 1 acceptor threads for data-plane (kafka.network.SocketServer)[2020-04-29 18:21:19,437] INFO [ExpirationReaper-0-Produce]: Starting (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:19,437] INFO [ExpirationReaper-0-Fetch]: Starting (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:19,437] INFO [ExpirationReaper-0-DeleteRecords]: Starting (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:19,438] INFO [ExpirationReaper-0-ElectLeader]: Starting (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:19,447] INFO [LogDirFailureHandler]: Starting (kafka.server.ReplicaManager$LogDirFailureHandler)[2020-04-29 18:21:19,492] INFO Creating /brokers/ids/0 (is it secure? false) (kafka.zk.KafkaZkClient)[2020-04-29 18:21:19,502] ERROR Error while creating ephemeral at /brokers/ids/0, node already exists and owner '72057616369582879' does not match current session '72057616369582880' (kafka.zk.KafkaZkClient$CheckedEphemeral)[2020-04-29 18:21:19,508] ERROR [KafkaServer id=0] Fatal error during KafkaServer startup. Prepare to shutdown (kafka.server.KafkaServer)org.apache.zookeeper.KeeperException$NodeExistsException: KeeperErrorCode = NodeExists at org.apache.zookeeper.KeeperException.create(KeeperException.java:126) at kafka.zk.KafkaZkClient$CheckedEphemeral.getAfterNodeExists(KafkaZkClient.scala:1815) at kafka.zk.KafkaZkClient$CheckedEphemeral.create(KafkaZkClient.scala:1753) at kafka.zk.KafkaZkClient.checkedEphemeralCreate(KafkaZkClient.scala:1720) at kafka.zk.KafkaZkClient.registerBroker(KafkaZkClient.scala:93) at kafka.server.KafkaServer.startup(KafkaServer.scala:270) at kafka.server.KafkaServerStartable.startup(KafkaServerStartable.scala:44) at kafka.Kafka$.main(Kafka.scala:84) at kafka.Kafka.main(Kafka.scala)[2020-04-29 18:21:19,509] INFO [KafkaServer id=0] shutting down (kafka.server.KafkaServer)[2020-04-29 18:21:19,510] INFO [SocketServer brokerId=0] Stopping socket server request processors (kafka.network.SocketServer)[2020-04-29 18:21:19,514] INFO [SocketServer brokerId=0] Stopped socket server request processors (kafka.network.SocketServer)[2020-04-29 18:21:19,516] INFO [ReplicaManager broker=0] Shutting down (kafka.server.ReplicaManager)[2020-04-29 18:21:19,517] INFO [LogDirFailureHandler]: Shutting down (kafka.server.ReplicaManager$LogDirFailureHandler)[2020-04-29 18:21:19,517] INFO [LogDirFailureHandler]: Stopped (kafka.server.ReplicaManager$LogDirFailureHandler)[2020-04-29 18:21:19,517] INFO [LogDirFailureHandler]: Shutdown completed (kafka.server.ReplicaManager$LogDirFailureHandler)[2020-04-29 18:21:19,517] INFO [ReplicaFetcherManager on broker 0] shutting down (kafka.server.ReplicaFetcherManager)[2020-04-29 18:21:19,518] INFO [ReplicaFetcherManager on broker 0] shutdown completed (kafka.server.ReplicaFetcherManager)[2020-04-29 18:21:19,519] INFO [ReplicaAlterLogDirsManager on broker 0] shutting down (kafka.server.ReplicaAlterLogDirsManager)[2020-04-29 18:21:19,519] INFO [ReplicaAlterLogDirsManager on broker 0] shutdown completed (kafka.server.ReplicaAlterLogDirsManager)[2020-04-29 18:21:19,519] INFO [ExpirationReaper-0-Fetch]: Shutting down (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:19,637] INFO [ExpirationReaper-0-Fetch]: Stopped (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:19,637] INFO [ExpirationReaper-0-Fetch]: Shutdown completed (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:19,638] INFO [ExpirationReaper-0-Produce]: Shutting down (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:19,911] INFO [ExpirationReaper-0-Produce]: Stopped (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:19,911] INFO [ExpirationReaper-0-Produce]: Shutdown completed (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:19,912] INFO [ExpirationReaper-0-DeleteRecords]: Shutting down (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:19,912] INFO [ExpirationReaper-0-DeleteRecords]: Stopped (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:19,912] INFO [ExpirationReaper-0-DeleteRecords]: Shutdown completed (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:19,913] INFO [ExpirationReaper-0-ElectLeader]: Shutting down (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:20,187] INFO [ExpirationReaper-0-ElectLeader]: Stopped (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:20,187] INFO [ExpirationReaper-0-ElectLeader]: Shutdown completed (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:20,194] INFO [ReplicaManager broker=0] Shut down completely (kafka.server.ReplicaManager)[2020-04-29 18:21:20,195] INFO Shutting down. (kafka.log.LogManager)[2020-04-29 18:21:20,262] INFO Shutdown complete. (kafka.log.LogManager)[2020-04-29 18:21:20,263] INFO [ZooKeeperClient Kafka server] Closing. (kafka.zookeeper.ZooKeeperClient)[2020-04-29 18:21:20,441] INFO Session: 0x100000533120320 closed (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:20,441] INFO EventThread shut down for session: 0x100000533120320 (org.apache.zookeeper.ClientCnxn)[2020-04-29 18:21:20,442] INFO [ZooKeeperClient Kafka server] Closed. (kafka.zookeeper.ZooKeeperClient)[2020-04-29 18:21:20,442] INFO [ThrottledChannelReaper-Fetch]: Shutting down (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:20,714] INFO [ThrottledChannelReaper-Fetch]: Stopped (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:20,714] INFO [ThrottledChannelReaper-Fetch]: Shutdown completed (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:20,714] INFO [ThrottledChannelReaper-Produce]: Shutting down (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:21,714] INFO [ThrottledChannelReaper-Produce]: Stopped (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:21,714] INFO [ThrottledChannelReaper-Produce]: Shutdown completed (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:21,714] INFO [ThrottledChannelReaper-Request]: Shutting down (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:22,786] INFO [ThrottledChannelReaper-Request]: Stopped (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:22,786] INFO [ThrottledChannelReaper-Request]: Shutdown completed (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:22,788] INFO [SocketServer brokerId=0] Shutting down socket server (kafka.network.SocketServer)[2020-04-29 18:21:22,814] INFO [SocketServer brokerId=0] Shutdown completed (kafka.network.SocketServer)[2020-04-29 18:21:22,818] INFO [KafkaServer id=0] shut down completed (kafka.server.KafkaServer)[2020-04-29 18:21:22,819] ERROR Exiting Kafka. (kafka.server.KafkaServerStartable)[2020-04-29 18:21:22,825] INFO [KafkaServer id=0] shutting down (kafka.server.KafkaServer)[2020-04-29 18:21:28,872] INFO Registered kafka:type=kafka.Log4jController MBean (kafka.utils.Log4jControllerRegistration$)[2020-04-29 18:21:29,333] INFO Registered signal handlers for TERM, INT, HUP (org.apache.kafka.common.utils.LoggingSignalHandler)[2020-04-29 18:21:29,334] INFO starting (kafka.server.KafkaServer)[2020-04-29 18:21:29,335] INFO Connecting to zookeeper on localhost:2181 (kafka.server.KafkaServer)[2020-04-29 18:21:29,350] INFO [ZooKeeperClient Kafka server] Initializing a new session to localhost:2181. (kafka.zookeeper.ZooKeeperClient)[2020-04-29 18:21:29,355] INFO Client environment:zookeeper.version=3.5.6-c11b7e26bc554b8523dc929761dd28808913f091, built on 10/08/2019 20:18 GMT (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,355] INFO Client environment:host.name=localhost (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,355] INFO Client environment:java.version=1.8.0_222 (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,355] INFO Client environment:java.vendor=AdoptOpenJDK (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,355] INFO Client environment:java.home=/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/jre (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,356] INFO Client environment:java.class.path=/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/activation-1.1.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/aopalliance-repackaged-2.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/argparse4j-0.7.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/audience-annotations-0.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/commons-cli-1.4.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/commons-lang3-3.8.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-api-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-basic-auth-extension-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-file-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-json-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-mirror-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-mirror-client-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-runtime-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/connect-transforms-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/guava-20.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/hk2-api-2.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/hk2-locator-2.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/hk2-utils-2.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-annotations-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-core-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-databind-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-dataformat-csv-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-datatype-jdk8-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-jaxrs-base-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-jaxrs-json-provider-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-module-jaxb-annotations-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-module-paranamer-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jackson-module-scala_2.12-2.10.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jakarta.activation-api-1.2.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jakarta.annotation-api-1.3.4.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jakarta.inject-2.5.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jakarta.ws.rs-api-2.1.5.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jakarta.xml.bind-api-2.3.2.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/javassist-3.22.0-CR2.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/javax.servlet-api-3.1.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/javax.ws.rs-api-2.1.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jaxb-api-2.3.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-client-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-common-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-container-servlet-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-container-servlet-core-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-hk2-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-media-jaxb-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jersey-server-2.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-client-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-continuation-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-http-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-io-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-security-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-server-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-servlet-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-servlets-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jetty-util-9.4.20.v20190813.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/jopt-simple-5.0.4.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-clients-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-log4j-appender-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-streams-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-streams-examples-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-streams-scala_2.12-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-streams-test-utils-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka-tools-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka_2.12-2.4.0-sources.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/kafka_2.12-2.4.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/log4j-1.2.17.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/lz4-java-1.6.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/maven-artifact-3.6.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/metrics-core-2.2.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-buffer-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-codec-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-common-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-handler-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-resolver-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-transport-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-transport-native-epoll-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/netty-transport-native-unix-common-4.1.42.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/osgi-resource-locator-1.0.1.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/paranamer-2.8.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/plexus-utils-3.2.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/reflections-0.9.11.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/rocksdbjni-5.18.3.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/scala-collection-compat_2.12-2.1.2.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/scala-java8-compat_2.12-0.9.0.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/scala-library-2.12.10.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/scala-logging_2.12-3.9.2.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/scala-reflect-2.12.10.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/slf4j-api-1.7.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/slf4j-log4j12-1.7.28.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/snappy-java-1.1.7.3.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/validation-api-2.0.1.Final.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/zookeeper-3.5.6.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/zookeeper-jute-3.5.6.jar:/usr/local/Cellar/kafka/2.4.0/libexec/bin/../libs/zstd-jni-1.4.3-1.jar (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,356] INFO Client environment:java.library.path=/Users/yangweijie/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:. (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,356] INFO Client environment:java.io.tmpdir=/var/folders/cp/p4lwr_6n66s065dhcw80dzd80000gn/T/ (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,356] INFO Client environment:java.compiler=&lt;NA&gt; (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,356] INFO Client environment:os.name=Mac OS X (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,356] INFO Client environment:os.arch=x86_64 (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,356] INFO Client environment:os.version=10.15.4 (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,356] INFO Client environment:user.name=yangweijie (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,356] INFO Client environment:user.home=/Users/yangweijie (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,356] INFO Client environment:user.dir=/usr/local (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,356] INFO Client environment:os.memory.free=978MB (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,356] INFO Client environment:os.memory.max=1024MB (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,356] INFO Client environment:os.memory.total=1024MB (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,358] INFO Initiating client connection, connectString=localhost:2181 sessionTimeout=6000 watcher=kafka.zookeeper.ZooKeeperClient$ZooKeeperClientWatcher$@7722c3c3 (org.apache.zookeeper.ZooKeeper)[2020-04-29 18:21:29,362] INFO Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation (org.apache.zookeeper.common.X509Util)[2020-04-29 18:21:29,367] INFO jute.maxbuffer value is 4194304 Bytes (org.apache.zookeeper.ClientCnxnSocket)[2020-04-29 18:21:29,372] INFO zookeeper.request.timeout value is 0. feature enabled= (org.apache.zookeeper.ClientCnxn)[2020-04-29 18:21:29,374] INFO [ZooKeeperClient Kafka server] Waiting until connected. (kafka.zookeeper.ZooKeeperClient)[2020-04-29 18:21:29,377] INFO Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)[2020-04-29 18:21:29,387] INFO Socket connection established, initiating session, client: /0:0:0:0:0:0:0:1:56065, server: localhost/0:0:0:0:0:0:0:1:2181 (org.apache.zookeeper.ClientCnxn)[2020-04-29 18:21:29,391] INFO Session establishment complete on server localhost/0:0:0:0:0:0:0:1:2181, sessionid = 0x100000533120321, negotiated timeout = 6000 (org.apache.zookeeper.ClientCnxn)[2020-04-29 18:21:29,394] INFO [ZooKeeperClient Kafka server] Connected. (kafka.zookeeper.ZooKeeperClient)[2020-04-29 18:21:29,570] INFO Cluster ID = I5sBHS6MSMG4MmUddyviFQ (kafka.server.KafkaServer)[2020-04-29 18:21:29,625] INFO KafkaConfig values: advertised.host.name = null advertised.listeners = null advertised.port = null alter.config.policy.class.name = null alter.log.dirs.replication.quota.window.num = 11 alter.log.dirs.replication.quota.window.size.seconds = 1 authorizer.class.name = auto.create.topics.enable = true auto.leader.rebalance.enable = true background.threads = 10 broker.id = 0 broker.id.generation.enable = true broker.rack = null client.quota.callback.class = null compression.type = producer connection.failed.authentication.delay.ms = 100 connections.max.idle.ms = 600000 connections.max.reauth.ms = 0 control.plane.listener.name = null controlled.shutdown.enable = true controlled.shutdown.max.retries = 3 controlled.shutdown.retry.backoff.ms = 5000 controller.socket.timeout.ms = 30000 create.topic.policy.class.name = null default.replication.factor = 1 delegation.token.expiry.check.interval.ms = 3600000 delegation.token.expiry.time.ms = 86400000 delegation.token.master.key = null delegation.token.max.lifetime.ms = 604800000 delete.records.purgatory.purge.interval.requests = 1 delete.topic.enable = true fetch.purgatory.purge.interval.requests = 1000 group.initial.rebalance.delay.ms = 0 group.max.session.timeout.ms = 1800000 group.max.size = 2147483647 group.min.session.timeout.ms = 6000 host.name = inter.broker.listener.name = null inter.broker.protocol.version = 2.4-IV1 kafka.metrics.polling.interval.secs = 10 kafka.metrics.reporters = [] leader.imbalance.check.interval.seconds = 300 leader.imbalance.per.broker.percentage = 10 listener.security.protocol.map = PLAINTEXT:PLAINTEXT,SSL:SSL,SASL_PLAINTEXT:SASL_PLAINTEXT,SASL_SSL:SASL_SSL listeners = PLAINTEXT://:9092 log.cleaner.backoff.ms = 15000 log.cleaner.dedupe.buffer.size = 134217728 log.cleaner.delete.retention.ms = 86400000 log.cleaner.enable = true log.cleaner.io.buffer.load.factor = 0.9 log.cleaner.io.buffer.size = 524288 log.cleaner.io.max.bytes.per.second = 1.7976931348623157E308 log.cleaner.max.compaction.lag.ms = 9223372036854775807 log.cleaner.min.cleanable.ratio = 0.5 log.cleaner.min.compaction.lag.ms = 0 log.cleaner.threads = 1 log.cleanup.policy = [delete] log.dir = /tmp/kafka-logs log.dirs = /usr/local/etc/kafka/tmp/kafka-logs log.flush.interval.messages = 9223372036854775807 log.flush.interval.ms = null log.flush.offset.checkpoint.interval.ms = 60000 log.flush.scheduler.interval.ms = 9223372036854775807 log.flush.start.offset.checkpoint.interval.ms = 60000 log.index.interval.bytes = 4096 log.index.size.max.bytes = 10485760 log.message.downconversion.enable = true log.message.format.version = 2.4-IV1 log.message.timestamp.difference.max.ms = 9223372036854775807 log.message.timestamp.type = CreateTime log.preallocate = false log.retention.bytes = -1 log.retention.check.interval.ms = 300000 log.retention.hours = 168 log.retention.minutes = null log.retention.ms = null log.roll.hours = 168 log.roll.jitter.hours = 0 log.roll.jitter.ms = null log.roll.ms = null log.segment.bytes = 1073741824 log.segment.delete.delay.ms = 60000 max.connections = 2147483647 max.connections.per.ip = 2147483647 max.connections.per.ip.overrides = max.incremental.fetch.session.cache.slots = 1000 message.max.bytes = 1000012 metric.reporters = [] metrics.num.samples = 2 metrics.recording.level = INFO metrics.sample.window.ms = 30000 min.insync.replicas = 1 num.io.threads = 8 num.network.threads = 3 num.partitions = 1 num.recovery.threads.per.data.dir = 1 num.replica.alter.log.dirs.threads = null num.replica.fetchers = 1 offset.metadata.max.bytes = 4096 offsets.commit.required.acks = -1 offsets.commit.timeout.ms = 5000 offsets.load.buffer.size = 5242880 offsets.retention.check.interval.ms = 600000 offsets.retention.minutes = 10080 offsets.topic.compression.codec = 0 offsets.topic.num.partitions = 50 offsets.topic.replication.factor = 1 offsets.topic.segment.bytes = 104857600 password.encoder.cipher.algorithm = AES/CBC/PKCS5Padding password.encoder.iterations = 4096 password.encoder.key.length = 128 password.encoder.keyfactory.algorithm = null password.encoder.old.secret = null password.encoder.secret = null port = 9092 principal.builder.class = null producer.purgatory.purge.interval.requests = 1000 queued.max.request.bytes = -1 queued.max.requests = 500 quota.consumer.default = 9223372036854775807 quota.producer.default = 9223372036854775807 quota.window.num = 11 quota.window.size.seconds = 1 replica.fetch.backoff.ms = 1000 replica.fetch.max.bytes = 1048576 replica.fetch.min.bytes = 1 replica.fetch.response.max.bytes = 10485760 replica.fetch.wait.max.ms = 500 replica.high.watermark.checkpoint.interval.ms = 5000 replica.lag.time.max.ms = 10000 replica.selector.class = null replica.socket.receive.buffer.bytes = 65536 replica.socket.timeout.ms = 30000 replication.quota.window.num = 11 replication.quota.window.size.seconds = 1 request.timeout.ms = 30000 reserved.broker.max.id = 1000 sasl.client.callback.handler.class = null sasl.enabled.mechanisms = [GSSAPI] sasl.jaas.config = null sasl.kerberos.kinit.cmd = /usr/bin/kinit sasl.kerberos.min.time.before.relogin = 60000 sasl.kerberos.principal.to.local.rules = [DEFAULT] sasl.kerberos.service.name = null sasl.kerberos.ticket.renew.jitter = 0.05 sasl.kerberos.ticket.renew.window.factor = 0.8 sasl.login.callback.handler.class = null sasl.login.class = null sasl.login.refresh.buffer.seconds = 300 sasl.login.refresh.min.period.seconds = 60 sasl.login.refresh.window.factor = 0.8 sasl.login.refresh.window.jitter = 0.05 sasl.mechanism.inter.broker.protocol = GSSAPI sasl.server.callback.handler.class = null security.inter.broker.protocol = PLAINTEXT security.providers = null socket.receive.buffer.bytes = 102400 socket.request.max.bytes = 104857600 socket.send.buffer.bytes = 102400 ssl.cipher.suites = [] ssl.client.auth = none ssl.enabled.protocols = [TLSv1.2, TLSv1.1, TLSv1] ssl.endpoint.identification.algorithm = https ssl.key.password = null ssl.keymanager.algorithm = SunX509 ssl.keystore.location = null ssl.keystore.password = null ssl.keystore.type = JKS ssl.principal.mapping.rules = DEFAULT ssl.protocol = TLS ssl.provider = null ssl.secure.random.implementation = null ssl.trustmanager.algorithm = PKIX ssl.truststore.location = null ssl.truststore.password = null ssl.truststore.type = JKS transaction.abort.timed.out.transaction.cleanup.interval.ms = 60000 transaction.max.timeout.ms = 900000 transaction.remove.expired.transaction.cleanup.interval.ms = 3600000 transaction.state.log.load.buffer.size = 5242880 transaction.state.log.min.isr = 1 transaction.state.log.num.partitions = 50 transaction.state.log.replication.factor = 1 transaction.state.log.segment.bytes = 104857600 transactional.id.expiration.ms = 604800000 unclean.leader.election.enable = false zookeeper.connect = localhost:2181 zookeeper.connection.timeout.ms = 6000 zookeeper.max.in.flight.requests = 10 zookeeper.session.timeout.ms = 6000 zookeeper.set.acl = false zookeeper.sync.time.ms = 2000 (kafka.server.KafkaConfig)[2020-04-29 18:21:29,633] INFO KafkaConfig values: advertised.host.name = null advertised.listeners = null advertised.port = null alter.config.policy.class.name = null alter.log.dirs.replication.quota.window.num = 11 alter.log.dirs.replication.quota.window.size.seconds = 1 authorizer.class.name = auto.create.topics.enable = true auto.leader.rebalance.enable = true background.threads = 10 broker.id = 0 broker.id.generation.enable = true broker.rack = null client.quota.callback.class = null compression.type = producer connection.failed.authentication.delay.ms = 100 connections.max.idle.ms = 600000 connections.max.reauth.ms = 0 control.plane.listener.name = null controlled.shutdown.enable = true controlled.shutdown.max.retries = 3 controlled.shutdown.retry.backoff.ms = 5000 controller.socket.timeout.ms = 30000 create.topic.policy.class.name = null default.replication.factor = 1 delegation.token.expiry.check.interval.ms = 3600000 delegation.token.expiry.time.ms = 86400000 delegation.token.master.key = null delegation.token.max.lifetime.ms = 604800000 delete.records.purgatory.purge.interval.requests = 1 delete.topic.enable = true fetch.purgatory.purge.interval.requests = 1000 group.initial.rebalance.delay.ms = 0 group.max.session.timeout.ms = 1800000 group.max.size = 2147483647 group.min.session.timeout.ms = 6000 host.name = inter.broker.listener.name = null inter.broker.protocol.version = 2.4-IV1 kafka.metrics.polling.interval.secs = 10 kafka.metrics.reporters = [] leader.imbalance.check.interval.seconds = 300 leader.imbalance.per.broker.percentage = 10 listener.security.protocol.map = PLAINTEXT:PLAINTEXT,SSL:SSL,SASL_PLAINTEXT:SASL_PLAINTEXT,SASL_SSL:SASL_SSL listeners = PLAINTEXT://:9092 log.cleaner.backoff.ms = 15000 log.cleaner.dedupe.buffer.size = 134217728 log.cleaner.delete.retention.ms = 86400000 log.cleaner.enable = true log.cleaner.io.buffer.load.factor = 0.9 log.cleaner.io.buffer.size = 524288 log.cleaner.io.max.bytes.per.second = 1.7976931348623157E308 log.cleaner.max.compaction.lag.ms = 9223372036854775807 log.cleaner.min.cleanable.ratio = 0.5 log.cleaner.min.compaction.lag.ms = 0 log.cleaner.threads = 1 log.cleanup.policy = [delete] log.dir = /tmp/kafka-logs log.dirs = /usr/local/etc/kafka/tmp/kafka-logs log.flush.interval.messages = 9223372036854775807 log.flush.interval.ms = null log.flush.offset.checkpoint.interval.ms = 60000 log.flush.scheduler.interval.ms = 9223372036854775807 log.flush.start.offset.checkpoint.interval.ms = 60000 log.index.interval.bytes = 4096 log.index.size.max.bytes = 10485760 log.message.downconversion.enable = true log.message.format.version = 2.4-IV1 log.message.timestamp.difference.max.ms = 9223372036854775807 log.message.timestamp.type = CreateTime log.preallocate = false log.retention.bytes = -1 log.retention.check.interval.ms = 300000 log.retention.hours = 168 log.retention.minutes = null log.retention.ms = null log.roll.hours = 168 log.roll.jitter.hours = 0 log.roll.jitter.ms = null log.roll.ms = null log.segment.bytes = 1073741824 log.segment.delete.delay.ms = 60000 max.connections = 2147483647 max.connections.per.ip = 2147483647 max.connections.per.ip.overrides = max.incremental.fetch.session.cache.slots = 1000 message.max.bytes = 1000012 metric.reporters = [] metrics.num.samples = 2 metrics.recording.level = INFO metrics.sample.window.ms = 30000 min.insync.replicas = 1 num.io.threads = 8 num.network.threads = 3 num.partitions = 1 num.recovery.threads.per.data.dir = 1 num.replica.alter.log.dirs.threads = null num.replica.fetchers = 1 offset.metadata.max.bytes = 4096 offsets.commit.required.acks = -1 offsets.commit.timeout.ms = 5000 offsets.load.buffer.size = 5242880 offsets.retention.check.interval.ms = 600000 offsets.retention.minutes = 10080 offsets.topic.compression.codec = 0 offsets.topic.num.partitions = 50 offsets.topic.replication.factor = 1 offsets.topic.segment.bytes = 104857600 password.encoder.cipher.algorithm = AES/CBC/PKCS5Padding password.encoder.iterations = 4096 password.encoder.key.length = 128 password.encoder.keyfactory.algorithm = null password.encoder.old.secret = null password.encoder.secret = null port = 9092 principal.builder.class = null producer.purgatory.purge.interval.requests = 1000 queued.max.request.bytes = -1 queued.max.requests = 500 quota.consumer.default = 9223372036854775807 quota.producer.default = 9223372036854775807 quota.window.num = 11 quota.window.size.seconds = 1 replica.fetch.backoff.ms = 1000 replica.fetch.max.bytes = 1048576 replica.fetch.min.bytes = 1 replica.fetch.response.max.bytes = 10485760 replica.fetch.wait.max.ms = 500 replica.high.watermark.checkpoint.interval.ms = 5000 replica.lag.time.max.ms = 10000 replica.selector.class = null replica.socket.receive.buffer.bytes = 65536 replica.socket.timeout.ms = 30000 replication.quota.window.num = 11 replication.quota.window.size.seconds = 1 request.timeout.ms = 30000 reserved.broker.max.id = 1000 sasl.client.callback.handler.class = null sasl.enabled.mechanisms = [GSSAPI] sasl.jaas.config = null sasl.kerberos.kinit.cmd = /usr/bin/kinit sasl.kerberos.min.time.before.relogin = 60000 sasl.kerberos.principal.to.local.rules = [DEFAULT] sasl.kerberos.service.name = null sasl.kerberos.ticket.renew.jitter = 0.05 sasl.kerberos.ticket.renew.window.factor = 0.8 sasl.login.callback.handler.class = null sasl.login.class = null sasl.login.refresh.buffer.seconds = 300 sasl.login.refresh.min.period.seconds = 60 sasl.login.refresh.window.factor = 0.8 sasl.login.refresh.window.jitter = 0.05 sasl.mechanism.inter.broker.protocol = GSSAPI sasl.server.callback.handler.class = null security.inter.broker.protocol = PLAINTEXT security.providers = null socket.receive.buffer.bytes = 102400 socket.request.max.bytes = 104857600 socket.send.buffer.bytes = 102400 ssl.cipher.suites = [] ssl.client.auth = none ssl.enabled.protocols = [TLSv1.2, TLSv1.1, TLSv1] ssl.endpoint.identification.algorithm = https ssl.key.password = null ssl.keymanager.algorithm = SunX509 ssl.keystore.location = null ssl.keystore.password = null ssl.keystore.type = JKS ssl.principal.mapping.rules = DEFAULT ssl.protocol = TLS ssl.provider = null ssl.secure.random.implementation = null ssl.trustmanager.algorithm = PKIX ssl.truststore.location = null ssl.truststore.password = null ssl.truststore.type = JKS transaction.abort.timed.out.transaction.cleanup.interval.ms = 60000 transaction.max.timeout.ms = 900000 transaction.remove.expired.transaction.cleanup.interval.ms = 3600000 transaction.state.log.load.buffer.size = 5242880 transaction.state.log.min.isr = 1 transaction.state.log.num.partitions = 50 transaction.state.log.replication.factor = 1 transaction.state.log.segment.bytes = 104857600 transactional.id.expiration.ms = 604800000 unclean.leader.election.enable = false zookeeper.connect = localhost:2181 zookeeper.connection.timeout.ms = 6000 zookeeper.max.in.flight.requests = 10 zookeeper.session.timeout.ms = 6000 zookeeper.set.acl = false zookeeper.sync.time.ms = 2000 (kafka.server.KafkaConfig)[2020-04-29 18:21:29,654] INFO [ThrottledChannelReaper-Fetch]: Starting (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:29,654] INFO [ThrottledChannelReaper-Produce]: Starting (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:29,655] INFO [ThrottledChannelReaper-Request]: Starting (kafka.server.ClientQuotaManager$ThrottledChannelReaper)[2020-04-29 18:21:29,686] INFO Loading logs. (kafka.log.LogManager)[2020-04-29 18:21:29,744] INFO [Log partition=__consumer_offsets-9, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,752] INFO [Log partition=__consumer_offsets-9, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 43 ms (kafka.log.Log)[2020-04-29 18:21:29,760] INFO [Log partition=__consumer_offsets-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,761] INFO [Log partition=__consumer_offsets-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,765] INFO [Log partition=__consumer_offsets-7, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,765] INFO [Log partition=__consumer_offsets-7, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,769] INFO [Log partition=__consumer_offsets-31, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,769] INFO [Log partition=__consumer_offsets-31, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,773] INFO [Log partition=__consumer_offsets-36, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,773] INFO [Log partition=__consumer_offsets-36, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,777] INFO [Log partition=__consumer_offsets-38, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,777] INFO [Log partition=__consumer_offsets-38, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,781] INFO [Log partition=__consumer_offsets-6, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,781] INFO [Log partition=__consumer_offsets-6, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,785] INFO [Log partition=__consumer_offsets-1, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,785] INFO [Log partition=__consumer_offsets-1, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,788] INFO [Log partition=__consumer_offsets-8, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,788] INFO [Log partition=__consumer_offsets-8, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 1 ms (kafka.log.Log)[2020-04-29 18:21:29,792] INFO [Log partition=__consumer_offsets-39, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,792] INFO [Log partition=__consumer_offsets-39, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,796] INFO [Log partition=__consumer_offsets-37, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,796] INFO [Log partition=__consumer_offsets-37, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,799] INFO [Log partition=__consumer_offsets-30, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,799] INFO [Log partition=__consumer_offsets-30, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 1 ms (kafka.log.Log)[2020-04-29 18:21:29,814] INFO [Log partition=test-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 13 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,818] INFO [ProducerStateManager partition=test-0] Loading producer state from snapshot file '/usr/local/etc/kafka/tmp/kafka-logs/test-0/00000000000000000013.snapshot' (kafka.log.ProducerStateManager)[2020-04-29 18:21:29,828] INFO [Log partition=test-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 13 in 27 ms (kafka.log.Log)[2020-04-29 18:21:29,833] INFO [Log partition=__consumer_offsets-12, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 430 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,833] INFO [ProducerStateManager partition=__consumer_offsets-12] Loading producer state from snapshot file '/usr/local/etc/kafka/tmp/kafka-logs/__consumer_offsets-12/00000000000000000430.snapshot' (kafka.log.ProducerStateManager)[2020-04-29 18:21:29,834] INFO [Log partition=__consumer_offsets-12, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 430 in 4 ms (kafka.log.Log)[2020-04-29 18:21:29,837] INFO [Log partition=__consumer_offsets-15, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,837] INFO [Log partition=__consumer_offsets-15, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,841] INFO [Log partition=__consumer_offsets-23, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 3 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,842] INFO [ProducerStateManager partition=__consumer_offsets-23] Loading producer state from snapshot file '/usr/local/etc/kafka/tmp/kafka-logs/__consumer_offsets-23/00000000000000000003.snapshot' (kafka.log.ProducerStateManager)[2020-04-29 18:21:29,842] INFO [Log partition=__consumer_offsets-23, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 3 in 3 ms (kafka.log.Log)[2020-04-29 18:21:29,845] INFO [Log partition=__consumer_offsets-24, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,846] INFO [Log partition=__consumer_offsets-24, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,849] INFO [Log partition=test2-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,849] INFO [Log partition=test2-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,852] INFO [Log partition=__consumer_offsets-48, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,852] INFO [Log partition=__consumer_offsets-48, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,855] INFO [Log partition=__consumer_offsets-41, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,855] INFO [Log partition=__consumer_offsets-41, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,858] INFO [Log partition=__consumer_offsets-46, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,859] INFO [Log partition=__consumer_offsets-46, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,862] INFO [Log partition=__consumer_offsets-25, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,862] INFO [Log partition=__consumer_offsets-25, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,865] INFO [Log partition=__consumer_offsets-22, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,865] INFO [Log partition=__consumer_offsets-22, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,868] INFO [Log partition=__consumer_offsets-14, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,868] INFO [Log partition=__consumer_offsets-14, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,872] INFO [Log partition=__consumer_offsets-13, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 3 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,873] INFO [ProducerStateManager partition=__consumer_offsets-13] Loading producer state from snapshot file '/usr/local/etc/kafka/tmp/kafka-logs/__consumer_offsets-13/00000000000000000003.snapshot' (kafka.log.ProducerStateManager)[2020-04-29 18:21:29,873] INFO [Log partition=__consumer_offsets-13, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 3 in 4 ms (kafka.log.Log)[2020-04-29 18:21:29,876] INFO [Log partition=__consumer_offsets-47, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,876] INFO [Log partition=__consumer_offsets-47, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,879] INFO [Log partition=__consumer_offsets-40, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,879] INFO [Log partition=__consumer_offsets-40, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,882] INFO [Log partition=__consumer_offsets-49, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,882] INFO [Log partition=__consumer_offsets-49, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,885] INFO [Log partition=__consumer_offsets-35, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,885] INFO [Log partition=__consumer_offsets-35, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,889] INFO [Log partition=__consumer_offsets-32, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 3 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,890] INFO [ProducerStateManager partition=__consumer_offsets-32] Loading producer state from snapshot file '/usr/local/etc/kafka/tmp/kafka-logs/__consumer_offsets-32/00000000000000000003.snapshot' (kafka.log.ProducerStateManager)[2020-04-29 18:21:29,890] INFO [Log partition=__consumer_offsets-32, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 3 in 4 ms (kafka.log.Log)[2020-04-29 18:21:29,892] INFO [Log partition=__consumer_offsets-4, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,892] INFO [Log partition=__consumer_offsets-4, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 1 ms (kafka.log.Log)[2020-04-29 18:21:29,895] INFO [Log partition=__consumer_offsets-3, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,895] INFO [Log partition=__consumer_offsets-3, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 1 ms (kafka.log.Log)[2020-04-29 18:21:29,898] INFO [Log partition=__consumer_offsets-33, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,898] INFO [Log partition=__consumer_offsets-33, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 1 ms (kafka.log.Log)[2020-04-29 18:21:29,901] INFO [Log partition=__consumer_offsets-34, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,901] INFO [Log partition=__consumer_offsets-34, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,903] INFO [Log partition=__consumer_offsets-2, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,904] INFO [Log partition=__consumer_offsets-2, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,906] INFO [Log partition=__consumer_offsets-5, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,906] INFO [Log partition=__consumer_offsets-5, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 1 ms (kafka.log.Log)[2020-04-29 18:21:29,909] INFO [Log partition=jerome-1, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,909] INFO [Log partition=jerome-1, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,911] INFO [Log partition=__consumer_offsets-45, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,911] INFO [Log partition=__consumer_offsets-45, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 1 ms (kafka.log.Log)[2020-04-29 18:21:29,914] INFO [Log partition=__consumer_offsets-42, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,914] INFO [Log partition=__consumer_offsets-42, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,916] INFO [Log partition=__consumer_offsets-29, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,917] INFO [Log partition=__consumer_offsets-29, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,919] INFO [Log partition=__consumer_offsets-16, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,919] INFO [Log partition=__consumer_offsets-16, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,923] INFO [Log partition=topic-demo-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 20 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,923] INFO [ProducerStateManager partition=topic-demo-0] Loading producer state from snapshot file '/usr/local/etc/kafka/tmp/kafka-logs/topic-demo-0/00000000000000000020.snapshot' (kafka.log.ProducerStateManager)[2020-04-29 18:21:29,923] INFO [Log partition=topic-demo-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 20 in 3 ms (kafka.log.Log)[2020-04-29 18:21:29,926] INFO [Log partition=__consumer_offsets-11, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,926] INFO [Log partition=__consumer_offsets-11, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,928] INFO [Log partition=__consumer_offsets-18, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,928] INFO [Log partition=__consumer_offsets-18, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 1 ms (kafka.log.Log)[2020-04-29 18:21:29,931] INFO [Log partition=__consumer_offsets-27, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 3 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,932] INFO [ProducerStateManager partition=__consumer_offsets-27] Loading producer state from snapshot file '/usr/local/etc/kafka/tmp/kafka-logs/__consumer_offsets-27/00000000000000000003.snapshot' (kafka.log.ProducerStateManager)[2020-04-29 18:21:29,932] INFO [Log partition=__consumer_offsets-27, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 3 in 3 ms (kafka.log.Log)[2020-04-29 18:21:29,934] INFO [Log partition=__consumer_offsets-20, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,934] INFO [Log partition=__consumer_offsets-20, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 1 ms (kafka.log.Log)[2020-04-29 18:21:29,937] INFO [Log partition=__consumer_offsets-43, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,937] INFO [Log partition=__consumer_offsets-43, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,939] INFO [Log partition=__consumer_offsets-44, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,939] INFO [Log partition=__consumer_offsets-44, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 1 ms (kafka.log.Log)[2020-04-29 18:21:29,941] INFO [Log partition=jerome-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,942] INFO [Log partition=jerome-0, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,944] INFO [Log partition=__consumer_offsets-21, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,944] INFO [Log partition=__consumer_offsets-21, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 2 ms (kafka.log.Log)[2020-04-29 18:21:29,946] INFO [Log partition=__consumer_offsets-19, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,946] INFO [Log partition=__consumer_offsets-19, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 1 ms (kafka.log.Log)[2020-04-29 18:21:29,948] INFO [Log partition=__consumer_offsets-26, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,948] INFO [Log partition=__consumer_offsets-26, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 1 ms (kafka.log.Log)[2020-04-29 18:21:29,950] INFO [Log partition=__consumer_offsets-10, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,950] INFO [Log partition=__consumer_offsets-10, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 1 ms (kafka.log.Log)[2020-04-29 18:21:29,952] INFO [Log partition=__consumer_offsets-28, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,952] INFO [Log partition=__consumer_offsets-28, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 1 ms (kafka.log.Log)[2020-04-29 18:21:29,954] INFO [Log partition=__consumer_offsets-17, dir=/usr/local/etc/kafka/tmp/kafka-logs] Loading producer state till offset 0 with message format version 2 (kafka.log.Log)[2020-04-29 18:21:29,954] INFO [Log partition=__consumer_offsets-17, dir=/usr/local/etc/kafka/tmp/kafka-logs] Completed load of log with 1 segments, log start offset 0 and log end offset 0 in 1 ms (kafka.log.Log)[2020-04-29 18:21:29,956] INFO Logs loading complete in 270 ms. (kafka.log.LogManager)[2020-04-29 18:21:29,964] INFO Starting log cleanup with a period of 300000 ms. (kafka.log.LogManager)[2020-04-29 18:21:29,965] INFO Starting log flusher with a default period of 9223372036854775807 ms. (kafka.log.LogManager)[2020-04-29 18:21:30,221] INFO Awaiting socket connections on 0.0.0.0:9092. (kafka.network.Acceptor)[2020-04-29 18:21:30,243] INFO [SocketServer brokerId=0] Created data-plane acceptor and processors for endpoint : EndPoint(null,9092,ListenerName(PLAINTEXT),PLAINTEXT) (kafka.network.SocketServer)[2020-04-29 18:21:30,244] INFO [SocketServer brokerId=0] Started 1 acceptor threads for data-plane (kafka.network.SocketServer)[2020-04-29 18:21:30,259] INFO [ExpirationReaper-0-Produce]: Starting (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:30,260] INFO [ExpirationReaper-0-Fetch]: Starting (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:30,260] INFO [ExpirationReaper-0-DeleteRecords]: Starting (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:30,260] INFO [ExpirationReaper-0-ElectLeader]: Starting (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:30,270] INFO [LogDirFailureHandler]: Starting (kafka.server.ReplicaManager$LogDirFailureHandler)[2020-04-29 18:21:30,310] INFO Creating /brokers/ids/0 (is it secure? false) (kafka.zk.KafkaZkClient)[2020-04-29 18:21:30,320] INFO Stat of the created znode at /brokers/ids/0 is: 12126,12126,1588155690317,1588155690317,1,0,0,72057616369582881,188,0,12126 (kafka.zk.KafkaZkClient)[2020-04-29 18:21:30,321] INFO Registered broker 0 at path /brokers/ids/0 with addresses: ArrayBuffer(EndPoint(localhost,9092,ListenerName(PLAINTEXT),PLAINTEXT)), czxid (broker epoch): 12126 (kafka.zk.KafkaZkClient)[2020-04-29 18:21:30,366] INFO [ExpirationReaper-0-topic]: Starting (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:30,368] INFO [ExpirationReaper-0-Heartbeat]: Starting (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:30,369] INFO [ExpirationReaper-0-Rebalance]: Starting (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:30,402] INFO [GroupCoordinator 0]: Starting up. (kafka.coordinator.group.GroupCoordinator)[2020-04-29 18:21:30,402] INFO [GroupCoordinator 0]: Startup complete. (kafka.coordinator.group.GroupCoordinator)[2020-04-29 18:21:30,407] INFO [GroupMetadataManager brokerId=0] Removed 0 expired offsets in 5 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,416] INFO [ProducerId Manager 0]: Acquired new producerId block (brokerId:0,blockStartProducerId:6000,blockEndProducerId:6999) by writing to Zk with path version 7 (kafka.coordinator.transaction.ProducerIdManager)[2020-04-29 18:21:30,434] INFO [TransactionCoordinator id=0] Starting up. (kafka.coordinator.transaction.TransactionCoordinator)[2020-04-29 18:21:30,441] INFO [Transaction Marker Channel Manager 0]: Starting (kafka.coordinator.transaction.TransactionMarkerChannelManager)[2020-04-29 18:21:30,442] INFO [TransactionCoordinator id=0] Startup complete. (kafka.coordinator.transaction.TransactionCoordinator)[2020-04-29 18:21:30,462] INFO [ExpirationReaper-0-AlterAcls]: Starting (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)[2020-04-29 18:21:30,489] INFO [/config/changes-event-process-thread]: Starting (kafka.common.ZkNodeChangeNotificationListener$ChangeEventProcessThread)[2020-04-29 18:21:30,508] INFO [SocketServer brokerId=0] Started data-plane processors for 1 acceptors (kafka.network.SocketServer)[2020-04-29 18:21:30,512] INFO Kafka version: 2.4.0 (org.apache.kafka.common.utils.AppInfoParser)[2020-04-29 18:21:30,512] INFO Kafka commitId: 77a89fcf8d7fa018 (org.apache.kafka.common.utils.AppInfoParser)[2020-04-29 18:21:30,512] INFO Kafka startTimeMs: 1588155690509 (org.apache.kafka.common.utils.AppInfoParser)[2020-04-29 18:21:30,513] INFO [KafkaServer id=0] started (kafka.server.KafkaServer)[2020-04-29 18:21:30,585] INFO [ReplicaFetcherManager on broker 0] Removed fetcher for partitions Set(__consumer_offsets-22, __consumer_offsets-30, __consumer_offsets-8, __consumer_offsets-21, __consumer_offsets-4, __consumer_offsets-27, __consumer_offsets-7, __consumer_offsets-9, __consumer_offsets-46, __consumer_offsets-25, __consumer_offsets-35, __consumer_offsets-41, __consumer_offsets-33, __consumer_offsets-23, __consumer_offsets-49, __consumer_offsets-47, __consumer_offsets-16, test-0, __consumer_offsets-28, __consumer_offsets-31, __consumer_offsets-36, __consumer_offsets-42, __consumer_offsets-3, __consumer_offsets-18, __consumer_offsets-37, __consumer_offsets-15, __consumer_offsets-24, __consumer_offsets-38, __consumer_offsets-17, jerome-1, __consumer_offsets-48, __consumer_offsets-19, jerome-0, __consumer_offsets-11, __consumer_offsets-13, __consumer_offsets-2, __consumer_offsets-43, __consumer_offsets-6, __consumer_offsets-14, __consumer_offsets-20, __consumer_offsets-0, __consumer_offsets-44, __consumer_offsets-39, __consumer_offsets-12, topic-demo-0, __consumer_offsets-45, __consumer_offsets-1, __consumer_offsets-5, __consumer_offsets-26, __consumer_offsets-29, __consumer_offsets-34, __consumer_offsets-10, __consumer_offsets-32, __consumer_offsets-40) (kafka.server.ReplicaFetcherManager)[2020-04-29 18:21:30,607] INFO [Partition __consumer_offsets-0 broker=0] Log loaded for partition __consumer_offsets-0 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,608] INFO [Partition __consumer_offsets-0 broker=0] __consumer_offsets-0 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,617] INFO [Partition __consumer_offsets-29 broker=0] Log loaded for partition __consumer_offsets-29 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,617] INFO [Partition __consumer_offsets-29 broker=0] __consumer_offsets-29 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,619] INFO [Partition __consumer_offsets-48 broker=0] Log loaded for partition __consumer_offsets-48 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,619] INFO [Partition __consumer_offsets-48 broker=0] __consumer_offsets-48 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,621] INFO [Partition __consumer_offsets-10 broker=0] Log loaded for partition __consumer_offsets-10 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,621] INFO [Partition __consumer_offsets-10 broker=0] __consumer_offsets-10 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,623] INFO [Partition __consumer_offsets-45 broker=0] Log loaded for partition __consumer_offsets-45 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,623] INFO [Partition __consumer_offsets-45 broker=0] __consumer_offsets-45 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,625] INFO [Partition __consumer_offsets-26 broker=0] Log loaded for partition __consumer_offsets-26 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,625] INFO [Partition __consumer_offsets-26 broker=0] __consumer_offsets-26 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,626] INFO [Partition __consumer_offsets-7 broker=0] Log loaded for partition __consumer_offsets-7 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,627] INFO [Partition __consumer_offsets-7 broker=0] __consumer_offsets-7 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,628] INFO [Partition __consumer_offsets-42 broker=0] Log loaded for partition __consumer_offsets-42 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,628] INFO [Partition __consumer_offsets-42 broker=0] __consumer_offsets-42 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,630] INFO [Partition __consumer_offsets-4 broker=0] Log loaded for partition __consumer_offsets-4 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,630] INFO [Partition __consumer_offsets-4 broker=0] __consumer_offsets-4 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,632] INFO [Partition __consumer_offsets-23 broker=0] Log loaded for partition __consumer_offsets-23 with initial high watermark 3 (kafka.cluster.Partition)[2020-04-29 18:21:30,632] INFO [Partition __consumer_offsets-23 broker=0] __consumer_offsets-23 starts at Leader Epoch 0 from offset 3. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,633] INFO [Partition __consumer_offsets-1 broker=0] Log loaded for partition __consumer_offsets-1 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,633] INFO [Partition __consumer_offsets-1 broker=0] __consumer_offsets-1 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,634] INFO [Partition __consumer_offsets-20 broker=0] Log loaded for partition __consumer_offsets-20 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,634] INFO [Partition __consumer_offsets-20 broker=0] __consumer_offsets-20 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,636] INFO [Partition __consumer_offsets-39 broker=0] Log loaded for partition __consumer_offsets-39 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,636] INFO [Partition __consumer_offsets-39 broker=0] __consumer_offsets-39 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,638] INFO [Partition __consumer_offsets-17 broker=0] Log loaded for partition __consumer_offsets-17 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,638] INFO [Partition __consumer_offsets-17 broker=0] __consumer_offsets-17 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,640] INFO [Partition __consumer_offsets-36 broker=0] Log loaded for partition __consumer_offsets-36 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,640] INFO [Partition __consumer_offsets-36 broker=0] __consumer_offsets-36 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,641] INFO [Partition __consumer_offsets-14 broker=0] Log loaded for partition __consumer_offsets-14 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,642] INFO [Partition __consumer_offsets-14 broker=0] __consumer_offsets-14 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,643] INFO [Partition __consumer_offsets-33 broker=0] Log loaded for partition __consumer_offsets-33 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,643] INFO [Partition __consumer_offsets-33 broker=0] __consumer_offsets-33 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,645] INFO [Partition __consumer_offsets-49 broker=0] Log loaded for partition __consumer_offsets-49 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,645] INFO [Partition __consumer_offsets-49 broker=0] __consumer_offsets-49 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,647] INFO [Partition __consumer_offsets-11 broker=0] Log loaded for partition __consumer_offsets-11 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,647] INFO [Partition __consumer_offsets-11 broker=0] __consumer_offsets-11 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,649] INFO [Partition __consumer_offsets-30 broker=0] Log loaded for partition __consumer_offsets-30 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,649] INFO [Partition __consumer_offsets-30 broker=0] __consumer_offsets-30 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,650] INFO [Partition test-0 broker=0] Log loaded for partition test-0 with initial high watermark 13 (kafka.cluster.Partition)[2020-04-29 18:21:30,650] INFO [Partition test-0 broker=0] test-0 starts at Leader Epoch 0 from offset 13. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,651] INFO [Partition __consumer_offsets-46 broker=0] Log loaded for partition __consumer_offsets-46 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,651] INFO [Partition __consumer_offsets-46 broker=0] __consumer_offsets-46 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,653] INFO [Partition __consumer_offsets-27 broker=0] Log loaded for partition __consumer_offsets-27 with initial high watermark 3 (kafka.cluster.Partition)[2020-04-29 18:21:30,653] INFO [Partition __consumer_offsets-27 broker=0] __consumer_offsets-27 starts at Leader Epoch 0 from offset 3. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,654] INFO [Partition __consumer_offsets-8 broker=0] Log loaded for partition __consumer_offsets-8 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,654] INFO [Partition __consumer_offsets-8 broker=0] __consumer_offsets-8 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,656] INFO [Partition __consumer_offsets-24 broker=0] Log loaded for partition __consumer_offsets-24 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,656] INFO [Partition __consumer_offsets-24 broker=0] __consumer_offsets-24 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,658] INFO [Partition __consumer_offsets-43 broker=0] Log loaded for partition __consumer_offsets-43 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,658] INFO [Partition __consumer_offsets-43 broker=0] __consumer_offsets-43 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,659] INFO [Partition __consumer_offsets-5 broker=0] Log loaded for partition __consumer_offsets-5 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,659] INFO [Partition __consumer_offsets-5 broker=0] __consumer_offsets-5 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,661] INFO [Partition jerome-0 broker=0] Log loaded for partition jerome-0 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,661] INFO [Partition jerome-0 broker=0] jerome-0 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,662] INFO [Partition __consumer_offsets-21 broker=0] Log loaded for partition __consumer_offsets-21 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,662] INFO [Partition __consumer_offsets-21 broker=0] __consumer_offsets-21 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,664] INFO [Partition __consumer_offsets-40 broker=0] Log loaded for partition __consumer_offsets-40 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,664] INFO [Partition __consumer_offsets-40 broker=0] __consumer_offsets-40 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,666] INFO [Partition __consumer_offsets-2 broker=0] Log loaded for partition __consumer_offsets-2 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,666] INFO [Partition __consumer_offsets-2 broker=0] __consumer_offsets-2 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,667] INFO [Partition __consumer_offsets-37 broker=0] Log loaded for partition __consumer_offsets-37 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,667] INFO [Partition __consumer_offsets-37 broker=0] __consumer_offsets-37 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,669] INFO [Partition __consumer_offsets-18 broker=0] Log loaded for partition __consumer_offsets-18 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,669] INFO [Partition __consumer_offsets-18 broker=0] __consumer_offsets-18 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,670] INFO [Partition __consumer_offsets-34 broker=0] Log loaded for partition __consumer_offsets-34 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,670] INFO [Partition __consumer_offsets-34 broker=0] __consumer_offsets-34 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,672] INFO [Partition __consumer_offsets-15 broker=0] Log loaded for partition __consumer_offsets-15 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,672] INFO [Partition __consumer_offsets-15 broker=0] __consumer_offsets-15 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,674] INFO [Partition topic-demo-0 broker=0] Log loaded for partition topic-demo-0 with initial high watermark 20 (kafka.cluster.Partition)[2020-04-29 18:21:30,674] INFO [Partition topic-demo-0 broker=0] topic-demo-0 starts at Leader Epoch 0 from offset 20. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,675] INFO [Partition __consumer_offsets-12 broker=0] Log loaded for partition __consumer_offsets-12 with initial high watermark 430 (kafka.cluster.Partition)[2020-04-29 18:21:30,675] INFO [Partition __consumer_offsets-12 broker=0] __consumer_offsets-12 starts at Leader Epoch 0 from offset 430. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,676] INFO [Partition __consumer_offsets-31 broker=0] Log loaded for partition __consumer_offsets-31 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,676] INFO [Partition __consumer_offsets-31 broker=0] __consumer_offsets-31 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,677] INFO [Partition jerome-1 broker=0] Log loaded for partition jerome-1 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,677] INFO [Partition jerome-1 broker=0] jerome-1 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,679] INFO [Partition __consumer_offsets-9 broker=0] Log loaded for partition __consumer_offsets-9 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,679] INFO [Partition __consumer_offsets-9 broker=0] __consumer_offsets-9 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,680] INFO [Partition __consumer_offsets-47 broker=0] Log loaded for partition __consumer_offsets-47 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,680] INFO [Partition __consumer_offsets-47 broker=0] __consumer_offsets-47 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,682] INFO [Partition __consumer_offsets-19 broker=0] Log loaded for partition __consumer_offsets-19 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,682] INFO [Partition __consumer_offsets-19 broker=0] __consumer_offsets-19 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,683] INFO [Partition __consumer_offsets-28 broker=0] Log loaded for partition __consumer_offsets-28 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,683] INFO [Partition __consumer_offsets-28 broker=0] __consumer_offsets-28 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,684] INFO [Partition __consumer_offsets-38 broker=0] Log loaded for partition __consumer_offsets-38 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,685] INFO [Partition __consumer_offsets-38 broker=0] __consumer_offsets-38 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,686] INFO [Partition __consumer_offsets-35 broker=0] Log loaded for partition __consumer_offsets-35 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,686] INFO [Partition __consumer_offsets-35 broker=0] __consumer_offsets-35 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,687] INFO [Partition __consumer_offsets-6 broker=0] Log loaded for partition __consumer_offsets-6 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,688] INFO [Partition __consumer_offsets-6 broker=0] __consumer_offsets-6 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,689] INFO [Partition __consumer_offsets-44 broker=0] Log loaded for partition __consumer_offsets-44 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,689] INFO [Partition __consumer_offsets-44 broker=0] __consumer_offsets-44 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,690] INFO [Partition __consumer_offsets-25 broker=0] Log loaded for partition __consumer_offsets-25 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,690] INFO [Partition __consumer_offsets-25 broker=0] __consumer_offsets-25 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,692] INFO [Partition __consumer_offsets-16 broker=0] Log loaded for partition __consumer_offsets-16 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,692] INFO [Partition __consumer_offsets-16 broker=0] __consumer_offsets-16 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,693] INFO [Partition __consumer_offsets-22 broker=0] Log loaded for partition __consumer_offsets-22 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,693] INFO [Partition __consumer_offsets-22 broker=0] __consumer_offsets-22 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,694] INFO [Partition __consumer_offsets-41 broker=0] Log loaded for partition __consumer_offsets-41 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,694] INFO [Partition __consumer_offsets-41 broker=0] __consumer_offsets-41 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,696] INFO [Partition __consumer_offsets-32 broker=0] Log loaded for partition __consumer_offsets-32 with initial high watermark 3 (kafka.cluster.Partition)[2020-04-29 18:21:30,696] INFO [Partition __consumer_offsets-32 broker=0] __consumer_offsets-32 starts at Leader Epoch 0 from offset 3. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,697] INFO [Partition __consumer_offsets-3 broker=0] Log loaded for partition __consumer_offsets-3 with initial high watermark 0 (kafka.cluster.Partition)[2020-04-29 18:21:30,697] INFO [Partition __consumer_offsets-3 broker=0] __consumer_offsets-3 starts at Leader Epoch 0 from offset 0. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,698] INFO [Partition __consumer_offsets-13 broker=0] Log loaded for partition __consumer_offsets-13 with initial high watermark 3 (kafka.cluster.Partition)[2020-04-29 18:21:30,698] INFO [Partition __consumer_offsets-13 broker=0] __consumer_offsets-13 starts at Leader Epoch 0 from offset 3. Previous Leader Epoch was: -1 (kafka.cluster.Partition)[2020-04-29 18:21:30,705] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-22 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,705] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-25 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,705] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-28 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,705] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-31 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,705] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-34 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,705] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-37 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,705] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-40 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,705] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-43 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,705] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-46 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,705] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-49 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,705] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-41 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-44 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-47 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-1 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-4 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-7 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-10 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-13 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-16 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-19 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-2 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-5 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-8 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-11 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-14 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-17 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-20 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-23 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-26 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-29 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-32 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-35 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-38 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-0 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-3 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-6 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-9 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,706] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-12 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,707] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-15 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,707] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-18 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,707] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-21 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,707] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-24 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,707] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-27 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,707] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-30 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,707] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-33 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,707] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-36 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,707] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-39 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,707] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-42 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,707] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-45 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,707] INFO [GroupMetadataManager brokerId=0] Scheduling loading of offsets and group metadata from __consumer_offsets-48 (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,709] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-22 in 4 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,710] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-25 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,710] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-28 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,711] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-31 in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,711] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-34 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,711] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-37 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,711] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-40 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,711] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-43 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,712] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-46 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,712] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-49 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,712] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-41 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,712] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-44 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,713] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-47 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,713] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-1 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,713] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-4 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,714] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-7 in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,714] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-10 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,734] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-13 in 20 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,735] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-16 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,735] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-19 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,735] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-2 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,735] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-5 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,736] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-8 in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,736] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-11 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,736] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-14 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,736] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-17 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,736] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-20 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,739] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-23 in 2 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,740] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-26 in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,740] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-29 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,742] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-32 in 2 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,743] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-35 in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,743] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-38 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,743] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-0 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,743] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-3 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,743] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-6 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,743] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-9 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,763] INFO [GroupCoordinator 0]: Loading group metadata for group.demo with generation 18 (kafka.coordinator.group.GroupCoordinator)[2020-04-29 18:21:30,763] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-12 in 20 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,763] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-15 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,763] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-18 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,763] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-21 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,764] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-24 in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,766] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-27 in 2 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,766] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-30 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,767] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-33 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,767] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-36 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,767] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-39 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,767] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-42 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,767] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-45 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:21:30,767] INFO [GroupMetadataManager brokerId=0] Finished loading offsets and group metadata from __consumer_offsets-48 in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)[2020-04-29 18:25:57,932] INFO [GroupCoordinator 0]: Preparing to rebalance group group.demo in state PreparingRebalance with old generation 18 (__consumer_offsets-12) (reason: Adding new member consumer-group.demo-1-6e7f0048-7df1-4574-8f74-31c7e1680f88 with group instanceid None) (kafka.coordinator.group.GroupCoordinator)[2020-04-29 18:25:57,937] INFO [GroupCoordinator 0]: Stabilized group group.demo generation 19 (__consumer_offsets-12) (kafka.coordinator.group.GroupCoordinator)[2020-04-29 18:25:57,945] INFO [GroupCoordinator 0]: Assignment received from leader for group group.demo for generation 19 (kafka.coordinator.group.GroupCoordinator)[2020-04-29 18:26:23,049] INFO [GroupCoordinator 0]: Member consumer-group.demo-1-6e7f0048-7df1-4574-8f74-31c7e1680f88 in group group.demo has failed, removing it from the group (kafka.coordinator.group.GroupCoordinator)[2020-04-29 18:26:23,050] INFO [GroupCoordinator 0]: Preparing to rebalance group group.demo in state PreparingRebalance with old generation 19 (__consumer_offsets-12) (reason: removing member consumer-group.demo-1-6e7f0048-7df1-4574-8f74-31c7e1680f88 on heartbeat expiration) (kafka.coordinator.group.GroupCoordinator)[2020-04-29 18:26:23,051] INFO [GroupCoordinator 0]: Group group.demo with generation 20 is now empty (__consumer_offsets-12) (kafka.coordinator.group.GroupCoordinator) ÊúÄÁªàÔºåÊàëÂú® https://www.orchome.com/32 ÊâæÂà∞‰∏Ä‰∏™Áúã‰∏äÂéªÂæà‰∏çÈîôÁöÑÁ≠îÊ°àÔºå‰ΩÜÊòØÂæàÈÅóÊÜæÔºå‰æùÊóßÂ§±Ë¥•‰∫ÜÔºåÊàëÂº∫Âà∂ kill ‰πüÊ≤°Áî®Ôºå‰æùÁÑ∂‰ºöËá™Âä®ÈáçÊñ∞ÂàõÂª∫‰∏Ä‰∏™ kafka ÊúçÂä°‚Ä¶ Ëá≥‰∫éÊñáÁ´†‰∏≠ÊèêÂà∞ÁöÑ controlled.shutdown.enableÔºåÂºÄÂêØ(true)ÂêéÔºåÊâßË°åshutdownÊó∂Ôºåbroker‰∏ªÂä®Â∞ÜËá™Â∑±ÊúâleaderË∫´‰ªΩÁöÑpartitionËΩ¨ÁßªÁªôISRÈáåÁöÑÂÖ∂‰ªñbrokerÔºå‰ΩÜÊòØÂ¶ÇÊûúÊòØÈªòËÆ§ÂÄºfalseÔºåÂØπÂÖ≥Èó≠‰æùÁÑ∂‰∏ç‰ºöÊúâÂΩ±ÂìçÔºåÊåâÁÖßÈªòËÆ§ÁöÑËßÑÂàôÂàáÊç¢Âè™ÊòØ‰ºöÊÖ¢‰∏ÄÁÇπÁÇπËÄåÂ∑≤‚Ä¶ ÊâÄ‰ª•ÔºåÂæàÈÅóÊÜæÔºåÊ≤°ÊúâËß£ÂÜ≥‚Ä¶ Kafka Âú® java ‰∏≠‰ΩøÁî®ÂÆûÁé∞maven ‰æùËµñ123456789101112131415161718192021&lt;dependency&gt; &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt; &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt; &lt;version&gt;2.4.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt; &lt;version&gt;1.7.28&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt; &lt;version&gt;1.2.17&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-nop&lt;/artifactId&gt; &lt;version&gt;1.7.2&lt;/version&gt; &lt;/dependency&gt; Áîü‰∫ßËÄÖÂÆ¢Êà∑Á´Ø123456789101112131415161718192021222324252627282930package Kafka.Demo1;import org.apache.kafka.clients.producer.KafkaProducer;import org.apache.kafka.clients.producer.ProducerRecord;import java.util.Properties;public class ProducerFastStart &#123; public static final String brokerList = "localhost:9092"; public static final String topic = "topic-demo"; public static void main(String[] args) &#123; Properties properties = new Properties(); properties.put("key.serializer","org.apache.kafka.common.serialization.StringSerializer"); properties.put("value.serializer","org.apache.kafka.common.serialization.StringSerializer"); properties.put("bootstrap.servers",brokerList); KafkaProducer&lt;String,String&gt; producer = new KafkaProducer&lt;String, String&gt;(properties); // ÊûÑÈÄ†Ë¶ÅÂèëÈÄÅÁöÑÊ∂àÊÅØ ProducerRecord&lt;String, String&gt; record = new ProducerRecord&lt;&gt;(topic,"hello,I am jerome_memory"); // ÂèëÈÄÅÊ∂àÊÅØ try&#123; producer.send(record); &#125; catch (Exception e)&#123; e.printStackTrace(); &#125; producer.close(); &#125;&#125; Ê∂àË¥πËÄÖÂÆ¢Êà∑Á´Ø123456789101112131415161718192021222324252627282930313233343536package Kafka.Demo1;import org.apache.kafka.clients.consumer.ConsumerRecord;import org.apache.kafka.clients.consumer.ConsumerRecords;import org.apache.kafka.clients.consumer.KafkaConsumer;import org.apache.kafka.common.protocol.types.Field;import java.time.Duration;import java.util.Collections;import java.util.Properties;public class ConsumerFastStart &#123; public static final String brokerList = "localhost:9092"; public static final String topic = "topic-demo"; public static final String groupId = "group.demo"; public static void main(String[] args) &#123; Properties properties = new Properties(); properties.put("key.deserializer","org.apache.kafka.common.serialization.StringDeserializer"); properties.put("value.deserializer","org.apache.kafka.common.serialization.StringDeserializer"); properties.put("bootstrap.servers",brokerList); properties.put("group.id",groupId); KafkaConsumer&lt;String,String&gt; consumer = new KafkaConsumer&lt;String, String&gt;(properties); // ËÆ¢ÈòÖ‰∏ªÈ¢ò consumer.subscribe(Collections.singletonList(topic)); // Âæ™ÁéØËØªÂèñÊ∂àÊÅØ while (true)&#123; ConsumerRecords&lt;String,String&gt; records = consumer.poll(Duration.ZERO); for(ConsumerRecord&lt;String,String&gt; records1 : records)&#123; System.out.println(records1.value()); &#125; &#125; &#125;&#125; ÈÅáÂà∞ÁöÑÈóÆÈ¢òÂú®ÂêØÂä®Áîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÂêéÔºåÊä•ÈîôÂ¶Ç‰∏ãÔºö„Äå‰ΩÜÊòØÁ®ãÂ∫èÂèØ‰ª•Ê≠£Â∏∏ËøêË°å‚Ä¶„Äç 123SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".SLF4J: Defaulting to no-operation (NOP) logger implementationSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. Ëß£ÂÜ≥ÊñπÊ°àÔºö ÈááÁî® ÂÖ∂ÊèêÁ§∫ÁöÑ url ‰∏≠ÁöÑËß£ÂÜ≥ÊñπÊ°àËøõË°åËß£ÂÜ≥ÔºåÂ§±Ë¥•„ÄÇ„ÄÇ„ÄÇËøòÊòØ‰ºöÊúâ‰∏äÈù¢ÁöÑÈîôËØØ‚Ä¶ 12345678910111213141516171819&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt; org.apache.cassandra&lt;/groupId&gt; &lt;artifactId&gt;cassandra-all&lt;/artifactId&gt; &lt;version&gt;0.8.1&lt;/version&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;exclusion&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt;&lt;/dependencies&gt; ÂèÇËÄÉÔºöhttps://www.cnblogs.com/felixzh/p/12487644.html Áõ¥Êé•‰∏äslf4jÂÆòÁΩëÊâæÂà∞Áõ∏Â∫îÁöÑmavenÂåÖÊ∑ªÂä†Âà∞pom.xml ÁΩëÂùÄÔºöhttps://mvnrepository.com/artifact/org.slf4j/slf4j-log4j12/1.8.0-alpha2 Â•ΩÂêß‚Ä¶ ‰æùÊóß‰∏çÂ•Ω‰Ωø ÊúÄÁªàÂæó‰ª•Ëß£ÂÜ≥Ôºå‰ª•‰∏ãÊòØÊúÄÁªàËß£ÂÜ≥ÊñπÊ°àÔºö ÂèÇËÄÉÔºöhttps://www.shuzhiduo.com/A/pRdBO486zn/ Âú®Ê∑ªÂä†‰∫Ü‰ª•‰∏ã‰æùËµñ,ËøòÊòØ‰ºöÊä•Èîô‚Ä¶„ÄåËøôÈáåÁöÑÁâàÊú¨ÊàëÊòØÈÄöËøáÊü•ËØ¢ cd /usr/local/Cellar/kafka/2.4.0/libexec/lib/ ÂæóÂà∞ÁöÑ slf4j Âíå log4j ÁöÑÁâàÊú¨„Äç 123456789101112&gt; &lt;dependency&gt;&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt;&gt; &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;&gt; &lt;version&gt;1.7.28&lt;/version&gt;&gt; &lt;scope&gt;test&lt;/scope&gt;&gt; &lt;/dependency&gt;&gt; &lt;dependency&gt;&gt; &lt;groupId&gt;log4j&lt;/groupId&gt;&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt;&gt; &lt;version&gt;1.2.17&lt;/version&gt;&gt; &lt;/dependency&gt;&gt; ‰πãÂêéÔºåÁúãÂà∞‰∫Ü‰∏äÈù¢ÁöÑÂèÇËÄÉÊñáÁ´†ÔºåÂÜçÊ¨°Ê∑ªÂä† 123456&gt; &lt;dependency&gt;&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt;&gt; &lt;artifactId&gt;slf4j-nop&lt;/artifactId&gt;&gt; &lt;version&gt;1.7.2&lt;/version&gt;&gt; &lt;/dependency&gt;&gt; Âæó‰ª•Ëß£ÂÜ≥ËØ•ÈóÆÈ¢ò‚Ä¶]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
        <category>kafka Á≥ªÂàó</category>
      </categories>
      <tags>
        <tag>kafka</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂÆû‰π†ÂêêÊßΩ]]></title>
    <url>%2F2020%2F04%2F15%2F%E5%AE%9E%E4%B9%A0%E5%90%90%E6%A7%BD%E5%B8%96.html</url>
    <content type="text"><![CDATA[Â•ΩÂè≠ÔºåËá™‰ªé 2 Âè∑Èù¢ÂÆåÈòøÈáåÂõõÈù¢‰πãÂêéÔºåÂü∫Êú¨‰∏äÂ∞±Ê≤°ËÆ§ÁúüÁúãËøá‰π¶ËæΩÔºåËøôÂçÅÂ§öÂ§©Âè™Èù¢‰∫Ü‰∏ãËÖæËÆØÁöÑ hr Èù¢ÂíåÈòøÈáåÁöÑ hr Èù¢ÔºåÂ∑Æ‰∏çÂ§öÂí∏È±º‰∫Ü 10 Â§©ËæΩÔºåÁé∞Âú®ËÖæËÆØÂíåÈòøÈáåÁöÑ offer ÈÉΩÂà∞ÊâãËæΩÔºåÈúÄË¶ÅÈáçÊñ∞ÂºÄÂßã‰∏ã‰∏ÄËΩÆÁöÑÂ≠¶‰π†‰∫ÜÔºå‰∏çËÉΩÂÜçÂí∏È±ºÂï¶ÔºÅÔºÅÔºÅÂä†Ê≤πÂä†Ê≤πÔºÅÔºÅÔºÅ]]></content>
      <categories>
        <category>ÂêêÊßΩ</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[‰ªéÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÂà∞ jdbc]]></title>
    <url>%2F2020%2F03%2F19%2F%E4%BB%8E%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%A8%A1%E5%9E%8B%E5%88%B0%20jdbc.html</url>
    <content type="text"><![CDATA[ÂºïÂ≠êÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÔºåjdbcÔºåË≤å‰ººÊ≤°Âï•ÂÖ≥Á≥ªÔºå‰πãÈó¥ÁöÑËÅîÁ≥ªËøòÂæó‰ªéÂë®ÂøóÂçéËÄÅÂ∏àÁöÑ„ÄäÊ∑±ÂÖ•ÁêÜËß£javaËôöÊãüÊú∫„ÄãËøôÊú¨‰π¶ËØ¥Ëµ∑„ÄÇ ‰∏äÂõæÂèØ‰ª•ÁúãÂà∞Ôºåjdbc ËøôÁßçÊ∂âÂèä SPI ÁöÑÁ±ªÂä†ËΩΩÊñπÂºèÁ†¥Âùè‰∫ÜÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÔºåÊé•‰∏ãÊù•ÔºåÊàë‰ª¨Êù•ÂÖ∑‰ΩìÂàÜÊûê‰∏ÄÊ≥¢„ÄÇ ÂõûÈ°æ ‚Äî Âèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÁ±ªÂä†ËΩΩÂô®Ë∞àÂà∞Âèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÔºåÂøÖÁÑ∂ÊòØË¶ÅË∞àÂà∞Á±ªÂä†ËΩΩÂô®Âï¶ÔºåËÄåÁ±ªÂä†ËΩΩÂô®Ë¶ÅÂÅöÁöÑ‰∫ãÊÉÖÔºåÂ∞±ÊòØÂÆåÊàêÁ±ªÂä†ËΩΩ‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™Âä®‰ΩúÔºåÈ°∫Â∏¶ÂõûÈ°æ‰∏Ä‰∏ãÁ±ªÂä†ËΩΩÁöÑ‰∏â‰∏™Âä®‰ΩúÔºö ÈÄöËøáÁ±ªÁöÑÂÖ®ÈôêÂÆöÂêç„Äå‰∏ÄËà¨ÊòØ .class Êñá‰ª∂ÁöÑÂΩ¢ÂºèÔºå‰πüÂèØ‰ª•ÊòØÂÖ∂‰ªñÁöÑÔºåÊ≤°ÊúâÈôêÂÆö„Äç‰∫ßÁîü‰∏Ä‰∏™‰∫åËøõÂà∂Êï∞ÊçÆÊµÅÔºõ Â∞ÜËØ•‰∫åËøõÂà∂Êï∞ÊçÆÊµÅËß£Êûê‰∏∫ÊñπÊ≥ïÂå∫ÁöÑËøêË°åÊó∂Êï∞ÊçÆÁªìÊûÑÔºõ Âú® Java Â†Ü‰∏≠ÂàõÂª∫‰∏Ä‰∏™Ë°®Á§∫ËØ•Á±ªÂûãÁöÑjava.lang.ClassÁ±ªÁöÑÂÆû‰æãÔºå‰Ωú‰∏∫ÊñπÊ≥ïÂå∫Ëøô‰∏™Á±ªÁöÑÂêÑÁßçÊï∞ÊçÆÁöÑËÆøÈóÆÂÖ•Âè£„ÄÇ ËÆ≤ÂÆåÁ±ªÂä†ËΩΩÂô®ÁöÑÂ∑•‰ΩúÔºåÂÜçÊù•ÂõûÈ°æ‰∏Ä‰∏ãÁ±ªÂä†ËΩΩÂô®ÁöÑÂàÜÁ±ªÔºåÁ±ªÂä†ËΩΩÂô®ÁöÑÂàÜÁ±ªÂèØ‰ª•‰ªé‰∏§‰∏™ËßíÂ∫¶ÁúãÔºå Â¶ÇÊûúÊòØ jvm ËßíÂ∫¶ÁúãÔºåÈÇ£Â∞±Âè™ÈúÄË¶ÅÂàÜ‰∏∫ ÂêØÂä®Á±ªÂä†ËΩΩÂô® „Äånative ËØ≠Ë®ÄÂÜôÁöÑ„ÄçÂíå ÂÖ∂‰ªñÁ±ªÂä†ËΩΩÂô®„Äåjava ÂÜôÁöÑ„ÄçÔºõ Â¶ÇÊûú‰ªéÁ®ãÂ∫èÂëòËßíÂ∫¶ÁúãÔºåÈÇ£Â∞±ÂàÜ‰∏∫ÂõõÁ±ªÔºå‰∏ÄÁ±ªÊòØ ÂêØÂä®Á±ªÂä†ËΩΩÂô®„ÄåBootstrap ClassLoader„ÄçÔºå‰∏ÄÁ±ªÊòØ Êâ©Â±ïÁ±ªÂä†ËΩΩÂô®„ÄåExtension ClassLoader„ÄçÔºå‰∏ÄÁ±ªÊòØ Â∫îÁî®Á®ãÂ∫èÁ±ªÂä†ËΩΩÂô®„ÄåApplication ClassLoaderÔºåËøô‰∏™Â∞±ÊòØÊàë‰ª¨ÂºÄÂèëÁ®ãÂ∫èÁöÑÈªòËÆ§‰ΩøÁî®ËøáÁöÑÁ±ªÂä†ËΩΩÂô®„ÄçÔºåÊúÄÂêé‰∏ÄÁ±ªÊòØ Ëá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®„ÄåËá™Â∑±ÂÆûÁé∞ÁöÑÁ±ªÂä†ËΩΩÂô®ÔºåÂÖ∂ÂÆûÂè™Ë¶ÅÂéªÁªßÊâøCLassLoader ‰∏ãÁöÑ findCLass() ÊñπÊ≥ïÂ∞±Ë°å‰∫ÜÔºåËøôÊ†∑ÊòØÁ¨¶ÂêàÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÁöÑ„Äç„ÄÇ Âèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÊé•‰∏ãÊù•Êàë‰ª¨‰ªéÁ®ãÂ∫èÂëòËßíÂ∫¶ÁöÑÂàÜÁ±ªÊù•ÁúãÂèå‰∫≤ÂßîÊ¥æÊ®°Âûã„ÄÇ Ê¶ÇÂøµ „Äå‰ªÄ‰πàÊòØÂèå‰∫≤ÂßîÊ¥æÊ®°Âûã„ÄçÈô§‰∫ÜÈ°∂Â±ÇÁöÑÂêØÂä®Á±ªÂä†ËΩΩÂô®‰ª•Â§ñÔºåÊâÄÊúâÁöÑÁ±ªÂä†ËΩΩÂô®ÈÉΩÂ∫îËØ•ÊúâÁà∂Á±ªÂä†ËΩΩÂô®ÔºåËøôÈáåÁöÑÁà∂Â≠êÂÖ≥Á≥ª‰∏çÊòØÈÄöËøáÁªßÊâøÊù•ÁöÑÔºåËÄåÊòØÈÄöËøáÁªÑÂêàÂÖ≥Á≥ª„ÄÇ„ÄåË¶ÅÁâπÂà´Ê≥®ÊÑèÂì¶ÔºåÊòØÁªÑÂêàÂÖ≥Á≥ªÔºåÊòØ has-a ÂÖ≥Á≥ªÔºåËøô‰∏™Âú∞ÊñπË∑üÂêéÈù¢‰∏∫‰Ωï jdbc Ë¶ÅËøùÂèçÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÊúâ‰∏çÂèØÂàÜÂâ≤ÁöÑÂÖ≥Á≥ªÂìà„Äç Ê®°ÂûãÊÄé‰πàÁî®„ÄåÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÁöÑÂ∑•‰ΩúÊµÅÁ®ã„ÄçÂ¶ÇÊûú‰∏Ä‰∏™Á±ªÂä†ËΩΩÂô®Êî∂Âà∞‰∫ÜÁ±ªÂä†ËΩΩÁöÑËØ∑Ê±ÇÔºåÂÖàÊääËøô‰∏™ËØ∑Ê±ÇÂßîÊ¥æÁªôÁà∂Á±ªÂä†ËΩΩÂô®ÂéªÂÆåÊàêÔºàÊâÄ‰ª•ÊâÄÊúâÁöÑÂä†ËΩΩËØ∑Ê±ÇÊúÄÁªàÈÉΩÂ∫îËØ•‰º†ÈÄÅÂà∞È°∂Â±ÇÁöÑÂêØÂä®Á±ªÂä†ËΩΩÂô®‰∏≠ÔºâÔºåÂè™ÊúâÂΩìÁà∂Âä†ËΩΩÂô®ÂèçÈ¶àËá™Â∑±Êó†Ê≥ïÂÆåÊàêÂä†ËΩΩËØ∑Ê±Ç(ÂÆÉÁöÑÊêúÁ¥¢ËåÉÂõ¥Ê≤°ÊúâÊâæÂà∞ÊâÄÈúÄË¶ÅÁöÑÁ±ª)Êó∂ÔºåÂ≠êÂä†ËΩΩÂô®Êâç‰ºöÂ∞ùËØïËá™Â∑±ÂéªÂä†ËΩΩ„ÄÇ ÂÖ∑‰ΩìÊàë‰ª¨Âú®Ê∫ê‰ª£Á†Å‰∏≠ÂèØ‰ª•ÁúãÂà∞ÔºåËøôÊ†∑ÁúãÁöÑÊõ¥Ê∏ÖÊ•ö‰∏ÄÁÇπÔºåÂú® ClassLoader Á±ª‰∏≠ÔºåÂÆåÊàêËøô‰∏™Â∑•‰ΩúÊµÅÁ®ãÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041protected Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException &#123; synchronized (getClassLoadingLock(name)) &#123; // First, check if the class has already been loaded // È¶ñÂÖàÊ£ÄÊü•ÊòØÂê¶Â∑≤ÁªèÂä†ËΩΩËøá‰∫ÜÔºåÂä†ËΩΩËøá‰∫ÜÂ∞±Ê≤°ÂøÖË¶ÅÂä†ËΩΩ‰∫Ü„ÄÇ Class&lt;?&gt; c = findLoadedClass(name); if (c == null) &#123; long t0 = System.nanoTime(); try &#123; if (parent != null) &#123; // ÂèØ‰ª•ÁúãÂà∞ËøôÈáåÊòØ‰∏™ÈÄíÂΩíË∞ÉÁî®ÔºåÂ∞±ÊòØÊÑèÂë≥ÁùÄÂ∞ÜËØ•ËØ∑Ê±Ç‰∏çÊñ≠Âú∞Âêë‰∏äÂßîÊ¥æ c = parent.loadClass(name, false); &#125; else &#123; // Ê≤°ÊúâËÄÅÁà∂‰∫≤‰∫ÜÔºåÂà§Êñ≠ÊòØ‰∏çÊòØ BootStrap ClassLoader c = findBootstrapClassOrNull(name); &#125; &#125; catch (ClassNotFoundException e) &#123; // ClassNotFoundException thrown if class not found // from the non-null parent class loader &#125; if (c == null) &#123; // If still not found, then invoke findClass in order // to find the class. long t1 = System.nanoTime(); c = findClass(name); // this is the defining class loader; record the stats sun.misc.PerfCounter.getParentDelegationTime().addTime(t1 - t0); sun.misc.PerfCounter.getFindClassTime().addElapsedTimeFrom(t1); sun.misc.PerfCounter.getFindClasses().increment(); &#125; &#125; if (resolve) &#123; resolveClass(c); &#125; return c; &#125; &#125; ‰∏∫‰ΩïË¶ÅÂºïÂÖ•Ëøô‰∏™Âèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÔºåÁõ¥Êé•Áî®‰∏Ä‰∏™Á±ªÂä†ËΩΩÂô®‰∏çÂ•ΩÂêóÔºüÂΩìÁÑ∂‰∏çÂ•ΩÔºÅÊàëËßâÂæóÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÊòØÂæàÊúâÂøÖË¶ÅÁöÑÔºöËÉΩÂ§üÊúÄÂ§ßÈôêÂ∫¶ÁöÑ‰øùËØÅÂÜÖÂ∫ìÁöÑÂÆâÂÖ®ÊÄßÔºåÊØîÂ¶Ç String Á±ªÔºåÂ¶ÇÊûúÊàëËá™Â∑±ÂéªÂÆûÁé∞ÔºåÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÊòØ‰∏ç‰ºöÂä†ËΩΩÊàëËøô‰∏™Á±ªÁöÑÔºåËÄåÊòØ‰ºö‰ΩøÁî®ÂêØÂä®‰∫ÜÂä†ËΩΩÂô®ÂéªÂä†ËΩΩÂÜÖÂ∫ì‰∏≠ÁöÑ String Á±ª„ÄÇ Êç¢Âè•ËØùËØ¥ÔºåÂèå‰∫≤ÂßîÊ¥æÂ∏¶Êù•ÁöÑËøô‰∏™Â•ΩÂ§ÑÔºåÂ∞±ÊòØ javaÁ±ªÈöèÁùÄÂÆÉÁöÑÁ±ªÂä†ËΩΩÂô®‰∏ÄËµ∑ÂÖ∑Â§á‰∫Ü‰∏ÄÁßçÂ∏¶Êúâ‰ºòÂÖàÁ∫ßÁöÑÂ±ÇÊ¨°ÂÖ≥Á≥ªÔºåÂÜÖÂ∫ìÁöÑÁ±ª‰ºòÂÖàÁ∫ßÈ´òÔºåÊâÄ‰ª•Â∞±Êõ¥Âä†ÂÆâÂÖ®‰∫Ü„ÄÇ ÈÇ£ÊàëÂºÑÂ§ö‰∏™Á±ªÂä†ËΩΩÂô®ÔºåÊàë‰∏çÊêûËøôÁßçÂ∑•‰ΩúÊµÅÁ®ãÂèØ‰∏çÂèØ‰ª•Ôºü‰∏çËøôÊ†∑ÁöÑËØùÔºåÂæàÂÆπÊòìÂØºËá¥‰∏Ä‰∏™Á±ªË¢´Â§ö‰∏™‰∏çÂêåÁöÑÁ±ªÂä†ËΩΩÂô®Âä†ËΩΩÔºåËøôÊ†∑‰ºö‰∫ßÁîüÂæàÂ§öÊú¨Â∫îËØ•‰∏ÄÊ†∑ÁöÑ‰∫åËøõÂà∂ÊµÅÔºå‰ΩÜÊòØÁî±‰∫éÁ±ªÂä†ËΩΩÂô®‰∏çÂêåÔºåÂú®ÊñπÊ≥ïÂå∫Â∞±‰∏çÂêå‰∫Ü„ÄÇ Êó¢ÁÑ∂Ëøô‰πàÂ•ΩÔºå‰∏∫‰ΩïË¶ÅËøùÂèçËøô‰∏™Ê®°ÂûãÔºåËøùÂèç‰∏ç‰ºöÂ∏¶Êù•ÈóÆÈ¢òÂêóÔºüÂ•ΩÁöÑÁ°ÆÊòØÂ•ΩÂïäÔºå‰ΩÜÊòØËøô‰∏™Ê®°Âûã‰ªñÊúâËá¥ÂëΩÁöÑÂº±ÁÇπÂïäÔºåÂ∞±ÊòØ has-aÔºå‰πüÂ∞±ÊòØ‰ªñ‰ª¨Âè™ÊòØÁªÑÂêàÁöÑÂÖ≥Á≥ªÔºåËøôÊ†∑‰ºöÂØºËá¥‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ∞±ÊòØÊàëÈ°∂Â±ÇÂä†ËΩΩÂô®Âä†ËΩΩÁ±ªÊó∂ÔºåÈÅáÂà∞ÈóÆÈ¢ò‰∫ÜÔºåÊØîÂ¶ÇËØ¥ jdbcÔºåÂ∞±ÊòØÈ°∂Â±ÇÂä†ËΩΩÂô®Âä†ËΩΩ‰∫Ü driver Ëøô‰∏™Êé•Âè£Ôºå‰ΩÜÊòØÊ≤°ÊúâÂÆûÁé∞Á±ªÔºåËøô‰∏™Êó∂ÂÄôÈ°∂Â±ÇÂä†ËΩΩÂô®Â∑≤ÁªèÂú®Âä†ËΩΩËøô‰∏™Á±ª‰∫ÜÔºå‰ΩÜÊòØÂç°‰Ωè‰∫ÜÔºåÊ≠§Êó∂Âèå‰∫≤ÂßîÊ¥æÊ®°Âûã‰πüÂ∏Æ‰∏ç‰∏äÂøô‰∫ÜÂïäÔºåÂõ†‰∏∫Ëøô‰∏™Ê®°ÂûãÂπ∂‰∏çÂÖÅËÆ∏‰Ω†È°∂Â±ÇÂä†ËΩΩÂô®ÂéªËé∑Âæó‰∏ã‰∏ÄÁ∫ßÁöÑÂä†ËΩΩÂô®ÂéªÂ∏ÆÂøôÂä†ËΩΩÁ±ªÔºåÊâÄ‰ª•Ê≠§Êó∂Â∞±ÂøÖÈ°ªËøùËÉåËøô‰∏™Ê®°ÂûãÂéªÂÅö‰∏Ä‰∫õ‰∫ãÊÉÖ‰∫Ü„ÄÇ ÂõûÈ°æ ‚Äî jdbcÂú®Ê≠£ÂºèËÆ≤ jdbc Á†¥ÂùèÂèå‰∫≤ÂßîÊ¥æÊ®°Âûã‰πãÂâçÔºåÊàë‰ª¨ÂÖàÊù•Â•ΩÂ•ΩÂõûÈ°æ‰∏Ä‰∏ã jdbc ÁöÑÊ¶ÇÂøµÔºåËøôÊòØ mybatis ÁöÑÂü∫Á°Ä„ÄÇ ÂÆö‰πâJDBCÔºàJava DataBase Connectivity,javaÊï∞ÊçÆÂ∫ìËøûÊé•ÔºâÊòØ‰∏ÄÁßçÁî®‰∫éÊâßË°åSQLËØ≠Âè•ÁöÑJava APIÔºåÂèØ‰ª•‰∏∫Â§öÁßçÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÊèê‰æõÁªü‰∏ÄËÆøÈóÆÔºåÂÆÉÁî±‰∏ÄÁªÑÁî® Java ËØ≠Ë®ÄÁºñÂÜôÁöÑÁ±ªÂíåÊé•Âè£ÁªÑÊàê„ÄÇJDBCÊèê‰æõ‰∫Ü‰∏ÄÁßçÂü∫ÂáÜÔºåÊçÆÊ≠§ÂèØ‰ª•ÊûÑÂª∫Êõ¥È´òÁ∫ßÁöÑÂ∑•ÂÖ∑ÂíåÊé•Âè£Ôºå‰ΩøÊï∞ÊçÆÂ∫ìÂºÄÂèë‰∫∫ÂëòËÉΩÂ§üÁºñÂÜôÊï∞ÊçÆÂ∫ìÂ∫îÁî®Á®ãÂ∫è„ÄÇ ‰∏ÄÂè•ËØùÊÄªÁªìÂ∞±ÊòØÔºåjdbc ÊòØ sun ÂÖ¨Âè∏ÊèêÂá∫Êù• java Êìç‰Ωú Êï∞ÊçÆÂ∫ìÁöÑËßÑËåÉÔºåÂÖ∑‰ΩìÂ¶Ç‰ΩïÂéªÂÆûÁé∞ÔºåÈúÄË¶ÅÂêÑÂ§ßÂéÇÂïÜËá™Â∑±ÂÆûÁé∞„ÄÇ ‰ΩøÁî®123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117package Á±ªÂä†ËΩΩÂô®;import java.sql.*;import java.util.ArrayList;import java.util.List;// ËøôÈáå‰ΩøÁî®ÁöÑÊòØ Class.forName("")ÔºåÊ≤°Êúâ‰ΩøÁî® spi ÂéªÂä†ËΩΩÔºåÊâÄ‰ª•Ëøô‰∏™Âπ∂Ê≤°ÊúâËøùÂèçÂèå‰∫≤ÂßîÊ¥æÊ®°Âûã/** * Âú®mysql‰∏≠ÂàõÂª∫testÊï∞ÊçÆÂ∫ìÔºåÂπ∂Âª∫Á´ãuserË°®Ôºå‰∏§‰∏™Â≠óÊÆµÔºånameÂíåage */public class jdbc &#123; /** * Êï∞ÊçÆÂ∫ìÁõ∏ÂÖ≥ÂèÇÊï∞ */ // maven ÂØºÂåÖÂ∞±Â•ΩÔºåmysql 8.0‰πãÂêéÁöÑÂåÖÔºåÂÆòÊñπ‰πüÊòØÂª∫ËÆÆ‰ΩøÁî® SPI Âì¶ÔºÅÔºÅ // ‰ΩøÁî® spi Â∞±ÂèØ‰ª•‰∏çÁî®Á°¨ÁºñÁ†Å‰∫ÜÔºå‰∏çÁî®ÊØèÊ¨°Êç¢ÂåÖÈÉΩÊîπ‰ª£Á†Å‰∫ÜÔºÅ public static final String JDBC_DRIVER = "com.mysql.cj.jdbc.Driver"; //ËøûÊé•Êï∞ÊçÆÂ∫ìÁöÑurlÔºåÂêÑ‰∏™Êï∞ÊçÆÂ∫ìÂéÇÂïÜ‰∏ç‰∏ÄÊ†∑ÔºåÊ≠§Â§Ñ‰∏∫mysqlÁöÑ;ÂêéÈù¢ÊòØÂàõÂª∫ÁöÑÊï∞ÊçÆÂ∫ìÂêçÁß∞ public static final String JDBC_URL = "jdbc:mysql://localhost:3306/test"; //ËøûÊé•Êï∞ÊçÆÂ∫ìÊâÄÈúÄË¥¶Êà∑Âêç public static final String JDBC_USERNAME = "root"; //Áî®Êà∑ÂêçÂØπÂ∫îÁöÑÂØÜÁ†ÅÔºåÊàëÁöÑmysqlÂØÜÁ†ÅÊòØ123456 public static final String JDBC_PASSWORD ="jwyjwy9951206-=-"; public static void main(String[] args) &#123; List&lt;Student&gt; students = new ArrayList&lt;Student&gt;(); Connection connection = null; PreparedStatement preparedStatement = null; ResultSet resultSet = null; try &#123; //Á¨¨‰∏ÄÊ≠•ÔºöÂä†ËΩΩDriverÁ±ªÔºåÊ≥®ÂÜåÊï∞ÊçÆÂ∫ìÈ©±Âä® Class.forName(JDBC_DRIVER); //Á¨¨‰∫åÊ≠•ÔºöÈÄöËøáDriverManager,‰ΩøÁî®urlÔºåÁî®Êà∑ÂêçÂíåÂØÜÁ†ÅÂª∫Á´ãËøûÊé•(Connection) connection = DriverManager.getConnection(JDBC_URL, JDBC_USERNAME, JDBC_PASSWORD); //Á¨¨‰∏âÊ≠•ÔºöÈÄöËøáConnectionÔºå‰ΩøÁî®sqlËØ≠Âè•ÊâìÂºÄStatementÂØπË±°Ôºõ preparedStatement = connection.prepareStatement("select * from user where age =?"); //‰º†ÂÖ•ÂèÇÊï∞Ôºå‰πãÊâÄ‰ª•ËøôÊ†∑ÊòØ‰∏∫‰∫ÜÈò≤Ê≠¢sqlÊ≥®ÂÖ• preparedStatement.setInt(1, 21); //Á¨¨ÂõõÊ≠•ÔºöÊâßË°åËØ≠Âè•ÔºåÂ∞ÜÁªìÊûúËøîÂõûresultSet resultSet = preparedStatement.executeQuery(); //Á¨¨‰∫îÊ≠•ÔºöÂØπÁªìÊûúËøõË°åÂ§ÑÁêÜ while (resultSet.next())&#123; String name = resultSet.getString("name"); int age = resultSet.getInt("age"); Student student = new Student(); student.setAge(age); student.setName(name); students.add(student); &#125; &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125;finally &#123; //Á¨¨ÂÖ≠Ê≠•ÔºöÂÄíÂèôÈáäÊîæËµÑÊ∫êresultSet-„ÄãpreparedStatement-„Äãconnection try &#123; if (resultSet!=null &amp;&amp; !resultSet.isClosed())&#123; resultSet.close(); &#125; &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; try &#123; if(preparedStatement!=null &amp;&amp; !preparedStatement.isClosed())&#123; preparedStatement.close(); &#125; &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; try &#123; if(connection!=null &amp;&amp; connection.isClosed())&#123; connection.close(); &#125; &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; for (Student student:students) &#123; System.out.println(student.getName()+"="+student.getAge()); &#125; &#125;&#125;class Student&#123; private String name; private int age; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125;&#125; ÊÄªÁªì‰∏Ä‰∏ãÔºåÊúâ‰ª•‰∏ãÂá†Ê≠•Ôºö ‰ΩøÁî® DriverManager ÂéªÂª∫Á´ãËøûÊé•ÔºåËøôÈáåÊòØÁõ¥Êé•Áî® Class.forName()ÂéªËøõË°å driverÈ©±Âä®ÁöÑÂä†ËΩΩÔºåËøôÊ†∑ÁöÑËØùËøô‰∏™driver ÊòØÁî± Application ClassLoader Âä†ËΩΩÁöÑÔºåËÄå DriverManager ÊòØÁî±ÂêØÂä®Á±ªÂä†ËΩΩÂô®Âä†ËΩΩÁöÑÔºåÁî±‰∫é driver ÂÖàÂä†ËΩΩ‰∫ÜÔºåÊâÄ‰ª•ËøôÈáåÂπ∂‰∏ç‰ºöËøùÂèçÂèå‰∫≤ÂßîÊ¥æÂéüÂàôÔºåÂú®‰∏ãÈù¢ÊàëËøò‰ºöËØ¶ÁªÜËÆ≤Âà∞Ëøô‰∏™Âä†ËΩΩËøáÁ®ãÔºõ Âª∫Á´ãËøûÊé•ÂêéÔºåÈÄöËøá connection ÂØπË±°Ôºå‰º†ÂÖ• sql ËØ≠Âè•ÔºåÂåÖË£ÖÊàê Statement ÂØπË±°ÔºåÁÑ∂ÂêéÂèØ‰ª•ÂØπÂÖ∂‰º†ÂèÇÔºõ ÁÑ∂ÂêéÊâßË°å sql ËØ≠Âè•Ôºå‰ºöËøîÂõûÁªìÊûúÁªìÊûúÈõÜ ResultSetÔºõ Â§ÑÁêÜÁªìÊûúÂç≥ÂèØÔºõ ÊúÄÂêéÈáäÊîæËµÑÊ∫ê„ÄÇ jdbc &amp; Âèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÁöÑÁà±ÊÅ®ÊÉÖ‰ªá‰∏ªË¶ÅÂèÇËÄÉÔºö https://blog.csdn.net/justloveyou_/article/details/72231425 Âú®ËÆ≤Ê≠£È¢ò‰πãÂâçÔºåËøòÊòØË¶ÅÂÜçÈì∫Âû´‰∏Ä‰∏ãÔºåÂÖà‰ªãÁªçÂá†‰∏™ÈúÄË¶ÅÁü•ÈÅìÁöÑÊ¶ÇÂøµÔºöSPI Êú∫Âà∂„ÄÅÁ∫øÁ®ã‰∏ä‰∏ãÊñáÁ±ªÂä†ËΩΩÂô®„ÄÇ SPIÁÆÄ‰ªãSPIÔºàService Provider InterfaceÔºâÔºåÈíàÂØπÂéÇÂïÜÊàñËÄÖÊèí‰ª∂ÁöÑ‰∏ÄÁßçÊú∫Âà∂„ÄÇÊàë‰ª¨Á≥ªÁªüÈáåÊäΩË±°ÁöÑÂêÑ‰∏™Ê®°ÂùóÔºåÂæÄÂæÄÊúâÂæàÂ§ö‰∏çÂêåÁöÑÂÆûÁé∞ÊñπÊ°àÔºåÊØîÂ¶ÇÊó•ÂøóÊ®°ÂùóÁöÑÊñπÊ°àÔºåxmlËß£ÊûêÊ®°Âùó„ÄÅjdbcÊ®°ÂùóÁöÑÊñπÊ°àÁ≠â„ÄÇÈù¢ÂêëÁöÑÂØπË±°ÁöÑËÆæËÆ°ÈáåÔºåÊàë‰ª¨‰∏ÄËà¨Êé®ËçêÊ®°Âùó‰πãÈó¥Âü∫‰∫éÊé•Âè£ÁºñÁ®ãÔºåÊ®°Âùó‰πãÈó¥‰∏çÂØπÂÆûÁé∞Á±ªËøõË°åÁ°¨ÁºñÁ†Å„ÄÇ‰∏ÄÊó¶‰ª£Á†ÅÈáåÊ∂âÂèäÂÖ∑‰ΩìÁöÑÂÆûÁé∞Á±ªÔºåÂ∞±ËøùÂèç‰∫ÜÂèØÊãîÊèíÁöÑÂéüÂàôÔºåÂ¶ÇÊûúÈúÄË¶ÅÊõøÊç¢‰∏ÄÁßçÂÆûÁé∞ÔºåÂ∞±ÈúÄË¶Å‰øÆÊîπ‰ª£Á†Å„ÄÇ‰∏∫‰∫ÜÂÆûÁé∞Âú®Ê®°ÂùóË£ÖÈÖçÁöÑÊó∂ÂÄôËÉΩ‰∏çÂú®Á®ãÂ∫èÈáåÂä®ÊÄÅÊåáÊòéÔºåËøôÂ∞±ÈúÄË¶Å‰∏ÄÁßçÊúçÂä°ÂèëÁé∞Êú∫Âà∂„ÄÇ java spiÂ∞±ÊòØÊèê‰æõËøôÊ†∑ÁöÑ‰∏Ä‰∏™Êú∫Âà∂Ôºö‰∏∫Êüê‰∏™Êé•Âè£ÂØªÊâæÊúçÂä°ÂÆûÁé∞ÁöÑÊú∫Âà∂„ÄÇÊúâÁÇπÁ±ª‰ººIOCÁöÑÊÄùÊÉ≥ÔºåÂ∞±ÊòØÂ∞ÜË£ÖÈÖçÁöÑÊéßÂà∂ÊùÉÁßªÂà∞Á®ãÂ∫è‰πãÂ§ñÔºåÂú®Ê®°ÂùóÂåñËÆæËÆ°‰∏≠Ëøô‰∏™Êú∫Âà∂Â∞§ÂÖ∂ÈáçË¶Å„ÄÇ ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚ÄîÁâàÊùÉÂ£∞ÊòéÔºöÊú¨Êñá‰∏∫CSDNÂçö‰∏ª„Äåsigangjun„ÄçÁöÑÂéüÂàõÊñáÁ´†ÔºåÈÅµÂæ™ CC 4.0 BY-SA ÁâàÊùÉÂçèËÆÆÔºåËΩ¨ËΩΩËØ∑ÈôÑ‰∏äÂéüÊñáÂá∫Â§ÑÈìæÊé•ÂèäÊú¨Â£∞Êòé„ÄÇÂéüÊñáÈìæÊé•Ôºöhttps://blog.csdn.net/sigangjun/article/details/79071850 Á∫¶ÂÆöÂΩìÊúçÂä°ÁöÑÊèê‰æõËÄÖÊèê‰æõ‰∫ÜÊúçÂä°Êé•Âè£ÁöÑ‰∏ÄÁßçÂÆûÁé∞‰πãÂêéÔºåÂú®jarÂåÖÁöÑMETA-INF/services/ÁõÆÂΩïÈáåÂêåÊó∂ÂàõÂª∫‰∏Ä‰∏™‰ª•ÊúçÂä°Êé•Âè£ÂëΩÂêçÁöÑÊñá‰ª∂ÔºåËØ•Êñá‰ª∂ÈáåÂ∞±ÊòØÂÆûÁé∞ËØ•ÊúçÂä°Êé•Âè£ÁöÑÂÖ∑‰ΩìÂÆûÁé∞Á±ª„ÄÇËÄåÂΩìÂ§ñÈÉ®Á®ãÂ∫èË£ÖÈÖçËøô‰∏™Ê®°ÂùóÁöÑÊó∂ÂÄôÔºåÂ∞±ËÉΩÈÄöËøáËØ•jarÂåÖMETA-INF/services/ÈáåÁöÑÈÖçÁΩÆÊñá‰ª∂ÊâæÂà∞ÂÖ∑‰ΩìÁöÑÂÆûÁé∞Á±ªÂêçÔºåÂπ∂Ë£ÖËΩΩÂÆû‰æãÂåñÔºåÂÆåÊàêÊ®°ÂùóÁöÑÊ≥®ÂÖ•„ÄÇÂü∫‰∫éËøôÊ†∑‰∏Ä‰∏™Á∫¶ÂÆöÂ∞±ËÉΩÊâæÂà∞ÊúçÂä°Êé•Âè£ÁöÑÂÆûÁé∞Á±ªÔºå‰∏çÈúÄË¶ÅÂú®‰ª£Á†ÅÈáåÊåáÂÆö„ÄÇjdkÊèê‰æõÊúçÂä°ÂÆûÁé∞Êü•ÊâæÁöÑÂ∑•ÂÖ∑Á±ªÔºöjava.util.ServiceLoader„ÄÇ Â∏¶Êù•ÁöÑÈóÆÈ¢òSPI ÔºàÊúçÂä°Êèê‰æõÊé•Âè£ÔºâÊòØÂú® rt.jar ‰∏ãÂÆö‰πâÁöÑÔºåËøôÊòØÁ≥ªÁªüÊ†∏ÂøÉÂ∫ìÔºåÊòØÁî±ÂêØÂä®Á±ªÂä†ËΩΩÂô®ÂéªÂä†ËΩΩÁöÑÔºå‰ΩÜÊòØÊé•Âè£ÁöÑÂÆûÁé∞Âç¥Âú®ÂêÑ‰æõÂ∫îÂïÜÊèê‰æõÁöÑ jar ÂåÖ‰∏ãÔºåÂêØÂä®Á±ªÂä†ËΩΩÂô®ËÇØÂÆöÊòØÊó†Ê≥ïÂéªËøõË°åÂä†ËΩΩÁöÑÔºåÊâÄ‰ª•Ê≠§Êó∂Âèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÊó†Ê≥ïËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ Á∫øÁ®ã‰∏ä‰∏ãÊñáÁ±ªÂä†ËΩΩÂô®Ê≠£ÊòØÂõ†‰∏∫ SPI Â∏¶Êù•ÁöÑÈóÆÈ¢òÔºåÊâÄ‰ª•Êàë‰ª¨ÂºïÂÖ• Á∫øÁ®ã‰∏ä‰∏ãÊñáÁ±ªÂä†ËΩΩÂô®„ÄåContext ClassLoader„Äç Ëøô‰∏™Ê≠¶Âô®Êù•ËøõË°åÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÁöÑËøùÂèç„ÄÇ Á∫øÁ®ã‰∏ä‰∏ãÊñáÁ±ªÂä†ËΩΩÂô®ÊòØ‰ªé JDK 1.2 ÂºÄÂßãÂºïÂÖ•ÁöÑ„ÄÇJava.lang.Thread‰∏≠ÁöÑÊñπÊ≥ï getContextClassLoader()Âíå setContextClassLoader(ClassLoader cl)Áî®Êù•Ëé∑ÂèñÂíåËÆæÁΩÆÁ∫øÁ®ãÁöÑ‰∏ä‰∏ãÊñáÁ±ªÂä†ËΩΩÂô®„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÈÄöËøá setContextClassLoader(ClassLoader cl)ÊñπÊ≥ïËøõË°åËÆæÁΩÆÁöÑËØùÔºåÁ∫øÁ®ãÂ∞ÜÁªßÊâøÂÖ∂Áà∂Á∫øÁ®ãÁöÑ‰∏ä‰∏ãÊñáÁ±ªÂä†ËΩΩÂô®„ÄÇJava Â∫îÁî®ËøêË°åÁöÑÂàùÂßãÁ∫øÁ®ãÁöÑ‰∏ä‰∏ãÊñáÁ±ªÂä†ËΩΩÂô®ÊòØÁ≥ªÁªüÁ±ªÂä†ËΩΩÂô®„ÄåApplication ClassLoader„ÄçÔºåÂú®Á∫øÁ®ã‰∏≠ËøêË°åÁöÑ‰ª£Á†ÅÂèØ‰ª•ÈÄöËøáÊ≠§Á±ªÂä†ËΩΩÂô®Êù•Âä†ËΩΩÁ±ªÂíåËµÑÊ∫ê„ÄÇ Êúâ‰∫Ü‰∏ä‰∏ãÊñáÁ±ªÂä†ËΩΩÂô®ÔºåÈÇ£Â∞±ÂèØ‰ª•Áõ¥Êé•Âú® SPI ‰∏≠ÂéªÂä†ËΩΩÂêÑÂéÇÂïÜÊèê‰æõÁöÑÂÆûÁé∞Á±ª‰∫Ü„ÄÇ jdbc ÁöÑÂä†ËΩΩjdbc ÂèØ‰ª•ÈÄöËøá‰∏§ÁßçÊñπÂºèËøõË°åÂä†ËΩΩÔºö ËøôÁßçÊñπÂºèÂπ∂Ê≤°ÊúâËøùÂèçÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÔºåÂõ†‰∏∫ÂÖ∂Âπ∂Ê≤°ÊúâË∞ÉÁî® SPI Êé•Âè£ÔºåÁõ¥Êé•ÂéªÁ°¨ÁºñÁ†ÅÂä†ËΩΩ Driver È©±Âä®ÔºåÊâÄ‰ª•Ê†πÊú¨‰∏ç‰ºöÁî®Âà∞ BootStrap ClassLoader ÂéªË∞ÉÁî® SPI„ÄÇ 12Class.forName("com.mysql.cj.jdbc.Driver");connection = DriverManager.getConnection(JDBC_URL, JDBC_USERNAME, JDBC_PASSWORD); SPI Êú∫Âà∂ÂéªÂä†ËΩΩ Driver È©±Âä®ÔºåÂèØ‰ª•ÈÅøÂÖçÁ°¨ÁºñÁ†ÅÔºåÈ©±Âä®Êîπ‰∫Ü‰πüÊó†ÈúÄ‰øÆÊîπ‰ª£Á†Å„ÄÇÂõ†‰∏∫ jdk ÈªòËÆ§Â∞±ÊòØ spi Êú∫Âà∂ÔºåÊâÄ‰ª•ÂÖ∂ÂÆû‰∏äÈù¢ÈÇ£‰∏ÄË°åÊòØÂ§ö‰ΩôÁöÑÔºåÂéªÊéâ Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);Á®ãÂ∫èÊòØÁÖßÊ†∑ÊâßË°åÁöÑ„ÄÇ Êàë‰ª¨ÂèØ‰ª•Ê∑±ÂÖ•Ê∫êÁ†ÅÂéªÁúã‰∏Ä‰∏ãÂÆûÁé∞ÁöÑÂÖ∑‰ΩìÊ≠•È™§Ôºö Âú® DriverManager ÁöÑ static ‰ª£Á†ÅÂùó‰∏≠ 12345678/** * Load the initial JDBC drivers by checking the System property * jdbc.properties and then use the &#123;@code ServiceLoader&#125; mechanism */static &#123; loadInitialDrivers(); println("JDBC DriverManager initialized");&#125; Êàë‰ª¨Ê≥®ÊÑèÂà∞Êúâ‰∏™ loadIntialDrivers()ÔºåÁªßÁª≠Áúã 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162private static void loadInitialDrivers() &#123; String drivers; try &#123; drivers = AccessController.doPrivileged(new PrivilegedAction&lt;String&gt;() &#123; public String run() &#123; return System.getProperty("jdbc.drivers"); &#125; &#125;); &#125; catch (Exception ex) &#123; drivers = null; &#125; // If the driver is packaged as a Service Provider, load it. // Get all the drivers through the classloader // exposed as a java.sql.Driver.class service. // ServiceLoader.load() replaces the sun.misc.Providers() AccessController.doPrivileged(new PrivilegedAction&lt;Void&gt;() &#123; public Void run() &#123; // ËøôÈáåÊòØÈáçÁÇπÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅ ServiceLoader&lt;Driver&gt; loadedDrivers = ServiceLoader.load(Driver.class); Iterator&lt;Driver&gt; driversIterator = loadedDrivers.iterator(); /* Load these drivers, so that they can be instantiated. * It may be the case that the driver class may not be there * i.e. there may be a packaged driver with the service class * as implementation of java.sql.Driver but the actual class * may be missing. In that case a java.util.ServiceConfigurationError * will be thrown at runtime by the VM trying to locate * and load the service. * * Adding a try catch block to catch those runtime errors * if driver not available in classpath but it's * packaged as service and that service is there in classpath. */ try&#123; while(driversIterator.hasNext()) &#123; driversIterator.next(); &#125; &#125; catch(Throwable t) &#123; // Do nothing &#125; return null; &#125; &#125;); println("DriverManager.initialize: jdbc.drivers = " + drivers); if (drivers == null || drivers.equals("")) &#123; return; &#125; String[] driversList = drivers.split(":"); println("number of Drivers:" + driversList.length); for (String aDriver : driversList) &#123; try &#123; println("DriverManager.Initialize: loading " + aDriver); Class.forName(aDriver, true, ClassLoader.getSystemClassLoader()); &#125; catch (Exception ex) &#123; println("DriverManager.Initialize: load failed: " + ex); &#125; &#125; &#125; Êàë‰ª¨ÁúãÂà∞‰∫ÜÊàë‰∏äÊñáÊèêÂèäÁöÑ ServiceLoaderÔºåÊàë‰ª¨ËØ¥Ëøá‰ªñÂÖ∂ÂÆûÂ∞±ÊòØÂéªËøõË°åÊúçÂä°ÂÆûÁé∞Êü•ÊâæÁöÑÔºåÁªßÁª≠Áúã ServiceLoader&lt;Driver&gt; loadedDrivers = ServiceLoader.load(Driver.class);ÂÅö‰∫Ü‰∫õ‰ªÄ‰πà„ÄåÂÖ∂ÂÆûÊàë‰ª¨ËÇØÂÆöÈÉΩËÉΩÁåúÂà∞‰∫ÜÔºåËÇØÂÆöÊòØÊãøÂà∞‰∫ÜÈ©±Âä®ÁöÑÂàóË°®„ÄÇ„Äç 12345678910public static &lt;S&gt; ServiceLoader&lt;S&gt; load(Class&lt;S&gt; service) &#123; ClassLoader cl = Thread.currentThread().getContextClassLoader(); return ServiceLoader.load(service, cl);&#125; public static &lt;S&gt; ServiceLoader&lt;S&gt; load(Class&lt;S&gt; service, ClassLoader loader)&#123; return new ServiceLoader&lt;&gt;(service, loader);&#125; Âú®ËøôÈáåÔºåÁªà‰∫éÂá∫Áé∞‰∫ÜÁ∫øÁ®ã‰∏ä‰∏ãÊñáÁ±ªÂä†ËΩΩÂô®ÔºåÁÑ∂ÂêéÂÜçÁªèËøá‰∏ÄÁ≥ªÂàóÁöÑÂáΩÊï∞Ë∞ÉÁî®„ÄåÊàëÂ∞±‰∏çÂ±ïÂºÄ‰∫ÜÔºåËøòÊòØÈùûÂ∏∏Â§çÊùÇÁöÑÔºåÊàë‰ª¨Êù•ÁúãÁúãÊúÄÁªàÁöÑÊúâÊïà‰ª£Á†Å„Äç„ÄÇ 12345678910111213141516171819202122232425private boolean hasNextService() &#123; if (nextName != null) &#123; return true; &#125; if (configs == null) &#123; try &#123; // Á≠âÂêå‰∫é Class.forName() String fullName = PREFIX + service.getName(); if (loader == null) configs = ClassLoader.getSystemResources(fullName); else configs = loader.getResources(fullName); &#125; catch (IOException x) &#123; fail(service, "Error locating configuration files", x); &#125; &#125; while ((pending == null) || !pending.hasNext()) &#123; if (!configs.hasMoreElements()) &#123; return false; &#125; pending = parse(service, configs.nextElement()); &#125; nextName = pending.next(); return true; &#125; ÊâÄ‰ª•ÔºåÂ∞±ÊòØÂà©Áî®Á∫øÁ®ã‰∏ä‰∏ãÊñáÁ±ªÂä†ËΩΩÂô®ÂéªÂÆåÊàêËøùÂèçÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÁöÑË°å‰∏∫ÁöÑ„ÄÇ ‚Äã ÊãìÂ±ïÈô§‰∫Ü SPI Êú∫Âà∂ÔºåËøùÂèç‰∫ÜÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÔºåÂú® Spring ‰∏≠ Âíå Tomcat ‰∏≠‰πüÂêåÊ†∑ËøùÂèç‰∫ÜÂèå‰∫≤ÂßîÊ¥æÊ®°Âûã„ÄÇ ‚Äã „ÄåTomcatËøô‰∏ÄÂùóÊ≤°Â§™ÊêûÊòéÁôΩ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„Äç Tomcat ‰∏≠ËøùÂèçÁöÑÂéüÂõ†ÊòØÊØè‰∏™ webÂ∫îÁî®Á®ãÂ∫èÂØπÂ∫îÁöÑÁ±ªÂ∫ìÈÉΩÂ∫îËØ•ÊòØ‰∫íÁõ∏ÈöîÁ¶ªÁöÑÔºå‰ΩÜÊòØÂ¶ÇÊûúÊòØÂèå‰∫≤ÂßîÊ¥æÊú∫Âà∂ÔºåÈÇ£‰πàÈÉΩ‰ºöÂéªÁî®È°∂Â±ÇÂä†ËΩΩÂô®Âä†ËΩΩÁõ∏Â∫îÁöÑÁ±ªÔºåÈÇ£‰πà‰∏Ä‰∏™Áõ∏ÂêåÁöÑÁ±ª‰ºöË¢´Âä†ËΩΩÂ§öÊ¨°ÔºåËÄåÂèàÊòØÂ±û‰∫é‰∏çÂêåÁöÑwebappÔºåÂØºËá¥ÂèëÁîüÂÜ≤Á™ÅÔºåÊâÄ‰ª•Âú® Tomcat ‰∏≠ÊòØ WebApp Ëá™Â∑±Áõ¥Êé•Âä†ËΩΩÔºå‰∏çËΩ¨ÂèëÁªô‰∏äÁ∫ßÂä†ËΩΩÂô®Ôºå‰πüÂ∞±ÊòØÊâÄË∞ìÁöÑ‚ÄúÂ≠ê‰ºòÂÖà‚Äù„ÄÇ„ÄåËøôÂùóÊàëËá™Â∑±‰πüÊúâ‰∫õ‰∏çÁ°ÆÂÆöÔºåÂú®Âë®ÂøóÂçéËÄÅÂ∏àÁöÑ‰π¶‰∏≠‰πüËÆ≤Âà∞‰∫ÜËøô‰∏™‰æãÂ≠êÔºå‰ΩÜÊòØÊàë‰πüÊ≤°Â§™ÊòéÁôΩ‰ªñËÆ≤Ëøô‰∏™‰æãÂ≠êÁöÑÊÑèÊÄù„ÄÇ„ÄÇ„ÄÇ„Äç Êúâ‰∏™Ë∑üÊàëÁ±ª‰ººÊÉ≥Ê≥ïÁöÑÂçöÂÆ¢ÔºåÂÜôÁöÑÊØîËæÉËØ¶ÁªÜÔºåÂèØ‰ª•ÁúãÁúãÔºöhttps://www.cnblogs.com/aspirant/p/8991830.html Ëøô‰∏™Ë∞àÂà∞‰∫ÜÂ≠ê‰ºòÂÖàÔºå‰∏çËøá‰πüÊ≤°Â§™ÁúãÊòéÁôΩÔºöhttps://zhuanlan.zhihu.com/p/24168200 SpringÔºåËøô‰∏™ÈóÆÈ¢òÂë®ÂøóÂçéËÄÅÂ∏àÁöÑ‰π¶‰∏≠‰πüÊúâÊèêÂèä„ÄÇ Â¶Ç‰∏ãÔºöÂ¶ÇÊûúÊúâ 10 ‰∏™ Web Â∫îÁî®Á®ãÂ∫èÈÉΩÁî®Âà∞‰∫ÜspringÁöÑËØùÔºåÂèØ‰ª•ÊääSpringÁöÑjarÂåÖÊîæÂà∞ common Êàñ shared ÁõÆÂΩï‰∏ãËÆ©Ëøô‰∫õÁ®ãÂ∫èÂÖ±‰∫´„ÄÇSpring ÁöÑ‰ΩúÁî®ÊòØÁÆ°ÁêÜÊØè‰∏™webÂ∫îÁî®Á®ãÂ∫èÁöÑbeanÔºågetBeanÊó∂Ëá™ÁÑ∂Ë¶ÅËÉΩËÆøÈóÆÂà∞Â∫îÁî®Á®ãÂ∫èÁöÑÁ±ªÔºåËÄåÁî®Êà∑ÁöÑÁ®ãÂ∫èÊòæÁÑ∂ÊòØÊîæÂú® /WebApp/WEB-INF ÁõÆÂΩï‰∏≠ÁöÑÔºàÁî± WebAppClassLoader Âä†ËΩΩÔºâÔºåÈÇ£‰πàÂú® CommonClassLoader Êàñ SharedClassLoader ‰∏≠ÁöÑ Spring ÂÆπÂô®Â¶Ç‰ΩïÂéªÂä†ËΩΩÂπ∂‰∏çÂú®ÂÖ∂Âä†ËΩΩËåÉÂõ¥ÁöÑÁî®Êà∑Á®ãÂ∫èÔºà/WebApp/WEB-INF/Ôºâ‰∏≠ÁöÑClassÂë¢Ôºü springÊ†πÊú¨‰∏ç‰ºöÂéªÁÆ°Ëá™Â∑±Ë¢´ÊîæÂú®Âì™ÈáåÔºåÂÆÉÁªüÁªü‰ΩøÁî®Á∫øÁ®ã‰∏ä‰∏ãÊñáÁ±ªÂä†ËΩΩÂô®Êù•Âä†ËΩΩÁ±ªÔºåËÄåÁ∫øÁ®ãÁ±ªÂä†ËΩΩÂô®ÈªòËÆ§ËÆæÁΩÆ‰∏∫‰∫ÜWebAppClassLoader„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂì™‰∏™WebAppÂ∫îÁî®Ë∞ÉÁî®‰∫ÜSpringÔºåSpringÂ∞±ÂéªÂèñËØ•Â∫îÁî®Ëá™Â∑±ÁöÑWebAppClassLoaderÊù•Âä†ËΩΩbean„ÄÇ]]></content>
      <categories>
        <category>jvm</category>
        <category>jdbc</category>
      </categories>
      <tags>
        <tag>Âèå‰∫≤ÂßîÊ¥æÊ®°Âûã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Èù¢ËØïÁªèÂéÜ]]></title>
    <url>%2F2020%2F03%2F17%2F%E5%AE%9E%E4%B9%A0%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C.html</url>
    <content type="text"><![CDATA[2020.3.17 15:38 - 16:35 „Äå57 ÂàÜÈíü„ÄçÈòøÈáå‰∏ÄÈù¢ÁîµËØùÈù¢„ÄÇËá™Â∑±Á¨¨‰∏ÄÊ¨°Èù¢ËØïÔºåÈù¢ÂæóÂæàÁ≥üÁ≥ïÔºåÈù¢ÂØπÈóÆÈ¢òÂæàÊÖå‚Ä¶ Êï¥‰∏™Èù¢ËØïÂàÜ‰∏âÂùóËøõË°åÔºö Âü∫Á°ÄÁü•ËØÜÔºå‰∏ªË¶ÅÈóÆ‰∫ÜËÆ°ÁΩëÂíåÊï∞ÊçÆÂ∫ì‰ª•ÂèäÁÆóÊ≥ï TCP ÁöÑ‰∏âÊ¨°Êè°ÊâãÂíåÂõõÊ¨°Êå•ÊâãËøáÁ®ã ËÖæËÆØÁöÑÈù¢ËØïÂÆòÂ§ßÂ§ß‰πüÈóÆ‰∫ÜËøô‰∏™ÈóÆÈ¢òÔºåÂπ∂‰∏îÁâπÂà´ÊèêÈÜí‰∫ÜÊàëË¶ÅÊ≥®ÊÑèËÆ∞‰Ωè tcp ËøûÊé•ÂíåÊñ≠ÂºÄÊó∂ÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®Á´ØÁöÑÁä∂ÊÄÅÔºåÁúüÊòØË∂ÖÁ∫ßÊÑüË∞¢ÂïäÔºåËøôÁÇπÂéüÊù•ËøòÁúüÁöÑ‰∏ÄÁõ¥Ê≤°ÊúâÊ≥®ÊÑèËøá„ÄÇ È¶ñÂÖàÊàë‰ª¨Êù•ÂõûÈ°æ‰∏Ä‰∏ã TCP ÁöÑÊï∞ÊçÆ‰º†ËæìÂçïÂÖÉÔºåTCP ‰º†ÈÄÅÁöÑÊï∞ÊçÆÂçïÂÖÉÁß∞‰∏∫Êä•ÊñáÊÆµ„ÄÇ‰∏Ä‰∏™ TCP Êä•ÊñáÊÆµÂàÜ‰∏∫ TCP È¶ñÈÉ®Âíå TCP Êï∞ÊçÆ‰∏§ÈÉ®ÂàÜÔºåÊï¥‰∏™ TCP Êä•ÊñáÊÆµÈÉΩÂ∞ÅË£ÖÂú® IP Êï∞ÊçÆÊä•‰∏≠ÁöÑÊï∞ÊçÆÈÉ®ÂàÜÔºåTCP È¶ñÈÉ®ÈïøÂ∫¶ÊòØ4ÁöÑÊï¥Êï∞ÂÄçÔºåÂÖ∂‰∏≠ÊúâÂõ∫ÂÆöÁöÑ20‰∏™Â≠óËäÇÔºåÂâ©‰ΩôÁöÑÂèØÂèòÂä®ÁöÑÂ∞±ÊòØÈÄâÈ°πÂíåÂ°´ÂÖÖ„ÄåÊúÄÂ∏∏ËßÅÁöÑÂèØÈÄâÂ≠óÊÆµÊòØÊúÄÈïøÊä•ÊñáÂ§ßÂ∞èÔºåÂèàÁß∞‰∏∫MSSÔºàMaximum Segment SizeÔºâÔºåÊØè‰∏™ËøûÊé•ÊñπÈÄöÂ∏∏ÈÉΩÂú®ÈÄö‰ø°ÁöÑÁ¨¨‰∏Ä‰∏™Êä•ÊñáÊÆµÔºà‰∏∫Âª∫Á´ãËøûÊé•ËÄåËÆæÁΩÆSYNÊ†áÂøó‰∏∫1ÁöÑÈÇ£‰∏™ÊÆµÔºâ‰∏≠ÊåáÊòéËøô‰∏™ÈÄâÈ°πÔºåÂÆÉË°®Á§∫Êú¨Á´ØÊâÄËÉΩÊé•ÂèóÁöÑÊúÄÂ§ßÊä•ÊñáÊÆµÁöÑÈïøÂ∫¶„ÄÇ„ÄçÔºå20‰∏™Âõ∫ÂÆöÁöÑÂ≠óËäÇÂåÖÊã¨‰∫ÜÊ∫êÁ´ØÂè£Âè∑Ôºà2 Â≠óËäÇÔºâ„ÄÅÁõÆÁöÑÁ´ØÂè£Ôºà2Â≠óËäÇÔºâ„ÄÅseqÂ∫èÂàóÂè∑Ôºà4Â≠óËäÇÔºâ„ÄÅÁ°ÆËÆ§Âè∑ackÔºà4Â≠óËäÇÔºâ„ÄÅ‰ª•ÂèäÁ°ÆËÆ§‰ΩçACK Á≠âÁ≠â„ÄÇ ÂÖ∂Ê¨°ÔºåÊàë‰ª¨Êù•ËØ¶ÁªÜËÆ≤Ëß£‰∏Ä‰∏ã‰∏âÊ¨°Êè°Êâã„ÄÅÂõõÊ¨°Êå•ÊâãÁöÑËøáÁ®ãÔºö ‰∏âÊ¨°Êè°Êâã È¶ñÂÖàÔºåÂú®‰∏âÊ¨°Êè°ÊâãÂª∫Á´ãËøûÊé•ÁöÑÈò∂ÊÆµÔºåÊòØ‰∏ç‰ºö‰º†Ëæì TCP Êä•ÊñáÊÆµÁöÑÔºå‰º†ËæìÁöÑÊòØ ‰º†ËæìÊéßÂà∂ÂùóÔºàTCBÔºâÔºå‰º†ËæìÊéßÂà∂Âùó TCB(Transmission Control Block)Â≠òÂÇ®‰∫ÜÊØè‰∏Ä‰∏™ËøûÊé•‰∏≠ÁöÑ‰∏Ä‰∫õÈáçË¶Å‰ø°ÊÅØÔºåÂ¶ÇÔºöTCP ËøûÊé•Ë°®ÔºåÊåáÂêëÂèëÈÄÅÂíåÊé•Êî∂ÁºìÂ≠òÁöÑÊåáÈíàÔºåÊåáÂêëÈáç‰º†ÈòüÂàóÁöÑÊåáÈíàÔºåÂΩìÂâçÁöÑÂèëÈÄÅÂíåÊé•Êî∂Â∫èÂè∑Á≠âÁ≠â„ÄÇ ÊúÄÂºÄÂßãÁöÑ Client Âíå Server ÈÉΩÊòØÂ§Ñ‰∫é ClosedÔºåÁî±‰∫éÊúçÂä°Âô®Á´Ø‰∏çÁü•ÈÅìË¶ÅË∑üË∞ÅÂª∫Á´ãËøûÊé•ÔºåÊâÄ‰ª•ÂÖ∂Âè™ËÉΩË¢´Âä®ÊâìÂºÄÔºåÁÑ∂ÂêéÁõëÂê¨Á´ØÂè£ÔºåÊ≠§Êó∂ Server Â§Ñ‰∫é Listen Áä∂ÊÄÅÔºõ ËÄå Client ‰ºö‰∏ªÂä®ÊâìÂºÄÔºåÁÑ∂ÂêéÊûÑÂª∫Â•Ω TCB „ÄåSYN= 1Ôºåseq = x„ÄçÔºåÂèëÈÄÅÁªôÊúçÂä°Âô®Á´ØÔºåÊ≠§Êó∂ Client ‰ºöÂ∞ÜÁä∂ÊÄÅÁΩÆ‰∏∫ SYN_SEND „ÄåÂêåÊ≠•Â∑≤ÂèëÈÄÅ„ÄçÔºõ ÊúçÂä°Âô®Á´ØÊî∂Âà∞ÂÆ¢Êà∑Á´ØÂèëÊù•ÁöÑÂêåÊ≠•ËØ∑Ê±ÇÂêéÔºå‰ºöÂ∞ÜÁä∂ÊÄÅÁΩÆ‰∏∫ SYN_RECV„ÄåÂêåÊ≠•Â∑≤Êé•Êî∂„ÄçÔºåÂêåÊó∂‰ºöÊûÑÂª∫Â•Ω TCB„ÄåSYN = 1Ôºåseq = yÔºåACK = 1Ôºåack = x + 1„ÄçÂèëÈÄÅÁªôÂÆ¢Êà∑Á´ØÔºõ ÂÆ¢Êà∑Á´ØÊé•Êî∂Âà∞‰∫ÜÊúçÂä°Âô®Á´ØÂèëÊù•ÁöÑ‰º†ËæìÊéßÂà∂Âùó‰πãÂêéÔºå‰ºöÂ∞ÜËá™Â∑±ÁöÑÁä∂ÊÄÅÊîπ‰∏∫ ESTABLISHED„ÄåÂª∫Á´ãËøûÊé•„ÄçÔºåÁÑ∂ÂêéÂèëÈÄÅÁ°ÆËÆ§Êä•ÊñáÔºàACK= 1Ôºåseq = x + 1Ôºåack = y + 1ÔºâÔºõ ÊúçÂä°Âô®Á´ØÂú®Êî∂Âà∞‰∫ÜÂÆ¢Êà∑Á´ØÂèëÊù•ÁöÑÊä•Êñá‰πãÂêéÔºå‰πüÂ∞ÜÁä∂ÊÄÅÁΩÆ‰∏∫ ESTABLISHED„ÄåÂª∫Á´ãËøûÊé•„ÄçÔºåËá≥Ê≠§Ôºå‰∏âÊ¨°Êè°ÊâãÁªìÊùüÔºåÂΩìÁÑ∂Âú®ËøôÈáåÔºåÂèØ‰ª•Â∏¶ tcp Êä•ÊñáÊÆµ‰ø°ÊÅØËøáÊù•‰∫ÜÔºåÂõ†‰∏∫Ê≠§Êó∂ÂÆ¢Êà∑Á´ØÂ∑≤ÁªèÂèØ‰ª•‰øùËØÅÊòØÂèØÈù†ÁöÑ‰º†Ëæì‰∫ÜÔºåÊâÄ‰ª•Âú®Ëøô‰∏ÄÁ´ØÂèØ‰ª•ÂèëÈÄÅÊä•ÊñáÊÆµ‰∫Ü„ÄÇ Âá†‰∏™ÈóÆÈ¢òÔºö ‰∏∫‰Ωï‰∏çÁõ¥Êé•Âú®Á¨¨‰∏ÄÊ¨°Êè°ÊâãÂ∞±Â∏¶‰∏äÊä•ÊñáÊÆµÊ∂àÊÅØÔºåÈùûË¶ÅÁ¨¨‰∏âÊ¨°ÊâçÂèØ‰ª•Â∏¶Ôºü Âõ†‰∏∫ TCP ÊòØË¶Å‰øùËØÅÊï∞ÊçÆÁöÑ‰∏ç‰∏¢Â§±‰∏îÂèØÈù†ÔºåÂ¶ÇÊûúÂú®Á¨¨‰∏ÄÊ¨°Â∞±Â∏¶‰∏äÊä•ÊñáÊÆµÊ∂àÊÅØÔºåÊ≠§Ê¨°Âª∫Á´ãËøûÊé•ÂæàÊúâÂèØËÉΩÂ∞±‰ºöÂ§±Ë¥•ÔºåÈÇ£‰πàÂ∞±‰∏çËÉΩ‰øùËØÅÊï∞ÊçÆÁöÑ‰∏ç‰∏¢Â§±‰∫ÜÔºåÂú®‰∏çÂèØÈù†ÁöÑÊú∫Âà∂‰∏äËøõË°åËøôÁßçÊìç‰ΩúÔºåÊç¢Êù•ÁöÑ‰ª£‰ª∑Â§™Â§ßÔºåÊØèÊ¨°ÂèëÈÄÅÊä•ÊñáÊÆµÁöÑËµÑÊ∫ê‰πü‰ºöÂ¢ûÂ§ßÔºåÂæó‰∏çÂÅøÂ§±Ôºõ ËÄåÁ¨¨‰∏âÊ¨°Êè°ÊâãÁöÑÊó∂ÂÄôÔºåÂÆ¢Êà∑Á´ØÂ∑≤ÁªèÁü•ÈÅìÊúçÂä°Âô®Á´ØÂáÜÂ§áÂ•Ω‰∫ÜÔºåÊâÄ‰ª•Âè™Ë¶ÅÂëäËØâÊúçÂä°Âô®Á´ØËá™Â∑±ÂáÜÂ§áÂ•Ω‰∫ÜÂ∞±okay‰∫ÜÔºåÊâÄ‰ª•Ê≠§Êó∂Â∏¶‰∏äÊä•ÊñáÊÆµ‰ø°ÊÅØÊ≤°Êúâ‰ªª‰ΩïÈóÆÈ¢ò„ÄÇ ÂèØ‰∏çÂèØ‰ª•Âè™Êè°Êâã‰∏§Ê¨°Ôºü ËÇØÂÆöÊòØ‰∏çÂèØ‰ª•ÁöÑÔºå‰∏âÊ¨°Êè°Êâã‰∏ªË¶ÅÊòØËß£ÂÜ≥ËøôÊ†∑‰∏Ä‰∏™Â∏∏ËßÅÁöÑÈóÆÈ¢òÔºåÂÆ¢Êà∑Á´ØÂèëÈÄÅ‰∫ÜÁ¨¨‰∏Ä‰∏™ËØ∑Ê±ÇËøûÊé•Âπ∂‰∏îÊ≤°Êúâ‰∏¢Â§±ÔºåÂè™ÊòØÂõ†‰∏∫Âú®ÁΩëÁªúÁªìÁÇπ‰∏≠ÊªûÁïôÁöÑÊó∂Èó¥Â§™Èïø‰∫ÜÔºåÁî±‰∫éTCPÁöÑÂÆ¢Êà∑Á´ØËøüËøüÊ≤°ÊúâÊî∂Âà∞Á°ÆËÆ§Êä•ÊñáÔºå‰ª•‰∏∫ÊúçÂä°Âô®Ê≤°ÊúâÊî∂Âà∞ÔºåÊ≠§Êó∂ÈáçÊñ∞ÂêëÊúçÂä°Âô®ÂèëÈÄÅËøôÊù°Êä•ÊñáÔºåÊ≠§ÂêéÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®ÁªèËøá‰∏§Ê¨°Êè°ÊâãÂÆåÊàêËøûÊé•Ôºå‰º†ËæìÊï∞ÊçÆÔºåÁÑ∂ÂêéÂÖ≥Èó≠ËøûÊé•„ÄÇÊ≠§Êó∂Ê≠§ÂâçÊªûÁïôÁöÑÈÇ£‰∏ÄÊ¨°ËØ∑Ê±ÇËøûÊé•ÔºåÁΩëÁªúÈÄöÁïÖ‰∫ÜÂà∞Ëææ‰∫ÜÊúçÂä°Âô®ÔºåËøô‰∏™Êä•ÊñáÊú¨ËØ•ÊòØÂ§±ÊïàÁöÑÔºå‰ΩÜÊòØÔºå‰∏§Ê¨°Êè°ÊâãÁöÑÊú∫Âà∂Â∞Ü‰ºöËÆ©ÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®ÂÜçÊ¨°Âª∫Á´ãËøûÊé•ÔºåËøôÂ∞ÜÂØºËá¥‰∏çÂøÖË¶ÅÁöÑÈîôËØØÂíåËµÑÊ∫êÁöÑÊµ™Ë¥π„ÄÇ Â¶ÇÊûúÈááÁî®ÁöÑÊòØ‰∏âÊ¨°Êè°ÊâãÔºåÂ∞±ÁÆóÊòØÈÇ£‰∏ÄÊ¨°Â§±ÊïàÁöÑÊä•Êñá‰º†ÈÄÅËøáÊù•‰∫ÜÔºåÊúçÂä°Á´ØÊé•ÂèóÂà∞‰∫ÜÈÇ£Êù°Â§±ÊïàÊä•ÊñáÂπ∂‰∏îÂõûÂ§ç‰∫ÜÁ°ÆËÆ§Êä•ÊñáÔºå‰ΩÜÊòØÂÆ¢Êà∑Á´Ø‰∏ç‰ºöÂÜçÊ¨°ÂèëÂá∫Á°ÆËÆ§„ÄÇÁî±‰∫éÊúçÂä°Âô®Êî∂‰∏çÂà∞Á°ÆËÆ§ÔºåÂ∞±Áü•ÈÅìÂÆ¢Êà∑Á´ØÂπ∂Ê≤°ÊúâËØ∑Ê±ÇËøûÊé•„ÄÇ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚ÄîÁâàÊùÉÂ£∞ÊòéÔºöÊú¨Êñá‰∏∫CSDNÂçö‰∏ª„ÄåÂ∞è‰π¶go„ÄçÁöÑÂéüÂàõÊñáÁ´†ÔºåÈÅµÂæ™ CC 4.0 BY-SA ÁâàÊùÉÂçèËÆÆÔºåËΩ¨ËΩΩËØ∑ÈôÑ‰∏äÂéüÊñáÂá∫Â§ÑÈìæÊé•ÂèäÊú¨Â£∞Êòé„ÄÇÂéüÊñáÈìæÊé•Ôºöhttps://blog.csdn.net/qzcsu/article/details/72861891 ÂõõÊ¨°Êå•Êâã ÊúÄÂºÄÂßãÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®Á´ØÈÉΩÊòØ ESTABLISHED ÁöÑÁä∂ÊÄÅÔºåÁÑ∂ÂêéÂÆ¢Êà∑Á´Ø‰ºö‰∏ªÂä®ÂÖ≥Èó≠ÔºåËÄåÊúçÂä°Âô®Á´ØÂàôÊòØË¢´Âä®ÂÖ≥Èó≠„ÄÇ ÂÆ¢Êà∑Á´ØÂèëÈÄÅ‰∏Ä‰∏™ FIN Êä•ÊñáÊÆµÔºåseq = ÁªìÊùüÁöÑÊä•ÊñáÊÆµÂ∫èÂè∑ + 1„ÄåÂÅáËÆæ‰∏∫ u„ÄçÔºåÂëäËØâÊúçÂä°Âô®Á´ØÔºåÂÆ¢Êà∑Á´ØÈúÄË¶ÅÂÖ≥Èó≠‰∫ÜÔºåÊ≠§Êó∂Â∞ÜÂÆ¢Êà∑Á´ØÁöÑÁä∂ÊÄÅÂèò‰∏∫ FIN-WAIT-1ÔºåÁ≠âÂæÖÊúçÂä°Âô®Á´ØÁöÑÂèçÈ¶àÔºõ ÊúçÂä°Âô®Âú®Êé•Êî∂Âà∞‰∫ÜÂÆ¢Êà∑Á´ØÂèëÊù•ÁöÑ FIN ÂåÖ‰πãÂêéÔºå‰ºöÂèë‰∏ÄÊù° ackÊä•ÊñáÂèçÈ¶àÁªôÂÆ¢Êà∑Á´ØÔºåÂÖ∂‰∏≠Êä•Êñá‰∏≠ÂåÖÊã¨ ACK = 1Ôºåseq = vÔºåack = u+1ÔºåÂëäËØâÂÆ¢Êà∑Á´ØÊî∂Âà∞‰∫ÜÂÆ¢Êà∑Á´ØË¶ÅÂÖ≥Èó≠ÁöÑÊ∂àÊÅØ‰∫ÜÔºåÂêåÊó∂ÊúçÂä°Âô®Á´Ø‰ºöÈÄöÁü•Â∫îÁî®ËøõÁ®ãÈúÄË¶ÅÂÖ≥Èó≠ËøûÊé•‰∫ÜÔºåÂπ∂Â∞ÜËá™Â∑±ÁöÑÁä∂ÊÄÅÁΩÆ‰∏∫ CLOSE-WAITÔºõ Áî±‰∫éÊúçÂä°Âô®Á´ØÂèØËÉΩËøòÊúâ‰∏Ä‰∫õÊï∞ÊçÆÊ≤°Â§ÑÁêÜÂÆåÔºåÊâÄ‰ª•ÈúÄË¶Å‰∏ÄÊÆµÊó∂Èó¥ÁöÑÁ≠âÂæÖÔºåÂΩìÂ§ÑÁêÜÂÆå‰∫Ü‰πãÂêéÔºå‰ºöÂÜçÂèë‰∏ÄÊù°Êä•ÊñáÔºåÂÖ∂‰∏≠ FIN = 1ÔºåACK = 1Ôºåseq = wÔºåack = u+1ÔºåÂëäÁü•ÂÆ¢Êà∑Á´ØÔºåÊúçÂä°Âô®Á´ØÁé∞Âú®ÂèØ‰ª•ÂÖ≥Èó≠‰∫ÜÔºåÂπ∂Â∞ÜÊúçÂä°Âô®Á´ØÁöÑÁä∂ÊÄÅÁî± CLOSE-WAIT Âèò‰∏∫ LAST-ACKÔºõ ÂÆ¢Êà∑Á´ØÂú®Êî∂Âà∞‰∫ÜÊúçÂä°Âô®Á´ØÂèëÊù•ÁöÑÊ∂àÊÅØ‰πãÂêéÔºå‰ºöÂèë‰∏ÄÊù°ackÊä•Êñá„ÄåACK = 1Ôºåseq = u+1Ôºåack = w+1„ÄçÂõûÂéªÔºåÂëäÁü•ÊúçÂä°Âô®Á´ØÔºåÂÆ¢Êà∑Á´ØÂ∑≤ÁªèÁü•ÈÅì‰∫Ü‰Ω†ÂáÜÂ§áÂ•ΩÂÖ≥Èó≠‰∫ÜÔºåÊ≠§Êó∂‰ºöÂ∞ÜÂÆ¢Êà∑Á´ØÁöÑÁä∂ÊÄÅÁî± FIN-WAIT-2 ÁΩÆ‰∏∫ TIME-WAITÔºåÂú®‰∏§‰∏™ÊúÄÈïøÊä•ÊñáÊÆµ‰º†ËæìÊó∂Èó¥ËøáÂêéÔºå‰ºöËá™Âä®Â∞ÜÂÆ¢Êà∑Á´ØÁöÑÁä∂ÊÄÅÁî± TIME-WAIT ÁΩÆ‰∏∫ CLOSED„ÄÇ ÊúçÂä°Âô®Á´ØÊî∂Âà∞Ê∂àÊÅØ‰πãÂêéÔºåÂ∞±Â∞ÜÁä∂ÊÄÅÁî± LAST-ACK ÁΩÆ‰∏∫‰∫Ü CLOSEDÔºåËá™Ê≠§ÔºåÂõõÊ¨°Êå•ÊâãÂÖ®ÈÉ®ÁªìÊùü„ÄÇ ‰∏Ä‰∏™ÂæàÂ∏∏ËßÅÁöÑÈóÆÈ¢òÔºå‰∏∫‰Ωï‰∏çËÉΩ‰∏âÊ¨°Êå•ÊâãÂë¢Ôºü È¶ñÂÖàÂ¶ÇÊûúÂéªÊéâÊúÄÂêé‰∏ÄÊ¨°Êå•ÊâãÔºåÈÇ£‰πàÊúçÂä°Âô®Á´ØÂ∞±‰∏çÁü•ÈÅìËá™Â∑±Ë¶ÅÂÖ≥Èó≠ÁöÑÊä•ÊñáÊúâÊ≤°Êúâ‰º†ËæìÊàêÂäüÔºåÂèØËÉΩÂçäË∑Ø‰∏äÂ∞±Â§±Ë¥•‰∫ÜÔºå‰ΩÜÊòØÊ≠§Êó∂ÂÆ¢Êà∑Á´Ø‰∏çÁü•ÈÅìÔºåÂØºËá¥ÂÆ¢Êà∑Á´Ø‰∏ÄÁõ¥Âú®Á≠âÂæÖÊúçÂä°Âô®ÂÖ≥Èó≠Ôºå‰ΩÜÊòØÊ≠§Êó∂ÊúçÂä°Âô®Á´ØÁõ¥Êé•Â∞±ÂÖ≥Èó≠‰∫ÜÔºõ Â¶ÇÊûú‰∏≠Èó¥ÁöÑ‰∏§Ê¨°Êå•ÊâãÂêàÂπ∂ÔºåÈÇ£ÊòØËÇØÂÆö‰∏çË°åÁöÑÔºåÂõ†‰∏∫Ê≠§Êó∂ÊúçÂä°Âô®Á´ØÂèØËÉΩËøòÊúâÂæàÂ§öÊä•ÊñáÊú™Â§ÑÁêÜÂÆåÔºåÊ≠§Êó∂Áõ¥Êé•ÂÖ≥Èó≠ËÇØÂÆö‰ºöÂØπ‰º†ËæìÊúâÂæàÂ§ßÂΩ±Âìç„ÄÇ ‰∏∫‰ªÄ‰πàÂÆ¢Êà∑Á´ØÂú®Êî∂Âà∞ ÊúçÂä°Âô®Á´ØÂèëÊù•ÁöÑ FIN ÂåÖÂêéË¶ÅÁ≠â 2 ‰∏™ÊúÄÈïøÊä•ÊñáÊÆµ‰º†ËæìÊó∂Èó¥Ôºü Èò≤Ê≠¢ÊúÄÂêéËá™Â∑±ÂèëÂéªÁöÑ ack Ê≤°‰º†ÈÄÅÂà∞ÊúçÂä°Âô®ÔºåÂ¶ÇÊûúÊúçÂä°Âô®Ê≤°Êî∂Âà∞ÂÆ¢Êà∑Á´ØÁöÑ ackÔºåËÇØÂÆö‰ºöÈÄâÊã©ÈáçÂèë‰∏ÄÊ¨° FIN ÂåÖÔºåÈÇ£‰πàÊ≠§Êó∂Â¶ÇÊûúÂÆ¢Êà∑Á´ØÂ∑≤ÁªèÂÖ≥Èó≠‰∫ÜÔºåÂÆ¢Êà∑Á´ØÂ∞±‰∏çËÉΩÂÜçÂèë ack Á°ÆËÆ§Êî∂Âà∞‰∫ÜÔºåËá≥‰∫é‰∏∫‰ΩïÊòØ 2 ‰∏™Êä•ÊñáÊÆµ‰º†ËæìÊó∂Èó¥ÔºåÂõ†‰∏∫ÂàöÂ•Ω‰∏ÄÂéª‰∏ÄÂõûÂòõ‚Ä¶ 2 ‰∏™ÊúÄÈïøÊä•Êñá‰º†ËæìÊó∂Èó¥Ê≤°Êúâ FIN ÂåÖÂèëÊù•ÔºåÂ∞±ËØ¥ÊòéÊúçÂä°Âô®Â∑≤ÁªèÂÖ≥Èó≠‰∫ÜÔºåÂÆ¢Êà∑Á´Ø‰πüÂ∞±ÂèØ‰ª•ÂÆâÂøÉÂÖ≥Èó≠‰∫Ü„ÄÇ ËøôÊñáÁ´†Êï¥Êå∫Â•ΩÔºöhttps://blog.csdn.net/qzcsu/article/details/72861891 http Âíå tcp ÁöÑÂå∫Âà´ tcp ÊòØ‰º†ËæìÂ±ÇÂçèËÆÆÔºåhttpÊòØÂ∫îÁî®Â±ÇÂçèËÆÆÔºåhttpÂú®‰º†ËæìÂ±ÇÂ∞±ÊòØ‰ΩøÁî®ÁöÑ tcp„ÄÇ ÊéíÂ∫èÁÆóÊ≥ïÊúâÂì™‰∫õ Ëøô‰∏™ÁÆÄÂçï„ÄÇÊéíÂ∫èÁÆóÊ≥ïÂàÜ‰∏∫ÊØîËæÉÁÆóÊ≥ïÂíåÈùûÊØîËæÉÁÆóÊ≥ïÔºåÂÖ∂‰∏≠ÊØîËæÉÁÆóÊ≥ïÂåÖÊã¨‰∫§Êç¢ÊéíÂ∫è„ÄåÂÜíÊ≥°ÂíåÂø´Êéí„Äç„ÄÅÈÄâÊã©ÊéíÂ∫è„ÄåÁÆÄÂçïÈÄâÊã©ÊéíÂ∫èÂíåÂ†ÜÊéíÂ∫è„Äç„ÄÅÊèíÂÖ•ÊéíÂ∫è„ÄåÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫è„ÄÅÂ∏åÂ∞îÊéíÂ∫è„Äç„ÄÅÂΩíÂπ∂ÊéíÂ∫è„Äå‰∫åË∑ØÂΩíÂπ∂ÂíåÂ§öË∑ØÂΩíÂπ∂„ÄçÔºåÈùûÊØîËæÉÊéíÂ∫èÊúâËÆ°Êï∞ÊéíÂ∫è„ÄÅÊ°∂ÊéíÂ∫è„ÄÅÂü∫Êï∞ÊéíÂ∫è„ÄÇ „ÄåÂÖ¨ÂºèÔºö ‰∏çÁ®≥ÂÆöÁöÑÊúâÔºöÂø´‰∫õÈÄâÂ†Ü„Äç ÂÜíÊ≥°ÊéíÂ∫è„ÄÇÁ®≥ÂÆöÁöÑÔºåÂπ≥ÂùáÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(n¬≤)ÔºåÊúÄÂ•ΩÊó∂Èó¥Â§çÊùÇÂ∫¶ÈÇ£ËÇØÂÆöÂ∞±ÊòØ‰∏ÄÊ¨°Âæ™ÁéØ O(n)ÔºåÊúÄÂùèÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(n¬≤)„ÄÇÁ©∫Èó¥Â§çÊùÇÂ∫¶ O(1)„ÄÇ Âø´ÈÄüÊéíÂ∫è„ÄÇ‰∏çÁ®≥ÂÆöÔºåÂπ≥ÂùáÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(nlogn)ÔºåÊúÄÂ•ΩÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(nlogn)ÔºåÊúÄÂùèÂ∞±ÊòØÈÄâÂÆöÁöÑÂü∫ÂáÜÂÄºÂú®ÊúÄËæπ‰∏äÔºåËøôÊ†∑Â∞±ÊòØO(n¬≤)ÔºåÊ≥®ÊÑèÂì¶ÔºåÂø´ÊéíÁöÑÁ©∫Èó¥Â§çÊùÇÂ∫¶Âπ≥ÂùáÊòØ O(logn)ÔºåÊúÄÂ∑Æ O(n)„ÄÇ ÁÆÄÂçïÈÄâÊã©ÊéíÂ∫è„ÄÇ‰∏çÁ®≥ÂÆöÔºåÂπ≥Âùá„ÄÅÊúÄÂ•Ω„ÄÅÊúÄÂùèÊó∂Èó¥Â§çÊùÇÂ∫¶ÈÉΩ‰∏∫O(n¬≤)„ÄÇÁ©∫Èó¥Â§çÊùÇÂ∫¶ O(1)„ÄÇ Â†ÜÊéíÂ∫è„ÄÇ‰∏çÁ®≥ÂÆöÔºåÂπ≥Âùá„ÄÅÊúÄÂ•Ω„ÄÅÊúÄÂùèÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(nlogn)„ÄÇÁ©∫Èó¥Â§çÊùÇÂ∫¶ O(1)„ÄÇ Áõ¥Êé•ÊèíÂÖ•ÊéíÂ∫è„ÄÇÁ®≥ÂÆö„ÄÇÊúÄÂ•ΩO(n)ÔºåÂπ≥Âùá„ÄÅÊúÄÂùèÊó∂Èó¥Â§çÊùÇÂ∫¶O(n¬≤)„ÄÇÁ©∫Èó¥Â§çÊùÇÂ∫¶ O(1)„ÄÇ Â∏åÂ∞îÊéíÂ∫è„ÄÇ‰∏çÁ®≥ÂÆö„ÄÇÊúÄÂ•ΩO(n)ÔºåÂπ≥ÂùáO(n1.3)ÔºåÊúÄÂùèËÇØÂÆöÊòØO(n¬≤)„ÄÇÁ©∫Èó¥Â§çÊùÇÂ∫¶O(1)„ÄÇ ÂΩíÂπ∂ÊéíÂ∫è„ÄÇÁ®≥ÂÆö„ÄÇÊúÄÂ•Ω„ÄÅÊúÄÂùè„ÄÅÊúÄÂ∑ÆÊó∂Èó¥Â§çÊùÇÂ∫¶O(nlogn)ÔºåÁ©∫Èó¥Â§çÊùÇÂ∫¶O(n)„ÄÇ ËÆ°Êï∞ÊéíÂ∫è„ÄÇÁ®≥ÂÆöÔºåÁ©∫Èó¥Êç¢Êó∂Èó¥„ÄÇÈÄÇÂêàÊï∞ÊØîËæÉÈõÜ‰∏≠Âú®‰∏ÄËµ∑ÁöÑÔºåËøôÊ†∑kÂ∞±Â∞ë‰∫ÜÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(n+k)ÔºåÁ©∫Èó¥Â§çÊùÇÂ∫¶‰πü‰∏∫O(n+k)„ÄÇ„Äå‰∏™‰∫∫ËøòÊòØËßâÂæóÂÖ∂ÂÆûÁ©∫Èó¥Â§çÊùÇÂ∫¶‰∏∫O(k)ÔºåÂõ†‰∏∫ÊàëÂèØ‰ª•ÊääÂÄºÊîæÂõûÂéªÁöÑÊó∂ÂÄôÂèØ‰ª•ÊîæÂà∞ÂéüÊï∞ÁªÑ‰∏äÔºåÊâÄ‰ª•ÊòØO(k)„ÄÇ„Äç Ê°∂ÊéíÂ∫èÔºåÊ°∂Ë∂äÂ§öÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶ÂæàÁÆÄÂçïÔºå‰∏∫O(n+k)ÔºåÁ©∫Èó¥Â§çÊùÇÂ∫¶ÊúÄÂùè‰∏∫O(n+k)ÔºåÂÖ∂‰∏≠ n ÊòØÂõ†‰∏∫Ê°∂ÂÜÖÈÉ®ÊâÄÊúâÂÖÉÁ¥†ÂæóÊéíÂ∫èÔºå k ÊòØÊåáÊ°∂ÁöÑÊï∞Èáè„ÄÇ Âü∫Êï∞ÊéíÂ∫èÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶O(n*k)Ôºåk‰∏∫ÊúÄÂ§ßÊï∞ÁöÑ‰ΩçÊï∞ÔºåÁ©∫Èó¥Â§çÊùÇÂ∫¶‰∏∫O(n)„ÄÇ Â†ÜÊéíÂ∫èÁöÑÁ®≥ÂÆöÊÄßÔºåÂ¶Ç‰ΩïÂÆûÁé∞Â†ÜÊéíÂ∫èÔºåÂÖ∑‰ΩìÁªÜËäÇ Ëøô‰∏™ÂæàÁÆÄÂçïÔºåÂ∞±‰∏çËØ¶ÁªÜËØ¥‰∫Ü„ÄÇ ÂΩíÂπ∂ÊéíÂ∫èÁöÑÁ®≥ÂÆöÊÄßÔºåÂ¶Ç‰ΩïÂÆûÁé∞ÂΩíÂπ∂ÊéíÂ∫èÔºåÂÖ∑‰ΩìÁªÜËäÇ ÁÆÄÂçï„ÄÇ ËØ¥‰∏Ä‰∏ãjdkËá™Â∏¶ÁöÑÊéíÂ∫èÁî®Âà∞‰∫ÜÂì™‰∫õÊéíÂ∫èÁÆóÊ≥ïÔºåÂ±ïÂºÄËÆ≤‰∏Ä‰∏ã Arrays.sort() &amp; Collections.sort() JDK‰∏≠ÁöÑËá™Â∏¶ÁöÑÊéíÂ∫èÁÆóÊ≥ïÂÆûÁé∞ÂéüÁêÜÁ≤æÂΩ©ÊÄªÁªì jdkÂ±ÇÈù¢ÂÆûÁé∞ÁöÑsortÊÄªÂÖ±ÊòØ‰∏§Á±ªÔºå‰∏Ä‰∏™ÊòØ Arrays.sort()Ôºå Collections.sort()Ôºõ Arrays.sort() Â¶ÇÊûúÊï∞ÁªÑÂÜÖÂÖÉÁ¥†ÊòØÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºåÊúÄ‰∏ªË¶ÅÈááÁî®ÁöÑÊòØÂèåËΩ¥Âø´ÈÄüÊéíÂ∫è„ÄåÂÖ∂ÂÆûÂ∞±ÊòØ‰∏âË∑ØÂø´Êéí‰∏ÄÊ®°‰∏ÄÊ†∑ÁöÑÊÄùË∑ØÔºåÂè™‰∏çËøá‰∏âË∑ØÂø´Êéí‰∏≠Èó¥ÊòØ = pivot1ÔºåËÄåÂèåËΩ¥Âø´ÈÄüÊéíÂ∫èÊòØÔºàpivot1Ôºåpivot2ÔºâÔºåÂÖ∑‰ΩìÊà≥ÈìæÊé•Ôºöhttps://www.cnblogs.com/nullzx/p/5880191.html „ÄÇ ÊÄªÁªìÂ∞±ÊòØÊï∞ÁªÑÈïøÂ∫¶Â∞è‰∫é47ÁöÑÊó∂ÂÄôÊòØÁî®Áõ¥Êé•ÊèíÂÖ•ÁÆóÊ≥ïÔºåÂ§ß‰∫é47Âπ∂‰∏îÂ∞è‰∫é286ÊòØÈááÁî®ÂèåËΩ¥Âø´ÈÄüÊéíÂ∫èÔºåÂ§ß‰∫é286Â¶ÇÊûúËøûÁª≠ÊÄßÂ•Ω„Äå‰πüÂ∞±ÊòØÂÖÉÁ¥†Â§ßÂ§öÊúâÂ∫èÔºåÊúâ‰∏Ä‰∏™flag‰∏ìÈó®Áî®Êù•ËÆ∞ÂΩïÊï∞ÁªÑÂÖÉÁ¥†ÁöÑÂçáÈôçÊ¨°Êï∞Ôºå‰ª£Ë°®Ëøô‰∏™Êï∞ÁªÑÁöÑËøûÁª≠ÊÄß„ÄçÈááÁî®ÁöÑÊòØÂΩíÂπ∂ÊéíÂ∫èÔºåÂê¶ÂàôËøòÊòØ‰æùÊóßÈááÁî®ÂèåËΩ¥Âø´ÈÄüÊéíÂ∫è„ÄÇ Â¶ÇÊûúÊï∞ÁªÑÂÜÖÂÖÉÁ¥†ÊòØÂØπË±°ÔºåÈááÁî®ÁöÑÊòØTimSort.sort()ÔºåË∑ü Collections.sort()‰∏ÄÊ†∑ÔºåÈÉΩÊòØÈááÁî®ÁöÑËøô‰∏™ÂáΩÊï∞ÔºåËøôÊòØÂΩíÂπ∂ÊéíÂ∫èÁÆóÊ≥ïÂíåÊèíÂÖ•ÊéíÂ∫èÁöÑÁªìÂêà„ÄÇ Collections.sort()ÔºåÈááÁî® TimSort.sort()„ÄÇ TimSort.sort() Â§ßÊ¶ÇÂéüÁêÜÔºö ÂΩìÂæÖÊéíÂ∫èÂÖÉÁ¥†Â∞è‰∫é32‰∏™Êó∂ÔºåÈááÁî®‰∫åÂàÜÊèíÂÖ•ÊéíÂ∫èÔºåÊòØÊèíÂÖ•ÊéíÂ∫èÁöÑ‰∏ÄÁßçÊîπËøõÔºåÂèØ‰ª•ÂáèÂ∞ëÊèíÂÖ•ÊéíÂ∫èÊØîËæÉÁöÑÊ¨°Êï∞„ÄÇÂΩìÊâæÂà∞ÊèíÂÖ•‰ΩçÁΩÆÊó∂ÔºåÁõ¥Êé•Âà©Áî®System.copy()ÂáΩÊï∞Âç≥ÂèØ„ÄÇ ÂΩìÂæÖÊéíÂ∫èÂÖÉÁ¥†Â§ß‰∫éÁ≠â‰∫é32‰∏™Êó∂ÔºåËøõË°åÂΩíÂπ∂ÊéíÂ∫èÔºàÂíå‰º†ÁªüÁöÑÂΩíÂπ∂‰∏ç‰∏ÄÊ†∑ÔºâÔºåÈ¶ñÂÖàÂ∞ÜÊéíÂ∫èÂÖÉÁ¥†ÂàÜÂå∫ÔºåÊØè‰∏™ÂàÜÂå∫ÁöÑÂ§ßÂ∞èÂå∫Èó¥‰∏∫[16,32)ÔºåÁÑ∂Âêé‰æùÊ¨°ÂØπÊØè‰∏™ÂàÜÂå∫ËøõË°åÊéíÂ∫èÔºàÂÖ∑‰ΩìÂÆûÁé∞‰æùÁÑ∂ÊòØ‰∫åÂàÜÊèíÂÖ•ÊéíÂ∫èÔºâÔºåÊéíÂÆåÂ∫èÁöÑÂàÜÂå∫ÂéãÂÖ•Ê†àÔºàÂáÜÁ°ÆÁöÑËØ¥‰∏çÊòØÊ†àÔºåËÄåÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÁî®Êù•ËÆ∞ÂΩïÊéíÂ∫èÂ•ΩÁöÑÂàÜÂå∫ÔºâÔºåÂΩìÊ†àÂÜÖÁöÑÂàÜÂå∫Êï∞Êª°Ë∂≥Êù°‰ª∂Êó∂ÔºåËøõË°åÂàÜÂå∫ÂêàÂπ∂ÔºåÂêàÂπ∂‰∏∫‰∏Ä‰∏™Êõ¥Â§ßÁöÑÂàÜÂå∫ÔºåÂΩìÊ†à‰∏≠Âè™Ââ©‰∏Ä‰∏™ÂàÜÂå∫Êó∂ÔºåÊéíÂ∫èÂÆåÊàê„ÄÇ mysqlÂ¶Ç‰Ωï‰ºòÂåñ Âª∫Á¥¢Âºï Á¥¢ÂºïÁöÑÂª∫Á´ãÁöÑÂéüÂàôÊúâÂì™‰∫õ Èô§‰∫ÜËøêÁî®ÊúÄÂ∑¶ÂâçÁºÄ„ÄÅÁ¥¢Âºï‰∏ãÊé®„ÄÅËÄÉËôëÁ¥¢ÂºïÈïøÂ∫¶ÔºåËøòÊúâÂì™‰∫õÊòØÂª∫Á´ãÁ¥¢ÂºïÈúÄË¶ÅËÄÉËôëÁöÑ „ÄåËøô‰∏™ÂÆûÂú®ÊÉ≥‰∏çÂà∞‰∫Ü„Äç Á∫¢ÈªëÊ†ëÂíåÂπ≥Ë°°‰∫åÂèâÊ†ëÁöÑÂå∫Âà´ÔºåÂêÑËá™ÁöÑ‰ºòÂäøÁâπÁÇπÔºå‰ª•ÂèäÁ∫¢ÈªëÊ†ëÂ¶Ç‰ΩïËøõË°åÊ∑ªÂä†Êï∞ÊçÆ„ÄåÂÖ∑‰ΩìËØ¥‰∏Ä‰∏ãÊóãËΩ¨ËøáÁ®ãÔºåÊàëÂè™ËØ¥‰∫ÜÊàëÂçöÂÆ¢‰∏äÂÜô‰∫ÜÔºåÂÖ∑‰ΩìÁöÑÁªôÂøò‰∫Ü‚Ä¶„Äç Ëøô‰∏™‰∫åÈù¢ÁúüÂæóÂ§ç‰π†Â§ç‰π†„ÄÇ javaÊñπÈù¢ ËÆ≤‰∏Ä‰∏ãÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÔºå‰∏∫‰ªÄ‰πàË¶ÅËÆæËÆ°Âèå‰∫≤ÂßîÊ¥æÊ®°Âûã Âèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÔºö‰∏Ä‰∏™Á±ªÂä†ËΩΩÂô®Âú®Âä†ËΩΩÁ±ªÊó∂ÔºåÂÖàÊääËøô‰∏™ËØ∑Ê±ÇÂßîÊâòÁªôËá™Â∑±ÁöÑÁà∂Á±ªÂä†ËΩΩÂô®ÂéªÊâßË°åÔºåÂ¶ÇÊûúÁà∂Á±ªÂä†ËΩΩÂô®ËøòÂ≠òÂú®Áà∂Á±ªÂä†ËΩΩÂô®ÔºåÂ∞±ÁªßÁª≠Âêë‰∏äÂßîÊâòÔºåÁõ¥Âà∞È°∂Â±ÇÁöÑÂêØÂä®Á±ªÂä†ËΩΩÂô®„ÄÇÂ¶ÇÊûúÁà∂Á±ªÂä†ËΩΩÂô®ËÉΩÂ§üÂÆåÊàêÁ±ªÂä†ËΩΩÔºåÂ∞±ÊàêÂäüËøîÂõûÔºåÂ¶ÇÊûúÁà∂Á±ªÂä†ËΩΩÂô®Êó†Ê≥ïÂÆåÊàêÂä†ËΩΩÔºåÈÇ£‰πàÂ≠êÂä†ËΩΩÂô®Êâç‰ºöÂ∞ùËØïËá™Â∑±ÂéªÂä†ËΩΩ„ÄÇ Â•ΩÂ§ÑÔºöjavaÁ±ªÈöèÁùÄÂÆÉÁöÑÁ±ªÂä†ËΩΩÂô®‰∏ÄËµ∑ÂÖ∑Â§á‰∫Ü‰∏ÄÁßçÂ∏¶Êúâ‰ºòÂÖàÁ∫ßÁöÑÂ±ÇÊ¨°ÂÖ≥Á≥ª„ÄÇ ËøôÁßçÂèå‰∫≤ÂßîÊ¥æÊ®°ÂºèÁöÑËÆæËÆ°ÂéüÂõ†ÔºöÂèØ‰ª•ÈÅøÂÖçÁ±ªÁöÑÈáçÂ§çÂä†ËΩΩÔºåÂè¶Â§ñ‰πüÈÅøÂÖç‰∫ÜjavaÁöÑÊ†∏ÂøÉAPIË¢´ÁØ°Êîπ„ÄÇ ËøùÂèçÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÔºåÊàë‰∏çÂ∞èÂøÉËØ¥‰∫ÜjdbcÔºåÁÑ∂ÂêéÈóÆÊàëjdbcÊòØÂ¶Ç‰ΩïËøûÊé•Âà∞Êï∞ÊçÆÂ∫ìÁöÑÔºåÂÖ∑‰ΩìÊµÅÁ®ãÊòØ‰ªÄ‰πàÔºåÊàëÂ∞±ËØ¥‰∫Ü‰∏™ÂèçÂ∞Ñ‚Ä¶Ê≤°Â§ç‰π†Âà∞‰Ωç ËßÅÊàëÂÜôÁöÑ „Ää‰ªéÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÂà∞jdbc„Äã ËÆ≤‰∏Ä‰∏ãjmmÔºå‰∏∫‰ΩïËøôÊ†∑ËÆæËÆ° java memeory model Ôºåjava ÂÜÖÂ≠òÊ®°ÂûãÔºåËÆæËÆ°ÁöÑÁõÆÁöÑÊòØÂ±èËîΩÊéâÂêÑÁßçÁ°¨‰ª∂ÂíåÊìç‰ΩúÁ≥ªÁªü‰πãÈó¥ÁöÑÂ∑ÆÂºÇÊÄßÔºåÂÆûÁé∞ËÆ© Java Âú®ÂêÑÁßçÂπ≥Âè∞‰∏ãÈÉΩËÉΩËÉΩÂà∞‰∏ÄËá¥ÁöÑÂπ∂ÂèëÊïàÊûú„ÄÇjmm ‰∏≠ÔºåÂàÜ‰∏∫‰∏ªÂÜÖÂ≠òÂíåÂ∑•‰ΩúÂÜÖÂ≠òÔºåÂÖ∂‰∏≠ÊØè‰∏™Á∫øÁ®ãÊã•ÊúâËá™Â∑±ÁöÑÂ∑•‰ΩúÂÜÖÂ≠òÔºåËÄå‰∏ªÂÜÖÂ≠òÊòØÊâÄÊúâÁ∫øÁ®ãÂÖ±‰∫´ÁöÑ„ÄÇËøôÈáåÊàëÈÅáÂà∞ÁñëÈóÆ‰∫ÜÔºåÂú®Âë®ÂøóÂçéËÄÅÂ∏àÈÇ£Êú¨‰π¶‰∏≠ÔºåÂÖàÊòØËÆ≤‰∏ªÂÜÖÂ≠ò‰∏≠Â≠òÂÇ®‰∫ÜÊâÄÊúâÁöÑÂèòÈáèÔºåÈÇ£ÂøÖÁÑ∂Â∞±ÂåÖÊã¨‰∫ÜÁ∫øÁ®ãÁöÑÂ±ÄÈÉ®ÂèòÈáèÔºåÈÇ£ÈöæÈÅìÊàëÁ∫øÁ®ã‰ΩøÁî®Ëá™Â∑±ÁöÑÂ±ÄÈÉ®ÂèòÈáèÔºå‰πüË¶Å‰ªé‰∏ªÂÜÖÂ≠ò‰∏≠Êã∑Ë¥ù‰∏Ä‰ªΩÂâØÊú¨Âà∞Â∑•‰ΩúÂÜÖÂ≠ò‰∏≠Âë¢ÔºüËøôÊòØ‰∏çÊòØÂíåËØ¥‰∏ªÂÜÖÂ≠òÊòØÂÖ±‰∫´Âå∫Âüü‰∫ßÁîü‰∫ÜÁüõÁõæÂë¢Ôºü‰π¶‰∏≠ËøòËØ¥ÂèØ‰ª•Á±ªÊØîÔºå‰∏ªÂÜÖÂ≠òÂ∞±ÊòØË∑üÂ†ÜÂ∑Æ‰∏çÂ§öÔºåËÄåÂ∑•‰ΩúÂÜÖÂ≠òÁ±ª‰ºº‰∫éÊ†àÔºåÈÇ£‰πãÂâçËØ¥ÁöÑ‰∏ªÂÜÖÂ≠òÂ≠òÂÇ®‰∫ÜÊâÄÊúâÁöÑÂèòÈáèÔºåËøôÂè•ËØùÊòØ‰∏çÊòØÊúâÈóÆÈ¢òÂë¢Ôºü‰∏™‰∫∫ËßâÂæó‰∏ªÂÜÖÂ≠ò‰∏çÂèØËÉΩÂ≠òÂÇ®ÊâÄÊúâÁöÑÂèòÈáè‚Ä¶Â∫îËØ•Â∞±ÊòØÁ±ª‰ºº‰∫éÂ†ÜÂ≠òÂÇ®ÂÖ±‰∫´ÂèòÈáè‚Ä¶ ‰∏∫‰ΩïË¶ÅÊúâÂ∑•‰ΩúÂÜÖÂ≠òÔºåÊúâ‰∫Ü‰∏ªÂÜÖÂ≠òÂíåÂ∑•‰ΩúÂÜÖÂ≠ò‰∏çÊòØÊõ¥È∫ªÁÉ¶ÂïäÔºåË¶Å‰∏çÊñ≠ÁöÑÂ§çÂà∂ÁßªÂä®Êï∞ÊçÆÔºå‰∏∫‰Ωï‰∏çËÉΩÁõ¥Êé•ÂØπ‰∏ªÂÜÖÂ≠òÊìç‰Ωú„ÄåËøô‰∏™‰πüÊ≤°Á≠î‰∏äÊù•„Äç ËøôÂ∞±Ë∑ü‰∏∫‰ΩïË¶ÅÊèêÂá∫ÂØÑÂ≠òÂô®ÂíåÁºìÂ≠ò‰∏ÄÊ†∑ÁöÑÈÅìÁêÜÔºåÂ¶ÇÊûúÊâÄÊúâÁöÑÊìç‰ΩúÈÉΩÂú®ÂÜÖÂ≠ò‰∏≠ÂÆåÊàêÔºåÈÇ£ÈÄüÂ∫¶ÂÆûÂú®ÊòØÂ§™ÊÖ¢‰∫ÜÔºåÂè™ÊúâÂ∑•‰ΩúÂú®ÂØÑÂ≠òÂô®ÂíåÁºìÂ≠ò‰∏≠ÔºåÈÄüÂ∫¶ÊâçËÉΩËÆ©‰∫∫Êª°ÊÑèÔºåËÄåËøôÈáåÁöÑ‰∏ªÂÜÖÂ≠òÂ∞±Á±ªÊØî‰∏∫ÂÜÖÂ≠òÔºåÂ∑•‰ΩúÂÜÖÂ≠òÂ∞±Á±ªÊØî‰∏∫ÂØÑÂ≠òÂô®ÂíåÁºìÂ≠ò„ÄÇ ‰ªÄ‰πàÊòØÁ∫øÁ®ãÂÆâÂÖ® „ÄåÂ§öÁ∫øÁ®ãÊñπÈù¢‰∏Ä‰∏™ÈóÆÈ¢òÈÉΩÊ≤°ÈóÆ‚Ä¶Ë°Ä‰∫è„Äç Â§ö‰∏™Á∫øÁ®ãËÆøÈóÆ‰∏Ä‰∏™ÂØπË±°ÔºåÊó†ÈúÄËÄÉËôëÁéØÂ¢ÉÂíåÈ¢ùÂ§ñÂêåÊ≠•ÔºåË∞ÉÁî®Ëøô‰∏™ÂØπË±°ÁöÑË°å‰∏∫Â∞±ËÉΩÂæóÂà∞Ê≠£Á°ÆÁöÑÁ≠îÊ°àÔºåÂ∞±ËØ¥ÊòéËøô‰∏™ÂØπË±°ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇ ‰∏æ‰∏â‰∏™‰æãÂ≠êÂàÜÂà´ÊèèËø∞ jmmÁöÑ‰∏â‰∏™ÁâπÊÄß„ÄåÂéüÂ≠êÊÄß„ÄÅÊúâÂ∫èÊÄß„ÄÅÂèØËßÅÊÄß„ÄçÂØºËá¥ÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢ò ‰∏çÈÅµÂæ™ÂéüÂ≠êÊÄßÔºövolatile ÂèòÈáèÁöÑËá™Âä†ÔºåÂ§çÂêàÊìç‰ΩúÔºåÂØºËá¥Á∫øÁ®ã‰∏çÂÆâÂÖ®Ôºõ ‰∏çÈÅµÂæ™ÊúâÂ∫èÊÄßÔºöÊØîÂ¶ÇÂÖ±‰∫´ÂèòÈáèÔºåÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂ËÆøÈóÆÔºå‰∏çÊåâÂ∫èÔºåÊØè‰∏™ÈÉΩÊã∑Ë¥ù‰∏Ä‰ªΩÂà∞Ëá™Â∑±ÁöÑÂ∑•‰ΩúÂÜÖÂ≠òÔºåÂøÖÁÑ∂‰ºöÂØºËá¥Á∫øÁ®ã‰∏çÂÆâÂÖ®Ôºõ ‰∏çÈÅµÂæ™ÂèØËßÅÊÄßÔºöÊôÆÈÄöÂèòÈáèÔºåË∑üÊúâÂ∫èÊÄß‰∏ÄÊ†∑ÁöÑ‰æãÂ≠êÔºåÊØè‰∏™ÈÉΩ‰ªé‰∏ªÂÜÖÂ≠òÊã∑Ë¥ù‰∏Ä‰ªΩÂèòÈáèÁöÑÂâØÊú¨Âà∞Â∑•‰ΩúÂÜÖÂ≠òÔºåÂøÖÁÑ∂‰ºöÂØºËá¥Á∫øÁ®ã‰∏çÂÆâÂÖ®„ÄÇ ËÆ≤‰∏Ä‰∏ã RunTimeException ÁöÑÈÄ†ÊàêÁöÑÂéüÂõ†„ÄåÈùûÊ£ÄÊü•ÂûãÂºÇÂ∏∏„ÄçÔºåÂπ∂ËØ¥‰∏Ä‰∏ã‰∏∫‰ªÄ‰πà‰∏çÂ§ÑÁêÜ RunTimeExceptionÔºü RuntimeExceptionÊòØExceptionÂ≠êÁ±ª„ÄÇËÄåExceptionËøòÊúâÂÖ∂ÂÆÉÁ±ªÂûãÁöÑÂºÇÂ∏∏ÔºåÊàë‰ª¨Áªü‰∏ÄÁß∞‰∏∫ÈùûRuntimeÂºÇÂ∏∏„ÄÇRuntimeExceptionÁöÑÁâπÁÇπÊòØÈùûÊ£ÄÊü•ÂûãÂºÇÂ∏∏Ôºå‰πüÂ∞±ÊòØJavaÁ≥ªÁªü‰∏≠ÂÖÅËÆ∏ÂèØ‰ª•‰∏çË¢´catchÔºåÂú®ËøêË°åÊó∂ÊäõÂá∫„ÄÇËÄåÂÖ∂ÂÆÉÂÆöÈùûËøêË°åÊó∂ÂºÇÂ∏∏Â¶ÇÊûúÊäõÂá∫ÁöÑËØùÂøÖÈ°ªÊòæÁ§∫ÁöÑcatchÔºåÂê¶ÂàôÁºñËØë‰∏çËøá„ÄÇ RuntimeExceptionÂ∏∏ËßÅÂºÇÂ∏∏Ôºö 1 NullPointerExceptionÔºåÁ©∫ÊåáÈíàÂºÇÂ∏∏„ÄÇ 2 NumberFormatExceptionÔºåÂ≠óÁ¨¶‰∏≤ËΩ¨ÂåñÊàêÊï∞Â≠óÊó∂„ÄÇ 3 ArrayIndexOutOfBoundsExceptionÔºå Êï∞ÁªÑË∂äÁïåÊó∂„ÄÇ 4 StringIndexOutOfBoundsExceptionÔºå Â≠óÁ¨¶‰∏≤Ë∂äÁïåÊó∂„ÄÇ 5 ClassCastExceptionÔºåÁ±ªÂûãËΩ¨Êç¢Êó∂„ÄÇ 6 UnsupportedOperationExceptionÔºåËØ•Êìç‰Ωú‰∏çÊîØÊåÅÔºå‰∏ÄËà¨Â≠êÁ±ª‰∏çÂÆûÁé∞Áà∂Á±ªÁöÑÊüê‰∫õÊñπÊ≥ïÊó∂„ÄÇ 7 ArithmeticExceptionÔºåÈõ∂‰Ωú‰∏∫Èô§Êï∞Á≠â„ÄÇ 8 IllegalArgumentExceptionÔºåË°®Êòé‰º†ÈÄí‰∫Ü‰∏Ä‰∏™‰∏çÂêàÊ≥ïÊàñ‰∏çÊ≠£Á°ÆÁöÑÂèÇÊï∞ ËøêË°åÊó∂Âá∫Áé∞ÈîôËØØÔºåËØ¥Êòé‰Ω†ÁöÑ‰ª£Á†ÅÊúâÈóÆÈ¢òÔºåÁ®ãÂ∫èÂ∑≤ÁªèÊó†Ê≥ïÁªßÁª≠ËøêË°åÔºåÊâÄ‰ª•ÂØπRuntimeExceptionÁöÑÂ§ÑÁêÜÊó∂‰∏çÂøÖË¶ÅÁöÑ„ÄÇ‰πãÊâÄ‰ª•‰∏çÂ§ÑÁêÜÔºåÁõÆÁöÑÂ∞±ÊòØË¶ÅÊòØÁ®ãÂ∫èÂÅúÊ≠¢Ôºå‰øÆÊ≠£‰ª£Á†Å„ÄÇ È°πÁõÆ ‰∏ªË¶ÅÂ∞±ÈóÆ‰∫Ü‰∏ãÊàëÊúÄËøëÂú®ÂÅö‰ªÄ‰πàÈ°πÁõÆÔºåÂà∞‰ªÄ‰πàÈò∂ÊÆµ‰∫ÜÔºåÊúâÂ§öÂ∞ë‰∫∫Áî®Ôºõ ÈóÆÊàëÁà¨Ëô´ÁöÑÂÆûÁé∞„ÄåÈù¢ËØïÂÆòË≤å‰ººÊ≤°ÊúâÂÅöËøáËøôÊñπÈù¢ÁöÑ‰∏úË•ø„Äç ÊàëÊèê‰∫Ü‰∏ÄÂò¥ xxl-jobÔºåÈù¢ËØïÂÆòÂ∫îËØ•‰πüÊ≤°Áî®ËøáÔºåÂ∞±Ê≤°ÊúâÊ∑±Á©∂ÔºåÊú¨Êù•ËøòÊÉ≥ËÆ≤ËÆ≤kafkaÁöÑÔºåÁªìÊûúÁõ¥Êé•Ê≤°ÈóÆ‚Ä¶ÁôΩÂáÜÂ§á‰∫Ü ÊúÄÂêéÂ∞±ÈóÆ‰∫Ü‰∏Ä‰∏™ÂæàÂ∏∏ËßÅÁöÑÁÆóÊ≥ïÈóÆÈ¢òÔºö 256M ÁöÑÂÜÖÂ≠òÂ¶Ç‰ΩïÂØπ 16gÁöÑÊï∞ÁªÑËøõË°åÊéíÂ∫è Â§öË∑ØÂΩíÂπ∂ÔºåÂõ†‰∏∫Ê≤°Ë¶ÅÊ±ÇÂ≠òÂÇ®ÔºåÂè™Ë¶ÅÊ±Ç‰∫ÜÂÜÖÂ≠òÔºåÂèØ‰ª•Â§öË∑ØÂΩíÂπ∂ÔºåÂä†ÂÖ•ÊØè‰∏™ÂÖÉÁ¥†ÈÉΩÊòØ 1MÔºåÂàôÂèØ‰ª•ÊúÄÂ§öÂàÜÊàê 256 ÁªÑÔºåÁÑ∂ÂêéËøõË°åÂΩíÂπ∂„ÄÇ ÂÖ∑‰ΩìÊèèËø∞ÔºöÈááÁî®Â§ñÈÉ®ÊéíÂ∫èÔºåÂÖàÂ∞Ü16 gÊï∞ÁªÑÂàÜÊàê 256 M ‰∏ÄÁªÑÔºåÁÑ∂ÂêéÂàÜÂà´ËØªÂÖ•ÂÜÖÂ≠òËøõË°åÂÜÖÈÉ®ÊéíÂ∫è„ÄåÊØîÂ¶ÇËØ¥ÂèØ‰ª•‰ΩøÁî®Âø´Êéí„ÄçÔºåÂ∞ÜËøô‰∫õÁªÑÂÜÖÂÖÉÁ¥†ÂÖ®ÈÉ®ÊéíÂ•ΩÂ∫è‰πãÂêéÔºåÁÑ∂ÂêéËøêÁî®Ë¥•ËÄÖÊ†ëÂíåÁΩÆÊç¢-ÈÄâÊã©ÊéíÂ∫èÔºåËøõË°åÂ§öË∑ØÂΩíÂπ∂ÔºåÂç≥ÂèØ„ÄÇ ËøôÈáåÂÖ∂ÂÆûÂèØ‰ª•ÂºïÁî≥Âá∫Â•ΩÂ§öÈóÆÈ¢òÔºö Êµ∑ÈáèÊï∞ÊçÆ Ê±ÇÊúÄÂ§ßÁöÑ K‰∏™Êï∞ÈóÆÈ¢òÔºåÂ¶Ç‰ΩïËß£ÂÜ≥Ôºü Êåâ‰ΩçÂàíÂàÜÂå∫ÂüüÔºåÂèØ‰ª•Â∞ΩÂø´ÁöÑÁº©Â∞èËåÉÂõ¥ÔºåÊØîÂ¶ÇÊúÄÈ´ò‰Ωç 0 ÂàÜ‰∏ÄÂ†ÜÔºå1 ÂàÜÊàê‰∏ÄÂ†ÜËÄå‰∏î‰∏çÁî®ÊéíÂ∫èÔºåËøôÊòØÁ¨¨‰∏ÄÈÄâÊã©„ÄÇ ÊúÄÁªèÂÖ∏ÁöÑÊñπÊ≥ïÂΩìÁÑ∂ÊòØ Â†Ü ‰∫ÜÔºåÊØîÂ¶ÇË¶ÅÊ±ÇÂâç1000‰∏™ÊúÄÂ§ßÁöÑÊï∞ÔºåÈÇ£Â∞±Áõ¥Êé•Âª∫‰∏Ä‰∏™ 1000 Â§ßÂ∞èÁöÑÂ∞èÊ†πÂ†ÜÔºåÁÑ∂ÂêéÈÅçÂéÜÔºåÂè™Ë¶ÅÂèëÁé∞ÂêéÈù¢ÁöÑÊï∞ÊØîÂ∞èÊ†πÂ†ÜÁöÑÊ†πËäÇÁÇπÂ§ßÔºåÂ∞±ÊääÊ†πËäÇÁÇπÂíåËØ•Êï∞‰∫§Êç¢ÔºåÈáçÊñ∞Ë∞ÉÊï¥Â†ÜÔºåÈÅçÂéÜÂÆå‰πãÂêéÔºåÂ†Ü‰∏≠ÁöÑÊï∞Ëá™ÁÑ∂Â∞±ÊòØÊúÄÂ§ßÁöÑ 1000 ‰∏™Êï∞‰∫ÜÔºõ ÂΩìÁÑ∂ËÉΩ‰ΩøÁî®Â†ÜÊéíÂ∫èÁöÑÂâçÊèêÊòØÂÜÖÂ≠ò‰∏≠Ë¶ÅËÉΩÂ§üÊîæÂæó‰∏ãËøô‰∏™ KÔºåÂ¶ÇÊûúÊîæ‰∏ç‰∏ãÂë¢ÔºüÈÇ£Â∞±Âè™ËÉΩÂ§ñÈÉ®ÊéíÂ∫è‰∫ÜÔºåÊéíÂ∫èÂÆå‰πãÂêéÊãøÂà∞Á¨¨ K Â§ßÁöÑÊï∞Âç≥ÂèØÔºåÂΩìÁÑ∂ÊéíÂ∫èÂâçÂèØ‰ª•ÂíåÊñπÊ≥ï‰∏ÄÊê≠ÈÖç‰∏Ä‰∏ã„ÄÇ Êµ∑ÈáèÊï∞ÊçÆÊ±Ç‰∏≠‰ΩçÊï∞ÔºåÂ¶Ç‰ΩïËß£ÂÜ≥Ôºü ÂèØ‰ª•ÊåâÁÖß‰ΩçÊù•ÂàÜÁªÑÔºåÊØîÂ¶ÇËØ¥ÊúÄÈ´ò‰ΩçÊòØ0ÁöÑ‰∏ÄÁªÑÔºåÊòØ 1 ÁöÑ‰∏ÄÁªÑÔºåËøôÊ†∑ÂèØ‰ª•ÁªüËÆ°Âá∫ÈÇ£‰∏ÄÁªÑÊõ¥Â∞ëÔºåËøôÊ†∑Â∞±ÊéíÈô§‰∫Ü‰∏ÄÂ§ßÂçäÔºåÁÑ∂ÂêéÁªßÁª≠ËøôÊ†∑ÊéíÊü•ÔºåÊúÄÁªàÁº©Â∞èËåÉÂõ¥ÂêéÁõ¥Êé•ÂÜÖÈÉ®ÊéíÂ∫è„ÄÇ Áõ¥Êé•Â§ñÈÉ®ÊéíÂ∫èÔºåÁÑ∂ÂêéÂèñ‰∏≠Èó¥ÂÄºÔºåÊúÄÁ¨®ÁöÑÊñπÊ≥ï„ÄÇ Âú®Êµ∑ÈáèÊï∞ÊçÆ‰∏≠ÊâæÂá∫Âá∫Áé∞È¢ëÁéáÊúÄÈ´òÁöÑÂâçk‰∏™Êï∞Ôºå‰æãÂ¶ÇÔºåÂú®ÊêúÁ¥¢ÂºïÊìé‰∏≠ÔºåÁªüËÆ°ÊêúÁ¥¢ÊúÄÁÉ≠Èó®ÁöÑ10‰∏™Êü•ËØ¢ËØçÔºõÂú®Ê≠åÊõ≤Â∫ì‰∏≠ÁªüËÆ°‰∏ãËΩΩÊúÄÈ´òÁöÑÂâç10È¶ñÊ≠åÁ≠â„ÄÇ Â¶ÇÊûúÈáçÂ§çÁéáÂæàÈ´òÔºåÂèØ‰ª•ÈááÁî®ÂâçÁºÄÊ†ëÔºåÂõ†‰∏∫ trie Ê†ëÈÄÇÁî®‰∫éÊï∞ÊçÆÈáèÂ§ßÔºåÈáçÂ§çÂ§öÔºå‰ΩÜÊòØÊï∞ÊçÆÁßçÁ±ªÂ∞èÂøÖÈ°ªÂæóÂèØ‰ª•ÊîæÂÖ•ÂÜÖÂ≠òÔºõ ÊåâÁÖß hash ËøõË°åÂàÜÁªÑÔºåËøôÊ†∑Â∞±ËÉΩÈÅøÂÖçÁõ∏ÂêåÁöÑÊï∞ÂàÜÂà∞‰∏çÂêåÂå∫ÂüüÂéª‰∫ÜÔºåÂØºËá¥‰∏çÂ•ΩÁªüËÆ°„ÄÇhash ÂàÜÁªÑÂÆåÊØïÂêéÔºåÁÑ∂ÂêéÁî®ÂâçÁºÄÊ†ë ÊàñËÄÖ hashmap Êù•ËÆ°ÁÆóÊØè‰∏™ÁªÑÁöÑÂâç k ‰∏™È¢ëÁéáÊúÄÈ´òÁöÑÊï∞ÔºåÊúÄÂêéÂØπÂêÑ‰∏™ÁªÑÁöÑÂâç k ‰∏™Êï∞ËøõË°åÁªüËÆ°Âç≥ÂèØ„ÄÇ Áªô40‰∫ø‰∏™‰∏çÈáçÂ§çÁöÑunsigned intÁöÑÊï¥Êï∞ÔºåÊ≤°ÊéíËøáÂ∫èÁöÑÔºåÁÑ∂ÂêéÂÜçÁªô‰∏Ä‰∏™Êï∞ÔºåÂ¶Ç‰ΩïÂø´ÈÄüÂà§Êñ≠Ëøô‰∏™Êï∞ÊòØÂê¶Âú®ÈÇ£40‰∫ø‰∏™Êï∞ÂΩì‰∏≠Ôºü ËøôÈáåÊàë‰ª¨Êää40‰∫ø‰∏™Êï∞‰∏≠ÁöÑÊØè‰∏Ä‰∏™Áî®32‰ΩçÁöÑ‰∫åËøõÂà∂Êù•Ë°®Á§∫ÂÅáËÆæËøô40‰∫ø‰∏™Êï∞ÂºÄÂßãÊîæÂú®‰∏Ä‰∏™Êñá‰ª∂‰∏≠„ÄÇ ÁÑ∂ÂêéÂ∞ÜËøô40‰∫ø‰∏™Êï∞ÂàÜÊàê‰∏§Á±ª: 1.ÊúÄÈ´ò‰Ωç‰∏∫0 2.ÊúÄÈ´ò‰Ωç‰∏∫1 Âπ∂Â∞ÜËøô‰∏§Á±ªÂàÜÂà´ÂÜôÂÖ•Âà∞‰∏§‰∏™Êñá‰ª∂‰∏≠ÔºåÂÖ∂‰∏≠‰∏Ä‰∏™Êñá‰ª∂‰∏≠Êï∞ÁöÑ‰∏™Êï∞&lt;=20‰∫øÔºåËÄåÂè¶‰∏Ä‰∏™&gt;=20‰∫øÔºàËøôÁõ∏ÂΩì‰∫éÊäòÂçä‰∫ÜÔºâÔºõ‰∏éË¶ÅÊü•ÊâæÁöÑÊï∞ÁöÑÊúÄÈ´ò‰ΩçÊØîËæÉÂπ∂Êé•ÁùÄËøõÂÖ•Áõ∏Â∫îÁöÑÊñá‰ª∂ÂÜçÊü•Êâæ ÂÜçÁÑ∂ÂêéÊääËøô‰∏™Êñá‰ª∂‰∏∫ÂèàÂàÜÊàê‰∏§Á±ª: 1.Ê¨°ÊúÄÈ´ò‰Ωç‰∏∫0 2.Ê¨°ÊúÄÈ´ò‰Ωç‰∏∫1 Âπ∂Â∞ÜËøô‰∏§Á±ªÂàÜÂà´ÂÜôÂÖ•Âà∞‰∏§‰∏™Êñá‰ª∂‰∏≠ÔºåÂÖ∂‰∏≠‰∏Ä‰∏™Êñá‰ª∂‰∏≠Êï∞ÁöÑ‰∏™Êï∞&lt;=10‰∫øÔºåËÄåÂè¶‰∏Ä‰∏™&gt;=10‰∫øÔºàËøôÁõ∏ÂΩì‰∫éÊäòÂçä‰∫ÜÔºâÔºõ ‰∏éË¶ÅÊü•ÊâæÁöÑÊï∞ÁöÑÊ¨°ÊúÄÈ´ò‰ΩçÊØîËæÉÂπ∂Êé•ÁùÄËøõÂÖ•Áõ∏Â∫îÁöÑÊñá‰ª∂ÂÜçÊü•Êâæ„ÄÇ ‚Ä¶‚Ä¶. ‰ª•Ê≠§Á±ªÊé®ÔºåÂ∞±ÂèØ‰ª•ÊâæÂà∞‰∫Ü,ËÄå‰∏îÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(logn)„ÄÇ Â§ßÊ¶ÇÁªüËÆ°‰∏Ä‰∏ãÔºåÊµ∑ÈáèÊï∞ÊçÆÊ±Ç TopK ÁöÑÊôÆÈÅçÊñπÊ≥ïÔºö ÊúÄÂø´ÁöÑ‰∏çÈúÄË¶ÅÊéíÂ∫èÂ∞±ËÉΩÊéíÈô§‰∏ÄÂ§ßÂ†ÜÁöÑÊï∞ÊçÆÁöÑÊñπÊ≥ïÂ∞±ÊòØÁúã ‚Äú‰Ωç‚ÄùÔºåÊØîÂ¶ÇÊúÄÈ´ò‰Ωç‰∏∫ 0 ÁöÑÂàÜ‰∏ÄÂùóÔºå‰∏∫ 1 ÁöÑÂàÜ‰∏ÄÂùóÔºåËøôÊ†∑ËøÖÈÄüÂ∞±ÂàÜÂá∫‰∏ÄÂ§ßÂùó‰∏çÈúÄË¶ÅÁöÑ‰∫ÜÔºåÂ∞§ÂÖ∂ÈÄÇÂêàÊâæ‰∏≠‰ΩçÊï∞ÔºåÁ≠âÂàÜÁöÑÂ∑Æ‰∏çÂ§ö‰∫ÜÂ∞±ÂèØ‰ª•ËøõË°åÂÜÖÈÉ®ÊéíÂ∫è‰∫Ü„ÄÇ Â†ÜÊéíÂ∫èÔºåÈÄÇÁî®‰∫éÊ±ÇÊµ∑ÈáèÊï∞ÊçÆÊúÄÂ§ß K or ÊúÄÂ∞èÁöÑ K ‰∏™Êï∞Ôºõ ÂàÜÊ≤ªhashÔºåÈÄÇÁî®‰∫éÈÇ£‰∫õÂÜÖÂ≠òÂæàÂ∞èÔºåÊï∞ÊçÆÂæàÂ§ßÔºå‰ΩÜÊòØÂèàÊÉ≥Ê±ÇÊúÄÂ§ßÁöÑ K ‰∏™‰ºóÊï∞ÁöÑÈóÆÈ¢òÔºåÂèØ‰ª•ÂÖà hash Âà∞ÂæàÂ§ö‰∏™ÁªÑÔºåÁÑ∂ÂêéÂú®ÁªÑÂÜÖÈÉ®‰ΩøÁî® hashmap ÊàñËÄÖ ÂâçÁºÄÊ†ë „ÄågoogleÁ≠âÂ≠óÁ¨¶„ÄçÔºåÂèñÂà∞ÁªÑÂÜÖÂâç K ‰∏™‰ºóÊï∞ÔºåÊúÄÂêéËøõË°åÁªÑÈó¥ÊØîËæÉ‰πÖokay‰∫ÜÔºõ ÂΩìÁÑ∂‰∏çËÉΩÂøò‰∫Ü‰∏áËÉΩÊ≥ïÔºåÈÇ£Â∞±ÊòØÂ§ñÈÉ®ÊéíÂ∫èÔºåÁÑ∂ÂêéÂÜçËøõË°åÁõ∏Â∫îÁöÑÂ§ÑÁêÜ„ÄÇ ÊúÄÂêéÁöÑÊúÄÂêéÔºåËÆ©Êàë‰ª¨ÂÜçÊù•ÂÅö‰∏™ÈôÑÂä†È¢òÔºö ÂÖàÊù•ÁúãÂá†‰∏™ÊØîËæÉÂ∏∏ËßÅÁöÑ‰æãÂ≠ê Â≠óÂ§ÑÁêÜËΩØ‰ª∂‰∏≠ÔºåÈúÄË¶ÅÊ£ÄÊü•‰∏Ä‰∏™Ëã±ËØ≠ÂçïËØçÊòØÂê¶ÊãºÂÜôÊ≠£Á°Æ Âú® FBIÔºå‰∏Ä‰∏™Â´åÁñë‰∫∫ÁöÑÂêçÂ≠óÊòØÂê¶Â∑≤ÁªèÂú®Â´åÁñëÂêçÂçï‰∏ä Âú®ÁΩëÁªúÁà¨Ëô´ÈáåÔºå‰∏Ä‰∏™ÁΩëÂùÄÊòØÂê¶Ë¢´ËÆøÈóÆËøá yahoo, gmailÁ≠âÈÇÆÁÆ±ÂûÉÂúæÈÇÆ‰ª∂ËøáÊª§ÂäüËÉΩ ËøôÂá†‰∏™‰æãÂ≠êÊúâ‰∏Ä‰∏™ÂÖ±ÂêåÁöÑÁâπÁÇπÔºö Â¶Ç‰ΩïÂà§Êñ≠‰∏Ä‰∏™ÂÖÉÁ¥†ÊòØÂê¶Â≠òÂú®‰∏Ä‰∏™ÈõÜÂêà‰∏≠Ôºü ËøôÈáåÂøÖÈ°ª‰ªãÁªç‰∏Ä‰∏ã bitmap Ëøô‰∏™ÊñπÊ≥ï‰∫ÜÔºå‰æãÂ¶ÇÊàëË¶Å‰ªéÊµ∑ÈáèÊï∞ÊçÆ‰∏≠Êâæ‰∏Ä‰∏™Êï∞ÊòØÂê¶Âá∫Áé∞ËøáÔºåÂ∞±ÂèØ‰ª•Áî®‰ΩçÂõæÁöÑÊÄùË∑ØÂéªÂÅöÔºåÂ¶ÇÊûúÊï∞Â≠óÊòØ 7 ÔºåÈÇ£Â∞±Âú®Á¨¨ 7 ‰Ωç ÁΩÆ 1ÔºåÂ¶ÇÊûúËØ•‰ΩçÁΩÆÂ∑≤ÁªèÊòØ 1 ‰∫ÜÔºåÈÇ£Â∞±‰ª£Ë°®Âá∫Áé∞ËøáÔºå‰∏çÁî®Êõ¥Êîπ„ÄÇ Â¶ÇÊûúÈóÆÈ¢òÂèò‰∏∫‰ªéÊµ∑ÈáèÊï∞ÊçÆ‰∏≠Êâæ‰∏Ä‰∏™Êï∞ÊòØÂê¶Âá∫Áé∞Ëøá‰∏ÄÊ¨°ÔºåÈÇ£Ëøô‰∏™Êó∂ÂÄôÂ∞±ÂæóÁî® 2 bitmap Êù•Ë°®Á§∫‰∫ÜÔºå‰πüÂ∞±ÊòØ‰∏Ä‰∏™Êï∞Â¶ÇÊûúÂá∫Áé∞‰∏ÄÊ¨°ÔºåÁΩÆ‰∏∫ 01 ÔºåÂá∫Áé∞Ëøá‰∏§Ê¨°ÔºåÁΩÆ‰∏∫ 10ÔºåÁÑ∂ÂêéÂÜçÂá∫Áé∞ÔºåÈÉΩÊòØ10ÔºåËøô‰∏™Êó∂ÂÄôÂ¶ÇÊûúÊàë‰ª¨Âè™Áî®‰∏Ä‰ΩçÔºåÊòØ‰∏çËÉΩË°®Á§∫Âá∫Âá∫Áé∞ÁöÑÊ¨°Êï∞ÁöÑ„ÄÇ Ëá≥‰∫éÊàë‰ª¨Â∏∏ËØ¥ÁöÑÂ∏ÉÈöÜËøáÊª§Âô®ÔºåÂÖ∂ÂÆû‰πüÂ∞±ÊòØÂú®bitmap‰πãÂâçËøõË°å‰∏Ä‰∏™hashÔºå‰æãÂ¶ÇÂ∞ÜÂ≠óÁ¨¶‰∏≤ËøõË°åhashÊàêÊï∞ÁªÑÔºåÁÑ∂Âêé‰ΩøÁî®‰ΩçÂõæÔºåËß£ÂÜ≥ËøôÁ±ªÈóÆÈ¢ò„ÄÇ 2020.3.18 09:28 - 11:12 „Äå105 ÂàÜÈíü„Äç ËÖæËÆØ‰∏ÄÈù¢ËßÜÈ¢ëÈù¢„ÄÇÊú¨Ê¨°Èù¢ËØïÂàÜ‰∏∫‰∏§Â§ßÂùóÔºö ÁâõÂÆ¢ÁΩëÂÜô‰ª£Á†Å „ÄåLeetCode easyÈöæÂ∫¶„ÄçÔºåËøô‰∏™Èò∂ÊÆµÂ§ßÊ¶Ç 5-10 ÂàÜÈíü 123456789101112131415161718192021ÁøªËΩ¨Êï∞ÂàóÂ∞èQÂÆö‰πâ‰∫Ü‰∏ÄÁßçÊï∞ÂàóÁß∞‰∏∫ÁøªËΩ¨Êï∞Âàó:ÁªôÂÆöÊï¥Êï∞nÂíåm, Êª°Ë∂≥nËÉΩË¢´2mÊï¥Èô§„ÄÇÂØπ‰∫é‰∏Ä‰∏≤ËøûÁª≠ÈÄíÂ¢ûÊï¥Êï∞Êï∞Âàó1, 2, 3, 4..., ÊØèÈöîm‰∏™Á¨¶Âè∑ÁøªËΩ¨‰∏ÄÊ¨°, ÊúÄÂàùÁ¨¶Âè∑‰∏∫'-';„ÄÇ‰æãÂ¶Çn = 8, m = 2, Êï∞ÂàóÂ∞±ÊòØ: -1, -2, +3, +4, -5, -6, +7, +8.ËÄån = 4, m = 1, Êï∞ÂàóÂ∞±ÊòØ: -1, +2, -3, + 4.Â∞èQÁé∞Âú®Â∏åÊúõ‰Ω†ËÉΩÂ∏Æ‰ªñÁÆóÁÆóÂâçnÈ°πÂíå‰∏∫Â§öÂ∞ë„ÄÇËæìÂÖ•ÊèèËø∞ËæìÂÖ•ÂåÖÊã¨‰∏§‰∏™Êï¥Êï∞nÂíåm(2 &lt;= n &lt;= 109, 1 &lt;= m), Âπ∂‰∏îÊª°Ë∂≥nËÉΩË¢´2mÊï¥Èô§„ÄÇËæìÂá∫ÊèèËø∞ËæìÂá∫‰∏Ä‰∏™Êï¥Êï∞, Ë°®Á§∫ÂâçnÈ°πÂíå„ÄÇÁ§∫‰æã1ËæìÂÖ•8 2ËæìÂá∫8 Ê≠£ÂºèËøõÂÖ•Èù¢ËØï „Äå100ÂàÜÈíü„Äç ËÖæËÆØÁúãÊù•ÁöÑÁ°ÆÂÖ®ÈÉ®ÊòØ c++ÔºåÈù¢ËØïÂÆò‰πüÊòØËØ¥Âü∫Êú¨‰∏äÈÉΩÊòØ c++ÔºåÊ≤°Êúâ‰∏ìÈó®Êêû java ÁöÑÁªÑÔºåÊâÄ‰ª•Â§ßÂÆ∂ java ÊäïËÖæËÆØËøòÊòØÂä°ÂøÖÊÖéÈáçÔºåÊúÄÂºÄÂßãÈóÆÊàëÁöÑÊäÄÊúØÊ†àÊòØ‰ªÄ‰πàÔºåc++ÊòØÂê¶‰∫ÜËß£ÔºåÁî®ÁöÑÊØîËæÉÂ§öÔºüÂæóÁü•ÊàëËØ¥Âü∫Êú¨Ê≤°ÂíãÁî®Ëøá‰πãÂêéÔºåÂ∞±ÂºÄÂßãÂ∞ùËØïÈóÆËÆ°ÁÆóÊú∫ÁΩëÁªúÊñπÈù¢ÁöÑÈóÆÈ¢ò„ÄÇ ÈóÆÁöÑÂæàÊ∑±ÂÖ•ÔºåÊØîÂ¶ÇËØ¥‰∏âÊ¨°Êè°ÊâãÂõõÊ¨°Êå•ÊâãÔºåÂÆ¢Êà∑Á´ØÊúçÂä°Âô®Á´ØÂêÑËá™ÁöÑÁä∂ÊÄÅÊòØ‰ªÄ‰πàÔºåÂØπÊï¥‰∏™Âª∫Á´ãËøûÊé•ÂíåÂÖ≥Èó≠ËøûÊé•ÁöÑÂÖ∑‰ΩìÊµÅÁ®ãÊòØ‰ªÄ‰πàÔºåÊ∑±ÂÖ•Âà∞ OSI Ê®°ÂûãÂéªËÆ≤Ôºõ Ëøô‰∏™ÊàëÂú®‰∏äÈù¢Â∑≤ÁªèËØ¶ÁªÜËØ¥Ëøá‰∫Ü‚Ä¶ ÁÑ∂Âêé‰∏ªË¶ÅÈóÆÁöÑÊòØ Socket ÁºñÁ®ãÔºåËÆ≤Â•óÊé•Â≠óÁºñÁ®ãÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÊµÅÁ®ãÔºå‰ª£Á†ÅÂ¶Ç‰ΩïÂÜôÔºåÂ¶Ç‰ΩïÂÆûÁé∞Á±ª‰ºº‰∫é Nginx ÁöÑÂ§öÊúçÂä°Âô®ÁöÑ Socket ÁºñÁ®ãÔºõ ÁÑ∂ÂêéË∞àÂà∞ select„ÄÅepollÁ≠âÁõ∏ÂÖ≥ c++ ÁöÑÁü•ËØÜÔºåÊàëÊòØÂú® java Â±ÇÈù¢ÂéªËÆ≤ÁöÑÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑ „ÄåNIO„ÄçÔºõ ‚Äã ÂòøÂòøÂòøÔºåËøô‰∏™Ê≤°ÈóÆÈ¢ò‰∫ÜÔºåÂèØ‰ª•ÁúãÊàëÁöÑÊúÄÊñ∞ÁöÑÊñáÁ´† ‚Äî„ÄäÈõ∂Êã∑Ë¥ùÂèäÂÖ∂Âë®Ëæπ„Äã ÂÜçËÄÖÂ∞±ÊòØËÅäÂà∞Êï∞ÊçÆÂ∫ìÔºåËøô‰∏™ÊòØÂøÖÈóÆÁöÑÔºåÈóÆÊàëÁ¥¢ÂºïÂ¶Ç‰ΩïÂª∫Á´ã„ÄÅÂ¶Ç‰Ωï‰ºòÂåñÁ¥¢ÂºïÔºåÁÑ∂ÂêéÊòØ‰∏Ä‰∫õÂÖ∑‰ΩìÈóÆÈ¢òÂØπÁ¥¢ÂºïÁöÑÂàÜÊûêÔºõ Áî® key or index Âª∫Á´ãÁ¥¢ÂºïÔºå‰ºòÂåñÁ¥¢ÂºïÁöÑÊñπÊ≥ïÔºöÂ∞ΩÈáèÂ§çÁî®Á¥¢ÂºïÔºåÂà©Áî®Â•ΩÊúÄÂ∑¶ÂâçÁºÄÂíåÁ¥¢Âºï‰∏ãÊé®ÂéüÂàôÔºåÂ∞ΩÈáèÂáèÂ∞ëÂõûË°®Ê¨°Êï∞ÔºåÂà©Áî®Ë¶ÜÁõñÁ¥¢Âºï„ÄÇ ÁÑ∂ÂêéË∞àÂà∞‰∫ãÂä°ÁöÑÂõõ‰∏™ÁâπÊÄßÔºåÂ¶Ç‰ΩïÂÆûÁé∞ÂéüÂ≠êÊÄß„ÄÅÈöîÁ¶ªÊÄß„ÄÅ‰∏ÄËá¥ÊÄß„ÄÅÊåÅ‰πÖÊÄßÁöÑÔºåÂÜÖÈÉ®Êú∫Âà∂ÂÖ∑‰ΩìÂ¶Ç‰ΩïÂÆûÁé∞Ôºõ ÂéüÂ≠êÊÄßÔºöÂà©Áî® undologÔºåÂõûÊªöÊú∫Âà∂ÔºåÂÆåÊàêË¶Å‰πàÂÖ®ÈÉ®ÊàêÂäüÔºåË¶Å‰πàÂÖ®ÈÉ®Â§±Ë¥•Ôºõ ÈöîÁ¶ªÊÄßÔºö‰∏ªË¶ÅÊòØÈù†‰∏ÄËá¥ÊÄßËßÜÂõæ+ÂΩìÂâçË°åÁöÑ row_id_transactionÔºåÊù•ÂÆåÊàêÁöÑ„ÄÇ ‰∏ÄËá¥ÊÄßÔºö‰∏ªË¶ÅÈù†Âä†ÈîÅÈò≤Ê≠¢‰∫ãÂä°ÂÜ≤Á™ÅÔºå‰∏ÄËá¥ÊÄßÊòØÂè¶Â§ñ‰∏â‰∏™ÁöÑÈ°∂Â±ÇÔºåÂè™Ë¶Å‰ªñ‰ª¨‰∏âÂÆåÊàê‰∫Ü‰ªñÊâçÊúâÂèØËÉΩÂÆåÊàêÔºåËøòÊúâmvccÁöÑÂä†ÊåÅÔºå‰ª•Âèä undolog„ÄÅredolog„ÄÇ ÊåÅ‰πÖÊÄßÔºöredolog‰øùËØÅcrash-safeÔºåbin-log‰øùËØÅÂΩíÊ°£„ÄÇ ÂÄüÊ≠§Ë∞àÂà∞ undolog„ÄÅredolog„ÄÅbinlogÔºå‰ª•Âèä mvcc ÁöÑÂÆûÁé∞Ôºõ Áï• Redolog Âà∞Â∫ïÊòØ‰øùÂ≠òÂú®Á£ÅÁõò‰∏≠ÁöÑËøòÊòØÂú®ÂÜÖÂ≠ò‰∏≠Ôºü redo logÂåÖÊã¨‰∏§ÈÉ®ÂàÜÔºö‰∏ÄÊòØÂÜÖÂ≠ò‰∏≠ÁöÑÊó•ÂøóÁºìÂÜ≤(redo log buffer)ÔºåËØ•ÈÉ®ÂàÜÊó•ÂøóÊòØÊòìÂ§±ÊÄßÁöÑÔºõ‰∫åÊòØÁ£ÅÁõò‰∏äÁöÑÈáçÂÅöÊó•ÂøóÊñá‰ª∂(redo log file)ÔºåËØ•ÈÉ®ÂàÜÊó•ÂøóÊòØÊåÅ‰πÖÁöÑ„ÄÇ ËØ¶ÁªÜÂàÜÊûê Mysql ‰∏≠ÁöÑ‰∏â‰∏™Êó•ÂøóÔºöredolog„ÄÅundolog„ÄÅbinlog Ë∞à‰∏ÄË∞à mysql ÁöÑËøêË°åÊú∫Âà∂ÔºåÊï¥‰∏™ËøêË°åËøáÁ®ãÊòØÊÄéÊ†∑ÁöÑÔºåÂ¶Ç‰ΩïÂ§ÑÁêÜÁöÑÔºõ Ëøô‰∏™ÁÆÄÂçïÔºåÁï• mysqlÁöÑÁ¥¢ÂºïÂÆûÁé∞ÔºåB+ÁöÑ‰ºòÁÇπÁ≠âÁ≠âÔºõ ÁÆÄÂçïÔºåÁï• ÂÖ®Á®ãË∞à ‰∏ÄËá¥ÊÄßÈóÆÈ¢ò Ë∞àÁöÑÂæàÂ§öÔºåÂåÖÊã¨‰∫Ü mysql ‰∏ª‰ªéÂ§çÂà∂ÁöÑ‰∏ÄËá¥ÊÄßÂ¶Ç‰Ωï‰øùËØÅÔºåÊàëËØ¥‰∏çÂ§™Ê∏ÖÊ•öÔºå‰ΩÜÊòØÂÄüÊ≠§ËÆ≤‰∫Ü kafka ‰∏≠ÁöÑÈ´òÂèØÁî®Êú∫Âà∂„ÄåISR„ÄçÔºå‰ª•Âèä kafka‰∏≠ÁöÑ ack Êú∫Âà∂Âíå kafka ‰∏≠ÁöÑÊ∂àÊÅØËØ≠‰πâ„ÄåÂ¶Ç‰Ωï‰øùËØÅÊï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄß„ÄçÔºõ Mysql ‰øùËØÅ‰∏ª‰ªé‰∏ÄËá¥ÊÄßÔºö ‰∏ªÂ∫ìÊé•Êî∂Âà∞ÂÆ¢Êà∑Á´ØÁöÑÊõ¥Êñ∞ËØ∑Ê±ÇÂêéÔºåÊâßË°åÂÜÖÈÉ®‰∫ãÂä°ÁöÑÊõ¥Êñ∞ÈÄªËæëÔºåÂêåÊó∂ÂÜôbinlog„ÄÇ Â§áÂ∫ìBË∑ü‰∏ªÂ∫ìA‰πãÈó¥Áª¥ÊåÅ‰∫Ü‰∏Ä‰∏™ÈïøËøûÊé•„ÄÇ‰∏ªÂ∫ìAÂÜÖÈÉ®Êúâ‰∏Ä‰∏™Á∫øÁ®ãÔºå‰∏ìÈó®Áî®‰∫éÊúçÂä°Â§áÂ∫ìBÁöÑËøô‰∏™ÈïøËøûÊé•„ÄÇ‰∏Ä‰∏™‰∫ãÂä°Êó•ÂøóÂêåÊ≠•ÁöÑÂÆåÊï¥ËøáÁ®ãÊòØËøôÊ†∑ÁöÑÔºö Âú®Â§áÂ∫ìB‰∏äÈÄöËøáchange masterÂëΩ‰ª§ÔºåËÆæÁΩÆ‰∏ªÂ∫ìAÁöÑIP„ÄÅÁ´ØÂè£„ÄÅÁî®Êà∑Âêç„ÄÅÂØÜÁ†ÅÔºå‰ª•ÂèäË¶Å‰ªéÂì™‰∏™‰ΩçÁΩÆÂºÄÂßãËØ∑Ê±ÇbinlogÔºåËøô‰∏™‰ΩçÁΩÆÂåÖÂê´Êñá‰ª∂ÂêçÂíåÊó•ÂøóÂÅèÁßªÈáè„ÄÇ Âú®Â§áÂ∫ìB‰∏äÊâßË°åstart slaveÂëΩ‰ª§ÔºåËøôÊó∂ÂÄôÂ§áÂ∫ì‰ºöÂêØÂä®‰∏§‰∏™Á∫øÁ®ãÔºåÂ∞±ÊòØÂõæ‰∏≠ÁöÑio_threadÂíåsql_thread„ÄÇÂÖ∂‰∏≠io_threadË¥üË¥£‰∏é‰∏ªÂ∫ìÂª∫Á´ãËøûÊé•„ÄÇ ‰∏ªÂ∫ìAÊ†°È™åÂÆåÁî®Êà∑Âêç„ÄÅÂØÜÁ†ÅÂêéÔºåÂºÄÂßãÊåâÁÖßÂ§áÂ∫ìB‰º†ËøáÊù•ÁöÑ‰ΩçÁΩÆÔºå‰ªéÊú¨Âú∞ËØªÂèñbinlogÔºåÂèëÁªôB„ÄÇ Â§áÂ∫ìBÊãøÂà∞binlogÂêéÔºåÂÜôÂà∞Êú¨Âú∞Êñá‰ª∂ÔºåÁß∞‰∏∫‰∏≠ËΩ¨Êó•ÂøóÔºàrelay logÔºâ„ÄÇ sql_threadËØªÂèñ‰∏≠ËΩ¨Êó•ÂøóÔºåËß£ÊûêÂá∫Êó•ÂøóÈáåÁöÑÂëΩ‰ª§ÔºåÂπ∂ÊâßË°å„ÄÇ ËøôÈáåÈúÄË¶ÅËØ¥ÊòéÔºåÂêéÊù•Áî±‰∫éÂ§öÁ∫øÁ®ãÂ§çÂà∂ÊñπÊ°àÁöÑÂºïÂÖ•Ôºåsql_threadÊºîÂåñÊàê‰∏∫‰∫ÜÂ§ö‰∏™Á∫øÁ®ã„ÄÇ Âõ†‰∏∫ËØ≠Ë®Ä‰∏äËøòÊòØÊúâÂæàÂ§öÂå∫Âà´ÁöÑÔºåÂú®ÂêéÈù¢ÂèàÈóÆ‰∫ÜÂá†‰∏™ÊúâÂÖ≥‰∫é c++ ÁöÑÈóÆÈ¢òÔºåÁ≠îÂæó‰∏çÊòØÂæàÂ•Ω ËôöÂáΩÊï∞ÊòØ‰ªÄ‰πà „ÄåÊ≤°Á≠î‰∏äÊù•„ÄçÔºõ Áï•„ÄÇ Âõ†‰∏∫ÁúãÂà∞ÊàëÂçöÂÆ¢Êúâ‰∫õÊªëÂä®Á™óÂè£ÁÆóÊ≥ïÔºåÂ∞±ÈóÆ‰∫Ü tcp ÊªëÂä®Á™óÂè£Â∫ïÂ±ÇÁöÑ‰ª£Á†ÅÂÆûÁé∞Ôºõ ËøõÁ®ã„ÄÅÁ∫øÁ®ã„ÄÅÂçèÁ®ãÁöÑÂå∫Âà´ÔºåÊàëËØ¥ÂÆå‰πãÂêéÔºåÂèàÂª∂‰º∏Âà∞Á∫øÁ®ãÊòØÂ¶Ç‰Ωï‰øùËØÅÂêåÊ≠•ÁöÑÔºåÂÄüÊ≠§Ë∞àÂà∞‰∫ÜÁ∫øÁ®ãÂÆâÂÖ®ÔºåÁÑ∂ÂêéÊàëËá™Â∑±ÊãìÂ±ï‰∫Ü synchronized„ÄåËØ¶ÁªÜ‰ªãÁªç‰∫ÜÈîÅÂçáÁ∫ßËøáÁ®ã„Äç„ÄÅlock‰ΩìÁ≥ª„ÄÅCAS ÁöÑÂÆûÁé∞‰ª•Âèä final ÂÖ≥ÈîÆÂ≠óÂíå ThreadLocalÔºõ ÂçèÁ®ãÁöÑÂ∫îÁî®Âú∫ÊôØ‰∏ªË¶ÅÂú®‰∫é ÔºöI/O ÂØÜÈõÜÂûã‰ªªÂä°„ÄÇ Ëøô‰∏ÄÁÇπ‰∏éÂ§öÁ∫øÁ®ãÊúâ‰∫õÁ±ª‰ººÔºå‰ΩÜÂçèÁ®ãË∞ÉÁî®ÊòØÂú®‰∏Ä‰∏™Á∫øÁ®ãÂÜÖËøõË°åÁöÑÔºåÊòØÂçïÁ∫øÁ®ãÔºåÂàáÊç¢ÁöÑÂºÄÈîÄÂ∞èÔºåÂõ†Ê≠§ÊïàÁéá‰∏äÁï•È´ò‰∫éÂ§öÁ∫øÁ®ã„ÄÇÂΩìÁ®ãÂ∫èÂú®ÊâßË°å I/O Êó∂Êìç‰ΩúÊó∂ÔºåCPU ÊòØÁ©∫Èó≤ÁöÑÔºåÊ≠§Êó∂ÂèØ‰ª•ÂÖÖÂàÜÂà©Áî® CPU ÁöÑÊó∂Èó¥ÁâáÊù•Â§ÑÁêÜÂÖ∂‰ªñ‰ªªÂä°„ÄÇÂú®ÂçïÁ∫øÁ®ã‰∏≠Ôºå‰∏Ä‰∏™ÂáΩÊï∞Ë∞ÉÁî®Ôºå‰∏ÄËà¨ÊòØ‰ªéÂáΩÊï∞ÁöÑÁ¨¨‰∏ÄË°å‰ª£Á†ÅÂºÄÂßãÊâßË°åÔºåÁªìÊùü‰∫é return ËØ≠Âè•„ÄÅÂºÇÂ∏∏ÊàñËÄÖÂáΩÊï∞ÊâßË°åÔºà‰πüÂèØ‰ª•ËÆ§‰∏∫ÊòØÈöêÂºèÂú∞ËøîÂõû‰∫Ü None Ôºâ„ÄÇ Êúâ‰∫ÜÂçèÁ®ãÔºåÊàë‰ª¨Âú®ÂáΩÊï∞ÁöÑÊâßË°åËøáÁ®ã‰∏≠ÔºåÂ¶ÇÊûúÈÅáÂà∞‰∫ÜËÄóÊó∂ÁöÑ I/O Êìç‰ΩúÔºåÂáΩÊï∞ÂèØ‰ª•‰∏¥Êó∂ËÆ©Âá∫ÊéßÂà∂ÊùÉÔºåËÆ© CPU ÊâßË°åÂÖ∂‰ªñÂáΩÊï∞ÔºåÁ≠â I/O Êìç‰ΩúÊâßË°åÂÆåÊØï‰ª•ÂêéÂÜçÊî∂ÂõûÊéßÂà∂ÊùÉ„ÄÇ ÁÆÄÂçïÊù•ËÆ≤ÂçèÁ®ãÁöÑÂ•ΩÂ§ÑÔºö Ë∑®Âπ≥Âè∞ Ë∑®‰ΩìÁ≥ªÊû∂ÊûÑ Êó†ÈúÄÁ∫øÁ®ã‰∏ä‰∏ãÊñáÂàáÊç¢ÁöÑÂºÄÈîÄ Êó†ÈúÄÂéüÂ≠êÊìç‰ΩúÈîÅÂÆöÂèäÂêåÊ≠•ÁöÑÂºÄÈîÄ Êñπ‰æøÂàáÊç¢ÊéßÂà∂ÊµÅÔºåÁÆÄÂåñÁºñÁ®ãÊ®°Âûã È´òÂπ∂Âèë+È´òÊâ©Â±ïÊÄß+‰ΩéÊàêÊú¨Ôºö‰∏Ä‰∏™CPUÊîØÊåÅ‰∏ä‰∏áÁöÑÂçèÁ®ãÈÉΩ‰∏çÊòØÈóÆÈ¢ò„ÄÇÊâÄ‰ª•ÂæàÈÄÇÂêàÁî®‰∫éÈ´òÂπ∂ÂèëÂ§ÑÁêÜ„ÄÇ Áº∫ÁÇπÔºö Êó†Ê≥ïÂà©Áî®Â§öÊ†∏ËµÑÊ∫êÔºöÂçèÁ®ãÁöÑÊú¨Ë¥®ÊòØ‰∏™ÂçïÁ∫øÁ®ã,ÂÆÉ‰∏çËÉΩÂêåÊó∂Â∞Ü Âçï‰∏™CPU ÁöÑÂ§ö‰∏™Ê†∏Áî®‰∏ä,ÂçèÁ®ãÈúÄË¶ÅÂíåËøõÁ®ãÈÖçÂêàÊâçËÉΩËøêË°åÂú®Â§öCPU‰∏ä.ÂΩìÁÑ∂Êàë‰ª¨Êó•Â∏∏ÊâÄÁºñÂÜôÁöÑÁªùÂ§ßÈÉ®ÂàÜÂ∫îÁî®ÈÉΩÊ≤°ÊúâËøô‰∏™ÂøÖË¶ÅÔºåÈô§ÈùûÊòØcpuÂØÜÈõÜÂûãÂ∫îÁî®„ÄÇ ËøõË°åÈòªÂ°ûÔºàBlockingÔºâÊìç‰ΩúÔºàÂ¶ÇIOÊó∂Ôºâ‰ºöÈòªÂ°ûÊéâÊï¥‰∏™Á®ãÂ∫èÔºöËøô‰∏ÄÁÇπÂíå‰∫ã‰ª∂È©±Âä®‰∏ÄÊ†∑ÔºåÂèØ‰ª•‰ΩøÁî®ÂºÇÊ≠•IOÊìç‰ΩúÊù•Ëß£ÂÜ≥ ÊúÄÂêéÂÜçË¥¥‰∏™ÂõæÊù•ÊÄªÁªì‰∏Ä‰∏ãÔºåÊõ¥Ê∏ÖÊ•öÔºö ‰ΩúËÄÖÔºöÁ®ãÂ∫èÁåøÊùÇË¥ßÈì∫ÈìæÊé•Ôºöhttps://juejin.im/post/5d5df6b35188252ae10bdf42Êù•Ê∫êÔºöÊéòÈáëËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ ËøõË°åÈó¥ÈÄö‰ø° IPC ÊúâÂì™‰∫õÊñπÂºè„ÄåÊàëÂè™ËØ¥‰∫Ü‰ø°Âè∑Èáè„ÄÅÂÖ±‰∫´Âå∫Âüü„ÄÅÁÆ°ÈÅìËøôÂá†‰∏™ÔºåÈù¢ËØïÂÆò‰πüÊ≤°ËøΩÈóÆ„Äç ÁÆ°ÈÅì„ÄÇÁÆ°ÈÅìÁöÑÂÆûË¥®ÊòØ‰∏Ä‰∏™ÂÜÖÊ†∏ÁºìÂÜ≤Âå∫ÔºåËøõÁ®ã‰ª•ÂÖàËøõÂÖàÂá∫ÁöÑÊñπÂºè‰ªéÁºìÂÜ≤Âå∫Â≠òÂèñÊï∞ÊçÆÔºåÁÆ°ÈÅì‰∏ÄÁ´ØÁöÑËøõË°åÈ°∫Â∫èÁöÑÂ∞ÜËøõÁ®ãÊï∞ÊçÆÂÜôÂÖ•ÁºìÂÜ≤Âå∫ÔºåÂè¶‰∏ÄÁ´ØÁöÑËøõÂàôÈ°∫Â∫èÂú∞ËØªÂèñÊï∞ÊçÆÔºåËØ•ÁºìÂÜ≤Âå∫ÂèØ‰ª•ÁúãÂÅö‰∏Ä‰∏™Âæ™ÁéØÈòüÂàóÔºåËØªÂíåÂÜôÁöÑ‰ΩçÁΩÆÈÉΩÊòØËá™Âä®Â¢ûÂä†ÁöÑÔºå‰∏Ä‰∏™Êï∞ÊçÆÂè™ËÉΩË¢´ËØª‰∏ÄÊ¨°ÔºåËØªÂá∫‰ª•ÂêéÂú®ÁºìÂÜ≤Âå∫Â∞±‰∏çÂ§çÂ≠òÂú®‰∫Ü„ÄÇÂΩìÁºìÂÜ≤Âå∫ËØªÁ©∫ÊàñËÄÖÂÜôÊª°Êó∂ÔºåÊúâ‰∏ÄÂÆöÁöÑËßÑÂàôÊéßÂà∂Áõ∏Â∫îÁöÑËØªËøõÁ®ãÊàñÂÜôËøõÁ®ãÊòØÂê¶ËøõÂÖ•Á≠âÂæÖÈòüÂàóÔºåÂΩìÁ©∫ÁöÑÁºìÂÜ≤Âå∫ÊúâÊñ∞Êï∞ÊçÆÂÜôÂÖ•ÊàñÊª°ÁöÑÁºìÂÜ≤Âå∫ÊúâÊï∞ÊçÆËØªÂá∫Êó∂ÔºåÂ∞±Âî§ÈÜíÁ≠âÂæÖÈòüÂàó‰∏≠ÁöÑËøõÁ®ãÁªßÁª≠ËØªÂÜô„ÄÇÁÆ°ÈÅìÊòØ‰∏ÄÁßçÂçäÂèåÂ∑•ÈÄö‰ø°ÊñπÂºèÔºåÊï∞ÊçÆÂè™ËÉΩÂçïÂêëÊµÅÂä®„ÄÇÈúÄË¶ÅËøõË°åÈÄö‰ø°Êó∂ÔºåÈúÄË¶ÅÂª∫Á´ã2‰∏™ÁÆ°ÈÅì„ÄÇ ‰ø°Âè∑Èáè„ÄÇËøõÁ®ã‰πãÈó¥ÈÄö‰ø°ÁöÑÊú∫Âà∂Ôºå‰æãÂ¶Ç Semphore Ôºü ÂÖ±‰∫´ÂÜÖÂ≠ò„ÄÇËøõÁ®ãÁöÑ‰∏çÂêåËôöÊãüÂÜÖÂ≠òÊò†Â∞ÑÂà∞Áî®‰∏Ä‰∏™Áâ©ÁêÜÂÜÖÂ≠ò‰∏äÔºåÂÆûÁé∞ÂÖ±‰∫´„ÄÇ ÂÜÖÂ≠òÊ≥ÑÈú≤ÈóÆÈ¢òÂ¶Ç‰ΩïÊéíÊü•Ôºå‰∏ªË¶ÅÈóÆlinuxÂ¶Ç‰ΩïËøõË°åÊéíÊü•„ÄåÊ≤°Á≠î‰∏äÊù•ÔºåÂ∞±ËØ¥ÂèØ‰ª•Áî®ÂèØËßÜÂåñÁïåÈù¢„Äç ÂÜÖÂ≠òÊ≥ÑÈú≤‰ºöÂèëÁîü‰ªÄ‰πàÊÉÖÂÜµÔºåÁ≥ªÁªü‰ºöÂÅáÊ≠ªÂêóÔºü ÊúÄÂêéË∞à‰∫ÜË∞à‰∏Ä‰∫õÊï∞ÊçÆÁªìÊûÑÂíåÁÆóÊ≥ïÔºö ‰∏§‰∏™Â†ÜÂ¶Ç‰ΩïÂÆûÁé∞ÈòüÂàó„ÄåË≤å‰ººÂ†Ü‰∏çÂ∞±ÊòØ‰ºòÂÖàÁ∫ßÈòüÂàóÂòõ‚Ä¶„ÄçÔºå‰∏§‰∏™ÈòüÂàóÂ¶Ç‰ΩïÂÆûÁé∞Â†ÜÔºõ„ÄåÈù¢ËØïÂÆòË°®Ëø∞‰∏çÊ∏ÖÊ•öÔºåÂèØËÉΩÂ∞±ÊòØÊÉ≥ÊåáÂ†ÜÊ†àÔºüÔºüÔºü„Äç ‰∏§‰∏™Ê†àÂ¶Ç‰ΩïÂÆûÁé∞ÈòüÂàóÔºå‰∏§‰∏™ÈòüÂàóÂ¶Ç‰ΩïÂÆûÁé∞Ê†àÔºõ ÈìæË°®Â¶Ç‰ΩïÊü•ÊâæÊòØÂê¶ÊúâÁéØÔºõ ÈìæË°®Â¶Ç‰ΩïÁ°ÆÂÆöÁéØÁöÑËµ∑ÁÇπÔºõ ‰∏§Êù°ÈìæË°®ÊâæÂÖ¨ÂÖ±Â§ÑÁöÑËµ∑ÁÇπ„ÄÇ ËøòÊúâ‰∏Ä‰∫õÁªÜÊûùÊú´ËäÇÁöÑÈóÆÈ¢òÔºåÂç∞Ë±°Â∑≤Áªè‰∏çÊ∑±‰∫ÜÔºåÂ§ßÊ¶ÇÂ∞±ÊòØËøô‰∫õÂêß„ÄÇ ÊÄªÁªì‰∏Ä‰∏ãÔºöÈù¢ËØïÂÆòÈùûÂ∏∏ÊìÖÈïøÊåñÊéòÈù¢ËØïËÄÖÁöÑ‰ºòÂäøÔºåÂØπÈù¢ËØïËÄÖ‰∏çÂ§™ÊáÇÁöÑÂÖ®ÈÉ®‰∏çÈóÆÔºåÂü∫Êú¨‰∏äÊàë‰ºö‰ªÄ‰πàÂ∞±ÈóÆ‰ªÄ‰πàÔºåÊâÄ‰ª•Â§ßÊ¶ÇÈù¢ËØï‰∫ÜÂçäÂ∞èÊó∂ÂêéÔºåÂ∞±ÂºÄÂßãÂØπÁùÄÊàëÁöÑÂçöÂÆ¢ÈóÆÔºåÊâÄ‰ª•Êï¥‰Ωì‰∏äÁªô‰∫∫ÁöÑÊÑüËßâÊòØÂæàÂ•ΩÁöÑ„ÄÇÂ§ßÂÆ∂Â¶ÇÊûúË¶ÅÈù¢ËÖæËÆØÁöÑËØùÂª∫ËÆÆÂ§öÁúãÁúãc++ÔºåÂπ∂‰∏îÂØπÂ∏∏ËßÅÁöÑ ËÆ°ÁΩë Âíå os ÁöÑÈóÆÈ¢òÂ∞ΩÈáèÂæÄÊ∑±Â§ÑËµ∞ÔºåÈù¢ËØïÂÆòÂè™Áúã‰∏≠‰Ω†ÂØπÈóÆÈ¢òÁöÑÊ∑±Â∫¶Ôºå‰∏ç‰ºöÁöÑÈóÆÈ¢ò‰ªñ‰∏ç‰ºöËøΩÈóÆ„ÄÇ ÊúÄÂ§ßÁöÑÊî∂Ëé∑Ôºö Èù¢ËØïÂÆòÂØπËá™Â∑±ÊñπÊñπÈù¢Èù¢ÁöÑÂª∫ËÆÆ„ÄÇÂπ∂‰∏îÁªôËá™Â∑±Êé®Ëçê‰∫Ü‰∏âÊú¨‰π¶„ÄäunixÁΩëÁªúÁºñÁ®ãÂç∑‰∏Ä„Äã„ÄäunixÁΩëÁªúÁºñÁ®ãÂç∑‰∫å„Äã„ÄälinuxÂÜÖÊ†∏„Äã ÈÉ®ÂàÜÊãìÂ±ï ËæìÂÖ• www.taobao.com ÂêéÂèëÁîü‰∫Ü‰ªÄ‰πà Â¶ÇÊûúÊòØÁ¨¨‰∏ÄÊ¨°ËÆøÈóÆ www.taobao.comÔºåÂÆ¢Êà∑Á´Ø„ÄåÊµèËßàÂô®„Äç‰ºöÈ¶ñÂÖàÂéª dns ÊúçÂä°Âô®Êü•ÊâæÂØπÂ∫îÁöÑipÔºåÂ¶ÇÊûúÊòØÁ¨¨‰∏ÄÊ¨°ËÆøÈóÆ Ëøô‰∏™ÁΩëÁ´ôÔºåÈÇ£‰πàÈ¶ñÂÖà‰ºöÂéªËµ∞ http ÂçèËÆÆÔºåÂÆ¢Êà∑Á´Ø„ÄåÊµèËßàÂô®„ÄçÂíåÊúçÂä°Âô®ÁöÑ 80 Á´ØÂè£ËøõË°å tcp ËøûÊé•ÔºåÁÑ∂Âêé ÊúçÂä°Âô® 80 Á´ØÂè£‰ºöËøîÂõû‰∏Ä‰∏™ 301/302„ÄåÂÖ∑‰ΩìÂå∫Âà´‰∏ãÊñá‰ºöËÆ≤„ÄçÈáçÂÆöÂêëÔºåÂú®ÊúçÂä°Âô®ÂìçÂ∫îÂ§¥‰∏≠Ëøò‰ºöÊ∑ªÂä† HTTP-Strict-Transport-SecurityÔºåÈáåÈù¢Êúâ max-ageÔºåÁî®Êà∑ËÆøÈóÆÊó∂ÔºåÊúçÂä°Âô®Áßç‰∏ãËøô‰∏™Â§¥Ôºå‰∏ãÊ¨°Â¶ÇÊûú‰ΩøÁî® http ËÆøÈóÆÔºåÂè™Ë¶Å max-age Êú™ËøáÊúü„ÄåÂÆ¢Êà∑Á´ØÊ£ÄÈ™å„ÄçÔºåÂÆ¢Êà∑Á´Ø‰ºöËøõË°åÂÜÖÈÉ®Ë∑≥ËΩ¨ÔºåÂèØ‰ª•ÁúãÂà∞ 307 Redirect Internel ÁöÑÂìçÂ∫îÁ†Å„ÄÇÁÑ∂ÂêéÂ∞±Áõ¥Êé•ÂèòÊàêÂíå 443 Á´ØÂè£Âª∫Á´ãËøûÊé•ÔºåËµ∞ https ËøûÊé•„ÄÇ Â¶ÇÊûú‰∏çÊòØÁ¨¨‰∏ÄÊ¨°ËÆøÈóÆÔºåÈÇ£Âú®ÊãøÂà∞ip‰πãÂêéÂÆ¢Êà∑Á´ØÁõ¥Êé•Ê†°È™åËá™Â∑±ÁöÑ max-ageÂ≠óÊÆµÔºåÂ¶ÇÊûúÊ≤°ËøáÊúüÁõ¥Êé• 307 ÂÜÖÈÉ®Ë∑≥ËΩ¨ÔºåÁõ¥Êé•ÂíåÊúçÂä°Âô®ÁöÑ 443 Á´ØÂè£ËøõË°å https ÁöÑËøûÊé•‰∫Ü„ÄÇÂâ©‰∏ãÁöÑÂ∞±ÊòØhttpsÁöÑËøáÁ®ã‰∫Ü„ÄÇ ‰ΩúËÄÖÔºöËúóÁâõÁöÑÂåóÊûÅÊòü‰πãÊóÖÈìæÊé•Ôºöhttps://juejin.im/post/5d8a34ea6fb9a04dfa09561bÊù•Ê∫êÔºöÊéòÈáëËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇÂëäËØâÊàë‰ª¨ÈúÄË¶ÅÂª∫Á´ã https 301„ÄÅ302„ÄÅ307ÁöÑÂå∫Âà´ 301ÈáçÂÆöÂêëÊòØÊ∞∏‰πÖÁöÑÈáçÂÆöÂêëÔºåÊêúÁ¥¢ÂºïÊìéÂú®ÊäìÂèñÊñ∞ÁöÑÂÜÖÂÆπÁöÑÂêåÊó∂‰πüÂ∞ÜÊóßÁöÑÁΩëÂùÄÊõøÊç¢‰∏∫‰∫ÜÈáçÂÆöÂêë‰πãÂêéÁöÑÁΩëÂùÄ„ÄÇ 302ÈáçÂÆöÂêëÂè™ÊòØÊöÇÊó∂ÁöÑÈáçÂÆöÂêëÔºåÊêúÁ¥¢ÂºïÊìé‰ºöÊäìÂèñÊñ∞ÁöÑÂÜÖÂÆπËÄå‰øùÁïôÊóßÁöÑÂú∞ÂùÄÔºåÂõ†‰∏∫ÊúçÂä°Âô®ËøîÂõû302ÔºåÊâÄ‰ª•ÔºåÊêúÁ¥¢ÊêúÁ¥¢ÂºïÊìéËÆ§‰∏∫Êñ∞ÁöÑÁΩëÂùÄÊòØÊöÇÊó∂ÁöÑ„ÄÇÊâÄ‰ª•302Ôºå‰ºöÂØºËá¥Âä´ÊåÅÈóÆÈ¢òÔºöAÁ´ôÈÄöËøáÈáçÂÆöÂêëÂà∞BÁ´ôÁöÑËµÑÊ∫êxxooÔºåAÁ´ôÂÆûÈôÖ‰∏ä‰ªÄ‰πàÈÉΩÊ≤°ÂÅö‰ΩÜÊòØÊúâ‰∏Ä‰∏™ÊØîËæÉÂèãÂ•ΩÁöÑÂüüÂêçÔºåwebËµÑÊ∫êxxooÂ≠òÂú®BÁ´ôÂπ∂Áî±BÁ´ôÊèê‰æõÔºå‰ΩÜÊòØBÁ´ôÁöÑÂüüÂêç‰∏çÈÇ£‰πàÂèãÂ•ΩÔºåÂõ†Ê≠§ÂØπÊêúÁ¥¢ÂºïÊìéËÄåË®ÄÔºåÂèØËÉΩ‰ºö‰øùÂ≠òAÁ´ôÁöÑÂú∞ÂùÄÂØπÂ∫îxxooËµÑÊ∫êËÄå‰∏çÊòØBÁ´ôÔºåËøôÂ∞±ÊÑèÂë≥ÁùÄBÁ´ôÂá∫‰∫ÜËµÑÊ∫êÁâàÊùÉ„ÄÅÂ∏¶ÂÆΩ„ÄÅÊúçÂä°Âô®ÁöÑÈí±Ôºå‰ΩÜÊòØÁî®Êà∑ÈÄöËøáÊêúÁ¥¢ÂºïÊìéÊêúÁ¥¢xxooËµÑÊ∫êÁöÑÊó∂ÂÄôÂá∫Êù•ÁöÑÊòØAÁ´ôÔºåAÁ´ô‰ªÄ‰πàÈÉΩÊ≤°ÂÅöÂç¥Ë¢´Á¥¢ÊêúÂºïÊìéÂπøËÄåÂëä‰πãÁî®Êà∑ÔºåBÁ´ôÂÅö‰∫Ü‰∏ÄÂàáÂç¥‰∏çË¢´Áî®Êà∑Áü•ÈÅìÔºå‰ª∑ÂÄºË¢´AÁ´ôÁ™ÉÂèñ‰∫Ü„ÄÇËøôÈáå A Â∞±Áõ∏ÂΩì‰∫éÊòØÊàë‰ª¨Âú®ËæìÂÖ•Ê°ÜËæìÂÖ•ÁöÑÂüüÂêçÔºåÁÑ∂ÂêéÂØπ B ÈáçÂÆöÂêë 302ÔºåÂØºËá¥Ëá™Â∑±ÁöÑÂüüÂêç‰∏ç‰ºöË¢´ÊõøÊç¢Âç¥Ëøò‰∫´Áî® B ÁöÑËµÑÊ∫ê„ÄÇ 307ÊÑèÊÄùÂ∞±ÊòØÂÆ¢Êà∑Á´ØÂÜÖÈÉ®Ëá™Â∑±ÂÅö‰∫ÜÈáçÂÆöÂêëÔºåÂ∞±ÊØîÂ¶Ç www.baidu.com ÔºåÊàëÂú®Êúâ‰∫Ü HSTS ÁöÑ max-age ‰πãÂêé‰ºöËá™Âä®‰ªé http://www.baidu.com Ë∑≥ËΩ¨Âà∞ https://www.baidu.com„ÄÇ https ÁöÑÂΩ¢ÊàêËøáÁ®ã Âú®‰º†ËæìÂ±ÇÂíåÂ∫îÁî®Â±Ç‰∏≠Èó¥Êúâ‰∏™ ssl/tls Â±Ç ÊµÅÁ®ãÔºö È™åËØÅËøáÁ®ã„ÄåÂÖ∑‰ΩìÊµÅÁ®ãÔºöhttps://www.jianshu.com/p/b0b6b88fe9fe„Äç ÂÆ¢Êà∑Á´ØÔºàÈÄöÂ∏∏ÊòØÊµèËßàÂô®ÔºâÂÖàÂêëÊúçÂä°Âô®ÂèëÂá∫Âä†ÂØÜÈÄö‰ø°ÁöÑËØ∑Ê±ÇÔºå‰∏éÊúçÂä°Âô®ÁöÑ443Á´ØÂè£Âª∫Á´ãËøûÊé•Ôºõ ÊúçÂä°Âô®Êî∂Âà∞ËØ∑Ê±Ç,ÁÑ∂ÂêéÂìçÂ∫îÔºåÁ°ÆËÆ§Âä†ÂØÜÊñπÊ≥ïÔºåÂ¶Ç RSAÈùûÂØπÁß∞Âä†ÂØÜÔºåÁÑ∂ÂêéÂ∞ÜÊúçÂä°Âô®ÁöÑËØÅ‰π¶ÂèëËøáÂéªÔºõ ÂÆ¢Êà∑Á´ØÈ™åËØÅÊúçÂä°Âô®ÁöÑËØÅ‰π¶ÔºåÁÑ∂Âêé‰ΩøÁî®ÂÖ¨Èí•Âä†ÂØÜÂèëÈÄÅÊ∂àÊÅØÔºõ ÊúçÂä°Âô®Áî®ÁßÅÈí•Ëß£ÂØÜÔºåÂæóÂà∞ÊòéÊñá„ÄÇ Ê≠£Â∏∏‰º†Ëæì Ë∑üÊ≠£Â∏∏ÁöÑhttp‰º†Ëæì‰∏ÄËá¥ÔºåÂè™‰∏çËøáÊòØÂØÜÊñá‰º†Ëæì„ÄÇ ÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïÂíåÈùûÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïÁöÑÂå∫Âà´ https://blog.csdn.net/u013320868/article/details/54090295 ÂØπÁß∞Âä†ÂØÜÔºåÂä†ÂØÜËß£ÂØÜÊó∂Èó¥Êõ¥Âø´Ôºå‰ΩÜÊòØÂØÜÈí•ÁÆ°ÁêÜÊòØ‰∏™Â§ßÈóÆÈ¢òÔºõ ÈùûÂØπÁß∞Âä†ÂØÜÔºåÊõ¥ÂÆâÂÖ®Ôºå‰ΩÜÊòØÂä†ÂØÜËß£ÂØÜÊó∂Èó¥ËæÉÈïø‰∏Ä‰∫õ„ÄÇ RSA ÁÆóÊ≥ïÊµÅÁ®ã https://zhuanlan.zhihu.com/p/44185847 ‰πãÊâÄ‰ª•ÈöæËß£ÔºåÊòØÂõ†‰∏∫‰ΩçÊï∞ÂæàÈïøÔºåÂπ∂‰∏îÂéªÂØπ‰∏Ä‰∏™Ë∂ÖÁ∫ßÂ§ßÁöÑÊï∞ËøõË°åÂõ†ÂºèÂàÜËß£ÔºåÂ¶ÇÊûúÊ≤°ÊúâÁßÅÈí•ÁöÑËØùÂá†‰πé‰∏çÂèØËÉΩÂÅöÂà∞„ÄÇ ‰∏ªË¶ÅÁî®Âà∞ÁöÑÊï∞Â≠¶Áü•ËØÜÊúâÊ¨ßÊãâÂáΩÊï∞„ÄÅË¥πÈ©¨Â∞èÂÆöÁêÜÁ≠âÁ≠â Mysql ÁöÑÈ´òÂèØÁî®Êú∫Âà∂ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑ ËßÅ‰∏ãÈù¢ÂÜôÁöÑüëá 2020.3.26 16:00 - 17:00 „Äå60 ÂàÜÈíü„Äç ÁæéÂõ¢‰∏ÄÈù¢ÁîµËØùÈù¢„ÄÇ Ë∑üÂâç‰∏§Èù¢È£éÊ†ºÂÆåÂÖ®‰∏ç‰∏ÄÊ†∑ÔºÅ ÂÖàÈóÆÊàëÂ≠¶Ëøá‰ªÄ‰πàÁßëÁõÆÔºü ÊàëËØ¥ËÆ°ÁÆóÊú∫ÁΩëÁªú„ÄÅÊìç‰ΩúÁ≥ªÁªü„ÄÅÁºñËØëÂéüÁêÜ„ÄÅÊï∞ÊçÆÁªìÊûÑ„ÄÅËÆ°ÁÆóÊú∫ÁªÑÊàêÂéüÁêÜ„ÄÅÊï∞ÊçÆÂ∫ìÁ≠âÁ≠âÔºõ ÂØπ‰ªÄ‰πàÁßëÁõÆÊÑüÂÖ¥Ë∂£Ôºü ÊàëËØ¥ËÆ°ÁÆóÊú∫ÁΩëÁªúÂêß ‰∏∫‰ªÄ‰πàÂñúÊ¨¢ËøôÈó®ËØæÔºü ÊàëËØ¥Âõ†‰∏∫‰∏äËØæÂê¨ÂæóÊáÇÔºåËøôÈó®ËØæÁöÑ‰ΩìÁ≥ª‰πüÊØîËæÉÊ∏ÖÊô∞ÔºåÂàÜÂ±ÇÊù•Â≠¶ÔºåÂæ™Â∫èÊ∏êËøõÔºåÂàÜÊï∞ËÄÉÂæóÈ´òÔºåÊúâÊàêÂ∞±ÊÑüÊâÄ‰ª•Â∞±ÂñúÊ¨¢‰∫Ü„ÄÇ ËøôÈó®ËØæÊúâÂì™‰∫õËÆ©‰Ω†ËÆ∞ÂøÜÊ∑±ÂàªÁöÑÂú∞ÊñπÔºü ÊàëËØ¥ tcp„ÄÅipÂêßÔºåtcp ÊØîËæÉËÆ∞ÂøÜÊ∑±ÂàªÂõ†‰∏∫‰ªñÂæàÈáçË¶ÅÔºåÂá∫Áé∞ÁöÑÂú∞ÊñπÊØîËæÉÂ§öÔºåipÁöÑËØùÂ∫îËØ•Êàë‰ª¨Áé∞ÂÆûÁîüÊ¥ª‰∏≠‰πüÊÄªÊòØÊèêËµ∑ÔºåÊâÄ‰ª•ËÆ∞ÂøÜÊØîËæÉÊ∑±Âàª‰∏Ä‰∫õ„ÄÇ ÈÇ£Êàë‰ª¨Áé∞ÂÆû‰∏≠ËØ¥Âà∞ÁöÑ ip Âíå ‰Ω†ËøôÈáåÁöÑ ip Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü ÊàëËØ¥‰∏Ä‰∏™ÊòØ ip ÂçèËÆÆÔºå‰∏ªË¶ÅÂäüËÉΩÊòØÂÆö‰πâIPÂú∞ÂùÄÊ†ºÂºèÔºåÊï∞ÊçÆÂåÖÁöÑÊ†ºÂºèÔºåÂàÜÁªÑËΩ¨ÂèëËßÑÂàôÔºåËÄåÊàë‰ª¨Áé∞ÂÆû‰∏≠ÁöÑ ipÔºåÊòØÊåáÁöÑ ip Âú∞ÂùÄÔºåËøôÊòØ‰∏ªÊú∫Âú®ÁΩëÁªú‰∏≠ÁöÑÊ†áËØÜÔºå‰∏ÄËà¨Êàë‰ª¨Êé•Ëß¶ÁöÑÈÉΩÊòØ IPv4ÔºåÂç≥ 32 ‰ΩçÁöÑÂú∞ÂùÄ„ÄÇ ÈÇ£‰Ω†ËÆ≤ËÆ≤ IPV4 Êúâ‰ªÄ‰πàÂêß „ÄåÊàëËá™Â∑±Âä†ÁöÑÈóÆÈ¢ò„Äç IPv4 ÂàÜ‰∏∫ÁΩëÁªúÂè∑Âíå‰∏ªÊú∫Âè∑ÔºåÁΩëÁªúÂè∑Â∞±ÊòØ‰∏ªÊú∫ÊàñËÄÖË∑ØÁî±Âô®ÊâÄËøûÊé•Âà∞ÁöÑÁΩëÁªúÁöÑÊ†áËØÜÔºå‰∏ªÊú∫Âè∑Â∞±ÊòØ‰∏ªÊú∫ÊàñËÄÖË∑ØÁî±Âô®Âú®Ëøô‰∏™ÁΩëÁªúÂÜÖÁöÑÊ†áËØÜ„ÄÇ Êó¢ÁÑ∂Ë∞àÂà∞‰∫ÜË∑ØÁî±Âô®ÔºåÈÇ£Ë∑ØÁî±Âô®Êúâ ip Âú∞ÂùÄÂêóÔºåË∑ØÁî±Âô®ÂèàÊúâ‰ªÄ‰πàÂäüËÉΩÂë¢Ôºü Ë∑ØÁî±Âô®ËÇØÂÆöÊòØÊúâ ip Âú∞ÂùÄÁöÑÔºåÂπ∂‰∏îË∑ØÁî±Âô®ÊÄªÊòØÊúâ‰∏§‰∏™Êàñ‰∏§‰∏™‰ª•‰∏äÁöÑ ip Âú∞ÂùÄÔºåË∑ØÁî±Âô®ÁöÑÊØè‰∏Ä‰∏™Á´ØÂè£ÈÉΩÊúâ‰∏Ä‰∏™‰∏çÂêåÁΩëÁªúÂè∑ÁöÑ ip Âú∞ÂùÄÔºåÂõ†‰∏∫Ë∑ØÁî±Âô®ÊúÄ‰∏ªË¶ÅÁöÑÂäüËÉΩÂ∞±ÊòØÂàÜÁªÑËΩ¨ÂèëË∑ØÁî±ÔºåÈÄöËøáË∑ØÁî±Ë°®ÂØπÊä•ÊñáËøõË°åÁõ∏Â∫îÁöÑËΩ¨Âèë„ÄÇ ÈÇ£ÁΩëÂÖ≥ÂèàÊòØ‰ªÄ‰πàÔºüÂíåË∑ØÁî±Âô®Êúâ‰ªÄ‰πàÂÖ≥Á≥ªÂë¢Ôºü Ëøô‰∏™ÁúüÁöÑÈöæ‚Ä¶Âπ≥Êó∂ËøòÁúü‰∏ç‰ºöÂéªÊÄùËÄÉËøô‰∫õÈóÆÈ¢ò‚Ä¶ Â¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåË∑ØÁî±Âô®ÂÖ∂ÂÆûÂ∞±ÊòØÂÆûÁé∞‰∫ÜÁΩëÂÖ≥ÁöÑÂäüËÉΩÔºåÁΩëÂÖ≥ÊòØ‰∏Ä‰∏™ÈÄªËæëÊ¶ÇÂøµÔºåÊåáÁöÑÊòØÁΩëÁªúÁöÑÂá∫Âè£ÂíåÂÖ•Âè£„ÄåÁΩëÁªúËæπÁïå„ÄçÔºåËÄåË∑ØÁî±Âô®ÂàôÊòØ‰∏Ä‰∏™Áâ©ÁêÜÊ¶ÇÂøµÔºåÂÆûÁé∞‰∫ÜÁΩëÂÖ≥ÁöÑÂäüËÉΩÔºåÊòØ‰∏çÂêåÁΩëÂÖ≥ÁöÑÊ≤üÈÄöÊ°•Ê¢ÅÂíåÁâ©ÁêÜÂü∫Á°Ä„ÄÇ ‰Ω†ËØ¥ÁöÑ ip ÂçèËÆÆÊòØ‰ªÄ‰πàÔºüÂ±û‰∫éÂì™‰∏ÄÂ±ÇÔºü Êàë‰ª¨ÈÄöÂ∏∏‰ΩøÁî®ÁöÑÂçèËÆÆÊòØ IPv4 ÂçèËÆÆÔºåÂ±û‰∫éÁΩëÁªúÂ±Ç„ÄÇ ‰ªãÁªç‰∏Ä‰∏ã IPv4 ÂçèËÆÆÊúâÂì™‰∫õÂÜÖÂÆπÔºåÁÑ∂ÂêéËØ¥ËØ¥ÁΩëÁªúÂ±ÇÁöÑ‰∏Ä‰∫õÂÖ∂‰ªñÂçèËÆÆÂêßÔºü È¶ñÈÉ®Âõ∫ÂÆö20Â≠óËäÇÔºåÂåÖÊã¨ÁâàÊú¨ÔºåÈ¶ñÈÉ®ÈïøÂ∫¶ÔºåÊ∫êÂú∞ÂùÄÔºåÁõÆÁöÑÂú∞ÂùÄÁ≠âÁ≠â„ÄÇ ÁΩëÁªúÂ±ÇÁöÑÂÖ∂‰ªñÂçèËÆÆÂåÖÊã¨ ARP„ÄåÂú∞ÂùÄËß£ÊûêÂçèËÆÆÔºåÁî®‰∫éIPÂú∞ÂùÄÂíåMACÂú∞ÂùÄÁöÑÊò†Â∞Ñ„Äç„ÄÅNAT„ÄåÁΩëÁªúÂú∞ÂùÄËΩ¨Êç¢ÔºåÂØπÂ§ñÈöêËóèÂÜÖÈÉ®ÁöÑ ip„Äç„ÄÅICMP„ÄåÁΩëÁªúÊä•ÊñáÊéßÂà∂ÂçèËÆÆÔºåÂÖÅËÆ∏‰∏ªÊú∫ÂíåË∑ØÁî±Âô®Êä•ÂëäÂ∑ÆÈîôÂíåÂºÇÂ∏∏ÊÉÖÂÜµ„Äç„ÄÅCIDR„ÄåÂ≠êÁΩëÂàíÂàÜÂçèËÆÆÔºåÊó†ÂàÜÁ±ªÂüüÈó¥Ë∑ØÁî±ÈÄâÊã©ÔºåÊ≤°ÊúâÂ≠êÁΩëÊ¶ÇÂøµÔºå‰ΩÜÊòØÊúâÁî®Â≠êÁΩëÊé©Á†Å„Äç ËøòË¶Å DHCPÔºå‰∏çËøáËøô‰∏™ÊòØÂ∫îÁî®Â±ÇÂçèËÆÆÔºåÂü∫‰∫é UDPÔºåÁî®‰∫éÁªô‰∏ªÊú∫Âä®ÊÄÅÂàÜÈÖç IP Âú∞ÂùÄÔºåÊàë‰ª¨ÁöÑÁ¨îËÆ∞Êú¨Á™ÅÁÑ∂Êé•ÂÖ• wifi Ëé∑ÂæóÁöÑ IP Â∞±ÊòØ DHCP ÂçèËÆÆËé∑ÂèñÁöÑ„ÄÇ Á¨¨‰∏ÄÊÆµËêΩÂëäÁªàÔºåÂõ†‰∏∫ÊàëÂÆûÂú®ÊòØÂê¨‰∏çÊ∏ÖÂØπÈù¢Èù¢ËØïÂÆòËØ¥ËØùÔºåÂ£∞Èü≥Â§™‰Ωé‰∫ÜÔºåÂπ∂‰∏îÁî±‰∫é‰ªñ‰ΩøÁî®ÁöÑÂÖ¨Âè∏ÁöÑ vpnÔºåÂéãÊ†πÂê¨‰∏çÊ∏Ö‚Ä¶ÊàëÊâÄÊúâÁöÑÊ≥®ÊÑèÂäõÂü∫Êú¨‰∏äÈÉΩÈõÜ‰∏≠Âú®Âê¨‰ªñËØ¥ËØù‰∏ä‰∫Ü‚Ä¶Ê†πÊú¨Ê≤°ÂøÉÊÄùÊÄùËÄÉÈóÆÈ¢ò‚Ä¶Ëé´ÂêçÁöÑÁ¥ßÂº†‚Ä¶ ÁÑ∂Âêé‰ªñÊç¢‰∫ÜÁîµËØùÊâìËøáÊù•ÔºåÁªà‰∫éÂê¨ÂæóÊ∏ÖÊ•ö‰∫ÜÔºå‰πüÁªà‰∫é‰∏çÁî®Â∞ΩÂÖ®ÂäõÂê¨‰ªñËÆ≤ËØù‰∫ÜÔºå‰∫éÊòØÂ∞±‰∏çÁ¥ßÂº†‰∫ÜÔºåÁÑ∂ÂêéÊàë‰ª¨Â∞±ÁªßÁª≠ËÅä‰∫Ü‰∏ãÂéª„ÄÇ Èô§‰∫ÜËÆ°ÁÆóÊú∫ÁΩëÁªúÔºåËøòÂØπÂì™Èó®ËØæÁ®ãÊØîËæÉÊúâÂç∞Ë±°Ôºü Êï∞ÊçÆÂ∫ìÂêßÔºåËá™Â∑±Âõ†‰∏∫ÂÅöÈ°πÁõÆ‰πü‰∏ÄÁõ¥ÊúâÁî®„ÄÇ ÈÇ£‰Ω†Âπ≥Êó∂Áî®ÁöÑÊòØ‰ªÄ‰πàÊï∞ÊçÆÂ∫ìÔºü Mysql„ÄÅmongodb Ëøô‰∏§‰∏™Êï∞ÊçÆÂ∫ìÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü ‰∏Ä‰∏™ÊòØÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºå‰∏Ä‰∏™ÊòØÈùûÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì„ÄÇ ÈÇ£‰ªÄ‰πàÊòØÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºå‰ªÄ‰πàÊòØÈùûÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºü‰∏∫‰ªÄ‰πàË¶ÅÂàÜÊàêËøô‰∏§ÁßçÊï∞ÊçÆÂ∫ìÂë¢ÔºüÂêÑËá™ÁöÑ‰ºòÂäøÂíå‰ΩøÁî®Âú∫ÊôØÂú®Âì™Âë¢Ôºü ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÊåáÈááÁî®‰∫ÜÂÖ≥Á≥ªÊ®°ÂûãÊù•ÁªÑÁªáÊï∞ÊçÆÁöÑÊï∞ÊçÆÂ∫ìÔºåÂÖ≥Á≥ªÊ®°ÂûãÂèØ‰ª•ÁÆÄÂçïÁöÑÁêÜËß£‰∏∫‰∏Ä‰∏™‰∫åÁª¥Ë°®ÔºåÊâÄ‰ª•ÈáåÈù¢ÁöÑÂ≠óÊÆµÂêçÁß∞ÂíåÂ≠óÊÆµÁ±ªÂûãÈÉΩÊòØÂú®Âª∫Ë°®ÁöÑÊó∂ÂÄôÂ∞±Á°ÆÂÆöÂ•Ω‰∫ÜÁöÑÔºõ ÈùûÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÂàôÊòØÁªìÊûÑ‰∏çÂõ∫ÂÆöÔºåÈõÜÂêàÂÜÖÊï∞ÊçÆÂ≠óÊÆµÂèØ‰ª•‰∏ç‰∏ÄÊ†∑ÔºåÊï∞ÊçÆÊØîËæÉÊùæÊï£Ôºå‰∏ÄËà¨‰ª•ÈîÆÂÄºÂØπÁöÑÂΩ¢ÂºèÂ≠òÂÇ®ÔºåÊØîÂ¶Ç‰∏ÄËà¨ÈÉΩÊòØjsonÊï∞ÊçÆÁõ¥Êé•Â≠òÂÇ®„ÄÇ ÈÄÇÂêà‰ΩøÁî®SQLÂºÄÂèëÁöÑÈ°πÁõÆÔºö ÂèØ‰ª•È¢ÑÂÖàÂÆö‰πâÈÄªËæëÁõ∏ÂÖ≥ÁöÑÁ¶ªÊï£Êï∞ÊçÆÁöÑÈúÄÊ±Ç Êï∞ÊçÆ‰∏ÄËá¥ÊÄßÊòØÂøÖË¶ÅÁöÑ{acid} ÂÖ∑ÊúâËâØÂ•ΩÁöÑÂºÄÂèëËÄÖÁªèÈ™åÂíåÊäÄÊúØÊîØÊåÅÁöÑÊ†áÂáÜÁöÑÊàêÁÜüÊäÄÊúØ ÈÄÇÂêà‰ΩøÁî®NoSQLÂºÄÂèëÁöÑÈ°πÁõÆÔºö ‰∏çÁõ∏ÂÖ≥Ôºå‰∏çÁ°ÆÂÆöÂíåÈÄêÊ≠•ÂèëÂ±ïÁöÑÊï∞ÊçÆÈúÄÊ±Ç Êõ¥ÁÆÄÂçïÊàñËÄÖÊõ¥ÂÆΩÊùæÁöÑËÉΩÂ§üÂø´ÈÄüÂºÄÂßãÁºñÁ®ãÁöÑÈ°πÁõÆ ÈÄüÂ∫¶ÂíåÂèØÊâ©Â±ïÊÄßËá≥ÂÖ≥ÈáçË¶ÅÁöÑ ÈùûÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÁöÑ‰ºòÂäøÔºö ÊÄßËÉΩNOSQLÊòØÂü∫‰∫éÈîÆÂÄºÂØπÁöÑÔºåÂèØ‰ª•ÊÉ≥Ë±°ÊàêË°®‰∏≠ÁöÑ‰∏ªÈîÆÂíåÂÄºÁöÑÂØπÂ∫îÂÖ≥Á≥ªÔºåËÄå‰∏î‰∏çÈúÄË¶ÅÁªèËøáSQLÂ±ÇÁöÑËß£ÊûêÔºåÊâÄ‰ª•ÊÄßËÉΩÈùûÂ∏∏È´ò„ÄÇ ÂèØÊâ©Â±ïÊÄßÂêåÊ†∑‰πüÊòØÂõ†‰∏∫Âü∫‰∫éÈîÆÂÄºÂØπÔºåÊï∞ÊçÆ‰πãÈó¥Ê≤°ÊúâËÄ¶ÂêàÊÄßÔºåÊâÄ‰ª•ÈùûÂ∏∏ÂÆπÊòìÊ∞¥Âπ≥Êâ©Â±ï„ÄÇ ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÁöÑ‰ºòÂäøÔºö Â§çÊùÇÊü•ËØ¢ÂèØ‰ª•Áî®SQLËØ≠Âè•Êñπ‰æøÁöÑÂú®‰∏Ä‰∏™Ë°®‰ª•ÂèäÂ§ö‰∏™Ë°®‰πãÈó¥ÂÅöÈùûÂ∏∏Â§çÊùÇÁöÑÊï∞ÊçÆÊü•ËØ¢„ÄÇ ‰∫ãÂä°ÊîØÊåÅ‰ΩøÂæóÂØπ‰∫éÂÆâÂÖ®ÊÄßËÉΩÂæàÈ´òÁöÑÊï∞ÊçÆËÆøÈóÆË¶ÅÊ±ÇÂæó‰ª•ÂÆûÁé∞„ÄÇ ÂØπ‰∫éËøô‰∏§Á±ªÊï∞ÊçÆÂ∫ìÔºåÂØπÊñπÁöÑ‰ºòÂäøÂ∞±ÊòØËá™Â∑±ÁöÑÂº±ÂäøÔºåÂèç‰πã‰∫¶ÁÑ∂„ÄÇ ‰ΩÜÊòØËøëÂπ¥Êù•Ëøô‰∏§ÁßçÊï∞ÊçÆÂ∫ìÈÉΩÂú®ÂêëÁùÄÂè¶Â§ñ‰∏Ä‰∏™ÊñπÂêëËøõÂåñ„ÄÇ‰æãÂ¶ÇÔºöNOSQLÊï∞ÊçÆÂ∫ìÊÖ¢ÊÖ¢ÂºÄÂßãÂÖ∑Â§áSQLÊï∞ÊçÆÂ∫ìÁöÑ‰∏Ä‰∫õÂ§çÊùÇÊü•ËØ¢ÂäüËÉΩÁöÑÈõèÂΩ¢ÔºåÊØîÂ¶ÇCouchbaseÁöÑindex‰ª•ÂèäMONGOÁöÑÂ§çÊùÇÊü•ËØ¢„ÄÇÂØπ‰∫é‰∫ãÂä°ÁöÑÊîØÊåÅ‰πüÂèØ‰ª•Áî®‰∏Ä‰∫õÁ≥ªÁªüÁ∫ßÁöÑÂéüÂ≠êÊìç‰ΩúÊù•ÂÆûÁé∞‰æãÂ¶Ç‰πêËßÇÈîÅ‰πãÁ±ªÁöÑÊñπÊ≥ïÊù•Êõ≤Á∫øÊïëÂõΩ„ÄÇSQLÊï∞ÊçÆÂ∫ì‰πüÂºÄÂßãÊÖ¢ÊÖ¢ËøõÂåñÔºåÊØîÂ¶ÇHandlerSockerÊäÄÊúØÁöÑÂÆûÁé∞ÔºåÂèØ‰ª•Âú®MYSQL‰∏äÂÆûÁé∞ÂØπ‰∫éSQLÂ±ÇÁöÑÁ©øÈÄèÔºåÁî®NOSQLÁöÑÊñπÂºèËÆøÈóÆÊï∞ÊçÆÂ∫ìÔºåÊÄßËÉΩÂèØ‰ª•‰∏äÂèØ‰ª•ËææÂà∞ÁîöËá≥Ë∂ÖË∂äNOSQLÊï∞ÊçÆÂ∫ì„ÄÇÂèØÊâ©Â±ïÊÄß‰∏ä‰æãÂ¶ÇPercona ServerÔºåÂèØ‰ª•ÂÆûÁé∞Êó†‰∏≠ÂøÉÂåñÁöÑÈõÜÁæ§„ÄÇ ËôΩÁÑ∂Ëøô‰∏§ÊûÅÈÉΩÂõ†‰∏∫ÂêÑËá™ÁöÑÂº±ÂäøËÄåÂºÄÂßãËøõÂåñÂá∫Âè¶‰∏ÄÊûÅÁöÑ‰∏Ä‰∫õÁâπÊÄßÔºå‰ΩÜÊòØËøô‰∫õÁâπÊÄßÁöÑÂ¢ûÂä†‰πü‰ºöÊ∂àÂº±ÂÖ∂Êú¨Êù•ÂÖ∑Â§áÁöÑ‰ºòÂäøÔºåÊØîÂ¶ÇCouchbase‰∏äÁöÑindexÁöÑÂ¢ûÂä†‰ºöÈÄêÊ≠•Èôç‰ΩéÊï∞ÊçÆÂ∫ìÁöÑËØªÂÜôÊÄßËÉΩ„ÄÇÊâÄ‰ª•ÊÄéÊ†∑ÊûÑÂª∫Á≥ªÁªüÁöÑÁü≠ÊúüÂíåÈïøÊúüÂ≠òÂÇ®Á≠ñÁï•ÔºåÁî®Â•Ω‰ªñ‰ª¨ÂêÑËá™ÁöÑÂº∫È°πÊòØÊû∂ÊûÑÂ∏àÈúÄË¶ÅÂ•ΩÂ•ΩËÄÉËôëÁöÑÈáçË¶ÅÈóÆÈ¢ò„ÄÇ ‰ΩúËÄÖÔºöÈôàÈºéÊòüÈìæÊé•Ôºöhttps://www.zhihu.com/question/24225007/answer/81501685Êù•Ê∫êÔºöÁü•‰πéËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ ÈÇ£‰Ω†ËÆ≤ËÆ≤ mysql ‰∏≠‰Ω†Âç∞Ë±°Ê∑±ÂàªÁöÑÂú∞ÊñπÂêß Á¨¨‰∏Ä‰∏™ÔºåÂØπ mysql ÊîØÊåÅÁöÑ RR ÈöîÁ¶ªÁ∫ßÂà´ÈùûÂ∏∏ÁöÑÂç∞Ë±°Ê∑±ÂàªÔºåÁ´üÁÑ∂ÂèØ‰ª•ÂÅöÂà∞‰øÆÊîπ‰∫Ü‰ΩÜ‰∏çÂéªËØªËøôÁßçÈöîÁ¶ªÁ∫ßÂà´Ôºõ ËøòÊúâÂ∞±ÊòØ Mysql ÁöÑÈ´òÂèØÁî®Êú∫Âà∂Ôºõ„ÄåÂøÖÈ°ªÁñØÁãÇËΩ¨ÂÖ•Ëá™Â∑±ÁÜüÊÇâÁöÑÂú∞ÊñπÂïä„Äç Mysql ÁöÑ Write Ahead Logging ‰πüÊòØ‰∏Ä‰∏™ÂæàÂ§ßÁöÑÁâπÁÇπÔºåÊúâÂéª‰ΩøÁî® redolog„ÄÅundolog„ÄÅbinlogÔºõ Mysql ÁöÑÈîÅ‰πüÊòØ‰∏Ä‰∏™ÂæàÂ§ßÁöÑÁâπÁÇπÔºåÈáåÈù¢Êúâ‰∏∞ÂØåÁöÑÈîÅÔºåË∑ü juc ‰∏ãÁöÑÈîÅÊúâÁöÑ‰∏ÄÊãºÔºåÁîöËá≥Êõ¥‰∏∞ÂØåÔºõ ËøòÊúâÂ∞±ÊòØ Mysql ‰∏≠ÁöÑÁ¥¢ÂºïÔºåËÉΩÊèêÈ´òÊ£ÄÁ¥¢ÈÄüÂ∫¶„ÄÇ „ÄéÊú∫‰ºöÊù•‰∫ÜÂ∞±Ë¶ÅÊääÊè°‰ΩèÔºåËøôÁßçÈóÆÈ¢òÊòØÊúÄÈÄÇÂêàÂ±ïÁé∞Ëá™Â∑±ÁöÑÂ≠¶‰π†Ê∑±Â∫¶„Äè ÈÇ£‰Ω†ÂàÜÂà´ËÆ≤ËÆ≤Ëøô‰∫î‰∏™Âêß ÂÖ∂ÂÆûÈù¢ËØïÂÆòÂπ∂Ê≤°ÊúâËÆ©ÊàëËÆ≤Ëøô‰∫î‰∏™ÔºåÂè™ÊòØËÆ©ÊàëËÆ≤ËÆ≤ rr Á∫ßÂà´Â¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºå‰ΩÜÊòØ‰∏∫‰∫ÜÂ§ç‰π†ÔºåÊàëËøòÊòØÊääËøô‰∫î‰∏™ÂÜç‰∏≤‰∏ÄÈÅçÂêß„ÄÇ ÂÖàËÆ≤Á¨¨‰∏Ä‰∏™Ôºåmysql Â¶Ç‰ΩïÂÆûÁé∞ÁöÑ RR ÈöîÁ¶ªÁ∫ßÂà´ ‰∏ªË¶ÅÊòØÈááÁî®‰∫Ü‰∫ãÂä°ÁöÑ‰∏ÄËá¥ÊÄßËßÜÂõæÔºåÂíåÂΩìÂâçË°åÁöÑ‰∏Ä‰∏™ row_tranc_idÔºåÊ†πÊçÆ‰∏ÄËá¥ÊÄßËßÜÂõæÈáåÈù¢ÁöÑ‰ΩéÊ∞¥‰ΩçÂíåÈ´òÊ∞¥‰ΩçÂíå row_tranc_id ËøõË°åÊØîËæÉÔºåÂà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÁî® undolog ÊãøÂà∞‰∏ä‰∏Ä‰∏™ÂÄºÔºåundolog Âú®ËøôÈáåÂ∞±ÊòØÂÆûÁé∞ mvcc ÁöÑÂü∫Á°Ä„ÄÇËøôÈáåÊúâ‰∏Ä‰∏™ÂÄºÂæóÊ≥®ÊÑèÁöÑÂú∞ÊñπÔºåÂ∞±ÊòØÂ¶ÇÊûú select ÊòØ‰∏çÂä†ÊÇ≤ËßÇÈîÅÁöÑÂéªËØªÔºåÊ≤°ÊúâÈóÆÈ¢òÔºåÊòØrrÁ∫ßÂà´ÁöÑËØªÂèñÔºå‰ΩÜÊòØÂ¶ÇÊûú select ÊòæÂºèÁöÑÂä†ÈîÅÔºåÊØîÂ¶ÇËØ¥Âä†‰∫ÜË°åÈîÅ‰∏≠ÁöÑËØªÈîÅ„ÄåÂú®ËØ≠Âè•ÊúÄÂêéÂä† in shared mode„ÄçÊàñËÄÖÂÜôÈîÅ„Äåfor update„ÄçÔºåËøôÊ†∑Ë∑ü update ‰∏ÄÊ†∑Âº∫Âà∂ÂéªËøõË°å‰∏Ä‰∏™Âä†ÈîÅÔºåÂØºËá¥Âè™ËÉΩÂéªÂΩìÂâçËØªÔºåÊ≠§Êó∂ mvcc ÊòØÂ§±ÊïàÁöÑ„ÄÇ ÂÜçËÆ≤Á¨¨‰∫å‰∏™Ôºåmysql ÁöÑÈ´òÂèØÁî®Êú∫Âà∂ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü ËøôÈáåÊàëÂú®ËÖæËÆØÈù¢ËØïÈÉ®ÂàÜ‰πüÊúâÊèêÂà∞Ôºå‰ΩÜÊòØËÖæËÆØÈÇ£ÈÉ®ÂàÜ‰∏ªË¶Å‰æßÈáçËÆ≤‰∫Ü‰∏ª‰ªé‰∏ÄËá¥ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºåËÄåÈ´òÂèØÁî®ÂàôÊòØÂª∫Á´ãÂú®‰∏ª‰ªé‰∏ÄËá¥ÁöÑÂü∫Á°Ä‰∏äÁöÑ„ÄÇ ÂÖà‰∏ä‰∏Ä‰∏™Ëá™Â∑±ÁîªÁöÑÂõæÔºö mysql ÁöÑÈ´òÂèØÁî®ÁöÑÂÆûÁé∞ÔºåÂü∫Á°ÄÂ∞±ÊòØËÉΩÂ§üÂÅöÂà∞‰∏ªÂ§áÂàáÊç¢ÔºåËÄå‰∏ªÂ§áÂàáÊç¢ÁöÑÂâçÊèêÊòØË¶Å‰øùËØÅ‰∏ª‰ªéÁöÑ‰∏ÄËá¥ÊÄßÔºåËøôÊ†∑ÊâçËÉΩÂàáÊç¢Ôºå‰∏çÁÑ∂ËÇØÂÆö‰ºöÂΩ±ÂìçÊï∞ÊçÆÔºå‰ΩÜÊòØË¶Å‰øùËØÅ‰∏ª‰ªé‰∏ÄËá¥ÊÄßÔºåÂ∞±‰ºöÂ∏¶Êù•‰∏ª‰ªéÂª∂ËøüÁöÑÊÉÖÂÜµÔºåÂÖ∑‰ΩìÁöÑ‰∏ª‰ªé‰∏ÄËá¥ÊÄßÁöÑÂÆûÁé∞ÂèØ‰ª•ÁúãÊàë‰∏äÈù¢ËÆ≤ÁöÑÔºå‰∏ª‰ªéÂª∂ËøüÂèØËÉΩ‰ºöÊúâÂõæ‰∏≠ÈÇ£‰∫õÂéüÂõ†ÔºåÈíàÂØπ‰∏çÂèØÈÅøÂÖçÁöÑ‰∏ª‰ªéÂª∂ËøüÔºå‰∏ªÂ§áÂàáÊç¢Êúâ‰∏§ÁßçÁ≠ñÁï•Ôºö ÂèØÈù†ÊÄß‰ºòÂÖàÁ≠ñÁï•„ÄÇÂÖ∑‰ΩìÊ≠•È™§ÊòØÁ≠âÂª∂ËøüÂ∞è‰∫éÊüê‰∏™Êï∞Êó∂Ôºå‰æãÂ¶Ç 5 ÁßíÔºåÂ∞Ü‰∏ªÂ∫ì A ÊîπÊàêÂè™ËØªÁä∂ÊÄÅÔºåÁÑ∂ÂêéÂÜçÁúã‰∏ª‰ªéÂª∂Ëøü„Äåseconds_behind_master„ÄçÔºåÁ≠âÂÖ∂Âèò‰∏∫ 0 ÂêéÔºåÂ∞ÜÂ§áÂ∫ì B ÊîπÊàêÂèØËØªÂÜôÁä∂ÊÄÅÔºåÁÑ∂ÂêéÊää‰∏öÂä°ÂàáÊç¢Âà∞Â§áÂ∫ì B ‰∏äÔºåËøô‰∏™Á≠ñÁï•ÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØËÉΩ‰øùËØÅ‰∏ª‰ªéÁöÑÂÆåÂÖ®‰∏ÄËá¥ÊÄßÔºå‰ΩÜÊòØ‰ºöÊúâÂ∞ëÈáèÊó∂Èó¥ÂØºËá¥Á≥ªÁªüÂ§Ñ‰∫é‰∏çÂèØÂÜôÁöÑÁä∂ÊÄÅÔºå‰∏çËøáÂΩ±Âìç‰∏çÂ§ßÔºåËøô‰πüÊòØÊúÄÂ∏∏Áî®ÁöÑÁ≠ñÁï•Ôºõ ÂèØÁî®ÊÄß‰ºòÂÖàÁ≠ñÁï•„ÄÇ‰∏çÁ≠â‰∏ªÂ§áÊï∞ÊçÆÂêåÊ≠•ÔºåÁõ¥Êé•ÊääËøûÊé•ÂàáÂà∞Â§áÂ∫ìBÔºåÂπ∂‰∏îËÆ©Â§áÂ∫ìBÂèØ‰ª•ËØªÂÜôÔºåÈÇ£‰πàÁ≥ªÁªüÂá†‰πéÂ∞±Ê≤°Êúâ‰∏çÂèØÁî®Êó∂Èó¥‰∫Ü„ÄÇÂ•ΩÂ§ÑÂ∞±ÊòØÊ≤°Êúâ‰∏çÂèØÁî®Êó∂Èó¥Ôºå‰ΩÜÊòØÂÆπÊòìÂØºËá¥Êï∞ÊçÆÈÄªËæëÂá∫Áé∞ÈóÆÈ¢ò„ÄÇ ÂÜçËÆ≤Á¨¨‰∏â‰∏™ÔºåMysql ÁöÑ Write Ahead Logging Mysql ‰∏≠Â∏∏ËßÅÁöÑ‰∏â‰∏™Êó•ÂøóÊñá‰ª∂ÂàÜÂà´ÊòØ undolog„ÄÅredolog‰ª•ÂèäbinlogÔºåredolog ‰∏ªË¶ÅÊòØË¥üË¥£ crash-safeÔºå‰πüÂ∞±ÊòØÂ¥©Ê∫ÉÊÅ¢Â§çÁöÑÂ∑•‰ΩúÔºåbinlog‰∏ªË¶ÅÊòØÂÅö‰∏Ä‰∏™ÂΩíÊ°£ÁöÑ‰ΩúÁî®ÔºåredologÂíåbinlogÊòØ‰∏§Èò∂ÊÆµÊèê‰∫§ÁöÑÔºåËøô‰πüÊòØÂ∏∏Áî®ÁöÑÂàÜÂ∏ÉÂºèÁöÑÊâãÊÆµÂêßÔºåÂ§ßÂÆ∂ÈÉΩokay‰∫ÜÊâçcommitÔºåredologÊòØÂèØÊì¶Èô§ÁöÑÔºåÂ≠òÂÇ®ÁöÑÊòØÁâ©ÁêÜÊó•ÂøóÔºå‰ΩÜÊòØbinlogÊòØÈ°∫Â∫èÂÜôÔºåÂ≠òÂÇ®ÁöÑÊòØÈÄªËæëÊó•ÂøóÔºåÂπ∂‰∏î redolog ÊòØ Innodb Áã¨ÊúâÁöÑÔºåbinlogÂàôÊòØ serverÁ´ØÊúâÁöÑ„ÄÇundolog ‰∏ªË¶ÅÊòØË¥üË¥£ mvcc ÂíåÂõûÊªöÔºåÂú®Êï∞ÊçÆ‰øÆÊîπÁöÑÊó∂ÂÄôÔºå‰∏ç‰ªÖËÆ∞ÂΩï‰∫ÜredoÔºåËøòËÆ∞ÂΩï‰∫ÜÁõ∏ÂØπÂ∫îÁöÑundoÔºåÂ¶ÇÊûúÂõ†‰∏∫Êüê‰∫õÂéüÂõ†ÂØºËá¥‰∫ãÂä°Â§±Ë¥•ÊàñÂõûÊªö‰∫ÜÔºåÂèØ‰ª•ÂÄüÂä©ËØ•undoËøõË°åÂõûÊªö„ÄÇundo logÂíåredo logËÆ∞ÂΩïÁâ©ÁêÜÊó•Âøó‰∏ç‰∏ÄÊ†∑ÔºåÂÆÉÊòØÈÄªËæëÊó•Âøó„ÄÇÂèØ‰ª•ËÆ§‰∏∫ÂΩìdelete‰∏ÄÊù°ËÆ∞ÂΩïÊó∂Ôºåundo log‰∏≠‰ºöËÆ∞ÂΩï‰∏ÄÊù°ÂØπÂ∫îÁöÑinsertËÆ∞ÂΩïÔºåÂèç‰πã‰∫¶ÁÑ∂ÔºåÂΩìupdate‰∏ÄÊù°ËÆ∞ÂΩïÊó∂ÔºåÂÆÉËÆ∞ÂΩï‰∏ÄÊù°ÂØπÂ∫îÁõ∏ÂèçÁöÑupdateËÆ∞ÂΩï„ÄÇ ÂÜçËÆ≤Á¨¨Âõõ‰∏™ÔºåMysql ‰∏≠ÁöÑÈîÅ Mysql ‰ªéÈîÅÁöÑËåÉÂõ¥‰∏äËÆ≤ÂàÜ‰∏∫ÂÖ®Â±ÄÈîÅ„ÄÅË°®Á∫ßÈîÅ‰ª•ÂèäË°åÈîÅ„ÄÇ ÂÖ®Â±ÄÈîÅÁß∞‰∏∫ Flash Tables with Read LockÔºå‰∏ªË¶ÅÁî®Êù•ÂÖ®Â∫ìÈÄªËæëÂ§á‰ªΩÔºåËøô‰∏™ÂëΩ‰ª§ÂèØ‰ª•‰ΩøÊï¥‰∏™Â∫ìÂ§Ñ‰∫éÂè™ËØªÁä∂ÊÄÅ„ÄÇ‰ΩøÁî®ËØ•ÂëΩ‰ª§‰πãÂêéÔºåÊï∞ÊçÆÊõ¥Êñ∞ËØ≠Âè•„ÄÅÊï∞ÊçÆÂÆö‰πâËØ≠Âè•ÂíåÊõ¥Êñ∞Á±ª‰∫ãÂä°ÁöÑÊèê‰∫§ËØ≠Âè•Á≠âÊìç‰ΩúÈÉΩ‰ºöË¢´ÈòªÂ°û„ÄÇÂ¶ÇÊûúËøô‰∏™ÂëΩ‰ª§Âú®‰∏ªÂ∫ìÊìç‰ΩúÁöÑËØùÔºå‰ºöÂØºËá¥‰∏öÂä°ÂÅúÊëÜÔºåÂ¶ÇÊûúÂÜçÂ§áÂ∫ìÊìç‰ΩúÁöÑËØùÔºå‰ºöÂØºËá¥Â§áÂ∫ìÊó†Ê≥ïÂÜô‰ªé‰∏ªÂ∫ì‰º†Êù•ÁöÑbinlogÔºåÈÄ†Êàê‰∏ªÂ§áÂª∂ËøüÔºåÊâÄ‰ª•Êàë‰ª¨ÂæàÂ∞ë‰ΩøÁî®ÂÆÉÔºå‰∏ÄËà¨ÈÉΩÊòØ‰ΩøÁî®mysqlËá™Â∏¶ÁöÑ mysqldump ÂéªËøõË°åÂÖ®Â∫ìÈÄªËæëÂ§á‰ªΩÔºåÂõ†‰∏∫ mysqldump Êúâ mvcc ÁöÑÊîØÊåÅÔºåÊâÄ‰ª•ÂèØ‰ª•‰∏ÄËæπÂ§á‰ªΩ‰∏ÄËæπËØªÂÜôÔºå‰ΩÜÊòØËøô‰∏™ÂøÖÈ°ªË¶ÅÊï∞ÊçÆÂ∫ìÂºïÊìéÊîØÊåÅrrËøô‰∏™ÈöîÁ¶ªÁ∫ßÂà´ÔºåÂÉè MyISAM Â∞±‰∏çË°å„ÄÇ Ë°®Á∫ßÈîÅÂèàÂàÜ‰∏∫Ë°®ÈîÅÂíåÂÖÉÊï∞ÊçÆÈîÅMDLÔºåÂÖ∂‰∏≠Ë°®ÈîÅÈúÄË¶ÅÊàë‰ª¨ÂéªÊòæÂºèÂä†ÈîÅÔºå‰æãÂ¶Ç lock tables ‚Ä¶ read/writeÔºåÂ¶ÇÊûú‰∏Ä‰∏™Á∫øÁ®ãÂØπÂÖ∂ÊòæÂºèÂä†‰∫ÜË°®ËØªÈîÅÔºåÈÇ£‰πàÂÖ∂‰ªñÁ∫øÁ®ãÂíåËØ•Á∫øÁ®ãÂè™ËÉΩËØªËØ•Ë°®ÔºåÂ¶ÇÊûúËØ•Á∫øÁ®ãÂä†‰∫ÜË°®ÂÜôÈîÅÔºåÈÇ£‰πàÂÖ∂‰ªñÁ∫øÁ®ãÂï•‰πüÂπ≤‰∏ç‰∫ÜÔºåÊâÄ‰ª•Ëøô‰∏™ÈîÅË°®ÁöÑÁ≤íÂ∫¶ËøòÊòØÂ§™Â§ßÔºå‰∏ÄËà¨‰∏ç‰ºöÈááÁî®„ÄÇ Ë°®Á∫ßÈîÅÁöÑÂè¶Â§ñ‰∏ÄÁßçÊòØÂÖÉÊï∞ÊçÆÈîÅMDLÔºåËøôÊòØÁ≥ªÁªüÈªòËÆ§Âä†‰∏äÁöÑÔºåÂØπË°®ËøõË°å DML ÊòØÂä†ËØªÈîÅÔºåÂØπË°®ËøõË°å DDL ÊòØÂä†ÂÜôÈîÅÔºåËØªÂÜô‰∫íÊñ•ÔºåËØªÂÖ±‰∫´ÔºåÁõ∏ÂΩì‰∫é ReadWriteLockÔºå‰ΩÜÊòØËøôÈáåÊ≤°ÊúâÂÜôÈôçÁ∫ßÁöÑËøáÁ®ã„ÄÇ Ë°åÈîÅÊòØÊàë‰ª¨ÊúÄÁªèÂ∏∏Áî®ÁöÑ‰∫ÜÔºå‰πüÂàÜ‰∏∫ËØªÈîÅÂíåÂÜôÈîÅÔºåËøôÈáåÁöÑËØªÂçïÊåá selectÔºåËøôÈáåÁöÑÂÜôÊåáÁöÑÊòØ update„ÄÅdelete„ÄÅinsertÁ≠âÁ≠âÔºåÂΩìÁÑ∂Êàë‰ª¨‰πüÂèØ‰ª•ÂØπ select ËøõË°åÊòæÂºèÁöÑÂä†ÈîÅÔºåÊ≠§Êó∂ select Â∞±‰ªé‰πêËßÇËØªÈîÅ„ÄåË∑ü StampedLock Á±ª‰ººÔºå‰∏Ä‰∏™ÊòØÈÄöËøá version Âà§Êñ≠Êï∞ÊçÆÊúâÊ≤°ÊúâÂèòÂåñÔºå‰∏Ä‰∏™ÊòØÈÄöËøá stamp Âà§Êñ≠„ÄçÂèòÊàê‰∫ÜÊÇ≤ËßÇËØªÈîÅÊàñËÄÖÂÜôÈîÅ‰∫ÜÔºåÊ≠§Êó∂mvccÊòØÂ§±ÊïàÁöÑÔºåÊòØË∑ü updateÁ≠âËØ≠Âè•‰∏ÄÊ†∑Âº∫Âà∂ÂéªÂΩìÂâçËØªÁöÑ„ÄÇ ÂÜçËÆ≤Á¨¨‰∫î‰∏™ÔºåMysql ÁöÑÁ¥¢ÂºïÔºü Á¥¢ÂºïÊúâÂæàÂ§öÔºåÂ∏∏ËßÅÁöÑÂ∞±ÊòØËÅöÈõÜÁ¥¢ÂºïÂíåÈùûËÅöÈõÜÁ¥¢ÂºïÔºåËÅöÈõÜÁ¥¢ÂºïÂ∞±ÊòØÂÖÉÁ¥†ÁöÑÈÄªËæë‰ΩçÁΩÆÂíåÁâ©ÁêÜ‰ΩçÁΩÆ‰øùÊåÅ‰∏ÄËá¥Ôºå‰πüÁß∞‰∏∫‰∏ªÈîÆÁ¥¢ÂºïÔºåÊòØB+Ê†ëÔºåÂõ†‰∏∫ÊîØÊåÅËåÉÂõ¥Êü•ËØ¢ÔºåÂπ∂‰∏îÁ¥¢ÂºïËäÇÁÇπÂè™ÊúâÊåáÈíàÂíåÁ¥¢ÂºïÔºåËøôÊ†∑Âçï‰∏™ËäÇÁÇπÂ∞±ËÉΩÂÆπÁ∫≥Êõ¥Â§öÁöÑÊåáÈíàÂüüÔºå‰ªéËÄå‰ΩøÂæóÊ†ëÁöÑÈ´òÂ∫¶‰∏ãÈôç„ÄÇ ÈùûËÅöÈõÜÁ¥¢ÂºïË¶ÅÊ≥®ÊÑèÂáèÂ∞ëÂõûË°®ÁöÑÊ¨°Êï∞ÔºåÂ∏∏Áî®ÁöÑÊñπÊ≥ïÂ∞±ÊòØË¶ÜÁõñÁ¥¢Âºï„ÄÅ‰ΩøÁî®ÊúÄÂ∑¶ÂâçÁºÄÂéüÂàôÂ∞ΩÈáèÂáèÂ∞ëÁ¥¢ÂºïÁöÑÂª∫Á´ãÔºåÂêåÊó∂Ê≥®ÊÑèÂèØ‰ª•‰ΩøÁî®Á¥¢Âºï‰∏ãÊé®Êù•ÂáèÂ∞ëÂõûË°®ÁöÑÊ¨°Êï∞„ÄÇ Â•ΩÂãíÔºåÊï∞ÊçÆÂ∫ìÂ∑Æ‰∏çÂ§ö‰∫ÜÔºåÊúÄÂêéËÆ≤‰∏ÄËÆ≤ËåÉÂºèÂêß mysql‰∏≠Â∏∏Áî®ÁöÑËåÉÂºèÂ∞±ÊòØ‰∏âÂ§ßËåÉÂºè Á¨¨‰∏ÄËåÉÂºèÔºöÁ°Æ‰øùÊØèÂàóÁöÑÂéüÂ≠êÊÄßÔºåÊØîÂ¶ÇËØ¥Âú∞ÂùÄËøô‰∏ÄÂ±ûÊÄßÔºåÊúâÁöÑ‰∏öÂä°ÂèØËÉΩÂØπÂüéÂ∏ÇÁî®ÁöÑÊØîËæÉÂ§öÔºåÊàë‰ª¨Â∞±Â∞±Â∫îËØ•ÁªÜÂàÜÔºåËøôÊ†∑Âú®ÂØπÁî®Êà∑‰ΩøÁî®ÂüéÂ∏ÇËøõË°åÂàÜÁ±ªÁöÑÊó∂ÂÄôÂ∞±ÈùûÂ∏∏Êñπ‰æøÔºå‰πüÊèêÈ´ò‰∫ÜÊï∞ÊçÆÂ∫ìÁöÑÊÄßËÉΩ„ÄÇ Á¨¨‰∫åËåÉÂºèÔºöÁ°Æ‰øùË°®‰∏≠ÁöÑÊØèÂàóÈÉΩÂíå‰∏ªÈîÆÁõ∏ÂÖ≥ÔºåÂéªÈô§ÈÉ®ÂàÜ‰æùËµñ„ÄÇÊúÄÂÖ∏ÂûãÁöÑÂú∫ÊôØÂ∞±ÊòØÂ§öÂØπÂ§öÁöÑÂú∫ÊôØÔºåÊØîÂ¶ÇËÆ¢Âçï-ÂïÜÂìÅË°®ÔºåÂõ†‰∏∫ËÆ¢Âçï‰∏≠ÂèØËÉΩ‰ºöÊúâÂ§öÁßçÂïÜÂìÅÔºåÊâÄ‰ª•Ë¶ÅÂ∞ÜËÆ¢ÂçïÁºñÂè∑ÂíåÂïÜÂìÅÁºñÂè∑‰Ωú‰∏∫Êï∞ÊçÆÂ∫ìË°®ÁöÑËÅîÂêà‰∏ªÈîÆÔºåÂ¶ÇÊûúÊ≠§Êó∂ÊääÂïÜÂìÅ‰ø°ÊÅØ‰πüÂÜôÂú®Ëøô‰∏™Ë°®‰∏≠ÔºåÂ∞±‰∏çÁ¨¶ÂêàÁ¨¨‰∫åËåÉÂºè‰∫ÜÔºåËøôÊ†∑‰ºöÈÄ†ÊàêÊï∞ÊçÆÂÜó‰ΩôÔºåÂàÜË°®‰ºöÊõ¥Â•Ω„ÄÇ Á¨¨‰∏âËåÉÂºèÔºöÁ°Æ‰øùÊ≤°Êúâ‰º†ÈÄí‰æùËµñÔºå‰πüÂ∞±ÊòØÊØè‰∏™Èùû‰∏ªÂ±ûÊÄßÈÉΩË¶Å‰æùËµñ‰∫é‰∏ªÂ±ûÊÄßÔºå‰æãÂ¶ÇËÆ¢ÂçïË°®ÔºåÂíåÁî®Êà∑ÊòØ‰∏ÄÂØπÂ§öÁöÑÂÖ≥Á≥ªÔºåÊ≠§Êó∂Áî®Êà∑ÁöÑid‰ºöÊòØËøô‰∏™Ë°®ÁöÑÂ§ñÈîÆÔºåÂ¶ÇÊûúÂú®ËøôÈáåÂä†‰∏äÁî®Êà∑ÁöÑÂêçÂ≠óÔºåÂ∞±ËøùÂèç‰∫ÜÁ¨¨‰∏âËåÉÂºèÔºå‰πüÊòØ‰ºöÈÄ†ÊàêÊï∞ÊçÆÁöÑÂÜó‰ΩôÁöÑ„ÄÇ ÂèÇËÄÉ: https://www.cnblogs.com/linjiqin/archive/2012/04/01/2428695.html 2020.3.28 15:30 - 16:30 „Äå60 ÂàÜÈíü„ÄçËÖæËÆØ‰∫åÈù¢ÁîµËØùÈù¢„ÄÇËøô‰∏ÄËΩÆÈù¢ËØïË≤å‰ººÊ≤°ÈÅáÂà∞‰ªÄ‰πàÂ§ßÈóÆÈ¢òÔºåÈóÆÁöÑÈóÆÈ¢ò‰πü‰∏çÈöæÔºåÊ≤°‰ªÄ‰πàÂ§™Â§ßÂç∞Ë±°‰∫Ü‚Ä¶ Âè™ËÆ∞Âæó‰∏Ä‰∏™ÂÖ≥‰∫éÂÜÖÂ≠òÁöÑ„ÄÇ GC roots ÊúâÂì™‰∫õÁ±ªÂûãÔºü Â∞±ÊòØÈÇ£‰∫õÁ°Æ‰øùÂ≠òÊ¥ªÁöÑÂØπË±°Ôºå‰æãÂ¶Ç Ê†à‰∏≠Êú¨Âú∞ÂèòÈáèË°®‰∏≠ÂºïÁî®ÁöÑÂØπË±°Ôºõ native ÊñπÊ≥ïÊ†à‰∏≠ÂºïÁî®ÁöÑÂØπË±°Ôºõ ÊñπÊ≥ïÂå∫(non-heap)‰∏≠ÁöÑÁ±ªÈùôÊÄÅÂ±ûÊÄßÂºïÁî®ÁöÑÂèòÈáèÔºõ ÊñπÊ≥ïÂå∫(non-heap)‰∏≠ÁöÑÂ∏∏ÈáèÂºïÁî®ÁöÑÂØπË±°Ôºõ ‰∏∫‰ªÄ‰πàË¶ÅÈÄâÂÆöËøô‰∫õÂØπË±°‰∏∫ GC rootsÔºü Âõ†‰∏∫ gc ÁöÑÁõÆÁöÑÊòØÂõûÊî∂ÈÇ£‰∫õ‰∏çÁî®ÁöÑÂØπË±°ÔºåËøô‰∫õÂØπË±°ÂèØ‰ª•Á°Æ‰øùÈúÄË¶ÅÁî®Âà∞ÔºåÊâÄ‰ª•ËÇØÂÆöÂ∞±‰∏çËÉΩÂõûÊî∂„ÄÇ Â¶Ç‰ΩïÂà§Êñ≠‰∏Ä‰∏™ÂØπË±°‰∏çÂèØËææÔºü‰∏æ‰∏™ÂÖ∑‰ΩìÁöÑ‰æãÂ≠êÔºü ÂΩì‰∏Ä‰∏™ÂØπË±°Âà∞ GC roots ÁöÑÂØπË±°Ê≤°Êúâ‰ªª‰ΩïÂºïÁî®ÈìæÁõ∏ËøûÔºåËøô‰∏™ÂØπË±°Â∞±ÊòØ‰∏çÂèØÁî®ÁöÑÔºåÊúÄÂÖ∏ÂûãÁöÑ‰æãÂ≠êÂ∞±ÊòØ 123&gt; A a = new A();&gt; a = null;&gt; Ê≠§Êó∂ a ÂºÄÂßãÊåáÂêëÁöÑÂØπË±°ÔºåÂ∑≤ÁªèÊ≤°Êúâ GC rootsÁöÑÂØπË±°ÊåáÂêëÂÆÉ‰∫ÜÔºåÊâÄ‰ª•ÂÆÉÂ∫îËØ•Ë¢´Ê†áËÆ∞‰∏∫‰∏çÂèØËææÔºåÊàë‰ª¨ÂßãÁªàÊ≥®ÊÑèÁöÑÊòØÔºåÂõûÊî∂ÁöÑÊ∞∏ËøúÈÉΩÊòØÂ†Ü‰∏äÁöÑ‰∏çÂèØÁî®ÂØπË±°ÔºåÂΩìÁÑ∂ÂÆÉ‰πüÊúâËá™ÊïëÁöÑÊú∫‰ºöÔºåÂ∞±ÊòØ A Ëøô‰∏™Á±ªÈáçÂÜô finalize() ÊñπÊ≥ïÔºåÁÑ∂ÂêéÂú®ÈáåÈù¢Âä†‰∏ä B.b = thisÔºåËøôÈáåÂÅáËÆæ b ÊòØÁ±ª B ÁöÑ‰∏Ä‰∏™ÈùôÊÄÅÂèòÈáèÔºåËøôÊ†∑Ëøô‰∏™ÂØπË±°‰æùÊóß‰∏ç‰ºöË¢´ÂõûÊî∂ÔºåÂõ†‰∏∫Êúâ GC roots Âà∞ÂÆÉÁöÑÂºïÁî®Èìæ„ÄÇ Ê†πÊêúÁ¥¢ÁÆóÊ≥ïÊòØÂ¶Ç‰ΩïÂéªÂÆûÁé∞ÁöÑÂë¢Ôºü HotSpotÈ¶ñÂÖàÈúÄË¶ÅÊûö‰∏æÊâÄÊúâÁöÑGC RootsÊ†πËäÇÁÇπÔºåËôöÊãüÊú∫Ê†àÁöÑÁ©∫Èó¥‰∏çÂ§ßÔºåÈÅçÂéÜ‰∏ÄÊ¨°ÁöÑÊó∂Èó¥ÊàñËÆ∏ÂèØ‰ª•Êé•ÂèóÔºå‰ΩÜÊòØÊñπÊ≥ïÂå∫ÁöÑÁ©∫Èó¥ÂæàÂèØËÉΩÂ∞±ÊúâÊï∞ÁôæÂÖÜÔºåÈÅçÂéÜ‰∏ÄÊ¨°ÈúÄË¶ÅÂæà‰πÖ„ÄÇÊõ¥Âä†ÂÖ≥ÈîÆÁöÑÊòØÔºåÂΩìÊàë‰ª¨ÈÅçÂéÜÊâÄÊúâGC RootsÊ†πËäÇÁÇπÊó∂ÔºåÊàë‰ª¨ÈúÄË¶ÅÊöÇÂÅúÊâÄÊúâÁî®Êà∑Á∫øÁ®ãÔºåÂõ†‰∏∫Êàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™Ê≠§Êó∂Ê≠§ÂàªÁöÑ‚ÄùËôöÊãüÊú∫Âø´ÁÖß‚ÄùÔºåÊâæÂà∞Ê≠§Êó∂Ê≠§ÂàªÁöÑÂèØËææÊÄßÂàÜÊûêÂÖ≥Á≥ªÂõæ„ÄÇÂü∫‰∫éËøôÁßçÊÉÖÂÜµÔºåHotSpotÂÆûÁé∞‰∫Ü‰∏ÄÁßçÂè´ÂÅöOopMapÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂ≠òÂÇ®GC RootsÂØπË±°ÔºåÂêåÊó∂Âπ∂‰∏çÊòØÊØè‰∏™Êåá‰ª§ÈÉΩ‰ºöÂØπOopMapËøõË°å‰øÆÊîπÔºåËøôÊ†∑OopMapÂæàÂ∫ûÂ§ßÔºåËøôÈáåHotspotÂºïÂÖ•‰∫ÜÂÆâÂÖ®ÁÇπÔºåsafePointÔºåÂè™‰ºöÂú®Safe PointÂ§ÑËÆ∞ÂΩïGC Roots‰ø°ÊÅØ„ÄÇËøô‰πüÂ∞±ÊòØ CMS Â∏∏ËØ¥ÁöÑÂàùÂßãÈò∂ÊÆµÁöÑÁ¨¨‰∏ÄÊ≠•ÔºåÂÖàÊää GC roots ÊâæÂà∞ÔºåÁÑ∂ÂêéÂéªÊ†áËÆ∞ÈÇ£‰∫õ‰∏é GC roots Áõ∏ÂÖ≥ÁöÑÂØπË±°ÔºåÊàë‰∏™‰∫∫ËÆ§‰∏∫Âú® gc roots ‰∏≠‰ºöÊ†áËÆ∞ÂºïÁî®‰∫Ü‰ªñÁöÑÂØπË±°ÁöÑÁ¨¶Âè∑ÂºïÁî®ÁöÑ‰ΩçÁΩÆÔºåËøôÊ†∑Â∞±ËÉΩÂ§üÂÆûÁé∞ÊâæÂà∞ GC roots Áõ∏ÂÖ≥ÁöÑÂØπË±°‰∫ÜÔºåËøô‰∏™Ë∑üÁ±ªÂä†ËΩΩËøáÁ®ãÁöÑÂä†ËΩΩËøáÁ®ãÁöÑÁ¨¨‰∏â‰∏™Âä®‰Ωú‰∏ÄÊ†∑ÔºåÂú®Â†Ü‰∏ä Âéª new ‰∏Ä‰∏™ÂØπË±°‰Ωú‰∏∫‰∏Ä‰∏™Á±ªÁöÑÂÖ•Âè£ÔºåÈÇ£Ëøô‰∏™ÂØπË±°ËÇØÂÆöÊòØÁü•ÈÅìÊñπÊ≥ïÂå∫‰∏≠Á±ªÁöÑ‰ΩçÁΩÆÁöÑÔºåÊâÄ‰ª•Â∞±ÊòØËØ¥ÂºïÁî®‰∫Ü gc rootsÁöÑÂØπË±°ÁöÑÂºïÁî®ÈìæÈÉΩ‰ºöÊúâËÆ∞ÂΩï„ÄÇ ‰∏äÈù¢ËØ¥ÁöÑËôöÊãüÊú∫Âø´ÁÖßÊòØ‰ªÄ‰πà‰∏úË•øÔºü Âø´ÁÖßÔºåÂ∞±ÊòØÂ≠òÂÇ®Âú®Ëøô‰∏™ÁÇπ‰∏äÁöÑÊâÄÊúâvmÁöÑÁä∂ÊÄÅÔºåÂåÖÊã¨ÂÜÖÂ≠òÂíåÁ°¨ÁõòÔºåÂΩìÁÑ∂‰πüÂ∞±ÂåÖÊã¨‰∫ÜÊñπÊ≥ïÂå∫‰∏≠ÁöÑ GC roots Ê†πËäÇÁÇπ„ÄÇ ÂõûÊî∂ÁöÑËøáÁ®ãÊòØÊÄéÊ†∑ÁöÑÔºü ËøôÈáå‰ª• cms Êî∂ÈõÜÂô®‰∏∫‰ª£Ë°®„ÄÇ ÂàùÂßãÊ†áËÆ∞ÔºöÂÖàÂéªÂà§Êñ≠ÂØπË±°ÁöÑÂèØËææÊÄßÔºåÂ¶ÇÊûú‰∏çÂèØËææÔºåÊ†áËÆ∞‰∏∫ deadÔºåÁÑ∂ÂêéÁúãÊòØÂê¶ÊúâÁªßÊâø finalize ÊñπÊ≥ïÔºåÊ≤°ÊúâÁöÑËØùÁõ¥Êé•Ê†áËÆ∞‰∏∫ÈúÄË¶Å gcÔºåÂ¶ÇÊûúÁªßÊâø‰∫ÜÁúãÊòØÂê¶ÊòØÁ¨¨‰∏ÄÊ¨°ÊâßË°åÔºåÊòØÁ¨¨‰∏ÄÊ¨°ÊâßË°åÊääÂÖ∂Ê†áËÆ∞‰∏∫ aliveÔºåÂê¶ÂàôÊ†áËÆ∞‰∏∫ dead„ÄÇ Âπ∂ÂèëÊ†áËÆ∞ÔºösafepointÂà∞Ëææ‰πãÂêéÔºå‰∏ÄËæπÁªßÁª≠Ê†áËÆ∞ËøòÂèØ‰ª•‰∏ÄËæπËÆ©Áî®Êà∑Âπ∂Ë°åÔºõ ÊúÄÁªàÊ†áËÆ∞ÔºöÂú®ËÆ©Áî®Êà∑Á®ãÂ∫èÂπ∂Ë°åÁöÑËøáÁ®ã‰∏≠ÔºåËøò‰ºö‰∫ßÁîü gc ÁöÑÂØπË±°ÔºåÊâÄ‰ª•ËøòÈúÄË¶ÅÂÜçÊ†áËÆ∞‰∏Ä‰∏ãÔºõ Âπ∂ÂèëÊ∏ÖÈô§ÔºöÂ§öÁ∫øÁ®ãÊ∏ÖÈô§„ÄÇ ‰∏∫‰ªÄ‰πàË¶ÅÂ∞ÜÂØπË±°ÂàÜ‰∏∫Êñ∞Áîü‰ª£ËÄÅÂπ¥‰ª£ Êó©ÊúüÊèêÂá∫Ëøô‰∏™ÂàÜ‰ª£ÁöÑÊÄùÊÉ≥ÊàëËÆ§‰∏∫‰∏ªË¶ÅÊòØËß£ÂÜ≥ stop the worldÁöÑÊó∂Èó¥ÈïøÂ∫¶ÔºåÂõ†‰∏∫Â¶ÇÊûúÊó∂Èó¥Â§™ÈïøÂæàÂΩ±ÂìçÁî®Êà∑‰ΩìÈ™åÔºåÊâÄ‰ª•Âè™ÂéªÊâ´ÂèØËÉΩÂæàÂø´Â∞±Ê≠ª‰∫°ÁöÑÈÇ£‰∏Ä‰∫õÂùóÂå∫ÂüüÊòØÂæàÊ≠£Â∏∏ÁöÑÊÉ≥Ê≥ïÔºåËÄåËÄÅÂπ¥‰ª£Áî±‰∫éÈÄÉËøá‰∫ÜÂæàÂ§öÊ¨°gcÔºåËØ¥Êòé‰ªñÊòØÊúâÂú®Ë¢´Ê¥ªË∑É‰ΩøÁî®ÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨Âú®Âπ≥Êó∂ÁöÑgcÁöÑÊó∂ÂÄôÂèØ‰ª•‰∏çÂéªËÄÉËôë‰ªñÔºåËøôÊ†∑Â∞±Âä†Âø´‰∫ÜgcÁöÑÈÄüÂ∫¶Ôºõ ÂêéÊúüÁî±‰∫éÂºïÂÖ•‰∫ÜÂπ∂Ë°åÊú∫Âà∂Ôºå‰πüÂ∞±ÊòØÁî®Êà∑ËøõÁ®ãÂíåÂûÉÂúæÂõûÊî∂ËøõÁ®ãÂèØ‰ª•ÂêåÊ≠•ËøõË°åÔºåÂπ∂‰∏îÂèØ‰ª•Â§öÁ∫øÁ®ãËøõË°åÂõûÊî∂ÔºåÈÇ£ stop the world Ëøô‰∏™Êó∂Èó¥Â∞±‰∏çÊòØÈáçÁÇπ‰∫ÜÔºåÈáçÁÇπÂ∞±Âú®‰∫éGCËÉΩÂ§üÂ∫î‰ªòÁöÑÂ∫îÁî®ÂÜÖÂ≠òÂàÜÈÖçÈÄüÁéá(allocation rate)Ôºå‰πüÂ∞±ÊòØËØ¥ gc ÁöÑÂõûÊî∂ÈÄüÂ∫¶Ë¶ÅË∑ü‰∏äÂ∫îÁî®ÁöÑÂàÜÈÖçÂÜÖÂ≠òÁöÑÈÄüÂ∫¶ÔºåÊâÄ‰ª•Ëøô‰∏™Êó∂ÂÄôÔºågcËÇØÂÆöÊòØÈÄâÊã©ÁñØÁãÇÂõûÊî∂ÈÇ£ÁßçÂõûÊî∂ÁéáÂæàÈ´òÁöÑÂå∫ÂüüÔºåÂÖ∂‰ªñÂõûÊî∂Áéá‰∏çÈ´òÁöÑËÇØÂÆöÂæóÁ≠âÁ≠â„ÄÇ ÊâÄ‰ª•ÔºåÂâçËÄÖÊòØ‰ªéÊó∂Èó¥ËßíÂ∫¶ËÄÉËôëÔºåÊâÄ‰ª•Êàë‰ª¨ÈúÄË¶ÅÂàÜ‰ª£ÔºåÂõ†‰∏∫Êâ´Â∞èÂå∫ÂüüÊØîÊâ´Â§ßÂå∫ÂüüÊó∂Èó¥Êõ¥Áü≠Ôºõ ËÄåÂêéËÄÖÂàôÊòØ‰ªéËøΩËµ∂Áî®Êà∑ÂàÜÈÖçÂÜÖÂ≠òÁöÑËßíÂ∫¶ËÄÉËôëÔºåÈúÄË¶ÅÂàÜ‰ª£ÔºåËøôÊ†∑Êâ´ÁöÑÂå∫ÂüüÁöÑÂõûÊä•ÁéáÊõ¥È´ò„ÄÇ Êîæ‰∏Ä‰∏™ÈìæÊé•ÔºåÂÜôÁöÑËøòÊòØÊØîËæÉÊúâÊù°ÁêÜÁöÑÔºöhttps://allenwu.itscoder.com/java-gc 2020.3.29 15:00 - 17:30 „Äå150 ÂàÜÈíü„Äç ËÖæËÆØ‰∏âÈù¢ËßÜÈ¢ëÈù¢„ÄÇËøô‰∏ÄÈù¢ÂâçÈù¢Èù¢ÁöÑËøòÁÆóokayÔºå‰ΩÜÊòØÊúÄÂêé‰ª£Á†ÅÊíï‰∫Ü‰∏Ä‰∏™Â§öÂ∞èÊó∂ÔºåÁîüÊ≠ªÊú™Âçú‰∫Ü‚Ä¶ ‰∏ªË¶ÅÈóÆÈ¢òËøòÊòØÂú®ËÆ°ÁÆóÊú∫ÁΩëÁªúÊñπÈù¢Âêß„ÄÇ Â§ßÁ´ØÂ∞èÁ´ØÊòØ‰ªÄ‰πàÔºüËØ¶ÁªÜÂèôËø∞‰∏Ä‰∏ãÔºü Â§ßÁ´ØÂíåÂ∞èÁ´ØÊòØÊåáÊï∞ÊçÆÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂ≠òÂÇ®Ê®°ÂºèÔºåÂÆÉÁî± CPU ÂÜ≥ÂÆöÔºö 1) Â§ßÁ´ØÊ®°ÂºèÔºàBig-endianÔºâÊòØÊåáÂ∞ÜÊï∞ÊçÆÁöÑ‰Ωé‰ΩçÔºàÊØîÂ¶Ç 1234 ‰∏≠ÁöÑ 34 Â∞±ÊòØ‰Ωé‰ΩçÔºâÊîæÂú®ÂÜÖÂ≠òÁöÑÈ´òÂú∞ÂùÄ‰∏äÔºåËÄåÊï∞ÊçÆÁöÑÈ´ò‰ΩçÔºàÊØîÂ¶Ç 1234 ‰∏≠ÁöÑ 12 Â∞±ÊòØÈ´ò‰ΩçÔºâÊîæÂú®ÂÜÖÂ≠òÁöÑ‰ΩéÂú∞ÂùÄ‰∏ä„ÄÇËøôÁßçÂ≠òÂÇ®Ê®°ÂºèÊúâÁÇπÂÑøÁ±ª‰ºº‰∫éÊääÊï∞ÊçÆÂΩì‰ΩúÂ≠óÁ¨¶‰∏≤È°∫Â∫èÂ§ÑÁêÜÔºåÂú∞ÂùÄÁî±Â∞èÂà∞Â§ßÂ¢ûÂä†ÔºåËÄåÊï∞ÊçÆ‰ªéÈ´ò‰ΩçÂæÄ‰Ωé‰ΩçÂ≠òÊîæ„ÄÇ 2) Â∞èÁ´ØÊ®°ÂºèÔºàLittle-endianÔºâÊòØÊåáÂ∞ÜÊï∞ÊçÆÁöÑ‰Ωé‰ΩçÊîæÂú®ÂÜÖÂ≠òÁöÑ‰ΩéÂú∞ÂùÄ‰∏äÔºåËÄåÊï∞ÊçÆÁöÑÈ´ò‰ΩçÊîæÂú®ÂÜÖÂ≠òÁöÑÈ´òÂú∞ÂùÄ‰∏ä„ÄÇËøôÁßçÂ≠òÂÇ®Ê®°ÂºèÂ∞ÜÂú∞ÂùÄÁöÑÈ´ò‰ΩéÂíåÊï∞ÊçÆÁöÑÂ§ßÂ∞èÁªìÂêàËµ∑Êù•ÔºåÈ´òÂú∞ÂùÄÂ≠òÊîæÊï∞ÂÄºËæÉÂ§ßÁöÑÈÉ®ÂàÜÔºå‰ΩéÂú∞ÂùÄÂ≠òÊîæÊï∞ÂÄºËæÉÂ∞èÁöÑÈÉ®ÂàÜÔºåËøôÂíåÊàë‰ª¨ÁöÑÊÄùÁª¥‰π†ÊÉØÊòØ‰∏ÄËá¥ÔºåÊØîËæÉÂÆπÊòìÁêÜËß£„ÄÇ ‰∏∫‰ªÄ‰πàÊúâÂ§ßÂ∞èÁ´ØÊ®°Âºè‰πãÂàÜ? ËÆ°ÁÆóÊú∫‰∏≠ÁöÑÊï∞ÊçÆÊòØ‰ª•Â≠óËäÇÔºàByteÔºâ‰∏∫Âçï‰ΩçÂ≠òÂÇ®ÁöÑÔºåÊØè‰∏™Â≠óËäÇÈÉΩÊúâ‰∏çÂêåÁöÑÂú∞ÂùÄ„ÄÇÁé∞‰ª£ CPU ÁöÑ‰ΩçÊï∞ÔºàÂèØ‰ª•ÁêÜËß£‰∏∫‰∏ÄÊ¨°ËÉΩÂ§ÑÁêÜÁöÑÊï∞ÊçÆÁöÑ‰ΩçÊï∞ÔºâÈÉΩË∂ÖËøá‰∫Ü 8 ‰ΩçÔºà‰∏Ä‰∏™Â≠óËäÇÔºâÔºåPCÊú∫„ÄÅÊúçÂä°Âô®ÁöÑ CPU Âü∫Êú¨ÈÉΩÊòØ 64 ‰ΩçÁöÑÔºåÂµåÂÖ•ÂºèÁ≥ªÁªüÊàñÂçïÁâáÊú∫Á≥ªÁªü‰ªçÁÑ∂Âú®‰ΩøÁî® 32 ‰ΩçÂíå 16 ‰ΩçÁöÑ CPU„ÄÇ ÂØπ‰∫é‰∏ÄÊ¨°ËÉΩÂ§ÑÁêÜÂ§ö‰∏™Â≠óËäÇÁöÑCPUÔºåÂøÖÁÑ∂Â≠òÂú®ÁùÄÂ¶Ç‰ΩïÂÆâÊéíÂ§ö‰∏™Â≠óËäÇÁöÑÈóÆÈ¢òÔºå‰πüÂ∞±ÊòØÂ§ßÁ´ØÂíåÂ∞èÁ´ØÊ®°Âºè„ÄÇ‰ª• int Á±ªÂûãÁöÑ 0x12345678 ‰∏∫‰æãÔºåÂÆÉÂç†Áî® 4 ‰∏™Â≠óËäÇÔºåÂ¶ÇÊûúÊòØÂ∞èÁ´ØÊ®°ÂºèÔºàLittle-endianÔºâÔºåÈÇ£‰πàÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂàÜÂ∏ÉÊÉÖÂÜµ‰∏∫ÔºàÂÅáËÆæ‰ªéÂú∞ÂùÄ 0x 4000 ÂºÄÂßãÂ≠òÊîæÔºâÔºö ÂÜÖÂ≠òÂú∞ÂùÄ 0x4000 0x4001 0x4002 0x4003Â≠òÊîæÂÜÖÂÆπ 0x78 0x56 0x34 0x12 Â¶ÇÊûúÊòØÂ§ßÁ´ØÊ®°ÂºèÔºàBig-endianÔºâÔºåÈÇ£‰πàÂàÜÂ∏ÉÊÉÖÂÜµÊ≠£Â•ΩÁõ∏ÂèçÔºö ÂÜÖÂ≠òÂú∞ÂùÄ 0x4000 0x4001 0x4002 0x4003Â≠òÊîæÂÜÖÂÆπ 0x12 0x34 0x56 0x78 Êàë‰ª¨ÁöÑ PC Êú∫‰∏ä‰ΩøÁî®ÁöÑÊòØ X86 ÁªìÊûÑÁöÑ CPUÔºåÂÆÉÊòØÂ∞èÁ´ØÊ®°ÂºèÔºõ51 ÂçïÁâáÊú∫ÊòØÂ§ßÁ´ØÊ®°ÂºèÔºõÂæàÂ§ö ARM„ÄÅDSP ‰πüÊòØÂ∞èÁ´ØÊ®°ÂºèÔºàÈÉ®ÂàÜ ARM Â§ÑÁêÜÂô®ËøòÂèØ‰ª•Áî±Á°¨‰ª∂Êù•ÈÄâÊã©ÊòØÂ§ßÁ´ØÊ®°ÂºèËøòÊòØÂ∞èÁ´ØÊ®°ÂºèÔºâ„ÄÇ cookie Âíå sessionÁöÑÂå∫Âà´ cookieÊòØ‰∏∫‰ºöËØùÂ≠òÂÇ®ÁöÑÈîÆÂÄº‰ø°ÊÅØÔºå‰∏çÂèØË∑®ÂüüÂêçÔºàÂè™ËÉΩÊãøÂà∞ÂΩìÂâçÂüüÂêç‰∏ãÁöÑcookieÔºåÂåÖÂê´Áà∂Á∫ßÂüüÂêçÔºâÔºåÊúâÊúâÊïàÊúüÈôêÔºåÊòØÂú®ÂÆ¢Êà∑Á´ØÁöÑÊµèËßàÂô®‰øùÂ≠ò„ÄÇ sessionÊòØÂü∫‰∫éÂÜÖÂ≠òÁöÑÁºìÂ≠òÊäÄÊúØÔºåÁî®Êù•‰øùÂ≠òÈíàÂØπÊØè‰∏™Áî®Êà∑ÁöÑ‰ºöËØùÊï∞ÊçÆÔºåÈÄöËøásession ID Êù•Âå∫ÂàÜÁî®Êà∑ÔºåÂ≠òÂÇ®‰∫éÊúçÂä°Âô®Á´Ø„ÄÇ ÊµèËßàÂô®Âú®Á¨¨‰∏ÄÊ¨°ËØ∑Ê±ÇÊó∂ÔºåÊó†cookieÔºåÁÑ∂ÂêéÊúçÂä°Âô®Êî∂Âà∞ËØ∑Ê±ÇÂêéÔºåÂàõÂª∫‰∏Ä‰∏™ sessionÔºåÁî®sessionid Ê†áËØÜÔºåÂ∞ÜÂÖ∂ÊîæÂÖ•cookie‰∏≠ÔºåÁÑ∂ÂêéÂÆ¢Êà∑Á´Ø‰ª•ÂêéËØ∑Ê±ÇÈÉΩÂ∏¶‰∏äcookieÔºåÊúçÂä°Âô®Á´ØÊî∂Âà∞Ê∂àÊÅØÂêéÔºåËß£ÊûêÈáåÈù¢ÁöÑsessionidÂç≥ÂèØ„ÄÇ java nio ‰∏≠Â¶Ç‰ΩïËß£ÂÜ≥ÂçäÂåÖ„ÄÅÁ≤òÂåÖÈóÆÈ¢òÔºü ÂØπ‰∫éÁ≤òÂåÖÈóÆÈ¢òÂÖàËØªÂá∫ÂåÖÂ§¥Âç≥ÂåÖ‰ΩìÈïøÂ∫¶nÔºåÁÑ∂ÂêéÂÜçËØªÂèñÈïøÂ∫¶‰∏∫nÁöÑÂåÖÂÜÖÂÆπÔºåËøôÊ†∑Êï∞ÊçÆÂåÖ‰πãÈó¥ÁöÑËæπÁïåÂ∞±Ê∏ÖÊ•ö‰∫Ü„ÄÇ ÂØπ‰∫éÂçäÂåÖÈóÆÈ¢òÂÖàËØªÂá∫ÂåÖÂ§¥Âç≥ÂåÖ‰ΩìÈïøÂ∫¶nÔºåÁî±‰∫éÊ≠§Ê¨°ËØªÂèñÁöÑÁºìÂ≠òÊ±†ÈïøÂ∫¶Â∞è‰∫énÔºåËøôÊó∂ÂÄôÂ∞±ÈúÄË¶ÅÂÖàÁºìÂ≠òËøôÈÉ®ÂàÜÁöÑÂÜÖÂÆπÔºåÁ≠âÂæÖ‰∏ãÊ¨°read‰∫ã‰ª∂Êù•Êó∂ÊãºÊé•Ëµ∑Êù•ÂΩ¢ÊàêÂÆåÊï¥ÁöÑÊï∞ÊçÆÂåÖ„ÄÇ Êï∞ÊçÆÂ∫ì‰∏≠ varchar Âíå char ÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πàÔºü Â≠óÁ¨¶‰∏≤Êï∞ÊçÆÁ±ªÂûã MySQLÊï∞ÊçÆÁ±ªÂûã Âê´‰πâ char(n) Âõ∫ÂÆöÈïøÂ∫¶ÔºåÁî≥ËØ∑ÁöÑÈïøÂ∫¶Â∞±ÊòØÊúÄÁªàÁöÑÈïøÂ∫¶ÔºåÁ±ª‰ºº‰∫éÈùôÊÄÅÊï∞ÁªÑÔºåËã±ÊñáÂç†‰∏Ä‰∏™Â≠óËäÇÔºåÊ±âÂ≠óÂç†‰∏§‰∏™Â≠óËäÇ varchar(n) ÂèØÂèòÈïøÂ∫¶ÔºåÁ±ª‰ºº‰∫éÂèØÂèòÊï∞ÁªÑ‚ÄîÂàóË°®ÔºåËã±ÊñáÂíåÊ±âÂ≠óÈÉΩÂç†‰∏§‰∏™Â≠óËäÇÔºåÂÆûÈôÖÈïøÂ∫¶ÊòØÂÆÉÁöÑÂÄºÁöÑÂÆûÈôÖÈïøÂ∫¶+1 text Â≠òÂÇ®ÂèØÂèòÈïøÂ∫¶ÁöÑÈùûUnicodeÊï∞ÊçÆÔºåÊúÄÂ§ßÈïøÂ∫¶‰∏∫2^31-1‰∏™Â≠óÁ¨¶„ÄÇtextÂàó‰∏çËÉΩÊúâÈªòËÆ§ÂÄºÔºåÂ≠òÂÇ®ÊàñÊ£ÄÁ¥¢ËøáÁ®ã‰∏≠Ôºå‰∏çÂ≠òÂú®Â§ßÂ∞èÂÜôËΩ¨Êç¢ÔºåÂêéÈù¢Â¶ÇÊûúÊåáÂÆöÈïøÂ∫¶Ôºå‰∏ç‰ºöÊä•ÈîôËØØÔºå‰ΩÜÊòØËøô‰∏™ÈïøÂ∫¶ÊòØ‰∏çËµ∑‰ΩúÁî®ÁöÑÔºåÊÑèÊÄùÂ∞±ÊòØ‰Ω†ÊèíÂÖ•Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºåË∂ÖËøá‰Ω†ÊåáÂÆöÁöÑÈïøÂ∫¶ËøòÊòØÂèØ‰ª•Ê≠£Â∏∏ÊèíÂÖ•„ÄÇ ÁªèÂ∏∏ÂèòÂåñÁöÑÂ≠óÊÆµÁî®varcharÔºõ Áü•ÈÅìÂõ∫ÂÆöÈïøÂ∫¶ÁöÑÁî®charÔºõ Â∞ΩÈáèÁî® varcharÔºõ Ë∂ÖËøá255Â≠óËäÇÁöÑÂè™ËÉΩÁî®varcharÊàñËÄÖtextÔºõ ËÉΩÁî®varcharÁöÑÂú∞Êñπ‰∏çÁî®textÔºõ Ë∂ÖÈïøÁöÑÔºå‰æãÂ¶ÇÂ≠òÂÇ®Êï¥‰∏™htmlÁî®text„ÄÇ ÁÑ∂ÂêéÂ∞±‰∏ÄÁõ¥Âú®ËÅäÈ°πÁõÆ‰∫ÜÊúÄÂêéÂá∫‰∫Ü‰∏ÄÈÅìÁÆóÊ≥ïÈ¢òÔºåÂ∞±ÊòØ LeetCode ‰∏äÁöÑÊ±Ç‰∏ã‰∏Ä‰∏™ÊéíÂàóÊï∞ÁöÑÂèò‰ΩìÈ¢òÔºåÊàëÁ´üÁÑ∂‚Ä¶Á¥ßÂº†‰∫Ü‚Ä¶ 2020.3.30 17:24 - 18:30 „Äå66 ÂàÜÈíü„Äç ÈòøÈáå‰∫åÈù¢ÁîµËØùÈù¢„ÄÇËøô‰∏ÄÈù¢ÔºåÈ°πÁõÆ‰∏∫‰∏ªÔºåÂü∫Á°ÄÁü•ËØÜ‰∏∫ËæÖÔºåÈáçÁÇπÊòØÈúÄË¶ÅÂ∞ÜËá™Â∑±ÂÅöÁöÑÈ°πÁõÆÁî®ÊØîËæÉÊ∏ÖÊ•öÁöÑËØùËØ≠Ë°®Ëø∞Ê∏ÖÊ•öÔºåËÆ©Èù¢ËØïÂÆòËÉΩÂ§üÊúÄÁü≠Êó∂Èó¥‰∫ÜËß£Âà∞‰Ω†ÂÅöÁöÑÈ°πÁõÆÔºåÂêåÊó∂ÂàáÂøåÊ≥®ÊÑèÔºåËá™Â∑±‰∏ç‰∫ÜËß£‰∏çÊ∑±ÂÖ•ÁöÑÁü•ËØÜÁÇπÂ∞ΩÈáè‰∏çË¶ÅÊèêÂèäÔºåËøôÊòØÂ§ßÂøå„ÄÇ ÂΩìÂ∞Ü‰∏öÂä°Ê∞¥Âπ≥ÂàÜÂ∫ìÂêéÔºåËΩ¨Ë¥¶‰∏öÂä°Â¶Ç‰Ωï‰øùËØÅ‰∫ãÂä°ÁöÑ‰∏ÄËá¥ÊÄßÔºü ËøôÊòØÂÖ∏ÂûãÁöÑÂàÜÂ∏ÉÂºè‰∫ãÂä°ÔºåÁêÜËÆ∫Êúâ CAP „ÄåC (‰∏ÄËá¥ÊÄß)ÔºåA (ÂèØÁî®ÊÄß)ÔºåP (ÂàÜÂå∫ÂÆπÈîôÊÄß)ÔºåÂè™ËÉΩÈÄâÊã© AP or CP„ÄçÔºåBASE„ÄåBasically Available(Âü∫Êú¨ÂèØÁî®)„ÄÅSoft state(ËΩØÁä∂ÊÄÅ)Âíå Eventually consistent (ÊúÄÁªà‰∏ÄËá¥ÊÄß)‰∏â‰∏™Áü≠ËØ≠ÁöÑÁº©ÂÜô„ÄÇÊòØÂØπCAP‰∏≠APÁöÑ‰∏Ä‰∏™Êâ©Â±ï„Äç Â∏∏ËßÅÁöÑÂàÜÂ∏ÉÂºèËß£ÂÜ≥ÊñπÊ°àÔºö 2PCÔºå‰∏§Èò∂ÊÆµÊèê‰∫§Ôºå‰∫ãÂä°ÁÆ°ÁêÜÂô®Êù•ÂçèË∞ÉÔºåÂÖ®ÈÉ®okay‰∫ÜÊâçokayÔºåËøôÊ†∑ÊïàÁéáÂæà‰ΩéÔºåÂõ†‰∏∫ÊòØÂ¶ÇÊûúÊ≤°ÊàêÂäüÂ∞±‰∏ÄÁõ¥ÈòªÂ°û„ÄÇ TCCÔºàTry-Confirm-CancelÔºâÊúÄÂ§ßÂä™Âäõ‰∫§‰ªòÔºåÂú®Êõ¥Êñ∞Â§ö‰∏™ËµÑÊ∫êÊó∂ÔºåÂ∞ÜÂ§ö‰∏™ËµÑÊ∫êÁöÑÊèê‰∫§Â∞ΩÈáèÂª∂ÂêéÂà∞ÊúÄÂêé‰∏ÄÂàªÂ§ÑÁêÜÔºåËøôÊ†∑ÁöÑËØùÔºåÂ¶ÇÊûú‰∏öÂä°ÊµÅÁ®ãÂá∫Áé∞ÈóÆÈ¢òÔºåÂàôÊâÄÊúâÁöÑËµÑÊ∫êÊõ¥Êñ∞ÈÉΩÂèØ‰ª•ÂõûÊªöÔºå‰∫ãÂä°‰ªçÁÑ∂‰øùÊåÅ‰∏ÄËá¥„ÄÇÂîØ‰∏ÄÂèØËÉΩÂá∫Áé∞ÈóÆÈ¢òÁöÑÊÉÖÂÜµÊòØÂú®Êèê‰∫§Â§ö‰∏™ËµÑÊ∫êÊó∂ÂèëÁîü‰∫ÜÁ≥ªÁªüÈóÆÈ¢òÔºåÊØîÂ¶ÇÁΩëÁªúÈóÆÈ¢òÁ≠âÔºå‰ΩÜÊòØËøôÁßçÊÉÖÂÜµÊòØÈùûÂ∏∏ÁΩïËßÅÁöÑÔºå‰∏ÄÊó¶Âá∫Áé∞ËøôÁßçÊÉÖÂÜµÔºåÂ∞±ÈúÄË¶ÅËøõË°åÂÆûÊó∂Ë°•ÂÅøÔºåÂ∞ÜÂ∑≤Êèê‰∫§ÁöÑ‰∫ãÂä°ËøõË°åÂõûÊªö„ÄÇ ‰∫ãÂä°Ë°•ÂÅøÊú∫Âà∂„ÄÇÂú®Êï∞ÊçÆÂ∫ìÂàÜÂ∫ìÂàÜË°®ÂêéÔºåÂ¶ÇÊûúÊ∂âÂèäÁöÑÂ§ö‰∏™Êõ¥Êñ∞Êìç‰ΩúÂú®Êüê‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìËåÉÂõ¥ÂÜÖÂÆåÊàêÔºåÂàôÂèØ‰ª•‰ΩøÁî®Êï∞ÊçÆÂ∫ìÂÜÖÁöÑÊú¨Âú∞‰∫ãÂä°‰øùËØÅ‰∏ÄËá¥ÊÄßÔºõÂØπ‰∫éË∑®Â∫ìÁöÑÂ§ö‰∏™Êìç‰ΩúÔºåÂèØÈÄöËøáË°•ÂÅøÂíåÈáçËØïÔºå‰ΩøÂÖ∂Âú®‰∏ÄÂÆöÁöÑÊó∂Èó¥Á™óÂè£ÂÜÖÂÆåÊàêÊìç‰ΩúÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÂÆûÁé∞‰∫ãÂä°ÁöÑÊúÄÁªà‰∏ÄËá¥ÊÄßÔºåÁ™ÅÁ†¥‰∫ãÂä°ÈÅáÂà∞ÈóÆÈ¢òÂ∞±ÊªöÂõûÁöÑ‰º†ÁªüÊÄùË∑Ø„ÄÇ ÂèÇËÄÉÔºöhttps://juejin.im/post/5b5a0bf9f265da0f6523913b#heading-16 https://cloud.tencent.com/developer/news/200316 ËØ¥ÂÆûËØù‚Ä¶ËøòÊ≤°ÁúãÂ§™ÊáÇ‚Ä¶ zookeeper‰∏≠ÁöÑ‰∏§Èò∂ÊÆµÊèê‰∫§ÊòØÊÄé‰πàÂéªÂÅöÁöÑÔºü CAPÁêÜËÆ∫‰∏≠ÔºåzookeeperÂ∞±ÊòØCPÔºåÊîæÂºÉÂèØÁî®ÊÄßÔºåËøΩÊ±Ç‰∏ÄËá¥ÊÄßÂíåÂàÜÂå∫ÂÆπÈîôÊÄßÔºåËøΩÊ±ÇÁöÑÊòØÂº∫‰∏ÄËá¥„ÄÇ Âú®È°πÁõÆ‰∏≠ÂÅáÂ¶Ç‰∏ÄÁ∫ßË∞ÉÂ∫¶Âô®ÊåÇ‰∫ÜÔºåÊÄé‰πàÂ§ÑÁêÜÔºü ÊàëËØ¥Ê≤°Â§ÑÁêÜ‚Ä¶Ê≠£Â∏∏Â∫îËØ•ÊòØÁ±ª‰ºº‰∫é Mysql ‰∏ÄÊ†∑Êúâ‰∏™‰∏ªÂ§áÂàáÊç¢ÁöÑÊú∫Âà∂„ÄÇ SpringBoot‰∏≠ÁöÑ AOP ÂàÜ‰∏∫Âá†Á±ªÔºå AOP ‰∏ªË¶ÅÊòØ‰∏§ÁßçÊñπÂºèÔºå‰∏ÄÁßçÊòØÁõ¥Êé•ÈÄöËøá JDK Âä®ÊÄÅ‰ª£ÁêÜÔºå‰∏ÄÁßçÊòØÈÄöËøácglib„ÄÇ ÂÖàÊù•ÂõûÈ°æ‰∏Ä‰∏ã Spring ‰∏≠ AOP ÁöÑÊµÅÁ®ãÔºö ‰ª£ÁêÜÁöÑÂàõÂª∫„ÄÇ ÈúÄË¶ÅÂàõÂª∫‰ª£ÁêÜÂ∑•ÂéÇÔºå‰ª£ÁêÜÂ∑•ÂéÇÈúÄË¶Å 3 ‰∏™ÈáçË¶ÅÁöÑ‰ø°ÊÅØÔºöÊã¶Êà™Âô®Êï∞ÁªÑÔºåÁõÆÊ†áÂØπË±°Êé•Âè£Êï∞ÁªÑÔºåÁõÆÊ†áÂØπË±°„ÄÇ ÂàõÂª∫‰ª£ÁêÜÂ∑•ÂéÇÊó∂ÔºåÈªòËÆ§‰ºöÂú®Êã¶Êà™Âô®Êï∞ÁªÑÂ∞æÈÉ®ÂÜçÂ¢ûÂä†‰∏Ä‰∏™ÈªòËÆ§Êã¶Êà™Âô® ‚Äî‚Äî Áî®‰∫éÊúÄÁªàÁöÑË∞ÉÁî®ÁõÆÊ†áÊñπÊ≥ï„ÄÇ ÂΩìË∞ÉÁî® getProxy ÊñπÊ≥ïÁöÑÊó∂ÂÄôÔºå‰ºöÊ†πÊçÆÊé•Âè£Êï∞ÈáèÂ§ß‰Ωô 0 Êù°‰ª∂ËøîÂõû‰∏Ä‰∏™‰ª£ÁêÜÂØπË±°ÔºàJDK or CglibÔºâ„ÄÇ Ê≥®ÊÑèÔºöÂàõÂª∫‰ª£ÁêÜÂØπË±°Êó∂ÔºåÂêåÊó∂‰ºöÂàõÂª∫‰∏Ä‰∏™Â§ñÂ±ÇÊã¶Êà™Âô®ÔºåËøô‰∏™Êã¶Êà™Âô®Â∞±ÊòØ Spring ÂÜÖÊ†∏ÁöÑÊã¶Êà™Âô®„ÄÇÁî®‰∫éÊéßÂà∂Êï¥‰∏™ AOP ÁöÑÊµÅÁ®ã„ÄÇ ‰ª£ÁêÜÁöÑË∞ÉÁî® ÂΩìÂØπ‰ª£ÁêÜÂØπË±°ËøõË°åË∞ÉÁî®Êó∂ÔºåÂ∞±‰ºöËß¶ÂèëÂ§ñÂ±ÇÊã¶Êà™Âô®„ÄÇ Â§ñÂ±ÇÊã¶Êà™Âô®Ê†πÊçÆ‰ª£ÁêÜÈÖçÁΩÆ‰ø°ÊÅØÔºåÂàõÂª∫ÂÜÖÂ±ÇÊã¶Êà™Âô®Èìæ„ÄÇÂàõÂª∫ÁöÑËøáÁ®ã‰∏≠Ôºå‰ºöÊ†πÊçÆË°®ËææÂºèÂà§Êñ≠ÂΩìÂâçÊã¶Êà™ÊòØÂê¶ÂåπÈÖçËøô‰∏™Êã¶Êà™Âô®„ÄÇËÄåËøô‰∏™Êã¶Êà™Âô®ÈìæËÆæËÆ°Ê®°ÂºèÂ∞±ÊòØËÅåË¥£ÈìæÊ®°Âºè„ÄÇ ÂΩìÊï¥‰∏™ÈìæÊù°ÊâßË°åÂà∞ÊúÄÂêéÊó∂ÔºåÂ∞±‰ºöËß¶ÂèëÂàõÂª∫‰ª£ÁêÜÊó∂ÈÇ£‰∏™Â∞æÈÉ®ÁöÑÈªòËÆ§Êã¶Êà™Âô®Ôºå‰ªéËÄåË∞ÉÁî®ÁõÆÊ†áÊñπÊ≥ï„ÄÇÊúÄÂêéËøîÂõû„ÄÇ ÂèÇËÄÉÔºöhttps://www.jianshu.com/p/e18fd44964eb ËÆ≤ËÆ≤ cglib Â¶Ç‰Ωï‰ΩøÁî®Âπ∂ÂÆûÁé∞ÁöÑÔºü Âä®ÊÄÅ‰ª£ÁêÜÂÜçÁÜüÊÇâ‰∏çËøá‰∫ÜÔºåÊòØÂè™ËÉΩ‰ª£ÁêÜÊé•Âè£ÔºåcglibÁé∞Âú®Êàë‰ª¨Êù•ÂÖ∑‰ΩìÁúã‰∏Ä‰∏ã„ÄÇ Êàë‰ª¨Áü•ÈÅìÔºåÂä®ÊÄÅ‰ª£ÁêÜÊòØ‰ª£ÁêÜÁ±ªÂÆûÁé∞Ë¢´‰ª£ÁêÜÁ±ªÁöÑÊé•Âè£ÔºåËÄåcglibÂàôÊòØ‰ª£ÁêÜÁ±ªÁªßÊâøË¢´‰ª£ÁêÜÁ±ªÔºå‰πüÂ∞±ÊòØÂ≠êÁ±ªÂ¢ûÂº∫Áà∂Á±ªÁöÑÊâãÊÆµ„ÄÇcglibÂÖ∂ÂÆû‰πüÂ∞±ÊòØÂ≠óËäÇÁ†ÅÂ¢ûÂº∫Á±ªÂ∫ì„ÄÇ ÂÖ∑‰ΩìÂ¶Ç‰Ωï‰ΩøÁî® cglibÔºöhttps://zhuanlan.zhihu.com/p/37886319 Âä®ÊÄÅ‰ª£ÁêÜÂíåcglibÁöÑÂå∫Âà´Ôºü ‰∏Ä‰∏™ÊòØ‰ª£ÁêÜÁ±ªÂÆûÁé∞Êé•Âè£Ôºå‰∏Ä‰∏™ÊòØ‰ª£ÁêÜÁ±ªÁªßÊâøÁ±ªÔºåÊàëËßâÂæóÂ∑Æ‰∏çÂ§™Â§ö„ÄÇ Âä®ÊÄÅ‰ª£ÁêÜÁî®Âà∞ÁöÑÊé•Âè£Êúâ InnvocationHandlerÔºåÈÄöËøáÂÆûÁé∞ÂÖ∂ invoke ÊñπÊ≥ïÂ¢ûÂº∫ÊñπÊ≥ïÔºåÂπ∂‰∏îÈÄöËøá Proxy.newInstace() ÂÆûÁé∞‰ª£ÁêÜËøáÁ®ã„ÄÇËÄåcglibÂàô‰ΩøÁî® MethodInterceptor Êé•Âè£ÔºåÈÄöËøáÂÆûÁé∞ÂÖ∂ intercept() ÊñπÊ≥ïÂ¢ûÂº∫ÊñπÊ≥ïÔºåÂπ∂‰∏îÈÄöËøá Enhancer.create() ÊñπÊ≥ïÂÆûÁé∞‰ª£ÁêÜËøáÁ®ã„ÄÇ ‰∏ãÈù¢ÊàëÊîæ‰∏Ä‰∏ãËá™Â∑±ÂÜôÁöÑÂä®ÊÄÅ‰ª£ÁêÜÂíå cglib ÁöÑÂÆûÁé∞ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091// Âä®ÊÄÅ‰ª£ÁêÜÔºåÊÄªÂÖ±ÊúâÂõõ‰∏™Á±ª// 1. Êé•Âè£package AOP.Proxy;public interface Person &#123; void play(); void dance();&#125;// 2. ÂÆûÁé∞Á±ªÔºå‰πüÂ∞±ÊòØË¶ÅË¢´‰ª£ÁêÜÁöÑÁ±ªpackage AOP.Proxy;public class Universities implements Person &#123; @Override public void play() &#123; System.out.println("I like play computer"); &#125; @Override public void dance() &#123; System.out.println("I like dance"); &#125;&#125;// 3. ÂÆûÁé∞ InnocationHandler Êé•Âè£ÔºåÂÆåÊàê‰ª£ÁêÜÁöÑ‰ªªÂä°package AOP.Proxy;import java.lang.reflect.InvocationHandler;import java.lang.reflect.Method;import java.lang.reflect.Proxy;public class Dynamic implements InvocationHandler &#123; // Êï¥ÂÆπÁöÑ‰∫∫ÊòØË∞ÅÔºåÊàëÂæóÁü•ÈÅì private Object obj; public Dynamic(Object obj)&#123; this.obj = obj; &#125; // Êï¥ÂÆπÁöÑËøáÁ®ã public Object myDynamic()&#123; return Proxy.newProxyInstance(this.obj.getClass().getClassLoader(),this.obj.getClass().getInterfaces(),this); &#125; // Êï¥ÂÆπÁöÑÂú∞Êñπ‰∫§‰ª£Ê∏ÖÊ•ö @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; System.out.println("ÂºÄÂßã‰∏∫" + method.getName() + "ÊñπÊ≥ïËøõË°å‰ª£ÁêÜ"); Object result = method.invoke(obj,args); System.out.println("ÁªìÊùü" + method.getName() + "ÊñπÊ≥ïÁöÑ‰ª£ÁêÜ"); return result; &#125;&#125;// 4. ÊµãËØïÁ±ª// ËøôÈáåÊàëÈááÁî®‰∫Ü‰∏§ÁßçÊñπÊ≥ïÊµãËØïÔºå‰∏ÄÁßçÊòØÁõ¥Êé•Âú® test Á±ª‰∏≠ÂÜôÂá∫Êï¥ÂÆπÁöÑËøáÁ®ã// Âè¶Â§ñ‰∏ÄÁßçÊòØÁõ¥Êé•Ë∞ÉÁî®ÊàëÂú® Dynamic Â∑≤ÁªèÂåÖË£ÖÂ•ΩÊï¥ÂÆπËøáÁ®ãÁöÑÊñπÊ≥ïÔºåÂª∫ËÆÆ‰ΩøÁî®ËøôÁßç// Âõ†‰∏∫ËøôÊ†∑‰ª£Á†ÅÂ∞±Â∞ë‰∫ÜÔºå‰∏ãÈù¢ cglib Â∞±ÊòØÈááÁî®ÊñπÊ≥ï‰∫åÂìàpackage AOP.Proxy;import java.lang.reflect.InvocationHandler;import java.lang.reflect.Proxy;public class test &#123; public static void main(String[] args) &#123; // Áõ∏ÂΩì‰∫éÂÅöÁîüÊÑèÁöÑËøáÁ®ãÔºåÊØîÂ¶ÇÊàëÂéªÂåªÈô¢Êï¥ÂÆπÔºåÈ¶ñÂÖàÊàëË¶ÅÁ°Æ‰øùÊàëÊúâÈí±(‰πüÂ∞±ÊòØÊúâÊé•Âè£) Universities person = new Universities(); // ÂÖ∂Ê¨°ÔºåÊàëÂæóÂéªÂåªÈô¢ÊâæÂà∞Áõ∏Â∫îÁöÑÂåªÁîüÔºå‰πüÂ∞±ÊòØÊääÊàëÊÉ≥‰ª£ÁêÜÁöÑÂØπË±°ÔºåÂç≥ÊàëÊú¨‰∫∫ÔºåÂëäÁü•ÁªôÂåªÁîü // ÂåªÁîüËÇØÂÆöÂæóÊúâËÉΩÊï¥ÂÆπÁöÑÊäÄÊúØÔºåÈÇ£Â∞±ÊòØÂæóÁªßÊâø InvocationHandler InvocationHandler dynamic_person = new Dynamic(person); // ËøõË°å‰∫§ÊòìÁöÑËøáÁ®ãÔºå‰∏ÄÊâã‰∫§Èí±‰∏ÄÊâã‰∫§Êç¢ÔºåÂåªÁîüÊãøÂà∞Èí±Ôºå‰ºöËøîÂõû‰∏Ä‰∏™ÊúâÈí±ÁöÑÂ§ÑÁêÜÂ•ΩÁöÑÁæéÂ•≥Ôºå‰πüÂ∞±ÊòØ‰ª£ÁêÜÂÆåÊàê‰∫Ü // ËøôÈáåÂøÖÈ°ªÂº∫Ë∞É‰ª£ÁêÜËøîÂõûÁöÑÊòØ Êé•Âè£ÂØπË±°Ôºå‰πüÂ∞±ÊòØÂåªÁîüÂè™‰ºöÂØπÊúâÈí±‰∫∫ËøõË°å‰ª£ÁêÜÔºåÊ≤°Èí±ÁöÑ‰ª£ÁêÜÂ∞±Â§±Ë¥•‰∫Ü // Â¶ÇÊûúÊúÄÂºÄÂßãÊàëÊ≤°Èí±ÔºåÊàëÂ∞±ÂéªÊâæÂåªÁîü‰∫ÜÔºåÈÇ£Âú®Ëøô‰∏ÄÊ≠•‰∫§ÊòìÁöÑËøáÁ®ãÂ∞±‰ºöÂá∫ÈîôÔºåÂõ†‰∏∫ÂåªÁîüÂè™‰ºöÂ§ÑÁêÜÊúâÈí±‰∫∫ÔºåÂπ∂‰∏îËøîÂõûÊúâÈí±‰∫∫ÁöÑ‰ª£ÁêÜÂ•ΩÁöÑÂØπË±° // ÊúâÈí±‰∫∫ÂæóÂà∞‰ª£ÁêÜÂêéÁöÑÂØπË±°ÔºåÂ∞±ÂèØ‰ª•‰∏∫ÊâÄÊ¨≤‰∏∫‰∫Ü Person pp = (Person) Proxy.newProxyInstance(person.getClass().getClassLoader(),person.getClass().getInterfaces(),dynamic_person); pp.dance(); System.out.println("-----------"); Person pp2 = (Person) new Dynamic(person).myDynamic(); pp2.dance(); &#125;&#125; 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586// cglib ÂÆûÁé∞//1. ÂØºÂåÖÔºåÂú®pom.xml ÂØºÂåÖ &lt;dependency&gt; &lt;groupId&gt;cglib&lt;/groupId&gt; &lt;artifactId&gt;cglib-nodep&lt;/artifactId&gt; &lt;version&gt;3.2.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;cglib&lt;/groupId&gt; &lt;artifactId&gt;cglib&lt;/artifactId&gt; &lt;version&gt;3.2.0&lt;/version&gt; &lt;/dependency&gt; // 2. ÈúÄË¶ÅË¢´‰ª£ÁêÜÁöÑÁ±ªpackage AOP.Cglib;public class SomeService &#123; public String doFirst() &#123; System.out.println("ÊâßË°ådoFirst()ÊñπÊ≥ï"); return "abc"; &#125; public void doSecond() &#123; System.out.println("doSecond()ÊñπÊ≥ï"); &#125;&#125;// 3. ËøõË°å‰ª£ÁêÜËøáÁ®ãpackage AOP.Cglib;import net.sf.cglib.proxy.Enhancer;import net.sf.cglib.proxy.MethodInterceptor;import net.sf.cglib.proxy.MethodProxy;import java.lang.reflect.Method;public class CglibFactory implements MethodInterceptor &#123; private Object object; public CglibFactory(Object object) &#123; this.object = object; &#125; public Object myCglibCreator() &#123; Enhancer enhancer = new Enhancer(); //Â∞ÜÁõÆÊ†áÁ±ªËÆæÁΩÆ‰∏∫Áà∂Á±ªÔºåcglibÂä®ÊÄÅ‰ª£ÁêÜÂ¢ûÂº∫ÁöÑÂéüÁêÜÂ∞±ÊòØÂ≠êÁ±ªÂ¢ûÂº∫Áà∂Á±ª,cglib‰∏çËÉΩÂ¢ûÂº∫ÁõÆÊ†áÁ±ª‰∏∫finalÁöÑÁ±ª //Âõ†‰∏∫finalÁ±ª‰∏çËÉΩÊúâÂ≠êÁ±ª enhancer.setSuperclass(this.object.getClass()); //ËÆæÁΩÆÂõûË∞ÉÊé•Âè£,ËøôÈáåÁöÑMethodInterceptorÂÆûÁé∞Á±ªÂõûË∞ÉÊé•Âè£ÔºåËÄåÊàë‰ª¨ÂèàÂÆûÁé∞‰∫ÜMethodInterceptor,ÂÖ∂ÂÆû //ËøôÈáåÁöÑÂõûË∞ÉÊé•Âè£Â∞±ÊòØÊú¨Á±ªÂØπË±°,Ë∞ÉÁî®ÁöÑÊñπÊ≥ïÂÖ∂ÂÆûÂ∞±ÊòØintercept()ÊñπÊ≥ï enhancer.setCallback(this); //create()ÊñπÊ≥ïÁî®‰∫éÂàõÂª∫cglibÂä®ÊÄÅ‰ª£ÁêÜÂØπË±° return enhancer.create(); &#125; //ÂõûË∞ÉÊé•Âè£ÁöÑÊñπÊ≥ï //ÂõûË∞ÉÊé•Âè£ÁöÑÊñπÊ≥ïÊâßË°åÁöÑÊù°‰ª∂ÊòØÔºö‰ª£ÁêÜÂØπË±°ÊâßË°åÁõÆÊ†áÊñπÊ≥ïÊó∂‰ºöË∞ÉÁî®ÂõûË∞ÉÊé•Âè£ÁöÑÊñπÊ≥ï @Override public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable &#123; Object result = methodProxy.invokeSuper(o, objects); //ËøôÈáåÂÆûÁé∞Â∞ÜËøîÂõûÂÄºÂ≠óÁ¨¶‰∏≤Âèò‰∏∫Â§ßÂÜôÁöÑÈÄªËæë if(result != null) &#123; result = ((String) result).toUpperCase(); &#125; return result; &#125;&#125;// 4. ÊµãËØïpackage AOP.Cglib;public class Test &#123; public static void main(String[] args) &#123; SomeService target = new SomeService(); SomeService proxy = (SomeService) new CglibFactory(target).myCglibCreator(); String result = proxy.doFirst(); System.out.println(result); proxy.doSecond(); &#125;&#125; Spring‰∏≠ Ioc Âíå DI ËÆ≤‰∏Ä‰∏ãÔºü ÂèÇËÄÉÔºöhttps://juejin.im/post/5df5bab0e51d45582427104e https://www.jianshu.com/p/17b66e6390fd IoC(Inversion of Control ÊéßÂà∂ÂèçËΩ¨)ÔºöÊòØ‰∏ÄÁßçÈù¢ÂêëÂØπË±°ÁºñÁ®ã‰∏≠ÁöÑ‰∏ÄÁßçËÆæËÆ°ÂéüÂàôÔºåÁî®Êù•Âáè‰ΩéËÆ°ÁÆóÊú∫‰ª£Á†Å‰πãÈó¥ÁöÑËÄ¶ÂêàÂ∫¶„ÄÇÂÖ∂Âü∫Êú¨ÊÄùÊÉ≥ÊòØÔºöÂÄüÂä©‰∫é‚ÄúÁ¨¨‰∏âÊñπ‚ÄùÂÆûÁé∞ÂÖ∑Êúâ‰æùËµñÂÖ≥Á≥ªÁöÑÂØπË±°‰πãÈó¥ÁöÑËß£ËÄ¶„ÄÇ DI(Dependence Injection ‰æùËµñÊ≥®ÂÖ•)ÔºöÂ∞ÜÂÆû‰æãÂèòÈáè‰º†ÂÖ•Âà∞‰∏Ä‰∏™ÂØπË±°‰∏≠Âéª(Dependency injection means giving an object its instance variables)„ÄÇ ‰πüÂ∞±ÊòØËØ¥ DI ÊòØ Ioc ÁöÑ ÂÆûÁé∞ÔºåIoc ÊòØ‰∏ÄÁßçËÆæËÆ°ÂéüÂàô„ÄÇ Spring ‰ΩúËÄÖ Rod Johnson ËÆæËÆ°‰∫Ü‰∏§‰∏™Êé•Âè£Áî®‰ª•Ë°®Á§∫ÂÆπÂô®„ÄÇ BeanFactory ApplicationContext BeanFactory Á≤óÊö¥ÁÆÄÂçïÔºåÂèØ‰ª•ÁêÜËß£‰∏∫Â∞±ÊòØ‰∏™ HashMapÔºåKey ÊòØ BeanNameÔºåValue ÊòØ Bean ÂÆû‰æã„ÄÇÈÄöÂ∏∏Âè™Êèê‰æõÊ≥®ÂÜåÔºàputÔºâÔºåËé∑ÂèñÔºàgetÔºâËøô‰∏§‰∏™ÂäüËÉΩ„ÄÇÊàë‰ª¨ÂèØ‰ª•Áß∞‰πã‰∏∫ ‚Äú‰ΩéÁ∫ßÂÆπÂô®‚Äù„ÄÇ ApplicationContext ÂèØ‰ª•Áß∞‰πã‰∏∫ ‚ÄúÈ´òÁ∫ßÂÆπÂô®‚Äù„ÄÇÂõ†‰∏∫‰ªñÊØî BeanFactory Â§ö‰∫ÜÊõ¥Â§öÁöÑÂäüËÉΩ„ÄÇ‰ªñÁªßÊâø‰∫ÜÂ§ö‰∏™Êé•Âè£„ÄÇÂõ†Ê≠§ÂÖ∑Â§á‰∫ÜÊõ¥Â§öÁöÑÂäüËÉΩ„ÄÇ‰æãÂ¶ÇËµÑÊ∫êÁöÑËé∑ÂèñÔºåÊîØÊåÅÂ§öÁßçÊ∂àÊÅØÔºà‰æãÂ¶Ç JSP tag ÁöÑÊîØÊåÅÔºâÔºåÂØπ BeanFactory Â§ö‰∫ÜÂ∑•ÂÖ∑Á∫ßÂà´ÁöÑÊîØÊåÅÁ≠âÂæÖ„ÄÇÊâÄ‰ª•‰Ω†Áúã‰ªñÁöÑÂêçÂ≠óÔºåÂ∑≤Áªè‰∏çÊòØ BeanFactory ‰πãÁ±ªÁöÑÂ∑•ÂéÇ‰∫ÜÔºåËÄåÊòØ ‚ÄúÂ∫îÁî®‰∏ä‰∏ãÊñá‚ÄùÔºå ‰ª£Ë°®ÁùÄÊï¥‰∏™Â§ßÂÆπÂô®ÁöÑÊâÄÊúâÂäüËÉΩ„ÄÇËØ•Êé•Âè£ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ refresh ÊñπÊ≥ïÔºåÊ≠§ÊñπÊ≥ïÊòØÊâÄÊúâÈòÖËØª Spring Ê∫êÁ†ÅÁöÑ‰∫∫ÁöÑÊúÄÁÜüÊÇâÁöÑÊñπÊ≥ïÔºåÁî®‰∫éÂà∑Êñ∞Êï¥‰∏™ÂÆπÂô®ÔºåÂç≥ÈáçÊñ∞Âä†ËΩΩ/Âà∑Êñ∞ÊâÄÊúâÁöÑ bean„ÄÇ Ioc ÁöÑËøáÁ®ãÔºö a. Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂ÔºåËß£ÊûêÊàê BeanDefinition ÊîæÂú® Map Èáå„ÄÇ b. Ë∞ÉÁî® getBean ÁöÑÊó∂ÂÄôÔºå‰ªé BeanDefinition ÊâÄÂ±ûÁöÑ Map ÈáåÔºåÊãøÂá∫ Class ÂØπË±°ËøõË°åÂÆû‰æãÂåñÔºåÂêåÊó∂ÔºåÂ¶ÇÊûúÊúâ‰æùËµñÂÖ≥Á≥ªÔºåÂ∞ÜÈÄíÂΩíË∞ÉÁî® getBean ÊñπÊ≥ï ‚Äî‚Äî ÂÆåÊàê‰æùËµñÊ≥®ÂÖ•„ÄÇ ORMÊ°ÜÊû∂ÊúâÂì™‰∫õÔºüÊúâ‰ªÄ‰πàÂ•ΩÂ§ÑÔºü‰ªÄ‰πàÊòØmysqlÊ≥®ÂÖ•Ôºü$ Âíå # Êúâ‰ªÄ‰πàÂå∫Âà´ JPAÊòØormÊ°ÜÊû∂Ê†áÂáÜÔºå‰∏ªÊµÅÁöÑormÊ°ÜÊû∂ÈÉΩÂÆûÁé∞‰∫ÜËøô‰∏™Ê†áÂáÜ„ÄÇ MyBatisÊ≤°ÊúâÂÆûÁé∞JPAÔºå‰ªñÂíåormÊ°ÜÊû∂ÁöÑËÆæËÆ°ÊÄùË∑ØÂÆåÂÖ®‰∏ç‰∏ÄÊ†∑„ÄÇMyBatisÊòØÊã•Êä±sqlÔºåËÄåormÂàôÊõ¥Èù†ËøëÈù¢ÂêëÂØπË±°Ôºå‰∏çÂª∫ËÆÆÂÜôsqlÔºåÂÆûÂú®Ë¶ÅÂÜôÊé®Ëçê‰Ω†ÂÜôhql‰ª£Êõø„ÄÇ MybatisÊòØsql mappingÊ°ÜÊû∂ËÄå‰∏çÊòØormÊ°ÜÊû∂ÔºåÂΩìÁÑ∂ormÂíåMybatisÈÉΩÊòØÊåÅ‰πÖÂ±ÇÊ°ÜÊû∂„ÄÇ ÊâÄ‰ª•ËØ¥hibernateÊòØÂÖ∏ÂûãÁöÑORMÊ°ÜÊû∂ÔºåÂ•ΩÂ§ÑÂ∞±ÊòØÊàë‰ª¨ÂèØ‰ª•Áî®Èù¢ÂêëÂØπË±°ÁöÑÊÄùÊÉ≥ÂéªÂØπÊï∞ÊçÆÂ∫ìËøõË°åÊìç‰ΩúÔºåÊàëËßâÂæó‰∏ªË¶ÅÂ∞±ÊòØÊØîËæÉÁúÅ‰ª£Á†ÅÔºåËß£ÂÜ≥Èù¢ÂêëÂØπË±°ÁöÑËÆæËÆ°ÊñπÂºèÂíåÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì‰πãÈó¥ÁöÑÂÖ≥ËÅîÔºåJava‰∏ªË¶ÅÈù¢ÂêëÂØπË±°ËÆæËÆ°ÔºåÂõ†Ê≠§Âú®ÂàÜÊûê‰∏öÂä°ÁöÑÊó∂ÂÄô‰ºö‰ª•ÂØπË±°ÁöÑËßíÂ∫¶Êù•ÁúãÂæÖÈóÆÈ¢ò„ÄÇÁÑ∂ËÄåÊï∞ÊçÆÂ∫ìÊòØÂÖ≥Á≥ªÂûãÁöÑÔºåÂØπ‰∫éJavaÁ®ãÂ∫èÂëòËÄåË®ÄÊòØ‰∏çÁ¨¶ÂêàÈù¢ÂêëÂØπË±°ËÆæËÆ°ÁöÑÔºåÂõ†Ê≠§Êâç‰ºöÂá∫Áé∞ORMËøôÁßç‰∏úË•ø„ÄÇÊúâ‰∫ÜORMÔºåJavaÂºÄÂèë‰∫∫ÂëòÂú®Êï¥‰∏™‰ª£Á†ÅËÆæËÆ°ÈÉΩÂ∞ÜÈÅµÂæ™ÂØπË±°ÁöÑÊÄùÁª¥Ê®°ÂºèÔºåËøôÂ∞±ÊòØÂ•ΩÂ§Ñ„ÄÇ mysqlÊ≥®ÂÖ•ÔºöÂèÇÊï∞ËøõË°åËΩ¨‰πâ‰∏éËøáÊª§ Â¶Ç‰ΩïËß£ÂÜ≥Ôºö‰ΩøÁî® Prepare Statement $ Âíå # ÁöÑÂå∫Âà´Ôºö Sql: delete from student where name=${name} ÂÅáÂ¶Ç name = jerome OR 1 = 1 Âú® Mybatis ‰∏≠ÔºåÂ¶ÇÊûúÂÜô ${name}ÔºåÈÇ£Â∞±ÊòØÁõ¥Êé•Â∞Ü name ÊãºÊé•Âà∞ sql ‰∏≠ÔºåÁªìÂ±ÄÂ∞±ÊòØÂÖ®Âà†Ôºõ Â¶ÇÊûúÂÜô #{name}ÔºåÂàô sql ÂèòÊàê delete from student where name= ‚Äôjerome OR 1 = 1‚ÄòÔºåËøôÊ†∑Âè™Êúâname = jerome OR 1 = 1 ÁöÑÊâç‰ºöÂà†Èô§ÔºåÂê¶Âàô‰∏ç‰ºöÂà†Èô§‰ªª‰Ωï‰∏úË•ø„ÄÇ 2020.3.31 20:02 - 20:45 „Äå43 ÂàÜÈíü„Äç ÈòøÈáå‰∏âÈù¢‰ªéËøô‰∏ÄÈù¢ÂºÄÂßãÈù¢ËØïÂÆòÂ∞±ÊòØÈòøÈáå P9 ‰∫ÜÔºåÊâÄ‰ª•ËØ¥ÂÆûËØùÂéãÂäõËøòÊòØÈùûÂ∏∏Â§ßÁöÑÔºåËøô‰∏ÄÈù¢ËøòÊòØË∑üÂâçÈù¢‰∏ÄÊ†∑ÊòØÁîµËØùÈù¢„ÄÇËøô‰∏ÄÈù¢Âü∫Êú¨‰∏äÊ≤°ÊúâÈóÆ‰ªª‰ΩïÂü∫Á°ÄÔºåÂÖ®ÈÉ®Âú®ËÆ≤È°πÁõÆÔºåÂª∫ËÆÆÂ§ßÂÆ∂‰∏ÄÂÆöË¶ÅÊúâ‰∏Ä‰∏™ËÆ≤ÁöÑÂæàÊ∫úÁöÑÈ°πÁõÆÔºåÊàëÂõ†‰∏∫ÊèêÂèä‰∫Ü‰∏Ä‰∏ãÊØïËÆæÔºåÁÑ∂ÂêéÂ∞±Ë¢´‰∏ÄÁõ¥ÊäìÁùÄÈóÆÔºåËÄåËá™Â∑±Êú¨Ë∫´ÂÖ∂ÂÆûÊòØÊ≤°ÊúâÂ•ΩÂ•ΩÂáÜÂ§áËøô‰∏™È°πÁõÆÁöÑÔºåÊâÄ‰ª•Êúâ‰∫õÈóÆÈ¢òÁ´üÁÑ∂Ë¢´ÈóÆ‰∫ÜÂêéÔºåÁ≠îÂæó‰∏çÊòØÁâπÂà´ÁêÜÊÉ≥„ÄÇ‰ΩÜÊòØËøòÂ•ΩÔºåÁ≠îÂæó‰πüÊ≤°ÊúâÂæàÂ∑ÆÔºåÂêéÈù¢ÁöÑÈ°πÁõÆ‰ªãÁªçÁöÑËøòÊòØËÆ©Èù¢ËØïÂÆòÂæàÊª°ÊÑèÁöÑ„ÄÇ ‰ªãÁªçÂÆåÂêéÔºåÈù¢ËØïÂÆòÂèØËÉΩËßâÂæóÊâçÂçäÂ∞èÊó∂Ôºå‰∫éÊòØÂ∞±ÈóÆ‰∫ÜÂá†‰∏™ÈóÆÈ¢òÔºåÂè™ÊòØÊé¢ÂØª‰∏Ä‰∏ãÊàëÁü•ËØÜÁöÑÂπøÂ∫¶ÂêßÔºåÂÖ®ÈÉ®Ê≤°ÊúâÊ∑±ÂÖ•„ÄÇ ‰æãÂ¶ÇÔºö ‰∫ÜËß£ tomcat ÂêóÔºü„ÄåÂΩìÁÑ∂‰∫ÜËøôÊòØÊàëÂú®ËÆ≤Âèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÂºïÁî≥Âá∫Êù•ÁöÑ„Äç Áî®Ëøá nginx ÂêóÔºü spring ‰∏≠Áî®ËøáÂêóÔºü Ëøô‰∫õÔºåÊàëÂõ†‰∏∫ËØ¥‰∏çÂ§™‰∫ÜËß£ or Áî®ËøáÊ≤°Ê∑±ÂÖ•ÔºåÊâÄ‰ª•Èù¢ËØïÂÆò‰πüÂ∞±Á¥¢ÊÄßÊ≤°ÊúâÈóÆ‰∏ãÂéª„ÄÇ ÊúÄÂêéÔºåËä±‰∫Ü10ÂàÜÈíü‰ªãÁªç‰∫Ü‰∏ãËá™Â∑±ÁöÑÈÉ®Èó®ÔºåÁÑ∂ÂêéÂ∞±Âà∞‰∫ÜÂèçËΩ¨ÁéØËäÇ‰∫ÜÔºåÊàëËßâÂæóÂ§ßÂÆ∂ÂèØ‰ª•Â•ΩÂ•ΩÊäì‰ΩèÂèçËΩ¨ÁéØËäÇÔºåÂõ†‰∏∫Êàë‰ª¨ÂæÄÂæÄÂèØ‰ª•‰ªéËøô‰∏™ÁéØËäÇÊé¢Âà∞Èù¢ËØïÂÆòÂØπÊú¨Ê¨°Èù¢ËØïÁöÑÁúãÊ≥ïÔºåÊØîÂ¶ÇÔºåÊàëÈóÆÁöÑÁ¨¨‰∏Ä‰∏™ÈóÆÈ¢òÂ∞±ÊòØÔºö ‚ÄùÊàëËßâÂæó‰ªäÂ§©ÁöÑË°®Áé∞‰∏çÊòØÂæàÂ•ΩÔºåÁ¨¨‰∏Ä‰∏™È°πÁõÆÊ≤°ËÆ≤ÁöÑÈùûÂ∏∏Ê∏ÖÊ•öÔºåÊÇ®ÂêéÈù¢ÈóÆÁöÑÂá†‰∏™Áü•ËØÜÁÇπÊàë‰πü‰∏çÂ§™‰ºöÔºåÊ≤°Ê∑±ÂÖ•‰∫ÜËß£Ëøá„ÄÇ‚Äú ÂæàËÆ©ÊàëÊÑèÂ§ñÁöÑÊòØÔºåÈù¢ËØïÂÆòÁªôÊàëÁöÑÂõûÁ≠îËÆ©ÊàëÂ§áÂèóÈºìËàûÔºö ‚ÄùÂâçÈù¢ÂèØËÉΩÊòØ‰Ω†Â§™ÁùÄÊÄ•Â§™Á¥ßÂº†‰∫ÜÔºåÊâÄ‰ª•ËÆ≤ÁöÑ‰∏çÊòØÂæàÂ•ΩÔºå‰ΩÜÊòØÂêéÈù¢ËÆ≤ÁöÑÂæàÊ∏ÖÊ•ö‰∫ÜÔºå‰πüËÉΩÂê¨ÂæóÂá∫Êù•ÂÖ®ÊòØËá™Â∑±Áî®ÂøÉÂÅö‰∫ÜÁöÑÔºåÊàë‰πüÂê¨ÊòéÁôΩ‰∫ÜÔºåÊâÄ‰ª•‰∏çÁî®ÊãÖÂøÉÔºåËá≥‰∫éÂêéÈù¢ÁöÑÁü•ËØÜÁÇπ‰∏ç‰ºö‰πüÈùûÂ∏∏Ê≠£Â∏∏Ôºå‰Ω†ËøòÂπ¥ËΩªÁöÑÂæàÔºå‰∏ç‰ºöÊòØÈùûÂ∏∏Ê≠£Â∏∏ÁöÑÔºå‰Ω†Ë¶ÅÈÉΩ‰ºö‰∫ÜÊàëËøòÈúÄË¶ÅÂú®ËøôÂêóÔºü‰Ω†ËøòÂπ¥ËΩªÔºåÊòØÈùûÂ∏∏ÊúâÊΩúÂäõÁöÑ„ÄÇ‚Äú Ëá≥Ê≠§ÔºåÂºÄÂßãÊúüÂæÖÂõõÈù¢ÂìàÂìàÂìàÂìà„ÄÇ 2020.4.01 23:04 - 00:05 „Äå61 ÂàÜÈíü„Äç ÈòøÈáåÂõõÈù¢Âú®ÂõõÈù¢‰πãÂâçÔºåÂá∫Áé∞‰∫Ü‰∏™Â∞èÊèíÊõ≤„ÄÇÂ∞±ÊòØÈù¢ËØïÂÆò‰∏äÂçà‰º∞ËÆ°ÊòØÊúâË∑üÊàëÊâìËøáÁîµËØùÔºå‰ΩÜÊòØË≤å‰ººË∑üÈ•ø‰∫Ü‰πàÁöÑÂ§ñÂçñÂëòË∑üÊàëÊâìÁîµËØùÂÜ≤Á™Å‰∫Ü„ÄåÂ∫îËØ•ÈÉΩÊòØËµ∞ÁöÑÈòøÈáåÁöÑÁîµËØùÁ≥ªÁªü„ÄçÔºåÂØºËá¥ÊàëÂéãÊ†πÊ≤°Êé•Âà∞ÁîµËØù„ÄåÂ§ñÂçñÂëòËøòËØ¥ÁªôÊàëÊâìÁîµËØùÊàë‰∏ÄÁõ¥‰∏çÊé•ÔºåÊàëËØ¥ÊàëÂéãÊ†πÊ≤°Êé•Âà∞ÁîµËØù‚Ä¶„ÄçÔºåÊúÄÂêéËøòÊòØ‰∏ãÂçà5ÁÇπÁöÑÊó∂ÂÄô‰∫åÈù¢ÁöÑÈù¢ËØïÂÆòÊâìÁîµËØùÁªôÊàëÂè´ÊàëÊ≥®ÊÑè‰∏Ä‰∏ãÁîµËØù‚Ä¶ÊàëÂΩìÊó∂‰∏ÄËÑ∏ÊáµÈÄº‚Ä¶ÊâÄ‰ª•ËØ¥ÂÖ≥ÈîÆÊó∂Âàª‰∏çË¶ÅÁÇπÈ•ø‰∫Ü‰πàÂ§ñÂçñ‚Ä¶‚Ä¶. ÁÑ∂ÂêéÁ∫¶ÁöÑ 8 ÁÇπÂçäÔºå‰ΩÜÊòØÊàëÂõ†‰∏∫ÊúâÊê∫Á®ãÁöÑÁ¨îËØïÊé®Âà∞‰∫ÜÊôö‰∏ä 10 ÁÇπÂçäÔºåÁÑ∂Âêé 10 ÁÇπÊàëÂ∞±ÂºÄÂßãÂùêÂú®Ê°åÂâçÁ≠âÔºåËØ¥ÁúüÁöÑÊúâÁÇπÁ¥ßÂº†ÔºåÊØïÁ´üËøôÈù¢ÊòØ‰∫§ÂèâÈù¢ÔºåÂèàÊòØ‰∏Ä‰∏™ P9 Â§ß‰Ω¨‚Ä¶Á≠âÂïäÁ≠âÔºå‰∏ÄÁõ¥Á≠âÂà∞Êôö‰∏ä 11 ÁÇπÈù¢ËØïÂÆòÈÉΩÊ≤°ÊúâÂá∫Áé∞ÔºåÊàë‰∏ÄÂ∫¶ÊÄÄÁñëÊòØÊàëÂê¨Èîô‰∫ÜÊó∂Èó¥ÔºåÁ™ÅÁÑ∂Ôºå11:04ÔºåÈù¢ËØïÂÆòÈùûÂ∏∏Êä±Ê≠âÁöÑÊâìÂºÄÊó∂ËßÜÈ¢ëÔºåÁªà‰∫éÁúãÂà∞‰∫Ü‚Ä¶‰∫éÊòØÈù¢ËØïÊ≠£ÂºèÂºÄÂßã‚Ä¶ ËßÜÈ¢ëÈù¢„ÄÇÊúâÁÇπÂ§™Êôö‰∫ÜÔºåÊâÄ‰ª•Ëá™Â∑±Âú®Èù¢‰πãÂâç‰πüÊòØÊúâË∑üÈù¢ËØïÂÆò‰∫§‰ª£ÔºåÂèØËÉΩÂèçÂ∫î‰ºöÊÖ¢‰∏Ä‰∫õ‚Ä¶Èù¢ËØïÂÆòËøòÊòØÈùûÂ∏∏ÁêÜËß£ÁöÑÔºåÁÑ∂ÂêéËøô‰∏ÄÈù¢ÂèØ‰ª•ËØ¥ÊòØËøôÂçä‰∏™Â§öÊúàÊù•Èù¢ÁöÑÊúÄÊ£íÁöÑ‰∏ÄÊ¨°‰∫ÜÔºå‰∏ãÈù¢ÊòØ‰∏ªË¶ÅÂÜÖÂÆπÔºö Èù¢ËØï‰æùÊóßÊòØ‰ªéÈ°πÁõÆÂá∫ÂèëÔºåÊ≥®ÊÑèÔºåÈòøÈáåÂêéÈù¢ÂõõÈù¢Âü∫Êú¨‰∏äÂÖ®ÈÉ®Âõ¥ÁªïÈ°πÁõÆÂ±ïÂºÄÔºåÊâÄ‰ª•Âä°ÂøÖË¶ÅÊúâ‰∏Ä‰∏™ÂêÉÈÄèÁöÑÈ°πÁõÆÔºå‰∫ÜËß£ÂÖ∂‰∏≠Áî®Âà∞ÁöÑÊäÄÊúØÊ†àÔºåÂπ∂‰∏îÂª∂‰º∏Âà∞Êìç‰ΩúÁ≥ªÁªüÁ∫ßÂà´ÁöÑË∞ÉÁî®ÔºåÂêåÊó∂Ë¶ÅÂÖ≥Ê≥®È°πÁõÆ‰∏≠ÈÅáÂà∞ÁöÑÈöæÁÇπ‰ª•ÂèäËá™Â∑±ÊòØÂ¶Ç‰ΩïËß£ÂÜ≥ÁöÑÔºåËøôÊòØÊúÄÊúÄÊúÄÈ´òÈ¢ëÁöÑÈóÆÈ¢ò‰∫ÜÔºåÂü∫Êú¨‰∏äÊØè‰∏ÄÈù¢ÁöÑÈù¢ËØïÂÆòÈÉΩÊúâÈóÆËøô‰∏™ÈóÆÈ¢ò„ÄÇ ÂêåÊó∂Ôºå‰∏ÄÂÆöË¶ÅÂ∞ÜÈ°πÁõÆ‰∏≠ÁöÑÊüê‰∫õÈÉ®Èó®ËΩ¨ÁßªÂà∞Ëá™Â∑±ÊìÖÈïøÁöÑÈ¢ÜÂüüÔºåÊØîÂ¶ÇÊàëËÆ≤ÁöÑÈ°πÁõÆ‰∏≠ÂÖ∂ÂÆûÂ∞±ÊòØ‰∏Ä‰∏™Áà¨Ëô´È°πÁõÆÔºå‰ΩÜÊòØÂèØ‰ª•Êâ©Â±ïÁöÑÂú∞ÊñπÂ§™Â§ö‰∫ÜÔºåÊàëÂ∞±‰∏æÂá†‰∏™‰æãÂ≠êÔºö ËÆ≤Âà∞Áà¨Ëô´ÔºåÈÇ£Âä°ÂøÖË¶ÅËÆ≤ÂèçÁà¨Êé™ÊñΩÔºåËøôÊòØ‰∏Ä‰∏™ÂèØ‰ª•Â±ïÂºÄÁöÑÁÇπÔºåÂèØ‰ª•ËÆ≤Âæà‰πÖÔºåËÆ≤ÂèçÁà¨Â¶Ç‰ΩïËß£ÂÜ≥Ôºõ ‰∏≠Èó¥‰ª∂Áî®Âà∞kafkaÔºåËøôÂèàÊòØ‰∏ÄÂ§ßÂùóÂèØ‰ª•ËÆ≤ÁöÑÔºåkafka ÁöÑÈÄö‰ø°Êú∫Âà∂Ôºå‰ª•ÂèäÂÜÖÈÉ®ÊûÑÈÄ†Ôºå‰ª•ÂèäÈ´òÂèØÁî®Êú∫Âà∂ÂíåÂêûÂêêÈáèÂ§ßÔºõ Ë∞àÂà∞ kafka ÁöÑÂêûÂêêÈáèÂ§ßÔºåÂèàÂèØ‰ª•ÊÄªÁªì‰∏ÄÊ≥¢‰∏∫‰ΩïÂêûÂêêÈáèÂ§ßÔºåÁÑ∂ÂêéÂª∂‰º∏Âà∞ NIO Âíå Èõ∂Êã∑Ë¥ùÊäÄÊúØÔºåÂèàÂèØ‰ª•ËÆ≤‰∏ÄÂ†ÜÔºõ ËÆ≤Âà∞ NIOÔºåÂèàÂèØ‰ª•ËÆ≤ IO ÈÇ£‰∏ÄÂ§ßÂùóÁü•ËØÜÁÇπÔºåÂêåÊó∂Ë∞àÂà∞ NIO ÂøÖÂÆö‰ºöË∞àÂà∞ select/epollÔºåËøôÊ†∑ÂèàÂèØ‰ª•ËÆ≤ÂæàÂ§ö„ÄÇ ÊÄª‰πãÔºåËøô‰∫õÁü•ËØÜÔºåËá™Â∑±ÈÉΩÊòØÂèØ‰ª•ÊèêÂâçÂáÜÂ§áÂ•ΩÁöÑÔºåÁÑ∂ÂêéÂà∞Êó∂ÂÄôÈù¢ËØïÊäõÂá∫Êù•Â∞±Ë°å‰∫ÜÔºåÈù¢ËØïÂÆò‰∏ÄËà¨ÈÉΩ‰ºöÈ°∫ÁùÄ‰Ω†ÁöÑÊÄùË∑ØËøõË°å‰∏ãÂéªÁöÑÔºåË¶ÅÊääËØùËØ≠ÊùÉÊéåÊè°Âú®Ëá™Â∑±ÁöÑÊâã‰∏äÔºå‰∏ÄÂÆöË¶ÅËÆ∞ÂæóÁâπÊÑèÁöÑÊäõÂá∫Êüê‰∫õÁü•ËØÜÁÇπ„ÄåËøôÈáåÁöÑÁâπÊÑèÊòØÊåáË∑ü‰Ω†ÁöÑÈ°πÁõÆÊåÇÈí©ÁöÑ„Äç ÂêåÊó∂ÔºåÊàëÂèëÁé∞‰ªé‰∏âÈù¢Âà∞ÂõõÈù¢ÔºåÈÉΩÊúâÂéªÂÖ≥ÂøÉÔºåËá™Â∑±Âú®È°πÁõÆ‰∏≠Áî®Âà∞ÁöÑËÆæËÆ°Ê®°Âºè‰ª•ÂèäËá™Â∑±ÁúãÊ∫êÁ†ÅÂèëÁé∞ÁöÑ‰∏Ä‰∫õËÆæËÆ°Ê®°Âºè„ÄÇ Êàë‰πãÂâçÂè™ÂáÜÂ§á‰∫Ü‰∏âÁßçËÆæËÆ°Ê®°ÂºèÔºåÂπ∂‰∏îËá™Â∑±‰∫≤Ëá™ÂÜô‰∫Ü‰∏Ä‰∫õÂ∞èdemoÔºö Âçï‰æãÊ®°ÂºèÔºåÂõõÈù¢Â∞±ÈóÆ‰∫ÜËøô‰∏™ÔºåË∞à‰ªÄ‰πàÊòØÈ•øÊ±âÊ®°ÂºèÂíåÊáíÊ±âÊ®°ÂºèÔºõ 12345678910&gt; // È•øÊ±â&gt; public class Singleton &#123;&gt; // Á±ªÂä†ËΩΩÊó∂Â∞±ÂàùÂßãÂåñ&gt; private static final Singleton instance = new Singleton();&gt; private Singleton() &#123;&#125;&gt; public static Singleton getInstance()&#123;&gt; return instance;&gt; &#125;&gt; &#125;&gt; 123456789101112&gt; // ÊáíÊ±â&gt; public class Singleton &#123;&gt; private static Singleton instance;&gt; private Singleton () &#123;&#125;&gt; public static Singleton getInstance() &#123;&gt; if (instance == null) &#123;&gt; instance = new Singleton();&gt; &#125;&gt; return instance;&gt; &#125;&gt; &#125;&gt; Ê®°ÊùøÊñπÊ≥ïÊ®°ÂºèÔºåËøô‰∏™ÊòØIOÂª∂‰º∏ËøáÊù•ÁöÑÁü•ËØÜÁÇπÔºåÁÑ∂ÂêéÊàëÈ°∫Â∏¶Êèê‰∫Ü‰∏Ä‰∏ã AQSÔºõ IO Âíå AQS ÈÉΩÁî®‰∫ÜÊ®°ÊùøÊñπÊ≥ïÁöÑËÆæËÆ°Ê®°Âºè„ÄÇ ‰ª£ÁêÜÊ®°ÂºèÔºåÊèê‰∫Ü‰∏Ä‰∏ãÂä®ÊÄÅ‰ª£ÁêÜÔºå‰ª•ÂèäSpring‰∏≠ÁöÑ AOP„ÄÇ ‰∏äÈù¢Â∑≤ÁªèÊÄªÁªì‰∫Ü ÁÑ∂ÂêéÂ∞±ÊòØ‰∏Ä‰∫õÊØîËæÉÁÆÄÂçïÁöÑÈóÆÈ¢òÔºö ‰∏∫‰ΩïË¶ÅÂàÜÊñ∞Áîü‰ª£ÂíåËÄÅÂπ¥‰ª£ÔºåÂ¶Ç‰ΩïÂå∫ÂàÜÁöÑÔºü Ëøô‰∏™ÊàëÂú®„ÄäÊ∑±ÂÖ•ÁêÜËß£javaËôöÊãüÊú∫Á¨îËÆ∞„Äã‰∏≠ÊúâÈùûÂ∏∏ËØ¶ÁªÜÁöÑË∞àÂà∞ÔºåÂπ∂‰∏îÊàëÂú® ‚ÄúËÖæËÆØ‰∫åÈù¢‚ÄùËøôÈÉ®ÂàÜ‰πüÊúâÂæàËØ¶ÁªÜÁöÑÊÄªÁªìÔºÅÂèØ‰ª•ÂæÄ‰∏äÁøªÁøªÁúãÂà∞„ÄÇ Full gc Â¶Ç‰ΩïÊéíÊü•Ôºü ÂÖàÁúã‰∏Ä‰∏ãÁõ∏ÂÖ≥ÁöÑÂõæÂΩ¢ÂåñÁïåÈù¢ÔºåÁúãÊØè‰∏ÄÊ¨° full gcÂêéÂØπË±°ÁöÑÂ≠òÊ¥ªÁéá Â¶ÇÊûúÂ≠òÊ¥ªÁéáÈ´òÔºåÂèØËÉΩÊòØËÄÅÂπ¥‰ª£ÁöÑÂÜÖÂ≠òÂ§™Â∞è‰∫ÜÔºåÂØºËá¥ÂæàÂÆπÊòìËß¶Âèë full gcÔºõ Â¶ÇÊûúÂ≠òÊ¥ªÁéá‰ΩéÔºåËØ¥ÊòéÂèØËÉΩÊòØÂæàÂ§öÂ§ßÂØπË±°ËøõÂÖ•Âà∞ËÄÅÂπ¥‰ª£Âå∫ÂüüÔºå‰∏ªË¶ÅÊòØÂèØËÉΩËá™Â∑±‰ª£Á†ÅÂÜôÁöÑÊúâÁÇπÈóÆÈ¢òÔºåÊàñËÄÖËØ¥ÊòéÂèØËÉΩÊòØ eden Âå∫Â§™Â∞è‰∫ÜÔºåÂØºËá¥Âπ¥ËΩª‰ª£ÂæàÂÆπÊòìÂ∞±ËøõÂÖ•‰∫ÜËÄÅÂπ¥‰ª£Âå∫Âüü„ÄÇ ËÆ≤‰∏ÄËÆ≤ synchronized Âíå Lock ÁöÑÂå∫Âà´Ôºå‰ª•Âèä ThreadLocalÔºü Synchronized Âíå lock ÊúÄÂÖ∏ÂûãÁöÑÂá†‰∏™Âå∫Âà´Ôºö synchronized ÂÖ≥ÈîÆÂ≠óÔºåjvmÂ±ÇÈù¢Ôºõlock ÊòØÁ±ªÔºåjdkÂ±ÇÈù¢Ôºõ synchronized ‰∏çÊîØÊåÅ‰∏≠Êñ≠ÔºålockÊîØÊåÅÔºõ synchronizedÂ¶ÇÊûúÈòªÂ°û‰∫Ü‰ºö‰∏ÄÁõ¥Á≠âÂæÖÔºåËÄålockÂèØ‰ª•ÂÆöÊó∂ÂèñÊ∂àÁ≠âÂæÖÔºõ synchronizedÂè™ËÉΩÊúâ‰∏Ä‰∏™Êù°‰ª∂ÈòüÂàóÔºåËÄålockÂèØ‰ª•ÊúâÂ§ö‰∏™„ÄÇ ThreadLocal ‰∏ªË¶ÅË∞àÂà∞ ThreadLocalMapÔºåÊ≥®ÊÑèÂÆÉÊòØÁ∫øÊÄßÊé¢ÊµãÊ≥ïËß£ÂÜ≥ÁöÑÂÜ≤Á™ÅÔºåÂπ∂‰∏îÂä†ËΩΩÂõ†Â≠ê‰∏∫2/3ÔºåÂàùÂßãÂÄº16ÔºåÂΩìÁÑ∂ËøòÂæóË∞àÂà∞ÂÖ∂ÂÜÖÂ≠òÊ≥ÑÊºèÈóÆÈ¢òÔºåËß£ÂÜ≥ÊñπÊ°àÂ∞±ÊòØ‰ΩøÁî®Âº±ÂºïÁî®‰ª•ÂèäÁî®‰∏Ä‰∫õÊñπÊ≥ïÂ§ÑÁêÜËÑè Entry ÔºåÂΩìÁÑ∂Âπ∂‰∏çËÉΩÂÆåÂÖ®ÈÅøÂÖçÂÜÖÂ≠òÊ≥ÑÊºèÔºå‰ΩÜÊòØÂè™Ë¶Å‰Ω†‰∏çÂíåÁ∫øÁ®ãÊ±†ÊêûÂú®‰∏ÄÂùóÂ∞±Â∫îËØ•‰∏ç‰ºö‰∫ßÁîüÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇ ÁΩëÁªú‰∏≠ÁöÑÂä†ÂØÜÁÆóÊ≥ïÊúâ‰∫ÜËß£ÂêóÔºü ÂøÖÈ°ª‰∫ÜËß£„ÄÇ ‰ªéhttps„Äå‰∏äÈù¢Â∑≤ÁªèËÆ≤Ëøá‰∫Ü„ÄçÔºåÂà∞ RSA Âä†ÂØÜÁÆóÊ≥ïÔºåÂÜçÂà∞ÂØπÁß∞ÈùûÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïÔºåÂÜçÂà∞ token Á≠âÁ≠â„ÄÇ ËÆ≤ËÆ≤ÈùûÂØπÁß∞ÂíåÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ï„ÄåËøôÂùóÊàëËÆ≤‰∫Ümd5ÁÆóÊòØÔºåÂæàÊòéÊòæÈù¢ËØïÂÆòËØ¥‰∏çÊòØ„Äç ‰∏•Ê†ºÊù•ËØ¥ÔºöMD5„ÄÅsha-1Âè™ÊòØÊï£ÂàóÁÆóÊ≥ïÔºåÊàñËÄÖÂè´ÊëòË¶ÅÁÆóÊ≥ïÔºå‰∏çËÉΩÁÆóÂä†ÂØÜÁÆóÊ≥ï„ÄÇ ‰πüÂ∞±ÊòØËØ¥ÔºåMD5 ÊòØ‰∏çÂèØÈÄÜÁöÑÔºå‰Ω†Ê†πÊú¨Ëß£‰∏ç‰∫ÜÔºåËÄåÂØπÁß∞ÈùûÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïÊòØÂèØÈÄÜÁöÑÔºåÂèØ‰ª•ÈÄöËøáÂØÜÊñáÂæóÂà∞ÊòéÊñáÔºå‰πüÂèØ‰ª•ÈÄöËøáÊòéÊñáÂæóÂà∞ÂØÜÊñá„ÄÇ Âä†ÂØÜÂØπÂ∫îËß£ÂØÜÔºåÂç≥Âä†ÂØÜÂêéÁöÑÂØÜÊñáÂèØ‰ª•Ëß£ÂØÜÊàêÊòéÊñáÔºå‰ΩÜÊòØMD5Êó†Ê≥ï‰ªéÂØÜÊñáÔºàÊï£ÂàóÂÄºÔºâÂèçËøáÊù•ÂæóÂà∞ÂéüÊñáÔºåÂç≥Ê≤°ÊúâËß£ÂØÜÁÆóÊ≥ï„ÄÇ Â§ßÂÆ∂Áü•ÈÅìÂä†ÂØÜÁÆóÊ≥ïÂàÜ‰∏∫ÂØπÁß∞Âä†ÂØÜÂíåÈùûÂØπÁß∞Âä†ÂØÜÔºå‰∏çÁÆ°ÂØπÁß∞Âä†ÂØÜÂíåÈùûÂØπÁß∞Âä†ÂØÜÔºåÈÉΩÊòØËÉΩÂ§ü‰ªéÂØÜÊñáËß£ÂØÜÂæóÂà∞ÊòéÊñáÁöÑ„ÄÇ‰ªéËøôÁÇπ‰∏äËÆ≤MD5‰∏çÊòØÂä†ÂØÜÁÆóÊ≥ïÔºåÊõ¥Ë∞à‰∏ç‰∏äÂ±û‰∫éÂØπÁß∞Âä†ÂØÜ„ÄÅÈùûÂØπÁß∞Âä†ÂØÜ„ÄÇÊâÄ‰ª•‰∏çË¶ÅÂÜçËÆ®ËÆ∫MD5ÊòØÂ±û‰∫éÂØπÁß∞Âä†ÂØÜ„ÄÅÈùûÂØπÁß∞Âä†ÂØÜ‰∫ÜÔºåMD5Êó¢‰∏çÂ±û‰∫éÂØπÁß∞Âä†ÂØÜ‰πü‰∏çÂ±û‰∫éÈùûÂØπÁß∞Âä†ÂØÜÔºåMD5Ê†πÊú¨Â∞±Ê≤°Ê≥ïËß£ÂØÜÔºå‰πüÊ≤°ÊúâÁßòÈí•ÔºàÂä†ÁõêÂπ∂‰∏çÊòØÁßòÈí•ÔºâÔºåÊâÄ‰ª•ÂèØ‰ª•ËÆ§‰∏∫MD5‰∏çÂ±û‰∫éÂä†ÂØÜÁÆóÊ≥ï„ÄÇ ‰∏Ä‰∫õ‰∫∫ËÆ§‰∏∫MD5Â§ÑÁêÜÂêéÁúã‰∏çÂà∞ÂéüÊñáÔºåÂç≥Â∑≤ÁªèÂ∞ÜÂéüÊñáÂä†ÂØÜÔºåÊâÄ‰ª•ËÆ§‰∏∫MD5Â±û‰∫éÂä†ÂØÜÁÆóÊ≥ï„ÄÇÂ¶ÇÊûúËøô‰πàÁúãÁöÑÔºåÈÇ£‰πàÊ±Ç‰Ωô‰πüÂèØ‰ª•ÁÆóÂä†ÂØÜÁÆóÊ≥ï‰∫Ü„ÄÇ ‰ΩúËÄÖÔºöGeCoderÈìæÊé•Ôºöhttps://www.zhihu.com/question/68735830/answer/327762693Êù•Ê∫êÔºöÁü•‰πéËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ ÊâÄ‰ª•Ôºåmd5 Âπ∂‰∏çÊòØÂä†ÂØÜÁÆóÊ≥ïÔºåÈÇ£ÂÖ∏ÂûãÁöÑÂä†ÂØÜÁÆóÊ≥ïÊúâÂì™‰∫õÂë¢Ôºü Âä†ÂØÜÊäÄÊúØÈÄöÂ∏∏ÂàÜ‰∏∫‰∏§Â§ßÁ±ª:‚ÄùÂØπÁß∞Âºè‚ÄùÂíå‚ÄùÈùûÂØπÁß∞Âºè‚Äù„ÄÇ ÂØπÁß∞ÊÄßÂä†ÂØÜÁÆóÊ≥ïÔºöÂØπÁß∞ÂºèÂä†ÂØÜÂ∞±ÊòØÂä†ÂØÜÂíåËß£ÂØÜ‰ΩøÁî®Âêå‰∏Ä‰∏™ÂØÜÈí•„ÄÇ‰ø°ÊÅØÊé•Êî∂ÂèåÊñπÈÉΩÈúÄ‰∫ãÂÖàÁü•ÈÅìÂØÜÂåôÂíåÂä†Ëß£ÂØÜÁÆóÊ≥ï‰∏îÂÖ∂ÂØÜÂåôÊòØÁõ∏ÂêåÁöÑÔºå‰πãÂêé‰æøÊòØÂØπÊï∞ÊçÆËøõË°åÂä†Ëß£ÂØÜ‰∫Ü„ÄÇÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïÁî®Êù•ÂØπÊïèÊÑüÊï∞ÊçÆÁ≠â‰ø°ÊÅØËøõË°åÂä†ÂØÜ„ÄÇ ÈùûÂØπÁß∞ÁÆóÊ≥ïÔºöÈùûÂØπÁß∞ÂºèÂä†ÂØÜÂ∞±ÊòØÂä†ÂØÜÂíåËß£ÂØÜÊâÄ‰ΩøÁî®ÁöÑ‰∏çÊòØÂêå‰∏Ä‰∏™ÂØÜÈí•ÔºåÈÄöÂ∏∏Êúâ‰∏§‰∏™ÂØÜÈí•ÔºåÁß∞‰∏∫‚ÄùÂÖ¨Èí•‚ÄùÂíå‚ÄùÁßÅÈí•‚ÄùÔºåÂÆÉ‰ª¨‰∏§‰∏™ÂøÖÈúÄÈÖçÂØπ‰ΩøÁî®ÔºåÂê¶Âàô‰∏çËÉΩÊâìÂºÄÂä†ÂØÜÊñá‰ª∂„ÄÇÂèëÈÄÅÂèåÊñπA,B‰∫ãÂÖàÂùáÁîüÊàê‰∏ÄÂ†ÜÂØÜÂåôÔºåÁÑ∂ÂêéAÂ∞ÜËá™Â∑±ÁöÑÂÖ¨ÊúâÂØÜÂåôÂèëÈÄÅÁªôBÔºåBÂ∞ÜËá™Â∑±ÁöÑÂÖ¨ÊúâÂØÜÂåôÂèëÈÄÅÁªôAÔºåÂ¶ÇÊûúAË¶ÅÁªôBÂèëÈÄÅÊ∂àÊÅØÔºåÂàôÂÖàÈúÄË¶ÅÁî®BÁöÑÂÖ¨ÊúâÂØÜÂåôËøõË°åÊ∂àÊÅØÂä†ÂØÜÔºåÁÑ∂ÂêéÂèëÈÄÅÁªôBÁ´ØÔºåÊ≠§Êó∂BÁ´ØÂÜçÁî®Ëá™Â∑±ÁöÑÁßÅÊúâÂØÜÂåôËøõË°åÊ∂àÊÅØËß£ÂØÜÔºåBÂêëAÂèëÈÄÅÊ∂àÊÅØÊó∂‰∏∫ÂêåÊ†∑ÁöÑÈÅìÁêÜ„ÄÇ Êï£ÂàóÁÆóÊ≥ïÔºöÊï£ÂàóÁÆóÊ≥ïÔºåÂèàÁß∞ÂìàÂ∏åÂáΩÊï∞ÔºåÊòØ‰∏ÄÁßçÂçïÂêëÂä†ÂØÜÁÆóÊ≥ï„ÄÇÂú®‰ø°ÊÅØÂÆâÂÖ®ÊäÄÊúØ‰∏≠ÔºåÁªèÂ∏∏ÈúÄË¶ÅÈ™åËØÅÊ∂àÊÅØÁöÑÂÆåÊï¥ÊÄßÔºåÊï£Âàó(Hash)ÂáΩÊï∞Êèê‰æõ‰∫ÜËøô‰∏ÄÊúçÂä°ÔºåÂÆÉÂØπ‰∏çÂêåÈïøÂ∫¶ÁöÑËæìÂÖ•Ê∂àÊÅØÔºå‰∫ßÁîüÂõ∫ÂÆöÈïøÂ∫¶ÁöÑËæìÂá∫„ÄÇËøô‰∏™Âõ∫ÂÆöÈïøÂ∫¶ÁöÑËæìÂá∫Áß∞‰∏∫ÂéüËæìÂÖ•Ê∂àÊÅØÁöÑ‚ÄùÊï£Âàó‚ÄùÊàñ‚ÄùÊ∂àÊÅØÊëòË¶Å‚Äù(Message digest)„ÄÇÊï£ÂàóÁÆóÊ≥ï‰∏çÁÆóÂä†ÂØÜÁÆóÊ≥ïÔºåÂõ†‰∏∫ÂÖ∂ÁªìÊûúÊòØ‰∏çÂèØÈÄÜÁöÑÔºåÊó¢ÁÑ∂ÊòØ‰∏çÂèØÈÄÜÁöÑÔºåÈÇ£‰πàÂΩìÁÑ∂‰∏çÊòØÁî®Êù•Âä†ÂØÜÁöÑÔºåËÄåÊòØÁ≠æÂêç„ÄÇ ÂØπÁß∞ÊÄßÂä†ÂØÜÁÆóÊ≥ïÊúâÔºöAES„ÄÅDES„ÄÅ3DESÁî®ÈÄîÔºöÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïÁî®Êù•ÂØπÊïèÊÑüÊï∞ÊçÆÁ≠â‰ø°ÊÅØËøõË°åÂä†ÂØÜ DESÔºàData Encryption StandardÔºâÔºöÊï∞ÊçÆÂä†ÂØÜÊ†áÂáÜÔºåÈÄüÂ∫¶ËæÉÂø´ÔºåÈÄÇÁî®‰∫éÂä†ÂØÜÂ§ßÈáèÊï∞ÊçÆÁöÑÂú∫Âêà„ÄÇ 3DESÔºàTriple DESÔºâÔºöÊòØÂü∫‰∫éDESÔºåÂØπ‰∏ÄÂùóÊï∞ÊçÆÁî®‰∏â‰∏™‰∏çÂêåÁöÑÂØÜÈí•ËøõË°å‰∏âÊ¨°Âä†ÂØÜÔºåÂº∫Â∫¶Êõ¥È´ò„ÄÇ AESÔºàAdvanced Encryption StandardÔºâÔºöÈ´òÁ∫ßÂä†ÂØÜÊ†áÂáÜÔºåÊòØ‰∏ã‰∏Ä‰ª£ÁöÑÂä†ÂØÜÁÆóÊ≥ïÊ†áÂáÜÔºåÈÄüÂ∫¶Âø´ÔºåÂÆâÂÖ®Á∫ßÂà´È´òÔºõAESÊòØ‰∏Ä‰∏™‰ΩøÁî®128‰∏∫ÂàÜÁªÑÂùóÁöÑÂàÜÁªÑÂä†ÂØÜÁÆóÊ≥ïÔºåÂàÜÁªÑÂùóÂíå128„ÄÅ192Êàñ256‰ΩçÁöÑÂØÜÈí•‰∏ÄËµ∑‰Ωú‰∏∫ËæìÂÖ•ÔºåÂØπ4√ó4ÁöÑÂ≠óËäÇÊï∞ÁªÑ‰∏äËøõË°åÊìç‰Ωú„ÄÇ‰ºóÊâÄÂë®‰πãAESÊòØÁßçÂçÅÂàÜÈ´òÊïàÁöÑÁÆóÊ≥ïÔºåÂ∞§ÂÖ∂Âú®8‰ΩçÊû∂ÊûÑ‰∏≠ÔºåËøôÊ∫ê‰∫éÂÆÉÈù¢ÂêëÂ≠óËäÇÁöÑËÆæËÆ°„ÄÇAES ÈÄÇÁî®‰∫é8‰ΩçÁöÑÂ∞èÂûãÂçïÁâáÊú∫ÊàñËÄÖÊôÆÈÄöÁöÑ32‰ΩçÂæÆÂ§ÑÁêÜÂô®,Âπ∂‰∏îÈÄÇÂêàÁî®‰∏ìÈó®ÁöÑÁ°¨‰ª∂ÂÆûÁé∞ÔºåÁ°¨‰ª∂ÂÆûÁé∞ËÉΩÂ§ü‰ΩøÂÖ∂ÂêûÂêêÈáèÔºàÊØèÁßíÂèØ‰ª•Âà∞ËææÁöÑÂä†ÂØÜ/Ëß£ÂØÜbitÊï∞ÔºâËææÂà∞ÂçÅ‰∫øÈáèÁ∫ß„ÄÇÂêåÊ†∑ÔºåÂÖ∂‰πüÈÄÇÁî®‰∫éRFIDÁ≥ªÁªü„ÄÇ ÈùûÂØπÁß∞ÊÄßÁÆóÊ≥ïÊúâÔºöRSA„ÄÅDSA„ÄÅECC RSAÔºöÁî± RSA ÂÖ¨Âè∏ÂèëÊòéÔºåÊòØ‰∏Ä‰∏™ÊîØÊåÅÂèòÈïøÂØÜÈí•ÁöÑÂÖ¨ÂÖ±ÂØÜÈí•ÁÆóÊ≥ïÔºåÈúÄË¶ÅÂä†ÂØÜÁöÑÊñá‰ª∂ÂùóÁöÑÈïøÂ∫¶‰πüÊòØÂèØÂèòÁöÑ„ÄÇRSAÂú®ÂõΩÂ§ñÊó©Â∑≤ËøõÂÖ•ÂÆûÁî®Èò∂ÊÆµÔºåÂ∑≤Á†îÂà∂Âá∫Â§öÁßçÈ´òÈÄüÁöÑRSAÁöÑ‰∏ìÁî®ËäØÁâá„ÄÇ DSAÔºàDigital Signature AlgorithmÔºâÔºöÊï∞Â≠óÁ≠æÂêçÁÆóÊ≥ïÔºåÊòØ‰∏ÄÁßçÊ†áÂáÜÁöÑ DSSÔºàÊï∞Â≠óÁ≠æÂêçÊ†áÂáÜÔºâÔºå‰∏•Ê†ºÊù•ËØ¥‰∏çÁÆóÂä†ÂØÜÁÆóÊ≥ï„ÄÇ ECCÔºàElliptic Curves CryptographyÔºâÔºöÊ§≠ÂúÜÊõ≤Á∫øÂØÜÁ†ÅÁºñÁ†ÅÂ≠¶„ÄÇECCÂíåRSAÁõ∏ÊØîÔºåÂÖ∑ÊúâÂ§öÊñπÈù¢ÁöÑÁªùÂØπ‰ºòÂäøÔºå‰∏ªË¶ÅÊúâÔºöÊäóÊîªÂáªÊÄßÂº∫„ÄÇÁõ∏ÂêåÁöÑÂØÜÈí•ÈïøÂ∫¶ÔºåÂÖ∂ÊäóÊîªÂáªÊÄßË¶ÅÂº∫ÂæàÂ§öÂÄç„ÄÇËÆ°ÁÆóÈáèÂ∞èÔºåÂ§ÑÁêÜÈÄüÂ∫¶Âø´„ÄÇECCÊÄªÁöÑÈÄüÂ∫¶ÊØîRSA„ÄÅDSAË¶ÅÂø´ÂæóÂ§ö„ÄÇÂ≠òÂÇ®Á©∫Èó¥Âç†Áî®Â∞è„ÄÇECCÁöÑÂØÜÈí•Â∞∫ÂØ∏ÂíåÁ≥ªÁªüÂèÇÊï∞‰∏éRSA„ÄÅDSAÁõ∏ÊØîË¶ÅÂ∞èÂæóÂ§öÔºåÊÑèÂë≥ÁùÄÂÆÉÊâÄÂç†ÁöÑÂ≠òË¥ÆÁ©∫Èó¥Ë¶ÅÂ∞èÂæóÂ§ö„ÄÇËøôÂØπ‰∫éÂä†ÂØÜÁÆóÊ≥ïÂú®ICÂç°‰∏äÁöÑÂ∫îÁî®ÂÖ∑ÊúâÁâπÂà´ÈáçË¶ÅÁöÑÊÑè‰πâ„ÄÇÂ∏¶ÂÆΩË¶ÅÊ±Ç‰Ωé„ÄÇÂΩìÂØπÈïøÊ∂àÊÅØËøõË°åÂä†Ëß£ÂØÜÊó∂Ôºå‰∏âÁ±ªÂØÜÁ†ÅÁ≥ªÁªüÊúâÁõ∏ÂêåÁöÑÂ∏¶ÂÆΩË¶ÅÊ±ÇÔºå‰ΩÜÂ∫îÁî®‰∫éÁü≠Ê∂àÊÅØÊó∂ECCÂ∏¶ÂÆΩË¶ÅÊ±ÇÂç¥‰ΩéÂæóÂ§ö„ÄÇÂ∏¶ÂÆΩË¶ÅÊ±Ç‰Ωé‰ΩøECCÂú®Êó†Á∫øÁΩëÁªúÈ¢ÜÂüüÂÖ∑ÊúâÂπøÊ≥õÁöÑÂ∫îÁî®ÂâçÊôØ„ÄÇ Êï£ÂàóÁÆóÊ≥ïÔºàÁ≠æÂêçÁÆóÊ≥ïÔºâÊúâÔºöMD5„ÄÅSHA1„ÄÅHMACÁî®ÈÄîÔºö‰∏ªË¶ÅÁî®‰∫éÈ™åËØÅÔºåÈò≤Ê≠¢‰ø°ÊÅØË¢´‰øÆ„ÄÇÂÖ∑‰ΩìÁî®ÈÄîÂ¶ÇÔºöÊñá‰ª∂Ê†°È™å„ÄÅÊï∞Â≠óÁ≠æÂêç„ÄÅÈâ¥ÊùÉÂçèËÆÆ MD5ÔºöMD5ÊòØ‰∏ÄÁßç‰∏çÂèØÈÄÜÁöÑÂä†ÂØÜÁÆóÊ≥ïÔºåÁõÆÂâçÊòØÊúÄÁâ¢Èù†ÁöÑÂä†ÂØÜÁÆóÊ≥ï‰πã‰∏ÄÔºåÂ∞öÊ≤°ÊúâËÉΩÂ§üÈÄÜËøêÁÆóÁöÑÁ®ãÂ∫èË¢´ÂºÄÂèëÂá∫Êù•ÔºåÂÆÉÂØπÂ∫î‰ªª‰ΩïÂ≠óÁ¨¶‰∏≤ÈÉΩÂèØ‰ª•Âä†ÂØÜÊàê‰∏ÄÊÆµÂîØ‰∏ÄÁöÑÂõ∫ÂÆöÈïøÂ∫¶ÁöÑ‰ª£Á†Å„ÄÇ SHA1ÔºöÊòØÁî±NISTNSAËÆæËÆ°‰∏∫ÂêåDSA‰∏ÄËµ∑‰ΩøÁî®ÁöÑÔºåÂÆÉÂØπÈïøÂ∫¶Â∞è‰∫é264ÁöÑËæìÂÖ•Ôºå‰∫ßÁîüÈïøÂ∫¶‰∏∫160bitÁöÑÊï£ÂàóÂÄºÔºåÂõ†Ê≠§ÊäóÁ©∑‰∏æ(brute-force)ÊÄßÊõ¥Â•Ω„ÄÇSHA-1ËÆæËÆ°Êó∂Âü∫‰∫éÂíåMD4Áõ∏ÂêåÂéüÁêÜ,Âπ∂‰∏îÊ®°‰ªø‰∫ÜËØ•ÁÆóÊ≥ï„ÄÇSHA-1ÊòØÁî±ÁæéÂõΩÊ†áÂáÜÊäÄÊúØÂ±ÄÔºàNISTÔºâÈ¢ÅÂ∏ÉÁöÑÂõΩÂÆ∂Ê†áÂáÜÔºåÊòØ‰∏ÄÁßçÂ∫îÁî®ÊúÄ‰∏∫ÂπøÊ≥õÁöÑHashÂáΩÊï∞ÁÆóÊ≥ïÔºå‰πüÊòØÁõÆÂâçÊúÄÂÖàËøõÁöÑÂä†ÂØÜÊäÄÊúØÔºåË¢´ÊîøÂ∫úÈÉ®Èó®ÂíåÁßÅËê•‰∏ö‰∏ªÁî®Êù•Â§ÑÁêÜÊïèÊÑüÁöÑ‰ø°ÊÅØ„ÄÇËÄåSHA-1Âü∫‰∫éMD5ÔºåMD5ÂèàÂü∫‰∫éMD4„ÄÇ HMACÔºöÊòØÂØÜÈí•Áõ∏ÂÖ≥ÁöÑÂìàÂ∏åËøêÁÆóÊ∂àÊÅØËÆ§ËØÅÁ†ÅÔºàHash-based Message Authentication CodeÔºâ,HMACËøêÁÆóÂà©Áî®ÂìàÂ∏åÁÆóÊ≥ïÔºå‰ª•‰∏Ä‰∏™ÂØÜÈí•Âíå‰∏Ä‰∏™Ê∂àÊÅØ‰∏∫ËæìÂÖ•ÔºåÁîüÊàê‰∏Ä‰∏™Ê∂àÊÅØÊëòË¶Å‰Ωú‰∏∫ËæìÂá∫„ÄÇ‰πüÂ∞±ÊòØËØ¥HMACÊòØÈúÄË¶Å‰∏Ä‰∏™ÂØÜÈí•ÁöÑ„ÄÇÊâÄ‰ª•ÔºåHMAC_SHA1‰πüÊòØÈúÄË¶Å‰∏Ä‰∏™ÂØÜÈí•ÁöÑÔºåËÄåSHA1‰∏çÈúÄË¶Å„ÄÇ ÂÖ∂‰ªñÂ∏∏Áî®ÁÆóÊ≥ïÔºö Base64ÔºöÂÖ∂ÂÆû‰∏çÊòØÂÆâÂÖ®È¢ÜÂüü‰∏ãÁöÑÂä†ÂØÜËß£ÂØÜÁÆóÊ≥ïÔºåÂè™ËÉΩÁÆóÊòØ‰∏Ä‰∏™ÁºñÁ†ÅÁÆóÊ≥ïÔºåÈÄöÂ∏∏Áî®‰∫éÊää‰∫åËøõÂà∂Êï∞ÊçÆÁºñÁ†Å‰∏∫ÂèØÂÜôÁöÑÂ≠óÁ¨¶ÂΩ¢ÂºèÁöÑÊï∞ÊçÆÔºåÂØπÊï∞ÊçÆÂÜÖÂÆπËøõË°åÁºñÁ†ÅÊù•ÈÄÇÂêà‰º†Ëæì(ÂèØ‰ª•ÂØπimgÂõæÂÉèÁºñÁ†ÅÁî®‰∫é‰º†Ëæì)„ÄÇËøôÊòØ‰∏ÄÁßçÂèØÈÄÜÁöÑÁºñÁ†ÅÊñπÂºè„ÄÇ HTTPSÔºàÂÖ®Áß∞ÔºöHypertext Transfer Protocol over Secure Socket LayerÔºâÔºåÊòØ‰ª•ÂÆâÂÖ®‰∏∫ÁõÆÊ†áÁöÑHTTPÈÄöÈÅìÔºåÁÆÄÂçïËÆ≤ÊòØHTTPÁöÑÂÆâÂÖ®Áâà„ÄÇÂç≥HTTP‰∏ãÂä†ÂÖ•SSLÂ±ÇÔºåHTTPSÁöÑÂÆâÂÖ®Âü∫Á°ÄÊòØSSL(SSL‰ΩøÁî®40 ‰ΩçÂÖ≥ÈîÆÂ≠ó‰Ωú‰∏∫RC4ÊµÅÂä†ÂØÜÁÆóÊ≥ïÔºåËøôÂØπ‰∫éÂïÜ‰∏ö‰ø°ÊÅØÁöÑÂä†ÂØÜÊòØÂêàÈÄÇÁöÑ„ÄÇ)ÔºåÂõ†Ê≠§Âä†ÂØÜÁöÑËØ¶ÁªÜÂÜÖÂÆπÂ∞±ÈúÄË¶ÅSSL„ÄÇhttps:URLË°®ÊòéÂÆÉ‰ΩøÁî®‰∫ÜHTTPÔºå‰ΩÜHTTPSÂ≠òÂú®‰∏çÂêå‰∫éHTTPÁöÑÈªòËÆ§Á´ØÂè£Âèä‰∏Ä‰∏™Âä†ÂØÜ/Ë∫´‰ªΩÈ™åËØÅÂ±ÇÔºàÂú®HTTP‰∏éTCP‰πãÈó¥ÔºâÔºåÊèê‰æõ‰∫ÜË∫´‰ªΩÈ™åËØÅ‰∏éÂä†ÂØÜÈÄöËÆØÊñπÊ≥ïÔºåÁé∞Âú®ÂÆÉË¢´ÂπøÊ≥õÁî®‰∫é‰∏áÁª¥ÁΩë‰∏äÂÆâÂÖ®ÊïèÊÑüÁöÑÈÄöËÆØÔºå‰æãÂ¶Ç‰∫§ÊòìÊîØ‰ªòÊñπÈù¢„ÄÇÂÆÉÁöÑ‰∏ªË¶Å‰ΩúÁî®ÂèØ‰ª•ÂàÜ‰∏∫‰∏§ÁßçÔºö‰∏ÄÁßçÊòØÂª∫Á´ã‰∏Ä‰∏™‰ø°ÊÅØÂÆâÂÖ®ÈÄöÈÅìÔºåÊù•‰øùËØÅÊï∞ÊçÆ‰º†ËæìÁöÑÂÆâÂÖ®ÔºõÂè¶‰∏ÄÁßçÂ∞±ÊòØÁ°ÆËÆ§ÁΩëÁ´ôÁöÑÁúüÂÆûÊÄß„ÄÇHttps Â∞±ÂèØ‰ª•‰ΩøÁî®‰∏äÈù¢ÁöÑÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïÂíåÈùûÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïËøõË°åÊ∂àÊÅØÁöÑÂä†ÂØÜ„ÄÇ È°πÁõÆÂ∫îÁî®ÊÄªÁªìÔºö Âä†ÂØÜÁÆóÊ≥ïÊòØÂèØÈÄÜÁöÑÔºåÁî®Êù•ÂØπÊïèÊÑüÊï∞ÊçÆËøõË°å‰øùÊä§„ÄÇÊï£ÂàóÁÆóÊ≥ï(Á≠æÂêçÁÆóÊ≥ï„ÄÅÂìàÂ∏åÁÆóÊ≥ï)ÊòØ‰∏çÂèØÈÄÜÁöÑÔºå‰∏ªË¶ÅÁî®‰∫éË∫´‰ªΩÈ™åËØÅ„ÄÇ ÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ï‰ΩøÁî®Âêå‰∏Ä‰∏™ÂØÜÂåôÂä†ÂØÜÂíåËß£ÂØÜÔºåÈÄüÂ∫¶Âø´ÔºåÈÄÇÂêàÁªôÂ§ßÈáèÊï∞ÊçÆÂä†ÂØÜ„ÄÇÂØπÁß∞Âä†ÂØÜÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Á´Ø‰ΩøÁî®Âêå‰∏Ä‰∏™ÂØÜÂåôÔºåÂ≠òÂú®Ë¢´ÊäìÂåÖÁ†¥Ëß£ÁöÑÈ£éÈô©„ÄÇ ÈùûÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ï‰ΩøÁî®ÂÖ¨Èí•Âä†ÂØÜÔºåÁßÅÈí•Ëß£ÂØÜÔºåÁßÅÈí•Á≠æÂêçÔºåÂÖ¨Èí•È™åÁ≠æ„ÄÇÂÆâÂÖ®ÊÄßÊØîÂØπÁß∞Âä†ÂØÜÈ´òÔºå‰ΩÜÈÄüÂ∫¶ËæÉÊÖ¢„ÄÇÈùûÂØπÁß∞Âä†ÂØÜ‰ΩøÁî®‰∏§‰∏™ÂØÜÂåôÔºåÊúçÂä°Á´ØÂíåÂÆ¢Êà∑Á´ØÂØÜÂåô‰∏ç‰∏ÄÊ†∑ÔºåÁßÅÈí•ÊîæÂú®ÊúçÂä°Á´ØÔºåÈªëÂÆ¢‰∏ÄËà¨ÊòØÊãø‰∏çÂà∞ÁöÑÔºåÂÆâÂÖ®ÊÄßÈ´ò„ÄÇ Base64‰∏çÊòØÂÆâÂÖ®È¢ÜÂüü‰∏ãÁöÑÂä†Ëß£ÂØÜÁÆóÊ≥ïÔºåÂè™ÊòØ‰∏Ä‰∏™ÁºñÁ†ÅÁÆóÊ≥ïÔºåÈÄöÂ∏∏Áî®‰∫éÊää‰∫åËøõÂà∂Êï∞ÊçÆÁºñÁ†Å‰∏∫ÂèØÂÜôÁöÑÂ≠óÁ¨¶ÂΩ¢ÂºèÁöÑÊï∞ÊçÆÔºåÁâπÂà´ÈÄÇÂêàÂú®httpÔºåmimeÂçèËÆÆ‰∏ãÁöÑÁΩëÁªúÂø´ÈÄü‰º†ËæìÊï∞ÊçÆ„ÄÇUTF-8ÂíåGBK‰∏≠ÊñáÁöÑBase64ÁºñÁ†ÅÁªìÊûúÊòØ‰∏çÂêåÁöÑ„ÄÇÈááÁî®Base64ÁºñÁ†Å‰∏ç‰ªÖÊØîËæÉÁÆÄÁü≠ÔºåÂêåÊó∂‰πüÂÖ∑Êúâ‰∏çÂèØËØªÊÄßÔºåÂç≥ÊâÄÁºñÁ†ÅÁöÑÊï∞ÊçÆ‰∏ç‰ºöË¢´‰∫∫Áî®ËÇâÁúºÊâÄÁõ¥Êé•ÁúãÂà∞Ôºå‰ΩÜËøôÁßçÊñπÂºèÂæàÂàùÁ∫ßÔºåÂæàÁÆÄÂçï„ÄÇBase64ÂèØ‰ª•ÂØπÂõæÁâáÊñá‰ª∂ËøõË°åÁºñÁ†Å‰º†Ëæì„ÄÇ httpsÂçèËÆÆÂπøÊ≥õÁî®‰∫é‰∏áÁª¥ÁΩë‰∏äÂÆâÂÖ®ÊïèÊÑüÁöÑÈÄöËÆØÔºå‰æãÂ¶Ç‰∫§ÊòìÊîØ‰ªòÊñπÈù¢„ÄÇÂÆÉÁöÑ‰∏ªË¶Å‰ΩúÁî®ÂèØ‰ª•ÂàÜ‰∏∫‰∏§ÁßçÔºö‰∏ÄÁßçÊòØÂª∫Á´ã‰∏Ä‰∏™‰ø°ÊÅØÂÆâÂÖ®ÈÄöÈÅìÔºåÊù•‰øùËØÅÊï∞ÊçÆ‰º†ËæìÁöÑÂÆâÂÖ®ÔºõÂè¶‰∏ÄÁßçÂ∞±ÊòØÁ°ÆËÆ§ÁΩëÁ´ôÁöÑÁúüÂÆûÊÄß„ÄÇ Â§ßÈáèÊï∞ÊçÆÂä†ÂØÜÂª∫ËÆÆÈááÁî®ÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïÔºåÊèêÈ´òÂä†Ëß£ÂØÜÈÄüÂ∫¶ÔºõÂ∞èÈáèÁöÑÊú∫ÂØÜÊï∞ÊçÆÔºåÂèØ‰ª•ÈááÁî®ÈùûÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ï„ÄÇÂú®ÂÆûÈôÖÁöÑÊìç‰ΩúËøáÁ®ã‰∏≠ÔºåÊàë‰ª¨ÈÄöÂ∏∏ÈááÁî®ÁöÑÊñπÂºèÊòØÔºöÈááÁî®ÈùûÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïÁÆ°ÁêÜÂØπÁß∞ÁÆóÊ≥ïÁöÑÂØÜÈí•ÔºåÁÑ∂ÂêéÁî®ÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïÂä†ÂØÜÊï∞ÊçÆÔºåËøôÊ†∑Êàë‰ª¨Â∞±ÈõÜÊàê‰∫Ü‰∏§Á±ªÂä†ÂØÜÁÆóÊ≥ïÁöÑ‰ºòÁÇπÔºåÊó¢ÂÆûÁé∞‰∫ÜÂä†ÂØÜÈÄüÂ∫¶Âø´ÁöÑ‰ºòÁÇπÔºåÂèàÂÆûÁé∞‰∫ÜÂÆâÂÖ®Êñπ‰æøÁÆ°ÁêÜÂØÜÈí•ÁöÑ‰ºòÁÇπ„ÄÇ MD5Ê†áÂáÜÂØÜÈí•ÈïøÂ∫¶128‰ΩçÔºà128‰ΩçÊòØÊåá‰∫åËøõÂà∂‰Ωç„ÄÇ‰∫åËøõÂà∂Â§™ÈïøÔºåÊâÄ‰ª•‰∏ÄËà¨ÈÉΩÊîπÂÜôÊàê16ËøõÂà∂ÔºåÊØè‰∏Ä‰Ωç16ËøõÂà∂Êï∞ÂèØ‰ª•‰ª£Êõø4‰Ωç‰∫åËøõÂà∂Êï∞ÔºåÊâÄ‰ª•128‰Ωç‰∫åËøõÂà∂Êï∞ÂÜôÊàê16ËøõÂà∂Â∞±ÂèòÊàê‰∫Ü128/4=32‰Ωç„ÄÇ16‰ΩçÂä†ÂØÜÂ∞±ÊòØ‰ªé32‰ΩçMD5Êï£Âàó‰∏≠Êää‰∏≠Èó¥16‰ΩçÊèêÂèñÂá∫Êù•ÔºâÔºõsha1Ê†áÂáÜÂØÜÈí•ÈïøÂ∫¶60‰Ωç(ÊØîMD5ÊëòË¶ÅÈïø32‰Ωç)ÔºåBase64ËΩ¨Êç¢ÂêéÁöÑÂ≠óÁ¨¶‰∏≤ÁêÜËÆ∫‰∏äÂ∞ÜË¶ÅÊØîÂéüÊù•ÁöÑÈïø1/3„ÄÇ ‰ª•‰∏äÂÜÖÂÆπÊù•Ëá™‰∫éÔºöhttps://www.cnblogs.com/sochishun/p/7028056.html ‰∏™‰∫∫ÁêÜËß£ÁöÑÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïÁöÑËøáÁ®ãÔºö A ‰∏é B ÂïÜÂÆöÂ•ΩÂä†ÂØÜÁÆóÊ≥ïÔºåÁÑ∂Âêé A Â¶ÇÊûúÁªô B ÂèëÊ∂àÊÅØÔºå‰ºöÂÖàËøêÁî®Âä†ÂØÜÁÆóÊ≥ïÔºåËøõË°åÂä†ÂØÜÔºåB Êî∂Âà∞ÂêéÔºå‰ºöËøêÁî®ÈÄÜÂä†ÂØÜÁÆóÊ≥ïÔºåËøõË°åËß£ÂØÜÔºå‰πüÂ∞±ÊòØÂÖ∂ÂØÜÈí•ÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ ‰∏™‰∫∫ÁêÜËß£ÁöÑÈùûÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïÁöÑËøáÁ®ãÔºö A Âíå B ÂêÑËá™Êã•Êúâ‰∏ÄÂØπÂÖ¨Èí•ÂíåÁßÅÈí•Ôºå‰πüÂ∞±ÊòØËØ¥‰∫åËÄÖÂèëÈÄÅÊ∂àÊÅØÁöÑÂä†ÂØÜÁÆóÊ≥ïÂèØ‰ª•‰∫í‰∏çÁõ∏ÂêåÔºå‰∏îÂØπÊñπÂèØ‰ª•‰∏çÁî®Áü•ÈÅì„ÄÇ‰æãÂ¶Ç A Ë¶ÅÁªô B ÂèëÊ∂àÊÅØÔºåË¶ÅÊãøÂà∞ B ÁöÑÂÖ¨Èí•ÔºåÁÑ∂ÂêéËøõË°åÂä†ÂØÜÂç≥ÂèØÔºåB Êî∂Âà∞ÂêéÁî®Ëá™Â∑±ÁöÑÁßÅÈí•Â∞±ÂèØ‰ª•Ëß£ÂºÄ‰∫Ü„ÄÇ ‰ªãÁªçBIO„ÄÅNIO„ÄÅAIO Ëøô‰∏™ÁÆÄÂçï‚Ä¶ËØ¶ÁªÜÁöÑÂèôËø∞ËßÅÊàë „ÄäÈõ∂Êã∑Ë¥ùÂèäÂÖ∂Âë®Ëæπ„Äã BIOÔºöÊôÆÈÄöÁöÑÂêåÊ≠•ÈòªÂ°û I/O NIOÔºöÂêåÊ≠•ÈùûÈòªÂ°û I/O AIO ÔºöÂºÇÊ≠•ÈùûÈòªÂ°û I/O ËôöÊãüÂÜÖÂ≠ò Ëøô‰∏™ÊòØÁü•ËØÜÁõ≤Âå∫ÔºåÈúÄË¶ÅÂ•ΩÂ•ΩÁßëÊôÆ‰∏Ä‰∏ã„ÄÇ ÊàëÁöÑÂ§©ÂïäÔºÅÔºÅÔºÅÔºÅËá™Â∑±ÁöÑ„ÄäÈõ∂Êã∑Ë¥ùÂèäÂÖ∂Âë®Ëæπ„ÄãÊó©Â∞±‰ªãÁªçËøáËôöÊãüÂÜÖÂ≠òÔºåÈù¢ËØïÁöÑÊó∂ÂÄôÁ´üÁÑ∂Ê≤°ÊúâÊÉ≥Ëµ∑Êù•ÔºåËøòÁü•ËØÜÁõ≤Âå∫Âë¢ÔºüÔºüÔºüÁúüÁöÑÊòØÊô∫ÈöúÂïäÂïäÂïäÂïä„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇËøô‰∏™Ê≤°Á≠î‰∏äÊù•ÁúüÁöÑÂ§™ÂèØÊÉú‰∫ÜÔºå‰∏çËøáËøòÂ•ΩÈù¢ËØïÂÆòÊ≤°ÊúâÊ∑±Á©∂‚Ä¶ ËôöÊãüÂÜÖÂ≠ò ËôöÊãüÂÜÖÂ≠òÊòØËÆ°ÁÆóÊú∫Á≥ªÁªüÂÜÖÂ≠òÁÆ°ÁêÜÁöÑ‰∏ÄÁßçÊäÄÊúØ„ÄÇ ÂÆÉ‰ΩøÂæóÂ∫îÁî®Á®ãÂ∫èËÆ§‰∏∫ÂÆÉÊã•ÊúâËøûÁª≠ÁöÑÂèØÁî®ÁöÑÂÜÖÂ≠òÔºà‰∏Ä‰∏™ËøûÁª≠ÂÆåÊï¥ÁöÑÂú∞ÂùÄÁ©∫Èó¥Ôºâ„ÄÇËÄåÂÆûÈôÖ‰∏äÔºåËôöÊãüÂÜÖÂ≠òÈÄöÂ∏∏ÊòØË¢´ÂàÜÈöîÊàêÂ§ö‰∏™Áâ©ÁêÜÂÜÖÂ≠òÁ¢éÁâáÔºåËøòÊúâÈÉ®ÂàÜÊöÇÊó∂Â≠òÂÇ®Âú®Â§ñÈÉ®Á£ÅÁõòÂ≠òÂÇ®Âô®‰∏äÔºåÂú®ÈúÄË¶ÅÊó∂ËøõË°åÊï∞ÊçÆ‰∫§Êç¢ÔºåÂä†ËΩΩÂà∞Áâ©ÁêÜÂÜÖÂ≠ò‰∏≠Êù•„ÄÇ ÁõÆÂâçÔºåÂ§ßÂ§öÊï∞Êìç‰ΩúÁ≥ªÁªüÈÉΩ‰ΩøÁî®‰∫ÜËôöÊãüÂÜÖÂ≠òÔºåÂ¶Ç Windows Á≥ªÁªüÁöÑËôöÊãüÂÜÖÂ≠ò„ÄÅLinux Á≥ªÁªüÁöÑ‰∫§Êç¢Á©∫Èó¥Á≠âÁ≠â„ÄÇ Á¶ªÂºÄËøõÁ®ãË∞àËôöÊãüÂÜÖÂ≠òÊ≤°Êúâ‰ªª‰ΩïÊÑè‰πâÔºå‰∏çÂêåËøõÁ®ãÈáåÁöÑÂêå‰∏Ä‰∏™ËôöÊãüÂú∞ÂùÄÊåáÂêëÁöÑÁâ©ÁêÜÂú∞ÂùÄÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑ„ÄÇÊØè‰∏™Áî®Êà∑ËøõÁ®ãÁª¥Êä§‰∫Ü‰∏Ä‰∏™ÂçïÁã¨ÁöÑÈ°µË°®ÔºàPage TableÔºâÔºåËôöÊãüÂÜÖÂ≠òÂíåÁâ©ÁêÜÂÜÖÂ≠òÂ∞±ÊòØÈÄöËøáËøô‰∏™È°µË°®ÂÆûÁé∞Âú∞ÂùÄÁ©∫Èó¥ÁöÑÊò†Â∞ÑÁöÑÔºåÈ°µË°®ÔºàPage TableÔºâÈáåÈù¢ÁöÑÊï∞ÊçÆÁî±Êìç‰ΩúÁ≥ªÁªüÁª¥Êä§„ÄÇ ÂºïÂÖ•ËôöÊãüÂÜÖÂ≠òÁöÑÂ•ΩÂ§Ñ Âú®ËøõÁ®ãÂíåÁâ©ÁêÜÂÜÖÂ≠ò‰πãÈó¥ÔºåÂä†‰∫Ü‰∏ÄÂ±ÇËôöÊãüÂÜÖÂ≠òÁöÑÊ¶ÇÂøµÔºåÂ•ΩÂ§ÑÊúâÔºö Êèê‰æõÊõ¥Â§ßÁöÑÂú∞ÂùÄÁ©∫Èó¥ÔºåÂõ†‰∏∫ËôöÊãüÂÜÖÂ≠òËøòÂèØ‰ª•ÊîæÂú®Á£ÅÁõò‰∏äÊàñËÄÖÂØÑÂ≠òÂô®‰∏≠ÔºåËÄåÁâ©ÁêÜÂÜÖÂ≠òÂπ∂‰∏çË°åÔºåËÄå‰∏îËôöÊãüÂú∞ÂùÄÁ©∫Èó¥ÊòØËøûÁª≠ÁöÑÔºåÊàë‰ª¨‰∏çÈúÄË¶ÅÊìçÂøÉÂÖ∑‰ΩìÊòØÂ¶Ç‰ΩïÂ≠òÊîæÁöÑÔºåÊìç‰ΩúÁ≥ªÁªü‰ºöÂ∏ÆÊàë‰ª¨Êò†Â∞ÑÂ•ΩÔºõ ÂÆâÂÖ®ÊÄßÊõ¥Â•ΩÔºåËôöÊãüÂÜÖÂ≠òËÆæÊúâËØªÂÜôÂ±ûÊÄßÔºåÂπ∂‰∏î‰∏çÂêåËøõÁ®ã‰∫í‰∏çÂΩ±ÂìçÔºõ ÂèØ‰ª•ÊáíÂä†ËΩΩÔºåÂè™ÊúâÂú®ÈúÄË¶ÅËØªÁõ∏Â∫îÁöÑÊñá‰ª∂ÁöÑÊó∂ÂÄôÔºåÊâçÂ∞ÜÂÆÉÁúüÊ≠£ÁöÑ‰ªéÁ£ÅÁõò‰∏äÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠Êù•ÔºåËÄåÂú®ÂÜÖÂ≠òÂêÉÁ¥ßÁöÑÊó∂ÂÄôÂèàÂèØ‰ª•Â∞ÜËøôÈÉ®ÂàÜÂÜÖÂ≠òÊ∏ÖÁ©∫ÊéâÔºåÊèêÈ´òÁâ©ÁêÜÂÜÖÂ≠òÂà©Áî®ÊïàÁéáÔºåÂπ∂‰∏îÊâÄÊúâËøô‰∫õÂØπÂ∫îÁî®Á®ãÂ∫èÊòØÈÉΩÈÄèÊòéÁöÑÔºõ ÂèØ‰ª•ÂÖ±‰∫´ÂÜÖÂ≠òÔºåÂä®ÊÄÅÂ∫ìÂè™ÈúÄË¶ÅÂú®ÂÜÖÂ≠ò‰∏≠Â≠ò‰∏Ä‰ªΩÂ∞±Â§ü‰∫ÜÔºåÁÑ∂ÂêéÂ∞ÜÂÆÉÊò†Â∞ÑÂà∞‰∏çÂêåËøõÁ®ãÁöÑËôöÊãüÂú∞ÂùÄÁ©∫Èó¥‰∏≠ÔºåËÆ©ËøõÁ®ãËßâÂæóËá™Â∑±Áã¨Âç†‰∫ÜËøô‰∏™Êñá‰ª∂„ÄÇËøõÁ®ãÈó¥ÁöÑÂÜÖÂ≠òÂÖ±‰∫´‰πüÂèØ‰ª•ÈÄöËøáÊò†Â∞ÑÂêå‰∏ÄÂùóÁâ©ÁêÜÂÜÖÂ≠òÂà∞ËøõÁ®ãÁöÑ‰∏çÂêåËôöÊãüÂú∞ÂùÄÁ©∫Èó¥Êù•ÂÆûÁé∞ÂÖ±‰∫´„ÄÇ Â¶ÇÊûúÊÉ≥‰∫ÜËß£Êõ¥Â∫ïÂ±ÇÁöÑËØùÔºåÊà≥ÈìæÊé•Ôºöhttps://sylvanassun.github.io/2017/10/29/2017-10-29-virtual_memory/#comments ËØùËØ¥ÊúÄÊãøÊâãÁöÑÊï∞ÊçÆÂ∫ìÁ´üÁÑ∂‰∏ÄÁÇπÈÉΩÊ≤°ÈóÆÔºåÊÑüËßâÊúâÁÇπÊÑèÁäπÊú™Â∞ΩÂìàÂìàÂìàÂìàÂìà‚Ä¶ 2020.4.06 17:30 - 17:45 „Äå15 ÂàÜÈíü„Äç ËÖæËÆØ hr Èù¢ Ëá™Êàë‰ªãÁªç È°πÁõÆ‰∏≠ÈÅáÂà∞ÁöÑÊúÄÂ§ßÁöÑÂõ∞Èöæ‰ª•ÂèäÂ¶Ç‰ΩïËß£ÂÜ≥ÁöÑ È°πÁõÆ‰∏≠Â¶Ç‰ΩïÂàÜÂ∑• Êú™Êù• 3-5 Âπ¥ÁöÑËßÑÂàí ‰ºòÁº∫ÁÇπ Áé∞Âú®Èù¢ËØï‰∫ÜÂá†ÂÆ∂ÂÖ¨Âè∏ÔºåÂêÑËá™ÂÖ∑‰ΩìÊµÅÁ®ãÊòØ‰ªÄ‰πà Â¶ÇÊûúÁªô‰Ω†ÂèëofferÔºå‰Ω†‰ºöÊÄé‰πàÈÄâ 2020.4.08 14:30 - 15:00 „Äå30 ÂàÜÈíü„ÄçÈòøÈáå hr Èù¢Â∞±ÊòØÊ≠£Â∏∏ÁöÑËÅäÂ§© Ëá™Êàë‰ªãÁªç ÂÅöÁöÑÈ°πÁõÆËÆ≤‰∏Ä‰∏ãÔºåÂú®ÈáåÈù¢ÁöÑËÅåË¥£ ÁÑ∂ÂêéÂ∞±ÊòØ‰ªãÁªçÊàëË¶ÅÂéªÁöÑÈÉ®Èó®ÂíåÊû∂ÊûÑÁªÑ‰∫Ü Á≠âofferÔºåÂ∏åÊúõ‰∏ÄÂàáÂ•ΩËøêÔºÅÔºÅÔºÅ Á•ùÂ§ßÂÆ∂ÈÉΩËÉΩÂ§üÊâæÂà∞ÂøÉ‰ª™ÁöÑÂÆû‰π†ÂêßÔºÅÔºÅÂä†Ê≤πÂêÑ‰ΩçÔºÅÔºÅÔºÅ]]></content>
      <categories>
        <category>Èù¢ËØï</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ÊµÖÂÖ•ÊµÖÂá∫ NIO]]></title>
    <url>%2F2020%2F03%2F15%2F%E6%B5%85%E5%85%A5%E6%B5%85%E5%87%BA%20NIO.html</url>
    <content type="text"><![CDATA[ÂºïÂ≠êÊú¨Êñá‰ªéÊúÄÂü∫Êú¨ÁöÑ IO Âá∫ÂèëÔºåÂºïÂá∫Èõ∂Êã∑Ë¥ùÊäÄÊúØÔºåÁªßËÄåÂèëÊï£Âà∞Áî®Âà∞Èõ∂Êã∑Ë¥ùÊäÄÊúØÁöÑ NIOÔºåË∞àÂèä NIOÔºåÂ∞±ÂøÖÈ°ªË∞à‰∏ÄË∞àËëóÂêçÁöÑÁΩëÁªúÈÄö‰ø°Ê°ÜÊû∂ Netty ‰∫ÜÔºåËÄå Netty ÂèàÊòØ metaQ„ÄÅHSFÁ≠âÁÜüÁü•ÊäÄÊúØÊ†àÁöÑÂü∫Á°ÄÔºåÊú¨ÊñáÊó®Âú®‰ª• NIO ‰∏∫Ê†∏ÂøÉÔºåËæêÂ∞ÑÂà∞ÂÖ∂Áõ∏ÂÖ≥ÁöÑÁü•ËØÜÁÇπ„ÄÇ Zero Copy Ëøô‰∏ÄÈÉ®ÂàÜÂü∫Êú¨‰∏äÂèÇËÄÉÔºöÊ∑±ÂÖ•ÂâñÊûêLinux IOÂéüÁêÜÂíåÂá†ÁßçÈõ∂Êã∑Ë¥ùÊú∫Âà∂ÁöÑÂÆûÁé∞ È¢ÑËØªÁü•ËØÜÁâ©ÁêÜÂÜÖÂ≠òÂíåËôöÊãüÂÜÖÂ≠òÁâ©ÁêÜÂÜÖÂ≠òÁâ©ÁêÜÂÜÖÂ≠òÊåáÈÄöËøáÁâ©ÁêÜÂÜÖÂ≠òÊù°ËÄåËé∑ÂæóÁöÑÂÜÖÂ≠òÁ©∫Èó¥„ÄÇ ËôöÊãüÂÜÖÂ≠òËôöÊãüÂÜÖÂ≠òÊòØËÆ°ÁÆóÊú∫Á≥ªÁªüÂÜÖÂ≠òÁÆ°ÁêÜÁöÑ‰∏ÄÁßçÊäÄÊúØ„ÄÇ ÂÆÉ‰ΩøÂæóÂ∫îÁî®Á®ãÂ∫èËÆ§‰∏∫ÂÆÉÊã•ÊúâËøûÁª≠ÁöÑÂèØÁî®ÁöÑÂÜÖÂ≠òÔºà‰∏Ä‰∏™ËøûÁª≠ÂÆåÊï¥ÁöÑÂú∞ÂùÄÁ©∫Èó¥Ôºâ„ÄÇËÄåÂÆûÈôÖ‰∏äÔºåËôöÊãüÂÜÖÂ≠òÈÄöÂ∏∏ÊòØË¢´ÂàÜÈöîÊàêÂ§ö‰∏™Áâ©ÁêÜÂÜÖÂ≠òÁ¢éÁâáÔºåËøòÊúâÈÉ®ÂàÜÊöÇÊó∂Â≠òÂÇ®Âú®Â§ñÈÉ®Á£ÅÁõòÂ≠òÂÇ®Âô®‰∏äÔºåÂú®ÈúÄË¶ÅÊó∂ËøõË°åÊï∞ÊçÆ‰∫§Êç¢ÔºåÂä†ËΩΩÂà∞Áâ©ÁêÜÂÜÖÂ≠ò‰∏≠Êù•„ÄÇ ÁõÆÂâçÔºåÂ§ßÂ§öÊï∞Êìç‰ΩúÁ≥ªÁªüÈÉΩ‰ΩøÁî®‰∫ÜËôöÊãüÂÜÖÂ≠òÔºåÂ¶Ç Windows Á≥ªÁªüÁöÑËôöÊãüÂÜÖÂ≠ò„ÄÅLinux Á≥ªÁªüÁöÑ‰∫§Êç¢Á©∫Èó¥Á≠âÁ≠â„ÄÇ Á¶ªÂºÄËøõÁ®ãË∞àËôöÊãüÂÜÖÂ≠òÊ≤°Êúâ‰ªª‰ΩïÊÑè‰πâÔºå‰∏çÂêåËøõÁ®ãÈáåÁöÑÂêå‰∏Ä‰∏™ËôöÊãüÂú∞ÂùÄÊåáÂêëÁöÑÁâ©ÁêÜÂú∞ÂùÄÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑ„ÄÇÊØè‰∏™Áî®Êà∑ËøõÁ®ãÁª¥Êä§‰∫Ü‰∏Ä‰∏™ÂçïÁã¨ÁöÑÈ°µË°®ÔºàPage TableÔºâÔºåËôöÊãüÂÜÖÂ≠òÂíåÁâ©ÁêÜÂÜÖÂ≠òÂ∞±ÊòØÈÄöËøáËøô‰∏™È°µË°®ÂÆûÁé∞Âú∞ÂùÄÁ©∫Èó¥ÁöÑÊò†Â∞ÑÁöÑÔºåÈ°µË°®ÔºàPage TableÔºâÈáåÈù¢ÁöÑÊï∞ÊçÆÁî±Êìç‰ΩúÁ≥ªÁªüÁª¥Êä§„ÄÇ ÂºïÂÖ•ËôöÊãüÂÜÖÂ≠òÁöÑÂ•ΩÂ§ÑÂú®ËøõÁ®ãÂíåÁâ©ÁêÜÂÜÖÂ≠ò‰πãÈó¥ÔºåÂä†‰∫Ü‰∏ÄÂ±ÇËôöÊãüÂÜÖÂ≠òÁöÑÊ¶ÇÂøµÔºåÂ•ΩÂ§ÑÊúâÔºö Êèê‰æõÊõ¥Â§ßÁöÑÂú∞ÂùÄÁ©∫Èó¥ÔºåÂõ†‰∏∫ËôöÊãüÂÜÖÂ≠òËøòÂèØ‰ª•ÊîæÂú®Á£ÅÁõò‰∏äÊàñËÄÖÂØÑÂ≠òÂô®‰∏≠ÔºåËÄåÁâ©ÁêÜÂÜÖÂ≠òÂπ∂‰∏çË°åÔºåËÄå‰∏îËôöÊãüÂú∞ÂùÄÁ©∫Èó¥ÊòØËøûÁª≠ÁöÑÔºåÊàë‰ª¨‰∏çÈúÄË¶ÅÊìçÂøÉÂÖ∑‰ΩìÊòØÂ¶Ç‰ΩïÂ≠òÊîæÁöÑÔºåÊìç‰ΩúÁ≥ªÁªü‰ºöÂ∏ÆÊàë‰ª¨Êò†Â∞ÑÂ•ΩÔºõ ÂÆâÂÖ®ÊÄßÊõ¥Â•ΩÔºåËôöÊãüÂÜÖÂ≠òËÆæÊúâËØªÂÜôÂ±ûÊÄßÔºåÂπ∂‰∏î‰∏çÂêåËøõÁ®ã‰∫í‰∏çÂΩ±ÂìçÔºõ ÂèØ‰ª•ÊáíÂä†ËΩΩÔºåÂè™ÊúâÂú®ÈúÄË¶ÅËØªÁõ∏Â∫îÁöÑÊñá‰ª∂ÁöÑÊó∂ÂÄôÔºåÊâçÂ∞ÜÂÆÉÁúüÊ≠£ÁöÑ‰ªéÁ£ÅÁõò‰∏äÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠Êù•ÔºåËÄåÂú®ÂÜÖÂ≠òÂêÉÁ¥ßÁöÑÊó∂ÂÄôÂèàÂèØ‰ª•Â∞ÜËøôÈÉ®ÂàÜÂÜÖÂ≠òÊ∏ÖÁ©∫ÊéâÔºåÊèêÈ´òÁâ©ÁêÜÂÜÖÂ≠òÂà©Áî®ÊïàÁéáÔºåÂπ∂‰∏îÊâÄÊúâËøô‰∫õÂØπÂ∫îÁî®Á®ãÂ∫èÊòØÈÉΩÈÄèÊòéÁöÑÔºõ ÂèØ‰ª•ÂÖ±‰∫´ÂÜÖÂ≠òÔºåÂä®ÊÄÅÂ∫ìÂè™ÈúÄË¶ÅÂú®ÂÜÖÂ≠ò‰∏≠Â≠ò‰∏Ä‰ªΩÂ∞±Â§ü‰∫ÜÔºåÁÑ∂ÂêéÂ∞ÜÂÆÉÊò†Â∞ÑÂà∞‰∏çÂêåËøõÁ®ãÁöÑËôöÊãüÂú∞ÂùÄÁ©∫Èó¥‰∏≠ÔºåËÆ©ËøõÁ®ãËßâÂæóËá™Â∑±Áã¨Âç†‰∫ÜËøô‰∏™Êñá‰ª∂„ÄÇËøõÁ®ãÈó¥ÁöÑÂÜÖÂ≠òÂÖ±‰∫´‰πüÂèØ‰ª•ÈÄöËøáÊò†Â∞ÑÂêå‰∏ÄÂùóÁâ©ÁêÜÂÜÖÂ≠òÂà∞ËøõÁ®ãÁöÑ‰∏çÂêåËôöÊãüÂú∞ÂùÄÁ©∫Èó¥Êù•ÂÆûÁé∞ÂÖ±‰∫´„ÄÇ TipÔºöÊàë‰ª¨ÂêéÊñáËÆ≤ÁöÑÔºåÈÉΩÊòØËôöÊãüÂÜÖÂ≠òÂì¶„ÄÇ ÂÜÖÊ†∏Á©∫Èó¥ÂíåÁî®Êà∑Á©∫Èó¥‰∏∫‰∫ÜÈÅøÂÖçÁî®Êà∑Áõ¥Êé•Êìç‰ΩúÂÜÖÊ†∏„ÄåÂèØ‰ª•Êìç‰Ωú‰∏ÄÂàáÔºåÁâõÈÄºÂæóÂæà„ÄçÔºå‰øùËØÅÂÜÖÊ†∏ÂÆâÂÖ®ÔºåÊâÄ‰ª•Â∞ÜËôöÊãüÂÜÖÂ≠òÂàíÂàÜ‰∏∫Áî®Êà∑Á©∫Èó¥ÂíåÂÜÖÊ†∏Á©∫Èó¥ÔºåËøõÁ®ãÂú®ËÆøÈóÆÂà∞Ëøô‰∏§‰∏™Á©∫Èó¥ÁöÑÊó∂ÂÄôÈúÄË¶ÅËøõË°åÁä∂ÊÄÅÁöÑËΩ¨ÂèòÔºàÂÜÖÊ†∏ÊÄÅ„ÄÅÁî®Êà∑ÊÄÅÔºâ„ÄÇ ÂÉèÊàë‰ª¨Âú® jvm ‰∏≠Ë∞àÂà∞ÁöÑÔºåÂ†Ü„ÄÅÊ†à„ÄÅÊñπÊ≥ïÂå∫Á≠âÁ≠âÈÉΩÊòØÈªòËÆ§ÊòØÁî®Êà∑Á©∫Èó¥ÔºåÂõ†‰∏∫Êàë‰ª¨ÂèØ‰ª•Áõ¥Êé•ËÆøÈóÆÁöÑÂà∞„ÄÇ ÂÜÖÊ†∏ÊÄÅ &amp; Áî®Êà∑ÊÄÅÂÜÖÊ†∏ÊÄÅÂèØ‰ª•ÊâßË°å‰ªªÊÑèÂëΩ‰ª§ÔºåË∞ÉÁî®Á≥ªÁªüÁöÑ‰∏ÄÂàáËµÑÊ∫êÔºåËÄåÁî®Êà∑ÊÄÅÂè™ËÉΩÊâßË°åÁÆÄÂçïÁöÑËøêÁÆóÔºå‰∏çËÉΩÁõ¥Êé•Ë∞ÉÁî®Á≥ªÁªüËµÑÊ∫ê„ÄÇÁî®Êà∑ÊÄÅÂøÖÈ°ªÈÄöËøáÁ≥ªÁªüÊé•Âè£ÔºàSystem CallÔºâÔºåÊâçËÉΩÂêëÂÜÖÊ†∏ÂèëÂá∫Êåá‰ª§„ÄÇÊØîÂ¶ÇÔºåÂΩìÁî®Êà∑ËøõÁ®ãÂêØÂä®‰∏Ä‰∏™ bash Êó∂ÔºåÂÆÉ‰ºöÈÄöËøá getpid() ÂØπÂÜÖÊ†∏ÁöÑ pid ÊúçÂä°ÂèëËµ∑Á≥ªÁªüË∞ÉÁî®ÔºåËé∑ÂèñÂΩìÂâçÁî®Êà∑ËøõÁ®ãÁöÑ IDÔºõÂΩìÁî®Êà∑ËøõÁ®ãÈÄöËøá cat ÂëΩ‰ª§Êü•Áúã‰∏ªÊú∫ÈÖçÁΩÆÊó∂ÔºåÂÆÉ‰ºöÂØπÂÜÖÊ†∏ÁöÑÊñá‰ª∂Â≠êÁ≥ªÁªüÂèëËµ∑Á≥ªÁªüË∞ÉÁî®„ÄÇ I/O ËØªÂÜôÊñπÂºèCPU ËΩÆËØ¢CPU ÂØπ I/O Á´ØÂè£ËøõË°å‰∏çÊñ≠Âú∞Ê£ÄÊµãÔºåÁõ¥Âà∞Êï∞ÊçÆÂáÜÂ§áÂ•Ω‰∫ÜÔºåËøô‰∏™Â∞±ÂæàÂêÉ cpuÔºåpassÔºÅ I/O ‰∏≠Êñ≠Âú® DMA ÊäÄÊúØÂá∫Áé∞‰πãÂâçÔºåÂ∫îÁî®Á®ãÂ∫è‰∏éÁ£ÅÁõò‰πãÈó¥ÁöÑ I/O Êìç‰ΩúÈÉΩÊòØÈÄöËøá CPU ÁöÑ‰∏≠Êñ≠ÂÆåÊàêÁöÑ„ÄÇÊØèÊ¨°Áî®Êà∑ËøõÁ®ãËØªÂèñÁ£ÅÁõòÊï∞ÊçÆÊó∂ÔºåÈÉΩÈúÄË¶Å CPU ‰∏≠Êñ≠ÔºåÁÑ∂ÂêéÂèëËµ∑ I/O ËØ∑Ê±ÇÁ≠âÂæÖÊï∞ÊçÆËØªÂèñÂíåÊã∑Ë¥ùÂÆåÊàêÔºåÁ≠âÊï∞ÊçÆÂáÜÂ§áÂÆåÊØï‰πãÂêéÔºåÂèëËµ∑ I/O ‰∏≠Êñ≠‰ø°Âè∑ÔºåÊèêÈÜí CPU Êï∞ÊçÆÂ∑≤ÁªèÂáÜÂ§áÂ•Ω‰∫Ü„ÄÇ Áî®Êà∑ËøõÁ®ãÂêë CPU ÂèëËµ∑ read Á≥ªÁªüË∞ÉÁî®ËØªÂèñÊï∞ÊçÆÔºåÁî±Áî®Êà∑ÊÄÅÂàáÊç¢‰∏∫ÂÜÖÊ†∏ÊÄÅÔºåÁÑ∂Âêé‰∏ÄÁõ¥ÈòªÂ°ûÁ≠âÂæÖÊï∞ÊçÆÁöÑËøîÂõû„ÄÇ CPU Âú®Êé•Êî∂Âà∞Êåá‰ª§‰ª•ÂêéÂØπÁ£ÅÁõòÂèëËµ∑ I/O ËØ∑Ê±ÇÔºåÂ∞ÜÁ£ÅÁõòÊï∞ÊçÆÂÖàÊîæÂÖ•Á£ÅÁõòÊéßÂà∂Âô®ÁºìÂÜ≤Âå∫„ÄÇ Êï∞ÊçÆÂáÜÂ§áÂÆåÊàê‰ª•ÂêéÔºåÁ£ÅÁõòÂêë CPU ÂèëËµ∑ I/O ‰∏≠Êñ≠„ÄÇ CPU Êî∂Âà∞ I/O ‰∏≠Êñ≠‰ª•ÂêéÂ∞ÜÁ£ÅÁõòÁºìÂÜ≤Âå∫‰∏≠ÁöÑÊï∞ÊçÆÊã∑Ë¥ùÂà∞ÂÜÖÊ†∏ÁºìÂÜ≤Âå∫ÔºåÁÑ∂ÂêéÂÜç‰ªéÂÜÖÊ†∏ÁºìÂÜ≤Âå∫Êã∑Ë¥ùÂà∞Áî®Êà∑ÁºìÂÜ≤Âå∫„ÄÇ Áî®Êà∑ËøõÁ®ãÁî±ÂÜÖÊ†∏ÊÄÅÂàáÊç¢ÂõûÁî®Êà∑ÊÄÅÔºåËß£Èô§ÈòªÂ°ûÁä∂ÊÄÅÔºåÁÑ∂ÂêéÁ≠âÂæÖ CPU ÁöÑ‰∏ã‰∏Ä‰∏™ÊâßË°åÊó∂Èó¥Èíü„ÄÇ DMA‰º†ËæìÂéüÁêÜDMAÔºàDirect Memory AccessÔºâÔºåÂèàÁß∞Áõ¥Êé•ÂÜÖÂ≠òÂ≠òÂèñÔºå‰πüÂ∞±ÊòØÈÄöËøáÁ°¨‰ª∂Áõ¥Êé•ËÆøÈóÆ‰∏ªÂÜÖÂ≠òÔºå‰∏çÈúÄË¶ÅÈÄöËøá cpuÔºåÊúâÁÇπÂÉèÂçèÂ§ÑÁêÜÂô®ÔºåÁõÆÂâçÂ§ßÂ§öÊï∞ÁöÑÁ°¨‰ª∂ÈÉΩÊîØÊåÅ DMAÔºå‰æãÂ¶ÇÁΩëÂç°„ÄÅÊòæÂç°„ÄÅÂ£∞Âç°„ÄÅÁ£ÅÁõòÁ≠âÁ≠â„ÄÇ Êúâ‰∫Ü DMAÔºåCPUÂ∞±‰∏çÁî®ÂéªÂ§ÑÁêÜÂ∞ÜÊï∞ÊçÆ‰ªéÁ£ÅÁõòÁºìÂÜ≤Âå∫ËØªÂà∞ÂÜÖÊ†∏ÁºìÂÜ≤Âå∫„ÄåËøô‰∏™ËøáÁ®ãÊòØÂæàËÄóÊó∂ÁöÑ„Äç‰∫ÜÔºåÁõ¥Êé•‰∫§Áî± DMA Êìç‰ΩúÂ∞±Ë°å‰∫Ü„ÄÇ Âª∫Á´ãÂú® DMA ‰º†Ëæì‰∏äÁöÑËØªÂÜôÁöÑ‰∏ÄËà¨Ê≠•È™§Âú® Linux Á≥ªÁªü‰∏≠Ôºå‰º†ÁªüÁöÑËÆøÈóÆÊñπÂºèÊòØÈÄöËøá write() Âíå read() ‰∏§‰∏™Á≥ªÁªüË∞ÉÁî®ÂÆûÁé∞ÁöÑÔºåÈÄöËøá read() ÂáΩÊï∞ËØªÂèñÊñá‰ª∂Âà∞Âà∞ÁºìÂ≠òÂå∫‰∏≠ÔºåÁÑ∂ÂêéÈÄöËøá write() ÊñπÊ≥ïÊääÁºìÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆËæìÂá∫Âà∞ÁΩëÁªúÁ´ØÂè£„ÄÇ ÂÖ∑‰ΩìÊ≠•È™§Â¶Ç‰∏ãÔºö Áî®Êà∑Á©∫Èó¥Ë∞ÉÁî® read() ÊñπÊ≥ïÔºå‰ºöËß¶ÂèëÁ≥ªÁªüË∞ÉÁî®ÔºåËøõÁ®ãÁî±Áî®Êà∑ÊÄÅËΩ¨‰∏∫ÂÜÖÊ†∏ÊÄÅÔºõ ÁÑ∂Âêé DMA ‰ºöÂ∞ÜÁ£ÅÁõòÁºìÂÜ≤Âå∫ÁöÑÊï∞ÊçÆÂä†ËΩΩÂà∞ÂÜÖÊ†∏ÁºìÂÜ≤Âå∫‰∏≠Ôºõ CPU ‰ºöÂ∞ÜÂÜÖÊ†∏ÁºìÂÜ≤Âå∫ÁöÑÊï∞ÊçÆ COPY Âà∞Áî®Êà∑ÁºìÂÜ≤Âå∫‰∏≠ÔºåÊ≠§Êó∂ËøõÁ®ãÁî±ÂÜÖÊ†∏ÊÄÅËΩ¨‰∏∫Áî®Êà∑ÊÄÅÔºõ ÁÑ∂ÂêéÁî®Êà∑Á©∫Èó¥Ë∞ÉÁî® write() ÊñπÊ≥ïÔºå‰ºöËß¶ÂèëÁ≥ªÁªüË∞ÉÁî®ÔºåCPU ‰ºöÂ∞ÜÁî®Êà∑ÁºìÂÜ≤Âå∫ÁöÑÊï∞ÊçÆ COPY Âà∞ Socket ÁºìÂÜ≤Âå∫‰∏≠„ÄåÂú®ÂÜÖÊ†∏Á©∫Èó¥‰∏≠„ÄçÔºåÊ≠§Êó∂ËøõÁ®ãÁî±Áî®Êà∑ÊÄÅËΩ¨ÊàêÂÜÖÊ†∏ÊÄÅÔºõ ÁÑ∂Âêé SocketÁºìÂÜ≤Âå∫‰∏≠ÁöÑÊï∞ÊçÆ‰ºöÈÄöËøá DMA ÁöÑÊñπÂºè COPYÂà∞ÁΩëÂç°Â§ÑÔºå‰º†ÈÄÅÂÆåÊàêÔºõ Ê≠§Êó∂ CPU ‰ºöÂÜçÊ¨°Áî±ÂÜÖÊ†∏ÊÄÅÂàáÂõûÂà∞Áî®Êà∑ÊÄÅÔºåÊñπ‰æø‰∏ã‰∏ÄÊ¨°ÁöÑÂ∑•‰Ωú„ÄÇ Áî±Ê≠§ÂèØÁü•Ôºå‰∏ÄÂÖ±Êúâ 4 Ê¨°Êã∑Ë¥ùËøáÁ®ãÔºåÂÖ∂‰∏≠ 2 Ê¨° CPU ÂèÇ‰∏éÂ∑•‰ΩúÔºå 2 Ê¨°DMAÂèÇ‰∏éÂ∑•‰ΩúÔºåÊúÄË¶ÅÂëΩÁöÑÊòØÊúâ 4 Ê¨°ÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢„ÄÇ Ëá™Ê≠§ÔºåÊàë‰ª¨ÁöÑÈ¢ÑËØªÁü•ËØÜÂëä‰∏ÄÊÆµËêΩÔºåËøôÈáåÊàë‰ª¨Â∑≤ÁªèÁü•ÈÅì‰∫ÜÊôÆÈÄöÁöÑËØªÂÜôËøáÁ®ãÔºåÂàáÊç¢‰∏ä‰∏ãÊñáÁöÑÊ¨°Êï∞ÂíåÊã∑Ë¥ùÊï∞ÊçÆÁöÑÊ¨°Êï∞ÂæàÂ§öÔºåÊâÄ‰ª•Êàë‰ª¨ÊÄ•ÈúÄÊîπËøõÔºåÁî±Ê≠§ÔºåÈõ∂Êã∑Ë¥ùÊäÄÊúØËøêÂ∫îËÄåÁîü„ÄÇ Èõ∂Êã∑Ë¥ùÊäÄÊúØÈõ∂Êã∑Ë¥ùÊäÄÊúØÊòØÊåáÂú®ËÆ°ÁÆóÊú∫ÊâßË°åÊìç‰ΩúÊó∂ÔºåÂáèÂ∞ë CPU Â∞ÜÊï∞ÊçÆ‰ªé‰∏Ä‰∏™ÂÜÖÂ≠òÂå∫ÂüüÂ§çÂà∂Âà∞Âè¶‰∏Ä‰∏™ÂÜÖÂ≠òÂå∫ÂüüÁöÑÊ¨°Êï∞„ÄÇ Èõ∂Êã∑Ë¥ùÂ∏¶Êù•ÁöÑÊòæËÄåÊòìËßÅÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØÂèØ‰ª•ÂáèÂ∞ë‰∏ä‰∏ãÊñáÂàáÊç¢„ÄåÁî®Êà∑Á©∫Èó¥ÂíåÂÜÖÊ†∏Á©∫Èó¥‰πãÈó¥ÂàáÊç¢ÂØºËá¥ÁöÑÂÜÖÊ†∏ÊÄÅÂíåÁî®Êà∑ÊÄÅ‰πãÈó¥ÁöÑÂàáÊç¢„Äç‰ª•Âèä CPU ÁöÑÊã∑Ë¥ùÊ¨°Êï∞„ÄÇ ÂÆûÁé∞Èõ∂Êã∑Ë¥ùÁî®Âà∞ÁöÑÊúÄ‰∏ªË¶ÅÊäÄÊúØÊòØ DMA Êï∞ÊçÆ‰º†ËæìÊäÄÊúØÂíå ÂÜÖÂ≠òÂå∫ÂüüÊò†Â∞ÑÊäÄÊúØ„ÄÇÁî±Ê≠§ÔºåÊàë‰ª¨‰ªãÁªçÂõõÁßçÈõ∂Êã∑Ë¥ùÁöÑÂÆûÁé∞ÊÄùË∑ØÔºö Áî®Êà∑ÊÄÅÁõ¥Êé• I/OÔºöÂ∫îÁî®Á®ãÂ∫èÂèØ‰ª•Áõ¥Êé•ËÆøÈóÆÁ°¨‰ª∂Â≠òÂÇ®ÔºåÊìç‰ΩúÁ≥ªÁªüÂÜÖÊ†∏Âè™ÊòØËæÖÂä©Êï∞ÊçÆ‰º†Ëæì„ÄÇËøôÁßçÊñπÂºè‰æùÊóßÂ≠òÂú®Áî®Êà∑Á©∫Èó¥ÂíåÂÜÖÊ†∏Á©∫Èó¥ÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢ÔºåÁ°¨‰ª∂‰∏äÁöÑÊï∞ÊçÆÁõ¥Êé•Êã∑Ë¥ùËá≥‰∫ÜÁî®Êà∑Á©∫Èó¥Ôºå‰∏çÁªèËøáÂÜÖÊ†∏Á©∫Èó¥„ÄÇÂõ†Ê≠§ÔºåÁõ¥Êé• I/O ‰∏çÂ≠òÂú®ÂÜÖÊ†∏Á©∫Èó¥ÁºìÂÜ≤Âå∫ÂíåÁî®Êà∑Á©∫Èó¥ÁºìÂÜ≤Âå∫‰πãÈó¥ÁöÑÊï∞ÊçÆÊã∑Ë¥ù„ÄÇ mmap + writeÔºöÁõ¥Êé•Â∞ÜÂÜÖÊ†∏Á©∫Èó¥‰∏≠ÁöÑÂÜÖÊ†∏ÁºìÂÜ≤Âå∫ÂíåÁî®Êà∑Á©∫Èó¥‰∏≠ÁöÑÁî®Êà∑ÁºìÂÜ≤Âå∫ÂÅö‰∏Ä‰∏™Âú∞ÂùÄÊò†Â∞ÑÔºåËøôÊ†∑Â∞±ÁúÅÂéª‰∫ÜÂú® read ËøáÁ®ã‰∏≠Â∞ÜÂÜÖÊ†∏ÁºìÂÜ≤Âå∫ÁöÑÊï∞ÊçÆ COPY Âà∞Áî®Êà∑ÁºìÂÜ≤Âå∫‰∏≠„ÄÇÂæàÈÄÇÂêàÊñá‰ª∂ÁöÑ‰øÆÊîπËØªÂÜô„ÄÇ sendfileÔºö‰∏ç‰ªÖÂ∞Ü CPU ÂèÇ‰∏éÁöÑÊã∑Ë¥ùÊ¨°Êï∞ÂáèÂ∞ë‰∫ÜÔºåËÄå‰∏îÁõ¥Êé•ÂáèÂ∞ë‰∫Ü‰∏ä‰∏ãÊñáÂàáÊç¢ÁöÑÊ¨°Êï∞ÔºåÂõ†‰∏∫Âú®Áî®Êà∑ÁºìÂÜ≤Âå∫Ê†πÊú¨Â∞±‰∏ç‰ºöÊúâÊï∞ÊçÆÔºåÂΩìÁÑ∂ÂùèÂ§Ñ‰πüÂæàÊòéÊòæÔºåÂ∞±ÊòØÊó†Ê≥ï‰øÆÊîπÊï∞ÊçÆÔºåÂè™ËÉΩËøõË°å‰º†ËæìÔºåÊâÄ‰ª•ÂæàÈÄÇÂêàÂ§ßÊñá‰ª∂ÁöÑ‰º†ÈÄÅ„ÄÇ ÂΩìÁÑ∂‰∫ÜÔºåËøò‰ºöËÆ≤Âà∞ sendfile ÁöÑÂçáÁ∫ßÁâà„ÄÇ spliceÔºöÂ∞±ÊòØÂú®ÂÜÖÊ†∏ÁºìÂÜ≤Âå∫ÂíåSocketÁºìÂÜ≤Âå∫‰πãÈó¥Âª∫Á´ãÁÆ°ÈÅì„ÄÇ Áî®Êà∑ÊÄÅÁõ¥Êé•I/OËøõÁ®ãÁõ¥Êé•Âú®Áî®Êà∑ÊÄÅËÆøÈóÆÁ°¨‰ª∂ËÆæÂ§á„ÄåËøô‰∏™Êàë‰πü‰∏çÁü•ÈÅìÊòØÊÄé‰πàÂÅöÂà∞ÁöÑ‚Ä¶„ÄçÔºåËøôÁ±ªËøõÁ®ãÁß∞‰∏∫Ëá™ÁºìÂ≠òÂ∫îÁî®Á®ãÂ∫è„ÄÇ Áõ¥Êé• I/O ËÆøÈóÆÊñá‰ª∂ÊñπÂºèÂèØ‰ª•ÂáèÂ∞ë CPU ÁöÑ‰ΩøÁî®Áéá‰ª•ÂèäÂÜÖÂ≠òÂ∏¶ÂÆΩÁöÑÂç†Áî®Ôºå‰ΩÜÊòØÁõ¥Êé• I/O ÊúâÊó∂ÂÄô‰πü‰ºöÂØπÊÄßËÉΩ‰∫ßÁîüË¥üÈù¢ÂΩ±Âìç„ÄÇÊâÄ‰ª•Âú®‰ΩøÁî®Áõ¥Êé• I/O ‰πãÂâç‰∏ÄÂÆöË¶ÅÂØπÂ∫îÁî®Á®ãÂ∫èÊúâ‰∏Ä‰∏™ÂæàÊ∏ÖÈÜíÁöÑËÆ§ËØÜÔºåÂè™ÊúâÂú®Á°ÆÂÆö‰∫ÜËÆæÁΩÆÁºìÂÜ≤ I/O ÁöÑÂºÄÈîÄÈùûÂ∏∏Â∑®Â§ßÁöÑÊÉÖÂÜµ‰∏ãÔºåÊâçËÄÉËôë‰ΩøÁî®Áõ¥Êé• I/O„ÄÇÁõ¥Êé• I/O ÁªèÂ∏∏ÈúÄË¶ÅË∑üÂºÇÊ≠• I/O ÁªìÂêàËµ∑Êù•‰ΩøÁî®ÔºåÂõ†‰∏∫CPU ÂíåÁ£ÅÁõò I/O ‰πãÈó¥ÁöÑÊâßË°åÊó∂Èó¥Â∑ÆË∑ùÔºå‰ºöÈÄ†ÊàêÂ§ßÈáèÁöÑÊµ™Ë¥π„ÄÇ mmap + writemmapÔºåÁß∞‰∏∫ÂÜÖÂ≠òÂú∞ÂùÄÊò†Â∞ÑÔºåÂèØ‰ª•Â∞ÜÂÜÖÊ†∏ÁºìÂÜ≤Âå∫ÁöÑÂú∞ÂùÄÊò†Â∞ÑÂà∞Áî®Êà∑ÁºìÂÜ≤Âå∫„ÄÇ Â¶ÇÂõæÊâÄÁ§∫ÔºåÂü∫Êú¨Âíå‰º†ÁªüÁöÑËØªÂÜôÂ∑Æ‰∏çÂ§öÔºåÂè™ÊòØÂáèÂ∞ë‰∫Ü‰∏ÄÊ¨° CPU ÁöÑ COPY Â∑•‰ΩúÔºå‰ΩÜÊòØ‰∏ä‰∏ãÊñáÂàáÊç¢ÁöÑÊ¨°Êï∞Ê≤°ÊúâÂèòÂåñÔºå‰æùÊóßÊòØ 4 Ê¨°„ÄÇmmap ‰∏ªË¶ÅÁöÑÁî®Â§ÑÊòØÊèêÈ´ò I/O ÊÄßËÉΩÔºåÁâπÂà´ÊòØÈíàÂØπÂ§ßÊñá‰ª∂„ÄÇÂØπ‰∫éÂ∞èÊñá‰ª∂ÔºåÂÜÖÂ≠òÊò†Â∞ÑÊñá‰ª∂ÂèçËÄå‰ºöÂØºËá¥Á¢éÁâáÁ©∫Èó¥ÁöÑÊµ™Ë¥πÔºåÂõ†‰∏∫ÂÜÖÂ≠òÊò†Â∞ÑÊÄªÊòØË¶ÅÂØπÈΩêÈ°µËæπÁïåÔºåÊúÄÂ∞èÂçï‰ΩçÊòØ 4 KBÔºå‰∏Ä‰∏™ 5 KB ÁöÑÊñá‰ª∂Â∞Ü‰ºöÊò†Â∞ÑÂç†Áî® 8 KB ÂÜÖÂ≠òÔºå‰πüÂ∞±‰ºöÊµ™Ë¥π 3 KB ÂÜÖÂ≠ò„ÄÇ sendfileÊï∞ÊçÆÂèØ‰ª•Áõ¥Êé•Âú®ÂÜÖÊ†∏Á©∫Èó¥ÂÜÖÈÉ®ËøõË°å I/O ‰º†ËæìÔºå‰ªéËÄåÁúÅÂéª‰∫ÜÊï∞ÊçÆÂú®Áî®Êà∑Á©∫Èó¥ÂíåÂÜÖÊ†∏Á©∫Èó¥‰πãÈó¥ÁöÑÊù•ÂõûÊã∑Ë¥ù„ÄÇ‰∏é mmap ÂÜÖÂ≠òÊò†Â∞ÑÊñπÂºè‰∏çÂêåÁöÑÊòØÔºå sendfile Ë∞ÉÁî®‰∏≠ I/O Êï∞ÊçÆÂØπÁî®Êà∑Á©∫Èó¥ÊòØÂÆåÂÖ®‰∏çÂèØËßÅÁöÑ„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåËøôÊòØ‰∏ÄÊ¨°ÂÆåÂÖ®ÊÑè‰πâ‰∏äÁöÑÊï∞ÊçÆ‰º†ËæìËøáÁ®ã„ÄÇ Áõ∏ÊØîËæÉ‰∫é mmap ÂÜÖÂ≠òÊò†Â∞ÑÁöÑÊñπÂºèÔºåsendfile Â∞ë‰∫Ü 2 Ê¨°‰∏ä‰∏ãÊñáÂàáÊç¢Ôºå‰ΩÜÊòØ‰ªçÁÑ∂Êúâ 1 Ê¨° CPU Êã∑Ë¥ùÊìç‰Ωú„ÄÇsendfile Â≠òÂú®ÁöÑÈóÆÈ¢òÊòØÁî®Êà∑Á®ãÂ∫è‰∏çËÉΩÂØπÊï∞ÊçÆËøõË°å‰øÆÊîπÔºåËÄåÂè™ÊòØÂçïÁ∫ØÂú∞ÂÆåÊàê‰∫Ü‰∏ÄÊ¨°Êï∞ÊçÆ‰º†ËæìËøáÁ®ã„ÄÇ sendfile + DMA gather copyLinux 2.4 ÁâàÊú¨ÁöÑÂÜÖÊ†∏ÂØπ sendfile Á≥ªÁªüË∞ÉÁî®ËøõË°å‰øÆÊîπÔºå‰∏∫ DMA Êã∑Ë¥ùÂºïÂÖ•‰∫Ü gather Êìç‰Ωú„ÄÇÂÆÉÂ∞ÜÂÜÖÊ†∏Á©∫Èó¥Ôºàkernel spaceÔºâÁöÑËØªÁºìÂÜ≤Âå∫Ôºàread bufferÔºâ‰∏≠ÂØπÂ∫îÁöÑÊï∞ÊçÆÊèèËø∞‰ø°ÊÅØÔºàÂÜÖÂ≠òÂú∞ÂùÄ„ÄÅÂú∞ÂùÄÂÅèÁßªÈáèÔºâËÆ∞ÂΩïÂà∞Áõ∏Â∫îÁöÑÁΩëÁªúÁºìÂÜ≤Âå∫Ôºà socket bufferÔºâ‰∏≠ÔºåÁî± DMA Ê†πÊçÆÂÜÖÂ≠òÂú∞ÂùÄ„ÄÅÂú∞ÂùÄÂÅèÁßªÈáèÂ∞ÜÊï∞ÊçÆÊâπÈáèÂú∞‰ªéËØªÁºìÂÜ≤Âå∫Ôºàread bufferÔºâÊã∑Ë¥ùÂà∞ÁΩëÂç°ËÆæÂ§á‰∏≠ÔºåËøôÊ†∑Â∞±ÁúÅÂéª‰∫ÜÂÜÖÊ†∏Á©∫Èó¥‰∏≠‰ªÖÂâ©ÁöÑ 1 Ê¨° CPU Êã∑Ë¥ùÊìç‰Ωú„ÄÇ Âú®Á°¨‰ª∂ÁöÑÊîØÊåÅ‰∏ãÔºåsendfile Êã∑Ë¥ùÊñπÂºè‰∏çÂÜç‰ªéÂÜÖÊ†∏ÁºìÂÜ≤Âå∫ÁöÑÊï∞ÊçÆÊã∑Ë¥ùÂà∞ socket ÁºìÂÜ≤Âå∫ÔºåÂèñËÄå‰ª£‰πãÁöÑ‰ªÖ‰ªÖÊòØÁºìÂÜ≤Âå∫Êñá‰ª∂ÊèèËø∞Á¨¶ÂíåÊï∞ÊçÆÈïøÂ∫¶ÁöÑÊã∑Ë¥ùÔºåËøôÊ†∑ DMA ÂºïÊìéÁõ¥Êé•Âà©Áî® gather Êìç‰ΩúÂ∞ÜÈ°µÁºìÂ≠ò‰∏≠Êï∞ÊçÆÊâìÂåÖÂèëÈÄÅÂà∞ÁΩëÁªú‰∏≠Âç≥ÂèØÔºåÊú¨Ë¥®Â∞±ÊòØÂíåËôöÊãüÂÜÖÂ≠òÊò†Â∞ÑÁöÑÊÄùË∑ØÁ±ª‰ºº„ÄÇ sendfile + DMA gather copy Êã∑Ë¥ùÊñπÂºèÂêåÊ†∑Â≠òÂú®Áî®Êà∑Á®ãÂ∫è‰∏çËÉΩÂØπÊï∞ÊçÆËøõË°å‰øÆÊîπÁöÑÈóÆÈ¢òÔºåËÄå‰∏îÊú¨Ë∫´ÈúÄË¶ÅÁ°¨‰ª∂ÁöÑÊîØÊåÅÔºåÂÆÉÂè™ÈÄÇÁî®‰∫éÂ∞ÜÊï∞ÊçÆ‰ªéÊñá‰ª∂Êã∑Ë¥ùÂà∞ socket Â•óÊé•Â≠ó‰∏äÁöÑ‰º†ËæìËøáÁ®ã„ÄÇ splicesplice Á≥ªÁªüË∞ÉÁî®ÂèØ‰ª•Âú®ÂÜÖÊ†∏Á©∫Èó¥ÁöÑËØªÁºìÂÜ≤Âå∫Ôºàread bufferÔºâÂíåÁΩëÁªúÁºìÂÜ≤Âå∫Ôºàsocket bufferÔºâ‰πãÈó¥Âª∫Á´ãÁÆ°ÈÅìÔºàpipelineÔºâÔºå‰ªéËÄåÈÅøÂÖç‰∫Ü‰∏§ËÄÖ‰πãÈó¥ÁöÑ CPU Êã∑Ë¥ùÊìç‰Ωú„ÄÇsplice Êã∑Ë¥ùÊñπÂºè‰πüÂêåÊ†∑Â≠òÂú®Áî®Êà∑Á®ãÂ∫è‰∏çËÉΩÂØπÊï∞ÊçÆËøõË°å‰øÆÊîπÁöÑÈóÆÈ¢ò„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåÂÆÉ‰ΩøÁî®‰∫Ü Linux ÁöÑÁÆ°ÈÅìÁºìÂÜ≤Êú∫Âà∂ÔºåÂèØ‰ª•Áî®‰∫é‰ªªÊÑè‰∏§‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶‰∏≠‰º†ËæìÊï∞ÊçÆÔºå‰ΩÜÊòØÂÆÉÁöÑ‰∏§‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÂèÇÊï∞‰∏≠Êúâ‰∏Ä‰∏™ÂøÖÈ°ªÊòØÁÆ°ÈÅìËÆæÂ§á„ÄÇ ‰∏ÄÂè•ËØùÂΩíÁ∫≥ÔºåÂ∞±ÊòØÁõ¥Êé•Âú®ÂÜÖÊ†∏ÁºìÂÜ≤Âå∫ÂíåSocketÁºìÂ≠òÂå∫‰πãÈó¥Âª∫Á´ãÁÆ°ÈÅì„ÄÇ ÊÄªÁªì Êã∑Ë¥ùÊñπÂºè CPUÊã∑Ë¥ùÊ¨°Êï∞ DMAÊã∑Ë¥ùÊ¨°Êï∞ Á≥ªÁªüË∞ÉÁî® ‰∏ä‰∏ãÊñáÂàáÊç¢Ê¨°Êï∞ ‰º†ÁªüÊñπÂºèÔºàread + writeÔºâ 2 2 read + write 4 ÂÜÖÂ≠òÊò†Â∞ÑÔºàmmap + writeÔºâ 1 2 mmap + write 4 sendfile 1 2 sendfile 2 sendfile + DMA gather copy 0 2 sendfile 2 splice 0 2 splice 2 NIO ÁºñÁ®ãÊñ∞ËØ¥ÔºåÂ∞±ÊòØËøôÁØáÊñáÁ´†ÊääÊàëÊãâÂÖ•‰∫Ü NIO ÁöÑÊ∑±Âùë ‰∏ÄÊÆµ‰∏ÄÊÆµÂºèÔºå‰∏™‰∫∫ËßâÂæóÂèØËØªÊÄßÂæàÂº∫ Java3y Ë∑üÊàëÊÉ≥ÁöÑ‰∏ÄÊ†∑ÔºåÊñá‰ª∂I/O ‰∏ªË¶Å‰ΩøÁî®Èõ∂Êã∑Ë¥ùÊäÄÊúØÔºåËÄåÁΩëÁªú I/O ‰∏ªË¶Å‰ΩøÁî® I/O Â§çÁî®ÊäÄÊúØ ÁÆÄÂçïÁöÑÊÄªÁªìÔºåË®ÄÁÆÄÊÑèËµÖÔºåÂèØÊÉúÊ≤°Êúâ‰ª£Á†Ådemo ËøôÈáåÔºåÊàëÂàÜ‰∏âÈÉ®ÂàÜËÆ≤Ôºö ÂÖà‰ªãÁªç‰∏Ä‰∏ã NIO ÁöÑÂü∫Êú¨Ê¶ÇÂøµÔºå‰∏ªË¶ÅÊòØ‰∏âÂâëÂÆ¢„ÄåSelector„ÄÅBuffer„ÄÅChannel„ÄçÔºõ ÁÑ∂ÂêéËÆ≤‰∏Ä‰∏ã NIO ‰∏≠Áî®Âà∞ÁöÑÈõ∂Êã∑Ë¥ùÊäÄÊúØÔºõ ÊúÄÂêéÂÜçË∞à‰∏Ä‰∏ã NIO ‰∏≠ÊúÄ‰∏∫ÈáçË¶ÅÁöÑ SocketChannel Áî®Âà∞ÁöÑ I/O Â§çÁî®ÊäÄÊúØ„ÄÇ ÊàëÂª∫ËÆÆÂ≠¶‰π† NIO ÁöÑË∑ØÁ∫øÊòØÔºö ÂÖàÁ≥ªÁªü‰∫ÜËß£ÂêÑ‰∏™Ê¶ÇÂøµÔºåÊúâ‰ªÄ‰πàÔºöJava NIO Á≥ªÁªüÊïôÁ®ãÔºåÊÄªÂÖ±Êúâ 17 ËÆ≤ ÁÑ∂ÂêéÁúã Java3y ÁöÑÊÄªÁªìÔºå‰∏™‰∫∫ËßâÂæóÊÄªÁªìÁöÑÂæàÂà∞‰ΩçÔºåÂ∞§ÂÖ∂ÊòØÂ∞Ü NIO ÂàÜËß£Êàê‰∏§Â§ßÂùóÊäÄÊúØ„ÄåÈõ∂Êã∑Ë¥ùÊäÄÊúØ &amp; I/O Â§çÁî®ÊäÄÊúØ„ÄçÔºåËôΩÁÑ∂‰ªñÊ≤°ÊúâÁªÜËá¥ÁöÑË∞àÂà∞Êñá‰ª∂ I/O ‰ΩøÁî®ÁöÑÊäÄÊúØ„ÄåËøôÊòØ‰∏ÄÂ§ßÁº∫Èô∑„ÄçÔºå‰ΩÜÊòØÊúâÂú®ÈáçÁÇπÂº∫Ë∞É Selector Â∏¶Êù•ÁöÑÂêåÊ≠•ÈùûÈòªÂ°ûÁöÑ I/O ËØªÂÜôÊñπÂºèÔºåËøôÁÇπÊòØÂæàÂ•ΩÁöÑÔºåÈìæÊé•ÔºöÂ¶Ç‰ΩïÂ≠¶‰π†JavaÁöÑNIOÔºü - Java3yÁöÑÂõûÁ≠î - Áü•‰πé ÂèØ‰ª•ÂÜçÂ•ΩÂ•ΩË°•ÂÖÖ‰∏ãËøô‰∏§È°πÊäÄÊúØÁöÑÂÖ∑‰ΩìÂ∫îÁî®ÔºåÈ¶ñÂÖàÊòØÊñá‰ª∂ I/O ‰∏≠ÁöÑÈõ∂Êã∑Ë¥ùÊäÄÊúØÔºå‰∏ªË¶ÅÂ∞±ÊòØÈÄöËøá FileChannel ‰∏≠ÁöÑ map() ‰ΩøÁî®‰∫Ü mmapÔºåtransferTo() &amp; transferFrom() ‰ΩøÁî®‰∫Ü sendfile„ÄÇ„Äå‰∏∫‰∫ÜÊõ¥Â•ΩÂú∞ÁêÜËß£ÊµÅÁ®ãÔºåÂèØ‰ª•ÁÆÄÂçïÁöÑÂ∞Ü Buffer Áúã‰ΩúÊòØÁî®Êà∑ÁºìÂÜ≤Âå∫ÔºåChannel Áúã‰ΩúÊòØÂÜÖÊ†∏ÁºìÂÜ≤Âå∫„ÄçÔºåÂ∞§ÂÖ∂ÊòØ mmap ÁöÑÂú®ËøôÈáåÈù¢ÁöÑ‰ΩøÁî®ÔºåÂèØ‰ª•ÂèÇËßÅËøô‰∏™ÂçöÂÆ¢ÈáåÈù¢ÁöÑ demoÔºåÊµÖÊòæÊòìÊáÇÔºå‰∏ãÈù¢Êàë‰πü‰ºöÂÖ∑‰ΩìËÆ≤ÁöÑÔºömmapÂú® NIO ‰∏≠ÁöÑÂÖ∑‰Ωì‰ΩøÁî® ÂÖ∂Ê¨°Â∞±ÊòØÁΩëÁªú I/O ‰∏≠‰ΩøÁî®Âà∞ÁöÑ I/O Â§çÁî®ÊäÄÊúØ‰∫ÜÔºåËøô‰∏™Âú®ÂæàÂ§öÂú∞ÊñπÈÉΩÊúâÊèêÂèäÂà∞ÔºåÁîöËá≥Â§ßÂÆ∂ËÆ§‰∏∫ NIO ÊòØ (Non-Blocking I/O)ÁöÑÊÑèÊÄùÔºåÂèØËßÅÂ§ßÂÆ∂ÂØπ NIO ‰∏≠ËøôÈ°πÊäÄÊúØÁöÑÈáçËßÜÁ®ãÂ∫¶„ÄåËôΩÁÑ∂ÊàëËÆ§‰∏∫ NIO ÊòØ New I/O ÁöÑÊÑèÊÄùÔºåÂõ†‰∏∫Èõ∂Êã∑Ë¥ùÁöÑÂÆûÁé∞‰πüÂæàÁâõÈÄºÂïäÔºÅ„ÄçÔºåËøôÈáåÂë¢ÔºåËøòÊòØÂª∫ËÆÆÂ§ßÂÆ∂ÁúãÂ≠¶‰π†Ë∑ØÁ∫øÁöÑÁ¨¨‰∏Ä‰∏™ÈìæÊé•ÔºåÈáåÈù¢ÂÖ∂ÂÆû‰πüÊúâËÆ∏Â§öÂ∞è demoÁöÑÔºåÂΩìÁÑ∂‰∫ÜÔºåÂ¶ÇÊûúÊÉ≥ÁúãÂÖ∑‰ΩìÁöÑÂ•óÊé•Â≠ó‰º†ËæìÁöÑ demoÔºåÊàëÊé®ËçêÔºöÁºñÁ®ãÊñ∞ËØ¥ÔºåÂ∞±ÊòØËøôÁØáÊñáÁ´†Â∏¶ÊàëÂÖ•ÁöÑÂùëÔºåÈáåÈù¢ËøòÊèêÂèä‰∫Ü AIO Âì¶ Âü∫Êú¨Ê¶ÇÂøµËøôÁé©ÊÑèÊòØ‰ªÄ‰πàJava NIOÊòØ Java 1.4‰πãÂêéÊñ∞Âá∫ÁöÑ‰∏ÄÂ•óIOÊé•Âè£ÔºåËøôÈáåÁöÑÁöÑÊñ∞ÊòØÁõ∏ÂØπ‰∫éÂéüÊúâÊ†áÂáÜÁöÑJava IOÂíåJava NetworkingÊé•Âè£„ÄÇNIOÊèê‰æõ‰∫Ü‰∏ÄÁßçÂÆåÂÖ®‰∏çÂêåÁöÑÊìç‰ΩúÊñπÂºè„ÄÇ Non-Blocking I/O or New I/O New Âú®Âì™ÈáåÔºåÁâπÁÇπÊòØÂï• Ê†áÂáÜÁöÑIOÁºñÁ®ãÊé•Âè£ÊòØÈù¢ÂêëÂ≠óËäÇÊµÅÂíåÂ≠óÁ¨¶ÊµÅÁöÑ„ÄÇËÄåNIOÊòØÈù¢ÂêëÈÄöÈÅìÂíåÁºìÂÜ≤Âå∫ÁöÑÔºåÊï∞ÊçÆÊÄªÊòØ‰ªéÈÄöÈÅì‰∏≠ËØªÂà∞bufferÁºìÂÜ≤Âå∫ÂÜÖÔºåÊàñËÄÖ‰ªébufferÂÜôÂÖ•Âà∞ÈÄöÈÅì‰∏≠„ÄÇ„ÄåÁü•ËØÜÊòØÁõ∏ÈÄöÁöÑÔºåËøôÂùóË∑üÈõ∂Êã∑Ë¥ùÊäÄÊúØ‰∏≠ÁöÑÁî®Êà∑ÁºìÂÜ≤Âå∫ÂíåÂÜÖÊ†∏ÁºìÂÜ≤Âå∫ÁöÑÂΩ¢Âºè‰∏ÄÊ®°‰∏ÄÊ†∑ÔºåÁî®Êà∑ÁºìÂÜ≤Âå∫Â∞±ÊòØ BufferÔºåÊàë‰ª¨ÂèØ‰ª•Âú®ËøôÈáåËøõË°åÊìç‰ΩúÊï∞ÊçÆÔºåËÄåÂÜÖÊ†∏ÁºìÂÜ≤Âå∫Êï∞ÊçÆÂ∞±ÊòØ ChannelÔºåÊàë‰ª¨Âú®ËøôÈáå‰∏çËÉΩÂéªÊìç‰ΩúÊï∞ÊçÆÔºå‰ΩÜÊòØÂèØ‰ª•‰º†ËæìÊï∞ÊçÆ„ÄÇ„ÄçËøô‰∏™ÁâπÁÇπÂú® Êñá‰ª∂I/O Âíå ÁΩëÁªú I/O ‰∏≠ÈÉΩÊúâÂæàÂ§ßÁöÑÁî®Â§ÑÔºåÂú®Êñá‰ª∂ I/O ‰∏≠ÊàëÂ∑≤ÁªèËÆ≤Ëøá‰∫ÜÂ•ΩÂ§Ñ‰∫ÜÔºåÂ∞±ÊòØÂèØ‰ª•ÂíåÈõ∂Êã∑Ë¥ùÈÇ£‰∏ÄÂ•óÁªìÂêà‰∏äÔºåÂú®ÁΩëÁªú I/O ‰∏≠ÔºåËøô‰∏™ÁâπÁÇπÂèØ‰ª•ÂæàÂ•ΩÁöÑÊéßÂà∂Êï∞ÊçÆÔºåÊØïÁ´üÁºìÂÜ≤Âå∫Áõ∏ÂØπÂ≠óËäÇÂ≠óÁ¨¶ÊµÅÊù•ËØ¥Ë¶ÅÂº∫ÂæóÂ§ö„ÄÇ Non-Blocking I/O„ÄÇÊàë‰ª¨ÂèØ‰ª•ËøõË°åÈùûÈòªÂ°ûIOÊìç‰Ωú„ÄÇÊØîÂ¶ÇËØ¥ÔºåÂçïÁ∫øÁ®ã‰∏≠‰ªéÈÄöÈÅìËØªÂèñÊï∞ÊçÆÂà∞bufferÔºåÂêåÊó∂ÂèØ‰ª•ÁªßÁª≠ÂÅöÂà´ÁöÑ‰∫ãÊÉÖÔºåÂΩìÊï∞ÊçÆËØªÂèñÂà∞buffer‰∏≠ÂêéÔºåÁ∫øÁ®ãÂÜçÁªßÁª≠Â§ÑÁêÜÊï∞ÊçÆ„ÄÇÂÜôÊï∞ÊçÆ‰πüÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇÂ∞±ÊòØÁî® Selector ÂÆûÁé∞ÁöÑ„ÄÇ ‰∏âÂâëÂÆ¢„ÄåChannel„ÄÅBuffer„ÄÅSelector„ÄçchannelÁî®Êù•ËøêËæìÊï∞ÊçÆÁöÑÔºåÊòØÂÖ®ÂèåÂ∑•ÁöÑÔºåÂèåÂêëÈÉΩÂèØ‰ª•ÔºåÂ¶ÇÊûúËßâÂæó‰∏çÂ•ΩÁêÜËß£ÁöÑËØùÔºåÂ∞±ÁúãÊàêÂÜÖÊ†∏ÁºìÂÜ≤Âå∫Â∞±Ë°å‰∫ÜÔºåÊâÄ‰ª•Êàë‰ª¨Âú®Á®ãÂ∫è‰∏≠ÊÉ≥Ë¶ÅÁî®Âà∞Êï∞ÊçÆÁöÑËØùÂøÖÈ°ªÊê≠ÈÖç bufferÔºåchannel ‰ªé buffer ‰∏≠ËØªÊï∞ÊçÆÔºåÁõ∏ÂΩì‰∫éÂÜÖÊ†∏ÁºìÂÜ≤Âå∫‰∏≠ÁöÑÊï∞ÊçÆ‰º†ÈÄÅÂà∞Áî®Êà∑ÁºìÂÜ≤Âå∫Ôºåbuffer ÂÜôÊï∞ÊçÆËá≥ channelÔºåÁõ∏ÂΩì‰∫éÁî®Êà∑ÁºìÂÜ≤Âå∫‰∏≠ÁöÑÊï∞ÊçÆ‰º†ÈÄÅÂà∞ channel„ÄÇ ‰∏ªË¶ÅÁöÑ channel ÊúâÔºö FileChannel „ÄåÊñá‰ª∂ I/O Áî®Âà∞ÁöÑ„Äç DatagramChannel „ÄåÁΩëÁªú I/O Áî®Âà∞Ôºåudp‰º†Ëæì„Äç SocketChannel „ÄåÁΩëÁªú I/O Áî®Âà∞Ôºåtcp‰º†Ëæì„Äç ServerSocketChannel „ÄåÁΩëÁªú I/O Áî®Âà∞ÔºåÁî®‰∫éÂª∫Á´ã tcpËøûÊé•ÁöÑchannel„Äç bufferbufferÊú¨Ë¥®‰∏äÂ∞±ÊòØ‰∏ÄÂùóÂÜÖÂ≠òÂå∫ÔºåÂèØ‰ª•Áî®Êù•ÂÜôÂÖ•Êï∞ÊçÆÔºåÂπ∂Âú®Á®çÂêéËØªÂèñÂá∫Êù•„ÄÇËøôÂùóÂÜÖÂ≠òË¢´NIO BufferÂåÖË£πËµ∑Êù•ÔºåÂØπÂ§ñÊèê‰æõ‰∏ÄÁ≥ªÂàóÁöÑËØªÂÜôÊñπ‰æøÂºÄÂèëÁöÑÊé•Âè£„ÄÇÂ∞±ÊòØÁî®Êù•Ë∑ü channel ‰∫§‰∫íÁöÑÔºåÊàë‰ª¨ÂØπÊï∞ÊçÆÁöÑÊìç‰ΩúÈÉΩÊòØÂú®ËøôÈáåÂÆåÊàêÁöÑÔºåbufferÂ∫îËØ•ÊòØ‰∏âÂâëÂÆ¢‰∏≠ÊúÄÂÄºÂæóËÆ≤ÁöÑ„ÄÇ ÂàÜÁ±ªJava NIOÊúâÂ¶Ç‰∏ãÂÖ∑‰ΩìÁöÑBufferÁ±ªÂûãÔºö ByteBuffer MappedByteBuffer CharBuffer DoubleBuffer FloatBuffer IntBuffer LongBuffer ShortBuffer Ê≠£Â¶Ç‰Ω†ÁúãÂà∞ÁöÑÔºåBufferÁöÑÁ±ªÂûã‰ª£Ë°®‰∫Ü‰∏çÂêåÊï∞ÊçÆÁ±ªÂûãÔºåÊç¢Âè•ËØùËØ¥ÔºåBuffer‰∏≠ÁöÑÊï∞ÊçÆÂèØ‰ª•ÊòØ‰∏äËø∞ÁöÑÂü∫Êú¨Á±ªÂûãÔºõ ÂÖ∂‰∏≠ÊúÄ‰∏∫ÈáçË¶ÅÁöÑÂ∞±ÊòØ ByteBufferÔºåÂú®ÁΩëÁªú I/O ‰∏≠Êàë‰ª¨Âü∫Êú¨‰∏äÂ∞±ÊòØ‰ΩøÁî® ByteBuffer ‰∫ÜÔºåÂú®Êñá‰ª∂ I/O ‰∏≠Áî±‰∫éÂèØ‰ª•‰ΩøÁî®Èõ∂Êã∑Ë¥ùÊäÄÊúØÔºåÊâÄ‰ª•‰∏ªË¶ÅÁî®ÁöÑÊòØÁî®Âà∞mmapÁöÑ MappedByteBufferÔºåËÅ™ÊòéÁöÑ‰Ω†ËÇØÂÆöÂ∑≤ÁªèÁü•ÈÅìÊÄé‰πàÁî®Ëøô‰∏™MappedByteBuffer‰∫ÜÔºå‰πüÂ∞±ÊòØÁõ¥Êé•ËÆ© MappedByteBuffer ‰∏é FileChannel ÂΩ¢ÊàêÂÜÖÂ≠òÂú∞ÂùÄÊò†Â∞Ñ„ÄåÁ±ªÊØîÁî®Êà∑ÁºìÂÜ≤Âå∫ÂíåÂÜÖÊ†∏ÁºìÂÜ≤Âå∫ÂÅöÂú∞ÂùÄÊò†Â∞Ñ„ÄçÔºåÂáèÂ∞ëÊã∑Ë¥ùÊ¨°Êï∞„ÄÇ Êï∞ÊçÆÁªìÊûÑÊàë‰ª¨Êù•Â•ΩÂ•Ω‰∫ÜËß£‰∏Ä‰∏ã bufferÔºåÂÖàÊù•Áúã‰∏ªË¶ÅÁöÑÂ±ûÊÄß 12345// Invariants: mark &lt;= position &lt;= limit &lt;= capacityprivate int mark = -1; // ÈªòËÆ§ -1ÔºåÊ†áËÆ∞ÔºåÂèØ‰ª•ÈÖçÂêà mark()„ÄÅreset()ÊñπÊ≥ï‰ΩøÁî®private int position = 0; private int limit;private int capacity; ÂÆπÈáèÔºàCapacityÔºâ ‰Ωú‰∏∫‰∏ÄÂùóÂÜÖÂ≠òÔºåbufferÊúâ‰∏Ä‰∏™Âõ∫ÂÆöÁöÑÂ§ßÂ∞èÔºåÂè´ÂÅöcapacityÂÆπÈáè„ÄÇ‰∏ÄÊó¶bufferÂÜôÊª°‰∫ÜÂ∞±ÈúÄË¶ÅÊ∏ÖÁ©∫Â∑≤ËØªÊï∞ÊçÆ‰ª•‰æø‰∏ãÊ¨°ÁªßÁª≠ÂÜôÂÖ•Êñ∞ÁöÑÊï∞ÊçÆ„ÄÇ ‰ΩçÁΩÆÔºàPositionÔºâ ÂΩìÂÜôÂÖ•Êï∞ÊçÆÂà∞BufferÁöÑÊó∂ÂÄôÈúÄË¶Å‰∏≠‰∏Ä‰∏™Á°ÆÂÆöÁöÑ‰ΩçÁΩÆÂºÄÂßãÔºåÈªòËÆ§ÂàùÂßãÂåñÊó∂Ëøô‰∏™‰ΩçÁΩÆposition‰∏∫0Ôºå‰∏ÄÊó¶ÂÜôÂÖ•‰∫ÜÊï∞ÊçÆÊØîÂ¶Ç‰∏Ä‰∏™Â≠óËäÇÔºåÊï¥ÂûãÊï∞ÊçÆÔºåÈÇ£‰πàpositionÁöÑÂÄºÂ∞±‰ºöÊåáÂêëÊï∞ÊçÆ‰πãÂêéÁöÑ‰∏Ä‰∏™ÂçïÂÖÉÔºåpositionÊúÄÂ§ßÂèØ‰ª•Âà∞capacity-1. ÂΩì‰ªéBufferËØªÂèñÊï∞ÊçÆÊó∂Ôºå‰πüÈúÄË¶Å‰ªé‰∏Ä‰∏™Á°ÆÂÆöÁöÑ‰ΩçÁΩÆÂºÄÂßã„ÄÇbuffer‰ªéÂÜôÂÖ•Ê®°ÂºèÂèò‰∏∫ËØªÂèñÊ®°ÂºèÊó∂Ôºåposition‰ºöÂΩíÈõ∂ÔºåÊØèÊ¨°ËØªÂèñÂêéÔºåpositionÂêëÂêéÁßªÂä®„ÄÇ ‰∏äÈôêÔºàLimitÔºâ Âú®ÂÜôÊ®°ÂºèÔºålimitÁöÑÂê´‰πâÊòØÊàë‰ª¨ÊâÄËÉΩÂÜôÂÖ•ÁöÑÊúÄÂ§ßÊï∞ÊçÆÈáè„ÄÇÂÆÉÁ≠âÂêå‰∫ébufferÁöÑÂÆπÈáè„ÄÇ ‰∏ÄÊó¶ÂàáÊç¢Âà∞ËØªÊ®°ÂºèÔºålimitÂàô‰ª£Ë°®Êàë‰ª¨ÊâÄËÉΩËØªÂèñÁöÑÊúÄÂ§ßÊï∞ÊçÆÈáèÔºå‰ªñÁöÑÂÄºÁ≠âÂêå‰∫éÂÜôÊ®°Âºè‰∏ãpositionÁöÑ‰ΩçÁΩÆ„ÄÇ Êï∞ÊçÆËØªÂèñÁöÑ‰∏äÈôêÊó∂buffer‰∏≠Â∑≤ÊúâÁöÑÊï∞ÊçÆÔºå‰πüÂ∞±ÊòØlimitÁöÑ‰ΩçÁΩÆÔºàÂéüpositionÊâÄÊåáÁöÑ‰ΩçÁΩÆÔºâ„ÄÇ ËØªÊ®°ÂºèÂíåÂÜôÊ®°ÂºèÂú®ËØªÊ®°ÂºèÂíåÂÜôÊ®°Âºè‰∏ãÔºåposition„ÄÅmark„ÄÅlimitÁöÑÂÄºÈÉΩ‰ºöÂèòÂåñ„ÄÇÂ¶ÇÊûú‰∏çÊòæÁ§∫Ë∞ÉÁî® mark() ÂáΩÊï∞ÔºåmarkÂÄº‰∏ç‰ºöÂèòÔºåÂ¶ÇÊûúÊòæÂºèË∞ÉÁî®ÔºåÈÇ£‰πà mark ‰ºöÁ≠â‰∫é ÂΩìÂâçÁöÑ positionÔºåÂ¶ÇÊûúË∞ÉÁî® flip()ÔºåÁî±ÂÜôÊ®°ÂºèÂàáÊç¢ÊàêËØªÊ®°ÂºèÔºåÊ≠§Êó∂‰∏ç‰ªÖpositionÂíålimit‰ºöÂèëÁîüÂèòÂåñÔºåmark ‰πü‰ºöÂèò‰∏∫ -1„ÄÇÂΩìÁÑ∂‰∫ÜÔºåclear ‰πü‰ºöÂ∞Ü mark ÁΩÆ‰∏∫ÂàùÂßãÁä∂ÊÄÅ -1„ÄÇ 123456789101112public final Buffer flip() &#123; limit = position; position = 0; mark = -1; return this;&#125;public final Buffer clear() &#123; position = 0; limit = capacity; mark = -1; return this;&#125; Âü∫Êú¨Áî®Ê≥ïÂà©Áî®BufferËØªÂÜôÊï∞ÊçÆÔºåÈÄöÂ∏∏ÈÅµÂæ™Âõõ‰∏™Ê≠•È™§Ôºö ÊääÊï∞ÊçÆÂÜôÂÖ•bufferÔºõ Ë∞ÉÁî®flipÔºõ ‰ªéBuffer‰∏≠ËØªÂèñÊï∞ÊçÆÔºõ Ë∞ÉÁî®buffer.clear()ÊàñËÄÖbuffer.compact() ÂΩìÂÜôÂÖ•Êï∞ÊçÆÂà∞buffer‰∏≠Êó∂Ôºåbuffer‰ºöËÆ∞ÂΩïÂ∑≤ÁªèÂÜôÂÖ•ÁöÑÊï∞ÊçÆÂ§ßÂ∞è„ÄÇÂΩìÈúÄË¶ÅËØªÊï∞ÊçÆÊó∂ÔºåÈÄöËøáflip()ÊñπÊ≥ïÊääbuffer‰ªéÂÜôÊ®°ÂºèË∞ÉÊï¥‰∏∫ËØªÊ®°ÂºèÔºõÂú®ËØªÊ®°Âºè‰∏ãÔºåÂèØ‰ª•ËØªÂèñÊâÄÊúâÂ∑≤ÁªèÂÜôÂÖ•ÁöÑÊï∞ÊçÆ„ÄÇ ÂΩìËØªÂèñÂÆåÊï∞ÊçÆÂêéÔºåÈúÄË¶ÅÊ∏ÖÁ©∫bufferÔºå‰ª•Êª°Ë∂≥ÂêéÁª≠ÂÜôÂÖ•Êìç‰Ωú„ÄÇÊ∏ÖÁ©∫bufferÊúâ‰∏§ÁßçÊñπÂºèÔºöË∞ÉÁî®clear()Êàñcompact()ÊñπÊ≥ï„ÄÇclear‰ºöÊ∏ÖÁ©∫Êï¥‰∏™bufferÔºåcompactÂàôÂè™Ê∏ÖÁ©∫Â∑≤ËØªÂèñÁöÑÊï∞ÊçÆÔºåÊú™Ë¢´ËØªÂèñÁöÑÊï∞ÊçÆ‰ºöË¢´ÁßªÂä®Âà∞bufferÁöÑÂºÄÂßã‰ΩçÁΩÆÔºåÂÜôÂÖ•‰ΩçÁΩÆÂàôËøëË∑üÁùÄÊú™ËØªÊï∞ÊçÆ‰πãÂêé„ÄÇ 123456789101112131415161718192021222324252627282930313233public class Buffer_Demo &#123; public static void main(String[] args) throws IOException &#123; RandomAccessFile aFile = new RandomAccessFile("file.txt", "rw"); FileChannel inChannel = aFile.getChannel(); //create buffer with capacity of 48 bytes ByteBuffer buf = ByteBuffer.allocate(48); // Ë∞ÉÁî® channel ÁöÑ read or writeÔºåÂ∞±Áõ∏ÂΩì‰∫éÂú®ÂÜÖÊ†∏ÊÄÅÁ≥ªÁªüË∞ÉÁî®‰∏ÄÊ†∑ // Ëá≥‰∫éÊòØ read ËøòÊòØ write ÂèñÂÜ≥‰∫é new ÁöÑÊó∂ÂÄôÊñá‰ª∂ÊòØ Ê∫êÊñá‰ª∂ËøòÊòØÁõÆÁöÑÊñá‰ª∂ // Â¶ÇÊûúÊòØÊ∫êÊñá‰ª∂ÔºåÈÇ£Â∞±ÊòØ read Âà∞ Èöè‰æø‰∏Ä‰∏™Âú∞Êñπ // Â¶ÇÊûúÊòØÁõÆÁöÑÊñá‰ª∂ÔºåÈÇ£Â∞±ÊòØÈöè‰æøÂ∞Ü‰∏úË•ø write Âà∞ ÁõÆÁöÑÊñá‰ª∂ int bytesRead = inChannel.read(buf); //read into buffer. int count = 0 ; while (bytesRead != -1) &#123; buf.flip(); // ÂàáÊç¢Âà∞ËØªÊ®°Âºè count++; System.out.println(count); while(buf.hasRemaining())&#123; System.out.print((char) buf.get()); // read 1 byte at a time &#125; buf.clear(); //make buffer ready for writing // Ëøô‰∏ÄË°å‰∏ÄÂÆöË¶ÅÂú®‰∏ÄÂÆöByteBuffer.clear()‰πãÂêéÔºåÂõ†‰∏∫Â¶ÇÊûú position == limitÔºåÂ∞±‰ª£Ë°®ByteBuffer‰∏çËÉΩÂ≠òÂÖ•‰∏úË•ø‰∫Ü, // Âõ†Ê≠§ËøûÊµÅÁªàÊ≠¢‰ø°ÊÅØÈÉΩ‰∏çËÉΩÊé•ÂèóÔºå‰∏çËøîÂõû-1ÔºåËÄåÊòØËøîÂõû 0 // ËÄåclear‰ºöÂ∞Ü position ÁΩÆ‰∏∫ 0Ôºå‰∏ç‰ºöÊúâ position == limitÔºåÂπ∂‰∏î buf Â∑≤ÁªèËØªÂÆå‰∫ÜÔºåÊïÖ‰ºöËøîÂõû -1. // ÂÜç‰∏âÊèêÈÜíÔºåË∞ÉÁî® read() ÊñπÊ≥ïÔºå‰ºöÂà§Êñ≠ÊòØÂê¶ËØªÂÆå‰∫ÜÔºåÂ¶ÇÊûúËØªÂÆå‰∫ÜÂ∞±‰ºöËøîÂõû -1ÔºåÊâÄ‰ª•Êñá‰ª∂ËØªÂèñÂè™‰ºöËØª‰∏ÄÈÅçÔºå‰ΩÜÊòØbufferÂèØ‰ª•ËØªÂ§öÈÅç bytesRead = inChannel.read(buf); &#125; aFile.close(); &#125;&#125; ÂÖ∂‰ªñ‰∏Ä‰∫õÂáΩÊï∞ÁöÑÁî®Ê≥ï mark() &amp; reset() 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455/** * Áî®‰∫éÂØπmarkÂ±ûÊÄßÁöÑÊµãËØï * Ë∞ÉÁî®buffer.remak()Êó∂Ôºå‰ºöÂ∞ÜÂΩìÂâçÁöÑpositionÂÄºËµãÁªôremakÂ±ûÊÄßÔºå * ‰øùÂ≠òÂΩìÂâçÊìç‰ΩúÁöÑÁä∂ÊÄÅÔºåÁÑ∂ÂêégetÁªßÁª≠ÊâßË°åÔºåÂΩìË∞ÉÁî®buffer.resetÔºàÔºâÊó∂Ôºå‰ºöÂ∞Ü‰πãÂâçÂΩìÂâçÁöÑremarkÂÄºËµã‰∫àposition, * ÂÆûÁé∞Áä∂ÊÄÅÁöÑÊÅ¢Â§ç. * flip clear ( reset mark ) rewind * @author lenovo * */class BufferMark &#123; public static void main(String[] args) &#123; // TODO Auto-generated method stub IntBuffer intBuffer = IntBuffer.allocate(10); for(int i = 0;i&lt;intBuffer.capacity();i++) &#123; int b = new SecureRandom().nextInt(20); //Ê≠§ÊñπÊ≥ï‰∏∫Áõ∏ÂØπÊñπÊ≥ï(relative),‰ªñ‰ºöÂØºËá¥positionÁöÑÂèòÂåñ intBuffer.put(b); //Ê≠§ÊñπÊ≥ïÊòØÁªùÂØπÊñπÊ≥ïÔºàabsolute),‰ªñÁöÑ‰ΩøÁî®Âè™‰ºöËÆ≤ÂØπÂ∫î‰ΩçÁΩÆÁöÑÂÄºÊõøÊç¢Âà∞ÔºåÂπ∂‰∏ç‰ºöÊõ¥Êîπposition //intBuffer.put(i,new SecureRandom().nextInt(20)); System.out.print(b+" "); &#125; //ÁøªËΩ¨buffer intBuffer.flip(); System.out.println(""); System.out.println("ËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÔºö"+intBuffer.get()); System.out.println("ËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÔºö"+intBuffer.get()); System.out.println("1:buffer position="+intBuffer.position()+" limit="+intBuffer.limit()); //Ê†áËÆ∞bufferÁä∂ÊÄÅ intBuffer.mark(); System.out.println("2: buffer position="+intBuffer.position()+" limit="+intBuffer.limit()); System.out.println("ËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÔºö"+intBuffer.get()); System.out.println("ËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÔºö"+intBuffer.get()); System.out.println("3: buffer position="+intBuffer.position()+" limit="+intBuffer.limit()); //ÊÅ¢Â§çbufferÁä∂ÊÄÅ intBuffer.reset(); System.out.println("ËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÔºö"+intBuffer.get()); System.out.println("ËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÔºö"+intBuffer.get()); System.out.println("4: buffer position="+intBuffer.position()+" limit="+intBuffer.limit()); /** * 4 10 3 11 17 5 18 10 2 6 ËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÔºö4 ËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÔºö10 1: buffer position=2 limit=10 2: buffer position=2 limit=10 ËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÔºö3 ËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÔºö11 3: buffer position=4 limit=10 ËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÔºö3 ËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÔºö11 4: buffer position=4 limit=10 */ &#125;&#125; buffer.get() ËØªÂèñÁºìÂÜ≤Âå∫ÁöÑÊï∞ÊçÆÔºåÈªòËÆ§Êåâ Â≠óËäÇ ËØªÂèñÔºõ rewind() Buffer.rewind()ÊñπÊ≥ïÂ∞ÜpositionÁΩÆ‰∏∫0ÔºåËøôÊ†∑Êàë‰ª¨ÂèØ‰ª•ÈáçÂ§çËØªÂèñbuffer‰∏≠ÁöÑÊï∞ÊçÆ„ÄÇlimit‰øùÊåÅ‰∏çÂèò„ÄÇ clear() &amp; compact() ‰∏ÄÊó¶Êàë‰ª¨‰ªébuffer‰∏≠ËØªÂèñÂÆåÊï∞ÊçÆÔºåÈúÄË¶ÅÂ§çÁî®buffer‰∏∫‰∏ãÊ¨°ÂÜôÊï∞ÊçÆÂÅöÂáÜÂ§á„ÄÇÂè™ÈúÄË¶ÅË∞ÉÁî®clearÊàñcompactÊñπÊ≥ï„ÄÇ clearÊñπÊ≥ï‰ºöÈáçÁΩÆposition‰∏∫0Ôºålimit‰∏∫capacityÔºå‰πüÂ∞±ÊòØÊï¥‰∏™BufferÊ∏ÖÁ©∫„ÄÇÂÆûÈôÖ‰∏äBuffer‰∏≠Êï∞ÊçÆÂπ∂Ê≤°ÊúâÊ∏ÖÁ©∫ÔºåÊàë‰ª¨Âè™ÊòØÊääÊ†áËÆ∞‰∏∫‰øÆÊîπ‰∫Ü„ÄÇ Â¶ÇÊûúBufferËøòÊúâ‰∏Ä‰∫õÊï∞ÊçÆÊ≤°ÊúâËØªÂèñÂÆåÔºåË∞ÉÁî®clearÂ∞±‰ºöÂØºËá¥ËøôÈÉ®ÂàÜÊï∞ÊçÆË¢´‚ÄúÈÅóÂøò‚ÄùÔºåÂõ†‰∏∫Êàë‰ª¨Ê≤°ÊúâÊ†áËÆ∞ËøôÈÉ®ÂàÜÊï∞ÊçÆÊú™ËØª„ÄÇ ÈíàÂØπËøôÁßçÊÉÖÂÜµÔºåÂ¶ÇÊûúÈúÄË¶Å‰øùÁïôÊú™ËØªÊï∞ÊçÆÔºåÈÇ£‰πàÂèØ‰ª•‰ΩøÁî®compact„ÄÇ Âõ†Ê≠§compactÂíåclearÁöÑÂå∫Âà´Â∞±Âú®‰∫éÂØπÊú™ËØªÊï∞ÊçÆÁöÑÂ§ÑÁêÜÔºåÊòØ‰øùÁïôËøôÈÉ®ÂàÜÊï∞ÊçÆËøòÊòØ‰∏ÄËµ∑Ê∏ÖÁ©∫„ÄÇ selectorSelectorÊòØJava NIO‰∏≠ÁöÑ‰∏Ä‰∏™ÁªÑ‰ª∂ÔºåÁî®‰∫éÊ£ÄÊü•‰∏Ä‰∏™ÊàñÂ§ö‰∏™NIO ChannelÁöÑÁä∂ÊÄÅÊòØÂê¶Â§Ñ‰∫éÂèØËØª„ÄÅÂèØÂÜô„ÄÇÂ¶ÇÊ≠§ÂèØ‰ª•ÂÆûÁé∞ÂçïÁ∫øÁ®ãÁÆ°ÁêÜÂ§ö‰∏™channels,‰πüÂ∞±ÊòØÂèØ‰ª•ÁÆ°ÁêÜÂ§ö‰∏™ÁΩëÁªúÈìæÊé•„ÄÇËøô‰πüÊòØ I/O Â§çÁî®ÊäÄÊúØÁöÑÊ†∏ÂøÉÔºå‰πüÊòØÊï¥‰∏™ NIO ÊúÄÊ†∏ÂøÉÁöÑÁªÑ‰ª∂„ÄÇÂú® I/O Â§çÁî®ÊäÄÊúØÂÜçÂ±ïÂºÄÂêß„ÄÇ Áî®Âà∞ÁöÑÈõ∂Êã∑Ë¥ùÊäÄÊúØNIO‰∏≠ÈÄöËøáFileChannelÊù•Êèê‰æõZero-CopyÁöÑÊîØÊåÅÔºåÂàÜÂà´ÊòØ FileChannel.map: Â∞ÜÊñá‰ª∂ÁöÑ‰∏ÄÈÉ®ÂàÜÊò†Â∞ÑÂà∞ÂÜÖÂ≠ò FileChannel.transferTo: Â∞ÜÊú¨ChannelÁöÑÊñá‰ª∂Â≠óËäÇËΩ¨ÁßªÂà∞ÊåáÂÆöÁöÑÂèØÂÜôChannel mmap12345678910111213141516171819202122232425262728293031323334/** * ÊµãËØïFileChannelÁöÑÁî®Ê≥ï * * @author sound2gd * */public class FileChannnelTest &#123; public static void main(String[] args) &#123; File file = new File("src/com/cris/chapter15/f6/FileChannnelTest.java"); try ( // FileInputStreamÊâìÂºÄÁöÑFileChannelÂè™ËÉΩËØªÂèñ FileChannel fc = new FileInputStream(file).getChannel(); // FileOutputStreamÊâìÂºÄÁöÑFileChannelÂè™ËÉΩÂÜôÂÖ• FileChannel fo = new FileOutputStream("src/com/cris/chapter15/f6/a.txt").getChannel();) &#123; // Â∞ÜFileChannelÁöÑÊï∞ÊçÆÂÖ®ÈÉ®Êò†Â∞ÑÊàêByteBuffer MappedByteBuffer mbb = fc.map(MapMode.READ_ONLY, 0, file.length()); // ‰ΩøÁî®UTF-8ÁöÑÂ≠óÁ¨¶ÈõÜÊù•ÂàõÂª∫Ëß£Á†ÅÂô® Charset charset = Charset.forName("UTF-8"); // Áõ¥Êé•Â∞ÜbufferÈáåÁöÑÊï∞ÊçÆÂÖ®ÈÉ®ËæìÂá∫ fo.write(mbb); mbb.clear(); // ÂàõÂª∫Ëß£Á†ÅÂô® CharsetDecoder decoder = charset.newDecoder(); // ‰ΩøÁî®Ëß£Á†ÅÂô®Â∞ÜbyteBufferËΩ¨Êç¢‰∏∫CharBuffer CharBuffer decode = decoder.decode(mbb); System.out.println(decode); &#125; catch (Exception e) &#123; &#125; &#125;&#125; Êõ¥Â§öËØ¶ÁªÜÊ∫êÁ†ÅËß£ÊûêËßÅÔºöhttps://zhuanlan.zhihu.com/p/83398714 sendfile transferTo() Âíå transferFrom() ÊñπÊ≥ïÁöÑÂ∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜÔºåËøô‰∏§‰∏™ÊñπÊ≥ï‰πüÊòØ java.nio.channels.FileChannel ÁöÑÊäΩË±°ÊñπÊ≥ïÔºåÁî±Â≠êÁ±ª sun.nio.ch.FileChannelImpl.java ÂÆûÁé∞„ÄÇtransferTo() Âíå transferFrom() Â∫ïÂ±ÇÈÉΩÊòØÂü∫‰∫é sendfile ÂÆûÁé∞Êï∞ÊçÆ‰º†ËæìÁöÑ„ÄÇËøôÈáåÂ∞±ÊòØ Channel ‰πãÈó¥ÁöÑ‰º†Ëæì„ÄÇ I/O Â§çÁî®ÊäÄÊúØÂÖ∂ÂÆûËØ¥ÁôΩ‰∫ÜÔºåÂ∞±ÊòØ‰∏Ä‰∏™ Selector ÂØπÂ∫îÂ§ö‰∏™ ChannelÔºåÂèØ‰ª•‰∏ìÈó®Áî®‰∏Ä‰∏™ÁÆ°ÁêÜÂ§ö‰∏™ÔºåÂ∞±ÊòØ I/O Â§çÁî®„ÄÇ ‰∏ãÈù¢Áõ¥Êé•Êîæ‰∏Ä‰∏™ Socket I/O ÂÆû‰æã„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151package NIO.ÁºñÁ®ãÊñ∞ËØ¥;import java.io.IOException;import java.net.InetSocketAddress;import java.net.Socket;import java.nio.ByteBuffer;import java.nio.channels.SelectionKey;import java.nio.channels.Selector;import java.nio.channels.ServerSocketChannel;import java.nio.channels.SocketChannel;import java.text.SimpleDateFormat;import java.util.Date;import java.util.Iterator;import java.util.Random;import java.util.Set;import java.util.concurrent.atomic.AtomicInteger;public class NIO &#123;&#125;/** * @author yang * @since 2020-03-21 */class Client2 &#123; public static void main(String[] args) &#123; try &#123; for (int i = 0; i &lt; 20; i++) &#123; Socket s = new Socket(); s.connect(new InetSocketAddress("127.0.0.1", 27771)); processWithNewThread(s, i); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; static void processWithNewThread(Socket s, int i) &#123; Runnable run = () -&gt; &#123; try &#123; //Áù°Áú†ÈöèÊú∫ÁöÑ5-10ÁßíÔºåÊ®°ÊãüÊï∞ÊçÆÂ∞öÊú™Â∞±Áª™ Thread.sleep((new Random().nextInt(6) + 5) * 1000); //ÂÜô1MÊï∞ÊçÆÔºå‰∏∫‰∫ÜÊãâÈïøÊúçÂä°Âô®Á´ØËØªÊï∞ÊçÆÁöÑËøáÁ®ã s.getOutputStream().write(prepareBytes()); //Áù°Áú†1ÁßíÔºåËÆ©ÊúçÂä°Âô®Á´ØÊääÊï∞ÊçÆËØªÂÆå Thread.sleep(1000); s.close(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;; new Thread(run).start(); &#125; static byte[] prepareBytes() &#123; byte[] bytes = new byte[1024*1024*1]; for (int i = 0; i &lt; bytes.length; i++) &#123; bytes[i] = 1; &#125; return bytes; &#125;&#125;/** * @author yang * @since 2020-03-21 */class NioServer2 &#123; static int clientCount = 0; static AtomicInteger counter = new AtomicInteger(0); static SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss"); public static void main(String[] args) &#123; try &#123; Selector selector = Selector.open(); ServerSocketChannel ssc = ServerSocketChannel.open(); ssc.configureBlocking(false); ssc.register(selector, SelectionKey.OP_ACCEPT); ssc.bind(new InetSocketAddress("127.0.0.1", 27771)); while (true) &#123; selector.select(); Set&lt;SelectionKey&gt; keys = selector.selectedKeys(); Iterator&lt;SelectionKey&gt; iterator = keys.iterator(); while (iterator.hasNext()) &#123; SelectionKey key = iterator.next(); iterator.remove(); if (key.isAcceptable()) &#123; ServerSocketChannel ssc1 = (ServerSocketChannel)key.channel(); SocketChannel sc = null; while ((sc = ssc1.accept()) != null) &#123; sc.configureBlocking(false); sc.register(selector, SelectionKey.OP_READ); InetSocketAddress rsa = (InetSocketAddress)sc.socket().getRemoteSocketAddress(); System.out.println(time() + "-&gt;" + rsa.getHostName() + ":" + rsa.getPort() + "-&gt;" + Thread.currentThread().getId() + ":" + (++clientCount)); &#125; &#125; else if (key.isReadable()) &#123; //ÂÖàÂ∞Ü‚ÄúËØª‚Äù‰ªéÊÑüÂÖ¥Ë∂£Êìç‰ΩúÁßªÂá∫ÔºåÂæÖÊääÊï∞ÊçÆ‰ªéÈÄöÈÅì‰∏≠ËØªÂÆåÂêéÔºåÂÜçÊää‚ÄúËØª‚ÄùÊ∑ªÂä†Âà∞ÊÑüÂÖ¥Ë∂£Êìç‰Ωú‰∏≠ //Âê¶ÂàôÔºåËØ•ÈÄöÈÅì‰ºö‰∏ÄÁõ¥Ë¢´ÈÄâÂá∫Êù• key.interestOps(key.interestOps() &amp; (~ SelectionKey.OP_READ)); processWithNewThread((SocketChannel)key.channel(), key); &#125; &#125; &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; static void processWithNewThread(SocketChannel sc, SelectionKey key) &#123; Runnable run = () -&gt; &#123; counter.incrementAndGet(); try &#123; String result = readBytes(sc); //Êää‚ÄúËØª‚ÄùÂä†ËøõÂéª key.interestOps(key.interestOps() | SelectionKey.OP_READ); System.out.println(time() + "-&gt;" + result + "-&gt;" + Thread.currentThread().getId() + ":" + counter.get()); sc.close(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; counter.decrementAndGet(); &#125;; new Thread(run).start(); &#125; static String readBytes(SocketChannel sc) throws Exception &#123; long start = 0; int total = 0; int count = 0; ByteBuffer bb = ByteBuffer.allocate(1024); //ÂºÄÂßãËØªÊï∞ÊçÆÁöÑÊó∂Èó¥ long begin = System.currentTimeMillis(); while ((count = sc.read(bb)) &gt; -1) &#123; if (start &lt; 1) &#123; //Á¨¨‰∏ÄÊ¨°ËØªÂà∞Êï∞ÊçÆÁöÑÊó∂Èó¥ start = System.currentTimeMillis(); &#125; total += count; bb.clear(); &#125; //ËØªÂÆåÊï∞ÊçÆÁöÑÊó∂Èó¥ long end = System.currentTimeMillis(); return "wait=" + (start - begin) + "ms,read=" + (end - start) + "ms,total=" + total + "bs"; &#125; static String time() &#123; return sdf.format(new Date()); &#125;&#125; ÂÖ∑‰ΩìÁöÑËØ≠Âè•Âê´‰πâÊàëËøôÈáåÂ∞±‰∏çÂÜçÂçïÁã¨ËØ¥Êòé‰∫ÜÔºåÂèØ‰ª•ÁßªÊ≠•Ôºöhttps://wiki.jikexueyuan.com/project/java-nio-zh/java-nio-selector.htmlÔºåËøôÈáåÊúâËØ¥Êòé‰∏Ä‰∫õÂÖ∑‰ΩìÂáΩÊï∞ÁöÑÁî®Ê≥ïÔºåËøôÈáåÊàë‰ª¨Áü•ÈÅìÊÄùÊÉ≥Â∞±Â•Ω‰∫Ü„ÄÇ ÂØπËæìÂÖ•ËæìÂá∫ÊµÅÁöÑ‰∏Ä‰∫õÁúãÊ≥ïÂú®ÂÜô‰∏äÈù¢ÁöÑ‰∏Ä‰∫õdemoÁöÑÊó∂ÂÄôÔºåÁ™ÅÁÑ∂ÂèàÂØπËæìÂÖ•ÊµÅËæìÂá∫ÊµÅÊúâÁÇπÂõ∞ÊÉëÔºåÂà∞Â∫ï‰ªÄ‰πàÊó∂ÂÄôËØ•ËæìÂÖ•ÊµÅÔºå‰ªÄ‰πàÊó∂ÂÄôËØ•ËæìÂá∫ÊµÅÔºåÂèà‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂàÜËæìÂá∫ÊµÅËæìÂÖ•ÊµÅÂë¢Ôºü ‰∏∫‰ªÄ‰πàË¶ÅÂàÜËæìÂÖ•ËæìÂá∫ÊµÅÔºü Âõ†‰∏∫ÁõÆÁöÑ‰∏ç‰∏ÄÊ†∑ÔºåËæìÂÖ•ÊµÅÊòØË°®Á§∫‰ªéÂ§ñÈÉ®ËæìÂÖ•Âà∞ÂÜÖÂ≠ò‰∏≠ÂéªÔºåÂÖ≥Ê≥®ÁöÑÈáçÁÇπÂú®Â≠óËäÇÊµÅ‰ªéÂì™ÈáåÊù•ÔºåËÄåËæìÂá∫ÊµÅÊòØË°®Á§∫Â∞ÜÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÂ≠òÂÇ®Âà∞Â§ñÈÉ®ÂéªÔºåÂÖ≥Ê≥®ÁöÑÈáçÁÇπÊòØÂ≠óËäÇÊµÅÂà∞Âì™ÂéªÔºåÂàÜÂºÄÂ∞±ÊòØ‰∏∫‰∫ÜÂàÜÂ∑•ÊòéÁ°Æ„ÄÇ‰∫åËÄÖÊìç‰ΩúÁöÑÂØπË±°‰∏ç‰∏ÄÊ†∑Ôºå‰∏Ä‰∏™ÊòØÊ∫êÊñá‰ª∂„ÄåËæìÂÖ•ÊµÅ„ÄçÔºå‰∏Ä‰∏™ÊòØÁõÆÊ†áÊñá‰ª∂„ÄåËæìÂá∫ÊµÅ„Äç„ÄÇ ËæìÂÖ•ÊµÅÂíåËæìÂá∫ÊµÅ‰ΩïÊó∂Áî®Ôºü Âè™Ë¶ÅÁ°ÆÂÆö‰∫ÜË¶ÅÊìç‰ΩúÁöÑÊñá‰ª∂ÊòØÊ∫êÊñá‰ª∂ËøòÊòØÁõÆÁöÑÊñá‰ª∂ÔºåÂ∞±ËÉΩÂæàÊ∏ÖÊ•öÁöÑÁü•ÈÅìËæìÂÖ•ËæìÂá∫ÊµÅÂ∫îËØ•Â¶Ç‰ΩïÈÄâÊã©ÔºåÂÉèÊúÄÁÆÄÂçïÁöÑ FileOutputStream Âíå FileInputStream ÔºåÂú®‰ΩøÁî®Êó∂ÂàÜÂà´‰ºöÂÖàÊåáÂÆöÁõÆÁöÑÊñá‰ª∂ÂíåÊ∫êÊñá‰ª∂ÔºåËá≥‰∫é fos.write()ÂÖ∑‰ΩìÂÜôÂï•Êàë‰ª¨Âπ∂‰∏çÂÖ≥ÂøÉÔºåËá≥‰∫é fis.read()ÔºåËØªÂà∞Âì™ÈáåÂéªÊàë‰ª¨‰πüÂπ∂‰∏çÂÖ≥ÂøÉ„ÄÇ ÊúÄÂêéÔºåÁî±‰∫éËøôÁØáÊñáÁ´†‰πü‰∏çÊòØ‰∏ªË¶ÅÂÜô I/O ÊµÅÁöÑÔºåËøòÊòØËØ•Êî∂Â∞±Êî∂ÂêßÔºåÊúÄÂêéÊîæ‰∏Ä‰∏™Â§ßÊãõÈìæÊé•ÔºåÊ≤°‰∫ãÁöÑÊó∂ÂÄôÂ§öÁúãÁúãÔºåÂèØ‰ª•Âä†Ê∑±ÂØπ I/O ÊµÅÁöÑÁêÜËß£„ÄÇ ÊúÄËØ¶Â∞ΩÁöÑ I/O ÊµÅÂ§ßÂÖ® ÁÆÄËø∞ËæìÂÖ•ËæìÂá∫ÊµÅ ÊûÅÂÖ∑‰∫âËÆÆÁöÑ‰∏Ä‰∏™ËØùÈ¢òËøôÂ∞±ÊòØ NIO Âà∞Â∫ïÊòØÂêåÊ≠•ÈòªÂ°ûÔºåËøòÊòØÂêåÊ≠•ÈùûÈòªÂ°ûÔºåËøòÊòØÂºÇÊ≠•ÈùûÈòªÂ°ûÂë¢Ôºü ÊàëÁúãËøáÂæàÂ§öÁ≠îÊ°àÔºå‰πüÁúã‰∫ÜÂæàÂ§öËß£ÈáäÔºåÁúüÁöÑ‰∫ëÈáåÈõæÈáå‚Ä¶ ÊàëÂÖàË°®ÊòéÊàëÁöÑËßÇÁÇπÔºåÊàëËÆ§‰∏∫ÊòØÂêåÊ≠•ÈùûÈòªÂ°ûÁöÑ„ÄÇÂêåÊ≠•ÈùûÂêåÊ≠•ÔºåÊàëËßâÂæóÁúãÁöÑÊòØÊ∂àÊÅØÊù•‰∫ÜÔºå‰Ω†ÊòØ‰∏çÊòØÊåâÂ∫èÊé•Êî∂ÔºåÊØîÂ¶ÇÊàë‰ª¨ÁöÑÁ®ãÂ∫èÂú®‰∏Ä‰∏™Á∫øÁ®ãÂÜÖËÇØÂÆöÊòØÂêåÊ≠•ÁöÑÔºåÂõ†‰∏∫‰ªñÊòØÊåâÂ∫èËøõË°åÁöÑÔºåÂÜçÊØîÂ¶ÇÂú® node js ‰∏≠ÊâÄÊúâÁöÑËØ≠Âè•ÈÉΩ‰∏çÊòØÊåâÂ∫èÊù•ÁöÑÔºåËøô‰∏™Â∞±ÁÆóÂÅöÂºÇÊ≠•Ôºå‰ªéËøô‰∏™ËßíÂ∫¶ÁúãÔºåNIO ÊòØÂêåÊ≠•ÁöÑÔºåÂõ†‰∏∫ Selector Ë¶Å‰∏Ä‰∏™‰∏Ä‰∏™ËΩÆËØ¢ÔºåÊØè‰∏™ÊúâËØ∑Ê±ÇÁöÑI/O ÈÉΩÊòØÈúÄË¶ÅÊåâÂ∫èÊù•Êé•Êî∂ÁöÑ„ÄÇÂÜçÊù•Ë∞àË∞àÈùûÈòªÂ°ûÔºåÊàëËßâÂæóË∞àÈòªÂ°ûÈùûÈòªÂ°ûÁÑ¶ÁÇπÂú®‰∫éËøô‰∏™Á∫øÁ®ãÁöÑÁä∂ÊÄÅÔºåÂ¶ÇÊûú‰ªñÊé•Êî∂Ê∂àÊÅØÂêéÔºåËá™Â∑±ÂéªÂøôÁùÄÂ§ÑÁêÜÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂøÖÈ°ªÁ≠â‰Ω†Â§ÑÁêÜÂÆå I/O Êìç‰ΩúÁÑ∂Âêé‰∏ÄÁõ¥Á≠âÁùÄÔºåËøô‰∏™Â∞±ËÇØÂÆöÊòØÈòªÂ°û‰∫Ü„ÄÇÂú® NIO ‰∏≠ÊØ´Êó†ÁñëÈóÆÊòØÈùûÈòªÂ°ûÁöÑÔºåÂõ†‰∏∫ Selector Âú®Êé•Êî∂Âà∞ I/O ËØªÂÜôÂáÜÂ§áÂ•Ω‰∫Ü‰πãÂêéÔºå‰ºöËµ∑‰∏Ä‰∏™Á∫øÁ®ãÂéªÂ§ÑÁêÜ I/O ËØªÂÜôÔºå‰∏ç‰ºöËÆ©Ëøô‰∏™ Selector ÂéªÂ§ÑÁêÜÔºåÂÖ∂‰ªñI/O ËØ∑Ê±Ç‰πüÂ∞±‰∏çÁî®ÈòªÂ°ûÁ≠âÂæÖ„ÄÇ Âú®Áü•‰πé‰∏äÔºåÊúâ‰∫∫Ëøô‰πàÊÄªÁªìÔºö ÂêåÊ≠•ÂíåÂºÇÊ≠•ËØ¥ÁöÑÊòØÊ∂àÊÅØÁöÑÈÄöÁü•Êú∫Âà∂„ÄåÂêåÊ≠•Â∞±ÊòØÈúÄË¶ÅÁ∫øÁ®ã‰∏ªÂä®ËØ¢ÈóÆÔºåÂºÇÊ≠•Â∞±ÊòØÂéãÊ†π‰∏çÈúÄË¶ÅÁ∫øÁ®ã‰∏ªÂä®ËØ¢ÈóÆ„ÄçÔºåÈòªÂ°ûÂíåÈùûÈòªÂ°ûËØ¥ÁöÑÊòØÁ∫øÁ®ãÁöÑÁä∂ÊÄÅ„ÄÇ ÊàëËÆ§‰∏∫ÂãâÂº∫ÂêéÂçäÂè• okayÔºåÂâçÂçäÂè•Â§öÂ∞ëÊúâ‰∫õÂãâÂº∫„Äå‰∏çËøá‰πüËÉΩËØ¥ÂæóËøáÂéªÔºå‰∏ãÈù¢Êàë‰ºöËß£Èáä„ÄçÔºå‰Ω†Âú® node js ‰∏≠Ë∞àÂêåÊ≠•ÂºÇÊ≠•ÁöÑÊó∂ÂÄôÊúâÂéªËÄÉËôë‰ªÄ‰πàÊ∂àÊÅØÁöÑÈÄöÁü•Êú∫Âà∂ÂêóÔºü‰∏çËøáËØùËØ¥ÂõûÊù•Ôºå‰∏ªÂä®ËØ¢ÈóÆÁöÑ‰ª£‰ª∑Â∞±ÊòØÂæó‰∏Ä‰∏™‰∏Ä‰∏™ËØ¢ÈóÆÔºåÊâÄ‰ª•ËÇØÂÆöÂêåÊ≠•Ôºå‰∏çÈúÄË¶ÅÂéªËØ¢ÈóÆÔºåÊØè‰∏™ I/O ËØ∑Ê±ÇËá™Â∑±ÂéªËøõË°åÂ§ÑÁêÜÔºåÈÇ£Ëøô‰∏™‰πüÂ∞±‰∏çÂ≠òÂú®‰∏Ä‰∏™‰∏Ä‰∏™Â§ÑÁêÜËØ∑Ê±ÇÁöÑÈóÆÈ¢ò‰∫ÜÔºåÂøÖÁÑ∂ÊòØÂºÇÊ≠•‰∫Ü„ÄÇÊâÄ‰ª•ÊàëËßâÂæóÔºåÂêåÊ≠•ËøòÊòØÂºÇÊ≠•ÔºåÁúãÁöÑÊòØ I/O ËØ∑Ê±ÇÊù•‰∫ÜÊòØ‰∏çÊòØÊåâÂ∫èÂéªÂ§ÑÁêÜÁöÑÔºåËøôÈáåËÇØÂÆöÊòØÊåâÂ∫èÂ§ÑÁêÜÔºåÂõ†‰∏∫ÈÉΩÊòØÁî± Selector ÂéªÊé•Êî∂ÔºåÊâÄ‰ª•ÊòØÂêåÊ≠•„ÄÇÈòªÂ°ûËøòÊòØÈùûÈòªÂ°ûÔºåÂ∞±ÁúãËøô‰∏™ I/O ËØ∑Ê±ÇÊúâÊ≤°ÊúâÂØºËá¥Á∫øÁ®ãÈòªÂ°û‰∫ÜÔºåÂÆûÈôÖ‰∏äÊòØÊ≤°ÊúâÔºåÂõ†‰∏∫‰ªñÊâæ‰∫Ü worker Á∫øÁ®ãÂéªÂ§ÑÁêÜ‰∫ÜÔºåÊâÄ‰ª•ËøôÈáåÊòØÈùûÈòªÂ°û„ÄÇ ÂÜçË°•ÂÖÖ‰∏§Âè•ÂêßÔºåÂêåÊ≠•ÂºÇÊ≠•ÊàëËÆ§‰∏∫ÂßãÁªàÊòØË¶Å‰ª•È°∫Â∫è‰∏∫‰∏≠ÂøÉË¶Å‰πâÁöÑÔºånode js‰∏≠Êàë‰ª¨Ë∞àÂêåÊ≠•ÂºÇÊ≠•ÔºåÂßãÁªàÈÉΩÊòØÁúãÊâßË°åËØ≠Âè•ÁöÑÈ°∫Â∫èÔºåËøôÈáåÊàëËßâÂæó‰πüÊòØ‰∏ÄÊ†∑„ÄÇÂú®ËøôÈáåÂè™‰∏çËøáÊòØÊ∂àÊÅØÁöÑÈÄöÁü•Êú∫Âà∂ÁöÑ‰∏çÂêåÂ∏¶Êù•‰∫ÜÈ°∫Â∫èÁöÑÂèòÂåñÔºåÊâÄ‰ª•ÊàëËßâÂæóÂõ†ÊûúÂÖ≥Á≥ªËøòÊòØË¶ÅÁ°ÆÂÆöÂ•ΩÔºåÂêåÊ≠•ÂºÇÊ≠•ÁöÑÊ¶ÇÂøµÊàëËÆ§‰∏∫‰∏çÂèØËÉΩÁî®Ê∂àÊÅØÈÄöÁü•Êú∫Âà∂Êù•Ë°°ÈáèÔºåÊàë‰ª¨Âú®ËÆ≤ÂêåÊ≠•‰ª£Á†ÅÂùó‰∏≠ÊúâÊèêÂà∞Ëøá‰ªÄ‰πàÈÄöÁü•Êú∫Âà∂ÁöÑÊ¶ÇÂøµÂêóÔºüÊàë‰ª¨ÂßãÁªàÈÉΩÊòØÂú®Âº∫Ë∞ÉÊâßË°åÁöÑÈ°∫Â∫èÔºå‰ª•Ê≠§Êù•Ë°°ÈáèÂêåÊ≠•ÂºÇÊ≠•„ÄÇ ÁªºÂêàÊù•ËØ¥ÔºåNIO Â∞±ÊòØÂêåÊ≠•ÈùûÈòªÂ°ûÁöÑ„ÄÇ Ëá≥‰∫é AIO „Äåjdk1.7 ÂºïÂÖ•„ÄçÈááÁî®ÁöÑÊòØÂºÇÊ≠•ÈùûÈòªÂ°ûÔºåÈÄöËøáÊàë‰∏äÈù¢ÁöÑÊñπÂºèÂéªÁêÜËß£Â∞±ÂæàÂ•ΩÁêÜËß£‰∫Ü„ÄÇÈááÁî®ÁöÑÊòØÂõûË∞ÉÊú∫Âà∂ÔºåI/O ËØ∑Ê±ÇÊù•‰∫ÜÔºåÊàë‰ª¨Ê†πÊú¨‰∏çÈúÄË¶ÅÂéªÁÆ°Ôºå‰πüÂ∞±‰∏çÂ≠òÂú®ËØ∑Ê±ÇÊåâÂ∫èÂ§ÑÁêÜÁöÑÊÉÖÂÜµ‰∫ÜÔºåÁõ¥Êé•Áî±Êìç‰ΩúÁ≥ªÁªüËá™Â∑±Â§ÑÁêÜÔºåÁ≠âÂà∞Êï∞ÊçÆokay‰∫ÜÔºåÁõ¥Êé•ÈÄöÁü•ÊàëÂ∞±Â•Ω‰∫ÜÔºåÂÖ®Á®ãÈÉΩÊòØÂºÇÊ≠•ÈùûÈòªÂ°ûÁöÑÁä∂ÊÄÅ„ÄÇ ÂΩìÁÑ∂‰∫Ü AIO Ëøô‰πàÂ•Ω‰∏∫Âï•Êàë‰ª¨ËøòÂú®Áî® NIO Âë¢ÔºüÊàëËßâÂæóÊúâÂá†‰∏™ÂéüÂõ†ÂêßÔºå‰∏Ä‰∏™ÊòØËøô‰∏™ AIO ÊîØÊåÅÁöÑÂ§™Â∞ë‰∫ÜÔºåËøòÊ≤°ÂÆåÂÖ®ÂèëÂ±ïËµ∑Êù•Ôºå‰∏Ä‰∏™ÊòØ‰∏çÊîØÊåÅ udpÔºåÂè™ÊîØÊåÅ tcp„ÄÇ NIOÂ∫ïÂ±Ç‰πãÂ•áÂ¶ôÁöÑ‰∏âÂÖÑÂºüÊàëÊì¶ÔºåÂ∞±‰∏ÄÁÇπÂçä‰∫Ü‚Ä¶ÊòéÂ§©Êé•ÁùÄÂÜôÔºåÈÄèÈú≤‰∏ãÔºåÂ∞±ÊòØ select/poll/epoll„ÄÇ ÂõûÊù•‰∫ÜÔºåÂõûÊù•‰∫ÜÔºåÊé•ÁùÄÊò®Â§©ÁöÑÂΩ©ËõãÔºåÊàë‰ª¨‰ªäÂ§©Êù•ËÆ≤‰∏ÄËÆ≤ select/poll/epoll„ÄÇ ÂÖ∂ÂÆûËøô‰∏™ select/poll/epoll Âíå Èõ∂Êã∑Ë¥ùÊ≤°ÊúâÂÖ≥Á≥ªÔºå‰ΩÜÊòØ Ë∑ü NIO Á¥ßÂØÜÁõ∏ËøûÔºåÊàë‰ª¨Áü•ÈÅìÔºåNIO ‰∏≠ÊÄªÂÖ±Â∞±ÊòØ‰ΩøÁî®‰∫Ü‰∏§‰∏™ÊäÄÊúØÔºöI/O Â§çÁî®ÊäÄÊúØ„ÄåÁΩëÁªú I/O„ÄçÂíåÈõ∂Êã∑Ë¥ùÊäÄÊúØ„ÄåÊñá‰ª∂ I/O„ÄçÔºåÊàëÂú®‰∏äÈù¢ÂÖ∂ÂÆû‰πüÊúâËÆ≤ÔºåNIO ‰∏≠ÊúÄÈáçË¶ÅÁöÑÊäÄÊúØÂ∞±ÊòØ I/O Â§çÁî®ÊäÄÊúØÔºåÈÇ£ÂÆÉÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÂë¢ÔºüÊ≤°ÈîôÔºåÂ∫ïÂ±ÇÂ∞±ÊòØ select/poll/epoll„ÄÇ Ëøô‰∏âÂÖÑÂºüÊòØÂï• ÂèÇËÄÉÔºö https://zhuanlan.zhihu.com/p/95872805 https://mp.weixin.qq.com/s?__biz=MzUyNzgyNzAwNg==&amp;mid=2247483925&amp;idx=1&amp;sn=1ac3e863594745c7466b0e88a688b203&amp;scene=21#wechat_redirect select„ÄÅpoll„ÄÅepollÈÉΩÊòØI/OÂ§öË∑ØÂ§çÁî®ÁöÑÊú∫Âà∂„ÄÇI/OÂ§öË∑ØÂ§çÁî®Â∞±ÊòØÈÄöËøá‰∏ÄÁßçÊú∫Âà∂Ôºå‰∏Ä‰∏™ËøõÁ®ãÂèØ‰ª•ÁõëËßÜÂ§ö‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶Ôºå‰∏ÄÊó¶Êüê‰∏™ÊèèËø∞Á¨¶Â∞±Áª™ÔºàËØªÂ∞±Áª™ÊàñÂÜôÂ∞±Áª™ÔºâÔºåËÉΩÂ§üÈÄöÁü•Á®ãÂ∫èËøõË°åÁõ∏Â∫îÁöÑËØªÂÜôÊìç‰Ωú „ÄÇ ‰ΩÜÊòØÔºåselectÔºåpollÔºåepollÊú¨Ë¥®ËøòÊòØÂêåÊ≠•I/OÔºàI/OÂ§öË∑ØÂ§çÁî®Êú¨Ë∫´Â∞±ÊòØÂêåÊ≠•IOÔºâÁöÑËåÉÁï¥ÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ÈÉΩÈúÄË¶ÅÂú®ËØªÂÜô‰∫ã‰ª∂Â∞±Áª™ÂêéÁ∫øÁ®ãËá™Â∑±ËøõË°åËØªÂÜôÔºåËØªÂÜôÁöÑËøáÁ®ãÈòªÂ°ûÁöÑ„ÄÇËÄåÂºÇÊ≠•I/OÁöÑÂÆûÁé∞ÊòØÁ≥ªÁªü‰ºöÊääË¥üË¥£ÊääÊï∞ÊçÆ‰ªéÂÜÖÊ†∏Á©∫Èó¥Êã∑Ë¥ùÂà∞Áî®Êà∑Á©∫Èó¥ÔºåÊó†ÈúÄÁ∫øÁ®ãËá™Â∑±ÂÜçËøõË°åÈòªÂ°ûÁöÑËØªÂÜôÔºåÂÜÖÊ†∏Â∑≤ÁªèÂáÜÂ§áÂÆåÊàê„ÄÇ TipÔºölinux‰∏≠ socket ÁöÑ fd ÊòØ‰ªÄ‰πàÔºü Ëøô‰∏™FDÂ∞±ÊòØFile Discriptor ‰∏≠ÊñáÁøªËØë‰∏∫Êñá‰ª∂ÊèèËø∞Á¨¶„ÄÇ SocketËµ∑Ê∫ê‰∫éunixÔºåUnix‰∏≠ÊääÊâÄÊúâÁöÑËµÑÊ∫êÈÉΩÁúã‰ΩúÊòØÊñá‰ª∂ÔºåÂåÖÊã¨ËÆæÂ§áÔºåÊØîÂ¶ÇÁΩëÂç°„ÄÅÊâìÂç∞Êú∫Á≠âÁ≠âÔºåÊâÄ‰ª•ÔºåÈíàÂØπSocketÈÄö‰ø°ÔºåÊàë‰ª¨Âú®‰ΩøÁî®ÁΩëÂç°ÔºåÁΩëÂç°ÂèàÂ§ÑÁêÜNÂ§öÈìæÊé•ÔºåÊØè‰∏™ÈìæÊé•ÈÉΩÈúÄË¶Å‰∏Ä‰∏™ÂØπÂ∫îÁöÑÊèèËø∞Ôºå‰πüÂ∞±ÊòØÊÉü‰∏ÄÁöÑIDÔºåÂç≥ÂØπÂ∫îÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶„ÄÇÁÆÄÂçïÁÇπËØ¥‰πüÂ∞±ÊòØ int fd = socket(AF_INET,SOCK_STREAM, 0); ÂáΩÊï∞socket()ËøîÂõûÁöÑÂ∞±ÊòØËøô‰∏™ÊèèËø∞Á¨¶„ÄÇÂú®‰º†Ëæì‰∏≠Êàë‰ª¨ÈÉΩË¶Å‰ΩøÁî®Ëøô‰∏™ÊÉü‰∏ÄÁöÑIDÊù•Á°ÆÂÆöË¶ÅÂæÄÂì™‰∏™ÈìæÊé•‰∏ä‰º†ËæìÊï∞ÊçÆ„ÄÇ SelectAPIÁÆÄ‰ªãlinuxÁ≥ªÁªü‰∏≠/usr/include/sys/select.hÊñá‰ª∂‰∏≠ÂØπselectÊñπÊ≥ïÁöÑÂÆö‰πâÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526/* fd_set for select and pselect. */typedef struct &#123; /* XPG4.2 requires this member name. Otherwise avoid the name from the global namespace. */ #ifdef __USE_XOPEN __fd_mask fds_bits[__FD_SETSIZE / __NFDBITS]; # define __FDS_BITS(set) ((set)-&gt;fds_bits) #else __fd_mask __fds_bits[__FD_SETSIZE / __NFDBITS]; # define __FDS_BITS(set) ((set)-&gt;__fds_bits) #endif &#125; fd_set;/* Check the first NFDS descriptors each in READFDS (if not NULL) for read readiness, in WRITEFDS (if not NULL) for write readiness, and in EXCEPTFDS (if not NULL) for exceptional conditions. If TIMEOUT is not NULL, time out after waiting the interval specified therein. Returns the number of ready descriptors, or -1 for errors. This function is a cancellation point and therefore not marked with __THROW. */extern int select (int __nfds, fd_set *__restrict __readfds, fd_set *__restrict __writefds, fd_set *__restrict __exceptfds, struct timeval *__restrict __timeout); int __nfdsÊòØfd_set‰∏≠ÊúÄÂ§ßÁöÑÊèèËø∞Á¨¶+1ÔºåÂΩìË∞ÉÁî®selectÊó∂ÔºåÂÜÖÊ†∏ÊÄÅ‰ºöÂà§Êñ≠fd_set‰∏≠ÊèèËø∞Á¨¶ÊòØÂê¶Â∞±Áª™Ôºå__nfdsÂëäËØâÂÜÖÊ†∏ÊúÄÂ§öÂà§Êñ≠Âà∞Âì™‰∏Ä‰∏™ÊèèËø∞Á¨¶„ÄÇ readfds„ÄÅwritefds„ÄÅ__exceptfdsÈÉΩÊòØÁªìÊûÑ‰Ωìfd_setÔºåfd_setÂèØ‰ª•Áúã‰ΩúÊòØ‰∏Ä‰∏™ÊèèËø∞Á¨¶ÁöÑÈõÜÂêà„ÄÇ selectÂáΩÊï∞‰∏≠Â≠òÂú®‰∏â‰∏™fd_setÈõÜÂêàÔºåÂàÜÂà´‰ª£Ë°®‰∏âÁßç‰∫ã‰ª∂ÔºåreadfdsË°®Á§∫ËØªÊèèËø∞Á¨¶ÈõÜÂêàÔºåwritefdsË°®Á§∫ËØªÊèèËø∞Á¨¶ÈõÜÂêàÔºåexceptfdsË°®Á§∫ÂºÇÂ∏∏ÊèèËø∞Á¨¶ÈõÜÂêà„ÄÇÂΩìÂØπÂ∫îÁöÑfd_set = NULLÊó∂ÔºåË°®Á§∫‰∏çÁõëÂê¨ËØ•Á±ªÊèèËø∞Á¨¶„ÄÇ timeval __timeoutÁî®Êù•ÊåáÂÆöselectÁöÑÂ∑•‰ΩúÊñπÂºèÔºåÂç≥ÂΩìÊñá‰ª∂ÊèèËø∞Á¨¶Â∞öÊú™Â∞±Áª™Êó∂ÔºåselectÊòØÊ∞∏ËøúÁ≠â‰∏ãÂéªÔºåËøòÊòØÁ≠âÂæÖ‰∏ÄÂÆöÁöÑÊó∂Èó¥ÔºåÊàñËÄÖÊòØÁõ¥Êé•ËøîÂõû ÂáΩÊï∞ËøîÂõûÂÄºintË°®Á§∫Ôºö Â∞±Áª™ÊèèËø∞Á¨¶ÁöÑÊï∞ÈáèÔºåÂ¶ÇÊûú‰∏∫-1Ë°®Á§∫‰∫ßÁîüÈîôËØØ „ÄÇ ËøêË°åÊú∫Âà∂Select‰ºöÂ∞ÜÂÖ®ÈÉ®fd_set„ÄéÊñá‰ª∂ÊèèËø∞Á¨¶„Äè‰ªéÁî®Êà∑Á©∫Èó¥Êã∑Ë¥ùÂà∞ÂÜÖÊ†∏Á©∫Èó¥ÔºåÂπ∂Ê≥®ÂÜåÂõûË∞ÉÂáΩÊï∞Ôºå Âú®ÂÜÖÊ†∏ÊÄÅÁ©∫Èó¥Êù•Âà§Êñ≠ÊØè‰∏™ËØ∑Ê±ÇÊòØÂê¶ÂáÜÂ§áÂ•ΩÊï∞ÊçÆ „ÄÇselectÂú®Ê≤°ÊúâÊü•ËØ¢Âà∞ÊúâÊñá‰ª∂ÊèèËø∞Á¨¶Â∞±Áª™ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ∞Ü‰∏ÄÁõ¥ÈòªÂ°ûÔºàselectÊòØ‰∏Ä‰∏™ÈòªÂ°ûÂáΩÊï∞Ôºâ„ÄÇÂ¶ÇÊûúÊúâ‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ÊèèËø∞Á¨¶Â∞±Áª™Ôºåselect ‰ºöÂéªËΩÆËØ¢Êï¥‰∏™ fd_set„ÄåÊó†Â∑ÆÂà´ËΩÆËØ¢„Äç„ÄÇ SelectÁöÑÁº∫Èô∑ ÊØèÊ¨°Ë∞ÉÁî®selectÔºåÈÉΩÈúÄË¶ÅÊääfdÈõÜÂêà‰ªéÁî®Êà∑ÊÄÅÊã∑Ë¥ùÂà∞ÂÜÖÊ†∏ÊÄÅÔºåfdË∂äÂ§öÂºÄÈîÄÂàôË∂äÂ§ßÔºõ ÊØèÊ¨°Ë∞ÉÁî®selectÔºåÈÉΩÈúÄË¶ÅÂú®ÂÜÖÊ†∏ÈÅçÂéÜ‰º†ÈÄíËøõÊù•ÁöÑÊâÄÊúâfdÔºåËøô‰∏™ÂºÄÈîÄÂú®fdÂæàÂ§öÊó∂‰πüÂæàÂ§ß selectÊîØÊåÅÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶Êï∞ÈáèÊúâÈôêÔºåÈªòËÆ§ÊòØ1024„ÄÇÂèÇËßÅ/usr/include/linux/posix_types.h‰∏≠ÁöÑÂÆö‰πâÔºö 1# define __FD_SETSIZE 1024 pollAPIÁÆÄ‰ªãlinuxÁ≥ªÁªü‰∏≠/usr/include/sys/poll.hÊñá‰ª∂‰∏≠ÂØπpollÊñπÊ≥ïÁöÑÂÆö‰πâÂ¶Ç‰∏ãÔºö 1234567891011121314151617/* Data structure describing a polling request. */struct pollfd &#123; int fd; /* File descriptor to poll. */ short int events; /* Types of events poller cares about. */ short int revents; /* Types of events that actually occurred. */ &#125;;/* Poll the file descriptors described by the NFDS structures starting at FDS. If TIMEOUT is nonzero and not -1, allow TIMEOUT milliseconds for an event to occur; if TIMEOUT is -1, block until an event occurs. Returns the number of file descriptors with events, zero if timed out, or -1 for errors. This function is a cancellation point and therefore not marked with __THROW. */extern int poll (struct pollfd *__fds, nfds_t __nfds, int __timeout); __fdsÂèÇÊï∞Êó∂PollÊú∫Âà∂‰∏≠ÂÆö‰πâÁöÑÁªìÊûÑ‰ΩìpollfdÔºåÁî®Êù•ÊåáÂÆö‰∏Ä‰∏™ÈúÄË¶ÅÁõëÂê¨ÁöÑÊèèËø∞Á¨¶„ÄÇÁªìÊûÑ‰Ωì‰∏≠fd‰∏∫ÈúÄË¶ÅÁõëÂê¨ÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶Ôºåevents‰∏∫ÈúÄË¶ÅÁõëÂê¨ÁöÑ‰∫ã‰ª∂Á±ªÂûãÔºåËÄårevents‰∏∫ÁªèËøápollË∞ÉÁî®‰πãÂêéËøîÂõûÁöÑ‰∫ã‰ª∂Á±ªÂûãÔºåÂú®Ë∞ÉÁî®pollÁöÑÊó∂ÂÄôÔºå‰∏ÄËà¨‰ºö‰º†ÂÖ•‰∏Ä‰∏™pollfdÁöÑÁªìÊûÑ‰ΩìÊï∞ÁªÑÔºåÊï∞ÁªÑÁöÑÂÖÉÁ¥†‰∏™Êï∞Ë°®Á§∫ÁõëÊéßÁöÑÊèèËø∞Á¨¶‰∏™Êï∞„ÄÇ __nfdsÂíå__timeoutÂèÇÊï∞ÈÉΩÂíåSelectÊú∫Âà∂‰∏≠ÁöÑÂêåÂêçÂèÇÊï∞Âê´‰πâÁ±ª‰ºº ËøêË°åÊú∫Âà∂pollÁöÑÂÆûÁé∞ÂíåselectÈùûÂ∏∏Áõ∏‰ººÔºåÂè™ÊòØÊèèËø∞fdÈõÜÂêàÁöÑÊñπÂºè‰∏çÂêåÔºåpoll‰ΩøÁî®pollfd ÁªìÊûÑ‰ª£ÊõøselectÁöÑfd_setÔºàÁΩë‰∏äËÆ≤ÔºöÁ±ª‰ºº‰∫é‰ΩçÂõæÔºâÁªìÊûÑÔºåÂÖ∂‰ªñÁöÑÊú¨Ë¥®‰∏äÈÉΩÂ∑Æ‰∏çÂ§ö„ÄÇÊâÄ‰ª•PollÊú∫Âà∂Á™ÅÁ†¥‰∫ÜSelectÊú∫Âà∂‰∏≠ÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶Êï∞ÈáèÊúÄÂ§ß‰∏∫1024ÁöÑÈôêÂà∂„ÄÇ PollÁöÑÁº∫Èô∑PollÊú∫Âà∂Áõ∏ËæÉ‰∫éSelectÊú∫Âà∂‰∏≠ÔºåËß£ÂÜ≥‰∫ÜÊñá‰ª∂ÊèèËø∞Á¨¶Êï∞Èáè‰∏äÈôê‰∏∫1024ÁöÑÁº∫Èô∑„ÄÇ‰ΩÜÂè¶Â§ñ‰∏§ÁÇπÁº∫Èô∑‰æùÁÑ∂Â≠òÂú®Ôºö ÊØèÊ¨°Ë∞ÉÁî®pollÔºåÈÉΩÈúÄË¶ÅÊääfdÈõÜÂêà‰ªéÁî®Êà∑ÊÄÅÊã∑Ë¥ùÂà∞ÂÜÖÊ†∏ÊÄÅÔºåfdË∂äÂ§öÂºÄÈîÄÂàôË∂äÂ§ßÔºõ ÊØèÊ¨°Ë∞ÉÁî®pollÔºåÈÉΩÈúÄË¶ÅÂú®ÂÜÖÊ†∏ÈÅçÂéÜ‰º†ÈÄíËøõÊù•ÁöÑÊâÄÊúâfdÔºåËøô‰∏™ÂºÄÈîÄÂú®fdÂæàÂ§öÊó∂‰πüÂæàÂ§ß epollEpollÂú®Linux2.6ÂÜÖÊ†∏Ê≠£ÂºèÊèêÂá∫ÔºåÊòØÂü∫‰∫é‰∫ã‰ª∂È©±Âä®ÁöÑI/OÊñπÂºè„ÄÇÁõ∏ÂØπ‰∫éselectÊù•ËØ¥ÔºåepollÊ≤°ÊúâÊèèËø∞Á¨¶‰∏™Êï∞ÈôêÂà∂Ôºõ‰ΩøÁî®‰∏Ä‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÁÆ°ÁêÜÂ§ö‰∏™ÊèèËø∞Á¨¶ÔºåÂ∞ÜÁî®Êà∑ÂÖ≥ÂøÉÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶ÁöÑ‰∫ã‰ª∂Â≠òÊîæÂà∞ÂÜÖÊ†∏ÁöÑ‰∏Ä‰∏™‰∫ã‰ª∂Ë°®‰∏≠ÔºåÈÄöËøáÂÜÖÂ≠òÊò†Â∞ÑÔºå‰ΩøÂÖ∂Âú®Áî®Êà∑Á©∫Èó¥‰πüÂèØÁõ¥Êé•ËÆøÈóÆÔºåÁúÅÂéª‰∫ÜÊã∑Ë¥ùÂ∏¶Êù•ÁöÑËµÑÊ∫êÊ∂àËÄó„ÄÇ APIÁÆÄ‰ªãlinuxÁ≥ªÁªü‰∏≠/usr/include/sys/epoll.hÊñá‰ª∂‰∏≠ÊúâÂ¶Ç‰∏ãÊñπÊ≥ïÔºö 123456789101112131415161718192021222324252627/* Creates an epoll instance. Returns an fd for the new instance. The "size" parameter is a hint specifying the number of file descriptors to be associated with the new instance. The fd returned by epoll_create() should be closed with close(). */extern int epoll_create (int __size) __THROW;/* Manipulate an epoll instance "epfd". Returns 0 in case of success, -1 in case of error ( the "errno" variable will contain the specific error code ) The "op" parameter is one of the EPOLL_CTL_* constants defined above. The "fd" parameter is the target of the operation. The "event" parameter describes which events the caller is interested in and any associated user data. */extern int epoll_ctl (int __epfd, int __op, int __fd, struct epoll_event *__event) __THROW;/* Wait for events on an epoll instance "epfd". Returns the number of triggered events returned in "events" buffer. Or -1 in case of error with the "errno" variable set to the specific error code. The "events" parameter is a buffer that will contain triggered events. The "maxevents" is the maximum number of events to be returned ( usually size of "events" ). The "timeout" parameter specifies the maximum wait time in milliseconds (-1 == infinite). This function is a cancellation point and therefore not marked with __THROW. */extern int epoll_wait (int __epfd, struct epoll_event *__events, int __maxevents, int __timeout); epoll_createÂáΩÊï∞ÔºöÂàõÂª∫‰∏Ä‰∏™epollÂÆû‰æãÂπ∂ËøîÂõûÔºåËØ•ÂÆû‰æãÂèØ‰ª•Áî®‰∫éÁõëÊéß__size‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ epoll_ctlÂáΩÊï∞ÔºöÂêëepoll‰∏≠Ê≥®ÂÜå‰∫ã‰ª∂ÔºåËØ•ÂáΩÊï∞Â¶ÇÊûúË∞ÉÁî®ÊàêÂäüËøîÂõû0ÔºåÂê¶ÂàôËøîÂõû-1„ÄÇÁî®Á∫¢ÈªëÊ†ëÊù•ÁÆ°ÁêÜËøô‰∫õ‰∫ã‰ª∂ÔºåÊØèÊñ∞Â¢û‰∏Ä‰∏™‰∫ã‰ª∂ÔºåÂ∞±Êñ∞Â¢û‰∏Ä‰∏™Á∫¢ÈªëÊ†ëËäÇÁÇπ„ÄÇ __epfd‰∏∫epoll_createËøîÂõûÁöÑepollÂÆû‰æã __opË°®Á§∫Ë¶ÅËøõË°åÁöÑÊìç‰Ωú __fd‰∏∫Ë¶ÅËøõË°åÁõëÊéßÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶ __eventË¶ÅÁõëÊéßÁöÑ‰∫ã‰ª∂ epoll_waitÂáΩÊï∞ÔºöÁ±ª‰ºº‰∏éselectÊú∫Âà∂‰∏≠ÁöÑselectÂáΩÊï∞„ÄÅpollÊú∫Âà∂‰∏≠ÁöÑpollÂáΩÊï∞ÔºåÁ≠âÂæÖÂÜÖÊ†∏ËøîÂõûÁõëÂê¨ÊèèËø∞Á¨¶ÁöÑ‰∫ã‰ª∂‰∫ßÁîü„ÄÇËØ•ÂáΩÊï∞ËøîÂõûÂ∑≤ÁªèÂ∞±Áª™ÁöÑ‰∫ã‰ª∂ÁöÑÊï∞ÈáèÔºåÂ¶ÇÊûú‰∏∫-1Ë°®Á§∫Âá∫Èîô„ÄÇ __epfd‰∏∫epoll_createËøîÂõûÁöÑepollÂÆû‰æã __eventsÊï∞ÁªÑ‰∏∫ epoll_waitË¶ÅËøîÂõûÁöÑÂ∑≤Áªè‰∫ßÁîüÁöÑ‰∫ã‰ª∂ÈõÜÂêà maxevents‰∏∫Â∏åÊúõËøîÂõûÁöÑÊúÄÂ§ßÁöÑ‰∫ã‰ª∂Êï∞ÈáèÔºàÈÄöÂ∏∏‰∏∫eventsÁöÑÂ§ßÂ∞èÔºâ __timeoutÂíåselect„ÄÅpollÊú∫Âà∂‰∏≠ÁöÑÂêåÂêçÂèÇÊï∞Âê´‰πâÁõ∏Âêå ËøêË°åÊú∫Âà∂ epoll Â∞ÜÁ≠âÂæÖÈòüÂàóÂíåÂ∞±Áª™ÈòüÂàóÂàÜÂºÄÔºåÁ∫¢ÈªëÊ†ëÂ≠òÂÇ®Á≠âÂæÖÈòüÂàó‰∏≠ÁöÑËøõÁ®ãÔºåËÄå‰∏ÄÊó¶ I/O Â∞±Áª™Â∞±Â∞ÜÁ∫¢ÈªëÊ†ëËäÇÁÇπËΩ¨ÁßªÂà∞ÈìæË°®ÔºåÊâÄ‰ª•Âè™Ë¶ÅÁúãÂà∞ÈìæË°®‰∏≠ÁöÑËäÇÁÇπÔºåÂ∞±ËÉΩÁü•ÈÅìÂì™‰∫õ‰∫ã‰ª∂ÂáÜÂ§áÂ•Ω‰∫Ü„ÄÇ epollÊìç‰ΩúËøáÁ®ãÈúÄË¶Å‰∏äËø∞‰∏â‰∏™ÂáΩÊï∞Ôºå‰πüÊ≠£ÊòØÈÄöËøá‰∏â‰∏™ÂáΩÊï∞ÂÆåÊàêSelectÊú∫Âà∂‰∏≠‰∏Ä‰∏™ÂáΩÊï∞ÂÆåÊàêÁöÑ‰∫ãÊÉÖÔºåËß£ÂÜ≥‰∫ÜSelectÊú∫Âà∂ÁöÑ‰∏âÂ§ßÁº∫Èô∑„ÄÇepollÁöÑÂ∑•‰ΩúÊú∫Âà∂Êõ¥‰∏∫Â§çÊùÇÔºåÊàë‰ª¨Â∞±Ëß£Èáä‰∏Ä‰∏ãÔºåÂÆÉÊòØÂ¶Ç‰ΩïËß£ÂÜ≥SelectÊú∫Âà∂ÁöÑ‰∏âÂ§ßÁº∫Èô∑ÁöÑ„ÄÇ ÂØπ‰∫éÁ¨¨‰∏Ä‰∏™Áº∫ÁÇπÔºåepollÁöÑËß£ÂÜ≥ÊñπÊ°àÊòØÔºöÂÆÉÁöÑfdÊòØÂÖ±‰∫´Âú®Áî®Êà∑ÊÄÅÂíåÂÜÖÊ†∏ÊÄÅ‰πãÈó¥ÁöÑÔºåÊâÄ‰ª•ÂèØ‰ª•‰∏çÂøÖËøõË°å‰ªéÁî®Êà∑ÊÄÅÂà∞ÂÜÖÊ†∏ÊÄÅÁöÑ‰∏Ä‰∏™Êã∑Ë¥ùÔºåÂ§ßÂ§ßËäÇÁ∫¶Á≥ªÁªüËµÑÊ∫ê„ÄÇËá≥‰∫éÂ¶Ç‰ΩïÂÅöÂà∞Áî®Êà∑ÊÄÅÂíåÂÜÖÊ†∏ÊÄÅÔºåÂ§ßÂÆ∂ÂèØ‰ª•Êü•‰∏Ä‰∏ã‚Äúmmap‚ÄùÔºåÂÆÉÊòØ‰∏ÄÁßçÂÜÖÂ≠òÊò†Â∞ÑÁöÑÊñπÊ≥ï„ÄÇ ÂØπ‰∫éÁ¨¨‰∫å‰∏™Áº∫ÁÇπÔºåepollÁöÑËß£ÂÜ≥ÊñπÊ°à‰∏çÂÉèselectÊàñpoll‰∏ÄÊ†∑ÊØèÊ¨°ÈÉΩÊääÂΩìÂâçÁ∫øÁ®ãËΩÆÊµÅÂä†ÂÖ•fdÂØπÂ∫îÁöÑËÆæÂ§áÁ≠âÂæÖÈòüÂàó‰∏≠ÔºåËÄåÂè™Âú®epoll_ctlÊó∂ÊääÂΩìÂâçÁ∫øÁ®ãÊåÇ‰∏ÄÈÅçÔºàËøô‰∏ÄÈÅçÂøÖ‰∏çÂèØÂ∞ëÔºâÔºåÂπ∂‰∏∫ÊØè‰∏™fdÊåáÂÆö‰∏Ä‰∏™ÂõûË∞ÉÂáΩÊï∞„ÄÇÂΩìËÆæÂ§áÂ∞±Áª™ÔºåÂî§ÈÜíÁ≠âÂæÖÈòüÂàó‰∏äÁöÑÁ≠âÂæÖËÄÖÊó∂ÔºåÂ∞±‰ºöË∞ÉÁî®Ëøô‰∏™ÂõûË∞ÉÂáΩÊï∞ÔºåËÄåËøô‰∏™ÂõûË∞ÉÂáΩÊï∞‰ºöÊääÂ∞±Áª™ÁöÑfdÂä†ÂÖ•‰∏Ä‰∏™Â∞±Áª™ÈìæË°®„ÄÇÈÇ£‰πàÂΩìÊàë‰ª¨Ë∞ÉÁî®epoll_waitÊó∂Ôºåepoll_waitÂè™ÈúÄË¶ÅÊ£ÄÊü•ÈìæË°®‰∏≠ÊòØÂê¶ÊúâÂ≠òÂú®Â∞±Áª™ÁöÑfdÂç≥ÂèØÔºåÊïàÁéáÈùûÂ∏∏ÂèØËßÇ„ÄÇ ÂØπ‰∫éÁ¨¨‰∏â‰∏™Áº∫ÁÇπÔºåfdÊï∞ÈáèÁöÑÈôêÂà∂Ôºå‰πüÂè™ÊúâSelectÂ≠òÂú®ÔºåPollÂíåEpollÈÉΩ‰∏çÂ≠òÂú®„ÄÇÁî±‰∫éEpollÊú∫Âà∂‰∏≠Âè™ÂÖ≥ÂøÉÂ∞±Áª™ÁöÑfdÔºåÂÆÉÁõ∏ËæÉ‰∫éPollÈúÄË¶ÅÂÖ≥ÂøÉÊâÄÊúâfdÔºåÂú®ËøûÊé•ËæÉÂ§öÁöÑÂú∫ÊôØ‰∏ãÔºåÊïàÁéáÊõ¥È´ò„ÄÇÂú®1GBÂÜÖÂ≠òÁöÑÊú∫Âô®‰∏äÂ§ßÁ∫¶ÊòØ10‰∏áÂ∑¶Âè≥Ôºå‰∏ÄËà¨Êù•ËØ¥Ëøô‰∏™Êï∞ÁõÆÂíåÁ≥ªÁªüÂÜÖÂ≠òÂÖ≥Á≥ªÂæàÂ§ß„ÄÇ Â∑•‰ΩúÊ®°ÂºèÁõ∏ËæÉ‰∫éSelectÂíåPollÔºåEpollÂÜÖÈÉ®ËøòÂàÜ‰∏∫‰∏§ÁßçÂ∑•‰ΩúÊ®°ÂºèÔºö LTÊ∞¥Âπ≥Ëß¶ÂèëÔºàlevel triggerÔºâÂíåETËæπÁºòËß¶ÂèëÔºàedge triggerÔºâ„ÄÇ LTÊ®°ÂºèÔºö ÈªòËÆ§ÁöÑÂ∑•‰ΩúÊ®°ÂºèÔºåÂç≥ÂΩìepoll_waitÊ£ÄÊµãÂà∞ÊüêÊèèËø∞Á¨¶‰∫ã‰ª∂Â∞±Áª™Âπ∂ÈÄöÁü•Â∫îÁî®Á®ãÂ∫èÊó∂ÔºåÂ∫îÁî®Á®ãÂ∫èÂèØ‰ª•‰∏çÁ´ãÂç≥Â§ÑÁêÜËØ•‰∫ã‰ª∂Ôºõ‰∫ã‰ª∂‰ºöË¢´ÊîæÂõûÂà∞Â∞±Áª™ÈìæË°®‰∏≠Ôºå‰∏ãÊ¨°Ë∞ÉÁî®epoll_waitÊó∂Ôºå‰ºöÂÜçÊ¨°ÈÄöÁü•Ê≠§‰∫ã‰ª∂„ÄÇ ETÊ®°ÂºèÔºö ÂΩìepoll_waitÊ£ÄÊµãÂà∞ÊüêÊèèËø∞Á¨¶‰∫ã‰ª∂Â∞±Áª™Âπ∂ÈÄöÁü•Â∫îÁî®Á®ãÂ∫èÊó∂ÔºåÂ∫îÁî®Á®ãÂ∫èÂøÖÈ°ªÁ´ãÂç≥Â§ÑÁêÜËØ•‰∫ã‰ª∂„ÄÇÂ¶ÇÊûú‰∏çÂ§ÑÁêÜÔºå‰∏ãÊ¨°Ë∞ÉÁî®epoll_waitÊó∂Ôºå‰∏ç‰ºöÂÜçÊ¨°ÂìçÂ∫îÂπ∂ÈÄöÁü•Ê≠§‰∫ã‰ª∂„ÄÇ Áî±‰∫é‰∏äËø∞‰∏§ÁßçÂ∑•‰ΩúÊ®°ÂºèÁöÑÂå∫Âà´ÔºåLTÊ®°ÂºèÂêåÊó∂ÊîØÊåÅblockÂíåno-block socket‰∏§ÁßçÔºåËÄåETÊ®°Âºè‰∏ã‰ªÖÊîØÊåÅno-block socket„ÄÇÂç≥epollÂ∑•‰ΩúÂú®ETÊ®°ÂºèÁöÑÊó∂ÂÄôÔºåÂøÖÈ°ª‰ΩøÁî®ÈùûÈòªÂ°ûÂ•óÊé•Âè£Ôºå‰ª•ÈÅøÂÖçÁî±‰∫é‰∏Ä‰∏™fdÁöÑÈòªÂ°ûI/OÊìç‰ΩúÊääÂ§ö‰∏™Â§ÑÁêÜÂÖ∂‰ªñÊñá‰ª∂ÊèèËø∞Á¨¶ÁöÑ‰ªªÂä°È•øÊ≠ª„ÄÇETÊ®°ÂºèÂú®ÂæàÂ§ßÁ®ãÂ∫¶‰∏äÂáèÂ∞ë‰∫Üepoll‰∫ã‰ª∂Ë¢´ÈáçÂ§çËß¶ÂèëÁöÑÊ¨°Êï∞ÔºåÂõ†Ê≠§ÊïàÁéáË¶ÅÊØîLTÊ®°ÂºèÈ´ò„ÄÇ EpollÁöÑ‰ºòÁÇπ Êñá‰ª∂ÊèèËø∞Á¨¶Êï∞Èáè‰∏çÂÜçÂèóÈôê„ÄÇ epoll ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåËÄå select Âíå poll ‰∏çÊòØ„ÄÇ epoll ÂÜÖÈÉ®‰ΩøÁî®‰∫Ü mmap ÂÖ±‰∫´‰∫ÜÁî®Êà∑ÂíåÂÜÖÊ†∏ÁöÑÈÉ®ÂàÜÁ©∫Èó¥ÔºåÈÅøÂÖç‰∫ÜÊï∞ÊçÆÁöÑÊù•ÂõûÊã∑Ë¥ù„ÄÇ select„ÄÅpollÈááÁî®ËΩÆËØ¢ÁöÑÊñπÂºèÊù•Ê£ÄÊü•Êñá‰ª∂ÊèèËø∞Á¨¶ÊòØÂê¶Â§Ñ‰∫éÂ∞±Áª™ÊÄÅÔºåËÄåepollÈááÁî®ÂõûË∞ÉÊú∫Âà∂„ÄÇÈÄ†ÊàêÁöÑÁªìÊûúÂ∞±ÊòØÔºåÈöèÁùÄfdÁöÑÂ¢ûÂä†ÔºåselectÂíåpollÁöÑÊïàÁéá‰ºöÁ∫øÊÄßÈôç‰ΩéÔºåËÄåepoll‰∏ç‰ºöÂèóÂà∞Â§™Â§ßÂΩ±ÂìçÔºåÈô§ÈùûÊ¥ªË∑ÉÁöÑsocketÂæàÂ§ö„ÄÇ epoll Âü∫‰∫é‰∫ã‰ª∂È©±Âä®Ôºåepoll_ctl Ê≥®ÂÜå‰∫ã‰ª∂Âπ∂Ê≥®ÂÜå callback ÂõûË∞ÉÂáΩÊï∞Ôºåepoll_wait Âè™ËøîÂõûÂèëÁîüÁöÑ‰∫ã‰ª∂ÈÅøÂÖç‰∫ÜÂÉè select Âíå poll ÂØπ‰∫ã‰ª∂ÁöÑÊï¥‰∏™ËΩÆËØ¢Êìç‰Ωú„ÄÇ ËôΩÁÑ∂epollÁöÑÊÄßËÉΩÊúÄÂ•ΩÔºå‰ΩÜÊòØÂú®ËøûÊé•Êï∞Â∞ëÂπ∂‰∏îËøûÊé•ÈÉΩÂçÅÂàÜÊ¥ªË∑ÉÁöÑÊÉÖÂÜµ‰∏ãÔºåselectÂíåpollÁöÑÊÄßËÉΩÂèØËÉΩÊØîepollÂ•ΩÔºåÊØïÁ´üepollÁöÑÈÄöÁü•Êú∫Âà∂ÈúÄË¶ÅÂæàÂ§öÂáΩÊï∞ÂõûË∞É„ÄÇ ‰∏âËÄÖÊØîËæÉ1. Áî®Êà∑ÊÄÅÂ∞ÜÊñá‰ª∂ÊèèËø∞Á¨¶‰º†ÂÖ•ÂÜÖÊ†∏ÁöÑÊñπÂºè selectÔºöÂàõÂª∫3‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÈõÜÂπ∂Êã∑Ë¥ùÂà∞ÂÜÖÊ†∏‰∏≠ÔºåÂàÜÂà´ÁõëÂê¨ËØª„ÄÅÂÜô„ÄÅÂºÇÂ∏∏Âä®‰Ωú„ÄÇËøôÈáåÂèóÂà∞Âçï‰∏™ËøõÁ®ãÂèØ‰ª•ÊâìÂºÄÁöÑfdÊï∞ÈáèÈôêÂà∂ÔºåÈªòËÆ§ÊòØ1024„ÄÇ pollÔºöÂ∞Ü‰º†ÂÖ•ÁöÑstruct pollfdÁªìÊûÑ‰ΩìÊï∞ÁªÑÊã∑Ë¥ùÂà∞ÂÜÖÊ†∏‰∏≠ËøõË°åÁõëÂê¨„ÄÇ epollÔºöÊâßË°åepoll_create‰ºöÂú®ÂÜÖÊ†∏ÁöÑÈ´òÈÄücacheÂå∫‰∏≠Âª∫Á´ã‰∏ÄÈ¢óÁ∫¢ÈªëÊ†ë‰ª•ÂèäÂ∞±Áª™ÈìæË°®(ËØ•ÈìæË°®Â≠òÂÇ®Â∑≤ÁªèÂ∞±Áª™ÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶)„ÄÇÊé•ÁùÄÁî®Êà∑ÊâßË°åÁöÑepoll_ctlÂáΩÊï∞Ê∑ªÂä†Êñá‰ª∂ÊèèËø∞Á¨¶‰ºöÂú®Á∫¢ÈªëÊ†ë‰∏äÂ¢ûÂä†Áõ∏Â∫îÁöÑÁªìÁÇπ„ÄÇ 2. ÂÜÖÊ†∏ÊÄÅÊ£ÄÊµãÊñá‰ª∂ÊèèËø∞Á¨¶ËØªÂÜôÁä∂ÊÄÅÁöÑÊñπÂºè selectÔºöÈááÁî®ËΩÆËØ¢ÊñπÂºèÔºåÈÅçÂéÜÊâÄÊúâfdÔºåÊúÄÂêéËøîÂõû‰∏Ä‰∏™ÊèèËø∞Á¨¶ËØªÂÜôÊìç‰ΩúÊòØÂê¶Â∞±Áª™ÁöÑmaskÊé©Á†ÅÔºåÊ†πÊçÆËøô‰∏™Êé©Á†ÅÁªôfd_setËµãÂÄº„ÄÇ pollÔºöÂêåÊ†∑ÈááÁî®ËΩÆËØ¢ÊñπÂºèÔºåÊü•ËØ¢ÊØè‰∏™fdÁöÑÁä∂ÊÄÅÔºåÂ¶ÇÊûúÂ∞±Áª™ÂàôÂú®Á≠âÂæÖÈòüÂàó‰∏≠Âä†ÂÖ•‰∏ÄÈ°πÂπ∂ÁªßÁª≠ÈÅçÂéÜ„ÄÇ epollÔºöÈááÁî®ÂõûË∞ÉÊú∫Âà∂„ÄÇÂú®ÊâßË°åepoll_ctlÁöÑaddÊìç‰ΩúÊó∂Ôºå‰∏ç‰ªÖÂ∞ÜÊñá‰ª∂ÊèèËø∞Á¨¶ÊîæÂà∞Á∫¢ÈªëÊ†ë‰∏äÔºåËÄå‰∏î‰πüÊ≥®ÂÜå‰∫ÜÂõûË∞ÉÂáΩÊï∞ÔºåÂÜÖÊ†∏Âú®Ê£ÄÊµãÂà∞ÊüêÊñá‰ª∂ÊèèËø∞Á¨¶ÂèØËØª/ÂèØÂÜôÊó∂‰ºöË∞ÉÁî®ÂõûË∞ÉÂáΩÊï∞ÔºåËØ•ÂõûË∞ÉÂáΩÊï∞Â∞ÜÊñá‰ª∂ÊèèËø∞Á¨¶ÊîæÂú®Â∞±Áª™ÈìæË°®‰∏≠„ÄÇ 3. ÊâæÂà∞Â∞±Áª™ÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶Âπ∂‰º†ÈÄíÁªôÁî®Êà∑ÊÄÅÁöÑÊñπÂºè selectÔºöÂ∞Ü‰πãÂâç‰º†ÂÖ•ÁöÑfd_setÊã∑Ë¥ù‰º†Âá∫Âà∞Áî®Êà∑ÊÄÅÂπ∂ËøîÂõûÂ∞±Áª™ÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶ÊÄªÊï∞„ÄÇÁî®Êà∑ÊÄÅÂπ∂‰∏çÁü•ÈÅìÊòØÂì™‰∫õÊñá‰ª∂ÊèèËø∞Á¨¶Â§Ñ‰∫éÂ∞±Áª™ÊÄÅÔºåÈúÄË¶ÅÈÅçÂéÜÊù•Âà§Êñ≠„ÄÇ pollÔºöÂ∞Ü‰πãÂâç‰º†ÂÖ•ÁöÑfdÊï∞ÁªÑÊã∑Ë¥ù‰º†Âá∫Áî®Êà∑ÊÄÅÂπ∂ËøîÂõûÂ∞±Áª™ÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶ÊÄªÊï∞„ÄÇÁî®Êà∑ÊÄÅÂπ∂‰∏çÁü•ÈÅìÊòØÂì™‰∫õÊñá‰ª∂ÊèèËø∞Á¨¶Â§Ñ‰∫éÂ∞±Áª™ÊÄÅÔºåÈúÄË¶ÅÈÅçÂéÜÊù•Âà§Êñ≠„ÄÇ epollÔºöepoll_waitÂè™Áî®ËßÇÂØüÂ∞±Áª™ÈìæË°®‰∏≠ÊúâÊó†Êï∞ÊçÆÂç≥ÂèØÔºåÊúÄÂêéÂ∞ÜÈìæË°®ÁöÑÊï∞ÊçÆËøîÂõûÁªôÊï∞ÁªÑÂπ∂ËøîÂõûÂ∞±Áª™ÁöÑÊï∞Èáè„ÄÇÂÜÖÊ†∏Â∞ÜÂ∞±Áª™ÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶ÊîæÂú®‰º†ÂÖ•ÁöÑÊï∞ÁªÑ‰∏≠ÔºåÊâÄ‰ª•Âè™Áî®ÈÅçÂéÜ‰æùÊ¨°Â§ÑÁêÜÂç≥ÂèØ„ÄÇËøôÈáåËøîÂõûÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶ÊòØÈÄöËøámmapËÆ©ÂÜÖÊ†∏ÂíåÁî®Êà∑Á©∫Èó¥ÂÖ±‰∫´Âêå‰∏ÄÂùóÂÜÖÂ≠òÂÆûÁé∞‰º†ÈÄíÁöÑÔºåÂáèÂ∞ë‰∫Ü‰∏çÂøÖË¶ÅÁöÑÊã∑Ë¥ù„ÄÇ 4. ÈáçÂ§çÁõëÂê¨ÁöÑÂ§ÑÁêÜÊñπÂºè selectÔºöÂ∞ÜÊñ∞ÁöÑÁõëÂê¨Êñá‰ª∂ÊèèËø∞Á¨¶ÈõÜÂêàÊã∑Ë¥ù‰º†ÂÖ•ÂÜÖÊ†∏‰∏≠ÔºåÁªßÁª≠‰ª•‰∏äÊ≠•È™§„ÄÇ pollÔºöÂ∞ÜÊñ∞ÁöÑstruct pollfdÁªìÊûÑ‰ΩìÊï∞ÁªÑÊã∑Ë¥ù‰º†ÂÖ•ÂÜÖÊ†∏‰∏≠ÔºåÁªßÁª≠‰ª•‰∏äÊ≠•È™§„ÄÇ epollÔºöÊó†ÈúÄÈáçÊñ∞ÊûÑÂª∫Á∫¢ÈªëÊ†ëÔºåÁõ¥Êé•Ê≤øÁî®Â∑≤Â≠òÂú®ÁöÑÂç≥ÂèØ„ÄÇ NIO Â¶Ç‰Ωï‰ΩøÁî®ÁöÑËøô‰∏âÂÖÑÂºü ÂÖ∑‰ΩìÁöÑ demo ÂàÜÊûêÂèØ‰ª•ÁúãÔºöhttps://blog.csdn.net/nieyanshun_me/article/details/52397153 Âú® windows ‰∏ãÔºåÂè™ÊîØÊåÅ selectÔºå‰∏çÊîØÊåÅ epollÔºåËÄå linux 2.6ÊòØÊîØÊåÅ epollÁöÑÔºå‰ªé demo ‰∏≠ÂèØ‰ª•Áü•ÈÅì selector.select(); Ëøô‰∏ÄÊ≠•Ë∞ÉÁî®‰∫Ü epoll Á≥ªÁªüË∞ÉÁî®„ÄåÂ§çÊùÇÂ∫¶ O(1)„ÄçÔºåÂè™Ë¶ÅÂÆ¢Êà∑Á´ØÂáÜÂ§áÂ•Ω‰∫ÜÊï∞ÊçÆÔºåÂ∞±‰ºöÂéªÂëäÁü• Selector Êï∞ÊçÆÂáÜÂ§áÂ•Ω‰∫ÜÔºåÂèØ‰ª•ËøõË°å I/O ËØªÂÜô‰∫ÜÔºåËÄå‰∏çÊòØÂÉè select „ÄåÂ§çÊùÇÂ∫¶ O(n)„ÄçÔºåÁü•ÈÅìÊúâÊï∞ÊçÆÂáÜÂ§áÂ•Ω‰∫Ü‰πãÂêéÔºåÊääÊâÄÊúâÁöÑËøûÊé•ÂÖ®ÈÉ®ËΩÆ‰∏ÄÈÅçÔºåÁúãÁúãÊòØË∞ÅÂáÜÂ§áÂ•Ω‰∫Ü‚Ä¶Ë¥πÊó∂Ë¥πÂäõ„ÄÇÊâÄ‰ª•ËØ¥ÂïäÔºåËøòÊòØ‰∫ãÂä°È©±Âä®Â•ΩÂïäÔºåÂ∞±Ë∑üÊàë‰ª¨Â≠¶‰π†‰∏ÄÊ†∑ÔºåËøòÊòØ‰∏ÄËæπÈù¢ËØï‰∏ÄËæπÂ≠¶Êüê‰∫õÁü•ËØÜ‰ºöÊõ¥Âø´‰∏ÄÁÇπÔºåselect Â∞±ÂÉèÊàë‰ª¨Ëá™Â∑±Áúã‰π¶‰∏ÄÊ†∑ÔºåÁü•ÈÅìËá™Â∑±Êúâ‰∏çË∂≥‰∫ÜÔºå‰ΩÜÊòØ‰∏çÁü•ÈÅìÂì™Âùó‰∏çË°åÔºå‰∫éÊòØÂ∞±ÊääÊâÄÊúâÁü•ËØÜÂÖ®ÈÉ®Â§ç‰π†‰∏ÄÈÅçÔºåepoll Â∞±Áõ∏ÂΩì‰∫éÈù¢ËØïÁöÑÊó∂ÂÄôÈù¢ËØïÂÆòÁõ¥Êé•ÂëäËØâ‰Ω†Âì™ÂùóËèúÁöÑ‰∏çË°åÔºåÁÑ∂Âêé‰Ω†Â∞±ËÉΩÂØπÁóá‰∏ãËçØÂπ∂‰∏îÊúÄÂø´ÊïàÁéáÁöÑË°•ÈΩêËá™Â∑±ÁöÑÁü≠Êùø„ÄÇ ‰ªé NIO Áúã NettyÂú® NIO ‰∏ÄËäÇ‰∏≠ÔºåÊàë‰∏ªË¶ÅÊòØ‰ªãÁªç‰∫Ü‰∏ãÂÖ∂Êñá‰ª∂ IO Áî®Âà∞ÁöÑÈõ∂Êã∑Ë¥ùÊäÄÊúØ‰ª•Âèä IO Â§çÁî®ÊäÄÊúØÔºåËøô‰∏ÄÂ∞èËäÇÔºåÊàë‰ºö‰ªé NIO ÁöÑËßíÂ∫¶Ôºå‰∏ÄÁ™•ËëóÂêçÁöÑ Netty„ÄÇ Netty ‰∫ßÁîüÁöÑÁºòÁî± JDK ÁöÑ NIO ÁºñÁ®ãÂ§çÊùÇ„ÄÇÊ®°Âûã‰∏çÂèãÂ•ΩÔºåByteBuffer ÁöÑ api Âèç‰∫∫Á±ªÔºõ Ê≤°ÊúâÂÆûÁé∞Á∫øÁ®ãÊ®°ÂûãÔºåËøûËá™ÂÆö‰πâÂçèËÆÆÊãÜÂåÖÈÉΩÈúÄË¶ÅËá™Â∑±ÂÆûÁé∞Ôºõ JDK ÁöÑ NIOÔºåbug Â§™Â§öÔºåÁª¥Êä§ÊàêÊú¨ËøáÈ´ò„ÄÇ ÊâÄ‰ª•Ôºå‰∏é‰πãÂØπÂ∫îÔºåNetty ÁöÑÂ•ΩÂ§ÑÂú®‰∫éÔºö NettyÂ∫ïÂ±ÇIOÊ®°ÂûãÈöèÊÑèÂèØÂàáÊç¢Ôºõ Ëá™Â∏¶ÊãÜÂåÖËß£ÂåÖÔºåÂºÇÂ∏∏Ê£ÄÊµãÁ≠âÊú∫Âà∂ÔºåÂè™ÈúÄË¶ÅÂÖ≥ÂøÉ‰∏öÂä°ÈÄªËæëÔºõ Netty ÁöÑÁ∫øÁ®ãÊ®°Âûã‰ºòÂåñÁöÑÂ•ΩÔºåÁ≤æÂøÉËÆæËÆ°ÁöÑ Reactor Ê®°ÂûãÂèØ‰ª•ÂÅöÂà∞ÈùûÂ∏∏È´òÊïàÔºõ Ëá™Â∏¶ÂêÑÁßçÂçèËÆÆÊ†àÔºõ Á§æÂå∫Ê¥ªË∑É„ÄÅdubbo„ÄÅhsf„ÄÅkafka„ÄÅmetaQÈÉΩÂú®‰ΩøÁî®ÔºåÂÅ•Â£ÆÊÄßÁªèÂèóËÄÉÈ™å„ÄÇ Âü∫Êú¨Ê¶ÇÂøµ Netty is an asynchronous event-driven network application framework for rapid development of maintainable high performance protocol servers &amp; clients. ‰ªéÂÆòÁΩë‰∏äÁöÑ‰ªãÁªçÂèØ‰ª•ÁúãÂà∞ÔºåNetty ÊòØ‰∏Ä‰∏™ÁΩëÁªúÂ∫îÁî®Ê°ÜÊû∂ÔºåÊèê‰æõ‰∫ÜÂºÇÊ≠•‰∫ã‰ª∂È©±Âä® ÁöÑÊñπÂºèÔºå‰ΩøÁî® Netty ÂèØ‰ª•Âø´ÈÄüÂºÄÂèëÂá∫‰∏Ä‰∏™È´òÊÄßËÉΩÁöÑÁΩëÁªúÂ∫îÁî®Á®ãÂ∫èÔºåÂÆûÈôÖ‰∏äÔºåÊàë‰ª¨ÂèØ‰ª•ÁêÜËß£Êàê Netty ÊòØ‰∏ÄÂ•óÂú® java NIO ÁöÑÂü∫Á°Ä‰∏äÂ∞ÅË£ÖÁöÑ‰æø‰∫éÁî®Êà∑ÂºÄÂèëÁΩëÁªúÂ∫îÁî®Á®ãÂ∫èÁöÑ api „ÄÇ Êï¥‰ΩìÊû∂ÊûÑËÆ©Êàë‰ª¨Êù•ÁúãÁúã Netty ÁöÑÊï¥‰ΩìÊû∂ÊûÑÔºö ÂèØ‰ª•ÁúãÂà∞ÔºåNetty ‰∏ªË¶ÅÂàÜ‰∏∫‰∏âÈÉ®ÂàÜÔºö Â∫ïÂ±ÇÁöÑÈõ∂Êã∑Ë¥ùÊäÄÊúØ„ÄÅ‰∫ã‰ª∂È©±Âä®Ê®°Âûã‰ª•ÂèäÁªü‰∏ÄÁöÑÈÄö‰ø°Ê®°Âûã‚ÄîReactorÔºõ Âü∫‰∫é JVM ÂÆûÁé∞ÁöÑ‰º†ËæìÂ±ÇÔºõ Â∏∏Áî®ÂçèËÆÆÁöÑÊîØÊåÅÔºåÂ¶Ç HTTP„ÄÅSSL„ÄÅgzipÁ≠âÁ≠â„ÄÇ ÈáçÊñ∞ÂÆûÁé∞ ByteBufferNetty ÈáçÊñ∞ÂÆûÁé∞‰∫Ü NIO ‰∏≠ÁöÑ ByteBufferÔºåÂèØ‰ª•Êõ¥Â•ΩÁöÑËß£ÂÜ≥ÂæàÂ§öÈóÆÈ¢òÔºå‰æãÂ¶ÇÂçäÂåÖ„ÄÅÁ≤òÂåÖ„ÄÇ ÂçäÂåÖÔºöÊé•Êî∂Á´ØÂ∞Ü‰∏Ä‰∏™ÂèëÈÄÅÁ´ØÁöÑ ByteBuffer ‚ÄúÊãÜÂºÄ‚Äù ‰∫ÜÔºåÊî∂Âà∞‰∫ÜÂ§ö‰∏™Á†¥Á¢éÁöÑÂåÖÔºõ Á≤òÂåÖÔºöÊé•Êî∂Á´ØÊî∂Âà∞‰∫ÜÂ§ö‰∏™ ByteBuffer„ÄÇ Ëß£ÂÜ≥ÊÄùË∑ØÂ∞±ÊòØÊ†πÊçÆËá™ÂÆö‰πâÂçèËÆÆÔºåÂ∞ÜÊï∞ÊçÆËØªÂèñÂà∞ÁºìÂÜ≤Âå∫ËøõË°å‰∫åÊ¨°ÊãºË£ÖÔºåÈáçÊñ∞ÁªÑË£ÖÂæóÂà∞Êàë‰ª¨Â∫îÁî®Â±ÇÁöÑÊï∞ÊçÆÂåÖ„ÄÇ Áªü‰∏ÄÁöÑ I/O Êé•Âè£Netty Êúâ Channel Ëøô‰∏™Áªü‰∏ÄÁöÑÁºñÁ®ãÊé•Âè£ÔºåÊâÄ‰ª•ÂèØ‰ª•Âú®‰º†ËæìÂ±ÇËøõË°åÂÆûÁé∞ÁöÑÂàáÊç¢Ôºå‰æãÂ¶ÇÂèØ‰ª•Â∞Ü Socket ÂàáÊç¢Êàê DatagramÔºåËøòÂèØ‰ª•ÁÅµÊ¥ªÁöÑÂú® NIO Âíå BIO ‰∏≠ËøõË°åÂàáÊç¢ÔºåÁî±‰∫éÊ†∏ÂøÉ API ÂÖ∑ÊúâÈ´òÂ∫¶ÁöÑÂèØÊâ©Â±ïÊÄßÔºåÂèØ‰ª•ÂæàÂÆπÊòìÁöÑÂÆöÂà∂Ëá™Â∑±ÁöÑ‰º†ËæìÂÆûÁé∞„ÄÇ È´òÁ∫ßÁªÑ‰ª∂Netty Êèê‰æõ‰∫Ü‰∏ÄÁ≥ªÂàóÈ´òÁ∫ßÁªÑ‰ª∂ÔºåÂ¶Ç SSL/TLS ÊîØÊåÅ„ÄÅHTTPÂÆûÁé∞Á≠âÁ≠â„ÄÇ Âü∫‰∫éÊã¶Êà™ÈìæÊ®°ÂºèÁöÑ‰∫ã‰ª∂Ê®°Âûã‰∏Ä‰∏™ÂÆö‰πâËâØÂ•ΩÂπ∂ÂÖ∑ÊúâÊâ©Â±ïËÉΩÂäõÁöÑ‰∫ã‰ª∂Ê®°ÂûãÊòØ‰∫ã‰ª∂È©±Âä®ÂºÄÂèëÁöÑÂøÖË¶ÅÊù°‰ª∂„ÄÇNetty ÂÖ∑ÊúâÂÆö‰πâËâØÂ•ΩÁöÑ I/O ‰∫ã‰ª∂Ê®°Âûã„ÄÇÁî±‰∫é‰∏•Ê†ºÁöÑÂ±ÇÊ¨°ÁªìÊûÑÂå∫ÂàÜ‰∫Ü‰∏çÂêåÁöÑ‰∫ã‰ª∂Á±ªÂûãÔºåÂõ†Ê≠§ Netty ‰πüÂÖÅËÆ∏‰Ω†Âú®‰∏çÁ†¥ÂùèÁé∞Êúâ‰ª£Á†ÅÁöÑÊÉÖÂÜµ‰∏ãÂÆûÁé∞Ëá™Â∑±ÁöÑ‰∫ã‰ª∂Á±ªÂûã„ÄÇËøôÊòØ‰∏éÂÖ∂‰ªñÊ°ÜÊû∂Áõ∏ÊØîÂè¶‰∏Ä‰∏™‰∏çÂêåÁöÑÂú∞Êñπ„ÄÇÂæàÂ§ö NIO Ê°ÜÊû∂Ê≤°ÊúâÊàñËÄÖ‰ªÖÊúâÊúâÈôêÁöÑ‰∫ã‰ª∂Ê®°ÂûãÊ¶ÇÂøµÔºõÂú®‰Ω†ËØïÂõæÊ∑ªÂä†‰∏Ä‰∏™Êñ∞ÁöÑ‰∫ã‰ª∂Á±ªÂûãÁöÑÊó∂ÂÄôÂ∏∏Â∏∏ÈúÄË¶Å‰øÆÊîπÂ∑≤ÊúâÁöÑ‰ª£Á†ÅÔºåÊàñËÄÖÊ†πÊú¨Â∞±‰∏çÂÖÅËÆ∏‰Ω†ËøõË°åËøôÁßçÊâ©Â±ï„ÄÇ ËøôÂùóÊöÇÊó∂Ê≤°Âï•‰ΩìÊÑü‚Ä¶ ÂºÇÊ≠•‰∫ã‰ª∂È©±Âä® ‚Äî Reactor Ê®°Âûã ‰∏ªË¶ÅÂèÇËÄÉÔºöhttps://cloud.tencent.com/developer/article/1488120 ËøôÈáåÈááÁî®ÁöÑ‚ÄúÂºÇÊ≠•‰∫ã‰ª∂È©±Âä®‚ÄùÔºåÂ∞±ÊòØÊàë‰ª¨‰∏äÊñáËÆ≤ÁöÑ IO Â§çÁî®ÊäÄÊúØÔºå‰πüÂèØ‰ª•Êç¢‰∏™ÂêçÂ≠óÔºåÂ∞±ÊòØ reactor Ê®°Âûã„ÄÇ‰πüÁß∞‰∏∫ Dispatcher Ê®°ÂûãÔºå‰πüÂèØ‰ª•Áß∞‰∏∫ÂêåÊ≠•ÈùûÈòªÂ°ûÊ®°Âûã„ÄÇ Êúâ‰∫∫ÂèØËÉΩ‰ºöÂ•áÊÄ™ÔºåËøôÈáåÊòéÊòéË∞àÂà∞ÁöÑÊòØ ‚ÄúÂºÇÊ≠•‰∫ã‰ª∂È©±Âä®‚ÄùÔºåÊÄé‰πàÂèàÊòØ ‚ÄúÂêåÊ≠•ÈùûÈòªÂ°ûÊ®°Âûã‚ÄùÔºåËøôÈáåÊàëÂ∞±Ë¶ÅÁ®çÂæÆËß£Èáä‰∏Ä‰∏ã‰∫ÜÔºåÂú® ‚ÄúÂêåÊ≠•ÈùûÈòªÂ°û‚Äù ‰∏≠ÔºåÂÖ∂ÂÆû‰πüÊúâ‰∏§ÁßçÂΩ¢ÂºèÔºå‰∏ÄÁßçÊòØÈùû‰∫ã‰ª∂È©±Âä®ÔºåÁ∫øÁ®ã‰∏ªÂä®ÂéªËØ¢ÈóÆÊï∞ÊçÆÊòØÂê¶ÂáÜÂ§áÂ•Ω‰∫Ü„Äåselect„ÄçÔºåÂè¶Â§ñ‰∏ÄÁßçÂë¢ÔºåÂ∞±ÊòØ‰∫ã‰ª∂È©±Âä®ÔºåÊï∞ÊçÆÂáÜÂ§áÂ•Ω‰∫Ü‰πãÂêé‰∏ªÂä®ÂëäÁü•ÂØπÂ∫îÁöÑÁ∫øÁ®ã„Äåepoll„ÄçÔºåËøôÈáåÁöÑ ‚ÄúÂºÇÊ≠•‚Äù ÔºåÊåáÁöÑÂ∞±ÊòØÁ∫øÁ®ãÊó†ÈúÄ‰∏ªÂä®ÁöÑÂéªËØ¢ÈóÆÊï∞ÊçÆÊòØÂê¶ÂáÜÂ§áÂ•Ω‰∫ÜÔºåËÄåÊòØÂèØ‰ª•ÂéªÂπ≤ÂÖ∂‰ªñ‰∫ãÊÉÖÔºåÊ≠§Êó∂ÁöÑÁ∫øÁ®ãÂíåÊï∞ÊçÆÂáÜÂ§áÁöÑÁ°ÆÊòØÂºÇÊ≠•ÁöÑ„ÄÇ ‰∏æ‰∏™ÁîüÊ¥ª‰∏≠Êõ¥Â∏∏ËßÅÁöÑ‰æãÂ≠êÔºå‰∏Ä‰∏™ÊòØÔºö Â¶ÇÊûú‰Ω†ÊÉ≥ÂêÉ‰∏Ä‰ªΩÂç§ËÇâÈ•≠ÔºåÂú®È•≠È¶ÜÁÇπÂÆåÈ§êÔºåÂ∞±ÂéªÈÅõÁãó‰∫Ü„ÄÇ‰∏çËøáÈÅõ‰∏Ä‰ºöÂÑøÔºåÂ∞±ÂõûÈ•≠È¶ÜÂñä‰∏ÄÂ£∞ÔºöÂ•Ω‰∫ÜÊ≤°ÂïäÔºÅ‚Äî‚Äì Èùû‰∫ã‰ª∂È©±Âä® Â¶ÇÊûú‰Ω†ÊÉ≥ÂêÉ‰∏Ä‰ªΩÂç§ËÇâÈ•≠ÔºåÂú®È•≠È¶ÜÁÇπÂÆåÈ§êÔºåÂ∞±ÂéªÈÅõÁãó‰∫ÜÔºåÈÅõÁãóÁöÑÊó∂ÂÄôÔºåÊé•Âà∞È•≠È¶ÜÁîµËØùÔºåËØ¥È•≠ÂÅöÂ•Ω‰∫ÜÔºåËÆ©ÊÇ®‰∫≤Ëá™ÂéªÊãø„ÄÇ‚Äî ‰∫ã‰ª∂È©±Âä® ËøôÈáåËÉΩÁúãÂà∞Êàë‰ª¨Âú®ÈÅõÁãóÁöÑÊó∂ÂÄôÊó†ÈúÄÂõûÂéªÈóÆÈ•≠ÊòØÂê¶ÂÅöÂ•Ω‰∫ÜÔºåÂºÇÊ≠•ÁöÑÊ¶ÇÂøµÂ∞±ÂæàÊòéÊòæ‰∫ÜÔºÅ ËÄåÂêåÊ≠•ÈùûÈòªÂ°ûÔºåÂàôÊòØ‰ªéÊï¥‰∏™IO‰º†ËæìÁöÑËßíÂ∫¶ÁúãÔºåÂú®Êï∞ÊçÆÂáÜÂ§áÂ∞±Áª™‰πãÂêéÔºå‰æùÊóßÈúÄË¶ÅÂÜÖÊ†∏Êù•Ë∞ÉÂ∫¶Êñ∞ÁöÑÁ∫øÁ®ãÊù•ËøõË°åIO‰º†ËæìÔºåËøôÊ†∑ÊòéÊòæÊòØÂêåÊ≠•ÁöÑÔºåÊâÄ‰ª•ËØ¥Ôºå‰∫åËÄÖÁöÑÂêåÊ≠•ÂºÇÊ≠•ÁöÑËåÉÂõ¥‰∏ç‰∏ÄÊ†∑Ôºå‰∏Ä‰∏™ÊòØ‰ªÖ‰ªÖËÅöÁÑ¶‰∫éIOÂáÜÂ§áÂ∞±Áª™Ôºå‰∏Ä‰∏™ÊòØËÅöÁÑ¶‰∫éÊï¥‰∏™ÁöÑIO‰º†Ëæì„ÄÇ Ê¶ÇËø∞ReactorÊ®°Âûã‰∏≠ÂÆö‰πâÁöÑ‰∏âÁßçËßíËâ≤Ôºö ReactorÔºöË¥üË¥£ÁõëÂê¨ÂíåÂàÜÈÖç‰∫ã‰ª∂ÔºåÂ∞ÜI/O‰∫ã‰ª∂ÂàÜÊ¥æÁªôÂØπÂ∫îÁöÑHandler„ÄÇÊñ∞ÁöÑ‰∫ã‰ª∂ÂåÖÂê´ËøûÊé•Âª∫Á´ãÂ∞±Áª™„ÄÅËØªÂ∞±Áª™„ÄÅÂÜôÂ∞±Áª™Á≠â„ÄÇ‰πüÂ∞±ÊòØ‰∏äÊñá‰ª£Á†Å‰∏≠ÁöÑ ‚Äúselect‚Äù ËßíËâ≤Ôºõ AcceptorÔºöÂ§ÑÁêÜÂÆ¢Êà∑Á´ØÊñ∞ËøûÊé•ÔºåÂπ∂ÂàÜÊ¥æËØ∑Ê±ÇÂà∞Â§ÑÁêÜÂô®Èìæ‰∏≠„ÄÇÂ∞±ÊòØ‰∏äÊñá‰ª£Á†Å‰∏≠Ëß¶Âèë ‚Äúaccept‚Äù ËØ≠‰πâ„ÄÇ HandlerÔºöÂ∞ÜËá™Ë∫´‰∏é‰∫ã‰ª∂ÁªëÂÆöÔºåÊâßË°åÈùûÈòªÂ°ûËØª/ÂÜô‰ªªÂä°ÔºåÂÆåÊàêchannelÁöÑËØªÂÖ•ÔºåÂÆåÊàêÂ§ÑÁêÜ‰∏öÂä°ÈÄªËæëÂêéÔºåË¥üË¥£Â∞ÜÁªìÊûúÂÜôÂá∫channel„ÄÇÂèØÁî®ËµÑÊ∫êÊ±†Êù•ÁÆ°ÁêÜ„ÄÇÂ∞±ÊòØ‰∏äÊñá‰ª£Á†Å‰∏≠Ëß¶Âèë ‚Äúread‚ÄùËØ≠‰πâ„ÄÇ ReactorÂ§ÑÁêÜËØ∑Ê±ÇÁöÑÊµÅÁ®ãÔºö ËØªÂèñÊìç‰ΩúÔºö Â∫îÁî®Á®ãÂ∫èÊ≥®ÂÜåËØªÂ∞±Áª™‰∫ã‰ª∂ÂíåÁõ∏ÂÖ≥ËÅîÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÂô®Ôºõ ‰∫ã‰ª∂ÂàÜÁ¶ªÂô®Á≠âÂæÖ‰∫ã‰ª∂ÁöÑÂèëÁîüÔºõ ÂΩìÂèëÁîüËØªÂ∞±Áª™‰∫ã‰ª∂ÁöÑÊó∂ÂÄôÔºå‰∫ã‰ª∂ÂàÜÁ¶ªÂô®Ë∞ÉÁî®Á¨¨‰∏ÄÊ≠•Ê≥®ÂÜåÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÂô®Ôºõ ÂÜôÂÖ•Êìç‰ΩúÁ±ª‰ºº‰∫éËØªÂèñÊìç‰ΩúÔºåÂè™‰∏çËøáÁ¨¨‰∏ÄÊ≠•Ê≥®ÂÜåÁöÑÊòØÂÜôÂ∞±Áª™‰∫ã‰ª∂„ÄÇ Âçï Reactor ÂçïÁ∫øÁ®ãÊ®°ÂûãReactorÁ∫øÁ®ãË¥üË¥£Â§öË∑ØÂàÜÁ¶ªÂ•óÊé•Â≠óÔºåacceptÊñ∞ËøûÊé•ÔºåÂπ∂ÂàÜÊ¥æËØ∑Ê±ÇÂà∞handler„ÄÇRedis‰ΩøÁî®ÂçïReactorÂçïËøõÁ®ãÁöÑÊ®°Âûã„ÄÇ Ê∂àÊÅØÂ§ÑÁêÜÊµÅÁ®ãÔºö ReactorÂØπË±°ÈÄöËøáselectÁõëÊéßËøûÊé•‰∫ã‰ª∂ÔºåÊî∂Âà∞‰∫ã‰ª∂ÂêéÈÄöËøádispatchËøõË°åËΩ¨Âèë„ÄÇ Â¶ÇÊûúÊòØËøûÊé•Âª∫Á´ãÁöÑ‰∫ã‰ª∂ÔºåÂàôÁî±acceptorÊé•ÂèóËøûÊé•ÔºåÂπ∂ÂàõÂª∫handlerÂ§ÑÁêÜÂêéÁª≠‰∫ã‰ª∂„ÄÇ Â¶ÇÊûú‰∏çÊòØÂª∫Á´ãËøûÊé•‰∫ã‰ª∂ÔºåÂàôReactor‰ºöÂàÜÂèëË∞ÉÁî®HandlerÊù•ÂìçÂ∫î„ÄÇ handler‰ºöÂÆåÊàêread-&gt;‰∏öÂä°Â§ÑÁêÜ-&gt;sendÁöÑÂÆåÊï¥‰∏öÂä°ÊµÅÁ®ã„ÄÇ ËøôÈáåÁöÑ handler Ê≤°ÊúâÂºÇÊ≠•ÔºåÊâÄ‰ª•ÂØπ‰∫éÈ´òË¥üËΩΩ„ÄÅÂ§ßÂπ∂ÂèëÁöÑÂ∫îÁî®Âú∫ÊôØÂπ∂‰∏çÂêàÈÄÇ„ÄÇ Tip: ËøôÈáåÁÖßÂ∫î‰∏äÈù¢ÁöÑ‰æãÂ≠êÔºåÂçï Reactor ÂçïÁ∫øÁ®ãÊ®°ÂûãÂÖ∂ÂÆûÂ∞±Áõ∏ÂΩì‰∫éÂè™Êúâ‰∏Ä‰∏™‰∏ìÈó®Ë¥üË¥£Êé•ÂæÖÁöÑÊúçÂä°ÂëòÔºå‰ªñ‰∏ç‰ªÖË¶ÅË¥üË¥£ËØ¢ÈóÆÊàë‰ª¨ÊòØÂê¶Ë¶ÅËøõÂ∫ó„ÄåÊ≥®ÂÜåÂ•óÊé•Â≠óÔºåÁªëÂÆöÁ´ØÂè£„ÄçÔºåËøòË¶ÅË¥üË¥£ÂëäËØâÂºïÂØºÂëòÂ∞ÜÈ°æÂÆ¢Â∏¶ÂÖ•Áõ∏Â∫îÁöÑÂ∫ß‰Ωç„ÄåacceptorÊé•ÂèóËøûÊé•ÔºåÂáÜÂ§áËøõË°åËØªÂèñ„ÄçÔºåÊúÄÂêéËøòË¶ÅË¥üË¥£ÈÄöÁü•‰∏äËèúÂëò‰∏äËèú„ÄåhandlerÔºå‰º†ËæìÊï∞ÊçÆ„Äç Âçï Reactor Â§öÁ∫øÁ®ãÊ®°Âûã‰∏éÂçïÁ∫øÁ®ãÊ®°ÂûãÁõ∏ÊØîÔºåËøôÈáåÂºïÂÖ•‰∫Ü worker Á∫øÁ®ãÊ±†ËøõË°å‰∏öÂä°ÊµÅÁ®ãÁöÑÂ§ÑÁêÜ„ÄÇ Ê∂àÊÅØÂ§ÑÁêÜÊµÅÁ®ãÔºö ReactorÂØπË±°ÈÄöËøáSelectÁõëÊéßÂÆ¢Êà∑Á´ØËØ∑Ê±Ç‰∫ã‰ª∂ÔºåÊî∂Âà∞‰∫ã‰ª∂ÂêéÈÄöËøádispatchËøõË°åÂàÜÂèë„ÄÇ Â¶ÇÊûúÊòØÂª∫Á´ãËøûÊé•ËØ∑Ê±Ç‰∫ã‰ª∂ÔºåÂàôÁî±acceptorÈÄöËøáacceptÂ§ÑÁêÜËøûÊé•ËØ∑Ê±ÇÔºåÁÑ∂ÂêéÂàõÂª∫‰∏Ä‰∏™HandlerÂØπË±°Â§ÑÁêÜËøûÊé•ÂÆåÊàêÂêéÁª≠ÁöÑÂêÑÁßç‰∫ã‰ª∂„ÄÇ Â¶ÇÊûú‰∏çÊòØÂª∫Á´ãËøûÊé•‰∫ã‰ª∂ÔºåÂàôReactor‰ºöÂàÜÂèëË∞ÉÁî®ËøûÊé•ÂØπÂ∫îÁöÑHandlerÊù•ÂìçÂ∫î„ÄÇ HandlerÂè™Ë¥üË¥£ÂìçÂ∫î‰∫ã‰ª∂Ôºå‰∏çÂÅöÂÖ∑‰Ωì‰∏öÂä°Â§ÑÁêÜÔºåÈÄöËøáReadËØªÂèñÊï∞ÊçÆÂêéÔºå‰ºöÂàÜÂèëÁªôÂêéÈù¢ÁöÑWorkerÁ∫øÁ®ãÊ±†ËøõË°å‰∏öÂä°Â§ÑÁêÜ„ÄÇ WorkerÁ∫øÁ®ãÊ±†‰ºöÂàÜÈÖçÁã¨Á´ãÁöÑÁ∫øÁ®ãÂÆåÊàêÁúüÊ≠£ÁöÑ‰∏öÂä°Â§ÑÁêÜÔºåÂ¶Ç‰ΩïÂ∞ÜÂìçÂ∫îÁªìÊûúÂèëÁªôHandlerËøõË°åÂ§ÑÁêÜ„ÄÇ HandlerÊî∂Âà∞ÂìçÂ∫îÁªìÊûúÂêéÈÄöËøásendÂ∞ÜÂìçÂ∫îÁªìÊûúËøîÂõûÁªôClient„ÄÇ Tip: ËøôÈáåÁÖßÂ∫î‰∏äÈù¢ÁöÑ‰æãÂ≠êÔºåÂçï Reactor Â§öÁ∫øÁ®ãÊ®°ÂûãÂÖ∂ÂÆûÂ∞±Áõ∏ÂΩì‰∫éÊúÄÂêéÊãøËµ∞ËèúÂçïÁöÑÈÇ£‰∏™‰∫∫ÂõûÂà∞Âé®ÊàøÔºåÁÑ∂ÂêéÊúâÂæàÂ§ö‰∫∫‰∏äËèú„ÄÇ ÂèØ‰ª•ÁúãÂà∞ÔºåËøôÈáåÁöÑ reactor„ÄÅaccept„ÄÅhandlerÈÉΩ‰∏ìÊ≥®‰∫éÂàÜÂèë‰∫ÜÔºå‰∏öÂä°Â§ÑÁêÜ‰∫§Áî± worker Á∫øÁ®ãÊ±†ÂéªÂ§ÑÁêÜ‰∫ÜÔºåËøôÊ†∑Êï¥‰∏™Á≥ªÁªüÁöÑÂêûÂêêÂ∞±‰∏äÂéª‰∫ÜÔºå‰ΩÜÊòØÔºåËøô‰∏™Ê®°ÂûãËøòÊòØÂ≠òÂú®‰∏§‰∏™ÊØîËæÉÊòéÊòæÁöÑÈóÆÈ¢òÔºö Â¶ÇÊûúÂ≠êÁ∫øÁ®ãÂÆåÊàê‰∏öÂä°Â§ÑÁêÜÂêéÔºåÊääÁªìÊûú‰º†ÈÄíÁªô‰∏ªÁ∫øÁ®ãReactorËøõË°åÂèëÈÄÅÔºåÂ∞±‰ºöÊ∂âÂèäÂÖ±‰∫´Êï∞ÊçÆÁöÑ‰∫íÊñ•Âíå‰øùÊä§Êú∫Âà∂„ÄÇ ReactorÊâøÊãÖÊâÄÊúâ‰∫ã‰ª∂ÁöÑÁõëÂê¨ÂíåÂìçÂ∫îÔºåÂè™Âú®‰∏ªÁ∫øÁ®ã‰∏≠ËøêË°åÔºåÂèØËÉΩ‰ºöÂ≠òÂú®ÊÄßËÉΩÈóÆÈ¢ò„ÄÇ‰æãÂ¶ÇÂπ∂ÂèëÁôæ‰∏áÂÆ¢Êà∑Á´ØËøûÊé•ÔºåÊàñËÄÖÊúçÂä°Á´ØÈúÄË¶ÅÂØπÂÆ¢Êà∑Á´ØÊè°ÊâãËøõË°åÂÆâÂÖ®ËÆ§ËØÅÔºå‰ΩÜÊòØËÆ§ËØÅÊú¨Ë∫´ÈùûÂ∏∏ÊçüËÄóÊÄßËÉΩ„ÄÇ ‰∏ÄÂè•ËØùÊù•ËØ¥ÔºåÂ∞±ÊòØ‰∏ìÈó®Ë¥üË¥£Êé•ÂæÖÁöÑÊúçÂä°ÂëòÂ§™Âøô‰∫ÜÔºåÊâÄÊúâÈÄöÁü•ÁöÑÊ¥ªÈÉΩË¶Å‰ªñÊù•Âπ≤‚Ä¶ ‰∏ª‰ªé Reactor Â§öÁ∫øÁ®ãÊ®°ÂûãÊØîËµ∑Á¨¨‰∫åÁßçÊ®°ÂûãÔºåÂÆÉÊòØÂ∞ÜReactorÂàÜÊàê‰∏§ÈÉ®ÂàÜÔºö mainReactorË¥üË¥£ÁõëÂê¨server socketÔºåÁî®Êù•Â§ÑÁêÜÁΩëÁªúIOËøûÊé•Âª∫Á´ãÊìç‰ΩúÔºåÂ∞ÜÂª∫Á´ãÁöÑsocketChannelÊåáÂÆöÊ≥®ÂÜåÁªôsubReactor„ÄÇ subReactor„ÄåËøôÈáå‰πüÂèØ‰ª•ÊòØÂ§öÁ∫øÁ®ã„Äç‰∏ªË¶ÅÂÅöÂíåÂª∫Á´ãËµ∑Êù•ÁöÑsocketÂÅöÊï∞ÊçÆ‰∫§‰∫íÂíå‰∫ã‰ª∂‰∏öÂä°Â§ÑÁêÜÊìç‰Ωú„ÄÇÈÄöÂ∏∏ÔºåsubReactor‰∏™Êï∞‰∏äÂèØ‰∏éCPU‰∏™Êï∞Á≠âÂêå„ÄÇ ÈÄö‰øóÁÇπÊù•ËØ¥ÔºåÂ∞±ÊòØË¥üË¥£Êé•ÂæÖÁöÑÊúçÂä°ÂëòÂè™ÈúÄË¶ÅÁ´ôÂú®Èó®Âè£ÔºåÈóÆÂà´‰∫∫ÊòØÂê¶Ë¶ÅËøõÊù•Â∞±È§êÔºåÂâ©‰∏ãÁöÑ‰∫ãÊÉÖÔºåÂ¶ÇÂ∞ÜÂÖ∂ÂºïÂØºÂà∞Áõ∏Â∫îÁöÑ‰ΩçÁΩÆ„ÄåÁõ∏ÂΩì‰∫éÂª∫Á´ãËøûÊé•„Äç„ÄÅÂëäÁü•È°æÂÆ¢ËèúÂÖ®ÈÉ®‰∏äÂÆå‰∫Ü„ÄåÁõ∏ÂΩì‰∫éworkerÂπ≤ÂÆå‰∫ÜÔºåÈúÄË¶ÅÈÄöÁü•Áªôclient„ÄçÔºåÂ∞±Áî± subReactorÊù•ÂÖ®ÈÉ®ÂÆåÊàê‰∫Ü„ÄÇËøô‰πüÂØπÂ∫î‰∫ÜÊàë‰ª¨Áé∞Âú®È•≠Â∫óÁöÑÊ®°ÂûãÔºöÊúâ‰∏ìÈó®ÁöÑ‰∏Ä‰∏™‰∫∫Âú®Èó®Âè£Ë¥üË¥£ËØ¢ÈóÆÈ°æÂÆ¢ÊòØÂê¶Ë¶ÅËøõÊù•Â∞±È§êÔºåÈ°æÂÆ¢ËøõÂÖ•È§êÂéÖÂêéÔºåÊúâ‰∏ì‰∫∫Ë¥üË¥£ÂºïÂØºÂà∞Â∫ß‰ΩçÔºåÈ°æÂÆ¢ÁÇπÈ§êÂÆåÂêéÔºåÂØπÂ∫îÁöÑË¥üË¥£‰∫∫ÁúãÂà∞ÂêéÈÄöÁü•ÂêéÂé®ÂÅöËèúÔºåÁÑ∂ÂêéÊúâÂ§ö‰∫∫ÂàÜÂà´ÁªôÈ°æÂÆ¢Á´ØËèúÔºåÊúÄÂêéËèú‰∏äÈΩê‰∫ÜÔºåË¥üË¥£‰∫∫ÂëäÁü•È°æÂÆ¢‰∏äÈΩê‰∫ÜÔºåÊúÄÂêéÂºïÂØºÈ°æÂÆ¢ÁªìË¥¶‚Ä¶ Netty Á∫øÁ®ãÊ®°ÂûãNettyÁöÑÁ∫øÁ®ãÊ®°ÂûãÔºåÂ∞±ÊòØ‰∏ª‰ªé Reactor Â§öÁ∫øÁ®ãÊ®°ÂûãÔºåÂΩìÁÑ∂‰∫ÜÔºåNetty ÂèØ‰ª•Âú®‰ª•‰∏ä‰∏âÁßç Reactor Ê®°Âûã‰πãÈó¥ËøõË°åÂàáÊç¢„ÄÇ Êâ©ÂÖÖÔºöAIO ‰∏≠‰ΩøÁî®ÁöÑ Proactor Ê®°ÂûãÁî±Âõæ‰∏≠ÂèØ‰ª•ÁúãÂà∞Ôºö Procator InitiatorË¥üË¥£ÂàõÂª∫ProcatorÂíåHandlerÔºåÂπ∂Â∞ÜProcatorÂíåHandlerÈÉΩÈÄöËøáAsynchronous operation processorÊ≥®ÂÜåÂà∞ÂÜÖÊ†∏„ÄÇ Asynchronous operation processorË¥üË¥£Â§ÑÁêÜÊ≥®ÂÜåËØ∑Ê±ÇÔºåÂπ∂ÂÆåÊàêIOÊìç‰Ωú„ÄÇÂÆåÊàêIOÊìç‰ΩúÂêé‰ºöÈÄöÁü•procator„ÄÇ procatorÊ†πÊçÆ‰∏çÂêåÁöÑ‰∫ã‰ª∂Á±ªÂûãÂõûË∞É‰∏çÂêåÁöÑhandlerËøõË°å‰∏öÂä°Â§ÑÁêÜ„ÄÇhandlerÂÆåÊàê‰∏öÂä°Â§ÑÁêÜÔºåhandler‰πüÂèØ‰ª•Ê≥®ÂÜåÊñ∞ÁöÑhandlerÂà∞ÂÜÖÊ†∏ËøõÁ®ã„ÄÇ Reactor ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™Ë¢´Âä®ÁöÑ‰∫ã‰ª∂ÂàÜÁ¶ªÂíåÂàÜÂèëÊ®°ÂûãÔºåÊúçÂä°Á≠âÂæÖËØ∑Ê±Ç‰∫ã‰ª∂ÁöÑÂà∞Êù•ÔºåÂÜçÈÄöËøá‰∏çÂèóÈó¥Êñ≠ÁöÑÂêåÊ≠•Â§ÑÁêÜ‰∫ã‰ª∂Ôºå‰ªéËÄåÂÅöÂá∫ÂèçÂ∫îÔºåÈÄÇÁî®‰∫éÂêåÊó∂Êé•Êî∂Â§ö‰∏™ÊúçÂä°ËØ∑Ê±ÇÔºåÂπ∂‰∏î‰æùÊ¨°ÂêåÊ≠•ÁöÑÂ§ÑÁêÜÂÆÉ‰ª¨ÁöÑ‰∫ã‰ª∂È©±Âä®Á®ãÂ∫èÔºõ Proactor ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™‰∏ªÂä®ÁöÑ‰∫ã‰ª∂ÂàÜÁ¶ªÂíåÂàÜÂèëÊ®°ÂûãÔºõËøôÁßçËÆæËÆ°ÂÖÅËÆ∏Â§ö‰∏™‰ªªÂä°Âπ∂ÂèëÁöÑÊâßË°åÔºå‰ªéËÄåÊèêÈ´òÂêûÂêêÈáèÔºõÂπ∂ÂèØÊâßË°åËÄóÊó∂ÈïøÁöÑ‰ªªÂä°ÔºàÂêÑ‰∏™‰ªªÂä°Èó¥‰∫í‰∏çÂΩ±ÂìçÔºâÔºåÂºÇÊ≠•Êé•Êî∂ÂíåÂêåÊó∂Â§ÑÁêÜÂ§ö‰∏™ÊúçÂä°ËØ∑Ê±ÇÁöÑ‰∫ã‰ª∂È©±Âä®Á®ãÂ∫è„ÄÇ Proactor ÂÆûÁé∞Ëµ∑Êù•ÊØîËæÉÂ§çÊùÇÔºåÂõ†‰∏∫ÈúÄË¶ÅÂÜÖÊ†∏ÁöÑÊ∑±Â∫¶ÂèÇ‰∏éÔºåÂêåÊó∂ÁºìÂÜ≤Âå∫Âú®ËØªÊàñÂÜôÊìç‰ΩúÁöÑÊó∂Èó¥ÊÆµÂÜÖÂøÖÈ°ª‰øùÊåÅ‰ΩèÔºåÂèØËÉΩÈÄ†ÊàêÊåÅÁª≠ÁöÑ‰∏çÁ°ÆÂÆöÊÄßÔºåÂπ∂‰∏îÊØè‰∏™Âπ∂ÂèëÊìç‰ΩúÈÉΩË¶ÅÊ±ÇÊúâÁã¨Á´ãÁöÑÁºìÂ≠òÔºåÁõ∏ÊØîReactorÊ®°ÂûãÔºåÂú®SocketÂ∑≤ÁªèÂáÜÂ§áÂ•ΩËØªÊàñÂÜôÂâçÔºåÊòØ‰∏çË¶ÅÊ±ÇÂºÄËæüÁºìÂ≠òÁöÑ„ÄÇÁé∞Âú®È´òÂπ∂ÂèëÁΩëÁªúÁºñÁ®ãÂü∫Êú¨‰∏äËøòÊòØÈÉΩÈááÁî® Reactor Ê®°Âûã„ÄÇ ‰ªé Netty Áúã HSF/DubboÊúâ‰∫Ü NettyÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Ëá™Â∑±ÂéªÂÆûÁé∞‰∏Ä‰∏™ rpc Ê°ÜÊû∂‰∫ÜÔºåÂÖ∂ÂÆûÊúÄ‰∏∫ËëóÂêçÁöÑÂ∞±ÊòØ HSF„ÄÅDubbo‰∫ÜÔºå‰∫åËÄÖÈÉΩÊòØÈááÁî®‰∫Ü Netty + Hession„ÄÇ HSF Ê°ÜÊû∂‰∏≠ÈááÁî®Â¶Ç‰ªäÊµÅË°åÁöÑÁΩëÁªúÈÄö‰ø°Ê°ÜÊû∂ Netty Âä†‰∏ä Hession Êï∞ÊçÆÂ∫èÂàóÂåñÂçèËÆÆÂÆûÁé∞ HSF ÊúçÂä°Èó¥ÁöÑ‰∫§‰∫íÔºå‰∏ªË¶ÅËÄÉËôëÁÇπÊòØÂú®Â§ßÂπ∂ÂèëÈáèÊó∂ÔºåÊúçÂä°‰∫§‰∫íÊÄßËÉΩËææÂà∞ÊúÄ‰Ω≥„ÄÇËøôÁ±ª RPC ÂçèËÆÆÈááÁî®Â§öË∑ØÂ§çÁî®ÁöÑ TCP ÈïøËøûÊé•ÊñπÂºèÔºåÂú®ÊúçÂä°Êèê‰æõËÄÖÂíåË∞ÉÁî®ËÄÖÈó¥ÊúâÂ§ö‰∏™ÊúçÂä°ËØ∑Ê±ÇÂêåÊó∂Ë∞ÉÁî®Êó∂‰ºöÂÖ±Áî®Âêå‰∏Ä‰∏™ÈïøËøûÊé•ÔºåÂç≥‰∏Ä‰∏™ËøûÊé•‰∫§Êõø‰º†Ëæì‰∏çÂêåËØ∑Ê±ÇÁöÑÂ≠óËäÇÂùó„ÄÇÂÆÉÊó¢ÈÅøÂÖç‰∫ÜÂèçÂ§çÂª∫Á´ãËøûÊé•ÂºÄÈîÄÔºå‰πüÈÅøÂÖç‰∫ÜËøûÊé•ÁöÑÁ≠âÂæÖÈó≤ÁΩÆ‰ªéËÄåÂáèÂ∞ë‰∫ÜÁ≥ªÁªüËøûÊé•ÊÄªÊï∞ÔºåÂêåÊó∂ËøòÈÅøÂÖç‰∫Ü TCP È°∫Â∫è‰º†Ëæì‰∏≠ÁöÑÁ∫øÂ§¥ÈòªÂ°ûÔºàhead-of-line blockingÔºâÈóÆÈ¢ò„ÄÇ Hessian ÊòØ HSF Ê°ÜÊû∂‰∏≠ÈªòËÆ§‰ΩøÁî®ÁöÑÊï∞ÊçÆÂ∫èÂàóÂåñÂçèËÆÆÔºåÂú®Êï∞ÊçÆÈáèËæÉÂ∞èÊó∂ÊÄßËÉΩË°®Áé∞Âá∫‰ºóÔºåHessian ÁöÑ‰ºòÁÇπÊòØÁ≤æÁÆÄÈ´òÊïàÔºåÂêåÊó∂ÂèØ‰ª•Ë∑®ËØ≠Ë®Ä‰ΩøÁî®ÔºåÁõÆÂâçÊîØÊåÅ Java, C++, .net, Python, ruby Á≠âËØ≠Ë®Ä„ÄÇÂè¶Â§ñ Hessian ÂèØ‰ª•ÂÖÖÂàÜÂà©Áî® Web ÂÆπÂô®ÁöÑÊàêÁÜüÂäüËÉΩÔºåÂú®Â§ÑÁêÜÂ§ßÈáèÁî®Êà∑ËÆøÈóÆÊó∂ÂæàÊúâ‰ºòÂäøÔºåÂú®ËµÑÊ∫êÂàÜÈÖç„ÄÅÁ∫øÁ®ãÊéíÈòü„ÄÅÂºÇÂ∏∏Â§ÑÁêÜÁ≠âÊñπÈù¢ÈÉΩÂèØ‰ª•Áî± Web ÂÆπÂô®‰øùËØÅ„ÄÇ HSF Ê°ÜÊû∂ÂêåÊó∂‰πüÊîØÊåÅÂàáÊç¢‰ΩøÁî® Java Â∫èÂàóÂåñÔºåHession Áõ∏ÊØî JDK Ê†áÂáÜÁöÑÂ∫èÂàóÂåñÊñπÂºèÔºàÂç≥Âü∫‰∫é Serializable Êé•Âè£ÁöÑÊ†áÂáÜÂ∫èÂàóÂåñÔºâÔºåÂú®ÂÖ∏ÂûãÂú∫ÊôØ‰∏≠ÔºåÂÖ∂Â∫èÂàóÂåñÊó∂Èó¥ÂºÄÈîÄÂèØËÉΩÁº©Áü≠ 20 ÂÄç„ÄÇËôΩÁÑ∂ Hessian ‰∏çÊòØÊúÄÂø´ÁöÑÂ∫èÂàóÂåñÂçèËÆÆÔºå‰ΩÜÂÆÉÂØπ‰∫éÂ§çÊùÇ‰∏öÂä°ÂØπË±°ÁöÑÂ∫èÂàóÂåñÊ≠£Á°ÆÁéá„ÄÅÂáÜÁ°ÆÊÄßÁõ∏ËæÉ‰∫éÊúÄÁ®≥ÂÆöÁöÑ Java Â∫èÂàóÂåñÂπ∂‰∏çÈÄäËâ≤Â§™Â§ö„ÄÇ ‰∏öÁïåËøòÊúâ‰∏Ä‰∫õÊØî Hessian Êõ¥Âø´ÁöÑÂ∫èÂàóÂåñÂçèËÆÆÔºå‰ΩÜÂÆÉ‰ª¨Áõ∏ÂØπ‰∫é Hessian Âú®Â§çÊùÇÂú∫ÊôØ‰∏ãÁöÑÂ§ÑÁêÜËÉΩÂäõËøòÊòØ‰ºöÂ∑Æ‰∏Ä‰∫õÔºåÊâÄ‰ª• Hessian ÊòØÂú®ÊÄßËÉΩÂíåÁ®≥ÂÆöÊÄßÂêåÊó∂ËÄÉËôë‰∏ãÊúÄ‰ºòÁöÑÂ∫èÂàóÂåñÂçèËÆÆ„ÄÇ ÈòøÈáåÂ∑¥Â∑¥ÂΩìÊó∂Âú®ÂØπÂ§öÁßçÈÄö‰ø°ÂçèËÆÆÂíåÊï∞ÊçÆÂ∫èÂàóÂåñÁªÑ‰ª∂Á≠âÊµãËØï‰∏≠ÔºåNetty + Hession ÁöÑÁªÑÂêàÂú®‰∫íËÅîÁΩëÈ´òÂπ∂ÂèëÈáèÁöÑÂú∫ÊôØ‰∏ã,ÁâπÂà´ÊòØÂú® TPS ‰∏äËææÂà∞ 10w ‰ª•‰∏äÊó∂ÔºåÊÄßËÉΩÂíåÊïàÁéáËøúÊØî REST ÊàñËÄÖ Web Service È´ò„ÄÇ ‰ªé Netty Áúã kafka/metaQ ‰∏ªË¶ÅÂºïÁî®Ôºö kafka‰πãÊâÄ‰ª•Âø´ÁöÑÂÖ≠Â§ßÂéüÂõ† ËÆ≤Âà∞‰∫ÜkafkaÂø´ÁöÑ‰∏§‰∏™ÂéüÂõ†ÔºöÈ°µÁºìÂ≠òÊäÄÊúØ+Á£ÅÁõòÈ°∫Â∫èÂÜô+Èõ∂Êã∑Ë¥ù Kafka‰∏≠ÁöÑNIOÁΩëÁªúÈÄö‰ø°Ê®°Âûã ÂÖàÊù•ÂõûÁ≠îÈÇ£‰∏™ËÄÅÁîüÂ∏∏Ë∞àÁöÑÈóÆÈ¢òÔºåkafka‰∏∫‰ΩïËøô‰πàÂêûÂêêÈáèÂ§ßËÄå‰∏îËøòÂø´Ôºü ÊàëËÆ§‰∏∫‰∏ªË¶ÅÊòØ‰ª•‰∏ãÂá†ÁÇπÔºö ‰ΩøÁî®‰∫Ü NIO ÁöÑÁΩëÁªú I/O ÈÄö‰ø°Ê®°ÂûãÔºåÂ∞±ÊòØ I/O Â§çÁî®ÔºåÊâÄ‰ª•ÂáèÂéª‰∫ÜÁ≠âÂæÖÊï∞ÊçÆÂáÜÂ§áÁöÑÊó∂Èó¥ÔºåÂä†Âø´ÈÄüÂ∫¶Ôºõ ‰ΩøÁî®È°µÁºìÂ≠òÊäÄÊúØ„ÄåPage Cache„Äç„ÄÅÁ£ÅÁõòÈ°∫Â∫èÂÜô‰ª•Âèä sendfile ÁöÑÈõ∂Êã∑Ë¥ùÊäÄÊúØÂä†Âø´ËêΩÁõòÈÄüÂ∫¶Âíå‰º†ÈÄÅÈÄüÂ∫¶ÔºåÂõ†‰∏∫ Kafka ‰∏≠Â≠òÂú®Â§ßÈáèÁöÑÁΩëÁªúÊï∞ÊçÆÊåÅ‰πÖÂåñÂà∞Á£ÅÁõòÂíåÁ£ÅÁõòÊñá‰ª∂ÈÄöËøáÁΩëÁªúÂèëÈÄÅÁöÑËøáÁ®ãÔºõ ÂàÜÂå∫ÂàÜÊÆµ + Á¥¢ÂºïÔºåÊâπÈáèËØªÂÜô„ÄÅÊâπÈáèÂéãÁº©„ÄÇ kafka ‰∏≠ÁöÑ NIO ÁΩëÁªúÈÄö‰ø°Ê®°ÂûãKafkaÁöÑÁΩëÁªúÈÄö‰ø°Ê®°ÂûãÊòØÂü∫‰∫éNIOÁöÑ‰∏ª‰ªéReactorÂ§öÁ∫øÁ®ãÊ®°ÂûãÊù•ËÆæËÆ°ÁöÑ„ÄÇÂ∞±ÊòØÊàëÂú® Netty ‰∏ÄËäÇ‰∏≠ÊèêÂèäÂà∞ÁöÑÔºåËøôÈáåÂÜçÊ¨°Êù•ÂõûÈ°æ‰∏ÄÊ¨°ÔºåÂÖàÂºïÁî®KafkaÊ∫êÁ†Å‰∏≠Ê≥®ÈáäÁöÑ‰∏ÄÊÆµËØùÔºö An NIO socket server. The threading model is 1 Acceptor thread that handles new connections. Acceptor has N Processor threads that each have their own selector and read requests from sockets. M Handler threads that handle requests and produce responses back to the processor threads for writing. Áõ∏‰ø°Â§ßÂÆ∂Áúã‰∫Ü‰∏äÈù¢ÁöÑËøôÊÆµÂºïÊñáÊ≥®ÈáäÂêéÔºåÂ§ßËá¥ÂèØ‰ª•‰∫ÜËß£Âà∞KafkaÁöÑÁΩëÁªúÈÄö‰ø°Â±ÇÊ®°ÂûãÔºå‰∏ªË¶ÅÈááÁî®‰∫Ü1Ôºà1‰∏™AcceptorÁ∫øÁ®ãÔºâ+NÔºàN‰∏™ProcessorÁ∫øÁ®ãÔºâ+MÔºàM‰∏™‰∏öÂä°Â§ÑÁêÜÁ∫øÁ®ãÔºâ„ÄÇ‰∏ãÈù¢ÁöÑË°®Ê†ºÁÆÄË¶ÅÁöÑÂàó‰∏æ‰∫Ü‰∏ãÔºàËøôÈáåÂÖàÁÆÄÂçïÁöÑÁúã‰∏ãÂêéÈù¢Ëøò‰ºöËØ¶ÁªÜËØ¥ÊòéÔºâÔºö„ÄéAcceptor Â∞±ÊòØ NIO ‰∏≠ÁöÑ Selector„Äè Á∫øÁ®ãÊï∞ Á∫øÁ®ãÂêç Á∫øÁ®ãÂÖ∑‰ΩìËØ¥Êòé 1 kafka-socket-acceptor_%x AcceptorÁ∫øÁ®ãÔºåË¥üË¥£ÁõëÂê¨ClientÁ´ØÂèëËµ∑ÁöÑËØ∑Ê±Ç N kafka-network-thread_%d ProcessorÁ∫øÁ®ãÔºåË¥üË¥£ÂØπSocketËøõË°åËØªÂÜô M kafka-request-handler-_%d WorkerÁ∫øÁ®ãÔºåÂ§ÑÁêÜÂÖ∑‰ΩìÁöÑ‰∏öÂä°ÈÄªËæëÂπ∂ÁîüÊàêResponseËøîÂõû KafkaÁΩëÁªúÈÄö‰ø°Â±ÇÁöÑÂÆåÊï¥Ê°ÜÊû∂ÂõæÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö ËøôÈáåÂèØ‰ª•ÁÆÄÂçïÊÄªÁªì‰∏Ä‰∏ãÂÖ∂ÁΩëÁªúÈÄö‰ø°Ê®°Âûã‰∏≠ÁöÑÂá†‰∏™ÈáçË¶ÅÊ¶ÇÂøµÔºö Ôºà1ÔºâAcceptorÔºö1‰∏™Êé•Êî∂Á∫øÁ®ãÔºåË¥üË¥£ÁõëÂê¨Êñ∞ÁöÑËøûÊé•ËØ∑Ê±ÇÔºåÂêåÊó∂Ê≥®ÂÜåOP_ACCEPT ‰∫ã‰ª∂ÔºåÂ∞ÜÊñ∞ÁöÑËøûÊé•ÊåâÁÖß‚Äúround robin‚ÄùÊñπÂºè‰∫§ÁªôÂØπÂ∫îÁöÑ Processor Á∫øÁ®ãÂ§ÑÁêÜÔºõ Ôºà2ÔºâProcessorÔºöN‰∏™Â§ÑÁêÜÂô®Á∫øÁ®ãÔºåÂÖ∂‰∏≠ÊØè‰∏™ Processor ÈÉΩÊúâËá™Â∑±ÁöÑ selectorÔºåÂÆÉ‰ºöÂêë Acceptor ÂàÜÈÖçÁöÑ SocketChannel Ê≥®ÂÜåÁõ∏Â∫îÁöÑ OP_READ ‰∫ã‰ª∂ÔºåN ÁöÑÂ§ßÂ∞èÁî±‚Äúnum.networker.threads‚ÄùÂÜ≥ÂÆöÔºõ Ôºà3ÔºâKafkaRequestHandlerÔºöM‰∏™ËØ∑Ê±ÇÂ§ÑÁêÜÁ∫øÁ®ãÔºåÂåÖÂê´Âú®Á∫øÁ®ãÊ±†‚ÄîKafkaRequestHandlerPoolÂÜÖÈÉ®Ôºå‰ªéRequestChannelÁöÑÂÖ®Â±ÄËØ∑Ê±ÇÈòüÂàó‚ÄîrequestQueue‰∏≠Ëé∑ÂèñËØ∑Ê±ÇÊï∞ÊçÆÂπ∂‰∫§ÁªôKafkaApisÂ§ÑÁêÜÔºåMÁöÑÂ§ßÂ∞èÁî±‚Äúnum.io.threads‚ÄùÂÜ≥ÂÆöÔºõ Ôºà4ÔºâRequestChannelÔºöÂÖ∂‰∏∫KafkaÊúçÂä°Á´ØÁöÑËØ∑Ê±ÇÈÄöÈÅìÔºåËØ•Êï∞ÊçÆÁªìÊûÑ‰∏≠ÂåÖÂê´‰∫Ü‰∏Ä‰∏™ÂÖ®Â±ÄÁöÑËØ∑Ê±ÇÈòüÂàó requestQueueÂíåÂ§ö‰∏™‰∏éProcessorÂ§ÑÁêÜÂô®Áõ∏ÂØπÂ∫îÁöÑÂìçÂ∫îÈòüÂàóresponseQueueÔºåÊèê‰æõÁªôProcessor‰∏éËØ∑Ê±ÇÂ§ÑÁêÜÁ∫øÁ®ãKafkaRequestHandlerÂíåKafkaApis‰∫§Êç¢Êï∞ÊçÆÁöÑÂú∞ÊñπÔºõ Ôºà5ÔºâNetworkClientÔºöÂÖ∂Â∫ïÂ±ÇÊòØÂØπ Java NIO ËøõË°åÁõ∏Â∫îÁöÑÂ∞ÅË£ÖÔºå‰Ωç‰∫éKafkaÁöÑÁΩëÁªúÊé•Âè£Â±Ç„ÄÇKafkaÊ∂àÊÅØÁîü‰∫ßËÄÖÂØπË±°‚ÄîKafkaProducerÁöÑsendÊñπÊ≥ï‰∏ªË¶ÅË∞ÉÁî®NetworkClientÂÆåÊàêÊ∂àÊÅØÂèëÈÄÅÔºõ Ôºà6ÔºâSocketServerÔºöÂÖ∂ÊòØ‰∏Ä‰∏™NIOÁöÑÊúçÂä°ÔºåÂÆÉÂêåÊó∂ÂêØÂä®‰∏Ä‰∏™AcceptorÊé•Êî∂Á∫øÁ®ãÂíåÂ§ö‰∏™ProcessorÂ§ÑÁêÜÂô®Á∫øÁ®ã„ÄÇÊèê‰æõ‰∫Ü‰∏ÄÁßçÂÖ∏ÂûãÁöÑReactorÂ§öÁ∫øÁ®ãÊ®°ÂºèÔºåÂ∞ÜÊé•Êî∂ÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÂíåÂ§ÑÁêÜËØ∑Ê±ÇÁõ∏ÂàÜÁ¶ªÔºõ Ôºà7ÔºâKafkaServerÔºö‰ª£Ë°®‰∫Ü‰∏Ä‰∏™Kafka BrokerÁöÑÂÆû‰æãÔºõÂÖ∂startupÊñπÊ≥ï‰∏∫ÂÆû‰æãÂêØÂä®ÁöÑÂÖ•Âè£Ôºõ Ôºà8ÔºâKafkaApisÔºöKafkaÁöÑ‰∏öÂä°ÈÄªËæëÂ§ÑÁêÜApiÔºåË¥üË¥£Â§ÑÁêÜ‰∏çÂêåÁ±ªÂûãÁöÑËØ∑Ê±ÇÔºõÊØîÂ¶Ç‚ÄúÂèëÈÄÅÊ∂àÊÅØ‚Äù„ÄÅ‚ÄúËé∑ÂèñÊ∂àÊÅØÂÅèÁßªÈáè‚Äîoffset‚ÄùÂíå‚ÄúÂ§ÑÁêÜÂøÉË∑≥ËØ∑Ê±Ç‚ÄùÁ≠âÔºõ Page Cache(È°µÁºìÂ≠òÊäÄÊúØ)‰ªÄ‰πàÊòØÈ°µÁºìÂ≠òÊìç‰ΩúÁ≥ªÁªüÊú¨Ë∫´Êúâ‰∏ÄÂ±ÇÁºìÂ≠òÔºåÂè´ÂÅöpage cacheÔºåÊòØÂú®ÂÜÖÂ≠òÈáåÁöÑÁºìÂ≠òÔºåÊàë‰ª¨‰πüÂèØ‰ª•Áß∞‰πã‰∏∫os cacheÔºåÊÑèÊÄùÂ∞±ÊòØÊìç‰ΩúÁ≥ªÁªüËá™Â∑±ÁÆ°ÁêÜÁöÑÁºìÂ≠ò„ÄÇ Â•ΩÂ§ÑÊòØ‰ªÄ‰πàËøôÁßçÊñπÂºèÁõ∏ÂΩì‰∫éËØªÂÜôÂÜÖÂ≠òÔºå‰∏çÊòØÂú®ËØªÂÜôÁ£ÅÁõòÔºå‰∏™‰∫∫ËßâÂæóÊúâÁÇπÁ±ª‰ºº‰∫éÁõ¥Êé•Â∞ÜÁ£ÅÁõòÂíåÂÜÖÊ†∏ÁºìÂÜ≤Âå∫Êîæ‰∏ÄÂùó‰∫Ü„ÄåÊàë‰ª¨Âπ≥Â∏∏ÁöÑ I/O Â∞±ÊòØÁî® DMA Â∞Ü ÂÜÖÊ†∏ÁºìÂÜ≤Âå∫ÂíåÁ£ÅÁõòËøûÊé•„ÄçÔºåÊó¢ÁÑ∂ÊòØËØªÂÜôÂÜÖÂ≠òÔºåÂ•ΩÂ§ÑÂ∞±ÊòØÂæàÂø´ÂæàÂø´„ÄÇ Â¶Ç‰Ωï‰ΩøÁî®È°µÁºìÂ≠ò‰Ω†Âú®ÂÜôÁ£ÅÁõòÊñá‰ª∂ÁöÑÊó∂ÂÄôÔºåÂèØ‰ª•Áõ¥Êé•ÂÜôÂÖ•os cache ‰∏≠Ôºå‰πüÂ∞±ÊòØ‰ªÖ‰ªÖÂÜôÂÖ•ÂÜÖÂ≠ò‰∏≠ÔºåÊé•‰∏ãÊù•Áî±Êìç‰ΩúÁ≥ªÁªüËá™Â∑±ÂÜ≥ÂÆö‰ªÄ‰πàÊó∂ÂÄôÊääos cache ÈáåÁöÑÊï∞ÊçÆÁúüÁöÑÂà∑ÂÖ•Âà∞Á£ÅÁõò‰∏≠„ÄåÂà∑ÁõòÂÖ∂ÂÆûÂ∞±ÊòØÁî®Áõ¥Êé•Âú®Êú´Â∞æËøΩÂä†Ôºå‰πüÂø´ÁöÑ‰∏ÄÊâπ„Äç„ÄÇ ‰∏∫‰Ωï‰∏ç‰ΩøÁî® jvm ‰∏≠ÁöÑÂÜÖÂ≠ò ÈÅøÂÖçObjectÊ∂àËÄóÔºöÂ¶ÇÊûúÊòØ‰ΩøÁî® Java Â†ÜÔºåJavaÂØπË±°ÁöÑÂÜÖÂ≠òÊ∂àËÄóÊØîËæÉÂ§ßÔºåÈÄöÂ∏∏ÊòØÊâÄÂ≠òÂÇ®Êï∞ÊçÆÁöÑ‰∏§ÂÄçÁîöËá≥Êõ¥Â§öÔºõ ÈÅøÂÖçGCÈóÆÈ¢òÔºöÈöèÁùÄJVM‰∏≠Êï∞ÊçÆ‰∏çÊñ≠Â¢ûÂ§öÔºåÂûÉÂúæÂõûÊî∂Â∞Ü‰ºöÂèòÂæóÂ§çÊùÇ‰∏éÁºìÊÖ¢Ôºå‰ΩøÁî®Á≥ªÁªüÁºìÂ≠òÂ∞±‰∏ç‰ºöÂ≠òÂú®GCÈóÆÈ¢òÔºõ Êìç‰ΩúÁ≥ªÁªüÂØπÈ°µÁºìÂ≠òÊúâÂæàÂ§ö‰ºòÂåñÔºåÊèê‰æõ‰∫Ü write-behind„ÄÅread-ahead‰ª•ÂèäflushÁ≠âÂ§öÁßçÊú∫Âà∂„ÄÇ Á£ÅÁõòÈ°∫Â∫èÂÜôÁ£ÅÁõòÈ°∫Â∫èÂÜôÔºå‰ªÖ‰ªÖÂ∞ÜÊï∞ÊçÆËøΩÂä†Âà∞Êñá‰ª∂ÁöÑÊú´Â∞æ(append)ÔºåËÄå‰∏çÊòØÂú®Êñá‰ª∂ÁöÑÈöèÊú∫‰ΩçÁΩÆÊù•‰øÆÊîπÊï∞ÊçÆ„ÄÇÂáèÂéª‰∫ÜÂØªÂùÄÁöÑÊó∂Èó¥ÔºåÊÄßËÉΩÁîöËá≥ÊØîÂÜÖÂ≠òÈöèÊú∫ËØªÂÜôË¶ÅÂø´ÔºåËøôÊ†∑Â∞±ÊûÅÂ§ßÁöÑÂä†Âø´‰∫Ü os cache ËêΩÁõòÁöÑÈÄüÂ∫¶ÔºåÂêûÂêêÈáèÊõ¥Â§ß‰∫Ü„ÄÇ ‰ΩÜÊòØÔºåËøôÁßçÊñπÊ≥ïÊúâ‰∏Ä‰∏™Áº∫Èô∑‚Äî‚Äî Ê≤°ÊúâÂäûÊ≥ïÂà†Èô§Êï∞ÊçÆ ÔºåÊâÄ‰ª•KafkaÊòØ‰∏ç‰ºöÂà†Èô§Êï∞ÊçÆÁöÑÔºåÂÆÉ‰ºöÊääÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩ‰øùÁïô‰∏ãÊù•ÔºåÊØè‰∏™Ê∂àË¥πËÄÖÔºàConsumerÔºâÂØπÊØè‰∏™TopicÈÉΩÊúâ‰∏Ä‰∏™offsetÁî®Êù•Ë°®Á§∫ËØªÂèñÂà∞‰∫ÜÁ¨¨Âá†Êù°Êï∞ÊçÆ „ÄÇ Â¶ÇÊûú‰∏çÂà†Èô§Á°¨ÁõòËÇØÂÆö‰ºöË¢´ÊíëÊª°ÔºåÊâÄ‰ª•KakfaÊèê‰æõ‰∫Ü‰∏§ÁßçÁ≠ñÁï•Êù•Âà†Èô§Êï∞ÊçÆ„ÄÇ‰∏ÄÊòØÂü∫‰∫éÊó∂Èó¥Ôºå‰∫åÊòØÂü∫‰∫épartitionÊñá‰ª∂Â§ßÂ∞è„ÄÇ sendfile ÁöÑÈõ∂Êã∑Ë¥ùÊäÄÊúØÂÖÅËÆ∏Êìç‰ΩúÁ≥ªÁªüÂ∞ÜÊï∞ÊçÆ‰ªéPage Cache Áõ¥Êé•ÂèëÈÄÅÂà∞ÁΩëÁªúÔºåÂè™ÈúÄË¶ÅÊúÄÂêé‰∏ÄÊ≠•ÁöÑcopyÊìç‰ΩúÂ∞ÜÊï∞ÊçÆÂ§çÂà∂Âà∞ NIC ÁºìÂÜ≤Âå∫Ôºå ËøôÊ†∑ÈÅøÂÖçÈáçÊñ∞Â§çÂà∂Êï∞ÊçÆ „ÄÇÈÄöËøáËøôÁßç ‚ÄúÈõ∂Êã∑Ë¥ù‚Äù ÁöÑÊú∫Âà∂ÔºåPage Cache ÁªìÂêà sendfile ÊñπÊ≥ïÔºåKafkaÊ∂àË¥πÁ´ØÁöÑÊÄßËÉΩ‰πüÂ§ßÂπÖÊèêÂçá„ÄÇËøô‰πüÊòØ‰∏∫‰ªÄ‰πàÊúâÊó∂ÂÄôÊ∂àË¥πÁ´ØÂú®‰∏çÊñ≠Ê∂àË¥πÊï∞ÊçÆÊó∂ÔºåÊàë‰ª¨Âπ∂Ê≤°ÊúâÁúãÂà∞Á£ÅÁõòioÊØîËæÉÈ´òÔºåÊ≠§ÂàªÊ≠£ÊòØÊìç‰ΩúÁ≥ªÁªüÁºìÂ≠òÂú®Êèê‰æõÊï∞ÊçÆ„ÄÇ ËøôÈáåÊãìÂ±ï‰∏Ä‰∏ãÔºö RocketMQ ÈÄâÊã©‰∫Ü mmap + write ËøôÁßçÈõ∂Êã∑Ë¥ùÊñπÂºèÔºåÈÄÇÁî®‰∫é‰∏öÂä°Á∫ßÊ∂àÊÅØËøôÁßçÂ∞èÂùóÊñá‰ª∂ÁöÑÊï∞ÊçÆÊåÅ‰πÖÂåñÂíå‰º†ËæìÔºõËÄå Kafka ÈááÁî®ÁöÑÊòØ sendfile ËøôÁßçÈõ∂Êã∑Ë¥ùÊñπÂºèÔºåÈÄÇÁî®‰∫éÁ≥ªÁªüÊó•ÂøóÊ∂àÊÅØËøôÁßçÈ´òÂêûÂêêÈáèÁöÑÂ§ßÂùóÊñá‰ª∂ÁöÑÊï∞ÊçÆÊåÅ‰πÖÂåñÂíå‰º†Ëæì„ÄÇ‰ΩÜÊòØÂÄºÂæóÊ≥®ÊÑèÁöÑ‰∏ÄÁÇπÊòØÔºåKafka ÁöÑÁ¥¢ÂºïÊñá‰ª∂‰ΩøÁî®ÁöÑÊòØ mmap + write ÊñπÂºèÔºåÊï∞ÊçÆÊñá‰ª∂‰ΩøÁî®ÁöÑÊòØ sendfile ÊñπÂºè„ÄÇ ÂàÜÂå∫ÂàÜÊÆµ + Á¥¢Âºï kafka‰∏≠ÁöÑ message ÊòØÊåâ topic Â≠òÂÇ®ÁöÑÔºåÊØè‰∏™ topic ÂèàÂèØ‰ª•ÊúâÂ§ö‰∏™ÂàÜÂå∫ partition„ÄåÊØè‰∏™partition ÈÉΩÊúâ‰∏Ä‰∏™ leaderÔºåËã•Âπ≤‰∏™ follower„ÄçÔºåÊØè‰∏™partitionÂØπÂ∫î‰∫ÜÊìç‰ΩúÁ≥ªÁªü‰∏äÁöÑ‰∏Ä‰∏™Êñá‰ª∂Â§π„Äå‰πüÂ∞±ÊòØÂçï‰∏™broker‰∏ä„ÄçÔºåÁÑ∂Âêé partition ÂèàÁî±Â§ö‰∏™ segment ÁªÑÊàêÔºåÂàÜÂå∫ÂàÜÊÆµÔºåËøôÊ†∑Êâ´ÊèèËµ∑Êù•ÊÄßËÉΩÊõ¥Âø´ÔºåÂõ†‰∏∫Êìç‰ΩúÊñá‰ª∂Âè™ÈúÄË¶ÅÊìç‰Ωú‰∏Ä‰∏™ segment Â∞±ÂèØ‰ª•‰∫ÜÔºåÁªÜÁ≤íÂ∫¶Âåñ‰∫ÜÔºõ ‰∏∫‰∫ÜÊõ¥Âø´ÁöÑÊ£ÄÁ¥¢ segmentÔºå‰ΩøÁî®‰∫ÜÁ¥¢ÂºïÊñá‰ª∂ÔºåËÄå‰∏∫‰∫ÜÁ¥¢ÂºïÊñá‰ª∂Êõ¥Âø´ÁöÑËØªÂèñÔºåÂèàÈááÁî®‰∫ÜÈõ∂Êã∑Ë¥ùÊäÄÊúØ‰∏≠ÁöÑ mmap + write„ÄÇ„ÄåÊòØ‰∏çÊòØÊå∫ÁâõÈÄºÔºÅ„Äç ËøôÁßçÂàÜÂå∫ÂàÜÊÆµ+Á¥¢ÂºïÁöÑËÆæËÆ°Ôºå‰∏ç‰ªÖÊèêÂçá‰∫ÜÊï∞ÊçÆËØªÂèñÁöÑÊïàÁéáÔºåÂêåÊó∂‰πüÊèêÈ´ò‰∫ÜÊï∞ÊçÆÊìç‰ΩúÁöÑÂπ∂Ë°åÂ∫¶„ÄÇ ÊâπÈáèËØªÂÜôKafkaÊï∞ÊçÆËØªÂÜô‰πüÊòØÊâπÈáèÁöÑËÄå‰∏çÊòØÂçïÊù°ÁöÑ„ÄÇ Èô§‰∫ÜÂà©Áî®Â∫ïÂ±ÇÁöÑÊäÄÊúØÂ§ñÔºåKafkaËøòÂú®Â∫îÁî®Á®ãÂ∫èÂ±ÇÈù¢Êèê‰æõ‰∫Ü‰∏Ä‰∫õÊâãÊÆµÊù•ÊèêÂçáÊÄßËÉΩ„ÄÇÊúÄÊòéÊòæÁöÑÂ∞±ÊòØ‰ΩøÁî®ÊâπÊ¨°„ÄÇÂú®ÂêëKafkaÂÜôÂÖ•Êï∞ÊçÆÊó∂ÔºåÂèØ‰ª•ÂêØÁî®ÊâπÊ¨°ÂÜôÂÖ•ÔºåËøôÊ†∑ÂèØ‰ª•ÈÅøÂÖçÂú®ÁΩëÁªú‰∏äÈ¢ëÁπÅ‰º†ËæìÂçï‰∏™Ê∂àÊÅØÂ∏¶Êù•ÁöÑÂª∂ËøüÂíåÂ∏¶ÂÆΩÂºÄÈîÄ„ÄÇÂÅáËÆæÁΩëÁªúÂ∏¶ÂÆΩ‰∏∫10MB/SÔºå‰∏ÄÊ¨°ÊÄß‰º†Ëæì10MBÁöÑÊ∂àÊÅØÊØî‰º†Ëæì1KBÁöÑÊ∂àÊÅØ10000‰∏áÊ¨°ÊòæÁÑ∂Ë¶ÅÂø´ÂæóÂ§ö„ÄÇ ÊâπÈáèÂéãÁº©Âú®ÂæàÂ§öÊÉÖÂÜµ‰∏ãÔºåÁ≥ªÁªüÁöÑÁì∂È¢à‰∏çÊòØCPUÊàñÁ£ÅÁõòÔºåËÄåÊòØÁΩëÁªúIOÔºåÂØπ‰∫éÈúÄË¶ÅÂú®ÂπøÂüüÁΩë‰∏äÁöÑÊï∞ÊçÆ‰∏≠ÂøÉ‰πãÈó¥ÂèëÈÄÅÊ∂àÊÅØÁöÑÊï∞ÊçÆÊµÅÊ∞¥Á∫øÂ∞§ÂÖ∂Â¶ÇÊ≠§„ÄÇËøõË°åÊï∞ÊçÆÂéãÁº©‰ºöÊ∂àËÄóÂ∞ëÈáèÁöÑCPUËµÑÊ∫ê,‰∏çËøáÂØπ‰∫ékafkaËÄåË®Ä,ÁΩëÁªúIOÊõ¥Â∫îËØ•ÈúÄË¶ÅËÄÉËôëÔºåÊîØÊåÅÂ§öÁßçÂéãÁº©ÔºåÊàëËá™Â∑±ÊúâÂú®È°πÁõÆ‰∏≠‰ΩøÁî® gzipÔºåÁöÑÁ°ÆÊòØÊúâÂä†ÈÄüÔºåÂπ∂‰∏îÊ∂àË¥πÁ´ØÊó†ÈúÄËá™Â∑±Ëß£ÂéãÔºåËá™Âä®Ëß£Âéã„ÄÇ ÊÄªÁªìkafkaÂø´ÁöÑÂéüÂõ†Ôºö„Äå‰ªéÊµÅÁ®ã‰∏äËØ¥„Äç Producer ÂèëÈÄÅÊ∂àÊÅØÊó∂ËøõË°åÊâπÈáèÁöÑÂèëÈÄÅÂπ∂‰∏îÊâπÈáèÂéãÁº©ÔºåÂáèËΩª ÁΩëÁªú I/O ÂéãÂäõÔºåÁÑ∂ÂêéÊòØ‰ΩøÁî®‰∫Ü NIO ‰∏≠ÁöÑ ÁΩëÁªúI/O Ê®°ÂûãÔºåÈááÁî® I/O Â§çÁî®Êú∫Âà∂ÔºåÁî® Selector ÂéªËΩÆËØ¢ÊòØÂê¶ÂáÜÂ§áÂ•Ω‰∫ÜÂèëÈÄÅÁöÑÊï∞ÊçÆÔºåÈÅøÂÖçÁöÑÂÖ∂‰ªñÁ∫øÁ®ãÁöÑÊó†ÊïàÁ≠âÂæÖÔºåÁ≠âÂà∞Êï∞ÊçÆ‰º†ÈÄÅÂà∞ÊúçÂä°Âô®Êó∂Ôºå‰ºöÈ¶ñÂÖàÁî®Á¥¢ÂºïÂéªÊâæÂà∞ÂØπÂ∫îÁöÑsegmentÔºåÁ¥¢ÂºïÊñá‰ª∂ÈááÁî®‰∫Ü mmap + write ÂáèÂ∞ë cpu Êã∑Ë¥ùÊ¨°Êï∞Âä†Âø´ËÆøÈóÆÈÄüÂ∫¶ÔºåÊâæÂà∞ÂØπÂ∫îÁöÑ segment ‰πãÂêéÔºå‰ºöÂ∞ÜÊï∞ÊçÆÂèëÈÄÅÂà∞ Page CacheÔºåPage Cache ‰ºöÂú®ÂêàÈÄÇÁöÑÊó∂ÂÄôËøõË°åÂà∑ÁõòÔºåÂà∑ÁõòÊòØÈ°∫Â∫èËØªÂÜôÁ£ÅÁõòÔºåÊâÄ‰ª•Âà∑Áõò‰πüÂæàÂø´ÔºåÁÑ∂ÂêéÊ∂àË¥πËÄÖË¶ÅÊ∂àË¥πÊó∂ÔºåÂà©Áî® sendfile ÁöÑÈõ∂Êã∑Ë¥ùÊäÄÊúØÁõ¥Êé•‰ªé Page Cache ÂèëÈÄÅÂà∞ SocketChannelÔºåÊó†ÈúÄËøõË°åÂ§ö‰ΩôÁöÑÊã∑Ë¥ùÂíå‰∏ä‰∏ãÊñáÂàáÊç¢ÔºåÁõ¥Êé•Âú®ÂÜÖÊ†∏ÊÄÅ‰∏≠ÂÆåÊàêÔºåËá™Ê≠§ÔºåÊï∞ÊçÆÂèëÈÄÅÁªôÂÆ¢Êà∑Á´Ø„ÄÇ]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Èõ∂Êã∑Ë¥ù</tag>
        <tag>NIO</tag>
        <tag>Netty</tag>
        <tag>HSF</tag>
        <tag>Kafka</tag>
        <tag>metaQ</tag>
        <tag>Dubbo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysql Â§ç‰π†]]></title>
    <url>%2F2020%2F03%2F13%2FMysql%20%E5%86%8D%E5%BA%A6%E5%87%BA%E5%8F%91.html</url>
    <content type="text"><![CDATA[ÁõÆÂΩïÔºö/MySQLÂÆûÊàò45ËÆ≤ [161.8M] ‚î£‚îÅ‚îÅ01ËÆ≤Âü∫Á°ÄÊû∂ÊûÑÔºö‰∏ÄÊù°SQLÊü•ËØ¢ËØ≠Âè•ÊòØÂ¶Ç‰ΩïÊâßË°åÁöÑ.html [54.2K] ‚î£‚îÅ‚îÅ02ËÆ≤Êó•ÂøóÁ≥ªÁªüÔºö‰∏ÄÊù°SQLÊõ¥Êñ∞ËØ≠Âè•ÊòØÂ¶Ç‰ΩïÊâßË°åÁöÑ.html [65K] ‚î£‚îÅ‚îÅ03ËÆ≤‰∫ãÂä°ÈöîÁ¶ªÔºö‰∏∫‰ªÄ‰πà‰Ω†Êîπ‰∫ÜÊàëËøòÁúã‰∏çËßÅ.html [56.8K] ‚î£‚îÅ‚îÅ04ËÆ≤Ê∑±ÂÖ•ÊµÖÂá∫Á¥¢ÂºïÔºà‰∏äÔºâ.html [59.9K] ‚î£‚îÅ‚îÅ05ËÆ≤Ê∑±ÂÖ•ÊµÖÂá∫Á¥¢ÂºïÔºà‰∏ãÔºâ.html [63.2K] ‚î£‚îÅ‚îÅ06ËÆ≤ÂÖ®Â±ÄÈîÅÂíåË°®ÈîÅÔºöÁªôË°®Âä†‰∏™Â≠óÊÆµÊÄé‰πàÊúâËøô‰πàÂ§öÈòªÁ¢ç.html [63.9K] ‚î£‚îÅ‚îÅ07ËÆ≤Ë°åÈîÅÂäüËøáÔºöÊÄé‰πàÂáèÂ∞ëË°åÈîÅÂØπÊÄßËÉΩÁöÑÂΩ±Âìç.html [60.9K] ‚î£‚îÅ‚îÅ08ËÆ≤‰∫ãÂä°Âà∞Â∫ïÊòØÈöîÁ¶ªÁöÑËøòÊòØ‰∏çÈöîÁ¶ªÁöÑ.html [69K] ‚î£‚îÅ‚îÅ09ËÆ≤ÊôÆÈÄöÁ¥¢ÂºïÂíåÂîØ‰∏ÄÁ¥¢ÂºïÔºåÂ∫îËØ•ÊÄé‰πàÈÄâÊã©.html [70K] ‚î£‚îÅ‚îÅ10ËÆ≤MySQL‰∏∫‰ªÄ‰πàÊúâÊó∂ÂÄô‰ºöÈÄâÈîôÁ¥¢Âºï.html [67.1K] ‚î£‚îÅ‚îÅ11ËÆ≤ÊÄé‰πàÁªôÂ≠óÁ¨¶‰∏≤Â≠óÊÆµÂä†Á¥¢Âºï.html [54.6K] ‚î£‚îÅ‚îÅ12ËÆ≤‰∏∫‰ªÄ‰πàÊàëÁöÑMySQL‰ºö‚ÄúÊäñ‚Äù‰∏Ä‰∏ã.html [62K] ‚î£‚îÅ‚îÅ13ËÆ≤‰∏∫‰ªÄ‰πàË°®Êï∞ÊçÆÂà†Êéâ‰∏ÄÂçäÔºåË°®Êñá‰ª∂Â§ßÂ∞è‰∏çÂèò.html [60.2K] ‚î£‚îÅ‚îÅ14ËÆ≤countËøô‰πàÊÖ¢ÔºåÊàëËØ•ÊÄé‰πàÂäû.html [64.2K] ‚î£‚îÅ‚îÅ15ËÆ≤Á≠îÁñëÊñáÁ´†Ôºà‰∏ÄÔºâÔºöÊó•ÂøóÂíåÁ¥¢ÂºïÁõ∏ÂÖ≥ÈóÆÈ¢ò.html [73.4K] ‚î£‚îÅ‚îÅ16ËÆ≤‚Äúorderby‚ÄùÊòØÊÄé‰πàÂ∑•‰ΩúÁöÑ.html [74.3K] ‚î£‚îÅ‚îÅ17ËÆ≤Â¶Ç‰ΩïÊ≠£Á°ÆÂú∞ÊòæÁ§∫ÈöèÊú∫Ê∂àÊÅØ.html [63.5K] ‚î£‚îÅ‚îÅ18ËÆ≤‰∏∫‰ªÄ‰πàËøô‰∫õSQLËØ≠Âè•ÈÄªËæëÁõ∏ÂêåÔºåÊÄßËÉΩÂç¥Â∑ÆÂºÇÂ∑®Â§ß.html [62.1K] ‚î£‚îÅ‚îÅ19ËÆ≤‰∏∫‰ªÄ‰πàÊàëÂè™Êü•‰∏ÄË°åÁöÑËØ≠Âè•Ôºå‰πüÊâßË°åËøô‰πàÊÖ¢.html [59.6K] ‚î£‚îÅ‚îÅ20ËÆ≤ÂπªËØªÊòØ‰ªÄ‰πàÔºåÂπªËØªÊúâ‰ªÄ‰πàÈóÆÈ¢ò.html [67.2K] ‚î£‚îÅ‚îÅ21ËÆ≤‰∏∫‰ªÄ‰πàÊàëÂè™Êîπ‰∏ÄË°åÁöÑËØ≠Âè•ÔºåÈîÅËøô‰πàÂ§ö.html [68.7K] ‚î£‚îÅ‚îÅ22ËÆ≤MySQLÊúâÂì™‰∫õ‚ÄúÈ•ÆÈ∏©Ê≠¢Ê∏¥‚ÄùÊèêÈ´òÊÄßËÉΩÁöÑÊñπÊ≥ï.html [75.2K] ‚î£‚îÅ‚îÅ23ËÆ≤MySQLÊòØÊÄé‰πà‰øùËØÅÊï∞ÊçÆ‰∏ç‰∏¢ÁöÑ.html [65.4K] ‚î£‚îÅ‚îÅ24ËÆ≤MySQLÊòØÊÄé‰πà‰øùËØÅ‰∏ªÂ§á‰∏ÄËá¥ÁöÑ.html [66.4K] ‚î£‚îÅ‚îÅ25ËÆ≤MySQLÊòØÊÄé‰πà‰øùËØÅÈ´òÂèØÁî®ÁöÑ.html [68.4K] ‚î£‚îÅ‚îÅ26ËÆ≤Â§áÂ∫ì‰∏∫‰ªÄ‰πà‰ºöÂª∂ËøüÂ•ΩÂá†‰∏™Â∞èÊó∂.html [67.5K] ‚î£‚îÅ‚îÅ27ËÆ≤‰∏ªÂ∫ìÂá∫ÈóÆÈ¢ò‰∫ÜÔºå‰ªéÂ∫ìÊÄé‰πàÂäû.html [63.3K] ‚î£‚îÅ‚îÅ28ËÆ≤ËØªÂÜôÂàÜÁ¶ªÊúâÂì™‰∫õÂùë.html [67.1K] ‚î£‚îÅ‚îÅ29ËÆ≤Â¶Ç‰ΩïÂà§Êñ≠‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÊòØ‰∏çÊòØÂá∫ÈóÆÈ¢ò‰∫Ü.html [49.4K] ‚î£‚îÅ‚îÅ30ËÆ≤Á≠îÁñëÊñáÁ´†Ôºà‰∫åÔºâÔºöÁî®Âä®ÊÄÅÁöÑËßÇÁÇπÁúãÂä†ÈîÅ.html [38.9K] ‚î£‚îÅ‚îÅ31ËÆ≤ËØØÂà†Êï∞ÊçÆÂêéÈô§‰∫ÜË∑ëË∑ØÔºåËøòËÉΩÊÄé‰πàÂäû.html [65.1K] ‚î£‚îÅ‚îÅ32ËÆ≤‰∏∫‰ªÄ‰πàËøòÊúâkill‰∏çÊéâÁöÑËØ≠Âè•.html [59.4K] ‚î£‚îÅ‚îÅ33ËÆ≤ÊàëÊü•Ëøô‰πàÂ§öÊï∞ÊçÆÔºå‰ºö‰∏ç‰ºöÊääÊï∞ÊçÆÂ∫ìÂÜÖÂ≠òÊâìÁàÜ.html [61.1K] ‚î£‚îÅ‚îÅ34ËÆ≤Âà∞Â∫ïÂèØ‰∏çÂèØ‰ª•‰ΩøÁî®join.html [37.2K] ‚î£‚îÅ‚îÅ35ËÆ≤joinËØ≠Âè•ÊÄé‰πà‰ºòÂåñ.html [67.4K] ‚î£‚îÅ‚îÅ36ËÆ≤‰∏∫‰ªÄ‰πà‰∏¥Êó∂Ë°®ÂèØ‰ª•ÈáçÂêç.html [55.3K] ‚î£‚îÅ‚îÅ37ËÆ≤‰ªÄ‰πàÊó∂ÂÄô‰ºö‰ΩøÁî®ÂÜÖÈÉ®‰∏¥Êó∂Ë°®.html [57.2K] ‚î£‚îÅ‚îÅ38ËÆ≤ÈÉΩËØ¥InnoDBÂ•ΩÔºåÈÇ£ËøòË¶Å‰∏çË¶Å‰ΩøÁî®MemoryÂºïÊìé.html [52.1K] ‚î£‚îÅ‚îÅ39ËÆ≤Ëá™Â¢û‰∏ªÈîÆ‰∏∫‰ªÄ‰πà‰∏çÊòØËøûÁª≠ÁöÑ.html [50.6K] ‚î£‚îÅ‚îÅ40ËÆ≤insertËØ≠Âè•ÁöÑÈîÅ‰∏∫‰ªÄ‰πàËøô‰πàÂ§ö.html [53.8K] ‚î£‚îÅ‚îÅ41ËÆ≤ÊÄé‰πàÊúÄÂø´Âú∞Â§çÂà∂‰∏ÄÂº†Ë°®.html [34K] ‚î£‚îÅ‚îÅ42ËÆ≤grant‰πãÂêéË¶ÅË∑üÁùÄflushprivilegesÂêó.html [51.4K] ‚î£‚îÅ‚îÅ43ËÆ≤Ë¶Å‰∏çË¶Å‰ΩøÁî®ÂàÜÂå∫Ë°®.html [51.2K] ‚î£‚îÅ‚îÅ44ËÆ≤Á≠îÁñëÊñáÁ´†Ôºà‰∏âÔºâÔºöËØ¥‰∏ÄËØ¥Ëøô‰∫õÂ•ΩÈóÆÈ¢ò.html [53.1K] ‚î£‚îÅ‚îÅÂºÄÁØáËØçËÆ≤Ëøô‰∏ÄÊ¨°ÔºåËÆ©Êàë‰ª¨‰∏ÄËµ∑Êù•ÊêûÊáÇMySQL.html [40.6K] ‚îó‚îÅ‚îÅÁõ¥Êí≠ÂõûÈ°æËÆ≤ÊûóÊôìÊñåÔºöÊàëÁöÑMySQLÂøÉË∑ØÂéÜÁ®ã.html [51.7K] 1. ‰∏ÄÊù°ËØ≠Âè•ÁöÑÊâßË°åËøáÁ®ã‰ª•Êü•ËØ¢ËØ≠Âè•‰∏∫‰æãÔºå‰∏ÄÊù°Êü•ËØ¢ËØ≠Âè•Ë¶ÅÁªèËøá‰ª•‰∏ãÂá†‰∏™Ê≠•È™§Ôºö ËøûÊé•Âô®„ÄÇÈ¶ñÂÖà‰ºöÂú® Server Á´ØÈ™åËØÅËøûÊé•ÁöÑÊ≠£Á°ÆÊÄßÔºåÂà§Êñ≠Áî®Êà∑ÂêçÂØÜÁ†ÅÊòØÂê¶Ê≠£Á°ÆÔºåËøõË°åËøûÊé•ÁÆ°ÁêÜÔºõ Êü•ËØ¢ÁºìÂ≠ò„ÄÇËøô‰∏™Âú® Mysql 8.0 ‰πãÂêéÂ∞±Ê≤°Êúâ‰∫ÜÔºåÂõ†‰∏∫ÁºìÂ≠òÂëΩ‰∏≠Áéá‰∏ÄÂêëÂæà‰ΩéÔºåÂè™Ë¶Å‰øÆÊîπ‰∫ÜË°®Â∞±‰ºöÂØºËá¥ÁºìÂ≠òÁöÑÂ§±ÊïàÔºõ ÂàÜÊûêÂô®„ÄÇ‰∏ªË¶ÅËøõË°åËØçÊ≥ïËØ≠Ê≥ïÁöÑÂàÜÊûêÔºåÂà§Êñ≠ËØ≠Âè•ÊòØÂê¶Á¨¶ÂêàËßÑËåÉÔºåËØ≠Âè•‰∏≠ÁöÑË°®‰ª•ÂèäÂ≠óÊÆµÂú®Ë°®‰∏≠ÊòØÂê¶Ê≠£Á°ÆÔºõ ‰ºòÂåñÂô®„ÄÇÂØπÊü•ËØ¢ËØ≠Âè•ËøõË°å‰ºòÂåñÔºå‰∏ªË¶ÅÊòØÁ¥¢ÂºïÁöÑÈÄâÊã©Ôºõ ÊâßË°åÂô®„ÄÇËøô‰∏ÄÊ≠•ÊâçÁúüÊ≠£ÂºÄÂßãÊâìÂºÄË°®Êù•Êìç‰ΩúÔºåÈúÄË¶ÅÈ¶ñÂÖàÈ™åËØÅÊòØÂê¶ÂèØ‰ª•ÊúâÊìç‰ΩúË°®ÁöÑÊùÉÈôêÔºåÁÑ∂ÂêéË∞ÉÁî®InnoDB Á≠âÂ≠òÂÇ®ÂºïÊìéÁöÑËØªÂÜôÊé•Âè£Êù•ÂÆåÊàêËØ≠Âè•ÁöÑÊìç‰ΩúÔºåÊúÄÂêéËøîÂõûÁªìÊûúÔºõ Â≠òÂÇ®ÂºïÊìé„ÄÇ‰∏ªË¶ÅË¥üË¥£Â≠òÂÇ®Êï∞ÊçÆ‰ª•ÂèäÊèê‰æõÊï∞ÊçÆËØªÂÜôÁöÑÊé•Âè£„ÄÇ 2. ËÆ≤Êó•ÂøóÁ≥ªÁªüÔºö‰∏ÄÊù° SQL Êõ¥Êñ∞ËØ≠Âè•ÁöÑÊâßË°å„ÄåMySQLÈáåÁªèÂ∏∏ËØ¥Âà∞ÁöÑWALÊäÄÊúØÔºåWALÁöÑÂÖ®Áß∞ÊòØWrite-Ahead LoggingÔºåÂÆÉÁöÑÂÖ≥ÈîÆÁÇπÂ∞±ÊòØÂÖàÂÜôÊó•ÂøóÔºåÂÜçÂÜôÁ£ÅÁõò„Äç InnoDB‰∏≠ÁâπÊúâÁöÑÊó•Âøó redo-logÔºö Âú® InnoDB ‰∏≠ÂèØ‰ª•‰øùËØÅÂç≥‰ΩøÊï∞ÊçÆÂ∫ìÂèëÁîü‰∫ÜÈáçÂêØÔºå‰πãÂâçÊèê‰∫§ÁöÑËÆ∞ÂΩïÂπ∂‰∏ç‰ºö‰∏¢Â§±ÔºåËøô‰∏™ËÉΩÂäõÁß∞‰∏∫ ‚Äúcrash-safe‚Äù„ÄåÊèê‰æõÂ¥©Ê∫ÉÊÅ¢Â§çÂäüËÉΩ„ÄçÔºõ ÊòØÁâ©ÁêÜÊó•ÂøóÔºåËÆ∞ÂΩïÁöÑÊòØ‚ÄúËøô‰∏™Êï∞ÊçÆÈ°µ‰∏äÂÅö‰∫Ü‰ªÄ‰πàÊîπÂèò‚ÄùÔºå‰∏éÂ≠òÂÇ®ÂºïÊìéÁöÑ‰ΩúÁî®Áõ∏Á¨¶Ôºå‰∏ªË¶ÅÊòØÂ§ÑÁêÜÂ≠òÂÇ®ÊñπÈù¢ÁöÑÂäüËÉΩÔºõ ÊòØÂæ™ÁéØÂÜôÁöÑÔºåÁ©∫Èó¥Âõ∫ÂÆö‰ºöÁî®ÂÆåÁöÑ„ÄÇÁî®ÂÆå‰∫ÜÂ∞±Êää‰πãÂâçÁöÑÊì¶Èô§ÔºåÁÑ∂ÂêéÁªßÁª≠ÂÜôÔºåÁî®‰∏§‰∏™ÊåáÈíàÊù•ÊéßÂà∂„ÄÇ Server Â±ÇÁã¨ÊúâÁöÑÊó•Âøó binlogÔºö ÊòØ Server Â±ÇÂÆûÁé∞ÁöÑÔºåÊâÄÊúâÂºïÊìéÈÉΩÂèØ‰ª•‰ΩøÁî®Ôºõ ‰ΩúÁî®ÊòØÁî®‰∫éÂΩíÊ°£ÔºåËÆ∞ÂΩïÁöÑÊòØ‚ÄúÂÅö‰∫Ü‰ªÄ‰πàÈÄªËæëÊìç‰Ωú‚ÄùÔºåÈáçÁÇπÂú®ÊâßË°åÈÄªËæë‰∏äÔºå‰∏çÂú®Â≠òÂÇ®ÔºåÂõ†‰∏∫ Server Â∞±ÊòØË¥üË¥£ Mysql ÂäüËÉΩÊñπÈù¢Ôºõ ÊòØÂèØ‰ª•ËøΩÂä†ÂÜôÁöÑÔºåÂÜôÂÆå‰∏ÄÈ°µÊç¢‰∏ÄÈ°µÔºå‰∏ç‰ºöÊì¶Èô§‰ª•ÂâçÁöÑ„ÄÇ mysql&gt; update T set c=c+1 where ID=2; ‰∏äËø∞ÁöÑ update ËØ≠Âè•ÊâßË°åÈ°∫Â∫èÂ§ß‰ΩìÂíå 1 ‰∏≠‰∏ÄÊ†∑ÔºåÂÖ∑‰ΩìÁöÑÊâßË°åÂô®ÁöÑÊµÅÁ®ãÂ¶Ç‰∏ãÔºö ÊâßË°åÂô®ÂÖàÊâæÂºïÊìéÔºåËé∑Âèñ ID = 2 Ëøô‰∏ÄË°åÔºåID ÊòØ‰∏ªÈîÆÔºåÂºïÊìé‰ºöÁõ¥Êé•Áî®Á¥¢ÂºïÊ†ëÂÆö‰ΩçÂà∞Ëøô‰∏ÄË°åÁöÑÊï∞ÊçÆÔºåÂ¶ÇÊûúËøô‰∏ÄË°åÁöÑÊï∞ÊçÆÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÈÇ£Áõ¥Êé•ËøîÂõûÂ∞±Â•Ω‰∫ÜÔºåÂ¶ÇÊûú‰∏çÂú®ÔºåÂàôÈúÄË¶ÅÂéªÁ£ÅÁõò‰∏≠ËØªÂèñÂπ∂Âä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠ÔºåÁÑ∂ÂêéËøîÂõûÁªôÊâßË°åÂô®Ôºõ ÊâßË°åÂô®ÊãøÂà∞‰∫ÜËøô‰∏ÄË°åÁöÑÊï∞ÊçÆÔºåÂ∞Ü c Ëá™Âä†‰∏ÄÔºåÁÑ∂ÂêéË∞ÉÁî®ÂºïÊìéÂéªÂÜôÂÖ•Êï∞ÊçÆÔºõ ÂºïÊìé‰ºöÂÖàÂ∞ÜËøô‰∏™Êï∞ÊçÆÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠ÔºåÂπ∂‰∏îÂéªÂÜô redo-logÔºåÊ≠§Êó∂Ê≥®ÊÑèÔºåredo-log Âπ∂Êú™Êèê‰∫§ÔºåËÄåÊòØÂ§Ñ‰∫é prepare Áä∂ÊÄÅÔºåÁÑ∂ÂêéÂëäÁü•ÊâßË°åÂô®ÊâßË°åÂÆåÊàê‰∫ÜÔºåÈöèÊó∂ÂèØ‰ª•Êèê‰∫§‰∫ãÂä°Ôºõ ÊâßË°åÂô®Êî∂Âà∞‰∫ÜÂ≠òÂÇ®ÂºïÊìéÁöÑÊ∂àÊÅØÂêéÔºåÂ∞±ÂºÄÂßãÂÜôÂÖ• bin-logÔºåÂπ∂Êää bin-logÂÜôÂÖ•Á£ÅÁõòÔºõ ÊâßË°åÂô®ÂÜôÂÖ•ÂÆåÊØïÂêéÔºåË∞ÉÁî®ÂºïÊìéÁöÑÊèê‰∫§‰∫ãÂä°Êé•Âè£ÔºåÂºïÊìéÊääÂàöÂàöÂÜôÂÖ•ÁöÑ redo-log ÊîπÊàê commit Áä∂ÊÄÅÔºåÊèê‰∫§‰∫ãÂä°„ÄÇ ‰∏äËø∞ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºå redo-log ÊòØ ‰∏§Èò∂ÊÆµÊèê‰∫§Ôºå‰πüÂ∞±ÊòØ ÂÖà prepare ÂÜç commit„ÄÇ‰πãÊâÄ‰ª•Ëøô‰πàÂÅöÁöÑÂéüÂõ†ÊòØ‰∏∫‰∫ÜËÆ©‰∏§‰ªΩÊó•Âøó‰πãÈó¥ÁöÑÈÄªËæë‰∏ÄËá¥„ÄÇ Ë¶ÅÊ≥®ÊÑèÔºåÁé∞Èò∂ÊÆµÁöÑÊï∞ÊçÆÊÅ¢Â§çËøòÊòØÈù†ÁùÄ binlog + Êï¥Â∫ìÂ§á‰ªΩÂéªÂÆåÊàêÁöÑÔºåÊåâÁêÜËØ¥ redo-log ‰πüËÉΩÂÆåÊàêËÄå‰∏îÈÄüÂ∫¶ËÇØÂÆöË¶ÅÊØî bin-log Âø´ÂæóÂ§öÔºå‰ΩÜÊòØÁî±‰∫é redo-log ÊòØ‰ºöÊì¶Èô§ÁöÑÔºå‰∏çÂÖ∑Â§ábin-log ÁöÑÂΩíÊ°£ÂäüËÉΩÔºåÊâÄ‰ª•Áé∞Èò∂ÊÆµËøòÊòØÊ≤°ÂäûÊ≥ï„ÄÇ ÊÄùËÄÉÈ¢òÔºöÂÆöÊúüÂÖ®ÈáèÂ§á‰ªΩÁöÑÂë®Êúü‚ÄúÂèñÂÜ≥‰∫éÁ≥ªÁªüÈáçË¶ÅÊÄßÔºåÊúâÁöÑÊòØ‰∏ÄÂ§©‰∏ÄÂ§áÔºåÊúâÁöÑÊòØ‰∏ÄÂë®‰∏ÄÂ§á‚Äù„ÄÇÈÇ£‰πàÂú®‰ªÄ‰πàÂú∫ÊôØ‰∏ãÔºå‰∏ÄÂ§©‰∏ÄÂ§á‰ºöÊØî‰∏ÄÂë®‰∏ÄÂ§áÊõ¥Êúâ‰ºòÂäøÂë¢ÔºüÊàñËÄÖËØ¥ÔºåÂÆÉÂΩ±Âìç‰∫ÜËøô‰∏™Êï∞ÊçÆÂ∫ìÁ≥ªÁªüÁöÑÂì™‰∏™ÊåáÊ†áÔºü ‰∏ÄÂ§©‰∏ÄÂ§áÔºöÂ•ΩÂ§ÑÊòØ‚ÄúÊúÄÈïøÊÅ¢Â§çÊó∂Èó¥‚ÄùÊõ¥Áü≠„ÄÇÂú®‰∏ÄÂ§©‰∏ÄÂ§áÁöÑÊ®°ÂºèÈáåÔºåÊúÄÂùèÊÉÖÂÜµ‰∏ãÈúÄË¶ÅÂ∫îÁî®‰∏ÄÂ§©ÁöÑbinlog„ÄÇÊØîÂ¶ÇÔºå‰Ω†ÊØèÂ§©0ÁÇπÂÅö‰∏ÄÊ¨°ÂÖ®ÈáèÂ§á‰ªΩÔºåËÄåË¶ÅÊÅ¢Â§çÂá∫‰∏Ä‰∏™Âà∞Êò®Â§©Êôö‰∏ä23ÁÇπÁöÑÂ§á‰ªΩ„ÄÇ‰ΩÜÊòØÂùèÂ§Ñ‰πüÊòØÊòæËÄåÊòìËßÅÁöÑÔºåÂ∞±ÊòØ‰Ω†ÈúÄË¶ÅÂ§ßÈáèÁöÑÂ≠òÂÇ®„ÄÇ ‰∏ÄÂë®‰∏ÄÂ§áÊúÄÂùèÊÉÖÂÜµÂ∞±Ë¶ÅÂ∫îÁî®‰∏ÄÂë®ÁöÑbinlog‰∫Ü„ÄÇËøô‰∏™ÊÅ¢Â§çÊó∂Èó¥ÈïøÔºå‰ΩÜÊòØÊòéÊòæÂ≠òÂÇ®ÁöÑÊ∂àËÄóÂ∞±Â∞èÂæóÂ§ö‰∫Ü„ÄÇ 3. ‰∫ãÂä°ÈöîÁ¶ª‰∫ãÂä°ÁöÑÂõõÂ§ßÁâπÊÄßÔºö ÂéüÂ≠êÊÄß„ÄÇË¶Å‰πà‰∏çÂÅöÔºåË¶Å‰πàÂÖ®ÂÅöÔºõ ‰∏ÄËá¥ÊÄß„ÄÇÂú®Â§ÑÁêÜ‰∫ãÂä°ÁöÑËøáÁ®ã‰∏≠Ôºå‰øùËØÅÊï∞ÊçÆÂ∫ìÁä∂ÊÄÅÂíåÂÖ∂‰ªñ‰∏öÂä°ËßÑÂàô‰øùÊåÅ‰∏ÄËá¥ÔºåÊØîÂ¶ÇËΩ¨Ë¥¶ÔºåÂâçÂêé‰∏§ËÄÖÁöÑË¥¶ÊπñÊÄªÈ¢ù‰∏çÂèòÔºõ ÈöîÁ¶ªÊÄß„ÄÇ‰∏çÂêå‰∫ãÂä°‰πãÈó¥‰∫í‰∏çÂΩ±ÂìçÔºõ ÊåÅ‰πÖÊÄß„ÄÇ‰∫ãÂä°Êèê‰∫§‰πãÂêéÈúÄË¶ÅÊåÅ‰πÖÂåñÂà∞Êï∞ÊçÆÂ∫ì‰∏≠ÂéªÔºåÂç≥‰ΩøÂ¥©Ê∫ÉÔºå‰πüËÉΩÊÅ¢Â§ç„ÄÇ ‰∫ãÂä°ÁöÑÈöîÁ¶ªÁ∫ßÂà´Ôºö ËØªÊú™Êèê‰∫§„ÄÇÂà´‰∫∫ËøòÊ≤°Êèê‰∫§ÁöÑ‰∏úË•øÔºåÂ∞±ËÉΩËØªÂèñÂà∞Ôºå‰ºö‰∫ßÁîüÂπªËØª„ÄÅ‰∏çÂèØÈáçÂ§çËØª„ÄÅËÑèËØªÁöÑÈóÆÈ¢òÔºõ„Äå‰∏Ä‰∏™‰∫ãÂä°ËøòÊ≤°Êèê‰∫§Êó∂ÔºåÂÆÉÂÅöÁöÑÂèòÊõ¥Â∞±ËÉΩË¢´Âà´ÁöÑ‰∫ãÂä°ÁúãÂà∞„ÄÇ„Äç ËØªÊèê‰∫§„ÄÇÂà´‰∫∫Êèê‰∫§ÁöÑ‰∏úË•øÔºåÂ∞±ËÉΩËØªÂèñÂà∞„ÄÇ‰ºö‰∫ßÁîüÂπªËØª„ÄÅ‰∏çÂèØÈáçÂ§çËØªÔºõ„Äå‰∏Ä‰∏™‰∫ãÂä°Êèê‰∫§‰πãÂêéÔºåÂÆÉÂÅöÁöÑÂèòÊõ¥Êâç‰ºöË¢´ÂÖ∂‰ªñ‰∫ãÂä°ÁúãÂà∞„ÄÇ„Äç ÂèØÈáçÂ§çËØª„ÄÇÂú®‰∫ãÂä°ÊâßË°åÊúüÈó¥ÔºåÂà´‰∫∫Â∞±ÁÆóÊèê‰∫§‰∫Ü‰∏úË•øÂπ∂ÊîπÂä®‰∫ÜÔºåÂΩìÂâç‰∫ãÂä°Áúã‰∏çÂà∞Ôºå‰∏ç‰ºöÂéªËØªÊúÄÊñ∞ÁöÑÔºåËøòÊòØÂèØËÉΩ‰ºö‰∫ßÁîüÂπªËØªÁöÑÊÉÖÂÜµÔºõ„Äå‰∏Ä‰∏™‰∫ãÂä°ÊâßË°åËøáÁ®ã‰∏≠ÁúãÂà∞ÁöÑÊï∞ÊçÆÔºåÊÄªÊòØË∑üËøô‰∏™‰∫ãÂä°Âú®ÂêØÂä®Êó∂ÁúãÂà∞ÁöÑÊï∞ÊçÆÊòØ‰∏ÄËá¥ÁöÑ„ÄÇÂΩìÁÑ∂Âú®ÂèØÈáçÂ§çËØªÈöîÁ¶ªÁ∫ßÂà´‰∏ãÔºåÊú™Êèê‰∫§ÂèòÊõ¥ÂØπÂÖ∂‰ªñ‰∫ãÂä°‰πüÊòØ‰∏çÂèØËßÅÁöÑ„ÄÇ„Äç Â∫èÂàóÂåñ„ÄÇÂä†ÈîÅÔºåÁâõÈÄº„ÄÇ„ÄåÈ°æÂêçÊÄù‰πâÊòØÂØπ‰∫éÂêå‰∏ÄË°åËÆ∞ÂΩïÔºå‚ÄúÂÜô‚Äù‰ºöÂä†‚ÄúÂÜôÈîÅ‚ÄùÔºå‚ÄúËØª‚Äù‰ºöÂä†‚ÄúËØªÈîÅ‚Äù„ÄÇÂΩìÂá∫Áé∞ËØªÂÜôÈîÅÂÜ≤Á™ÅÁöÑÊó∂ÂÄôÔºåÂêéËÆøÈóÆÁöÑ‰∫ãÂä°ÂøÖÈ°ªÁ≠âÂâç‰∏Ä‰∏™‰∫ãÂä°ÊâßË°åÂÆåÊàêÔºåÊâçËÉΩÁªßÁª≠ÊâßË°å„ÄÇ„Äç ÂÖ∂‰∏≠ÔºåÊúÄÈöæÁêÜËß£ÁöÑÂ∞±ÊòØÂèØÈáçÂ§çËØªÁöÑÈöîÁ¶ªÁ∫ßÂà´ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºåËøô‰πüÊòØmysqlÁöÑÈªòËÆ§ÈöîÁ¶ªÁ∫ßÂà´Ôºö Â∞±ÊòØ‰ΩøÁî®ÁöÑÂõûÊªöÊäÄÊúØÔºåÂú®MySQL‰∏≠ÔºåÂÆûÈôÖ‰∏äÊØèÊù°ËÆ∞ÂΩïÂú®Êõ¥Êñ∞ÁöÑÊó∂ÂÄôÈÉΩ‰ºöÂêåÊó∂ËÆ∞ÂΩï‰∏ÄÊù°ÂõûÊªöÊìç‰Ωú„ÄÇËÆ∞ÂΩï‰∏äÁöÑÊúÄÊñ∞ÂÄºÔºåÈÄöËøáÂõûÊªöÊìç‰ΩúÔºåÈÉΩÂèØ‰ª•ÂæóÂà∞Ââç‰∏Ä‰∏™Áä∂ÊÄÅÁöÑÂÄº„ÄÇ„ÄåÁî±undo logÂÆåÊàêÁöÑ„Äç Â¶ÇÂõæÊâÄÁ§∫ÔºåËøô‰πüÊòØ Êï∞ÊçÆÂ∫ìÁöÑÂ§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂ÁöÑÂü∫Á°ÄÔºåÈááÁî®ÂõûÊªöÊú∫Âà∂„ÄÇÂΩìÁÑ∂‰∫ÜÔºåÂõûÊªöÊó•Âøó‰∏çËÉΩ‰∏ÄÁõ¥‰øùÁïôÔºåÊâÄ‰ª•Âú®ÂøÖË¶ÅÁöÑÊó∂ÂÄôÂà†Èô§ÔºåÂà†Èô§ÁöÑÊó∂Èó¥ÁÇπÂ∞±ÊòØÂΩìÊ≤°Êúâ‰∫ãÂä°ÂÜçÈúÄË¶ÅÁî®Âà∞Ëøô‰∫õÂõûÊªöÊó•ÂøóÊó∂ÔºåÂõûÊªöÊó•Âøó‰ºöË¢´Âà†Èô§„ÄÇÊâÄ‰ª•Êàë‰ª¨ÊúÄÂ•Ω‰∏çË¶Å‰ΩøÁî®Èïø‰∫ãÂä°ÔºåËøôÊ†∑‰ºöÂØºËá¥ÂõûÊªöÁöÑÊï∞ÊçÆÂæàÂ§öÂæàÂ§ö„ÄÇÈô§‰∫ÜÂØπÂõûÊªöÊÆµÁöÑÂΩ±ÂìçÔºåÈïø‰∫ãÂä°ËøòÂç†Áî®ÈîÅËµÑÊ∫êÔºå‰πüÂèØËÉΩÊãñÂûÆÊï¥‰∏™Â∫ì„ÄÇ Â¶Ç‰ΩïÈÅøÂÖçÈïø‰∫ãÂä°ÂØπ‰∏öÂä°ÁöÑÂΩ±ÂìçÔºü Ëøô‰∏™ÈóÆÈ¢òÔºåÊàë‰ª¨ÂèØ‰ª•‰ªéÂ∫îÁî®ÂºÄÂèëÁ´ØÂíåÊï∞ÊçÆÂ∫ìÁ´ØÊù•Áúã„ÄÇ È¶ñÂÖàÔºå‰ªéÂ∫îÁî®ÂºÄÂèëÁ´ØÊù•ÁúãÔºö Á°ÆËÆ§ÊòØÂê¶‰ΩøÁî®‰∫Üset autocommit=0„ÄÇËøô‰∏™Á°ÆËÆ§Â∑•‰ΩúÂèØ‰ª•Âú®ÊµãËØïÁéØÂ¢É‰∏≠ÂºÄÂ±ïÔºåÊääMySQLÁöÑgeneral_logÂºÄËµ∑Êù•ÔºåÁÑ∂ÂêéÈöè‰æøË∑ë‰∏Ä‰∏™‰∏öÂä°ÈÄªËæëÔºåÈÄöËøágeneral_logÁöÑÊó•ÂøóÊù•Á°ÆËÆ§„ÄÇ‰∏ÄËà¨Ê°ÜÊû∂Â¶ÇÊûú‰ºöËÆæÁΩÆËøô‰∏™ÂÄºÔºå‰πüÂ∞±‰ºöÊèê‰æõÂèÇÊï∞Êù•ÊéßÂà∂Ë°å‰∏∫Ôºå‰Ω†ÁöÑÁõÆÊ†áÂ∞±ÊòØÊääÂÆÉÊîπÊàê1„ÄÇ Á°ÆËÆ§ÊòØÂê¶Êúâ‰∏çÂøÖË¶ÅÁöÑÂè™ËØª‰∫ãÂä°„ÄÇÊúâ‰∫õÊ°ÜÊû∂‰ºö‰π†ÊÉØ‰∏çÁÆ°‰ªÄ‰πàËØ≠Âè•ÂÖàÁî®begin/commitÊ°ÜËµ∑Êù•„ÄÇÊàëËßÅËøáÊúâ‰∫õÊòØ‰∏öÂä°Âπ∂Ê≤°ÊúâËøô‰∏™ÈúÄË¶ÅÔºå‰ΩÜÊòØ‰πüÊääÂ•ΩÂá†‰∏™selectËØ≠Âè•ÊîæÂà∞‰∫Ü‰∫ãÂä°‰∏≠„ÄÇËøôÁßçÂè™ËØª‰∫ãÂä°ÂèØ‰ª•ÂéªÊéâ„ÄÇ ‰∏öÂä°ËøûÊé•Êï∞ÊçÆÂ∫ìÁöÑÊó∂ÂÄôÔºåÊ†πÊçÆ‰∏öÂä°Êú¨Ë∫´ÁöÑÈ¢Ñ‰º∞ÔºåÈÄöËøáSET MAX_EXECUTION_TIMEÂëΩ‰ª§ÔºåÊù•ÊéßÂà∂ÊØè‰∏™ËØ≠Âè•ÊâßË°åÁöÑÊúÄÈïøÊó∂Èó¥ÔºåÈÅøÂÖçÂçï‰∏™ËØ≠Âè•ÊÑèÂ§ñÊâßË°åÂ§™ÈïøÊó∂Èó¥„ÄÇÔºà‰∏∫‰ªÄ‰πà‰ºöÊÑèÂ§ñÔºüÂú®ÂêéÁª≠ÁöÑÊñáÁ´†‰∏≠‰ºöÊèêÂà∞ËøôÁ±ªÊ°à‰æãÔºâ ÂÖ∂Ê¨°Ôºå‰ªéÊï∞ÊçÆÂ∫ìÁ´ØÊù•ÁúãÔºö ÁõëÊéß information_schema.Innodb_trxË°®ÔºåËÆæÁΩÆÈïø‰∫ãÂä°ÈòàÂÄºÔºåË∂ÖËøáÂ∞±Êä•Ë≠¶/ÊàñËÄÖkillÔºõ PerconaÁöÑpt-killËøô‰∏™Â∑•ÂÖ∑‰∏çÈîôÔºåÊé®Ëçê‰ΩøÁî®Ôºõ Âú®‰∏öÂä°ÂäüËÉΩÊµãËØïÈò∂ÊÆµË¶ÅÊ±ÇËæìÂá∫ÊâÄÊúâÁöÑgeneral_logÔºåÂàÜÊûêÊó•ÂøóË°å‰∏∫ÊèêÂâçÂèëÁé∞ÈóÆÈ¢òÔºõ Â¶ÇÊûú‰ΩøÁî®ÁöÑÊòØMySQL 5.6ÊàñËÄÖÊõ¥Êñ∞ÁâàÊú¨ÔºåÊääinnodb_undo_tablespacesËÆæÁΩÆÊàê2ÔºàÊàñÊõ¥Â§ßÁöÑÂÄºÔºâ„ÄÇÂ¶ÇÊûúÁúüÁöÑÂá∫Áé∞Â§ß‰∫ãÂä°ÂØºËá¥ÂõûÊªöÊÆµËøáÂ§ßÔºåËøôÊ†∑ËÆæÁΩÆÂêéÊ∏ÖÁêÜËµ∑Êù•Êõ¥Êñπ‰æø„ÄÇ 4. Ê∑±ÂÖ•ÊµÖÂá∫Á¥¢ÂºïÔºà‰∏äÔºâ‰∏∫‰Ωï‰∏ç‰ΩøÁî® ÂìàÂ∏åË°®„ÄÅÊï∞ÁªÑ„ÄÅB Ê†ë„ÄÅ‰∫åÂèâÊêúÁ¥¢Ê†ëÔºåËÄåÈááÁî®‰∫Ü B+Ôºü ‰∏∫‰Ωï‰∏çÁî®ÂìàÂ∏åË°®Ôºü ÂìàÂ∏åË°®ËøõË°åÁ≠âÂÄºÊü•ËØ¢ÁöÑÁ°ÆÂæàÂø´ÔºåO(1) ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶Ôºå‰ΩÜÊòØÂÖ∂ËøõË°åËåÉÂõ¥Êü•ËØ¢Â∞±ÂøÖÈ°ªÈÅçÂéÜÂÖ®Ë°®ÔºåÂπ∂‰∏îÂ¶ÇÊûúÁõ∏ÂêåÁöÑÂÄºÂ§™Â§öÔºåÂ∞±ÂÆπÊòìÂØºËá¥ÂìàÂ∏åÂÜ≤Á™ÅÔºåÊÄßËÉΩËøõ‰∏ÄÊ≠•‰∏ãÈôç„ÄÇ ‰∏∫‰Ωï‰∏çÁî®Êï∞ÁªÑÔºü Êï∞ÁªÑÁöÑÁ°ÆÂèØ‰ª•ÂæàÂø´ÁöÑËøõË°åÁ≠âÂÄºÊü•ËØ¢ÂíåËåÉÂõ¥Êü•ËØ¢Ôºå‰ΩÜÊòØÂÖ∂Êõ¥Êñ∞ÂæàÈ∫ªÁÉ¶ÔºåÂ¶ÇÊûú‰∏≠Èó¥ÈúÄË¶ÅÂà†Èô§ÔºåÈÇ£Â∞±Ë¶ÅÁßªÂä®ÂêéÈù¢ÊâÄÊúâÊï∞ÊçÆÔºåÊâÄ‰ª•Âè™ÈÄÇÁî®‰∫éÈùôÊÄÅÂ≠òÂÇ®ÂºïÊìé„ÄÇ ‰∏∫‰Ωï‰∏çÁî® B Ê†ëÔºü B Ê†ëÊúÄÂ§ßÁöÑÈóÆÈ¢òÂ∞±ÊòØÈùûÂè∂Â≠êËäÇÁÇπÊúâ‰∏Ä‰∏™ Data ÂüüÔºåÊàë‰ª¨Áü•ÈÅìÊï∞ÊçÆÂ∫ìÁöÑÊÄßËÉΩ‰∏ªË¶ÅÂèñÂÜ≥‰∫éÁ£ÅÁõò I/O ÁöÑÊ¨°Êï∞Ôºåmysql ÈááÁî®‰∫ÜÁ£ÅÁõòÈ¢ÑËØªÁöÑÊú∫Âà∂Ôºå‰πüÂ∞±ÊòØÊØè‰∏Ä‰∏™Ê†ëÁöÑËäÇÁÇπÈÉΩÁî≥ËØ∑‰∏ÄÈ°µÁöÑÂ≠òÂÇ®Á©∫Èó¥ÔºåËøôÊ†∑Êñπ‰æøËØªÂÜôÔºåÂ∞±ÊòØÂõ†‰∏∫ B Ê†ëÂ≠òÂÇ®‰∫Ü Data ÂüüÔºåÁõ∏ÊØî‰πã‰∏ãËÇØÂÆöÂ∞±Âè™ËÉΩÂ≠òÊõ¥Â∞ëÁöÑÊåáÈíàÂüü‰∫ÜÔºåËøôÊ†∑Â∞±‰ºöÂØºËá¥Êï¥‰∏™Ê†ëÁöÑÈ´òÂ∫¶ÊãâÈ´òÔºåÁ£ÅÁõò I/O Ê¨°Êï∞Â¢ûÂä†Ôºå‰∫åÂèâÊêúÁ¥¢Ê†ëÂêåÊ†∑Â¶ÇÊ≠§ÔºåÊ†ëÈ´òËøáÈ´òÂØºËá¥Á£ÅÁõò I/O Ê¨°Êï∞Â¢ûÂä†„ÄÇ ‰∏∫‰ΩïÁî® B+ Ê†ëÔºü ÊàëËßâÂæóÁ¨¨‰∏ÄÁÇπÂ∞±ÊòØÂõ†‰∏∫ÂÖ∂Ê†ë‰ΩéÔºåÊØè‰∏™ÈùûÂè∂Â≠êËäÇÁÇπÂè™Â≠òÂÇ®‰∫ÜÊåáÈíàÂüüÂíå‰∏ªÈîÆÔºàËøôÈáåËØ¥ÁöÑÊòØËÅöÈõÜÁ¥¢ÂºïÔºâÔºõ Âè∂Â≠êËäÇÁÇπÊúâÈìæË°®ÔºåÊñπ‰æøËåÉÂõ¥Êü•ËØ¢Ôºõ Êü•ËØ¢ÊïàÁéáÂæàÁ®≥ÂÆö„ÄÇ ‰∏∫‰ΩïÊúÄÂ•Ω‰ΩøÁî®Ëá™Â¢û‰∏ªÈîÆÔºü Âõ†‰∏∫ËøôÊ†∑Â∞±ÂèØ‰ª•ÂáèÂ∞ëÁª¥Êä§Á¥¢ÂºïÊúâÂ∫èÊÄßÂ∏¶Êù•ÁöÑÂºÄÈîÄÔºåÂ¶ÇÊûú‰∏çÈááÁî®Ëá™Â¢û‰∏ªÈîÆÔºåÈÇ£‰πàÂú®ÊèíÂÖ•ÁöÑÊó∂ÂÄôÂèØËÉΩ‰ºöÂú®‰∏≠Èó¥ÔºåÈÄ†Êàê‰∏Ä‰∏™È°µÂàÜË£ÇÁöÑËøáÁ®ãÔºåÂºÄÈîÄÂæàÂ§ßÔºå‰ºöÂØºËá¥Â≠òÂÇ®ÁöÑÁ¢éÁâáÂåñ„ÄÇ 5. Ê∑±ÂÖ•ÊµÖÂá∫Á¥¢ÂºïÔºà‰∏ãÔºâ ‰ªÄ‰πàÂè´ÂõûË°®Ôºü ÊôÆÈÄöÁ¥¢ÂºïÂú®ÊâæÂà∞‰∏ªÈîÆÂêéÔºåÂõûÂà∞‰∏ªÈîÆÁ¥¢ÂºïÊ†ëÊêúÁ¥¢ÁöÑËøáÁ®ãÔºåÁß∞‰∏∫ÂõûË°®„ÄÇ Â¶Ç‰ΩïÂáèÂ∞ëÂõûË°®ÁöÑÊ¨°Êï∞Âë¢Ôºü Ë¶ÜÁõñÁ¥¢Âºï„ÄÇË¶ÜÁõñÁ¥¢ÂºïÂèØ‰ª•ÂáèÂ∞ëÊ†ëÁöÑÊêúÁ¥¢Ê¨°Êï∞ÔºåÊòæËëóÊèêÂçáÊü•ËØ¢ÊÄßËÉΩÔºåÊâÄ‰ª•‰ΩøÁî®Ë¶ÜÁõñÁ¥¢ÂºïÊòØ‰∏Ä‰∏™Â∏∏Áî®ÁöÑÊÄßËÉΩ‰ºòÂåñÊâãÊÆµ„ÄÇÂÖ∂ÂÆûÂ∞±ÊòØËÅîÂêàÁ¥¢ÂºïÔºåÁÑ∂ÂêéÁ¨¶ÂêàË¶ÜÁõñÁöÑË¶ÅÊ±ÇÂ∞±Áß∞‰πã‰∏∫Ë¶ÜÁõñÁ¥¢ÂºïÔºåÂ∞±ÊòØÂ§ö‰∏™Â≠óÊÆµÊãºÊàê‰∏Ä‰∏™Á¥¢ÂºïÔºåÁÑ∂ÂêéÂØπÂ∫î‰∏ªÈîÆÁöÑÊò†Â∞Ñ„ÄÇ ÊúÄÂ∑¶ÂâçÁºÄËßÑÂàô„ÄÇÂè™Ë¶ÅÊª°Ë∂≥ÊúÄÂ∑¶ÂâçÁºÄÔºåÂ∞±ÂèØ‰ª•Âà©Áî®Á¥¢ÂºïÊù•Âä†ÈÄüÊ£ÄÁ¥¢„ÄÇËøô‰∏™ÊúÄÂ∑¶ÂâçÁºÄÂèØ‰ª•ÊòØËÅîÂêàÁ¥¢ÂºïÁöÑÊúÄÂ∑¶N‰∏™Â≠óÊÆµÔºå‰πüÂèØ‰ª•ÊòØÂ≠óÁ¨¶‰∏≤Á¥¢ÂºïÁöÑÊúÄÂ∑¶M‰∏™Â≠óÁ¨¶„ÄÇ Âü∫‰∫é‰∏äÈù¢ÂØπÊúÄÂ∑¶ÂâçÁºÄÁ¥¢ÂºïÁöÑËØ¥ÊòéÔºåÊàë‰ª¨Êù•ËÆ®ËÆ∫‰∏Ä‰∏™ÈóÆÈ¢òÔºöÂú®Âª∫Á´ãËÅîÂêàÁ¥¢ÂºïÁöÑÊó∂ÂÄôÔºåÂ¶Ç‰ΩïÂÆâÊéíÁ¥¢ÂºïÂÜÖÁöÑÂ≠óÊÆµÈ°∫Â∫è„ÄÇ ËøôÈáåÊàë‰ª¨ÁöÑËØÑ‰º∞Ê†áÂáÜÊòØÔºåÁ¥¢ÂºïÁöÑÂ§çÁî®ËÉΩÂäõ„ÄÇÂõ†‰∏∫ÂèØ‰ª•ÊîØÊåÅÊúÄÂ∑¶ÂâçÁºÄÔºåÊâÄ‰ª•ÂΩìÂ∑≤ÁªèÊúâ‰∫Ü(a,b)Ëøô‰∏™ËÅîÂêàÁ¥¢ÂºïÂêéÔºå‰∏ÄËà¨Â∞±‰∏çÈúÄË¶ÅÂçïÁã¨Âú®a‰∏äÂª∫Á´ãÁ¥¢Âºï‰∫Ü„ÄÇÂõ†Ê≠§ÔºåÁ¨¨‰∏ÄÂéüÂàôÊòØÔºåÂ¶ÇÊûúÈÄöËøáË∞ÉÊï¥È°∫Â∫èÔºåÂèØ‰ª•Â∞ëÁª¥Êä§‰∏Ä‰∏™Á¥¢ÂºïÔºåÈÇ£‰πàËøô‰∏™È°∫Â∫èÂæÄÂæÄÂ∞±ÊòØÈúÄË¶Å‰ºòÂÖàËÄÉËôëÈááÁî®ÁöÑ„ÄÇÈÇ£Â¶ÇÊûúÊó¢ÊúâËÅîÂêàÁ¥¢ÂºïÔºåÂèàÊúâÂü∫‰∫é a„ÄÅb ÂêÑËá™ÁöÑÁ¥¢ÂºïÂë¢ÔºüÈÇ£Â∞±ËÄÉËôëÁ©∫Èó¥ÈóÆÈ¢ò‰∫ÜÔºåÂ¶ÇÊûú a ÁöÑÂ≠óÊÆµÊòéÊòæÊØî b ÁöÑÈïøÔºåÂàô‰∏ÄÈ°µ‰∏ãÂèØ‰ª•ÂÆπÁ∫≥Êõ¥Â§öÁöÑ bÔºåÈÇ£ËÇØÂÆöÂ∞±ÂàõÂª∫‰∏Ä‰∏™Ôºàa,b)ÁöÑËÅîÂêàÁ¥¢ÂºïÂíå‰∏Ä‰∏™(b)ÁöÑÂçïÂ≠óÊÆµÁ¥¢Âºï„ÄÇ Á¥¢Âºï‰∏ãÊé®„ÄÇÂú®MySQL 5.6‰πãÂâçÔºåÂè™ËÉΩ‰ªéID3ÂºÄÂßã‰∏Ä‰∏™‰∏™ÂõûË°®„ÄÇÂà∞‰∏ªÈîÆÁ¥¢Âºï‰∏äÊâæÂá∫Êï∞ÊçÆË°åÔºåÂÜçÂØπÊØîÂ≠óÊÆµÂÄº„ÄÇ ËÄåMySQL 5.6 ÂºïÂÖ•ÁöÑÁ¥¢Âºï‰∏ãÊé®‰ºòÂåñÔºàindex condition pushdown)Ôºå ÂèØ‰ª•Âú®Á¥¢ÂºïÈÅçÂéÜËøáÁ®ã‰∏≠ÔºåÂØπÁ¥¢Âºï‰∏≠ÂåÖÂê´ÁöÑÂ≠óÊÆµÂÖàÂÅöÂà§Êñ≠ÔºåÁõ¥Êé•ËøáÊª§Êéâ‰∏çÊª°Ë∂≥Êù°‰ª∂ÁöÑËÆ∞ÂΩïÔºåÂáèÂ∞ëÂõûË°®Ê¨°Êï∞„ÄÇ 6. ÂÖ®Â±ÄÈîÅÂíåË°®Á∫ßÈîÅÊ†πÊçÆÂä†ÈîÅËåÉÂõ¥ÔºöMySQLÈáåÈù¢ÁöÑÈîÅÂèØ‰ª•ÂàÜ‰∏∫ÔºöÂÖ®Â±ÄÈîÅ„ÄÅË°®Á∫ßÈîÅ„ÄÅË°åÁ∫ßÈîÅ ‰∏Ä„ÄÅÂÖ®Â±ÄÈîÅÔºöÂØπÊï¥‰∏™Êï∞ÊçÆÂ∫ìÂÆû‰æãÂä†ÈîÅ„ÄÇMySQLÊèê‰æõÂä†ÂÖ®Â±ÄËØªÈîÅÁöÑÊñπÊ≥ïÔºöFlush tables with read lock(FTWRL) FTWRLÁöÑÂêØÂä®Êó∂Èó¥ÁÇπÔºö FTWRL ÂâçÊúâËØªÂÜôÁöÑËØù ,FTWRL ÈÉΩ‰ºöÁ≠âÂæÖ ËØªÂÜôÊâßË°åÂÆåÊØïÂêéÊâçÊâßË°åÔºõ FTWRL ÊâßË°åÁöÑÊó∂ÂÄôË¶ÅÂà∑ËÑèÈ°µÁöÑÊï∞ÊçÆÂà∞Á£ÅÁõò,Âõ†‰∏∫Ë¶Å‰øùÊåÅÊï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄß ÔºåÁêÜËß£ÁöÑÊâßË°åFTWRLÊó∂ÂÄôÊòØ ÊâÄÊúâ‰∫ãÂä° ÈÉΩÊèê‰∫§ÂÆåÊØïÁöÑÊó∂ÂÄô„ÄÇ Ëøô‰∏™ÂëΩ‰ª§ÂèØ‰ª•‰ΩøÊï¥‰∏™Â∫ìÂ§Ñ‰∫éÂè™ËØªÁä∂ÊÄÅ„ÄÇ‰ΩøÁî®ËØ•ÂëΩ‰ª§‰πãÂêéÔºåÊï∞ÊçÆÊõ¥Êñ∞ËØ≠Âè•„ÄÅÊï∞ÊçÆÂÆö‰πâËØ≠Âè•ÂíåÊõ¥Êñ∞Á±ª‰∫ãÂä°ÁöÑÊèê‰∫§ËØ≠Âè•Á≠âÊìç‰ΩúÈÉΩ‰ºöË¢´ÈòªÂ°û„ÄÇ‰ΩøÁî®Âú∫ÊôØÔºöÂÖ®Â∫ìÈÄªËæëÂ§á‰ªΩ„ÄÇÈ£éÈô©Ôºö1.Â¶ÇÊûúÂú®‰∏ªÂ∫ìÂ§á‰ªΩÔºåÂú®Â§á‰ªΩÊúüÈó¥‰∏çËÉΩÊõ¥Êñ∞Ôºå‰∏öÂä°ÂÅúÊëÜ2.Â¶ÇÊûúÂú®‰ªéÂ∫ìÂ§á‰ªΩÔºåÂ§á‰ªΩÊúüÈó¥‰∏çËÉΩÊâßË°å‰∏ªÂ∫ìÂêåÊ≠•ÁöÑbinlogÔºåÂØºËá¥‰∏ª‰ªéÂª∂ËøüÂÆòÊñπËá™Â∏¶ÁöÑÈÄªËæëÂ§á‰ªΩÂ∑•ÂÖ∑mysqldumpÔºåÂΩìmysqldump‰ΩøÁî®ÂèÇÊï∞‚Äìsingle-transactionÁöÑÊó∂ÂÄôÔºå‰ºöÂêØÂä®‰∏Ä‰∏™‰∫ãÂä°ÔºåÁ°Æ‰øùÊãøÂà∞‰∏ÄËá¥ÊÄßËßÜÂõæ„ÄÇËÄåÁî±‰∫éMVCCÁöÑÊîØÊåÅÔºåËøô‰∏™ËøáÁ®ã‰∏≠Êï∞ÊçÆÊòØÂèØ‰ª•Ê≠£Â∏∏Êõ¥Êñ∞ÁöÑ„ÄÇ ‰∏ÄËá¥ÊÄßËØªÊòØÂ•ΩÔºå‰ΩÜÊòØÂâçÊèêÊòØÂºïÊìéË¶ÅÊîØÊåÅËøô‰∏™ÈöîÁ¶ªÁ∫ßÂà´„ÄÇÂ¶ÇÊûúË¶ÅÂÖ®Â∫ìÂè™ËØªÔºå‰∏∫‰ªÄ‰πà‰∏ç‰ΩøÁî®set global readonly=trueÁöÑÊñπÂºèÔºü1.Âú®Êúâ‰∫õÁ≥ªÁªü‰∏≠ÔºåreadonlyÁöÑÂÄº‰ºöË¢´Áî®Êù•ÂÅöÂÖ∂‰ªñÈÄªËæëÔºåÊØîÂ¶ÇÂà§Êñ≠‰∏ªÂ§áÂ∫ì„ÄÇÊâÄ‰ª•‰øÆÊîπglobalÂèòÈáèÁöÑÊñπÂºèÂΩ±ÂìçÂ§™Â§ß„ÄÇ2.Âú®ÂºÇÂ∏∏Â§ÑÁêÜÊú∫Âà∂‰∏äÊúâÂ∑ÆÂºÇ„ÄÇÂ¶ÇÊûúÊâßË°åFTWRLÂëΩ‰ª§‰πãÂêéÁî±‰∫éÂÆ¢Êà∑Á´ØÂèëÁîüÂºÇÂ∏∏Êñ≠ÂºÄÔºåÈÇ£‰πàMySQL‰ºöËá™Âä®ÈáäÊîæËøô‰∏™ÂÖ®Â±ÄÈîÅÔºåÊï¥‰∏™Â∫ìÂõûÂà∞ÂèØ‰ª•Ê≠£Â∏∏Êõ¥Êñ∞ÁöÑÁä∂ÊÄÅ„ÄÇËÄåÂ∞ÜÊï¥‰∏™Â∫ìËÆæÁΩÆ‰∏∫readonly‰πãÂêéÔºåÂ¶ÇÊûúÂÆ¢Êà∑Á´ØÂèëÁîüÂºÇÂ∏∏ÔºåÂàôÊï∞ÊçÆÂ∫ìÂ∞±‰ºö‰∏ÄÁõ¥‰øùÊåÅreadonlyÁä∂ÊÄÅÔºåËøôÊ†∑‰ºöÂØºËá¥Êï¥‰∏™Â∫ìÈïøÊó∂Èó¥Â§Ñ‰∫é‰∏çÂèØÂÜôÁä∂ÊÄÅÔºåÈ£éÈô©ËæÉÈ´ò„ÄÇ‰∫å„ÄÅË°®Á∫ßÈîÅMySQLÈáåÈù¢Ë°®Á∫ßÈîÅÊúâ‰∏§ÁßçÔºå‰∏ÄÁßçÊòØË°®ÈîÅÔºå‰∏ÄÁßçÊòØÂÖÉÊï∞ÊçÆÈîÅ(meta data lock,MDL)Ë°®ÈîÅÁöÑËØ≠Ê≥ïÊòØ:lock tables ‚Ä¶ read/writeÂèØ‰ª•Áî®unlock tables‰∏ªÂä®ÈáäÊîæÈîÅÔºå‰πüÂèØ‰ª•Âú®ÂÆ¢Êà∑Á´ØÊñ≠ÂºÄÁöÑÊó∂ÂÄôËá™Âä®ÈáäÊîæ„ÄÇlock tablesËØ≠Ê≥ïÈô§‰∫Ü‰ºöÈôêÂà∂Âà´ÁöÑÁ∫øÁ®ãÁöÑËØªÂÜôÂ§ñÔºå‰πüÈôêÂÆö‰∫ÜÊú¨Á∫øÁ®ãÊé•‰∏ãÊù•ÁöÑÊìç‰ΩúÂØπË±°„ÄÇÂØπ‰∫éInnoDBËøôÁßçÊîØÊåÅË°åÈîÅÁöÑÂºïÊìéÔºå‰∏ÄËà¨‰∏ç‰ΩøÁî®lock tablesÂëΩ‰ª§Êù•ÊéßÂà∂Âπ∂ÂèëÔºåÊØïÁ´üÈîÅ‰ΩèÊï¥‰∏™Ë°®ÁöÑÂΩ±ÂìçÈù¢ËøòÊòØÂ§™Â§ß„ÄÇMDLÔºö‰∏çÈúÄË¶ÅÊòæÂºè‰ΩøÁî®ÔºåÂú®ËÆøÈóÆ‰∏Ä‰∏™Ë°®ÁöÑÊó∂ÂÄô‰ºöË¢´Ëá™Âä®Âä†‰∏ä„ÄÇServer Â±ÇÈù¢ÂÆûÁé∞ÁöÑÔºÅÔºÅÔºÅÔºÅMDLÁöÑ‰ΩúÁî®Ôºö‰øùËØÅËØªÂÜôÁöÑÊ≠£Á°ÆÊÄß„ÄÇÂú®ÂØπ‰∏Ä‰∏™Ë°®ÂÅöÂ¢ûÂà†ÊîπÊü•ÔºàDMLÔºâÊìç‰ΩúÁöÑÊó∂ÂÄôÔºåÂä†MDLËØªÈîÅÔºõÂΩìË¶ÅÂØπË°®ÂÅöÁªìÊûÑÂèòÊõ¥ÔºàDDLÔºâÊìç‰ΩúÁöÑÊó∂ÂÄôÔºåÂä†MDLÂÜôÈîÅ„ÄÇËØªÈîÅ‰πãÈó¥‰∏ç‰∫íÊñ•„ÄÇÂõ†‰∏∫ÊúâÈöîÁ¶ªÁ∫ßÂà´Âú®ÔºåmvccÔºåÊâÄ‰ª•ËØªÈîÅ‰πãÈó¥Êó†ÈúÄÂ§çÂà∂Âç≥ÂèØÔºåËØªÂÜôÈîÅ‰πãÈó¥ÔºåÂÜôÈîÅ‰πãÈó¥ÊòØ‰∫íÊñ•ÁöÑÔºåÁî®Êù•‰øùËØÅÂèòÊõ¥Ë°®ÁªìÊûÑÊìç‰ΩúÁöÑÂÆâÂÖ®ÊÄß„ÄÇMDL ‰ºöÁõ¥Âà∞‰∫ãÂä°Êèê‰∫§Êâç‰ºöÈáäÊîæÔºåÂú®ÂÅöË°®ÁªìÊûÑÂèòÊõ¥ÁöÑÊó∂ÂÄôÔºå‰∏ÄÂÆöË¶ÅÂ∞èÂøÉ‰∏çË¶ÅÂØºËá¥ÈîÅ‰ΩèÁ∫ø‰∏äÊü•ËØ¢ÂíåÊõ¥Êñ∞„ÄÇÊâÄ‰ª•Â∞èÂøÉÂú®ÁªôÂ∞èË°®ÂÅö DDL Êó∂ÊääËøô‰∏™Â∫ìÊêûÂ¥©„ÄÇ Êï∞ÊçÆÂ∫ìÂõõÁßçËØ≠Ë®ÄÔºö DDL ÔºàData Definition LanguageÔºâÔºöÊï∞ÊçÆÂÆö‰πâËØ≠Ë®ÄÔºåÊó†ÈúÄÊèê‰∫§Â∞±ÂèØ‰ª•ÊâßË°åÁöÑÔºå‰∏ªË¶ÅÊúâ CREATE„ÄÅALTER„ÄÅDROPÁ≠âÁ≠âÔºõ DMLÔºàData Manipulation LanguageÔºâÔºöÊï∞ÊçÆÊìç‰ΩúËØ≠Ë®ÄÔºåËøô‰∏™‰πüÊòØÈúÄË¶ÅÊèê‰∫§‰∫ãÂä°ÁöÑÂì¶ÔºåINSERT„ÄÅUPDATE„ÄÅDELETE„ÄÅTRUNCATE„ÄÅSELECT„ÄÅ‰ª•Âèä LOCK TABLE„ÄÅCALL„ÄÅEXPLAIN PLAN DCLÔºàData Control LanguageÔºâÔºöÊï∞ÊçÆÊéßÂà∂ËØ≠Ë®ÄÔºåÂåÖÊã¨ GRANT„ÄÅREVOKE TCLÔºàTransaction Control LanguageÔºâÔºö‰∫ãÂä°ÊéßÂà∂ËØ≠Ë®ÄÔºåÂåÖÊã¨ ROLLBACK„ÄÅCOMMIT„ÄÅSAVEPOINT„ÄÅSET TRANSACTION„ÄÇ ‰ªäÊó•ÊÄùËÄÉÈ¢òÔºöÂ§á‰ªΩ‰∏ÄËà¨ÈÉΩ‰ºöÂú®Â§áÂ∫ì‰∏äÊâßË°åÔºå‰Ω†Âú®Áî®‚Äìsingle-transactionÊñπÊ≥ïÂÅöÈÄªËæëÂ§á‰ªΩÁöÑËøáÁ®ã‰∏≠ÔºåÂ¶ÇÊûú‰∏ªÂ∫ì‰∏äÁöÑ‰∏Ä‰∏™Â∞èË°®ÂÅö‰∫Ü‰∏Ä‰∏™DDLÔºåÊØîÂ¶ÇÁªô‰∏Ä‰∏™Ë°®‰∏äÂä†‰∫Ü‰∏ÄÂàó„ÄÇËøôÊó∂ÂÄôÔºå‰ªéÂ§áÂ∫ì‰∏ä‰ºöÁúãÂà∞‰ªÄ‰πàÁé∞Ë±°Âë¢Ôºü ÂÅáËÆæËøô‰∏™DDLÊòØÈíàÂØπË°®t1ÁöÑÔºå ËøôÈáåÊàëÊääÂ§á‰ªΩËøáÁ®ã‰∏≠Âá†‰∏™ÂÖ≥ÈîÆÁöÑËØ≠Âè•ÂàóÂá∫Êù•Ôºö 12345678910111213&gt;Q1:SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;&gt;Q2:START TRANSACTION WITH CONSISTENT SNAPSHOTÔºõ&gt;/* other tables */&gt;Q3:SAVEPOINT sp;&gt;/* Êó∂Âàª 1 */&gt;Q4:show create table `t1`;&gt;/* Êó∂Âàª 2 */&gt;Q5:SELECT * FROM `t1`;&gt;/* Êó∂Âàª 3 */&gt;Q6:ROLLBACK TO SAVEPOINT sp;&gt;/* Êó∂Âàª 4 */&gt;/* other tables */&gt; Âú®Â§á‰ªΩÂºÄÂßãÁöÑÊó∂ÂÄôÔºå‰∏∫‰∫ÜÁ°Æ‰øùRRÔºàÂèØÈáçÂ§çËØªÔºâÈöîÁ¶ªÁ∫ßÂà´ÔºåÂÜçËÆæÁΩÆ‰∏ÄÊ¨°RRÈöîÁ¶ªÁ∫ßÂà´(Q1); ÂêØÂä®‰∫ãÂä°ÔºåËøôÈáåÁî® WITH CONSISTENT SNAPSHOTÁ°Æ‰øùËøô‰∏™ËØ≠Âè•ÊâßË°åÂÆåÂ∞±ÂèØ‰ª•ÂæóÂà∞‰∏Ä‰∏™‰∏ÄËá¥ÊÄßËßÜÂõæÔºàQ2)Ôºõ ËÆæÁΩÆ‰∏Ä‰∏™‰øùÂ≠òÁÇπÔºåËøô‰∏™ÂæàÈáçË¶ÅÔºàQ3ÔºâÔºõ show create ÊòØ‰∏∫‰∫ÜÊãøÂà∞Ë°®ÁªìÊûÑ(Q4)ÔºåÁÑ∂ÂêéÊ≠£ÂºèÂØºÊï∞ÊçÆ ÔºàQ5ÔºâÔºåÂõûÊªöÂà∞SAVEPOINT spÔºåÂú®ËøôÈáåÁöÑ‰ΩúÁî®ÊòØÈáäÊîæ t1ÁöÑMDLÈîÅ ÔºàQ6„ÄÇÂΩìÁÑ∂ËøôÈÉ®ÂàÜÂ±û‰∫é‚ÄúË∂ÖÁ∫≤‚ÄùÔºå‰∏äÊñáÊ≠£ÊñáÈáåÈù¢ÈÉΩÊ≤°ÊèêÂà∞„ÄÇ DDL‰ªé‰∏ªÂ∫ì‰º†ËøáÊù•ÁöÑÊó∂Èó¥ÊåâÁÖßÊïàÊûú‰∏çÂêåÔºåÊàëÊâì‰∫ÜÂõõ‰∏™Êó∂Âàª„ÄÇÈ¢òÁõÆËÆæÂÆö‰∏∫Â∞èË°®ÔºåÊàë‰ª¨ÂÅáÂÆöÂà∞ËææÂêéÔºåÂ¶ÇÊûúÂºÄÂßãÊâßË°åÔºåÂàôÂæàÂø´ËÉΩÂ§üÊâßË°åÂÆåÊàê„ÄÇ ÂèÇËÄÉÁ≠îÊ°àÂ¶Ç‰∏ãÔºö Â¶ÇÊûúÂú®Q4ËØ≠Âè•ÊâßË°å‰πãÂâçÂà∞ËææÔºåÁé∞Ë±°ÔºöÊ≤°ÊúâÂΩ±ÂìçÔºåÂ§á‰ªΩÊãøÂà∞ÁöÑÊòØDDLÂêéÁöÑË°®ÁªìÊûÑ„ÄÇ Â¶ÇÊûúÂú®‚ÄúÊó∂Âàª 2‚ÄùÂà∞ËææÔºåÂàôË°®ÁªìÊûÑË¢´ÊîπËøáÔºåQ5ÊâßË°åÁöÑÊó∂ÂÄôÔºåÊä• Table definition has changed, please retry transactionÔºåÁé∞Ë±°ÔºömysqldumpÁªàÊ≠¢Ôºõ Â¶ÇÊûúÂú®‚ÄúÊó∂Âàª2‚ÄùÂíå‚ÄúÊó∂Âàª3‚Äù‰πãÈó¥Âà∞ËææÔºåmysqldumpÂç†ÁùÄt1ÁöÑMDLËØªÈîÅÔºåbinlogË¢´ÈòªÂ°ûÔºåÁé∞Ë±°Ôºö‰∏ª‰ªéÂª∂ËøüÔºåÁõ¥Âà∞Q6ÊâßË°åÂÆåÊàê„ÄÇ ‰ªé‚ÄúÊó∂Âàª4‚ÄùÂºÄÂßãÔºåmysqldumpÈáäÊîæ‰∫ÜMDLËØªÈîÅÔºåÁé∞Ë±°ÔºöÊ≤°ÊúâÂΩ±ÂìçÔºåÂ§á‰ªΩÊãøÂà∞ÁöÑÊòØDDLÂâçÁöÑË°®ÁªìÊûÑ„ÄÇ 7. ËÆ≤Ë°åÈîÅÂäüËøáÔºöÊÄé‰πàÂáèÂ∞ëË°åÈîÅÂØπÊÄßËÉΩÁöÑÂΩ±ÂìçË°åÈîÅÊòØÂú®Â≠òÂÇ®ÂºïÊìéÁ∫ßÂà´ÂÆûÁé∞ÁöÑÔºåÂπ∂‰∏çÊòØÂÉèÂÖ®Â±ÄÈîÅÂíåË°®Á∫ßÈîÅ‰∏ÄÊ†∑Âú® Server Á´ØÂÆûÁé∞„ÄÇ InnoDB ÊîØÊåÅË°åÈîÅÔºå‰∏çÊîØÊåÅÂàóÈîÅÔºåÂπ∂‰∏î innodb Ë°åÁ∫ßÈîÅÊòØÈÄöËøáÈîÅÁ¥¢ÂºïËÆ∞ÂΩïÂÆûÁé∞ÁöÑÔºåÂ¶ÇÊûúÊõ¥Êñ∞ÁöÑÂàóÊ≤°Âª∫Á¥¢ÂºïÊòØ‰ºöÈîÅ‰ΩèÊï¥‰∏™Ë°®ÁöÑ„ÄÇÂõ†‰∏∫‰∏çËµ∞Á¥¢ÂºïÔºåÊâÄ‰ª•ÂøÖÈ°ªÈÅçÂéÜÊï¥‰∏™Ë°®ÔºåÈÇ£‰πàÂ∞±‰ºöËØªÂèñ‰∏ÄË°åÔºåÈîÅ‰∏ÄË°åÔºåÂèàÂõ†‰∏∫ÊòØ‰∏§Èò∂ÊÆµÈîÅÔºåÂè™ÊúâÊõ¥Êñ∞ÊàêÂäüÔºå‰∫ãÂä°Êèê‰∫§‰πãÂêéÊâç‰ºöÈáäÊîæÈîÅ„ÄÇ MyISAM ÊúÄÂ∞èÁöÑÈîÅÁ≤íÂ∫¶ÊòØË°®ÔºåÂπ∂‰∏îÁî±‰∫éË°®ÈîÅÁöÑÂ≠òÂú®ÔºåÂêåÊó∂ÂàªÂè™ËÉΩÊòØÂçï‰∏™Á∫øÁ®ãÂØπË°®ËøõË°åÊìç‰ΩúÔºåËøôÂæàÂ§ßÁ®ãÂ∫¶‰∏äÈôêÂà∂‰∫ÜÂπ∂ÂèëÂ∫¶ÔºåÊâÄ‰ª•Ëøô‰πüÊòØ InnoDB Âèñ‰ª£ MyISAM ÁöÑÈáçË¶ÅÂéüÂõ†Âêß„ÄÇ ‰∏§Èò∂ÊÆµÈîÅÁöÑÊ¶ÇÂøµÊòØ‰ªÄ‰πà? ÂØπ‰∫ãÂä°‰ΩøÁî®Êúâ‰ªÄ‰πàÂ∏ÆÂä©? ‰∏§Èò∂ÊÆµÈîÅÊòØÊåáË°åÈîÅÊòØÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÂä†ÈîÅÔºå‰ΩÜÊòØÂπ∂‰∏çÊòØÂú®‰∏çÁî®‰∫Ü‰πãÂêéÂ∞±ÈáäÊîæÈîÅÔºåËÄåÊòØÁ≠âÂà∞‰∫ãÂä°Êèê‰∫§ÊâçÈáäÊîæÈîÅÔºåËøô‰∏ÄÁÇπË∑ü MDL ÔºàÂÖÉÊï∞ÊçÆÈîÅÔºâÂæàÂÉèÔºõ ÂØπ‰∫ãÂä°ÁöÑÂ∏ÆÂä©Â∞±ÊòØÔºö‰∏ÄÂÆöË¶ÅÂ∞ÜÂπ∂ÂèëÂ∫¶È´ò„ÄÅÊó∂Èó¥ËæÉÈïøÁöÑÊìç‰ΩúÁöÑË°åÊîæÂà∞‰∫ãÂä°Êèê‰∫§ÂâçÔºåÈò≤Ê≠¢ËøáÂ§öÁöÑÁ∫øÁ®ãÁ≠âÂæÖÈîÅ„ÄÇ ‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®‰∏§Èò∂ÊÆµÈîÅÂçèËÆÆÔºå‰∏∫‰Ωï‰∏çÂú®‰∫ãÂä°ÂêØÂä®Êó∂Â∞±Âä†ÈîÅÔºåÂèà‰∏∫‰ªÄ‰πà‰∏çÂú®ËØ≠Âè•ÊâßË°åÂÆåÂ∞±Ëß£ÈîÅÂë¢Ôºü È¶ñÂÖàÂõûÁ≠î‰∏Ä‰∏ã‰∏∫‰ªÄ‰πà‰∏çÂú®‰∫ãÂä°ÂêØÂä®Êó∂Â∞±Âä†ÈîÅÔºåÊàëËßâÂæóÂéüÂõ†Êúâ‰∏§‰∏™Ôºö ÂáèÂ∞èÈîÅÁöÑÁ≤íÂ∫¶ÂíåÂä†ÈîÅÊó∂ÈïøÔºåÊèêÈ´òÂπ∂ÂèëÂ∫¶„ÄÇ ‰∫ãÂä°ÂêØÂä®ÁöÑÊó∂ÂÄôÔºåÂπ∂Ê≤°ÊúâÊòéÁ°ÆËØ¥ÊòéÈúÄË¶Å‰øÆÊîπ‰ªÄ‰πàË°åÔºåÊ≠§Êó∂Â¶ÇÊûúË¶ÅÈîÅÂÆöË°åÂøÖÈ°ªÈîÅÂÆöÊï¥‰∏™Ë°®ÊâçË°å„ÄÇ ÂÜçÂõûÁ≠î‰∏Ä‰∏ã‰∏∫‰ªÄ‰πà‰∏çÂú®ËØ≠Âè•ÊâßË°åÂÆåÂ∞±Ëß£ÈîÅ„ÄÇ Âõ†‰∏∫ËøôÊ†∑‰∫ãÂä°Â¶ÇÊûúÂõûÊªöÁöÑËØùÔºåÂ∞±‰ºöÊúâÈóÆÈ¢ò‰∫Ü„ÄÇ‰æãÂ¶Ç‰∏ãÈù¢ËøôÁßçÊÉÖÂÜµÔºö Â¶ÇÊûú‰∫ãÂä° A ÂõûÊªöÔºåÈÇ£ËÇØÂÆöÊó†Ê≥ïÂõûÊªö‰∫ÜÔºåÂõ†‰∏∫Â∑≤ÁªèÊúâÂ§ö‰∏™‰∫ãÂä°‰øÆÊîπ‰∫ÜËøô‰∏™ÂÄºÔºåÂπ∂‰∏î‰∫∫ÂÆ∂Â∑≤ÁªèÊèê‰∫§‰∫ÜÔºåÊó†Ê≥ïÂõûÊªö„ÄÇ Ê≠ªÈîÅÁöÑÊ¶ÇÂøµÊòØ‰ªÄ‰πà? ‰∏æ‰æãËØ¥ÊòéÂá∫Áé∞Ê≠ªÈîÅÁöÑÊÉÖÂÜµ„ÄÇ ‰∏§‰∏™ÊàñÂ§ö‰∏™Á∫øÁ®ãÂú®‰∫íÁõ∏Á≠âÂæÖÂØπÊñπÈáäÊîæËµÑÊ∫êÁöÑËøáÁ®ãÁß∞‰∏∫Ê≠ªÈîÅÁä∂ÊÄÅÔºåÂá∫Áé∞Ê≠ªÈîÅÁöÑÊÉÖÂÜµ‰∏ÄËà¨ÈÉΩÊòØÂµåÂ•óÈîÅÔºàË∑üÂ§öÁ∫øÁ®ã‰∏≠ÂµåÂ•óÂêåÊ≠•‰ª£Á†ÅÂùó‰∏ÄÊ†∑Ôºâ„ÄÇ ÊâÄ‰ª•ÊàëÁöÑÂª∫ËÆÆÊòØÂú®Âä†ÈîÅÁöÑÊó∂ÂÄô‰∏ÄËà¨ÈÉΩÂÅöÂà∞È°∫Â∫èÂä†ÈîÅÔºåËøôÊ†∑Â∞±ËÉΩÈò≤Ê≠¢ÈîÅ‰∫íÁõ∏ÂµåÂ•óÈóÆÈ¢ò„ÄÇ Ê≠ªÈîÅÁöÑÂ§ÑÁêÜÁ≠ñÁï•ÊúâÂì™‰∏§Áßç? Âú®Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÊ≠ªÈîÅÁöÑÂ§ÑÁêÜÁ≠ñÁï•ÊúâÔºö Êúâ‰∏™Ë∂ÖÊó∂Êú∫Âà∂ÔºåËøô‰∏™Ë∂ÖÊó∂Êó∂Èó¥ÂèØ‰ª•ÈÄöËøáÂèÇÊï∞innodb_lock_wait_timeoutÊù•ËÆæÁΩÆ„ÄÇÊó∂Èó¥Âà∞‰∫ÜËá™Âä®ÈáäÊîæÈîÅÔºåÂπ∂‰∏îÂõûÊªöÂΩìÂâç‰∫ãÂä°ÔºåËøô‰∏™ÈªòËÆ§ÊòØ 50sÔºåÊó∂Èó¥Â§™ÈïøÔºå‰∏ÄËà¨‰∏çËÄÉËôëÔºõ ÂèëËµ∑Ê≠ªÈîÅÊ£ÄÊµãÔºåÂèëÁé∞Ê≠ªÈîÅÂêéÔºå‰∏ªÂä®ÂõûÊªöÊ≠ªÈîÅÈìæÊù°‰∏≠ÁöÑÊüê‰∏Ä‰∏™‰∫ãÂä°ÔºåËÆ©ÂÖ∂‰ªñ‰∫ãÂä°Âæó‰ª•ÁªßÁª≠ÊâßË°å„ÄÇÂ∞ÜÂèÇÊï∞innodb_deadlock_detectËÆæÁΩÆ‰∏∫onÔºåË°®Á§∫ÂºÄÂêØËøô‰∏™ÈÄªËæë„ÄÇËøô‰∏™ÈªòËÆ§ÊòØÂºÄÂêØÁöÑÔºå‰ΩÜÊòØÂêßÔºåËøô‰∏™ÂæàÊ∂àËÄóËµÑÊ∫ê„ÄÇ ÊúâÂì™‰∫õÊÄùË∑ØÂèØ‰ª•Ëß£ÂÜ≥ÁÉ≠ÁÇπÊõ¥Êñ∞ÂØºËá¥ÁöÑÂπ∂ÂèëÈóÆÈ¢ò? ÁÉ≠ÁÇπÊõ¥Êñ∞ÂØºËá¥ÁöÑÂπ∂ÂèëÈóÆÈ¢òÔºåÁóáÁªìÂ∞±Âú®‰∫éÊ≠ªÈîÅÊ£ÄÊµãÈùûÂ∏∏ÁöÑÊ∂àËÄóËµÑÊ∫êÔºåÊâÄ‰ª•ÂèØ‰ª•Êúâ‰ª•‰∏ãËß£ÂÜ≥Êé™ÊñΩÔºö Â∞ΩÈáèÈÅøÂÖçÊ≠ªÈîÅÔºåÊØîÂ¶Ç‰∏äÊñáËØ¥ÁöÑÂä†ÈîÅÊåâÈ°∫Â∫èÔºåÁÑ∂ÂêéÁõ¥Êé•Â∞ÜÊ≠ªÈîÅÊ£ÄÊµãÂÖ≥Èó≠Ôºå‰ΩÜÊòØËøôÊ†∑ÂÆπÊòìÈÄ†Êàê‰∏öÂä°ÊúâÊçüÔºå‰∏ÄËà¨Ê≠ªÈîÅÊ£ÄÊµãËôΩÁÑ∂Êµ™Ë¥πËµÑÊ∫ê‰ΩÜÊòØÊòØ‰∏öÂä°Êó†ÊçüÁöÑÔºåÊâÄ‰ª•ÂÖ≥Èó≠ÂèØËÉΩ‰∏çÊòØÁâπÂà´ÂèØÂèñÔºõ ÊéßÂà∂Âπ∂ÂèëÂ∫¶ÔºåÂØπÂ∫îÁõ∏ÂêåË°åÁöÑÊõ¥Êñ∞ÔºåÂú®ËøõÂÖ•ÂºïÊìé‰πãÂâçÊéíÈòü„ÄÇËøôÊ†∑Âú®InnoDBÂÜÖÈÉ®Â∞±‰∏ç‰ºöÊúâÂ§ßÈáèÁöÑÊ≠ªÈîÅÊ£ÄÊµãÂ∑•‰Ωú‰∫ÜÔºõ Â∞ÜÁÉ≠ÁÇπÁªÜÂàÜÔºåÊØîÂ¶ÇË¥≠‰π∞ÁîµÂΩ±Á•®ÔºåÊääÂΩ±Èô¢ÁöÑË¥¶Êà∑ÊÄªÈ¢ùÊãÜÊàê10Êù°ËÆ∞ÂΩïÊù•Â≠òÂÇ®ÔºåÂÖ∂10Êù°ËÆ∞ÂΩïÁöÑÂíåÁ≠â‰∫éÂΩ±Èô¢Ë¥¶Êà∑‰ΩôÈ¢ùÔºåËøôÊ†∑ËÉΩÂ∞ΩÈáèÂáèÂ∞ëÊ≠ªÈîÅÁöÑÊÉÖÂÜµ„ÄÇ ‰ªÄ‰πàÊó∂ÂÄô‰ºöËøõË°åÊ≠ªÈîÅÊ£ÄÊµãÔºü‰∏ÄÊó¶Ëß¶ÂèëÊ≠ªÈîÅÊ£ÄÊµãÊòØÊ£ÄÊµãÊâÄÊúâ‰∫ãÂä°ÂêóÔºü Â¶ÇÊûú‰ªñË¶ÅÂä†ÈîÅËÆøÈóÆÁöÑË°å‰∏äÊúâÈîÅÔºå‰ªñÊâçË¶ÅÊ£ÄÊµã„ÄÇ ‰∏çÊòØÊØèÊ¨°Ê≠ªÈîÅÊ£ÄÊµãÈÉΩÈÉΩË¶ÅÊâ´ÊâÄÊúâ‰∫ãÂä°„ÄÇÊØîÂ¶ÇÊüê‰∏™Êó∂ÂàªÔºå‰∫ãÂä°Á≠âÂæÖÁä∂ÊÄÅÊòØËøôÊ†∑ÁöÑÔºö BÂú®Á≠âAÔºåDÂú®Á≠âCÔºåÁé∞Âú®Êù•‰∫Ü‰∏Ä‰∏™EÔºåÂèëÁé∞EÈúÄË¶ÅÁ≠âDÔºåÈÇ£‰πàEÂ∞±Âà§Êñ≠Ë∑üD„ÄÅCÊòØÂê¶‰ºöÂΩ¢ÊàêÊ≠ªÈîÅÔºåËøô‰∏™Ê£ÄÊµã‰∏çÁî®ÁÆ°BÂíåA ‰ªäÊó•Èù¢ËØïÈ¢òÔºö Â¶ÇÊûú‰Ω†Ë¶ÅÂà†Èô§‰∏Ä‰∏™Ë°®ÈáåÈù¢ÁöÑÂâç10000Ë°åÊï∞ÊçÆÔºåÊúâ‰ª•‰∏ã‰∏âÁßçÊñπÊ≥ïÂèØ‰ª•ÂÅöÂà∞Ôºö Á¨¨‰∏ÄÁßçÔºåÁõ¥Êé•ÊâßË°ådelete from T limit 10000; Á¨¨‰∫åÁßçÔºåÂú®‰∏Ä‰∏™ËøûÊé•‰∏≠Âæ™ÁéØÊâßË°å20Ê¨° delete from T limit 500; Á¨¨‰∏âÁßçÔºåÂú®20‰∏™ËøûÊé•‰∏≠ÂêåÊó∂ÊâßË°ådelete from T limit 500„ÄÇ ‰Ω†‰ºöÈÄâÊã©Âì™‰∏ÄÁßçÊñπÊ≥ïÂë¢Ôºü‰∏∫‰ªÄ‰πàÂë¢Ôºü Âú®‰∏Ä‰∏™ËøûÊé•‰∏≠Âæ™ÁéØÊâßË°å20Ê¨° delete from T limit 500„ÄÇ Á°ÆÂÆûÊòØËøôÊ†∑ÁöÑÔºåÁ¨¨‰∫åÁßçÊñπÂºèÊòØÁõ∏ÂØπËæÉÂ•ΩÁöÑ„ÄÇ Á¨¨‰∏ÄÁßçÊñπÂºèÔºàÂç≥ÔºöÁõ¥Êé•ÊâßË°ådelete from T limit 10000ÔºâÈáåÈù¢ÔºåÂçï‰∏™ËØ≠Âè•Âç†Áî®Êó∂Èó¥ÈïøÔºåÈîÅÁöÑÊó∂Èó¥‰πüÊØîËæÉÈïøÔºõËÄå‰∏îÂ§ß‰∫ãÂä°Ëøò‰ºöÂØºËá¥‰∏ª‰ªéÂª∂Ëøü„ÄÇ Á¨¨‰∏âÁßçÊñπÂºèÔºàÂç≥ÔºöÂú®20‰∏™ËøûÊé•‰∏≠ÂêåÊó∂ÊâßË°ådelete from T limit 500ÔºâÔºå‰ºö‰∫∫‰∏∫ÈÄ†ÊàêÈîÅÂÜ≤Á™Å„ÄÇ Á°ÆÂÆûÊòØËøôÊ†∑ÁöÑÔºåÁ¨¨‰∫åÁßçÊñπÂºèÊòØÁõ∏ÂØπËæÉÂ•ΩÁöÑ„ÄÇ Á¨¨‰∏ÄÁßçÊñπÂºèÔºàÂç≥ÔºöÁõ¥Êé•ÊâßË°ådelete from T limit 10000ÔºâÈáåÈù¢ÔºåÂçï‰∏™ËØ≠Âè•Âç†Áî®Êó∂Èó¥ÈïøÔºåÈîÅÁöÑÊó∂Èó¥‰πüÊØîËæÉÈïøÔºõËÄå‰∏îÂ§ß‰∫ãÂä°Ëøò‰ºöÂØºËá¥‰∏ª‰ªéÂª∂Ëøü„ÄÇ Á¨¨‰∏âÁßçÊñπÂºèÔºàÂç≥ÔºöÂú®20‰∏™ËøûÊé•‰∏≠ÂêåÊó∂ÊâßË°ådelete from T limit 500ÔºâÔºå‰ºö‰∫∫‰∏∫ÈÄ†ÊàêÈîÅÂÜ≤Á™Å„ÄÇ 8. ‰∫ãÂä°Âà∞Â∫ïÊòØÈöîÁ¶ªËøòÊòØ‰∏çÈöîÁ¶ªÁöÑËøôÁ´†Áü•ËØÜÁÇπÂæàÂ§öÔºåÈöæÂ∫¶ÊØîËæÉÂ§ßÔºÅ ÂÖàÂõûÈ°æ‰∏Ä‰∏ã‰ªÄ‰πàÊòØ MVCCÔºåÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü MVCCÔºåÂ§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂ÔºåÂú®Êü•ËØ¢ËÆ∞ÂΩïÁöÑÊó∂ÂÄôÔºå‰∏çÂêåÊó∂ÂàªÂêØÂä®ÁöÑ‰∫ãÂä°‰ºöÊúâ‰∏çÂêåÁöÑread-view„ÄÇÂ¶ÇÂõæ‰∏≠ÁúãÂà∞ÁöÑÔºåÂú®ËßÜÂõæA„ÄÅB„ÄÅCÈáåÈù¢ÔºåËøô‰∏Ä‰∏™ËÆ∞ÂΩïÁöÑÂÄºÂàÜÂà´ÊòØ1„ÄÅ2„ÄÅ4ÔºåÂêå‰∏ÄÊù°ËÆ∞ÂΩïÂú®Á≥ªÁªü‰∏≠ÂèØ‰ª•Â≠òÂú®Â§ö‰∏™ÁâàÊú¨„ÄÇ„ÄåÂ≠òÂÇ®Âú®undo log Êó•Âøó‰∏≠„Äç ‰ªÄ‰πàÊòØ read-viewÔºü ‰∏ÄËá¥ÊÄßËßÜÂõæÔºåÂÖ®Áß∞ÊòØ consistent read-viewÔºåËøôÈáåÁ®çÂæÆË°•ÂÖÖ‰∏Ä‰∏ãÔºåÂú® mysql‰∏≠Êúâ‰∏§ÁßçËßÜÂõæÔºö ‰∏Ä‰∏™ÊòØview„ÄÇÂÆÉÊòØ‰∏Ä‰∏™Áî®Êü•ËØ¢ËØ≠Âè•ÂÆö‰πâÁöÑËôöÊãüË°®ÔºåÂú®Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÊâßË°åÊü•ËØ¢ËØ≠Âè•Âπ∂ÁîüÊàêÁªìÊûú„ÄÇÂàõÂª∫ËßÜÂõæÁöÑËØ≠Ê≥ïÊòØcreate view ‚Ä¶ ÔºåËÄåÂÆÉÁöÑÊü•ËØ¢ÊñπÊ≥ï‰∏éË°®‰∏ÄÊ†∑„ÄÇ Âè¶‰∏Ä‰∏™ÊòØInnoDBÂú®ÂÆûÁé∞MVCCÊó∂Áî®Âà∞ÁöÑ‰∏ÄËá¥ÊÄßËØªËßÜÂõæÔºåÂç≥consistent read viewÔºåÁî®‰∫éÊîØÊåÅRCÔºàRead CommittedÔºåËØªÊèê‰∫§ÔºâÂíåRRÔºàRepeatable ReadÔºåÂèØÈáçÂ§çËØªÔºâÈöîÁ¶ªÁ∫ßÂà´ÁöÑÂÆûÁé∞„ÄÇ Âú®Êü•ËØ¢ÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÊòØÈúÄË¶ÅÁî®Âà∞ read-viewÁöÑÔºå‰ΩÜÊòØÂú® update ÁöÑÊó∂ÂÄôÔºåÊòØÂøÖÈ°ªÂè™ËÉΩËØªÂΩìÂâçÊúÄÊñ∞ÂÄºÂì¶ÔºÅÔºÅÔºÅ„ÄåËøôÈáåÁöÑÊúÄÊñ∞ÂÄºËÇØÂÆöÊòØÂ∑≤ÁªèÊèê‰∫§ÁöÑ‰∫ãÂä°ÂéªÂÅöÁöÑÔºåÂ¶ÇÊûúÊú™Êèê‰∫§ÁöÑ‰∫ãÂä°ÂéªÊìç‰ΩúËøô‰∏™ÂÄºÔºåÈÇ£ËÇØÂÆöÊòØÂä†‰∫ÜË°åÈîÅ‰∏≠ÁöÑÁã¨Âç†ÈîÅÂï¶ÔºåÊâÄ‰ª•‰Ω†Âú® update ÁöÑËØùÂøÖÈ°ªÁ≠âÂÖ∂‰ªñ‰∫ãÂä°ÈáäÊîæÈîÅ„ÄÇ„Äç ËØ¥‰∫ÜËøô‰πàÂ§öÔºåÂõûÂà∞ÈóÆÈ¢òÔºåread-viewÂÖ∂ÂÆûÂ∞±ÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÊØè‰∏™‰∫ãÂä°ÊàñËÄÖËØ≠Âè•ÈÉΩÊúâÁöÑ‰∏Ä‰∏™Êï∞ÁªÑÔºåÂè™‰∏çËøáËøô‰∏™Êï∞ÁªÑÊúâÁÇπÁâπÊÆä„ÄÇ InnoDB‰∏∫ÊØè‰∏™‰∫ãÂä°ÊûÑÈÄ†‰∫Ü‰∏Ä‰∏™Êï∞ÁªÑÔºåÁî®Êù•‰øùÂ≠òËøô‰∏™‰∫ãÂä°ÂêØÂä®Áû¨Èó¥ÔºåÂΩìÂâçÊ≠£Âú®‚ÄúÊ¥ªË∑É‚ÄùÁöÑÊâÄÊúâ‰∫ãÂä°ID„ÄÇ‚ÄúÊ¥ªË∑É‚ÄùÊåáÁöÑÂ∞±ÊòØÔºåÂêØÂä®‰∫Ü‰ΩÜËøòÊ≤°Êèê‰∫§„ÄÇ Êï∞ÁªÑÈáåÈù¢‰∫ãÂä°IDÁöÑÊúÄÂ∞èÂÄºËÆ∞‰∏∫‰ΩéÊ∞¥‰ΩçÔºåÂΩìÂâçÁ≥ªÁªüÈáåÈù¢Â∑≤ÁªèÂàõÂª∫ËøáÁöÑ‰∫ãÂä°IDÁöÑÊúÄÂ§ßÂÄºÂä†1ËÆ∞‰∏∫È´òÊ∞¥‰Ωç„ÄÇ Ëøô‰∏™ËßÜÂõæÊï∞ÁªÑÂíåÈ´òÊ∞¥‰ΩçÔºåÂ∞±ÁªÑÊàê‰∫ÜÂΩìÂâç‰∫ãÂä°ÁöÑ‰∏ÄËá¥ÊÄßËßÜÂõæÔºàread-viewÔºâ„ÄÇ Êü•ËØ¢ÁöÑÊó∂ÂÄôÔºåÊòØÂ¶Ç‰ΩïÁî®Âà∞ read-view ÁöÑÔºü InnoDBÁöÑË°åÊï∞ÊçÆÊúâÂ§ö‰∏™ÁâàÊú¨ÔºåÊØè‰∏™Êï∞ÊçÆÁâàÊú¨ÊúâËá™Â∑±ÁöÑrow trx_idÔºåÊØè‰∏™‰∫ãÂä°ÊàñËÄÖËØ≠Âè•ÊúâËá™Â∑±ÁöÑ‰∏ÄËá¥ÊÄßËßÜÂõæ„ÄÇÊôÆÈÄöÊü•ËØ¢ËØ≠Âè•ÊòØ‰∏ÄËá¥ÊÄßËØªÔºå‰∏ÄËá¥ÊÄßËØª‰ºöÊ†πÊçÆrow trx_idÂíå‰∏ÄËá¥ÊÄßËßÜÂõæÔºàread-viewÔºâÁ°ÆÂÆöÊï∞ÊçÆÁâàÊú¨ÁöÑÂèØËßÅÊÄß„ÄÇ ÂØπ‰∫éÂèØÈáçÂ§çËØªÔºåÊü•ËØ¢Âè™ÊâøËÆ§Âú®‰∫ãÂä°ÂêØÂä®ÂâçÂ∞±Â∑≤ÁªèÊèê‰∫§ÂÆåÊàêÁöÑÊï∞ÊçÆÔºõ„ÄåÂõ†‰∏∫ÂØπ‰∫éÂèØÈáçÂ§çËØªÁöÑÈöîÁ¶ªÁ∫ßÂà´Ôºå‰∏ÄËá¥ÊÄßËßÜÂõæÊòØÂú®‰∫ãÂä°ÂºÄÂßãÁöÑÊó∂ÂÄôËøõË°åÂÖ®Â∫ìÂø´ÁÖßÁîüÊàêÁöÑ„Äç ÂØπ‰∫éËØªÊèê‰∫§ÔºåÊü•ËØ¢Âè™ÊâøËÆ§Âú®ËØ≠Âè•ÂêØÂä®ÂâçÂ∞±Â∑≤ÁªèÊèê‰∫§ÂÆåÊàêÁöÑÊï∞ÊçÆÔºõ„ÄåÂõ†‰∏∫ÂØπ‰∫éËØªÊèê‰∫§ÁöÑÈöîÁ¶ªÁ∫ßÂà´Êù•ËØ¥Ôºå‰∏ÄËá¥ÊÄßËßÜÂõæÊòØÂú®ÊØè‰∏ÄÊ¨°ÊâßË°åËØ≠Âè•ÁöÑÊó∂ÂÄôÁîüÊàêÁöÑÔºåË∑ü‰∫ãÂä°Ê≤°ÊúâÂÖ≥Á≥ª„Äç ÊÄªÁªì‰∏äËø∞‰∏§ÁßçÊÉÖÂÜµÔºåÂ∞±ÊòØÂè™ÊúâËßÜÂõæÁîüÊàêÂâç‰∫ãÂä°Êèê‰∫§‰∫ÜÁöÑÊï∞ÊçÆÊàëËÉΩÁúãÂà∞ÔºåÂÖ∂‰ªñÁöÑÊàëÈÉΩÁúã‰∏çÂà∞„ÄÇ ËÄåÂΩìÂâçËØªÔºåÊÄªÊòØËØªÂèñÂ∑≤ÁªèÊèê‰∫§ÂÆåÊàêÁöÑÊúÄÊñ∞ÁâàÊú¨„ÄÇ„ÄåÁ¨¨ 2 ‰∏™ÈóÆÈ¢òÂ∑≤ÁªèËÆ≤‰∫ÜËøô‰∏™‰∫Ü„Äç ‰∏äÈù¢‰∏ÄÁõ¥Âº∫Ë∞ÉÁöÑÔºåÂΩìÂâçËØªÔºå‰ªÄ‰πàÊó∂ÂÄô‰ºöÂá∫Áé∞ÂΩìÂâçËØªÁöÑÊÉÖÂÜµÔºü È¶ñÂÖàÊàë‰ª¨Ë¶ÅÊòéÁ°ÆÔºåÂΩìÂâçËØªÔºåÂøÖÈ°ªË¶ÅËØªÁöÑÊòØËØ•Ë°åÁöÑÊúÄÊñ∞ÁâàÊú¨ÔºåÊ≠§Êó∂ÁöÑËßÜÂõæÂø´ÁÖßÂ∑≤ÁªèÂ§±Êïà‰∫ÜÔºåËÄå‰∏î‰Ω†Ë¶ÅÊÉ≥ËØªËØ•Ë°åÁöÑÊúÄÊñ∞ÁâàÊú¨ÔºåÂ∞±ÂøÖÈ°ªÂéªÂä†ÈîÅÔºÅÔºÅÔºÅÔºÅ„ÄåÊÑèÊÄùÂæàÊòéÁ°ÆÔºåÂ∞±ÊòØ ÂΩìÂâçËØª == ÁªôËØ•Ë°åÂä†ÈîÅ„Äç ÊâÄ‰ª•Ôºå‰ªÄ‰πàÊó∂ÂÄô‰ºöÂá∫Áé∞Ë°åÁöÑÂΩìÂâçËØªÂë¢ÔºüÈÇ£Â∞±ÊòØÁªôËØ•Ë°åÂä†ÈîÅ„ÄéÊÇ≤ËßÇÈîÅ„Äè‰∫ÜÔºåÈÇ£ÈóÆÈ¢òÂ∞±ËΩ¨ÂåñÊàê‰∫Ü‰ªÄ‰πàÊó∂ÂÄô‰ºöÁªôË°åÂä†ÈîÅÂë¢Ôºü ÈÇ£Ëøô‰∏™ÈóÆÈ¢òÂ∞±ÈùûÂ∏∏ÁÆÄÂçï‰∫ÜÔºåÊúâ‰ª•‰∏ãÂá†ÁßçÊÉÖÂÜµ‰ºö‰ΩøÂæóÂΩìÂâçË°åÂä†‰∏äÊÇ≤ËßÇÈîÅÔºö SELECT ‚Ä¶ FROM ‚Ä¶ LOCK IN SHARE MODEÔºåselect ÁöÑÊó∂ÂÄôÂº∫Ë°åÂä†‰∏äÂÖ±‰∫´ÈîÅÔºåÂ¶ÇÊûú‰∏çÂä†ÂÖ∂ÂÆûÂ∞±ÊòØÈªòËÆ§ÁöÑÂø´ÁÖßËØªÔºõ SELECT ‚Ä¶ FROM ‚Ä¶ FOR UPDATEÔºåselect ÁöÑÊó∂ÂÄôÂº∫Ë°åÂä†‰∏äÁã¨Âç†ÈîÅÔºõ UPDATE ‚Ä¶ WHERE ‚Ä¶ ÔºåÁã¨Âç†ÈîÅÔºõ DELETE FROM ‚Ä¶ WHERE ‚Ä¶ ÔºåÁã¨Âç†ÈîÅÔºõ INSERT ËØ≠Âè•Â∞ÜÂú®ÊèíÂÖ•ÁöÑËÆ∞ÂΩï‰∏äÂä†‰∏ÄÊääÊéí‰ªñÈîÅ„ÄåÁã¨Âç†ÈîÅ„Äç„ÄÇ Â•ΩÂêßÔºåÂÖ∂ÂÆû‰πüÂ∞±ÊòØ select Âï•ÈÉΩ‰∏çÂä†‰ºöÂØºËá¥‰∏çÁªôË°åÈîÅÂä†ÊÇ≤ËßÇÈîÅÔºåÂÖ∂‰ªñÁöÑÈÉΩ‰ºöÂä†ÁöÑÔºåÊÑèÂë≥ÁùÄÈÉΩÊòØË¶ÅÂéªËØªÂΩìÂâçÂÄºÔºåÊÑèÂë≥ÁùÄËøô‰∏™ rc Á∫ßÂà´ÁöÑÈöîÁ¶ªÂ∞±Êó†Êïà‰∫ÜÔºå‰∏çËøáËØùËØ¥ÂõûÊù•Ôºå‰∫∫ÂÆ∂ rc Êú¨Ë∫´Â∞±ÊòØ ÂèØÈáçÂ§çËØª ÁöÑÈöîÁ¶ªÁ∫ßÂà´ÔºåÊú¨Ë∫´Â∞±ÊòØÁî®‰∫é Êï∞ÊçÆ‰øÆÊîπ‰∫ÜÊàë‰∏çÂéªËØª „ÄÇ http://www.fordba.com/locks-set-by-different-sql-statements-in-innodb.html ËøôÁØáÊñáÁ´†ÂØπ sql ËØ≠Âè•Âä†ÈîÅÂàÜÊûêÁöÑÊàëËßâÂæóÊòØÊàëÁúãÂà∞ÁöÑÊúÄÂ•ΩÁöÑ‰∫ÜÔºåÂèóÁõäÂå™ÊµÖÔºÅ Á¨¨ 4 ‰∏™ÈóÆÈ¢ò‰∏≠ÊèêÂà∞ÁöÑ‚Äúlock in shared mode‚Äù ‚Äúfor update‚ÄùÊòØ‰ªÄ‰πàÈîÅÔºü Ëøô‰∏™ÂæàÁÆÄÂçïÂï¶ÔºåÂ∞±ÊòØ mysql ‰∏≠ÁöÑÊÇ≤ËßÇÈîÅ‰∏≠ÁöÑÂÖ±‰∫´ÈîÅÂíåÁã¨Âç†ÈîÅ„ÄÇ Êó¢ÁÑ∂Ë∞àÂà∞ÈîÅ‰∫ÜÔºåÈÇ£‰Ω†ÂÜçÂõûÈ°æ‰∏Ä‰∏ãÁé∞Âú®Êé•Ëß¶Âà∞ÁöÑÊâÄÊúâÈîÅÂêßÔºå‰πüÂèØ‰ª•Ëá™Â∑±ÊãìÂ±ï‰∏Ä‰∏ãÔºÅ ÂÖ∂ÂÆûÔºå‰∏äÈù¢ËÆ≤Âà∞ÁöÑÈîÅÈÉΩÊòØÂèØ‰ª•Ë∑ü lock ‰ΩìÁ≥ªÂØπÂ∫î‰∏äÁöÑÔºåÊØîÂ¶ÇËØ¥‰∏äÊñáÁöÑ‰πêËßÇÈîÅÊÇ≤ËßÇÈîÅÔºåÂØπÂ∫îÁöÑÂ∞±ÊòØ lock ‰ΩìÁ≥ªÁöÑ‰πêËßÇÈîÅÊÇ≤ËßÇÈîÅÔºå‰πêËßÇÈîÅÂ∞±ÊòØÂ∫ïÂ±ÇÊòØ CASÔºåCAS ‰∏≠Êúâ‰∏â‰∏™ÂÄºÔºöÂΩìÂâçÂÜÖÂ≠òÂÄº„ÄÅÈ¢ÑËØªÁöÑÂÄº„ÄÅÊÉ≥‰øÆÊîπÁöÑÂÄºÔºåÂ¶ÇÊûúÂΩìÂâçÂÄºÂíåÈ¢ÑËØªÂÄº‰∏ÄÊ†∑ÔºåÊàëÂ∞±ÈªòËÆ§Ê≤°Ë¢´‰øÆÊîπËøáÔºåÁõ¥Êé•‰øÆÊîπÊàêÊÉ≥‰øÆÊîπÁöÑÂÄºÔºåÂΩìÁÑ∂ËøôÊ†∑‰ºöÈÄ†Êàê‰∏Ä‰∏™ÈóÆÈ¢òÔºöABA ÈóÆÈ¢òÔºåÂú® mysql ‰∏≠ÊúÄ‰∏ªË¶ÅÁöÑÊñπÊ≥ïÊòØÂä†‰∏Ä‰∏™ version Â≠óÊÆµÔºåÁî® version Â≠óÊÆµÂéªÂà§Êñ≠ÊòØÂê¶Ë¢´‰øÆÊîπËøáÔºåÂú® lock ‰ΩìÁ≥ª‰∏≠ÔºåÊúÄ‰∏ªË¶ÅÁöÑÊñπÊ≥ïÊòØÂä†‰∏Ä‰∏™ stampÔºåÁ±ª‰ºº‰∫éÊó∂Èó¥Êà≥ËøôÊ†∑ÁöÑ‰∏úË•øÔºåÂú® StampedLock ÈáåÈù¢ÊúâÂéªÁî®Âà∞„ÄÇÂΩìÁÑ∂‰∫ÜÔºåCAS Ëøò‰ºöÊúâÂè¶Â§ñ‰∏§‰∏™ÈóÆÈ¢òÔºö‰∏Ä‰∏™ÊòØËá™Êóã‰ºöÈÄ†ÊàêcpuËµÑÊ∫êÁöÑÊµ™Ë¥πÔºå‰∏Ä‰∏™ÊòØÂè™ËÉΩ‰øùËØÅÂçï‰∏™ÂèòÈáèÁöÑÂéüÂ≠êÊÄß„Äå‰Ω†Â¶ÇÊûúÊÉ≥‰øùËØÅÂ§ö‰∏™ÁöÑËØùÂ∞±Áõ¥Êé•ÂÜôÂà∞‰∏Ä‰∏™ÂØπË±°‰∏≠Â∞±ÂÆå‰∫ã‰∫Ü„Äç„ÄÇ ÂõûÂà∞Ê≠£È¢òÔºå‰∏äÈù¢ËÆ≤ÂÆå‰πêËßÇÈîÅÔºåÁé∞Âú®ËÆ≤ËÆ≤ÊÇ≤ËßÇÈîÅÂêßÔºåmysql ‰∏≠ÁöÑÁã¨Âç†ÈîÅÂíåÂÖ±‰∫´ÈîÅÂíå AQS ‰∏≠ÁöÑÂÆåÂÖ®‰∏ÄËá¥ÔºåËøô‰∏§ÊÄùÊÉ≥‰πüÂÆåÂÖ®‰∏ÄÊ†∑ÔºåËá≥‰∫é mysql ‰∏≠ÂÜÖÈÉ®Â¶Ç‰ΩïÂÆûÁé∞ÁöÑÊàë‰∏çÂ§™Ê∏ÖÊ•öÔºåÂõ†‰∏∫Ë≤å‰ººÊòØÁî® c ÂÜôÁöÑÔºåÁúãÁöÑÂÖ¥Ë∂£‰∏çÂ§ßÔºå AQS ÁöÑÂ∫ïÂ±ÇÊ∫êÁ†ÅÊòØÊúâÁúãËøáÁöÑÔºåAQS Â∞±ÊòØÁî®ÁöÑÊ®°ÊùøÊñπÊ≥ïÁöÑËÆæËÆ°ÊÄùÊÉ≥ÂòõÔºåÂØπÂ§ñÊàë‰ª¨ÊÉ≥Ë¶ÅÂéªÂÆûÁé∞ËØªÂÜôÈîÅÁöÑËØùÂè™ÈúÄË¶ÅÁªßÊâøÂá†‰∏™ÊñπÊ≥ïÂ∞±ÂèØ‰ª•‰∫ÜÔºåÊØîÂ¶ÇÁã¨Âç†ÈîÅ ReentrantLock Âè™ÈúÄË¶ÅÁªßÊâø tryacquired()„ÄÅtryRealease()„ÄÅisHeldExclusive()‚Ä¶„ÄåËØ¥‰∏çÂÆö‰ºöËÆ©ÊàëÊâãÂä®ÂéªÂÆûÁé∞‰∏Ä‰∏™ÔºåËøô‰∏™ÊàëÂæóÊ≥®ÊÑè‰∏Ä‰∏ãÔºåÊèêÂâçÂÜô‰∏Ä‰∏™ÔºåÂàöÊâçÂÜôÁöÑËøáÁ®ã‰∏≠ÔºåÂèàÂèëÁé∞‰∫Ü transient Ëøô‰∏™ÂÖ≥ÈîÆËØçÔºåÁúüÁöÑÁâõÁöÆÔºåËøô‰∏™ÂçöÂÆ¢ËÆ≤ÁöÑÁúüÁöÑÂ•ΩÔºöhttps://juejin.im/post/5dda467051882572f8249f11#heading-10„Äç„ÄÇ„ÄÇ„ÄÇ„ÄÇÊáíÂæóËÆ≤‰∫Ü„ÄÇ„ÄÇ„ÄÇ 9. ÊôÆÈÄöÁ¥¢ÂºïÂíåÂîØ‰∏ÄÁ¥¢ÂºïÔºåÂ∫îËØ•Â¶Ç‰ΩïÈÄâÊã© Âú®Êü•ÊâæËøáÁ®ã‰∏≠ÔºåÊôÆÈÄöÁ¥¢ÂºïÂíåÂîØ‰∏ÄÁ¥¢ÂºïÁöÑÊÄßËÉΩÂü∫Êú¨‰∏ÄÊ†∑Ôºå‰ΩÜÊòØÂú®Êõ¥Êñ∞ËøáÁ®ã‰∏≠ÔºåÂ¶ÇÊûúËÆ∞ÂΩï‰∏çÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÈÇ£ÊôÆÈÄöÁ¥¢ÂºïÂíåÂîØ‰∏ÄÁ¥¢ÂºïÁöÑÊÄßËÉΩÂ∑ÆË∑ùÂ∞±ÂæàÂ§ß‰∫ÜÔºåÂõ†‰∏∫ÊôÆÈÄöÁ¥¢ÂºïÂèØ‰ª•‰ΩøÁî® changebufferÔºåËÄåÂîØ‰∏ÄÁ¥¢ÂºïÂõ†‰∏∫ÊúâÂîØ‰∏ÄÊÄßÁ∫¶ÊùüÔºåÈúÄË¶ÅÂ∞ÜÊâÄÊúâÊï∞ÊçÆËØªÂÖ•Âà∞ÂÜÖÂ≠ò‰∏≠ÔºåËøôÊ†∑Â∞±Â§±Âéª‰∫Ü changebuffer ÁöÑÊÑè‰πâÔºåÊâÄ‰ª•ÈÄüÂ∫¶ÂæàÊÖ¢„ÄÇ changebufferÔºöÂ≠òÂÇ®Áî®Êà∑Êõ¥Êñ∞ÁöÑËØ≠Âè•„ÄÇÂú®‰∏ãÊ¨°Êü•ËØ¢ÈúÄË¶ÅËÆøÈóÆËøô‰∏™Êï∞ÊçÆÈ°µÁöÑÊó∂ÂÄôÔºåÊâçÂ∞ÜÊï∞ÊçÆÈ°µËØªÂÖ•ÂÜÖÂ≠òÔºåÊâßË°å change buffer‰∏≠‰∏éËøô‰∏™È°µÊúâÂÖ≥ÁöÑÊìç‰ΩúÔºåÊ≥®ÊÑèÂì¶Ôºåchange bufferÊòØÂèØ‰ª•ÊåÅ‰πÖÂåñÔºåÂ∞Üchange buffer‰∏≠ÁöÑÊìç‰ΩúÂ∫îÁî®Âà∞ÂéüÊï∞ÊçÆÈ°µÔºåÂæóÂà∞ÊúÄÊñ∞ÁªìÊûúÁöÑËøáÁ®ãÁß∞‰∏∫merge„ÄÇÈô§‰∫ÜËÆøÈóÆËøô‰∏™Êï∞ÊçÆÈ°µ‰ºöËß¶ÂèëmergeÂ§ñÔºåÁ≥ªÁªüÊúâÂêéÂè∞Á∫øÁ®ã‰ºöÂÆöÊúümerge„ÄÇÂú®Êï∞ÊçÆÂ∫ìÊ≠£Â∏∏ÂÖ≥Èó≠ÔºàshutdownÔºâÁöÑËøáÁ®ã‰∏≠Ôºå‰πü‰ºöÊâßË°åmergeÊìç‰Ωú„ÄÇÊòæÁÑ∂ÔºåÂ¶ÇÊûúËÉΩÂ§üÂ∞ÜÊõ¥Êñ∞Êìç‰ΩúÂÖàËÆ∞ÂΩïÂú®change bufferÔºåÂáèÂ∞ëËØªÁ£ÅÁõòÔºåËØ≠Âè•ÁöÑÊâßË°åÈÄüÂ∫¶‰ºöÂæóÂà∞ÊòéÊòæÁöÑÊèêÂçá„ÄÇËÄå‰∏îÔºåÊï∞ÊçÆËØªÂÖ•ÂÜÖÂ≠òÊòØÈúÄË¶ÅÂç†Áî®buffer poolÁöÑÔºåÊâÄ‰ª•ËøôÁßçÊñπÂºèËøòËÉΩÂ§üÈÅøÂÖçÂç†Áî®ÂÜÖÂ≠òÔºåÊèêÈ´òÂÜÖÂ≠òÂà©Áî®Áéá„ÄÇ ÊïÖ changebuffer ÈÄÇÂêàÂÜôÂ§öËØªÂ∞ëÁöÑÂú∫ÊôØÔºåËøôÊ†∑ËÉΩÊúÄÂ§ßÈôêÂ∫¶ÁöÑÂä†Âø´ÂÜôÂÖ•ÁöÑÈÄüÂ∫¶ÔºåÊâÄ‰ª•ËØ¥ changebuffer ÂèØ‰ª•ÈÅøÂÖçÂÜôÂÖ•ÁöÑÊó∂ÂÄôÈöèÊú∫ÂéªËØªÂèñÊï∞ÊçÆÂà∞ÂÜÖÂ≠ò‰∏≠ÔºåËäÇÁúÅÁöÑÊòØÈöèÊú∫ËØªÁ£ÅÁõòÁöÑ IO Ê∂àËÄó„ÄÇ redo log ‰∏ªË¶ÅËäÇÁúÅÁöÑÊòØÈöèÊú∫ÂÜôÁ£ÅÁõòÁöÑIOÊ∂àËÄóÔºàËΩ¨ÊàêÈ°∫Â∫èÂÜôÔºâÔºåËÄåchange buffer‰∏ªË¶ÅËäÇÁúÅÁöÑÂàôÊòØÈöèÊú∫ËØªÁ£ÅÁõòÁöÑIOÊ∂àËÄó„ÄÇ tip: ‰∏∫‰ªÄ‰πàËØ¥ redo log ÊòØÂ∞ÜÁ£ÅÁõòÁöÑÈöèÊú∫ÂÜôÂèòÊàêÈ°∫Â∫èÂÜôÔºü Â¶ÇÊûúÊ≤°Êúâ redo logÔºåÈÇ£‰πàÊØèÊ¨°Êï∞ÊçÆÊù•‰∫ÜÊàë‰ª¨ÈÉΩË¶ÅÁõ¥Êé•ÂéªËêΩÁõòÔºåÊØè‰∏ÄÊ¨°Êï∞ÊçÆÊàë‰ª¨ÈÉΩÈúÄË¶ÅÂéªËøõË°åÁ£ÅÁõòÈöèÊú∫ËØªÂÜôÔºåËÄåÊúâ‰∫Ü redo logÊàë‰ª¨ÂèØ‰ª•ÂÖàÂ∞ÜÊï∞ÊçÆÈ°∫Â∫èÁõ¥Êé•ËøΩÂä†Âà∞Êñá‰ª∂Êú´Â∞æ„Äåredo logÊñá‰ª∂ÁöÑÂ§ßÂ∞èÊòØÂõ∫ÂÆöÁöÑÔºåÊâÄ‰ª•ÂèØ‰ª•ÊòØÈ°∫Â∫èÂÜô„ÄçÔºåÁÑ∂Âêéredo logÂÜçÂú®‰πãÂêéËøõË°åËêΩÁõòÔºåËøôÊ†∑ÁöÑËØùÊàë‰ª¨ÁöÑÊï∞ÊçÆÂ∞±ÊòØÁõ∏ÂΩì‰∫éÈ°∫Â∫èÂÜôÂÖ•Á£ÅÁõò‰∫Ü„ÄÇ kafka ÁöÑÈ°∫Â∫èÂÜôÂÖ∂ÂÆûÂíåmysql È°∫Â∫èÂÜôÊòØ‰∏ÄÊ†∑ÁöÑÔºåÈÉΩÊòØÈááÁî®‰∫ÜÊó•ÂøóÔºåkafka‰∏≠‰ΩøÁî® logÔºåËÄå mysql ‰∏≠ÈááÁî® redo-logÔºåÊï∞ÊçÆÊù•‰∫ÜÂÖàÈ°∫Â∫èËøΩÂä†Âà∞Êó•Âøó‰∏≠ÔºåÊØîÂ¶ÇËØ¥Êó•ÂøóÊòØ 4 gÂ§ßÂ∞èÔºåÈÇ£Ëøô 4 g ÊòØ‰∏ÄËµ∑ËêΩÁõòÁöÑÔºåÊâÄ‰ª•ËØ¥Ëøô4gÂ∞±ÊòØÈ°∫Â∫èÂÜôÂÖ•Á£ÅÁõòÁöÑÔºåÂõ†‰∏∫‰ªñ‰ª¨ÊòØÂú®‰∏ÄÂùóÁöÑÔºå‰∏çÈúÄË¶ÅÂ§öÊ¨°Á£ÅÁõòÂØªÂùÄÂÜôÂÖ•„ÄÇ Ëøô‰∏™ÂÜôÁöÑËøòÂèØ‰ª•Âêß: ÊµÖÊûêMySQL‰∫ãÂä°‰∏≠ÁöÑredo‰∏éundo 10. Mysql ‰∏∫‰ªÄ‰πà‰ºöÈÄâÈîôÁ¥¢Âºï ÈÄâÁ¥¢ÂºïÁöÑ‰ªªÂä°ÔºåÊòØ‰∫§Áªô‰∫Ü‰ºòÂåñÂô®ÂéªÂÅöÁöÑÔºåËÄå‰ºòÂåñÂô®ÈÄâÊã©Á¥¢ÂºïÁöÑÊúÄ‰ºòÊñπÊ°à‰∏ªË¶ÅÊòØÁúãÊâ´ÊèèË°åÊï∞„ÄåÈÄöËøáÂèñÊ†∑ÂéªÂà§Êñ≠ÔºåÊâÄ‰ª•ËøôÂùóÂèØËÉΩ‰ºöÈÄ†ÊàêËØØÂ∑Æ„Äç„ÄÅ‰∏¥Êó∂Ë°®ÂíåÊéíÂ∫èÁ≠âÁ≠âÔºõ Â¶ÇÊûúÈÄâÈîô‰∫ÜÁ¥¢ÂºïÔºåÊàë‰ª¨ÂèØ‰ª•Âº∫Âà∂‰ΩøÁî® force indexÔºåÁÑ∂ÂêéÂ¶ÇÊûúÊõ¥Âø´ÁöÑËØùÔºåÊàë‰ª¨ÂèØ‰ª•Áî® explain ÊãøÂà∞ rows ÁöÑÂ§ßÂ∞èÔºåÁÑ∂Âêé‰ΩøÁî® analyze table t ÂëΩ‰ª§ÈáçÊñ∞ÁªüËÆ°Á¥¢Âºï‰ø°ÊÅØÔºåËøôÊ†∑‰∏ãÊ¨°Â∞±‰∏ç‰ºöÈÄâÈîô‰∫Ü„ÄÇ 11. ÊÄé‰πàÁªôÂ≠óÁ¨¶‰∏≤Âä†Á¥¢Âºï Áõ¥Êé•ÂàõÂª∫ÂÆåÊï¥Á¥¢ÂºïÔºå‰ΩÜÊòØËøôÊ†∑ÊØîËæÉÂç†Áî®Á©∫Èó¥Ôºõ ÂàõÂª∫ÂâçÁºÄÁ¥¢ÂºïÔºåËäÇÁúÅÁ©∫Èó¥Ôºå‰ΩÜÊòØÂÆπÊòìÂØºËá¥ÂõûË°®Ê¨°Êï∞Â¢ûÂ§öÔºåÂπ∂‰∏îÊó†Ê≥ï‰ΩøÁî®ËåÉÂõ¥Êü•ËØ¢Ôºõ ÂÄíÂ∫èÂ≠òÂÇ®Ôºå‰∏ªË¶ÅÁî®Êù•Ëß£ÂÜ≥Â≠óÁ¨¶‰∏≤Êú¨Ë∫´ÁöÑÂâçÁºÄÂå∫ÂàÜÂ∫¶‰∏çÈ´òÔºå‰æãÂ¶ÇË∫´‰ªΩËØÅÂè∑Ôºõ ÂàõÂª∫hashÂ≠óÊÆµÁ¥¢ÂºïÔºåÊü•ËØ¢Á®≥ÂÆöÔºå‰ΩÜÊòØ‰∏çÊîØÊåÅËåÉÂõ¥Êü•ËØ¢ÔºåÂêåÊó∂Âõ†‰∏∫Ë¶ÅÈ¢ùÂ§ñÂ¢ûÂä†Â≠óÊÆµÂíåÁ¥¢ÂºïÔºåÊ∂àËÄóËµÑÊ∫ê„ÄÇ 12. ‰∏∫‰ªÄ‰πà Mysql ‰ºö ‚ÄùÊäñ‚Äú ‰∏Ä‰∏ãÔºüÊàë‰ª¨Âú®Á¨¨ 9 ËäÇÁöÑÂÜÖÂÆπÂÖ∂ÂÆûË∑üËøôËäÇ‰πüÊúâÁÇπÂÖ≥Á≥ªÔºåÂõ†‰∏∫ÈÉΩÊòØÊúâÂÖ≥‰∫é redo logÔºåÊàë‰ª¨Âú®Á¨¨ 9 ËäÇË∞àÂà∞Ôºåredo logÁöÑÂá∫Áé∞ÔºåÂ∞ÜÊàë‰ª¨ÈöèÊú∫ÂÜôÁ£ÅÁõòÂèò‰∏∫‰∫ÜÈ°∫Â∫èÂÜôÁ£ÅÁõò„ÄåÂΩìÁÑ∂ redo logËøòÊúâcrash-safeÁöÑÂäüËÉΩ„ÄçÔºå‰ΩÜÊòØÊàë‰ª¨‰∏ÄÁõ¥Ê≤°ÊúâÂéªË∞àÂÜôÂÆå redo log‰πãÂêéÊï∞ÊçÆÔºåÂÄüÊ≠§Êú∫‰ºöÔºåÊàëËøòÊòØÂ∏åÊúõËÉΩÂ§üÂ•ΩÂ•ΩÂú∞ÂõûÈ°æ‰∏Ä‰∏ãÊï¥‰∏™Êï∞ÊçÆÂ∫ìÊõ¥Êñ∞ÁöÑËøáÁ®ã„ÄÇ ÂâçÊèêÔºöÂÅáËÆæÊàëË¶ÅÂ∞Ü id = 2 ‰∏≠ÁöÑ c Ôºã 1 ÔºåÊ≠•È™§Â¶Ç‰∏ãÔºö Êàë‰ª¨Êù•ÁªÜËá¥ÂàÜÊûê‰∏Ä‰∏ãÂú® ÂÜôÂÖ• redo logÔºåÂíåÊèê‰∫§‰∫ãÂä°ÂàÜÂà´ÂèëÁîü‰∫Ü‰ªÄ‰πà„ÄÇ È¶ñÂÖàÔºåÊàë‰ª¨ÈúÄË¶ÅÁü•ÈÅìÁöÑÊòØÔºåredo log ÂàÜ‰∏∫‰∏§ÈÉ®ÂàÜÔºöredo log buffer Âíå redo log fileÔºå‰∏Ä‰∏™ÊòØÂú®ÂÜÖÂ≠ò‰∏≠Ôºå‰∏Ä‰∏™ÊòØÂú®Á£ÅÁõò‰∏≠ÔºåÂú®ÂÜôÂÖ• redo log ÁöÑÊó∂ÂÄôÔºåÊòØÂÖàÂ∞ÜÊï∞ÊçÆÂÜôËá≥ redo log bufferÔºåÁÑ∂ÂêéÂÜçÂ∞Ü redo log buffer ‰∏≠ÁöÑÊï∞ÊçÆÈ°∫Â∫èÂÜôÂÖ•Âà∞redo log fileÔºåÂÜôÂÆåÂêéÂ§Ñ‰∫é prepare Áä∂ÊÄÅÔºåÂú®Êèê‰∫§‰∫ãÂä°‰πãÂâçÔºåÂ∞±Â∑≤ÁªèÂ∞Ü binlog ÂÜôÂÖ•Êñá‰ª∂‰∫ÜÔºåÊâÄ‰ª•ÂΩìÊèê‰∫§‰∫ãÂä°ÁöÑÊó∂ÂÄôÔºåredo log Âíå binlog ÂÖ®ÈÉ®ÊåÅ‰πÖÂåñ„ÄÇ Áé∞Âú®ÂõûÂà∞Ê†áÈ¢òÁöÑÈóÆÈ¢ò„ÄÇ ‰ªÄ‰πàÂè´‚ÄùÊäñ‚Äú‰∏Ä‰∏ãÔºü ‰∏ÄÊù°SQLËØ≠Âè•ÔºåÊ≠£Â∏∏ÊâßË°åÁöÑÊó∂ÂÄôÁâπÂà´Âø´Ôºå‰ΩÜÊòØÊúâÊó∂‰πü‰∏çÁü•ÈÅìÊÄé‰πàÂõû‰∫ãÔºåÂÆÉÂ∞±‰ºöÂèòÂæóÁâπÂà´ÊÖ¢ÔºåÂπ∂‰∏îËøôÊ†∑ÁöÑÂú∫ÊôØÂæàÈöæÂ§çÁé∞ÔºåÂÆÉ‰∏çÂè™ÈöèÊú∫ÔºåËÄå‰∏îÊåÅÁª≠Êó∂Èó¥ËøòÂæàÁü≠„ÄÇÂèØ‰ª•ËÆ§‰∏∫ÊòØ‚ÄùÊäñ‚Äú‰∫Ü‰∏Ä‰∏ã„ÄÇ ‰∏∫‰ªÄ‰πà Mysql ‰ºöÁªèÂ∏∏Êäñ‰∏Ä‰∏ãÔºü Ê†πÊú¨ÂéüÂõ†ÊòØÊï∞ÊçÆÂ∫ìÊ≠§Êó∂Âú®Â§ßÈáèÂà∑ËÑèÈ°µ ‰ªÄ‰πàÊòØËÑèÈ°µÔºü ÂÜÖÂ≠òÈ°µ‰∏éÁ£ÅÁõòÈ°µ‰∏ç‰∏ÄËá¥ÁöÑÈ°µÁß∞‰∏∫ËÑèÈ°µ ‰ªÄ‰πàÊó∂ÂÄôÈúÄË¶ÅÂà∑ËÑèÈ°µÔºü redo log Êª°‰∫ÜÔºåÈúÄË¶ÅÂ∞ÜËÑèÈ°µËêΩÁõòÔºõ ÂÜÖÂ≠ò‰∏≠ buffer pool Êª°‰∫ÜÔºåÈúÄË¶ÅÂ∞ÜËÑèÈ°µËêΩÁõòÔºåÂèòÊàêÂπ≤ÂáÄÈ°µÔºõ Mysql Á©∫Èó≤ÔºåÂêéÂè∞ËøõË°åÂà∑ËÑèÈ°µÔºõ Mysql Ê≠£Â∏∏ÂÖ≥Èó≠ÂâçÔºåËøõË°åÂà∑ËÑèÈ°µ„ÄÇ ËøôÂõõÁßçÊÉÖÂÜµÁöÑÂà∑ËÑèÈ°µÔºåÂØπÁ≥ªÁªüÂΩ±ÂìçÂ¶Ç‰ΩïÔºü redo log ÂÜôÊª°ÂÜçÂà∑ËÑèÈ°µÔºåÂØπÁ≥ªÁªüÂΩ±ÂìçÂæàÂ§ßÔºåÂõ†‰∏∫Ê≠§Êó∂Á≥ªÁªü‰∏çËÉΩËøõË°åÊõ¥Êñ∞‰∫ÜÔºå‰ºöÈòªÂ°ûÔºõ buffer pool Êª°‰∫ÜÂà∑ËÑèÈ°µÔºåÊòØÂæàÂ∏∏ËßÅÁöÑÔºå‰ΩÜÊòØÂ¶ÇÊûúËÑèÈ°µÂ§ö‰∫ÜÔºåÊ∏ÖÁêÜËµ∑Êù•ÂæàÊÖ¢Ôºõ Mysql Á©∫Èó≤Êó∂Âà∑ËÑèÈ°µÔºåÂØπÁ≥ªÁªü‰∏ç‰ºöÊúâÂï•ÊÄßËÉΩ‰∏äÁöÑÂΩ±ÂìçÔºõ Mysql Ê≠£Â∏∏ÂÖ≥Èó≠ÂâçÂà∑ËÑèÈ°µÂêåÊ†∑ÂØπÁ≥ªÁªü‰∏ç‰ºöÊúâ‰ªÄ‰πàÂΩ±Âìç„ÄÇ ÈÇ£Â∫îËØ•Â¶Ç‰ΩïÈÅøÂÖçÂà∑ËÑèÈ°µÂ∏¶Êù•ÁöÑÊÄßËÉΩÂΩ±ÂìçÂë¢Ôºü ÊéßÂà∂ËÑèÈ°µÊØî‰æãÔºåÂà∑ÁõòÈÄüÂ∫¶‰∏çËÉΩËøáÊÖ¢ÔºåÂèØ‰ª•ÈÄöËøá inno_io_capacityÊù•ÊéßÂà∂ÈÄüÂ∫¶ÔºåÂΩìÁÑ∂ËøáÂø´‰πüÊ≤°ÊúâÂøÖË¶ÅÔºåÂõ†‰∏∫ËøôÊ†∑ÂäøÂøÖ‰ºöÊ∂àËÄóÊõ¥Â§öÁöÑËµÑÊ∫êÂØºËá¥Áî®Êà∑‰ΩøÁî®ËµÑÊ∫êÂèòÂ∞ë‰∫Ü„ÄÇ ÊÄªÁªìÔºöËôΩÁÑ∂ redo log ÂèØ‰ª•Â∏¶Êù• crash-safe ÂíåÂ∞ÜÈöèÊú∫ÂÜôÂèò‰∏∫È°∫Â∫èÂÜôËøô‰∏§Â§ßÂäüËÉΩÔºå‰ΩÜÊòØÂÖ∂‰πüÂ∏¶Êù•‰∫ÜÂÜÖÂ≠òËÑèÈ°µÁöÑÈóÆÈ¢ò„ÄÇ 13. ‰∏∫‰ªÄ‰πàË°®Êï∞ÊçÆÂà†Êéâ‰∏ÄÂçäÔºåË°®Êñá‰ª∂Â§ßÂ∞è‰∏çÂèò Ë°®Á©∫Ê¥ûÈóÆÈ¢ò delete ÂëΩ‰ª§Âà†Èô§Ë°åÊòØ‰∏çËÉΩÂõûÊî∂Ë°®Á©∫Èó¥ÁöÑÔºåÂè™ÊòØÂΩìÂâçÈ°µË¢´Ê†áËÆ∞‰∏∫‚ÄùÂèØÂ§çÁî®‚ÄúÔºå‰æãÂ¶Ç300 400 500ÔºåÂà†Èô§‰∫Ü400‰πãÂêéÔºå400Ëøô‰∏™Êï∞ÊçÆÈ°µÂ∞±ÂèØ‰ª•Ë¢´Â§çÁî®ÔºåÊØîÂ¶Ç 401 Â∞±ÂèØ‰ª•ÊèíÂÖ•Âà∞ÂÖ∂‰∏≠Ôºå‰ΩÜÊòØÂ¶ÇÊûú‰∏ã‰∏Ä‰∏™ÊòØ 800ÔºåÈÇ£ 400 Ëøô‰∏™Êï∞ÊçÆÈ°µÂ∞±Âè™ËÉΩË¢´Êµ™Ë¥π‰∫ÜÔºåÊàê‰∏∫Á©∫Ê¥û„ÄÇ ‰∏çÊ≠¢ÊòØÂà†Èô§Êï∞ÊçÆ‰ºöÂØºËá¥Á©∫Ê¥ûÔºåÊèíÂÖ•Êï∞ÊçÆ‰πü‰ºö„ÄÇÂΩìÈöèÊú∫ÊèíÂÖ•Êï∞ÊçÆÊó∂Ôºå‰ºöÈÄ†ÊàêÁ¥¢ÂºïÁöÑÊï∞ÊçÆÈ°µÂàÜË£Ç„ÄÇ‰æãÂ¶ÇÂΩì 300 500 600ÊòØ‰∏ÄÈ°µÁöÑÊó∂ÂÄôÔºåÊ≠§Êó∂Êù•‰∫Ü‰∏™ 550ÔºåÈÇ£‰πàÂ∞±‰∏çÂæó‰∏çÁî≥ËØ∑‰∏Ä‰∏™Êñ∞ÁöÑÈ°µÈù¢Êù•‰øùÂ≠òÊï∞ÊçÆ‰∫ÜÔºåÊ≠§Êó∂ 550 ‰ºöÂú®Êñ∞ÁöÑÊï∞ÊçÆÈ°µ‰∏≠ÔºåËÄå 600 Á¥ßÈöèÂÖ∂ÂêéÔºåÊ≠§Êó∂ÂéüÊù•ÁöÑÈ°µÂ∞±Âè™Ââ©‰∏ã‰∫Ü 300 500 ‰∫ÜÔºåËøôÊ†∑Â∞±ÈÄ†Êàê‰∫ÜÊï∞ÊçÆÈ°µÁ©∫Ê¥û„ÄÇ„ÄåËøô‰πüÊòØÁ£ÅÁõòÊåâÈ°µÂàÜÈÖçÊåâÈ°µÈ¢ÑËØªÁöÑÂùèÂ§ÑÂêß..„Äç Â¶Ç‰ΩïËß£ÂÜ≥Ë°®Á©∫Ê¥ûÈóÆÈ¢òÔºü ÈáçÂª∫Ë°®„ÄÇ‰æãÂ¶ÇË°® A Â≠òÂú®Á©∫Ê¥ûÊÉÖÂÜµÔºåÂèØ‰ª•Êñ∞Âª∫‰∏Ä‰∏™‰∏éË°® A ÁªìÊûÑÁõ∏ÂêåÁöÑË°® BÔºåÁÑ∂ÂêéÊåâÁÖß‰∏ªÈîÆ ID ÈÄíÂ¢ûÁöÑÈ°∫Â∫èÂ∞ÜÊï∞ÊçÆ‰∏ÄË°å‰∏ÄË°åÁöÑÊèíÂÖ•Âà∞ B ‰∏≠Ôºå‰πüÂ∞±ÊòØÂ∞Ü B ÂèòÊàê‰∏¥Êó∂Ë°®ÔºåÊúÄÂêéÂ∞Ü A ÊõøÊç¢Âç≥ÂèØ„ÄÇ Áõ¥Êé•‰ΩøÁî® ‚Äúalter table A engine=InnoDB‚ÄùÂç≥ÂèØÔºåÁ≥ªÁªü‰ºöËá™Âä®Â∏ÆÊàë‰ª¨ÂÆåÊàêËΩ¨Â≠òÊï∞ÊçÆ„ÄÅ‰∫§Êç¢Ë°®Âêç„ÄÅÂà†Èô§ÊóßË°®ÁöÑÊìç‰ΩúÔºåËÄåÂÖ∂‰∏≠ÊúÄÊÖ¢ÁöÑÊ≠•È™§Â∞±ÊòØÂæÄ‰∏¥Êó∂Ë°®ÊèíÂÖ•Êï∞ÊçÆÁöÑËøáÁ®ãÔºåÂú® MySQL 5.6ÁâàÊú¨‰πãÂâçÔºå‰∏çËÉΩ‰∏ÄËæπÂæÄ‰∏¥Êó∂Ë°®ÊèíÂÖ•Êï∞ÊçÆ‰∏ÄËæπÂØπÂéüË°® A ËøõË°åÊõ¥Êñ∞Ôºå‰ΩÜÊòØÂú® MySQL 5.6 ‰πãÂêéÔºåÂèØ‰ª•ËøõË°å Online DDL„ÄÇ Online DDL ÁöÑÊµÅÁ®ãÔºü Âª∫Á´ã‰∏Ä‰∏™‰∏¥Êó∂Êñá‰ª∂ÔºåÊâ´Êèè A ‰∏ªÈîÆÁöÑÊâÄÊúâÊï∞ÊçÆÈ°µÔºõ Áî®Êï∞ÊçÆÈ°µ‰∏≠Ë°® A ÁöÑËÆ∞ÂΩïÁîüÊàê B+ Ê†ëÔºåÂ≠òÂÇ®Âà∞‰∏¥Êó∂Êñá‰ª∂‰∏≠Ôºõ ÁîüÊàê‰∏¥Êó∂Êñá‰ª∂ÁöÑËøáÁ®ã‰∏≠ÔºåÂ∞ÜÊâÄÊúâÂØπ A ÁöÑÊìç‰ΩúËÆ∞ÂΩïÂú®‰∏Ä‰∏™Êó•ÂøóÊñá‰ª∂‰∏≠ÔºåÂØπÂ∫îÁöÑÊòØÂõæ‰∏≠ state2 ÁöÑÁä∂ÊÄÅÔºõ ‰∏¥Êó∂Êñá‰ª∂ÁîüÊàêÂêéÔºåÂ∞ÜÊó•ÂøóÊñá‰ª∂‰∏≠ÁöÑÊìç‰ΩúÂ∫îÁî®Âà∞‰∏¥Êó∂Êñá‰ª∂ÔºåÂæóÂà∞‰∏Ä‰∏™ÈÄªËæëÊï∞ÊçÆ‰∏äÂíå A Áõ∏ÂêåÁöÑÊï∞ÊçÆÊñá‰ª∂ÔºåÂØπÂ∫îÁöÑÂ∞±ÊòØ state3 ÁöÑÁä∂ÊÄÅÔºõ Áî®‰∏¥Êó∂Êñá‰ª∂ÊõøÊç¢ A ÁöÑÊï∞ÊçÆÊñá‰ª∂„ÄÇ ÊÄªÁªì‰∏Ä‰∏ãÔºåÂ∞±ÊòØÁî®‰∫Ü‰∏Ä‰∏™ row log Êù•‰øùËØÅ Online ÁöÑ„ÄÇ optimize table„ÄÅanalyze table„ÄÅalter tableËøô‰∏âÁßçÈáçÂª∫Ë°®ÁöÑÂå∫Âà´ Alter table Â∞±ÊòØ‰∏äÈù¢ÁöÑÊ≠•È™§Âï¶ÔºåËΩ¨Â≠òÊï∞ÊçÆ„ÄÅ‰∫§Êç¢Ë°®Âêç„ÄÅÂà†Èô§ÊóßË°®Ôºõ analyze table ÂÖ∂ÂÆû‰∏çÊòØÈáçÂª∫Ë°®ÔºåÂè™ÊòØÂØπË°®ÁöÑÁ¥¢Âºï‰ø°ÊÅØÂÅö‰∏Ä‰∏™ÈáçÊñ∞ÁªüËÆ°ÔºåÊ≤°Êúâ‰øÆÊîπÊï∞ÊçÆÔºåÊØîÂ¶Ç‰πãÂâç‰øÆÊîπ‰ºòÂåñÂô®ÁªüËÆ°ÁöÑÈÅçÂéÜÁöÑ row Êï∞Ôºõ optimize table Á≠â‰∫é recreate + analyze 14. count Ëøô‰πàÊÖ¢ÔºåÊàëËØ•ÊÄé‰πàÂäûÔºü ‰∏∫‰ªÄ‰πà InnoDB ‰∏çÂÉè MyISAM ‰∏ÄÊ†∑Ôºå‰∏ìÈó®Êù•ËÆ∞ÂΩï count ÂÄºÔºü Âõ†‰∏∫ InnoDB ÁöÑÈöîÁ¶ªÁ∫ßÂà´ÊòØ rr Á∫ßÂà´ÔºåÂèØÈáçÂ§çËØªÔºåÊâÄ‰ª•Âú®‰∏çÂêå‰∫ãÂä°‰∏ãÔºåÁî±‰∫éÂ§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂ÁöÑÂéüÂõ†ÔºàMVCCÔºâÔºåÊØè‰∏ÄË°åËÆ∞ÂΩïÈÉΩË¶ÅÂà§Êñ≠Ëá™Â∑±ÊòØÂê¶ÂØπËøô‰∏™‰ºöËØùÂèØÁé∞ÔºåÂõ†Ê≠§ÂØπ‰∫é count(*) Êù•ËØ¥ÔºåÂè™Â•ΩÊääÊï∞ÊçÆ‰∏ÄË°å‰∏ÄË°åÁöÑËØªÂá∫Âπ∂ËøõË°åÂà§Êñ≠„ÄÇ ÈÇ£ËøôÁßçÊñπÊ≥ïÂ§™Ë†¢‰∫ÜÔºåÊ≤°Êúâ‰ºòÂåñÂêóÔºü ‰Ω†ÈÉΩÁü•ÈÅìË†¢‰∫ÜÔºåÂΩìÁÑ∂Â∞±Êúâ‰ºòÂåñÂïäÔºå‰Ω†ÊÉ≥ÊÉ≥ÔºåInnoDB ÊòØÁ¥¢ÂºïÁªÑÁªáË°®Ôºå‰∏ªÈîÆÁ¥¢ÂºïÊ†ëÁöÑÂè∂Â≠êËäÇÁÇπÊòØÊï∞ÊçÆÔºåËÄåÊôÆÈÄöÁ¥¢ÂºïÊ†ë‰∏äÁöÑÂè∂Â≠êÁªìÁÇπÂàôÊòØ‰∏ªÈîÆÂÄºÔºåÊâÄ‰ª•ÊôÆÈÄöÁ¥¢ÂºïÊ†ëÊØî‰∏ªÈîÆÁ¥¢ÂºïÊ†ëËÇØÂÆöË¶ÅÂ∞èÂæàÂ§öÔºåËÄå‰∏çÁÆ°ÈÅçÂéÜÂì™‰∏™Á¥¢ÂºïÊ†ëÂÖ∂ÂÆûÁªìÊûúÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÔºåÊâÄ‰ª• Mysql ‰ºöÊâæÂà∞ÊúÄÂ∞èÁöÑÈÇ£Ê£µÊ†ëËøõË°åÈÅçÂéÜ„ÄÇ Âú®‰øùËØÅÈÄªËæëÊ≠£Á°ÆÁöÑÂâçÊèê‰∏ãÔºåÂ∞ΩÈáèÂáèÂ∞ëÊâ´ÊèèÁöÑÊï∞ÊçÆÈáèÔºåÊòØÊï∞ÊçÆÂ∫ìËÆæËÆ°ÁöÑÈÄöÁî®Ê≥ïÂàô‰πã‰∏Ä„ÄÇ ÈÇ£Êàë‰ª¨‰πãÂâçÂú®Á¨¨ 10 ËäÇË∞àÂà∞ÁöÑ ‚Äùshow table status‚Äú ÂëΩ‰ª§‰∏≠ÁöÑ row numbers ËÉΩÁî®ÂêóÔºü ÂΩìÁÑ∂‰∏çËÉΩÂïäÔºåÈÇ£Âè™ÊòØ‰∏Ä‰∏™È¢Ñ‰º∞ÂÄºÔºåÂÆòÊñπËØ¥Ëøô‰∏™ËØØÂ∑ÆÂèØ‰ª•ËææÂà∞ 40% ÔºåÊâÄ‰ª•ËÇØÂÆö‰∏çË°åÂïä„ÄÇ ÈÇ£Â¶ÇÊûúÊàëÊúâ‰∏Ä‰∏™ÊÄªÊòØË¶ÅÁªüÊÄªÊï∞ÁöÑ‰∏öÂä°ÔºåËØ•ÊÄé‰πàÂäûÂë¢Ôºü ÊèêÂá∫Ëøô‰∏™ÈóÆÈ¢òÔºåËØ¥Êòé‰Ω†ËÇØÂÆöËßâÂæó‰ºòÂåñÂêéÁöÑÊñπÊ≥ï‰æùÊóßÂæàÊÖ¢ÔºåÊòØÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨Âè™ËÉΩËá™Â∑±ÂéªÊìç‰Ωú„ÄÇ Êää count Ëøô‰∏™ËÆ°Êï∞Áõ¥Êé•ÊîæÂà∞Êï∞ÊçÆÂ∫ìÈáåÂçïÁã¨ÁöÑ‰∏ÄÂº†ËÆ°Êï∞Ë°® C ‰∏≠Ôºå‰∏ÄÊòØËß£ÂÜ≥‰∫ÜÂ¥©Ê∫É‰∏¢Â§±ÁöÑÈóÆÈ¢òÔºåÂõ†‰∏∫InnoDBÊîØÊåÅÂ¥©Ê∫ÉÊÅ¢Â§çÔºå‰∫åÊòØËß£ÂÜ≥‰∫Ü‰∫ãÂä°ÂØºËá¥ÁöÑÊó†Ê≥ïÁ≤æÁ°ÆÁªüËÆ°countÁöÑÈóÆÈ¢òÔºåÁõ¥Êé•Â∞ÜË°®C‰∏≠ÁöÑËÆ°Êï∞ÂÄºËøô‰∏™Êìç‰Ωú‰πüÂä†ÂÖ•Âà∞‰∫ãÂä°‰∏≠Â∞±Âæàokay‰∫Ü„ÄÇ count(Â≠óÊÆµ)„ÄÅcount(‰∏ªÈîÆid)„ÄÅcount(1)„ÄÅcount(*)ÁöÑÂå∫Âà´ count(*)„ÄÅcount(‰∏ªÈîÆid)Âíåcount(1) ÈÉΩË°®Á§∫ËøîÂõûÊª°Ë∂≥Êù°‰ª∂ÁöÑÁªìÊûúÈõÜÁöÑÊÄªË°åÊï∞ÔºõËÄåcount(Â≠óÊÆµÔºâÔºåÂàôË°®Á§∫ËøîÂõûÊª°Ë∂≥Êù°‰ª∂ÁöÑÊï∞ÊçÆË°åÈáåÈù¢ÔºåÂèÇÊï∞‚ÄúÂ≠óÊÆµ‚Äù‰∏ç‰∏∫NULLÁöÑÊÄª‰∏™Êï∞„ÄÇ Ëá≥‰∫éÂàÜÊûêÊÄßËÉΩÂ∑ÆÂà´ÁöÑÊó∂ÂÄôÔºå‰Ω†ÂèØ‰ª•ËÆ∞‰ΩèËøô‰πàÂá†‰∏™ÂéüÂàôÔºö serverÂ±ÇË¶Å‰ªÄ‰πàÂ∞±Áªô‰ªÄ‰πàÔºõ InnoDBÂè™ÁªôÂøÖË¶ÅÁöÑÂÄºÔºõ Áé∞Âú®ÁöÑ‰ºòÂåñÂô®Âè™‰ºòÂåñ‰∫Ücount(*)ÁöÑËØ≠‰πâ‰∏∫‚ÄúÂèñË°åÊï∞‚ÄùÔºåÂÖ∂‰ªñ‚ÄúÊòæËÄåÊòìËßÅ‚ÄùÁöÑ‰ºòÂåñÂπ∂Ê≤°ÊúâÂÅö„ÄÇ ËøôÊòØ‰ªÄ‰πàÊÑèÊÄùÂë¢ÔºüÊé•‰∏ãÊù•ÔºåÊàë‰ª¨Â∞±‰∏Ä‰∏™‰∏™Âú∞Êù•ÁúãÁúã„ÄÇ ÂØπ‰∫écount(‰∏ªÈîÆid)Êù•ËØ¥ÔºåInnoDBÂºïÊìé‰ºöÈÅçÂéÜÊï¥Âº†Ë°®ÔºåÊääÊØè‰∏ÄË°åÁöÑidÂÄºÈÉΩÂèñÂá∫Êù•ÔºåËøîÂõûÁªôserverÂ±Ç„ÄÇserverÂ±ÇÊãøÂà∞idÂêéÔºåÂà§Êñ≠ÊòØ‰∏çÂèØËÉΩ‰∏∫Á©∫ÁöÑÔºåÂ∞±ÊåâË°åÁ¥ØÂä†„ÄÇ ÂØπ‰∫écount(1)Êù•ËØ¥ÔºåInnoDBÂºïÊìéÈÅçÂéÜÊï¥Âº†Ë°®Ôºå‰ΩÜ‰∏çÂèñÂÄº„ÄÇserverÂ±ÇÂØπ‰∫éËøîÂõûÁöÑÊØè‰∏ÄË°åÔºåÊîæ‰∏Ä‰∏™Êï∞Â≠ó‚Äú1‚ÄùËøõÂéªÔºåÂà§Êñ≠ÊòØ‰∏çÂèØËÉΩ‰∏∫Á©∫ÁöÑÔºåÊåâË°åÁ¥ØÂä†„ÄÇ ÂçïÁúãËøô‰∏§‰∏™Áî®Ê≥ïÁöÑÂ∑ÆÂà´ÁöÑËØùÔºå‰Ω†ËÉΩÂØπÊØîÂá∫Êù•Ôºåcount(1)ÊâßË°åÂæóË¶ÅÊØîcount(‰∏ªÈîÆid)Âø´„ÄÇÂõ†‰∏∫‰ªéÂºïÊìéËøîÂõûid‰ºöÊ∂âÂèäÂà∞Ëß£ÊûêÊï∞ÊçÆË°åÔºå‰ª•ÂèäÊã∑Ë¥ùÂ≠óÊÆµÂÄºÁöÑÊìç‰Ωú„ÄÇ ÂØπ‰∫écount(Â≠óÊÆµ)Êù•ËØ¥Ôºö Â¶ÇÊûúËøô‰∏™‚ÄúÂ≠óÊÆµ‚ÄùÊòØÂÆö‰πâ‰∏∫not nullÁöÑËØùÔºå‰∏ÄË°åË°åÂú∞‰ªéËÆ∞ÂΩïÈáåÈù¢ËØªÂá∫Ëøô‰∏™Â≠óÊÆµÔºåÂà§Êñ≠‰∏çËÉΩ‰∏∫nullÔºåÊåâË°åÁ¥ØÂä†Ôºõ Â¶ÇÊûúËøô‰∏™‚ÄúÂ≠óÊÆµ‚ÄùÂÆö‰πâÂÖÅËÆ∏‰∏∫nullÔºåÈÇ£‰πàÊâßË°åÁöÑÊó∂ÂÄôÔºåÂà§Êñ≠Âà∞ÊúâÂèØËÉΩÊòØnullÔºåËøòË¶ÅÊääÂÄºÂèñÂá∫Êù•ÂÜçÂà§Êñ≠‰∏Ä‰∏ãÔºå‰∏çÊòØnullÊâçÁ¥ØÂä†„ÄÇ ‰πüÂ∞±ÊòØÂâçÈù¢ÁöÑÁ¨¨‰∏ÄÊù°ÂéüÂàôÔºåserverÂ±ÇË¶Å‰ªÄ‰πàÂ≠óÊÆµÔºåInnoDBÂ∞±ËøîÂõû‰ªÄ‰πàÂ≠óÊÆµ„ÄÇ ‰ΩÜÊòØcount(*)ÊòØ‰æãÂ§ñÔºåÂπ∂‰∏ç‰ºöÊääÂÖ®ÈÉ®Â≠óÊÆµÂèñÂá∫Êù•ÔºåËÄåÊòØ‰∏ìÈó®ÂÅö‰∫Ü‰ºòÂåñÔºå‰∏çÂèñÂÄº„ÄÇcount(*)ËÇØÂÆö‰∏çÊòØnullÔºåÊåâË°åÁ¥ØÂä†„ÄÇ ÁúãÂà∞ËøôÈáåÔºå‰Ω†‰∏ÄÂÆö‰ºöËØ¥Ôºå‰ºòÂåñÂô®Â∞±‰∏çËÉΩËá™Â∑±Âà§Êñ≠‰∏Ä‰∏ãÂêóÔºå‰∏ªÈîÆidËÇØÂÆöÈùûÁ©∫ÂïäÔºå‰∏∫‰ªÄ‰πà‰∏çËÉΩÊåâÁÖßcount(*)Êù•Â§ÑÁêÜÔºåÂ§ö‰πàÁÆÄÂçïÁöÑ‰ºòÂåñÂïä„ÄÇ ÂΩìÁÑ∂ÔºåMySQL‰∏ìÈó®ÈíàÂØπËøô‰∏™ËØ≠Âè•ËøõË°å‰ºòÂåñÔºå‰πü‰∏çÊòØ‰∏çÂèØ‰ª•„ÄÇ‰ΩÜÊòØËøôÁßçÈúÄË¶Å‰∏ìÈó®‰ºòÂåñÁöÑÊÉÖÂÜµÂ§™Â§ö‰∫ÜÔºåËÄå‰∏îMySQLÂ∑≤Áªè‰ºòÂåñËøácount(*)‰∫ÜÔºå‰Ω†Áõ¥Êé•‰ΩøÁî®ËøôÁßçÁî®Ê≥ïÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ ÊâÄ‰ª•ÁªìËÆ∫ÊòØÔºöÊåâÁÖßÊïàÁéáÊéíÂ∫èÁöÑËØùÔºåcount(Â≠óÊÆµ)&lt;count(‰∏ªÈîÆid)&lt;count(1)‚âàcount(*)ÔºåÊâÄ‰ª•ÊàëÂª∫ËÆÆ‰Ω†ÔºåÂ∞ΩÈáè‰ΩøÁî®count(*)„ÄÇ 15. Êó•ÂøóÂíåÁ¥¢ÂºïÁõ∏ÂÖ≥ÈóÆÈ¢òÂú®Á¨¨ 2 ËÆ≤‰∏≠ÔºåÊúâÊèêÂà∞ redo log Âíå binlog ÁöÑ‰∏§Èò∂ÊÆµÊèê‰∫§ÔºåËøô‰πüÊòØÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂ∏∏Áî®ÁöÑÊâãÊÆµ„ÄÇ ÂÖ∂‰∏≠ÔºåÊó∂Âàª A Â¶ÇÊûú crash ‰∫ÜÔºåÊ≠§Êó∂ËøòÊ≤°ÂÜô binlogÔºåÊâÄ‰ª•Â¥©Ê∫ÉÊÅ¢Â§çËÇØÂÆöÂ∞±Â∞Ü redo log ‰∏≠ÁöÑÊï∞ÊçÆËøõË°åÂõûÊªöÂ∞±Ë°å‰∫ÜÔºåÊó∂Âàª B ÊÉÖÂÜµÔºå‰ºöÁ®çÂæÆÂ§çÊùÇ‰∏ÄÁÇπÔºåÂõ†‰∏∫Ëøô‰∏™Êó∂ÂÄôÊúâ‰∏âÁßçÊÉÖÂÜµÔºö binlog ÂÜôÂÆå‰∫ÜÂπ∂‰∏îredo log Â∑≤ÁªèÊúâ‰∫Ü commit Ê†áÂøóÔºåÈÇ£Ëøô‰∏™Êó∂ÂÄôËÇØÂÆöÂ∞±Áõ¥Êé•Êèê‰∫§Â∞±Â•Ω‰∫ÜÔºõ binlog Ê≤°ÂÜôÂÆåÔºåredo log Ê≠§Êó∂Âè™Êúâ prepare Ê†áÂøóÔºåÈÇ£Ëøô‰∏™Êó∂ÂÄôËÇØÂÆöÂæóÂõûÊªö‰∫ÜÔºåÂõ†‰∏∫binlogÊ≤°ÂÜôÂÆåÔºõ binlogÊúâÂÜôÂÆå‰∫ÜÁöÑÊ†áÂøóÔºå‰ΩÜÊòØ redo log Ê≠§Êó∂Âè™Êúâ prepare Ê†áÂøóÔºåÊ≤°ÈóÆÈ¢òÔºåËøô‰∏™‰πüÂèØ‰ª•Áõ¥Êé•Êèê‰∫§„ÄÇ ËøΩÈóÆÔºö binlog Â¶Ç‰ΩïÂà§Êñ≠ÂÜôÂÆå‰∫ÜÔºü ‰∏Ä‰∏™‰∫ãÂä°ÁöÑbinlogÊòØÊúâÂÆåÊï¥Ê†ºÂºèÁöÑÔºö statementÊ†ºÂºèÁöÑbinlogÔºåÊúÄÂêé‰ºöÊúâCOMMITÔºõ rowÊ†ºÂºèÁöÑbinlogÔºåÊúÄÂêé‰ºöÊúâ‰∏Ä‰∏™XID event„ÄÇ redo log Â¶Ç‰ΩïÁü•Êôìbinlog ÂÜôÂÆå‰∫ÜÔºåÁÑ∂ÂêéÂ∞ÜÁä∂ÊÄÅ‰ªé prepare Âèò‰∏∫ commitÔºåÂèàÊòØÂ¶Ç‰ΩïÊâ´Êèè prepare or commit Ê†áÂøóÔºåÁÑ∂ÂêéÊèê‰∫§ÁöÑÂë¢Ôºü ÂÆÉ‰ª¨Êúâ‰∏Ä‰∏™ÂÖ±ÂêåÁöÑÊï∞ÊçÆÂ≠óÊÆµÔºåÂè´XID„ÄÇbinlog ÂÜôÂÆåÂêéÔºåÊúâÁõ∏Â∫îÁöÑÈÄöÁü•Êú∫Âà∂ÔºåÊ≠§Êó∂redo log ÂØπÂ∫îÁöÑ XID Áä∂ÊÄÅÂèòÂåñ„ÄÇ Â¥©Ê∫ÉÊÅ¢Â§çÁöÑÊó∂ÂÄôÔºå‰ºöÊåâÈ°∫Â∫èÊâ´Êèèredo logÔºö Â¶ÇÊûúÁ¢∞Âà∞Êó¢Êúâprepare„ÄÅÂèàÊúâcommitÁöÑredo logÔºåÂ∞±Áõ¥Êé•Êèê‰∫§Ôºõ Â¶ÇÊûúÁ¢∞Âà∞Âè™Êúâparepare„ÄÅËÄåÊ≤°ÊúâcommitÁöÑredo logÔºåÂ∞±ÊãøÁùÄXIDÂéªbinlogÊâæÂØπÂ∫îÁöÑ‰∫ãÂä°„ÄÇ Âè™Ë¶Åbinlog‰∏çÂèØ‰ª•ÂêóÔºå‰πüÂèØ‰ª•Êèê‰æõÈ°∫Â∫èÂÜôÁ£ÅÁõòÁöÑÂäüËÉΩÔºåÂ¶ÇÊûú binlog ‰πüÂä†‰∏Ä‰∏™ crash-safe ÁöÑÂäüËÉΩÔºåÈÇ£‰∏çÊòØÊó¢ËÉΩÂΩíÊ°£ÔºåÂèàËÉΩÂ¥©Ê∫ÉÊÅ¢Â§çÂêóÔºü binlogÂ≠òÂÇ®ÁöÑÊòØÈÄªËæëÊó•ÂøóÔºåËÄå‰∏îÂπ∂Ê≤°ÊúâÊ†áËÆ∞ËØªÂà∞Âì™‰∫ÜÔºåÂπ∂‰∏çËÉΩËÆ∞ÂΩïÊï∞ÊçÆÈ°µÁöÑÊõ¥ÊîπÔºåÊâÄ‰ª•‰∏çËÉΩÂÅöÂà∞Â¥©Ê∫ÉÊÅ¢Â§ç„ÄÇ ÈÇ£ËÉΩ‰∏çËÉΩÂè™Ë¶Å redo logÔºå‰∏çË¶Å binlogÔºü ‰ªéÈÄªËæë‰∏äÂèØ‰ª•ÔºåÂõ†‰∏∫ redo log Èô§‰∫Ü‰∏çËÉΩÂΩíÊ°£ÔºåÂÖ∂‰ªñÈÉΩËÉΩÂÅö„ÄÇ ‰ΩÜÊòØÔºåÂ¶ÇÊûú‰Ω†‰∫ÜËß£‰∏Ä‰∏ã‰∏öÁïåÂêÑ‰∏™ÂÖ¨Âè∏ÁöÑ‰ΩøÁî®Âú∫ÊôØÁöÑËØùÔºåÂ∞±‰ºöÂèëÁé∞Âú®Ê≠£ÂºèÁöÑÁîü‰∫ßÂ∫ì‰∏äÔºåbinlogÈÉΩÊòØÂºÄÁùÄÁöÑ„ÄÇÂõ†‰∏∫binlogÊúâÁùÄredo logÊó†Ê≥ïÊõø‰ª£ÁöÑÂäüËÉΩ„ÄÇ ‰∏Ä‰∏™ÊòØÂΩíÊ°£„ÄÇredo logÊòØÂæ™ÁéØÂÜôÔºåÂÜôÂà∞Êú´Â∞æÊòØË¶ÅÂõûÂà∞ÂºÄÂ§¥ÁªßÁª≠ÂÜôÁöÑ„ÄÇËøôÊ†∑ÂéÜÂè≤Êó•ÂøóÊ≤°Ê≥ï‰øùÁïôÔºåredo log‰πüÂ∞±Ëµ∑‰∏çÂà∞ÂΩíÊ°£ÁöÑ‰ΩúÁî®„ÄÇ ‰∏Ä‰∏™Â∞±ÊòØMySQLÁ≥ªÁªü‰æùËµñ‰∫ébinlog„ÄÇbinlog‰Ωú‰∏∫MySQL‰∏ÄÂºÄÂßãÂ∞±ÊúâÁöÑÂäüËÉΩÔºåË¢´Áî®Âú®‰∫ÜÂæàÂ§öÂú∞Êñπ„ÄÇÂÖ∂‰∏≠ÔºåMySQLÁ≥ªÁªüÈ´òÂèØÁî®ÁöÑÂü∫Á°ÄÔºåÂ∞±ÊòØbinlogÂ§çÂà∂„ÄÇ ËøòÊúâÂæàÂ§öÂÖ¨Âè∏ÊúâÂºÇÊûÑÁ≥ªÁªüÔºàÊØîÂ¶Ç‰∏Ä‰∫õÊï∞ÊçÆÂàÜÊûêÁ≥ªÁªüÔºâÔºåËøô‰∫õÁ≥ªÁªüÂ∞±Èù†Ê∂àË¥πMySQLÁöÑbinlogÊù•Êõ¥Êñ∞Ëá™Â∑±ÁöÑÊï∞ÊçÆ„ÄÇÂÖ≥ÊéâbinlogÁöÑËØùÔºåËøô‰∫õ‰∏ãÊ∏∏Á≥ªÁªüÂ∞±Ê≤°Ê≥ïËæìÂÖ•‰∫Ü„ÄÇ ÊÄª‰πãÔºåÁî±‰∫éÁé∞Âú®ÂåÖÊã¨MySQLÈ´òÂèØÁî®Âú®ÂÜÖÁöÑÂæàÂ§öÁ≥ªÁªüÊú∫Âà∂ÈÉΩ‰æùËµñ‰∫ébinlogÔºåÊâÄ‰ª•‚ÄúÈ∏†Âç†ÈπäÂ∑¢‚Äùredo logËøòÂÅö‰∏çÂà∞„ÄÇ‰Ω†ÁúãÔºåÂèëÂ±ïÁîüÊÄÅÊòØÂ§ö‰πàÈáçË¶Å„ÄÇ Êï∞ÊçÆÁöÑÊúÄÁªàËêΩÁõòÔºåÊòØ‰ªé redo logÊõ¥Êñ∞ÁöÑËøòÊòØ‰ªé buffer pool Êõ¥Êñ∞ÁöÑÂë¢Ôºü ÂÆûÈôÖ‰∏äÔºåredo logÂπ∂Ê≤°ÊúâËÆ∞ÂΩïÊï∞ÊçÆÈ°µÁöÑÂÆåÊï¥Êï∞ÊçÆÔºåÊâÄ‰ª•ÂÆÉÂπ∂Ê≤°ÊúâËÉΩÂäõËá™Â∑±ÂéªÊõ¥Êñ∞Á£ÅÁõòÊï∞ÊçÆÈ°µÔºå‰πüÂ∞±‰∏çÂ≠òÂú®‚ÄúÊï∞ÊçÆÊúÄÁªàËêΩÁõòÔºåÊòØÁî±redo logÊõ¥Êñ∞ËøáÂéª‚ÄùÁöÑÊÉÖÂÜµ„ÄÇ Â¶ÇÊûúÊòØÊ≠£Â∏∏ËøêË°åÁöÑÂÆû‰æãÁöÑËØùÔºåÊï∞ÊçÆÈ°µË¢´‰øÆÊîπ‰ª•ÂêéÔºåË∑üÁ£ÅÁõòÁöÑÊï∞ÊçÆÈ°µ‰∏ç‰∏ÄËá¥ÔºåÁß∞‰∏∫ËÑèÈ°µ„ÄÇÊúÄÁªàÊï∞ÊçÆËêΩÁõòÔºåÂ∞±ÊòØÊääÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÈ°µÂÜôÁõò„ÄÇËøô‰∏™ËøáÁ®ãÔºåÁîöËá≥‰∏éredo logÊØ´Êó†ÂÖ≥Á≥ª„ÄÇ Âú®Â¥©Ê∫ÉÊÅ¢Â§çÂú∫ÊôØ‰∏≠ÔºåInnoDBÂ¶ÇÊûúÂà§Êñ≠Âà∞‰∏Ä‰∏™Êï∞ÊçÆÈ°µÂèØËÉΩÂú®Â¥©Ê∫ÉÊÅ¢Â§çÁöÑÊó∂ÂÄô‰∏¢Â§±‰∫ÜÊõ¥Êñ∞ÔºåÂ∞±‰ºöÂ∞ÜÂÆÉËØªÂà∞ÂÜÖÂ≠òÔºåÁÑ∂ÂêéËÆ©redo logÊõ¥Êñ∞ÂÜÖÂ≠òÂÜÖÂÆπ„ÄÇÊõ¥Êñ∞ÂÆåÊàêÂêéÔºåÂÜÖÂ≠òÈ°µÂèòÊàêËÑèÈ°µÔºåÂ∞±ÂõûÂà∞‰∫ÜÁ¨¨‰∏ÄÁßçÊÉÖÂÜµÁöÑÁä∂ÊÄÅ„ÄÇ Âú®Êàë‰ª¨Á¨¨ 12 ËÆ≤ÁöÑÔºåÂ¶ÇÊûú redo log Êª°‰∫ÜÔºå‰πüÊòØË¶ÅÂà∑ËÑèÈ°µÁöÑÔºåÊ≠§Êó∂‰ºöÂ∞Ü redo logÂØπÂ∫îÁöÑÂÜÖÂ≠ò‰∏≠ÁöÑËÑèÈ°µÂà∑ÂÖ•Á£ÅÁõò„ÄÇ ÊÄªËÄåË®Ä‰πãÔºåÂÖ∂ÂÆû redo log Â∞±ÊòØ‰∏Ä‰∏™‰∏≠Èó¥ËÄÖÔºåÊØîÂ¶Ç10 Âà∞ 19Ôºåredo log Âè™ÊòØËÆ∞ÂΩïÁöÑ +9ÔºåÊâÄ‰ª•ËÇØÂÆöÊòØ‰ªébuffer pool ‰∏≠Êõ¥Êñ∞ÁöÑÊï∞ÊçÆ„ÄÇ redo log buffer ÊòØ‰ªÄ‰πàÔºüÊòØÂÖà‰øÆÊîπÂÜÖÂ≠òÔºåËøòÊòØÂÖàÂÜô redo log Êñá‰ª∂Ôºü Redo log ÊòØÂàÜ‰∏∫‰∏§ÂùóÁöÑÔºö‰∏ÄÂùóÂ∞±ÊòØ redo log bufferÔºå‰∏ÄÂùóÂ∞±ÊòØ redo log Êñá‰ª∂ÔºåÊ≠£Â∏∏ËÇØÂÆöÊòØÂÖàÂà∞ÁºìÂ≠òÔºåÂÜçÂà∞Êñá‰ª∂‰∏≠Âï¶„ÄÇËøôÈáåÁöÑÂÜôÊñá‰ª∂ÊòØ‰∏Ä‰∏™È°∫Â∫èÂÜôÁöÑËøáÁ®ã„ÄÇÁ≠â‰∏çÂøôÁöÑÊó∂ÂÄôÂÜçÊâßË°å redo log Êñá‰ª∂ÔºåËøõË°åÊúÄÁªàÁöÑËêΩÁõò„ÄÇ„Äå‰πüÂ∞±ÊòØÊàë‰ª¨‰πãÂâç‰∏ÄÁõ¥ÊèêÂà∞ÁöÑÂà∑ËÑèÈ°µ„Äç 16. ‚Äùorder by‚Äú ÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑÔºü order by ÊòØ Mysql ‰∏≠ÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑÔºü Êúâ‰∏§ÁßçÁÆóÊ≥ïÊâßË°å order by„ÄÇ ÂÖ®Â≠óÊÆµÊéíÂ∫èÔºõ rowid ÊéíÂ∫è„ÄÇ ÁßëÊôÆÔºö MySQL‰ºö‰∏∫ÊØè‰∏™Á∫øÁ®ãÂàÜÈÖç‰∏Ä‰∏™ÂÜÖÂ≠òÔºàsort_bufferÔºâÁî®‰∫éÊéíÂ∫èËØ•ÂÜÖÂ≠òÂ§ßÂ∞è‰∏∫sort_buffer_size Â¶ÇÊûúÊéíÂ∫èÁöÑÊï∞ÊçÆÈáèÂ∞è‰∫ésort_buffer_sizeÔºåÊéíÂ∫èÂ∞Ü‰ºöÂú®ÂÜÖÂ≠ò‰∏≠ÂÆåÊàêÂ¶ÇÊûúÊéíÂ∫èÊï∞ÊçÆÈáèÂæàÂ§ßÔºåÂÜÖÂ≠ò‰∏≠Êó†Ê≥ïÂ≠ò‰∏ãËøô‰πàÂ§öÊï∞ÊçÆÔºåÂàô‰ºö‰ΩøÁî®Á£ÅÁõò‰∏¥Êó∂Êñá‰ª∂Êù•ËæÖÂä©ÊéíÂ∫èÔºå‰πüÁß∞Â§ñÈÉ®ÊéíÂ∫è Âú®‰ΩøÁî®Â§ñÈÉ®ÊéíÂ∫èÊó∂ÔºåMySQL‰ºöÂàÜÊàêÂ•ΩÂá†‰ªΩÂçïÁã¨ÁöÑ‰∏¥Êó∂Êñá‰ª∂Áî®Êù•Â≠òÊîæÊéíÂ∫èÂêéÁöÑÊï∞ÊçÆÔºåÁÑ∂ÂêéÂú®Â∞ÜËøô‰∫õÊñá‰ª∂ÂêàÂπ∂Êàê‰∏Ä‰∏™Â§ßÊñá‰ª∂ mysql‰ºöÈÄöËøáÈÅçÂéÜÁ¥¢ÂºïÂ∞ÜÊª°Ë∂≥Êù°‰ª∂ÁöÑÊï∞ÊçÆËØªÂèñÂà∞sort_bufferÔºåÂπ∂‰∏îÊåâÁÖßÊéíÂ∫èÂ≠óÊÆµËøõË°åÂø´ÈÄüÊéíÂ∫è Â¶ÇÊûúÊü•ËØ¢ÁöÑÂ≠óÊÆµ‰∏çÂåÖÂê´Âú®ËæÖÂä©Á¥¢Âºï‰∏≠ÔºåÈúÄË¶ÅÊåâÁÖßËæÖÂä©Á¥¢ÂºïËÆ∞ÂΩïÁöÑ‰∏ªÈîÆËøîÂõûËÅöÈõÜÁ¥¢ÂºïÂèñÂá∫ÊâÄÈúÄÂ≠óÊÆµ ËØ•ÊñπÂºè‰ºöÈÄ†ÊàêÈöèÊú∫IOÔºåÂú®MySQL5.6Êèê‰æõ‰∫ÜMRRÁöÑÊú∫Âà∂Ôºå‰ºöÂ∞ÜËæÖÂä©Á¥¢ÂºïÂåπÈÖçËÆ∞ÂΩïÁöÑ‰∏ªÈîÆÂèñÂá∫Êù•Âú®ÂÜÖÂ≠ò‰∏≠ËøõË°åÊéíÂ∫èÔºåÁÑ∂ÂêéÂú®ÂõûË°® ÊåâÁÖßÊÉÖÂÜµÂª∫Á´ãËÅîÂêàÁ¥¢ÂºïÊù•ÈÅøÂÖçÊéíÂ∫èÊâÄÂ∏¶Êù•ÁöÑÊÄßËÉΩÊçüËÄóÔºåÂÖÅËÆ∏ÁöÑÊÉÖÂÜµ‰∏ã‰πüÂèØ‰ª•Âª∫Á´ãË¶ÜÁõñÁ¥¢ÂºïÊù•ÈÅøÂÖçÂõûË°® ÂÖ®Â≠óÊÆµÊéíÂ∫èËøáÁ®ãÔºö ÈÄöËøáÁ¥¢ÂºïÂ∞ÜÊâÄÈúÄÁöÑÂ≠óÊÆµÂÖ®ÈÉ®ËØªÂèñÂà∞sort_buffer‰∏≠ ÊåâÁÖßÊéíÂ∫èÂ≠óÊÆµËøõË°åÊéíÂ∫è Â∞ÜÁªìÊûúÈõÜËøîÂõûÁªôÂÆ¢Êà∑Á´Ø ‰ºòÁÇπÔºö MySQLËÆ§‰∏∫ÂÜÖÂ≠òË∂≥Â§üÂ§ßÊó∂‰ºö‰ºòÂÖàÈÄâÊã©ÂÖ®Â≠óÊÆµÊéíÂ∫èÔºåÂõ†‰∏∫ËøôÁßçÊñπÂºèÊØîrowid ÊéíÂ∫èÈÅøÂÖç‰∫Ü‰∏ÄÊ¨°ÂõûË°®Êìç‰Ωú Áº∫ÁÇπÔºö ÈÄ†Êàêsort_buffer‰∏≠Â≠òÊîæ‰∏ç‰∏ãÂæàÂ§öÊï∞ÊçÆÔºåÂõ†‰∏∫Èô§‰∫ÜÊéíÂ∫èÂ≠óÊÆµËøòÂ≠òÊîæÂÖ∂‰ªñÂ≠óÊÆµÔºåÂØπsort_bufferÁöÑÂà©Áî®ÊïàÁéá‰∏çÈ´ò ÂΩìÊâÄÈúÄÊéíÂ∫èÊï∞ÊçÆÈáèÂæàÂ§ßÊó∂Ôºå‰ºöÊúâÂæàÂ§öÁöÑ‰∏¥Êó∂Êñá‰ª∂ÔºåÊéíÂ∫èÊÄßËÉΩ‰πü‰ºöÂæàÂ∑Æ rowid ÊéíÂ∫è ÈÄöËøáÊéßÂà∂ÊéíÂ∫èÁöÑË°åÊï∞ÊçÆÁöÑÈïøÂ∫¶Êù•ËÆ©sort_buffer‰∏≠Â∞ΩÂèØËÉΩÂ§öÁöÑÂ≠òÊîæÊï∞ÊçÆÔºåmax_length_for_sort_data Âè™Â∞ÜÈúÄË¶ÅÊéíÂ∫èÁöÑÂ≠óÊÆµÂíå‰∏ªÈîÆËØªÂèñÂà∞sort_buffer‰∏≠ÔºåÂπ∂ÊåâÁÖßÊéíÂ∫èÂ≠óÊÆµËøõË°åÊéíÂ∫è ÊåâÁÖßÊéíÂ∫èÂêéÁöÑÈ°∫Â∫èÔºåÂèñidËøõË°åÂõûË°®ÂèñÂá∫ÊÉ≥Ë¶ÅËé∑ÂèñÁöÑÊï∞ÊçÆ Â∞ÜÁªìÊûúÈõÜËøîÂõûÁªôÂÆ¢Êà∑Á´Ø ‰ºòÁÇπÔºöÊõ¥Â•ΩÁöÑÂà©Áî®ÂÜÖÂ≠òÁöÑsort_bufferËøõË°åÊéíÂ∫èÊìç‰ΩúÔºåÂ∞ΩÈáèÂáèÂ∞ëÂØπÁ£ÅÁõòÁöÑËÆøÈóÆ Áº∫ÁÇπÔºöÂõûË°®ÁöÑÊìç‰ΩúÊòØÈöèÊú∫IOÔºå‰ºöÈÄ†ÊàêÂ§ßÈáèÁöÑÈöèÊú∫ËØªÔºå‰∏ç‰∏ÄÂÆöÂ∞±ÊØîÂÖ®Â≠óÊÆµÊéíÂ∫èÂáèÂ∞ëÂØπÁ£ÅÁõòÁöÑËÆøÈóÆ ‰∏§ÁßçÁÆóÊ≥ïÁöÑÂ∫îÁî®Âú∫ÊôØÔºü Â¶ÇÊûúMySQLÂÆûÂú®ÊòØÊãÖÂøÉÊéíÂ∫èÂÜÖÂ≠òÂ§™Â∞èÔºå‰ºöÂΩ±ÂìçÊéíÂ∫èÊïàÁéáÔºåÊâç‰ºöÈááÁî®rowidÊéíÂ∫èÁÆóÊ≥ïÔºåËøôÊ†∑ÊéíÂ∫èËøáÁ®ã‰∏≠‰∏ÄÊ¨°ÂèØ‰ª•ÊéíÂ∫èÊõ¥Â§öË°åÔºå‰ΩÜÊòØÈúÄË¶ÅÂÜçÂõûÂà∞ÂéüË°®ÂéªÂèñÊï∞ÊçÆ„ÄÇ Â¶ÇÊûúMySQLËÆ§‰∏∫ÂÜÖÂ≠òË∂≥Â§üÂ§ßÔºå‰ºö‰ºòÂÖàÈÄâÊã©ÂÖ®Â≠óÊÆµÊéíÂ∫èÔºåÊääÈúÄË¶ÅÁöÑÂ≠óÊÆµÈÉΩÊîæÂà∞sort_buffer‰∏≠ÔºåËøôÊ†∑ÊéíÂ∫èÂêéÂ∞±‰ºöÁõ¥Êé•‰ªéÂÜÖÂ≠òÈáåÈù¢ËøîÂõûÊü•ËØ¢ÁªìÊûú‰∫ÜÔºå‰∏çÁî®ÂÜçÂõûÂà∞ÂéüË°®ÂéªÂèñÊï∞ÊçÆ„ÄÇ Ëøô‰πüÂ∞±‰ΩìÁé∞‰∫ÜMySQLÁöÑ‰∏Ä‰∏™ËÆæËÆ°ÊÄùÊÉ≥ÔºöÂ¶ÇÊûúÂÜÖÂ≠òÂ§üÔºåÂ∞±Ë¶ÅÂ§öÂà©Áî®ÂÜÖÂ≠òÔºåÂ∞ΩÈáèÂáèÂ∞ëÁ£ÅÁõòËÆøÈóÆ„ÄÇ ÂØπ‰∫éInnoDBË°®Êù•ËØ¥ÔºårowidÊéíÂ∫è‰ºöË¶ÅÊ±ÇÂõûË°®Â§öÈÄ†ÊàêÁ£ÅÁõòËØªÔºåÂõ†Ê≠§‰∏ç‰ºöË¢´‰ºòÂÖàÈÄâÊã©„ÄÇ Ëøô‰∏™ÁªìËÆ∫Áúã‰∏äÂéªÊúâÁÇπÂ∫üËØùÁöÑÊÑüËßâÔºå‰ΩÜÊòØ‰Ω†Ë¶ÅËÆ∞‰ΩèÂÆÉÔºå‰∏ã‰∏ÄÁØáÊñáÁ´†Êàë‰ª¨Â∞±‰ºöÁî®Âà∞„ÄÇ ÁúãÂà∞ËøôÈáåÔºå‰Ω†Â∞±‰∫ÜËß£‰∫ÜÔºåMySQLÂÅöÊéíÂ∫èÊòØ‰∏Ä‰∏™ÊàêÊú¨ÊØîËæÉÈ´òÁöÑÊìç‰Ωú„ÄÇÈÇ£‰πà‰Ω†‰ºöÈóÆÔºåÊòØ‰∏çÊòØÊâÄÊúâÁöÑorder byÈÉΩÈúÄË¶ÅÊéíÂ∫èÊìç‰ΩúÂë¢ÔºüÂ¶ÇÊûú‰∏çÊéíÂ∫èÂ∞±ËÉΩÂæóÂà∞Ê≠£Á°ÆÁöÑÁªìÊûúÔºåÈÇ£ÂØπÁ≥ªÁªüÁöÑÊ∂àËÄó‰ºöÂ∞èÂæàÂ§öÔºåËØ≠Âè•ÁöÑÊâßË°åÊó∂Èó¥‰πü‰ºöÂèòÂæóÊõ¥Áü≠„ÄÇ ÂÖ∂ÂÆûÔºåÂπ∂‰∏çÊòØÊâÄÊúâÁöÑorder byËØ≠Âè•ÔºåÈÉΩÈúÄË¶ÅÊéíÂ∫èÊìç‰ΩúÁöÑ„ÄÇ‰ªé‰∏äÈù¢ÂàÜÊûêÁöÑÊâßË°åËøáÁ®ãÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÔºåMySQL‰πãÊâÄ‰ª•ÈúÄË¶ÅÁîüÊàê‰∏¥Êó∂Ë°®ÔºåÂπ∂‰∏îÂú®‰∏¥Êó∂Ë°®‰∏äÂÅöÊéíÂ∫èÊìç‰ΩúÔºåÂÖ∂ÂéüÂõ†ÊòØÂéüÊù•ÁöÑÊï∞ÊçÆÈÉΩÊòØÊó†Â∫èÁöÑ„ÄÇ ÈÇ£Â¶ÇÊûúÂéüÊù•ÁöÑÊï∞ÊçÆÂ∞±ÊòØÊúâÂ∫èÁöÑÔºåÊòØ‰∏çÊòØÂ∞±ÂèØ‰ª•‰∏çÁî®ÊéíÂ∫è‰∫ÜÔºüÂ¶Ç‰ΩïÂÅöÂà∞ÊúâÂ∫èÂë¢Ôºü ÊòØÁöÑÔºåÂ¶ÇÊûúÊï∞ÊçÆÊú¨Ë∫´Â∞±ÊòØÊúâÂ∫èÁöÑÔºåÂ∞±Êó†È°ªÊéíÂ∫è‰∫Ü„ÄÇ ËøôÈáåÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ÈááÁî®Ë¶ÜÁõñÁ¥¢ÂºïÔºåÂõ†‰∏∫Á¥¢ÂºïÊú¨Ë∫´Â∞±ÊòØÊúâÂ∫èÁöÑÔºåËøôÊ†∑Â∞±‰∏çÈúÄË¶ÅÈ¢ùÂ§ñÊéíÂ∫èÂ∏¶Êù•Á≥ªÁªüÁöÑÊ∂àËÄó‰∫ÜÔºå‰ΩÜÊòØÂêåÊ†∑ÁöÑÁª¥Êä§Á¥¢Âºï‰πüÊòØÊúâÁª¥Êä§‰ª£‰ª∑ÁöÑ„ÄÇ 17. Â¶Ç‰ΩïÊ≠£Á°ÆÂú∞ÊòæÁ§∫ÈöèÊú∫Ê∂àÊÅØMySQLÂØπ‰∏¥Êó∂Ë°®ÊéíÂ∫èÁöÑÊâßË°åËøáÁ®ã„ÄÇ Â¶ÇÊûú‰Ω†Áõ¥Êé•‰ΩøÁî®order by rand()ÔºåËøô‰∏™ËØ≠Âè•ÈúÄË¶ÅUsing temporary Âíå Using filesortÔºåÊü•ËØ¢ÁöÑÊâßË°å‰ª£‰ª∑ÂæÄÂæÄÊòØÊØîËæÉÂ§ßÁöÑ„ÄÇÊâÄ‰ª•ÔºåÂú®ËÆæËÆ°ÁöÑÊó∂ÂÄô‰Ω†Ë¶ÅÂ∞ΩÈáèÈÅøÂºÄËøôÁßçÂÜôÊ≥ï„ÄÇ 18. ‰∏∫‰ªÄ‰πàËøô‰∫õSQLËØ≠Âè•ÈÄªËæëÁõ∏ÂêåÔºåÊÄßËÉΩÂç¥Â∑ÆÂºÇÂ∑®Â§ß Êù°‰ª∂Â≠óÊÆµÂáΩÊï∞Êìç‰Ωú ÂØπÁ¥¢ÂºïÂ≠óÊÆµÂÅöÂáΩÊï∞Êìç‰ΩúÔºåÂèØËÉΩ‰ºöÁ†¥ÂùèÁ¥¢ÂºïÂÄºÁöÑÊúâÂ∫èÊÄßÔºåÂõ†Ê≠§‰ºòÂåñÂô®Â∞±ÂÜ≥ÂÆöÊîæÂºÉËµ∞Ê†ëÊêúÁ¥¢ÂäüËÉΩ„ÄÇ ‰ºöÈÅçÂéÜÂÖ®Ë°®ÔºåÊâÄ‰ª•ÂæàÊÖ¢‚Ä¶ ÈöêÂºèÁ±ªÂûãËΩ¨Êç¢ mysql&gt; select * from tradelog where tradeid=110717; ‰æãÂ¶Ç‰∏äÈù¢ËøôÊù°ËØ≠Âè•Ôºå tradeid ÊòØ varchar Á±ªÂûãÔºå‰ΩÜÊòØ‰º†ËøõÊù•Êï¥Êï∞ÂûãÔºåËøô‰∏™Êó∂ÂÄôÂ∞±‰ºöÁ±ªÂûãËΩ¨Êç¢ÔºåÂØºËá¥‰∏çËÉΩËµ∞Á¥¢Âºï‰∫Ü„ÄÇ ÂÖ∂ÂÆûÁ±ªÂûãËΩ¨Êç¢Â∞±ÊòØÁõ∏ÂΩì‰∫éÂáΩÊï∞Êìç‰Ωú‰∫ÜÔºåÊâÄ‰ª•‰ºöËµ∞ÂÖ®Ë°®ËÄå‰∏çÊòØËµ∞Á¥¢Âºï„ÄÇ ÈöêÂºèÂ≠óÁ¨¶ÁºñÁ†ÅËΩ¨Êç¢ Â≠óÁ¨¶ÈõÜ‰∏çÂêåÂè™ÊòØÊù°‰ª∂‰πã‰∏ÄÔºåËøûÊé•ËøáÁ®ã‰∏≠Ë¶ÅÊ±ÇÂú®Ë¢´È©±Âä®Ë°®ÁöÑÁ¥¢ÂºïÂ≠óÊÆµ‰∏äÂä†ÂáΩÊï∞Êìç‰ΩúÔºåÊòØÁõ¥Êé•ÂØºËá¥ÂØπË¢´È©±Âä®Ë°®ÂÅöÂÖ®Ë°®Êâ´ÊèèÁöÑÂéüÂõ†„ÄÇ ÊÄªËÄåË®Ä‰πãÔºåËøô‰∫õ sql ËØ≠Âè•‰πãÊâÄ‰ª•ÊâßË°åÊÖ¢ÔºåÂ∞±ÊòØÂõ†‰∏∫Âä†‰∫ÜÂú®Êù°‰ª∂‰∏≠Âä†‰∫ÜÂáΩÊï∞Êìç‰Ωú„ÄÇ 19. ‰∏∫‰ªÄ‰πàÊàëÂè™Êü•‰∏ÄË°åÁöÑËØ≠Âè•Ôºå‰πüÊâßË°åËøô‰πàÊÖ¢ÊñπÊ≥ïÔºöÊâßË°å‰∏Ä‰∏ãshow processlistÂëΩ‰ª§ÔºåÁúãÁúãÂΩìÂâçËØ≠Âè•Â§Ñ‰∫é‰ªÄ‰πàÁä∂ÊÄÅ„ÄÇ ÂéüÂõ†ÂèØËÉΩÊúâÔºö Á¨¨‰∏ÄÁ±ªÔºöÊü•ËØ¢‰∏ÄÊù°Êï∞ÊçÆÈïøÊó∂Èó¥‰∏çËøîÂõû Á≠â MDL ÈîÅ„ÄÇ‰ΩøÁî®show processlistÂëΩ‰ª§ÔºåÂèëÁé∞ÊòØ Waiting for table metadata lock„ÄÇÂá∫Áé∞Ëøô‰∏™Áä∂ÊÄÅË°®Á§∫ÁöÑÊòØÔºåÁé∞Âú®Êúâ‰∏Ä‰∏™Á∫øÁ®ãÊ≠£Âú®Ë°®t‰∏äËØ∑Ê±ÇÊàñËÄÖÊåÅÊúâMDLÂÜôÈîÅÔºåÊääselectËØ≠Âè•Â†µ‰Ωè‰∫Ü„ÄÇ Á≠âË°åÈîÅ„ÄÇ Á¨¨‰∫åÁ±ªÔºöÊü•ËØ¢ÊÖ¢ ‰∏ÄËá¥ÊÄßËØªÁöÑÈóÆÈ¢òÔºåÈúÄË¶Å‰∏çÊñ≠ÂõûÊªöundo logÔºåÊâÄ‰ª•ÊÖ¢„ÄÇËøôÈáåÂõ†‰∏∫Âè™ÊòØÊü•‰∏ÄË°åÔºåÊâÄ‰ª•‰∏çËÉΩÁÆóÊòØÊÖ¢Êü•ËØ¢ÔºåÂè™ËÉΩÁÆóÂùèÊü•ËØ¢ÔºåÁ≠âÊï∞ÊçÆÈáè‰∏äÂéª‰∫ÜÔºåÂ∞±ÂèòÊàêÊÖ¢Êü•ËØ¢‰∫Ü„ÄÇ 20. ÂπªËØªÊòØ‰ªÄ‰πàÔºåÂπªËØªÊúâ‰ªÄ‰πàÈóÆÈ¢òÔºü„ÄåÊú™ËÆ§ÁúüÁ†îËØª„Äç ÂπªËØªÊòØ‰ªÄ‰πàÔºü ÂπªËØªÊåáÁöÑÊòØ‰∏Ä‰∏™‰∫ãÂä°Âú®ÂâçÂêé‰∏§Ê¨°Êü•ËØ¢Âêå‰∏Ä‰∏™ËåÉÂõ¥ÁöÑÊó∂ÂÄôÔºåÂêé‰∏ÄÊ¨°Êü•ËØ¢ÁúãÂà∞‰∫ÜÂâç‰∏ÄÊ¨°Êü•ËØ¢Ê≤°ÊúâÁúãÂà∞ÁöÑË°å„ÄÇ ËøôÈáåÔºåÊàëÈúÄË¶ÅÂØπ‚ÄúÂπªËØª‚ÄùÂÅö‰∏Ä‰∏™ËØ¥ÊòéÔºö Âú®ÂèØÈáçÂ§çËØªÈöîÁ¶ªÁ∫ßÂà´‰∏ãÔºåÊôÆÈÄöÁöÑÊü•ËØ¢ÊòØÂø´ÁÖßËØªÔºåÊòØ‰∏ç‰ºöÁúãÂà∞Âà´ÁöÑ‰∫ãÂä°ÊèíÂÖ•ÁöÑÊï∞ÊçÆÁöÑ„ÄÇÂõ†Ê≠§ÔºåÂπªËØªÂú®‚ÄúÂΩìÂâçËØª‚Äù‰∏ãÊâç‰ºöÂá∫Áé∞„ÄÇ„ÄåÂä†Ë°åÈîÅËØªÁöÑÊó∂ÂÄôÊâç‰ºöÂá∫Áé∞ÔºåÁ†¥ÂùèmvccÔºå‰æãÂ¶Çupdate„ÄÅinsert„Äç ÂπªËØª‰ªÖ‰∏ìÊåá‚ÄúÊñ∞ÊèíÂÖ•ÁöÑË°å‚Äù„ÄÇ ÂπªËØªÊúâ‰ªÄ‰πàÈóÆÈ¢òÔºü È¶ñÂÖàÊòØËØ≠‰πâ‰∏äÊúâÈóÆÈ¢ò„ÄÇsession AÂú®T1Êó∂ÂàªÂ∞±Â£∞Êòé‰∫ÜÔºå‚ÄúÊàëË¶ÅÊääÊâÄÊúâd=5ÁöÑË°åÈîÅ‰ΩèÔºå‰∏çÂáÜÂà´ÁöÑ‰∫ãÂä°ËøõË°åËØªÂÜôÊìç‰Ωú‚Äù„ÄÇËÄåÂÆûÈôÖ‰∏äÔºåËøô‰∏™ËØ≠‰πâË¢´Á†¥Âùè‰∫Ü„ÄÇ Êï∞ÊçÆ‰∏ÄËá¥ÊÄßÈóÆÈ¢ò„ÄÇ Âç≥‰ΩøÊääÊâÄÊúâÁöÑËÆ∞ÂΩïÈÉΩÂä†‰∏äÈîÅÔºåËøòÊòØÈòªÊ≠¢‰∏ç‰∫ÜÊñ∞ÊèíÂÖ•ÁöÑËÆ∞ÂΩï ÈÇ£Ëøô‰πàÈöæÂØπ‰ªòÔºåMysql ÊòØÂ¶Ç‰ΩïËß£ÂÜ≥Âë¢Ôºü ‰∫ßÁîüÂπªËØªÁöÑÂéüÂõ†ÊòØÔºåË°åÈîÅÂè™ËÉΩÈîÅ‰ΩèË°åÔºå‰ΩÜÊòØÊñ∞ÊèíÂÖ•ËÆ∞ÂΩïËøô‰∏™Âä®‰ΩúÔºåË¶ÅÊõ¥Êñ∞ÁöÑÊòØËÆ∞ÂΩï‰πãÈó¥ÁöÑ‚ÄúÈó¥Èöô‚Äù„ÄÇÂõ†Ê≠§Ôºå‰∏∫‰∫ÜËß£ÂÜ≥ÂπªËØªÈóÆÈ¢òÔºåInnoDBÂè™Â•ΩÂºïÂÖ•Êñ∞ÁöÑÈîÅÔºå‰πüÂ∞±ÊòØÈó¥ÈöôÈîÅ(Gap Lock)„ÄÇ Èó¥ÈöôÈîÅÂíåË°åÈîÅÂêàÁß∞next-key lockÔºåÊØè‰∏™next-key lockÊòØÂâçÂºÄÂêéÈó≠Âå∫Èó¥„ÄÇ Èó¥ÈöôÈîÅÂíånext-key lockÁöÑÂºïÂÖ•ÔºåÂ∏ÆÊàë‰ª¨Ëß£ÂÜ≥‰∫ÜÂπªËØªÁöÑÈóÆÈ¢òÔºå‰ΩÜÂêåÊó∂‰πüÂ∏¶Êù•‰∫Ü‰∏Ä‰∫õ‚ÄúÂõ∞Êâ∞‚Äù„ÄÇ Èó¥ÈöôÈîÅÁöÑÂºïÂÖ•ÔºåÂèØËÉΩ‰ºöÂØºËá¥ÂêåÊ†∑ÁöÑËØ≠Âè•ÈîÅ‰ΩèÊõ¥Â§ßÁöÑËåÉÂõ¥ÔºåËøôÂÖ∂ÂÆûÊòØÂΩ±Âìç‰∫ÜÂπ∂ÂèëÂ∫¶ÁöÑ 21. ‰∏∫‰ªÄ‰πàÊàëÂè™Êîπ‰∏ÄË°åÁöÑËØ≠Âè•ÔºåÈîÅËøô‰πàÂ§ö„ÄåÊú™Á†îËØª„ÄçÊúâÁÇπÈöæ‚Ä¶ÊúâÊó∂Èó¥ÂÜçÁ†îËØª 22. MySQLÊúâÂì™‰∫õ‚ÄúÈ•ÆÈ∏©Ê≠¢Ê∏¥‚ÄùÊèêÈ´òÊÄßËÉΩÁöÑÊñπÊ≥ï Èù¢ÂØπÁü≠ËøûÊé•È£éÊö¥Êó∂ÔºåÂ¶Ç‰ΩïËß£ÂÜ≥Ôºü Á¨¨‰∏ÄÁßçÊñπÊ≥ïÔºöÂÖàÂ§ÑÁêÜÊéâÈÇ£‰∫õÂç†ÁùÄËøûÊé•‰ΩÜÊòØ‰∏çÂ∑•‰ΩúÁöÑÁ∫øÁ®ã„ÄÇ Á¨¨‰∫åÁßçÊñπÊ≥ïÔºöÂáèÂ∞ëËøûÊé•ËøáÁ®ãÁöÑÊ∂àËÄó„ÄÇÊúâÁöÑ‰∏öÂä°‰ª£Á†Å‰ºöÂú®Áü≠Êó∂Èó¥ÂÜÖÂÖàÂ§ßÈáèÁî≥ËØ∑Êï∞ÊçÆÂ∫ìËøûÊé•ÂÅöÂ§áÁî®ÔºåÂ¶ÇÊûúÁé∞Âú®Êï∞ÊçÆÂ∫ìÁ°ÆËÆ§ÊòØË¢´ËøûÊé•Ë°å‰∏∫ÊâìÊåÇ‰∫ÜÔºåÈÇ£‰πà‰∏ÄÁßçÂèØËÉΩÁöÑÂÅöÊ≥ïÔºåÊòØËÆ©Êï∞ÊçÆÂ∫ìË∑≥ËøáÊùÉÈôêÈ™åËØÅÈò∂ÊÆµ„ÄÇ Ë∑≥ËøáÊùÉÈôêÈ™åËØÅÁöÑÊñπÊ≥ïÊòØÔºöÈáçÂêØÊï∞ÊçÆÂ∫ìÔºåÂπ∂‰ΩøÁî®‚Äìskip-grant-tablesÂèÇÊï∞ÂêØÂä®„ÄÇËøôÊ†∑ÔºåÊï¥‰∏™MySQL‰ºöË∑≥ËøáÊâÄÊúâÁöÑÊùÉÈôêÈ™åËØÅÈò∂ÊÆµÔºåÂåÖÊã¨ËøûÊé•ËøáÁ®ãÂíåËØ≠Âè•ÊâßË°åËøáÁ®ãÂú®ÂÜÖ„ÄÇ ÊÖ¢Êü•ËØ¢ÈóÆÈ¢òÂ¶Ç‰ΩïËß£ÂÜ≥Ôºü Âú®MySQL‰∏≠Ôºå‰ºöÂºïÂèëÊÄßËÉΩÈóÆÈ¢òÁöÑÊÖ¢Êü•ËØ¢ÔºåÂ§ß‰ΩìÊúâ‰ª•‰∏ã‰∏âÁßçÂèØËÉΩÔºö Á¥¢ÂºïÊ≤°ÊúâËÆæËÆ°Â•ΩÔºõ SQLËØ≠Âè•Ê≤°ÂÜôÂ•ΩÔºõ MySQLÈÄâÈîô‰∫ÜÁ¥¢Âºï„ÄÇ ÂØºËá¥ÊÖ¢Êü•ËØ¢ÁöÑÁ¨¨‰∏ÄÁßçÂèØËÉΩÊòØÔºåÁ¥¢ÂºïÊ≤°ÊúâËÆæËÆ°Â•Ω„ÄÇËøôÁßçÂú∫ÊôØ‰∏ÄËà¨Â∞±ÊòØÈÄöËøáÁ¥ßÊÄ•ÂàõÂª∫Á¥¢ÂºïÊù•Ëß£ÂÜ≥„ÄÇMySQL 5.6ÁâàÊú¨‰ª•ÂêéÔºåÂàõÂª∫Á¥¢ÂºïÈÉΩÊîØÊåÅOnline DDL‰∫ÜÔºåÂØπ‰∫éÈÇ£ÁßçÈ´òÂ≥∞ÊúüÊï∞ÊçÆÂ∫ìÂ∑≤ÁªèË¢´Ëøô‰∏™ËØ≠Âè•ÊâìÊåÇ‰∫ÜÁöÑÊÉÖÂÜµÔºåÊúÄÈ´òÊïàÁöÑÂÅöÊ≥ïÂ∞±ÊòØÁõ¥Êé•ÊâßË°åalter table ËØ≠Âè•„ÄÇÊØîËæÉÁêÜÊÉ≥ÁöÑÊòØËÉΩÂ§üÂú®Â§áÂ∫ìÂÖàÊâßË°å„ÄÇÂÅáËÆæ‰Ω†Áé∞Âú®ÁöÑÊúçÂä°ÊòØ‰∏Ä‰∏ª‰∏ÄÂ§áÔºå‰∏ªÂ∫ìA„ÄÅÂ§áÂ∫ìBÔºåËøô‰∏™ÊñπÊ°àÁöÑÂ§ßËá¥ÊµÅÁ®ãÊòØËøôÊ†∑ÁöÑÔºö Âú®Â§áÂ∫ìB‰∏äÊâßË°å set sql_log_bin=offÔºå‰πüÂ∞±ÊòØ‰∏çÂÜôbinlogÔºåÁÑ∂ÂêéÊâßË°åalter table ËØ≠Âè•Âä†‰∏äÁ¥¢ÂºïÔºõ ÊâßË°å‰∏ªÂ§áÂàáÊç¢Ôºõ ËøôÊó∂ÂÄô‰∏ªÂ∫ìÊòØBÔºåÂ§áÂ∫ìÊòØA„ÄÇÂú®A‰∏äÊâßË°å set sql_log_bin=offÔºåÁÑ∂ÂêéÊâßË°åalter table ËØ≠Âè•Âä†‰∏äÁ¥¢Âºï„ÄÇ ËøôÊòØ‰∏Ä‰∏™‚ÄúÂè§ËÄÅ‚ÄùÁöÑDDLÊñπÊ°à„ÄÇÂπ≥Êó∂Âú®ÂÅöÂèòÊõ¥ÁöÑÊó∂ÂÄôÔºå‰Ω†Â∫îËØ•ËÄÉËôëÁ±ª‰ººgh-ostËøôÊ†∑ÁöÑÊñπÊ°àÔºåÊõ¥Âä†Á®≥Â¶•„ÄÇ‰ΩÜÊòØÂú®ÈúÄË¶ÅÁ¥ßÊÄ•Â§ÑÁêÜÊó∂Ôºå‰∏äÈù¢Ëøô‰∏™ÊñπÊ°àÁöÑÊïàÁéáÊòØÊúÄÈ´òÁöÑ„ÄÇ ÂØºËá¥ÊÖ¢Êü•ËØ¢ÁöÑÁ¨¨‰∫åÁßçÂèØËÉΩÊòØÔºåËØ≠Âè•Ê≤°ÂÜôÂ•Ω„ÄÇ ËøôÊó∂ÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÊîπÂÜôSQLËØ≠Âè•Êù•Â§ÑÁêÜ„ÄÇMySQL 5.7Êèê‰æõ‰∫Üquery_rewriteÂäüËÉΩÔºåÂèØ‰ª•ÊääËæìÂÖ•ÁöÑ‰∏ÄÁßçËØ≠Âè•ÊîπÂÜôÊàêÂè¶Â§ñ‰∏ÄÁßçÊ®°Âºè„ÄÇ ÊØîÂ¶ÇÔºåËØ≠Âè•Ë¢´ÈîôËØØÂú∞ÂÜôÊàê‰∫Ü select * from t where id + 1 = 10000Ôºå‰Ω†ÂèØ‰ª•ÈÄöËøá‰∏ãÈù¢ÁöÑÊñπÂºèÔºåÂ¢ûÂä†‰∏Ä‰∏™ËØ≠Âè•ÊîπÂÜôËßÑÂàô„ÄÇ 1234&gt; mysql&gt; insert into query_rewrite.rewrite_rules(pattern, replacement, pattern_database) values ("select * from t where id + 1 = ?", "select * from t where id = ? - 1", "db1");&gt; &gt; call query_rewrite.flush_rewrite_rules();&gt; ËøôÈáåÔºåcall query_rewrite.flush_rewrite_rules()Ëøô‰∏™Â≠òÂÇ®ËøáÁ®ãÔºåÊòØËÆ©ÊèíÂÖ•ÁöÑÊñ∞ËßÑÂàôÁîüÊïàÔºå‰πüÂ∞±ÊòØÊàë‰ª¨ËØ¥ÁöÑ‚ÄúÊü•ËØ¢ÈáçÂÜô‚Äù„ÄÇ ÂØºËá¥ÊÖ¢Êü•ËØ¢ÁöÑÁ¨¨‰∏âÁßçÂèØËÉΩÔºåÂ∞±ÊòØMySQLÈÄâÈîô‰∫ÜÁ¥¢Âºï„ÄÇ ËøôÊó∂ÂÄôÔºåÂ∫îÊÄ•ÊñπÊ°àÂ∞±ÊòØÁªôËøô‰∏™ËØ≠Âè•Âä†‰∏äforce index„ÄÇ Â¶Ç‰ΩïÈÅøÂÖçÊÖ¢Êü•ËØ¢ÂØºËá¥ÊÄßËÉΩÈóÆÈ¢òÔºü ‰∏äÈù¢ÊàëÂíå‰Ω†ËÆ®ËÆ∫ÁöÑÁî±ÊÖ¢Êü•ËØ¢ÂØºËá¥ÊÄßËÉΩÈóÆÈ¢òÁöÑ‰∏âÁßçÂèØËÉΩÊÉÖÂÜµÔºåÂÆûÈôÖ‰∏äÂá∫Áé∞ÊúÄÂ§öÁöÑÊòØÂâç‰∏§ÁßçÔºåÂç≥ÔºöÁ¥¢ÂºïÊ≤°ËÆæËÆ°Â•ΩÂíåËØ≠Âè•Ê≤°ÂÜôÂ•Ω„ÄÇËÄåËøô‰∏§ÁßçÊÉÖÂÜµÔºåÊÅ∞ÊÅ∞ÊòØÂÆåÂÖ®ÂèØ‰ª•ÈÅøÂÖçÁöÑ„ÄÇÊØîÂ¶ÇÔºåÈÄöËøá‰∏ãÈù¢Ëøô‰∏™ËøáÁ®ãÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•È¢ÑÂÖàÂèëÁé∞ÈóÆÈ¢ò„ÄÇ ‰∏äÁ∫øÂâçÔºåÂú®ÊµãËØïÁéØÂ¢ÉÔºåÊääÊÖ¢Êü•ËØ¢Êó•ÂøóÔºàslow logÔºâÊâìÂºÄÔºåÂπ∂‰∏îÊäälong_query_timeËÆæÁΩÆÊàê0ÔºåÁ°Æ‰øùÊØè‰∏™ËØ≠Âè•ÈÉΩ‰ºöË¢´ËÆ∞ÂΩïÂÖ•ÊÖ¢Êü•ËØ¢Êó•ÂøóÔºõ Âú®ÊµãËØïË°®ÈáåÊèíÂÖ•Ê®°ÊãüÁ∫ø‰∏äÁöÑÊï∞ÊçÆÔºåÂÅö‰∏ÄÈÅçÂõûÂΩíÊµãËØïÔºõ ËßÇÂØüÊÖ¢Êü•ËØ¢Êó•ÂøóÈáåÊØèÁ±ªËØ≠Âè•ÁöÑËæìÂá∫ÔºåÁâπÂà´ÁïôÊÑèRows_examinedÂ≠óÊÆµÊòØÂê¶‰∏éÈ¢ÑÊúü‰∏ÄËá¥„ÄÇ ‰∏çË¶ÅÂêùÂï¨ËøôÊÆµËä±Âú®‰∏äÁ∫øÂâçÁöÑ‚ÄúÈ¢ùÂ§ñ‚ÄùÊó∂Èó¥ÔºåÂõ†‰∏∫Ëøô‰ºöÂ∏Æ‰Ω†ÁúÅ‰∏ãÂæàÂ§öÊïÖÈöúÂ§çÁõòÁöÑÊó∂Èó¥„ÄÇ 23 - 28 ËÆ≤ ÂêéÁª≠Á´†ËäÇÊöÇÊó∂ÊÑüËßâÊ≤°ÊúâÂ§™Â§öÁúãÁöÑÂøÖË¶ÅÔºåÊúÄÂêé‰ª•‰∏ÄÈÅìÈ¢òÁªìÊùüÊú¨ÁØáÊñáÁ´†„ÄÇ Êàë‰ª¨ÂÅáËÆæÂéüÊù•ÁöÑÂ§ßË°®Êúâ10000Ë°åÊï∞ÊçÆÔºåËÄåÁ¨¶ÂêàÊù°‰ª∂ÁöÑÊï∞ÊçÆÊúâ100Ë°åÔºåÊàë‰ª¨ÊúÄÂêéÁöÑÁªìÊûúÈõÜÊòØÂè™Ë¶Å10Ë°å Êàë‰ª¨Áü•ÈÅìÔºålimitÊòØ‰∏Ä‰∏™ËØ≠Âè•ÊúÄÂêéÊâßË°åÁöÑÔºå‰πüÂ∞±ÊòØËØ¥‰ºöÂÖàÊääÁ¨¶ÂêàÊù°‰ª∂ÁöÑÊï∞ÊçÆÂÖ®ÈÉ®ÊâæÂà∞ÔºåÊúÄÂêéÂÜçËøõË°å limit„ÄÇ Âú®Á¨¨‰∏ÄÁßçÊÉÖÂÜµ‰∏≠Ôºå‰ºöÂÖàÂéªÈùûËÅöÈõÜÁ¥¢Âºï‰∏≠ÊâæÁ¨¶ÂêàÊù°‰ª∂ÁöÑ‰∏ªÈîÆÂÄºÔºåÁÑ∂ÂêéËøõË°åÂõûË°®ÔºåÊàë‰ª¨ÂèØ‰ª•Áü•ÈÅìÔºå‰ºöÈÅçÂéÜÂ§ßË°®10000Ë°åÔºåÂõûË°®100Ê¨°ÔºåÊúÄÂêéÊï∞ÊçÆÂÖ®ÈÉ®ÊãøÂà∞‰πãÂêéÔºå‰ºöËøõË°å limitÔºõ ËÄåÂú®Á¨¨‰∫åÁßçÊÉÖÂÜµÔºå‰ºöÁõ¥Êé•ÂÖàÂéªÈùûËÅöÈõÜÁ¥¢Âºï‰∏≠ÊâæÁ¨¶ÂêàÊù°‰ª∂ÁöÑ‰∏ªÈîÆÂÄºÔºåËøô‰∏ÄÊ≠•ÂíåÁ¨¨‰∏ÄÁßçÊÉÖÂÜµÊòØ‰∏ÄËá¥ÁöÑÔºå‰πüÊòØ‰ºöÈÅçÂéÜÂ§ßË°®10000Ë°åÔºå‰ΩÜÊòØÊ≥®ÊÑèÔºåËøôÈáåÂú®ÂÜÖÈÉ®ÊúâËøõË°å limitÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÊâæÂà∞‰∫ÜÁ¨¶ÂêàÊù°‰ª∂ÁöÑ‰∏ªÈîÆÂÄºÔºåÂ∞±Áõ¥Êé• limit‰∫ÜÔºåËøôÊ†∑Â∞±‰ºöÂè™Ââ©‰∏ã 10 ‰∏™ÊúâÊïàÁöÑ‰∏ªÈîÆÂÄºÔºåÁÑ∂ÂêéÂÜçÂéªÂõûË°®Ôºå‰πüÊòØÁõ∏ÂΩì‰∫éÂè™‰ºöÂõûË°®ÂçÅÊ¨°„ÄÇÊâÄ‰ª•Â∫îËØ•Âø´ÁöÑÂéüÂõ†Âú®Ëøô‰∫Ü‚Ä¶.‰∏Ä‰∏™ÂõûË°®100Ê¨°Ôºå‰∏Ä‰∏™ÂõûË°® 10 Ê¨°ÔºåËøôËøòÂè™ÊòØÂú®Á¨¶ÂêàÊù°‰ª∂ÁöÑÊï∞ÊçÆÂè™Êúâ100Ë°åÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûúÁ¨¶ÂêàÊù°‰ª∂ÁöÑÊï∞ÊçÆÊòØ1000000Ë°åÔºåÈÇ£Ëøô‰∏™ÂõûË°®ÁöÑÊ¨°Êï∞ÂáèÂ∞ëÁöÑÂèØÂ∞±ÂæàÊÅêÊÄñ‰∫Ü„ÄÇ„ÄÇ„ÄÇ ‰∏ÄÂºÄÂßãËá™Â∑±ÁöÑÊÉ≥Ê≥ï‰ª•‰∏∫ÊòØ right join Â∏¶Êù•ÁöÑÊÄßËÉΩÁöÑÂ∑®Â§ßÊèêÂçáÔºåÂêéÈù¢ÂèëÁé∞Âπ∂‰∏çÊòØÔºå‰ΩÜÊòØ‰πüÈ°∫Â∏¶Áúã‰∫Ü‰∏ÄÈÅç join ÊèêÂçáÊÄßËÉΩÁöÑ‰∏Ä‰∫õÊñπÊ≥ï„ÄÇ „ÄåÁ¨¨34„ÄÅ35ËÆ≤„Äç Á¨¨‰∏Ä‰∏™ÈóÆÈ¢òÔºöËÉΩ‰∏çËÉΩ‰ΩøÁî®joinËØ≠Âè•Ôºü Â¶ÇÊûúÂèØ‰ª•‰ΩøÁî®Index Nested-Loop JoinÁÆóÊ≥ïÔºå‰πüÂ∞±ÊòØËØ¥ÂèØ‰ª•Áî®‰∏äË¢´È©±Âä®Ë°®‰∏äÁöÑÁ¥¢ÂºïÔºåÂÖ∂ÂÆûÊòØÊ≤°ÈóÆÈ¢òÁöÑÔºõ Â¶ÇÊûú‰ΩøÁî®Block Nested-Loop JoinÁÆóÊ≥ïÔºåÊâ´ÊèèË°åÊï∞Â∞±‰ºöËøáÂ§ö„ÄÇÂ∞§ÂÖ∂ÊòØÂú®Â§ßË°®‰∏äÁöÑjoinÊìç‰ΩúÔºåËøôÊ†∑ÂèØËÉΩË¶ÅÊâ´ÊèèË¢´È©±Âä®Ë°®ÂæàÂ§öÊ¨°Ôºå‰ºöÂç†Áî®Â§ßÈáèÁöÑÁ≥ªÁªüËµÑÊ∫ê„ÄÇÊâÄ‰ª•ËøôÁßçjoinÂ∞ΩÈáè‰∏çË¶ÅÁî®„ÄÇ ÊâÄ‰ª•‰Ω†Âú®Âà§Êñ≠Ë¶Å‰∏çË¶Å‰ΩøÁî®joinËØ≠Âè•Êó∂ÔºåÂ∞±ÊòØÁúãexplainÁªìÊûúÈáåÈù¢ÔºåExtraÂ≠óÊÆµÈáåÈù¢ÊúâÊ≤°ÊúâÂá∫Áé∞‚ÄúBlock Nested Loop‚ÄùÂ≠óÊ†∑„ÄÇ Á¨¨‰∫å‰∏™ÈóÆÈ¢òÊòØÔºöÂ¶ÇÊûúË¶Å‰ΩøÁî®joinÔºåÂ∫îËØ•ÈÄâÊã©Â§ßË°®ÂÅöÈ©±Âä®Ë°®ËøòÊòØÈÄâÊã©Â∞èË°®ÂÅöÈ©±Âä®Ë°®Ôºü Â¶ÇÊûúÊòØIndex Nested-Loop JoinÁÆóÊ≥ïÔºåÂ∫îËØ•ÈÄâÊã©Â∞èË°®ÂÅöÈ©±Âä®Ë°®Ôºõ Â¶ÇÊûúÊòØBlock Nested-Loop JoinÁÆóÊ≥ïÔºö Âú®join_buffer_sizeË∂≥Â§üÂ§ßÁöÑÊó∂ÂÄôÔºåÊòØ‰∏ÄÊ†∑ÁöÑÔºõ Âú®join_buffer_size‰∏çÂ§üÂ§ßÁöÑÊó∂ÂÄôÔºàËøôÁßçÊÉÖÂÜµÊõ¥Â∏∏ËßÅÔºâÔºåÂ∫îËØ•ÈÄâÊã©Â∞èË°®ÂÅöÈ©±Âä®Ë°®„ÄÇ ÊâÄ‰ª•ÔºåËøô‰∏™ÈóÆÈ¢òÁöÑÁªìËÆ∫Â∞±ÊòØÔºåÊÄªÊòØÂ∫îËØ•‰ΩøÁî®Â∞èË°®ÂÅöÈ©±Âä®Ë°®„ÄÇ ÊÄªÁªìÂêéÁª≠ÂÖ∂ÂÆûËøòÊúâ10Â§öËäÇÊú™ÁúãÔºå‰ΩÜÊòØÁ®çÂæÆÁï•ËØª‰∫Ü‰∏ãÔºåÊÑüËßâÂèØËØªÊÄß‰∏çÊòØÂæàÂº∫‰∫ÜÔºåÊØïÁ´ü‰∏çÊòØ‰∏ì‰∏ö DBAÔºåÊöÇÊó∂ MySQL Âëä‰∏ÄÊÆµËêΩ‰∫Ü‚Ä¶]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Êï∞ÊçÆÂ∫ì‰∏ìÈ¢òÂ§ç‰π†]]></title>
    <url>%2F2020%2F03%2F03%2F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0.html</url>
    <content type="text"><![CDATA[Ëá™Â∑±ÈÉ®ÂàÜÊÄªÁªìQÔºö‰∫ãÂä°ÁöÑÂõõÂ§ßÁâπÊÄßÔºü ACID ÂéüÂ≠êÊÄß Atomicity„ÄÇ‰∫ãÂä°‰∏≠ÊâÄÊúâÊìç‰ΩúÊòØ‰∏çÂèØÂÜçÂàÜÂâ≤ÁöÑÂéüÂ≠êÂçï‰ΩçÔºåÊâÄÊúâÊìç‰ΩúË¶Å‰πàÂÖ®ÈÉ®ÊâßË°åÊàêÂäüÔºåË¶Å‰πàÂÖ®ÈÉ®ÊâßË°åÂ§±Ë¥•„ÄÇ ‰∏ÄËá¥ÊÄß Consistency„ÄÇ‰∫ãÂä°ÊâßË°åÂêéÔºåÊï∞ÊçÆÂ∫ìÁä∂ÊÄÅ‰∏éÂÖ∂ÂÆÉ‰∏öÂä°ËßÑÂàô‰øùÊåÅ‰∏ÄËá¥„ÄÇÂ¶ÇËΩ¨Ë¥¶‰∏öÂä°ÔºåÊó†ËÆ∫‰∫ãÂä°ÊâßË°åÊàêÂäü‰∏éÂê¶ÔºåÂèÇ‰∏éËΩ¨Ë¥¶ÁöÑ‰∏§‰∏™Ë¥¶Âè∑‰ΩôÈ¢ù‰πãÂíåÂ∫îËØ•ÊòØ‰∏çÂèòÁöÑ„ÄÇ ÈöîÁ¶ªÊÄß Isolation„ÄÇÂú®Âπ∂ÂèëÊìç‰Ωú‰∏≠Ôºå‰∏çÂêå‰∫ãÂä°‰πãÈó¥Â∫îËØ•ÈöîÁ¶ªÂºÄÊù•Ôºå‰ΩøÊØè‰∏™Âπ∂Âèë‰∏≠ÁöÑ‰∫ãÂä°‰∏ç‰ºöÁõ∏‰∫íÂπ≤Êâ∞„ÄÇ ÊåÅ‰πÖÊÄß Durability„ÄÇ‰∏ÄÊó¶‰∫ãÂä°Êèê‰∫§ÊàêÂäüÔºå‰∫ãÂä°‰∏≠ÊâÄÊúâÁöÑÊï∞ÊçÆÊìç‰ΩúÈÉΩÂøÖÈ°ªË¢´ÊåÅ‰πÖÂåñÂà∞Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÂç≥‰ΩøÊèê‰∫§‰∫ãÂä°ÂêéÔºåÊï∞ÊçÆÂ∫ìÈ©¨‰∏äÂ¥©Ê∫ÉÔºåÂú®Êï∞ÊçÆÂ∫ìÈáçÂêØÊó∂Ôºå‰πüÂøÖÈ°ªËÉΩ‰øùËØÅÈÄöËøáÊüêÁßçÊú∫Âà∂ÊÅ¢Â§çÊï∞ÊçÆ„ÄÇ QÔºöÊï∞ÊçÆÂ∫ìÈöîÁ¶ªÁ∫ßÂà´Ôºü https://www.cnblogs.com/newsouls/p/4936842.html Êï∞ÊçÆÂ∫ì‰∫ãÂä°ÁöÑÈöîÁ¶ªÁ∫ßÂà´Êúâ4‰∏™ÔºåÁî±‰ΩéÂà∞È´ò‰æùÊ¨°‰∏∫ Read uncommitted ËØªÊú™Êèê‰∫§ Read committed ËØªÊèê‰∫§ Repeatable read ÈáçÂ§çËØªÔºàÈªòËÆ§Ôºâ Serializable Â∫èÂàóÂåñ ËøôÂõõ‰∏™Á∫ßÂà´ÂèØ‰ª•ÈÄê‰∏™Ëß£ÂÜ≥ËÑèËØª„ÄÅ‰∏çÂèØÈáçÂ§çËØª„ÄÅÂπªËØªËøôÂá†Á±ªÈóÆÈ¢ò„ÄÇ ËÑèËØª: ÂØπ‰∫é‰∏§‰∏™‰∫ãÁâ© T1, T2, T1 ËØªÂèñ‰∫ÜÂ∑≤ÁªèË¢´ T2 Êõ¥Êñ∞‰ΩÜËøòÊ≤°ÊúâË¢´Êèê‰∫§ÁöÑÂ≠óÊÆµ. ‰πãÂêé, Ëã• T2 ÂõûÊªö, T1ËØªÂèñÁöÑÂÜÖÂÆπÂ∞±ÊòØ‰∏¥Êó∂‰∏îÊó†ÊïàÁöÑ„ÄÇ ‰∏çÂèØÈáçÂ§çËØª: ÂØπ‰∫é‰∏§‰∏™‰∫ãÁâ© T1, T2, T1 ËØªÂèñ‰∫Ü‰∏Ä‰∏™Â≠óÊÆµ, ÁÑ∂Âêé T2 Êõ¥Êñ∞‰∫ÜËØ•Â≠óÊÆµ. ‰πãÂêé, T1ÂÜçÊ¨°ËØªÂèñÂêå‰∏Ä‰∏™Â≠óÊÆµ, ÂÄºÂ∞±‰∏çÂêå‰∫Ü„ÄÇ ÂπªËØª: ÂØπ‰∫é‰∏§‰∏™‰∫ãÁâ© T1, T2, T1 ‰ªé‰∏Ä‰∏™Ë°®‰∏≠ËØªÂèñ‰∫Ü‰∏Ä‰∏™Â≠óÊÆµ, ÁÑ∂Âêé T2 Âú®ËØ•Ë°®‰∏≠ÊèíÂÖ•‰∫Ü‰∏Ä‰∫õÊñ∞ÁöÑË°å. ‰πãÂêé, Â¶ÇÊûú T1 ÂÜçÊ¨°ËØªÂèñÂêå‰∏Ä‰∏™Ë°®, Â∞±‰ºöÂ§öÂá∫Âá†Ë°å„ÄÇ ‚àö: ÂèØËÉΩÂá∫Áé∞ √ó: ‰∏ç‰ºöÂá∫Áé∞ ËÑèËØª ‰∏çÂèØÈáçÂ§çËØª ÂπªËØª Read uncommitted ‚àö ‚àö ‚àö Read committed √ó ‚àö ‚àö Repeatable read √ó √ó ‚àö Serializable √ó √ó √ó QÔºöMYSQLÁöÑ‰∏§ÁßçÂ≠òÂÇ®ÂºïÊìéÂå∫Âà´Ôºà‰∫ãÂä°„ÄÅÈîÅÁ∫ßÂà´Á≠âÁ≠âÔºâÔºåÂêÑËá™ÁöÑÈÄÇÁî®Âú∫ÊôØ https://segmentfault.com/a/1190000008227211 MyISAM VS InnoDB ‰∏çÂêåÁÇπÔºö Â≠òÂÇ®ÊñπÂºè„ÄÇMyISAM ÁöÑÁ¥¢ÂºïÊñá‰ª∂Ôºà.MYIÔºâÂíåÊï∞ÊçÆÊñá‰ª∂Ôºà.MYDÔºâÂàÜÂºÄÊîæÔºåËÄå InnoDB Â≠òÊîæÂú®‰∏ÄËµ∑„ÄÇ ‰∫ãÂä°ÊîØÊåÅ„ÄÇMyISAM ‰∏çÊîØÊåÅ‰∫ãÂä°Ôºå‰ΩÜÊìç‰ΩúÂÖ∑Â§áÂéüÂ≠êÊÄßÔºåInnoDB ÊîØÊåÅ‰∫ãÂä°„ÄÇ Ë°®ÈîÅÂ∑ÆÂºÇ„ÄÇ MyISAM Âè™ÊîØÊåÅË°®Á∫ßÈîÅÔºåÁî®Êà∑Âú®Êìç‰ΩúmyisamË°®Êó∂ÔºåselectÔºåupdateÔºådeleteÔºåinsertËØ≠Âè•ÈÉΩ‰ºöÁªôË°®Ëá™Âä®Âä†ÈîÅÔºåÂêåÊó∂ÔºåËøôÁßçË°®Á∫ßÈîÅÂü∫Êú¨Â∞±ÊòØ ReentrantReadWriteLock ÁöÑÂèò‰ΩìÔºåËØªÈîÅÂÖ±‰∫´ÔºåÂÜôÈîÅ‰∫íÊñ•ÔºåËØª-ÂÜô‰πü‰∫íÊñ•ÔºåÂπ∂‰∏îÊúâ‰∏™ÁâπÊÆäÁÇπÔºåÂ∞±ÊòØ‰∏Ä‰∏™ËøõÁ®ãËØ∑Ê±ÇÊüê‰∏™MyISAMË°®ÁöÑËØªÈîÅÔºåÂêåÊó∂Âè¶‰∏Ä‰∏™ËøõÁ®ã‰πüËØ∑Ê±ÇÂêå‰∏ÄË°®ÁöÑÂÜôÈîÅÔºåMySQLÂ¶Ç‰ΩïÂ§ÑÁêÜÂë¢ÔºüÁ≠îÊ°àÊòØÂÜôËøõÁ®ãÂÖàËé∑ÂæóÈîÅ„ÄÇ‰∏ç‰ªÖÂ¶ÇÊ≠§ÔºåÂç≥‰ΩøËØªËØ∑Ê±ÇÂÖàÂà∞ÈîÅÁ≠âÂæÖÈòüÂàóÔºåÂÜôËØ∑Ê±ÇÂêéÂà∞ÔºåÂÜôÈîÅ‰πü‰ºöÊèíÂà∞ËØªÈîÅËØ∑Ê±Ç‰πãÂâçÔºÅËøôÊòØÂõ†‰∏∫MySQLËÆ§‰∏∫ÂÜôËØ∑Ê±Ç‰∏ÄËà¨ÊØîËØªËØ∑Ê±ÇË¶ÅÈáçË¶Å„ÄÇËøô‰πüÊ≠£ÊòØMyISAMË°®‰∏çÂ§™ÈÄÇÂêà‰∫éÊúâÂ§ßÈáèÊõ¥Êñ∞Êìç‰ΩúÂíåÊü•ËØ¢Êìç‰ΩúÂ∫îÁî®ÁöÑÂéüÂõ†ÔºåÂõ†‰∏∫ÔºåÂ§ßÈáèÁöÑÊõ¥Êñ∞Êìç‰Ωú‰ºöÈÄ†ÊàêÊü•ËØ¢Êìç‰ΩúÂæàÈöæËé∑ÂæóËØªÈîÅÔºå‰ªéËÄåÂèØËÉΩÊ∞∏ËøúÈòªÂ°û„ÄÇËøôÁßçÊÉÖÂÜµÊúâÊó∂ÂèØËÉΩ‰ºöÂèòÂæóÈùûÂ∏∏Á≥üÁ≥ïÔºÅ ÊîØÊåÅË°åÈîÅÔºåÈîÅÁ≤íÂ∫¶ÁªÜÂåñÔºåÂõ†Ê≠§ÂèØ‰ª•ÊîØÊåÅÂÜôÂπ∂Âèë„ÄÇ ÊòØÂê¶ÊúâÂ§ñÈîÆ„ÄÇMyISAM Ê≤°ÊúâÂ§ñÈîÆÔºåInnoDB ÊúâÂ§ñÈîÆ„ÄÇ Á¥¢ÂºïÁ±ªÂûã„ÄÇMyISAM ÈááÁî®ÁöÑÊòØÈùûËÅöÈõÜÁ¥¢ÂºïÔºåËÄå InnoDB ÈááÁî®‰∫ÜËÅöÈõÜÁ¥¢Âºï„ÄÇMyISAM Âè∂ËäÇÁÇπ‰øùÂ≠òÁöÑÊòØÊåáÂêëÊï∞ÊçÆÊñá‰ª∂ÁöÑÊåáÈíàÔºåËÄå InnoDB ‰øùÂ≠òÁöÑÂ∞±ÊòØÊï∞ÊçÆÊú¨Ë∫´„ÄÇ „Äå https://www.cnblogs.com/rgever/p/9736374.html„Äç Â≠òÂÇ®ÊÄªË°åÊï∞„ÄÇMyISAM Áõ¥Êé•Â≠òÂÇ®ÊÄªË°åÊï∞ÔºåËÄå InnoDB‰∏Ä‰∏™‰∏™ÂøÖÈ°ªÈÅçÂéÜ„ÄÇ ÂØπ‰∫éAUTO_INCREMENTÁ±ªÂûãÁöÑÂ≠óÊÆµÔºåÂú®MyISAMË°®‰∏≠ÔºåÂèØ‰ª•ÂíåÂÖ∂‰ªñÂ≠óÊÆµ‰∏ÄËµ∑Âª∫Á´ãËÅîÂêàÁ¥¢Âºï„ÄÇËÄåInnoDB‰∏≠ÂøÖÈ°ªÂåÖÂê´Âè™ÊúâËØ•Â≠óÊÆµÁöÑÁ¥¢Âºï„ÄÇ ÂÖ®ÊñáÁ¥¢Âºï„ÄÇMyISAM ÊîØÊåÅ fulltext ÂÖ®ÊñáÁ¥¢ÂºïÔºåËÄå InnoDB ‰∏çÊîØÊåÅ„ÄÇ Áî±‰∫éÁ¥¢ÂºïÁ±ªÂûãÁöÑÂå∫Âà´ÔºåÊâÄ‰ª•Âú®ÊòØÂê¶ÂøÖÈ°ªË¶ÅÊúâ‰∏ªÈîÆ‰∏ä‰πüÊúâÂ∑ÆË∑ù„ÄÇ MyISAMÔºöÂÖÅËÆ∏Ê≤°Êúâ‰ªª‰ΩïÁ¥¢ÂºïÂíå‰∏ªÈîÆÁöÑË°®Â≠òÂú®ÔºåÁ¥¢ÂºïÈÉΩÊòØ‰øùÂ≠òË°åÁöÑÂú∞ÂùÄ„ÄÇ InnoDBÔºöÂ¶ÇÊûúÊ≤°ÊúâËÆæÂÆö‰∏ªÈîÆÊàñËÄÖÈùûÁ©∫ÂîØ‰∏ÄÁ¥¢ÂºïÔºåÂ∞±‰ºöËá™Âä®ÁîüÊàê‰∏Ä‰∏™6Â≠óËäÇÁöÑ‰∏ªÈîÆ(Áî®Êà∑‰∏çÂèØËßÅ)ÔºåÊï∞ÊçÆÊòØ‰∏ªÁ¥¢ÂºïÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÈôÑÂä†Á¥¢Âºï‰øùÂ≠òÁöÑÊòØ‰∏ªÁ¥¢ÂºïÁöÑÂÄº„ÄÇ ÈÄÇÁî®Âú∫ÊôØÔºö ÈááÁî®MyISAMÂºïÊìé R/W &gt; 100:1 ‰∏îupdateÁõ∏ÂØπËæÉÂ∞ë Âπ∂Âèë‰∏çÈ´ò Ë°®Êï∞ÊçÆÈáèÂ∞è Á°¨‰ª∂ËµÑÊ∫êÊúâÈôê ÈááÁî®InnoDBÂºïÊìé R/WÊØîËæÉÂ∞èÔºåÈ¢ëÁπÅÊõ¥Êñ∞Â§ßÂ≠óÊÆµ Ë°®Êï∞ÊçÆÈáèË∂ÖËøá1000‰∏áÔºåÂπ∂ÂèëÈ´ò ÂÆâÂÖ®ÊÄßÂíåÂèØÁî®ÊÄßË¶ÅÊ±ÇÈ´ò ÈááÁî®MemoryÂºïÊìé ÊúâË∂≥Â§üÁöÑÂÜÖÂ≠ò ÂØπÊï∞ÊçÆ‰∏ÄËá¥ÊÄßË¶ÅÊ±Ç‰∏çÈ´òÔºåÂ¶ÇÂú®Á∫ø‰∫∫Êï∞ÂíåsessionÁ≠âÂ∫îÁî® ÈúÄË¶ÅÂÆöÊúüÂΩíÊ°£Êï∞ÊçÆ QÔºöÁ¥¢ÂºïÊúâ B+ Á¥¢Âºï Âíå Hash Á¥¢ÂºïÔºå‰∫åËÄÖÊúâ‰ΩïÂºÇÂêåÔºå‰∏∫‰Ωï‰∏ªÊµÅÁöÑÊï∞ÊçÆÂ∫ìÂºïÊìéÈÉΩÊòØ‰ΩøÁî®ÁöÑ B+ Á¥¢ÂºïÔºü Á¥¢Âºï Âå∫Âà´ Hash Á≠âÂÄºÊü•ËØ¢ÊïàÁéáÈ´òÔºå‰ΩÜÊòØ‰∏çËÉΩÊéíÂ∫è(ÈîÆÂÄºÁªèËøáÂìàÂ∏åÂèòÊàêÊó†Â∫è)Ôºå‰∏çËÉΩËøõË°åËåÉÂõ¥Êü•ËØ¢Ôºå‰∏çÊîØÊåÅÂ§öÂàóËÅîÂêàÁ¥¢ÂºïÁöÑÊúÄÂ∑¶ÂåπÈÖçËßÑÂàôÔºåÂú®ÊúâÂ§ßÈáèÈáçÂ§çÈîÆÂÄºÊÉÖÂÜµ‰∏ãÔºåÂìàÂ∏åÁ¥¢ÂºïÁöÑÊïàÁéá‰πüÊòØÊûÅ‰ΩéÁöÑÔºåÂõ†‰∏∫Â≠òÂú®ÊâÄË∞ìÁöÑÂìàÂ∏åÁ¢∞ÊíûÈóÆÈ¢ò„ÄÇ B+ Âπ≥Ë°°ÁöÑÂ§öÂèâÊ†ëÔºåÊï∞ÊçÆÊúâÂ∫èÔºåÂèØËåÉÂõ¥Êü•ËØ¢ QÔºöËÅöÈõÜÁ¥¢ÂºïÂíåÈùûËÅöÈõÜÁ¥¢ÂºïÁöÑÂå∫Âà´Ôºü https://www.cnblogs.com/s-b-b/p/8334593.html ËÅöÈõÜÁ¥¢ÂºïÔºà‰∏ªÈîÆÁ¥¢ÂºïÔºâÔºöÊï∞ÊçÆË°åÁöÑÁâ©ÁêÜÈ°∫Â∫è‰∏éÂàóÂÄºÔºà‰∏ÄËà¨ÊòØ‰∏ªÈîÆÁöÑÈÇ£‰∏ÄÂàóÔºâÁöÑÈÄªËæëÈ°∫Â∫èÁõ∏ÂêåÔºå‰∏Ä‰∏™Ë°®‰∏≠Âè™ËÉΩÊã•Êúâ‰∏Ä‰∏™ËÅöÈõÜÁ¥¢Âºï„ÄÇ ÈùûËÅöÈõÜÁ¥¢ÂºïÔºöËØ•Á¥¢Âºï‰∏≠Á¥¢ÂºïÁöÑÈÄªËæëÈ°∫Â∫è‰∏éÁ£ÅÁõò‰∏äË°åÁöÑÁâ©ÁêÜÂ≠òÂÇ®È°∫Â∫è‰∏çÂêåÔºå‰∏Ä‰∏™Ë°®‰∏≠ÂèØ‰ª•Êã•ÊúâÂ§ö‰∏™ÈùûËÅöÈõÜÁ¥¢Âºï„ÄÇ ‰ΩøÁî®ËÅöÈõÜÁ¥¢ÂºïÁöÑÊü•ËØ¢ÊïàÁéáË¶ÅÊØîÈùûËÅöÈõÜÁ¥¢ÂºïÁöÑÊïàÁéáË¶ÅÈ´òÔºå‰ΩÜÊòØÂ¶ÇÊûúÈúÄË¶ÅÈ¢ëÁπÅÂéªÊîπÂèòËÅöÈõÜÁ¥¢ÂºïÁöÑÂÄºÔºåÂÜôÂÖ•ÊÄßËÉΩÂπ∂‰∏çÈ´òÔºåÂõ†‰∏∫ÈúÄË¶ÅÁßªÂä®ÂØπÂ∫îÊï∞ÊçÆÁöÑÁâ©ÁêÜ‰ΩçÁΩÆ„ÄÇ ÈùûËÅöÈõÜÁ¥¢ÂºïÂú®Êü•ËØ¢ÁöÑÊó∂ÂÄôÂèØ‰ª•ÁöÑËØùÂ∞±ÈÅøÂÖç‰∫åÊ¨°Êü•ËØ¢ÔºåËøôÊ†∑ÊÄßËÉΩ‰ºöÂ§ßÂπÖÊèêÂçá„ÄÇ ‰∏çÊòØÊâÄÊúâÁöÑË°®ÈÉΩÈÄÇÂêàÂª∫Á´ãÁ¥¢ÂºïÔºåÂè™ÊúâÊï∞ÊçÆÈáèÂ§ßË°®ÊâçÈÄÇÂêàÂª∫Á´ãÁ¥¢ÂºïÔºå‰∏îÂª∫Á´ãÂú®ÈÄâÊã©ÊÄßÈ´òÁöÑÂàó‰∏äÈù¢ÊÄßËÉΩ‰ºöÊõ¥Â•Ω„ÄÇ QÔºöÁ¥¢ÂºïÁöÑ‰ºòÁº∫ÁÇπÔºåÂ∑≤ÁªèÁ¥¢ÂºïÁöÑÈÄÇÁî®Âú∫ÊôØÔºü Á¥¢ÂºïÊúÄÂ§ßÁöÑÂ•ΩÂ§ÑÊòØÊèêÈ´òÊü•ËØ¢ÈÄüÂ∫¶Ôºå Áº∫ÁÇπÊòØÊõ¥Êñ∞Êï∞ÊçÆÊó∂ÊïàÁéá‰ΩéÔºåÂõ†‰∏∫Ë¶ÅÂêåÊó∂Êõ¥Êñ∞Á¥¢Âºï. ÂØπÊï∞ÊçÆËøõË°åÈ¢ëÁπÅÊü•ËØ¢ËøõÂª∫Á´ãÁ¥¢ÂºïÔºåÂ¶ÇÊûúË¶ÅÈ¢ëÁπÅÊõ¥ÊîπÊï∞ÊçÆ‰∏çÂª∫ËÆÆ‰ΩøÁî®Á¥¢Âºï„ÄÇ QÔºöÊï∞ÊçÆÂ∫ìÂºïÊìéÂ∫ïÂ±ÇÂÆûÁé∞‰∏∫‰Ωï‰∏çÁî® B Ê†ëÂíåÁ∫¢ÈªëÊ†ë„ÄÅAVLÂë¢Ôºü È¶ñÂÖàÂõûÁ≠î‰∏∫‰Ωï‰∏çÁî® B Ê†ë B Ê†ëÂú®ÊØè‰∏™Á¥¢ÂºïËäÇÁÇπÈÉΩ‰ºö‰øùÂ≠ò Data ÂüüÔºåË¶ÅÁü•ÈÅìË°°Èáè Mysql ÁöÑÊü•ËØ¢ÊïàÁéáÂ∞±ÊòØÂèñÂÜ≥‰∫éÁ£ÅÁõò I/O Ê¨°Êï∞ÔºåB Ê†ëÂú®ÊØè‰∏™Á¥¢ÂºïËäÇÁÇπÈÉΩ‰øùÂ≠ò Data ÂüüÔºåÊÑèÂë≥ÁùÄÊØè‰∏™Á¥¢ÂºïÊâÄÂç†ÁöÑÁ©∫Èó¥Â∞±ÂèòÂ§ß‰∫ÜÔºåÁ£ÅÁõò I/O ÊòØÊåâÈ°µÔºà16kbÔºâËØªÂèñÁöÑÔºåÈÇ£‰πàÊØèÈ°µÁöÑÁ¥¢ÂºïÊï∞ÈáèÂ∞±Ëá™ÁÑ∂‰ºöÂèòÂ∞ëÔºåËøôÊ†∑Â∞±ÊÑèÂë≥ÁùÄÈúÄË¶ÅÊõ¥Â§öÁöÑ I/O Ê¨°Êï∞ÔºåËÄåÂØπÊØî B+ÔºåÂè™Âú®Âè∂Â≠êËäÇÁÇπÊâçÊúâÊâÄÊúâÁöÑÊï∞ÊçÆÔºåÂÖ∂‰ªñÁöÑÁ¥¢ÂºïËäÇÁÇπÊâÄÂç†Á©∫Èó¥ÂæàÂ∞èÔºåÊâÄ‰ª•ËøôÊòØ B+ ÁöÑ‰∏Ä‰∏™‰ºòÁÇπÔºõ ÂÖ∂Ê¨°ÔºåB+ ÁöÑÂè∂Â≠êÁªìÁÇπÊúâ‰ΩøÁî®ÈìæË°®ËøûÊé•ÔºåÈùûÂ∏∏ÈÄÇÁî®‰∫éËåÉÂõ¥Êü•ËØ¢ÔºåÁõ∏ÊØîÊù•ËØ¥ B Ê†ëÂ∞±Ê≤°ÊúâÔºõ ÊúÄÂêéÔºåB+ ÁöÑÊü•ËØ¢ÊïàÁéáÈùûÂ∏∏Á®≥ÂÆöÔºåÈÉΩÊòØË¶ÅÈÅçÂéÜÂà∞Âè∂Â≠êÁªìÁÇπÔºåËÄå B Ê†ëÁöÑÊü•ËØ¢ÊïàÁéáÂ∞±‰∏çÁ®≥ÂÆö‰∫Ü„ÄÇ ÂÜçÂõûÁ≠î‰∏∫‰Ωï‰∏çÁî®Á∫¢ÈªëÊ†ë„ÄÅAVL? Á∫¢ÈªëÊ†ëÂíå AVL Áõ∏ÊØî B+ Êù•ËØ¥ÔºåÊ†ëËøáÈ´òÔºåËøôÊ†∑Â∏¶Êù•ÁöÑÁõ¥Êé•ÂΩ±ÂìçÂ∞±ÊòØÁ£ÅÁõò I/O Ê¨°Êï∞ÁöÑÂ¢ûÂ§ö„ÄÇ ÊãìÂ±ïÔºöÊï∞ÊçÆÂ∫ìÁ≥ªÁªüÁöÑËÆæËÆ°ËÄÖÂ∑ßÂ¶ôÂà©Áî®‰∫ÜÁ£ÅÁõòÈ¢ÑËØªÂéüÁêÜÔºåÂ∞Ü‰∏Ä‰∏™ËäÇÁÇπÁöÑÂ§ßÂ∞èËÆæ‰∏∫Á≠â‰∫é‰∏Ä‰∏™È°µÔºåËøôÊ†∑ÊØè‰∏™ËäÇÁÇπÂè™ÈúÄË¶Å‰∏ÄÊ¨°I/OÂ∞±ÂèØ‰ª•ÂÆåÂÖ®ËΩΩÂÖ•„ÄÇ‰∏∫‰∫ÜËææÂà∞Ëøô‰∏™ÁõÆÁöÑÔºåÂú®ÂÆûÈôÖÂÆûÁé∞B-TreeËøòÈúÄË¶Å‰ΩøÁî®Â¶Ç‰∏ãÊäÄÂ∑ßÔºöÊØèÊ¨°Êñ∞Âª∫ËäÇÁÇπÊó∂ÔºåÁõ¥Êé•Áî≥ËØ∑‰∏Ä‰∏™È°µÁöÑÁ©∫Èó¥ÔºåËøôÊ†∑Â∞±‰øùËØÅ‰∏Ä‰∏™ËäÇÁÇπÁâ©ÁêÜ‰∏ä‰πüÂ≠òÂÇ®Âú®‰∏Ä‰∏™È°µÈáåÔºåÂä†‰πãËÆ°ÁÆóÊú∫Â≠òÂÇ®ÂàÜÈÖçÈÉΩÊòØÊåâÈ°µÂØπÈΩêÁöÑÔºåÂ∞±ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™nodeÂè™ÈúÄ‰∏ÄÊ¨°I/O„ÄÇ Ââ©‰∏ãÁöÑÊòØÁõ¥Êé•Â§çÂà∂Âà´‰∫∫ÁöÑÂçöÂÆ¢Ôºö https://www.cnblogs.com/wenxiaofei/p/9853682.html ÂçöÂÆ¢Âõ≠ https://www.nowcoder.com/discuss/135748?order=4&amp;pos=23&amp;type=0 ÁâõÂÆ¢ÁΩë ‰∏§‰∏™ÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰∏∫‰∫ÜÁúãÂæóÊõ¥Êñπ‰æøÔºåÁõ¥Êé•Â§çÂà∂Âà∞Êú¨Âú∞‰∫Ü„ÄÇ Êï∞ÊçÆÂ∫ìÈù¢ËØïÁü•ËØÜÁÇπÊ±áÊÄª‰∏Ä„ÄÅÂü∫Êú¨Ê¶ÇÂøµ1.‰∏ªÈîÆ„ÄÅÂ§ñÈîÆ„ÄÅË∂ÖÈîÆ„ÄÅÂÄôÈÄâÈîÆ Ë∂ÖÈîÆÔºöÂú®ÂÖ≥Á≥ª‰∏≠ËÉΩÂîØ‰∏ÄÊ†áËØÜÂÖÉÁªÑÁöÑÂ±ûÊÄßÈõÜÁß∞‰∏∫ÂÖ≥Á≥ªÊ®°ÂºèÁöÑË∂ÖÈîÆ„ÄÇ‰∏Ä‰∏™Â±ûÊÄßÂèØ‰ª•‰∏∫‰Ωú‰∏∫‰∏Ä‰∏™Ë∂ÖÈîÆÔºåÂ§ö‰∏™Â±ûÊÄßÁªÑÂêàÂú®‰∏ÄËµ∑‰πüÂèØ‰ª•‰Ωú‰∏∫‰∏Ä‰∏™Ë∂ÖÈîÆ„ÄÇË∂ÖÈîÆÂåÖÂê´ÂÄôÈÄâÈîÆÂíå‰∏ªÈîÆ„ÄÇ ÂÄôÈÄâÈîÆÔºöÊòØÊúÄÂ∞èË∂ÖÈîÆÔºåÂç≥Ê≤°ÊúâÂÜó‰ΩôÂÖÉÁ¥†ÁöÑË∂ÖÈîÆ„ÄÇ ‰∏ªÈîÆÔºöÊï∞ÊçÆÂ∫ìË°®‰∏≠ÂØπÂÇ®Â≠òÊï∞ÊçÆÂØπË±°‰∫à‰ª•ÂîØ‰∏ÄÂíåÂÆåÊï¥Ê†áËØÜÁöÑÊï∞ÊçÆÂàóÊàñÂ±ûÊÄßÁöÑÁªÑÂêà„ÄÇ‰∏Ä‰∏™Êï∞ÊçÆÂàóÂè™ËÉΩÊúâ‰∏Ä‰∏™‰∏ªÈîÆÔºå‰∏î‰∏ªÈîÆÁöÑÂèñÂÄº‰∏çËÉΩÁº∫Â§±ÔºåÂç≥‰∏çËÉΩ‰∏∫Á©∫ÂÄºÔºàNullÔºâ„ÄÇ Â§ñÈîÆÔºöÂú®‰∏Ä‰∏™Ë°®‰∏≠Â≠òÂú®ÁöÑÂè¶‰∏Ä‰∏™Ë°®ÁöÑ‰∏ªÈîÆÁß∞Ê≠§Ë°®ÁöÑÂ§ñÈîÆ„ÄÇ 2.‰∏∫‰ªÄ‰πàÁî®Ëá™Â¢ûÂàó‰Ωú‰∏∫‰∏ªÈîÆ Â¶ÇÊûúÊàë‰ª¨ÂÆö‰πâ‰∫Ü‰∏ªÈîÆ(PRIMARY KEY)ÔºåÈÇ£‰πàInnoDB‰ºöÈÄâÊã©‰∏ªÈîÆ‰Ωú‰∏∫ËÅöÈõÜÁ¥¢Âºï„ÄÅ Â¶ÇÊûúÊ≤°ÊúâÊòæÂºèÂÆö‰πâ‰∏ªÈîÆÔºåÂàôInnoDB‰ºöÈÄâÊã©Á¨¨‰∏Ä‰∏™‰∏çÂåÖÂê´ÊúâNULLÂÄºÁöÑÂîØ‰∏ÄÁ¥¢Âºï‰Ωú‰∏∫‰∏ªÈîÆÁ¥¢Âºï„ÄÅ Â¶ÇÊûú‰πüÊ≤°ÊúâËøôÊ†∑ÁöÑÂîØ‰∏ÄÁ¥¢ÂºïÔºåÂàôInnoDB‰ºöÈÄâÊã©ÂÜÖÁΩÆ6Â≠óËäÇÈïøÁöÑROWID‰Ωú‰∏∫ÈöêÂê´ÁöÑËÅöÈõÜÁ¥¢Âºï(ROWIDÈöèÁùÄË°åËÆ∞ÂΩïÁöÑÂÜôÂÖ•ËÄå‰∏ªÈîÆÈÄíÂ¢ûÔºåËøô‰∏™ROWID‰∏çÂÉèORACLEÁöÑROWIDÈÇ£Ê†∑ÂèØÂºïÁî®ÔºåÊòØÈöêÂê´ÁöÑ)„ÄÇ Êï∞ÊçÆËÆ∞ÂΩïÊú¨Ë∫´Ë¢´Â≠ò‰∫é‰∏ªÁ¥¢ÂºïÔºà‰∏ÄÈ¢óB+TreeÔºâÁöÑÂè∂Â≠êËäÇÁÇπ‰∏ä„ÄÇËøôÂ∞±Ë¶ÅÊ±ÇÂêå‰∏Ä‰∏™Âè∂Â≠êËäÇÁÇπÂÜÖÔºàÂ§ßÂ∞è‰∏∫‰∏Ä‰∏™ÂÜÖÂ≠òÈ°µÊàñÁ£ÅÁõòÈ°µÔºâÁöÑÂêÑÊù°Êï∞ÊçÆËÆ∞ÂΩïÊåâ‰∏ªÈîÆÈ°∫Â∫èÂ≠òÊîæÔºåÂõ†Ê≠§ÊØèÂΩìÊúâ‰∏ÄÊù°Êñ∞ÁöÑËÆ∞ÂΩïÊèíÂÖ•Êó∂ÔºåMySQL‰ºöÊ†πÊçÆÂÖ∂‰∏ªÈîÆÂ∞ÜÂÖ∂ÊèíÂÖ•ÈÄÇÂΩìÁöÑËäÇÁÇπÂíå‰ΩçÁΩÆÔºåÂ¶ÇÊûúÈ°µÈù¢ËææÂà∞Ë£ÖËΩΩÂõ†Â≠êÔºàInnoDBÈªòËÆ§‰∏∫15/16ÔºâÔºåÂàôÂºÄËæü‰∏Ä‰∏™Êñ∞ÁöÑÈ°µÔºàËäÇÁÇπÔºâ Â¶ÇÊûúË°®‰ΩøÁî®Ëá™Â¢û‰∏ªÈîÆÔºåÈÇ£‰πàÊØèÊ¨°ÊèíÂÖ•Êñ∞ÁöÑËÆ∞ÂΩïÔºåËÆ∞ÂΩïÂ∞±‰ºöÈ°∫Â∫èÊ∑ªÂä†Âà∞ÂΩìÂâçÁ¥¢ÂºïËäÇÁÇπÁöÑÂêéÁª≠‰ΩçÁΩÆÔºåÂΩì‰∏ÄÈ°µÂÜôÊª°ÔºåÂ∞±‰ºöËá™Âä®ÂºÄËæü‰∏Ä‰∏™Êñ∞ÁöÑÈ°µ Â¶ÇÊûú‰ΩøÁî®ÈùûËá™Â¢û‰∏ªÈîÆÔºàÂ¶ÇÊûúË∫´‰ªΩËØÅÂè∑ÊàñÂ≠¶Âè∑Á≠âÔºâÔºåÁî±‰∫éÊØèÊ¨°ÊèíÂÖ•‰∏ªÈîÆÁöÑÂÄºËøë‰ºº‰∫éÈöèÊú∫ÔºåÂõ†Ê≠§ÊØèÊ¨°Êñ∞Á∫™ÂΩïÈÉΩË¶ÅË¢´ÊèíÂà∞Áé∞ÊúâÁ¥¢ÂºïÈ°µÂæó‰∏≠Èó¥Êüê‰∏™‰ΩçÁΩÆÔºåÊ≠§Êó∂MySQL‰∏çÂæó‰∏ç‰∏∫‰∫ÜÂ∞ÜÊñ∞ËÆ∞ÂΩïÊèíÂà∞ÂêàÈÄÇ‰ΩçÁΩÆËÄåÁßªÂä®Êï∞ÊçÆÔºåÁîöËá≥ÁõÆÊ†áÈ°µÈù¢ÂèØËÉΩÂ∑≤ÁªèË¢´ÂõûÂÜôÂà∞Á£ÅÁõò‰∏äËÄå‰ªéÁºìÂ≠ò‰∏≠Ê∏ÖÊéâÔºåÊ≠§Êó∂ÂèàË¶Å‰ªéÁ£ÅÁõò‰∏äËØªÂõûÊù•ÔºåËøôÂ¢ûÂä†‰∫ÜÂæàÂ§öÂºÄÈîÄÔºåÂêåÊó∂È¢ëÁπÅÁöÑÁßªÂä®„ÄÅÂàÜÈ°µÊìç‰ΩúÈÄ†Êàê‰∫ÜÂ§ßÈáèÁöÑÁ¢éÁâáÔºåÂæóÂà∞‰∫Ü‰∏çÂ§üÁ¥ßÂáëÁöÑÁ¥¢ÂºïÁªìÊûÑÔºåÂêéÁª≠‰∏çÂæó‰∏çÈÄöËøáOPTIMIZE TABLEÊù•ÈáçÂª∫Ë°®Âπ∂‰ºòÂåñÂ°´ÂÖÖÈ°µÈù¢„ÄÇ 3.Ëß¶ÂèëÂô®ÁöÑ‰ΩúÁî®Ôºü Ëß¶ÂèëÂô®ÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑÂ≠òÂÇ®ËøáÁ®ãÔºå‰∏ªË¶ÅÊòØÈÄöËøá‰∫ã‰ª∂Êù•Ëß¶ÂèëËÄåË¢´ÊâßË°åÁöÑ„ÄÇÂÆÉÂèØ‰ª•Âº∫ÂåñÁ∫¶ÊùüÔºåÊù•Áª¥Êä§Êï∞ÊçÆÁöÑÂÆåÊï¥ÊÄßÂíå‰∏ÄËá¥ÊÄßÔºåÂèØ‰ª•Ë∑üË∏™Êï∞ÊçÆÂ∫ìÂÜÖÁöÑÊìç‰Ωú‰ªéËÄå‰∏çÂÖÅËÆ∏Êú™ÁªèËÆ∏ÂèØÁöÑÊõ¥Êñ∞ÂíåÂèòÂåñ„ÄÇÂèØ‰ª•ËÅîÁ∫ßËøêÁÆó„ÄÇÂ¶ÇÔºåÊüêË°®‰∏äÁöÑËß¶ÂèëÂô®‰∏äÂåÖÂê´ÂØπÂè¶‰∏Ä‰∏™Ë°®ÁöÑÊï∞ÊçÆÊìç‰ΩúÔºåËÄåËØ•Êìç‰ΩúÂèà‰ºöÂØºËá¥ËØ•Ë°®Ëß¶ÂèëÂô®Ë¢´Ëß¶Âèë„ÄÇ 4.‰ªÄ‰πàÊòØÂ≠òÂÇ®ËøáÁ®ãÔºüÁî®‰ªÄ‰πàÊù•Ë∞ÉÁî®Ôºü Â≠òÂÇ®ËøáÁ®ãÊòØ‰∏Ä‰∏™È¢ÑÁºñËØëÁöÑSQLËØ≠Âè•Ôºå‰ºòÁÇπÊòØÂÖÅËÆ∏Ê®°ÂùóÂåñÁöÑËÆæËÆ°ÔºåÂ∞±ÊòØËØ¥Âè™ÈúÄÂàõÂª∫‰∏ÄÊ¨°Ôºå‰ª•ÂêéÂú®ËØ•Á®ãÂ∫è‰∏≠Â∞±ÂèØ‰ª•Ë∞ÉÁî®Â§öÊ¨°„ÄÇÂ¶ÇÊûúÊüêÊ¨°Êìç‰ΩúÈúÄË¶ÅÊâßË°åÂ§öÊ¨°SQLÔºå‰ΩøÁî®Â≠òÂÇ®ËøáÁ®ãÊØîÂçïÁ∫ØSQLËØ≠Âè•ÊâßË°åË¶ÅÂø´„ÄÇ Ë∞ÉÁî®Ôºö 1ÔºâÂèØ‰ª•Áî®‰∏Ä‰∏™ÂëΩ‰ª§ÂØπË±°Êù•Ë∞ÉÁî®Â≠òÂÇ®ËøáÁ®ã„ÄÇ 2ÔºâÂèØ‰ª•‰æõÂ§ñÈÉ®Á®ãÂ∫èË∞ÉÁî®ÔºåÊØîÂ¶ÇÔºöjavaÁ®ãÂ∫è„ÄÇ 5.Â≠òÂÇ®ËøáÁ®ãÁöÑ‰ºòÁº∫ÁÇπÔºü ‰ºòÁÇπÔºö 1ÔºâÂ≠òÂÇ®ËøáÁ®ãÊòØÈ¢ÑÁºñËØëËøáÁöÑÔºåÊâßË°åÊïàÁéáÈ´ò„ÄÇ 2ÔºâÂ≠òÂÇ®ËøáÁ®ãÁöÑ‰ª£Á†ÅÁõ¥Êé•Â≠òÊîæ‰∫éÊï∞ÊçÆÂ∫ì‰∏≠ÔºåÈÄöËøáÂ≠òÂÇ®ËøáÁ®ãÂêçÁõ¥Êé•Ë∞ÉÁî®ÔºåÂáèÂ∞ëÁΩëÁªúÈÄöËÆØ„ÄÇ 3ÔºâÂÆâÂÖ®ÊÄßÈ´òÔºåÊâßË°åÂ≠òÂÇ®ËøáÁ®ãÈúÄË¶ÅÊúâ‰∏ÄÂÆöÊùÉÈôêÁöÑÁî®Êà∑„ÄÇ 4ÔºâÂ≠òÂÇ®ËøáÁ®ãÂèØ‰ª•ÈáçÂ§ç‰ΩøÁî®ÔºåÂèØÂáèÂ∞ëÊï∞ÊçÆÂ∫ìÂºÄÂèë‰∫∫ÂëòÁöÑÂ∑•‰ΩúÈáè„ÄÇ Áº∫ÁÇπÔºöÁßªÊ§çÊÄßÂ∑Æ 6.Â≠òÂÇ®ËøáÁ®ã‰∏éÂáΩÊï∞ÁöÑÂå∫Âà´ 7.‰ªÄ‰πàÂè´ËßÜÂõæÔºüÊ∏∏Ê†áÊòØ‰ªÄ‰πàÔºü ËßÜÂõæÔºö ÊòØ‰∏ÄÁßçËôöÊãüÁöÑË°®ÔºåÂÖ∑ÊúâÂíåÁâ©ÁêÜË°®Áõ∏ÂêåÁöÑÂäüËÉΩ„ÄÇÂèØ‰ª•ÂØπËßÜÂõæËøõË°åÂ¢ûÔºåÊîπÔºåÊü•ÔºåÊìç‰ΩúÔºåËØïÂõæÈÄöÂ∏∏ÊòØÊúâ‰∏Ä‰∏™Ë°®ÊàñËÄÖÂ§ö‰∏™Ë°®ÁöÑË°åÊàñÂàóÁöÑÂ≠êÈõÜ„ÄÇÂØπËßÜÂõæÁöÑ‰øÆÊîπ‰ºöÂΩ±ÂìçÂü∫Êú¨Ë°®„ÄÇÂÆÉ‰ΩøÂæóÊàë‰ª¨Ëé∑ÂèñÊï∞ÊçÆÊõ¥ÂÆπÊòìÔºåÁõ∏ÊØîÂ§öË°®Êü•ËØ¢„ÄÇ Ê∏∏Ê†áÔºö ÊòØÂØπÊü•ËØ¢Âá∫Êù•ÁöÑÁªìÊûúÈõÜ‰Ωú‰∏∫‰∏Ä‰∏™ÂçïÂÖÉÊù•ÊúâÊïàÁöÑÂ§ÑÁêÜ„ÄÇÊ∏∏Ê†áÂèØ‰ª•ÂÆöÂú®ËØ•ÂçïÂÖÉ‰∏≠ÁöÑÁâπÂÆöË°åÔºå‰ªéÁªìÊûúÈõÜÁöÑÂΩìÂâçË°åÊ£ÄÁ¥¢‰∏ÄË°åÊàñÂ§öË°å„ÄÇÂèØ‰ª•ÂØπÁªìÊûúÈõÜÂΩìÂâçË°åÂÅö‰øÆÊîπ„ÄÇ‰∏ÄËà¨‰∏ç‰ΩøÁî®Ê∏∏Ê†áÔºå‰ΩÜÊòØÈúÄË¶ÅÈÄêÊù°Â§ÑÁêÜÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÊ∏∏Ê†áÊòæÂæóÂçÅÂàÜÈáçË¶Å„ÄÇ 8.ËßÜÂõæÁöÑ‰ºòÁº∫ÁÇπ ‰ºòÁÇπÔºö 1ÂØπÊï∞ÊçÆÂ∫ìÁöÑËÆøÈóÆÔºåÂõ†‰∏∫ËßÜÂõæÂèØ‰ª•ÊúâÈÄâÊã©ÊÄßÁöÑÈÄâÂèñÊï∞ÊçÆÂ∫ìÈáåÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ 2)Áî®Êà∑ÈÄöËøáÁÆÄÂçïÁöÑÊü•ËØ¢ÂèØ‰ª•‰ªéÂ§çÊùÇÊü•ËØ¢‰∏≠ÂæóÂà∞ÁªìÊûú„ÄÇ 3)Áª¥Êä§Êï∞ÊçÆÁöÑÁã¨Á´ãÊÄßÔºåËØïÂõæÂèØ‰ªéÂ§ö‰∏™Ë°®Ê£ÄÁ¥¢Êï∞ÊçÆ„ÄÇ 4)ÂØπ‰∫éÁõ∏ÂêåÁöÑÊï∞ÊçÆÂèØ‰∫ßÁîü‰∏çÂêåÁöÑËßÜÂõæ„ÄÇ Áº∫ÁÇπÔºö ÊÄßËÉΩÔºöÊü•ËØ¢ËßÜÂõæÊó∂ÔºåÂøÖÈ°ªÊääËßÜÂõæÁöÑÊü•ËØ¢ËΩ¨ÂåñÊàêÂØπÂü∫Êú¨Ë°®ÁöÑÊü•ËØ¢ÔºåÂ¶ÇÊûúËøô‰∏™ËßÜÂõæÊòØÁî±‰∏Ä‰∏™Â§çÊùÇÁöÑÂ§öË°®Êü•ËØ¢ÊâÄÂÆö‰πâÔºåÈÇ£‰πàÔºåÈÇ£‰πàÂ∞±Êó†Ê≥ïÊõ¥ÊîπÊï∞ÊçÆ 9.drop„ÄÅtruncate„ÄÅ deleteÂå∫Âà´ ÊúÄÂü∫Êú¨Ôºö dropÁõ¥Êé•Âà†ÊéâË°®„ÄÇ truncateÂà†Èô§Ë°®‰∏≠Êï∞ÊçÆÔºåÂÜçÊèíÂÖ•Êó∂Ëá™Â¢ûÈïøidÂèà‰ªé1ÂºÄÂßã„ÄÇ deleteÂà†Èô§Ë°®‰∏≠Êï∞ÊçÆÔºåÂèØ‰ª•Âä†whereÂ≠óÂè•„ÄÇ Ôºà1Ôºâ DELETEËØ≠Âè•ÊâßË°åÂà†Èô§ÁöÑËøáÁ®ãÊòØÊØèÊ¨°‰ªéË°®‰∏≠Âà†Èô§‰∏ÄË°åÔºåÂπ∂‰∏îÂêåÊó∂Â∞ÜËØ•Ë°åÁöÑÂà†Èô§Êìç‰Ωú‰Ωú‰∏∫‰∫ãÂä°ËÆ∞ÂΩïÂú®Êó•Âøó‰∏≠‰øùÂ≠ò‰ª•‰æøËøõË°åËøõË°åÂõûÊªöÊìç‰Ωú„ÄÇTRUNCATE TABLE Âàô‰∏ÄÊ¨°ÊÄßÂú∞‰ªéË°®‰∏≠Âà†Èô§ÊâÄÊúâÁöÑÊï∞ÊçÆÂπ∂‰∏çÊääÂçïÁã¨ÁöÑÂà†Èô§Êìç‰ΩúËÆ∞ÂΩïËÆ∞ÂÖ•Êó•Âøó‰øùÂ≠òÔºåÂà†Èô§Ë°åÊòØ‰∏çËÉΩÊÅ¢Â§çÁöÑ„ÄÇÂπ∂‰∏îÂú®Âà†Èô§ÁöÑËøáÁ®ã‰∏≠‰∏ç‰ºöÊøÄÊ¥ª‰∏éË°®ÊúâÂÖ≥ÁöÑÂà†Èô§Ëß¶ÂèëÂô®„ÄÇÊâßË°åÈÄüÂ∫¶Âø´„ÄÇ Ôºà2Ôºâ Ë°®ÂíåÁ¥¢ÂºïÊâÄÂç†Á©∫Èó¥„ÄÇÂΩìË°®Ë¢´TRUNCATE ÂêéÔºåËøô‰∏™Ë°®ÂíåÁ¥¢ÂºïÊâÄÂç†Áî®ÁöÑÁ©∫Èó¥‰ºöÊÅ¢Â§çÂà∞ÂàùÂßãÂ§ßÂ∞èÔºåËÄåDELETEÊìç‰Ωú‰∏ç‰ºöÂáèÂ∞ëË°®ÊàñÁ¥¢ÂºïÊâÄÂç†Áî®ÁöÑÁ©∫Èó¥„ÄÇdropËØ≠Âè•Â∞ÜË°®ÊâÄÂç†Áî®ÁöÑÁ©∫Èó¥ÂÖ®ÈáäÊîæÊéâ„ÄÇ Ôºà3Ôºâ ‰∏ÄËà¨ËÄåË®ÄÔºådrop &gt; truncate &gt; delete Ôºà4Ôºâ Â∫îÁî®ËåÉÂõ¥„ÄÇTRUNCATE Âè™ËÉΩÂØπTABLEÔºõDELETEÂèØ‰ª•ÊòØtableÂíåview Ôºà5Ôºâ TRUNCATE ÂíåDELETEÂè™Âà†Èô§Êï∞ÊçÆÔºåËÄåDROPÂàôÂà†Èô§Êï¥‰∏™Ë°®ÔºàÁªìÊûÑÂíåÊï∞ÊçÆÔºâ„ÄÇ Ôºà6Ôºâ truncate‰∏é‰∏çÂ∏¶whereÁöÑdelete ÔºöÂè™Âà†Èô§Êï∞ÊçÆÔºåËÄå‰∏çÂà†Èô§Ë°®ÁöÑÁªìÊûÑÔºàÂÆö‰πâÔºâdropËØ≠Âè•Â∞ÜÂà†Èô§Ë°®ÁöÑÁªìÊûÑË¢´‰æùËµñÁöÑÁ∫¶ÊùüÔºàconstrain),Ëß¶ÂèëÂô®Ôºàtrigger)Á¥¢ÂºïÔºàindex);‰æùËµñ‰∫éËØ•Ë°®ÁöÑÂ≠òÂÇ®ËøáÁ®ã/ÂáΩÊï∞Â∞ÜË¢´‰øùÁïôÔºå‰ΩÜÂÖ∂Áä∂ÊÄÅ‰ºöÂèò‰∏∫Ôºöinvalid„ÄÇ Ôºà7Ôºâ deleteËØ≠Âè•‰∏∫DMLÔºàdata maintain Language),Ëøô‰∏™Êìç‰Ωú‰ºöË¢´ÊîæÂà∞ rollback segment‰∏≠,‰∫ãÂä°Êèê‰∫§ÂêéÊâçÁîüÊïà„ÄÇÂ¶ÇÊûúÊúâÁõ∏Â∫îÁöÑ tigger,ÊâßË°åÁöÑÊó∂ÂÄôÂ∞ÜË¢´Ëß¶Âèë„ÄÇ Ôºà8Ôºâ truncate„ÄÅdropÊòØDLLÔºàdata define language),Êìç‰ΩúÁ´ãÂç≥ÁîüÊïàÔºåÂéüÊï∞ÊçÆ‰∏çÊîæÂà∞ rollback segment‰∏≠Ôºå‰∏çËÉΩÂõûÊªö„ÄÇ Ôºà9Ôºâ Âú®Ê≤°ÊúâÂ§á‰ªΩÊÉÖÂÜµ‰∏ãÔºåË∞®ÊÖé‰ΩøÁî® drop ‰∏é truncate„ÄÇË¶ÅÂà†Èô§ÈÉ®ÂàÜÊï∞ÊçÆË°åÈááÁî®delete‰∏îÊ≥®ÊÑèÁªìÂêàwhereÊù•Á∫¶ÊùüÂΩ±ÂìçËåÉÂõ¥„ÄÇÂõûÊªöÊÆµË¶ÅË∂≥Â§üÂ§ß„ÄÇË¶ÅÂà†Èô§Ë°®Áî®drop;Ëã•ÊÉ≥‰øùÁïôË°®ËÄåÂ∞ÜË°®‰∏≠Êï∞ÊçÆÂà†Èô§ÔºåÂ¶ÇÊûú‰∫é‰∫ãÂä°Êó†ÂÖ≥ÔºåÁî®truncateÂç≥ÂèØÂÆûÁé∞„ÄÇÂ¶ÇÊûúÂíå‰∫ãÂä°ÊúâÂÖ≥ÔºåÊàñËÄÅÂ∏àÊÉ≥Ëß¶Âèëtrigger,ËøòÊòØÁî®delete„ÄÇ Ôºà10Ôºâ Truncate table Ë°®Âêç ÈÄüÂ∫¶Âø´,ËÄå‰∏îÊïàÁéáÈ´ò,Âõ†‰∏∫:truncate table Âú®ÂäüËÉΩ‰∏ä‰∏é‰∏çÂ∏¶ WHERE Â≠êÂè•ÁöÑ DELETE ËØ≠Âè•Áõ∏ÂêåÔºö‰∫åËÄÖÂùáÂà†Èô§Ë°®‰∏≠ÁöÑÂÖ®ÈÉ®Ë°å„ÄÇ‰ΩÜ TRUNCATE TABLE ÊØî DELETE ÈÄüÂ∫¶Âø´Ôºå‰∏î‰ΩøÁî®ÁöÑÁ≥ªÁªüÂíå‰∫ãÂä°Êó•ÂøóËµÑÊ∫êÂ∞ë„ÄÇDELETE ËØ≠Âè•ÊØèÊ¨°Âà†Èô§‰∏ÄË°åÔºåÂπ∂Âú®‰∫ãÂä°Êó•Âøó‰∏≠‰∏∫ÊâÄÂà†Èô§ÁöÑÊØèË°åËÆ∞ÂΩï‰∏ÄÈ°π„ÄÇTRUNCATE TABLE ÈÄöËøáÈáäÊîæÂ≠òÂÇ®Ë°®Êï∞ÊçÆÊâÄÁî®ÁöÑÊï∞ÊçÆÈ°µÊù•Âà†Èô§Êï∞ÊçÆÔºåÂπ∂‰∏îÂè™Âú®‰∫ãÂä°Êó•Âøó‰∏≠ËÆ∞ÂΩïÈ°µÁöÑÈáäÊîæ„ÄÇ Ôºà11Ôºâ TRUNCATE TABLE Âà†Èô§Ë°®‰∏≠ÁöÑÊâÄÊúâË°åÔºå‰ΩÜË°®ÁªìÊûÑÂèäÂÖ∂Âàó„ÄÅÁ∫¶Êùü„ÄÅÁ¥¢ÂºïÁ≠â‰øùÊåÅ‰∏çÂèò„ÄÇÊñ∞Ë°åÊ†áËØÜÊâÄÁî®ÁöÑËÆ°Êï∞ÂÄºÈáçÁΩÆ‰∏∫ËØ•ÂàóÁöÑÁßçÂ≠ê„ÄÇÂ¶ÇÊûúÊÉ≥‰øùÁïôÊ†áËØÜËÆ°Êï∞ÂÄºÔºåËØ∑ÊîπÁî® DELETE„ÄÇÂ¶ÇÊûúË¶ÅÂà†Èô§Ë°®ÂÆö‰πâÂèäÂÖ∂Êï∞ÊçÆÔºåËØ∑‰ΩøÁî® DROP TABLE ËØ≠Âè•„ÄÇ Ôºà12Ôºâ ÂØπ‰∫éÁî± FOREIGN KEY Á∫¶ÊùüÂºïÁî®ÁöÑË°®Ôºå‰∏çËÉΩ‰ΩøÁî® TRUNCATE TABLEÔºåËÄåÂ∫î‰ΩøÁî®‰∏çÂ∏¶ WHERE Â≠êÂè•ÁöÑ DELETE ËØ≠Âè•„ÄÇÁî±‰∫é TRUNCATE TABLE ‰∏çËÆ∞ÂΩïÂú®Êó•Âøó‰∏≠ÔºåÊâÄ‰ª•ÂÆÉ‰∏çËÉΩÊøÄÊ¥ªËß¶ÂèëÂô®„ÄÇ 10.‰ªÄ‰πàÊòØ‰∏¥Êó∂Ë°®Ôºå‰∏¥Êó∂Ë°®‰ªÄ‰πàÊó∂ÂÄôÂà†Èô§? ‰∏¥Êó∂Ë°®ÂèØ‰ª•ÊâãÂä®Âà†Èô§ÔºöDROP TEMPORARY TABLE IF EXISTS temp_tb; ‰∏¥Êó∂Ë°®Âè™Âú®ÂΩìÂâçËøûÊé•ÂèØËßÅÔºåÂΩìÂÖ≥Èó≠ËøûÊé•Êó∂ÔºåMySQL‰ºöËá™Âä®Âà†Èô§Ë°®Âπ∂ÈáäÊîæÊâÄÊúâÁ©∫Èó¥„ÄÇÂõ†Ê≠§Âú®‰∏çÂêåÁöÑËøûÊé•‰∏≠ÂèØ‰ª•ÂàõÂª∫ÂêåÂêçÁöÑ‰∏¥Êó∂Ë°®ÔºåÂπ∂‰∏îÊìç‰ΩúÂ±û‰∫éÊú¨ËøûÊé•ÁöÑ‰∏¥Êó∂Ë°®„ÄÇÂàõÂª∫‰∏¥Êó∂Ë°®ÁöÑËØ≠Ê≥ï‰∏éÂàõÂª∫Ë°®ËØ≠Ê≥ïÁ±ª‰ººÔºå‰∏çÂêå‰πãÂ§ÑÊòØÂ¢ûÂä†ÂÖ≥ÈîÆÂ≠óTEMPORARYÔºå Â¶ÇÔºö CREATE TEMPORARY TABLE tmp_table ( NAME VARCHAR (10) NOT NULL, time date NOT NULL); select * from tmp_table; 11.ÈùûÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÂíåÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÂå∫Âà´Ôºå‰ºòÂäøÊØîËæÉ? ÈùûÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÁöÑ‰ºòÂäøÔºö ÊÄßËÉΩÔºöNOSQLÊòØÂü∫‰∫éÈîÆÂÄºÂØπÁöÑÔºåÂèØ‰ª•ÊÉ≥Ë±°ÊàêË°®‰∏≠ÁöÑ‰∏ªÈîÆÂíåÂÄºÁöÑÂØπÂ∫îÂÖ≥Á≥ªÔºåËÄå‰∏î‰∏çÈúÄË¶ÅÁªèËøáSQLÂ±ÇÁöÑËß£ÊûêÔºåÊâÄ‰ª•ÊÄßËÉΩÈùûÂ∏∏È´ò„ÄÇ ÂèØÊâ©Â±ïÊÄßÔºöÂêåÊ†∑‰πüÊòØÂõ†‰∏∫Âü∫‰∫éÈîÆÂÄºÂØπÔºåÊï∞ÊçÆ‰πãÈó¥Ê≤°ÊúâËÄ¶ÂêàÊÄßÔºåÊâÄ‰ª•ÈùûÂ∏∏ÂÆπÊòìÊ∞¥Âπ≥Êâ©Â±ï„ÄÇ ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÁöÑ‰ºòÂäøÔºö Â§çÊùÇÊü•ËØ¢ÔºöÂèØ‰ª•Áî®SQLËØ≠Âè•Êñπ‰æøÁöÑÂú®‰∏Ä‰∏™Ë°®‰ª•ÂèäÂ§ö‰∏™Ë°®‰πãÈó¥ÂÅöÈùûÂ∏∏Â§çÊùÇÁöÑÊï∞ÊçÆÊü•ËØ¢„ÄÇ ‰∫ãÂä°ÊîØÊåÅÔºö‰ΩøÂæóÂØπ‰∫éÂÆâÂÖ®ÊÄßËÉΩÂæàÈ´òÁöÑÊï∞ÊçÆËÆøÈóÆË¶ÅÊ±ÇÂæó‰ª•ÂÆûÁé∞„ÄÇ ÂÖ∂‰ªñÔºö 1.ÂØπ‰∫éËøô‰∏§Á±ªÊï∞ÊçÆÂ∫ìÔºåÂØπÊñπÁöÑ‰ºòÂäøÂ∞±ÊòØËá™Â∑±ÁöÑÂº±ÂäøÔºåÂèç‰πã‰∫¶ÁÑ∂„ÄÇ 2.NOSQLÊï∞ÊçÆÂ∫ìÊÖ¢ÊÖ¢ÂºÄÂßãÂÖ∑Â§áSQLÊï∞ÊçÆÂ∫ìÁöÑ‰∏Ä‰∫õÂ§çÊùÇÊü•ËØ¢ÂäüËÉΩÔºåÊØîÂ¶ÇMongoDB„ÄÇ 3.ÂØπ‰∫é‰∫ãÂä°ÁöÑÊîØÊåÅ‰πüÂèØ‰ª•Áî®‰∏Ä‰∫õÁ≥ªÁªüÁ∫ßÁöÑÂéüÂ≠êÊìç‰ΩúÊù•ÂÆûÁé∞‰æãÂ¶Ç‰πêËßÇÈîÅ‰πãÁ±ªÁöÑÊñπÊ≥ïÊù•Êõ≤Á∫øÊïëÂõΩÔºåÊØîÂ¶ÇRedis set nx„ÄÇ 12.Êï∞ÊçÆÂ∫ìËåÉÂºèÔºåÊ†πÊçÆÊüê‰∏™Âú∫ÊôØËÆæËÆ°Êï∞ÊçÆË°®? Á¨¨‰∏ÄËåÉÂºè:(Á°Æ‰øùÊØèÂàó‰øùÊåÅÂéüÂ≠êÊÄß)ÊâÄÊúâÂ≠óÊÆµÂÄºÈÉΩÊòØ‰∏çÂèØÂàÜËß£ÁöÑÂéüÂ≠êÂÄº„ÄÇ Á¨¨‰∏ÄËåÉÂºèÊòØÊúÄÂü∫Êú¨ÁöÑËåÉÂºè„ÄÇÂ¶ÇÊûúÊï∞ÊçÆÂ∫ìË°®‰∏≠ÁöÑÊâÄÊúâÂ≠óÊÆµÂÄºÈÉΩÊòØ‰∏çÂèØÂàÜËß£ÁöÑÂéüÂ≠êÂÄºÔºåÂ∞±ËØ¥ÊòéËØ•Êï∞ÊçÆÂ∫ìË°®Êª°Ë∂≥‰∫ÜÁ¨¨‰∏ÄËåÉÂºè„ÄÇÁ¨¨‰∏ÄËåÉÂºèÁöÑÂêàÁêÜÈÅµÂæ™ÈúÄË¶ÅÊ†πÊçÆÁ≥ªÁªüÁöÑÂÆûÈôÖÈúÄÊ±ÇÊù•ÂÆö„ÄÇÊØîÂ¶ÇÊüê‰∫õÊï∞ÊçÆÂ∫ìÁ≥ªÁªü‰∏≠ÈúÄË¶ÅÁî®Âà∞‚ÄúÂú∞ÂùÄ‚ÄùËøô‰∏™Â±ûÊÄßÔºåÊú¨Êù•Áõ¥Êé•Â∞Ü‚ÄúÂú∞ÂùÄ‚ÄùÂ±ûÊÄßËÆæËÆ°Êàê‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìË°®ÁöÑÂ≠óÊÆµÂ∞±Ë°å„ÄÇ‰ΩÜÊòØÂ¶ÇÊûúÁ≥ªÁªüÁªèÂ∏∏‰ºöËÆøÈóÆ‚ÄúÂú∞ÂùÄ‚ÄùÂ±ûÊÄß‰∏≠ÁöÑ‚ÄúÂüéÂ∏Ç‚ÄùÈÉ®ÂàÜÔºåÈÇ£‰πàÂ∞±ÈùûË¶ÅÂ∞Ü‚ÄúÂú∞ÂùÄ‚ÄùËøô‰∏™Â±ûÊÄßÈáçÊñ∞ÊãÜÂàÜ‰∏∫ÁúÅ‰ªΩ„ÄÅÂüéÂ∏Ç„ÄÅËØ¶ÁªÜÂú∞ÂùÄÁ≠âÂ§ö‰∏™ÈÉ®ÂàÜËøõË°åÂ≠òÂÇ®ÔºåËøôÊ†∑Âú®ÂØπÂú∞ÂùÄ‰∏≠Êüê‰∏ÄÈÉ®ÂàÜÊìç‰ΩúÁöÑÊó∂ÂÄôÂ∞ÜÈùûÂ∏∏Êñπ‰æø„ÄÇËøôÊ†∑ËÆæËÆ°ÊâçÁÆóÊª°Ë∂≥‰∫ÜÊï∞ÊçÆÂ∫ìÁöÑÁ¨¨‰∏ÄËåÉÂºèÔºåÂ¶Ç‰∏ãË°®ÊâÄÁ§∫„ÄÇ‰∏äË°®ÊâÄÁ§∫ÁöÑÁî®Êà∑‰ø°ÊÅØÈÅµÂæ™‰∫ÜÁ¨¨‰∏ÄËåÉÂºèÁöÑË¶ÅÊ±ÇÔºåËøôÊ†∑Âú®ÂØπÁî®Êà∑‰ΩøÁî®ÂüéÂ∏ÇËøõË°åÂàÜÁ±ªÁöÑÊó∂ÂÄôÂ∞±ÈùûÂ∏∏Êñπ‰æøÔºå‰πüÊèêÈ´ò‰∫ÜÊï∞ÊçÆÂ∫ìÁöÑÊÄßËÉΩ„ÄÇ Á¨¨‰∫åËåÉÂºè:(Á°Æ‰øùË°®‰∏≠ÁöÑÊØèÂàóÈÉΩÂíå‰∏ªÈîÆÁõ∏ÂÖ≥)Âú®‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìË°®‰∏≠Ôºå‰∏Ä‰∏™Ë°®‰∏≠Âè™ËÉΩ‰øùÂ≠ò‰∏ÄÁßçÊï∞ÊçÆÔºå‰∏çÂèØ‰ª•ÊääÂ§öÁßçÊï∞ÊçÆ‰øùÂ≠òÂú®Âêå‰∏ÄÂº†Êï∞ÊçÆÂ∫ìË°®‰∏≠„ÄÇ Á¨¨‰∫åËåÉÂºèÂú®Á¨¨‰∏ÄËåÉÂºèÁöÑÂü∫Á°Ä‰πã‰∏äÊõ¥Ëøõ‰∏ÄÂ±Ç„ÄÇÁ¨¨‰∫åËåÉÂºèÈúÄË¶ÅÁ°Æ‰øùÊï∞ÊçÆÂ∫ìË°®‰∏≠ÁöÑÊØè‰∏ÄÂàóÈÉΩÂíå‰∏ªÈîÆÁõ∏ÂÖ≥ÔºåËÄå‰∏çËÉΩÂè™‰∏é‰∏ªÈîÆÁöÑÊüê‰∏ÄÈÉ®ÂàÜÁõ∏ÂÖ≥Ôºà‰∏ªË¶ÅÈíàÂØπËÅîÂêà‰∏ªÈîÆËÄåË®ÄÔºâ„ÄÇ‰πüÂ∞±ÊòØËØ¥Âú®‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìË°®‰∏≠Ôºå‰∏Ä‰∏™Ë°®‰∏≠Âè™ËÉΩ‰øùÂ≠ò‰∏ÄÁßçÊï∞ÊçÆÔºå‰∏çÂèØ‰ª•ÊääÂ§öÁßçÊï∞ÊçÆ‰øùÂ≠òÂú®Âêå‰∏ÄÂº†Êï∞ÊçÆÂ∫ìË°®‰∏≠„ÄÇÊØîÂ¶ÇË¶ÅËÆæËÆ°‰∏Ä‰∏™ËÆ¢Âçï‰ø°ÊÅØË°®ÔºåÂõ†‰∏∫ËÆ¢Âçï‰∏≠ÂèØËÉΩ‰ºöÊúâÂ§öÁßçÂïÜÂìÅÔºåÊâÄ‰ª•Ë¶ÅÂ∞ÜËÆ¢ÂçïÁºñÂè∑ÂíåÂïÜÂìÅÁºñÂè∑‰Ωú‰∏∫Êï∞ÊçÆÂ∫ìË°®ÁöÑËÅîÂêà‰∏ªÈîÆ„ÄÇ Á¨¨‰∏âËåÉÂºè:(Á°Æ‰øùÊØèÂàóÈÉΩÂíå‰∏ªÈîÆÂàóÁõ¥Êé•Áõ∏ÂÖ≥,ËÄå‰∏çÊòØÈó¥Êé•Áõ∏ÂÖ≥) Êï∞ÊçÆË°®‰∏≠ÁöÑÊØè‰∏ÄÂàóÊï∞ÊçÆÈÉΩÂíå‰∏ªÈîÆÁõ¥Êé•Áõ∏ÂÖ≥ÔºåËÄå‰∏çËÉΩÈó¥Êé•Áõ∏ÂÖ≥„ÄÇ Á¨¨‰∏âËåÉÂºèÈúÄË¶ÅÁ°Æ‰øùÊï∞ÊçÆË°®‰∏≠ÁöÑÊØè‰∏ÄÂàóÊï∞ÊçÆÈÉΩÂíå‰∏ªÈîÆÁõ¥Êé•Áõ∏ÂÖ≥ÔºåËÄå‰∏çËÉΩÈó¥Êé•Áõ∏ÂÖ≥„ÄÇÊØîÂ¶ÇÂú®ËÆæËÆ°‰∏Ä‰∏™ËÆ¢ÂçïÊï∞ÊçÆË°®ÁöÑÊó∂ÂÄôÔºåÂèØ‰ª•Â∞ÜÂÆ¢Êà∑ÁºñÂè∑‰Ωú‰∏∫‰∏Ä‰∏™Â§ñÈîÆÂíåËÆ¢ÂçïË°®Âª∫Á´ãÁõ∏Â∫îÁöÑÂÖ≥Á≥ª„ÄÇËÄå‰∏çÂèØ‰ª•Âú®ËÆ¢ÂçïË°®‰∏≠Ê∑ªÂä†ÂÖ≥‰∫éÂÆ¢Êà∑ÂÖ∂ÂÆÉ‰ø°ÊÅØÔºàÊØîÂ¶ÇÂßìÂêç„ÄÅÊâÄÂ±ûÂÖ¨Âè∏Á≠âÔºâÁöÑÂ≠óÊÆµ„ÄÇ BCNF:Á¨¶Âêà3NFÔºåÂπ∂‰∏îÔºå‰∏ªÂ±ûÊÄß‰∏ç‰æùËµñ‰∫é‰∏ªÂ±ûÊÄß„ÄÇ Ëã•ÂÖ≥Á≥ªÊ®°ÂºèÂ±û‰∫éÁ¨¨‰∫åËåÉÂºèÔºå‰∏îÊØè‰∏™Â±ûÊÄßÈÉΩ‰∏ç‰º†ÈÄí‰æùËµñ‰∫éÈîÆÁ†ÅÔºåÂàôRÂ±û‰∫éBCËåÉÂºè„ÄÇÈÄöÂ∏∏BCËåÉÂºèÁöÑÊù°‰ª∂ÊúâÂ§öÁßçÁ≠â‰ª∑ÁöÑË°®Ëø∞ÔºöÊØè‰∏™ÈùûÂπ≥Âá°‰æùËµñÁöÑÂ∑¶ËæπÂøÖÈ°ªÂåÖÂê´ÈîÆÁ†ÅÔºõÊØè‰∏™ÂÜ≥ÂÆöÂõ†Á¥†ÂøÖÈ°ªÂåÖÂê´ÈîÆÁ†Å„ÄÇBCËåÉÂºèÊó¢Ê£ÄÊü•Èùû‰∏ªÂ±ûÊÄßÔºåÂèàÊ£ÄÊü•‰∏ªÂ±ûÊÄß„ÄÇÂΩìÂè™Ê£ÄÊü•Èùû‰∏ªÂ±ûÊÄßÊó∂ÔºåÂ∞±Êàê‰∫ÜÁ¨¨‰∏âËåÉÂºè„ÄÇÊª°Ë∂≥BCËåÉÂºèÁöÑÂÖ≥Á≥ªÈÉΩÂøÖÁÑ∂Êª°Ë∂≥Á¨¨‰∏âËåÉÂºè„ÄÇËøòÂèØ‰ª•Ëøô‰πàËØ¥ÔºöËã•‰∏Ä‰∏™ÂÖ≥Á≥ªËææÂà∞‰∫ÜÁ¨¨‰∏âËåÉÂºèÔºåÂπ∂‰∏îÂÆÉÂè™Êúâ‰∏Ä‰∏™ÂÄôÈÄâÁ†ÅÔºåÊàñËÄÖÂÆÉÁöÑÊØè‰∏™ÂÄôÈÄâÁ†ÅÈÉΩÊòØÂçïÂ±ûÊÄßÔºåÂàôËØ•ÂÖ≥Á≥ªËá™ÁÑ∂ËææÂà∞BCËåÉÂºè„ÄÇ‰∏ÄËà¨Ôºå‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìËÆæËÆ°Á¨¶Âêà3NFÊàñBCNFÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ Á¨¨ÂõõËåÉÂºè:Ë¶ÅÊ±ÇÊääÂêå‰∏ÄË°®ÂÜÖÁöÑÂ§öÂØπÂ§öÂÖ≥Á≥ªÂà†Èô§„ÄÇ Á¨¨‰∫îËåÉÂºè:‰ªéÊúÄÁªàÁªìÊûÑÈáçÊñ∞Âª∫Á´ãÂéüÂßãÁªìÊûÑ„ÄÇ 13.‰ªÄ‰πàÊòØ ÂÜÖËøûÊé•„ÄÅÂ§ñËøûÊé•„ÄÅ‰∫§ÂèâËøûÊé•„ÄÅÁ¨õÂç°Â∞îÁßØÁ≠â? ÂÜÖËøûÊé•: Âè™ËøûÊé•ÂåπÈÖçÁöÑË°å Â∑¶Â§ñËøûÊé•: ÂåÖÂê´Â∑¶ËæπË°®ÁöÑÂÖ®ÈÉ®Ë°åÔºà‰∏çÁÆ°Âè≥ËæπÁöÑË°®‰∏≠ÊòØÂê¶Â≠òÂú®‰∏éÂÆÉ‰ª¨ÂåπÈÖçÁöÑË°åÔºâÔºå‰ª•ÂèäÂè≥ËæπË°®‰∏≠ÂÖ®ÈÉ®ÂåπÈÖçÁöÑË°å Âè≥Â§ñËøûÊé•: ÂåÖÂê´Âè≥ËæπË°®ÁöÑÂÖ®ÈÉ®Ë°åÔºà‰∏çÁÆ°Â∑¶ËæπÁöÑË°®‰∏≠ÊòØÂê¶Â≠òÂú®‰∏éÂÆÉ‰ª¨ÂåπÈÖçÁöÑË°åÔºâÔºå‰ª•ÂèäÂ∑¶ËæπË°®‰∏≠ÂÖ®ÈÉ®ÂåπÈÖçÁöÑË°å ‰æãÂ¶Ç1ÔºöSELECT a.,b. FROM luntan LEFT JOIN usertable as b ON a.username=b.username ‰æãÂ¶Ç2ÔºöSELECT a.,b. FROM city as a FULL OUTER JOIN user as b ON a.username=b.username ÂÖ®Â§ñËøûÊé•: ÂåÖÂê´Â∑¶„ÄÅÂè≥‰∏§‰∏™Ë°®ÁöÑÂÖ®ÈÉ®Ë°åÔºå‰∏çÁÆ°Âè¶Â§ñ‰∏ÄËæπÁöÑË°®‰∏≠ÊòØÂê¶Â≠òÂú®‰∏éÂÆÉ‰ª¨ÂåπÈÖçÁöÑË°å„ÄÇ ‰∫§ÂèâËøûÊé•: ÁîüÊàêÁ¨õÂç°Â∞îÁßØÔºçÂÆÉ‰∏ç‰ΩøÁî®‰ªª‰ΩïÂåπÈÖçÊàñËÄÖÈÄâÂèñÊù°‰ª∂ÔºåËÄåÊòØÁõ¥Êé•Â∞Ü‰∏Ä‰∏™Êï∞ÊçÆÊ∫ê‰∏≠ÁöÑÊØè‰∏™Ë°å‰∏éÂè¶‰∏Ä‰∏™Êï∞ÊçÆÊ∫êÁöÑÊØè‰∏™Ë°åÈÉΩ‰∏Ä‰∏ÄÂåπÈÖç ‰æãÂ¶ÇÔºöSELECT type,pub_name FROM titles CROSS JOIN publishers ORDER BY type Ê≥®ÊÑèÔºö ÂæàÂ§öÂÖ¨Âè∏ÈÉΩÂè™ÊòØËÄÉÂØüÊòØÂê¶Áü•ÈÅìÂÖ∂Ê¶ÇÂøµÔºå‰ΩÜÊòØ‰πüÊúâÂæàÂ§öÂÖ¨Âè∏ÈúÄË¶Å‰∏ç‰ªÖ‰ªÖÁü•ÈÅìÊ¶ÇÂøµÔºåËøòÈúÄË¶ÅÂä®ÊâãÂÜôsql,‰∏ÄËà¨ÈÉΩÊòØÁÆÄÂçïÁöÑËøûÊé•Êü•ËØ¢ÔºåÂÖ∑‰ΩìÂÖ≥‰∫éËøûÊé•Êü•ËØ¢ÁöÑsqlÁªÉ‰π†ÔºåÂèÇËßÅ‰ª•‰∏ãÈìæÊé•Ôºö ÁâõÂÆ¢ÁΩëÊï∞ÊçÆÂ∫ìSQLÂÆûÊàò leetcode‰∏≠ÊñáÁΩëÁ´ôÊï∞ÊçÆÂ∫ìÁªÉ‰π† 14.varcharÂíåcharÁöÑ‰ΩøÁî®Âú∫ÊôØ? 1.charÁöÑÈïøÂ∫¶ÊòØ‰∏çÂèØÂèòÁöÑÔºåËÄåvarcharÁöÑÈïøÂ∫¶ÊòØÂèØÂèòÁöÑ„ÄÇ ÂÆö‰πâ‰∏Ä‰∏™char[10]Âíåvarchar[10]„ÄÇÂ¶ÇÊûúÂ≠òËøõÂéªÁöÑÊòØ‚Äòcsdn‚Äô,ÈÇ£‰πàcharÊâÄÂç†ÁöÑÈïøÂ∫¶‰æùÁÑ∂‰∏∫10ÔºåÈô§‰∫ÜÂ≠óÁ¨¶‚Äòcsdn‚ÄôÂ§ñÔºåÂêéÈù¢Ë∑üÂÖ≠‰∏™Á©∫Ê†ºÔºåvarcharÂ∞±Á´ãÈ©¨ÊääÈïøÂ∫¶Âèò‰∏∫4‰∫ÜÔºåÂèñÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåcharÁ±ªÂûãÁöÑË¶ÅÁî®trim()ÂéªÊéâÂ§ö‰ΩôÁöÑÁ©∫Ê†ºÔºåËÄåvarcharÊòØ‰∏çÈúÄË¶ÅÁöÑ„ÄÇ 2.charÁöÑÂ≠òÂèñÊï∞Â∫¶ËøòÊòØË¶ÅÊØîvarcharË¶ÅÂø´ÂæóÂ§öÔºåÂõ†‰∏∫ÂÖ∂ÈïøÂ∫¶Âõ∫ÂÆöÔºåÊñπ‰æøÁ®ãÂ∫èÁöÑÂ≠òÂÇ®‰∏éÊü•Êâæ„ÄÇchar‰πü‰∏∫Ê≠§‰ªòÂá∫ÁöÑÊòØÁ©∫Èó¥ÁöÑ‰ª£‰ª∑ÔºåÂõ†‰∏∫ÂÖ∂ÈïøÂ∫¶Âõ∫ÂÆöÔºåÊâÄ‰ª•ÈöæÂÖç‰ºöÊúâÂ§ö‰ΩôÁöÑÁ©∫Ê†ºÂç†‰ΩçÁ¨¶Âç†ÊçÆÁ©∫Èó¥ÔºåÂèØË∞ìÊòØ‰ª•Á©∫Èó¥Êç¢ÂèñÊó∂Èó¥ÊïàÁéá„ÄÇvarcharÊòØ‰ª•Á©∫Èó¥ÊïàÁéá‰∏∫È¶ñ‰Ωç„ÄÇ 3.charÁöÑÂ≠òÂÇ®ÊñπÂºèÊòØÔºöÂØπËã±ÊñáÂ≠óÁ¨¶ÔºàASCIIÔºâÂç†Áî®1‰∏™Â≠óËäÇÔºåÂØπ‰∏Ä‰∏™Ê±âÂ≠óÂç†Áî®‰∏§‰∏™Â≠óËäÇ„ÄÇvarcharÁöÑÂ≠òÂÇ®ÊñπÂºèÊòØÔºöÂØπÊØè‰∏™Ëã±ÊñáÂ≠óÁ¨¶Âç†Áî®2‰∏™Â≠óËäÇÔºåÊ±âÂ≠ó‰πüÂç†Áî®2‰∏™Â≠óËäÇ„ÄÇ 4.‰∏§ËÄÖÁöÑÂ≠òÂÇ®Êï∞ÊçÆÈÉΩÈùûunicodeÁöÑÂ≠óÁ¨¶Êï∞ÊçÆ„ÄÇ 15.SQLËØ≠Ë®ÄÂàÜÁ±ª SQLËØ≠Ë®ÄÂÖ±ÂàÜ‰∏∫ÂõõÂ§ßÁ±ªÔºö Êï∞ÊçÆÊü•ËØ¢ËØ≠Ë®ÄDQL Êï∞ÊçÆÊìçÁ∫µËØ≠Ë®ÄDML Êï∞ÊçÆÂÆö‰πâËØ≠Ë®ÄDDL Êï∞ÊçÆÊéßÂà∂ËØ≠Ë®ÄDCL„ÄÇ 1. Êï∞ÊçÆÊü•ËØ¢ËØ≠Ë®ÄDQL Êï∞ÊçÆÊü•ËØ¢ËØ≠Ë®ÄDQLÂü∫Êú¨ÁªìÊûÑÊòØÁî±SELECTÂ≠êÂè•ÔºåFROMÂ≠êÂè•ÔºåWHEREÂ≠êÂè•ÁªÑÊàêÁöÑÊü•ËØ¢ÂùóÔºö SELECTFROMWHERE 2 .Êï∞ÊçÆÊìçÁ∫µËØ≠Ë®ÄDML Êï∞ÊçÆÊìçÁ∫µËØ≠Ë®ÄDML‰∏ªË¶ÅÊúâ‰∏âÁßçÂΩ¢ÂºèÔºö 1) ÊèíÂÖ•ÔºöINSERT 2) Êõ¥Êñ∞ÔºöUPDATE 3) Âà†Èô§ÔºöDELETE 3. Êï∞ÊçÆÂÆö‰πâËØ≠Ë®ÄDDL Êï∞ÊçÆÂÆö‰πâËØ≠Ë®ÄDDLÁî®Êù•ÂàõÂª∫Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÂêÑÁßçÂØπË±°‚Äî‚ÄìË°®„ÄÅËßÜÂõæ„ÄÅÁ¥¢Âºï„ÄÅÂêå‰πâËØç„ÄÅËÅöÁ∞áÁ≠âÂ¶ÇÔºöCREATE TABLE/VIEW/INDEX/SYN/CLUSTER Ë°® ËßÜÂõæ Á¥¢Âºï Âêå‰πâËØç Á∞á DDLÊìç‰ΩúÊòØÈöêÊÄßÊèê‰∫§ÁöÑÔºÅ‰∏çËÉΩrollback 4. Êï∞ÊçÆÊéßÂà∂ËØ≠Ë®ÄDCL Êï∞ÊçÆÊéßÂà∂ËØ≠Ë®ÄDCLÁî®Êù•Êéà‰∫àÊàñÂõûÊî∂ËÆøÈóÆÊï∞ÊçÆÂ∫ìÁöÑÊüêÁßçÁâπÊùÉÔºåÂπ∂ÊéßÂà∂Êï∞ÊçÆÂ∫ìÊìçÁ∫µ‰∫ãÂä°ÂèëÁîüÁöÑÊó∂Èó¥ÂèäÊïàÊûúÔºåÂØπÊï∞ÊçÆÂ∫ìÂÆûË°åÁõëËßÜÁ≠â„ÄÇÂ¶ÇÔºö 1) GRANTÔºöÊéàÊùÉ„ÄÇ 2) ROLLBACK [WORK] TO [SAVEPOINT]ÔºöÂõûÈÄÄÂà∞Êüê‰∏ÄÁÇπ„ÄÇÂõûÊªö‚ÄîROLLBACKÔºõÂõûÊªöÂëΩ‰ª§‰ΩøÊï∞ÊçÆÂ∫ìÁä∂ÊÄÅÂõûÂà∞‰∏äÊ¨°ÊúÄÂêéÊèê‰∫§ÁöÑÁä∂ÊÄÅ„ÄÇÂÖ∂Ê†ºÂºè‰∏∫ÔºöSQL&gt;ROLLBACK; 3) COMMIT [WORK]ÔºöÊèê‰∫§„ÄÇ Âú®Êï∞ÊçÆÂ∫ìÁöÑÊèíÂÖ•„ÄÅÂà†Èô§Âíå‰øÆÊîπÊìç‰ΩúÊó∂ÔºåÂè™ÊúâÂΩì‰∫ãÂä°Âú®Êèê‰∫§Âà∞Êï∞ÊçÆÂ∫ìÊó∂ÊâçÁÆóÂÆåÊàê„ÄÇÂú®‰∫ãÂä°Êèê‰∫§ÂâçÔºåÂè™ÊúâÊìç‰ΩúÊï∞ÊçÆÂ∫ìÁöÑËøô‰∏™‰∫∫ÊâçËÉΩÊúâÊùÉÁúãÂà∞ÊâÄÂÅöÁöÑ‰∫ãÊÉÖÔºåÂà´‰∫∫Âè™ÊúâÂú®ÊúÄÂêéÊèê‰∫§ÂÆåÊàêÂêéÊâçÂèØ‰ª•ÁúãÂà∞„ÄÇÊèê‰∫§Êï∞ÊçÆÊúâ‰∏âÁßçÁ±ªÂûãÔºöÊòæÂºèÊèê‰∫§„ÄÅÈöêÂºèÊèê‰∫§ÂèäËá™Âä®Êèê‰∫§„ÄÇ‰∏ãÈù¢ÂàÜÂà´ËØ¥ÊòéËøô‰∏âÁßçÁ±ªÂûã„ÄÇ (1) ÊòæÂºèÊèê‰∫§Áî®COMMITÂëΩ‰ª§Áõ¥Êé•ÂÆåÊàêÁöÑÊèê‰∫§‰∏∫ÊòæÂºèÊèê‰∫§„ÄÇÂÖ∂Ê†ºÂºè‰∏∫ÔºöSQL&gt;COMMITÔºõ (2) ÈöêÂºèÊèê‰∫§Áî®SQLÂëΩ‰ª§Èó¥Êé•ÂÆåÊàêÁöÑÊèê‰∫§‰∏∫ÈöêÂºèÊèê‰∫§„ÄÇËøô‰∫õÂëΩ‰ª§ÊòØÔºöALTERÔºåAUDITÔºåCOMMENTÔºåCONNECTÔºåCREATEÔºåDISCONNECTÔºåDROPÔºåEXITÔºåGRANTÔºåNOAUDITÔºåQUITÔºåREVOKEÔºåRENAME„ÄÇ (3) Ëá™Âä®Êèê‰∫§Ëã•ÊääAUTOCOMMITËÆæÁΩÆ‰∏∫ONÔºåÂàôÂú®ÊèíÂÖ•„ÄÅ‰øÆÊîπ„ÄÅÂà†Èô§ËØ≠Âè•ÊâßË°åÂêéÔºåÁ≥ªÁªüÂ∞ÜËá™Âä®ËøõË°åÊèê‰∫§ÔºåËøôÂ∞±ÊòØËá™Âä®Êèê‰∫§„ÄÇÂÖ∂Ê†ºÂºè‰∏∫ÔºöSQL&gt;SET AUTOCOMMIT ONÔºõ ÂèÇËÄÉÊñáÁ´†Ôºöhttps://www.cnblogs.com/study-s/p/5287529.html 16.like %Âíå-ÁöÑÂå∫Âà´ ÈÄöÈÖçÁ¨¶ÁöÑÂàÜÁ±ª: %ÁôæÂàÜÂè∑ÈÄöÈÖçÁ¨¶:Ë°®Á§∫‰ªª‰ΩïÂ≠óÁ¨¶Âá∫Áé∞‰ªªÊÑèÊ¨°Êï∞(ÂèØ‰ª•ÊòØ0Ê¨°). _‰∏ãÂàíÁ∫øÈÄöÈÖçÁ¨¶:Ë°®Á§∫Âè™ËÉΩÂåπÈÖçÂçï‰∏™Â≠óÁ¨¶,‰∏çËÉΩÂ§ö‰πü‰∏çËÉΩÂ∞ë,Â∞±ÊòØ‰∏Ä‰∏™Â≠óÁ¨¶. likeÊìç‰ΩúÁ¨¶: LIKE‰ΩúÁî®ÊòØÊåáÁ§∫mysqlÂêéÈù¢ÁöÑÊêúÁ¥¢Ê®°ÂºèÊòØÂà©Áî®ÈÄöÈÖçÁ¨¶ËÄå‰∏çÊòØÁõ¥Êé•Áõ∏Á≠âÂåπÈÖçËøõË°åÊØîËæÉ. Ê≥®ÊÑè: Â¶ÇÊûúÂú®‰ΩøÁî®likeÊìç‰ΩúÁ¨¶Êó∂,ÂêéÈù¢ÁöÑÊ≤°Êúâ‰ΩøÁî®ÈÄöÁî®ÂåπÈÖçÁ¨¶ÊïàÊûúÊòØÂíå=‰∏ÄËá¥ÁöÑ,SELECT * FROM products WHERE products.prod_name like ‚Äò1000‚Äô;Âè™ËÉΩÂåπÈÖçÁöÑÁªìÊûú‰∏∫1000,ËÄå‰∏çËÉΩÂåπÈÖçÂÉèJetPack 1000ËøôÊ†∑ÁöÑÁªìÊûú. %ÈÄöÈÖçÁ¨¶‰ΩøÁî®: ÂåπÈÖç‰ª•‚Äùyves‚ÄùÂºÄÂ§¥ÁöÑËÆ∞ÂΩï:(ÂåÖÊã¨ËÆ∞ÂΩï‚Äùyves‚Äù) SELECT FROM products WHERE products.prod_name like ‚Äòyves%‚Äô;ÂåπÈÖçÂåÖÂê´‚Äùyves‚ÄùÁöÑËÆ∞ÂΩï(ÂåÖÊã¨ËÆ∞ÂΩï‚Äùyves‚Äù) SELECT FROM products WHERE products.prod_name like ‚Äò%yves%‚Äô;ÂåπÈÖç‰ª•‚Äùyves‚ÄùÁªìÂ∞æÁöÑËÆ∞ÂΩï(ÂåÖÊã¨ËÆ∞ÂΩï‚Äùyves‚Äù,‰∏çÂåÖÊã¨ËÆ∞ÂΩï‚Äùyves ‚Äú,‰πüÂ∞±ÊòØyvesÂêéÈù¢ÊúâÁ©∫Ê†ºÁöÑËÆ∞ÂΩï,ËøôÈáåÈúÄË¶ÅÊ≥®ÊÑè) SELECT * FROM products WHERE products.prod_name like ‚Äò%yves‚Äô; _ÈÄöÈÖçÁ¨¶‰ΩøÁî®: SELECT FROM products WHERE products.prod_name like ‚Äò_yves‚Äô; ÂåπÈÖçÁªìÊûú‰∏∫: ÂÉè‚Äùyyves‚ÄùËøôÊ†∑ËÆ∞ÂΩï.SELECT FROM products WHERE products.prodname like ‚Äòyves_‚Äò; ÂåπÈÖçÁªìÊûú‰∏∫: ÂÉè‚ÄùyvesHe‚ÄùËøôÊ†∑ÁöÑËÆ∞ÂΩï.(‰∏Ä‰∏™‰∏ãÂàíÁ∫øÂè™ËÉΩÂåπÈÖç‰∏Ä‰∏™Â≠óÁ¨¶,‰∏çËÉΩÂ§ö‰πü‰∏çËÉΩÂ∞ë) Ê≥®ÊÑè‰∫ãÈ°π: Ê≥®ÊÑèÂ§ßÂ∞èÂÜô,Âú®‰ΩøÁî®Ê®°Á≥äÂåπÈÖçÊó∂,‰πüÂ∞±ÊòØÂåπÈÖçÊñáÊú¨Êó∂,mysqlÊòØÂèØËÉΩÂå∫ÂàÜÂ§ßÂ∞èÁöÑ,‰πüÂèØËÉΩÊòØ‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜôÁöÑ,Ëøô‰∏™ÁªìÊûúÊòØÂèñÂÜ≥‰∫éÁî®Êà∑ÂØπMySQLÁöÑÈÖçÁΩÆÊñπÂºè.Â¶ÇÊûúÊòØÂå∫ÂàÜÂ§ßÂ∞èÂÜô,ÈÇ£‰πàÂÉèYvesHeËøôÊ†∑ËÆ∞ÂΩïÊòØ‰∏çËÉΩË¢´‚Äùyves__‚ÄùËøôÊ†∑ÁöÑÂåπÈÖçÊù°‰ª∂ÂåπÈÖçÁöÑ. Ê≥®ÊÑèÂ∞æÈÉ®Á©∫Ê†º,‚Äù%yves‚ÄùÊòØ‰∏çËÉΩÂåπÈÖç‚Äùheyves ‚ÄúËøôÊ†∑ÁöÑËÆ∞ÂΩïÁöÑ. Ê≥®ÊÑèNULL,%ÈÄöÈÖçÁ¨¶ÂèØ‰ª•ÂåπÈÖç‰ªªÊÑèÂ≠óÁ¨¶,‰ΩÜÊòØ‰∏çËÉΩÂåπÈÖçNULL,‰πüÂ∞±ÊòØËØ¥SELECT * FROM products WHERE products.prod_name like ‚Äò%;ÊòØÂåπÈÖç‰∏çÂà∞products.prod_name‰∏∫NULLÁöÑÁöÑËÆ∞ÂΩï. ÊäÄÂ∑ß‰∏éÂª∫ËÆÆ: Ê≠£Â¶ÇÊâÄËßÅÔºå MySQLÁöÑÈÄöÈÖçÁ¨¶ÂæàÊúâÁî®„ÄÇ‰ΩÜËøôÁßçÂäüËÉΩÊòØÊúâ‰ª£‰ª∑ÁöÑÔºöÈÄöÈÖçÁ¨¶ÊêúÁ¥¢ÁöÑÂ§ÑÁêÜ‰∏ÄËà¨Ë¶ÅÊØîÂâçÈù¢ËÆ®ËÆ∫ÁöÑÂÖ∂‰ªñÊêúÁ¥¢ÊâÄËä±Êó∂Èó¥Êõ¥Èïø„ÄÇËøôÈáåÁªôÂá∫‰∏Ä‰∫õ‰ΩøÁî®ÈÄöÈÖçÁ¨¶Ë¶ÅËÆ∞‰ΩèÁöÑÊäÄÂ∑ß„ÄÇ ‰∏çË¶ÅËøáÂ∫¶‰ΩøÁî®ÈÄöÈÖçÁ¨¶„ÄÇÂ¶ÇÊûúÂÖ∂‰ªñÊìç‰ΩúÁ¨¶ËÉΩËææÂà∞Áõ∏ÂêåÁöÑÁõÆÁöÑÔºåÂ∫îËØ• ‰ΩøÁî®ÂÖ∂‰ªñÊìç‰ΩúÁ¨¶„ÄÇ Âú®Á°ÆÂÆûÈúÄË¶Å‰ΩøÁî®ÈÄöÈÖçÁ¨¶Êó∂ÔºåÈô§ÈùûÁªùÂØπÊúâÂøÖË¶ÅÔºåÂê¶Âàô‰∏çË¶ÅÊääÂÆÉ‰ª¨Áî® Âú®ÊêúÁ¥¢Ê®°ÂºèÁöÑÂºÄÂßãÂ§Ñ„ÄÇÊääÈÄöÈÖçÁ¨¶ÁΩÆ‰∫éÊêúÁ¥¢Ê®°ÂºèÁöÑÂºÄÂßãÂ§ÑÔºåÊêúÁ¥¢Ëµ∑ Êù•ÊòØÊúÄÊÖ¢ÁöÑ„ÄÇ ‰ªîÁªÜÊ≥®ÊÑèÈÄöÈÖçÁ¨¶ÁöÑ‰ΩçÁΩÆ„ÄÇÂ¶ÇÊûúÊîæÈîôÂú∞ÊñπÔºåÂèØËÉΩ‰∏ç‰ºöËøîÂõûÊÉ≥Ë¶ÅÁöÑÊï∞. ÂèÇËÄÉÂçöÊñáÔºöhttps://blog.csdn.net/u011479200/article/details/78513632 17.count(*)„ÄÅcount(1)„ÄÅcount(column)ÁöÑÂå∫Âà´ count(*)ÂØπË°åÁöÑÊï∞ÁõÆËøõË°åËÆ°ÁÆó,ÂåÖÂê´NULL count(column)ÂØπÁâπÂÆöÁöÑÂàóÁöÑÂÄºÂÖ∑ÊúâÁöÑË°åÊï∞ËøõË°åËÆ°ÁÆó,‰∏çÂåÖÂê´NULLÂÄº„ÄÇ count()ËøòÊúâ‰∏ÄÁßç‰ΩøÁî®ÊñπÂºè,count(1)Ëøô‰∏™Áî®Ê≥ïÂíåcount(*)ÁöÑÁªìÊûúÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ ÊÄßËÉΩÈóÆÈ¢ò: 1.‰ªª‰ΩïÊÉÖÂÜµ‰∏ãSELECT COUNT(*) FROM tablenameÊòØÊúÄ‰ºòÈÄâÊã©; 2.Â∞ΩÈáèÂáèÂ∞ëSELECT COUNT(*) FROM tablename WHERE COL = ‚Äòvalue‚Äô ËøôÁßçÊü•ËØ¢; 3.ÊùúÁªùSELECT COUNT(COL) FROM tablename WHERE COL2 = ‚Äòvalue‚Äô ÁöÑÂá∫Áé∞„ÄÇ Â¶ÇÊûúË°®Ê≤°Êúâ‰∏ªÈîÆ,ÈÇ£‰πàcount(1)ÊØîcount(*)Âø´„ÄÇ Â¶ÇÊûúÊúâ‰∏ªÈîÆ,ÈÇ£‰πàcount(‰∏ªÈîÆ,ËÅîÂêà‰∏ªÈîÆ)ÊØîcount(*)Âø´„ÄÇ Â¶ÇÊûúË°®Âè™Êúâ‰∏Ä‰∏™Â≠óÊÆµ,count(*)ÊúÄÂø´„ÄÇ count(1)Ë∑ücount(‰∏ªÈîÆ)‰∏ÄÊ†∑,Âè™Êâ´Êèè‰∏ªÈîÆ„ÄÇcount(*)Ë∑ücount(Èùû‰∏ªÈîÆ)‰∏ÄÊ†∑,Êâ´ÊèèÊï¥‰∏™Ë°®„ÄÇÊòéÊòæÂâçËÄÖÊõ¥Âø´‰∏Ä‰∫õ„ÄÇ 18.ÊúÄÂ∑¶ÂâçÁºÄÂéüÂàô Â§öÂàóÁ¥¢ÂºïÔºö ALTER TABLE people ADD INDEX lname_fname_age (lame,fname,age); ‰∏∫‰∫ÜÊèêÈ´òÊêúÁ¥¢ÊïàÁéáÔºåÊàë‰ª¨ÈúÄË¶ÅËÄÉËôëËøêÁî®Â§öÂàóÁ¥¢Âºï,Áî±‰∫éÁ¥¢ÂºïÊñá‰ª∂‰ª•BÔºçTreeÊ†ºÂºè‰øùÂ≠òÔºåÊâÄ‰ª•Êàë‰ª¨‰∏çÁî®Êâ´Êèè‰ªª‰ΩïËÆ∞ÂΩïÔºåÂç≥ÂèØÂæóÂà∞ÊúÄÁªàÁªìÊûú„ÄÇ Ê≥®ÔºöÂú®mysql‰∏≠ÊâßË°åÊü•ËØ¢Êó∂ÔºåÂè™ËÉΩ‰ΩøÁî®‰∏Ä‰∏™Á¥¢ÂºïÔºåÂ¶ÇÊûúÊàë‰ª¨Âú®lname,fname,age‰∏äÂàÜÂà´Âª∫Á¥¢Âºï,ÊâßË°åÊü•ËØ¢Êó∂ÔºåÂè™ËÉΩ‰ΩøÁî®‰∏Ä‰∏™Á¥¢ÂºïÔºåmysql‰ºöÈÄâÊã©‰∏Ä‰∏™ÊúÄ‰∏•Ê†º(Ëé∑ÂæóÁªìÊûúÈõÜËÆ∞ÂΩïÊï∞ÊúÄÂ∞ë)ÁöÑÁ¥¢Âºï„ÄÇ ÊúÄÂ∑¶ÂâçÁºÄÂéüÂàôÔºöÈ°æÂêçÊÄù‰πâÔºåÂ∞±ÊòØÊúÄÂ∑¶‰ºòÂÖàÔºå‰∏ä‰æã‰∏≠Êàë‰ª¨ÂàõÂª∫‰∫Ülname_fname_ageÂ§öÂàóÁ¥¢Âºï,Áõ∏ÂΩì‰∫éÂàõÂª∫‰∫Ü(lname)ÂçïÂàóÁ¥¢ÂºïÔºå(lname,fname)ÁªÑÂêàÁ¥¢Âºï‰ª•Âèä(lname,fname,age)ÁªÑÂêàÁ¥¢Âºï„ÄÇ ‰∫å„ÄÅÁ¥¢Âºï1.‰ªÄ‰πàÊòØÁ¥¢ÂºïÔºü ‰Ωï‰∏∫Á¥¢ÂºïÔºö Êï∞ÊçÆÂ∫ìÁ¥¢ÂºïÔºåÊòØÊï∞ÊçÆÂ∫ìÁÆ°ÁêÜÁ≥ªÁªü‰∏≠‰∏Ä‰∏™ÊéíÂ∫èÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÁ¥¢ÂºïÁöÑÂÆûÁé∞ÈÄöÂ∏∏‰ΩøÁî®BÊ†ëÂèäÂÖ∂ÂèòÁßçB+Ê†ë„ÄÇ Âú®Êï∞ÊçÆ‰πãÂ§ñÔºåÊï∞ÊçÆÂ∫ìÁ≥ªÁªüËøòÁª¥Êä§ÁùÄÊª°Ë∂≥ÁâπÂÆöÊü•ÊâæÁÆóÊ≥ïÁöÑÊï∞ÊçÆÁªìÊûÑÔºåËøô‰∫õÊï∞ÊçÆÁªìÊûÑ‰ª•ÊüêÁßçÊñπÂºèÂºïÁî®ÔºàÊåáÂêëÔºâÊï∞ÊçÆÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Âú®Ëøô‰∫õÊï∞ÊçÆÁªìÊûÑ‰∏äÂÆûÁé∞È´òÁ∫ßÊü•ÊâæÁÆóÊ≥ï„ÄÇËøôÁßçÊï∞ÊçÆÁªìÊûÑÔºåÂ∞±ÊòØÁ¥¢Âºï„ÄÇ 2.Á¥¢ÂºïÁöÑ‰ΩúÁî®ÔºüÂÆÉÁöÑ‰ºòÁÇπÁº∫ÁÇπÊòØ‰ªÄ‰πàÔºü Á¥¢Âºï‰ΩúÁî®Ôºö ÂçèÂä©Âø´ÈÄüÊü•ËØ¢„ÄÅÊõ¥Êñ∞Êï∞ÊçÆÂ∫ìË°®‰∏≠Êï∞ÊçÆ„ÄÇ ‰∏∫Ë°®ËÆæÁΩÆÁ¥¢ÂºïË¶Å‰ªòÂá∫‰ª£‰ª∑ÁöÑÔºö ‰∏ÄÊòØÂ¢ûÂä†‰∫ÜÊï∞ÊçÆÂ∫ìÁöÑÂ≠òÂÇ®Á©∫Èó¥ ‰∫åÊòØÂú®ÊèíÂÖ•Âíå‰øÆÊîπÊï∞ÊçÆÊó∂Ë¶ÅËä±Ë¥πËæÉÂ§öÁöÑÊó∂Èó¥(Âõ†‰∏∫Á¥¢Âºï‰πüË¶ÅÈöè‰πãÂèòÂä®)„ÄÇ 3.Á¥¢ÂºïÁöÑ‰ºòÁº∫ÁÇπÔºü ÂàõÂª∫Á¥¢ÂºïÂèØ‰ª•Â§ßÂ§ßÊèêÈ´òÁ≥ªÁªüÁöÑÊÄßËÉΩÔºà‰ºòÁÇπÔºâÔºö 1.ÈÄöËøáÂàõÂª∫ÂîØ‰∏ÄÊÄßÁ¥¢ÂºïÔºåÂèØ‰ª•‰øùËØÅÊï∞ÊçÆÂ∫ìË°®‰∏≠ÊØè‰∏ÄË°åÊï∞ÊçÆÁöÑÂîØ‰∏ÄÊÄß„ÄÇ 2.ÂèØ‰ª•Â§ßÂ§ßÂä†Âø´Êï∞ÊçÆÁöÑÊ£ÄÁ¥¢ÈÄüÂ∫¶ÔºåËøô‰πüÊòØÂàõÂª∫Á¥¢ÂºïÁöÑÊúÄ‰∏ªË¶ÅÁöÑÂéüÂõ†„ÄÇ 3.ÂèØ‰ª•Âä†ÈÄüË°®ÂíåË°®‰πãÈó¥ÁöÑËøûÊé•ÔºåÁâπÂà´ÊòØÂú®ÂÆûÁé∞Êï∞ÊçÆÁöÑÂèÇËÄÉÂÆåÊï¥ÊÄßÊñπÈù¢ÁâπÂà´ÊúâÊÑè‰πâ„ÄÇ 4.Âú®‰ΩøÁî®ÂàÜÁªÑÂíåÊéíÂ∫èÂ≠êÂè•ËøõË°åÊï∞ÊçÆÊ£ÄÁ¥¢Êó∂ÔºåÂêåÊ†∑ÂèØ‰ª•ÊòæËëóÂáèÂ∞ëÊü•ËØ¢‰∏≠ÂàÜÁªÑÂíåÊéíÂ∫èÁöÑÊó∂Èó¥„ÄÇ 5.ÈÄöËøá‰ΩøÁî®Á¥¢ÂºïÔºåÂèØ‰ª•Âú®Êü•ËØ¢ÁöÑËøáÁ®ã‰∏≠Ôºå‰ΩøÁî®‰ºòÂåñÈöêËóèÂô®ÔºåÊèêÈ´òÁ≥ªÁªüÁöÑÊÄßËÉΩ„ÄÇ Â¢ûÂä†Á¥¢Âºï‰πüÊúâËÆ∏Â§ö‰∏çÂà©ÁöÑÊñπÈù¢(Áº∫ÁÇπ)Ôºö 1.ÂàõÂª∫Á¥¢ÂºïÂíåÁª¥Êä§Á¥¢ÂºïË¶ÅËÄóË¥πÊó∂Èó¥ÔºåËøôÁßçÊó∂Èó¥ÈöèÁùÄÊï∞ÊçÆÈáèÁöÑÂ¢ûÂä†ËÄåÂ¢ûÂä†„ÄÇ 2.Á¥¢ÂºïÈúÄË¶ÅÂç†Áâ©ÁêÜÁ©∫Èó¥ÔºåÈô§‰∫ÜÊï∞ÊçÆË°®Âç†Êï∞ÊçÆÁ©∫Èó¥‰πãÂ§ñÔºåÊØè‰∏Ä‰∏™Á¥¢ÂºïËøòË¶ÅÂç†‰∏ÄÂÆöÁöÑÁâ©ÁêÜÁ©∫Èó¥ÔºåÂ¶ÇÊûúË¶ÅÂª∫Á´ãËÅöÁ∞áÁ¥¢ÂºïÔºåÈÇ£‰πàÈúÄË¶ÅÁöÑÁ©∫Èó¥Â∞±‰ºöÊõ¥Â§ß„ÄÇ 3.ÂΩìÂØπË°®‰∏≠ÁöÑÊï∞ÊçÆËøõË°åÂ¢ûÂä†„ÄÅÂà†Èô§Âíå‰øÆÊîπÁöÑÊó∂ÂÄôÔºåÁ¥¢Âºï‰πüË¶ÅÂä®ÊÄÅÁöÑÁª¥Êä§ÔºåËøôÊ†∑Â∞±Èôç‰Ωé‰∫ÜÊï∞ÊçÆÁöÑÁª¥Êä§ÈÄüÂ∫¶„ÄÇ 4.Âì™‰∫õÂàóÈÄÇÂêàÂª∫Á´ãÁ¥¢Âºï„ÄÅÂì™‰∫õ‰∏çÈÄÇÂêàÂª∫Á¥¢ÂºïÔºü Á¥¢ÂºïÊòØÂª∫Á´ãÂú®Êï∞ÊçÆÂ∫ìË°®‰∏≠ÁöÑÊüê‰∫õÂàóÁöÑ‰∏äÈù¢„ÄÇÂú®ÂàõÂª∫Á¥¢ÂºïÁöÑÊó∂ÂÄôÔºåÂ∫îËØ•ËÄÉËôëÂú®Âì™‰∫õÂàó‰∏äÂèØ‰ª•ÂàõÂª∫Á¥¢ÂºïÔºåÂú®Âì™‰∫õÂàó‰∏ä‰∏çËÉΩÂàõÂª∫Á¥¢Âºï„ÄÇ ‰∏ÄËà¨Êù•ËØ¥ÔºåÂ∫îËØ•Âú®Ëøô‰∫õÂàó‰∏äÂàõÂª∫Á¥¢ÂºïÔºö Ôºà1ÔºâÂú®ÁªèÂ∏∏ÈúÄË¶ÅÊêúÁ¥¢ÁöÑÂàó‰∏äÔºåÂèØ‰ª•Âä†Âø´ÊêúÁ¥¢ÁöÑÈÄüÂ∫¶Ôºõ Ôºà2ÔºâÂú®‰Ωú‰∏∫‰∏ªÈîÆÁöÑÂàó‰∏äÔºåÂº∫Âà∂ËØ•ÂàóÁöÑÂîØ‰∏ÄÊÄßÂíåÁªÑÁªáË°®‰∏≠Êï∞ÊçÆÁöÑÊéíÂàóÁªìÊûÑÔºõ Ôºà3ÔºâÂú®ÁªèÂ∏∏Áî®Âú®ËøûÊé•ÁöÑÂàó‰∏äÔºåËøô‰∫õÂàó‰∏ªË¶ÅÊòØ‰∏Ä‰∫õÂ§ñÈîÆÔºåÂèØ‰ª•Âä†Âø´ËøûÊé•ÁöÑÈÄüÂ∫¶Ôºõ Ôºà4ÔºâÂú®ÁªèÂ∏∏ÈúÄË¶ÅÊ†πÊçÆËåÉÂõ¥ËøõË°åÊêúÁ¥¢ÁöÑÂàó‰∏äÂàõÂª∫Á¥¢ÂºïÔºåÂõ†‰∏∫Á¥¢ÂºïÂ∑≤ÁªèÊéíÂ∫èÔºåÂÖ∂ÊåáÂÆöÁöÑËåÉÂõ¥ÊòØËøûÁª≠ÁöÑÔºõ Ôºà5ÔºâÂú®ÁªèÂ∏∏ÈúÄË¶ÅÊéíÂ∫èÁöÑÂàó‰∏äÂàõÂª∫Á¥¢ÂºïÔºåÂõ†‰∏∫Á¥¢ÂºïÂ∑≤ÁªèÊéíÂ∫èÔºåËøôÊ†∑Êü•ËØ¢ÂèØ‰ª•Âà©Áî®Á¥¢ÂºïÁöÑÊéíÂ∫èÔºåÂä†Âø´ÊéíÂ∫èÊü•ËØ¢Êó∂Èó¥Ôºõ Ôºà6ÔºâÂú®ÁªèÂ∏∏‰ΩøÁî®Âú®WHEREÂ≠êÂè•‰∏≠ÁöÑÂàó‰∏äÈù¢ÂàõÂª∫Á¥¢ÂºïÔºåÂä†Âø´Êù°‰ª∂ÁöÑÂà§Êñ≠ÈÄüÂ∫¶„ÄÇ ÂØπ‰∫éÊúâ‰∫õÂàó‰∏çÂ∫îËØ•ÂàõÂª∫Á¥¢ÂºïÔºö Ôºà1ÔºâÂØπ‰∫éÈÇ£‰∫õÂú®Êü•ËØ¢‰∏≠ÂæàÂ∞ë‰ΩøÁî®ÊàñËÄÖÂèÇËÄÉÁöÑÂàó‰∏çÂ∫îËØ•ÂàõÂª∫Á¥¢Âºï„ÄÇ ËøôÊòØÂõ†‰∏∫ÔºåÊó¢ÁÑ∂Ëøô‰∫õÂàóÂæàÂ∞ë‰ΩøÁî®Âà∞ÔºåÂõ†Ê≠§ÊúâÁ¥¢ÂºïÊàñËÄÖÊó†Á¥¢ÂºïÔºåÂπ∂‰∏çËÉΩÊèêÈ´òÊü•ËØ¢ÈÄüÂ∫¶„ÄÇÁõ∏ÂèçÔºåÁî±‰∫éÂ¢ûÂä†‰∫ÜÁ¥¢ÂºïÔºåÂèçËÄåÈôç‰Ωé‰∫ÜÁ≥ªÁªüÁöÑÁª¥Êä§ÈÄüÂ∫¶ÂíåÂ¢ûÂ§ß‰∫ÜÁ©∫Èó¥ÈúÄÊ±Ç„ÄÇ Ôºà2ÔºâÂØπ‰∫éÈÇ£‰∫õÂè™ÊúâÂæàÂ∞ëÊï∞ÊçÆÂÄºÁöÑÂàó‰πü‰∏çÂ∫îËØ•Â¢ûÂä†Á¥¢Âºï„ÄÇ ËøôÊòØÂõ†‰∏∫ÔºåÁî±‰∫éËøô‰∫õÂàóÁöÑÂèñÂÄºÂæàÂ∞ëÔºå‰æãÂ¶Ç‰∫∫‰∫ãË°®ÁöÑÊÄßÂà´ÂàóÔºåÂú®Êü•ËØ¢ÁöÑÁªìÊûú‰∏≠ÔºåÁªìÊûúÈõÜÁöÑÊï∞ÊçÆË°åÂç†‰∫ÜË°®‰∏≠Êï∞ÊçÆË°åÁöÑÂæàÂ§ßÊØî‰æãÔºåÂç≥ÈúÄË¶ÅÂú®Ë°®‰∏≠ÊêúÁ¥¢ÁöÑÊï∞ÊçÆË°åÁöÑÊØî‰æãÂæàÂ§ß„ÄÇÂ¢ûÂä†Á¥¢ÂºïÔºåÂπ∂‰∏çËÉΩÊòéÊòæÂä†Âø´Ê£ÄÁ¥¢ÈÄüÂ∫¶„ÄÇ Ôºà3ÔºâÂØπ‰∫éÈÇ£‰∫õÂÆö‰πâ‰∏∫text, imageÂíåbitÊï∞ÊçÆÁ±ªÂûãÁöÑÂàó‰∏çÂ∫îËØ•Â¢ûÂä†Á¥¢Âºï„ÄÇ ËøôÊòØÂõ†‰∏∫ÔºåËøô‰∫õÂàóÁöÑÊï∞ÊçÆÈáèË¶Å‰πàÁõ∏ÂΩìÂ§ßÔºåË¶Å‰πàÂèñÂÄºÂæàÂ∞ë„ÄÇ (4)ÂΩì‰øÆÊîπÊÄßËÉΩËøúËøúÂ§ß‰∫éÊ£ÄÁ¥¢ÊÄßËÉΩÊó∂Ôºå‰∏çÂ∫îËØ•ÂàõÂª∫Á¥¢Âºï„ÄÇ ËøôÊòØÂõ†‰∏∫Ôºå‰øÆÊîπÊÄßËÉΩÂíåÊ£ÄÁ¥¢ÊÄßËÉΩÊòØ‰∫íÁõ∏ÁüõÁõæÁöÑ„ÄÇÂΩìÂ¢ûÂä†Á¥¢ÂºïÊó∂Ôºå‰ºöÊèêÈ´òÊ£ÄÁ¥¢ÊÄßËÉΩÔºå‰ΩÜÊòØ‰ºöÈôç‰Ωé‰øÆÊîπÊÄßËÉΩ„ÄÇÂΩìÂáèÂ∞ëÁ¥¢ÂºïÊó∂Ôºå‰ºöÊèêÈ´ò‰øÆÊîπÊÄßËÉΩÔºåÈôç‰ΩéÊ£ÄÁ¥¢ÊÄßËÉΩ„ÄÇÂõ†Ê≠§ÔºåÂΩì‰øÆÊîπÊÄßËÉΩËøúËøúÂ§ß‰∫éÊ£ÄÁ¥¢ÊÄßËÉΩÊó∂Ôºå‰∏çÂ∫îËØ•ÂàõÂª∫Á¥¢Âºï„ÄÇ 5.‰ªÄ‰πàÊ†∑ÁöÑÂ≠óÊÆµÈÄÇÂêàÂª∫Á¥¢Âºï ÂîØ‰∏Ä„ÄÅ‰∏ç‰∏∫Á©∫„ÄÅÁªèÂ∏∏Ë¢´Êü•ËØ¢ÁöÑÂ≠óÊÆµ 6.MySQL B+TreeÁ¥¢ÂºïÂíåHashÁ¥¢ÂºïÁöÑÂå∫Âà´? HashÁ¥¢ÂºïÂíåB+Ê†ëÁ¥¢ÂºïÁöÑÁâπÁÇπÔºö HashÁ¥¢ÂºïÁªìÊûÑÁöÑÁâπÊÆäÊÄßÔºåÂÖ∂Ê£ÄÁ¥¢ÊïàÁéáÈùûÂ∏∏È´òÔºåÁ¥¢ÂºïÁöÑÊ£ÄÁ¥¢ÂèØ‰ª•‰∏ÄÊ¨°ÂÆö‰Ωç; B+Ê†ëÁ¥¢ÂºïÈúÄË¶Å‰ªéÊ†πËäÇÁÇπÂà∞ÊûùËäÇÁÇπÔºåÊúÄÂêéÊâçËÉΩËÆøÈóÆÂà∞È°µËäÇÁÇπËøôÊ†∑Â§öÊ¨°ÁöÑIOËÆøÈóÆ; ‰∏∫‰ªÄ‰πà‰∏çÈÉΩÁî®HashÁ¥¢ÂºïËÄå‰ΩøÁî®B+Ê†ëÁ¥¢ÂºïÔºü HashÁ¥¢Âºï‰ªÖ‰ªÖËÉΩÊª°Ë∂≥‚Äù=‚Äù,‚ÄùIN‚ÄùÂíå‚Äù‚ÄùÊü•ËØ¢Ôºå‰∏çËÉΩ‰ΩøÁî®ËåÉÂõ¥Êü•ËØ¢,Âõ†‰∏∫ÁªèËøáÁõ∏Â∫îÁöÑHashÁÆóÊ≥ïÂ§ÑÁêÜ‰πãÂêéÁöÑHashÂÄºÁöÑÂ§ßÂ∞èÂÖ≥Á≥ªÔºåÂπ∂‰∏çËÉΩ‰øùËØÅÂíåHashËøêÁÆóÂâçÂÆåÂÖ®‰∏ÄÊ†∑Ôºõ HashÁ¥¢ÂºïÊó†Ê≥ïË¢´Áî®Êù•ÈÅøÂÖçÊï∞ÊçÆÁöÑÊéíÂ∫èÊìç‰ΩúÔºåÂõ†‰∏∫HashÂÄºÁöÑÂ§ßÂ∞èÂÖ≥Á≥ªÂπ∂‰∏ç‰∏ÄÂÆöÂíåHashËøêÁÆóÂâçÁöÑÈîÆÂÄºÂÆåÂÖ®‰∏ÄÊ†∑Ôºõ HashÁ¥¢Âºï‰∏çËÉΩÂà©Áî®ÈÉ®ÂàÜÁ¥¢ÂºïÈîÆÊü•ËØ¢ÔºåÂØπ‰∫éÁªÑÂêàÁ¥¢ÂºïÔºåHashÁ¥¢ÂºïÂú®ËÆ°ÁÆóHashÂÄºÁöÑÊó∂ÂÄôÊòØÁªÑÂêàÁ¥¢ÂºïÈîÆÂêàÂπ∂ÂêéÂÜç‰∏ÄËµ∑ËÆ°ÁÆóHashÂÄºÔºåËÄå‰∏çÊòØÂçïÁã¨ËÆ°ÁÆóHashÂÄºÔºåÊâÄ‰ª•ÈÄöËøáÁªÑÂêàÁ¥¢ÂºïÁöÑÂâçÈù¢‰∏Ä‰∏™ÊàñÂá†‰∏™Á¥¢ÂºïÈîÆËøõË°åÊü•ËØ¢ÁöÑÊó∂ÂÄôÔºåHashÁ¥¢Âºï‰πüÊó†Ê≥ïË¢´Âà©Áî®Ôºõ HashÁ¥¢ÂºïÂú®‰ªª‰ΩïÊó∂ÂÄôÈÉΩ‰∏çËÉΩÈÅøÂÖçË°®Êâ´ÊèèÔºåÁî±‰∫é‰∏çÂêåÁ¥¢ÂºïÈîÆÂ≠òÂú®Áõ∏ÂêåHashÂÄºÔºåÊâÄ‰ª•Âç≥‰ΩøÂèñÊª°Ë∂≥Êüê‰∏™HashÈîÆÂÄºÁöÑÊï∞ÊçÆÁöÑËÆ∞ÂΩïÊù°Êï∞Ôºå‰πüÊó†Ê≥ï‰ªéHashÁ¥¢Âºï‰∏≠Áõ¥Êé•ÂÆåÊàêÊü•ËØ¢ÔºåËøòÊòØË¶ÅÂõûË°®Êü•ËØ¢Êï∞ÊçÆÔºõ HashÁ¥¢ÂºïÈÅáÂà∞Â§ßÈáèHashÂÄºÁõ∏Á≠âÁöÑÊÉÖÂÜµÂêéÊÄßËÉΩÂπ∂‰∏ç‰∏ÄÂÆöÂ∞±‰ºöÊØîB+Ê†ëÁ¥¢ÂºïÈ´ò„ÄÇ Ë°•ÂÖÖÔºö 1.MySQL‰∏≠ÔºåÂè™ÊúâHEAP/MEMORYÂºïÊìéÊâçÊòæÁ§∫ÊîØÊåÅHashÁ¥¢Âºï„ÄÇ 2.Â∏∏Áî®ÁöÑInnoDBÂºïÊìé‰∏≠ÈªòËÆ§‰ΩøÁî®ÁöÑÊòØB+Ê†ëÁ¥¢ÂºïÔºåÂÆÉ‰ºöÂÆûÊó∂ÁõëÊéßË°®‰∏äÁ¥¢ÂºïÁöÑ‰ΩøÁî®ÊÉÖÂÜµÔºåÂ¶ÇÊûúËÆ§‰∏∫Âª∫Á´ãÂìàÂ∏åÁ¥¢ÂºïÂèØ‰ª•ÊèêÈ´òÊü•ËØ¢ÊïàÁéáÔºåÂàôËá™Âä®Âú®ÂÜÖÂ≠ò‰∏≠ÁöÑ‚ÄúËá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢ÂºïÁºìÂÜ≤Âå∫‚ÄùÂª∫Á´ãÂìàÂ∏åÁ¥¢ÂºïÔºàÂú®InnoDB‰∏≠ÈªòËÆ§ÂºÄÂêØËá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢ÂºïÔºâÔºåÈÄöËøáËßÇÂØüÊêúÁ¥¢Ê®°ÂºèÔºåMySQL‰ºöÂà©Áî®index keyÁöÑÂâçÁºÄÂª∫Á´ãÂìàÂ∏åÁ¥¢ÂºïÔºåÂ¶ÇÊûú‰∏Ä‰∏™Ë°®Âá†‰πéÂ§ßÈÉ®ÂàÜÈÉΩÂú®ÁºìÂÜ≤Ê±†‰∏≠ÔºåÈÇ£‰πàÂª∫Á´ã‰∏Ä‰∏™ÂìàÂ∏åÁ¥¢ÂºïËÉΩÂ§üÂä†Âø´Á≠âÂÄºÊü•ËØ¢„ÄÇB+Ê†ëÁ¥¢ÂºïÂíåÂìàÂ∏åÁ¥¢ÂºïÁöÑÊòéÊòæÂå∫Âà´ÊòØÔºö 3.Â¶ÇÊûúÊòØÁ≠âÂÄºÊü•ËØ¢ÔºåÈÇ£‰πàÂìàÂ∏åÁ¥¢ÂºïÊòéÊòæÊúâÁªùÂØπ‰ºòÂäøÔºåÂõ†‰∏∫Âè™ÈúÄË¶ÅÁªèËøá‰∏ÄÊ¨°ÁÆóÊ≥ïÂç≥ÂèØÊâæÂà∞Áõ∏Â∫îÁöÑÈîÆÂÄºÔºõÂΩìÁÑ∂‰∫ÜÔºåËøô‰∏™ÂâçÊèêÊòØÔºåÈîÆÂÄºÈÉΩÊòØÂîØ‰∏ÄÁöÑ„ÄÇÂ¶ÇÊûúÈîÆÂÄº‰∏çÊòØÂîØ‰∏ÄÁöÑÔºåÂ∞±ÈúÄË¶ÅÂÖàÊâæÂà∞ËØ•ÈîÆÊâÄÂú®‰ΩçÁΩÆÔºåÁÑ∂ÂêéÂÜçÊ†πÊçÆÈìæË°®ÂæÄÂêéÊâ´ÊèèÔºåÁõ¥Âà∞ÊâæÂà∞Áõ∏Â∫îÁöÑÊï∞ÊçÆÔºõ 4.Â¶ÇÊûúÊòØËåÉÂõ¥Êü•ËØ¢Ê£ÄÁ¥¢ÔºåËøôÊó∂ÂÄôÂìàÂ∏åÁ¥¢ÂºïÂ∞±ÊØ´Êó†Áî®Ê≠¶‰πãÂú∞‰∫ÜÔºåÂõ†‰∏∫ÂéüÂÖàÊòØÊúâÂ∫èÁöÑÈîÆÂÄºÔºåÁªèËøáÂìàÂ∏åÁÆóÊ≥ïÂêéÔºåÊúâÂèØËÉΩÂèòÊàê‰∏çËøûÁª≠ÁöÑ‰∫ÜÔºåÂ∞±Ê≤°ÂäûÊ≥ïÂÜçÂà©Áî®Á¥¢ÂºïÂÆåÊàêËåÉÂõ¥Êü•ËØ¢Ê£ÄÁ¥¢ÔºõÂêåÁêÜÔºåÂìàÂ∏åÁ¥¢ÂºïÊ≤°ÂäûÊ≥ïÂà©Áî®Á¥¢ÂºïÂÆåÊàêÊéíÂ∫èÔºå‰ª•Âèälike ‚Äòxxx%‚Äô ËøôÊ†∑ÁöÑÈÉ®ÂàÜÊ®°Á≥äÊü•ËØ¢ÔºàËøôÁßçÈÉ®ÂàÜÊ®°Á≥äÊü•ËØ¢ÔºåÂÖ∂ÂÆûÊú¨Ë¥®‰∏ä‰πüÊòØËåÉÂõ¥Êü•ËØ¢ÔºâÔºõ 5.ÂìàÂ∏åÁ¥¢Âºï‰πü‰∏çÊîØÊåÅÂ§öÂàóËÅîÂêàÁ¥¢ÂºïÁöÑÊúÄÂ∑¶ÂåπÈÖçËßÑÂàôÔºõ 6.B+Ê†ëÁ¥¢ÂºïÁöÑÂÖ≥ÈîÆÂ≠óÊ£ÄÁ¥¢ÊïàÁéáÊØîËæÉÂπ≥ÂùáÔºå‰∏çÂÉèBÊ†ëÈÇ£Ê†∑Ê≥¢Âä®ÂπÖÂ∫¶Â§ßÔºåÂú®ÊúâÂ§ßÈáèÈáçÂ§çÈîÆÂÄºÊÉÖÂÜµ‰∏ãÔºåÂìàÂ∏åÁ¥¢ÂºïÁöÑÊïàÁéá‰πüÊòØÊûÅ‰ΩéÁöÑÔºåÂõ†‰∏∫Â≠òÂú®ÊâÄË∞ìÁöÑÂìàÂ∏åÁ¢∞ÊíûÈóÆÈ¢ò„ÄÇ 7.Âú®Â§ßÂ§öÊï∞Âú∫ÊôØ‰∏ãÔºåÈÉΩ‰ºöÊúâËåÉÂõ¥Êü•ËØ¢„ÄÅÊéíÂ∫è„ÄÅÂàÜÁªÑÁ≠âÊü•ËØ¢ÁâπÂæÅÔºåÁî®B+Ê†ëÁ¥¢ÂºïÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ 7.BÊ†ëÂíåB+Ê†ëÁöÑÂå∫Âà´ BÊ†ëÔºåÊØè‰∏™ËäÇÁÇπÈÉΩÂ≠òÂÇ®keyÂíådataÔºåÊâÄÊúâËäÇÁÇπÁªÑÊàêËøôÊ£µÊ†ëÔºåÂπ∂‰∏îÂè∂Â≠êËäÇÁÇπÊåáÈíà‰∏∫nulÔºåÂè∂Â≠êÁªìÁÇπ‰∏çÂåÖÂê´‰ªª‰ΩïÂÖ≥ÈîÆÂ≠ó‰ø°ÊÅØ„ÄÇ B+Ê†ëÔºåÊâÄÊúâÁöÑÂè∂Â≠êÁªìÁÇπ‰∏≠ÂåÖÂê´‰∫ÜÂÖ®ÈÉ®ÂÖ≥ÈîÆÂ≠óÁöÑ‰ø°ÊÅØÔºåÂèäÊåáÂêëÂê´ÊúâËøô‰∫õÂÖ≥ÈîÆÂ≠óËÆ∞ÂΩïÁöÑÊåáÈíàÔºå‰∏îÂè∂Â≠êÁªìÁÇπÊú¨Ë∫´‰æùÂÖ≥ÈîÆÂ≠óÁöÑÂ§ßÂ∞èËá™Â∞èËÄåÂ§ßÁöÑÈ°∫Â∫èÈìæÊé•ÔºåÊâÄÊúâÁöÑÈùûÁªàÁ´ØÁªìÁÇπÂèØ‰ª•ÁúãÊàêÊòØÁ¥¢ÂºïÈÉ®ÂàÜÔºåÁªìÁÇπ‰∏≠‰ªÖÂê´ÊúâÂÖ∂Â≠êÊ†ëÊ†πÁªìÁÇπ‰∏≠ÊúÄÂ§ßÔºàÊàñÊúÄÂ∞èÔºâÂÖ≥ÈîÆÂ≠ó„ÄÇ (ËÄåB Ê†ëÁöÑÈùûÁªàËäÇÁÇπ‰πüÂåÖÂê´ÈúÄË¶ÅÊü•ÊâæÁöÑÊúâÊïà‰ø°ÊÅØ) 8.‰∏∫‰ªÄ‰πàËØ¥B+ÊØîBÊ†ëÊõ¥ÈÄÇÂêàÂÆûÈôÖÂ∫îÁî®‰∏≠Êìç‰ΩúÁ≥ªÁªüÁöÑÊñá‰ª∂Á¥¢ÂºïÂíåÊï∞ÊçÆÂ∫ìÁ¥¢ÂºïÔºü 1.B+ÁöÑÁ£ÅÁõòËØªÂÜô‰ª£‰ª∑Êõ¥‰Ωé B+ÁöÑÂÜÖÈÉ®ÁªìÁÇπÂπ∂Ê≤°ÊúâÊåáÂêëÂÖ≥ÈîÆÂ≠óÂÖ∑‰Ωì‰ø°ÊÅØÁöÑÊåáÈíà„ÄÇÂõ†Ê≠§ÂÖ∂ÂÜÖÈÉ®ÁªìÁÇπÁõ∏ÂØπBÊ†ëÊõ¥Â∞è„ÄÇÂ¶ÇÊûúÊääÊâÄÊúâÂêå‰∏ÄÂÜÖÈÉ®ÁªìÁÇπÁöÑÂÖ≥ÈîÆÂ≠óÂ≠òÊîæÂú®Âêå‰∏ÄÁõòÂùó‰∏≠ÔºåÈÇ£‰πàÁõòÂùóÊâÄËÉΩÂÆπÁ∫≥ÁöÑÂÖ≥ÈîÆÂ≠óÊï∞Èáè‰πüË∂äÂ§ö„ÄÇ‰∏ÄÊ¨°ÊÄßËØªÂÖ•ÂÜÖÂ≠ò‰∏≠ÁöÑÈúÄË¶ÅÊü•ÊâæÁöÑÂÖ≥ÈîÆÂ≠ó‰πüÂ∞±Ë∂äÂ§ö„ÄÇÁõ∏ÂØπÊù•ËØ¥IOËØªÂÜôÊ¨°Êï∞‰πüÂ∞±Èôç‰Ωé‰∫Ü„ÄÇ 2.B+treeÁöÑÊü•ËØ¢ÊïàÁéáÊõ¥Âä†Á®≥ÂÆö Áî±‰∫éÈùûÁªàÁªìÁÇπÂπ∂‰∏çÊòØÊúÄÁªàÊåáÂêëÊñá‰ª∂ÂÜÖÂÆπÁöÑÁªìÁÇπÔºåËÄåÂè™ÊòØÂè∂Â≠êÁªìÁÇπ‰∏≠ÂÖ≥ÈîÆÂ≠óÁöÑÁ¥¢Âºï„ÄÇÊâÄ‰ª•‰ªª‰ΩïÂÖ≥ÈîÆÂ≠óÁöÑÊü•ÊâæÂøÖÈ°ªËµ∞‰∏ÄÊù°‰ªéÊ†πÁªìÁÇπÂà∞Âè∂Â≠êÁªìÁÇπÁöÑË∑Ø„ÄÇÊâÄÊúâÂÖ≥ÈîÆÂ≠óÊü•ËØ¢ÁöÑË∑ØÂæÑÈïøÂ∫¶Áõ∏ÂêåÔºåÂØºËá¥ÊØè‰∏Ä‰∏™Êï∞ÊçÆÁöÑÊü•ËØ¢ÊïàÁéáÁõ∏ÂΩì„ÄÇ 9.ËÅöÈõÜÁ¥¢ÂºïÂíåÈùûËÅöÈõÜÁ¥¢ÂºïÂå∫Âà´? ËÅöÂêàÁ¥¢Âºï(clustered index): ËÅöÈõÜÁ¥¢ÂºïË°®ËÆ∞ÂΩïÁöÑÊéíÂàóÈ°∫Â∫èÂíåÁ¥¢ÂºïÁöÑÊéíÂàóÈ°∫Â∫è‰∏ÄËá¥ÔºåÊâÄ‰ª•Êü•ËØ¢ÊïàÁéáÂø´ÔºåÂè™Ë¶ÅÊâæÂà∞Á¨¨‰∏Ä‰∏™Á¥¢ÂºïÂÄºËÆ∞ÂΩïÔºåÂÖ∂‰ΩôÂ∞±ËøûÁª≠ÊÄßÁöÑËÆ∞ÂΩïÂú®Áâ©ÁêÜ‰πü‰∏ÄÊ†∑ËøûÁª≠Â≠òÊîæ„ÄÇËÅöÈõÜÁ¥¢ÂºïÂØπÂ∫îÁöÑÁº∫ÁÇπÂ∞±ÊòØ‰øÆÊîπÊÖ¢ÔºåÂõ†‰∏∫‰∏∫‰∫Ü‰øùËØÅË°®‰∏≠ËÆ∞ÂΩïÁöÑÁâ©ÁêÜÂíåÁ¥¢ÂºïÈ°∫Â∫è‰∏ÄËá¥ÔºåÂú®ËÆ∞ÂΩïÊèíÂÖ•ÁöÑÊó∂ÂÄôÔºå‰ºöÂØπÊï∞ÊçÆÈ°µÈáçÊñ∞ÊéíÂ∫è„ÄÇËÅöÈõÜÁ¥¢ÂºïÁ±ª‰ºº‰∫éÊñ∞ÂçéÂ≠óÂÖ∏‰∏≠Áî®ÊãºÈü≥ÂéªÊü•ÊâæÊ±âÂ≠óÔºåÊãºÈü≥Ê£ÄÁ¥¢Ë°®‰∫é‰π¶ËÆ∞È°∫Â∫èÈÉΩÊòØÊåâÁÖßa~zÊéíÂàóÁöÑÔºåÂ∞±ÂÉèÁõ∏ÂêåÁöÑÈÄªËæëÈ°∫Â∫è‰∫éÁâ©ÁêÜÈ°∫Â∫è‰∏ÄÊ†∑ÔºåÂΩì‰Ω†ÈúÄË¶ÅÊü•Êâæa,ai‰∏§‰∏™ËØªÈü≥ÁöÑÂ≠óÔºåÊàñÊòØÊÉ≥‰∏ÄÊ¨°ÂØªÊâæÂ§ö‰∏™ÂÇª(sha)ÁöÑÂêåÈü≥Â≠óÊó∂Ôºå‰πüËÆ∏ÂêëÂêéÁøªÂá†È°µÔºåÊàñÁ¥ßÊé•ÁùÄ‰∏ã‰∏ÄË°åÂ∞±ÂæóÂà∞ÁªìÊûú‰∫Ü„ÄÇ ÈùûËÅöÂêàÁ¥¢Âºï(nonclustered index): ÈùûËÅöÈõÜÁ¥¢ÂºïÊåáÂÆö‰∫ÜË°®‰∏≠ËÆ∞ÂΩïÁöÑÈÄªËæëÈ°∫Â∫èÔºå‰ΩÜÊòØËÆ∞ÂΩïÁöÑÁâ©ÁêÜÂíåÁ¥¢Âºï‰∏ç‰∏ÄÂÆö‰∏ÄËá¥Ôºå‰∏§ÁßçÁ¥¢ÂºïÈÉΩÈááÁî®B+Ê†ëÁªìÊûÑÔºåÈùûËÅöÈõÜÁ¥¢ÂºïÁöÑÂè∂Â≠êÂ±ÇÂπ∂‰∏çÂíåÂÆûÈôÖÊï∞ÊçÆÈ°µÁõ∏ÈáçÂè†ÔºåËÄåÈááÁî®Âè∂Â≠êÂ±ÇÂåÖÂê´‰∏Ä‰∏™ÊåáÂêëË°®‰∏≠ÁöÑËÆ∞ÂΩïÂú®Êï∞ÊçÆÈ°µ‰∏≠ÁöÑÊåáÈíàÊñπÂºè„ÄÇÈùûËÅöÈõÜÁ¥¢ÂºïÂ±ÇÊ¨°Â§öÔºå‰∏ç‰ºöÈÄ†ÊàêÊï∞ÊçÆÈáçÊéí„ÄÇÈùûËÅöÈõÜÁ¥¢ÂºïÁ±ª‰ººÂú®Êñ∞ÂçéÂ≠óÂÖ∏‰∏äÈÄöËøáÂÅèÊóÅÈÉ®È¶ñÊù•Êü•ËØ¢Ê±âÂ≠óÔºåÊ£ÄÁ¥¢Ë°®‰πüËÆ∏ÊòØÊåâÁÖßÊ®™„ÄÅÁ´ñ„ÄÅÊíáÊù•ÊéíÂàóÁöÑÔºå‰ΩÜÊòØÁî±‰∫éÊ≠£Êñá‰∏≠ÊòØa~zÁöÑÊãºÈü≥È°∫Â∫èÔºåÊâÄ‰ª•Â∞±Á±ª‰ºº‰∫éÈÄªËæëÂú∞ÂùÄ‰∫éÁâ©ÁêÜÂú∞ÂùÄÁöÑ‰∏çÂØπÂ∫î„ÄÇÂêåÊó∂ÈÄÇÁî®ÁöÑÊÉÖÂÜµÂ∞±Âú®‰∫éÂàÜÁªÑÔºåÂ§ßÊï∞ÁõÆÁöÑ‰∏çÂêåÂÄºÔºåÈ¢ëÁπÅÊõ¥Êñ∞ÁöÑÂàó‰∏≠ÔºåËøô‰∫õÊÉÖÂÜµÂç≥‰∏çÈÄÇÂêàËÅöÈõÜÁ¥¢Âºï„ÄÇ Ê†πÊú¨Âå∫Âà´Ôºö ËÅöÈõÜÁ¥¢ÂºïÂíåÈùûËÅöÈõÜÁ¥¢ÂºïÁöÑÊ†πÊú¨Âå∫Âà´ÊòØË°®ËÆ∞ÂΩïÁöÑÊéíÂàóÈ°∫Â∫èÂíå‰∏éÁ¥¢ÂºïÁöÑÊéíÂàóÈ°∫Â∫èÊòØÂê¶‰∏ÄËá¥„ÄÇ ‰∏â„ÄÅ‰∫ãÂä°1.‰ªÄ‰πàÊòØ‰∫ãÂä°Ôºü ‰∫ãÂä°ÊòØÂØπÊï∞ÊçÆÂ∫ì‰∏≠‰∏ÄÁ≥ªÂàóÊìç‰ΩúËøõË°åÁªü‰∏ÄÁöÑÂõûÊªöÊàñËÄÖÊèê‰∫§ÁöÑÊìç‰ΩúÔºå‰∏ªË¶ÅÁî®Êù•‰øùËØÅÊï∞ÊçÆÁöÑÂÆåÊï¥ÊÄßÂíå‰∏ÄËá¥ÊÄß„ÄÇ 2.‰∫ãÂä°ÂõõÂ§ßÁâπÊÄßÔºàACIDÔºâÂéüÂ≠êÊÄß„ÄÅ‰∏ÄËá¥ÊÄß„ÄÅÈöîÁ¶ªÊÄß„ÄÅÊåÅ‰πÖÊÄß? ÂéüÂ≠êÊÄßÔºàAtomicityÔºâ:ÂéüÂ≠êÊÄßÊòØÊåá‰∫ãÂä°ÂåÖÂê´ÁöÑÊâÄÊúâÊìç‰ΩúË¶Å‰πàÂÖ®ÈÉ®ÊàêÂäüÔºåË¶Å‰πàÂÖ®ÈÉ®Â§±Ë¥•ÂõûÊªöÔºåÂõ†Ê≠§‰∫ãÂä°ÁöÑÊìç‰ΩúÂ¶ÇÊûúÊàêÂäüÂ∞±ÂøÖÈ°ªË¶ÅÂÆåÂÖ®Â∫îÁî®Âà∞Êï∞ÊçÆÂ∫ìÔºåÂ¶ÇÊûúÊìç‰ΩúÂ§±Ë¥•Âàô‰∏çËÉΩÂØπÊï∞ÊçÆÂ∫ìÊúâ‰ªª‰ΩïÂΩ±Âìç„ÄÇ ‰∏ÄËá¥ÊÄßÔºàConsistencyÔºâ:‰∫ãÂä°ÂºÄÂßãÂâçÂíåÁªìÊùüÂêéÔºåÊï∞ÊçÆÂ∫ìÁöÑÂÆåÊï¥ÊÄßÁ∫¶ÊùüÊ≤°ÊúâË¢´Á†¥Âùè„ÄÇÊØîÂ¶ÇAÂêëBËΩ¨Ë¥¶Ôºå‰∏çÂèØËÉΩAÊâ£‰∫ÜÈí±ÔºåBÂç¥Ê≤°Êî∂Âà∞„ÄÇ ÈöîÁ¶ªÊÄßÔºàIsolationÔºâ:ÈöîÁ¶ªÊÄßÊòØÂΩìÂ§ö‰∏™Áî®Êà∑Âπ∂ÂèëËÆøÈóÆÊï∞ÊçÆÂ∫ìÊó∂ÔºåÊØîÂ¶ÇÊìç‰ΩúÂêå‰∏ÄÂº†Ë°®Êó∂ÔºåÊï∞ÊçÆÂ∫ì‰∏∫ÊØè‰∏Ä‰∏™Áî®Êà∑ÂºÄÂêØÁöÑ‰∫ãÂä°Ôºå‰∏çËÉΩË¢´ÂÖ∂‰ªñ‰∫ãÂä°ÁöÑÊìç‰ΩúÊâÄÂπ≤Êâ∞ÔºåÂ§ö‰∏™Âπ∂Âèë‰∫ãÂä°‰πãÈó¥Ë¶ÅÁõ∏‰∫íÈöîÁ¶ª„ÄÇÂêå‰∏ÄÊó∂Èó¥ÔºåÂè™ÂÖÅËÆ∏‰∏Ä‰∏™‰∫ãÂä°ËØ∑Ê±ÇÂêå‰∏ÄÊï∞ÊçÆÔºå‰∏çÂêåÁöÑ‰∫ãÂä°‰πãÈó¥ÂΩºÊ≠§Ê≤°Êúâ‰ªª‰ΩïÂπ≤Êâ∞„ÄÇÊØîÂ¶ÇAÊ≠£Âú®‰ªé‰∏ÄÂº†Èì∂Ë°åÂç°‰∏≠ÂèñÈí±ÔºåÂú®AÂèñÈí±ÁöÑËøáÁ®ãÁªìÊùüÂâçÔºåB‰∏çËÉΩÂêëËøôÂº†Âç°ËΩ¨Ë¥¶„ÄÇ ÊåÅ‰πÖÊÄßÔºàDurabilityÔºâ:ÊåÅ‰πÖÊÄßÊòØÊåá‰∏Ä‰∏™‰∫ãÂä°‰∏ÄÊó¶Ë¢´Êèê‰∫§‰∫ÜÔºåÈÇ£‰πàÂØπÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊï∞ÊçÆÁöÑÊîπÂèòÂ∞±ÊòØÊ∞∏‰πÖÊÄßÁöÑÔºåÂç≥‰æøÊòØÂú®Êï∞ÊçÆÂ∫ìÁ≥ªÁªüÈÅáÂà∞ÊïÖÈöúÁöÑÊÉÖÂÜµ‰∏ã‰πü‰∏ç‰ºö‰∏¢Â§±Êèê‰∫§‰∫ãÂä°ÁöÑÊìç‰Ωú„ÄÇ 3.‰∫ãÂä°ÁöÑÂπ∂Âèë?‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ÔºåÊØè‰∏™Á∫ßÂà´‰ºöÂºïÂèë‰ªÄ‰πàÈóÆÈ¢òÔºåMySQLÈªòËÆ§ÊòØÂì™‰∏™Á∫ßÂà´? ‰ªéÁêÜËÆ∫‰∏äÊù•ËØ¥, ‰∫ãÂä°Â∫îËØ•ÂΩºÊ≠§ÂÆåÂÖ®ÈöîÁ¶ª, ‰ª•ÈÅøÂÖçÂπ∂Âèë‰∫ãÂä°ÊâÄÂØºËá¥ÁöÑÈóÆÈ¢òÔºåÁÑ∂ËÄå, ÈÇ£Ê†∑‰ºöÂØπÊÄßËÉΩ‰∫ßÁîüÊûÅÂ§ßÁöÑÂΩ±Âìç, Âõ†‰∏∫‰∫ãÂä°ÂøÖÈ°ªÊåâÈ°∫Â∫èËøêË°åÔºå Âú®ÂÆûÈôÖÂºÄÂèë‰∏≠, ‰∏∫‰∫ÜÊèêÂçáÊÄßËÉΩ, ‰∫ãÂä°‰ºö‰ª•ËæÉ‰ΩéÁöÑÈöîÁ¶ªÁ∫ßÂà´ËøêË°åÔºå ‰∫ãÂä°ÁöÑÈöîÁ¶ªÁ∫ßÂà´ÂèØ‰ª•ÈÄöËøáÈöîÁ¶ª‰∫ãÂä°Â±ûÊÄßÊåáÂÆö„ÄÇ‰∫ãÂä°ÁöÑÂπ∂ÂèëÈóÆÈ¢ò 1„ÄÅËÑèËØªÔºö‰∫ãÂä°AËØªÂèñ‰∫Ü‰∫ãÂä°BÊõ¥Êñ∞ÁöÑÊï∞ÊçÆÔºåÁÑ∂ÂêéBÂõûÊªöÊìç‰ΩúÔºåÈÇ£‰πàAËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÊòØËÑèÊï∞ÊçÆ 2„ÄÅ‰∏çÂèØÈáçÂ§çËØªÔºö‰∫ãÂä° A Â§öÊ¨°ËØªÂèñÂêå‰∏ÄÊï∞ÊçÆÔºå‰∫ãÂä° B Âú®‰∫ãÂä°AÂ§öÊ¨°ËØªÂèñÁöÑËøáÁ®ã‰∏≠ÔºåÂØπÊï∞ÊçÆ‰Ωú‰∫ÜÊõ¥Êñ∞Âπ∂Êèê‰∫§ÔºåÂØºËá¥‰∫ãÂä°AÂ§öÊ¨°ËØªÂèñÂêå‰∏ÄÊï∞ÊçÆÊó∂ÔºåÁªìÊûúÂõ†Ê≠§Êú¨‰∫ãÂä°ÂÖàÂêé‰∏§Ê¨°ËØªÂà∞ÁöÑÊï∞ÊçÆÁªìÊûú‰ºö‰∏ç‰∏ÄËá¥„ÄÇ 3„ÄÅÂπªËØªÔºöÂπªËØªËß£ÂÜ≥‰∫Ü‰∏çÈáçÂ§çËØªÔºå‰øùËØÅ‰∫ÜÂêå‰∏Ä‰∏™‰∫ãÂä°ÈáåÔºåÊü•ËØ¢ÁöÑÁªìÊûúÈÉΩÊòØ‰∫ãÂä°ÂºÄÂßãÊó∂ÁöÑÁä∂ÊÄÅÔºà‰∏ÄËá¥ÊÄßÔºâ„ÄÇ ‰æãÂ¶ÇÔºö‰∫ãÂä°T1ÂØπ‰∏Ä‰∏™Ë°®‰∏≠ÊâÄÊúâÁöÑË°åÁöÑÊüê‰∏™Êï∞ÊçÆÈ°πÂÅö‰∫Ü‰ªé‚Äú1‚Äù‰øÆÊîπ‰∏∫‚Äú2‚ÄùÁöÑÊìç‰Ωú ËøôÊó∂‰∫ãÂä°T2ÂèàÂØπËøô‰∏™Ë°®‰∏≠ÊèíÂÖ•‰∫Ü‰∏ÄË°åÊï∞ÊçÆÈ°πÔºåËÄåËøô‰∏™Êï∞ÊçÆÈ°πÁöÑÊï∞ÂÄºËøòÊòØ‰∏∫‚Äú1‚ÄùÂπ∂‰∏îÊèê‰∫§ÁªôÊï∞ÊçÆÂ∫ì„ÄÇ ËÄåÊìç‰Ωú‰∫ãÂä°T1ÁöÑÁî®Êà∑Â¶ÇÊûúÂÜçÊü•ÁúãÂàöÂàö‰øÆÊîπÁöÑÊï∞ÊçÆÔºå‰ºöÂèëÁé∞ËøòÊúâË∑üÊ≤°Êúâ‰øÆÊîπ‰∏ÄÊ†∑ÔºåÂÖ∂ÂÆûËøôË°åÊòØ‰ªé‰∫ãÂä°T2‰∏≠Ê∑ªÂä†ÁöÑÔºåÂ∞±Â•ΩÂÉè‰∫ßÁîüÂπªËßâ‰∏ÄÊ†∑ÔºåËøôÂ∞±ÊòØÂèëÁîü‰∫ÜÂπªËØª„ÄÇÂ∞èÁªìÔºö‰∏çÂèØÈáçÂ§çËØªÁöÑÂíåÂπªËØªÂæàÂÆπÊòìÊ∑∑Ê∑ÜÔºå‰∏çÂèØÈáçÂ§çËØª‰æßÈáç‰∫é‰øÆÊîπÔºåÂπªËØª‰æßÈáç‰∫éÊñ∞Â¢ûÊàñÂà†Èô§„ÄÇËß£ÂÜ≥‰∏çÂèØÈáçÂ§çËØªÁöÑÈóÆÈ¢òÂè™ÈúÄÈîÅ‰ΩèÊª°Ë∂≥Êù°‰ª∂ÁöÑË°åÔºåËß£ÂÜ≥ÂπªËØªÈúÄË¶ÅÈîÅË°®„ÄÇ ‰∫ãÂä°ÁöÑÈöîÁ¶ªÁ∫ßÂà´ ËØªÊú™Êèê‰∫§ÔºöÂè¶‰∏Ä‰∏™‰∫ãÂä°‰øÆÊîπ‰∫ÜÊï∞ÊçÆÔºå‰ΩÜÂ∞öÊú™Êèê‰∫§ÔºåËÄåÊú¨‰∫ãÂä°‰∏≠ÁöÑSELECT‰ºöËØªÂà∞Ëøô‰∫õÊú™Ë¢´Êèê‰∫§ÁöÑÊï∞ÊçÆËÑèËØª ‰∏çÂèØÈáçÂ§çËØªÔºö‰∫ãÂä° A Â§öÊ¨°ËØªÂèñÂêå‰∏ÄÊï∞ÊçÆÔºå‰∫ãÂä° B Âú®‰∫ãÂä°AÂ§öÊ¨°ËØªÂèñÁöÑËøáÁ®ã‰∏≠ÔºåÂØπÊï∞ÊçÆ‰Ωú‰∫ÜÊõ¥Êñ∞Âπ∂Êèê‰∫§ÔºåÂØºËá¥‰∫ãÂä°AÂ§öÊ¨°ËØªÂèñÂêå‰∏ÄÊï∞ÊçÆÊó∂ÔºåÁªìÊûúÂõ†Ê≠§Êú¨‰∫ãÂä°ÂÖàÂêé‰∏§Ê¨°ËØªÂà∞ÁöÑÊï∞ÊçÆÁªìÊûú‰ºö‰∏ç‰∏ÄËá¥„ÄÇ ÂèØÈáçÂ§çËØªÔºöÂú®Âêå‰∏Ä‰∏™‰∫ãÂä°ÈáåÔºåSELECTÁöÑÁªìÊûúÊòØ‰∫ãÂä°ÂºÄÂßãÊó∂Êó∂Èó¥ÁÇπÁöÑÁä∂ÊÄÅÔºåÂõ†Ê≠§ÔºåÂêåÊ†∑ÁöÑSELECTÊìç‰ΩúËØªÂà∞ÁöÑÁªìÊûú‰ºöÊòØ‰∏ÄËá¥ÁöÑ„ÄÇ‰ΩÜÊòØÔºå‰ºöÊúâÂπªËØªÁé∞Ë±° ‰∏≤Ë°åÂåñÔºöÊúÄÈ´òÁöÑÈöîÁ¶ªÁ∫ßÂà´ÔºåÂú®Ëøô‰∏™ÈöîÁ¶ªÁ∫ßÂà´‰∏ãÔºå‰∏ç‰ºö‰∫ßÁîü‰ªª‰ΩïÂºÇÂ∏∏„ÄÇÂπ∂ÂèëÁöÑ‰∫ãÂä°ÔºåÂ∞±ÂÉè‰∫ãÂä°ÊòØÂú®‰∏Ä‰∏™‰∏™ÊåâÁÖßÈ°∫Â∫èÊâßË°å‰∏ÄÊ†∑ ÁâπÂà´Ê≥®ÊÑèÔºö MySQLÈªòËÆ§ÁöÑ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´‰∏∫repeatable-read MySQL ÊîØÊåÅ 4 Áßç‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´. ‰∫ãÂä°ÁöÑÈöîÁ¶ªÁ∫ßÂà´Ë¶ÅÂæóÂà∞Â∫ïÂ±ÇÊï∞ÊçÆÂ∫ìÂºïÊìéÁöÑÊîØÊåÅ, ËÄå‰∏çÊòØÂ∫îÁî®Á®ãÂ∫èÊàñËÄÖÊ°ÜÊû∂ÁöÑÊîØÊåÅ. Oracle ÊîØÊåÅÁöÑ 2 Áßç‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ÔºöREAD_COMMITED , SERIALIZABLE SQLËßÑËåÉÊâÄËßÑÂÆöÁöÑÊ†áÂáÜÔºå‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ìÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÂèØËÉΩ‰ºöÊúâ‰∫õÂ∑ÆÂºÇ MySQL‰∏≠ÈªòËÆ§‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ÊòØ‚ÄúÂèØÈáçÂ§çËØª‚ÄùÊó∂Âπ∂‰∏ç‰ºöÈîÅ‰ΩèËØªÂèñÂà∞ÁöÑË°å ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ÔºöÊú™Êèê‰∫§ËØªÊó∂ÔºåÂÜôÊï∞ÊçÆÂè™‰ºöÈîÅ‰ΩèÁõ∏Â∫îÁöÑË°å„ÄÇ ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´‰∏∫ÔºöÂèØÈáçÂ§çËØªÊó∂ÔºåÂÜôÊï∞ÊçÆ‰ºöÈîÅ‰ΩèÊï¥Âº†Ë°®„ÄÇ ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´‰∏∫Ôºö‰∏≤Ë°åÂåñÊó∂ÔºåËØªÂÜôÊï∞ÊçÆÈÉΩ‰ºöÈîÅ‰ΩèÊï¥Âº†Ë°®„ÄÇ ÈöîÁ¶ªÁ∫ßÂà´Ë∂äÈ´òÔºåË∂äËÉΩ‰øùËØÅÊï∞ÊçÆÁöÑÂÆåÊï¥ÊÄßÂíå‰∏ÄËá¥ÊÄßÔºå‰ΩÜÊòØÂØπÂπ∂ÂèëÊÄßËÉΩÁöÑÂΩ±Âìç‰πüË∂äÂ§ßÔºåÈ±ºÂíåÁÜäÊéå‰∏çÂèØÂÖºÂæóÂïä„ÄÇÂØπ‰∫éÂ§öÊï∞Â∫îÁî®Á®ãÂ∫èÔºåÂèØ‰ª•‰ºòÂÖàËÄÉËôëÊääÊï∞ÊçÆÂ∫ìÁ≥ªÁªüÁöÑÈöîÁ¶ªÁ∫ßÂà´ËÆæ‰∏∫Read CommittedÔºåÂÆÉËÉΩÂ§üÈÅøÂÖçËÑèËØªÂèñÔºåËÄå‰∏îÂÖ∑ÊúâËæÉÂ•ΩÁöÑÂπ∂ÂèëÊÄßËÉΩ„ÄÇÂ∞ΩÁÆ°ÂÆÉ‰ºöÂØºËá¥‰∏çÂèØÈáçÂ§çËØª„ÄÅÂπªËØªËøô‰∫õÂπ∂ÂèëÈóÆÈ¢òÔºåÂú®ÂèØËÉΩÂá∫Áé∞ËøôÁ±ªÈóÆÈ¢òÁöÑ‰∏™Âà´Âú∫ÂêàÔºåÂèØ‰ª•Áî±Â∫îÁî®Á®ãÂ∫èÈááÁî®ÊÇ≤ËßÇÈîÅÊàñ‰πêËßÇÈîÅÊù•ÊéßÂà∂„ÄÇ 4.‰∫ãÂä°‰º†Êí≠Ë°å‰∏∫ 1.PROPAGATION_REQUIREDÔºöÂ¶ÇÊûúÂΩìÂâçÊ≤°Êúâ‰∫ãÂä°ÔºåÂ∞±ÂàõÂª∫‰∏Ä‰∏™Êñ∞‰∫ãÂä°ÔºåÂ¶ÇÊûúÂΩìÂâçÂ≠òÂú®‰∫ãÂä°ÔºåÂ∞±Âä†ÂÖ•ËØ•‰∫ãÂä°ÔºåËØ•ËÆæÁΩÆÊòØÊúÄÂ∏∏Áî®ÁöÑËÆæÁΩÆ„ÄÇ 2.PROPAGATION_SUPPORTSÔºöÊîØÊåÅÂΩìÂâç‰∫ãÂä°ÔºåÂ¶ÇÊûúÂΩìÂâçÂ≠òÂú®‰∫ãÂä°ÔºåÂ∞±Âä†ÂÖ•ËØ•‰∫ãÂä°ÔºåÂ¶ÇÊûúÂΩìÂâç‰∏çÂ≠òÂú®‰∫ãÂä°ÔºåÂ∞±‰ª•Èùû‰∫ãÂä°ÊâßË°å„ÄÇ 3.PROPAGATION_MANDATORYÔºöÊîØÊåÅÂΩìÂâç‰∫ãÂä°ÔºåÂ¶ÇÊûúÂΩìÂâçÂ≠òÂú®‰∫ãÂä°ÔºåÂ∞±Âä†ÂÖ•ËØ•‰∫ãÂä°ÔºåÂ¶ÇÊûúÂΩìÂâç‰∏çÂ≠òÂú®‰∫ãÂä°ÔºåÂ∞±ÊäõÂá∫ÂºÇÂ∏∏„ÄÇ 4.PROPAGATION_REQUIRES_NEWÔºöÂàõÂª∫Êñ∞‰∫ãÂä°ÔºåÊó†ËÆ∫ÂΩìÂâçÂ≠ò‰∏çÂ≠òÂú®‰∫ãÂä°ÔºåÈÉΩÂàõÂª∫Êñ∞‰∫ãÂä°„ÄÇ 5.PROPAGATION_NOT_SUPPORTEDÔºö‰ª•Èùû‰∫ãÂä°ÊñπÂºèÊâßË°åÊìç‰ΩúÔºåÂ¶ÇÊûúÂΩìÂâçÂ≠òÂú®‰∫ãÂä°ÔºåÂ∞±ÊääÂΩìÂâç‰∫ãÂä°ÊåÇËµ∑„ÄÇ 6.PROPAGATION_NEVERÔºö‰ª•Èùû‰∫ãÂä°ÊñπÂºèÊâßË°åÔºåÂ¶ÇÊûúÂΩìÂâçÂ≠òÂú®‰∫ãÂä°ÔºåÂàôÊäõÂá∫ÂºÇÂ∏∏„ÄÇ 7.PROPAGATION_NESTEDÔºöÂ¶ÇÊûúÂΩìÂâçÂ≠òÂú®‰∫ãÂä°ÔºåÂàôÂú®ÂµåÂ•ó‰∫ãÂä°ÂÜÖÊâßË°å„ÄÇÂ¶ÇÊûúÂΩìÂâçÊ≤°Êúâ‰∫ãÂä°ÔºåÂàôÊâßË°å‰∏éPROPAGATION_REQUIREDÁ±ª‰ººÁöÑÊìç‰Ωú„ÄÇ 5.ÂµåÂ•ó‰∫ãÂä° ‰ªÄ‰πàÊòØÂµåÂ•ó‰∫ãÂä°Ôºü ÂµåÂ•óÊòØÂ≠ê‰∫ãÂä°Â•óÂú®Áà∂‰∫ãÂä°‰∏≠ÊâßË°åÔºåÂ≠ê‰∫ãÂä°ÊòØÁà∂‰∫ãÂä°ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂú®ËøõÂÖ•Â≠ê‰∫ãÂä°‰πãÂâçÔºåÁà∂‰∫ãÂä°Âª∫Á´ã‰∏Ä‰∏™ÂõûÊªöÁÇπÔºåÂè´save pointÔºåÁÑ∂ÂêéÊâßË°åÂ≠ê‰∫ãÂä°ÔºåËøô‰∏™Â≠ê‰∫ãÂä°ÁöÑÊâßË°å‰πüÁÆóÊòØÁà∂‰∫ãÂä°ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÁÑ∂ÂêéÂ≠ê‰∫ãÂä°ÊâßË°åÁªìÊùüÔºåÁà∂‰∫ãÂä°ÁªßÁª≠ÊâßË°å„ÄÇÈáçÁÇπÂ∞±Âú®‰∫éÈÇ£‰∏™save point„ÄÇÁúãÂá†‰∏™ÈóÆÈ¢òÂ∞±Êòé‰∫Ü‰∫ÜÔºö Â¶ÇÊûúÂ≠ê‰∫ãÂä°ÂõûÊªöÔºå‰ºöÂèëÁîü‰ªÄ‰πàÔºü Áà∂‰∫ãÂä°‰ºöÂõûÊªöÂà∞ËøõÂÖ•Â≠ê‰∫ãÂä°ÂâçÂª∫Á´ãÁöÑsave pointÔºåÁÑ∂ÂêéÂ∞ùËØïÂÖ∂‰ªñÁöÑ‰∫ãÂä°ÊàñËÄÖÂÖ∂‰ªñÁöÑ‰∏öÂä°ÈÄªËæëÔºåÁà∂‰∫ãÂä°‰πãÂâçÁöÑÊìç‰Ωú‰∏ç‰ºöÂèóÂà∞ÂΩ±ÂìçÔºåÊõ¥‰∏ç‰ºöËá™Âä®ÂõûÊªö„ÄÇ Â¶ÇÊûúÁà∂‰∫ãÂä°ÂõûÊªöÔºå‰ºöÂèëÁîü‰ªÄ‰πàÔºü Áà∂‰∫ãÂä°ÂõûÊªöÔºåÂ≠ê‰∫ãÂä°‰πü‰ºöË∑üÁùÄÂõûÊªöÔºÅ‰∏∫‰ªÄ‰πàÂë¢ÔºåÂõ†‰∏∫Áà∂‰∫ãÂä°ÁªìÊùü‰πãÂâçÔºåÂ≠ê‰∫ãÂä°ÊòØ‰∏ç‰ºöÊèê‰∫§ÁöÑÔºåÊàë‰ª¨ËØ¥Â≠ê‰∫ãÂä°ÊòØÁà∂‰∫ãÂä°ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÊ≠£ÊòØËøô‰∏™ÈÅìÁêÜ„ÄÇÈÇ£‰πàÔºö ‰∫ãÂä°ÁöÑÊèê‰∫§ÔºåÊòØ‰ªÄ‰πàÊÉÖÂÜµÔºü ÊòØÁà∂‰∫ãÂä°ÂÖàÊèê‰∫§ÔºåÁÑ∂ÂêéÂ≠ê‰∫ãÂä°Êèê‰∫§ÔºåËøòÊòØÂ≠ê‰∫ãÂä°ÂÖàÊèê‰∫§ÔºåÁà∂‰∫ãÂä°ÂÜçÊèê‰∫§ÔºüÁ≠îÊ°àÊòØÁ¨¨‰∫åÁßçÊÉÖÂÜµÔºåËøòÊòØÈÇ£Âè•ËØùÔºåÂ≠ê‰∫ãÂä°ÊòØÁà∂‰∫ãÂä°ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÁî±Áà∂‰∫ãÂä°Áªü‰∏ÄÊèê‰∫§„ÄÇ ÂèÇËÄÉÊñáÁ´†Ôºöhttps://blog.csdn.net/liangxw1/article/details/51197560 Âõõ„ÄÅÂ≠òÂÇ®ÂºïÊìé1.MySQLÂ∏∏ËßÅÁöÑ‰∏âÁßçÂ≠òÂÇ®ÂºïÊìéÔºàInnoDB„ÄÅMyISAM„ÄÅMEMORYÔºâÁöÑÂå∫Âà´? ‰∏§ÁßçÂ≠òÂÇ®ÂºïÊìéÁöÑÂ§ßËá¥Âå∫Âà´Ë°®Áé∞Âú®Ôºö 1.InnoDBÊîØÊåÅ‰∫ãÂä°ÔºåMyISAM‰∏çÊîØÊåÅÔºå Ëøô‰∏ÄÁÇπÊòØÈùûÂ∏∏‰πãÈáçË¶Å„ÄÇ‰∫ãÂä°ÊòØ‰∏ÄÁßçÈ´òÁ∫ßÁöÑÂ§ÑÁêÜÊñπÂºèÔºåÂ¶ÇÂú®‰∏Ä‰∫õÂàóÂ¢ûÂà†Êîπ‰∏≠Âè™Ë¶ÅÂì™‰∏™Âá∫ÈîôËøòÂèØ‰ª•ÂõûÊªöËøòÂéüÔºåËÄåMyISAMÂ∞±‰∏çÂèØ‰ª•‰∫Ü„ÄÇ 2.MyISAMÈÄÇÂêàÊü•ËØ¢‰ª•ÂèäÊèíÂÖ•‰∏∫‰∏ªÁöÑÂ∫îÁî®„ÄÇ 3.InnoDBÈÄÇÂêàÈ¢ëÁπÅ‰øÆÊîπ‰ª•ÂèäÊ∂âÂèäÂà∞ÂÆâÂÖ®ÊÄßËæÉÈ´òÁöÑÂ∫îÁî®„ÄÇ 4.InnoDBÊîØÊåÅÂ§ñÈîÆÔºåMyISAM‰∏çÊîØÊåÅ„ÄÇ 5.‰ªéMySQL5.5.5‰ª•ÂêéÔºåInnoDBÊòØÈªòËÆ§ÂºïÊìé„ÄÇ 6.InnoDB‰∏çÊîØÊåÅFULLTEXTÁ±ªÂûãÁöÑÁ¥¢Âºï„ÄÇ 7.InnoDB‰∏≠‰∏ç‰øùÂ≠òË°®ÁöÑË°åÊï∞ÔºåÂ¶Çselect count() from tableÊó∂ÔºåInnoDBÈúÄË¶ÅÊâ´Êèè‰∏ÄÈÅçÊï¥‰∏™Ë°®Êù•ËÆ°ÁÆóÊúâÂ§öÂ∞ëË°åÔºå‰ΩÜÊòØMyISAMÂè™Ë¶ÅÁÆÄÂçïÁöÑËØªÂá∫‰øùÂ≠òÂ•ΩÁöÑË°åÊï∞Âç≥ÂèØ„ÄÇÊ≥®ÊÑèÁöÑÊòØÔºåÂΩìcount()ËØ≠Âè•ÂåÖÂê´whereÊù°‰ª∂Êó∂MyISAM‰πüÈúÄË¶ÅÊâ´ÊèèÊï¥‰∏™Ë°®„ÄÇ 8.ÂØπ‰∫éËá™Â¢ûÈïøÁöÑÂ≠óÊÆµÔºåInnoDB‰∏≠ÂøÖÈ°ªÂåÖÂê´Âè™ÊúâËØ•Â≠óÊÆµÁöÑÁ¥¢ÂºïÔºå‰ΩÜÊòØÂú®MyISAMË°®‰∏≠ÂèØ‰ª•ÂíåÂÖ∂‰ªñÂ≠óÊÆµ‰∏ÄËµ∑Âª∫Á´ãËÅîÂêàÁ¥¢Âºï„ÄÇ 9.DELETE FROM tableÊó∂ÔºåInnoDB‰∏ç‰ºöÈáçÊñ∞Âª∫Á´ãË°®ÔºåËÄåÊòØ‰∏ÄË°å‰∏ÄË°åÁöÑ Âà†Èô§ÔºåÊïàÁéáÈùûÂ∏∏ÊÖ¢„ÄÇMyISAMÂàô‰ºöÈáçÂª∫Ë°®„ÄÇ 10.InnoDBÊîØÊåÅË°åÈîÅÔºàÊüê‰∫õÊÉÖÂÜµ‰∏ãËøòÊòØÈîÅÊï¥Ë°®ÔºåÂ¶Ç update table set a=1 where user like ‚Äò%lee%‚Äô„ÄÇ 2.MySQLÂ≠òÂÇ®ÂºïÊìéMyISAM‰∏éInnoDBÂ¶Ç‰ΩïÈÄâÊã© MySQLÊúâÂ§öÁßçÂ≠òÂÇ®ÂºïÊìéÔºåÊØèÁßçÂ≠òÂÇ®ÂºïÊìéÊúâÂêÑËá™ÁöÑ‰ºòÁº∫ÁÇπÔºåÂèØ‰ª•Êã©‰ºòÈÄâÊã©‰ΩøÁî®ÔºöMyISAM„ÄÅInnoDB„ÄÅMERGE„ÄÅMEMORY(HEAP)„ÄÅBDB(BerkeleyDB)„ÄÅEXAMPLE„ÄÅFEDERATED„ÄÅARCHIVE„ÄÅCSV„ÄÅBLACKHOLE„ÄÇ ËôΩÁÑ∂MySQLÈáåÁöÑÂ≠òÂÇ®ÂºïÊìé‰∏çÂè™ÊòØMyISAM‰∏éInnoDBËøô‰∏§‰∏™Ôºå‰ΩÜÂ∏∏Áî®ÁöÑÂ∞±ÊòØ‰∏§‰∏™„ÄÇÂÖ≥‰∫éMySQLÊï∞ÊçÆÂ∫ìÊèê‰æõÁöÑ‰∏§ÁßçÂ≠òÂÇ®ÂºïÊìéÔºåMyISAM‰∏éInnoDBÈÄâÊã©‰ΩøÁî®Ôºö 1.INNODB‰ºöÊîØÊåÅ‰∏Ä‰∫õÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÁöÑÈ´òÁ∫ßÂäüËÉΩÔºåÂ¶Ç‰∫ãÂä°ÂäüËÉΩÂíåË°åÁ∫ßÈîÅÔºåMyISAM‰∏çÊîØÊåÅ„ÄÇ 2.MyISAMÁöÑÊÄßËÉΩÊõ¥‰ºòÔºåÂç†Áî®ÁöÑÂ≠òÂÇ®Á©∫Èó¥Â∞ëÔºåÊâÄ‰ª•ÔºåÈÄâÊã©‰ΩïÁßçÂ≠òÂÇ®ÂºïÊìéÔºåËßÜÂÖ∑‰ΩìÂ∫îÁî®ËÄåÂÆö„ÄÇ Â¶ÇÊûú‰Ω†ÁöÑÂ∫îÁî®Á®ãÂ∫è‰∏ÄÂÆöË¶Å‰ΩøÁî®‰∫ãÂä°ÔºåÊØ´Êó†ÁñëÈóÆ‰Ω†Ë¶ÅÈÄâÊã©INNODBÂºïÊìé„ÄÇ‰ΩÜË¶ÅÊ≥®ÊÑèÔºåINNODBÁöÑË°åÁ∫ßÈîÅÊòØÊúâÊù°‰ª∂ÁöÑ„ÄÇÂú®whereÊù°‰ª∂Ê≤°Êúâ‰ΩøÁî®‰∏ªÈîÆÊó∂ÔºåÁÖßÊ†∑‰ºöÈîÅÂÖ®Ë°®„ÄÇÊØîÂ¶ÇDELETE FROM mytableËøôÊ†∑ÁöÑÂà†Èô§ËØ≠Âè•„ÄÇ Â¶ÇÊûú‰Ω†ÁöÑÂ∫îÁî®Á®ãÂ∫èÂØπÊü•ËØ¢ÊÄßËÉΩË¶ÅÊ±ÇËæÉÈ´òÔºåÂ∞±Ë¶Å‰ΩøÁî®MyISAM‰∫Ü„ÄÇMyISAMÁ¥¢ÂºïÂíåÊï∞ÊçÆÊòØÂàÜÂºÄÁöÑÔºåËÄå‰∏îÂÖ∂Á¥¢ÂºïÊòØÂéãÁº©ÁöÑÔºåÂèØ‰ª•Êõ¥Â•ΩÂú∞Âà©Áî®ÂÜÖÂ≠ò„ÄÇÊâÄ‰ª•ÂÆÉÁöÑÊü•ËØ¢ÊÄßËÉΩÊòéÊòæ‰ºò‰∫éINNODB„ÄÇÂéãÁº©ÂêéÁöÑÁ¥¢Âºï‰πüËÉΩËäÇÁ∫¶‰∏Ä‰∫õÁ£ÅÁõòÁ©∫Èó¥„ÄÇMyISAMÊã•ÊúâÂÖ®ÊñáÁ¥¢ÂºïÁöÑÂäüËÉΩÔºåËøôÂèØ‰ª•ÊûÅÂ§ßÂú∞‰ºòÂåñLIKEÊü•ËØ¢ÁöÑÊïàÁéá„ÄÇ Êúâ‰∫∫ËØ¥MyISAMÂè™ËÉΩÁî®‰∫éÂ∞èÂûãÂ∫îÁî®ÔºåÂÖ∂ÂÆûËøôÂè™ÊòØ‰∏ÄÁßçÂÅèËßÅ„ÄÇÂ¶ÇÊûúÊï∞ÊçÆÈáèÊØîËæÉÂ§ßÔºåËøôÊòØÈúÄË¶ÅÈÄöËøáÂçáÁ∫ßÊû∂ÊûÑÊù•Ëß£ÂÜ≥ÔºåÊØîÂ¶ÇÂàÜË°®ÂàÜÂ∫ìÔºåËÄå‰∏çÊòØÂçïÁ∫ØÂú∞‰æùËµñÂ≠òÂÇ®ÂºïÊìé„ÄÇ Áé∞Âú®‰∏ÄËà¨ÈÉΩÊòØÈÄâÁî®innodb‰∫ÜÔºå‰∏ªË¶ÅÊòØMyISAMÁöÑÂÖ®Ë°®ÈîÅÔºåËØªÂÜô‰∏≤Ë°åÈóÆÈ¢òÔºåÂπ∂ÂèëÊïàÁéáÈîÅË°®ÔºåÊïàÁéá‰ΩéÔºåMyISAMÂØπ‰∫éËØªÂÜôÂØÜÈõÜÂûãÂ∫îÁî®‰∏ÄËà¨ÊòØ‰∏ç‰ºöÂéªÈÄâÁî®ÁöÑ„ÄÇMEMORYÂ≠òÂÇ®ÂºïÊìé MEMORYÊòØMySQL‰∏≠‰∏ÄÁ±ªÁâπÊÆäÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇÂÆÉ‰ΩøÁî®Â≠òÂÇ®Âú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂÜÖÂÆπÊù•ÂàõÂª∫Ë°®ÔºåËÄå‰∏îÊï∞ÊçÆÂÖ®ÈÉ®ÊîæÂú®ÂÜÖÂ≠ò‰∏≠„ÄÇËøô‰∫õÁâπÊÄß‰∏éÂâçÈù¢ÁöÑ‰∏§‰∏™Âæà‰∏çÂêå„ÄÇÊØè‰∏™Âü∫‰∫éMEMORYÂ≠òÂÇ®ÂºïÊìéÁöÑË°®ÂÆûÈôÖÂØπÂ∫î‰∏Ä‰∏™Á£ÅÁõòÊñá‰ª∂„ÄÇËØ•Êñá‰ª∂ÁöÑÊñá‰ª∂Âêç‰∏éË°®ÂêçÁõ∏ÂêåÔºåÁ±ªÂûã‰∏∫frmÁ±ªÂûã„ÄÇËØ•Êñá‰ª∂‰∏≠Âè™Â≠òÂÇ®Ë°®ÁöÑÁªìÊûÑ„ÄÇËÄåÂÖ∂Êï∞ÊçÆÊñá‰ª∂ÔºåÈÉΩÊòØÂ≠òÂÇ®Âú®ÂÜÖÂ≠ò‰∏≠ÔºåËøôÊ†∑ÊúâÂà©‰∫éÊï∞ÊçÆÁöÑÂø´ÈÄüÂ§ÑÁêÜÔºåÊèêÈ´òÊï¥‰∏™Ë°®ÁöÑÊïàÁéá„ÄÇÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåÊúçÂä°Âô®ÈúÄË¶ÅÊúâË∂≥Â§üÁöÑÂÜÖÂ≠òÊù•Áª¥ÊåÅMEMORYÂ≠òÂÇ®ÂºïÊìéÁöÑË°®ÁöÑ‰ΩøÁî®„ÄÇÂ¶ÇÊûú‰∏çÈúÄË¶Å‰∫ÜÔºåÂèØ‰ª•ÈáäÊîæÂÜÖÂ≠òÔºåÁîöËá≥Âà†Èô§‰∏çÈúÄË¶ÅÁöÑË°®„ÄÇ MEMORYÈªòËÆ§‰ΩøÁî®ÂìàÂ∏åÁ¥¢Âºï„ÄÇÈÄüÂ∫¶ÊØî‰ΩøÁî®BÂûãÊ†ëÁ¥¢ÂºïÂø´„ÄÇÂΩìÁÑ∂Â¶ÇÊûú‰Ω†ÊÉ≥Áî®BÂûãÊ†ëÁ¥¢ÂºïÔºåÂèØ‰ª•Âú®ÂàõÂª∫Á¥¢ÂºïÊó∂ÊåáÂÆö„ÄÇ Ê≥®ÊÑèÔºåMEMORYÁî®Âà∞ÁöÑÂæàÂ∞ëÔºåÂõ†‰∏∫ÂÆÉÊòØÊääÊï∞ÊçÆÂ≠òÂà∞ÂÜÖÂ≠ò‰∏≠ÔºåÂ¶ÇÊûúÂÜÖÂ≠òÂá∫Áé∞ÂºÇÂ∏∏Â∞±‰ºöÂΩ±ÂìçÊï∞ÊçÆ„ÄÇÂ¶ÇÊûúÈáçÂêØÊàñËÄÖÂÖ≥Êú∫ÔºåÊâÄÊúâÊï∞ÊçÆÈÉΩ‰ºöÊ∂àÂ§±„ÄÇÂõ†Ê≠§ÔºåÂü∫‰∫éMEMORYÁöÑË°®ÁöÑÁîüÂëΩÂë®ÊúüÂæàÁü≠Ôºå‰∏ÄËà¨ÊòØ‰∏ÄÊ¨°ÊÄßÁöÑ„ÄÇ 3.MySQLÁöÑMyISAM‰∏éInnoDB‰∏§ÁßçÂ≠òÂÇ®ÂºïÊìéÂú®Ôºå‰∫ãÂä°„ÄÅÈîÅÁ∫ßÂà´ÔºåÂêÑËá™ÁöÑÈÄÇÁî®Âú∫ÊôØ? ‰∫ãÂä°Â§ÑÁêÜ‰∏äÊñπÈù¢ MyISAMÔºöÂº∫Ë∞ÉÁöÑÊòØÊÄßËÉΩÔºåÊØèÊ¨°Êü•ËØ¢ÂÖ∑ÊúâÂéüÂ≠êÊÄß,ÂÖ∂ÊâßË°åÊï∞Â∫¶ÊØîInnoDBÁ±ªÂûãÊõ¥Âø´Ôºå‰ΩÜÊòØ‰∏çÊèê‰æõ‰∫ãÂä°ÊîØÊåÅ„ÄÇ InnoDBÔºöÊèê‰æõ‰∫ãÂä°ÊîØÊåÅ‰∫ãÂä°ÔºåÂ§ñÈÉ®ÈîÆÁ≠âÈ´òÁ∫ßÊï∞ÊçÆÂ∫ìÂäüËÉΩ„ÄÇ ÂÖ∑Êúâ‰∫ãÂä°(commit)„ÄÅÂõûÊªö(rollback)ÂíåÂ¥©Ê∫É‰øÆÂ§çËÉΩÂäõ(crash recovery capabilities)ÁöÑ‰∫ãÂä°ÂÆâÂÖ®(transaction-safe (ACID compliant))ÂûãË°®„ÄÇ ÈîÅÁ∫ßÂà´ MyISAMÔºöÂè™ÊîØÊåÅË°®Á∫ßÈîÅÔºåÁî®Êà∑Âú®Êìç‰ΩúMyISAMË°®Êó∂ÔºåselectÔºåupdateÔºådeleteÔºåinsertËØ≠Âè•ÈÉΩ‰ºöÁªôË°®Ëá™Âä®Âä†ÈîÅÔºåÂ¶ÇÊûúÂä†ÈîÅ‰ª•ÂêéÁöÑË°®Êª°Ë∂≥insertÂπ∂ÂèëÁöÑÊÉÖÂÜµ‰∏ãÔºåÂèØ‰ª•Âú®Ë°®ÁöÑÂ∞æÈÉ®ÊèíÂÖ•Êñ∞ÁöÑÊï∞ÊçÆ„ÄÇ InnoDBÔºöÊîØÊåÅ‰∫ãÂä°ÂíåË°åÁ∫ßÈîÅÔºåÊòØinnodbÁöÑÊúÄÂ§ßÁâπËâ≤„ÄÇË°åÈîÅÂ§ßÂπÖÂ∫¶ÊèêÈ´ò‰∫ÜÂ§öÁî®Êà∑Âπ∂ÂèëÊìç‰ΩúÁöÑÊñ∞ËÉΩ„ÄÇ‰ΩÜÊòØInnoDBÁöÑË°åÈîÅÔºåÂè™ÊòØÂú®WHEREÁöÑ‰∏ªÈîÆÊòØÊúâÊïàÁöÑÔºåÈùû‰∏ªÈîÆÁöÑWHEREÈÉΩ‰ºöÈîÅÂÖ®Ë°®ÁöÑ„ÄÇ ÂÖ≥‰∫éÂ≠òÂÇ®ÂºïÊìéMyISAMÂíåInnoDBÁöÑÂÖ∂‰ªñÂèÇËÄÉËµÑÊñôÂ¶Ç‰∏ãÔºö MySQLÂ≠òÂÇ®ÂºïÊìé‰∏≠ÁöÑMyISAMÂíåInnoDBÂå∫Âà´ËØ¶Ëß£ MySQLÂ≠òÂÇ®ÂºïÊìé‰πãMyISAMÂíåInnodbÊÄªÁªìÊÄßÊ¢≥ÁêÜ ‰∫î„ÄÅ‰ºòÂåñ1.Êü•ËØ¢ËØ≠Âè•‰∏çÂêåÂÖÉÁ¥†Ôºàwhere„ÄÅjion„ÄÅlimit„ÄÅgroup by„ÄÅhavingÁ≠âÁ≠âÔºâÊâßË°åÂÖàÂêéÈ°∫Â∫è? 1.Êü•ËØ¢‰∏≠Áî®Âà∞ÁöÑÂÖ≥ÈîÆËØç‰∏ªË¶ÅÂåÖÂê´ÂÖ≠‰∏™ÔºåÂπ∂‰∏î‰ªñ‰ª¨ÁöÑÈ°∫Â∫è‰æùÊ¨°‰∏∫ select‚Äìfrom‚Äìwhere‚Äìgroup by‚Äìhaving‚Äìorder by ÂÖ∂‰∏≠selectÂíåfromÊòØÂøÖÈ°ªÁöÑÔºåÂÖ∂‰ªñÂÖ≥ÈîÆËØçÊòØÂèØÈÄâÁöÑÔºåËøôÂÖ≠‰∏™ÂÖ≥ÈîÆËØçÁöÑÊâßË°åÈ°∫Â∫è ‰∏ésqlËØ≠Âè•ÁöÑ‰π¶ÂÜôÈ°∫Â∫èÂπ∂‰∏çÊòØ‰∏ÄÊ†∑ÁöÑÔºåËÄåÊòØÊåâÁÖß‰∏ãÈù¢ÁöÑÈ°∫Â∫èÊù•ÊâßË°å from:ÈúÄË¶Å‰ªéÂì™‰∏™Êï∞ÊçÆË°®Ê£ÄÁ¥¢Êï∞ÊçÆ where:ËøáÊª§Ë°®‰∏≠Êï∞ÊçÆÁöÑÊù°‰ª∂ group by:Â¶Ç‰ΩïÂ∞Ü‰∏äÈù¢ËøáÊª§Âá∫ÁöÑÊï∞ÊçÆÂàÜÁªÑ having:ÂØπ‰∏äÈù¢Â∑≤ÁªèÂàÜÁªÑÁöÑÊï∞ÊçÆËøõË°åËøáÊª§ÁöÑÊù°‰ª∂ select:Êü•ÁúãÁªìÊûúÈõÜ‰∏≠ÁöÑÂì™‰∏™ÂàóÔºåÊàñÂàóÁöÑËÆ°ÁÆóÁªìÊûú order by :ÊåâÁÖß‰ªÄ‰πàÊ†∑ÁöÑÈ°∫Â∫èÊù•Êü•ÁúãËøîÂõûÁöÑÊï∞ÊçÆ 2.fromÂêéÈù¢ÁöÑË°®ÂÖ≥ËÅîÔºåÊòØËá™Âè≥ÂêëÂ∑¶Ëß£Êûê ËÄåwhereÊù°‰ª∂ÁöÑËß£ÊûêÈ°∫Â∫èÊòØËá™‰∏ãËÄå‰∏äÁöÑ„ÄÇ ‰πüÂ∞±ÊòØËØ¥ÔºåÂú®ÂÜôSQLËØ≠Âè•ÁöÑÊó∂ÂÄôÔºåÂ∞ΩÈáèÊääÊï∞ÊçÆÈáèÂ∞èÁöÑË°®ÊîæÂú®ÊúÄÂè≥ËæπÊù•ËøõË°åÂÖ≥ËÅîÔºàÁî®Â∞èË°®ÂéªÂåπÈÖçÂ§ßË°®ÔºâÔºåËÄåÊääËÉΩÁ≠õÈÄâÂá∫Â∞èÈáèÊï∞ÊçÆÁöÑÊù°‰ª∂ÊîæÂú®whereËØ≠Âè•ÁöÑÊúÄÂ∑¶Ëæπ ÔºàÁî®Â∞èË°®ÂéªÂåπÈÖçÂ§ßË°®Ôºâ ÂÖ∂‰ªñÂèÇËÄÉËµÑÊ∫êÔºöhttp://www.cnblogs.com/huminxxl/p/3149097.html 2.‰ΩøÁî®explain‰ºòÂåñsqlÂíåÁ¥¢Âºï? ÂØπ‰∫éÂ§çÊùÇ„ÄÅÊïàÁéá‰ΩéÁöÑsqlËØ≠Âè•ÔºåÊàë‰ª¨ÈÄöÂ∏∏ÊòØ‰ΩøÁî®explain sql Êù•ÂàÜÊûêsqlËØ≠Âè•ÔºåËøô‰∏™ËØ≠Âè•ÂèØ‰ª•ÊâìÂç∞Âá∫ÔºåËØ≠Âè•ÁöÑÊâßË°å„ÄÇËøôÊ†∑Êñπ‰æøÊàë‰ª¨ÂàÜÊûêÔºåËøõË°å‰ºòÂåñ tableÔºöÊòæÁ§∫Ëøô‰∏ÄË°åÁöÑÊï∞ÊçÆÊòØÂÖ≥‰∫éÂì™Âº†Ë°®ÁöÑ typeÔºöËøôÊòØÈáçË¶ÅÁöÑÂàóÔºåÊòæÁ§∫ËøûÊé•‰ΩøÁî®‰∫Ü‰ΩïÁßçÁ±ªÂûã„ÄÇ‰ªéÊúÄÂ•ΩÂà∞ÊúÄÂ∑ÆÁöÑËøûÊé•Á±ªÂûã‰∏∫const„ÄÅeq_reg„ÄÅref„ÄÅrange„ÄÅindexÂíåALL all:full table scan ;MySQLÂ∞ÜÈÅçÂéÜÂÖ®Ë°®‰ª•ÊâæÂà∞ÂåπÈÖçÁöÑË°åÔºõ index: index scan; index Âíå allÁöÑÂå∫Âà´Âú®‰∫éindexÁ±ªÂûãÂè™ÈÅçÂéÜÁ¥¢ÂºïÔºõ rangeÔºöÁ¥¢ÂºïËåÉÂõ¥Êâ´ÊèèÔºåÂØπÁ¥¢ÂºïÁöÑÊâ´ÊèèÂºÄÂßã‰∫éÊüê‰∏ÄÁÇπÔºåËøîÂõûÂåπÈÖçÂÄºÁöÑË°åÔºåÂ∏∏ËßÅ‰∏ébetween ÔºåÁ≠âÊü•ËØ¢Ôºõ refÔºöÈùûÂîØ‰∏ÄÊÄßÁ¥¢ÂºïÊâ´ÊèèÔºåËøîÂõûÂåπÈÖçÊüê‰∏™ÂçïÁã¨ÂÄºÁöÑÊâÄÊúâË°åÔºåÂ∏∏ËßÅ‰∫é‰ΩøÁî®ÈùûÂîØ‰∏ÄÁ¥¢ÂºïÂç≥ÂîØ‰∏ÄÁ¥¢ÂºïÁöÑÈùûÂîØ‰∏ÄÂâçÁºÄËøõË°åÊü•ÊâæÔºõ eq_refÔºöÂîØ‰∏ÄÊÄßÁ¥¢ÂºïÊâ´ÊèèÔºåÂØπ‰∫éÊØè‰∏™Á¥¢ÂºïÈîÆÔºåË°®‰∏≠Âè™Êúâ‰∏ÄÊù°ËÆ∞ÂΩï‰∏é‰πãÂåπÈÖçÔºåÂ∏∏Áî®‰∫é‰∏ªÈîÆÊàñËÄÖÂîØ‰∏ÄÁ¥¢ÂºïÊâ´ÊèèÔºõ constÔºåsystemÔºöÂΩìMySQLÂØπÊüêÊü•ËØ¢ÊüêÈÉ®ÂàÜËøõË°å‰ºòÂåñÔºåÂπ∂ËΩ¨‰∏∫‰∏Ä‰∏™Â∏∏ÈáèÊó∂Ôºå‰ΩøÁî®Ëøô‰∫õËÆøÈóÆÁ±ªÂûã„ÄÇÂ¶ÇÊûúÂ∞Ü‰∏ªÈîÆÁΩÆ‰∫éwhereÂàóË°®‰∏≠ÔºåMySQLÂ∞±ËÉΩÂ∞ÜËØ•Êü•ËØ¢ËΩ¨Âåñ‰∏∫‰∏Ä‰∏™Â∏∏Èáè„ÄÇ possible_keysÔºöÊòæÁ§∫ÂèØËÉΩÂ∫îÁî®Âú®ËøôÂº†Ë°®‰∏≠ÁöÑÁ¥¢Âºï„ÄÇÂ¶ÇÊûú‰∏∫Á©∫ÔºåÊ≤°ÊúâÂèØËÉΩÁöÑÁ¥¢Âºï„ÄÇÂèØ‰ª•‰∏∫Áõ∏ÂÖ≥ÁöÑÂüü‰ªéWHEREËØ≠Âè•‰∏≠ÈÄâÊã©‰∏Ä‰∏™ÂêàÈÄÇÁöÑËØ≠Âè• keyÔºö ÂÆûÈôÖ‰ΩøÁî®ÁöÑÁ¥¢Âºï„ÄÇÂ¶ÇÊûú‰∏∫NULLÔºåÂàôÊ≤°Êúâ‰ΩøÁî®Á¥¢Âºï„ÄÇÂæàÂ∞ëÁöÑÊÉÖÂÜµ‰∏ãÔºåMySQL‰ºöÈÄâÊã©‰ºòÂåñ‰∏çË∂≥ÁöÑÁ¥¢Âºï„ÄÇËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂèØ‰ª•Âú®SELECTËØ≠Âè•‰∏≠‰ΩøÁî®USE INDEXÔºàindexnameÔºâÊù•Âº∫Âà∂‰ΩøÁî®‰∏Ä‰∏™Á¥¢ÂºïÊàñËÄÖÁî®IGNORE INDEXÔºàindexnameÔºâÊù•Âº∫Âà∂MySQLÂøΩÁï•Á¥¢Âºï key_lenÔºö‰ΩøÁî®ÁöÑÁ¥¢ÂºïÁöÑÈïøÂ∫¶„ÄÇÂú®‰∏çÊçüÂ§±Á≤æÁ°ÆÊÄßÁöÑÊÉÖÂÜµ‰∏ãÔºåÈïøÂ∫¶Ë∂äÁü≠Ë∂äÂ•Ω refÔºöÊòæÁ§∫Á¥¢ÂºïÁöÑÂì™‰∏ÄÂàóË¢´‰ΩøÁî®‰∫ÜÔºåÂ¶ÇÊûúÂèØËÉΩÁöÑËØùÔºåÊòØ‰∏Ä‰∏™Â∏∏Êï∞ rowsÔºöMySQLËÆ§‰∏∫ÂøÖÈ°ªÊ£ÄÊü•ÁöÑÁî®Êù•ËøîÂõûËØ∑Ê±ÇÊï∞ÊçÆÁöÑË°åÊï∞ ExtraÔºöÂÖ≥‰∫éMySQLÂ¶Ç‰ΩïËß£ÊûêÊü•ËØ¢ÁöÑÈ¢ùÂ§ñ‰ø°ÊÅØ„ÄÇÂ∞ÜÂú®Ë°®4.3‰∏≠ËÆ®ËÆ∫Ôºå‰ΩÜËøôÈáåÂèØ‰ª•ÁúãÂà∞ÁöÑÂùèÁöÑ‰æãÂ≠êÊòØUsing temporaryÂíåUsing filesortÔºåÊÑèÊÄùMySQLÊ†πÊú¨‰∏çËÉΩ‰ΩøÁî®Á¥¢ÂºïÔºåÁªìÊûúÊòØÊ£ÄÁ¥¢‰ºöÂæàÊÖ¢„ÄÇ 3.MySQLÊÖ¢Êü•ËØ¢ÊÄé‰πàËß£ÂÜ≥? slow_query_log ÊÖ¢Êü•ËØ¢ÂºÄÂêØÁä∂ÊÄÅ„ÄÇ slow_query_log_file ÊÖ¢Êü•ËØ¢Êó•ÂøóÂ≠òÊîæÁöÑ‰ΩçÁΩÆÔºàËøô‰∏™ÁõÆÂΩïÈúÄË¶ÅMySQLÁöÑËøêË°åÂ∏êÂè∑ÁöÑÂèØÂÜôÊùÉÈôêÔºå‰∏ÄËà¨ËÆæÁΩÆ‰∏∫MySQLÁöÑÊï∞ÊçÆÂ≠òÊîæÁõÆÂΩïÔºâ„ÄÇ long_query_time Êü•ËØ¢Ë∂ÖËøáÂ§öÂ∞ëÁßíÊâçËÆ∞ÂΩï„ÄÇ ÂÖ≠„ÄÅÊï∞ÊçÆÂ∫ìÈîÅ1.mysqlÈÉΩÊúâ‰ªÄ‰πàÈîÅÔºåÊ≠ªÈîÅÂà§ÂÆöÂéüÁêÜÂíåÂÖ∑‰ΩìÂú∫ÊôØÔºåÊ≠ªÈîÅÊÄé‰πàËß£ÂÜ≥? MySQLÊúâ‰∏âÁßçÈîÅÁöÑÁ∫ßÂà´ÔºöÂÖ®Â±ÄÈîÅ„ÄÅË°®Á∫ßÁ∫ß„ÄÅË°åÁ∫ßÈîÅ„ÄÇ ÂÖ®Â±ÄÈîÅÔºöÂØπÊï¥‰∏™Êï∞ÊçÆÂ∫ìÂÆû‰æãÂä†ÈîÅ„ÄÇÊèê‰æõÂä†ÂÖ®Â±ÄËØªÈîÅÁöÑÊñπÊ≥ïÔºöFlush tables with read lock(FTWRL)ÔºåËøô‰∏™ÂëΩ‰ª§ÂèØ‰ª•‰ΩøÊï¥‰∏™Â∫ìÂ§Ñ‰∫éÂè™ËØªÁä∂ÊÄÅ„ÄÇ‰ΩøÁî®ËØ•ÂëΩ‰ª§‰πãÂêéÔºåÊï∞ÊçÆÊõ¥Êñ∞ËØ≠Âè•„ÄÅÊï∞ÊçÆÂÆö‰πâËØ≠Âè•ÂíåÊõ¥Êñ∞Á±ª‰∫ãÂä°ÁöÑÊèê‰∫§ËØ≠Âè•Á≠âÊìç‰ΩúÈÉΩ‰ºöË¢´ÈòªÂ°û„ÄÇ‰ΩøÁî®Âú∫ÊôØÊòØÂÖ®Â∫ìÈÄªËæëÂ§á‰ªΩ„ÄÇMySQLÊèê‰æõÂä†ÂÖ®Â±ÄËØªÈîÅÁöÑÊñπÊ≥ïÔºöFlush tables with read lock(FTWRL) Ë°®Á∫ßÈîÅÔºöMySQLÈáåÈù¢Ë°®Á∫ßÈîÅÊúâ‰∏§ÁßçÔºå‰∏ÄÁßçÊòØË°®ÈîÅÔºå‰∏ÄÁßçÊòØÂÖÉÊï∞ÊçÆÈîÅ(meta data lock,MDL)ÔºåÈîÅ‰ΩèÊï¥‰∏™Ë°®ÔºåÂÖ∂‰∏≠ MDL ‰∏çÈúÄË¶ÅÊòæÂºè‰ΩøÁî®ÔºåÂú®ËÆøÈóÆ‰∏Ä‰∏™Ë°®ÁöÑÊó∂ÂÄô‰ºöË¢´Ëá™Âä®Âä†‰∏ä„ÄÇServer Â±ÇÈù¢ÂÆûÁé∞ÁöÑÔºÅÔºÅÔºÅÔºÅ Ë°åÁ∫ßÈîÅÔºöÂ≠òÂÇ®ÂºïÊìéÁ∫ßÂà´ÂÆûÁé∞ÁöÑÔºåÂÖ∑‰ΩìÂèØ‰ª•ÁúãËá™Â∑±ÂÜôÁöÑÂè¶Â§ñ‰∏ÄÁØáÊñáÁ´† „ÄäMysql ÂÜçÂ∫¶Âá∫Âèë„Äã„ÄÇ ‰ªÄ‰πàÊòØÊ≠ªÈîÅÔºü Ê≠ªÈîÅ: ÊòØÊåá‰∏§‰∏™Êàñ‰∏§‰∏™‰ª•‰∏äÁöÑËøõÁ®ãÂú®ÊâßË°åËøáÁ®ã‰∏≠„ÄÇÂõ†‰∫âÂ§∫ËµÑÊ∫êËÄåÈÄ†ÊàêÁöÑ‰∏ÄÁßç‰∫íÁõ∏Á≠âÂæÖÁöÑÁé∞Ë±°,Ëã•Êó†Â§ñÂäõ‰ΩúÁî®,ÂÆÉ‰ª¨ÈÉΩÂ∞ÜÊó†Ê≥ïÊé®Ëøõ‰∏ãÂéª„ÄÇÊ≠§Êó∂Áß∞Á≥ªÁªüÂ§Ñ‰∫éÊ≠ªÈîÅÁä∂ÊÄÅÊàñÁ≥ªÁªü‰∫ßÁîü‰∫ÜÊ≠ªÈîÅ,Ëøô‰∫õÊ∞∏ËøúÂú®‰∫íÁõ∏Á≠âÁ´∫ÁöÑËøõÁ®ãÁß∞‰∏∫Ê≠ªÈîÅËøõÁ®ã„ÄÇ Ë°®Á∫ßÈîÅ‰∏ç‰ºö‰∫ßÁîüÊ≠ªÈîÅ.ÊâÄ‰ª•Ëß£ÂÜ≥Ê≠ªÈîÅ‰∏ªË¶ÅËøòÊòØÈíàÂØπ‰∫éÊúÄÂ∏∏Áî®ÁöÑInnoDB„ÄÇ Ê≠ªÈîÅÁöÑÂÖ≥ÈîÆÂú®‰∫éÔºö‰∏§‰∏™(Êàñ‰ª•‰∏ä)ÁöÑSessionÂä†ÈîÅÁöÑÈ°∫Â∫è‰∏ç‰∏ÄËá¥„ÄÇ ÈÇ£‰πàÂØπÂ∫îÁöÑËß£ÂÜ≥Ê≠ªÈîÅÈóÆÈ¢òÁöÑÂÖ≥ÈîÆÂ∞±ÊòØÔºöËÆ©‰∏çÂêåÁöÑsessionÂä†ÈîÅÊúâÊ¨°Â∫è„ÄÇ Ê≠ªÈîÅÁöÑËß£ÂÜ≥ÂäûÊ≥ï? 1.Êü•Âá∫ÁöÑÁ∫øÁ®ãÊùÄÊ≠ª killSELECT trx_MySQL_thread_id FROM information_schema.INNODB_TRX; 2.ËÆæÁΩÆÈîÅÁöÑË∂ÖÊó∂Êó∂Èó¥Innodb Ë°åÈîÅÁöÑÁ≠âÂæÖÊó∂Èó¥ÔºåÂçï‰ΩçÁßí„ÄÇÂèØÂú®‰ºöËØùÁ∫ßÂà´ËÆæÁΩÆÔºåRDS ÂÆû‰æãËØ•ÂèÇÊï∞ÁöÑÈªòËÆ§ÂÄº‰∏∫ 50ÔºàÁßíÔºâ„ÄÇ Áîü‰∫ßÁéØÂ¢É‰∏çÊé®Ëçê‰ΩøÁî®ËøáÂ§ßÁöÑ innodb_lock_wait_timeoutÂèÇÊï∞ÂÄºËØ•ÂèÇÊï∞ÊîØÊåÅÂú®‰ºöËØùÁ∫ßÂà´‰øÆÊîπÔºåÊñπ‰æøÂ∫îÁî®Âú®‰ºöËØùÁ∫ßÂà´ÂçïÁã¨ËÆæÁΩÆÊüê‰∫õÁâπÊÆäÊìç‰ΩúÁöÑË°åÈîÅÁ≠âÂæÖË∂ÖÊó∂Êó∂Èó¥ÔºåÂ¶Ç‰∏ãÔºöset innodb_lock_wait_timeout=1000; ‚ÄîËÆæÁΩÆÂΩìÂâç‰ºöËØù Innodb Ë°åÈîÅÁ≠âÂæÖË∂ÖÊó∂Êó∂Èó¥ÔºåÂçï‰ΩçÁßí„ÄÇ 3.ÊåáÂÆöËé∑ÂèñÈîÅÁöÑÈ°∫Â∫è 2.ÊúâÂì™‰∫õÈîÅÔºà‰πêËßÇÈîÅÊÇ≤ËßÇÈîÅÔºâÔºåselect Êó∂ÊÄé‰πàÂä†ÊéíÂÆÉÈîÅ? ÊÇ≤ËßÇÈîÅÔºàPessimistic LockÔºâ: ÊÇ≤ËßÇÈîÅÁâπÁÇπ:ÂÖàËé∑ÂèñÈîÅÔºåÂÜçËøõË°å‰∏öÂä°Êìç‰Ωú„ÄÇ Âç≥‚ÄúÊÇ≤ËßÇ‚ÄùÁöÑËÆ§‰∏∫Ëé∑ÂèñÈîÅÊòØÈùûÂ∏∏ÊúâÂèØËÉΩÂ§±Ë¥•ÁöÑÔºåÂõ†Ê≠§Ë¶ÅÂÖàÁ°Æ‰øùËé∑ÂèñÈîÅÊàêÂäüÂÜçËøõË°å‰∏öÂä°Êìç‰Ωú„ÄÇÈÄöÂ∏∏ÊâÄËØ¥ÁöÑ‚Äú‰∏ÄÈîÅ‰∫åÊü•‰∏âÊõ¥Êñ∞‚ÄùÂç≥ÊåáÁöÑÊòØ‰ΩøÁî®ÊÇ≤ËßÇÈîÅ„ÄÇÈÄöÂ∏∏Êù•ËÆ≤Âú®Êï∞ÊçÆÂ∫ì‰∏äÁöÑÊÇ≤ËßÇÈîÅÈúÄË¶ÅÊï∞ÊçÆÂ∫ìÊú¨Ë∫´Êèê‰æõÊîØÊåÅÔºåÂç≥ÈÄöËøáÂ∏∏Áî®ÁöÑselect ‚Ä¶ for updateÊìç‰ΩúÊù•ÂÆûÁé∞ÊÇ≤ËßÇÈîÅ„ÄÇÂΩìÊï∞ÊçÆÂ∫ìÊâßË°åselect for updateÊó∂‰ºöËé∑ÂèñË¢´select‰∏≠ÁöÑÊï∞ÊçÆË°åÁöÑË°åÈîÅÔºåÂõ†Ê≠§ÂÖ∂‰ªñÂπ∂ÂèëÊâßË°åÁöÑselect for updateÂ¶ÇÊûúËØïÂõæÈÄâ‰∏≠Âêå‰∏ÄË°åÂàô‰ºöÂèëÁîüÊéíÊñ•ÔºàÈúÄË¶ÅÁ≠âÂæÖË°åÈîÅË¢´ÈáäÊîæÔºâÔºåÂõ†Ê≠§ËææÂà∞ÈîÅÁöÑÊïàÊûú„ÄÇselect for updateËé∑ÂèñÁöÑË°åÈîÅ‰ºöÂú®ÂΩìÂâç‰∫ãÂä°ÁªìÊùüÊó∂Ëá™Âä®ÈáäÊîæÔºåÂõ†Ê≠§ÂøÖÈ°ªÂú®‰∫ãÂä°‰∏≠‰ΩøÁî®„ÄÇ Ë°•ÂÖÖÔºö‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ìÂØπselect for updateÁöÑÂÆûÁé∞ÂíåÊîØÊåÅÈÉΩÊòØÊúâÊâÄÂå∫Âà´ÁöÑÔºå oracleÊîØÊåÅselect for update no waitÔºåË°®Á§∫Â¶ÇÊûúÊãø‰∏çÂà∞ÈîÅÁ´ãÂàªÊä•ÈîôÔºåËÄå‰∏çÊòØÁ≠âÂæÖÔºåMySQLÂ∞±Ê≤°Êúâno waitËøô‰∏™ÈÄâÈ°π„ÄÇ MySQLËøòÊúâ‰∏™ÈóÆÈ¢òÊòØselect for updateËØ≠Âè•ÊâßË°å‰∏≠ÊâÄÊúâÊâ´ÊèèËøáÁöÑË°åÈÉΩ‰ºöË¢´ÈîÅ‰∏äÔºåËøô‰∏ÄÁÇπÂæàÂÆπÊòìÈÄ†ÊàêÈóÆÈ¢ò„ÄÇÂõ†Ê≠§Â¶ÇÊûúÂú®MySQL‰∏≠Áî®ÊÇ≤ËßÇÈîÅÂä°ÂøÖË¶ÅÁ°ÆÂÆöËµ∞‰∫ÜÁ¥¢ÂºïÔºåËÄå‰∏çÊòØÂÖ®Ë°®Êâ´Êèè„ÄÇ ‰πêËßÇÈîÅÔºàOptimistic LockÔºâ: 1.‰πêËßÇÈîÅÔºå‰πüÂè´‰πêËßÇÂπ∂ÂèëÊéßÂà∂ÔºåÂÆÉÂÅáËÆæÂ§öÁî®Êà∑Âπ∂ÂèëÁöÑ‰∫ãÂä°Âú®Â§ÑÁêÜÊó∂‰∏ç‰ºöÂΩºÊ≠§‰∫íÁõ∏ÂΩ±ÂìçÔºåÂêÑ‰∫ãÂä°ËÉΩÂ§üÂú®‰∏ç‰∫ßÁîüÈîÅÁöÑÊÉÖÂÜµ‰∏ãÂ§ÑÁêÜÂêÑËá™ÂΩ±ÂìçÁöÑÈÇ£ÈÉ®ÂàÜÊï∞ÊçÆ„ÄÇÂú®Êèê‰∫§Êï∞ÊçÆÊõ¥Êñ∞‰πãÂâçÔºåÊØè‰∏™‰∫ãÂä°‰ºöÂÖàÊ£ÄÊü•Âú®ËØ•‰∫ãÂä°ËØªÂèñÊï∞ÊçÆÂêéÔºåÊúâÊ≤°ÊúâÂÖ∂‰ªñ‰∫ãÂä°Âèà‰øÆÊîπ‰∫ÜËØ•Êï∞ÊçÆ„ÄÇÂ¶ÇÊûúÂÖ∂‰ªñ‰∫ãÂä°ÊúâÊõ¥Êñ∞ÁöÑËØùÔºåÈÇ£‰πàÂΩìÂâçÊ≠£Âú®Êèê‰∫§ÁöÑ‰∫ãÂä°‰ºöËøõË°åÂõûÊªö„ÄÇ 2.‰πêËßÇÈîÅÁöÑÁâπÁÇπÂÖàËøõË°å‰∏öÂä°Êìç‰ΩúÔºå‰∏çÂà∞‰∏á‰∏çÂæóÂ∑≤‰∏çÂéªÊãøÈîÅ„ÄÇÂç≥‚Äú‰πêËßÇ‚ÄùÁöÑËÆ§‰∏∫ÊãøÈîÅÂ§öÂçäÊòØ‰ºöÊàêÂäüÁöÑÔºåÂõ†Ê≠§Âú®ËøõË°åÂÆå‰∏öÂä°Êìç‰ΩúÈúÄË¶ÅÂÆûÈôÖÊõ¥Êñ∞Êï∞ÊçÆÁöÑÊúÄÂêé‰∏ÄÊ≠•ÂÜçÂéªÊãø‰∏Ä‰∏ãÈîÅÂ∞±Â•Ω„ÄÇ‰πêËßÇÈîÅÂú®Êï∞ÊçÆÂ∫ì‰∏äÁöÑÂÆûÁé∞ÂÆåÂÖ®ÊòØÈÄªËæëÁöÑÔºå‰∏çÈúÄË¶ÅÊï∞ÊçÆÂ∫ìÊèê‰æõÁâπÊÆäÁöÑÊîØÊåÅ„ÄÇ 3.‰∏ÄËà¨ÁöÑÂÅöÊ≥ïÊòØÂú®ÈúÄË¶ÅÈîÅÁöÑÊï∞ÊçÆ‰∏äÂ¢ûÂä†‰∏Ä‰∏™ÁâàÊú¨Âè∑ÔºåÊàñËÄÖÊó∂Èó¥Êà≥Ôºå ÂÆûÁé∞ÊñπÂºè‰∏æ‰æãÂ¶Ç‰∏ãÔºö ‰πêËßÇÈîÅÔºàÁªôË°®Âä†‰∏Ä‰∏™ÁâàÊú¨Âè∑Â≠óÊÆµÔºâ Ëøô‰∏™Âπ∂‰∏çÊòØ‰πêËßÇÈîÅÁöÑÂÆö‰πâÔºåÁªôË°®Âä†ÁâàÊú¨Âè∑ÔºåÊòØÊï∞ÊçÆÂ∫ìÂÆûÁé∞‰πêËßÇÈîÅÁöÑ‰∏ÄÁßçÊñπÂºè„ÄÇ SELECT data AS old_data, version AS old_version FROM ‚Ä¶; Ê†πÊçÆËé∑ÂèñÁöÑÊï∞ÊçÆËøõË°å‰∏öÂä°Êìç‰ΩúÔºåÂæóÂà∞new_dataÂíånew_version UPDATE SET data = new_data, version = new_version WHERE version = old_version if (updated row &gt; 0) { // ‰πêËßÇÈîÅËé∑ÂèñÊàêÂäüÔºåÊìç‰ΩúÂÆåÊàê } else { // ‰πêËßÇÈîÅËé∑ÂèñÂ§±Ë¥•ÔºåÂõûÊªöÂπ∂ÈáçËØï } Ê≥®ÊÑèÔºö ‰πêËßÇÈîÅÂú®‰∏çÂèëÁîüÂèñÈîÅÂ§±Ë¥•ÁöÑÊÉÖÂÜµ‰∏ãÂºÄÈîÄÊØîÊÇ≤ËßÇÈîÅÂ∞èÔºå‰ΩÜÊòØ‰∏ÄÊó¶ÂèëÁîüÂ§±Ë¥•ÂõûÊªöÂºÄÈîÄÂàôÊØîËæÉÂ§ßÔºåÂõ†Ê≠§ÈÄÇÂêàÁî®Âú®ÂèñÈîÅÂ§±Ë¥•Ê¶ÇÁéáÊØîËæÉÂ∞èÁöÑÂú∫ÊôØÔºåÂèØ‰ª•ÊèêÂçáÁ≥ªÁªüÂπ∂ÂèëÊÄßËÉΩ ‰πêËßÇÈîÅËøòÈÄÇÁî®‰∫é‰∏Ä‰∫õÊØîËæÉÁâπÊÆäÁöÑÂú∫ÊôØÔºå‰æãÂ¶ÇÂú®‰∏öÂä°Êìç‰ΩúËøáÁ®ã‰∏≠Êó†Ê≥ïÂíåÊï∞ÊçÆÂ∫ì‰øùÊåÅËøûÊé•Á≠âÊÇ≤ËßÇÈîÅÊó†Ê≥ïÈÄÇÁî®ÁöÑÂú∞Êñπ„ÄÇ ÊÄªÁªìÔºöÊÇ≤ËßÇÈîÅÂíå‰πêËßÇÈîÅÊòØÊï∞ÊçÆÂ∫ìÁî®Êù•‰øùËØÅÊï∞ÊçÆÂπ∂ÂèëÂÆâÂÖ®Èò≤Ê≠¢Êõ¥Êñ∞‰∏¢Â§±ÁöÑ‰∏§ÁßçÊñπÊ≥ïÔºå‰æãÂ≠êÂú®select ‚Ä¶ for updateÂâçÂä†‰∏™‰∫ãÂä°Â∞±ÂèØ‰ª•Èò≤Ê≠¢Êõ¥Êñ∞‰∏¢Â§±„ÄÇÊÇ≤ËßÇÈîÅÂíå‰πêËßÇÈîÅÂ§ßÈÉ®ÂàÜÂú∫ÊôØ‰∏ãÂ∑ÆÂºÇ‰∏çÂ§ßÔºå‰∏Ä‰∫õÁã¨ÁâπÂú∫ÊôØ‰∏ãÊúâ‰∏Ä‰∫õÂ∑ÆÂà´Ôºå‰∏ÄËà¨Êàë‰ª¨ÂèØ‰ª•‰ªéÂ¶Ç‰∏ãÂá†‰∏™ÊñπÈù¢Êù•Âà§Êñ≠„ÄÇ ÂìçÂ∫îÈÄüÂ∫¶Ôºö Â¶ÇÊûúÈúÄË¶ÅÈùûÂ∏∏È´òÁöÑÂìçÂ∫îÈÄüÂ∫¶ÔºåÂª∫ËÆÆÈááÁî®‰πêËßÇÈîÅÊñπÊ°àÔºåÊàêÂäüÂ∞±ÊâßË°åÔºå‰∏çÊàêÂäüÂ∞±Â§±Ë¥•Ôºå‰∏çÈúÄË¶ÅÁ≠âÂæÖÂÖ∂‰ªñÂπ∂ÂèëÂéªÈáäÊîæÈîÅ„ÄÇ‚Äô ÂÜ≤Á™ÅÈ¢ëÁéáÔºö Â¶ÇÊûúÂÜ≤Á™ÅÈ¢ëÁéáÈùûÂ∏∏È´òÔºåÂª∫ËÆÆÈááÁî®ÊÇ≤ËßÇÈîÅÔºå‰øùËØÅÊàêÂäüÁéáÔºåÂ¶ÇÊûúÂÜ≤Á™ÅÈ¢ëÁéáÂ§ßÔºå‰πêËßÇÈîÅ‰ºöÈúÄË¶ÅÂ§öÊ¨°ÈáçËØïÊâçËÉΩÊàêÂäüÔºå‰ª£‰ª∑ÊØîËæÉÂ§ß„ÄÇ ÈáçËØï‰ª£‰ª∑Ôºö Â¶ÇÊûúÈáçËØï‰ª£‰ª∑Â§ßÔºåÂª∫ËÆÆÈááÁî®ÊÇ≤ËßÇÈîÅ„ÄÇ ‰∏É„ÄÅÂÖ∂‰ªñ1.Êï∞ÊçÆÂ∫ìÁöÑ‰∏ª‰ªéÂ§çÂà∂ ‰∏ª‰ªéÂ§çÂà∂ÁöÑÂá†ÁßçÊñπÂºè: ÂêåÊ≠•Â§çÂà∂: ÊâÄË∞ìÁöÑÂêåÊ≠•Â§çÂà∂ÔºåÊÑèÊÄùÊòØmasterÁöÑÂèòÂåñÔºåÂøÖÈ°ªÁ≠âÂæÖslave-1,slave-2,‚Ä¶,slave-nÂÆåÊàêÂêéÊâçËÉΩËøîÂõû„ÄÇ ËøôÊ†∑ÔºåÊòæÁÑ∂‰∏çÂèØÂèñÔºå‰πü‰∏çÊòØMySQLÂ§çÂà∂ÁöÑÈªòËÆ§ËÆæÁΩÆ„ÄÇÊØîÂ¶ÇÔºåÂú®WEBÂâçÁ´ØÈ°µÈù¢‰∏äÔºåÁî®Êà∑Â¢ûÂä†‰∫ÜÊù°ËÆ∞ÂΩïÔºåÈúÄË¶ÅÁ≠âÂæÖÂæàÈïøÊó∂Èó¥„ÄÇ ÂºÇÊ≠•Â§çÂà∂: Â¶ÇÂêåAJAXËØ∑Ê±Ç‰∏ÄÊ†∑„ÄÇmasterÂè™ÈúÄË¶ÅÂÆåÊàêËá™Â∑±ÁöÑÊï∞ÊçÆÂ∫ìÊìç‰ΩúÂç≥ÂèØ„ÄÇËá≥‰∫éslavesÊòØÂê¶Êî∂Âà∞‰∫åËøõÂà∂Êó•ÂøóÔºåÊòØÂê¶ÂÆåÊàêÊìç‰ΩúÔºå‰∏çÁî®ÂÖ≥ÂøÉ,MySQLÁöÑÈªòËÆ§ËÆæÁΩÆ„ÄÇ ÂçäÂêåÊ≠•Â§çÂà∂: masterÂè™‰øùËØÅslaves‰∏≠ÁöÑ‰∏Ä‰∏™Êìç‰ΩúÊàêÂäüÔºåÂ∞±ËøîÂõûÔºåÂÖ∂‰ªñslave‰∏çÁÆ°„ÄÇ Ëøô‰∏™ÂäüËÉΩÔºåÊòØÁî±google‰∏∫MySQLÂºïÂÖ•ÁöÑ„ÄÇ 2.Êï∞ÊçÆÂ∫ì‰∏ª‰ªéÂ§çÂà∂ÂàÜÊûêÁöÑ 7 ‰∏™ÈóÆÈ¢ò?ÈóÆÈ¢ò1ÔºömasterÁöÑÂÜôÊìç‰ΩúÔºåslavesË¢´Âä®ÁöÑËøõË°å‰∏ÄÊ†∑ÁöÑÊìç‰ΩúÔºå‰øùÊåÅÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÔºåÈÇ£‰πàslaveÊòØÂê¶ÂèØ‰ª•‰∏ªÂä®ÁöÑËøõË°åÂÜôÊìç‰ΩúÔºü ÂÅáËÆæslaveÂèØ‰ª•‰∏ªÂä®ÁöÑËøõË°åÂÜôÊìç‰ΩúÔºåslaveÂèàÊó†Ê≥ïÈÄöÁü•masterÔºåËøôÊ†∑Â∞±ÂØºËá¥‰∫ÜmasterÂíåslaveÊï∞ÊçÆ‰∏ç‰∏ÄËá¥‰∫Ü„ÄÇÂõ†Ê≠§slave‰∏çÂ∫îËØ•ËøõË°åÂÜôÊìç‰ΩúÔºåËá≥Â∞ëÊòØslave‰∏äÊ∂âÂèäÂà∞Â§çÂà∂ÁöÑÊï∞ÊçÆÂ∫ì‰∏çÂèØ‰ª•ÂÜô„ÄÇÂÆûÈôÖ‰∏äÔºåËøôÈáåÂ∑≤ÁªèÊè≠Á§∫‰∫ÜËØªÂÜôÂàÜÁ¶ªÁöÑÊ¶ÇÂøµ„ÄÇ ÈóÆÈ¢ò2Ôºö‰∏ª‰ªéÂ§çÂà∂‰∏≠ÔºåÂèØ‰ª•ÊúâN‰∏™slave,ÂèØÊòØËøô‰∫õslaveÂèà‰∏çËÉΩËøõË°åÂÜôÊìç‰ΩúÔºåË¶Å‰ªñ‰ª¨Âπ≤ÂòõÔºü ÂÆûÁé∞Êï∞ÊçÆÂ§á‰ªΩ:Á±ª‰ºº‰∫éÈ´òÂèØÁî®ÁöÑÂäüËÉΩÔºå‰∏ÄÊó¶masterÊåÇ‰∫ÜÔºåÂèØ‰ª•ËÆ©slaveÈ°∂‰∏äÂéªÔºåÂêåÊó∂slaveÊèêÂçá‰∏∫master„ÄÇ ÂºÇÂú∞ÂÆπÁÅæ:ÊØîÂ¶ÇmasterÂú®Âåó‰∫¨ÔºåÂú∞ÈúáÊåÇ‰∫ÜÔºåÈÇ£‰πàÂú®‰∏äÊµ∑ÁöÑslaveËøòÂèØ‰ª•ÁªßÁª≠„ÄÇ‰∏ªË¶ÅÁî®‰∫éÂÆûÁé∞scale out,ÂàÜÊãÖË¥üËΩΩ,ÂèØ‰ª•Â∞ÜËØªÁöÑ‰ªªÂä°ÂàÜÊï£Âà∞slaves‰∏ä„ÄÇ„ÄêÂæàÂèØËÉΩÁöÑÊÉÖÂÜµÊòØÔºå‰∏Ä‰∏™Á≥ªÁªüÁöÑËØªÊìç‰ΩúËøúËøúÂ§ö‰∫éÂÜôÊìç‰ΩúÔºåÂõ†Ê≠§ÂÜôÊìç‰ΩúÂèëÂêëmasterÔºåËØªÊìç‰ΩúÂèëÂêëslavesËøõË°åÊìç‰Ωú„Äë ÈóÆÈ¢ò3Ôºö‰∏ª‰ªéÂ§çÂà∂‰∏≠Êúâmaster,slave1,slave2,‚Ä¶Á≠âÁ≠âËøô‰πàÂ§öMySQLÊï∞ÊçÆÂ∫ìÔºåÈÇ£ÊØîÂ¶Ç‰∏Ä‰∏™JAVA WEBÂ∫îÁî®Âà∞Â∫ïÂ∫îËØ•ËøûÊé•Âì™‰∏™Êï∞ÊçÆÂ∫ì? Êàë‰ª¨Âú®Â∫îÁî®Á®ãÂ∫è‰∏≠ÂèØ‰ª•ËøôÊ†∑Ôºåinsert/delete/updateËøô‰∫õÊõ¥Êñ∞Êï∞ÊçÆÂ∫ìÁöÑÊìç‰ΩúÔºåÁî®connection(for master)ËøõË°åÊìç‰ΩúÔºå selectÁî®connection(for slaves)ËøõË°åÊìç‰Ωú„ÄÇÈÇ£Êàë‰ª¨ÁöÑÂ∫îÁî®Á®ãÂ∫èËøòË¶ÅÂÆåÊàêÊÄé‰πà‰ªéslavesÈÄâÊã©‰∏Ä‰∏™Êù•ÊâßË°åselectÔºå‰æãÂ¶Ç‰ΩøÁî®ÁÆÄÂçïÁöÑËΩÆÂæ™ÁÆóÊ≥ï„ÄÇ ËøôÊ†∑ÁöÑËØùÔºåÁõ∏ÂΩì‰∫éÂ∫îÁî®Á®ãÂ∫èÂÆåÊàê‰∫ÜSQLËØ≠Âè•ÁöÑË∑ØÁî±ÔºåËÄå‰∏î‰∏éMySQLÁöÑ‰∏ª‰ªéÂ§çÂà∂Êû∂ÊûÑÈùûÂ∏∏ÂÖ≥ËÅîÔºå‰∏ÄÊó¶masterÊåÇ‰∫ÜÔºåÊüê‰∫õslaveÊåÇ‰∫ÜÔºåÈÇ£‰πàÂ∫îÁî®Á®ãÂ∫èÂ∞±Ë¶Å‰øÆÊîπ‰∫Ü„ÄÇËÉΩ‰∏çËÉΩËÆ©Â∫îÁî®Á®ãÂ∫è‰∏éMySQLÁöÑ‰∏ª‰ªéÂ§çÂà∂Êû∂ÊûÑÊ≤°Êúâ‰ªÄ‰πàÂ§™Â§öÂÖ≥Á≥ªÂë¢ÔºüÊâæ‰∏Ä‰∏™ÁªÑ‰ª∂Ôºåapplication programÂè™ÈúÄË¶Å‰∏éÂÆÉÊâì‰∫§ÈÅìÔºåÁî®ÂÆÉÊù•ÂÆåÊàêMySQLÁöÑ‰ª£ÁêÜÔºåÂÆûÁé∞SQLËØ≠Âè•ÁöÑË∑ØÁî±„ÄÇMySQL proxyÂπ∂‰∏çË¥üË¥£ÔºåÊÄé‰πà‰ªé‰ºóÂ§öÁöÑslavesÊåë‰∏Ä‰∏™ÔºüÂèØ‰ª•‰∫§ÁªôÂè¶‰∏Ä‰∏™ÁªÑ‰ª∂(ÊØîÂ¶Çhaproxy)Êù•ÂÆåÊàê„ÄÇ ËøôÂ∞±ÊòØÊâÄË∞ìÁöÑMySQL READ WRITE SPLITEÔºåMySQLÁöÑËØªÂÜôÂàÜÁ¶ª„ÄÇ ÈóÆÈ¢ò4ÔºöÂ¶ÇÊûúMySQL proxy , direct , master‰ªñ‰ª¨‰∏≠ÁöÑÊüê‰∫õÊåÇ‰∫ÜÊÄé‰πàÂäûÔºü ÊÄªÁªü‰∏ÄËà¨ÈÉΩ‰ºöÂºÑ‰∏™ÂâØÊÄªÁªüÔºå‰ª•Èò≤‰∏çÊµã„ÄÇÂêåÊ†∑ÁöÑÔºåÂèØ‰ª•ÁªôËøô‰∫õÂÖ≥ÈîÆÁöÑËäÇÁÇπÊù•‰∏™Â§á‰ªΩ„ÄÇ ÈóÆÈ¢ò5ÔºöÂΩìmasterÁöÑ‰∫åËøõÂà∂Êó•ÂøóÊØè‰∫ßÁîü‰∏Ä‰∏™‰∫ã‰ª∂ÔºåÈÉΩÈúÄË¶ÅÂèëÂæÄslaveÔºåÂ¶ÇÊûúÊàë‰ª¨ÊúâN‰∏™slave,ÈÇ£ÊòØÂèëNÊ¨°ÔºåËøòÊòØÂè™Âèë‰∏ÄÊ¨°ÔºüÂ¶ÇÊûúÂè™Âèë‰∏ÄÊ¨°ÔºåÂèëÁªô‰∫Üslave-1ÔºåÈÇ£slave-2,slave-3,‚Ä¶ÂÆÉ‰ª¨ÊÄé‰πàÂäûÔºü Êòæ ÁÑ∂ÔºåÂ∫îËØ•ÂèëNÊ¨°„ÄÇÂÆûÈôÖ‰∏äÔºåÂú®MySQL masterÂÜÖÈÉ®ÔºåÁª¥Êä§N‰∏™Á∫øÁ®ãÔºåÊØè‰∏Ä‰∏™Á∫øÁ®ãË¥üË¥£Â∞Ü‰∫åËøõÂà∂Êó•ÂøóÊñá‰ª∂ÂèëÂæÄÂØπÂ∫îÁöÑslave„ÄÇmasterÊó¢Ë¶ÅË¥üË¥£ÂÜôÊìç‰ΩúÔºåËøòÁöÑÁª¥Êä§N‰∏™Á∫øÁ®ãÔºåË¥üÊãÖ‰ºöÂæàÈáç„ÄÇÂèØ‰ª•ËøôÊ†∑Ôºåslave-1ÊòØmasterÁöÑ‰ªéÔºåslave-1ÂèàÊòØslave-2,slave-3,‚Ä¶ÁöÑ‰∏ªÔºåÂêåÊó∂slave-1‰∏çÂÜçË¥üË¥£select„ÄÇ slave-1Â∞ÜmasterÁöÑÂ§çÂà∂Á∫øÁ®ãÁöÑË¥üÊãÖÔºåËΩ¨ÁßªÂà∞Ëá™Â∑±ÁöÑË∫´‰∏ä„ÄÇËøôÂ∞±ÊòØÊâÄË∞ìÁöÑÂ§öÁ∫ßÂ§çÂà∂ÁöÑÊ¶ÇÂøµ„ÄÇ ÈóÆÈ¢ò6ÔºöÂΩì‰∏Ä‰∏™selectÂèëÂæÄMySQL proxyÔºåÂèØËÉΩËøôÊ¨°Áî±slave-2ÂìçÂ∫îÔºå‰∏ãÊ¨°Áî±slave-3ÂìçÂ∫îÔºåËøôÊ†∑ÁöÑËØùÔºåÂ∞±Êó†Ê≥ïÂà©Áî®Êü•ËØ¢ÁºìÂ≠ò‰∫Ü„ÄÇ Â∫îËØ•Êâæ‰∏Ä‰∏™ÂÖ±‰∫´ÂºèÁöÑÁºìÂ≠òÔºåÊØîÂ¶ÇmemcacheÊù•Ëß£ÂÜ≥„ÄÇÂ∞Üslave-2,slave-3,‚Ä¶Ëøô‰∫õÊü•ËØ¢ÁöÑÁªìÊûúÈÉΩÁºìÂ≠òËá≥mamcache‰∏≠„ÄÇ ÈóÆÈ¢ò7ÔºöÈöèÁùÄÂ∫îÁî®ÁöÑÊó•ÁõäÂ¢ûÈïøÔºåËØªÊìç‰ΩúÂæàÂ§öÔºåÊàë‰ª¨ÂèØ‰ª•Êâ©Â±ïslaveÔºå‰ΩÜÊòØÂ¶ÇÊûúmasterÊª°Ë∂≥‰∏ç‰∫ÜÂÜôÊìç‰Ωú‰∫ÜÔºåÊÄé‰πàÂäûÂë¢Ôºü scale on ?Êõ¥Â•ΩÁöÑÊúçÂä°Âô®Ôºü Ê≤°ÊúâÊúÄÂ•ΩÁöÑÔºåÂè™ÊúâÊõ¥Â•ΩÁöÑÔºåÂ§™Ë¥µ‰∫Ü„ÄÇ„ÄÇ„ÄÇscale out ? ‰∏ª‰ªéÂ§çÂà∂Êû∂ÊûÑÂ∑≤ÁªèÊª°Ë∂≥‰∏ç‰∫Ü„ÄÇÂèØ‰ª•ÂàÜÂ∫ì„ÄêÂûÇÁõ¥ÊãÜÂàÜ„ÄëÔºåÂàÜË°®„ÄêÊ∞¥Âπ≥ÊãÜÂàÜ„Äë„ÄÇ 3.mysql È´òÂπ∂ÂèëÁéØÂ¢ÉËß£ÂÜ≥ÊñπÊ°à? MySQL È´òÂπ∂ÂèëÁéØÂ¢ÉËß£ÂÜ≥ÊñπÊ°àÔºö ÂàÜÂ∫ì ÂàÜË°® ÂàÜÂ∏ÉÂºè Â¢ûÂä†‰∫åÁ∫ßÁºìÂ≠ò„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ ÈúÄÊ±ÇÂàÜÊûêÔºö‰∫íËÅîÁΩëÂçï‰Ωç ÊØèÂ§©Â§ßÈáèÊï∞ÊçÆËØªÂèñÔºåÂÜôÂÖ•ÔºåÂπ∂ÂèëÊÄßÈ´ò„ÄÇ Áé∞ÊúâËß£ÂÜ≥ÊñπÂºèÔºöÊ∞¥Âπ≥ÂàÜÂ∫ìÂàÜË°®ÔºåÁî±ÂçïÁÇπÂàÜÂ∏ÉÂà∞Â§öÁÇπÊï∞ÊçÆÂ∫ì‰∏≠Ôºå‰ªéËÄåÈôç‰ΩéÂçïÁÇπÊï∞ÊçÆÂ∫ìÂéãÂäõ„ÄÇ ÈõÜÁæ§ÊñπÊ°àÔºöËß£ÂÜ≥DBÂÆïÊú∫Â∏¶Êù•ÁöÑÂçïÁÇπDB‰∏çËÉΩËÆøÈóÆÈóÆÈ¢ò„ÄÇ ËØªÂÜôÂàÜÁ¶ªÁ≠ñÁï•ÔºöÊûÅÂ§ßÈôêÂ∫¶ÊèêÈ´ò‰∫ÜÂ∫îÁî®‰∏≠ReadÊï∞ÊçÆÁöÑÈÄüÂ∫¶ÂíåÂπ∂ÂèëÈáè„ÄÇÊó†Ê≥ïËß£ÂÜ≥È´òÂÜôÂÖ•ÂéãÂäõ„ÄÇ 4.Êï∞ÊçÆÂ∫ìÂ¥©Ê∫ÉÊó∂‰∫ãÂä°ÁöÑÊÅ¢Â§çÊú∫Âà∂ÔºàREDOÊó•ÂøóÂíåUNDOÊó•ÂøóÔºâ?ËΩ¨ËΩΩÔºöMySQL REDOÊó•ÂøóÂíåUNDOÊó•Âøó Undo Log: Undo LogÊòØ‰∏∫‰∫ÜÂÆûÁé∞‰∫ãÂä°ÁöÑÂéüÂ≠êÊÄßÔºåÂú®MySQLÊï∞ÊçÆÂ∫ìInnoDBÂ≠òÂÇ®ÂºïÊìé‰∏≠ÔºåËøòÁî®‰∫ÜUndo LogÊù•ÂÆûÁé∞Â§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂(ÁÆÄÁß∞ÔºöMVCC)„ÄÇ ‰∫ãÂä°ÁöÑÂéüÂ≠êÊÄß(Atomicity)‰∫ãÂä°‰∏≠ÁöÑÊâÄÊúâÊìç‰ΩúÔºåË¶Å‰πàÂÖ®ÈÉ®ÂÆåÊàêÔºåË¶Å‰πà‰∏çÂÅö‰ªª‰ΩïÊìç‰ΩúÔºå‰∏çËÉΩÂè™ÂÅöÈÉ®ÂàÜÊìç‰Ωú„ÄÇÂ¶ÇÊûúÂú®ÊâßË°åÁöÑËøáÁ®ã‰∏≠ÂèëÁîü‰∫ÜÈîôËØØÔºåË¶ÅÂõûÊªö(Rollback)Âà∞‰∫ãÂä°ÂºÄÂßãÂâçÁöÑÁä∂ÊÄÅÔºåÂ∞±ÂÉèËøô‰∏™‰∫ãÂä°‰ªéÊù•Ê≤°ÊúâÊâßË°åËøá„ÄÇÂéüÁêÜUndo LogÁöÑÂéüÁêÜÂæàÁÆÄÂçïÔºå‰∏∫‰∫ÜÊª°Ë∂≥‰∫ãÂä°ÁöÑÂéüÂ≠êÊÄßÔºåÂú®Êìç‰Ωú‰ªª‰ΩïÊï∞ÊçÆ‰πãÂâçÔºåÈ¶ñÂÖàÂ∞ÜÊï∞ÊçÆÂ§á‰ªΩÂà∞‰∏Ä‰∏™Âú∞ÊñπÔºàËøô‰∏™Â≠òÂÇ®Êï∞ÊçÆÂ§á‰ªΩÁöÑÂú∞ÊñπÁß∞‰∏∫UndoLogÔºâ„ÄÇÁÑ∂ÂêéËøõË°åÊï∞ÊçÆÁöÑ‰øÆÊîπ„ÄÇÂ¶ÇÊûúÂá∫Áé∞‰∫ÜÈîôËØØÊàñËÄÖÁî®Êà∑ÊâßË°å‰∫ÜROLLBACKËØ≠Âè•ÔºåÁ≥ªÁªüÂèØ‰ª•Âà©Áî®Undo Log‰∏≠ÁöÑÂ§á‰ªΩÂ∞ÜÊï∞ÊçÆÊÅ¢Â§çÂà∞‰∫ãÂä°ÂºÄÂßã‰πãÂâçÁöÑÁä∂ÊÄÅ„ÄÇ ‰πãÊâÄ‰ª•ËÉΩÂêåÊó∂‰øùËØÅÂéüÂ≠êÊÄßÂíåÊåÅ‰πÖÂåñÔºåÊòØÂõ†‰∏∫‰ª•‰∏ãÁâπÁÇπÔºö Êõ¥Êñ∞Êï∞ÊçÆÂâçËÆ∞ÂΩïUndo log„ÄÇ‰∏∫‰∫Ü‰øùËØÅÊåÅ‰πÖÊÄßÔºåÂøÖÈ°ªÂ∞ÜÊï∞ÊçÆÂú®‰∫ãÂä°Êèê‰∫§ÂâçÂÜôÂà∞Á£ÅÁõò„ÄÇÂè™Ë¶Å‰∫ãÂä°ÊàêÂäüÊèê‰∫§ÔºåÊï∞ÊçÆÂøÖÁÑ∂Â∑≤ÁªèÊåÅ‰πÖÂåñ„ÄÇUndo logÂøÖÈ°ªÂÖà‰∫éÊï∞ÊçÆÊåÅ‰πÖÂåñÂà∞Á£ÅÁõò„ÄÇÂ¶ÇÊûúÂú®G,H‰πãÈó¥Á≥ªÁªüÂ¥©Ê∫ÉÔºåundo logÊòØÂÆåÊï¥ÁöÑÔºå ÂèØ‰ª•Áî®Êù•ÂõûÊªö‰∫ãÂä°„ÄÇÂ¶ÇÊûúÂú®A-F‰πãÈó¥Á≥ªÁªüÂ¥©Ê∫É,Âõ†‰∏∫Êï∞ÊçÆÊ≤°ÊúâÊåÅ‰πÖÂåñÂà∞Á£ÅÁõò„ÄÇÊâÄ‰ª•Á£ÅÁõò‰∏äÁöÑÊï∞ÊçÆËøòÊòØ‰øùÊåÅÂú®‰∫ãÂä°ÂºÄÂßãÂâçÁöÑÁä∂ÊÄÅ„ÄÇ Áº∫Èô∑ÔºöÊØè‰∏™‰∫ãÂä°Êèê‰∫§ÂâçÂ∞ÜÊï∞ÊçÆÂíåUndo LogÂÜôÂÖ•Á£ÅÁõòÔºåËøôÊ†∑‰ºöÂØºËá¥Â§ßÈáèÁöÑÁ£ÅÁõòIOÔºåÂõ†Ê≠§ÊÄßËÉΩÂæà‰Ωé„ÄÇÂ¶ÇÊûúËÉΩÂ§üÂ∞ÜÊï∞ÊçÆÁºìÂ≠ò‰∏ÄÊÆµÊó∂Èó¥ÔºåÂ∞±ËÉΩÂáèÂ∞ëIOÊèêÈ´òÊÄßËÉΩ„ÄÇ‰ΩÜÊòØËøôÊ†∑Â∞±‰ºö‰∏ßÂ§±‰∫ãÂä°ÁöÑÊåÅ‰πÖÊÄß„ÄÇÂõ†Ê≠§ÂºïÂÖ•‰∫ÜÂè¶Â§ñ‰∏ÄÁßçÊú∫Âà∂Êù•ÂÆûÁé∞ÊåÅ‰πÖÂåñÔºåÂç≥Redo Log„ÄÇ Redo Log: ÂéüÁêÜÂíåUndo LogÁõ∏ÂèçÔºåRedo LogËÆ∞ÂΩïÁöÑÊòØÊñ∞Êï∞ÊçÆÁöÑÂ§á‰ªΩ„ÄÇÂú®‰∫ãÂä°Êèê‰∫§ÂâçÔºåÂè™Ë¶ÅÂ∞ÜRedo LogÊåÅ‰πÖÂåñÂç≥ÂèØÔºå‰∏çÈúÄË¶ÅÂ∞ÜÊï∞ÊçÆÊåÅ‰πÖÂåñ„ÄÇÂΩìÁ≥ªÁªüÂ¥©Ê∫ÉÊó∂ÔºåËôΩÁÑ∂Êï∞ÊçÆÊ≤°ÊúâÊåÅ‰πÖÂåñÔºå‰ΩÜÊòØRedo LogÂ∑≤ÁªèÊåÅ‰πÖÂåñ„ÄÇÁ≥ªÁªüÂèØ‰ª•Ê†πÊçÆRedo LogÁöÑÂÜÖÂÆπÔºåÂ∞ÜÊâÄÊúâÊï∞ÊçÆÊÅ¢Â§çÂà∞ÊúÄÊñ∞ÁöÑÁä∂ÊÄÅ„ÄÇ]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
      </categories>
      <tags>
        <tag>Êï∞ÊçÆÂ∫ìÈù¢ËØïÈ¢ò</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â§öÁ∫øÁ®ãÔºàÂÖ´Ôºâ--- ÊÄªÁªì & Ë°•ÂÖÖ & api ‰ΩøÁî®]]></title>
    <url>%2F2020%2F03%2F01%2F%E5%A4%9A%E7%BA%BF%E7%A8%8B%EF%BC%88%E5%85%AB%EF%BC%89---%20%E6%80%BB%E7%BB%93%20%26%20api%20%E4%BD%BF%E7%94%A8%20%26%20%E8%A1%A5%E5%85%85.html</url>
    <content type="text"><![CDATA[Â≠¶‰π†Ë∑ØÂæÑ Ë°•ÂÖÖ‰ª•‰∏äÂü∫Êú¨‰∏äÊ∂µÁõñ‰∫ÜËá™Â∑±ÁúãÁöÑÂ§öÁ∫øÁ®ãÁöÑÂÜÖÂÆπÔºå‰ΩÜÊòØÂë¢ÔºåËøòÊúâ‰∏Ä‰∫õ juc ‰∏ãÁöÑÁ±ªÊàëÊ≤°ÊúâÊèêÂèäÂà∞Ôºå‰ΩÜÊòØÂèàÊØîËæÉÈáçË¶ÅÔºå‰∏ãÈù¢ÊàëÁ®çÂæÆÂ±ïÂºÄËØ¥‰∏Ä‰∏ãÔºåÂ∞±‰∏ç‰ªéÊ∫êÁ†Å‰∏äÂàÜÊûê‰∫ÜÔºåÂõ†‰∏∫ÈÉΩÊòØÂ§ßÂêåÂ∞èÂºÇÁöÑÔºå‰∏ªË¶ÅËøòÊòØ‰ªéË∑ü‰ª•ÂâçË∞àÂà∞ÁöÑÁ±ªÁöÑÂºÇÂêåÁÇπÂá∫ÂèëÔºåÁÑ∂ÂêéËÆ≤‰∏Ä‰∏ãÂÆûÈôÖÁî®ÈÄîÂíå‰ΩøÁî®ÊñπÂºè„ÄÇ StampedLockÂú®Â§öÁ∫øÁ®ãÔºà‰∏ÄÔºâÔºåÊàë‰ª¨Â∞±ÊèêÂèä‰∫Ü ReentrantLock Âíå ReentrantReadWriteLockÔºå‰ªñ‰ª¨ÊòØÂú® jdk 1. 5 Â∞±ÂºïÂÖ•‰∫ÜÔºåËÄåËøô‰∏™ StampedLock ÂàôÊòØÂú® jdk 1.8 ÂºïÂÖ•ÁöÑÔºåÊó¢ÁÑ∂Êôö‰∫ÜÂ•ΩÂá†Âπ¥ÊâçÊù•ÔºåËÇØÂÆöÊòØÊõ¥Âä†‰ºòÁßÄ‰∫ÜÔºÅÁ≠îÊ°à‰πüÊòØËÇØÂÆöÁöÑÔºåStampedLock ÁªßÊâø‰∫ÜÂâçËæà‰ª¨ÁöÑ‰ºòÁÇπ„ÄÇReentrantLock ÁªßÊâø‰∫Ü AQS ÁöÑ‰ºòÁÇπÔºåÂºïÂÖ•Ëá™ÊóãÈîÅÂáèÂ∞ëÈîÅÁöÑÊ∂àËÄóÔºåReentrantReadWriteLock ÂàôÂú® ReentrantLock Âü∫Á°Ä‰πã‰∏äÔºåÂ§ßÂ§ßËß£ÂÜ≥‰∫ÜËØªÂ§öÂÜôÂ∞ëÁöÑÂú∫ÊôØ‰∏ãÔºåÂπ∂ÂèëÁöÑÊïàÁéá„ÄÇËØª-ËØª‰πãÈó¥‰∏ç‰∫íÊñ•ÔºåÂÖ±‰∫´ÔºåÂÜô-ËØªÔºåÂÜô-ÂÜô‰æùÁÑ∂‰∫íÊñ•„ÄÇStampedLock ÂàôÂú® ReentrantReadWriteLock Âü∫Á°Ä‰∏äÁªßÁª≠Êâ©Â±ïÔºå‰∏∫‰∫ÜËß£ÂÜ≥ËØªÂ§öÂÜôÂ∞ëÂú∫ÊôØ‰∏ãÂÜôÈ••È•øÁöÑÈóÆÈ¢òÔºåÂºïÂÖ•ÊÇ≤ËßÇËØªÈîÅÂíå‰πêËßÇËØªÈîÅÁöÑÊ¶ÇÂøµÔºåÊâÄË∞ìÁöÑÊÇ≤ËßÇËØªÈîÅÂ∞±ÊòØ ReentrantReadWriteLock ‰∏≠ÁöÑ readLockÔºåÂç≥ÊØèÊ¨°ËØªÊï∞ÊçÆÊó∂ÈÉΩÈúÄË¶ÅÂä†ÈîÅÔºå‰∏îËØª-ÂÜô‰∫íÊñ•ÔºåËÄå‰πêËßÇÈîÅ‰∏çÂêåÔºåÂΩìÊï∞ÊçÆÊ≤°ÊúâÂèëÁîüÂèòÂåñÔºàÂà§Êñ≠ stamp ÊòØÂê¶ÂèëÁîüÂèòÂåñÔºâÊó∂ÔºåÂèØ‰ª•‰∏çÂä†ÈîÅÔºåÁõ¥Êé•ËØªÂèñÔºå‰πüÂ∞±ÊòØÂèØ‰ª•ÂÅöÂà∞ ËØª-ÂÜô‰∏ç‰∫íÊñ•„ÄåÂõ†‰∏∫‰∫∫ÂÆ∂ËØªÂéãÊ†πÊ≤°Ë¶ÅÈîÅ‚Ä¶Âè™ÊòØÂéªËØª‰∫Ü‰∏™ stamp ËÄåÂ∑≤‚Ä¶„Äç„ÄÇ ÈÉ®ÂàÜÊñπÊ≥ï ÂèØ‰ª•ÁúãÂà∞ÔºåÊï¥‰Ωì‰∏äÂÖ∂ÂÆû StampedLock Âíå ReentrantReadWriteLock ÊñπÊ≥ïÂ∑Æ‰∏çÂ§öÔºåÂÆûÁé∞ÊñπÂºè‰πüÊòØ‰∏ÄÊ†∑ÔºåÈÉΩÊòØÁî®‰∫Ü CLH ÈòüÂàóÊê≠ÈÖçËá™ÊóãËß£ÂÜ≥ÊéíÈòüÁ≠âÂæÖÈóÆÈ¢òÔºåÊúÄÈáçË¶ÅÁöÑËøòÊòØ‰πêËßÇËØªÈîÅÁöÑÂä†ÂÖ•„ÄÇ„ÄåÁ®çÂæÆÁúã‰∫Ü‰∏ÄÁúºÊ∫êÁ†ÅÔºåËøôÈáåÁöÑÈòüÂàóÂ•ΩÂÉè‰∏çÊòØ Node ËäÇÁÇπ‰∫ÜÔºåËÄåÊòØ WNode ËäÇÁÇπÔºåÂéüÂõ†ÊòØÂä†‰∫Ü‰∏Ä‰∏™Â±ûÊÄß‚Äî- stamp„ÄÇ„Äç ÊâÄ‰ª•Êàë‰ª¨Áé∞Âú®Êù•ÁúãÁúãÂÆòÊñπÁªôÁöÑ‰æãÂ≠êÔºå‰Ωì‰ºö‰∏Ä‰∏ã‰πêËßÇËØªÈîÅÂ¶Ç‰Ωï‰ΩøÁî®ÁöÑÔºö 12345678910111213141516171819202122232425262728293031323334public class Point &#123; private double x, y;//ÂÜÖÈÉ®ÂÆö‰πâË°®Á§∫ÂùêÊ†áÁÇπ private final StampedLock s1 = new StampedLock();//ÂÆö‰πâ‰∫Ü StampedLock ÈîÅ void move(double deltaX, double deltaY) &#123; // ÂÜô long stamp = s1.writeLock();//Ê≥®ÊÑè StampedLock.writeLock()ÂèØÊ≤°ÊúâÂìçÂ∫î‰∏≠Êñ≠Âì¶ //ÂìçÂ∫î‰∏≠Êñ≠ÈúÄË∞ÉÁî®StampedLock.asWriteLock()ÔºåÁ≠âÂêå‰∫éReentrantReadWriteLock.writeLock() try &#123; x += deltaX; y += deltaY; &#125; finally &#123; s1.unlockWrite(stamp);//ÈÄÄÂá∫‰∏¥ÁïåÂå∫,ÈáäÊîæÂÜôÈîÅ &#125; &#125; double distanceFormOrigin() &#123;//Âè™ËØªÊñπÊ≥ï long stamp = s1.tryOptimisticRead(); //ËØïÂõæÂ∞ùËØï‰∏ÄÊ¨°‰πêËßÇËØª ËøîÂõû‰∏Ä‰∏™Á±ª‰ºº‰∫éÊó∂Èó¥Êà≥ÁöÑÈÇÆÊà≥Êï¥Êï∞stamp Ëøô‰∏™stampÂ∞±ÂèØ‰ª•‰Ωú‰∏∫Ëøô‰∏Ä‰∏™ÊâÄËé∑ÂèñÁöÑÂá≠ËØÅ //---------------------------------- // ËøôÈáåÂ∞±ÊòØÂºÄÂßãËØªÂèñÂÜÖÂÆπ double currentX = x, currentY = y;//ËØªÂèñxÂíåyÁöÑÂÄº //---------------------------------- // ÁÑ∂ÂêéÂà§Êñ≠‰∏Ä‰∏ãËØªÁöÑËøáÁ®ã‰∏≠Ôºåstamp ÊúâÊ≤°ÊúâÂèòÂåñÔºåÂ∞±ÊòØËØ¥ÊúüÈó¥ÊúâÊ≤°ÊúâÂÜôÈîÅÂ∑•‰Ωú‰∫ÜÔºåÂè™ÊúâÂÜôÈîÅÊîπÂèò stamp if (!s1.validate(stamp)) &#123; stamp = s1.readLock(); // ÂèòÊàêÊÇ≤ËßÇËØªÈîÅÔºåÊ≥®ÊÑèËøôÈáåË∑üÂÜôÈîÅ‰∏ÄÊ†∑‰∏çÊòØÂèØ‰∏≠Êñ≠ÁöÑ try &#123; currentX = x; currentY = y; &#125; finally &#123; s1.unlockRead(stamp);//ÈÄÄÂá∫‰∏¥ÁïåÂå∫,ÈáäÊîæËØªÈîÅ &#125; &#125; return Math.sqrt(currentX * currentX + currentY * currentY); &#125;&#125; ÊÄªÁªì‰∏Ä‰∏ãÔºö StampedLock ‰∏≠ÁöÑ asReadLock() Âíå asWriteLock() Á≠âÂêå‰∫é ReentrantReadWriteLock ‰∏≠ÁöÑ readLock() Âíå writeLock()ÔºåÈÉΩÊòØÂèØ‰∏≠Êñ≠ÁöÑÔºå‰ΩÜÊòØ StampedLock() ‰πüÊèê‰æõ‰∫Ü readLock() Âíå writeLock()Ôºå‰ΩÜËøôÊòØ‰∏çÂèØ‰∏≠Êñ≠ÁöÑ„ÄÇ StampedLock ‰∏≠ÁöÑËØªÊòØÂÖà‰πêËßÇËØªÔºåÂú®‰πêËßÇËØª‰πãÂâçÔºåÂÖàÊãøÂà∞ÂΩìÂâçÁöÑ stampÔºåÁÑ∂ÂêéÂÜçËØªÂÆå‰πãÂêéÈ™åËØÅ‰∏ÄÈÅçÊòØÂê¶‰∏≠ÈÄîÊúâÂÜôÈîÅÊîπÂèò‰∫Ü stampÔºåÈò≤Ê≠¢Âá∫Áé∞ËÑèËØªÔºåÂ¶ÇÊûú stamp ÂèòÂåñ‰∫ÜÔºåÂàôÂçáÁ∫ßÊàêÊÇ≤ËßÇËØªÈîÅÂÜçËØª‰∏ÄÈÅç„ÄÇ Ê≥®ÊÑè StampedLock.readLock() Âíå Stamped.writeLock()ÁöÑÁî®Ê≥ïÔºå‰ºöËøîÂõû‰∏Ä‰∏™ long stampÔºåÁõ¥Êé• Stamped.readLock() Â∞±ÊòØËé∑ÂèñÈîÅÂπ∂‰∏îËøîÂõû stampÔºåÁÑ∂ÂêéËß£ÈîÅË¶ÅÂ∏¶ÁùÄËøô‰∏™ stamp ÊâçËÉΩËß£ÈîÅ„ÄÇ ‰∏Ä‰∫õÁñëÊÉëÈ¶ñÂÖàÁúãÂà∞ÁΩë‰∏äËØ¥ÁöÑÔºåÂõ†‰∏∫ Stamped.readLock()‰∏çÂ§ÑÁêÜ‰∏≠Êñ≠ÂºÇÂ∏∏ÔºåÊâÄ‰ª•Âú®Á∫øÁ®ãÊåÇËµ∑ÂêéÔºåÊâãÂä®Ê∑ªÂä†‰∏≠Êñ≠ÔºåËÉΩÂ§üÂ∞ÜÊåÇËµ∑ÁöÑÁ∫øÁ®ã‰ªé wait ‚Äî&gt; runningÔºåÁÑ∂ÂêéÂ¶ÇÊûúÊ≠§Êó∂ÊÉ≥Ë¶ÅËé∑ÂèñÁöÑÈîÅÂ¶ÇÊûú‰∏ÄÁõ¥Ë¢´ÂÜôÈîÅÊåÅÊúâÔºåÈÇ£‰πàËØªÈîÅÂ∞±‰ºö‰∏ÄÁõ¥Ëá™ÊóãÔºå‰ΩøÂæóCPU ÁàÜÁÇ∏‚Ä¶ ‰∫éÊòØÊàëÈùûÂ∏∏Â•ΩÂ•áÁöÑËØï‰∫Ü‰∏Ä‰∏ãÔºåÂèëÁé∞Âá∫Áé∞‰∫Ü‰∏Ä‰∫õÈóÆÈ¢òÔºåÂ¶ÇÊûúÊàëÂ∞Ü StampedLock ÈÄÄÂåñÊàê ReentrantReadWriteLockÔºåÂπ∂‰∏îÊâãÂä®Ëß¶Âèë‰∏≠Êñ≠Âπ∂‰∏î‰∏çÂ§ÑÁêÜ‰∏≠Êñ≠ÔºåÁöÑÁ°Æ‰ºöÂØºËá¥ CPU Âç†Êª°Ôºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748package Â§öÁ∫øÁ®ã.Ë°•ÂÖÖ;import java.util.concurrent.TimeUnit;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.LockSupport;import java.util.concurrent.locks.StampedLock;public class StampedLockDemo &#123; static Thread[] holdCpuThreads = new Thread[3]; static final StampedLock lock = new StampedLock(); static Lock readLock = lock.asReadLock(); static Lock writeLock = lock.asWriteLock(); public static void main(String[] args) throws InterruptedException &#123; new Thread(() -&gt; &#123; writeLock.lock(); try &#123; TimeUnit.SECONDS.sleep(40); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; writeLock.unlock(); System.out.println("123"); &#125;).start(); Thread.sleep(2000); for (int i = 0; i &lt; 3; ++i) &#123; holdCpuThreads[i] = new Thread(new HoldCPUReadThread()); holdCpuThreads[i].start(); &#125; System.out.println("0------------"); Thread.sleep(10000); System.out.println("1------------"); for (int i = 0; i &lt; 3; i++) &#123; holdCpuThreads[i].interrupt(); &#125; &#125; private static class HoldCPUReadThread implements Runnable &#123; public void run() &#123; readLock.lock(); System.out.println(Thread.currentThread().getName() + " get read lock"); readLock.unlock(); System.out.println("--------------------------"); &#125; &#125;&#125; ÂæàÂÆπÊòìÁúãÂà∞ÔºåÂú®‰∏≠Êñ≠‰πãÂâçÔºåËØªÁ∫øÁ®ãÂÖ®ÈÉ®Ë¢´ÊåÇËµ∑‰∫ÜÔºåÊâÄ‰ª•Âπ∂‰∏çÂç†Áî® cpu ËµÑÊ∫êÔºå‰ΩÜÊòØÊâãÂä®‰∏≠Êñ≠ÂêéÔºåpark()Ë¢´Âî§ÈÜíÔºåÁõ¥Êé•ÂØºËá¥ËØªÁ∫øÁ®ã runningÔºå‰∏çÂÅúÁöÑËá™ÊóãËé∑ÂèñÈîÅÔºå‰ΩÜÊòØÈîÅ‰∏ÄÁõ¥Ë¢´ write Âç†ÊúâÔºåÊâÄ‰ª•Â∞±ÊääÂçïÊ†∏ CPU Âç†Êª°ÔºåÊâÄ‰ª•ÊàëËøô‰∏™Â∫îËØ•ÊòØ4 Ê†∏Â§ÑÁêÜÂô®ÔºüËØ¥Â•ΩÁöÑ 6 Ê†∏Âë¢ÔºüÔºü Â¶ÇÊûú‰∏çÈÄÄÂåñÁöÑËØùÔºåÁªèËøáÊµãËØïÔºåÁöÑÁ°Æ‰πü‰ºöÂèëÁîü‰∏ÄÊ†∑ÁöÑÊÉÖÂÜµ„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546package Â§öÁ∫øÁ®ã.Ë°•ÂÖÖ;import java.util.concurrent.TimeUnit;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.LockSupport;import java.util.concurrent.locks.StampedLock;public class StampedLockDemo &#123; static Thread[] holdCpuThreads = new Thread[3]; static final StampedLock lock = new StampedLock(); public static void main(String[] args) throws InterruptedException &#123; new Thread(() -&gt; &#123; long stamp1 = lock.writeLock(); try &#123; TimeUnit.SECONDS.sleep(40); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125;// LockSupport.parkNanos(6100000000L); lock.unlockWrite(stamp1); System.out.println("123"); &#125;).start(); Thread.sleep(2000); for (int i = 0; i &lt; 3; ++i) &#123; holdCpuThreads[i] = new Thread(new HoldCPUReadThread()); holdCpuThreads[i].start(); &#125; System.out.println("0------------"); Thread.sleep(10000); System.out.println("1------------"); for (int i = 0; i &lt; 3; i++) &#123; holdCpuThreads[i].interrupt(); &#125; &#125; private static class HoldCPUReadThread implements Runnable &#123; public void run() &#123; long stamp2 = lock.readLock(); System.out.println(Thread.currentThread().getName() + " get read lock"); lock.unlockRead(stamp2); System.out.println("--------------------------"); &#125; &#125;&#125; ‰∏≠Êñ≠Êù•‰πãÂâçÁöÑ CPUÔºö ‰∏≠Êñ≠Êù•‰∫Ü‰πãÂêéÔºö ‰ΩÜÊòØÔºå‰ΩÜÊòØÔºå‰ΩÜÊòØÔºÅÁΩë‰∏äÁöÑ‰æãÂ≠êÂ§™‰∏çÈù†Ë∞±‰∫ÜÔºåÂ§ßÂÆ∂Ê≥®ÊÑèÁúãÔºå‰∏ãÈù¢Ëøô‰∏™‰æãÂ≠êÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142package Â§öÁ∫øÁ®ã.Ë°•ÂÖÖ;import java.util.concurrent.TimeUnit;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.LockSupport;import java.util.concurrent.locks.StampedLock;public class StampedLockDemo &#123; static Thread[] holdCpuThreads = new Thread[3]; static final StampedLock lock = new StampedLock(); public static void main(String[] args) throws InterruptedException &#123; new Thread(() -&gt; &#123; long stamp1 = lock.writeLock(); // ÈóÆÈ¢òÂá∫Âú®Ëøô LockSupport.parkNanos(6100000000L); lock.unlockWrite(stamp1); System.out.println("123"); &#125;).start(); Thread.sleep(2000); for (int i = 0; i &lt; 3; ++i) &#123; holdCpuThreads[i] = new Thread(new HoldCPUReadThread()); holdCpuThreads[i].start(); &#125; System.out.println("0------------"); Thread.sleep(10000); System.out.println("1------------"); for (int i = 0; i &lt; 3; i++) &#123; holdCpuThreads[i].interrupt(); &#125; &#125; private static class HoldCPUReadThread implements Runnable &#123; public void run() &#123; long stamp2 = lock.readLock(); System.out.println(Thread.currentThread().getName() + " get read lock"); lock.unlockRead(stamp2); System.out.println("--------------------------"); &#125; &#125;&#125; 1234567890------------123Thread-3 get read lockThread-2 get read lock----------------------------------------------------Thread-1 get read lock--------------------------1------------ CPU ÂÖ®Á®ãÊ≤°ÊúâÂèòÂåñÔºåÁª¥ÊåÅÂú® 2%ÔºåËØ¥ÊòéÊ≤°ÊúâÂèëÁîüËá™Êóã„ÄÇLockSupport.parkNanos(6100000000L);Ëøô‰∏ÄË°åÔºåÊÑèÊÄùÊòØËØ•Á∫øÁ®ãÂè™‰ºöÊåÇËµ∑ 6 ÁßíÔºåÁ≠â‰Ω†10ÁßíÂêé‰∏≠Êñ≠Êù•‰∫ÜÁöÑÊó∂ÂÄôÂÜôÈîÅÊó©Â∞±ÈáäÊîæÈîÅ‰∫ÜÔºåÊ≠§Êó∂Ë¢´Âî§ÈÜíÁöÑËØªÈîÅËá™ÊóãËÉΩÂ§üÁõ¥Êé•ÊãøÂà∞ÈîÅÔºå‰∏ç‰ºöÊ≠ªÂæ™ÁéØ‰∏ÄÁõ¥Ëá™ÊóãÔºåÊâÄ‰ª• CPU ÂéãÊ†π‰∏ç‰ºöÂèëÁîüÂèòÂåñ‚Ä¶Áúã‰∫Ü‰∏ãÁΩë‰∏äËØ¥ÁöÑ‰æãÂ≠êÔºåÂü∫Êú¨‰∏äÂÖ®ÊòØÈîôËØØÁöÑ‚Ä¶ÈöæÈÅìÁúüÁöÑÂÖ®ÈÉ®ÈÉΩÊòØÊäÑÊù•ÊäÑÂéªÂòõ‚Ä¶Â•ΩÊ≠πÈ™åËØÅ‰∏Ä‰∏ãÂòõ‚Ä¶ ConcurrentLinkedQueue ListÂØπÂ∫îÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÊúâ CopyOnWriteArrayList MapÂØπÂ∫îÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÊúâ ConcurrentHashMap QueueÂØπÂ∫îÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂàôÊòØ ConcurrentLinkedQueue https://www.ibm.com/developerworks/cn/java/j-lo-concurrent/index.html „Äå„Äç https://blog.csdn.net/qq_38293564/article/details/80798310 ÈùûÈòªÂ°ûÁÆóÊ≥ï ‰∏Ä‰∏™Á∫øÁ®ãÁöÑÂ§±Ë¥•ÂíåÊåÇËµ∑‰∏ç‰ºöÂºïËµ∑ÂÖ∂‰ªñ‰∫õÁ∫øÁ®ãÁöÑÂ§±Ë¥•ÂíåÊåÇËµ∑ÔºåËøôÊ†∑ÁöÑÁÆóÊ≥ïÁß∞‰∏∫ÈùûÈòªÂ°ûÁÆóÊ≥ï„ÄÇÈùûÈòªÂ°ûÁÆóÊ≥ïÈÄöËøá‰ΩøÁî®Â∫ïÂ±ÇÊú∫Âô®Á∫ßÂà´ÁöÑÂéüÂ≠êÊåá‰ª§Êù•Âèñ‰ª£ÈîÅÔºå‰ªéËÄå‰øùËØÅÊï∞ÊçÆÂú®Âπ∂ÂèëËÆøÈóÆ‰∏ãÁöÑ‰∏ÄËá¥ÊÄß„ÄÇ ConcurrentLinkedQueue ÁöÑÈùûÈòªÂ°ûÁÆóÊ≥ïÁÆÄËø∞Êú¨ÊñáÊé•‰∏ãÊù•Â∞ÜÂú®ÂàÜÊûê ConcurrentLinkedQueue Ê∫ê‰ª£Á†ÅÂÆûÁé∞ÁöÑËøáÁ®ã‰∏≠ÔºåÁ©øÊèíËÆ≤Ëß£ÈùûÈòªÂ°ûÁÆóÊ≥ïÁöÑÂÖ∑‰ΩìÂÆûÁé∞„ÄÇ‰∏∫‰∫Ü‰æø‰∫éËØªËÄÖÁêÜËß£Êú¨ÊñáÔºåÈ¶ñÂÖàËÆ©Êàë‰ª¨ÂØπÂÆÉÁöÑÂÆûÁé∞Êú∫Âà∂ÂÅö‰∏™ÂÖ®Â±ÄÊÄßÁöÑÁÆÄËø∞„ÄÇConcurrentLinkedQueue ÁöÑÈùûÈòªÂ°ûÁÆóÊ≥ïÂÆûÁé∞ÂèØÊ¶ÇÊã¨‰∏∫‰∏ãÈù¢ 5 ÁÇπÔºö ‰ΩøÁî® CAS ÂéüÂ≠êÊåá‰ª§Êù•Â§ÑÁêÜÂØπÊï∞ÊçÆÁöÑÂπ∂ÂèëËÆøÈóÆÔºåËøôÊòØÈùûÈòªÂ°ûÁÆóÊ≥ïÂæó‰ª•ÂÆûÁé∞ÁöÑÂü∫Á°Ä„ÄÇ head/tail Âπ∂ÈùûÊÄªÊòØÊåáÂêëÈòüÂàóÁöÑÂ§¥ / Â∞æËäÇÁÇπÔºå‰πüÂ∞±ÊòØËØ¥ÂÖÅËÆ∏ÈòüÂàóÂ§Ñ‰∫é‰∏ç‰∏ÄËá¥Áä∂ÊÄÅ„ÄÇ Ëøô‰∏™ÁâπÊÄßÊääÂÖ•Èòü / Âá∫ÈòüÊó∂ÔºåÂéüÊú¨ÈúÄË¶Å‰∏ÄËµ∑ÂéüÂ≠êÂåñÊâßË°åÁöÑ‰∏§‰∏™Ê≠•È™§ÂàÜÁ¶ªÂºÄÊù•Ôºå‰ªéËÄåÁº©Â∞è‰∫ÜÂÖ•Èòü / Âá∫ÈòüÊó∂ÈúÄË¶ÅÂéüÂ≠êÂåñÊõ¥Êñ∞ÂÄºÁöÑËåÉÂõ¥Âà∞ÂîØ‰∏ÄÂèòÈáè„ÄÇËøôÊòØÈùûÈòªÂ°ûÁÆóÊ≥ïÂæó‰ª•ÂÆûÁé∞ÁöÑÂÖ≥ÈîÆ„ÄÇ Áî±‰∫éÈòüÂàóÊúâÊó∂‰ºöÂ§Ñ‰∫é‰∏ç‰∏ÄËá¥Áä∂ÊÄÅ„ÄÇ‰∏∫Ê≠§ÔºåConcurrentLinkedQueue ‰ΩøÁî®‰∏â‰∏™‰∏çÂèòÂºèÊù•Áª¥Êä§ÈùûÈòªÂ°ûÁÆóÊ≥ïÁöÑÊ≠£Á°ÆÊÄß„ÄÇ ‰ª•ÊâπÂ§ÑÁêÜÊñπÂºèÊù•Êõ¥Êñ∞ head/tailÔºå‰ªéÊï¥‰Ωì‰∏äÂáèÂ∞ëÂÖ•Èòü / Âá∫ÈòüÊìç‰ΩúÁöÑÂºÄÈîÄ„ÄÇ ‰∏∫‰∫ÜÊúâÂà©‰∫éÂûÉÂúæÊî∂ÈõÜÔºåÈòüÂàó‰ΩøÁî®ÁâπÊúâÁöÑ head Êõ¥Êñ∞Êú∫Âà∂Ôºõ‰∏∫‰∫ÜÁ°Æ‰øù‰ªéÂ∑≤Âà†Èô§ËäÇÁÇπÂêëÂêéÈÅçÂéÜÔºåÂèØÂà∞ËææÊâÄÊúâÁöÑÈùûÂà†Èô§ËäÇÁÇπÔºåÈòüÂàó‰ΩøÁî®‰∫ÜÁâπÊúâÁöÑÂêëÂêéÊé®ËøõÁ≠ñÁï•„ÄÇ ConcurrentLinkedQueue ÊúâÊú∫Êï¥Âêà‰∫Ü‰∏äËø∞ 5 ÁÇπÊù•ÂÆûÁé∞ÈùûÈòªÂ°ûÁÆóÊ≥ï„ÄÇ ‰∏çÂèòÂºèÂú®ÂêéÈù¢ÁöÑÊ∫ê‰ª£Á†ÅÂàÜÊûê‰∏≠ÔºåÊàë‰ª¨Â∞Ü‰ºöÁúãÂà∞ÈòüÂàóÊúâÊó∂‰ºöÂ§Ñ‰∫é‰∏ç‰∏ÄËá¥Áä∂ÊÄÅ„ÄÇ‰∏∫Ê≠§ÔºåConcurrentLinkedQueue ‰ΩøÁî®‰∏â‰∏™‰∏çÂèòÂºè ( Âü∫Êú¨‰∏çÂèòÂºèÔºåhead ÁöÑ‰∏çÂèòÂºèÂíå tail ÁöÑ‰∏çÂèòÂºè )ÔºåÊù•Á∫¶ÊùüÈòüÂàó‰∏≠ÊñπÊ≥ïÁöÑÊâßË°å„ÄÇÈÄöËøáËøô‰∏â‰∏™‰∏çÂèòÂºèÊù•Áª¥Êä§ÈùûÈòªÂ°ûÁÆóÊ≥ïÁöÑÊ≠£Á°ÆÊÄß„ÄÇ ‰∏çÂèòÂºèÔºöÂπ∂ÂèëÂØπË±°ÈúÄË¶Å‰∏ÄÁõ¥‰øùÊåÅÁöÑÁâπÊÄß„ÄÇ‰∏çÂèòÂºèÊòØÂπ∂ÂèëÂØπË±°ÁöÑÂêÑ‰∏™ÊñπÊ≥ï‰πãÈó¥ÂøÖÈ°ªÈÅµÂÆàÁöÑ‚ÄúÂ•ëÁ∫¶‚ÄùÔºåÊØè‰∏™ÊñπÊ≥ïÂú®Ë∞ÉÁî®ÂâçÂíåË∞ÉÁî®ÂêéÈÉΩÂøÖÈ°ª‰øùÊåÅ‰∏çÂèòÂºè„ÄÇÈááÁî®‰∏çÂèòÂºèÔºåÂ∞±ÂèØ‰ª•ÈöîÁ¶ªÁöÑÂàÜÊûêÊØè‰∏™ÊñπÊ≥ïÔºåËÄå‰∏çÁî®ËÄÉËôëÂÆÉ‰ª¨‰πãÈó¥ÊâÄÊúâÂèØËÉΩÁöÑ‰∫§‰∫í„ÄÇ Âü∫Êú¨‰∏çÂèòÂºèÂú®ÊâßË°åÊñπÊ≥ï‰πãÂâçÂíå‰πãÂêéÔºåÈòüÂàóÂøÖÈ°ªË¶Å‰øùÊåÅÁöÑ‰∏çÂèòÂºèÔºö ÂΩìÂÖ•ÈòüÊèíÂÖ•Êñ∞ËäÇÁÇπ‰πãÂêéÔºåÈòüÂàó‰∏≠Êúâ‰∏Ä‰∏™ next Âüü‰∏∫ null ÁöÑÔºàÊúÄÂêéÔºâËäÇÁÇπ„ÄÇ ‰ªé head ÂºÄÂßãÈÅçÂéÜÈòüÂàóÔºåÂèØ‰ª•ËÆøÈóÆÊâÄÊúâ item Âüü‰∏ç‰∏∫ null ÁöÑËäÇÁÇπ„ÄÇ head ÁöÑ‰∏çÂèòÂºèÂíåÂèØÂèòÂºèÂú®ÊâßË°åÊñπÊ≥ï‰πãÂâçÂíå‰πãÂêéÔºåhead ÂøÖÈ°ª‰øùÊåÅÁöÑ‰∏çÂèòÂºèÔºö ÊâÄÊúâ‚ÄúÊ¥ªÁùÄ‚ÄùÁöÑËäÇÁÇπÔºàÊåáÊú™Âà†Èô§ËäÇÁÇπÔºâÔºåÈÉΩËÉΩ‰ªé head ÈÄöËøáË∞ÉÁî® succ() ÊñπÊ≥ïÈÅçÂéÜÂèØËææ„ÄÇ head ‰∏çËÉΩ‰∏∫ null„ÄÇ head ËäÇÁÇπÁöÑ next Âüü‰∏çËÉΩÂºïÁî®Âà∞Ëá™Ë∫´„ÄÇ Âú®ÊâßË°åÊñπÊ≥ï‰πãÂâçÂíå‰πãÂêéÔºåhead ÁöÑÂèØÂèòÂºèÔºö head ËäÇÁÇπÁöÑ item ÂüüÂèØËÉΩ‰∏∫ nullÔºå‰πüÂèØËÉΩ‰∏ç‰∏∫ null„ÄÇ ÂÖÅËÆ∏ tail ÊªûÂêéÔºàlag behindÔºâ‰∫é headÔºå‰πüÂ∞±ÊòØËØ¥Ôºö‰ªé head ÂºÄÂßãÈÅçÂéÜÈòüÂàóÔºå‰∏ç‰∏ÄÂÆöËÉΩÂà∞Ëææ tail„ÄÇ tail ÁöÑ‰∏çÂèòÂºèÂíåÂèØÂèòÂºèÂú®ÊâßË°åÊñπÊ≥ï‰πãÂâçÂíå‰πãÂêéÔºåtail ÂøÖÈ°ª‰øùÊåÅÁöÑ‰∏çÂèòÂºèÔºö ÈÄöËøá tail Ë∞ÉÁî® succ() ÊñπÊ≥ïÔºåÊúÄÂêéËäÇÁÇπÊÄªÊòØÂèØËææÁöÑ„ÄÇ tail ‰∏çËÉΩ‰∏∫ null„ÄÇ Âú®ÊâßË°åÊñπÊ≥ï‰πãÂâçÂíå‰πãÂêéÔºåtail ÁöÑÂèØÂèòÂºèÔºö tail ËäÇÁÇπÁöÑ item ÂüüÂèØËÉΩ‰∏∫ nullÔºå‰πüÂèØËÉΩ‰∏ç‰∏∫ null„ÄÇ ÂÖÅËÆ∏ tail ÊªûÂêé‰∫é headÔºå‰πüÂ∞±ÊòØËØ¥Ôºö‰ªé head ÂºÄÂßãÈÅçÂéÜÈòüÂàóÔºå‰∏ç‰∏ÄÂÆöËÉΩÂà∞Ëææ tail„ÄÇ tail ËäÇÁÇπÁöÑ next ÂüüÂèØ‰ª•ÂºïÁî®Âà∞Ëá™Ë∫´„ÄÇ Ë°•ÂÖÖQ1Ôºöhead/tail Âπ∂ÈùûÊÄªÊòØÊåáÂêëÈòüÂàóÁöÑÂ§¥ / Â∞æËäÇÁÇπÔºåÂÖ∑‰ΩìÊòØÊÄéÊ†∑ÁöÑÂë¢Ôºü A1Ôºö ‰∏çÊòØÊØèÊ¨°Âá∫ÈòüÊó∂ÈÉΩÊõ¥Êñ∞headËäÇÁÇπÔºåÂΩìheadËäÇÁÇπÈáåÊúâÂÖÉÁ¥†Êó∂ÔºåÁõ¥Êé•ÂºπÂá∫headËäÇÁÇπÈáåÁöÑÂÖÉÁ¥†ÔºåËÄå‰∏ç‰ºöÊõ¥Êñ∞headËäÇÁÇπ„ÄÇÂè™ÊúâÂΩìheadËäÇÁÇπÈáåÊ≤°ÊúâÂÖÉÁ¥†Êó∂ÔºåÂá∫ÈòüÊìç‰ΩúÊâç‰ºöÊõ¥Êñ∞headËäÇÁÇπ„ÄÇÈááÁî®ËøôÁßçÊñπÂºè‰πüÊòØ‰∏∫‰∫ÜÂáèÂ∞ë‰ΩøÁî®CASÊõ¥Êñ∞headËäÇÁÇπÁöÑÊ∂àËÄóÔºå‰ªéËÄåÊèêÈ´òÂá∫ÈòüÊïàÁéá„ÄÇÊâÄ‰ª•headÂÖÉÁ¥†ÂèØËÉΩÊòØ nullÔºåÊ≠§Êó∂Âπ∂‰∏çÊòØÈòüÂàóÁöÑÂ§¥ÁªìÁÇπ„ÄÇ tailËäÇÁÇπÂπ∂‰∏çÊÄªÊòØÂ∞æËäÇÁÇπÔºåÊâÄ‰ª•ÊØèÊ¨°ÂÖ•ÈòüÈÉΩÂøÖÈ°ªÂÖàÈÄöËøátailËäÇÁÇπÊù•ÊâæÂà∞Â∞æËäÇÁÇπÔºåÂ∞æËäÇÁÇπÂèØËÉΩÂ∞±ÊòØtailËäÇÁÇπÔºå‰πüÂèØËÉΩÊòØtailËäÇÁÇπÁöÑnextËäÇÁÇπ„ÄÇdoug lea‰ΩøÁî®hopsÂèòÈáèÊù•ÊéßÂà∂Âπ∂ÂáèÂ∞ëtailËäÇÁÇπÁöÑÊõ¥Êñ∞È¢ëÁéáÔºåÂπ∂‰∏çÊòØÊØèÊ¨°ËäÇÁÇπÂÖ•ÈòüÂêéÈÉΩÂ∞Ü tailËäÇÁÇπÊõ¥Êñ∞ÊàêÂ∞æËäÇÁÇπÔºåËÄåÊòØÂΩìtailËäÇÁÇπÂíåÂ∞æËäÇÁÇπÁöÑË∑ùÁ¶ªÂ§ß‰∫éÁ≠â‰∫éÂ∏∏ÈáèHOPSÁöÑÂÄºÔºàÈªòËÆ§Á≠â‰∫é1ÔºâÊó∂ÊâçÊõ¥Êñ∞tailËäÇÁÇπÔºåtailÂíåÂ∞æËäÇÁÇπÁöÑË∑ùÁ¶ªË∂äÈïø‰ΩøÁî®CASÊõ¥Êñ∞tailËäÇÁÇπÁöÑÊ¨°Êï∞Â∞±‰ºöË∂äÂ∞ëÔºå‰ΩÜÊòØË∑ùÁ¶ªË∂äÈïøÂ∏¶Êù•ÁöÑË¥üÈù¢ÊïàÊûúÂ∞±ÊòØÊØèÊ¨°ÂÖ•ÈòüÊó∂ÂÆö‰ΩçÂ∞æËäÇÁÇπÁöÑÊó∂Èó¥Â∞±Ë∂äÈïøÔºåÂõ†‰∏∫Âæ™ÁéØ‰ΩìÈúÄË¶ÅÂ§öÂæ™ÁéØ‰∏ÄÊ¨°Êù•ÂÆö‰ΩçÂá∫Â∞æËäÇÁÇπÔºå‰ΩÜÊòØËøôÊ†∑‰ªçÁÑ∂ËÉΩÊèêÈ´òÂÖ•ÈòüÁöÑÊïàÁéáÔºåÂõ†‰∏∫‰ªéÊú¨Ë¥®‰∏äÊù•ÁúãÂÆÉÈÄöËøáÂ¢ûÂä†ÂØπvolatileÂèòÈáèÁöÑËØªÊìç‰ΩúÊù•ÂáèÂ∞ë‰∫ÜÂØπvolatileÂèòÈáèÁöÑÂÜôÊìç‰ΩúÔºåËÄåÂØπvolatileÂèòÈáèÁöÑÂÜôÊìç‰ΩúÂºÄÈîÄË¶ÅËøúËøúÂ§ß‰∫éËØªÊìç‰ΩúÔºåÊâÄ‰ª•ÂÖ•ÈòüÊïàÁéá‰ºöÊúâÊâÄÊèêÂçá„ÄÇ ÊâÄÊúâÁöÑ BlockingQueueËÆ≤ÂÆå‰∫ÜÈùûÈòªÂ°ûÁÆóÊ≥ïÔºåÊù•ËÆ≤ËÆ≤ÈòªÂ°ûÈòüÂàóÊç¢Êç¢Âè£Âë≥„ÄÇ ÈòªÂ°ûÈòüÂàó‰∏éÊôÆÈÄöÈòüÂàóÁöÑÂå∫Âà´Âú®‰∫éÔºåÂΩìÈòüÂàóÊòØÁ©∫ÁöÑÊó∂Ôºå‰ªéÈòüÂàó‰∏≠Ëé∑ÂèñÂÖÉÁ¥†ÁöÑÊìç‰ΩúÂ∞Ü‰ºöË¢´ÈòªÂ°ûÔºåÊàñËÄÖÈòüÂàóÊòØÊª°Êó∂ÔºåÂæÄÈòüÂàóÈáåÊ∑ªÂä†ÂÖÉÁ¥†ÁöÑÊìç‰Ωú‰ºöË¢´ÈòªÂ°û„ÄÇËØïÂõæ‰ªéÁ©∫ÁöÑÈòªÂ°ûÈòüÂàó‰∏≠Ëé∑ÂèñÂÖÉÁ¥†ÁöÑÁ∫øÁ®ãÂ∞Ü‰ºöË¢´ÈòªÂ°ûÔºåÁõ¥Âà∞ÂÖ∂‰ªñÁöÑÁ∫øÁ®ãÂæÄÁ©∫ÁöÑÈòüÂàóÊèíÂÖ•Êñ∞ÁöÑÂÖÉÁ¥†„ÄÇÂêåÊ†∑ÔºåËØïÂõæÂæÄÂ∑≤Êª°ÁöÑÈòªÂ°ûÈòüÂàó‰∏≠Ê∑ªÂä†Êñ∞ÂÖÉÁ¥†ÁöÑÁ∫øÁ®ãÂêåÊ†∑‰πü‰ºöË¢´ÈòªÂ°ûÔºåÁõ¥Âà∞ÂÖ∂‰ªñÁöÑÁ∫øÁ®ã‰ΩøÈòüÂàóÈáçÊñ∞ÂèòÂæóÁ©∫Èó≤Ëµ∑Êù•ÔºåÂ¶Ç‰ªéÈòüÂàó‰∏≠ÁßªÈô§‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ÂÖÉÁ¥†ÔºåÊàñËÄÖÂÆåÂÖ®Ê∏ÖÁ©∫ÈòüÂàó. ÂÆûÁé∞ BlockingQueue Êé•Âè£ÁöÑÊúâ ArrayBlockingQueue DelayQueue LinkedBlockingDeque LinkedBlockingQueue LinkedTransferQueue PriorityBlockingQueue SynchronousQueue ArrayBlockingQueueArrayBlockingQueueÊòØÁî±Êï∞ÁªÑÂÆûÁé∞ÁöÑÊúâÁïåÈòªÂ°ûÈòüÂàó„ÄÇËØ•ÈòüÂàóÂëΩ‰ª§ÂÖÉÁ¥† FIFOÔºàÂÖàËøõÂÖàÂá∫Ôºâ„ÄÇÂõ†Ê≠§ÔºåÂØπÂ§¥ÂÖÉÁ¥†Êó∂ÈòüÂàó‰∏≠Â≠òÂú®Êó∂Èó¥ÊúÄÈïøÁöÑÊï∞ÊçÆÂÖÉÁ¥†ÔºåËÄåÂØπÂ∞æÊï∞ÊçÆÂàôÊòØÂΩìÂâçÈòüÂàóÊúÄÊñ∞ÁöÑÊï∞ÊçÆÂÖÉÁ¥†„ÄÇArrayBlockingQueue ÂèØ‰Ωú‰∏∫‚ÄúÊúâÁïåÊï∞ÊçÆÁºìÂÜ≤Âå∫‚ÄùÔºåÁîü‰∫ßËÄÖÊèíÂÖ•Êï∞ÊçÆÂà∞ÈòüÂàóÂÆπÂô®‰∏≠ÔºåÂπ∂Áî±Ê∂àË¥πËÄÖÊèêÂèñ„ÄÇArrayBlockingQueue ‰∏ÄÊó¶ÂàõÂª∫ÔºåÂÆπÈáè‰∏çËÉΩÊîπÂèò„ÄÇ ÂΩìÈòüÂàóÂÆπÈáèÊª°Êó∂ÔºåÂ∞ùËØïÂ∞ÜÂÖÉÁ¥†ÊîæÂÖ•ÈòüÂàóÂ∞ÜÂØºËá¥Êìç‰ΩúÈòªÂ°û;Â∞ùËØï‰ªé‰∏Ä‰∏™Á©∫ÈòüÂàó‰∏≠Âèñ‰∏Ä‰∏™ÂÖÉÁ¥†‰πü‰ºöÂêåÊ†∑ÈòªÂ°û„ÄÇ ArrayBlockingQueue ÈªòËÆ§ÊÉÖÂÜµ‰∏ã‰∏çËÉΩ‰øùËØÅÁ∫øÁ®ãËÆøÈóÆÈòüÂàóÁöÑÂÖ¨Âπ≥ÊÄßÔºåÊâÄË∞ìÂÖ¨Âπ≥ÊÄßÊòØÊåá‰∏•Ê†ºÊåâÁÖßÁ∫øÁ®ãÁ≠âÂæÖÁöÑÁªùÂØπÊó∂Èó¥È°∫Â∫èÔºåÂç≥ÊúÄÂÖàÁ≠âÂæÖÁöÑÁ∫øÁ®ãËÉΩÂ§üÊúÄÂÖàËÆøÈóÆÂà∞ ArrayBlockingQueue„ÄÇËÄåÈùûÂÖ¨Âπ≥ÊÄßÂàôÊòØÊåáËÆøÈóÆ ArrayBlockingQueue ÁöÑÈ°∫Â∫è‰∏çÊòØÈÅµÂÆà‰∏•Ê†ºÁöÑÊó∂Èó¥È°∫Â∫èÔºåÊúâÂèØËÉΩÂ≠òÂú®Ôºå‰∏ÄÊó¶ ArrayBlockingQueue ÂèØ‰ª•Ë¢´ËÆøÈóÆÊó∂ÔºåÈïøÊó∂Èó¥ÈòªÂ°ûÁöÑÁ∫øÁ®ã‰æùÁÑ∂Êó†Ê≥ïËÆøÈóÆÂà∞ ArrayBlockingQueue„ÄÇÂ¶ÇÊûú‰øùËØÅÂÖ¨Âπ≥ÊÄßÔºåÈÄöÂ∏∏‰ºöÈôç‰ΩéÂêûÂêêÈáè„ÄÇ DelayQueueDelayQueue ÊòØ‰∏Ä‰∏™Â≠òÊîæÂÆûÁé∞ Delayed Êé•Âè£ÁöÑÊï∞ÊçÆÁöÑÊó†ÁïåÈòªÂ°ûÈòüÂàóÔºåÂè™ÊúâÂΩìÊï∞ÊçÆÂØπË±°ÁöÑÂª∂Êó∂Êó∂Èó¥ËææÂà∞Êó∂ÊâçËÉΩÊèíÂÖ•Âà∞ÈòüÂàóËøõË°åÂ≠òÂÇ®„ÄÇÂ¶ÇÊûúÂΩìÂâçÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩËøòÊ≤°ÊúâËææÂà∞ÂàõÂª∫Êó∂ÊâÄÊåáÂÆöÁöÑÂª∂Êó∂ÊúüÔºåÂàôÈòüÂàóÊ≤°ÊúâÈòüÂ§¥ÔºåÂπ∂‰∏îÁ∫øÁ®ãÈÄöËøá poll Á≠âÊñπÊ≥ïËé∑ÂèñÊï∞ÊçÆÂÖÉÁ¥†ÂàôËøîÂõû null„ÄÇÊâÄË∞ìÊï∞ÊçÆÂª∂Êó∂ÊúüÊª°Êó∂ÔºåÂàôÊòØÈÄöËøá Delayed Êé•Âè£ÁöÑgetDelay(TimeUnit.NANOSECONDS)Êù•ËøõË°åÂà§ÂÆöÔºåÂ¶ÇÊûúËØ•ÊñπÊ≥ïËøîÂõûÁöÑÊòØÂ∞è‰∫éÁ≠â‰∫é 0 ÂàôËØ¥ÊòéËØ•Êï∞ÊçÆÂÖÉÁ¥†ÁöÑÂª∂Êó∂ÊúüÂ∑≤Êª°„ÄÇ LinkedBlockingDequeLinkedBlockingDeque ÊòØÂü∫‰∫éÈìæË°®Êï∞ÊçÆÁªìÊûÑÁöÑÊúâÁïåÈòªÂ°ûÂèåÁ´ØÈòüÂàóÔºåÂ¶ÇÊûúÂú®ÂàõÂª∫ÂØπË±°Êó∂‰∏∫ÊåáÂÆöÂ§ßÂ∞èÊó∂ÔºåÂÖ∂ÈªòËÆ§Â§ßÂ∞è‰∏∫ Integer.MAX_VALUE„ÄÇ‰∏é LinkedBlockingQueue Áõ∏ÊØîÔºå‰∏ªË¶ÅÁöÑ‰∏çÂêåÁÇπÂú®‰∫éÔºåLinkedBlockingDeque ÂÖ∑ÊúâÂèåÁ´ØÈòüÂàóÁöÑÁâπÊÄß„ÄÇ LinkedBlockingQueueÊòØÁî®ÈìæË°®ÂÆûÁé∞ÁöÑÊúâÁïåÈòªÂ°ûÈòüÂàóÔºåÂêåÊ†∑Êª°Ë∂≥ FIFO ÁöÑÁâπÊÄßÔºå‰∏é ArrayBlockingQueue Áõ∏ÊØîËµ∑Êù•ÂÖ∑ÊúâÊõ¥È´òÁöÑÂêûÂêêÈáèÔºå‰∏∫‰∫ÜÈò≤Ê≠¢ LinkedBlockingQueue ÂÆπÈáèËøÖÈÄüÂ¢ûÔºåÊçüËÄóÂ§ßÈáèÂÜÖÂ≠ò„ÄÇÈÄöÂ∏∏Âú®ÂàõÂª∫ LinkedBlockingQueue ÂØπË±°Êó∂Ôºå‰ºöÊåáÂÆöÂÖ∂Â§ßÂ∞èÔºåÂ¶ÇÊûúÊú™ÊåáÂÆöÔºåÂÆπÈáèÁ≠â‰∫é Integer.MAX_VALUE„ÄÇÂú®‰∏äÊñáÂ§öÁ∫øÁ®ãÔºà‰∏ÉÔºâ‰∏≠Êàë‰ª¨‰ΩøÁî®‰∫ÜËØ•ÈòüÂàóÁöÑÊÄùÊÉ≥ÂÆåÊàê‰∫ÜÁîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÂàÜÁ¶ª‰∏§ÊääÈîÅÔºåÂàÜÂà´ËøõË°åÈÄö‰ø°„ÄÇ Ë∑ü ArrayBlockingQueue ‰∏ÄÊ†∑Êèê‰æõ‰∫Ü put() Âíå take() ÊñπÊ≥ïÂèØ‰ª•ËøõË°åÈòªÂ°ûÊèíÂÖ•ÂíåÁßªÈô§„ÄÇ ArrayBlockingQueue ‰∏é LinkedBlockingQueue ÁöÑÊØîËæÉ Áõ∏ÂêåÁÇπÔºöArrayBlockingQueue Âíå LinkedBlockingQueue ÈÉΩÊòØÈÄöËøá condition ÈÄöÁü•Êú∫Âà∂Êù•ÂÆûÁé∞ÂèØÈòªÂ°ûÂºèÊèíÂÖ•ÂíåÂà†Èô§ÂÖÉÁ¥†ÔºåÂπ∂Êª°Ë∂≥Á∫øÁ®ãÂÆâÂÖ®ÁöÑÁâπÊÄßÔºõ ‰∏çÂêåÁÇπÔºö ArrayBlockingQueue Â∫ïÂ±ÇÊòØÈááÁî®ÁöÑÊï∞ÁªÑËøõË°åÂÆûÁé∞ÔºåËÄå LinkedBlockingQueue ÂàôÊòØÈááÁî®ÈìæË°®Êï∞ÊçÆÁªìÊûÑÔºõ ArrayBlockingQueue ÊèíÂÖ•ÂíåÂà†Èô§Êï∞ÊçÆÔºåÂè™ÈááÁî®‰∫Ü‰∏Ä‰∏™ lockÔºåËÄå LinkedBlockingQueue ÂàôÊòØÂú®ÊèíÂÖ•ÂíåÂà†Èô§ÂàÜÂà´ÈááÁî®‰∫ÜputLockÂíåtakeLockÔºåËøôÊ†∑ÂèØ‰ª•Èôç‰ΩéÁ∫øÁ®ãÁî±‰∫éÁ∫øÁ®ãÊó†Ê≥ïËé∑ÂèñÂà∞ lock ËÄåËøõÂÖ• WAITING Áä∂ÊÄÅÁöÑÂèØËÉΩÊÄßÔºå‰ªéËÄåÊèêÈ´ò‰∫ÜÁ∫øÁ®ãÂπ∂ÂèëÊâßË°åÁöÑÊïàÁéá„ÄÇ LinkedTransferQueueLinkedTransferQueue ÊòØ‰∏Ä‰∏™Áî±ÈìæË°®Êï∞ÊçÆÁªìÊûÑÊûÑÊàêÁöÑÊó†ÁïåÈòªÂ°ûÈòüÂàóÔºåÁî±‰∫éËØ•ÈòüÂàóÂÆûÁé∞‰∫Ü TransferQueue Êé•Âè£Ôºå‰∏éÂÖ∂‰ªñÈòªÂ°ûÈòüÂàóÁõ∏ÊØî‰∏ªË¶ÅÊúâ‰ª•‰∏ã‰∏çÂêåÁöÑÊñπÊ≥ïÔºö transfer(E e) Â¶ÇÊûúÂΩìÂâçÊúâÁ∫øÁ®ãÔºàÊ∂àË¥πËÄÖÔºâÊ≠£Âú®Ë∞ÉÁî® take()ÊñπÊ≥ïÊàñËÄÖÂèØÂª∂Êó∂ÁöÑ poll()ÊñπÊ≥ïËøõË°åÊ∂àË¥πÊï∞ÊçÆÊó∂ÔºåÁîü‰∫ßËÄÖÁ∫øÁ®ãÂèØ‰ª•Ë∞ÉÁî® transfer ÊñπÊ≥ïÂ∞ÜÊï∞ÊçÆ‰º†ÈÄíÁªôÊ∂àË¥πËÄÖÁ∫øÁ®ã„ÄÇÂ¶ÇÊûúÂΩìÂâçÊ≤°ÊúâÊ∂àË¥πËÄÖÁ∫øÁ®ãÁöÑËØùÔºåÁîü‰∫ßËÄÖÁ∫øÁ®ãÂ∞±‰ºöÂ∞ÜÊï∞ÊçÆÊèíÂÖ•Âà∞ÈòüÂ∞æÔºåÁõ¥Âà∞ÊúâÊ∂àË¥πËÄÖËÉΩÂ§üËøõË°åÊ∂àË¥πÊâçËÉΩÈÄÄÂá∫„ÄÇ tryTransfer(E e) tryTransfer ÊñπÊ≥ïÂ¶ÇÊûúÂΩìÂâçÊúâÊ∂àË¥πËÄÖÁ∫øÁ®ãÔºàË∞ÉÁî® take ÊñπÊ≥ïÊàñËÄÖÂÖ∑ÊúâË∂ÖÊó∂ÁâπÊÄßÁöÑ poll ÊñπÊ≥ïÔºâÊ≠£Âú®Ê∂àË¥πÊï∞ÊçÆÁöÑËØùÔºåËØ•ÊñπÊ≥ïÂèØ‰ª•Â∞ÜÊï∞ÊçÆÁ´ãÂç≥‰º†ÈÄÅÁªôÊ∂àË¥πËÄÖÁ∫øÁ®ãÔºåÂ¶ÇÊûúÂΩìÂâçÊ≤°ÊúâÊ∂àË¥πËÄÖÁ∫øÁ®ãÊ∂àË¥πÊï∞ÊçÆÁöÑËØùÔºåÂ∞±Á´ãÂç≥ËøîÂõûfalse„ÄÇÂõ†Ê≠§Ôºå‰∏é transfer ÊñπÊ≥ïÁõ∏ÊØîÔºåtransfer ÊñπÊ≥ïÊòØÂøÖÈ°ªÁ≠âÂà∞ÊúâÊ∂àË¥πËÄÖÁ∫øÁ®ãÊ∂àË¥πÊï∞ÊçÆÊó∂ÔºåÁîü‰∫ßËÄÖÁ∫øÁ®ãÊâçËÉΩÂ§üËøîÂõû„ÄÇËÄå tryTransfer ÊñπÊ≥ïËÉΩÂ§üÁ´ãÂç≥ËøîÂõûÁªìÊûúÈÄÄÂá∫„ÄÇ tryTransfer(E e,long timeout,imeUnit unit) ‰∏é transfer Âü∫Êú¨ÂäüËÉΩ‰∏ÄÊ†∑ÔºåÂè™ÊòØÂ¢ûÂä†‰∫ÜË∂ÖÊó∂ÁâπÊÄßÔºåÂ¶ÇÊûúÊï∞ÊçÆÊâçËßÑÂÆöÁöÑË∂ÖÊó∂Êó∂Èó¥ÂÜÖÊ≤°ÊúâÊ∂àË¥πËÄÖËøõË°åÊ∂àË¥πÁöÑËØùÔºåÂ∞±ËøîÂõûfalse„ÄÇ PriorityBlockingQueuePriorityBlockingQueue ÊòØ‰∏Ä‰∏™ÊîØÊåÅ‰ºòÂÖàÁ∫ßÁöÑÊó†ÁïåÈòªÂ°ûÈòüÂàó„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÂÖÉÁ¥†ÈááÁî®Ëá™ÁÑ∂È°∫Â∫èËøõË°åÊéíÂ∫èÔºå‰πüÂèØ‰ª•ÈÄöËøáËá™ÂÆö‰πâÁ±ªÂÆûÁé∞ compareTo()ÊñπÊ≥ïÊù•ÊåáÂÆöÂÖÉÁ¥†ÊéíÂ∫èËßÑÂàôÔºåÊàñËÄÖÂàùÂßãÂåñÊó∂ÈÄöËøáÊûÑÈÄ†Âô®ÂèÇÊï∞ Comparator Êù•ÊåáÂÆöÊéíÂ∫èËßÑÂàô„ÄÇ SynchronousQueueSynchronousQueue ÊòØ‰∏Ä‰∏™‰∏çÂ≠òÂÇ®ÂÖÉÁ¥†ÁöÑÈòªÂ°ûÈòüÂàó„ÄÇÊØè‰∏™ÊèíÂÖ•Êìç‰ΩúÂøÖÈ°ªÁ≠âÂæÖÂè¶‰∏Ä‰∏™Á∫øÁ®ãËøõË°åÁõ∏Â∫îÁöÑÂà†Èô§Êìç‰ΩúÔºåÂõ†Ê≠§ÔºåSynchronousQueue ÂÆûÈôÖ‰∏äÊ≤°ÊúâÂ≠òÂÇ®‰ªª‰ΩïÊï∞ÊçÆÂÖÉÁ¥†ÔºåÂõ†‰∏∫Âè™ÊúâÁ∫øÁ®ãÂú®Âà†Èô§Êï∞ÊçÆÊó∂ÔºåÂÖ∂‰ªñÁ∫øÁ®ãÊâçËÉΩÊèíÂÖ•Êï∞ÊçÆÔºåÂêåÊ†∑ÁöÑÔºåÂ¶ÇÊûúÂΩìÂâçÊúâÁ∫øÁ®ãÂú®ÊèíÂÖ•Êï∞ÊçÆÊó∂ÔºåÁ∫øÁ®ãÊâçËÉΩÂà†Èô§Êï∞ÊçÆ„ÄÇSynchronousQueue ‰πüÂèØ‰ª•ÈÄöËøáÊûÑÈÄ†Âô®ÂèÇÊï∞Êù•‰∏∫ÂÖ∂ÊåáÂÆöÂÖ¨Âπ≥ÊÄß„ÄÇ‰∏§‰∏™Á∫øÁ®ãÂè™Êúâ‰∫íÁõ∏Á≠âÂà∞‰∫ÜÊâçËÉΩÂ∑•‰ΩúÔºåÊúâÁÇπÁ±ª‰ºº‰∫é Exchanger()„ÄÇ Q: https://www.ibm.com/developerworks/cn/java/j-lo-concurrent/index.html Âü∫‰∫éÈùûÈòªÂ°ûÁÆóÊ≥ïÂÆûÁé∞ÁöÑÂπ∂ÂèëÂÆπÂô®ÂåÖÊã¨ÔºöConcurrentLinkedQueueÔºåSynchronousQueueÔºåExchanger Âíå ConcurrentSkipListMap„ÄÇConcurrentLinkedQueue ÊòØ‰∏Ä‰∏™Âü∫‰∫éÈìæÊé•ËäÇÁÇπÁöÑÊó†ÁïåÁ∫øÁ®ãÂÆâÂÖ®ÈòüÂàó„ÄÇSynchronousQueue ÊòØ‰∏Ä‰∏™Ê≤°ÊúâÂÆπÈáèÁöÑÈòªÂ°ûÈòüÂàóÔºåÂÆÉ‰ΩøÁî®ÂèåÈáçÊï∞ÊçÆÁªìÊûÑ Êù•ÂÆûÁé∞ÈùûÈòªÂ°ûÁÆóÊ≥ï„ÄÇExchanger ÊòØ‰∏Ä‰∏™ËÉΩÂØπÂÖÉÁ¥†ËøõË°åÈÖçÂØπÂíå‰∫§Êç¢ÁöÑ‰∫§Êç¢Âô®„ÄÇÂÆÉ‰ΩøÁî® Ê∂àÈô§ ÊäÄÊúØÊù•ÂÆûÁé∞ÈùûÈòªÂ°ûÁÆóÊ≥ï „ÄÇConcurrentSkipListMap ÊòØ‰∏Ä‰∏™ÂèØ‰ª•Ê†πÊçÆ Key ËøõË°åÊéíÂ∫èÁöÑÂèØ‰º∏Áº©ÁöÑÂπ∂Âèë Map„ÄÇ ËøôÂùóÊàëËøòÊúâÁÇπÁñëÈóÆ‚Ä¶ ÈòªÂ°ûÈòüÂàóÊòØÁî®ÁöÑÈùûÈòªÂ°ûÁÆóÊ≥ïÂÆûÁé∞ÔºüÂèØËÉΩËøô‰∏§‰∏™ÈòªÂ°ûÁöÑÊÑèÊÄù‰∏ç‰∏ÄÊ†∑ÔºåÂâçËÄÖÊòØÊåáÈòüÂàóÊª°ÊàñËÄÖÁ©∫ÈòªÂ°ûÁöÑÈòüÂàóÁß∞‰∏∫ÈòªÂ°ûÈòüÂàóÔºåÂêéËÄÖÈùûÈòªÂ°ûÁÆóÊ≥ïÊåáÁöÑÊòØ ‰∏Ä‰∏™Á∫øÁ®ãÁöÑÊåÇËµ∑ÂíåÂ§±Ë¥•‰∏ç‰ºöÂΩ±ÂìçÂè¶‰∏Ä‰∏™Á∫øÁ®ãÁöÑÊåÇËµ∑ÂíåÂ§±Ë¥•„ÄÇÔºà‰πüÂ∞±ÊòØÂü∫‰∫éCASÂÆûÁé∞ÁöÑÈòªÂ°ûÈòüÂàó‚Ä¶.Ôºâ ‰πü‰∏çÁü•ÈÅìÁêÜËß£ÁöÑÂØπ‰∏çÂØπ‚Ä¶‚Ä¶. Atomic ÂéüÂ≠êÁ±ªÂÖ®ÈÉ®ÊòØ CAS Êìç‰ΩúÁöÑÔºåÂÖ∑ÊúâÂéüÂ≠êÊÄß„ÄÇ Èù¢ËØï‰∏≠Â•ΩÂÉèÊ≤°ËßÅÂà∞Ëøá‚Ä¶Áï•Ëøá‚Ä¶ Fork-Join ËΩ¨Ëá™Ôºö https://www.liaoxuefeng.com/article/1146802219354112 ÂΩìÊàë‰ª¨ÈúÄË¶ÅÊâßË°åÂ§ßÈáèÁöÑÂ∞è‰ªªÂä°Êó∂ÔºåÊúâÁªèÈ™åÁöÑJavaÂºÄÂèë‰∫∫ÂëòÈÉΩ‰ºöÈááÁî®Á∫øÁ®ãÊ±†Êù•È´òÊïàÊâßË°åËøô‰∫õÂ∞è‰ªªÂä°„ÄÇÁÑ∂ËÄåÔºåÊúâ‰∏ÄÁßç‰ªªÂä°Ôºå‰æãÂ¶ÇÔºåÂØπË∂ÖËøá1000‰∏á‰∏™ÂÖÉÁ¥†ÁöÑÊï∞ÁªÑËøõË°åÊéíÂ∫èÔºåËøôÁßç‰ªªÂä°Êú¨Ë∫´ÂèØ‰ª•Âπ∂ÂèëÊâßË°åÔºå‰ΩÜÂ¶Ç‰ΩïÊãÜËß£ÊàêÂ∞è‰ªªÂä°ÈúÄË¶ÅÂú®‰ªªÂä°ÊâßË°åÁöÑËøáÁ®ã‰∏≠Âä®ÊÄÅÊãÜÂàÜ„ÄÇËøôÊ†∑ÔºåÂ§ß‰ªªÂä°ÂèØ‰ª•ÊãÜÊàêÂ∞è‰ªªÂä°ÔºåÂ∞è‰ªªÂä°ËøòÂèØ‰ª•ÁªßÁª≠ÊãÜÊàêÊõ¥Â∞èÁöÑ‰ªªÂä°ÔºåÊúÄÂêéÊää‰ªªÂä°ÁöÑÁªìÊûúÊ±áÊÄªÂêàÂπ∂ÔºåÂæóÂà∞ÊúÄÁªàÁªìÊûúÔºåËøôÁßçÊ®°ÂûãÂ∞±ÊòØFork/JoinÊ®°Âûã„ÄÇ Java7ÂºïÂÖ•‰∫ÜFork/JoinÊ°ÜÊû∂ÔºåÊàë‰ª¨ÈÄöËøáRecursiveTaskËøô‰∏™Á±ªÂ∞±ÂèØ‰ª•Êñπ‰æøÂú∞ÂÆûÁé∞Fork/JoinÊ®°Âºè„ÄÇ ‰æãÂ¶ÇÔºåÂØπ‰∏Ä‰∏™Â§ßÊï∞ÁªÑËøõË°åÂπ∂Ë°åÊ±ÇÂíåÁöÑRecursiveTaskÔºåÂ∞±ÂèØ‰ª•ËøôÊ†∑ÁºñÂÜôÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041class SumTask extends RecursiveTask&lt;Long&gt; &#123; static final int THRESHOLD = 100; long[] array; int start; int end; SumTask(long[] array, int start, int end) &#123; this.array = array; this.start = start; this.end = end; &#125; @Override protected Long compute() &#123; if (end - start &lt;= THRESHOLD) &#123; // Â¶ÇÊûú‰ªªÂä°Ë∂≥Â§üÂ∞è,Áõ¥Êé•ËÆ°ÁÆó: long sum = 0; for (int i = start; i &lt; end; i++) &#123; sum += array[i]; &#125; try &#123; Thread.sleep(1000); &#125; catch (InterruptedException e) &#123; &#125; System.out.println(String.format("compute %d~%d = %d", start, end, sum)); return sum; &#125; // ‰ªªÂä°Â§™Â§ß,‰∏ÄÂàÜ‰∏∫‰∫å: int middle = (end + start) / 2; System.out.println(String.format("split %d~%d ==&gt; %d~%d, %d~%d", start, end, start, middle, middle, end)); SumTask subtask1 = new SumTask(this.array, start, middle); SumTask subtask2 = new SumTask(this.array, middle, end); invokeAll(subtask1, subtask2); Long subresult1 = subtask1.join(); Long subresult2 = subtask2.join(); Long result = subresult1 + subresult2; System.out.println("result = " + subresult1 + " + " + subresult2 + " ==&gt; " + result); return result; &#125;&#125; ÁºñÂÜôËøô‰∏™Fork/Join‰ªªÂä°ÁöÑÂÖ≥ÈîÆÂú®‰∫éÔºåÂú®ÊâßË°å‰ªªÂä°ÁöÑcompute()ÊñπÊ≥ïÂÜÖÈÉ®ÔºåÂÖàÂà§Êñ≠‰ªªÂä°ÊòØ‰∏çÊòØË∂≥Â§üÂ∞èÔºåÂ¶ÇÊûúË∂≥Â§üÂ∞èÔºåÂ∞±Áõ¥Êé•ËÆ°ÁÆóÂπ∂ËøîÂõûÁªìÊûúÔºàÊ≥®ÊÑèÊ®°Êãü‰∫Ü1ÁßíÂª∂Êó∂ÔºâÔºåÂê¶ÂàôÔºåÊääËá™Ë∫´‰ªªÂä°‰∏ÄÊãÜ‰∏∫‰∫åÔºåÂàÜÂà´ËÆ°ÁÆó‰∏§‰∏™Â≠ê‰ªªÂä°ÔºåÂÜçËøîÂõû‰∏§‰∏™Â≠ê‰ªªÂä°ÁöÑÁªìÊûú‰πãÂíå„ÄÇ ÊúÄÂêéÂÜô‰∏Ä‰∏™main()ÊñπÊ≥ïÊµãËØïÔºö 123456789101112public static void main(String[] args) throws Exception &#123; // ÂàõÂª∫ÈöèÊú∫Êï∞ÁªÑÊàêÁöÑÊï∞ÁªÑ: long[] array = new long[400]; fillRandom(array); // fork/join task: ForkJoinPool fjp = new ForkJoinPool(4); // ÊúÄÂ§ßÂπ∂ÂèëÊï∞4 ForkJoinTask&lt;Long&gt; task = new SumTask(array, 0, array.length); long startTime = System.currentTimeMillis(); Long result = fjp.invoke(task); long endTime = System.currentTimeMillis(); System.out.println("Fork/join sum: " + result + " in " + (endTime - startTime) + " ms.");&#125; ÂÖ≥ÈîÆ‰ª£Á†ÅÊòØfjp.invoke(task)Êù•Êèê‰∫§‰∏Ä‰∏™Fork/Join‰ªªÂä°Âπ∂ÂèëÊâßË°åÔºåÁÑ∂ÂêéËé∑ÂæóÂºÇÊ≠•ÊâßË°åÁöÑÁªìÊûú„ÄÇ Êàë‰ª¨ËÆæÁΩÆ‰ªªÂä°ÁöÑÊúÄÂ∞èÈòÄÂÄºÊòØ100ÔºåÂΩìÊèê‰∫§‰∏Ä‰∏™400Â§ßÂ∞èÁöÑ‰ªªÂä°Êó∂ÔºåÂú®4Ê†∏CPU‰∏äÊâßË°åÔºå‰ºö‰∏ÄÂàÜ‰∏∫‰∫åÔºåÂÜç‰∫åÂàÜ‰∏∫ÂõõÔºåÊØè‰∏™ÊúÄÂ∞èÂ≠ê‰ªªÂä°ÁöÑÊâßË°åÊó∂Èó¥ÊòØ1ÁßíÔºåÁî±‰∫éÊòØÂπ∂Âèë4‰∏™Â≠ê‰ªªÂä°ÊâßË°åÔºåÊï¥‰∏™‰ªªÂä°ÊúÄÁªàÊâßË°åÊó∂Èó¥Â§ßÁ∫¶‰∏∫1Áßí„ÄÇ Êñ∞ÊâãÂú®ÁºñÂÜôFork/Join‰ªªÂä°Êó∂ÔºåÂæÄÂæÄÁî®ÊêúÁ¥¢ÂºïÊìéÊêúÂà∞‰∏Ä‰∏™‰æãÂ≠êÔºåÁÑ∂ÂêéÂ∞±ÁÖßÁùÄ‰æãÂ≠êÂÜôÂá∫‰∫Ü‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö 123456789101112131415protected Long compute() &#123; if (‰ªªÂä°Ë∂≥Â§üÂ∞è?) &#123; return computeDirect(); &#125; // ‰ªªÂä°Â§™Â§ß,‰∏ÄÂàÜ‰∏∫‰∫å: SumTask subtask1 = new SumTask(...); SumTask subtask2 = new SumTask(...); // ÂàÜÂà´ÂØπÂ≠ê‰ªªÂä°Ë∞ÉÁî®fork(): subtask1.fork(); subtask2.fork(); // ÂêàÂπ∂ÁªìÊûú: Long subresult1 = subtask1.join(); Long subresult2 = subtask2.join(); return subresult1 + subresult2;&#125; ÂæàÈÅóÊÜæÔºåËøôÁßçÂÜôÊ≥ïÊòØÈîôÔºÅËØØÔºÅÁöÑÔºÅËøôÊ†∑ÂÜôÊ≤°ÊúâÊ≠£Á°ÆÁêÜËß£Fork/JoinÊ®°ÂûãÁöÑ‰ªªÂä°ÊâßË°åÈÄªËæë„ÄÇ JDKÁî®Êù•ÊâßË°åFork/Join‰ªªÂä°ÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÊ±†Â§ßÂ∞èÁ≠â‰∫éCPUÊ†∏ÂøÉÊï∞„ÄÇÂú®‰∏Ä‰∏™4Ê†∏CPU‰∏äÔºåÊúÄÂ§öÂèØ‰ª•ÂêåÊó∂ÊâßË°å4‰∏™Â≠ê‰ªªÂä°„ÄÇÂØπ400‰∏™ÂÖÉÁ¥†ÁöÑÊï∞ÁªÑÊ±ÇÂíåÔºåÊâßË°åÊó∂Èó¥Â∫îËØ•‰∏∫1Áßí„ÄÇ‰ΩÜÊòØÔºåÊç¢Êàê‰∏äÈù¢ÁöÑ‰ª£Á†ÅÔºåÊâßË°åÊó∂Èó¥Âç¥ÊòØ‰∏§Áßí„ÄÇ ËøôÊòØÂõ†‰∏∫ÊâßË°åcompute()ÊñπÊ≥ïÁöÑÁ∫øÁ®ãÊú¨Ë∫´‰πüÊòØ‰∏Ä‰∏™WorkerÁ∫øÁ®ãÔºåÂΩìÂØπ‰∏§‰∏™Â≠ê‰ªªÂä°Ë∞ÉÁî®fork()Êó∂ÔºåËøô‰∏™WorkerÁ∫øÁ®ãÂ∞±‰ºöÊää‰ªªÂä°ÂàÜÈÖçÁªôÂè¶Â§ñ‰∏§‰∏™WorkerÔºå‰ΩÜÊòØÂÆÉËá™Â∑±Âç¥ÂÅú‰∏ãÊù•Á≠âÂæÖ‰∏çÂπ≤Ê¥ª‰∫ÜÔºÅËøôÊ†∑Â∞±ÁôΩÁôΩÊµ™Ë¥π‰∫ÜFork/JoinÁ∫øÁ®ãÊ±†‰∏≠ÁöÑ‰∏Ä‰∏™WorkerÁ∫øÁ®ãÔºåÂØºËá¥‰∫Ü4‰∏™Â≠ê‰ªªÂä°Ëá≥Â∞ëÈúÄË¶Å7‰∏™Á∫øÁ®ãÊâçËÉΩÂπ∂ÂèëÊâßË°å„ÄÇ Êâì‰∏™ÊØîÊñπÔºåÂÅáËÆæ‰∏Ä‰∏™ÈÖíÂ∫óÊúâ400‰∏™ÊàøÈó¥Ôºå‰∏ÄÂÖ±Êúâ4ÂêçÊ∏ÖÊ¥ÅÂ∑•ÔºåÊØè‰∏™Â∑•‰∫∫ÊØèÂ§©ÂèØ‰ª•ÊâìÊâ´100‰∏™ÊàøÈó¥ÔºåËøôÊ†∑Ôºå4‰∏™Â∑•‰∫∫Êª°Ë¥üËç∑Â∑•‰ΩúÊó∂Ôºå400‰∏™ÊàøÈó¥ÂÖ®ÈÉ®ÊâìÊâ´ÂÆåÊ≠£Â•ΩÈúÄË¶Å1Â§©„ÄÇ Fork/JoinÁöÑÂ∑•‰ΩúÊ®°ÂºèÂ∞±ÂÉèËøôÊ†∑ÔºöÈ¶ñÂÖàÔºåÂ∑•‰∫∫Áî≤Ë¢´ÂàÜÈÖç‰∫Ü400‰∏™ÊàøÈó¥ÁöÑ‰ªªÂä°Ôºå‰ªñ‰∏ÄÁúã‰ªªÂä°Â§™Â§ö‰∫ÜËá™Â∑±‰∏Ä‰∏™‰∫∫‰∏çË°åÔºåÊâÄ‰ª•ÂÖàÊää400‰∏™ÊàøÈó¥ÊãÜÊàê‰∏§‰∏™200ÔºåÁÑ∂ÂêéÂè´Êù•‰πôÔºåÊääÂÖ∂‰∏≠‰∏Ä‰∏™200ÂàÜÁªô‰πô„ÄÇ Á¥ßÊé•ÁùÄÔºåÁî≤Âíå‰πôÂÜçÂèëÁé∞200‰πüÊòØ‰∏™Â§ß‰ªªÂä°Ôºå‰∫éÊòØÁî≤ÁªßÁª≠Êää200ÂàÜÊàê‰∏§‰∏™100ÔºåÂπ∂ÊääÂÖ∂‰∏≠‰∏Ä‰∏™100ÂàÜÁªô‰∏ôÔºåÁ±ª‰ººÁöÑÔºå‰πô‰ºöÊääÂÖ∂‰∏≠‰∏Ä‰∏™100ÂàÜÁªô‰∏ÅÔºåËøôÊ†∑ÔºåÊúÄÁªà4‰∏™‰∫∫ÊØè‰∫∫ÂàÜÂà∞100‰∏™ÊàøÈó¥ÔºåÂπ∂ÂèëÊâßË°åÊ≠£Â•ΩÊòØ1Â§©„ÄÇ Â¶ÇÊûúÊç¢‰∏ÄÁßçÂÜôÊ≥ïÔºö 123// ÂàÜÂà´ÂØπÂ≠ê‰ªªÂä°Ë∞ÉÁî®fork():subtask1.fork();subtask2.fork(); Ëøô‰∏™‰ªªÂä°Â∞±ÂàÜÔºÅÈîôÔºÅ‰∫ÜÔºÅ ÊØîÂ¶ÇÁî≤Êää400ÂàÜÊàê‰∏§‰∏™200ÂêéÔºåËøôÁßçÂÜôÊ≥ïÁõ∏ÂΩì‰∫éÁî≤Êää‰∏Ä‰∏™200ÂàÜÁªô‰πôÔºåÊääÂè¶‰∏Ä‰∏™200ÂàÜÁªô‰∏ôÔºåÁÑ∂ÂêéÔºåÁî≤Êàê‰∫ÜÁõëÂ∑•Ôºå‰∏çÂπ≤Ê¥ªÔºåÁ≠â‰πôÂíå‰∏ôÂπ≤ÂÆå‰∫Ü‰ªñÁõ¥Êé•Ê±áÊä•Â∑•‰Ωú„ÄÇ‰πôÂíå‰∏ôÂú®Êää200ÂàÜÊãÜÊàê‰∏§‰∏™100ÁöÑËøáÁ®ã‰∏≠Ôºå‰ªñ‰ø©ÂèàÊàê‰∫ÜÁõëÂ∑•ÔºåËøôÊ†∑ÔºåÊú¨Êù•Âè™ÈúÄË¶Å4‰∏™Â∑•‰∫∫ÁöÑÊ¥ªÔºåÁé∞Âú®ÈúÄË¶Å7‰∏™Â∑•‰∫∫ÊâçËÉΩ1Â§©ÂÜÖÂÆåÊàêÔºåÂÖ∂‰∏≠Êúâ3‰∏™ÊòØ‰∏çÂπ≤Ê¥ªÁöÑ„ÄÇ ÂÖ∂ÂÆûÔºåÊàë‰ª¨Êü•ÁúãJDKÁöÑinvokeAll()ÊñπÊ≥ïÁöÑÊ∫êÁ†ÅÂ∞±ÂèØ‰ª•ÂèëÁé∞ÔºåinvokeAllÁöÑN‰∏™‰ªªÂä°‰∏≠ÔºåÂÖ∂‰∏≠N-1‰∏™‰ªªÂä°‰ºö‰ΩøÁî®fork()‰∫§ÁªôÂÖ∂ÂÆÉÁ∫øÁ®ãÊâßË°åÔºå‰ΩÜÊòØÔºåÂÆÉËøò‰ºöÁïô‰∏Ä‰∏™‰ªªÂä°Ëá™Â∑±ÊâßË°åÔºåËøôÊ†∑ÔºåÂ∞±ÂÖÖÂàÜÂà©Áî®‰∫ÜÁ∫øÁ®ãÊ±†Ôºå‰øùËØÅÊ≤°ÊúâÁ©∫Èó≤ÁöÑ‰∏çÂπ≤Ê¥ªÁöÑÁ∫øÁ®ã„ÄÇ ÈÉ®ÂàÜ api ‰ΩøÁî® demoËøô‰∏™Âí±‰ª•ÂêéÊÖ¢ÊÖ¢Ë°•ÂÖÖ‚Ä¶ Êú™ÂÆåÂæÖÁª≠‚Ä¶Â§öÁ∫øÁ®ãÂëä‰∏ÄÊÆµËêΩ‚Ä¶Êé•‰∏ãÊù•ËøõË°å jvm Âíå Èù¢ËØïÈ¢òÂ§ç‰π† ÈáçÁÇπÔºö jvm spring ÁÆóÊ≥ïÂ§ç‰π† Êï∞ÊçÆÂ∫ì ‚Äî mysql &amp; mongo ##]]></content>
      <categories>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Â§öÁ∫øÁ®ãË°•ÂÖÖÁØá</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â§öÁ∫øÁ®ãÔºà‰∏ÉÔºâ--- ‰∏âÁßçÊñπÂºèÂÆûÁé∞Áîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖ]]></title>
    <url>%2F2020%2F02%2F29%2F%E5%A4%9A%E7%BA%BF%E7%A8%8B%EF%BC%88%E4%B8%83%EF%BC%89---%20%E4%B8%89%E7%A7%8D%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E7%94%9F%E4%BA%A7%E8%80%85-%E6%B6%88%E8%B4%B9%E8%80%85.html</url>
    <content type="text"><![CDATA[Áîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÊ®°ÂºèÊòØ‰∏Ä‰∏™ÂçÅÂàÜÁªèÂÖ∏ÁöÑÂ§öÁ∫øÁ®ãÂπ∂ÂèëÂçè‰ΩúÁöÑÊ®°ÂºèÔºåÂºÑÊáÇÁîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÈóÆÈ¢òËÉΩÂ§üËÆ©Êàë‰ª¨ÂØπÂπ∂ÂèëÁºñÁ®ãÁöÑÁêÜËß£Âä†Ê∑±„ÄÇÊâÄË∞ìÁîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÈóÆÈ¢òÔºåÂÆûÈôÖ‰∏ä‰∏ªË¶ÅÊòØÂåÖÂê´‰∫Ü‰∏§Á±ªÁ∫øÁ®ãÔºå‰∏ÄÁßçÊòØÁîü‰∫ßËÄÖÁ∫øÁ®ãÁî®‰∫éÁîü‰∫ßÊï∞ÊçÆÔºåÂè¶‰∏ÄÁßçÊòØÊ∂àË¥πËÄÖÁ∫øÁ®ãÁî®‰∫éÊ∂àË¥πÊï∞ÊçÆÔºå‰∏∫‰∫ÜËß£ËÄ¶Áîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÁöÑÂÖ≥Á≥ªÔºåÈÄöÂ∏∏‰ºöÈááÁî®ÂÖ±‰∫´ÁöÑÊï∞ÊçÆÂå∫ÂüüÔºåÂ∞±ÂÉèÊòØ‰∏Ä‰∏™‰ªìÂ∫ìÔºåÁîü‰∫ßËÄÖÁîü‰∫ßÊï∞ÊçÆ‰πãÂêéÁõ¥Êé•ÊîæÁΩÆÂú®ÂÖ±‰∫´Êï∞ÊçÆÂå∫‰∏≠ÔºåÂπ∂‰∏çÈúÄË¶ÅÂÖ≥ÂøÉÊ∂àË¥πËÄÖÁöÑË°å‰∏∫ÔºõËÄåÊ∂àË¥πËÄÖÂè™ÈúÄË¶Å‰ªéÂÖ±‰∫´Êï∞ÊçÆÂå∫‰∏≠ÂéªËé∑ÂèñÊï∞ÊçÆÔºåÂ∞±‰∏çÂÜçÈúÄË¶ÅÂÖ≥ÂøÉÁîü‰∫ßËÄÖÁöÑË°å‰∏∫„ÄÇ‰ΩÜÊòØÔºåËøô‰∏™ÂÖ±‰∫´Êï∞ÊçÆÂå∫Âüü‰∏≠Â∫îËØ•ÂÖ∑Â§áËøôÊ†∑ÁöÑÁ∫øÁ®ãÈó¥Âπ∂ÂèëÂçè‰ΩúÁöÑÂäüËÉΩÔºö Â¶ÇÊûúÂÖ±‰∫´Êï∞ÊçÆÂå∫Â∑≤Êª°ÁöÑËØùÔºåÈòªÂ°ûÁîü‰∫ßËÄÖÁªßÁª≠Áîü‰∫ßÊï∞ÊçÆÊîæÁΩÆÂÖ•ÂÜÖÔºõ Â¶ÇÊûúÂÖ±‰∫´Êï∞ÊçÆÂå∫‰∏∫Á©∫ÁöÑËØùÔºåÈòªÂ°ûÊ∂àË¥πËÄÖÁªßÁª≠Ê∂àË¥πÊï∞ÊçÆÔºõ Âú®ÂÆûÁé∞Áîü‰∫ßËÄÖÊ∂àË¥πËÄÖÈóÆÈ¢òÊó∂ÔºåÂèØ‰ª•ÈááÁî®‰∏âÁßçÊñπÂºèÔºö 1.‰ΩøÁî® Object ÁöÑ wait/notify ÁöÑÊ∂àÊÅØÈÄöÁü•Êú∫Âà∂Ôºõ 2.‰ΩøÁî® Lock ÁöÑ Condition ÁöÑ await/signal ÁöÑÊ∂àÊÅØÈÄöÁü•Êú∫Âà∂Ôºõ 3.‰ΩøÁî® BlockingQueue ÂÆûÁé∞„ÄÇÊú¨Êñá‰∏ªË¶ÅÂ∞ÜËøô‰∏âÁßçÂÆûÁé∞ÊñπÂºèËøõË°åÊÄªÁªìÂΩíÁ∫≥„ÄÇ 1. wait/notify Êú∫Âà∂123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687package Â§öÁ∫øÁ®ã.Producer_Consumer;import java.util.LinkedList;import java.util.Map;import java.util.concurrent.TimeUnit;import java.util.concurrent.locks.Condition;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.ReentrantLock;/** * ÊàëÊúâ‰∏â‰∏™ÈóÆÈ¢òÔºö * 1. ‰∏∫‰ΩïÊØèÊ¨°ÈÉΩÊòØ producer Âíå consumer ËøûÁùÄ‰∏ÄËµ∑ÔºüÊòØ jvm ÂÜÖÁΩÆÂÅèÂêëÈîÅÁöÑÂéüÂõ†ÂêóÔºü * 2. ‰∏∫‰Ωï condition.await() ÈÇ£ÂùóÁî® if ‰ºöÊä•ÈîôÔºå‰ΩÜÊòØÁî® while Â∞±ÂèØ‰ª•Ôºü * 3. ÊåâÈÅìÁêÜÊù•ËØ¥Ôºåconsumer Âíå producer ‰∏çÂ∫îËØ•ÊúâËµÑÊ∫êÁ´û‰∫âÂÖ≥Á≥ªÔºåÊâÄ‰ª•ÂêàÁêÜÊù•ËØ¥Â∫îËØ•ÊòØ‰∏§ÊääÈîÅÔºåÂ¶ÇÊûú consumer Âíå producer ÂàÜ‰∏§ÊääÈîÅÊù•Êìç‰ΩúÂèàÂ¶Ç‰ΩïÂÆåÊàêÈÄö‰ø°Âë¢Ôºü * */public class wait_notify &#123; private final static Object a = 1; private final static LinkedList&lt;Long&gt; linkedList = new LinkedList&lt;&gt;(); private final static int MAX_CAPACITY = 10; public static void main(String[] args) &#123; System.out.println("wait/notify"); for (int i = 0; i &lt; 3; i++) &#123; new Thread(() -&gt; &#123; while (true) &#123; try &#123; wait_notify.producer(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;).start(); &#125; System.out.println("-----------------"); for (int i = 0; i &lt; 3; i++) &#123; new Thread(() -&gt; &#123; while (true) &#123; try &#123; wait_notify.consumer(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;).start(); &#125; &#125; static void producer() throws InterruptedException &#123; synchronized (a)&#123; while(linkedList.size() == MAX_CAPACITY)&#123; a.wait(); &#125; long value = System.currentTimeMillis(); System.out.println(Thread.currentThread().getName() + ":-------PRODUCER-------- " + value); linkedList.addLast(value); a.notifyAll(); &#125; &#125; static void consumer() throws InterruptedException &#123; synchronized (a)&#123; while (linkedList.size() == 0)&#123; a.wait(); &#125; long value = linkedList.pop(); System.out.println(Thread.currentThread().getName() + "::-------CONSUMER-------- " + value); a.notifyAll(); &#125; &#125;&#125; 2. await/signal Êú∫Âà∂Ëøô‰∏™ÊàëÂú®‰πãÂâçÊúâÂÜôËøá„ÄÇ‰∏çËøáÂÖ∂ÂÆûÊàëËßâÂæóÔºåproducer Âíå consumer Â∫îËØ•‰∏§ÊääÈîÅ‰ºöÊõ¥Âä†ÂêàÈÄÇ‰∏Ä‰∫õÔºåÁîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖ‰∏çÂ∫îËØ•ÊúâËµÑÊ∫êÂÜ≤Á™Å„ÄÇËÄåËøôÂàöÂ•ΩÂ∞±ÊòØ ArrayBlockingQueue Âíå LinkedBlockingQueue ÁöÑÂå∫Âà´ÔºåÂâçËÄÖÊòØÁîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÂÖ±‰∏ÄÊääÁã¨Âç†ÈîÅÔºå‰ΩÜÊòØÂêéËÄÖÊòØÂàÜÂºÄÔºå‰∏§ÊääÈîÅÔºåËøôÊ†∑Âπ∂ÂèëÁöÑÊïàÁéá‰πüÂ∞±Ë∂äÈ´òÔºåÁ∫øÁ®ãÁ≠âÂæÖÁöÑÊú∫‰ºö‰ºöÊõ¥Â∞ë„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677package Â§öÁ∫øÁ®ã.Producer_Consumer;import java.util.LinkedList;import java.util.concurrent.TimeUnit;import java.util.concurrent.locks.Condition;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.ReentrantLock;public class await_signal &#123; private final static Lock lock = new ReentrantLock(); private final static Condition producer_condition = lock.newCondition(); private final static Condition consumer_condition = lock.newCondition(); private final static LinkedList&lt;Long&gt; linkedList = new LinkedList&lt;&gt;(); private final static int MAX_CAPACITY = 100; public static void main(String[] args) &#123; new Thread(() -&gt; &#123; for (int i = 0; i &lt; 10; i++) &#123; while (true) &#123; await_signal.producer(); try &#123; TimeUnit.SECONDS.sleep(5); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125;).start(); new Thread(() -&gt; &#123; for (int i = 0; i &lt; 14; i++) &#123; while (true) &#123; await_signal.consumer(); try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125;).start(); &#125; private static void producer() &#123; try &#123; lock.lock(); if (linkedList.size() &gt; MAX_CAPACITY) &#123; producer_condition.await(); &#125; &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; long value = System.currentTimeMillis(); System.out.println(Thread.currentThread().getName() + ":-------PRODUCER-------- " + value); linkedList.addLast(value); consumer_condition.signalAll(); lock.unlock(); &#125; &#125; private static void consumer() &#123; try &#123; lock.lock(); if (linkedList.size() == 0) &#123; consumer_condition.await(); &#125; &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; long value = linkedList.pop(); System.out.println(Thread.currentThread().getName() + "::-------CONSUMER-------- " + value); producer_condition.signalAll(); lock.unlock(); &#125; &#125;&#125; ‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂÜôÁöÑÊúâÁÇπÈóÆÈ¢òÔºå‰∏∫‰∫Ü‰øùËØÅÊÄùËÄÉÁöÑËøáÁ®ãÂëàÁé∞ÔºåÊàëÂ∞±‰∏çÂà†Èô§‰∫ÜÔºö È¶ñÂÖàÊòØ‰∏ªÁ®ãÂ∫è main ‰∏≠ÂàõÂª∫Á∫øÁ®ãÂÜôÈîô‰∫Ü‚Ä¶ËøôÊ†∑Âè™‰ºöÂàõÂª∫‰∏§‰∏™Á∫øÁ®ã‚Ä¶‰ΩéÁ∫ßÂ§±ËØØÔºõ Âú® await Êó∂ÔºåÁî® if ‰ºöÊä•ÈîôÔºå‰ΩÜÊòØÁî® while Ê≤°ÈóÆÈ¢ò„ÄÇ ÁÑ∂ÂêéÂÜôÂÆå‰πãÂêéÊàëÂèëÁé∞ËæìÂá∫ÂæàÂ•áÊÄ™ÔºåÂπ∂‰∏îÂèà‰∫ßÁîü‰∫ÜÊñ∞ÁöÑÁñëÈóÆÔºö ‰∏∫‰ΩïÊØèÊ¨°ÈÉΩÊòØ producer Âíå consumer ËøûÁùÄ‰∏ÄËµ∑Ôºü ‰∏∫‰Ωï await ÈÇ£ÂùóÁî® if ‰ºöÊä•ÈîôÔºå‰ΩÜÊòØÁî® while Â∞±ÂèØ‰ª•Ôºü ÊåâÈÅìÁêÜÊù•ËØ¥Ôºåconsumer Âíå producer ‰∏çÂ∫îËØ•ÊúâËµÑÊ∫êÁ´û‰∫âÂÖ≥Á≥ªÔºåÊâÄ‰ª•ÂêàÁêÜÊù•ËØ¥Â∫îËØ•ÊòØ‰∏§ÊääÈîÅÔºåÂ¶ÇÊûú consumer Âíå producer ÂàÜ‰∏§ÊääÈîÅÊù•Êìç‰ΩúÂèàÂ¶Ç‰ΩïÂÆåÊàêÂë¢Ôºü ‰∏∫‰∫ÜÊõ¥Â•ΩÂú∞Ëß£ÂÜ≥‰ª•‰∏äÂá†‰∏™ÁñëÈóÆÔºåÊàëÁÆÄÂåñ‰∫Ü‰∏Ä‰∏ã‰æãÂ≠êÔºåÂ∞Ü producer ÁöÑÁ∫øÁ®ãÈôç‰∏∫ 1 ‰∏™ÔºåÂ∞Ü consumer ÁöÑÁ∫øÁ®ã Èôç‰∏∫ 3 ‰∏™„ÄÇ Q1Ôºö‰∏∫‰ΩïÊØèÊ¨°ÈÉΩÊòØ producer Âíå consumer ËøûÁùÄ‰∏ÄËµ∑ÔºüÁªèËøáÂ§öÊ¨°ÊµãËØïÂèëÁé∞Ôºå‰∏ç‰ºöÊÄªÊòØ producer Âíå consumer ËøûÂú®‰∏ÄËµ∑Âá∫Áé∞ÔºåÂè™ÊòØÊúÄÂºÄÂßãÁöÑÊó∂ÂÄô‰ºöËøûÂú®‰∏ÄËµ∑Âá∫Áé∞Ôºå‰∏∫‰ªÄ‰πàÂë¢ÔºüÂõ†‰∏∫Âú®ÊúÄÂºÄÂßãÁöÑÊó∂ÂÄôÔºåproducerÊòØÂÖàÂêØÂä®ÁöÑÔºåÈÇ£‰πàÂú®ÂêåÊ≠•ÈòüÂàó‰∏≠ÊéíÈòüÔºåproducerÊòØÂú®ÂâçÈù¢ÁöÑÔºåÊâÄ‰ª•ÁéáÂÖàÊä¢Âà∞ÈîÅÔºåconsumerÁ≠âproducerÊä¢ÂÆå‰πãÂêéÊâçÂºÄÂßãÊä¢ÈîÅÊ∂àË¥πÔºå‰ΩÜÊòØÂêéÊúüÁî±‰∫éÂÅèÂêëÈîÅÂíåConditionÁöÑÂéüÂõ†ÔºåÂ∞±‰∏ç‰ºö producerËøûÁùÄÂá∫Áé∞ÁöÑÊÉÖÂÜµ‰∫Ü„ÄÇ Q2Ôºö‰∏∫‰Ωï await ÈÇ£ÂùóÁî® if ‰ºöÊä•ÈîôÔºå‰ΩÜÊòØÁî® while Â∞±ÂèØ‰ª•Ôºü‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÊàëÁâπÊÑèÂ∞Ü producer ÁöÑÁ∫øÁ®ãÈôç‰∏∫ 1 ‰∏™ÔºåÂ∞Ü consumer ÁöÑÁ∫øÁ®ã Èôç‰∏∫ 3 ‰∏™ÔºåÁªìÊûúÊòØ‰æùÁÑ∂‰ºöÊä•Èîô„ÄÇ Êñ∞ÁöÑ demo Â¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091package Â§öÁ∫øÁ®ã.Producer_Consumer;import java.util.LinkedList;import java.util.concurrent.TimeUnit;import java.util.concurrent.locks.Condition;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.ReentrantLock;/** * ÊàëÊúâ‰∏â‰∏™ÈóÆÈ¢òÔºö * 1. ‰∏∫‰ΩïÊØèÊ¨°ÈÉΩÊòØ producer Âíå consumer ËøûÁùÄ‰∏ÄËµ∑ÔºüÊòØ jvm ÂÜÖÁΩÆÂÅèÂêëÈîÅÁöÑÂéüÂõ†ÂêóÔºü * 2. ‰∏∫‰Ωï condition.await() ÈÇ£ÂùóÁî® if ‰ºöÊä•ÈîôÔºå‰ΩÜÊòØÁî® while Â∞±ÂèØ‰ª•Ôºü * 3. ÊåâÈÅìÁêÜÊù•ËØ¥Ôºåconsumer Âíå producer ‰∏çÂ∫îËØ•ÊúâËµÑÊ∫êÁ´û‰∫âÂÖ≥Á≥ªÔºåÊâÄ‰ª•ÂêàÁêÜÊù•ËØ¥Â∫îËØ•ÊòØ‰∏§ÊääÈîÅÔºåÂ¶ÇÊûú consumer Âíå producer ÂàÜ‰∏§ÊääÈîÅÊù•Êìç‰ΩúÂèàÂ¶Ç‰ΩïÂÆåÊàêÈÄö‰ø°Âë¢Ôºü * */public class await_signal &#123; private final static Lock lock = new ReentrantLock(); private final static Condition producer_condition = lock.newCondition(); private final static Condition consumer_condition = lock.newCondition(); private final static LinkedList&lt;Long&gt; linkedList = new LinkedList&lt;&gt;(); private final static int MAX_CAPACITY = 10; public static void main(String[] args) &#123; System.out.println("producer-consumer Âêå‰∏ÄÊääÈîÅ"); for (int i = 0; i &lt; 1; i++) &#123; new Thread(() -&gt; &#123; while (true) &#123; await_signal.producer(); try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;).start(); &#125; System.out.println("-----------------"); for (int i = 0; i &lt; 3; i++) &#123; new Thread(() -&gt; &#123; while (true) &#123; await_signal.consumer(); try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;).start(); &#125; &#125; static void producer() &#123; try &#123; lock.lock(); // ‰∏∫‰ΩïËøô‰∏ÄÂùóÁî® if ‰∏çË°åÔºü if (linkedList.size() == MAX_CAPACITY) &#123; producer_condition.await(); &#125; long value = System.currentTimeMillis(); System.out.println(Thread.currentThread().getName() + ":-------PRODUCER-------- " + value); linkedList.addLast(value); consumer_condition.signalAll(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; lock.unlock(); &#125; &#125; static void consumer() &#123; try &#123; lock.lock(); // ‰∏∫‰ΩïËøô‰∏ÄÂùóÁî® if ‰∏çË°åÔºü if (linkedList.size() == 0) &#123; consumer_condition.await(); &#125; long value = linkedList.pop(); System.out.println(Thread.currentThread().getName() + "::-------CONSUMER-------- " + value); producer_condition.signalAll(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; lock.unlock(); &#125; &#125;&#125; Â¶Ç‰∏äÔºåÊàë‰ª¨Êù•ÂàÜÊûê‰∏Ä‰∏ã‰∏∫‰ΩïË¶ÅÁî® whileÔºå‰∏ãÈù¢ÊàëÊääÁ®ãÂ∫èÊï¥‰∏™ËøêË°åËøáÁ®ãËÆ≤‰∏ÄÈÅç„ÄÇ È¶ñÂÖàÊàë‰ª¨Ê∏ÖÊ•ö Thread-0 ÊòØ producerÔºåThread 1 „ÄÅ2„ÄÅ3 ÈÉΩÊòØ consumerÔºõ Âú®ÊúÄÂºÄÂßãÔºå Thread-0 ÊúÄÂÖàÂêØÂä®ÔºåÊâÄ‰ª•ÂÆÉ‰πüÁêÜÊâÄÂΩìÁÑ∂ÁöÑÁ¨¨‰∏Ä‰∏™Êä¢Âà∞‰∫ÜÈîÅ ‰ªéÂõæ‰∏≠Êàë‰ª¨‰πüÂèØ‰ª•ÁúãÂá∫ÔºåÊ≠§Êó∂Êä¢Âà∞ÈîÅÁöÑ exclusiveOwnerThread ‰∏∫ Thread 0Ôºå‰ªéÈòüÂàó‰∏≠Êàë‰ª¨ÂèØ‰ª•ÁúãÂá∫Ââ©‰∏ãÁöÑ‰∏â‰∏™ Thread Â∑≤ÁªèÂÖ®ÈÉ®ËøõÂÖ•Âà∞ÂêåÊ≠•ÈòüÂàóÔºå‰∏îÈ°∫Â∫èÊòØ Thread 3 - Thread 1 - Thread 2ÔºàÂêéÈù¢ÈÇ£‰∏™ 5 ÊòØÊåá‰ºòÂÖàÁ∫ßÔºå‰∏çÁî®ÁÆ°ÔºâÔºå‰∏∫‰ªÄ‰πà‰∏çÂèØËÉΩËøõÂÖ•Âà∞Êù°‰ª∂ÈòüÂàóÂë¢ÔºüÂõ†‰∏∫ nextWaiter = nullÔºå‰∏î‰ªé waitStatus = -1ÂèØÁü•Ôºå‰∏â‰∏™Á∫øÁ®ãÈÉΩÂú®ÂêåÊ≠•ÈòüÂàó‰∏≠Á≠âÂæÖË¢´Âî§ÈÜí„ÄÇÊâÄ‰ª•Êàë‰ª¨È¢ÑÊµã‰∏ã‰∏Ä‰∏™Êä¢Âà∞ÈîÅÁöÑ‰∏ÄÂÆöÊòØ Thread 3,‰ªñ‰ºöÂéªÊ∂àË¥π Thread 0 ÂàöÂàöÁîü‰∫ßÂá∫ÁöÑÊ∂àÊÅØÔºåËÆ©Êàë‰ª¨Êé•ÁùÄÁúãÔºõ Ê≠£Â¶ÇÊàë‰ª¨ÊâÄÊñôÔºåÁúüÁöÑÊòØ Thread 3Êä¢Âà∞‰∫ÜÈîÅÁÑ∂ÂêéÂéªÊ∂àË¥π‰∫Ü„ÄÇ 1234producer-consumer Âêå‰∏ÄÊääÈîÅ-----------------Thread-0:-------PRODUCER-------- 1583068539426Thread-3::-------CONSUMER-------- 1583068539426 Êàë‰ª¨ÂÜçÈÄöËøá debug ÁöÑÂèòÈáèÈ™åËØÅ‰∏Ä‰∏ã„ÄÇ ÁúãÔºåÁúüÁöÑ Thread 3 Êä¢Âà∞ÈîÅ‰∫Ü„ÄÇ‰∏ç‰ø°ÔºåÁªßÁª≠Áúã‰∏ãÈù¢Êõ¥ËØ¶ÁªÜÁöÑ‰ø°ÊÅØÔºö Â¶ÇÂõæÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÔºåThread 3 Ê∂àË¥πÊéâ‰∫ÜÊ∂àÊÅØÔºåÂπ∂‰∏îÊ≥®ÊÑèÂà∞ÂêåÊ≠•ÈòüÂàóÁé∞Âú®Âèò‰∏∫‰∫Ü Thread 1 - Thread 2 - Thread 0ÔºåÂºÄÂßãÊòØ 3 - 1 - 2,Áé∞Âú®Â∞±ÂèòÊàê‰∫Ü 1 - 2 - 0Ôºå‰Ω†ËøòÂà´ËØ¥ÔºåËøôÁßçÂêåÊ≠•ÁúüÁöÑÈÄüÂ∫¶ÊúâÁÇπÊÖ¢ÔºåThread 0 ÈÉΩ‰ºëÊÅØÂÆå‰∫Ü 3 Áßí‰∫ÜÔºåÂâçÈù¢ÈÇ£‰∏§ËÄÅÂì•ËøòÂú®Á≠âÁùÄÂë¢Ôºå‰∏çËøáËøôÈáåËøòÊúâ‰∏Ä‰∏™Ë¶ÅÊ≥®ÊÑèÁöÑÂú∞ÊñπÔºåÂ∞±ÊòØ Thread 0 ÁöÑ waitStatus = 0ÔºåËøôÊòØ‰∏∫Âï•Âë¢ÔºåÂá≠Âï•Âà´‰∫∫ÈÉΩÊòØ waitStatus = -1Âë¢ÔºåÂõûÈ°æ‰∏Ä‰∏ãÔºåwatiStatus = -1ÊÑèÊÄùÂ∞±ÊòØÁ≠âÂæÖË¢´Âî§ÈÜíÔºåwaitStatus = 0 ÊÑèÊÄùÂ∞±ÊòØ‰∏ã‰∏™ËäÇÁÇπÊòØ nullÔºåÂΩìÁÑ∂‰πüÂèØËÉΩÊòØ‰∏ã‰∏™ËäÇÁÇπËøòÊ≤°ÂàùÂßãÂåñÂÆåÔºå‰ΩÜÊòØËøôÈáåÊòØ null„ÄÇ Ëøô‰∏ãÊÄªËØ•ËÇØÂÆöÊòØ Thread 3 Ê∂àË¥π‰∫ÜÂêßÔºåÊàë‰ª¨Êé•ÁùÄÂæÄ‰∏ãÁúã„ÄÇÂΩìÁÑ∂‰∫ÜÔºåÊàë‰ª¨ÂÖàÈ¢ÑÊµã‰∏ÄÊ≥¢Ôºå‰∏ãÈù¢Ë¶ÅÊä¢ÈîÅÁöÑËÇØÂÆöÊòØ 1Âè∑ËÄÅÂ§ßÂì•ÔºåÁÑ∂ÂêéÊ≠§Êó∂Â∑≤ÁªèÊ≤°ÊúâÊ∂àÊÅØÁªô‰ªñÊ∂àË¥π‰∫ÜÔºåÈÇ£‰ªñÂ∞±Âè™ËÉΩÊéâÂÖ• Condition ÁöÑÂ§ßÂùë‰∫ÜÔºåÂè™ËÉΩ‰ªéÂêåÊ≠•ÈòüÂàóÁßªÂà∞Êù°‰ª∂ÈòüÂàó‰∫ÜÔºåÂ•ΩËã¶ÈÄºÂïäÔºåÁ≠â‰∫ÜËøô‰πà‰πÖÔºåËøòÂæóÊç¢‰∏™Âú∞ÊñπÊé•ÁùÄÁ≠âÔºÅ Êàë‰ª¨Êù•ÁúãÁúãÔºåÁªìÊûúÊòØ‰∏çÊòØÂ¶ÇÊàë‰ª¨È¢ÑÊñôÁöÑ‰∏ÄÊ†∑„ÄÇ ÊûúÁÑ∂ÔºåÊé•ÁùÄÂ∞±ÊòØ 1 Âè∑ËÄÅÂ§ßÂì•Âú®ËøêË°åÔºå‰∏ç‰ø°Êàë‰ª¨Áúã debug ËØ¶ÁªÜÁöÑÂèÇÊï∞Ôºö Êè°ËçâÔºåÊàëË¢´ÊâìËÑ∏‰∫Ü‚Ä¶ËôΩÁÑ∂Ê≠§Êó∂ÁöÑÁ°ÆÊòØ Thread 1 Âú®ÊâßË°åÔºå‰ΩÜÊòØÔºÅÔºÅÔºÅÁéõÂæ∑Êù°‰ª∂ÈòüÂàóÁ´üÁÑ∂‰∏çÊòØ 1Âè∑ËÄÅÂ§ßÂì•ÔºåÊòØÂàöÂàöÊ∂àË¥πÊ∂àÊÅØÁöÑ 3 Âè∑Â∞èËÄÅÂºüÔºåÂÆÉÂú®Êêû‰ªÄ‰πàÔºüÔºüÔºüÔºüÔºüÔºü‰ªîÁªÜÊÄùËÄÉ‰∏Ä‰∏ãÔºåÊàë‰ª¨ÂæóÁü•ÈÅì jvm ÈªòËÆ§ÂºÄÂêØ‰∫ÜÂÅèÂêëÈîÅÔºåËá≥‰∫é‰ªÄ‰πàÊòØÂÅèÂêëÈîÅÔºåÈÇ£Â∞±ÂõûÂà∞Â§öÁ∫øÁ®ãÔºà‰∏ÄÔºâÂéªÂ§ç‰π†ÂêßÔºå3 Âè∑Â∞èËÄÅÂºü‰ΩøÁî®‰∫ÜÂ§ñÊåÇ‚ÄîÂÅèÂêëÈîÅ„ÄåÈîô‰∫ÜÔºÅÔºÅÔºÅÔºÅÁ∫†Ê≠£‰∏Ä‰∏ãÔºåÂéãÊ†π‰∏çÊòØÁî®ÁöÑÂÅèÂêëÈîÅÔºåËøôÈáåÊó©Â∞±ÂçáÁ∫ßÂà∞‰∫ÜÈáçÈáèÁ∫ßÈîÅÔºåÂì™ÈáåÊù•ÁöÑÂÅèÂêëÈîÅÔºåÁúüÊ≠£ÊèíÈòüÁöÑÂéüÂõ†ÊòØËøôÈáåÊòØÈùûÂÖ¨Âπ≥ÈîÅÔºÅÔºÅÔºÅÔºÅÔºÅ„ÄçÔºå‰∫éÊòØÂÆÉÂæàÊÅ∂ÂøÉÁöÑÊèíÈòü‰∫ÜÔºåÊú¨Êù•ÊåâÈÅìÁêÜÊù•ËØ¥ÔºåÂ∫îËØ•ÊòØ 1Âè∑ËÄÅÂì•Êä¢Âà∞ÈîÅÔºåÁÑ∂ÂêéÂõ†‰∏∫Ê≤°ÊúâÊ∂àÊÅØÂèØ‰ª•Ê∂àË¥πÔºåÊâÄ‰ª•ÂÆÉ‰ªéÂêåÊ≠•ÈòüÂàóÁßªÂÖ•Âà∞Êù°‰ª∂ÈòüÂàó‰∏≠Á≠âÂà∞Ë¢´ signalÔºåÁÑ∂ÂêéÂêåÊ≠•ÈòüÂàóÁêÜÂ∫îÂ∞±Ââ©‰∏ã 2 - 0ÔºåÁÑ∂ÂêéÂèØËÉΩ 3 Âè∑ÊâßË°åÂÆå‰∫ÜÊé•Âú®ÂêéÈù¢„ÄÇ‰ΩÜÊòØÁé∞ÂÆûÊòØ‰ªÄ‰πàÂë¢ÔºüÈÇ£Â∞±ÊòØ 3 Âè∑Â∞èËÄÅÂºü‰ΩøÁî®Â§ñÊåÇÂÅèÂêëÈîÅÔºåÁõ¥Êé•ÊèíÈòüÔºåÁéáÂÖàËé∑ÂèñÈîÅÔºåÁî±‰∫éÊ≤°ÊúâÊ∂àÊÅØÂèØ‰ª•Ê∂àË¥πÔºåÊâÄ‰ª•ÂÆÉ‰ªéÂêåÊ≠•ÈòüÂàóÁßªÂÖ•Âà∞‰∫ÜÊù°‰ª∂ÈòüÂàóÔºåÂºÄÂßãÁ≠âÂæÖÔºåÊàë‰ª¨‰πüÂèØ‰ª•ÁúãÂà∞ÔºåÂõæ‰∏≠ consumer_conditionÁöÑÈòüÂàó‰∏≠Âè™Êúâ‰∏Ä‰∏™ ThreadÔºåÈÇ£Â∞±ÊòØ 3 Âè∑Â∞èËÄÅÂºüÔºå3Âè∑Â∞èËÄÅÂºüÂú®Êù°‰ª∂ÈòüÂàó‰∏≠Á≠âÂæÖ‰πãÂêéÔºåÊöÇÊó∂ÊîæÂºÉ‰∫ÜÈîÅÔºå‰∫éÊòØÁªà‰∫éÂ∞ºÁéõËΩÆÂà∞Êàë 1 Âè∑ËÄÅÂ§ßÂì•‰∫ÜÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÔºåÊ≠§Êó∂ÁöÑÁ°ÆÊòØ 1Âè∑ÂºÄÂßãËøêË°åÔºåÁÑ∂ÂêéÂêåÊ≠•ÈòüÂàó‰∏≠ÊòØ 2 - 0 - nullÔºåÂç≥‰∏§‰∏™ÈòüÂàóÔºåËøôÁöÑÁ°ÆÊòØÁ¨¶ÂêàÊàë‰ª¨Áé∞Âú®ÁöÑÊÉ≥Ê≥ï„ÄÇ ËôΩÁÑ∂ÂàöÊâçÈ¢ÑÊµãÈîô‰∫ÜÔºå‰ΩÜÊòØÈÇ£ÊòØÂõ†‰∏∫ 3 Âè∑‰ΩøÁî®‰∫ÜÂ§ñÊåÇÔºåÊâÄ‰ª•ÊàëËøòÊòØÊé•ÁùÄÈ¢ÑÊµãÂêßÔºåÊØïÁ´üÊàëÈ¢ÑÊµãÁöÑÂÖ∂ÂÆûËøòÊòØÊå∫ÂáÜÁöÑ„ÄÇÊ≠§Êó∂Âõ†‰∏∫Ê≤°ÊúâÊ∂àÊÅØÂèØ‰ª•Ê∂àË¥πÔºåÊâÄ‰ª• 1 Âè∑ËÄÅÂ§ßÂì•ÂæàÂèØÊÄúÔºåË∑ü 3 Âè∑Â∞èÂºü‰∏ÄÊ†∑ÁöÑ‰∏ãÂú∫Ôºå‰ªéÂêåÊ≠•ÈòüÂàóËΩ¨ÁßªÂà∞Êù°‰ª∂ÈòüÂàóÈòüÂ∞æÁªßÁª≠Á≠âÂæÖÔºåÊåâÈÅìÁêÜÊù•ËØ¥ 1 Âè∑Â∞ÜË¶ÅÂú®Êù°‰ª∂ÈòüÂàó‰∏≠Ôºå‰πüÂ∞±ÊòØ 3 - 1ÔºåÁÑ∂Âêé‰ªñËÆ©Âá∫ÈîÅÔºåÁ≠âÂæÖË¢´Âî§ÈÜíÔºåÊ≠§Êó∂ÂêåÊ≠•ÈòüÂàó‰∏≠ÈòüÈ¶ñÂ∫îËØ•ÊòØ 2 Âè∑ËÄÅÂì•‰∫ÜÔºåÁªà‰∫éËΩÆÂà∞‰∫∫ÂÆ∂‰∫Ü‚Ä¶ÂΩìÁÑ∂ÂÆÉÂ∫îËØ•‰πüÊòØÂæà‰∏çÂπ∏ÁöÑÔºåÂè™ËÉΩË∑ü 3 - 1‰∏ÄÊ†∑ÁöÑ‰∏ãÂú∫ÔºåÂõûÂà∞Êù°‰ª∂ÈòüÂàóÈòüÂ∞æÁªßÁª≠ÂæÖÁùÄ‚Ä¶È¢ÑÊµãÂÆå‰∫ÜÔºåÊàë‰ª¨Êù•ÁúãÁúãÁúüÂÆûÊÉÖÂÜµ„ÄÇ ÁúãÁªìÊûúÁöÑÁ°ÆÊòØ 2 Âè∑ËÄÅÂì•Âú®ËøêË°åÁùÄÔºö Êàë‰ª¨Êù•Áúã‰∏Ä‰∏ãÂÖ∑‰ΩìÁöÑÂèÇÊï∞ÔºåÈ™åËØÅ‰∏Ä‰∏ãÔºö ÂÆåÁæéÔºåÈ¢ÑÊµãÁöÑ‰∏ÄÊ®°‰∏ÄÊ†∑„ÄÇ2 Âè∑Êä¢Âà∞ÈîÅ‰πãÂêéÔºåÂêåÊ≠•ÈòüÂàóÂ∞±Âè™Ââ©‰∏ã‰∫Ü 0 Âè∑ÔºåÂπ∂‰∏î waitStatus = 0ÔºåËØ¥ÊòéËøôÊòØÈòüÂ∞æ‰∫ÜÔºåÂÜçÊèêÈÜí‰∏Ä‰∏ãÂìàÔºåÂΩìÂâçËäÇÁÇπÁöÑ waitStatus ÁöÑÂÄºÊòØË°®Á§∫‰∏ã‰∏ÄËäÇÁÇπÁöÑÁä∂ÊÄÅÔºåÊØîÂ¶ÇËØ¥ waitStatus = -1ËØ¥ÊòéÁöÑÊòØËØ•ËäÇÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπÂ∑≤ÁªèÂáÜÂ§áÂ•ΩË¢´Âî§ÈÜí‰∫Ü„ÄÇÁÑ∂ÂêéÊàë‰ª¨ÂÜçÁúã‰∏Ä‰∏ãÊù°‰ª∂ÈòüÂàóÁöÑÊÉÖÂÜµÔºåÊÉÖÂÜµÂíåÊàë‰ª¨ÊÄùËÄÉÁöÑÊòØ‰∏ÄÊ†∑ÁöÑÔºåÊù°‰ª∂ÈòüÂàó‰∏≠Áé∞Âú®Â∞± 2 ‰∏™ ThreadÔºåÂàÜÂà´ÊòØ 3 - 1ÔºåÂΩìÁÑ∂‰∫ÜÔºåÈ©¨‰∏ä 2 Â∞±Ë¶ÅÂä†ÂÖ•‰ªñ‰ª¨‰∫ÜÔºåÂõ†‰∏∫Ê≠§Êó∂ËøòÊòØÊ≤°ÊúâÊ∂àÊÅØÂèØ‰ª•Ê∂àË¥πÔºåÊàë‰ª¨Êé•ÁùÄÂæÄ‰∏ãÁúã„ÄÇ ÂïäÂïäÂïäÂïäÔºå‰∏çÁü•ÈÅì‰∏∫Âï•ÔºåÂèØËÉΩÊòØÊàëÁÇπÈîô‰∫ÜÔºåÁ™ÅÁÑ∂Â∞±Âá∫Áé∞‰∫ÜËøôÊ†∑ÁöÑÁªìÊûú„ÄÇ Âπ∂‰∏îÊù°‰ª∂ÈòüÂàó‰∏∫Á©∫„ÄÇ 1234567producer-consumer Âêå‰∏ÄÊääÈîÅ-----------------Thread-0:-------PRODUCER-------- 1583068539426Thread-3::-------CONSUMER-------- 1583068539426Thread-0:-------PRODUCER-------- 1583068539427Thread-3::-------CONSUMER-------- 1583068539427Exception in thread "Thread-1" ‰∏çË¶ÅÁùÄÊÄ•ÔºåÊàë‰ª¨Êù•ÂàÜÊûê‰∏ÄÊ≥¢ÔºåÁî®ÁêÜËÆ∫ÊàòËÉúÈîôËØØ„ÄÇÊàë‰ª¨ÂàöÊâçÊòØËøôÊ†∑ÁöÑÊÉÖÂÜµÔºåËæìÂá∫Ê°ÜÊòØ 1234producer-consumer Âêå‰∏ÄÊääÈîÅ-----------------Thread-0:-------PRODUCER-------- 1583068539426Thread-3::-------CONSUMER-------- 1583068539426 ËØ¥ÊòéËøôÊúüÈó¥Êúâ‰∏ÄÊ¨°Áîü‰∫ßÔºåÊúâ‰∏ÄÊ¨°Ê∂àË¥πÔºåËÄåÊ≠§Êó∂Êàë‰ª¨ÁöÑÊù°‰ª∂ÈòüÂàóÂ∫îËØ•ÊòØ 3 - 1 - 2ÔºåÂêåÊ≠•ÈòüÂàóÂè™Ââ©‰∏ã 0„ÄÇÊâÄ‰ª•Ê≠§Êó∂Âè™Ââ©‰∏ã 0 ÂèØ‰ª•Êä¢ÈîÅ‰∫ÜÔºå‰∫éÊòØ 0 ÊãøÂà∞‰∫ÜÈîÅÔºåÁÑ∂ÂêéÁîü‰∫ßÂá∫‰∫Ü‰∏ÄÊù°Ê∂àÊÅØÔºåËøô‰∏™ÂèØ‰ª•ËØ¥ÂæóÈÄöÔºåÊ≠§Êó∂Áîü‰∫ßÂÆå‰πãÂêéÔºåÂÆÉË∞ÉÁî® consumer_condition.signalall()ÔºåÊääÊù°‰ª∂ÈòüÂàó‰∏≠ÁöÑ 3 ‰∏™ÈÉΩÁªôÂî§ÈÜí‰∫ÜÔºå3 Âè∑Â∞èËÄÅÂºüÁî±‰∫éÊòØÂú®Êù°‰ª∂ÈòüÂàóÈòüÈ¶ñÔºåÊâÄ‰ª•ÂÆÉÁ¨¨‰∏Ä‰∏™‰ªéÊù°‰ª∂ÈòüÂàó‰∏≠Âä†ÂÖ•Âà∞ÂêåÊ≠•ÈòüÂàóÔºå1 Âè∑ Âíå 2 Âè∑ ËÄÅÂ§ßÂì•Á¥ßÈöèÂÖ∂ÂêéÂä†ÂÖ•Âà∞ÂêåÊ≠•ÈòüÂàóÔºå‰∫éÊòØ‰ªñÁ¨¨‰∏Ä‰∏™Êä¢Âà∞ÈîÅÔºåÁªßÁª≠ÊâßË°åËá™Â∑±ÁöÑÈÄªËæëÔºåÊ≥®ÊÑèÔºåÊàë‰ª¨Áªà‰∫éË¶ÅËß£ÂÜ≥Á¨¨‰∫å‰∏™ÈóÆÈ¢ò‰∫ÜÔºÅÔºÅÔºÅÔºÅ‰ªñÂèëÁé∞Ê≠§Êó∂ÊúâÊ∂àÊÅØÂèØ‰ª•Ê∂àË¥πÔºå‰∫éÊòØ‰ªñËøõË°å‰∫ÜÊ∂àË¥πÔºåÊ≠§Êó∂Â∑≤ÁªèÊ≤°ÊúâÊ∂àÊÅØÂèØ‰ª•Ê∂àË¥π‰∫ÜÔºå‰ΩÜÊòØ 1Âè∑ËÄÅÂ§ßÂì•‰∏çÁü•ÈÅìÂïäÔºåÂÆÉÂàöÂàöË¢´Âî§ÈÜíÔºåÂÖ¥È´òÈááÁÉàÁöÑ‰ª•‰∏∫Áªà‰∫éÂèØ‰ª•Ê∂àË¥π‰∫ÜÔºåÂõ†‰∏∫Êàë‰ª¨ÂÜôÁöÑÊòØ ifÔºåÊâÄ‰ª•ÂÆÉ‰∏ç‰ºöÂÜçÂéªÂà§Êñ≠ÊòØÂê¶ËøòË¶ÅÊ∂àÊÅØÂèØ‰ª•Ê∂àË¥πÔºåÂõ†‰∏∫ÂÆÉ‰ª•‰∏∫ËÇØÂÆöÊúâÊ∂àÊÅØÂïäÂØπÂêßÔºå‰∏çÁÑ∂‰Ω†Âî§ÈÜíÊàëÂπ≤ÂòõÔºÅ‰∫éÊòØ‰ªñÂéªÊ∂àË¥πÔºåpoll()‰∏Ä‰∏™Á©∫listÔºåËøô‰∏çÊòØÊâæÊä•ÈîôÂòõ‚Ä¶ÊâÄ‰ª•ÔºåÂ∞±ÁúüÁöÑÊä•Èîô‰∫Ü„ÄÇ ÊâÄ‰ª•ËØ¥ÔºåÈÅáÂà∞ÈóÆÈ¢ò‰∏çË¶ÅÊÖåÔºåÁêÜËÆ∫ÊéåÊè°ÁöÑÈÄèÈÄèÁöÑÔºå‰∏ç‰ºöÂá∫Áé∞ÊÑèÂ§ñÊÉÖÂÜµÁöÑÔºåÊàë‰ª¨Êù•ÊÄªÁªì‰∏Ä‰∏ã‰∏∫‰ªÄ‰πàË¶ÅÁî® while ËÄå‰∏çËÉΩÁî® ifÔºö Ë¢´Âî§ÈÜí‰πãÂêéÔºåÊù°‰ª∂ÈòüÂàó‰∏≠ÁöÑ Thread ‰ºöÂä†ÂÖ•Âà∞ ÂêåÊ≠•ÈòüÂàó‰∏≠ÔºåÂ¶ÇÊûúÊ≠§Êó∂ÂêåÊ≠•ÈòüÂàó‰∏≠ËøòÊúâ ThreadÔºåÈÇ£‰πàÊù°‰ª∂ÈòüÂàó‰∏≠Ë¢´Âî§ÈÜíÁöÑ Thread ÂøÖÈ°ªË∑üÂú®ÂÆÉ‰ª¨ÁöÑÂêéÈù¢ÔºåÂ¶ÇÊûúÊ≠§Êó∂ÂêåÊ≠•ÈòüÂàó‰∏≠ÁöÑ Thread ÊääÊ∂àÊÅØÊ∂àË¥πÂÆå‰∫ÜÔºåÊàëÂêéÈù¢ÁöÑÂàöÊâçÊù°‰ª∂ÈòüÂàó‰∏≠Ë¢´Âî§ÈÜíÁöÑ ThreadÔºåÊ†πÊú¨Êó†Ê≥ïÁü•ÈÅìÊ≤°ÊúâÊ∂àÊÅØ‰∫ÜÔºåÂõ†‰∏∫ÂÆÉ‰ª¨‰∏ÄÊãøÂà∞ lock Â∞±‰ºöÁªßÁª≠ÂæÄ‰∏ãÊâßË°åÔºõ ÂΩìÁÑ∂‰∫ÜÔºåÂàöÊâçÊòØ‰∏§Êâπ‰∫∫ÁöÑÊàòÊñóÔºåÊù°‰ª∂ÈòüÂàóÁÆó‰∏ÄÊâπ‰∫∫ÔºåÂêåÊ≠•ÈòüÂàóÁÆó‰∏ÄÊâπ‰∫∫ÔºåÂêåÊ≠•ÈòüÂàóÁöÑÊää‰∫∫ÂÆ∂Êù°‰ª∂ÈòüÂàóÁöÑ‰∫∫ÁªôÂÆ≥‰∫ÜËøò‰∏çÂëäËØâ‰∫∫ÂÆ∂ÔºåÊÅ∂ÂøÉÔºÅÂΩìÁÑ∂ÊúÄÊÅ∂ÂøÉÁöÑËøòÊòØËá™ÂÆ∂‰∫∫ÁöÑÊñó‰∫âÔºå‰πüÂ∞±ÊòØÊù°‰ª∂ÈòüÂàó‰∏≠ÁöÑ Thread ÁöÑËá™Áõ∏ÊÆãÊùÄÔºåÊù°‰ª∂ÈòüÂàóÂêéÈù¢ÁöÑÂéãÊ†π‰∏çÁü•ÈÅìÂâçÈù¢ÁöÑÊ∂àË¥πÂÆå‰∫ÜÔºåÊâÄ‰ª•‰πü‰ºöÊä•Èîô„ÄÇ Âõ†Ê≠§ÔºåÂ∞Ü if Êîπ‰∏∫ whileÔºåÊàëÂú®Ë¢´Âî§ÈÜí‰πãÂêé‰æùÊóßÂèØ‰ª•È¶ñÂÖàÂà§Êñ≠‰∏Ä‰∏ãÊòØÂê¶ËøòÊúâÊ∂àÊÅØÔºåËøôÊòØÈùûÂ∏∏ÊúâÂøÖË¶ÅÁöÑ„ÄÇ Q3ÔºöÊ∂àË¥πËÄÖ-Áîü‰∫ßËÄÖ‰ΩøÁî®‰∏§ÊääÈîÅÔºåÂèàÂ¶Ç‰ΩïÂÆåÊàêÂë¢ÔºüÁöÑÁ°ÆÔºåÊ∂àË¥πËÄÖÂíåÁîü‰∫ßËÄÖÊú¨Â∞±‰∏çÂ∫îËØ•ÊîæÂà∞‰∏ÄÊääÈîÅ‰∏≠ÂéªÊéßÂà∂ÔºåÊàëÊ∂àË¥πÊàëÁöÑÔºå‰Ω†Áîü‰∫ß‰Ω†ÁöÑÔºåÂè™ÊòØÂêÑÊúâ‰∏ÄÁßçÊÉÖÂÜµÂÅúÊ≠¢ËÄåÂ∑≤ÔºåÊâÄ‰ª•‰ΩøÁî®‰∏§ÊääÈîÅÊâçÊòØÈùûÂ∏∏ÂêàÁêÜÁöÑËÆæËÆ°ÔºåÊàë‰πãÂâç‰πüÊúâËØ¥ÔºåËøôÂ∞±ÊòØ ArrayBlockingQueue Âíå LinkedBlockingQueue ÊúÄÂ§ßÁöÑÂå∫Âà´„ÄÇÊâÄ‰ª•ÔºåÊé•‰∏ãÊù•Ëøô‰∏™ÈóÆÈ¢òÔºåÊàëÂ∏åÊúõËÉΩÂÄüÂä©‰∫é LinkedBlockingQueue ÁöÑÊ∫êÁ†ÅÊù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108package Â§öÁ∫øÁ®ã.Producer_Consumer;import java.util.LinkedList;import java.util.concurrent.TimeUnit;import java.util.concurrent.locks.Condition;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.ReentrantLock;/** * ÊàëÊúâ‰∏â‰∏™ÈóÆÈ¢òÔºö * 1. ‰∏∫‰ΩïÊØèÊ¨°ÈÉΩÊòØ producer Âíå consumer ËøûÁùÄ‰∏ÄËµ∑ÔºüÊòØ jvm ÂÜÖÁΩÆÂÅèÂêëÈîÅÁöÑÂéüÂõ†ÂêóÔºü * 2. ‰∏∫‰Ωï condition.await() ÈÇ£ÂùóÁî® if ‰ºöÊä•ÈîôÔºå‰ΩÜÊòØÁî® while Â∞±ÂèØ‰ª•Ôºü * 3. ÊåâÈÅìÁêÜÊù•ËØ¥Ôºåconsumer Âíå producer ‰∏çÂ∫îËØ•ÊúâËµÑÊ∫êÁ´û‰∫âÂÖ≥Á≥ªÔºåÊâÄ‰ª•ÂêàÁêÜÊù•ËØ¥Â∫îËØ•ÊòØ‰∏§ÊääÈîÅÔºåÂ¶ÇÊûú consumer Âíå producer ÂàÜ‰∏§ÊääÈîÅÊù•Êìç‰ΩúÂèàÂ¶Ç‰ΩïÂÆåÊàêÈÄö‰ø°Âë¢Ôºü * */public class await_signal &#123; private final static Lock lock1 = new ReentrantLock(); private final static Lock lock2 = new ReentrantLock(); private final static Condition producer_condition = lock1.newCondition(); private final static Condition consumer_condition = lock2.newCondition(); private final static LinkedList&lt;Long&gt; linkedList = new LinkedList&lt;&gt;(); private final static int MAX_CAPACITY = 5; public static void main(String[] args) &#123; System.out.println("producer-consumer ‰∏§ÊääÈîÅ"); for (int i = 0; i &lt; 3; i++) &#123; new Thread(() -&gt; &#123; while (true) &#123; await_signal.producer(); try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;).start(); &#125; System.out.println("-----------------"); for (int i = 0; i &lt; 3; i++) &#123; new Thread(() -&gt; &#123; while (true) &#123; await_signal.consumer(); try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;).start(); &#125; &#125; static void producer() &#123; int size = 0; try &#123; lock1.lock(); while (linkedList.size() == MAX_CAPACITY) &#123; producer_condition.await(); &#125; size = linkedList.size(); long value = System.currentTimeMillis(); System.out.println(Thread.currentThread().getName() + ":-------PRODUCER-------- " + value); linkedList.addLast(value); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; lock1.unlock(); &#125; if(size == 0)&#123; try&#123; lock2.lock(); consumer_condition.signalAll(); &#125;finally &#123; lock2.unlock(); &#125; &#125; &#125; static void consumer() &#123; int size = 0; try &#123; lock2.lock(); while (linkedList.size() == 0) &#123; consumer_condition.await(); &#125; size = linkedList.size(); long value = linkedList.pop(); System.out.println(Thread.currentThread().getName() + "::-------CONSUMER-------- " + value); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; lock2.unlock(); &#125; if(size == MAX_CAPACITY)&#123; try&#123; lock1.lock(); producer_condition.signalAll(); &#125;finally &#123; lock1.unlock(); &#125; &#125; &#125;&#125; ‰∏äËø∞Â∞±ÊòØÂÆåÂÖ®ÂÄüÈâ¥‰∫é LinkedBlockingQueueÔºå‰ΩÜÊòØÊ∫êÁ†ÅÈáåÈù¢Ê†πÊú¨Ê≤°ÊúâË∞ÉÁî® signalAll()ÔºåËÄåÊòØÂà©Áî®‰∏§ÊääÈîÅÁöÑ‰ºòÂäøÔºåÂè™ÈúÄË¶ÅÂî§ÈÜíÊù°‰ª∂ÈòüÂàóÁöÑÁ¨¨‰∏Ä‰∏™ÔºåÁÑ∂Âêé‰∏Ä‰∏™Êé•‰∏Ä‰∏™ÂéªÂî§ÈÜíÂ∞±ÂèØ‰ª•‰∫ÜÔºåËøô‰∏™Â∞±ÂæàÂ¶ôÔºÅÔºÅÔºÅÔºÅ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110package Â§öÁ∫øÁ®ã.Producer_Consumer;import java.util.LinkedList;import java.util.concurrent.TimeUnit;import java.util.concurrent.locks.Condition;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.ReentrantLock;/** * ÊàëÊúâ‰∏â‰∏™ÈóÆÈ¢òÔºö * 1. ‰∏∫‰ΩïÊØèÊ¨°ÈÉΩÊòØ producer Âíå consumer ËøûÁùÄ‰∏ÄËµ∑ÔºüÊòØ jvm ÂÜÖÁΩÆÂÅèÂêëÈîÅÁöÑÂéüÂõ†ÂêóÔºü * 2. ‰∏∫‰Ωï condition.await() ÈÇ£ÂùóÁî® if ‰ºöÊä•ÈîôÔºå‰ΩÜÊòØÁî® while Â∞±ÂèØ‰ª•Ôºü * 3. ÊåâÈÅìÁêÜÊù•ËØ¥Ôºåconsumer Âíå producer ‰∏çÂ∫îËØ•ÊúâËµÑÊ∫êÁ´û‰∫âÂÖ≥Á≥ªÔºåÊâÄ‰ª•ÂêàÁêÜÊù•ËØ¥Â∫îËØ•ÊòØ‰∏§ÊääÈîÅÔºåÂ¶ÇÊûú consumer Âíå producer ÂàÜ‰∏§ÊääÈîÅÊù•Êìç‰ΩúÂèàÂ¶Ç‰ΩïÂÆåÊàêÈÄö‰ø°Âë¢Ôºü * */public class await_signal &#123; private final static Lock lock1 = new ReentrantLock(); private final static Lock lock2 = new ReentrantLock(); private final static Condition producer_condition = lock1.newCondition(); private final static Condition consumer_condition = lock2.newCondition(); private final static LinkedList&lt;Long&gt; linkedList = new LinkedList&lt;&gt;(); private final static int MAX_CAPACITY = 5; public static void main(String[] args) &#123; System.out.println("producer-consumer ‰∏§ÊääÈîÅ"); for (int i = 0; i &lt; 3; i++) &#123; new Thread(() -&gt; &#123; while (true) &#123; await_signal.producer(); try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;).start(); &#125; System.out.println("-----------------"); for (int i = 0; i &lt; 3; i++) &#123; new Thread(() -&gt; &#123; while (true) &#123; await_signal.consumer(); try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;).start(); &#125; &#125; static void producer() &#123; int size = 0; try &#123; lock1.lock(); while (linkedList.size() == MAX_CAPACITY) &#123; producer_condition.await(); &#125; size = linkedList.size(); long value = System.currentTimeMillis(); System.out.println(Thread.currentThread().getName() + ":-------PRODUCER-------- " + value); linkedList.addLast(value); producer_condition.signal(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; lock1.unlock(); &#125; if(size == 0)&#123; try&#123; lock2.lock(); consumer_condition.signal(); &#125;finally &#123; lock2.unlock(); &#125; &#125; &#125; static void consumer() &#123; int size = 0; try &#123; lock2.lock(); while (linkedList.size() == 0) &#123; consumer_condition.await(); &#125; size = linkedList.size(); long value = linkedList.pop(); System.out.println(Thread.currentThread().getName() + "::-------CONSUMER-------- " + value); consumer_condition.signal(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; lock2.unlock(); &#125; if(size == MAX_CAPACITY)&#123; try&#123; lock1.lock(); producer_condition.signal(); &#125;finally &#123; lock1.unlock(); &#125; &#125; &#125;&#125; ÊÑüÊÖ®‰∏ÄÂè•ÔºåÊ∫êÁ†ÅÂÜôÁöÑÁúüÁöÑÁ≤æÂ¶ôÂïäÔºÅËØªÊ∫êÁ†ÅÁúüÁöÑËÆ©Ëá™Â∑±Â≠¶Âà∞‰∫ÜÂæàÂ§öÔºåÂ∞±ÊòØÊúâÁÇπÂèØÊÉúÁé∞Âú®Ëøò‰∏çÂ§™ÊáÇËÆæËÆ°Ê®°ÂºèÔºåÂØºËá¥ÂæàÂ§öÂæàÂ•ΩÁöÑÊÄùÊÉ≥ËøòÊ≤°ÊúâÂ≠¶‰ºö„ÄÇ„ÄÇ„ÄÇ 3. BlockingQueue ÂÆûÁé∞Âà´‰∫∫ÂÜôÁöÑÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768package Â§öÁ∫øÁ®ã.Producer_Consumer;import java.util.Random;import java.util.concurrent.BlockingQueue;import java.util.concurrent.ExecutorService;import java.util.concurrent.Executors;import java.util.concurrent.LinkedBlockingQueue;public class BlockingQueue_product_consumer &#123;&#125;class ProductorConsumer &#123; private static LinkedBlockingQueue&lt;Integer&gt; queue = new LinkedBlockingQueue&lt;&gt;(); public static void main(String[] args) &#123; ExecutorService service = Executors.newFixedThreadPool(15); for (int i = 0; i &lt; 5; i++) &#123; service.submit(new Producer(queue)); &#125; for (int i = 0; i &lt; 10; i++) &#123; service.submit(new Consumer(queue)); &#125; &#125; static class Producer implements Runnable &#123; private BlockingQueue queue; public Producer(BlockingQueue queue) &#123; this.queue = queue; &#125; @Override public void run() &#123; try &#123; while (true) &#123; Random random = new Random(); int i = random.nextInt(); System.out.println("Áîü‰∫ßËÄÖ" + Thread.currentThread().getName() + "Áîü‰∫ßÊï∞ÊçÆ" + i); queue.put(i); &#125; &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125; static class Consumer implements Runnable &#123; private BlockingQueue queue; public Consumer(BlockingQueue queue) &#123; this.queue = queue; &#125; @Override public void run() &#123; try &#123; while (true) &#123; Integer element = (Integer) queue.take(); System.out.println("Ê∂àË¥πËÄÖ" + Thread.currentThread().getName() + "Ê≠£Âú®Ê∂àË¥πÊï∞ÊçÆ" + element); &#125; &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125; Ëá™Â∑±Êó†ËÅäÈáçÂÜô‰∏Ä‰∏™ÂêßÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748class BlockingQueue_product_consumer2 &#123; private static BlockingQueue&lt;Long&gt; blockingQueue = new LinkedBlockingQueue(5); public static void main(String[] args) &#123; System.out.println("BlockingQueue api ‰ΩøÁî®"); ExecutorService executorService = Executors.newFixedThreadPool(10); for (int i = 0; i &lt; 5; i++) &#123; executorService.execute(() -&gt; &#123; while (true) &#123; long value = 0; try &#123; value = blockingQueue.take(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; System.out.println(Thread.currentThread().getName() + "::-------CONSUMER-------- " + value); &#125; &#125;); &#125; for (int i = 0; i &lt; 5; i++) &#123; executorService.execute(() -&gt; &#123; while (true) &#123; long value = System.currentTimeMillis(); System.out.println(Thread.currentThread().getName() + "::-------PRODUCER-------- " + value); try &#123; blockingQueue.put(value); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125;); &#125; &#125;&#125;]]></content>
      <categories>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Áîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÊ®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â§öÁ∫øÁ®ãÔºàÂÖ≠Ôºâ--- Âπ∂ÂèëÂ∑•ÂÖ∑ÂåÖ]]></title>
    <url>%2F2020%2F02%2F28%2F%E5%A4%9A%E7%BA%BF%E7%A8%8B%EF%BC%88%E5%85%AD%EF%BC%89---%20%E5%B9%B6%E5%8F%91%E5%B7%A5%E5%85%B7%E5%8C%85.html</url>
    <content type="text"><![CDATA[CountDownLatch(ÂÄíËÆ°Êó∂Âô®)Âú®Â§öÁ∫øÁ®ãÂçè‰ΩúÂÆåÊàê‰∏öÂä°ÂäüËÉΩÊó∂ÔºåÊúâÊó∂ÂÄôÈúÄË¶ÅÁ≠âÂæÖÂÖ∂‰ªñÂ§ö‰∏™Á∫øÁ®ãÂÆåÊàê‰ªªÂä°‰πãÂêéÔºå‰∏ªÁ∫øÁ®ãÊâçËÉΩÁªßÁª≠ÂæÄ‰∏ãÊâßË°å‰∏öÂä°ÂäüËÉΩÔºåÂú®ËøôÁßçÁöÑ‰∏öÂä°Âú∫ÊôØ‰∏ãÔºåÈÄöÂ∏∏ÂèØ‰ª•‰ΩøÁî® Thread Á±ªÁöÑ join ÊñπÊ≥ïÔºåËÆ©‰∏ªÁ∫øÁ®ãÁ≠âÂæÖË¢´ join ÁöÑÁ∫øÁ®ãÊâßË°åÂÆå‰πãÂêéÔºå‰∏ªÁ∫øÁ®ãÊâçËÉΩÁªßÁª≠ÂæÄ‰∏ãÊâßË°å„ÄÇ ‰ΩøÁî®Á∫øÁ®ãÈó¥Ê∂àÊÅØÈÄö‰ø°Êú∫Âà∂‰πüÂèØ‰ª•ÂÆåÊàê„ÄÇ ‰ΩøÁî®Executor‰ΩìÁ≥ª‰∏≠ÁöÑ FutureTask,‰∏ªÁ∫øÁ®ãË∞ÉÁî®ÂÖ∂‰ªñÁ∫øÁ®ã get() ÊñπÊ≥ï ÂÖ∂ÂÆûÔºåjava Âπ∂ÂèëÂ∑•ÂÖ∑Á±ª‰∏≠‰∏∫Êàë‰ª¨Êèê‰æõ‰∫ÜÁ±ª‰ºº‚ÄúÂÄíËÆ°Êó∂‚ÄùËøôÊ†∑ÁöÑÂ∑•ÂÖ∑Á±ªÔºåÂèØ‰ª•ÂçÅÂàÜÊñπ‰æøÁöÑÂÆåÊàêÊâÄËØ¥ÁöÑËøôÁßç‰∏öÂä°Âú∫ÊôØ„ÄÇ ÊñπÊ≥ï 12345await() throws InterruptedException //Ë∞ÉÁî®ËØ•ÊñπÊ≥ïÁöÑÁ∫øÁ®ãÁ≠âÂà∞ÊûÑÈÄ†ÊñπÊ≥ï‰º†ÂÖ•ÁöÑ N ÂáèÂà∞ 0 ÁöÑÊó∂ÂÄôÔºåÊâçËÉΩÁªßÁª≠ÂæÄ‰∏ãÊâßË°åÔºõawait(long timeout, TimeUnit unit) //‰∏é‰∏äÈù¢ÁöÑ await ÊñπÊ≥ïÂäüËÉΩ‰∏ÄËá¥ÔºåÂè™‰∏çËøáËøôÈáåÊúâ‰∫ÜÊó∂Èó¥ÈôêÂà∂ÔºåË∞ÉÁî®ËØ•ÊñπÊ≥ïÁöÑÁ∫øÁ®ãÁ≠âÂà∞ÊåáÂÆöÁöÑ timeout Êó∂Èó¥ÂêéÔºå‰∏çÁÆ° N ÊòØÂê¶ÂáèËá≥‰∏∫ 0ÔºåÈÉΩ‰ºöÁªßÁª≠ÂæÄ‰∏ãÊâßË°åÔºõcountDown() //‰Ωø CountDownLatch ÂàùÂßãÂÄº N Âáè 1Ôºõlong getCount() //Ëé∑ÂèñÂΩìÂâç CountDownLatch Áª¥Êä§ÁöÑÂÄºÔºõCountDownLatch() //ÂèÇÊï∞‰∏∫ÂÄíËÆ°Êó∂Êï∞Èáè ‰∏∫‰∫ÜËÉΩÂ§üÁêÜËß£ CountDownLatchÔºå‰∏æ‰∏Ä‰∏™ÂæàÈÄö‰øóÁöÑ‰æãÂ≠êÔºåËøêÂä®ÂëòËøõË°åË∑ëÊ≠•ÊØîËµõÊó∂ÔºåÂÅáËÆæÊúâ 6 ‰∏™ËøêÂä®ÂëòÂèÇ‰∏éÊØîËµõÔºåË£ÅÂà§ÂëòÂú®ÁªàÁÇπ‰ºö‰∏∫Ëøô 6 ‰∏™ËøêÂä®ÂëòÂàÜÂà´ËÆ°Êó∂ÔºåÂèØ‰ª•ÊÉ≥Ë±°ÊØèÂΩì‰∏Ä‰∏™ËøêÂä®ÂëòÂà∞ËææÁªàÁÇπÁöÑÊó∂ÂÄôÔºåÂØπ‰∫éË£ÅÂà§ÂëòÊù•ËØ¥Â∞±Â∞ë‰∫Ü‰∏Ä‰∏™ËÆ°Êó∂‰ªªÂä°„ÄÇÁõ¥Âà∞ÊâÄÊúâËøêÂä®ÂëòÈÉΩÂà∞ËææÁªàÁÇπ‰∫ÜÔºåË£ÅÂà§ÂëòÁöÑ‰ªªÂä°‰πüÊâçÂÆåÊàê„ÄÇËøô 6 ‰∏™ËøêÂä®ÂëòÂèØ‰ª•Á±ªÊØîÊàê 6 ‰∏™Á∫øÁ®ãÔºåÂΩìÁ∫øÁ®ãË∞ÉÁî® CountDownLatch.countDown ÊñπÊ≥ïÊó∂Â∞±‰ºöÂØπËÆ°Êï∞Âô®ÁöÑÂÄºÂáè‰∏ÄÔºåÁõ¥Âà∞ËÆ°Êï∞Âô®ÁöÑÂÄº‰∏∫ 0 ÁöÑÊó∂ÂÄôÔºåË£ÅÂà§ÂëòÔºàË∞ÉÁî® await ÊñπÊ≥ïÁöÑÁ∫øÁ®ãÔºâÊâçËÉΩÁªßÁª≠ÂæÄ‰∏ãÊâßË°å„ÄÇ Demo1234567891011121314151617181920212223242526272829303132333435package Â§öÁ∫øÁ®ã.Âπ∂ÂèëÂ∑•ÂÖ∑ÂåÖ;import java.util.concurrent.CountDownLatch;import java.util.concurrent.ExecutorService;import java.util.concurrent.Executors;import java.util.concurrent.TimeUnit;public class CountDownLatchDemo &#123; private static CountDownLatch startSignal = new CountDownLatch(1); //Áî®Êù•Ë°®Á§∫Ë£ÅÂà§ÂëòÈúÄË¶ÅÁª¥Êä§ÁöÑÊòØ6‰∏™ËøêÂä®Âëò private static CountDownLatch endSignal = new CountDownLatch(6); public static void main(String[] args) throws InterruptedException &#123; ExecutorService executorService = Executors.newFixedThreadPool(6); for (int i = 0; i &lt; 6; i++) &#123; executorService.execute(() -&gt; &#123; try &#123; System.out.println(Thread.currentThread().getName() + " ËøêÂä®ÂëòÁ≠âÂæÖË£ÅÂà§ÂëòÂìçÂì®ÔºÅÔºÅÔºÅ"); startSignal.await(); System.out.println(Thread.currentThread().getName() + "Ê≠£Âú®ÂÖ®ÂäõÂÜ≤Âà∫"); System.out.println(Thread.currentThread().getName() + " Âà∞ËææÁªàÁÇπ"); endSignal.countDown(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;); &#125; TimeUnit.SECONDS.sleep(3); System.out.println("Ë£ÅÂà§ÂëòÂèëÂè∑ÊñΩ‰ª§Âï¶ÔºÅÔºÅÔºÅ"); startSignal.countDown(); endSignal.await(); System.out.println("ÊâÄÊúâËøêÂä®ÂëòÂà∞ËææÁªàÁÇπÔºåÊØîËµõÁªìÊùüÔºÅ"); executorService.shutdown(); &#125;&#125; CyclicBarrier(Âæ™ÁéØÊ†ÖÊ†è)CyclicBarrier ‰πüÊòØ‰∏ÄÁßçÂ§öÁ∫øÁ®ãÂπ∂ÂèëÊéßÂà∂ÁöÑÂÆûÁî®Â∑•ÂÖ∑ÔºåÂíå CountDownLatch ‰∏ÄÊ†∑ÂÖ∑ÊúâÁ≠âÂæÖËÆ°Êï∞ÁöÑÂäüËÉΩÔºå‰ΩÜÊòØÁõ∏ÊØî‰∫é CountDownLatch ÂäüËÉΩÊõ¥Âä†Âº∫Â§ß„ÄÇ Âæ™ÁéØÊ†ÖÊ†èÔºå‰πüÂ∞±ÊòØÊúâ‰∏Ä‰∏™‰∏¥ÁïåÁÇπÔºåÊâÄÊúâ‰∫∫Âà∞‰∫ÜËøô‰∏™‰∏¥ÁïåÁÇπÔºåÊâçÂèØ‰ª•‰∏ÄËµ∑ÁªßÁª≠Â∑•‰ΩúÔºåÁÑ∂ÂêéÂÜçÁ≠â‰∏ã‰∏ÄÊ¨°ÊâÄÊúâ‰∫∫ÈÉΩÂà∞Ëøô‰∏™‰∏¥ÁïåÁÇπÔºåÁªßÁª≠Â∑•‰Ωú‚Ä¶Â¶ÇÊ≠§Âæ™ÁéØ‚Ä¶ Demo123456789101112131415161718192021222324252627282930package Â§öÁ∫øÁ®ã.Âπ∂ÂèëÂ∑•ÂÖ∑ÂåÖ;import java.util.concurrent.*;public class CyclicBarrierDemo &#123; //ÊåáÂÆöÂøÖÈ°ªÊúâ6‰∏™ËøêÂä®ÂëòÂà∞ËææÊâçË°å private static CyclicBarrier barrier = new CyclicBarrier(6, () -&gt; &#123; // ÊØèÊ¨°Âà∞‰∫ÜËøô‰∏™‰∏¥ÁïåÁÇπÔºåÊâÄÊúâÁ∫øÁ®ãÈÉΩÂøÖÈ°ªÂÅú‰∏ã„ÄÇ System.out.println("Ë£ÅÂà§ÂëòÂèëÂè∑ÊñΩ‰ª§Âï¶ÔºÅÔºÅÔºÅ"); &#125;); public static void main(String[] args) &#123; System.out.println("ËøêÂä®ÂëòÂáÜÂ§áËøõÂú∫ÔºåÂÖ®Âú∫Ê¨¢Âëº............"); ExecutorService service = Executors.newFixedThreadPool(6); for (int i = 0; i &lt; 6; i++) &#123; service.execute(() -&gt;&#123; try &#123; System.out.println(Thread.currentThread().getName() + "ËøêÂä®ÂëòÁ≠âÂæÖË£ÅÂà§ÂëòÂìçÂì®ÔºÅÔºÅÔºÅ"); barrier.await(); System.out.println(Thread.currentThread().getName() + "ËøêÂä®ÂëòÂá∫Âèë"); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; catch (BrokenBarrierException e) &#123; e.printStackTrace(); &#125; &#125;); &#125; service.shutdown(); &#125;&#125; CountDownLatch ‰∏é CyclicBarrier ÁöÑÊØîËæÉCountDownLatch ‰∏é CyclicBarrier ÈÉΩÊòØÁî®‰∫éÊéßÂà∂Âπ∂ÂèëÁöÑÂ∑•ÂÖ∑Á±ªÔºåÈÉΩÂèØ‰ª•ÁêÜËß£ÊàêÁª¥Êä§ÁöÑÂ∞±ÊòØ‰∏Ä‰∏™ËÆ°Êï∞Âô®Ôºå‰ΩÜÊòØËøô‰∏§ËÄÖËøòÊòØÂêÑÊúâ‰∏çÂêå‰æßÈáçÁÇπÁöÑÔºö CountDownLatch ‰∏ÄËà¨Áî®‰∫éÊüê‰∏™Á∫øÁ®ã A Á≠âÂæÖËã•Âπ≤‰∏™ÂÖ∂‰ªñÁ∫øÁ®ãÊâßË°åÂÆå‰ªªÂä°‰πãÂêéÔºåÂÆÉÊâçÊâßË°åÔºåÊúÄÈáçË¶ÅÁöÑÊòØÊúâ‰∏Ä‰∏™‰∏ªÂøÉÈ™®Ôºå‰∏ªÁ∫øÁ®ãÊòØÊ†∏ÂøÉÔºå‰ªñÁ≠âÊâÄÊúâ‰∫∫Âπ≤ÂÆåÔºõËÄå CyclicBarrier ‰∏ÄËà¨Áî®‰∫é‰∏ÄÁªÑÁ∫øÁ®ã‰∫íÁõ∏Á≠âÂæÖËá≥Êüê‰∏™Áä∂ÊÄÅÔºåÁÑ∂ÂêéËøô‰∏ÄÁªÑÁ∫øÁ®ãÂÜçÂêåÊó∂ÊâßË°åÔºõCountDownLatch Âº∫Ë∞É‰∏Ä‰∏™Á∫øÁ®ãÁ≠âÂ§ö‰∏™Á∫øÁ®ãÂÆåÊàêÊüê‰ª∂‰∫ãÊÉÖ„ÄÇCyclicBarrier ÊòØÂ§ö‰∏™Á∫øÁ®ã‰∫íÁ≠âÔºåÁ≠âÂ§ßÂÆ∂ÈÉΩÂÆåÊàêÔºåÂÜçÊê∫ÊâãÂÖ±Ëøõ„ÄÇÊâÄ‰ª•‰∏§ËÄÖ await ÁöÑÂú∞Êñπ‰∏ç‰∏ÄÊ†∑ÔºåÂâçËÄÖÊòØÂØπ‰∏ªÁ∫øÁ®ãËøõË°å awaitÔºåËÄåÂêéËÄÖÂàôÊòØÊâÄÊúâ‰∏ÄËµ∑Â∑•‰ΩúÁöÑËøõË°å await„ÄÇ CountDownLatch ÊñπÊ≥ïÊØîËæÉÂ∞ëÔºåÊìç‰ΩúÊØîËæÉÁÆÄÂçïÔºåËÄå CyclicBarrier Êèê‰æõÁöÑÊñπÊ≥ïÊõ¥Â§öÔºåÊØîÂ¶ÇËÉΩÂ§üÈÄöËøá getNumberWaiting()ÔºåisBroken()Ëøô‰∫õÊñπÊ≥ïËé∑ÂèñÂΩìÂâçÂ§ö‰∏™Á∫øÁ®ãÁöÑÁä∂ÊÄÅÔºåÂπ∂‰∏î CyclicBarrier ÁöÑÊûÑÈÄ†ÊñπÊ≥ïÂèØ‰ª•‰º†ÂÖ• barrierActionÔºåÊåáÂÆöÂΩìÊâÄÊúâÁ∫øÁ®ãÈÉΩÂà∞ËææÊó∂ÊâßË°åÁöÑ‰∏öÂä°ÂäüËÉΩ„ÄÇ Semaphore(‰ø°Âè∑Èáè)‰ø°Âè∑ÈáèÔºåÁúãÊ∫êÁ†ÅÂ∞±ÊòØÂü∫‰∫é AQS ÂÆûÁé∞ÁöÑÔºåÁ±ª‰ºº‰∫éÂÖ±‰∫´ÈîÅÔºåÂè™‰∏çËøáËøô‰∏™ÂÖ±‰∫´ÊòØÊúâÈôêÂà∂ÁöÑÂÖ±‰∫´ÔºåÂÆÉËÉΩÂ§üÊéßÂà∂ÂÖ±‰∫´ÁöÑÁ∫øÁ®ãÊï∞Èáè„ÄÇSemaphore Â∞±Áõ∏ÂΩì‰∫é‰∏Ä‰∏™ËÆ∏ÂèØËØÅÔºåÁ∫øÁ®ãÈúÄË¶ÅÂÖàÈÄöËøá acquire ÊñπÊ≥ïËé∑ÂèñËØ•ËÆ∏ÂèØËØÅÔºåËØ•Á∫øÁ®ãÊâçËÉΩÁªßÁª≠ÂæÄ‰∏ãÊâßË°åÔºåÂê¶ÂàôÂè™ËÉΩÂú®ËØ•ÊñπÊ≥ïÂá∫ÈòªÂ°ûÁ≠âÂæÖ„ÄÇÂΩìÊâßË°åÂÆå‰∏öÂä°ÂäüËÉΩÂêéÔºåÈúÄË¶ÅÈÄöËøárelease()ÊñπÊ≥ïÂ∞ÜËÆ∏ÂèØËØÅÂΩíËøòÔºå‰ª•‰æøÂÖ∂‰ªñÁ∫øÁ®ãËÉΩÂ§üËé∑ÂæóËÆ∏ÂèØËØÅÁªßÁª≠ÊâßË°å„ÄÇ Semaphore ÂèØ‰ª•Áî®‰∫éÂÅöÊµÅÈáèÊéßÂà∂ÔºåÁâπÂà´ÊòØÂÖ¨ÂÖ±ËµÑÊ∫êÊúâÈôêÁöÑÂ∫îÁî®Âú∫ÊôØÔºåÊØîÂ¶ÇÊï∞ÊçÆÂ∫ìËøûÊé•„ÄÇÂÅáÂ¶ÇÊúâÂ§ö‰∏™Á∫øÁ®ãËØªÂèñÊï∞ÊçÆÂêéÔºåÈúÄË¶ÅÂ∞ÜÊï∞ÊçÆ‰øùÂ≠òÂú®Êï∞ÊçÆÂ∫ì‰∏≠ÔºåËÄåÂèØÁî®ÁöÑÊúÄÂ§ßÊï∞ÊçÆÂ∫ìËøûÊé•Âè™Êúâ 10 ‰∏™ÔºåËøôÊó∂ÂÄôÂ∞±ÈúÄË¶Å‰ΩøÁî® Semaphore Êù•ÊéßÂà∂ËÉΩÂ§üÂπ∂ÂèëËÆøÈóÆÂà∞Êï∞ÊçÆÂ∫ìËøûÊé•ËµÑÊ∫êÁöÑÁ∫øÁ®ã‰∏™Êï∞ÊúÄÂ§öÂè™Êúâ 10 ‰∏™„ÄÇÂú®ÈôêÂà∂ËµÑÊ∫ê‰ΩøÁî®ÁöÑÂ∫îÁî®Âú∫ÊôØ‰∏ãÔºåSemaphore ÊòØÁâπÂà´ÂêàÈÄÇÁöÑ„ÄÇ ËøôÈáåÁöÑÈòüÂàóÂ∞±ÊòØÂ∞±ÊòØÂæàÁÆÄÂçïÁöÑÁî® ArrayList ËøõË°åÂ≠òÂÇ®ÔºåÂ≠òÂÇ®ÈÇ£‰∫õÁ≠âÂæÖËÆ∏ÂèØËØÅÁöÑÁ∫øÁ®ãÔºåÊ≤°ÊúâÈòªÂ°ûÁÑ∂ÂêéÂä†ÂÖ•ÈòüÂàóÁÑ∂ÂêéÂî§ÈÜíËøô‰πàÈ∫ªÁÉ¶‚Ä¶ 123456789101112131415161718192021222324252627282930package Â§öÁ∫øÁ®ã.Âπ∂ÂèëÂ∑•ÂÖ∑ÂåÖ;import java.util.concurrent.ExecutorService;import java.util.concurrent.Executors;import java.util.concurrent.Semaphore;import java.util.concurrent.TimeUnit;public class SemaphoreDemo &#123; //Ë°®Á§∫ËÄÅÂ∏àÂè™Êúâ5ÊîØÁ¨î private static Semaphore semaphore = new Semaphore(5); public static void main(String[] args) &#123; //Ë°®Á§∫10‰∏™Â≠¶Áîü ExecutorService service = Executors.newFixedThreadPool(10); for (int i = 0; i &lt; 10; i++) &#123; service.execute(() -&gt; &#123; try &#123; semaphore.acquire(); System.out.println(Thread.currentThread().getName() + " ÂêåÂ≠¶Ëé∑ÂèñÂà∞Á¨îÔºåÂ°´Ë°®Ê†º"); TimeUnit.SECONDS.sleep(3); semaphore.release(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;); &#125; service.shutdown(); &#125;&#125; Exchanger (‰∫§Êç¢Âô®)ÂèØ‰ª•Áõ¥Êé•Âú®Êüê‰∏™‰∏¥ÁïåÁÇπÔºå‰∏§‰∏™Á∫øÁ®ã‰∫§Êç¢Êï∞ÊçÆÔºå‰∏çÈúÄË¶Å‰ΩøÁî® wait/notify ÊàñËÄÖÊòØ condition Êú∫Âà∂„ÄÇ ÂÆÉÊèê‰æõ‰∫Ü‰∏Ä‰∏™‰∫§Êç¢ÁöÑÂêåÊ≠•ÁÇπÔºåÂú®Ëøô‰∏™ÂêåÊ≠•ÁÇπ‰∏§‰∏™Á∫øÁ®ãËÉΩÂ§ü‰∫§Êç¢Êï∞ÊçÆ„ÄÇÂÖ∑‰Ωì‰∫§Êç¢Êï∞ÊçÆÊòØÈÄöËøá exchange ÊñπÊ≥ïÊù•ÂÆûÁé∞ÁöÑÔºåÂ¶ÇÊûú‰∏Ä‰∏™Á∫øÁ®ãÂÖàÊâßË°å exchange ÊñπÊ≥ïÔºåÈÇ£‰πàÂÆÉ‰ºöÂêåÊ≠•Á≠âÂæÖÂè¶‰∏Ä‰∏™Á∫øÁ®ã‰πüÊâßË°å exchange ÊñπÊ≥ïÔºåËøô‰∏™Êó∂ÂÄô‰∏§‰∏™Á∫øÁ®ãÂ∞±ÈÉΩËææÂà∞‰∫ÜÂêåÊ≠•ÁÇπÔºå‰∏§‰∏™Á∫øÁ®ãÂ∞±ÂèØ‰ª•‰∫§Êç¢Êï∞ÊçÆ„ÄÇ 123456//ÂΩì‰∏Ä‰∏™Á∫øÁ®ãÊâßË°åËØ•ÊñπÊ≥ïÁöÑÊó∂ÂÄôÔºå‰ºöÁ≠âÂæÖÂè¶‰∏Ä‰∏™Á∫øÁ®ã‰πüÊâßË°åËØ•ÊñπÊ≥ïÔºåÂõ†Ê≠§‰∏§‰∏™Á∫øÁ®ãÂ∞±ÈÉΩËææÂà∞‰∫ÜÂêåÊ≠•ÁÇπ//Â∞ÜÊï∞ÊçÆ‰∫§Êç¢ÁªôÂè¶‰∏Ä‰∏™Á∫øÁ®ãÔºåÂêåÊó∂ËøîÂõûËé∑ÂèñÁöÑÊï∞ÊçÆV exchange(V x) throws InterruptedException//Âêå‰∏ä‰∏Ä‰∏™ÊñπÊ≥ïÂäüËÉΩÂü∫Êú¨‰∏ÄÊ†∑ÔºåÂè™‰∏çËøáËøô‰∏™ÊñπÊ≥ïÂêåÊ≠•Á≠âÂæÖÁöÑÊó∂ÂÄôÔºåÂ¢ûÂä†‰∫ÜË∂ÖÊó∂Êó∂Èó¥V exchange(V x, long timeout, TimeUnit unit)throws InterruptedException, TimeoutException 1234567891011121314151617181920212223242526272829303132333435363738package Â§öÁ∫øÁ®ã.Âπ∂ÂèëÂ∑•ÂÖ∑ÂåÖ;import java.util.concurrent.Exchanger;import java.util.concurrent.ExecutorService;import java.util.concurrent.Executors;import java.util.concurrent.TimeUnit;public class ExchangerDemo &#123; private static Exchanger&lt;String&gt; exchanger = new Exchanger(); public static void main(String[] args) &#123; //‰ª£Ë°®Áî∑ÁîüÂíåÂ•≥Áîü ExecutorService service = Executors.newFixedThreadPool(2); service.execute(() -&gt; &#123; try &#123; //Áî∑ÁîüÂØπÂ•≥ÁîüËØ¥ÁöÑËØù String girl = exchanger.exchange("ÊàëÂÖ∂ÂÆûÊöóÊÅã‰Ω†Âæà‰πÖ‰∫Ü......"); System.out.println("Â•≥Â≠©ÂÑøËØ¥Ôºö" + girl); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;); service.execute(() -&gt; &#123; try &#123; System.out.println("Â•≥ÁîüÊÖ¢ÊÖ¢ÁöÑ‰ªéÊïôÂÆ§‰Ω†Ëµ∞Âá∫Êù•......"); TimeUnit.SECONDS.sleep(3); //Áî∑ÁîüÂØπÂ•≥ÁîüËØ¥ÁöÑËØù String boy = exchanger.exchange("Êàë‰πüÂæàÂñúÊ¨¢‰Ω†......"); System.out.println("Áî∑Â≠©ÂÑøËØ¥Ôºö" + boy); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;); &#125;&#125; 123Â•≥ÁîüÊÖ¢ÊÖ¢ÁöÑ‰ªéÊïôÂÆ§‰Ω†Ëµ∞Âá∫Êù•......Áî∑Â≠©ÂÑøËØ¥ÔºöÊàëÂÖ∂ÂÆûÊöóÊÅã‰Ω†Âæà‰πÖ‰∫Ü......Â•≥Â≠©ÂÑøËØ¥ÔºöÊàë‰πüÂæàÂñúÊ¨¢‰Ω†...... ‰∏§Âè•ËØù‰∫§Êç¢‰∫ÜÔºåËøô‰∏™ÁúüÁöÑÁâõÈÄºÔºÅ]]></content>
      <categories>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Âπ∂ÂèëÂ∑•ÂÖ∑ÂåÖ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â§öÁ∫øÁ®ãÔºà‰∫îÔºâ--- FutureTask]]></title>
    <url>%2F2020%2F02%2F28%2F%E5%A4%9A%E7%BA%BF%E7%A8%8B%EF%BC%88%E4%BA%94%EF%BC%89---%20FutureTask.html</url>
    <content type="text"><![CDATA[ËΩ¨Ëá™Ôºöhttp://www.ideabuffer.cn/2017/04/06/FutureTaskÊ∫êÁ†ÅËß£Êûê/ FutureTask‰ªãÁªçFutureTaskÊòØ‰∏ÄÁßçÂèØ‰ª•ÂèñÊ∂àÁöÑÂºÇÊ≠•ÁöÑËÆ°ÁÆó‰ªªÂä°„ÄÇÂÆÉÁöÑËÆ°ÁÆóÊòØÈÄöËøáCallableÂÆûÁé∞ÁöÑÔºåÂèØ‰ª•ÊääÂÆÉÁêÜËß£‰∏∫ÊòØÂèØ‰ª•ËøîÂõûÁªìÊûúÁöÑRunnable„ÄÇ ‰ΩøÁî®FutureTaskÁöÑ‰ºòÂäøÊúâÔºö ÂèØ‰ª•Ëé∑ÂèñÁ∫øÁ®ãÊâßË°åÂêéÁöÑËøîÂõûÁªìÊûúÔºõ Êèê‰æõ‰∫ÜË∂ÖÊó∂ÊéßÂà∂ÂäüËÉΩ„ÄÇ ÂÆÉÂÆûÁé∞‰∫ÜRunnableÊé•Âè£ÂíåFutureÊé•Âè£Ôºö ‰ªÄ‰πàÊòØÂºÇÊ≠•ËÆ°ÁÆóÂë¢Ôºü‰πüÂ∞±ÊòØËØ¥ÔºåÂú®ËÆ©ËØ•‰ªªÂä°ÊâßË°åÊó∂Ôºå‰∏çÈúÄË¶Å‰∏ÄÁõ¥Á≠âÂæÖÂÖ∂ËøêË°åÁªìÊùüËøîÂõûÁªìÊûúÔºåËÄåÊòØÂèØ‰ª•ÂÖàÂéªÂ§ÑÁêÜÂÖ∂‰ªñÁöÑ‰∫ãÊÉÖÔºåÁÑ∂ÂêéÂÜçËé∑ÂèñËøîÂõûÁªìÊûú„ÄÇ‰æãÂ¶Ç‰Ω†ÊÉ≥‰∏ãËΩΩ‰∏Ä‰∏™ÂæàÂ§ßÁöÑÊñá‰ª∂ÔºåËøôÊó∂ÂæàËÄóÊó∂ÁöÑÊìç‰ΩúÔºåÊ≤°ÂøÖË¶Å‰∏ÄÁõ¥Á≠âÂæÖÁùÄÊñá‰ª∂‰∏ãËΩΩÂÆåÔºå‰Ω†ÂèØ‰ª•ÂÖàÂéªÂêÉ‰∏™È•≠ÔºåÁÑ∂ÂêéÂÜçÂõûÊù•Áúã‰∏ãÊñá‰ª∂ÊòØÂê¶‰∏ãËΩΩÂÆåÊàêÔºåÂ¶ÇÊûú‰∏ãËΩΩÂÆåÊàêÂ∞±ÂèØ‰ª•‰ΩøÁî®‰∫ÜÔºåÂê¶ÂàôËøòÈúÄË¶ÅÁªßÁª≠Á≠âÂæÖ„ÄÇ FutureTaskÁöÑÂÆûÁé∞FutureTaskÁöÑÁä∂ÊÄÅFutureTaskÂÜÖÈÉ®ÊúâËøôÊ†∑Âá†ÁßçÁä∂ÊÄÅÔºö 1234567private static final int NEW = 0;private static final int COMPLETING = 1;private static final int NORMAL = 2;private static final int EXCEPTIONAL = 3;private static final int CANCELLED = 4;private static final int INTERRUPTING = 5;private static final int INTERRUPTED = 6; ÁúãÂêçÂ≠óÂ∫îËØ•ÂæàÂ•ΩÁêÜËß£‰∫ÜÔºåÂΩìÂàõÂª∫‰∏Ä‰∏™FutureTaskÂØπË±°ÊòØÔºåÂàùÂßãÁöÑÁä∂ÊÄÅÊòØNEWÔºåÂú®ËøêË°åÊó∂Áä∂ÊÄÅ‰ºöËΩ¨Êç¢ÔºåÊúâ4‰∏≠Áä∂ÊÄÅÁöÑËΩ¨Êç¢ËøáÁ®ãÔºö NEW -&gt; COMPLETING -&gt; NORMALÔºöÊ≠£Â∏∏ÊâßË°åÂπ∂ËøîÂõûÔºõ NEW -&gt; COMPLETING -&gt; EXCEPTIONALÔºöÊâßË°åËøáÁ®ã‰∏≠Âá∫Áé∞‰∫ÜÂºÇÂ∏∏Ôºõ NEW -&gt; CANCELLEDÔºõÊâßË°åÂâçË¢´ÂèñÊ∂àÔºõ NEW -&gt; INTERRUPTING -&gt; INTERRUPTEDÔºöÂèñÊ∂àÊó∂Ë¢´‰∏≠Êñ≠„ÄÇ ‰ΩøÁî®FutureTask‰∏ãÈù¢Áúã‰∏Ä‰∏ãÂÖ∑‰ΩìÁöÑ‰ΩøÁî®ËøáÁ®ãÔºö 123456789101112131415161718192021public class FutureTaskTest &#123; public static void main(String[] args) throws ExecutionException, InterruptedException &#123; ExecutorService executor = Executors.newSingleThreadExecutor(); FutureTask&lt;Integer&gt; future = new FutureTask&lt;&gt;(new Callable&lt;Integer&gt;() &#123; @Override public Integer call() throws Exception &#123; int result = 0; for (int i = 0; i &lt; 100; i++) &#123; result += i; &#125; return result; &#125; &#125;); executor.execute(future); System.out.println(future.get()); &#125;&#125; FutureTaskÂÜÖÈÉ®ÁªìÊûÑ12345678910111213141516171819202122232425262728293031323334353637383940public class FutureTask&lt;V&gt; implements RunnableFuture&lt;V&gt; &#123; private volatile int state; private static final int NEW = 0; private static final int COMPLETING = 1; private static final int NORMAL = 2; private static final int EXCEPTIONAL = 3; private static final int CANCELLED = 4; private static final int INTERRUPTING = 5; private static final int INTERRUPTED = 6; /** The underlying callable; nulled out after running */ private Callable&lt;V&gt; callable; /** The result to return or exception to throw from get() */ private Object outcome; // non-volatile, protected by state reads/writes /** ÊâßË°åcallableÁöÑÁ∫øÁ®ã **/ private volatile Thread runner; /** * Treiber stack of waiting threads * ‰ΩøÁî®TreiberÁÆóÊ≥ïÂÆûÁé∞ÁöÑÊó†ÈòªÂ°ûÁöÑStackÔºå * Áî®‰∫éÂ≠òÊîæÁ≠âÂæÖÁöÑÁ∫øÁ®ã */ private volatile WaitNode waiters; static final class WaitNode &#123; volatile Thread thread; volatile WaitNode next; WaitNode() &#123; thread = Thread.currentThread(); &#125; &#125; public V get() throws InterruptedException, ExecutionException &#123; ... &#125; public V get(long timeout, TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException &#123; ... &#125; ... ËøôÈáåÁöÑwaitersÁêÜËß£‰∏∫‰∏Ä‰∏™stackÔºåÂõ†‰∏∫Âú®Ë∞ÉÁî®getÊñπÊ≥ïÊó∂‰ªªÂä°ÂèØËÉΩËøòÊ≤°ÊúâÊâßË°åÂÆåÔºåËøôÊó∂ÈúÄË¶ÅÂ∞ÜË∞ÉÁî®getÊñπÊ≥ïÁöÑÁ∫øÁ®ãÊîæÂÖ•waiters‰∏≠„ÄÇ ÊúÄÈáçË¶ÅÁöÑ‰∏§‰∏™getÊñπÊ≥ïÔºåÁî®‰∫éËé∑ÂèñËøîÂõûÁªìÊûúÔºåÁ¨¨‰∫åÁßçÊèê‰æõ‰∫ÜË∂ÖÊó∂ÊéßÂà∂ÂäüËÉΩ„ÄÇ FutureTaskÊûÑÈÄ†ÊñπÊ≥ïFutureTaskÊúâ‰∏§‰∏™ÊûÑÈÄ†ÊñπÊ≥ïÔºö 1234567891011public FutureTask(Callable&lt;V&gt; callable) &#123; if (callable == null) throw new NullPointerException(); this.callable = callable; this.state = NEW; // ensure visibility of callable&#125;public FutureTask(Runnable runnable, V result) &#123; this.callable = Executors.callable(runnable, result); this.state = NEW; // ensure visibility of callable&#125; Á¨¨‰∫åÁßçÊûÑÈÄ†ÊñπÊ≥ï‰º†ÂÖ•‰∏Ä‰∏™RunnableÂØπË±°Âíå‰∏Ä‰∏™ËøîÂõûÂÄºÂØπË±°ÔºåÂõ†‰∏∫RunnableÊòØÊ≤°ÊúâËøîÂõûÂÄºÁöÑÔºåÊâÄ‰ª•Ë¶ÅÈÄöËøáresultÂèÇÊï∞Âú®ÊâßË°åÂÆå‰πãÂêéËøîÂõûÁªìÊûú„ÄÇ runÊñπÊ≥ïFutureTaskÂÆûÁé∞‰∫ÜRunnableÊé•Âè£ÔºåÊâÄ‰ª•ÈúÄË¶ÅÂÆûÁé∞runÊñπÊ≥ïÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546public void run() &#123; /* * È¶ñÂÖàÂà§Êñ≠Áä∂ÊÄÅÔºåÂ¶ÇÊûú‰∏çÊòØÂàùÂßãÁä∂ÊÄÅÔºåËØ¥Êòé‰ªªÂä°Â∑≤ÁªèË¢´ÊâßË°åÊàñÂèñÊ∂àÔºõ * runnerÊòØFutureTaskÁöÑ‰∏Ä‰∏™Â±ûÊÄßÔºåÁî®‰∫é‰øùÂ≠òÊâßË°å‰ªªÂä°ÁöÑÁ∫øÁ®ãÔºå * Â¶ÇÊûú‰∏ç‰∏∫Á©∫ÂàôË°®Á§∫Â∑≤ÁªèÊúâÁ∫øÁ®ãÊ≠£Âú®ÊâßË°åÔºåËøôÈáåÁî®CASÊù•ËÆæÁΩÆÔºåÂ§±Ë¥•ÂàôËøîÂõû„ÄÇ */ if (state != NEW || !UNSAFE.compareAndSwapObject(this, runnerOffset, null, Thread.currentThread())) return; try &#123; Callable&lt;V&gt; c = callable; // Âè™ÊúâÂàùÂßãÁä∂ÊÄÅÊâç‰ºöÊâßË°å if (c != null &amp;&amp; state == NEW) &#123; V result; boolean ran; try &#123; // ÊâßË°å‰ªªÂä° result = c.call(); // Â¶ÇÊûúÊ≤°Âá∫Áé∞ÂºÇÂ∏∏ÔºåÂàôËØ¥ÊòéÊâßË°åÊàêÂäü‰∫Ü ran = true; &#125; catch (Throwable ex) &#123; result = null; ran = false; // ËÆæÁΩÆÂºÇÂ∏∏ setException(ex); &#125; // Â¶ÇÊûúÊâßË°åÊàêÂäüÔºåÂàôËÆæÁΩÆËøîÂõûÁªìÊûú if (ran) set(result); &#125; &#125; finally &#123; // runner must be non-null until state is settled to // prevent concurrent calls to run() // Êó†ËÆ∫ÊòØÂê¶ÊâßË°åÊàêÂäüÔºåÊäärunnerËÆæÁΩÆ‰∏∫null runner = null; // state must be re-read after nulling runner to prevent // leaked interrupts int s = state; // Â¶ÇÊûúË¢´‰∏≠Êñ≠ÔºåÂàôËØ¥ÊòéË∞ÉÁî®ÁöÑcancel(true)Ôºå // ËøôÈáåË¶Å‰øùËØÅÂú®cancelÊñπÊ≥ï‰∏≠ÊäästateËÆæÁΩÆ‰∏∫INTERRUPTED // Âê¶ÂàôÂèØËÉΩÂú®cancelÊñπÊ≥ï‰∏≠ËøòÊ≤°ÊâßË°å‰∏≠Êñ≠ÔºåÈÄ†Êàê‰∏≠Êñ≠ÁöÑÊ≥ÑÈú≤ if (s &gt;= INTERRUPTING) handlePossibleCancellationInterrupt(s); &#125;&#125; ÊÄªÁªì‰∏Ä‰∏ãrunÊñπÊ≥ïÁöÑÊâßË°åËøáÁ®ã Âè™Êúâstate‰∏∫NEWÁöÑÊó∂ÂÄôÊâçÊâßË°å‰ªªÂä°Ôºõ ÊâßË°åÂâçË¶ÅËÆæÁΩÆrunner‰∏∫ÂΩìÂâçÁ∫øÁ®ãÔºå‰ΩøÁî®CASÊù•ËÆæÁΩÆÊòØ‰∏∫‰∫ÜÈò≤Ê≠¢Á´û‰∫âÔºõ Â¶ÇÊûú‰ªªÂä°ÊâßË°åÊàêÂäüÔºå‰ªªÂä°Áä∂ÊÄÅ‰ªéNEWËΩ¨Êç¢‰∏∫COMPLETINGÔºåÂ¶ÇÊûúÊâßË°åÊ≠£Â∏∏ÔºåËÆæÁΩÆÊúÄÁªàÁä∂ÊÄÅ‰∏∫NORMALÔºõÂ¶ÇÊûúÊâßË°å‰∏≠Âá∫Áé∞‰∫ÜÂºÇÂ∏∏ÔºåËÆæÁΩÆÊúÄÁªàÁä∂ÊÄÅ‰∏∫EXCEPTIONALÔºõ Âî§ÈÜíÂπ∂Âà†Èô§Treiber Stack‰∏≠ÁöÑÊâÄÊúâËäÇÁÇπÔºõ Â¶ÇÊûúË∞ÉÁî®‰∫Ücancel(true)ÊñπÊ≥ïËøõË°å‰∫Ü‰∏≠Êñ≠ÔºåË¶ÅÁ°Æ‰øùÂú®runÊñπÊ≥ïÊâßË°åÁªìÊùüÂâçÁöÑÁä∂ÊÄÅÊòØINTERRUPTED„ÄÇ ËøôÈáåÊ∂âÂèäÂà∞3‰∏™ÊØîËæÉÈáçË¶ÅÁöÑÊñπÊ≥ïÔºösetExceptionÔºåsetÂíåhandlePossibleCancellationInterrupt„ÄÇ setExceptionÊñπÊ≥ï1234567protected void setException(Throwable t) &#123; if (UNSAFE.compareAndSwapInt(this, stateOffset, NEW, COMPLETING)) &#123; outcome = t; UNSAFE.putOrderedInt(this, stateOffset, EXCEPTIONAL); // final state finishCompletion(); &#125;&#125; Â¶ÇÊûúÂú®ÊâßË°åËøáÁ®ã‰∏≠Ôºà‰πüÂ∞±ÊòØË∞ÉÁî®callÊñπÊ≥ïÊó∂ÔºâÂá∫Áé∞‰∫ÜÂºÇÂ∏∏ÔºåÂàôË¶ÅÊääÁä∂ÊÄÅÂÖàËÆæÁΩÆ‰∏∫COMPLETINGÔºåÂ¶ÇÊûúÊàêÂäüÔºåËÆæÁΩÆoutcome = tÔºåoutcomeÂØπË±°ÊòØObjectÁ±ªÂûãÁöÑÔºåÁî®Êù•‰øùÂ≠òÂºÇÂ∏∏ÊàñËÄÖËøîÂõûÁªìÊûúÂØπË±°Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåÂú®Ê≠£Â∏∏ÁöÑÊâßË°åËøáÁ®ã‰∏≠ÔºàÊ≤°ÊúâÂºÇÂ∏∏ÔºåÊ≤°ÊúâË∞ÉÁî®cancelÊñπÊ≥ïÔºâÔºåoutcome‰øùÂ≠òÁùÄËøîÂõûÁªìÊûúÂØπË±°Ôºå‰ºöË¢´ËøîÂõûÔºåÂ¶ÇÊûúÂá∫Áé∞‰∫ÜÂºÇÂ∏∏ÊàñËÄÖ‰∏≠Êñ≠ÔºåÂàô‰∏ç‰ºöËøîÂõûÂπ∂ÊäõÂá∫ÂºÇÂ∏∏ÔºåËøô‰∏™Âú®‰ªãÁªçreportÊñπÊ≥ïÊó∂‰ºöËÆ≤Âà∞„ÄÇ Êé•ÁùÄËÆæÁΩÆÁä∂ÊÄÅ‰∏∫EXCEPTIONALÔºåËøô‰πüÊòØÊúÄÁªàÁöÑÁä∂ÊÄÅ„ÄÇ finishCompletionÊñπÊ≥ïÁ®çÂêéÂÜçÂàÜÊûê„ÄÇ setÊñπÊ≥ï1234567protected void set(V v) &#123; if (UNSAFE.compareAndSwapInt(this, stateOffset, NEW, COMPLETING)) &#123; outcome = v; UNSAFE.putOrderedInt(this, stateOffset, NORMAL); // final state finishCompletion(); &#125;&#125; ÂæàÁÆÄÂçïÔºå‰∏ésetExceptionÁ±ª‰ººÔºåÂè™‰∏çËøáËøôÈáåÁöÑoutcomeÊòØËøîÂõûÁªìÊûúÂØπË±°ÔºåÁä∂ÊÄÅÂÖàËÆæÁΩÆ‰∏∫COMPLETINGÔºåÁÑ∂ÂêéÂÜçËÆæÁΩÆ‰∏∫MORMAL„ÄÇ handlePossibleCancellationInterruptÊñπÊ≥ï1234567891011121314151617private void handlePossibleCancellationInterrupt(int s) &#123; // It is possible for our interrupter to stall before getting a // chance to interrupt us. Let's spin-wait patiently. if (s == INTERRUPTING) while (state == INTERRUPTING) Thread.yield(); // wait out pending interrupt // assert state == INTERRUPTED; // We want to clear any interrupt we may have received from // cancel(true). However, it is permissible to use interrupts // as an independent mechanism for a task to communicate with // its caller, and there is no way to clear only the // cancellation interrupt. // // Thread.interrupted();&#125; handlePossibleCancellationInterruptÊñπÊ≥ïË¶ÅÁ°Æ‰øùcancel(true)‰∫ßÁîüÁöÑ‰∏≠Êñ≠ÂèëÁîüÂú®runÊàñrunAndResetÊñπÊ≥ïÊâßË°åÁöÑËøáÁ®ã‰∏≠„ÄÇËøôÈáå‰ºöÂæ™ÁéØÁöÑË∞ÉÁî®Thread.yield()Êù•Á°Æ‰øùÁä∂ÊÄÅÂú®cancelÊñπÊ≥ï‰∏≠Ë¢´ËÆæÁΩÆ‰∏∫INTERRUPTED„ÄÇ ËøôÈáå‰∏çËÉΩÂ§üÊ∏ÖÈô§‰∏≠Êñ≠Ê†áËÆ∞ÔºåÂõ†‰∏∫‰∏çËÉΩÁ°ÆÂÆö‰∏≠Êñ≠‰∏ÄÂÆöÊù•Ëá™‰∫écancelÊñπÊ≥ï„ÄÇ finishCompletionÊñπÊ≥ï12345678910111213141516171819202122232425262728293031private void finishCompletion() &#123; // assert state &gt; COMPLETING; // ÊâßË°åËØ•ÊñπÊ≥ïÊó∂stateÂøÖÈ°ªÂ§ß‰∫éCOMPLETING // ÈÄê‰∏™Âî§ÈÜíwaiters‰∏≠ÁöÑÁ∫øÁ®ã for (WaitNode q; (q = waiters) != null;) &#123; // ËÆæÁΩÆÊ†àÈ°∂ËäÇÁÇπ‰∏∫null if (UNSAFE.compareAndSwapObject(this, waitersOffset, q, null)) &#123; for (;;) &#123; Thread t = q.thread; // Âî§ÈÜíÁ∫øÁ®ã if (t != null) &#123; q.thread = null; LockSupport.unpark(t); &#125; // Â¶ÇÊûúnext‰∏∫Á©∫ÔºåËØ¥ÊòéÊ†àÁ©∫‰∫ÜÔºåË∑≥Âá∫Âæ™ÁéØ WaitNode next = q.next; if (next == null) break; // Êñπ‰æøgcÂõûÊî∂ q.next = null; // unlink to help gc // ÈáçÊñ∞ËÆæÁΩÆÊ†àÈ°∂node q = next; &#125; break; &#125; &#125; // Èí©Â≠êÊñπÊ≥ï done(); callable = null; // to reduce footprint&#125; Âú®Ë∞ÉÁî®getÊñπÊ≥ïÊó∂ÔºåÂ¶ÇÊûú‰ªªÂä°ËøòÊ≤°ÊúâÊâßË°åÁªìÊùüÔºåÂàô‰ºöÈòªÂ°ûË∞ÉÁî®ÁöÑÁ∫øÁ®ãÔºåÁÑ∂ÂêéÊääË∞ÉÁî®ÁöÑÁ∫øÁ®ãÊîæÂÖ•waiters‰∏≠ÔºåËøôÊó∂ÔºåÂ¶ÇÊûú‰ªªÂä°ÊâßË°åÂÆåÊØïÔºå‰πüÂ∞±ÊòØË∞ÉÁî®‰∫ÜfinishCompletionÊñπÊ≥ïÔºåwaiters‰ºö‰æùÊ¨°Âá∫Ê†àÂπ∂ÈÄê‰∏™Âî§ÈÜíÂØπÂ∫îÁöÑÁ∫øÁ®ã„ÄÇ Áî±Ê≠§ÂèØ‰ª•ÊÉ≥Âà∞ÔºåWaitNode‰∏ÄÂÆöÊòØÂú®getÊñπÊ≥ï‰∏≠Ë¢´Ê∑ªÂä†Âà∞Ê†à‰∏≠ÁöÑÔºå‰∏ãÈù¢Êù•Áúã‰∏ãgetÊñπÊ≥ïÁöÑÂÆûÁé∞„ÄÇ getÊñπÊ≥ï1234567891011121314151617public V get() throws InterruptedException, ExecutionException &#123; int s = state; if (s &lt;= COMPLETING) s = awaitDone(false, 0L); return report(s);&#125;public V get(long timeout, TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException &#123; if (unit == null) throw new NullPointerException(); int s = state; if (s &lt;= COMPLETING &amp;&amp; (s = awaitDone(true, unit.toNanos(timeout))) &lt;= COMPLETING) throw new TimeoutException(); return report(s);&#125; Ëøô‰∏§‰∏™ÊñπÊ≥ïÁ±ª‰ººÔºåÈ¶ñÂÖàÂà§Êñ≠Áä∂ÊÄÅÔºåÂ¶ÇÊûús &lt;= COMPLETINGÔºåËØ¥ÊòéËøòÊòØÊú™ÂÆåÊàêÁöÑÁä∂ÊÄÅ„Äå‰∏äÊñáÊúâËÆ≤Âè™ÊúâÂΩìÁä∂ÊÄÅÂèò‰∏∫ normal/exceptional/interrupted/cancelled ÊâçÁÆóÁªìÊùü„ÄçÔºåËøôÊó∂ÈúÄË¶ÅÂ∞ÜÂΩìÂâçÁ∫øÁ®ãÊ∑ªÂä†Âà∞waiters‰∏≠Âπ∂ÈòªÂ°û„ÄÇ Á¨¨‰∫åÁßçgetÊèê‰æõ‰∫ÜË∂ÖÊó∂ÂäüËÉΩÔºåÂ¶ÇÊûúÂú®ËßÑÂÆöÊó∂Èó¥ÂÜÖ‰ªªÂä°ËøòÊú™ÊâßË°åÂÆåÊØïÊàñËÄÖÁä∂ÊÄÅËøòÊòØCOMPLETINGÔºåÂàôËé∑ÂèñÁªìÊûúË∂ÖÊó∂ÔºåÊäõÂá∫TimeoutException„ÄÇËÄåÁ¨¨‰∏ÄÁßçget‰ºö‰∏ÄÁõ¥ÈòªÂ°ûÁõ¥Âà∞state &gt; COMPLETING„ÄÇ awaitDoneÊñπÊ≥ïawaitDoneÊñπÊ≥ïÁöÑÂ∑•‰ΩúÊòØÊ†πÊçÆÁä∂ÊÄÅÊù•Âà§Êñ≠ÊòØÂê¶ËÉΩÂ§üËøîÂõûÁªìÊûúÔºåÂ¶ÇÊûú‰ªªÂä°ËøòÊú™ËÆæÁΩÆ‰∏∫ÊúÄÁªàÁä∂ÊÄÅÔºåË¶ÅÊ∑ªÂä†Âà∞waiters‰∏≠Âπ∂ÈòªÂ°ûÔºåÂê¶ÂàôËøîÂõûÁä∂ÊÄÅ„ÄÇ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647private int awaitDone(boolean timed, long nanos) throws InterruptedException &#123; // ËÆ°ÁÆóÂà∞ÊúüÊó∂Èó¥ final long deadline = timed ? System.nanoTime() + nanos : 0L; WaitNode q = null; boolean queued = false; for (;;) &#123; // Â¶ÇÊûúË¢´‰∏≠Êñ≠ÔºåÂà†Èô§ËäÇÁÇπÔºåÊäõÂá∫ÂºÇÂ∏∏ if (Thread.interrupted()) &#123; removeWaiter(q); throw new InterruptedException(); &#125; int s = state; // Â¶ÇÊûú‰ªªÂä°ÊâßË°åÂÆåÊØïÂπ∂‰∏îËÆæÁΩÆ‰∫ÜÊúÄÁªàÁä∂ÊÄÅÊàñËÄÖË¢´ÂèñÊ∂àÔºåÂàôËøîÂõû if (s &gt; COMPLETING) &#123; if (q != null) q.thread = null; return s; &#125; // s == COMPLETINGÊó∂ÈÄöËøáThread.yield();ËÆ©Ê≠•ÂÖ∂‰ªñÁ∫øÁ®ãÊâßË°åÔºå // ‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜËÆ©Áä∂ÊÄÅÊîπÂèò else if (s == COMPLETING) // cannot time out yet Thread.yield(); // ÂàõÂª∫‰∏Ä‰∏™WaitNode else if (q == null) q = new WaitNode(); // CASËÆæÁΩÆÊ†àÈ°∂ËäÇÁÇπ else if (!queued) queued = UNSAFE.compareAndSwapObject(this, waitersOffset, q.next = waiters, q); // Â¶ÇÊûúËÆæÁΩÆ‰∫ÜË∂ÖÊó∂ÔºåÂàôËÆ°ÁÆóÊòØÂê¶Â∑≤ÁªèÂà∞‰∫ÜÂºÄÂßãËÆæÁΩÆÁöÑÂà∞ÊúüÊó∂Èó¥ else if (timed) &#123; nanos = deadline - System.nanoTime(); // Â¶ÇÊûúÂ∑≤ÁªèÂà∞‰∫ÜÂà∞ÊúüÊó∂Èó¥ÔºåÂà†Èô§ËäÇÁÇπÔºåËøîÂõûÁä∂ÊÄÅ if (nanos &lt;= 0L) &#123; removeWaiter(q); return state; &#125; // ÈòªÂ°ûÂà∞Âà∞ÊúüÊó∂Èó¥ LockSupport.parkNanos(this, nanos); &#125; // Â¶ÇÊûúÊ≤°ÊúâËÆæÁΩÆË∂ÖÊó∂Ôºå‰ºö‰∏ÄÁõ¥ÈòªÂ°ûÔºåÁõ¥Âà∞Ë¢´‰∏≠Êñ≠ÊàñËÄÖË¢´Âî§ÈÜí else LockSupport.park(this); &#125;&#125; removeWaiterÊñπÊ≥ï12345678910111213141516171819202122232425262728293031private void removeWaiter(WaitNode node) &#123; if (node != null) &#123; // Â∞ÜthreadËÆæÁΩÆ‰∏∫nullÊòØÂõ†‰∏∫‰∏ãÈù¢Ë¶ÅÊ†πÊçÆthreadÊòØÂê¶‰∏∫nullÂà§Êñ≠ÊòØÂê¶Ë¶ÅÊäänodeÁßªÂá∫ node.thread = null; // ËøôÈáåËá™Êóã‰øùËØÅÂà†Èô§ÊàêÂäü retry: for (;;) &#123; // restart on removeWaiter race for (WaitNode pred = null, q = waiters, s; q != null; q = s) &#123; s = q.next; // q.thread != nullËØ¥ÊòéËØ•qËäÇÁÇπ‰∏çÈúÄË¶ÅÁßªÈô§ if (q.thread != null) pred = q; // Â¶ÇÊûúq.thread == nullÔºå‰∏îpred != nullÔºåÈúÄË¶ÅÂà†Èô§qËäÇÁÇπ else if (pred != null) &#123; // Âà†Èô§qËäÇÁÇπ pred.next = s; // pred.thread == nullÊó∂ËØ¥ÊòéÂú®Âπ∂ÂèëÊÉÖÂÜµ‰∏ãË¢´ÂÖ∂‰ªñÁ∫øÁ®ã‰øÆÊîπ‰∫ÜÔºõ // ËøîÂõûÁ¨¨‰∏Ä‰∏™forÂæ™ÁéØÈáçËØï if (pred.thread == null) // check for race continue retry; &#125; // Â¶ÇÊûúq.thread != null‰∏îpred == nullÔºåËØ¥ÊòéqÊòØÊ†àÈ°∂ËäÇÁÇπ // ËÆæÁΩÆÊ†àÈ°∂ÂÖÉÁ¥†‰∏∫sËäÇÁÇπÔºåÂ¶ÇÊûúÂ§±Ë¥•ÂàôËøîÂõûÈáçËØï else if (!UNSAFE.compareAndSwapObject(this, waitersOffset, q, s)) continue retry; &#125; break; &#125; &#125;&#125; cancelÊñπÊ≥ïcancelÊñπÊ≥ïÁî®‰∫éÂèñÊ∂à‰ªªÂä°ÔºåËøôÈáåÂèØËÉΩÊúâ‰∏§ÁßçÊÉÖÂÜµÔºå‰∏ÄÁßçÊòØ‰ªªÂä°Â∑≤ÁªèÊâßË°å‰∫ÜÔºåÂè¶‰∏ÄÁßçÊòØËøòÊú™ÊâßË°åÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324public boolean cancel(boolean mayInterruptIfRunning) &#123; if (!(state == NEW &amp;&amp; UNSAFE.compareAndSwapInt(this, stateOffset, NEW, mayInterruptIfRunning ? INTERRUPTING : CANCELLED))) return false; try &#123; // in case call to interrupt throws exception // mayInterruptIfRunningÂèÇÊï∞Ë°®Á§∫ÊòØÂê¶Ë¶ÅËøõË°å‰∏≠Êñ≠ if (mayInterruptIfRunning) &#123; try &#123; // runner‰øùÂ≠òÁùÄÂΩìÂâçÊâßË°å‰ªªÂä°ÁöÑÁ∫øÁ®ã Thread t = runner; // ‰∏≠Êñ≠Á∫øÁ®ã if (t != null) t.interrupt(); &#125; finally &#123; // final state // ËÆæÁΩÆÊúÄÁªàÁä∂ÊÄÅ‰∏∫INTERRUPTED UNSAFE.putOrderedInt(this, stateOffset, INTERRUPTED); &#125; &#125; &#125; finally &#123; finishCompletion(); &#125; return true;&#125; Á¨¨‰∏Ä‰∏™ifÂà§Êñ≠ÂèØËÉΩÊúâ‰∫õ‰∏çÂ•ΩÁêÜËß£ÔºåÂÖ∂ÂÆûÁ≠â‰ª∑‰∫éÂ¶Ç‰∏ã‰ª£Á†ÅÔºö 123if (!state == NEW || !UNSAFE.compareAndSwapInt(this, stateOffset, NEW, mayInterruptIfRunning ? INTERRUPTING : CANCELLED)) Â¶ÇÊûúÁä∂ÊÄÅ‰∏çÊòØNEWÔºåÊàñËÄÖËÆæÁΩÆÁä∂ÊÄÅ‰∏∫INTERRUPTINGÊàñCANCELLEDÂ§±Ë¥•ÔºåÂàôÂèñÊ∂àÂ§±Ë¥•ÔºåËøîÂõûfalse„ÄÇ ÁÆÄÂçïÊù•ËØ¥Êúâ‰∏Ä‰∏ã‰∏§ÁßçÊÉÖÂÜµÔºö Â¶ÇÊûúÂΩìÂâç‰ªªÂä°ËøòÊ≤°ÊúâÊâßË°åÔºåÈÇ£‰πàstate == NEWÔºåÈÇ£‰πà‰ºöÂ∞ùËØïËÆæÁΩÆÁä∂ÊÄÅÔºåÂ¶ÇÊûúËÆæÁΩÆÁä∂ÊÄÅÂ§±Ë¥•‰ºöËøîÂõûfalseÔºåË°®Á§∫ÂèñÊ∂àÂ§±Ë¥•Ôºõ Â¶ÇÊûúÂΩìÂâç‰ªªÂä°Â∑≤ÁªèË¢´ÊâßË°å‰∫ÜÔºåÈÇ£‰πàstate &gt; NEWÔºå‰πüÂ∞±ÊòØ!state == NEW‰∏∫trueÔºåÁõ¥Êé•ËøîÂõûfalse„ÄÇ ‰πüÂ∞±ÊòØËØ¥ÔºåÂ¶ÇÊûú‰ªªÂä°‰∏ÄÊó¶Ôºàstate != NEWÔºâÔºåÊÑèÂë≥ÁùÄÂÖ∂ÂÆû‰ªªÂä°Â∑≤ÁªèÊâßË°åÂÆå‰∫ÜÔºåÂè™ÊòØËøòÂú®ËøîÂõûÁªìÊûúÔºåÈÇ£‰πàÂ∞±‰∏çËÉΩË¢´ÂèñÊ∂à„ÄÇÂ¶ÇÊûúmayInterruptIfRunning‰∏∫trueÔºåË¶Å‰∏≠Êñ≠ÂΩìÂâçÊâßË°å‰ªªÂä°ÁöÑÁ∫øÁ®ã„ÄÇ reportÊñπÊ≥ïgetÊñπÊ≥ïÂú®Ë∞ÉÁî®awaitDoneÊñπÊ≥ïÂêéÔºå‰ºöË∞ÉÁî®reportÊñπÊ≥ïËøõË°åËøîÂõûÔºö 12345678private V report(int s) throws ExecutionException &#123; Object x = outcome; if (s == NORMAL) return (V)x; if (s &gt;= CANCELLED) throw new CancellationException(); throw new ExecutionException((Throwable)x);&#125; ÂæàÁÆÄÂçïÔºåÂèØ‰ª•ÁúãÂà∞Êúâ3‰∏≠ÊâßË°åÊÉÖÂÜµÔºö Â¶ÇÊûús == NORMAL‰∏∫trueÔºåËØ¥ÊòéÊòØÊ≠£Â∏∏ÊâßË°åÁªìÊùüÔºåÈÇ£‰πàÊ†πÊçÆ‰∏äËø∞ÁöÑÂàÜÊûêÔºåÂú®Ê≠£Â∏∏ÊâßË°åÁªìÊùüÊó∂outcomeÂ≠òÊîæÁöÑÊòØËøîÂõûÁªìÊûúÔºåÊääoutcomeËøîÂõûÔºõ Â¶ÇÊûús &gt;= CANCELLED‰∏∫trueÔºåËØ¥ÊòéÊòØË¢´ÂèñÊ∂à‰∫ÜÔºåÊäõÂá∫CancellationExceptionÔºõ Â¶ÇÊûús &lt; CANCELLEDÔºåÈÇ£‰πàÁä∂ÊÄÅÂè™ËÉΩÊòØÊòØEXCEPTIONALÔºåË°®Á§∫Âú®ÊâßË°åËøáÁ®ã‰∏≠Âá∫Áé∞‰∫ÜÂºÇÂ∏∏ÔºåÊäõÂá∫ExecutionException„ÄÇ runAndResetÊñπÊ≥ïËØ•ÊñπÊ≥ïÂíårunÊñπÊ≥ïÁ±ª‰ººÔºåÂå∫Âà´Âú®‰∫éËøô‰∏™ÊñπÊ≥ï‰∏ç‰ºöËÆæÁΩÆ‰ªªÂä°ÁöÑÊâßË°åÁªìÊûúÂÄºÔºåÊâÄ‰ª•Âú®Ê≠£Â∏∏ÊâßË°åÊó∂Ôºå‰∏ç‰ºö‰øÆÊîπstateÔºåÈô§ÈùûÂèëÁîü‰∫ÜÂºÇÂ∏∏ÊàñËÄÖ‰∏≠Êñ≠ÔºåÊúÄÂêéËøîÂõûÊòØÂê¶Ê≠£Á°ÆÁöÑÊâßË°åÂπ∂Â§ç‰ΩçÔºö 12345678910111213141516171819202122232425262728293031protected boolean runAndReset() &#123; if (state != NEW || !UNSAFE.compareAndSwapObject(this, runnerOffset, null, Thread.currentThread())) return false; boolean ran = false; int s = state; try &#123; Callable&lt;V&gt; c = callable; if (c != null &amp;&amp; s == NEW) &#123; try &#123; // ‰∏çËé∑ÂèñÂíåËÆæÁΩÆËøîÂõûÂÄº c.call(); // don't set result ran = true; &#125; catch (Throwable ex) &#123; setException(ex); &#125; &#125; &#125; finally &#123; // runner must be non-null until state is settled to // prevent concurrent calls to run() runner = null; // state must be re-read after nulling runner to prevent // leaked interrupts s = state; if (s &gt;= INTERRUPTING) handlePossibleCancellationInterrupt(s); &#125; // ÊòØÂê¶Ê≠£Á°ÆÁöÑÊâßË°åÂπ∂Â§ç‰Ωç return ran &amp;&amp; s == NEW;&#125; ÊÄªÁªìÊú¨ÊñáÂàÜÊûê‰∫ÜFutureTaskÁöÑÊâßË°åËøáÁ®ãÂíåËé∑ÂèñËøîÂõûÂÄºÁöÑËøáÁ®ãÔºåË¶ÅÊ≥®ÊÑè‰ª•‰∏ãÂá†‰∏™Âú∞ÊñπÔºö FutureTaskÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÂú®Â§öÁ∫øÁ®ã‰∏ã‰ªªÂä°‰πüÂè™‰ºöË¢´ÊâßË°å‰∏ÄÊ¨°Ôºõ Ê≥®ÊÑèÂú®ÊâßË°åÊó∂ÂêÑÁßçÁä∂ÊÄÅÁöÑÂàáÊç¢Ôºõ getÊñπÊ≥ïË∞ÉÁî®Êó∂ÔºåÂ¶ÇÊûú‰ªªÂä°Ê≤°ÊúâÁªìÊùüÔºåË¶ÅÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÔºåË¢´ÈòªÂ°ûÁöÑÁ∫øÁ®ã‰ºö‰øùÂ≠òÂú®‰∏Ä‰∏™Treiber Stack‰∏≠Ôºõ getÊñπÊ≥ïË∂ÖÊó∂ÂäüËÉΩÂ¶ÇÊûúË∂ÖÊó∂Êú™Ëé∑ÂèñÊàêÂäüÔºå‰ºöÊäõÂá∫TimeoutExceptionÔºõ Ê≥®ÊÑèÂú®ÂèñÊ∂àÊó∂ÁöÑÁ∫øÁ®ã‰∏≠Êñ≠ÔºåÂú®runÊñπÊ≥ï‰∏≠‰∏ÄÂÆöË¶Å‰øùËØÅÁªìÊùüÊó∂ÁöÑÁä∂ÊÄÅÊòØINTERRUPTEDÔºåÂê¶ÂàôÂú®cancelÊñπÊ≥ï‰∏≠ÂèØËÉΩÊ≤°ÊúâÊâßË°åinterruptÔºåÈÄ†Êàê‰∏≠Êñ≠ÁöÑÊ≥ÑÈú≤„ÄÇ]]></content>
      <categories>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>FutureTask</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â§öÁ∫øÁ®ãÔºàÂõõÔºâ--- Á∫øÁ®ãÊ±†]]></title>
    <url>%2F2020%2F02%2F28%2F%E5%A4%9A%E7%BA%BF%E7%A8%8B%EF%BC%88%E5%9B%9B%EF%BC%89---%20%E7%BA%BF%E7%A8%8B%E6%B1%A0.html</url>
    <content type="text"><![CDATA[Ê∑±ÂÖ•ÁêÜËß£JavaÁ∫øÁ®ãÊ±†ÔºöThreadPoolExecutor ps:‰∏çËøáËØ¥ÂÆûËØùÔºåÂÜôÁöÑË¥•Á¨îÂ∞±ÊòØÁ∫øÁ®ãÁä∂ÊÄÅËΩ¨Êç¢ÈÇ£‰∏ÄÂùó~ ÁÆÄÁï•‰ªãÁªçÁ∫øÁ®ãÊ±† ËΩ¨Ôºöhttp://www.ideabuffer.cn/2017/04/04/Ê∑±ÂÖ•ÁêÜËß£JavaÁ∫øÁ®ãÊ±†ÔºöThreadPoolExecutor/#addWorkerÊñπÊ≥ï Á∫øÁ®ãÊ±†Ôºà‰∏ÄÔºâÔºöThreadPoolExecutorÁ∫øÁ®ãÊ±†‰ªãÁªçÂú®webÂºÄÂèë‰∏≠ÔºåÊúçÂä°Âô®ÈúÄË¶ÅÊé•ÂèóÂπ∂Â§ÑÁêÜËØ∑Ê±ÇÔºåÊâÄ‰ª•‰ºö‰∏∫‰∏Ä‰∏™ËØ∑Ê±ÇÊù•ÂàÜÈÖç‰∏Ä‰∏™Á∫øÁ®ãÊù•ËøõË°åÂ§ÑÁêÜ„ÄÇÂ¶ÇÊûúÊØèÊ¨°ËØ∑Ê±ÇÈÉΩÊñ∞ÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÁöÑËØùÂÆûÁé∞Ëµ∑Êù•ÈùûÂ∏∏ÁÆÄ‰æøÔºå‰ΩÜÊòØÂ≠òÂú®‰∏Ä‰∏™ÈóÆÈ¢òÔºö Â¶ÇÊûúÂπ∂ÂèëÁöÑËØ∑Ê±ÇÊï∞ÈáèÈùûÂ∏∏Â§öÔºå‰ΩÜÊØè‰∏™Á∫øÁ®ãÊâßË°åÁöÑÊó∂Èó¥ÂæàÁü≠ÔºåËøôÊ†∑Â∞±‰ºöÈ¢ëÁπÅÁöÑÂàõÂª∫ÂíåÈîÄÊØÅÁ∫øÁ®ãÔºåÂ¶ÇÊ≠§‰∏ÄÊù•‰ºöÂ§ßÂ§ßÈôç‰ΩéÁ≥ªÁªüÁöÑÊïàÁéá„ÄÇÂèØËÉΩÂá∫Áé∞ÊúçÂä°Âô®Âú®‰∏∫ÊØè‰∏™ËØ∑Ê±ÇÂàõÂª∫Êñ∞Á∫øÁ®ãÂíåÈîÄÊØÅÁ∫øÁ®ã‰∏äËä±Ë¥πÁöÑÊó∂Èó¥ÂíåÊ∂àËÄóÁöÑÁ≥ªÁªüËµÑÊ∫êË¶ÅÊØîÂ§ÑÁêÜÂÆûÈôÖÁöÑÁî®Êà∑ËØ∑Ê±ÇÁöÑÊó∂Èó¥ÂíåËµÑÊ∫êÊõ¥Â§ö„ÄÇ ÈÇ£‰πàÊúâÊ≤°Êúâ‰∏ÄÁßçÂäûÊ≥ï‰ΩøÊâßË°åÂÆå‰∏Ä‰∏™‰ªªÂä°ÔºåÂπ∂‰∏çË¢´ÈîÄÊØÅÔºåËÄåÊòØÂèØ‰ª•ÁªßÁª≠ÊâßË°åÂÖ∂‰ªñÁöÑ‰ªªÂä°Âë¢Ôºü ËøôÂ∞±ÊòØÁ∫øÁ®ãÊ±†ÁöÑÁõÆÁöÑ‰∫Ü„ÄÇÁ∫øÁ®ãÊ±†‰∏∫Á∫øÁ®ãÁîüÂëΩÂë®ÊúüÁöÑÂºÄÈîÄÂíåËµÑÊ∫ê‰∏çË∂≥ÈóÆÈ¢òÊèê‰æõ‰∫ÜËß£ÂÜ≥ÊñπÊ°à„ÄÇÈÄöËøáÂØπÂ§ö‰∏™‰ªªÂä°ÈáçÁî®Á∫øÁ®ãÔºåÁ∫øÁ®ãÂàõÂª∫ÁöÑÂºÄÈîÄË¢´ÂàÜÊëäÂà∞‰∫ÜÂ§ö‰∏™‰ªªÂä°‰∏ä„ÄÇ ‰ªÄ‰πàÊó∂ÂÄô‰ΩøÁî®Á∫øÁ®ãÊ±†Ôºü Âçï‰∏™‰ªªÂä°Â§ÑÁêÜÊó∂Èó¥ÊØîËæÉÁü≠ ÈúÄË¶ÅÂ§ÑÁêÜÁöÑ‰ªªÂä°Êï∞ÈáèÂæàÂ§ß ‰ΩøÁî®Á∫øÁ®ãÊ±†ÁöÑÂ•ΩÂ§Ñ ÂºïÁî®Ëá™ http://ifeve.com/java-threadpool/ ÁöÑËØ¥ÊòéÔºö Èôç‰ΩéËµÑÊ∫êÊ∂àËÄó„ÄÇÈÄöËøáÈáçÂ§çÂà©Áî®Â∑≤ÂàõÂª∫ÁöÑÁ∫øÁ®ãÈôç‰ΩéÁ∫øÁ®ãÂàõÂª∫ÂíåÈîÄÊØÅÈÄ†ÊàêÁöÑÊ∂àËÄó„ÄÇ ÊèêÈ´òÂìçÂ∫îÈÄüÂ∫¶„ÄÇÂΩì‰ªªÂä°Âà∞ËææÊó∂Ôºå‰ªªÂä°ÂèØ‰ª•‰∏çÈúÄË¶ÅÁöÑÁ≠âÂà∞Á∫øÁ®ãÂàõÂª∫Â∞±ËÉΩÁ´ãÂç≥ÊâßË°å„ÄÇ ÊèêÈ´òÁ∫øÁ®ãÁöÑÂèØÁÆ°ÁêÜÊÄß„ÄÇÁ∫øÁ®ãÊòØÁ®ÄÁº∫ËµÑÊ∫êÔºåÂ¶ÇÊûúÊó†ÈôêÂà∂ÁöÑÂàõÂª∫Ôºå‰∏ç‰ªÖ‰ºöÊ∂àËÄóÁ≥ªÁªüËµÑÊ∫êÔºåËøò‰ºöÈôç‰ΩéÁ≥ªÁªüÁöÑÁ®≥ÂÆöÊÄßÔºå‰ΩøÁî®Á∫øÁ®ãÊ±†ÂèØ‰ª•ËøõË°åÁªü‰∏ÄÁöÑÂàÜÈÖçÔºåË∞É‰ºòÂíåÁõëÊéß„ÄÇ Java‰∏≠ÁöÑÁ∫øÁ®ãÊ±†ÊòØÁî®ThreadPoolExecutorÁ±ªÊù•ÂÆûÁé∞ÁöÑ. Êú¨ÊñáÂ∞±ÁªìÂêàJDK 1.8ÂØπËØ•Á±ªÁöÑÊ∫êÁ†ÅÊù•ÂàÜÊûê‰∏Ä‰∏ãËøô‰∏™Á±ªÂÜÖÈÉ®ÂØπ‰∫éÁ∫øÁ®ãÁöÑÂàõÂª∫, ÁÆ°ÁêÜ‰ª•ÂèäÂêéÂè∞‰ªªÂä°ÁöÑË∞ÉÂ∫¶Á≠âÊñπÈù¢ÁöÑÊâßË°åÂéüÁêÜ„ÄÇ ÂÖàÁúã‰∏Ä‰∏ãÁ∫øÁ®ãÊ±†ÁöÑÁ±ªÂõæÔºö ExecutorÊ°ÜÊû∂Êé•Âè£ExecutorÊ°ÜÊû∂ÊòØ‰∏Ä‰∏™Ê†πÊçÆ‰∏ÄÁªÑÊâßË°åÁ≠ñÁï•Ë∞ÉÁî®ÔºåË∞ÉÂ∫¶ÔºåÊâßË°åÂíåÊéßÂà∂ÁöÑÂºÇÊ≠•‰ªªÂä°ÁöÑÊ°ÜÊû∂ÔºåÁõÆÁöÑÊòØÊèê‰æõ‰∏ÄÁßçÂ∞Ü‚Äù‰ªªÂä°Êèê‰∫§‚Äù‰∏é‚Äù‰ªªÂä°Â¶Ç‰ΩïËøêË°å‚ÄùÂàÜÁ¶ªÂºÄÊù•ÁöÑÊú∫Âà∂„ÄÇ J.U.C‰∏≠Êúâ‰∏â‰∏™ExecutorÊé•Âè£Ôºö ExecutorÔºö‰∏Ä‰∏™ËøêË°åÊñ∞‰ªªÂä°ÁöÑÁÆÄÂçïÊé•Âè£Ôºõ ExecutorServiceÔºöÊâ©Â±ï‰∫ÜExecutorÊé•Âè£„ÄÇÊ∑ªÂä†‰∫Ü‰∏Ä‰∫õÁî®Êù•ÁÆ°ÁêÜÊâßË°åÂô®ÁîüÂëΩÂë®ÊúüÂíå‰ªªÂä°ÁîüÂëΩÂë®ÊúüÁöÑÊñπÊ≥ïÔºõ ScheduledExecutorServiceÔºöÊâ©Â±ï‰∫ÜExecutorService„ÄÇÊîØÊåÅFutureÂíåÂÆöÊúüÊâßË°å‰ªªÂä°„ÄÇ ExecutorÊé•Âè£123public interface Executor &#123; void execute(Runnable command);&#125; ExecutorÊé•Âè£Âè™Êúâ‰∏Ä‰∏™executeÊñπÊ≥ïÔºåÁî®Êù•Êõø‰ª£ÈÄöÂ∏∏ÂàõÂª∫ÊàñÂêØÂä®Á∫øÁ®ãÁöÑÊñπÊ≥ï„ÄÇ‰æãÂ¶ÇÔºå‰ΩøÁî®ThreadÊù•ÂàõÂª∫Âπ∂ÂêØÂä®Á∫øÁ®ãÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12Thread t = new Thread();t.start(); ‰ΩøÁî®ExecutorÊù•ÂêØÂä®Á∫øÁ®ãÊâßË°å‰ªªÂä°ÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12Thread t = new Thread();executor.execute(t); ÂØπ‰∫é‰∏çÂêåÁöÑExecutorÂÆûÁé∞Ôºåexecute()ÊñπÊ≥ïÂèØËÉΩÊòØÂàõÂª∫‰∏Ä‰∏™Êñ∞Á∫øÁ®ãÂπ∂Á´ãÂç≥ÂêØÂä®Ôºå‰πüÊúâÂèØËÉΩÊòØ‰ΩøÁî®Â∑≤ÊúâÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÊù•ËøêË°å‰º†ÂÖ•ÁöÑ‰ªªÂä°Ôºå‰πüÂèØËÉΩÊòØÊ†πÊçÆËÆæÁΩÆÁ∫øÁ®ãÊ±†ÁöÑÂÆπÈáèÊàñËÄÖÈòªÂ°ûÈòüÂàóÁöÑÂÆπÈáèÊù•ÂÜ≥ÂÆöÊòØÂê¶Ë¶ÅÂ∞Ü‰º†ÂÖ•ÁöÑÁ∫øÁ®ãÊîæÂÖ•ÈòªÂ°ûÈòüÂàó‰∏≠ÊàñËÄÖÊãíÁªùÊé•Êî∂‰º†ÂÖ•ÁöÑÁ∫øÁ®ã„ÄÇ ExecutorServiceÊé•Âè£ExecutorServiceÊé•Âè£ÁªßÊâøËá™ExecutorÊé•Âè£ÔºåÊèê‰æõ‰∫ÜÁÆ°ÁêÜÁªàÊ≠¢ÁöÑÊñπÊ≥ïÔºå‰ª•ÂèäÂèØ‰∏∫Ë∑üË∏™‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂºÇÊ≠•‰ªªÂä°ÊâßË°åÁä∂ÂÜµËÄåÁîüÊàê Future ÁöÑÊñπÊ≥ï„ÄÇÂ¢ûÂä†‰∫ÜshutDown()ÔºåshutDownNow()ÔºåinvokeAll()ÔºåinvokeAny()Âíåsubmit()Á≠âÊñπÊ≥ï„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÊîØÊåÅÂç≥Êó∂ÂÖ≥Èó≠Ôºå‰πüÂ∞±ÊòØshutDownNow()ÊñπÊ≥ïÔºåÂàô‰ªªÂä°ÈúÄË¶ÅÊ≠£Á°ÆÂ§ÑÁêÜ‰∏≠Êñ≠„ÄÇ ScheduledExecutorServiceÊé•Âè£ScheduledExecutorServiceÊâ©Â±ïExecutorServiceÊé•Âè£Âπ∂Â¢ûÂä†‰∫ÜscheduleÊñπÊ≥ï„ÄÇË∞ÉÁî®scheduleÊñπÊ≥ïÂèØ‰ª•Âú®ÊåáÂÆöÁöÑÂª∂Êó∂ÂêéÊâßË°å‰∏Ä‰∏™RunnableÊàñËÄÖCallable‰ªªÂä°„ÄÇScheduledExecutorServiceÊé•Âè£ËøòÂÆö‰πâ‰∫ÜÊåâÁÖßÊåáÂÆöÊó∂Èó¥Èó¥ÈöîÂÆöÊúüÊâßË°å‰ªªÂä°ÁöÑscheduleAtFixedRate()ÊñπÊ≥ïÂíåscheduleWithFixedDelay()ÊñπÊ≥ï„ÄÇ ThreadPoolExecutorÂàÜÊûêThreadPoolExecutorÁªßÊâøËá™AbstractExecutorServiceÔºå‰πüÊòØÂÆûÁé∞‰∫ÜExecutorServiceÊé•Âè£„ÄÇ Âá†‰∏™ÈáçË¶ÅÁöÑÂ≠óÊÆµ12345678910private final AtomicInteger ctl = new AtomicInteger(ctlOf(RUNNING, 0));private static final int COUNT_BITS = Integer.SIZE - 3;private static final int CAPACITY = (1 &lt;&lt; COUNT_BITS) - 1;// runState is stored in the high-order bitsprivate static final int RUNNING = -1 &lt;&lt; COUNT_BITS;private static final int SHUTDOWN = 0 &lt;&lt; COUNT_BITS;private static final int STOP = 1 &lt;&lt; COUNT_BITS;private static final int TIDYING = 2 &lt;&lt; COUNT_BITS;private static final int TERMINATED = 3 &lt;&lt; COUNT_BITS; ctlÊòØÂØπÁ∫øÁ®ãÊ±†ÁöÑËøêË°åÁä∂ÊÄÅÂíåÁ∫øÁ®ãÊ±†‰∏≠ÊúâÊïàÁ∫øÁ®ãÁöÑÊï∞ÈáèËøõË°åÊéßÂà∂ÁöÑ‰∏Ä‰∏™Â≠óÊÆµÔºå ÂÆÉÂåÖÂê´‰∏§ÈÉ®ÂàÜÁöÑ‰ø°ÊÅØ: Á∫øÁ®ãÊ±†ÁöÑËøêË°åÁä∂ÊÄÅ (runState) ÂíåÁ∫øÁ®ãÊ±†ÂÜÖÊúâÊïàÁ∫øÁ®ãÁöÑÊï∞Èáè (workerCount)ÔºåËøôÈáåÂèØ‰ª•ÁúãÂà∞Ôºå‰ΩøÁî®‰∫ÜIntegerÁ±ªÂûãÊù•‰øùÂ≠òÔºåÈ´ò3‰Ωç‰øùÂ≠òrunStateÔºå‰Ωé29‰Ωç‰øùÂ≠òworkerCount„ÄÇCOUNT_BITS Â∞±ÊòØ29ÔºåCAPACITYÂ∞±ÊòØ1Â∑¶Áßª29‰ΩçÂáè1Ôºà29‰∏™1ÔºâÔºåËøô‰∏™Â∏∏ÈáèË°®Á§∫workerCountÁöÑ‰∏äÈôêÂÄºÔºåÂ§ßÁ∫¶ÊòØ5‰∫ø„ÄÇ ‰∏ãÈù¢ÂÜç‰ªãÁªç‰∏ãÁ∫øÁ®ãÊ±†ÁöÑËøêË°åÁä∂ÊÄÅ. Á∫øÁ®ãÊ±†‰∏ÄÂÖ±Êúâ‰∫îÁßçÁä∂ÊÄÅ, ÂàÜÂà´ÊòØ: RUNNING ÔºöËÉΩÊé•ÂèóÊñ∞Êèê‰∫§ÁöÑ‰ªªÂä°ÔºåÂπ∂‰∏î‰πüËÉΩÂ§ÑÁêÜÈòªÂ°ûÈòüÂàó‰∏≠ÁöÑ‰ªªÂä°Ôºõ SHUTDOWNÔºöÂÖ≥Èó≠Áä∂ÊÄÅÔºå‰∏çÂÜçÊé•ÂèóÊñ∞Êèê‰∫§ÁöÑ‰ªªÂä°Ôºå‰ΩÜÂç¥ÂèØ‰ª•ÁªßÁª≠Â§ÑÁêÜÈòªÂ°ûÈòüÂàó‰∏≠Â∑≤‰øùÂ≠òÁöÑ‰ªªÂä°„ÄÇÂú®Á∫øÁ®ãÊ±†Â§Ñ‰∫é RUNNING Áä∂ÊÄÅÊó∂ÔºåË∞ÉÁî® shutdown()ÊñπÊ≥ï‰ºö‰ΩøÁ∫øÁ®ãÊ±†ËøõÂÖ•Âà∞ËØ•Áä∂ÊÄÅ„ÄÇÔºàfinalize() ÊñπÊ≥ïÂú®ÊâßË°åËøáÁ®ã‰∏≠‰πü‰ºöË∞ÉÁî®shutdown()ÊñπÊ≥ïËøõÂÖ•ËØ•Áä∂ÊÄÅÔºâÔºõ„ÄåÊ≥®ÊÑèshutdownÂèØËÉΩ‰ºöÂá∫Áé∞ÊúâÁ∫øÁ®ãÊ≠£Âú®Á≠âÈòªÂ°ûÈòüÂàó‰∏≠ÁöÑ‰ªªÂä°ËøáÊù•Ôºå‰ΩÜÊòØÁ™ÅÁÑ∂shutdownÔºå‰∏ç‰ºöÊúâ‰ªªÂä°ÂÜçÊù•‰∫ÜÔºåÈÇ£Á∫øÁ®ãÂ∞±‰ºö‰∏ÄÁõ¥ÈòªÂ°ûÔºåÂØºËá¥Êó†Ê≥ïÂõûÊî∂ÔºåÊâÄ‰ª• shutdown()ÊñπÊ≥ï‰∏≠ÊúâË∞ÉÁî®interruptIdleWorkers()„ÄÇ„Äç STOPÔºö‰∏çËÉΩÊé•ÂèóÊñ∞‰ªªÂä°Ôºå‰πü‰∏çÂ§ÑÁêÜÈòüÂàó‰∏≠ÁöÑ‰ªªÂä°Ôºå‰ºö‰∏≠Êñ≠Ê≠£Âú®Â§ÑÁêÜ‰ªªÂä°ÁöÑÁ∫øÁ®ã„ÄÇÂú®Á∫øÁ®ãÊ±†Â§Ñ‰∫é RUNNING Êàñ SHUTDOWN Áä∂ÊÄÅÊó∂ÔºåË∞ÉÁî® shutdownNow() ÊñπÊ≥ï‰ºö‰ΩøÁ∫øÁ®ãÊ±†ËøõÂÖ•Âà∞ËØ•Áä∂ÊÄÅÔºõ TIDYINGÔºöÂ¶ÇÊûúÊâÄÊúâÁöÑ‰ªªÂä°ÈÉΩÂ∑≤ÁªàÊ≠¢‰∫ÜÔºåworkerCount (ÊúâÊïàÁ∫øÁ®ãÊï∞) ‰∏∫0ÔºåÁ∫øÁ®ãÊ±†ËøõÂÖ•ËØ•Áä∂ÊÄÅÂêé‰ºöË∞ÉÁî® terminated() ÊñπÊ≥ïËøõÂÖ•TERMINATED Áä∂ÊÄÅ„ÄÇ TERMINATEDÔºöÂú®terminated() ÊñπÊ≥ïÊâßË°åÂÆåÂêéËøõÂÖ•ËØ•Áä∂ÊÄÅÔºåÈªòËÆ§terminated()ÊñπÊ≥ï‰∏≠‰ªÄ‰πà‰πüÊ≤°ÊúâÂÅö„ÄÇ Á∫øÁ®ãÊ±†‰∏çÊòØRUNNINGÁä∂ÊÄÅÔºõ Á∫øÁ®ãÊ±†Áä∂ÊÄÅ‰∏çÊòØTIDYINGÁä∂ÊÄÅÊàñTERMINATEDÁä∂ÊÄÅÔºõ Â¶ÇÊûúÁ∫øÁ®ãÊ±†Áä∂ÊÄÅÊòØSHUTDOWNÂπ∂‰∏îworkerQueue‰∏∫Á©∫Ôºõ workerCount‰∏∫0Ôºõ ËÆæÁΩÆTIDYINGÁä∂ÊÄÅÊàêÂäü„ÄÇ ‰∏ãÂõæ‰∏∫Á∫øÁ®ãÊ±†ÁöÑÁä∂ÊÄÅËΩ¨Êç¢ËøáÁ®ãÔºö ctlÁõ∏ÂÖ≥ÊñπÊ≥ïËøôÈáåËøòÊúâÂá†‰∏™ÂØπctlËøõË°åËÆ°ÁÆóÁöÑÊñπÊ≥ïÔºö 123private static int runStateOf(int c) &#123; return c &amp; ~CAPACITY; &#125;private static int workerCountOf(int c) &#123; return c &amp; CAPACITY; &#125;private static int ctlOf(int rs, int wc) &#123; return rs | wc; &#125; runStateOfÔºöËé∑ÂèñËøêË°åÁä∂ÊÄÅÔºõ workerCountOfÔºöËé∑ÂèñÊ¥ªÂä®Á∫øÁ®ãÊï∞Ôºõ ctlOfÔºöËé∑ÂèñËøêË°åÁä∂ÊÄÅÂíåÊ¥ªÂä®Á∫øÁ®ãÊï∞ÁöÑÂÄº„ÄÇ ThreadPoolExecutorÊûÑÈÄ†ÊñπÊ≥ï123456789101112131415161718192021public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue, ThreadFactory threadFactory, RejectedExecutionHandler handler) &#123; if (corePoolSize &lt; 0 || maximumPoolSize &lt;= 0 || maximumPoolSize &lt; corePoolSize || keepAliveTime &lt; 0) throw new IllegalArgumentException(); if (workQueue == null || threadFactory == null || handler == null) throw new NullPointerException(); this.corePoolSize = corePoolSize; this.maximumPoolSize = maximumPoolSize; this.workQueue = workQueue; this.keepAliveTime = unit.toNanos(keepAliveTime); this.threadFactory = threadFactory; this.handler = handler;&#125; ÊûÑÈÄ†ÊñπÊ≥ï‰∏≠ÁöÑÂ≠óÊÆµÂê´‰πâÂ¶Ç‰∏ãÔºö corePoolSizeÔºöÊ†∏ÂøÉÁ∫øÁ®ãÊï∞ÈáèÔºåÂΩìÊúâÊñ∞‰ªªÂä°Âú®execute()ÊñπÊ≥ïÊèê‰∫§Êó∂Ôºå‰ºöÊâßË°å‰ª•‰∏ãÂà§Êñ≠Ôºö Â¶ÇÊûúËøêË°åÁöÑÁ∫øÁ®ãÂ∞ë‰∫é corePoolSizeÔºåÂàôÂàõÂª∫Êñ∞Á∫øÁ®ãÊù•Â§ÑÁêÜ‰ªªÂä°ÔºåÂç≥‰ΩøÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÂÖ∂‰ªñÁ∫øÁ®ãÊòØÁ©∫Èó≤ÁöÑÔºõ Â¶ÇÊûúÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ§ß‰∫éÁ≠â‰∫é corePoolSize ‰∏îÂ∞è‰∫é maximumPoolSizeÔºåÂàôÂè™ÊúâÂΩìworkQueueÊª°Êó∂ÊâçÂàõÂª∫Êñ∞ÁöÑÁ∫øÁ®ãÂéªÂ§ÑÁêÜ‰ªªÂä°Ôºõ Â¶ÇÊûúËÆæÁΩÆÁöÑcorePoolSize Âíå maximumPoolSizeÁõ∏ÂêåÔºåÂàôÂàõÂª∫ÁöÑÁ∫øÁ®ãÊ±†ÁöÑÂ§ßÂ∞èÊòØÂõ∫ÂÆöÁöÑÔºåËøôÊó∂Â¶ÇÊûúÊúâÊñ∞‰ªªÂä°Êèê‰∫§ÔºåËã•workQueueÊú™Êª°ÔºåÂàôÂ∞ÜËØ∑Ê±ÇÊîæÂÖ•workQueue‰∏≠ÔºåÁ≠âÂæÖÊúâÁ©∫Èó≤ÁöÑÁ∫øÁ®ãÂéª‰ªéworkQueue‰∏≠Âèñ‰ªªÂä°Âπ∂Â§ÑÁêÜÔºõ Â¶ÇÊûúËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ§ß‰∫éÁ≠â‰∫émaximumPoolSizeÔºåËøôÊó∂Â¶ÇÊûúworkQueueÂ∑≤ÁªèÊª°‰∫ÜÔºåÂàôÈÄöËøáhandlerÊâÄÊåáÂÆöÁöÑÁ≠ñÁï•Êù•Â§ÑÁêÜ‰ªªÂä°Ôºõ ÊâÄ‰ª•Ôºå‰ªªÂä°Êèê‰∫§Êó∂ÔºåÂà§Êñ≠ÁöÑÈ°∫Â∫è‰∏∫ corePoolSize ‚Äì&gt; workQueue ‚Äì&gt; maximumPoolSize„ÄÇ maximumPoolSizeÔºöÊúÄÂ§ßÁ∫øÁ®ãÊï∞ÈáèÔºõ workQueueÔºöÁ≠âÂæÖÈòüÂàóÔºåÂΩì‰ªªÂä°Êèê‰∫§Êó∂ÔºåÂ¶ÇÊûúÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ§ß‰∫éÁ≠â‰∫écorePoolSizeÁöÑÊó∂ÂÄôÔºåÊääËØ•‰ªªÂä°Â∞ÅË£ÖÊàê‰∏Ä‰∏™WorkerÂØπË±°ÊîæÂÖ•Á≠âÂæÖÈòüÂàóÔºåÂΩìÊèê‰∫§‰∏Ä‰∏™Êñ∞ÁöÑ‰ªªÂä°Âà∞Á∫øÁ®ãÊ±†‰ª•Âêé, Á∫øÁ®ãÊ±†‰ºöÊ†πÊçÆÂΩìÂâçÁ∫øÁ®ãÊ±†‰∏≠Ê≠£Âú®ËøêË°åÁùÄÁöÑÁ∫øÁ®ãÁöÑÊï∞ÈáèÊù•ÂÜ≥ÂÆöÂØπËØ•‰ªªÂä°ÁöÑÂ§ÑÁêÜÊñπÂºèÔºå‰πüÂ∞±ÊòØ BlockingQueue ÁöÑÈÄâÊã©Ôºå‰∏ªË¶ÅÊúâ‰ª•‰∏ãÂá†ÁßçÂ§ÑÁêÜÊñπÂºè: Áõ¥Êé•ÂàáÊç¢ÔºöËøôÁßçÊñπÂºèÂ∏∏Áî®ÁöÑÈòüÂàóÊòØSynchronousQueueÔºå‰ΩÜÁé∞Âú®ËøòÊ≤°ÊúâÁ†îÁ©∂ËøáËØ•ÈòüÂàóÔºåËøôÈáåÊöÇÊó∂ËøòÊ≤°Ê≥ï‰ªãÁªçÔºõ ‰ΩøÁî®Êó†ÁïåÈòüÂàóÔºö‰∏ÄËà¨‰ΩøÁî®Âü∫‰∫éÈìæË°®ÁöÑÈòªÂ°ûÈòüÂàóLinkedBlockingQueue„ÄÇÂ¶ÇÊûú‰ΩøÁî®ËøôÁßçÊñπÂºèÔºåÈÇ£‰πàÁ∫øÁ®ãÊ±†‰∏≠ËÉΩÂ§üÂàõÂª∫ÁöÑÊúÄÂ§ßÁ∫øÁ®ãÊï∞Â∞±ÊòØcorePoolSizeÔºåËÄåmaximumPoolSizeÂ∞±‰∏ç‰ºöËµ∑‰ΩúÁî®‰∫Ü„ÄåÂõ†‰∏∫ÈòüÂàóÊ∞∏Ëøú‰∏ç‰ºöÊª°‚Ä¶„ÄçÔºàÂêéÈù¢‰πü‰ºöËØ¥Âà∞Ôºâ„ÄÇÂΩìÁ∫øÁ®ãÊ±†‰∏≠ÊâÄÊúâÁöÑÊ†∏ÂøÉÁ∫øÁ®ãÈÉΩÊòØRUNNINGÁä∂ÊÄÅÊó∂ÔºåËøôÊó∂‰∏Ä‰∏™Êñ∞ÁöÑ‰ªªÂä°Êèê‰∫§Â∞±‰ºöÊîæÂÖ•Á≠âÂæÖÈòüÂàó‰∏≠„ÄÇ ‰ΩøÁî®ÊúâÁïåÈòüÂàóÔºö‰∏ÄËà¨‰ΩøÁî®ArrayBlockingQueue„ÄÇ‰ΩøÁî®ËØ•ÊñπÂºèÂèØ‰ª•Â∞ÜÁ∫øÁ®ãÊ±†ÁöÑÊúÄÂ§ßÁ∫øÁ®ãÊï∞ÈáèÈôêÂà∂‰∏∫maximumPoolSizeÔºåËøôÊ†∑ËÉΩÂ§üÈôç‰ΩéËµÑÊ∫êÁöÑÊ∂àËÄóÔºå‰ΩÜÂêåÊó∂ËøôÁßçÊñπÂºè‰πü‰ΩøÂæóÁ∫øÁ®ãÊ±†ÂØπÁ∫øÁ®ãÁöÑË∞ÉÂ∫¶ÂèòÂæóÊõ¥Âõ∞ÈöæÔºåÂõ†‰∏∫Á∫øÁ®ãÊ±†ÂíåÈòüÂàóÁöÑÂÆπÈáèÈÉΩÊòØÊúâÈôêÁöÑÂÄºÔºåÊâÄ‰ª•Ë¶ÅÊÉ≥‰ΩøÁ∫øÁ®ãÊ±†Â§ÑÁêÜ‰ªªÂä°ÁöÑÂêûÂêêÁéáËææÂà∞‰∏Ä‰∏™Áõ∏ÂØπÂêàÁêÜÁöÑËåÉÂõ¥ÔºåÂèàÊÉ≥‰ΩøÁ∫øÁ®ãË∞ÉÂ∫¶Áõ∏ÂØπÁÆÄÂçïÔºåÂπ∂‰∏îËøòË¶ÅÂ∞ΩÂèØËÉΩÁöÑÈôç‰ΩéÁ∫øÁ®ãÊ±†ÂØπËµÑÊ∫êÁöÑÊ∂àËÄóÔºåÂ∞±ÈúÄË¶ÅÂêàÁêÜÁöÑËÆæÁΩÆËøô‰∏§‰∏™Êï∞Èáè„ÄÇ Â¶ÇÊûúË¶ÅÊÉ≥Èôç‰ΩéÁ≥ªÁªüËµÑÊ∫êÁöÑÊ∂àËÄóÔºàÂåÖÊã¨CPUÁöÑ‰ΩøÁî®ÁéáÔºåÊìç‰ΩúÁ≥ªÁªüËµÑÊ∫êÁöÑÊ∂àËÄóÔºå‰∏ä‰∏ãÊñáÁéØÂ¢ÉÂàáÊç¢ÁöÑÂºÄÈîÄÁ≠âÔºâ, ÂèØ‰ª•ËÆæÁΩÆËæÉÂ§ßÁöÑÈòüÂàóÂÆπÈáèÂíåËæÉÂ∞èÁöÑÁ∫øÁ®ãÊ±†ÂÆπÈáè, ‰ΩÜËøôÊ†∑‰πü‰ºöÈôç‰ΩéÁ∫øÁ®ãÂ§ÑÁêÜ‰ªªÂä°ÁöÑÂêûÂêêÈáè„ÄÇ Â¶ÇÊûúÊèê‰∫§ÁöÑ‰ªªÂä°ÁªèÂ∏∏ÂèëÁîüÈòªÂ°ûÔºåÈÇ£‰πàÂèØ‰ª•ËÄÉËôëÈÄöËøáË∞ÉÁî® setMaximumPoolSize() ÊñπÊ≥ïÊù•ÈáçÊñ∞ËÆæÂÆöÁ∫øÁ®ãÊ±†ÁöÑÂÆπÈáè„ÄÇ Â¶ÇÊûúÈòüÂàóÁöÑÂÆπÈáèËÆæÁΩÆÁöÑËæÉÂ∞èÔºåÈÄöÂ∏∏ÈúÄË¶ÅÂ∞ÜÁ∫øÁ®ãÊ±†ÁöÑÂÆπÈáèËÆæÁΩÆÂ§ß‰∏ÄÁÇπÔºåËøôÊ†∑CPUÁöÑ‰ΩøÁî®Áéá‰ºöÁõ∏ÂØπÁöÑÈ´ò‰∏Ä‰∫õ„ÄÇ‰ΩÜÂ¶ÇÊûúÁ∫øÁ®ãÊ±†ÁöÑÂÆπÈáèËÆæÁΩÆÁöÑËøáÂ§ßÔºåÂàôÂú®Êèê‰∫§ÁöÑ‰ªªÂä°Êï∞ÈáèÂ§™Â§öÁöÑÊÉÖÂÜµ‰∏ãÔºåÂπ∂ÂèëÈáè‰ºöÂ¢ûÂä†ÔºåÈÇ£‰πàÁ∫øÁ®ã‰πãÈó¥ÁöÑË∞ÉÂ∫¶Â∞±ÊòØ‰∏Ä‰∏™Ë¶ÅËÄÉËôëÁöÑÈóÆÈ¢òÔºåÂõ†‰∏∫ËøôÊ†∑ÂèçËÄåÊúâÂèØËÉΩÈôç‰ΩéÂ§ÑÁêÜ‰ªªÂä°ÁöÑÂêûÂêêÈáè„ÄÇ keepAliveTimeÔºöÁ∫øÁ®ãÊ±†Áª¥Êä§Á∫øÁ®ãÊâÄÂÖÅËÆ∏ÁöÑÁ©∫Èó≤Êó∂Èó¥„ÄÇÂΩìÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ§ß‰∫écorePoolSizeÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúËøôÊó∂Ê≤°ÊúâÊñ∞ÁöÑ‰ªªÂä°Êèê‰∫§ÔºåÊ†∏ÂøÉÁ∫øÁ®ãÂ§ñÁöÑÁ∫øÁ®ã‰∏ç‰ºöÁ´ãÂç≥ÈîÄÊØÅÔºåËÄåÊòØ‰ºöÁ≠âÂæÖÔºåÁõ¥Âà∞Á≠âÂæÖÁöÑÊó∂Èó¥Ë∂ÖËøá‰∫ÜkeepAliveTimeÔºõ threadFactoryÔºöÂÆÉÊòØThreadFactoryÁ±ªÂûãÁöÑÂèòÈáèÔºåÁî®Êù•ÂàõÂª∫Êñ∞Á∫øÁ®ã„ÄÇÈªòËÆ§‰ΩøÁî®Executors.defaultThreadFactory() Êù•ÂàõÂª∫Á∫øÁ®ã„ÄÇ‰ΩøÁî®ÈªòËÆ§ÁöÑThreadFactoryÊù•ÂàõÂª∫Á∫øÁ®ãÊó∂Ôºå‰ºö‰ΩøÊñ∞ÂàõÂª∫ÁöÑÁ∫øÁ®ãÂÖ∑ÊúâÁõ∏ÂêåÁöÑNORM_PRIORITY‰ºòÂÖàÁ∫ßÂπ∂‰∏îÊòØÈùûÂÆàÊä§Á∫øÁ®ãÔºåÂêåÊó∂‰πüËÆæÁΩÆ‰∫ÜÁ∫øÁ®ãÁöÑÂêçÁß∞„ÄÇ handlerÔºöÂÆÉÊòØRejectedExecutionHandlerÁ±ªÂûãÁöÑÂèòÈáèÔºåË°®Á§∫Á∫øÁ®ãÊ±†ÁöÑÈ•±ÂíåÁ≠ñÁï•„ÄÇÂ¶ÇÊûúÈòªÂ°ûÈòüÂàóÊª°‰∫ÜÂπ∂‰∏îÊ≤°ÊúâÁ©∫Èó≤ÁöÑÁ∫øÁ®ãÔºåËøôÊó∂Â¶ÇÊûúÁªßÁª≠Êèê‰∫§‰ªªÂä°ÔºåÂ∞±ÈúÄË¶ÅÈááÂèñ‰∏ÄÁßçÁ≠ñÁï•Â§ÑÁêÜËØ•‰ªªÂä°„ÄÇÁ∫øÁ®ãÊ±†Êèê‰æõ‰∫Ü4ÁßçÁ≠ñÁï•Ôºö AbortPolicyÔºöÁõ¥Êé•ÊäõÂá∫ÂºÇÂ∏∏ÔºåËøôÊòØÈªòËÆ§Á≠ñÁï•Ôºõ CallerRunsPolicyÔºöÁî®Ë∞ÉÁî®ËÄÖÊâÄÂú®ÁöÑÁ∫øÁ®ãÊù•ÊâßË°å‰ªªÂä°Ôºõ DiscardOldestPolicyÔºö‰∏¢ÂºÉÈòªÂ°ûÈòüÂàó‰∏≠Èù†ÊúÄÂâçÁöÑ‰ªªÂä°ÔºåÂπ∂ÊâßË°åÂΩìÂâç‰ªªÂä°Ôºõ DiscardPolicyÔºöÁõ¥Êé•‰∏¢ÂºÉ‰ªªÂä°Ôºõ executeÊñπÊ≥ïexecute()ÊñπÊ≥ïÁî®Êù•Êèê‰∫§‰ªªÂä°Ôºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556public void execute(Runnable command) &#123; if (command == null) throw new NullPointerException(); /* * cltËÆ∞ÂΩïÁùÄrunStateÂíåworkerCount */ int c = ctl.get(); /* * workerCountOfÊñπÊ≥ïÂèñÂá∫‰Ωé29‰ΩçÁöÑÂÄºÔºåË°®Á§∫ÂΩìÂâçÊ¥ªÂä®ÁöÑÁ∫øÁ®ãÊï∞Ôºõ * Â¶ÇÊûúÂΩìÂâçÊ¥ªÂä®Á∫øÁ®ãÊï∞Â∞è‰∫écorePoolSizeÔºåÂàôÊñ∞Âª∫‰∏Ä‰∏™Á∫øÁ®ãÊîæÂÖ•Á∫øÁ®ãÊ±†‰∏≠Ôºõ * Âπ∂Êää‰ªªÂä°Ê∑ªÂä†Âà∞ËØ•Á∫øÁ®ã‰∏≠„ÄÇ */ if (workerCountOf(c) &lt; corePoolSize) &#123; /* * addWorker‰∏≠ÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞Ë°®Á§∫ÈôêÂà∂Ê∑ªÂä†Á∫øÁ®ãÁöÑÊï∞ÈáèÊòØÊ†πÊçÆcorePoolSizeÊù•Âà§Êñ≠ËøòÊòØmaximumPoolSizeÊù•Âà§Êñ≠Ôºõ * Â¶ÇÊûú‰∏∫trueÔºåÊ†πÊçÆcorePoolSizeÊù•Âà§Êñ≠Ôºõ * Â¶ÇÊûú‰∏∫falseÔºåÂàôÊ†πÊçÆmaximumPoolSizeÊù•Âà§Êñ≠ */ if (addWorker(command, true)) return; /* * Â¶ÇÊûúÊ∑ªÂä†Â§±Ë¥•ÔºåÂàôÈáçÊñ∞Ëé∑ÂèñctlÂÄº */ c = ctl.get(); &#125; /* * Â¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãÊ±†ÊòØËøêË°åÁä∂ÊÄÅÂπ∂‰∏î‰ªªÂä°Ê∑ªÂä†Âà∞ÈòüÂàóÊàêÂäü */ if (isRunning(c) &amp;&amp; workQueue.offer(command)) &#123; // ÈáçÊñ∞Ëé∑ÂèñctlÂÄº int recheck = ctl.get(); // ÂÜçÊ¨°Âà§Êñ≠Á∫øÁ®ãÊ±†ÁöÑËøêË°åÁä∂ÊÄÅÔºåÂ¶ÇÊûú‰∏çÊòØËøêË°åÁä∂ÊÄÅÔºåÁî±‰∫é‰πãÂâçÂ∑≤ÁªèÊääcommandÊ∑ªÂä†Âà∞workQueue‰∏≠‰∫ÜÔºå // ËøôÊó∂ÈúÄË¶ÅÁßªÈô§ËØ•command // ÊâßË°åËøáÂêéÈÄöËøáhandler‰ΩøÁî®ÊãíÁªùÁ≠ñÁï•ÂØπËØ•‰ªªÂä°ËøõË°åÂ§ÑÁêÜÔºåÊï¥‰∏™ÊñπÊ≥ïËøîÂõû if (! isRunning(recheck) &amp;&amp; remove(command)) reject(command); /* * Ëé∑ÂèñÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÊúâÊïàÁ∫øÁ®ãÊï∞ÔºåÂ¶ÇÊûúÊï∞ÈáèÊòØ0ÔºåÂàôÊâßË°åaddWorkerÊñπÊ≥ï * ËøôÈáå‰º†ÂÖ•ÁöÑÂèÇÊï∞Ë°®Á§∫Ôºö * 1. Á¨¨‰∏Ä‰∏™ÂèÇÊï∞‰∏∫nullÔºåË°®Á§∫Âú®Á∫øÁ®ãÊ±†‰∏≠ÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÔºå‰ΩÜ‰∏çÂéªÂêØÂä®Ôºõ * 2. Á¨¨‰∫å‰∏™ÂèÇÊï∞‰∏∫falseÔºåÂ∞ÜÁ∫øÁ®ãÊ±†ÁöÑÊúâÈôêÁ∫øÁ®ãÊï∞ÈáèÁöÑ‰∏äÈôêËÆæÁΩÆ‰∏∫maximumPoolSizeÔºåÊ∑ªÂä†Á∫øÁ®ãÊó∂Ê†πÊçÆmaximumPoolSizeÊù•Âà§Êñ≠Ôºõ * Â¶ÇÊûúÂà§Êñ≠workerCountÂ§ß‰∫é0ÔºåÂàôÁõ¥Êé•ËøîÂõûÔºåÂú®workQueue‰∏≠Êñ∞Â¢ûÁöÑcommand‰ºöÂú®Â∞ÜÊù•ÁöÑÊüê‰∏™Êó∂ÂàªË¢´ÊâßË°å„ÄÇ */ else if (workerCountOf(recheck) == 0) addWorker(null, false); &#125; /* * Â¶ÇÊûúÊâßË°åÂà∞ËøôÈáåÔºåÊúâ‰∏§ÁßçÊÉÖÂÜµÔºö * 1. Á∫øÁ®ãÊ±†Â∑≤Áªè‰∏çÊòØRUNNINGÁä∂ÊÄÅÔºõ * 2. Á∫øÁ®ãÊ±†ÊòØRUNNINGÁä∂ÊÄÅÔºå‰ΩÜworkerCount &gt;= corePoolSizeÂπ∂‰∏îworkQueueÂ∑≤Êª°„ÄÇ * ËøôÊó∂ÔºåÂÜçÊ¨°Ë∞ÉÁî®addWorkerÊñπÊ≥ïÔºå‰ΩÜÁ¨¨‰∫å‰∏™ÂèÇÊï∞‰º†ÂÖ•‰∏∫falseÔºåÂ∞ÜÁ∫øÁ®ãÊ±†ÁöÑÊúâÈôêÁ∫øÁ®ãÊï∞ÈáèÁöÑ‰∏äÈôêËÆæÁΩÆ‰∏∫maximumPoolSizeÔºõ * Â¶ÇÊûúÂ§±Ë¥•ÂàôÊãíÁªùËØ•‰ªªÂä° */ else if (!addWorker(command, false)) reject(command);&#125; ÁÆÄÂçïÊù•ËØ¥ÔºåÂú®ÊâßË°åexecute()ÊñπÊ≥ïÊó∂Â¶ÇÊûúÁä∂ÊÄÅ‰∏ÄÁõ¥ÊòØRUNNINGÊó∂ÔºåÁöÑÊâßË°åËøáÁ®ãÂ¶Ç‰∏ãÔºö Â¶ÇÊûúworkerCount &lt; corePoolSizeÔºåÂàôÂàõÂª∫Âπ∂ÂêØÂä®‰∏Ä‰∏™Á∫øÁ®ãÊù•ÊâßË°åÊñ∞Êèê‰∫§ÁöÑ‰ªªÂä°Ôºõ Â¶ÇÊûúworkerCount &gt;= corePoolSizeÔºå‰∏îÁ∫øÁ®ãÊ±†ÂÜÖÁöÑÈòªÂ°ûÈòüÂàóÊú™Êª°ÔºåÂàôÂ∞Ü‰ªªÂä°Ê∑ªÂä†Âà∞ËØ•ÈòªÂ°ûÈòüÂàó‰∏≠Ôºõ Â¶ÇÊûúworkerCount &gt;= corePoolSize &amp;&amp; workerCount &lt; maximumPoolSizeÔºå‰∏îÁ∫øÁ®ãÊ±†ÂÜÖÁöÑÈòªÂ°ûÈòüÂàóÂ∑≤Êª°ÔºåÂàôÂàõÂª∫Âπ∂ÂêØÂä®‰∏Ä‰∏™Á∫øÁ®ãÊù•ÊâßË°åÊñ∞Êèê‰∫§ÁöÑ‰ªªÂä°Ôºõ Â¶ÇÊûúworkerCount &gt;= maximumPoolSizeÔºåÂπ∂‰∏îÁ∫øÁ®ãÊ±†ÂÜÖÁöÑÈòªÂ°ûÈòüÂàóÂ∑≤Êª°, ÂàôÊ†πÊçÆÊãíÁªùÁ≠ñÁï•Êù•Â§ÑÁêÜËØ•‰ªªÂä°, ÈªòËÆ§ÁöÑÂ§ÑÁêÜÊñπÂºèÊòØÁõ¥Êé•ÊäõÂºÇÂ∏∏„ÄÇ ËøôÈáåË¶ÅÊ≥®ÊÑè‰∏Ä‰∏ãaddWorker(null, false);Ôºå‰πüÂ∞±ÊòØÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÔºå‰ΩÜÂπ∂Ê≤°Êúâ‰º†ÂÖ•‰ªªÂä°ÔºåÂõ†‰∏∫‰ªªÂä°Â∑≤ÁªèË¢´Ê∑ªÂä†Âà∞workQueue‰∏≠‰∫ÜÔºåÊâÄ‰ª•workerÂú®ÊâßË°åÁöÑÊó∂ÂÄôÔºå‰ºöÁõ¥Êé•‰ªéworkQueue‰∏≠Ëé∑Âèñ‰ªªÂä°„ÄÇÊâÄ‰ª•ÔºåÂú®workerCountOf(recheck) == 0Êó∂ÊâßË°åaddWorker(null, false);‰πüÊòØ‰∏∫‰∫Ü‰øùËØÅÁ∫øÁ®ãÊ±†Âú®RUNNINGÁä∂ÊÄÅ‰∏ãÂøÖÈ°ªË¶ÅÊúâ‰∏Ä‰∏™Á∫øÁ®ãÊù•ÊâßË°å‰ªªÂä°„ÄÇ executeÊñπÊ≥ïÊâßË°åÊµÅÁ®ãÂ¶Ç‰∏ãÔºö addWorkerÊñπÊ≥ïaddWorkerÊñπÊ≥ïÁöÑ‰∏ªË¶ÅÂ∑•‰ΩúÊòØÂú®Á∫øÁ®ãÊ±†‰∏≠ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÁ∫øÁ®ãÂπ∂ÊâßË°åÔºåfirstTaskÂèÇÊï∞ Áî®‰∫éÊåáÂÆöÊñ∞Â¢ûÁöÑÁ∫øÁ®ãÊâßË°åÁöÑÁ¨¨‰∏Ä‰∏™‰ªªÂä°ÔºåcoreÂèÇÊï∞‰∏∫trueË°®Á§∫Âú®Êñ∞Â¢ûÁ∫øÁ®ãÊó∂‰ºöÂà§Êñ≠ÂΩìÂâçÊ¥ªÂä®Á∫øÁ®ãÊï∞ÊòØÂê¶Â∞ë‰∫écorePoolSizeÔºåfalseË°®Á§∫Êñ∞Â¢ûÁ∫øÁ®ãÂâçÈúÄË¶ÅÂà§Êñ≠ÂΩìÂâçÊ¥ªÂä®Á∫øÁ®ãÊï∞ÊòØÂê¶Â∞ë‰∫émaximumPoolSizeÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495private boolean addWorker(Runnable firstTask, boolean core) &#123; retry: for (;;) &#123; int c = ctl.get(); // Ëé∑ÂèñËøêË°åÁä∂ÊÄÅ int rs = runStateOf(c); /* * Ëøô‰∏™ifÂà§Êñ≠ * Â¶ÇÊûúrs &gt;= SHUTDOWNÔºåÂàôË°®Á§∫Ê≠§Êó∂‰∏çÂÜçÊé•Êî∂Êñ∞‰ªªÂä°Ôºõ * Êé•ÁùÄÂà§Êñ≠‰ª•‰∏ã3‰∏™Êù°‰ª∂ÔºåÂè™Ë¶ÅÊúâ1‰∏™‰∏çÊª°Ë∂≥ÔºåÂàôËøîÂõûfalseÔºö * 1. rs == SHUTDOWNÔºåËøôÊó∂Ë°®Á§∫ÂÖ≥Èó≠Áä∂ÊÄÅÔºå‰∏çÂÜçÊé•ÂèóÊñ∞Êèê‰∫§ÁöÑ‰ªªÂä°Ôºå‰ΩÜÂç¥ÂèØ‰ª•ÁªßÁª≠Â§ÑÁêÜÈòªÂ°ûÈòüÂàó‰∏≠Â∑≤‰øùÂ≠òÁöÑ‰ªªÂä° * 2. firsTask‰∏∫Á©∫ * 3. ÈòªÂ°ûÈòüÂàó‰∏ç‰∏∫Á©∫ * * È¶ñÂÖàËÄÉËôërs == SHUTDOWNÁöÑÊÉÖÂÜµ * ËøôÁßçÊÉÖÂÜµ‰∏ã‰∏ç‰ºöÊé•ÂèóÊñ∞Êèê‰∫§ÁöÑ‰ªªÂä°ÔºåÊâÄ‰ª•Âú®firstTask‰∏ç‰∏∫Á©∫ÁöÑÊó∂ÂÄô‰ºöËøîÂõûfalseÔºõ * ÁÑ∂ÂêéÔºåÂ¶ÇÊûúfirstTask‰∏∫Á©∫ÔºåÂπ∂‰∏îworkQueue‰πü‰∏∫Á©∫ÔºåÂàôËøîÂõûfalseÔºå * Âõ†‰∏∫ÈòüÂàó‰∏≠Â∑≤ÁªèÊ≤°Êúâ‰ªªÂä°‰∫ÜÔºå‰∏çÈúÄË¶ÅÂÜçÊ∑ªÂä†Á∫øÁ®ã‰∫Ü */ // Check if queue empty only if necessary. if (rs &gt;= SHUTDOWN &amp;&amp; ! (rs == SHUTDOWN &amp;&amp; firstTask == null &amp;&amp; ! workQueue.isEmpty())) return false; for (;;) &#123; // Ëé∑ÂèñÁ∫øÁ®ãÊï∞ int wc = workerCountOf(c); // Â¶ÇÊûúwcË∂ÖËøáCAPACITYÔºå‰πüÂ∞±ÊòØctlÁöÑ‰Ωé29‰ΩçÁöÑÊúÄÂ§ßÂÄºÔºà‰∫åËøõÂà∂ÊòØ29‰∏™1ÔºâÔºåËøîÂõûfalseÔºõ // ËøôÈáåÁöÑcoreÊòØaddWorkerÊñπÊ≥ïÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÔºåÂ¶ÇÊûú‰∏∫trueË°®Á§∫Ê†πÊçÆcorePoolSizeÊù•ÊØîËæÉÔºå // Â¶ÇÊûú‰∏∫falseÂàôÊ†πÊçÆmaximumPoolSizeÊù•ÊØîËæÉ„ÄÇ // if (wc &gt;= CAPACITY || wc &gt;= (core ? corePoolSize : maximumPoolSize)) return false; // Â∞ùËØïÂ¢ûÂä†workerCountÔºåÂ¶ÇÊûúÊàêÂäüÔºåÂàôË∑≥Âá∫Á¨¨‰∏Ä‰∏™forÂæ™ÁéØ if (compareAndIncrementWorkerCount(c)) break retry; // Â¶ÇÊûúÂ¢ûÂä†workerCountÂ§±Ë¥•ÔºåÂàôÈáçÊñ∞Ëé∑ÂèñctlÁöÑÂÄº c = ctl.get(); // Re-read ctl // Â¶ÇÊûúÂΩìÂâçÁöÑËøêË°åÁä∂ÊÄÅ‰∏çÁ≠â‰∫érsÔºåËØ¥ÊòéÁä∂ÊÄÅÂ∑≤Ë¢´ÊîπÂèòÔºåËøîÂõûÁ¨¨‰∏Ä‰∏™forÂæ™ÁéØÁªßÁª≠ÊâßË°å if (runStateOf(c) != rs) continue retry; // else CAS failed due to workerCount change; retry inner loop &#125; &#125; boolean workerStarted = false; boolean workerAdded = false; Worker w = null; try &#123; // Ê†πÊçÆfirstTaskÊù•ÂàõÂª∫WorkerÂØπË±° w = new Worker(firstTask); // ÊØè‰∏Ä‰∏™WorkerÂØπË±°ÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ã final Thread t = w.thread; if (t != null) &#123; final ReentrantLock mainLock = this.mainLock; mainLock.lock(); try &#123; // Recheck while holding lock. // Back out on ThreadFactory failure or if // shut down before lock acquired. int rs = runStateOf(ctl.get()); // rs &lt; SHUTDOWNË°®Á§∫ÊòØRUNNINGÁä∂ÊÄÅÔºõ // Â¶ÇÊûúrsÊòØRUNNINGÁä∂ÊÄÅÊàñËÄÖrsÊòØSHUTDOWNÁä∂ÊÄÅÂπ∂‰∏îfirstTask‰∏∫nullÔºåÂêëÁ∫øÁ®ãÊ±†‰∏≠Ê∑ªÂä†Á∫øÁ®ã„ÄÇ // Âõ†‰∏∫Âú®SHUTDOWNÊó∂‰∏ç‰ºöÂú®Ê∑ªÂä†Êñ∞ÁöÑ‰ªªÂä°Ôºå‰ΩÜËøòÊòØ‰ºöÊâßË°åworkQueue‰∏≠ÁöÑ‰ªªÂä° if (rs &lt; SHUTDOWN || (rs == SHUTDOWN &amp;&amp; firstTask == null)) &#123; if (t.isAlive()) // precheck that t is startable throw new IllegalThreadStateException(); // workersÊòØ‰∏Ä‰∏™HashSet workers.add(w); int s = workers.size(); // largestPoolSizeËÆ∞ÂΩïÁùÄÁ∫øÁ®ãÊ±†‰∏≠Âá∫Áé∞ËøáÁöÑÊúÄÂ§ßÁ∫øÁ®ãÊï∞Èáè if (s &gt; largestPoolSize) largestPoolSize = s; workerAdded = true; &#125; &#125; finally &#123; mainLock.unlock(); &#125; if (workerAdded) &#123; // ÂêØÂä®Á∫øÁ®ã t.start(); workerStarted = true; &#125; &#125; &#125; finally &#123; if (! workerStarted) addWorkerFailed(w); &#125; return workerStarted;&#125; Ê≥®ÊÑè‰∏Ä‰∏ãËøôÈáåÁöÑt.start()Ëøô‰∏™ËØ≠Âè•ÔºåÂêØÂä®Êó∂‰ºöË∞ÉÁî®WorkerÁ±ª‰∏≠ÁöÑrunÊñπÊ≥ïÔºåWorkerÊú¨Ë∫´ÂÆûÁé∞‰∫ÜRunnableÊé•Âè£ÔºåÊâÄ‰ª•‰∏Ä‰∏™WorkerÁ±ªÂûãÁöÑÂØπË±°‰πüÊòØ‰∏Ä‰∏™Á∫øÁ®ã„ÄÇ WorkerÁ±ªÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÊØè‰∏Ä‰∏™Á∫øÁ®ãË¢´Â∞ÅË£ÖÊàê‰∏Ä‰∏™WorkerÂØπË±°ÔºåThreadPoolÁª¥Êä§ÁöÑÂÖ∂ÂÆûÂ∞±ÊòØ‰∏ÄÁªÑWorkerÂØπË±°ÔºåÁúã‰∏Ä‰∏ãWorkerÁöÑÂÆö‰πâÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970private final class Worker extends AbstractQueuedSynchronizer implements Runnable&#123; /** * This class will never be serialized, but we provide a * serialVersionUID to suppress a javac warning. */ private static final long serialVersionUID = 6138294804551838833L; /** Thread this worker is running in. Null if factory fails. */ final Thread thread; /** Initial task to run. Possibly null. */ Runnable firstTask; /** Per-thread task counter */ volatile long completedTasks; /** * Creates with given first task and thread from ThreadFactory. * @param firstTask the first task (null if none) */ Worker(Runnable firstTask) &#123; setState(-1); // inhibit interrupts until runWorker this.firstTask = firstTask; this.thread = getThreadFactory().newThread(this); &#125; /** Delegates main run loop to outer runWorker */ public void run() &#123; runWorker(this); &#125; // Lock methods // // The value 0 represents the unlocked state. // The value 1 represents the locked state. protected boolean isHeldExclusively() &#123; return getState() != 0; &#125; protected boolean tryAcquire(int unused) &#123; if (compareAndSetState(0, 1)) &#123; setExclusiveOwnerThread(Thread.currentThread()); return true; &#125; return false; &#125; protected boolean tryRelease(int unused) &#123; setExclusiveOwnerThread(null); setState(0); return true; &#125; public void lock() &#123; acquire(1); &#125; public boolean tryLock() &#123; return tryAcquire(1); &#125; public void unlock() &#123; release(1); &#125; public boolean isLocked() &#123; return isHeldExclusively(); &#125; void interruptIfStarted() &#123; Thread t; if (getState() &gt;= 0 &amp;&amp; (t = thread) != null &amp;&amp; !t.isInterrupted()) &#123; try &#123; t.interrupt(); &#125; catch (SecurityException ignore) &#123; &#125; &#125; &#125;&#125; WorkerÁ±ªÁªßÊâø‰∫ÜAQSÔºåÂπ∂ÂÆûÁé∞‰∫ÜRunnableÊé•Âè£ÔºåÊ≥®ÊÑèÂÖ∂‰∏≠ÁöÑfirstTaskÂíåthreadÂ±ûÊÄßÔºöfirstTaskÁî®ÂÆÉÊù•‰øùÂ≠ò‰º†ÂÖ•ÁöÑ‰ªªÂä°ÔºõthreadÊòØÂú®Ë∞ÉÁî®ÊûÑÈÄ†ÊñπÊ≥ïÊó∂ÈÄöËøáThreadFactoryÊù•ÂàõÂª∫ÁöÑÁ∫øÁ®ãÔºåÊòØÁî®Êù•Â§ÑÁêÜ‰ªªÂä°ÁöÑÁ∫øÁ®ã„ÄÇ Âú®Ë∞ÉÁî®ÊûÑÈÄ†ÊñπÊ≥ïÊó∂ÔºåÈúÄË¶ÅÊää‰ªªÂä°‰º†ÂÖ•ÔºåËøôÈáåÈÄöËøágetThreadFactory().newThread(this);Êù•Êñ∞Âª∫‰∏Ä‰∏™Á∫øÁ®ãÔºånewThreadÊñπÊ≥ï‰º†ÂÖ•ÁöÑÂèÇÊï∞ÊòØthisÔºåÂõ†‰∏∫WorkerÊú¨Ë∫´ÁªßÊâø‰∫ÜRunnableÊé•Âè£Ôºå‰πüÂ∞±ÊòØ‰∏Ä‰∏™Á∫øÁ®ãÔºåÊâÄ‰ª•‰∏Ä‰∏™WorkerÂØπË±°Âú®ÂêØÂä®ÁöÑÊó∂ÂÄô‰ºöË∞ÉÁî®WorkerÁ±ª‰∏≠ÁöÑrunÊñπÊ≥ï„ÄÇ WorkerÁªßÊâø‰∫ÜAQSÔºå‰ΩøÁî®AQSÊù•ÂÆûÁé∞Áã¨Âç†ÈîÅÁöÑÂäüËÉΩ„ÄÇ‰∏∫‰ªÄ‰πà‰∏ç‰ΩøÁî®ReentrantLockÊù•ÂÆûÁé∞Âë¢ÔºüÂèØ‰ª•ÁúãÂà∞tryAcquireÊñπÊ≥ïÔºåÂÆÉÊòØ‰∏çÂÖÅËÆ∏ÈáçÂÖ•ÁöÑÔºåËÄåReentrantLockÊòØÂÖÅËÆ∏ÈáçÂÖ•ÁöÑÔºö lockÊñπÊ≥ï‰∏ÄÊó¶Ëé∑Âèñ‰∫ÜÁã¨Âç†ÈîÅÔºåË°®Á§∫ÂΩìÂâçÁ∫øÁ®ãÊ≠£Âú®ÊâßË°å‰ªªÂä°‰∏≠Ôºõ Â¶ÇÊûúÊ≠£Âú®ÊâßË°å‰ªªÂä°ÔºåÂàô‰∏çÂ∫îËØ•‰∏≠Êñ≠Á∫øÁ®ãÔºõ Â¶ÇÊûúËØ•Á∫øÁ®ãÁé∞Âú®‰∏çÊòØÁã¨Âç†ÈîÅÁöÑÁä∂ÊÄÅÔºå‰πüÂ∞±ÊòØÁ©∫Èó≤ÁöÑÁä∂ÊÄÅÔºåËØ¥ÊòéÂÆÉÊ≤°ÊúâÂú®Â§ÑÁêÜ‰ªªÂä°ÔºåËøôÊó∂ÂèØ‰ª•ÂØπËØ•Á∫øÁ®ãËøõË°å‰∏≠Êñ≠Ôºõ Á∫øÁ®ãÊ±†Âú®ÊâßË°åshutdownÊñπÊ≥ïÊàñtryTerminateÊñπÊ≥ïÊó∂‰ºöË∞ÉÁî®interruptIdleWorkersÊñπÊ≥ïÊù•‰∏≠Êñ≠Á©∫Èó≤ÁöÑÁ∫øÁ®ãÔºåinterruptIdleWorkersÊñπÊ≥ï‰ºö‰ΩøÁî®tryLockÊñπÊ≥ïÊù•Âà§Êñ≠Á∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊòØÂê¶ÊòØÁ©∫Èó≤Áä∂ÊÄÅÔºõ ‰πãÊâÄ‰ª•ËÆæÁΩÆ‰∏∫‰∏çÂèØÈáçÂÖ•ÔºåÊòØÂõ†‰∏∫Êàë‰ª¨‰∏çÂ∏åÊúõ‰ªªÂä°Âú®Ë∞ÉÁî®ÂÉèsetCorePoolSizeËøôÊ†∑ÁöÑÁ∫øÁ®ãÊ±†ÊéßÂà∂ÊñπÊ≥ïÊó∂ÈáçÊñ∞Ëé∑ÂèñÈîÅ„ÄÇÂ¶ÇÊûú‰ΩøÁî®ReentrantLockÔºåÂÆÉÊòØÂèØÈáçÂÖ•ÁöÑÔºåËøôÊ†∑Â¶ÇÊûúÂú®‰ªªÂä°‰∏≠Ë∞ÉÁî®‰∫ÜÂ¶ÇsetCorePoolSizeËøôÁ±ªÁ∫øÁ®ãÊ±†ÊéßÂà∂ÁöÑÊñπÊ≥ïÔºå‰ºö‰∏≠Êñ≠Ê≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ã„ÄÇ ÊâÄ‰ª•ÔºåWorkerÁªßÊâøËá™AQSÔºåÁî®‰∫éÂà§Êñ≠Á∫øÁ®ãÊòØÂê¶Á©∫Èó≤‰ª•ÂèäÊòØÂê¶ÂèØ‰ª•Ë¢´‰∏≠Êñ≠„ÄÇ Ê≠§Â§ñÔºåÂú®ÊûÑÈÄ†ÊñπÊ≥ï‰∏≠ÊâßË°å‰∫ÜsetState(-1);ÔºåÊäästateÂèòÈáèËÆæÁΩÆ‰∏∫-1Ôºå‰∏∫‰ªÄ‰πàËøô‰πàÂÅöÂë¢ÔºüÊòØÂõ†‰∏∫AQS‰∏≠ÈªòËÆ§ÁöÑstateÊòØ0ÔºåÂ¶ÇÊûúÂàöÂàõÂª∫‰∫Ü‰∏Ä‰∏™WorkerÂØπË±°ÔºåËøòÊ≤°ÊúâÊâßË°å‰ªªÂä°Êó∂ÔºåËøôÊó∂Â∞±‰∏çÂ∫îËØ•Ë¢´‰∏≠Êñ≠ÔºåÁúã‰∏Ä‰∏ãtryAquireÊñπÊ≥ïÔºö 1234567protected boolean tryAcquire(int unused) &#123; if (compareAndSetState(0, 1)) &#123; setExclusiveOwnerThread(Thread.currentThread()); return true; &#125; return false;&#125; tryAcquireÊñπÊ≥ïÊòØÊ†πÊçÆstateÊòØÂê¶ÊòØ0Êù•Âà§Êñ≠ÁöÑÔºåÊâÄ‰ª•ÔºåsetState(-1);Â∞ÜstateËÆæÁΩÆ‰∏∫-1ÊòØ‰∏∫‰∫ÜÁ¶ÅÊ≠¢Âú®ÊâßË°å‰ªªÂä°ÂâçÂØπÁ∫øÁ®ãËøõË°å‰∏≠Êñ≠„ÄÇ Ê≠£Âõ†‰∏∫Â¶ÇÊ≠§ÔºåÂú®runWorkerÊñπÊ≥ï‰∏≠‰ºöÂÖàË∞ÉÁî®WorkerÂØπË±°ÁöÑunlockÊñπÊ≥ïÂ∞ÜstateËÆæÁΩÆ‰∏∫0. runWorkerÊñπÊ≥ïÂú®WorkerÁ±ª‰∏≠ÁöÑrunÊñπÊ≥ïË∞ÉÁî®‰∫ÜrunWorkerÊñπÊ≥ïÊù•ÊâßË°å‰ªªÂä°ÔºårunWorkerÊñπÊ≥ïÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647final void runWorker(Worker w) &#123; Thread wt = Thread.currentThread(); // Ëé∑ÂèñÁ¨¨‰∏Ä‰∏™‰ªªÂä° Runnable task = w.firstTask; w.firstTask = null; // ÂÖÅËÆ∏‰∏≠Êñ≠ w.unlock(); // allow interrupts // ÊòØÂê¶Âõ†‰∏∫ÂºÇÂ∏∏ÈÄÄÂá∫Âæ™ÁéØ boolean completedAbruptly = true; try &#123; // Â¶ÇÊûútask‰∏∫Á©∫ÔºåÂàôÈÄöËøágetTaskÊù•Ëé∑Âèñ‰ªªÂä° while (task != null || (task = getTask()) != null) &#123; w.lock(); // If pool is stopping, ensure thread is interrupted; // if not, ensure thread is not interrupted. This // requires a recheck in second case to deal with // shutdownNow race while clearing interrupt if ((runStateAtLeast(ctl.get(), STOP) || (Thread.interrupted() &amp;&amp; runStateAtLeast(ctl.get(), STOP))) &amp;&amp; !wt.isInterrupted()) wt.interrupt(); try &#123; beforeExecute(wt, task); Throwable thrown = null; try &#123; task.run(); &#125; catch (RuntimeException x) &#123; thrown = x; throw x; &#125; catch (Error x) &#123; thrown = x; throw x; &#125; catch (Throwable x) &#123; thrown = x; throw new Error(x); &#125; finally &#123; afterExecute(task, thrown); &#125; &#125; finally &#123; task = null; w.completedTasks++; w.unlock(); &#125; &#125; completedAbruptly = false; &#125; finally &#123; processWorkerExit(w, completedAbruptly); &#125;&#125; ËøôÈáåËØ¥Êòé‰∏Ä‰∏ãÁ¨¨‰∏Ä‰∏™ifÂà§Êñ≠ÔºåÁõÆÁöÑÊòØÔºö Â¶ÇÊûúÁ∫øÁ®ãÊ±†Ê≠£Âú®ÂÅúÊ≠¢ÔºåÈÇ£‰πàË¶Å‰øùËØÅÂΩìÂâçÁ∫øÁ®ãÊòØ‰∏≠Êñ≠Áä∂ÊÄÅÔºõ Â¶ÇÊûú‰∏çÊòØÁöÑËØùÔºåÂàôË¶Å‰øùËØÅÂΩìÂâçÁ∫øÁ®ã‰∏çÊòØ‰∏≠Êñ≠Áä∂ÊÄÅÔºõ ËøôÈáåË¶ÅËÄÉËôëÂú®ÊâßË°åËØ•ifËØ≠Âè•ÊúüÈó¥ÂèØËÉΩ‰πüÊâßË°å‰∫ÜshutdownNowÊñπÊ≥ïÔºåshutdownNowÊñπÊ≥ï‰ºöÊääÁä∂ÊÄÅËÆæÁΩÆ‰∏∫STOPÔºåÂõûÈ°æ‰∏Ä‰∏ãSTOPÁä∂ÊÄÅÔºö ‰∏çËÉΩÊé•ÂèóÊñ∞‰ªªÂä°Ôºå‰πü‰∏çÂ§ÑÁêÜÈòüÂàó‰∏≠ÁöÑ‰ªªÂä°Ôºå‰ºö‰∏≠Êñ≠Ê≠£Âú®Â§ÑÁêÜ‰ªªÂä°ÁöÑÁ∫øÁ®ã„ÄÇÂú®Á∫øÁ®ãÊ±†Â§Ñ‰∫é RUNNING Êàñ SHUTDOWN Áä∂ÊÄÅÊó∂ÔºåË∞ÉÁî® shutdownNow() ÊñπÊ≥ï‰ºö‰ΩøÁ∫øÁ®ãÊ±†ËøõÂÖ•Âà∞ËØ•Áä∂ÊÄÅ„ÄÇ STOPÁä∂ÊÄÅË¶Å‰∏≠Êñ≠Á∫øÁ®ãÊ±†‰∏≠ÁöÑÊâÄÊúâÁ∫øÁ®ãÔºåËÄåËøôÈáå‰ΩøÁî®Thread.interrupted()Êù•Âà§Êñ≠ÊòØÂê¶‰∏≠Êñ≠ÊòØ‰∏∫‰∫ÜÁ°Æ‰øùÂú®RUNNINGÊàñËÄÖSHUTDOWNÁä∂ÊÄÅÊó∂Á∫øÁ®ãÊòØÈùû‰∏≠Êñ≠Áä∂ÊÄÅÁöÑÔºåÂõ†‰∏∫Thread.interrupted()ÊñπÊ≥ï‰ºöÂ§ç‰Ωç‰∏≠Êñ≠ÁöÑÁä∂ÊÄÅ„ÄÇ ÊÄªÁªì‰∏Ä‰∏ãrunWorkerÊñπÊ≥ïÁöÑÊâßË°åËøáÁ®ãÔºö whileÂæ™ÁéØ‰∏çÊñ≠Âú∞ÈÄöËøágetTask()ÊñπÊ≥ïËé∑Âèñ‰ªªÂä°Ôºõ getTask()ÊñπÊ≥ï‰ªéÈòªÂ°ûÈòüÂàó‰∏≠Âèñ‰ªªÂä°Ôºõ Â¶ÇÊûúÁ∫øÁ®ãÊ±†Ê≠£Âú®ÂÅúÊ≠¢ÔºåÈÇ£‰πàË¶Å‰øùËØÅÂΩìÂâçÁ∫øÁ®ãÊòØ‰∏≠Êñ≠Áä∂ÊÄÅÔºåÂê¶ÂàôË¶Å‰øùËØÅÂΩìÂâçÁ∫øÁ®ã‰∏çÊòØ‰∏≠Êñ≠Áä∂ÊÄÅÔºõ Ë∞ÉÁî®task.run()ÊâßË°å‰ªªÂä°Ôºõ Â¶ÇÊûútask‰∏∫nullÂàôË∑≥Âá∫Âæ™ÁéØÔºåÊâßË°åprocessWorkerExit()ÊñπÊ≥ïÔºõ runWorkerÊñπÊ≥ïÊâßË°åÂÆåÊØïÔºå‰πü‰ª£Ë°®ÁùÄWorker‰∏≠ÁöÑrunÊñπÊ≥ïÊâßË°åÂÆåÊØïÔºåÈîÄÊØÅÁ∫øÁ®ã„ÄÇ ËøôÈáåÁöÑbeforeExecuteÊñπÊ≥ïÂíåafterExecuteÊñπÊ≥ïÂú®ThreadPoolExecutorÁ±ª‰∏≠ÊòØÁ©∫ÁöÑÔºåÁïôÁªôÂ≠êÁ±ªÊù•ÂÆûÁé∞„ÄÇ completedAbruptlyÂèòÈáèÊù•Ë°®Á§∫Âú®ÊâßË°å‰ªªÂä°ËøáÁ®ã‰∏≠ÊòØÂê¶Âá∫Áé∞‰∫ÜÂºÇÂ∏∏ÔºåÂú®processWorkerExitÊñπÊ≥ï‰∏≠‰ºöÂØπËØ•ÂèòÈáèÁöÑÂÄºËøõË°åÂà§Êñ≠„ÄÇ getTaskÊñπÊ≥ïgetTaskÊñπÊ≥ïÁî®Êù•‰ªéÈòªÂ°ûÈòüÂàó‰∏≠Âèñ‰ªªÂä°Ôºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263private Runnable getTask() &#123; // timeOutÂèòÈáèÁöÑÂÄºË°®Á§∫‰∏äÊ¨°‰ªéÈòªÂ°ûÈòüÂàó‰∏≠Âèñ‰ªªÂä°Êó∂ÊòØÂê¶Ë∂ÖÊó∂ boolean timedOut = false; // Did the last poll() time out? for (;;) &#123; int c = ctl.get(); int rs = runStateOf(c); // Check if queue empty only if necessary. /* * Â¶ÇÊûúÁ∫øÁ®ãÊ±†Áä∂ÊÄÅrs &gt;= SHUTDOWNÔºå‰πüÂ∞±ÊòØÈùûRUNNINGÁä∂ÊÄÅÔºåÂÜçËøõË°å‰ª•‰∏ãÂà§Êñ≠Ôºö * 1. rs &gt;= STOPÔºåÁ∫øÁ®ãÊ±†ÊòØÂê¶Ê≠£Âú®stopÔºõ * 2. ÈòªÂ°ûÈòüÂàóÊòØÂê¶‰∏∫Á©∫„ÄÇ * Â¶ÇÊûú‰ª•‰∏äÊù°‰ª∂Êª°Ë∂≥ÔºåÂàôÂ∞ÜworkerCountÂáè1Âπ∂ËøîÂõûnull„ÄÇ * Âõ†‰∏∫Â¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãÊ±†Áä∂ÊÄÅÁöÑÂÄºÊòØSHUTDOWNÊàñ‰ª•‰∏äÊó∂Ôºå‰∏çÂÖÅËÆ∏ÂÜçÂêëÈòªÂ°ûÈòüÂàó‰∏≠Ê∑ªÂä†‰ªªÂä°„ÄÇ */ if (rs &gt;= SHUTDOWN &amp;&amp; (rs &gt;= STOP || workQueue.isEmpty())) &#123; decrementWorkerCount(); return null; &#125; int wc = workerCountOf(c); // Are workers subject to culling? // timedÂèòÈáèÁî®‰∫éÂà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅËøõË°åË∂ÖÊó∂ÊéßÂà∂„ÄÇ // allowCoreThreadTimeOutÈªòËÆ§ÊòØfalseÔºå‰πüÂ∞±ÊòØÊ†∏ÂøÉÁ∫øÁ®ã‰∏çÂÖÅËÆ∏ËøõË°åË∂ÖÊó∂Ôºõ // wc &gt; corePoolSizeÔºåË°®Á§∫ÂΩìÂâçÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ§ß‰∫éÊ†∏ÂøÉÁ∫øÁ®ãÊï∞ÈáèÔºõ // ÂØπ‰∫éË∂ÖËøáÊ†∏ÂøÉÁ∫øÁ®ãÊï∞ÈáèÁöÑËøô‰∫õÁ∫øÁ®ãÔºåÈúÄË¶ÅËøõË°åË∂ÖÊó∂ÊéßÂà∂ boolean timed = allowCoreThreadTimeOut || wc &gt; corePoolSize; /* * wc &gt; maximumPoolSizeÁöÑÊÉÖÂÜµÊòØÂõ†‰∏∫ÂèØËÉΩÂú®Ê≠§ÊñπÊ≥ïÊâßË°åÈò∂ÊÆµÂêåÊó∂ÊâßË°å‰∫ÜsetMaximumPoolSizeÊñπÊ≥ïÔºõ * timed &amp;&amp; timedOut Â¶ÇÊûú‰∏∫trueÔºåË°®Á§∫ÂΩìÂâçÊìç‰ΩúÈúÄË¶ÅËøõË°åË∂ÖÊó∂ÊéßÂà∂ÔºåÂπ∂‰∏î‰∏äÊ¨°‰ªéÈòªÂ°ûÈòüÂàó‰∏≠Ëé∑Âèñ‰ªªÂä°ÂèëÁîü‰∫ÜË∂ÖÊó∂ * Êé•‰∏ãÊù•Âà§Êñ≠ÔºåÂ¶ÇÊûúÊúâÊïàÁ∫øÁ®ãÊï∞ÈáèÂ§ß‰∫é1ÔºåÊàñËÄÖÈòªÂ°ûÈòüÂàóÊòØÁ©∫ÁöÑÔºåÈÇ£‰πàÂ∞ùËØïÂ∞ÜworkerCountÂáè1Ôºõ * Â¶ÇÊûúÂáè1Â§±Ë¥•ÔºåÂàôËøîÂõûÈáçËØï„ÄÇ * Â¶ÇÊûúwc == 1Êó∂Ôºå‰πüÂ∞±ËØ¥ÊòéÂΩìÂâçÁ∫øÁ®ãÊòØÁ∫øÁ®ãÊ±†‰∏≠ÂîØ‰∏ÄÁöÑ‰∏Ä‰∏™Á∫øÁ®ã‰∫Ü„ÄÇ */ if ((wc &gt; maximumPoolSize || (timed &amp;&amp; timedOut)) &amp;&amp; (wc &gt; 1 || workQueue.isEmpty())) &#123; if (compareAndDecrementWorkerCount(c)) return null; continue; &#125; try &#123; /* * Ê†πÊçÆtimedÊù•Âà§Êñ≠ÔºåÂ¶ÇÊûú‰∏∫trueÔºåÂàôÈÄöËøáÈòªÂ°ûÈòüÂàóÁöÑpollÊñπÊ≥ïËøõË°åË∂ÖÊó∂ÊéßÂà∂ÔºåÂ¶ÇÊûúÂú®keepAliveTimeÊó∂Èó¥ÂÜÖÊ≤°ÊúâËé∑ÂèñÂà∞‰ªªÂä°ÔºåÂàôËøîÂõûnullÔºõ * Âê¶ÂàôÈÄöËøátakeÊñπÊ≥ïÔºåÂ¶ÇÊûúËøôÊó∂ÈòüÂàó‰∏∫Á©∫ÔºåÂàôtakeÊñπÊ≥ï‰ºöÈòªÂ°ûÁõ¥Âà∞ÈòüÂàó‰∏ç‰∏∫Á©∫„ÄÇ * */ Runnable r = timed ? workQueue.poll(keepAliveTime, TimeUnit.NANOSECONDS) : workQueue.take(); if (r != null) return r; // Â¶ÇÊûú r == nullÔºåËØ¥ÊòéÂ∑≤ÁªèË∂ÖÊó∂ÔºåtimedOutËÆæÁΩÆ‰∏∫true timedOut = true; &#125; catch (InterruptedException retry) &#123; // Â¶ÇÊûúËé∑Âèñ‰ªªÂä°Êó∂ÂΩìÂâçÁ∫øÁ®ãÂèëÁîü‰∫Ü‰∏≠Êñ≠ÔºåÂàôËÆæÁΩÆtimedOut‰∏∫falseÂπ∂ËøîÂõûÂæ™ÁéØÈáçËØï timedOut = false; &#125; &#125;&#125; ËøôÈáåÈáçË¶ÅÁöÑÂú∞ÊñπÊòØÁ¨¨‰∫å‰∏™ifÂà§Êñ≠ÔºåÁõÆÁöÑÊòØÊéßÂà∂Á∫øÁ®ãÊ±†ÁöÑÊúâÊïàÁ∫øÁ®ãÊï∞Èáè„ÄÇÁî±‰∏äÊñá‰∏≠ÁöÑÂàÜÊûêÂèØ‰ª•Áü•ÈÅìÔºåÂú®ÊâßË°åexecuteÊñπÊ≥ïÊó∂ÔºåÂ¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãÊ±†ÁöÑÁ∫øÁ®ãÊï∞ÈáèË∂ÖËøá‰∫ÜcorePoolSize‰∏îÂ∞è‰∫émaximumPoolSizeÔºåÂπ∂‰∏îworkQueueÂ∑≤Êª°Êó∂ÔºåÂàôÂèØ‰ª•Â¢ûÂä†Â∑•‰ΩúÁ∫øÁ®ãÔºå‰ΩÜËøôÊó∂Â¶ÇÊûúË∂ÖÊó∂Ê≤°ÊúâËé∑ÂèñÂà∞‰ªªÂä°Ôºå‰πüÂ∞±ÊòØtimedOut‰∏∫trueÁöÑÊÉÖÂÜµÔºåËØ¥ÊòéworkQueueÂ∑≤Áªè‰∏∫Á©∫‰∫ÜÔºå‰πüÂ∞±ËØ¥Êòé‰∫ÜÂΩìÂâçÁ∫øÁ®ãÊ±†‰∏≠‰∏çÈúÄË¶ÅÈÇ£‰πàÂ§öÁ∫øÁ®ãÊù•ÊâßË°å‰ªªÂä°‰∫ÜÔºåÂèØ‰ª•ÊääÂ§ö‰∫écorePoolSizeÊï∞ÈáèÁöÑÁ∫øÁ®ãÈîÄÊØÅÊéâÔºå‰øùÊåÅÁ∫øÁ®ãÊï∞ÈáèÂú®corePoolSizeÂç≥ÂèØ„ÄÇ ‰ªÄ‰πàÊó∂ÂÄô‰ºöÈîÄÊØÅÔºüÂΩìÁÑ∂ÊòØrunWorkerÊñπÊ≥ïÊâßË°åÂÆå‰πãÂêéÔºå‰πüÂ∞±ÊòØWorker‰∏≠ÁöÑrunÊñπÊ≥ïÊâßË°åÂÆåÔºåÁî±JVMËá™Âä®ÂõûÊî∂„ÄÇ getTaskÊñπÊ≥ïËøîÂõûnullÊó∂ÔºåÂú®runWorkerÊñπÊ≥ï‰∏≠‰ºöË∑≥Âá∫whileÂæ™ÁéØÔºåÁÑ∂Âêé‰ºöÊâßË°åprocessWorkerExitÊñπÊ≥ï„ÄÇ processWorkerExitÊñπÊ≥ï12345678910111213141516171819202122232425262728293031323334353637private void processWorkerExit(Worker w, boolean completedAbruptly) &#123; // Â¶ÇÊûúcompletedAbruptlyÂÄº‰∏∫trueÔºåÂàôËØ¥ÊòéÁ∫øÁ®ãÊâßË°åÊó∂Âá∫Áé∞‰∫ÜÂºÇÂ∏∏ÔºåÈúÄË¶ÅÂ∞ÜworkerCountÂáè1Ôºõ // Â¶ÇÊûúÁ∫øÁ®ãÊâßË°åÊó∂Ê≤°ÊúâÂá∫Áé∞ÂºÇÂ∏∏ÔºåËØ¥ÊòéÂú®getTask()ÊñπÊ≥ï‰∏≠Â∑≤ÁªèÂ∑≤ÁªèÂØπworkerCountËøõË°å‰∫ÜÂáè1Êìç‰ΩúÔºåËøôÈáåÂ∞±‰∏çÂøÖÂÜçÂáè‰∫Ü„ÄÇ if (completedAbruptly) // If abrupt, then workerCount wasn't adjusted decrementWorkerCount(); final ReentrantLock mainLock = this.mainLock; mainLock.lock(); try &#123; //ÁªüËÆ°ÂÆåÊàêÁöÑ‰ªªÂä°Êï∞ completedTaskCount += w.completedTasks; // ‰ªéworkers‰∏≠ÁßªÈô§Ôºå‰πüÂ∞±Ë°®Á§∫ÁùÄ‰ªéÁ∫øÁ®ãÊ±†‰∏≠ÁßªÈô§‰∫Ü‰∏Ä‰∏™Â∑•‰ΩúÁ∫øÁ®ã workers.remove(w); &#125; finally &#123; mainLock.unlock(); &#125; // Ê†πÊçÆÁ∫øÁ®ãÊ±†Áä∂ÊÄÅËøõË°åÂà§Êñ≠ÊòØÂê¶ÁªìÊùüÁ∫øÁ®ãÊ±† tryTerminate(); int c = ctl.get(); /* * ÂΩìÁ∫øÁ®ãÊ±†ÊòØRUNNINGÊàñSHUTDOWNÁä∂ÊÄÅÊó∂ÔºåÂ¶ÇÊûúworkerÊòØÂºÇÂ∏∏ÁªìÊùüÔºåÈÇ£‰πà‰ºöÁõ¥Êé•addWorkerÔºõ * Â¶ÇÊûúallowCoreThreadTimeOut=trueÔºåÂπ∂‰∏îÁ≠âÂæÖÈòüÂàóÊúâ‰ªªÂä°ÔºåËá≥Â∞ë‰øùÁïô‰∏Ä‰∏™workerÔºõ * Â¶ÇÊûúallowCoreThreadTimeOut=falseÔºåworkerCount‰∏çÂ∞ë‰∫écorePoolSize„ÄÇ */ if (runStateLessThan(c, STOP)) &#123; if (!completedAbruptly) &#123; int min = allowCoreThreadTimeOut ? 0 : corePoolSize; if (min == 0 &amp;&amp; ! workQueue.isEmpty()) min = 1; if (workerCountOf(c) &gt;= min) return; // replacement not needed &#125; addWorker(null, false); &#125;&#125; Ëá≥Ê≠§ÔºåprocessWorkerExitÊâßË°åÂÆå‰πãÂêéÔºåÂ∑•‰ΩúÁ∫øÁ®ãË¢´ÈîÄÊØÅÔºå‰ª•‰∏äÂ∞±ÊòØÊï¥‰∏™Â∑•‰ΩúÁ∫øÁ®ãÁöÑÁîüÂëΩÂë®ÊúüÔºå‰ªéexecuteÊñπÊ≥ïÂºÄÂßãÔºåWorker‰ΩøÁî®ThreadFactoryÂàõÂª∫Êñ∞ÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÔºårunWorkerÈÄöËøágetTaskËé∑Âèñ‰ªªÂä°ÔºåÁÑ∂ÂêéÊâßË°å‰ªªÂä°ÔºåÂ¶ÇÊûúgetTaskËøîÂõûnullÔºåËøõÂÖ•processWorkerExitÊñπÊ≥ïÔºåÊï¥‰∏™Á∫øÁ®ãÁªìÊùüÔºåÂ¶ÇÂõæÊâÄÁ§∫Ôºö tryTerminateÊñπÊ≥ïtryTerminateÊñπÊ≥ïÊ†πÊçÆÁ∫øÁ®ãÊ±†Áä∂ÊÄÅËøõË°åÂà§Êñ≠ÊòØÂê¶ÁªìÊùüÁ∫øÁ®ãÊ±†Ôºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728293031323334353637383940final void tryTerminate() &#123; for (;;) &#123; int c = ctl.get(); /* * ÂΩìÂâçÁ∫øÁ®ãÊ±†ÁöÑÁä∂ÊÄÅ‰∏∫‰ª•‰∏ãÂá†ÁßçÊÉÖÂÜµÊó∂ÔºåÁõ¥Êé•ËøîÂõûÔºö * 1. RUNNINGÔºåÂõ†‰∏∫ËøòÂú®ËøêË°å‰∏≠Ôºå‰∏çËÉΩÂÅúÊ≠¢Ôºõ * 2. TIDYINGÊàñTERMINATEDÔºåÂõ†‰∏∫Á∫øÁ®ãÊ±†‰∏≠Â∑≤ÁªèÊ≤°ÊúâÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ã‰∫ÜÔºõ * 3. SHUTDOWNÂπ∂‰∏îÁ≠âÂæÖÈòüÂàóÈùûÁ©∫ÔºåËøôÊó∂Ë¶ÅÊâßË°åÂÆåworkQueue‰∏≠ÁöÑtaskÔºõ */ if (isRunning(c) || runStateAtLeast(c, TIDYING) || (runStateOf(c) == SHUTDOWN &amp;&amp; ! workQueue.isEmpty())) return; // Â¶ÇÊûúÁ∫øÁ®ãÊï∞Èáè‰∏ç‰∏∫0ÔºåÂàô‰∏≠Êñ≠‰∏Ä‰∏™Á©∫Èó≤ÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÔºåÂπ∂ËøîÂõû if (workerCountOf(c) != 0) &#123; // Eligible to terminate interruptIdleWorkers(ONLY_ONE); return; &#125; final ReentrantLock mainLock = this.mainLock; mainLock.lock(); try &#123; // ËøôÈáåÂ∞ùËØïËÆæÁΩÆÁä∂ÊÄÅ‰∏∫TIDYINGÔºåÂ¶ÇÊûúËÆæÁΩÆÊàêÂäüÔºåÂàôË∞ÉÁî®terminatedÊñπÊ≥ï if (ctl.compareAndSet(c, ctlOf(TIDYING, 0))) &#123; try &#123; // terminatedÊñπÊ≥ïÈªòËÆ§‰ªÄ‰πàÈÉΩ‰∏çÂÅöÔºåÁïôÁªôÂ≠êÁ±ªÂÆûÁé∞ terminated(); &#125; finally &#123; // ËÆæÁΩÆÁä∂ÊÄÅ‰∏∫TERMINATED ctl.set(ctlOf(TERMINATED, 0)); termination.signalAll(); &#125; return; &#125; &#125; finally &#123; mainLock.unlock(); &#125; // else retry on failed CAS &#125;&#125; interruptIdleWorkers(ONLY_ONE)ÁöÑ‰ΩúÁî®ÊòØÂõ†‰∏∫Âú®getTaskÊñπÊ≥ï‰∏≠ÊâßË°åworkQueue.take()Êó∂ÔºåÂ¶ÇÊûú‰∏çÊâßË°å‰∏≠Êñ≠‰ºö‰∏ÄÁõ¥ÈòªÂ°û„ÄÇÂú®‰∏ãÈù¢‰ªãÁªçÁöÑshutdownÊñπÊ≥ï‰∏≠Ôºå‰ºö‰∏≠Êñ≠ÊâÄÊúâÁ©∫Èó≤ÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÔºåÂ¶ÇÊûúÂú®ÊâßË°åshutdownÊó∂Â∑•‰ΩúÁ∫øÁ®ãÊ≤°ÊúâÁ©∫Èó≤ÔºåÁÑ∂ÂêéÂèàÂéªË∞ÉÁî®‰∫ÜgetTaskÊñπÊ≥ïÔºåËøôÊó∂Â¶ÇÊûúworkQueue‰∏≠Ê≤°Êúâ‰ªªÂä°‰∫ÜÔºåË∞ÉÁî®workQueue.take()Êó∂Â∞±‰ºö‰∏ÄÁõ¥ÈòªÂ°û„ÄÇÊâÄ‰ª•ÊØèÊ¨°Âú®Â∑•‰ΩúÁ∫øÁ®ãÁªìÊùüÊó∂Ë∞ÉÁî®tryTerminateÊñπÊ≥ïÊù•Â∞ùËØï‰∏≠Êñ≠‰∏Ä‰∏™Á©∫Èó≤Â∑•‰ΩúÁ∫øÁ®ãÔºåÈÅøÂÖçÂú®ÈòüÂàó‰∏∫Á©∫Êó∂Âèñ‰ªªÂä°‰∏ÄÁõ¥ÈòªÂ°ûÁöÑÊÉÖÂÜµ„ÄÇ shutdownÊñπÊ≥ïshutdownÊñπÊ≥ïË¶ÅÂ∞ÜÁ∫øÁ®ãÊ±†ÂàáÊç¢Âà∞SHUTDOWNÁä∂ÊÄÅÔºåÂπ∂Ë∞ÉÁî®interruptIdleWorkersÊñπÊ≥ïËØ∑Ê±Ç‰∏≠Êñ≠ÊâÄÊúâÁ©∫Èó≤ÁöÑworkerÔºåÊúÄÂêéË∞ÉÁî®tryTerminateÂ∞ùËØïÁªìÊùüÁ∫øÁ®ãÊ±†„ÄÇ 1234567891011121314151617public void shutdown() &#123; final ReentrantLock mainLock = this.mainLock; mainLock.lock(); try &#123; // ÂÆâÂÖ®Á≠ñÁï•Âà§Êñ≠ checkShutdownAccess(); // ÂàáÊç¢Áä∂ÊÄÅ‰∏∫SHUTDOWN advanceRunState(SHUTDOWN); // ‰∏≠Êñ≠Á©∫Èó≤Á∫øÁ®ã interruptIdleWorkers(); onShutdown(); // hook for ScheduledThreadPoolExecutor &#125; finally &#123; mainLock.unlock(); &#125; // Â∞ùËØïÁªìÊùüÁ∫øÁ®ãÊ±† tryTerminate();&#125; ËøôÈáåÊÄùËÄÉ‰∏Ä‰∏™ÈóÆÈ¢òÔºöÂú®runWorkerÊñπÊ≥ï‰∏≠ÔºåÊâßË°å‰ªªÂä°Êó∂ÂØπWorkerÂØπË±°wËøõË°å‰∫ÜlockÊìç‰ΩúÔºå‰∏∫‰ªÄ‰πàË¶ÅÂú®ÊâßË°å‰ªªÂä°ÁöÑÊó∂ÂÄôÂØπÊØè‰∏™Â∑•‰ΩúÁ∫øÁ®ãÈÉΩÂä†ÈîÅÂë¢Ôºü ‰∏ãÈù¢‰ªîÁªÜÂàÜÊûê‰∏Ä‰∏ãÔºö Âú®getTaskÊñπÊ≥ï‰∏≠ÔºåÂ¶ÇÊûúËøôÊó∂Á∫øÁ®ãÊ±†ÁöÑÁä∂ÊÄÅÊòØSHUTDOWNÂπ∂‰∏îworkQueue‰∏∫Á©∫ÔºåÈÇ£‰πàÂ∞±Â∫îËØ•ËøîÂõûnullÊù•ÁªìÊùüËøô‰∏™Â∑•‰ΩúÁ∫øÁ®ãÔºåËÄå‰ΩøÁ∫øÁ®ãÊ±†ËøõÂÖ•SHUTDOWNÁä∂ÊÄÅÈúÄË¶ÅË∞ÉÁî®shutdownÊñπÊ≥ïÔºõ shutdownÊñπÊ≥ï‰ºöË∞ÉÁî®interruptIdleWorkersÊù•‰∏≠Êñ≠Á©∫Èó≤ÁöÑÁ∫øÁ®ãÔºåinterruptIdleWorkersÊåÅÊúâmainLockÔºå‰ºöÈÅçÂéÜworkersÊù•ÈÄê‰∏™Âà§Êñ≠Â∑•‰ΩúÁ∫øÁ®ãÊòØÂê¶Á©∫Èó≤„ÄÇ‰ΩÜgetTaskÊñπÊ≥ï‰∏≠Ê≤°ÊúâmainLockÔºõ Âú®getTask‰∏≠ÔºåÂ¶ÇÊûúÂà§Êñ≠ÂΩìÂâçÁ∫øÁ®ãÊ±†Áä∂ÊÄÅÊòØRUNNINGÔºåÂπ∂‰∏îÈòªÂ°ûÈòüÂàó‰∏∫Á©∫ÔºåÈÇ£‰πà‰ºöË∞ÉÁî®workQueue.take()ËøõË°åÈòªÂ°ûÔºõ Â¶ÇÊûúÂú®Âà§Êñ≠ÂΩìÂâçÁ∫øÁ®ãÊ±†Áä∂ÊÄÅÊòØRUNNINGÂêéÔºåËøôÊó∂Ë∞ÉÁî®‰∫ÜshutdownÊñπÊ≥ïÊääÁä∂ÊÄÅÊîπ‰∏∫‰∫ÜSHUTDOWNÔºåËøôÊó∂Â¶ÇÊûú‰∏çËøõË°å‰∏≠Êñ≠ÔºåÈÇ£‰πàÂΩìÂâçÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÂú®Ë∞ÉÁî®‰∫ÜworkQueue.take()Âêé‰ºö‰∏ÄÁõ¥ÈòªÂ°ûËÄå‰∏ç‰ºöË¢´ÈîÄÊØÅÔºåÂõ†‰∏∫Âú®SHUTDOWNÁä∂ÊÄÅ‰∏ã‰∏çÂÖÅËÆ∏ÂÜçÊúâÊñ∞ÁöÑ‰ªªÂä°Ê∑ªÂä†Âà∞workQueue‰∏≠ÔºåËøôÊ†∑‰∏ÄÊù•Á∫øÁ®ãÊ±†Ê∞∏ËøúÈÉΩÂÖ≥Èó≠‰∏ç‰∫Ü‰∫ÜÔºõ Áî±‰∏äÂèØÁü•ÔºåshutdownÊñπÊ≥ï‰∏égetTaskÊñπÊ≥ïÔºà‰ªéÈòüÂàó‰∏≠Ëé∑Âèñ‰ªªÂä°Êó∂ÔºâÂ≠òÂú®Á´ûÊÄÅÊù°‰ª∂Ôºõ Ëß£ÂÜ≥Ëøô‰∏ÄÈóÆÈ¢òÂ∞±ÈúÄË¶ÅÁî®Âà∞Á∫øÁ®ãÁöÑ‰∏≠Êñ≠Ôºå‰πüÂ∞±ÊòØ‰∏∫‰ªÄ‰πàË¶ÅÁî®interruptIdleWorkersÊñπÊ≥ï„ÄÇÂú®Ë∞ÉÁî®workQueue.take()Êó∂ÔºåÂ¶ÇÊûúÂèëÁé∞ÂΩìÂâçÁ∫øÁ®ãÂú®ÊâßË°å‰πãÂâçÊàñËÄÖÊâßË°åÊúüÈó¥ÊòØ‰∏≠Êñ≠Áä∂ÊÄÅÔºåÂàô‰ºöÊäõÂá∫InterruptedExceptionÔºåËß£Èô§ÈòªÂ°ûÁöÑÁä∂ÊÄÅÔºõ ‰ΩÜÊòØË¶Å‰∏≠Êñ≠Â∑•‰ΩúÁ∫øÁ®ãÔºåËøòË¶ÅÂà§Êñ≠Â∑•‰ΩúÁ∫øÁ®ãÊòØÂê¶ÊòØÁ©∫Èó≤ÁöÑÔºåÂ¶ÇÊûúÂ∑•‰ΩúÁ∫øÁ®ãÊ≠£Âú®Â§ÑÁêÜ‰ªªÂä°ÔºåÂ∞±‰∏çÂ∫îËØ•ÂèëÁîü‰∏≠Êñ≠Ôºõ ÊâÄ‰ª•WorkerÁªßÊâøËá™AQSÔºåÂú®Â∑•‰ΩúÁ∫øÁ®ãÂ§ÑÁêÜ‰ªªÂä°Êó∂‰ºöËøõË°ålockÔºåinterruptIdleWorkersÂú®ËøõË°å‰∏≠Êñ≠Êó∂‰ºö‰ΩøÁî®tryLockÊù•Âà§Êñ≠ËØ•Â∑•‰ΩúÁ∫øÁ®ãÊòØÂê¶Ê≠£Âú®Â§ÑÁêÜ‰ªªÂä°ÔºåÂ¶ÇÊûútryLockËøîÂõûtrueÔºåËØ¥ÊòéËØ•Â∑•‰ΩúÁ∫øÁ®ãÂΩìÂâçÊú™ÊâßË°å‰ªªÂä°ÔºåËøôÊó∂ÊâçÂèØ‰ª•Ë¢´‰∏≠Êñ≠„ÄÇ ‰∏ãÈù¢Â∞±Êù•ÂàÜÊûê‰∏Ä‰∏ãinterruptIdleWorkersÊñπÊ≥ï„ÄÇ interruptIdleWorkersÊñπÊ≥ï12345678910111213141516171819202122232425private void interruptIdleWorkers() &#123; interruptIdleWorkers(false);&#125;private void interruptIdleWorkers(boolean onlyOne) &#123; final ReentrantLock mainLock = this.mainLock; mainLock.lock(); try &#123; for (Worker w : workers) &#123; Thread t = w.thread; if (!t.isInterrupted() &amp;&amp; w.tryLock()) &#123; try &#123; t.interrupt(); &#125; catch (SecurityException ignore) &#123; &#125; finally &#123; w.unlock(); &#125; &#125; if (onlyOne) break; &#125; &#125; finally &#123; mainLock.unlock(); &#125;&#125; interruptIdleWorkersÈÅçÂéÜworkers‰∏≠ÊâÄÊúâÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÔºåËã•Á∫øÁ®ãÊ≤°ÊúâË¢´‰∏≠Êñ≠tryLockÊàêÂäüÔºåÂ∞±‰∏≠Êñ≠ËØ•Á∫øÁ®ã„ÄÇ ‰∏∫‰ªÄ‰πàÈúÄË¶ÅÊåÅÊúâmainLockÔºüÂõ†‰∏∫workersÊòØHashSetÁ±ªÂûãÁöÑÔºå‰∏çËÉΩ‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®„ÄÇ shutdownNowÊñπÊ≥ï1234567891011121314151617public List&lt;Runnable&gt; shutdownNow() &#123; List&lt;Runnable&gt; tasks; final ReentrantLock mainLock = this.mainLock; mainLock.lock(); try &#123; checkShutdownAccess(); advanceRunState(STOP); // ‰∏≠Êñ≠ÊâÄÊúâÂ∑•‰ΩúÁ∫øÁ®ãÔºåÊó†ËÆ∫ÊòØÂê¶Á©∫Èó≤ interruptWorkers(); // ÂèñÂá∫ÈòüÂàó‰∏≠Ê≤°ÊúâË¢´ÊâßË°åÁöÑ‰ªªÂä° tasks = drainQueue(); &#125; finally &#123; mainLock.unlock(); &#125; tryTerminate(); return tasks;&#125; shutdownNowÊñπÊ≥ï‰∏éshutdownÊñπÊ≥ïÁ±ª‰ººÔºå‰∏çÂêåÁöÑÂú∞ÊñπÂú®‰∫éÔºö ËÆæÁΩÆÁä∂ÊÄÅ‰∏∫STOPÔºõ ‰∏≠Êñ≠ÊâÄÊúâÂ∑•‰ΩúÁ∫øÁ®ãÔºåÊó†ËÆ∫ÊòØÂê¶ÊòØÁ©∫Èó≤ÁöÑÔºõ ÂèñÂá∫ÈòªÂ°ûÈòüÂàó‰∏≠Ê≤°ÊúâË¢´ÊâßË°åÁöÑ‰ªªÂä°Âπ∂ËøîÂõû„ÄÇ shutdownNowÊñπÊ≥ïÊâßË°åÂÆå‰πãÂêéË∞ÉÁî®tryTerminateÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ïÂú®‰∏äÊñáÂ∑≤ÁªèÂàÜÊûêËøá‰∫ÜÔºåÁõÆÁöÑÂ∞±ÊòØ‰ΩøÁ∫øÁ®ãÊ±†ÁöÑÁä∂ÊÄÅËÆæÁΩÆ‰∏∫TERMINATED„ÄÇ Á∫øÁ®ãÊ±†ÁöÑÁõëÊéßÈÄöËøáÁ∫øÁ®ãÊ±†Êèê‰æõÁöÑÂèÇÊï∞ËøõË°åÁõëÊéß„ÄÇÁ∫øÁ®ãÊ±†ÈáåÊúâ‰∏Ä‰∫õÂ±ûÊÄßÂú®ÁõëÊéßÁ∫øÁ®ãÊ±†ÁöÑÊó∂ÂÄôÂèØ‰ª•‰ΩøÁî® getTaskCountÔºöÁ∫øÁ®ãÊ±†Â∑≤ÁªèÊâßË°åÁöÑÂíåÊú™ÊâßË°åÁöÑ‰ªªÂä°ÊÄªÊï∞Ôºõ getCompletedTaskCountÔºöÁ∫øÁ®ãÊ±†Â∑≤ÂÆåÊàêÁöÑ‰ªªÂä°Êï∞ÈáèÔºåËØ•ÂÄºÂ∞è‰∫éÁ≠â‰∫étaskCountÔºõ getLargestPoolSizeÔºöÁ∫øÁ®ãÊ±†ÊõæÁªèÂàõÂª∫ËøáÁöÑÊúÄÂ§ßÁ∫øÁ®ãÊï∞Èáè„ÄÇÈÄöËøáËøô‰∏™Êï∞ÊçÆÂèØ‰ª•Áü•ÈÅìÁ∫øÁ®ãÊ±†ÊòØÂê¶Êª°ËøáÔºå‰πüÂ∞±ÊòØËææÂà∞‰∫ÜmaximumPoolSizeÔºõ getPoolSizeÔºöÁ∫øÁ®ãÊ±†ÂΩìÂâçÁöÑÁ∫øÁ®ãÊï∞ÈáèÔºõ getActiveCountÔºöÂΩìÂâçÁ∫øÁ®ãÊ±†‰∏≠Ê≠£Âú®ÊâßË°å‰ªªÂä°ÁöÑÁ∫øÁ®ãÊï∞Èáè„ÄÇ ÈÄöËøáËøô‰∫õÊñπÊ≥ïÔºåÂèØ‰ª•ÂØπÁ∫øÁ®ãÊ±†ËøõË°åÁõëÊéßÔºåÂú®ThreadPoolExecutorÁ±ª‰∏≠Êèê‰æõ‰∫ÜÂá†‰∏™Á©∫ÊñπÊ≥ïÔºåÂ¶ÇbeforeExecuteÊñπÊ≥ïÔºåafterExecuteÊñπÊ≥ïÂíåterminatedÊñπÊ≥ïÔºåÂèØ‰ª•Êâ©Â±ïËøô‰∫õÊñπÊ≥ïÂú®ÊâßË°åÂâçÊàñÊâßË°åÂêéÂ¢ûÂä†‰∏Ä‰∫õÊñ∞ÁöÑÊìç‰ΩúÔºå‰æãÂ¶ÇÁªüËÆ°Á∫øÁ®ãÊ±†ÁöÑÊâßË°å‰ªªÂä°ÁöÑÊó∂Èó¥Á≠âÔºåÂèØ‰ª•ÁªßÊâøËá™ThreadPoolExecutorÊù•ËøõË°åÊâ©Â±ï„ÄÇ ÊÄªÁªìÊú¨ÊñáÊØîËæÉËØ¶ÁªÜÁöÑÂàÜÊûê‰∫ÜÁ∫øÁ®ãÊ±†ÁöÑÂ∑•‰ΩúÊµÅÁ®ãÔºåÊÄª‰ΩìÊù•ËØ¥ÊúâÂ¶Ç‰∏ãÂá†‰∏™ÂÜÖÂÆπÔºö ÂàÜÊûê‰∫ÜÁ∫øÁ®ãÁöÑÂàõÂª∫Ôºå‰ªªÂä°ÁöÑÊèê‰∫§ÔºåÁä∂ÊÄÅÁöÑËΩ¨Êç¢‰ª•ÂèäÁ∫øÁ®ãÊ±†ÁöÑÂÖ≥Èó≠Ôºõ ËøôÈáåÈÄöËøáexecuteÊñπÊ≥ïÊù•Â±ïÂºÄÁ∫øÁ®ãÊ±†ÁöÑÂ∑•‰ΩúÊµÅÁ®ãÔºåexecuteÊñπÊ≥ïÈÄöËøácorePoolSizeÔºåmaximumPoolSize‰ª•ÂèäÈòªÂ°ûÈòüÂàóÁöÑÂ§ßÂ∞èÊù•Âà§Êñ≠ÂÜ≥ÂÆö‰º†ÂÖ•ÁöÑ‰ªªÂä°Â∫îËØ•Ë¢´Á´ãÂç≥ÊâßË°åÔºåËøòÊòØÂ∫îËØ•Ê∑ªÂä†Âà∞ÈòªÂ°ûÈòüÂàó‰∏≠ÔºåËøòÊòØÂ∫îËØ•ÊãíÁªù‰ªªÂä°„ÄÇ ‰ªãÁªç‰∫ÜÁ∫øÁ®ãÊ±†ÂÖ≥Èó≠Êó∂ÁöÑËøáÁ®ãÔºå‰πüÂàÜÊûê‰∫ÜshutdownÊñπÊ≥ï‰∏égetTaskÊñπÊ≥ïÂ≠òÂú®Á´ûÊÄÅÊù°‰ª∂Ôºõ Âú®Ëé∑Âèñ‰ªªÂä°Êó∂ÔºåË¶ÅÈÄöËøáÁ∫øÁ®ãÊ±†ÁöÑÁä∂ÊÄÅÊù•Âà§Êñ≠Â∫îËØ•ÁªìÊùüÂ∑•‰ΩúÁ∫øÁ®ãËøòÊòØÈòªÂ°ûÁ∫øÁ®ãÁ≠âÂæÖÊñ∞ÁöÑ‰ªªÂä°Ôºå‰πüËß£Èáä‰∫Ü‰∏∫‰ªÄ‰πàÂÖ≥Èó≠Á∫øÁ®ãÊ±†Êó∂Ë¶Å‰∏≠Êñ≠Â∑•‰ΩúÁ∫øÁ®ã‰ª•Âèä‰∏∫‰ªÄ‰πàÊØè‰∏Ä‰∏™workerÈÉΩÈúÄË¶Ålock„ÄÇ Âú®ÂêëÁ∫øÁ®ãÊ±†Êèê‰∫§‰ªªÂä°Êó∂ÔºåÈô§‰∫ÜexecuteÊñπÊ≥ïÔºåËøòÊúâ‰∏Ä‰∏™submitÊñπÊ≥ïÔºåsubmitÊñπÊ≥ï‰ºöËøîÂõû‰∏Ä‰∏™FutureÂØπË±°Áî®‰∫éËé∑ÂèñËøîÂõûÂÄºÔºåÂÖ∑‰ΩìÂèØ‰ª•ËßÅ Â§öÁ∫øÁ®ãÔºà‰∏ÄÔºâ‰∏≠ÁöÑ ÊúÄÂºÄÂßãÁöÑ demo„ÄÇ ÈÅáÂà∞ÁöÑÈóÆÈ¢òÊúÄËøëÂ•Ω‰πÖÊ≤°Â§ç‰π†‰∫ÜÔºåÁ™ÅÁÑ∂ÊúâÁÇπÂØπÁ∫øÁ®ãÊ±†ÊôïÂ§¥ËΩ¨ÂêëÔºåÈòªÂ°ûÈòüÂàóÂà∞Â∫ïÊòØÂ≠òÂÇ®‰ªÄ‰πàÁöÑÂë¢ÔºüÈáåÈù¢ÊòØÊÄé‰πà‰∏Ä‰∏™Â≠òÂÇ®ÂΩ¢ÂºèÂë¢ÔºüÈòªÂ°ûÈòüÂàóÂèàÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÂë¢ÔºüÈòªÂ°ûÈòüÂàóÂíå AQS ‰∏≠ÁöÑ CLH Âèò‰ΩìÈòüÂàóÂèàÊúâ‰ªÄ‰πàÂÖ≥Á≥ªÂíåËÅîÁ≥ªÂë¢ÔºüÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÂèàÊòØÂ¶Ç‰ΩïÁÆ°ÁêÜÁöÑÂë¢Ôºü‰ªñ‰ª¨ÊòØÂ¶Ç‰ΩïÂ≠òÂÇ®ÁöÑÂë¢ÔºüÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÂèàÊòØÊÄé‰πàÂéªËøê‰ΩúÁöÑÂë¢Ôºü Êù•ÔºåËøô‰∫õÈóÆÈ¢ò‰∏Ä‰∏™‰∏Ä‰∏™Êù•Ëß£ÂÜ≥ÔºÅ ÈòªÂ°ûÈòüÂàóÂà∞Â∫ïÂ≠òÂÇ®ÁöÑÊòØ‰ªÄ‰πàÔºü Â≠òÂÇ®ÁöÑÊòØ Runnable ÂØπË±°Ôºå‰πüÂ∞±ÊòØÊàë‰ª¨Â∏∏ËØ¥ÁöÑ‰ªªÂä° ÈáåÈù¢ÊòØÂ¶Ç‰ΩïÂ≠òÂÇ®‰ª•ÂèäÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü ArrayBlockingQueue ÊòØÂà©Áî®Êï∞ÁªÑÂ≠òÂÇ®ÁöÑÔºåLinkedBlockingQueue ÊòØÂà©Áî®ÁöÑÈìæË°®Â≠òÂÇ®ÁöÑÔºåËøôÈáåÊØîÊôÆÈÄöÁöÑÈòüÂàóÂ§ö‰∫Ü‰∏Ä‰∏™‰ΩøÁî®‰∫Ü ReentrantLock ‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®Âπ∂‰∏îÈÄöËøá‰ΩøÁî® Condition ÈòüÂàó‰øùËØÅÊ∂àË¥πËÄÖ/Áîü‰∫ßËÄÖÊ®°Âºè„ÄÇ ÈòªÂ°ûÈòüÂàóÂíå AQS ÁöÑ CLHÂèò‰ΩìÈòüÂàóÊúâÂï•ÂÖ≥Á≥ªÂíåËÅîÁ≥ª Ê≤°Êúâ‰ªª‰ΩïÂÖ≥Á≥ªÔºåCLH Âèò‰ΩìÈòüÂàóÊòØÂêåÊ≠•ÈòüÂàóÔºåÂ≠òÂÇ®ÁöÑÊòØÁ∫øÁ®ãÂåÖË£ÖÂêéÁöÑ NodeÔºåÊàë‰ª¨ËøôÈáåÁöÑÈòªÂ°ûÈòüÂàó‰ªÖ‰ªÖÊòØ‰ªªÂä°ÂåÖË£ÖÂêéÁöÑËäÇÁÇπÔºåÊâÄ‰ª•Âπ∂Ê≤°Êúâ CLH Âèò‰ΩìÈòüÂàóÈÇ£‰πàÂ§çÊùÇÔºå‰∏çÈúÄË¶ÅËøõË°å‰∏Ä‰∏™Á∫øÁ®ãÂî§ÈÜíÈòªÂ°ûÁöÑËøáÁ®ã„Äåpark„ÄÅunpark„ÄçÔºå‰πüÊó†ÈúÄÂéªËÄÉËôëÂÖ±‰∫´ÈîÅÂíåÁã¨Âç†ÈîÅ‰πãÁ±ªÁöÑÔºåÊõ¥‰∏çÁî®ËÄÉËôëÂêåÊ≠•ÈòüÂàóÂíåÊù°‰ª∂ÈòüÂàóÁöÑÂàáÊç¢ËøáÁ®ã„ÄÇ Á∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊòØÂ¶Ç‰ΩïÁÆ°ÁêÜÁöÑÂë¢ÔºüÂèàÊòØÂ¶Ç‰ΩïÂ≠òÂÇ®ÁöÑÂë¢Ôºü Á∫øÁ®ãÊ±†ÂÖ∂ÂÆûÁÆ°ÁêÜÁöÑÂπ∂‰∏çÊòØÁ∫øÁ®ãÔºåËÄåÊòØ WorkerÔºåWorker ÂåÖÊã¨ÁöÑÂ±ûÊÄßÊúâÁ∫øÁ®ã„ÄÅ‰ªªÂä°ÔºåÊØè‰∏Ä‰∏™ Worker ÈÉΩÊòØÁî® HashSet Â≠òÂÇ®ÁöÑ„ÄÇ Á∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÂ¶Ç‰ΩïËøê‰ΩúÁöÑÔºü ÊúÄÂºÄÂßãÁöÑ Worker ÊòØÁõ¥Êé•‰ªªÂä°Êù•‰∫ÜÂ∞±Áõ¥Êé• new thread Âπ∂Êé•Âèó‰ªªÂä°ÔºåÂõ†‰∏∫Ê≠§Êó∂ËøòÊ≤°Âà∞Ê†∏ÂøÉÁ∫øÁ®ãÊï∞ÔºåÂΩìÂà∞‰∫ÜÊ†∏ÂøÉÁ∫øÁ®ãÊï∞‰πãÂêéÔºåWorker Â∞±‰ºöÂéªÈòüÂàóÈáå take Áõ∏Â∫îÁöÑ‰ªªÂä°ÔºåÂ¶ÇÊûúÈòüÂàó‰πüÊª°‰∫ÜÁöÑËØùÔºåÂ∞±Âéª new Êñ∞ÁöÑ Worker Êé•Âèó‰ªªÂä°ÔºåÂ¶ÇÊûúÂà∞‰∫ÜÊúÄÂ§ßÁ∫øÁ®ãÊï∞ÔºåÂ∞±Áõ¥Êé•ÈªòËÆ§ÊäõÂºÇÂ∏∏„ÄåÂΩìÁÑ∂ËøòÊúâÂè¶Â§ñ‰∏âÁßçÊé™ÊñΩÔºö1. ‰∏¢ÂºÉÈòªÂ°ûÈòüÂàó‰∏≠ÊúÄÂâçÈù¢ÁöÑ 2. Áõ¥Êé•‰∏çÁÆ°Ëøô‰∏™‰ªªÂä° 3. ‰ΩøÁî®Ë∞ÉÁî®ÁöÑËøô‰∏™Á∫øÁ®ãÂéªÊâßË°å„Äç„ÄÇ ËøôÈáå Worker ÂéªÊãø‰ªªÂä°ÈúÄË¶ÅÊ≥®ÊÑè‰∏Ä‰∏ãÔºåÁî±‰∫é ÈòªÂ°ûÈòüÂàóÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÊâÄ‰ª•‰∏ç‰ºöÂ≠òÂú®‰∏Ä‰∏™‰ªªÂä°ÂèØËÉΩË¢´Â§ö‰∏™Á∫øÁ®ãÂèñËµ∞ÔºåËøôÊòØ‰∏çÂèØËÉΩÁöÑÔºåÂÖ∂Ê¨°ÔºåÂæóÊ≥®ÊÑè‰∏Ä‰∏ãÔºåWorker ÊúâÂéªÁªßÊâø AQSÔºåËøôÊòØÊàëËÆ§‰∏∫Á∫øÁ®ãÊ±†‰∏≠ÂÜôÁöÑÊúÄÂ•ΩÁöÑ‰∏ÄÂùóÔºå‰∏ªË¶ÅÊòØËß£ÂÜ≥‰∫Ü‰∏§‰∏™ÈóÆÈ¢ò„ÄåÊîØÊåÅ‰∏≠Êñ≠‰ª•ÂèäÊ†áËÆ∞Á∫øÁ®ãÊòØÂê¶Á©∫Èó≤„ÄçÔºåÊàë‰∏ãÈù¢‰πüÊúâËØ¶ÁªÜËØ¥Ëøô‰∏™„ÄÇ Ëøô‰∏™‰πüËÆ≤ÁöÑËøòË°åÔºöhttps://www.cnblogs.com/micrari/p/7429364.html Â¶Ç‰Ωï‰øùËØÅÊ†∏ÂøÉÁ∫øÁ®ã‰∏çË¢´ÈîÄÊØÅ timedOutË∂ÖÊó∂Ê†áËÆ∞ÈªòËÆ§ËÆæÁΩÆ‰∏∫falseÔºõ ËÆ°ÁÆótimedÁöÑÂÄºÔºåËØ•ÂÄºÂÜ≥ÂÆö‰∫ÜÁ∫øÁ®ãÁöÑÁîüÊ≠ªÂ§ßÊùÉÔºå(timed &amp;&amp; timedOut) Âç≥ÊòØÁ∫øÁ®ãË∂ÖÊó∂ÂõûÊî∂ÁöÑÊù°‰ª∂‰πã‰∏ÄÔºåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÁ¨¨‰∏ÄÊ¨°(timed &amp;&amp; timedOut) ‰∏∫falseÔºåÂõ†‰∏∫timedOutÈªòËÆ§ÂÄº‰∏∫falseÔºåÊ≠§Êó∂ËøòÊ≤°Âà∞pollË∂ÖÊó∂Ëé∑ÂèñÁöÑÊìç‰ΩúÔºõ Ê†πÊçÆtimedÂÄºÊù•ÂÜ≥ÂÆöÊòØÁî®ÈòªÂ°ûË∂ÖÊó∂Ëé∑Âèñ‰ªªÂä°ËøòÊòØÈòªÂ°ûËé∑Âèñ‰ªªÂä°ÔºåÂ¶ÇÊûúÁî®ÈòªÂ°ûË∂ÖÊó∂Ëé∑Âèñ‰ªªÂä°ÔºåË∂ÖÊó∂ÂêétimedOut‰ºöË¢´ËÆæÁΩÆ‰∏∫trueÔºåÊé•ÁùÄÁªßÁª≠Âæ™ÁéØÔºåËã•(timed &amp;&amp; timedOut) ‰∏∫trueÔºåÊª°Ë∂≥Á∫øÁ®ãË∂ÖÊó∂ÂõûÊî∂„ÄÇ Ê≤°ÊúâÁªÑÁªáÁöÑ‰∏Ä‰∫õËØùÔºåÁïôÂú®ËøôÂêßÔºåÂΩìÊó∂ÊÉ≥Âà∞Âï•Â∞±ËØ¥Âï•‰∫Ü „ÄåÈóÆÈ¢òÁöÑÊ†∏ÂøÉÊòØÂå∫ÂàÜÂºÄ Runnable Âíå ThreadÁöÑÂå∫Âà´Ôºå‰∏Ä‰∏™ÊòØ‰ªªÂä°Ôºå‰∏Ä‰∏™ÊòØÁ∫øÁ®ã„Äç „ÄåÈòªÂ°ûÈòüÂàó‰∏≠Â≠òÂÇ®ÁöÑÊòØRunnableÔºåÈòªÂ°ûÈòüÂàóÂ∫ïÂ±ÇÂ∞±ÊòØÈìæË°®ÂÆûÁé∞ÔºåÁÑ∂ÂêéÈÄöËøá ReentrantLock ËææÂà∞Á∫øÁ®ãÂÆâÂÖ®ÔºåÂπ∂‰∏îÈÄöËøá Condition ÂÆåÊàêÁîü‰∫ßËÄÖ/Ê∂àË¥πËÄÖÊ®°ÂºèÔºåÁÑ∂ÂêéÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ã‰ΩøÁî® hashSet Â≠òÂÇ®ÔºåÊ†∏ÂøÉÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÁî±‰∫é timeoutÁ≠â‰∫éÊó†Á©∑ÊâÄ‰ª•‰∏ç‰ºöË¢´ÈîÄÊØÅ„ÄÇÈòªÂ°ûÈòüÂàóÂíå AQS Ê≤°ÊúâÂÖ≥Á≥ªÔºåÂè™ÊòØÁî®Âà∞‰∫Ü Condition Âíå ReentrantLock „Äç „ÄåÁ∫øÁ®ãÊ±†ÁöÑÁ∫øÁ®ãÔºånew Âá∫Êù•ÂêéÔºå‰ºöË¢´Â∞ÅË£ÖÊàê Worker ÂØπË±°ÔºåÁÑ∂ÂêéÈáåÈù¢ÂèØ‰ª•ËøêË°å‰ªªÂä°ÔºåÊâÄÊúâÁöÑ Worker ÊòØÊîæÂú® HashSet ‰∏≠ÁöÑ„ÄÇ„Äç „ÄåÁ∫øÁ®ãÊ±†‰∏≠ÊàëËßâÂæóÊúÄÁ≤æÂ¶ôÁöÑÂú∞ÊñπÊòØËÆ© worker ÂéªÁªßÊâø AQSÔºåËøôÊòØÈùûÂ∏∏Â∑ßÂ¶ôÁöÑËÆæËÆ°ÔºåËøô‰∏™ËÆæËÆ°‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂú®Êõ¥Êîπ shutdown Âíå stop ÁöÑÊó∂ÂÄôÂÅöÂá∫ÁöÑËÆæËÆ°Ôºå Êàë‰ª¨Áü•ÈÅìÔºåshutdownÂ∞±ÊòØ‰∏çÂÜçÊé•ÂèóÊñ∞ÁöÑ‰ªªÂä°Ôºå‰ΩÜÊòØ‰∏çËÉΩÊääÊ≠£Âú®ËøêË°åÁöÑ‰ªªÂä°ÂÅúÊéâÔºåÂêåÊó∂Ë¶ÅÊääÂ§Ñ‰∫éÁ©∫Èó≤ÁöÑÁä∂ÊÄÅÁöÑÁ∫øÁ®ãÂÅúÊéâÔºåÂú®ËøôÈáåÂ¶Ç‰ΩïÂå∫ÂàÜÁ∫øÁ®ãÊòØÂê¶Á©∫Èó≤ÊòØ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÊ∫êÁ†ÅÁöÑËß£ÂÜ≥ÊñπÊ°àÊòØËÆ© worker ÂåÖË£ÖÊàê‰∏Ä‰∏™‰∫íÊñ•ÈîÅÔºåÂ¶ÇÊûúÂú®ËøêË°åÂ∞±ÁªôËá™Â∑±Âä†ÈîÅÔºåËøôÊ†∑ÊàëÂà§Êñ≠Á∫øÁ®ãÊòØÂê¶Á©∫Èó≤Â∞±ÂèØ‰ª•Áõ¥Êé•Áî® tryAcquire() ÂéªÂà§Êñ≠‰∫ÜÔºõ ÂéüÂõ†‰πã‰∫åÂ∞±ÊòØ stop ÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÊòØÈúÄË¶ÅÂº∫Âà∂ÂÅúÊéâÊ≠£Âú®ËøêË°åÁöÑ‰ªªÂä°ÁöÑÔºåËÄåAQSÂàöÂ•ΩÂ∞±Êèê‰æõÂìçÂ∫î‰∏≠Êñ≠ÔºåÊâÄ‰ª•ËøôÂèàÊòØworkerÁªßÊâøAQSÁöÑ‰∏ÄÂ§ßÂéüÂõ†„ÄÇ„Äç http://objcoding.com/2019/04/25/threadpool-running/#worker Ëøô‰∏™ÂØπ ‚ÄùÂ¶Ç‰Ωï‰øùËØÅÊ†∏ÂøÉÁ∫øÁ®ã‰∏çË¢´ÈîÄÊØÅ‚ÄúËÆ≤ÁöÑÊå∫Â•ΩÁöÑ Á∫øÁ®ãÊ±†Ôºà‰∫åÔºâÔºöScheduledThreadPoolExecutor ËΩ¨Ôºöhttp://www.ideabuffer.cn/2017/04/14/Ê∑±ÂÖ•ÁêÜËß£JavaÁ∫øÁ®ãÊ±†ÔºöScheduledThreadPoolExecutor/ ‰ªãÁªçËá™JDK1.5ÂºÄÂßãÔºåJDKÊèê‰æõ‰∫ÜScheduledThreadPoolExecutorÁ±ªÊù•ÊîØÊåÅÂë®ÊúüÊÄß‰ªªÂä°ÁöÑË∞ÉÂ∫¶„ÄÇÂú®Ëøô‰πãÂâçÁöÑÂÆûÁé∞ÈúÄË¶Å‰æùÈù†TimerÂíåTimerTaskÊàñËÄÖÂÖ∂ÂÆÉÁ¨¨‰∏âÊñπÂ∑•ÂÖ∑Êù•ÂÆåÊàê„ÄÇ‰ΩÜTimerÊúâ‰∏çÂ∞ëÁöÑÁº∫Èô∑Ôºö TimerÊòØÂçïÁ∫øÁ®ãÊ®°ÂºèÔºõ Â¶ÇÊûúÂú®ÊâßË°å‰ªªÂä°ÊúüÈó¥Êüê‰∏™TimerTaskËÄóÊó∂ËæÉ‰πÖÔºåÈÇ£‰πàÂ∞±‰ºöÂΩ±ÂìçÂÖ∂ÂÆÉ‰ªªÂä°ÁöÑË∞ÉÂ∫¶Ôºõ TimerÁöÑ‰ªªÂä°Ë∞ÉÂ∫¶ÊòØÂü∫‰∫éÁªùÂØπÊó∂Èó¥ÁöÑÔºåÂØπÁ≥ªÁªüÊó∂Èó¥ÊïèÊÑüÔºõ Timer‰∏ç‰ºöÊçïËé∑ÊâßË°åTimerTaskÊó∂ÊâÄÊäõÂá∫ÁöÑÂºÇÂ∏∏ÔºåÁî±‰∫éTimerÊòØÂçïÁ∫øÁ®ãÔºåÊâÄ‰ª•‰∏ÄÊó¶Âá∫Áé∞ÂºÇÂ∏∏ÔºåÂàôÁ∫øÁ®ãÂ∞±‰ºöÁªàÊ≠¢ÔºåÂÖ∂‰ªñ‰ªªÂä°‰πüÂæó‰∏çÂà∞ÊâßË°å„ÄÇ ScheduledThreadPoolExecutorÁªßÊâøThreadPoolExecutorÊù•ÈáçÁî®Á∫øÁ®ãÊ±†ÁöÑÂäüËÉΩÔºåÂÆÉÁöÑÂÆûÁé∞ÊñπÂºèÂ¶Ç‰∏ãÔºö Â∞Ü‰ªªÂä°Â∞ÅË£ÖÊàêScheduledFutureTaskÂØπË±°ÔºåScheduledFutureTaskÂü∫‰∫éÁõ∏ÂØπÊó∂Èó¥Ôºå‰∏çÂèóÁ≥ªÁªüÊó∂Èó¥ÁöÑÊîπÂèòÊâÄÂΩ±ÂìçÔºõ ScheduledFutureTaskÂÆûÁé∞‰∫Üjava.lang.ComparableÊé•Âè£Âíåjava.util.concurrent.DelayedÊé•Âè£ÔºåÊâÄ‰ª•Êúâ‰∏§‰∏™ÈáçË¶ÅÁöÑÊñπÊ≥ïÔºöcompareToÂíågetDelay„ÄÇcompareToÊñπÊ≥ïÁî®‰∫éÊØîËæÉ‰ªªÂä°‰πãÈó¥ÁöÑ‰ºòÂÖàÁ∫ßÂÖ≥Á≥ªÔºåÂ¶ÇÊûúË∑ùÁ¶ª‰∏ãÊ¨°ÊâßË°åÁöÑÊó∂Èó¥Èó¥ÈöîËæÉÁü≠ÔºåÂàô‰ºòÂÖàÁ∫ßÈ´òÔºõgetDelayÊñπÊ≥ïÁî®‰∫éËøîÂõûË∑ùÁ¶ª‰∏ãÊ¨°‰ªªÂä°ÊâßË°åÊó∂Èó¥ÁöÑÊó∂Èó¥Èó¥ÈöîÔºõ ScheduledThreadPoolExecutorÂÆö‰πâ‰∫Ü‰∏Ä‰∏™DelayedWorkQueueÔºåÂÆÉÊòØ‰∏Ä‰∏™ÊúâÂ∫èÈòüÂàóÔºå‰ºöÈÄöËøáÊØè‰∏™‰ªªÂä°ÊåâÁÖßË∑ùÁ¶ª‰∏ãÊ¨°ÊâßË°åÊó∂Èó¥Èó¥ÈöîÁöÑÂ§ßÂ∞èÊù•ÊéíÂ∫èÔºõ ScheduledFutureTaskÁªßÊâøËá™FutureTaskÔºåÂèØ‰ª•ÈÄöËøáËøîÂõûFutureÂØπË±°Êù•Ëé∑ÂèñÊâßË°åÁöÑÁªìÊûú„ÄÇ ÈÄöËøáÂ¶Ç‰∏äÁöÑ‰ªãÁªçÔºåÂèØ‰ª•ÂØπÊØî‰∏Ä‰∏ãTimerÂíåScheduledThreadPoolExecutorÔºö Timer ScheduledThreadPoolExecutor ÂçïÁ∫øÁ®ã Â§öÁ∫øÁ®ã Âçï‰∏™‰ªªÂä°ÊâßË°åÊó∂Èó¥ÂΩ±ÂìçÂÖ∂‰ªñ‰ªªÂä°Ë∞ÉÂ∫¶ Â§öÁ∫øÁ®ãÔºå‰∏ç‰ºöÂΩ±Âìç Âü∫‰∫éÁªùÂØπÊó∂Èó¥ Âü∫‰∫éÁõ∏ÂØπÊó∂Èó¥ ‰∏ÄÊó¶ÊâßË°å‰ªªÂä°Âá∫Áé∞ÂºÇÂ∏∏‰∏ç‰ºöÊçïËé∑ÔºåÂÖ∂‰ªñ‰ªªÂä°Âæó‰∏çÂà∞ÊâßË°å Â§öÁ∫øÁ®ãÔºåÂçï‰∏™‰ªªÂä°ÁöÑÊâßË°å‰∏ç‰ºöÂΩ±ÂìçÂÖ∂‰ªñÁ∫øÁ®ã ÊâÄ‰ª•ÔºåÂú®JDK1.5‰πãÂêéÔºåÂ∫îËØ•Ê≤°‰ªÄ‰πàÁêÜÁî±ÁªßÁª≠‰ΩøÁî®TimerËøõË°å‰ªªÂä°Ë∞ÉÂ∫¶‰∫Ü„ÄÇ ScheduledThreadPoolExecutorÁöÑ‰ΩøÁî®‰∏ãÈù¢Áî®‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑ‰æãÂ≠êÊù•ËØ¥ÊòéScheduledThreadPoolExecutorÁöÑ‰ΩøÁî®Ôºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253public class ScheduledThreadPoolTest &#123; public static void main(String[] args) throws InterruptedException &#123; // ÂàõÂª∫Â§ßÂ∞è‰∏∫5ÁöÑÁ∫øÁ®ãÊ±† ScheduledExecutorService scheduledThreadPool = Executors.newScheduledThreadPool(5); for (int i = 0; i &lt; 3; i++) &#123; Task worker = new Task("task-" + i); // Âè™ÊâßË°å‰∏ÄÊ¨°// scheduledThreadPool.schedule(worker, 5, TimeUnit.SECONDS); // Âë®ÊúüÊÄßÊâßË°åÔºåÊØè5ÁßíÊâßË°å‰∏ÄÊ¨° scheduledThreadPool.scheduleAtFixedRate(worker, 0,5, TimeUnit.SECONDS); &#125; Thread.sleep(10000); System.out.println("Shutting down executor..."); // ÂÖ≥Èó≠Á∫øÁ®ãÊ±† scheduledThreadPool.shutdown(); boolean isDone; // Á≠âÂæÖÁ∫øÁ®ãÊ±†ÁªàÊ≠¢ do &#123; isDone = scheduledThreadPool.awaitTermination(1, TimeUnit.DAYS); System.out.println("awaitTermination..."); &#125; while(!isDone); System.out.println("Finished all threads"); &#125;&#125;class Task implements Runnable &#123; private String name; public Task(String name) &#123; this.name = name; &#125; @Override public void run() &#123; System.out.println("name = " + name + ", startTime = " + new Date()); try &#123; Thread.sleep(1000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println("name = " + name + ", endTime = " + new Date()); &#125;&#125; ‰∏ãÈù¢Â∞±Êù•ÂÖ∑‰ΩìÂàÜÊûê‰∏Ä‰∏ãScheduledThreadPoolExecutorÁöÑÂÆûÁé∞ËøáÁ®ã„ÄÇ ScheduledThreadPoolExecutorÁöÑÂÆûÁé∞ScheduledThreadPoolExecutorÁöÑÁ±ªÁªìÊûÑÁúã‰∏ãScheduledThreadPoolExecutorÂÜÖÈÉ®ÁöÑÁ±ªÂõæÔºö ‰∏çË¶ÅË¢´Ëøô‰πàÂ§öÁ±ªÂêìÂà∞ÔºåËøôÈáåÂè™‰∏çËøáÊòØ‰∏∫‰∫ÜÊõ¥Ê∏ÖÊ•öÁöÑ‰∫ÜËß£ScheduledThreadPoolExecutorÊúâÂÖ≥Ë∞ÉÂ∫¶ÂíåÈòüÂàóÁöÑÊé•Âè£„ÄÇ ScheduledThreadPoolExecutorÁªßÊâøËá™ThreadPoolExecutorÔºåÂÆûÁé∞‰∫ÜScheduledExecutorServiceÊé•Âè£ÔºåËØ•Êé•Âè£ÂÆö‰πâ‰∫ÜscheduleÁ≠â‰ªªÂä°Ë∞ÉÂ∫¶ÁöÑÊñπÊ≥ï„ÄÇ ÂêåÊó∂ScheduledThreadPoolExecutorÊúâ‰∏§‰∏™ÈáçË¶ÅÁöÑÂÜÖÈÉ®Á±ªÔºöDelayedWorkQueueÂíåScheduledFutureTask„ÄÇÂèØ‰ª•ÁúãÂà∞ÔºåDelayeddWorkQueueÊòØ‰∏Ä‰∏™ÈòªÂ°ûÈòüÂàóÔºåËÄåScheduledFutureTaskÁªßÊâøËá™FutureTaskÔºåÂπ∂‰∏îÂÆûÁé∞‰∫ÜDelayedÊé•Âè£„ÄÇÊúâÂÖ≥FutureTaskÁöÑ‰ªãÁªçËØ∑ÂèÇËÄÉÂè¶‰∏ÄÁØáÊñáÁ´†ÔºöFutureTaskÊ∫êÁ†ÅËß£Êûê„ÄÇ ScheduledThreadPoolExecutorÁöÑÊûÑÈÄ†ÊñπÊ≥ïScheduledThreadPoolExecutorÊúâ3‰∏≠ÊûÑÈÄ†ÊñπÊ≥ïÔºö 123456789101112131415161718public ScheduledThreadPoolExecutor(int corePoolSize, ThreadFactory threadFactory) &#123; super(corePoolSize, Integer.MAX_VALUE, 0, NANOSECONDS, new DelayedWorkQueue(), threadFactory);&#125;public ScheduledThreadPoolExecutor(int corePoolSize, RejectedExecutionHandler handler) &#123; super(corePoolSize, Integer.MAX_VALUE, 0, NANOSECONDS, new DelayedWorkQueue(), handler);&#125;public ScheduledThreadPoolExecutor(int corePoolSize, ThreadFactory threadFactory, RejectedExecutionHandler handler) &#123; super(corePoolSize, Integer.MAX_VALUE, 0, NANOSECONDS, new DelayedWorkQueue(), threadFactory, handler);&#125; Âõ†‰∏∫ScheduledThreadPoolExecutorÁªßÊâøËá™ThreadPoolExecutorÔºåÊâÄ‰ª•ËøôÈáåÈÉΩÊòØË∞ÉÁî®ÁöÑThreadPoolExecutorÁ±ªÁöÑÊûÑÈÄ†ÊñπÊ≥ï„ÄÇÊúâÂÖ≥ThreadPoolExecutorÂèØ‰ª•ÂèÇËÄÉÊ∑±ÂÖ•ÁêÜËß£JavaÁ∫øÁ®ãÊ±†ÔºöThreadPoolExecutor„ÄÇ ËøôÈáåÊ≥®ÊÑè‰º†ÂÖ•ÁöÑÈòªÂ°ûÈòüÂàóÊòØDelayedWorkQueueÁ±ªÂûãÁöÑÂØπË±°„ÄÇÂêéÈù¢‰ºöËØ¶ÁªÜ‰ªãÁªç„ÄÇ scheduleÊñπÊ≥ïÂú®‰∏äÊñáÁöÑ‰æãÂ≠ê‰∏≠Ôºå‰ΩøÁî®‰∫ÜscheduleÊñπÊ≥ïÊù•ËøõË°å‰ªªÂä°Ë∞ÉÂ∫¶ÔºåscheduleÊñπÊ≥ïÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324public ScheduledFuture&lt;?&gt; schedule(Runnable command, long delay, TimeUnit unit) &#123; if (command == null || unit == null) throw new NullPointerException(); RunnableScheduledFuture&lt;?&gt; t = decorateTask(command, new ScheduledFutureTask&lt;Void&gt;(command, null, triggerTime(delay, unit))); delayedExecute(t); return t;&#125;public &lt;V&gt; ScheduledFuture&lt;V&gt; schedule(Callable&lt;V&gt; callable, long delay, TimeUnit unit) &#123; if (callable == null || unit == null) throw new NullPointerException(); RunnableScheduledFuture&lt;V&gt; t = decorateTask(callable, new ScheduledFutureTask&lt;V&gt;(callable, triggerTime(delay, unit))); delayedExecute(t); return t;&#125; È¶ñÂÖàÔºåËøôÈáåÁöÑ‰∏§‰∏™ÈáçËΩΩÁöÑscheduleÊñπÊ≥ïÂè™ÊòØ‰º†ÂÖ•ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞‰∏çÂêåÔºåÂèØ‰ª•ÊòØRunnableÂØπË±°ÊàñËÄÖCallableÂØπË±°„ÄÇ‰ºöÊää‰º†ÂÖ•ÁöÑ‰ªªÂä°Â∞ÅË£ÖÊàê‰∏Ä‰∏™RunnableScheduledFutureÂØπË±°ÔºåÂÖ∂ÂÆû‰πüÂ∞±ÊòØScheduledFutureTaskÂØπË±°ÔºådecorateTaskÈªòËÆ§‰ªÄ‰πàÂäüËÉΩÈÉΩÊ≤°ÊúâÂÅöÔºåÂ≠êÁ±ªÂèØ‰ª•ÈáçÂÜôËØ•ÊñπÊ≥ïÔºö 123456789101112131415/** * ‰øÆÊîπÊàñÊõøÊç¢Áî®‰∫éÊâßË°å runnable ÁöÑ‰ªªÂä°„ÄÇÊ≠§ÊñπÊ≥ïÂèØÈáçÂÜôÁî®‰∫éÁÆ°ÁêÜÂÜÖÈÉ®‰ªªÂä°ÁöÑÂÖ∑‰ΩìÁ±ª„ÄÇÈªòËÆ§ÂÆûÁé∞Âè™ËøîÂõûÁªôÂÆö‰ªªÂä°„ÄÇ */protected &lt;V&gt; RunnableScheduledFuture&lt;V&gt; decorateTask( Runnable runnable, RunnableScheduledFuture&lt;V&gt; task) &#123; return task;&#125;/** * ‰øÆÊîπÊàñÊõøÊç¢Áî®‰∫éÊâßË°å callable ÁöÑ‰ªªÂä°„ÄÇÊ≠§ÊñπÊ≥ïÂèØÈáçÂÜôÁî®‰∫éÁÆ°ÁêÜÂÜÖÈÉ®‰ªªÂä°ÁöÑÂÖ∑‰ΩìÁ±ª„ÄÇÈªòËÆ§ÂÆûÁé∞Âè™ËøîÂõûÁªôÂÆö‰ªªÂä°„ÄÇ */protected &lt;V&gt; RunnableScheduledFuture&lt;V&gt; decorateTask( Callable&lt;V&gt; callable, RunnableScheduledFuture&lt;V&gt; task) &#123; return task;&#125; ÁÑ∂ÂêéÔºåÈÄöËøáË∞ÉÁî®delayedExecuteÊñπÊ≥ïÊù•Âª∂Êó∂ÊâßË°å‰ªªÂä°„ÄÇÊúÄÂêéÔºåËøîÂõû‰∏Ä‰∏™ScheduledFutureÂØπË±°„ÄÇ scheduleAtFixedRateÊñπÊ≥ïËØ•ÊñπÊ≥ïËÆæÁΩÆ‰∫ÜÊâßË°åÂë®ÊúüÔºå‰∏ã‰∏ÄÊ¨°ÊâßË°åÊó∂Èó¥Áõ∏ÂΩì‰∫éÊòØ‰∏ä‰∏ÄÊ¨°ÁöÑÊâßË°åÊó∂Èó¥Âä†‰∏äperiodÔºåÂÆÉÊòØÈááÁî®Â∑≤Âõ∫ÂÆöÁöÑÈ¢ëÁéáÊù•ÊâßË°å‰ªªÂä°Ôºö 123456789101112131415161718public ScheduledFuture&lt;?&gt; scheduleAtFixedRate(Runnable command, long initialDelay, long period, TimeUnit unit) &#123; if (command == null || unit == null) throw new NullPointerException(); if (period &lt;= 0) throw new IllegalArgumentException(); ScheduledFutureTask&lt;Void&gt; sft = new ScheduledFutureTask&lt;Void&gt;(command, null, triggerTime(initialDelay, unit), unit.toNanos(period)); RunnableScheduledFuture&lt;Void&gt; t = decorateTask(command, sft); sft.outerTask = t; delayedExecute(t); return t;&#125; scheduleWithFixedDelayÊñπÊ≥ïËØ•ÊñπÊ≥ïËÆæÁΩÆ‰∫ÜÊâßË°åÂë®ÊúüÔºå‰∏éscheduleAtFixedRateÊñπÊ≥ï‰∏çÂêåÁöÑÊòØÔºå‰∏ã‰∏ÄÊ¨°ÊâßË°åÊó∂Èó¥ÊòØ‰∏ä‰∏ÄÊ¨°‰ªªÂä°ÊâßË°åÂÆåÁöÑÁ≥ªÁªüÊó∂Èó¥Âä†‰∏äperiodÔºåÂõ†ËÄåÂÖ∑‰ΩìÊâßË°åÊó∂Èó¥‰∏çÊòØÂõ∫ÂÆöÁöÑÔºå‰ΩÜÂë®ÊúüÊòØÂõ∫ÂÆöÁöÑÔºåÊòØÈááÁî®Áõ∏ÂØπÂõ∫ÂÆöÁöÑÂª∂ËøüÊù•ÊâßË°å‰ªªÂä°Ôºö 123456789101112131415161718public ScheduledFuture&lt;?&gt; scheduleWithFixedDelay(Runnable command, long initialDelay, long delay, TimeUnit unit) &#123; if (command == null || unit == null) throw new NullPointerException(); if (delay &lt;= 0) throw new IllegalArgumentException(); ScheduledFutureTask&lt;Void&gt; sft = new ScheduledFutureTask&lt;Void&gt;(command, null, triggerTime(initialDelay, unit), unit.toNanos(-delay)); RunnableScheduledFuture&lt;Void&gt; t = decorateTask(command, sft); sft.outerTask = t; delayedExecute(t); return t;&#125; Ê≥®ÊÑèËøôÈáåÁöÑunit.toNanos(-delay));ÔºåËøôÈáåÊääÂë®ÊúüËÆæÁΩÆ‰∏∫Ë¥üÊï∞Êù•Ë°®Á§∫ÊòØÁõ∏ÂØπÂõ∫ÂÆöÁöÑÂª∂ËøüÊâßË°å„ÄÇ scheduleAtFixedRateÂíåscheduleWithFixedDelayÁöÑÂå∫Âà´Âú®setNextRunTimeÊñπÊ≥ï‰∏≠Â∞±ÂèØ‰ª•ÁúãÂá∫Êù•Ôºö 123456789private void setNextRunTime() &#123; long p = period; // Âõ∫ÂÆöÈ¢ëÁéáÔºå‰∏äÊ¨°ÊâßË°åÊó∂Èó¥Âä†‰∏äÂë®ÊúüÊó∂Èó¥ if (p &gt; 0) time += p; // Áõ∏ÂØπÂõ∫ÂÆöÂª∂ËøüÊâßË°åÔºå‰ΩøÁî®ÂΩìÂâçÁ≥ªÁªüÊó∂Èó¥Âä†‰∏äÂë®ÊúüÊó∂Èó¥ else time = triggerTime(-p);&#125; setNextRunTimeÊñπÊ≥ï‰ºöÂú®runÊñπÊ≥ï‰∏≠ÊâßË°åÂÆå‰ªªÂä°ÂêéË∞ÉÁî®„ÄÇ triggerTimeÊñπÊ≥ïtriggerTimeÊñπÊ≥ïÁî®‰∫éËé∑Âèñ‰∏ã‰∏ÄÊ¨°ÊâßË°åÁöÑÂÖ∑‰ΩìÊó∂Èó¥Ôºö 123456789private long triggerTime(long delay, TimeUnit unit) &#123; return triggerTime(unit.toNanos((delay &lt; 0) ? 0 : delay));&#125;long triggerTime(long delay) &#123; return now() + ((delay &lt; (Long.MAX_VALUE &gt;&gt; 1)) ? delay : overflowFree(delay));&#125; ËøôÈáåÁöÑdelay &lt; (Long.MAX_VALUE &gt;&gt; 1ÊòØ‰∏∫‰∫ÜÂà§Êñ≠ÊòØÂê¶Ë¶ÅÈò≤Ê≠¢LongÁ±ªÂûãÊ∫¢Âá∫ÔºåÂ¶ÇÊûúdelayÁöÑÂÄºÂ∞è‰∫éLongÁ±ªÂûãÊúÄÂ§ßÂÄºÁöÑ‰∏ÄÂçäÔºåÂàôÁõ¥Êé•ËøîÂõûdelayÔºåÂê¶ÂàôÈúÄË¶ÅËøõË°åÈò≤Ê≠¢Ê∫¢Âá∫Â§ÑÁêÜ„ÄÇ overflowFreeÊñπÊ≥ïËØ•ÊñπÊ≥ïÁöÑ‰ΩúÁî®ÊòØÈôêÂà∂ÈòüÂàó‰∏≠ÊâÄÊúâËäÇÁÇπÁöÑÂª∂ËøüÊó∂Èó¥Âú®Long.MAX_VALUE‰πãÂÜÖÔºåÈò≤Ê≠¢Âú®compareToÊñπÊ≥ï‰∏≠Ê∫¢Âá∫„ÄÇ 12345678910111213private long overflowFree(long delay) &#123; // Ëé∑ÂèñÈòüÂàó‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ËäÇÁÇπ Delayed head = (Delayed) super.getQueue().peek(); if (head != null) &#123; // Ëé∑ÂèñÂª∂ËøüÊó∂Èó¥ long headDelay = head.getDelay(NANOSECONDS); // Â¶ÇÊûúÂª∂ËøüÊó∂Èó¥Â∞è‰∫é0ÔºåÂπ∂‰∏î delay - headDelay Ë∂ÖËøá‰∫ÜLong.MAX_VALUE // Â∞ÜdelayËÆæÁΩÆ‰∏∫ Long.MAX_VALUE + headDelay ‰øùËØÅdelayÂ∞è‰∫éLong.MAX_VALUE if (headDelay &lt; 0 &amp;&amp; (delay - headDelay &lt; 0)) delay = Long.MAX_VALUE + headDelay; &#125; return delay;&#125; ÂΩì‰∏Ä‰∏™‰ªªÂä°Â∑≤ÁªèÂèØ‰ª•ÊâßË°åÂá∫ÈòüÊìç‰ΩúÔºå‰ΩÜËøòÊ≤°ÊúâÊâßË°åÔºåÂèØËÉΩÁî±‰∫éÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÂ∑•‰ΩúÁ∫øÁ®ã‰∏çÊòØÁ©∫Èó≤ÁöÑ„ÄÇÂÖ∑‰ΩìÂàÜÊûê‰∏Ä‰∏ãËøôÁßçÊÉÖÂÜµÔºö ‰∏∫‰∫ÜÊñπ‰æøËØ¥ÊòéÔºåÂÅáËÆæLong.MAX_VALUE=1023Ôºå‰πüÂ∞±ÊòØ11‰ΩçÔºåÂπ∂‰∏îÂΩìÂâçÁöÑÊó∂Èó¥ÊòØ100ÔºåË∞ÉÁî®triggerTimeÊó∂Âπ∂Ê≤°ÊúâÂØπdelayËøõË°åÂà§Êñ≠ÔºåËÄåÊòØÁõ¥Êé•ËøîÂõû‰∫Ünow() + delayÔºå‰πüÂ∞±ÊòØÁõ∏ÂΩì‰∫é100 + 1023ÔºåËøôËÇØÂÆöÊòØÊ∫¢Âá∫‰∫ÜÔºåÈÇ£‰πàËøîÂõûÁöÑÊó∂Èó¥ÊòØ-925Ôºõ Â¶ÇÊûúÂ§¥ËäÇÁÇπÂ∑≤ÁªèÂèØ‰ª•Âá∫Èòü‰ΩÜÊòØËøòÊ≤°ÊúâÊâßË°åÂá∫ÈòüÔºåÈÇ£‰πàÂ§¥ËäÇÁÇπÁöÑÊâßË°åÊó∂Èó¥Â∫îËØ•ÊòØÂ∞è‰∫éÂΩìÂâçÊó∂Èó¥ÁöÑÔºåÂÅáËÆæÊòØ95Ôºõ ËøôÊó∂Ë∞ÉÁî®offerÊñπÊ≥ïÂêëÈòüÂàó‰∏≠Ê∑ªÂä†‰ªªÂä°ÔºåÂú®offerÊñπÊ≥ï‰∏≠‰ºöË∞ÉÁî®siftUpÊñπÊ≥ïÊù•ÊéíÂ∫èÔºåÂú®siftUpÊñπÊ≥ïÊâßË°åÊó∂Âèà‰ºöË∞ÉÁî®ScheduledFutureTask‰∏≠ÁöÑcompareToÊñπÊ≥ïÊù•ÊØîËæÉÊâßË°åÊó∂Èó¥Ôºõ ËøôÊó∂Â¶ÇÊûúÊâßË°åÂà∞‰∫ÜcompareToÊñπÊ≥ï‰∏≠ÁöÑlong diff = time - x.time;Êó∂ÔºåÈÇ£‰πàËÆ°ÁÆóÂêéÁöÑÁªìÊûúÂ∞±ÊòØ-925 - 95 = -1020ÔºåÈÇ£‰πàÂ∞ÜËøîÂõû-1ÔºåËÄåÊ≠£Â∏∏ÊÉÖÂÜµÂ∫îËØ•ÊòØËøîÂõû1ÔºåÂõ†‰∏∫Êñ∞Âä†ÂÖ•ÁöÑ‰ªªÂä°ÁöÑÊâßË°åÊó∂Èó¥Ë¶ÅÊØîÂ§¥ÁªìÁÇπÁöÑÊâßË°åÊó∂Èó¥Ë¶ÅÊôöÔºåËøôÂ∞±‰∏çÊòØÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÁªìÊûú‰∫ÜÔºåËøô‰ºöÂØºËá¥ÈòüÂàó‰∏≠ÁöÑÈ°∫Â∫è‰∏çÊ≠£Á°Æ„ÄÇ ÂêåÁêÜ‰πüÂèØ‰ª•ÁÆó‰∏Ä‰∏ãÂú®ÊâßË°åcompareToÊñπÊ≥ï‰∏≠ÁöÑlong diff = getDelay(NANOSECONDS) - other.getDelay(NANOSECONDS);Êó∂‰πü‰ºöÊúâËøôÁßçÊÉÖÂÜµÔºõ ÊâÄ‰ª•Âú®triggerTimeÊñπÊ≥ï‰∏≠ÂØπdelayÁöÑÂ§ßÂ∞èÂÅö‰∫ÜÂà§Êñ≠ÔºåÂ∞±ÊòØ‰∏∫‰∫ÜÈò≤Ê≠¢ËøôÁßçÊÉÖÂÜµÂèëÁîü„ÄÇ Â¶ÇÊûúÊâßË°å‰∫ÜoverflowFreeÊñπÊ≥ïÂë¢ÔºåËøôÊó∂headDelay = 95 - 100 = -5ÔºåÁÑ∂ÂêéÊâßË°ådelay = 1023 + (-5) = 1018ÔºåÈÇ£‰πàtriggerTime‰ºöËøîÂõû100 + 1018 = -930ÔºåÂÜçÊâßË°åcompareToÊñπÊ≥ï‰∏≠ÁöÑlong diff = time - x.time;Êó∂Ôºådiff = -930 - 95 = -930 - 100 + 5 = 1018 + 5 = 1023ÔºåÊ≤°ÊúâÊ∫¢Âá∫ÔºåÁ¨¶ÂêàÊ≠£Â∏∏ÁöÑÈ¢ÑÊúü„ÄÇ ÊâÄ‰ª•ÔºåoverflowFreeÊñπÊ≥ï‰∏≠ÊääÂ∑≤ÁªèË∂ÖÊó∂ÁöÑÈÉ®ÂàÜÊó∂Èó¥ÁªôÂáèÂéªÔºåÂ∞±ÊòØ‰∏∫‰∫ÜÈÅøÂÖçÂú®compareToÊñπÊ≥ï‰∏≠Âá∫Áé∞Ê∫¢Âá∫ÊÉÖÂÜµ„ÄÇ ÔºàËØ¥ÂÆûËØùÔºåËøôÊÆµ‰ª£Á†ÅÁúãÁöÑÂæàÁóõËã¶Ôºå‰∏ÄËà¨ÊÉÖÂÜµ‰∏ã‰πü‰∏ç‰ºöÂèëÁîüËøôÁßçÊÉÖÂÜµÔºåË∞Å‰ºö‰º†‰∏Ä‰∏™Long.MAX_VALUEÂë¢„ÄÇË¶ÅÁü•ÈÅìLong.MAX_VALUEÁöÑÁ∫≥ÁßíÊï∞Êç¢ÁÆóÊàêÂπ¥ÁöÑËØùÊòØ292Âπ¥ÔºåË∞Å‰ºöËøô‰πàÊó†ËÅä„ÄÇ„ÄÇ„ÄÇÔºâ ScheduledFutureTaskÁöÑgetDelayÊñπÊ≥ï1234public long getDelay(TimeUnit unit) &#123; // ÊâßË°åÊó∂Èó¥ÂáèÂéªÂΩìÂâçÁ≥ªÁªüÊó∂Èó¥ return unit.convert(time - now(), NANOSECONDS);&#125; ScheduledFutureTaskÁöÑÊûÑÈÄ†ÊñπÊ≥ïScheduledFutureTaskÁªßÊâøËá™FutureTaskÂπ∂ÂÆûÁé∞‰∫ÜRunnableScheduledFutureÊé•Âè£ÔºåÂÖ∑‰ΩìÂèØ‰ª•ÂèÇËÄÉ‰∏äÊñáÁöÑÁ±ªÂõæÔºåÊûÑÈÄ†ÊñπÊ≥ïÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526ScheduledFutureTask(Runnable r, V result, long ns) &#123; super(r, result); this.time = ns; this.period = 0; this.sequenceNumber = sequencer.getAndIncrement();&#125;/** * Creates a periodic action with given nano time and period. */ScheduledFutureTask(Runnable r, V result, long ns, long period) &#123; super(r, result); this.time = ns; this.period = period; this.sequenceNumber = sequencer.getAndIncrement();&#125;/** * Creates a one-shot action with given nanoTime-based trigger time. */ScheduledFutureTask(Callable&lt;V&gt; callable, long ns) &#123; super(callable); this.time = ns; this.period = 0; this.sequenceNumber = sequencer.getAndIncrement();&#125; ËøôÈáåÈù¢ÊúâÂá†‰∏™ÈáçË¶ÅÁöÑÂ±ûÊÄßÔºå‰∏ãÈù¢Êù•Ëß£Èáä‰∏Ä‰∏ãÔºö timeÔºö‰∏ãÊ¨°‰ªªÂä°ÊâßË°åÊó∂ÁöÑÊó∂Èó¥Ôºõ periodÔºöÊâßË°åÂë®ÊúüÔºõ sequenceNumberÔºö‰øùÂ≠ò‰ªªÂä°Ë¢´Ê∑ªÂä†Âà∞ScheduledThreadPoolExecutor‰∏≠ÁöÑÂ∫èÂè∑„ÄÇ Âú®scheduleÊñπÊ≥ï‰∏≠ÔºåÂàõÂª∫ÂÆåScheduledFutureTaskÂØπË±°‰πãÂêéÔºå‰ºöÊâßË°ådelayedExecuteÊñπÊ≥ïÊù•ÊâßË°å‰ªªÂä°„ÄÇ delayedExecuteÊñπÊ≥ï1234567891011121314151617private void delayedExecute(RunnableScheduledFuture&lt;?&gt; task) &#123; // Â¶ÇÊûúÁ∫øÁ®ãÊ±†Â∑≤ÁªèÂÖ≥Èó≠Ôºå‰ΩøÁî®ÊãíÁªùÁ≠ñÁï•ÊãíÁªù‰ªªÂä° if (isShutdown()) reject(task); else &#123; // Ê∑ªÂä†Âà∞ÈòªÂ°ûÈòüÂàó‰∏≠ super.getQueue().add(task); if (isShutdown() &amp;&amp; !canRunInCurrentRunState(task.isPeriodic()) &amp;&amp; remove(task)) task.cancel(false); else // Á°Æ‰øùÁ∫øÁ®ãÊ±†‰∏≠Ëá≥Â∞ëÊúâ‰∏Ä‰∏™Á∫øÁ®ãÂêØÂä®ÔºåÂç≥‰ΩøcorePoolSize‰∏∫0 // ËØ•ÊñπÊ≥ïÂú®ThreadPoolExecutor‰∏≠ÂÆûÁé∞ ensurePrestart(); &#125;&#125; ËØ¥‰∏Ä‰∏ãËøôÈáåÁöÑÁ¨¨‰∫å‰∏™ifÂà§Êñ≠Ôºö Â¶ÇÊûú‰∏çÊòØSHUTDOWNÁä∂ÊÄÅÔºåÊâßË°åelseÔºåÂê¶ÂàôÊâßË°åÊ≠•È™§2Ôºõ Â¶ÇÊûúÂú®ÂΩìÂâçÁ∫øÁ®ãÊ±†ËøêË°åÁä∂ÊÄÅ‰∏ãÂèØ‰ª•ÊâßË°å‰ªªÂä°ÔºåÊâßË°åelseÔºåÂê¶ÂàôÊâßË°åÊ≠•È™§3Ôºõ ‰ªéÈòªÂ°ûÈòüÂàó‰∏≠Âà†Èô§‰ªªÂä°ÔºåÂ¶ÇÊûúÂ§±Ë¥•ÔºåÊâßË°åelseÔºåÂê¶ÂàôÊâßË°åÊ≠•È™§4Ôºõ ÂèñÊ∂à‰ªªÂä°Ôºå‰ΩÜ‰∏ç‰∏≠Êñ≠ÊâßË°å‰∏≠ÁöÑ‰ªªÂä°„ÄÇ ÂØπ‰∫éÊ≠•È™§2ÔºåÂèØ‰ª•ÈÄöËøásetContinueExistingPeriodicTasksAfterShutdownPolicyÊñπÊ≥ïËÆæÁΩÆÂú®Á∫øÁ®ãÊ±†ÂÖ≥Èó≠Êó∂ÔºåÂë®Êúü‰ªªÂä°ÁªßÁª≠ÊâßË°åÔºåÈªòËÆ§‰∏∫falseÔºå‰πüÂ∞±ÊòØÁ∫øÁ®ãÊ±†ÂÖ≥Èó≠Êó∂Ôºå‰∏çÂÜçÊâßË°åÂë®Êúü‰ªªÂä°„ÄÇ ensurePrestartÊñπÊ≥ïÂú®ThreadPoolExecutor‰∏≠ÂÆö‰πâÔºö 1234567void ensurePrestart() &#123; int wc = workerCountOf(ctl.get()); if (wc &lt; corePoolSize) addWorker(null, true); else if (wc == 0) addWorker(null, false);&#125; Ë∞ÉÁî®‰∫ÜaddWorkerÊñπÊ≥ïÔºåÂèØ‰ª•Âú®Ê∑±ÂÖ•ÁêÜËß£JavaÁ∫øÁ®ãÊ±†ÔºöThreadPoolExecutor‰∏≠Êü•ÁúãaddWorkerÊñπÊ≥ïÁöÑ‰ªãÁªçÔºåÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÊòØÈÄöËøáËØ•ÊñπÊ≥ïÊù•ÂêØÂä®Âπ∂ÊâßË°å‰ªªÂä°ÁöÑ„ÄÇ ScheduledFutureTaskÁöÑrunÊñπÊ≥ïÂõûÈ°æ‰∏Ä‰∏ãÁ∫øÁ®ãÊ±†ÁöÑÊâßË°åËøáÁ®ãÔºöÂΩìÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÂêØÂä®Êó∂Ôºå‰∏çÊñ≠Âú∞‰ªéÈòªÂ°ûÈòüÂàó‰∏≠ÂèñÂá∫‰ªªÂä°Âπ∂ÊâßË°åÔºåÂΩìÁÑ∂ÔºåÂèñÂá∫ÁöÑ‰ªªÂä°ÂÆûÁé∞‰∫ÜRunnableÊé•Âè£ÔºåÊâÄ‰ª•ÊòØÈÄöËøáË∞ÉÁî®‰ªªÂä°ÁöÑrunÊñπÊ≥ïÊù•ÊâßË°å‰ªªÂä°ÁöÑ„ÄÇ ËøôÈáåÁöÑ‰ªªÂä°Á±ªÂûãÊòØScheduledFutureTaskÔºåÊâÄ‰ª•‰∏ãÈù¢Áúã‰∏Ä‰∏ãScheduledFutureTaskÁöÑrunÊñπÊ≥ïÔºö 123456789101112131415161718public void run() &#123; // ÊòØÂê¶ÊòØÂë®ÊúüÊÄß‰ªªÂä° boolean periodic = isPeriodic(); // ÂΩìÂâçÁ∫øÁ®ãÊ±†ËøêË°åÁä∂ÊÄÅ‰∏ãÂ¶ÇÊûú‰∏çÂèØ‰ª•ÊâßË°å‰ªªÂä°ÔºåÂèñÊ∂àËØ•‰ªªÂä° if (!canRunInCurrentRunState(periodic)) cancel(false); // Â¶ÇÊûú‰∏çÊòØÂë®ÊúüÊÄß‰ªªÂä°ÔºåË∞ÉÁî®FutureTask‰∏≠ÁöÑrunÊñπÊ≥ïÊâßË°å else if (!periodic) ScheduledFutureTask.super.run(); // Â¶ÇÊûúÊòØÂë®ÊúüÊÄß‰ªªÂä°ÔºåË∞ÉÁî®FutureTask‰∏≠ÁöÑrunAndResetÊñπÊ≥ïÊâßË°å // runAndResetÊñπÊ≥ï‰∏ç‰ºöËÆæÁΩÆÊâßË°åÁªìÊûúÔºåÊâÄ‰ª•ÂèØ‰ª•ÈáçÂ§çÊâßË°å‰ªªÂä° else if (ScheduledFutureTask.super.runAndReset()) &#123; // ËÆ°ÁÆó‰∏ãÊ¨°ÊâßË°åËØ•‰ªªÂä°ÁöÑÊó∂Èó¥ setNextRunTime(); // ÈáçÂ§çÊâßË°å‰ªªÂä° reExecutePeriodic(outerTask); &#125;&#125; ÊúâÂÖ≥FutureTaskÁöÑrunÊñπÊ≥ïÂíårunAndResetÊñπÊ≥ïÔºåÂèØ‰ª•ÂèÇËÄÉFutureTaskÊ∫êÁ†ÅËß£Êûê„ÄÇ ÂàÜÊûê‰∏Ä‰∏ãÊâßË°åËøáÁ®ãÔºö Â¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãÊ±†ËøêË°åÁä∂ÊÄÅ‰∏çÂèØ‰ª•ÊâßË°å‰ªªÂä°ÔºåÂèñÊ∂àËØ•‰ªªÂä°ÔºåÁÑ∂ÂêéÁõ¥Êé•ËøîÂõûÔºåÂê¶ÂàôÊâßË°åÊ≠•È™§2Ôºõ Â¶ÇÊûú‰∏çÊòØÂë®ÊúüÊÄß‰ªªÂä°ÔºåË∞ÉÁî®FutureTask‰∏≠ÁöÑrunÊñπÊ≥ïÊâßË°åÔºå‰ºöËÆæÁΩÆÊâßË°åÁªìÊûúÔºåÁÑ∂ÂêéÁõ¥Êé•ËøîÂõûÔºåÂê¶ÂàôÊâßË°åÊ≠•È™§3Ôºõ Â¶ÇÊûúÊòØÂë®ÊúüÊÄß‰ªªÂä°ÔºåË∞ÉÁî®FutureTask‰∏≠ÁöÑrunAndResetÊñπÊ≥ïÊâßË°åÔºå‰∏ç‰ºöËÆæÁΩÆÊâßË°åÁªìÊûúÔºåÁÑ∂ÂêéÁõ¥Êé•ËøîÂõûÔºåÂê¶ÂàôÊâßË°åÊ≠•È™§4ÂíåÊ≠•È™§5Ôºõ ËÆ°ÁÆó‰∏ãÊ¨°ÊâßË°åËØ•‰ªªÂä°ÁöÑÂÖ∑‰ΩìÊó∂Èó¥Ôºõ ÈáçÂ§çÊâßË°å‰ªªÂä°„ÄÇ ScheduledFutureTaskÁöÑreExecutePeriodicÊñπÊ≥ï123456789void reExecutePeriodic(RunnableScheduledFuture&lt;?&gt; task) &#123; if (canRunInCurrentRunState(true)) &#123; super.getQueue().add(task); if (!canRunInCurrentRunState(true) &amp;&amp; remove(task)) task.cancel(false); else ensurePrestart(); &#125;&#125; ËØ•ÊñπÊ≥ïÂíådelayedExecuteÊñπÊ≥ïÁ±ª‰ººÔºå‰∏çÂêåÁöÑÊòØÔºö Áî±‰∫éË∞ÉÁî®reExecutePeriodicÊñπÊ≥ïÊó∂Â∑≤ÁªèÊâßË°åËøá‰∏ÄÊ¨°Âë®ÊúüÊÄß‰ªªÂä°‰∫ÜÔºåÊâÄ‰ª•‰∏ç‰ºörejectÂΩìÂâç‰ªªÂä°Ôºõ ‰º†ÂÖ•ÁöÑ‰ªªÂä°‰∏ÄÂÆöÊòØÂë®ÊúüÊÄß‰ªªÂä°„ÄÇ onShutdownÊñπÊ≥ïonShutdownÊñπÊ≥ïÊòØThreadPoolExecutor‰∏≠ÁöÑÈí©Â≠êÊñπÊ≥ïÔºåÂú®ThreadPoolExecutor‰∏≠‰ªÄ‰πàÈÉΩÊ≤°ÊúâÂÅöÔºåÂèÇËÄÉÊ∑±ÂÖ•ÁêÜËß£JavaÁ∫øÁ®ãÊ±†ÔºöThreadPoolExecutorÔºåËØ•ÊñπÊ≥ïÊòØÂú®ÊâßË°åshutdownÊñπÊ≥ïÊó∂Ë¢´Ë∞ÉÁî®Ôºö 123456789101112131415161718192021222324252627282930313233@Override void onShutdown() &#123; BlockingQueue&lt;Runnable&gt; q = super.getQueue(); // Ëé∑ÂèñÂú®Á∫øÁ®ãÊ±†Â∑≤ shutdown ÁöÑÊÉÖÂÜµ‰∏ãÊòØÂê¶ÁªßÁª≠ÊâßË°åÁé∞ÊúâÂª∂Ëøü‰ªªÂä° boolean keepDelayed = getExecuteExistingDelayedTasksAfterShutdownPolicy(); // Ëé∑ÂèñÂú®Á∫øÁ®ãÊ±†Â∑≤ shutdown ÁöÑÊÉÖÂÜµ‰∏ãÊòØÂê¶ÁªßÁª≠ÊâßË°åÁé∞ÊúâÂÆöÊúü‰ªªÂä° boolean keepPeriodic = getContinueExistingPeriodicTasksAfterShutdownPolicy(); // Â¶ÇÊûúÂú®Á∫øÁ®ãÊ±†Â∑≤ shutdown ÁöÑÊÉÖÂÜµ‰∏ã‰∏çÁªßÁª≠ÊâßË°åÂª∂Ëøü‰ªªÂä°ÂíåÂÆöÊúü‰ªªÂä° // Âàô‰æùÊ¨°ÂèñÊ∂à‰ªªÂä°ÔºåÂê¶ÂàôÂàôÊ†πÊçÆÂèñÊ∂àÁä∂ÊÄÅÊù•Âà§Êñ≠ if (!keepDelayed &amp;&amp; !keepPeriodic) &#123; for (Object e : q.toArray()) if (e instanceof RunnableScheduledFuture&lt;?&gt;) ((RunnableScheduledFuture&lt;?&gt;) e).cancel(false); q.clear(); &#125; else &#123; // Traverse snapshot to avoid iterator exceptions for (Object e : q.toArray()) &#123; if (e instanceof RunnableScheduledFuture) &#123; RunnableScheduledFuture&lt;?&gt; t = (RunnableScheduledFuture&lt;?&gt;)e; // Â¶ÇÊûúÊúâÂú® shutdown Âêé‰∏çÁªßÁª≠ÁöÑÂª∂Ëøü‰ªªÂä°ÊàñÂë®Êúü‰ªªÂä°ÔºåÂàô‰ªéÈòüÂàó‰∏≠Âà†Èô§Âπ∂ÂèñÊ∂à‰ªªÂä° if ((t.isPeriodic() ? !keepPeriodic : !keepDelayed) || t.isCancelled()) &#123; // also remove if already cancelled if (q.remove(t)) t.cancel(false); &#125; &#125; &#125; &#125; tryTerminate();&#125; DelayedWorkQueueScheduledThreadPoolExecutor‰πãÊâÄ‰ª•Ë¶ÅËá™Â∑±ÂÆûÁé∞ÈòªÂ°ûÁöÑÂ∑•‰ΩúÈòüÂàóÔºåÊòØÂõ†‰∏∫ScheduledThreadPoolExecutorË¶ÅÊ±ÇÁöÑÂ∑•‰ΩúÈòüÂàóÊúâ‰∫õÁâπÊÆä„ÄÇ DelayedWorkQueueÊòØ‰∏Ä‰∏™Âü∫‰∫éÂ†ÜÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÁ±ª‰ºº‰∫éDelayQueueÂíåPriorityQueue„ÄÇÂú®ÊâßË°åÂÆöÊó∂‰ªªÂä°ÁöÑÊó∂ÂÄôÔºåÊØè‰∏™‰ªªÂä°ÁöÑÊâßË°åÊó∂Èó¥ÈÉΩ‰∏çÂêåÔºåÊâÄ‰ª•DelayedWorkQueueÁöÑÂ∑•‰ΩúÂ∞±ÊòØÊåâÁÖßÊâßË°åÊó∂Èó¥ÁöÑÂçáÂ∫èÊù•ÊéíÂàóÔºåÊâßË°åÊó∂Èó¥Ë∑ùÁ¶ªÂΩìÂâçÊó∂Èó¥Ë∂äËøëÁöÑ‰ªªÂä°Âú®ÈòüÂàóÁöÑÂâçÈù¢ÔºàÊ≥®ÊÑèÔºöËøôÈáåÁöÑÈ°∫Â∫èÂπ∂‰∏çÊòØÁªùÂØπÁöÑÔºåÂ†Ü‰∏≠ÁöÑÊéíÂ∫èÂè™‰øùËØÅ‰∫ÜÂ≠êËäÇÁÇπÁöÑ‰∏ãÊ¨°ÊâßË°åÊó∂Èó¥Ë¶ÅÊØîÁà∂ËäÇÁÇπÁöÑ‰∏ãÊ¨°ÊâßË°åÊó∂Èó¥Ë¶ÅÂ§ßÔºåËÄåÂè∂Â≠êËäÇÁÇπ‰πãÈó¥Âπ∂‰∏ç‰∏ÄÂÆöÊòØÈ°∫Â∫èÁöÑÔºå‰∏ãÊñá‰∏≠‰ºöËØ¥ÊòéÔºâ„ÄÇ Â†ÜÁªìÊûÑÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö ÂèØËßÅÔºåDelayedWorkQueueÊòØ‰∏Ä‰∏™Âü∫‰∫éÊúÄÂ∞èÂ†ÜÁªìÊûÑÁöÑÈòüÂàó„ÄÇÂ†ÜÁªìÊûÑÂèØ‰ª•‰ΩøÁî®Êï∞ÁªÑË°®Á§∫ÔºåÂèØ‰ª•ËΩ¨Êç¢ÊàêÂ¶Ç‰∏ãÁöÑÊï∞ÁªÑÔºö Âú®ËøôÁßçÁªìÊûÑ‰∏≠ÔºåÂèØ‰ª•ÂèëÁé∞ÊúâÂ¶Ç‰∏ãÁâπÊÄßÔºö ÂÅáËÆæÔºåÁ¥¢ÂºïÂÄº‰ªé0ÂºÄÂßãÔºåÂ≠êËäÇÁÇπÁöÑÁ¥¢ÂºïÂÄº‰∏∫kÔºåÁà∂ËäÇÁÇπÁöÑÁ¥¢ÂºïÂÄº‰∏∫pÔºåÂàôÔºö ‰∏Ä‰∏™ËäÇÁÇπÁöÑÂ∑¶Â≠êËäÇÁÇπÁöÑÁ¥¢Âºï‰∏∫Ôºök = p * 2 + 1Ôºõ ‰∏Ä‰∏™ËäÇÁÇπÁöÑÂè≥Â≠êËäÇÁÇπÁöÑÁ¥¢Âºï‰∏∫Ôºök = (p + 1) * 2Ôºõ ‰∏Ä‰∏™ËäÇÁÇπÁöÑÁà∂ËäÇÁÇπÁöÑÁ¥¢Âºï‰∏∫Ôºöp = (k - 1) / 2„ÄÇ ‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®DelayedWorkQueueÂë¢Ôºü ÂÆöÊó∂‰ªªÂä°ÊâßË°åÊó∂ÈúÄË¶ÅÂèñÂá∫ÊúÄËøëË¶ÅÊâßË°åÁöÑ‰ªªÂä°ÔºåÊâÄ‰ª•‰ªªÂä°Âú®ÈòüÂàó‰∏≠ÊØèÊ¨°Âá∫ÈòüÊó∂‰∏ÄÂÆöË¶ÅÊòØÂΩìÂâçÈòüÂàó‰∏≠ÊâßË°åÊó∂Èó¥ÊúÄÈù†ÂâçÁöÑÔºåÊâÄ‰ª•Ëá™ÁÑ∂Ë¶Å‰ΩøÁî®‰ºòÂÖàÁ∫ßÈòüÂàó„ÄÇ DelayedWorkQueueÊòØ‰∏Ä‰∏™‰ºòÂÖàÁ∫ßÈòüÂàóÔºåÂÆÉÂèØ‰ª•‰øùËØÅÊØèÊ¨°Âá∫ÈòüÁöÑ‰ªªÂä°ÈÉΩÊòØÂΩìÂâçÈòüÂàó‰∏≠ÊâßË°åÊó∂Èó¥ÊúÄÈù†ÂâçÁöÑÔºåÁî±‰∫éÂÆÉÊòØÂü∫‰∫éÂ†ÜÁªìÊûÑÁöÑÈòüÂàóÔºåÂ†ÜÁªìÊûÑÂú®ÊâßË°åÊèíÂÖ•ÂíåÂà†Èô§Êìç‰ΩúÊó∂ÁöÑÊúÄÂùèÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØ O(logN)„ÄÇ DelayedWorkQueueÁöÑÂ±ûÊÄß123456789101112// ÈòüÂàóÂàùÂßãÂÆπÈáèprivate static final int INITIAL_CAPACITY = 16;// Ê†πÊçÆÂàùÂßãÂÆπÈáèÂàõÂª∫RunnableScheduledFutureÁ±ªÂûãÁöÑÊï∞ÁªÑprivate RunnableScheduledFuture&lt;?&gt;[] queue = new RunnableScheduledFuture&lt;?&gt;[INITIAL_CAPACITY];private final ReentrantLock lock = new ReentrantLock();private int size = 0;// leaderÁ∫øÁ®ãprivate Thread leader = null;// ÂΩìËæÉÊñ∞ÁöÑ‰ªªÂä°Âú®ÈòüÂàóÁöÑÂ§¥ÈÉ®ÂèØÁî®Êó∂ÔºåÊàñËÄÖÊñ∞Á∫øÁ®ãÂèØËÉΩÈúÄË¶ÅÊàê‰∏∫leaderÔºåÂàôÈÄöËøáËØ•Êù°‰ª∂ÂèëÂá∫‰ø°Âè∑private final Condition available = lock.newCondition(); Ê≥®ÊÑèËøôÈáåÁöÑleaderÔºåÂÆÉÊòØLeader-FollowerÊ®°ÂºèÁöÑÂèò‰ΩìÔºåÁî®‰∫éÂáèÂ∞ë‰∏çÂøÖË¶ÅÁöÑÂÆöÊó∂Á≠âÂæÖ„ÄÇ‰ªÄ‰πàÊÑèÊÄùÂë¢ÔºüÂØπ‰∫éÂ§öÁ∫øÁ®ãÁöÑÁΩëÁªúÊ®°ÂûãÊù•ËØ¥Ôºö ÊâÄÊúâÁ∫øÁ®ã‰ºöÊúâ‰∏âÁßçË∫´‰ªΩ‰∏≠ÁöÑ‰∏ÄÁßçÔºöleaderÂíåfollowerÔºå‰ª•Âèä‰∏Ä‰∏™Âπ≤Ê¥ª‰∏≠ÁöÑÁä∂ÊÄÅÔºöproccesser„ÄÇÂÆÉÁöÑÂü∫Êú¨ÂéüÂàôÂ∞±ÊòØÔºåÊ∞∏ËøúÊúÄÂ§öÂè™Êúâ‰∏Ä‰∏™leader„ÄÇËÄåÊâÄÊúâfollowerÈÉΩÂú®Á≠âÂæÖÊàê‰∏∫leader„ÄÇÁ∫øÁ®ãÊ±†ÂêØÂä®Êó∂‰ºöËá™Âä®‰∫ßÁîü‰∏Ä‰∏™LeaderË¥üË¥£Á≠âÂæÖÁΩëÁªúIO‰∫ã‰ª∂ÔºåÂΩìÊúâ‰∏Ä‰∏™‰∫ã‰ª∂‰∫ßÁîüÊó∂ÔºåLeaderÁ∫øÁ®ãÈ¶ñÂÖàÈÄöÁü•‰∏Ä‰∏™FollowerÁ∫øÁ®ãÂ∞ÜÂÖ∂ÊèêÊãî‰∏∫Êñ∞ÁöÑLeaderÔºåÁÑ∂ÂêéËá™Â∑±Â∞±ÂéªÂπ≤Ê¥ª‰∫ÜÔºåÂéªÂ§ÑÁêÜËøô‰∏™ÁΩëÁªú‰∫ã‰ª∂ÔºåÂ§ÑÁêÜÂÆåÊØïÂêéÂä†ÂÖ•FollowerÁ∫øÁ®ãÁ≠âÂæÖÈòüÂàóÔºåÁ≠âÂæÖ‰∏ãÊ¨°Êàê‰∏∫Leader„ÄÇËøôÁßçÊñπÊ≥ïÂèØ‰ª•Â¢ûÂº∫CPUÈ´òÈÄüÁºìÂ≠òÁõ∏‰ººÊÄßÔºåÂèäÊ∂àÈô§Âä®ÊÄÅÂÜÖÂ≠òÂàÜÈÖçÂíåÁ∫øÁ®ãÈó¥ÁöÑÊï∞ÊçÆ‰∫§Êç¢„ÄÇ ÂèÇËÄÉËá™Ôºöhttp://blog.csdn.net/goldlevi/article/details/7705180 ÂÖ∑‰ΩìleaderÁöÑ‰ΩúÁî®Âú®ÂàÜÊûêtakeÊñπÊ≥ïÊó∂ÂÜçËØ¶ÁªÜ‰ªãÁªç„ÄÇ offerÊñπÊ≥ïÊó¢ÁÑ∂ÊòØÈòªÂ°ûÈòüÂàóÔºåÂÖ•ÈòüÁöÑÊìç‰ΩúÂ¶ÇaddÂíåputÊñπÊ≥ïÈÉΩË∞ÉÁî®‰∫ÜofferÊñπÊ≥ïÔºå‰∏ãÈù¢Êü•Áúã‰∏Ä‰∏ãofferÊñπÊ≥ïÔºö 12345678910111213141516171819202122232425262728293031public boolean offer(Runnable x) &#123; if (x == null) throw new NullPointerException(); RunnableScheduledFuture&lt;?&gt; e = (RunnableScheduledFuture&lt;?&gt;)x; final ReentrantLock lock = this.lock; lock.lock(); try &#123; int i = size; // queueÊòØ‰∏Ä‰∏™RunnableScheduledFutureÁ±ªÂûãÁöÑÊï∞ÁªÑÔºåÂ¶ÇÊûúÂÆπÈáè‰∏çÂ§üÈúÄË¶ÅÊâ©ÂÆπ if (i &gt;= queue.length) grow(); size = i + 1; // i == 0 ËØ¥ÊòéÂ†Ü‰∏≠ËøòÊ≤°ÊúâÊï∞ÊçÆ if (i == 0) &#123; queue[0] = e; setIndex(e, 0); &#125; else &#123; // i != 0 Êó∂ÔºåÈúÄË¶ÅÂØπÂ†ÜËøõË°åÈáçÊñ∞ÊéíÂ∫è siftUp(i, e); &#125; // Â¶ÇÊûú‰º†ÂÖ•ÁöÑ‰ªªÂä°Â∑≤ÁªèÊòØÈòüÂàóÁöÑÁ¨¨‰∏Ä‰∏™ËäÇÁÇπ‰∫ÜÔºåËøôÊó∂availableÈúÄË¶ÅÂèëÂá∫‰ø°Âè∑ if (queue[0] == e) &#123; // leaderËÆæÁΩÆ‰∏∫null‰∏∫‰∫Ü‰ΩøÂú®takeÊñπÊ≥ï‰∏≠ÁöÑÁ∫øÁ®ãÂú®ÈÄöËøáavailable.signal();Âêé‰ºöÊâßË°åavailable.awaitNanos(delay); leader = null; available.signal(); &#125; &#125; finally &#123; lock.unlock(); &#125; return true;&#125; ÊúâÂÖ≥ConditionÁöÑ‰ªãÁªçËØ∑ÂèÇËÄÉÊ∑±ÂÖ•ÁêÜËß£AbstractQueuedSynchronizerÔºà‰∏âÔºâ ËøôÈáåÁöÑÈáçÁÇπÊòØsiftUpÊñπÊ≥ï„ÄÇ siftUpÊñπÊ≥ï12345678910111213141516171819private void siftUp(int k, RunnableScheduledFuture&lt;?&gt; key) &#123; while (k &gt; 0) &#123; // ÊâæÂà∞Áà∂ËäÇÁÇπÁöÑÁ¥¢Âºï int parent = (k - 1) &gt;&gt;&gt; 1; // Ëé∑ÂèñÁà∂ËäÇÁÇπ RunnableScheduledFuture&lt;?&gt; e = queue[parent]; // Â¶ÇÊûúkeyËäÇÁÇπÁöÑÊâßË°åÊó∂Èó¥Â§ß‰∫éÁà∂ËäÇÁÇπÁöÑÊâßË°åÊó∂Èó¥Ôºå‰∏çÈúÄË¶ÅÂÜçÊéíÂ∫è‰∫Ü if (key.compareTo(e) &gt;= 0) break; // Â¶ÇÊûúkey.compareTo(e) &lt; 0ÔºåËØ¥ÊòékeyËäÇÁÇπÁöÑÊâßË°åÊó∂Èó¥Â∞è‰∫éÁà∂ËäÇÁÇπÁöÑÊâßË°åÊó∂Èó¥ÔºåÈúÄË¶ÅÊääÁà∂ËäÇÁÇπÁßªÂà∞ÂêéÈù¢ queue[k] = e; // ËÆæÁΩÆÁ¥¢Âºï‰∏∫k setIndex(e, k); k = parent; &#125; // keyËÆæÁΩÆ‰∏∫ÊéíÂ∫èÂêéÁöÑ‰ΩçÁΩÆ‰∏≠ queue[k] = key; setIndex(key, k);&#125; ‰ª£Á†ÅÂæàÂ•ΩÁêÜËß£ÔºåÂ∞±ÊòØÂæ™ÁéØÁöÑÊ†πÊçÆkeyËäÇÁÇπ‰∏éÂÆÉÁöÑÁà∂ËäÇÁÇπÊù•Âà§Êñ≠ÔºåÂ¶ÇÊûúkeyËäÇÁÇπÁöÑÊâßË°åÊó∂Èó¥Â∞è‰∫éÁà∂ËäÇÁÇπÔºåÂàôÂ∞Ü‰∏§‰∏™ËäÇÁÇπ‰∫§Êç¢Ôºå‰ΩøÊâßË°åÊó∂Èó¥Èù†ÂâçÁöÑËäÇÁÇπÊéíÂàóÂú®ÈòüÂàóÁöÑÂâçÈù¢„ÄÇ ÂÅáËÆæÊñ∞ÂÖ•ÈòüÁöÑËäÇÁÇπÁöÑÂª∂ËøüÊó∂Èó¥ÔºàË∞ÉÁî®getDelay()ÊñπÊ≥ïËé∑ÂæóÔºâÊòØ5ÔºåÊâßË°åËøáÁ®ãÂ¶Ç‰∏ãÔºö ÂÖàÂ∞ÜÊñ∞ÁöÑËäÇÁÇπÊ∑ªÂä†Âà∞Êï∞ÁªÑÁöÑÂ∞æÈÉ®ÔºåËøôÊó∂Êñ∞ËäÇÁÇπÁöÑÁ¥¢Âºïk‰∏∫7Ôºö ËÆ°ÁÆóÊñ∞Áà∂ËäÇÁÇπÁöÑÁ¥¢ÂºïÔºöparent = (k - 1) &gt;&gt;&gt; 1Ôºåparent = 3ÔºåÈÇ£‰πàqueue[3]ÁöÑÊó∂Èó¥Èó¥ÈöîÂÄº‰∏∫8ÔºåÂõ†‰∏∫ 5 &lt; 8 ÔºåÂ∞ÜÊâßË°åqueue[7] = queue[3]ÔºöÔºö ËøôÊó∂Â∞ÜkËÆæÁΩÆ‰∏∫3ÔºåÁªßÁª≠Âæ™ÁéØÔºåÂÜçÊ¨°ËÆ°ÁÆóparent‰∏∫1Ôºåqueue[1]ÁöÑÊó∂Èó¥Èó¥Èöî‰∏∫3ÔºåÂõ†‰∏∫ 5 &gt; 3 ÔºåËøôÊó∂ÈÄÄÂá∫Âæ™ÁéØÔºåÊúÄÁªàk‰∏∫3Ôºö ÂèØËßÅÔºåÊØèÊ¨°Êñ∞Â¢ûËäÇÁÇπÊó∂ÔºåÂè™ÊòØÊ†πÊçÆÁà∂ËäÇÁÇπÊù•Âà§Êñ≠ÔºåËÄå‰∏ç‰ºöÂΩ±ÂìçÂÖÑÂºüËäÇÁÇπ„ÄÇ Âè¶Â§ñÔºåsetIndexÊñπÊ≥ïÂè™ÊòØËÆæÁΩÆ‰∫ÜScheduledFutureTask‰∏≠ÁöÑheapIndexÂ±ûÊÄßÔºö 1234private void setIndex(RunnableScheduledFuture&lt;?&gt; f, int idx) &#123; if (f instanceof ScheduledFutureTask) ((ScheduledFutureTask)f).heapIndex = idx;&#125; takeÊñπÊ≥ï12345678910111213141516171819202122232425262728293031323334353637383940public RunnableScheduledFuture&lt;?&gt; take() throws InterruptedException &#123; final ReentrantLock lock = this.lock; lock.lockInterruptibly(); try &#123; for (;;) &#123; RunnableScheduledFuture&lt;?&gt; first = queue[0]; if (first == null) available.await(); else &#123; // ËÆ°ÁÆóÂΩìÂâçÊó∂Èó¥Âà∞ÊâßË°åÊó∂Èó¥ÁöÑÊó∂Èó¥Èó¥Èöî long delay = first.getDelay(NANOSECONDS); if (delay &lt;= 0) return finishPoll(first); first = null; // don't retain ref while waiting // leader‰∏ç‰∏∫Á©∫ÔºåÈòªÂ°ûÁ∫øÁ®ã if (leader != null) available.await(); else &#123; // leader‰∏∫Á©∫ÔºåÂàôÊääleaderËÆæÁΩÆ‰∏∫ÂΩìÂâçÁ∫øÁ®ãÔºå Thread thisThread = Thread.currentThread(); leader = thisThread; try &#123; // ÈòªÂ°ûÂà∞ÊâßË°åÊó∂Èó¥ available.awaitNanos(delay); &#125; finally &#123; // ËÆæÁΩÆleader = nullÔºåËÆ©ÂÖ∂‰ªñÁ∫øÁ®ãÊâßË°åavailable.awaitNanos(delay); if (leader == thisThread) leader = null; &#125; &#125; &#125; &#125; &#125; finally &#123; // Â¶ÇÊûúleader‰∏ç‰∏∫Á©∫ÔºåÂàôËØ¥ÊòéleaderÁöÑÁ∫øÁ®ãÊ≠£Âú®ÊâßË°åavailable.awaitNanos(delay); // Â¶ÇÊûúqueue[0] == nullÔºåËØ¥ÊòéÈòüÂàó‰∏∫Á©∫ if (leader == null &amp;&amp; queue[0] != null) available.signal(); lock.unlock(); &#125;&#125; takeÊñπÊ≥ïÊòØ‰ªÄ‰πàÊó∂ÂÄôË∞ÉÁî®ÁöÑÂë¢ÔºüÂú®Ê∑±ÂÖ•ÁêÜËß£JavaÁ∫øÁ®ãÊ±†ÔºöThreadPoolExecutor‰∏≠Ôºå‰ªãÁªç‰∫ÜgetTaskÊñπÊ≥ïÔºåÂ∑•‰ΩúÁ∫øÁ®ã‰ºöÂæ™ÁéØÂú∞‰ªéworkQueue‰∏≠Âèñ‰ªªÂä°„ÄÇ‰ΩÜÂÆöÊó∂‰ªªÂä°Âç¥‰∏çÂêåÔºåÂõ†‰∏∫Â¶ÇÊûú‰∏ÄÊó¶getTaskÊñπÊ≥ïÂèñÂá∫‰∫Ü‰ªªÂä°Â∞±ÂºÄÂßãÊâßË°å‰∫ÜÔºåËÄåËøôÊó∂ÂèØËÉΩËøòÊ≤°ÊúâÂà∞ÊâßË°åÁöÑÊó∂Èó¥ÔºåÊâÄ‰ª•Âú®takeÊñπÊ≥ï‰∏≠ÔºåË¶Å‰øùËØÅÂè™ÊúâÂú®Âà∞ÊåáÂÆöÁöÑÊâßË°åÊó∂Èó¥ÁöÑÊó∂ÂÄô‰ªªÂä°ÊâçÂèØ‰ª•Ë¢´ÂèñËµ∞„ÄÇ ÂÜçÊù•ËØ¥‰∏Ä‰∏ãleaderÁöÑ‰ΩúÁî®ÔºåËøôÈáåÁöÑleaderÊòØ‰∏∫‰∫ÜÂáèÂ∞ë‰∏çÂøÖË¶ÅÁöÑÂÆöÊó∂Á≠âÂæÖÔºåÂΩì‰∏Ä‰∏™Á∫øÁ®ãÊàê‰∏∫leaderÊó∂ÔºåÂÆÉÂè™Á≠âÂæÖ‰∏ã‰∏Ä‰∏™ËäÇÁÇπÁöÑÊó∂Èó¥Èó¥ÈöîÔºå‰ΩÜÂÖ∂ÂÆÉÁ∫øÁ®ãÊó†ÈôêÊúüÁ≠âÂæÖ„ÄÇ leaderÁ∫øÁ®ãÂøÖÈ°ªÂú®‰ªétakeÔºàÔºâÊàñpollÔºàÔºâËøîÂõû‰πãÂâçsignalÂÖ∂ÂÆÉÁ∫øÁ®ãÔºåÈô§ÈùûÂÖ∂‰ªñÁ∫øÁ®ãÊàê‰∏∫‰∫Üleader„ÄÇ ‰∏æ‰æãÊù•ËØ¥ÔºåÂ¶ÇÊûúÊ≤°ÊúâleaderÔºåÈÇ£‰πàÂú®ÊâßË°åtakeÊó∂ÔºåÈÉΩË¶ÅÊâßË°åavailable.awaitNanos(delay)ÔºåÂÅáËÆæÂΩìÂâçÁ∫øÁ®ãÊâßË°å‰∫ÜËØ•ÊÆµ‰ª£Á†ÅÔºåËøôÊó∂ËøòÊ≤°ÊúâsignalÔºåÁ¨¨‰∫å‰∏™Á∫øÁ®ã‰πüÊâßË°å‰∫ÜËØ•ÊÆµ‰ª£Á†ÅÔºåÂàôÁ¨¨‰∫å‰∏™Á∫øÁ®ã‰πüË¶ÅË¢´ÈòªÂ°û„ÄÇÂ§ö‰∏™ËøôÊó∂ÊâßË°åËØ•ÊÆµ‰ª£Á†ÅÊòØÊ≤°Êúâ‰ΩúÁî®ÁöÑÔºåÂõ†‰∏∫Âè™ËÉΩÊúâ‰∏Ä‰∏™Á∫øÁ®ã‰ºö‰ªétake‰∏≠ËøîÂõûqueue[0]ÔºàÂõ†‰∏∫ÊúâlockÔºâÔºåÂÖ∂‰ªñÁ∫øÁ®ãËøôÊó∂ÂÜçËøîÂõûforÂæ™ÁéØÊâßË°åÊó∂ÂèñÁöÑqueue[0]ÔºåÂ∑≤Áªè‰∏çÊòØ‰πãÂâçÁöÑqueue[0]‰∫ÜÔºåÁÑ∂ÂêéÂèàË¶ÅÁªßÁª≠ÈòªÂ°û„ÄÇ ÊâÄ‰ª•Ôºå‰∏∫‰∫Ü‰∏çËÆ©Â§ö‰∏™Á∫øÁ®ãÈ¢ëÁπÅÁöÑÂÅöÊó†Áî®ÁöÑÂÆöÊó∂Á≠âÂæÖÔºåËøôÈáåÂ¢ûÂä†‰∫ÜleaderÔºåÂ¶ÇÊûúleader‰∏ç‰∏∫Á©∫ÔºåÂàôËØ¥ÊòéÈòüÂàó‰∏≠Á¨¨‰∏Ä‰∏™ËäÇÁÇπÂ∑≤ÁªèÂú®Á≠âÂæÖÂá∫ÈòüÔºåËøôÊó∂ÂÖ∂ÂÆÉÁöÑÁ∫øÁ®ã‰ºö‰∏ÄÁõ¥ÈòªÂ°ûÔºåÂáèÂ∞ë‰∫ÜÊó†Áî®ÁöÑÈòªÂ°ûÔºàÊ≥®ÊÑèÔºåÂú®finally‰∏≠Ë∞ÉÁî®‰∫Üsignal()Êù•Âî§ÈÜí‰∏Ä‰∏™Á∫øÁ®ãÔºåËÄå‰∏çÊòØsignalAll()Ôºâ„ÄÇ pollÊñπÊ≥ï‰∏ãÈù¢Áúã‰∏ãpollÊñπÊ≥ïÔºå‰∏étakeÁ±ª‰ººÔºå‰ΩÜËøôÈáåË¶ÅÊèê‰æõË∂ÖÊó∂ÂäüËÉΩÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748public RunnableScheduledFuture&lt;?&gt; poll(long timeout, TimeUnit unit) throws InterruptedException &#123; long nanos = unit.toNanos(timeout); final ReentrantLock lock = this.lock; lock.lockInterruptibly(); try &#123; for (;;) &#123; RunnableScheduledFuture&lt;?&gt; first = queue[0]; if (first == null) &#123; if (nanos &lt;= 0) return null; else nanos = available.awaitNanos(nanos); &#125; else &#123; long delay = first.getDelay(NANOSECONDS); // Â¶ÇÊûúdelay &lt;= 0ÔºåËØ¥ÊòéÂ∑≤ÁªèÂà∞‰∫Ü‰ªªÂä°ÊâßË°åÁöÑÊó∂Èó¥ÔºåËøîÂõû„ÄÇ if (delay &lt;= 0) return finishPoll(first); // Â¶ÇÊûúnanos &lt;= 0ÔºåËØ¥ÊòéÂ∑≤ÁªèË∂ÖÊó∂ÔºåËøîÂõûnull if (nanos &lt;= 0) return null; first = null; // don't retain ref while waiting // nanos &lt; delay ËØ¥ÊòéÈúÄË¶ÅÁ≠âÂæÖÁöÑÊó∂Èó¥Â∞è‰∫é‰ªªÂä°Ë¶ÅÊâßË°åÁöÑÂª∂ËøüÊó∂Èó¥ // leader != null ËØ¥ÊòéÊúâÂÖ∂ÂÆÉÁ∫øÁ®ãÊ≠£Âú®ÂØπ‰ªªÂä°ËøõË°åÈòªÂ°û // ËøôÊó∂ÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãnanosÁ∫≥Áßí if (nanos &lt; delay || leader != null) nanos = available.awaitNanos(nanos); else &#123; Thread thisThread = Thread.currentThread(); leader = thisThread; try &#123; // ËøôÈáåÁöÑtimeLeftË°®Á§∫delayÂáèÂéªÂÆûÈôÖÁöÑÁ≠âÂæÖÊó∂Èó¥ long timeLeft = available.awaitNanos(delay); // ËÆ°ÁÆóÂâ©‰ΩôÁöÑÁ≠âÂæÖÊó∂Èó¥ nanos -= delay - timeLeft; &#125; finally &#123; if (leader == thisThread) leader = null; &#125; &#125; &#125; &#125; &#125; finally &#123; if (leader == null &amp;&amp; queue[0] != null) available.signal(); lock.unlock(); &#125;&#125; finishPollÊñπÊ≥ïÂΩìË∞ÉÁî®‰∫ÜtakeÊàñËÄÖpollÊñπÊ≥ïËÉΩÂ§üËé∑ÂèñÂà∞‰ªªÂä°Êó∂Ôºå‰ºöË∞ÉÁî®ËØ•ÊñπÊ≥ïËøõË°åËøîÂõûÔºö 123456789101112private RunnableScheduledFuture&lt;?&gt; finishPoll(RunnableScheduledFuture&lt;?&gt; f) &#123; // Êï∞ÁªÑÈïøÂ∫¶-1 int s = --size; // ÂèñÂá∫ÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπ RunnableScheduledFuture&lt;?&gt; x = queue[s]; queue[s] = null; // ÈïøÂ∫¶‰∏ç‰∏∫0ÔºåÂàô‰ªéÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÂºÄÂßãÊéíÂ∫èÔºåÁõÆÁöÑÊòØË¶ÅÊääÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÊîæÂà∞ÂêàÈÄÇÁöÑ‰ΩçÁΩÆ‰∏ä if (s != 0) siftDown(0, x); setIndex(f, -1); return f;&#125; siftDownÊñπÊ≥ïsiftDownÊñπÊ≥ï‰ΩøÂ†Ü‰ªékÂºÄÂßãÂêë‰∏ãË∞ÉÊï¥Ôºö 12345678910111213141516171819202122232425private void siftDown(int k, RunnableScheduledFuture&lt;?&gt; key) &#123; // Ê†πÊçÆ‰∫åÂèâÊ†ëÁöÑÁâπÊÄßÔºåÊï∞ÁªÑÈïøÂ∫¶Èô§‰ª•2ÔºåË°®Á§∫ÂèñÊúâÂ≠êËäÇÁÇπÁöÑÁ¥¢Âºï int half = size &gt;&gt;&gt; 1; // Âà§Êñ≠Á¥¢Âºï‰∏∫kÁöÑËäÇÁÇπÊòØÂê¶ÊúâÂ≠êËäÇÁÇπ while (k &lt; half) &#123; // Â∑¶Â≠êËäÇÁÇπÁöÑÁ¥¢Âºï int child = (k &lt;&lt; 1) + 1; RunnableScheduledFuture&lt;?&gt; c = queue[child]; // Âè≥Â≠êËäÇÁÇπÁöÑÁ¥¢Âºï int right = child + 1; // Â¶ÇÊûúÊúâÂè≥Â≠êËäÇÁÇπÂπ∂‰∏îÂ∑¶Â≠êËäÇÁÇπÁöÑÊó∂Èó¥Èó¥ÈöîÂ§ß‰∫éÂè≥Â≠êËäÇÁÇπÔºåÂèñÊó∂Èó¥Èó¥ÈöîÊúÄÂ∞èÁöÑËäÇÁÇπ if (right &lt; size &amp;&amp; c.compareTo(queue[right]) &gt; 0) c = queue[child = right]; // Â¶ÇÊûúkeyÁöÑÊó∂Èó¥Èó¥ÈöîÂ∞è‰∫éÁ≠â‰∫écÁöÑÊó∂Èó¥Èó¥ÈöîÔºåË∑≥Âá∫Âæ™ÁéØ if (key.compareTo(c) &lt;= 0) break; // ËÆæÁΩÆË¶ÅÁßªÈô§Á¥¢ÂºïÁöÑËäÇÁÇπ‰∏∫ÂÖ∂Â≠êËäÇÁÇπ queue[k] = c; setIndex(c, k); k = child; &#125; // Â∞ÜkeyÊîæÂÖ•Á¥¢Âºï‰∏∫kÁöÑ‰ΩçÁΩÆ queue[k] = key; setIndex(key, k);&#125; siftDownÊñπÊ≥ïÊâßË°åÊó∂ÂåÖÂê´‰∏§ÁßçÊÉÖÂÜµÔºå‰∏ÄÁßçÊòØÊ≤°ÊúâÂ≠êËäÇÁÇπÔºå‰∏ÄÁßçÊòØÊúâÂ≠êËäÇÁÇπÔºàÊ†πÊçÆhalfÂà§Êñ≠Ôºâ„ÄÇ‰æãÂ¶ÇÔºö Ê≤°ÊúâÂ≠êËäÇÁÇπÁöÑÊÉÖÂÜµÔºö ÂÅáËÆæÂàùÂßãÁöÑÂ†ÜÂ¶Ç‰∏ãÔºö ÂÅáËÆæ k = 3 ÔºåÈÇ£‰πà k = half ÔºåÊ≤°ÊúâÂ≠êËäÇÁÇπÔºåÂú®ÊâßË°åsiftDownÊñπÊ≥ïÊó∂Áõ¥Êé•ÊääÁ¥¢Âºï‰∏∫3ÁöÑËäÇÁÇπËÆæÁΩÆ‰∏∫Êï∞ÁªÑÁöÑÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÔºö ÊúâÂ≠êËäÇÁÇπÁöÑÊÉÖÂÜµÔºö ÂÅáËÆæ k = 0 ÔºåÈÇ£‰πàÊâßË°å‰ª•‰∏ãÊ≠•È™§Ôºö Ëé∑ÂèñÂ∑¶Â≠êËäÇÁÇπÔºåchild = 1 ÔºåËé∑ÂèñÂè≥Â≠êËäÇÁÇπÔºå right = 2 Ôºö Áî±‰∫é right &lt; size ÔºåËøôÊó∂ÊØîËæÉÂ∑¶Â≠êËäÇÁÇπÂíåÂè≥Â≠êËäÇÁÇπÊó∂Èó¥Èó¥ÈöîÁöÑÂ§ßÂ∞èÔºåËøôÈáå 3 &lt; 7 ÔºåÊâÄ‰ª• c = queue[child] Ôºõ ÊØîËæÉkeyÁöÑÊó∂Èó¥Èó¥ÈöîÊòØÂê¶Â∞è‰∫écÁöÑÊó∂Èó¥Èó¥ÈöîÔºåËøôÈáå‰∏çÊª°Ë∂≥ÔºåÁªßÁª≠ÊâßË°åÔºåÊääÁ¥¢Âºï‰∏∫kÁöÑËäÇÁÇπËÆæÁΩÆ‰∏∫cÔºåÁÑ∂ÂêéÂ∞ÜkËÆæÁΩÆ‰∏∫childÔºåÔºõ Âõ†‰∏∫ half = 3 Ôºåk = 1 ÔºåÁªßÁª≠ÊâßË°åÂæ™ÁéØÔºåËøôÊó∂ÁöÑÁ¥¢ÂºïÂèò‰∏∫Ôºö ËøôÊó∂ÂÜçÁªèËøáÂ¶Ç‰∏äÂà§Êñ≠ÂêéÔºåÂ∞ÜkÁöÑÂÄº‰∏∫3ÔºåÊúÄÁªàÁöÑÁªìÊûúÂ¶Ç‰∏ãÔºö ÊúÄÂêéÔºåÂ¶ÇÊûúÂú®finishPollÊñπÊ≥ï‰∏≠Ë∞ÉÁî®ÁöÑËØùÔºå‰ºöÊääÁ¥¢Âºï‰∏∫0ÁöÑËäÇÁÇπÁöÑÁ¥¢ÂºïËÆæÁΩÆ‰∏∫-1ÔºåË°®Á§∫Â∑≤ÁªèÂà†Èô§‰∫ÜËØ•ËäÇÁÇπÔºåÂπ∂‰∏îsize‰πüÂáè‰∫Ü1ÔºåÊúÄÂêéÁöÑÁªìÊûúÂ¶Ç‰∏ãÔºö ÂèØËßÅÔºåsiftdownÊñπÊ≥ïÂú®ÊâßË°åÂÆåÂπ∂‰∏çÊòØÊúâÂ∫èÁöÑÔºå‰ΩÜÂèØ‰ª•ÂèëÁé∞ÔºåÂ≠êËäÇÁÇπÁöÑ‰∏ãÊ¨°ÊâßË°åÊó∂Èó¥‰∏ÄÂÆöÊØîÁà∂ËäÇÁÇπÁöÑ‰∏ãÊ¨°ÊâßË°åÊó∂Èó¥Ë¶ÅÂ§ßÔºåÁî±‰∫éÊØèÊ¨°ÈÉΩ‰ºöÂèñÂ∑¶Â≠êËäÇÁÇπÂíåÂè≥Â≠êËäÇÁÇπ‰∏≠‰∏ãÊ¨°ÊâßË°åÊó∂Èó¥ÊúÄÂ∞èÁöÑËäÇÁÇπÔºåÊâÄ‰ª•ËøòÊòØÂèØ‰ª•‰øùËØÅÂú®takeÂíåpollÊó∂Âá∫ÈòüÊòØÊúâÂ∫èÁöÑ„ÄÇ removeÊñπÊ≥ï1234567891011121314151617181920212223242526public boolean remove(Object x) &#123; final ReentrantLock lock = this.lock; lock.lock(); try &#123; int i = indexOf(x); if (i &lt; 0) return false; setIndex(queue[i], -1); int s = --size; RunnableScheduledFuture&lt;?&gt; replacement = queue[s]; queue[s] = null; if (s != i) &#123; // ‰ªéiÂºÄÂßãÂêë‰∏ãË∞ÉÊï¥ siftDown(i, replacement); // Â¶ÇÊûúqueue[i] == replacementÔºåËØ¥ÊòéiÊòØÂè∂Â≠êËäÇÁÇπ // Â¶ÇÊûúÊòØËøôÁßçÊÉÖÂÜµÔºå‰∏çËÉΩ‰øùËØÅÂ≠êËäÇÁÇπÁöÑ‰∏ãÊ¨°ÊâßË°åÊó∂Èó¥ÊØîÁà∂ËäÇÁÇπÁöÑÂ§ß // ËøôÊó∂ÈúÄË¶ÅËøõË°å‰∏ÄÊ¨°Âêë‰∏äË∞ÉÊï¥ if (queue[i] == replacement) siftUp(i, replacement); &#125; return true; &#125; finally &#123; lock.unlock(); &#125;&#125; ÂÅáËÆæÂàùÂßãÁöÑÂ†ÜÁªìÊûÑÂ¶Ç‰∏ãÔºö ËøôÊó∂Ë¶ÅÂà†Èô§8ÁöÑËäÇÁÇπÔºåÈÇ£‰πàËøôÊó∂ k = 1Ôºåkey‰∏∫ÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÔºö ËøôÊó∂ÈÄöËøá‰∏äÊñáÂØπsiftDownÊñπÊ≥ïÁöÑÂàÜÊûêÔºåsiftDownÊñπÊ≥ïÊâßË°åÂêéÁöÑÁªìÊûúÂ¶Ç‰∏ãÔºö ËøôÊó∂‰ºöÂèëÁé∞ÔºåÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÁöÑÂÄºÊØîÁà∂ËäÇÁÇπËøòË¶ÅÂ∞èÔºåÊâÄ‰ª•ËøôÈáåË¶ÅÊâßË°å‰∏ÄÊ¨°siftUpÊñπÊ≥ïÊù•‰øùËØÅÂ≠êËäÇÁÇπÁöÑ‰∏ãÊ¨°ÊâßË°åÊó∂Èó¥Ë¶ÅÊØîÁà∂ËäÇÁÇπÁöÑÂ§ßÔºåÊâÄ‰ª•ÊúÄÁªàÁªìÊûúÂ¶Ç‰∏ãÔºö ÊÄªÁªìÊú¨ÊñáËØ¶ÁªÜÂàÜÊûê‰∫ÜScheduedThreadPoolExecutorÁöÑÂÆûÁé∞Ôºå‰∏ªË¶Å‰ªãÁªç‰∫Ü‰ª•‰∏ãÊñπÈù¢Ôºö ‰∏éTimerÊâßË°åÂÆöÊó∂‰ªªÂä°ÁöÑÊØîËæÉÔºåÁõ∏ÊØîTimerÔºåScheduedThreadPoolExecutorÊúâ‰ªÄ‰πà‰ºòÁÇπÔºõ ScheduledThreadPoolExecutorÁªßÊâøËá™ThreadPoolExecutorÔºåÊâÄ‰ª•ÂÆÉ‰πüÊòØ‰∏Ä‰∏™Á∫øÁ®ãÊ±†Ôºå‰πüÊúâcoorPoolSizeÂíåworkQueueÔºåScheduledThreadPoolExecutorÁâπÊÆäÁöÑÂú∞ÊñπÂú®‰∫éÔºåËá™Â∑±ÂÆûÁé∞‰∫Ü‰ºòÂÖàÂ∑•‰ΩúÈòüÂàóDelayedWorkQueueÔºõ ScheduedThreadPoolExecutorÂÆûÁé∞‰∫ÜScheduledExecutorServiceÔºåÊâÄ‰ª•Â∞±Êúâ‰∫Ü‰ªªÂä°Ë∞ÉÂ∫¶ÁöÑÊñπÊ≥ïÔºåÂ¶ÇscheduleÔºåscheduleAtFixedRateÂíåscheduleWithFixedDelayÔºåÂêåÊó∂Ê≥®ÊÑè‰ªñ‰ª¨‰πãÈó¥ÁöÑÂå∫Âà´Ôºõ ÂÜÖÈÉ®Á±ªScheduledFutureTaskÁªßÊâøËá™FutureTaskÔºåÂÆûÁé∞‰∫Ü‰ªªÂä°ÁöÑÂºÇÊ≠•ÊâßË°åÂπ∂‰∏îÂèØ‰ª•Ëé∑ÂèñËøîÂõûÁªìÊûú„ÄÇÂêåÊó∂‰πüÂÆûÁé∞‰∫ÜDelayedÊé•Âè£ÔºåÂèØ‰ª•ÈÄöËøágetDelayÊñπÊ≥ïËé∑ÂèñÂ∞ÜË¶ÅÊâßË°åÁöÑÊó∂Èó¥Èó¥ÈöîÔºõ Âë®Êúü‰ªªÂä°ÁöÑÊâßË°åÂÖ∂ÂÆûÊòØË∞ÉÁî®‰∫ÜFutureTaskÁ±ª‰∏≠ÁöÑrunAndResetÊñπÊ≥ïÔºåÊØèÊ¨°ÊâßË°åÂÆå‰∏çËÆæÁΩÆÁªìÊûúÂíåÁä∂ÊÄÅ„ÄÇÂèÇËÄÉFutureTaskÊ∫êÁ†ÅËß£ÊûêÔºõ ËØ¶ÁªÜÂàÜÊûê‰∫ÜDelayedWorkQueueÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂÆÉÊòØ‰∏Ä‰∏™Âü∫‰∫éÊúÄÂ∞èÂ†ÜÁªìÊûÑÁöÑ‰ºòÂÖàÈòüÂàóÔºåÂπ∂‰∏îÊØèÊ¨°Âá∫ÈòüÊó∂ËÉΩÂ§ü‰øùËØÅÂèñÂá∫ÁöÑ‰ªªÂä°ÊòØÂΩìÂâçÈòüÂàó‰∏≠‰∏ãÊ¨°ÊâßË°åÊó∂Èó¥ÊúÄÂ∞èÁöÑ‰ªªÂä°„ÄÇÂêåÊó∂Ê≥®ÊÑè‰∏Ä‰∏ã‰ºòÂÖàÈòüÂàó‰∏≠Â†ÜÁöÑÈ°∫Â∫èÔºåÂ†Ü‰∏≠ÁöÑÈ°∫Â∫èÂπ∂‰∏çÊòØÁªùÂØπÁöÑÔºå‰ΩÜË¶Å‰øùËØÅÂ≠êËäÇÁÇπÁöÑÂÄºË¶ÅÊØîÁà∂ËäÇÁÇπÁöÑÂÄºË¶ÅÂ§ßÔºåËøôÊ†∑Â∞±‰∏ç‰ºöÂΩ±ÂìçÂá∫ÈòüÁöÑÈ°∫Â∫è„ÄÇ ÊÄª‰ΩìÊù•ËØ¥ÔºåScheduedThreadPoolExecutorÁöÑÈáçÁÇπÊòØË¶ÅÁêÜËß£‰∏ãÊ¨°ÊâßË°åÊó∂Èó¥ÁöÑËÆ°ÁÆóÔºå‰ª•Âèä‰ºòÂÖàÈòüÂàóÁöÑÂá∫Èòü„ÄÅÂÖ•ÈòüÂíåÂà†Èô§ÁöÑËøáÁ®ãÔºåËøô‰∏§‰∏™ÊòØÁêÜËß£ScheduedThreadPoolExecutorÁöÑÂÖ≥ÈîÆ„ÄÇ]]></content>
      <categories>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Á∫øÁ®ãÊ±†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â§öÁ∫øÁ®ãÔºà‰∏âÔºâ--- Âπ∂ÂèëÂÆπÂô®]]></title>
    <url>%2F2020%2F02%2F27%2F%E5%A4%9A%E7%BA%BF%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89----%20%E5%B9%B6%E5%8F%91%E5%AE%B9%E5%99%A8.html</url>
    <content type="text"><![CDATA[ConcurrentHashMapËøô‰∏™ÊàëÂú® Map &amp; Set Ê∫êÁ†ÅÂàÜÊûê ‰∏≠Â∑≤ÁªèÈùûÂ∏∏ËØ¶ÁªÜÁöÑËÆ≤Ëøá‰∫ÜÔºåËøôÈáåÂ∞±Áõ¥Êé•Áï•Ëøá‰∫Ü‚Ä¶ CopyOnWriteArrayList https://juejin.im/post/5aeeae756fb9a07ab11112af ÂêñÔºÅËøô‰∏™Êõ¥ÁÆÄÂçïÂìàÂìàÂìàÔºåÂÖ∂ÂÆû‰πüÂ∞±ÊòØËØª‰∏çÂä†ÈîÅÔºåÂÜôÂä†‰∏™ÈîÅÔºåÂÜôÁöÑÊó∂ÂÄôÁî±‰∫éÊòØÂÖàÂ§çÂà∂‰∏ÄÈÅçÔºåÁÑ∂ÂêéÂÜçÂÜôÂõûÂà∞ÂéüÊï∞ÁªÑÔºåÊâÄ‰ª•Â≠òÂú®ËØªÂÜôÁöÑÂº±‰∏ÄËá¥ÊÄßÔºå‰πüÂ∞±ÊòØËØ¥ËØªÂà∞ÁöÑÊï∞ÊçÆÂèØËÉΩ‰∏ç‰ºöÊòØÊúÄÊñ∞ÁöÑ„ÄÇ BlockingQueueÈòªÂ°ûÈòüÂàóÔºàBlockingQueueÔºâË¢´ÂπøÊ≥õ‰ΩøÁî®Âú®‚ÄúÁîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖ‚ÄùÈóÆÈ¢ò‰∏≠ÔºåÂÖ∂ÂéüÂõ†ÊòØ BlockingQueue Êèê‰æõ‰∫ÜÂèØÈòªÂ°ûÁöÑÊèíÂÖ•ÂíåÁßªÈô§ÁöÑÊñπÊ≥ï„ÄÇÂΩìÈòüÂàóÂÆπÂô®Â∑≤Êª°ÔºåÁîü‰∫ßËÄÖÁ∫øÁ®ã‰ºöË¢´ÈòªÂ°ûÔºåÁõ¥Âà∞ÈòüÂàóÊú™Êª°ÔºõÂΩìÈòüÂàóÂÆπÂô®‰∏∫Á©∫Êó∂ÔºåÊ∂àË¥πËÄÖÁ∫øÁ®ã‰ºöË¢´ÈòªÂ°ûÔºåÁõ¥Ëá≥ÈòüÂàóÈùûÁ©∫Êó∂‰∏∫Ê≠¢„ÄÇÂÖ∂ÂÆûÂ∞±ÊòØÂ∞ÅË£Ö‰∫ÜÊàëÂú® Condition ÈÇ£‰∏ÄÂùó‰∏æÁöÑ‰æãÂ≠ê„ÄÇÁõ∏ÊØî‰∫éÂπ≥Â∏∏ÁöÑ Queue()ÔºåÂ∞±ÊòØÂú®ÂÖ•ÈòüÂá∫ÈòüÂ∞ÅË£Ö‰∫Ü‰∏ã ConditionÔºå‰πüÂ∞±ÊòØ put() Âíå take() „ÄåÂÖ•ÈòüÂíåÂá∫Èòü„Äç„ÄÇ https://juejin.im/post/5aeebd02518825672f19c546 ArrayBlockingQueue &amp; LinkedBlockingQueue https://juejin.im/post/5aeebdb26fb9a07aa83ea17e Êå∫ÁÆÄÂçïÁöÑ‚Ä¶Ê≤°Âï•ËÆ≤ÁöÑ„ÄÇ]]></content>
      <categories>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Âπ∂ÂèëÂÆπÂô®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â§öÁ∫øÁ®ãÔºà‰∫åÔºâ--- ThreadLocal]]></title>
    <url>%2F2020%2F02%2F27%2F%E5%A4%9A%E7%BA%BF%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89----%20ThreadLocal.html</url>
    <content type="text"><![CDATA[ThreadLocalËøô‰∏™ÈúÄË¶ÅÂ•ΩÂ•ΩÂÜô‰∏Ä‰∏ãÔºåÊÑüËßâÊòØÊØîËæÉÈ∫ªÁÉ¶ÁöÑ„ÄÇÈöæÁÇπ‰∏ªË¶ÅÂ∞±Âú® Thread Âíå ThreadLocal ‰πãÈó¥ÁöÑÂÖ≥Á≥ª„ÄÇ ‰∏ªË¶ÅÂèÇËÄÉ‰∫ÜThreadLocalÁöÑÂéüÁêÜÈÉ®ÂàÜÔºåÂ∞±ÊòØËøôÁØáÊñáÁ´†Áªà‰∫éËÆ©ÊàëÊòéÁôΩÊàëÊÉ≥Èîô‰∫Ü ÂàùÂßãÂåñÁöÑÊó∂ÂÄôÔºåÊ≥®ÊÑè‰∏çË¶Å‰øùÂ≠òÂØπË±°ÁöÑÂºïÁî®ÔºåËøôÊ†∑ÁöÑËØùÊã∑Ë¥ùÁöÑÂâØÊú¨‰πüÂøÖÁÑ∂ÊòØÂØπË±°ÁöÑÂºïÁî®ÔºåÊúÄÁªàÈÉΩ‰ºöÊîπÂèòÂØπË±°ÔºåËøôÊ†∑Â∞±‰∏çÂØπ‰∫Ü ThreadLocal ÁÆÄËø∞ ThreadLocal ÂÜÖÂ≠òÊ≥ÑÊºèÈóÆÈ¢ò ThreadLocalÁõ∏ÂÖ≥ÈóÆÈ¢òÔºÅÈùûÂ∏∏ÊúâÊ∑±Â∫¶ÔºÅÈù¢ËØï‰πãÂâç‰∏ÄÂÆöË¶ÅÂÜçÁúãÁúãÔºÅÔºÅÔºÅÔºÅÔºÅÂº∫ÁÉàÊé®ËçêÔºÅÔºÅÔºÅ ThreadLocal ÁÆÄ‰ªã ThreadLocal ‰∏éÁ∫øÁ®ãÂêåÊ≠•Êó†ÂÖ≥„ÄÇ ThreadLocalËôΩÁÑ∂Êèê‰æõ‰∫Ü‰∏ÄÁßçËß£ÂÜ≥Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÊàêÂëòÂèòÈáèÁöÑÈóÆÈ¢òÔºå‰ΩÜÊòØÂÆÉÂπ∂‰∏çÊòØËß£ÂÜ≥Â§öÁ∫øÁ®ãÂÖ±‰∫´ÂèòÈáèÁöÑÈóÆÈ¢ò„ÄÇÂØπ‰∫éÂ§öÁ∫øÁ®ãËµÑÊ∫êÂÖ±‰∫´ÁöÑÈóÆÈ¢òÔºåÂêåÊ≠•Êú∫Âà∂ÈááÁî®‰∫Ü‚Äú‰ª•Êó∂Èó¥Êç¢Á©∫Èó¥‚ÄùÁöÑÊñπÂºèÔºåËÄåThreadLocalÈááÁî®‰∫Ü‚Äú‰ª•Á©∫Èó¥Êç¢Êó∂Èó¥‚ÄùÁöÑÊñπÂºè„ÄÇÂâçËÄÖ‰ªÖÊèê‰æõ‰∏Ä‰ªΩÂèòÈáèÔºåËÆ©‰∏çÂêåÁöÑÁ∫øÁ®ãÊéíÈòüËÆøÈóÆÔºåËÄåÂêéËÄÖ‰∏∫ÊØè‰∏Ä‰∏™Á∫øÁ®ãÈÉΩÊèê‰æõ‰∫Ü‰∏Ä‰ªΩÂèòÈáèÔºåÂõ†Ê≠§ÂèØ‰ª•ÂêåÊó∂ËÆøÈóÆËÄå‰∫í‰∏çÂΩ±Âìç„ÄÇ Ê≠£Â¶Ç‰∏äÈù¢ÊâÄË®ÄÔºåÊØè‰∏™Á∫øÁ®ãÈÉΩ‰ºöÂ§çÂà∂‰∏Ä‰ªΩ ThreadLocal ÁöÑÂâØÊú¨ÔºåÁÑ∂ÂêéÁ∫øÁ®ãÂÜÖÈÉ®ËøõË°å‰ΩøÁî®ÔºåÊâÄË∞ìÁöÑ ThreadLocalÂ∞±ÊòØÊåá ‚ÄúÁ∫øÁ®ãÂ±ÄÈÉ®ÂèòÈáè‚Äù„ÄÇ ThreadLocal ÂéüÁêÜÁúãÊ∫êÁ†ÅÁöÑÊó∂ÂÄôÔºåË¢´ ThreadLocal„ÄÅThreadLocalMap„ÄÅthreadLocals ÁªïÊôï‰∫ÜÔºåÊúÄÂêéÁªà‰∫éÁªïÊòéÁôΩ‰∫Ü‚Ä¶ÂÖ∂ÂÆûËøòÊòØËá™Â∑±ÂÖàÂÖ•‰∏∫‰∏ªÁöÑÂéªÊÄùËÄÉ‰∫Ü ThreadLocal ÁöÑÂÆûÁé∞ÔºåÊúÄÈáçË¶ÅÁöÑÊòØÔºåÊØè‰∏Ä‰∏™Á∫øÁ®ãÈÉΩÊòØÊã•Êúâ‰∏Ä‰∏™ ThreadLocalMap ÁöÑÔºå‰∏∫‰ªÄ‰πàË¶ÅÁî® Map ËÄå‰∏ç‰ΩøÁî® Pair Âë¢ÔºüÂõ†‰∏∫ÊØè‰∏™Á∫øÁ®ãÂèØËÉΩÊã•ÊúâÈùûÂ∏∏Â§ö‰∏™ ThreadLocal ÂèòÈáè„ÄÇÂÜçÈáçÂ§ç‰∏ÄÈÅçÔºåThreadLocalMap ÊòØ‰ªéÂ±û‰∫éÊØè‰∏™Á∫øÁ®ãÁöÑÔºåÊØè‰∏™Á∫øÁ®ãËá™Â∑±ÁÆ°ÁêÜËá™Â∑±ÁöÑ mapÔºåÊó¢ÁÑ∂ËØ¥Âà∞ËøôÔºåÊàëÂ∞±ÂÜçËØ¶ÁªÜÁöÑËØ¥‰∏Ä‰∏ã„ÄÇ ÊàëÁöÑÊÉ≥Ê≥ï‚Äî-ThreadLocal Áª¥Êä§Á∫øÁ®ã‰∏éÂÆû‰æãÁöÑÊò†Â∞ÑÂõ†‰∏∫ÊàëÁúã ThreadLocalMap ÊòØ ThreadLocal ÁöÑ ÂÜÖÈÉ®Á±ªÔºåÊâÄ‰ª•‰ª•‰∏∫‰ªéÂ±ûÂÖ≥Á≥ªÊòØ Map ‰ªéÂ±û‰∫éËØ•ÂèòÈáèÔºåÈÇ£‰∏Ä‰∏™ÂèØËÉΩÁöÑÊñπÊ°àÂ∞±ÊòØÊØè‰∏Ä‰∏™ ThreadLocal ÂèòÈáèÈÉΩÁª¥Êä§‰∏Ä‰∏™ ThreadLocalMapÔºåÊàë‰ª¨ÈÉΩÁü•ÈÅìÔºåÊØè‰∏™ËÆøÈóÆ ThreadLocal ÂèòÈáèÁöÑÁ∫øÁ®ãÈÉΩÊúâËá™Â∑±ÁöÑ‰∏Ä‰∏™‚ÄúÊú¨Âú∞‚ÄùÂÆû‰æãÂâØÊú¨„ÄÇÁ∫øÁ®ãÈÄöËøáËØ• ThreadLocal ÁöÑ get() ÊñπÊ°àËé∑ÂèñÂÆû‰æãÊó∂ÔºåÂè™ÈúÄË¶Å‰ª•Á∫øÁ®ã‰∏∫ÈîÆÔºå‰ªé Map ‰∏≠ÊâæÂá∫ÂØπÂ∫îÁöÑÂÆû‰æãÂç≥ÂèØ„ÄÇËØ•ÊñπÊ°àÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö ËØ•ÊñπÊ°àÂèØÊª°Ë∂≥‰∏äÊñáÊèêÂà∞ÁöÑÊØè‰∏™Á∫øÁ®ãÂÜÖ‰∏Ä‰∏™Áã¨Á´ãÂ§á‰ªΩÁöÑË¶ÅÊ±Ç„ÄÇÊØè‰∏™Êñ∞Á∫øÁ®ãËÆøÈóÆËØ• ThreadLocal Êó∂ÔºåÈúÄË¶ÅÂêë Map ‰∏≠Ê∑ªÂä†‰∏Ä‰∏™Êò†Â∞ÑÔºåËÄåÊØè‰∏™Á∫øÁ®ãÁªìÊùüÊó∂ÔºåÂ∫îËØ•Ê∏ÖÈô§ËØ•Êò†Â∞Ñ„ÄÇËøôÈáåÂ∞±Êúâ‰∏§‰∏™ÈóÆÈ¢òÔºö Â¢ûÂä†Á∫øÁ®ã‰∏éÂáèÂ∞ëÁ∫øÁ®ãÂùáÈúÄË¶ÅÂÜô MapÔºåÊïÖÈúÄ‰øùËØÅËØ• Map Á∫øÁ®ãÂÆâÂÖ®„ÄÇËôΩÁÑ∂ÊúâÂá†ÁßçÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ® Map ÁöÑÊñπÂºèÔºå‰ΩÜÂÆÉÊàñÂ§öÊàñÂ∞ëÈÉΩÈúÄË¶ÅÈîÅÊù•‰øùËØÅÁ∫øÁ®ãÁöÑÂÆâÂÖ®ÊÄß„ÄÇ Á∫øÁ®ãÁªìÊùüÊó∂ÔºåÈúÄË¶Å‰øùËØÅÂÆÉÊâÄËÆøÈóÆÁöÑÊâÄÊúâ ThreadLocal ‰∏≠ÂØπÂ∫îÁöÑÊò†Â∞ÑÂùáÂà†Èô§ÔºåÂê¶ÂàôÂèØËÉΩ‰ºöÂºïËµ∑ÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇÔºàÂêéÊñá‰ºö‰ªãÁªçÈÅøÂÖçÂÜÖÂ≠òÊ≥ÑÊºèÁöÑÊñπÊ≥ïÔºâ ÂÖ∂‰∏≠ÈîÅÁöÑÈóÆÈ¢òÔºåÂ∫îËØ•ÊòØ JDK Êú™ÈááÁî®ËØ•ÊñπÊ°àÁöÑ‰∏Ä‰∏™ÂéüÂõ†„ÄÇ ÁúüÊ≠£ÁöÑÂÆûÁé∞‚Äî-Thread Áª¥Êä§ThreadLocal‰∏éÂÆû‰æãÁöÑÊò†Â∞Ñ‰∏äËø∞ÊñπÊ°à‰∏≠ÔºåÂá∫Áé∞ÈîÅÁöÑÈóÆÈ¢òÔºåÂéüÂõ†Âú®‰∫éÂ§öÁ∫øÁ®ãËÆøÈóÆÂêå‰∏Ä‰∏™ Map„ÄÇÂ¶ÇÊûúËØ• Map Áî± Thread Áª¥Êä§Ôºå‰ªéËÄå‰ΩøÂæóÊØè‰∏™ Thread Âè™ËÆøÈóÆËá™Â∑±ÁöÑ MapÔºåÈÇ£Â∞±‰∏çÂ≠òÂú®Â§öÁ∫øÁ®ãÂÜôÁöÑÈóÆÈ¢òÔºå‰πüÂ∞±‰∏çÈúÄË¶ÅÈîÅ„ÄÇËØ•ÊñπÊ°àÂ¶Ç‰∏ãÂõæÊâÄÁ§∫„ÄÇ ËØ•ÊñπÊ°àËôΩÁÑ∂Ê≤°ÊúâÈîÅÁöÑÈóÆÈ¢òÔºå‰ΩÜÊòØÁî±‰∫éÊØè‰∏™Á∫øÁ®ãËÆøÈóÆÊüê ThreadLocal ÂèòÈáèÂêéÔºåÈÉΩ‰ºöÂú®Ëá™Â∑±ÁöÑ Map ÂÜÖÁª¥Êä§ËØ• ThreadLocal ÂèòÈáè‰∏éÂÖ∑‰ΩìÂÆû‰æãÁöÑÊò†Â∞ÑÔºåÂ¶ÇÊûú‰∏çÂà†Èô§Ëøô‰∫õÂºïÁî®ÔºàÊò†Â∞ÑÔºâÔºåÂàôËøô‰∫õ ThreadLocal ‰∏çËÉΩË¢´ÂõûÊî∂ÔºåÂèØËÉΩ‰ºöÈÄ†ÊàêÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇÂêéÊñá‰ºö‰ªãÁªç JDK Â¶Ç‰ΩïËß£ÂÜ≥ËØ•ÈóÆÈ¢ò„ÄÇ ThreadLocal ‰ΩøÁî® DemoÂú®ËøôÈáåÔºåÊàë‰ª¨ÂÖàÊù•‰ΩøÁî®‰∏Ä‰∏ã ThreadLocalÔºåÂÜçÊù•ÂàÜÊûêÂÖ∂Ê∫êÁ†Å„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041424344package Â§öÁ∫øÁ®ã;import java.text.ParseException;import java.text.SimpleDateFormat;import java.util.Date;import java.util.concurrent.ExecutorService;import java.util.concurrent.Executors;public class ThreadLocalTest &#123;&#125;class ThreadLocalDemo &#123; private static ThreadLocal&lt;SimpleDateFormat&gt; sdf = new ThreadLocal&lt;&gt;(); public static void main(String[] args) &#123; ExecutorService executorService = Executors.newFixedThreadPool(10); for (int i = 0; i &lt; 100; i++) &#123; executorService.submit(new DateUtil("2019-11-25 09:00:" + i % 60)); &#125; &#125; static class DateUtil implements Runnable &#123; private String date; public DateUtil(String date) &#123; this.date = date; &#125; @Override public void run() &#123; if (sdf.get() == null) &#123; sdf.set(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss")); &#125; else &#123; try &#123; Date date = sdf.get().parse(this.date); System.out.println(date); &#125; catch (ParseException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125;&#125; Ê≥®ÊÑèÊàë‰ª¨Âú®ËøôÈáåÔºåÁî®ÁöÑÊòØ private static ‰øÆÈ•∞ÁöÑ ThreadLocalÔºå‰∏ãÊñáÊúâËØ¥‰∏∫‰ΩïÂÆòÊñπÊé®ËçêËøôÊ†∑‰øÆÈ•∞„ÄÇ Ê≥®ÊÑèÂà∞Êàë‰ª¨ËøôÈáå‰ΩøÁî®ÁöÑÊñπÊ≥ïÊòØ sdf.get()Ôºåsdf.set(obj)„ÄÇ ThreadLocal Ê∫êÁ†ÅÂàÜÊûêÂàÜÊûê‰πãÂâçÔºåÊàëËØ¥‰∏Ä‰∏ãÈáçÁÇπÔºåÊúÄÊ†∏ÂøÉÁöÑÂΩìÁÑ∂ÊòØ ThreadLocal ‰∏≠ÁöÑÂÜÖÈÉ®Á±ª ThreadLocalMapÔºåÊï¥‰∏™Â∫ïÂ±ÇÁöÑÂÆûÁé∞Âü∫Êú¨ÂÖ®ÈÉ®‰æùÊâò‰∫éËØ•ÂÜÖÈÉ®Á±ªÔºåÂêåÊó∂Âà´Âøò‰∫Ü‰∏∫‰∫Ü Thread Âíå ThreadLocalMap ‰∏Ä‰∏ÄÂØπÂ∫îÔºåThread ‰∫ÜÁ±ª‰∏≠Êúâ‰∏Ä‰∏™ÊàêÂëòÂèòÈáè‚Äî-threadLocals„ÄÇ 123/* ThreadLocal values pertaining to this thread. This map is maintained * by the ThreadLocal class. */ThreadLocal.ThreadLocalMap threadLocals = null; Êé•‰∏ãÊù•Ê≠£ÂºèËøõÂÖ•Ê∫êÁ†ÅÂàÜÊûêÊé•Èò∂ÊÆµÔºö ThreadLocal ÈÉ®ÂàÜÊñπÊ≥ïset()12345678910111213141516 public void set(T value) &#123; Thread t = Thread.currentThread(); ThreadLocalMap map = getMap(t); if (map != null) map.set(this, value); else createMap(t, value); &#125; ThreadLocalMap getMap(Thread t) &#123; return t.threadLocals; &#125;void createMap(Thread t, T firstValue) &#123; t.threadLocals = new ThreadLocalMap(this, firstValue); &#125; ÈÄªËæëÂ¶Ç‰∏ãÔºö ÈÄöËøá getMap() ÊãøÂà∞ÂΩìÂâçÁ∫øÁ®ãÂØπÂ∫îÁöÑ ThreadLocalsÔºåÊ≥®ÊÑèËøôÈáåÂèØËÉΩÊúâÂ§ö‰∏™ ThreadLocalÔºåÊâÄ‰ª•ËøîÂõûÁöÑÊòØ‰∏Ä‰∏™mapÔºõ Â¶ÇÊûú map ‰∏∫Á©∫ÔºåËØ¥ÊòéËØ•Á∫øÁ®ãËøòÊ≤°Êúâ‰ΩøÁî®Ëøá ThreadLocal ÂèòÈáèÔºåÊ≠§Êó∂Â∞±Ë∞ÉÁî® createMap() Êñ∞Âª∫‰∏Ä‰∏™ ThreadLocalMapÔºåËøôÈáå map ÂèàÂá∫Áé∞‰∫ÜÔºåÁõ∏‰ø°Â§ßÂÆ∂Â∑≤ÁªèÊÑüÂèóÂà∞‰∫ÜÈáçË¶ÅÊÄß‰∫Ü„ÄÇ Â¶ÇÊûú map ‰∏ç‰∏∫Á©∫ÔºåÊàë‰ª¨Â∞±Êää key = ÂΩìÂâçÁöÑ ThreadLocalÔºåvalue Âç≥‰∏∫ÂΩìÂâçÁ∫øÁ®ãÁöÑ ThreadLocal ÂâØÊú¨ ÂØπÂ∫îÁöÑÂÄº„ÄÇ get()1234567891011121314151617181920212223public T get() &#123; Thread t = Thread.currentThread(); ThreadLocalMap map = getMap(t); if (map != null) &#123; ThreadLocalMap.Entry e = map.getEntry(this); if (e != null) &#123; @SuppressWarnings("unchecked") T result = (T)e.value; return result; &#125; &#125; return setInitialValue();&#125; private T setInitialValue() &#123; T value = initialValue(); Thread t = Thread.currentThread(); ThreadLocalMap map = getMap(t); if (map != null) map.set(this, value); else createMap(t, value); return value; &#125; ÈÄªËæëÂ¶Ç‰∏ãÔºö ÈÄöËøáÂΩìÂâçÁ∫øÁ®ãÊãøÂà∞ mapÔºåÁÑ∂ÂêéÊãøÂà∞ÂØπÂ∫îÁöÑ key ÁöÑ entryÔºåÁÑ∂ÂêéËøîÂõûÂØπÂ∫îÁöÑ value ÂÄº„ÄÇ Â¶ÇÊûú map ‰∏∫Á©∫ÔºåÂàô Ë∞ÉÁî® setInitialValue()ÔºåË∞ÉÁî®ÂàùÂßãÂåñ ThreadLocal Êó∂ÁöÑÂÄº„ÄÇ remove()12345public void remove() &#123; ThreadLocalMap m = getMap(Thread.currentThread()); if (m != null) m.remove(this);&#125; ÊáíÂæóËß£Èáä‰∫Ü‚Ä¶ËøòÊòØË∞ÉÁî®ÁöÑ ThreadLocalMap ‰∏≠ÁöÑ remove() ÂáΩÊï∞„ÄÇ ThreadLocalMapÔºà‰∏ÄÔºâÂâçÈù¢ÁöÑÊñπÊ≥ïÂ∑≤ÁªèÈì∫Âû´Âæà‰πÖ‰∫ÜÔºåÊâÄÊúâÁöÑÊñπÊ≥ïÂü∫Êú¨ÈÉΩÊòØÂü∫‰∫éËøô‰∏™Á±ªÂÆûÁé∞ÁöÑ„ÄÇThreadLocal 700Â§öË°åÊ∫ê‰ª£Á†ÅÔºåÊúâ500Â§öË°åÈÉΩÊòØÂÜÖÈÉ®Á±ª ThreadLocalMap„ÄÇ Êï∞ÊçÆÁªìÊûÑÂøÖÈ°ªË¶ÅËØ¥ÊòéÁöÑÊòØÔºåËøôÈáåÁöÑ map ‰∏çÂêå‰∫éÊàë‰ª¨‰πãÂâç‰ªãÁªçÁöÑ HashMap„ÄÅTreeMapÁ≠âÔºåËøôÈáåÁöÑ map Â∫ïÂ±ÇÈááÁî®ÁöÑÂ∞±ÊòØÂè™ÊúâÊï∞ÁªÑÔºåÊ≤°ÊúâÁî®Âà∞Á∫¢ÈªëÊ†ëÂíåÈìæË°®ÔºåÂõ†‰∏∫ËøôÈáåËß£ÂÜ≥ÂÜ≤Á™ÅÁöÑÊñπÊ≥ïÂπ∂‰∏çÊòØÈìæÂú∞ÂùÄÊ≥ïÔºåËÄåÊòØÂºÄÊîæÂú∞ÂùÄÊ≥ï‰∏≠ÁöÑÁ∫øÊÄßÊé¢Êµã„ÄÇÊâÄ‰ª•ËøôÈáåÊï∞ÁªÑÁöÑÂü∫Êú¨ÂçïÂÖÉÊòØ Entry„ÄÇ 123456789static class Entry extends WeakReference&lt;ThreadLocal&lt;?&gt;&gt; &#123; /** The value associated with this ThreadLocal. */ Object value; Entry(ThreadLocal&lt;?&gt; k, Object v) &#123; super(k); value = v; &#125;&#125; Tip: ËøôÈáåÊúâ‰∏Ä‰∏™ÊØîËæÉÁâπÊÆäÁöÑÁ±ª WeakReferenceÔºå‰πüÂ∞±ÊòØÂº±ÂºïÁî®ÔºåÊàë‰ª¨ÂêéÈù¢‰ºöËØ¶ÁªÜ‰ªãÁªçËøô‰∏™ÔºåÂõ†‰∏∫Ëøô‰∏™Ë∑üÂÜÖÂ≠òÊ≥ÑÊºèÊúâÂæàÂ§ßÁöÑÂÖ≥Á≥ª„ÄÇ ÁÑ∂ÂêéÂàùÂßãÂÄºË∑ü HashMap ‰∏ÄÊ†∑ÔºåÈÉΩÊòØ 16Ôºå‰ΩÜÊòØÂÖ∂Ë£ÖËΩΩÂõ†Â≠êÂèòÊàê‰∫Ü 2/3ÔºåË£ÖËΩΩÂõ†Â≠êË∂äÂ§ßÔºåË∂äÂÆπÊòìÂá∫Áé∞ÂÜ≤Á™ÅÁöÑÁé∞Ë±°Ôºå‰ΩÜÊòØË£ÖËΩΩÂõ†Â≠êË∂äÂ∞èÔºåÂ∞±Ë∂äÊµ™Ë¥πÁ©∫Èó¥ÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÔºåËøôÈáåÁöÑË£ÖËΩΩÂõ†Â≠êÊòØÊØî HashMap Ë¶ÅÂ∞èÁöÑÔºåÊâÄ‰ª•ËøôÈáåÊõ¥‰∏çÂÆπÊòì‰∫ßÁîüÂÜ≤Á™ÅÔºåËøô‰πüÊòØÈááÁî®ÂºÄÊîæÂú∞ÂùÄÊ≥ïÁöÑÂéüÂõ†Âêß„ÄÇ Áé∞Âú®Êù•ÂàÜÊûê‰∏Ä‰∏ã‰∏ªË¶ÅÁöÑÂáΩÊï∞Ôºö set()123456789101112131415161718192021222324252627282930313233private void set(ThreadLocal&lt;?&gt; key, Object value) &#123; //ËøôÈáåÊúâ‰∏ÄÊÆµËã±ÊñáÊ≥®ÈáäÔºåÊÑèÊÄùÊòØ‰∏ç‰ºöÂÉè get() ‰∏ÄÊ†∑ÔºåÁõ¥Êé•ÂéªÊâæÔºåÊàêÂäü‰∫ÜÂ∞±ËøîÂõûÔºåÊ≤°ÊàêÂäüÂ∞±ÂÜçË∞ÉÁî®Âè¶Â§ñ‰∏Ä‰∏™ÂáΩÊï∞ // Âõ†‰∏∫ set()Â§ßÊ¶ÇÁéáÊòØÂ§±Ë¥•ÁöÑÂ§öÔºåÊâÄ‰ª•Â∞±Áõ¥Êé•ÂÜôÂú®‰∏Ä‰∏™ÂáΩÊï∞ÂÜÖ‰∫Ü„ÄÇ Entry[] tab = table; int len = tab.length; //Ê†πÊçÆthreadLocalÁöÑhashCodeÁ°ÆÂÆöEntryÂ∫îËØ•Â≠òÊîæÁöÑ‰ΩçÁΩÆ int i = key.threadLocalHashCode &amp; (len-1); //ÈááÁî®ÂºÄÊîæÂú∞ÂùÄÊ≥ïÔºåhashÂÜ≤Á™ÅÁöÑÊó∂ÂÄô‰ΩøÁî®Á∫øÊÄßÊé¢Êµã for (Entry e = tab[i]; e != null; e = tab[i = nextIndex(i, len)]) &#123; ThreadLocal&lt;?&gt; k = e.get(); //Ë¶ÜÁõñÊóßEntry if (k == key) &#123; e.value = value; return; &#125; //ÂΩìkey‰∏∫nullÊó∂ÔºåËØ¥ÊòéthreadLocalÂº∫ÂºïÁî®Â∑≤ÁªèË¢´ÈáäÊîæÊéâÔºåÈÇ£‰πàÂ∞±Êó†Ê≥ï //ÂÜçÈÄöËøáËøô‰∏™keyËé∑ÂèñthreadLocalMap‰∏≠ÂØπÂ∫îÁöÑentryÔºåËøôÈáåÂ∞±Â≠òÂú®ÂÜÖÂ≠òÊ≥ÑÊºèÁöÑÂèØËÉΩÊÄß if (k == null) &#123; //Áî®ÂΩìÂâçÊèíÂÖ•ÁöÑÂÄºÊõøÊç¢ÊéâËøô‰∏™key‰∏∫nullÁöÑ‚ÄúËÑè‚Äùentry replaceStaleEntry(key, value, i); return; &#125; &#125; //Êñ∞Âª∫entryÂπ∂ÊèíÂÖ•table‰∏≠iÂ§Ñ tab[i] = new Entry(key, value); int sz = ++size; //ÊèíÂÖ•ÂêéÂÜçÊ¨°Ê∏ÖÈô§‰∏Ä‰∫õkey‰∏∫nullÁöÑ‚ÄúËÑè‚Äùentry,Â¶ÇÊûúÂ§ß‰∫éÈòàÂÄºÂ∞±ÈúÄË¶ÅÊâ©ÂÆπ if (!cleanSomeSlots(i, sz) &amp;&amp; sz &gt;= threshold) rehash();&#125; ÈÄªËæëÂ¶Ç‰∏ãÔºö ÂÖàÁ°ÆÂÆö ThreadLocal ÊâÄÂú®ÁöÑ‰ΩçÁΩÆÔºõ ÁÑ∂ÂêéÈááÁî®Á∫øÊÄßÊé¢ÊµãÊ≥ïÔºåÁ°ÆÂÆö‰ΩçÁΩÆÔºõ Â¶ÇÊûúÂ≠òÂú®ËØ• ThreadLocalÔºåÈÇ£‰πàÁõ¥Êé•Ë¶ÜÁõñÂ∞±Â•Ω‰∫ÜÔºõÂ¶ÇÊûú‰∏∫ nullÔºåËØ¥ÊòéËØ• ThreadLocalÁöÑÂº∫ÂºïÁî®Â∑≤ÁªèÊ∂àÂ§±ÔºåÊ≠§Êó∂Áõ¥Êé•Âú®ËØ•‰ΩçÁΩÆÊèíÂÖ•Âç≥ÂèØÔºõÂ¶ÇÊûú‰∏çÂ≠òÂú®ÔºåÈÇ£‰πàÂ∞±Êñ∞Âª∫‰∏Ä‰∏™ EntryÔºåÊèíÂÖ•ÔºåÊúÄÂêéÂÜçÊ¨°Ê∏ÖÊ•ö ËÑèentryÔºåÂπ∂Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÊâ©ÂÆπ„ÄÇ„ÄåÂêéÈù¢‰ºöËØ¶ÁªÜËÆ≤‰∏ìÈó®Â§ÑÁêÜËÑè entry ÁöÑËøôÂá†‰∏™ÊñπÊ≥ï„Äç getEntry()123456789101112private Entry getEntry(ThreadLocal&lt;?&gt; key) &#123; //1. Á°ÆÂÆöÂú®Êï£ÂàóÊï∞ÁªÑ‰∏≠ÁöÑ‰ΩçÁΩÆ int i = key.threadLocalHashCode &amp; (table.length - 1); //2. Ê†πÊçÆÁ¥¢ÂºïiËé∑Âèñentry Entry e = table[i]; //3. Êª°Ë∂≥Êù°‰ª∂ÂàôËøîÂõûËØ•entry if (e != null &amp;&amp; e.get() == key) return e; else //4. Êú™Êü•ÊâæÂà∞Êª°Ë∂≥Êù°‰ª∂ÁöÑentryÔºåÈ¢ùÂ§ñÂú®ÂÅöÁöÑÂ§ÑÁêÜ return getEntryAfterMiss(key, i, e);&#125; 12345678910111213141516171819private Entry getEntryAfterMiss(ThreadLocal&lt;?&gt; key, int i, Entry e) &#123; Entry[] tab = table; int len = tab.length; while (e != null) &#123; ThreadLocal&lt;?&gt; k = e.get(); if (k == key) //ÊâæÂà∞ÂíåÊü•ËØ¢ÁöÑkeyÁõ∏ÂêåÁöÑentryÂàôËøîÂõû return e; if (k == null) //Ëß£ÂÜ≥ËÑèentryÁöÑÈóÆÈ¢ò expungeStaleEntry(i); else //ÁªßÁª≠ÂêëÂêéÁéØÂΩ¢Êü•Êâæ i = nextIndex(i, len); e = tab[i]; &#125; return null;&#125; resize()123456789101112131415161718192021222324252627282930313233343536/** * Double the capacity of the table. */private void resize() &#123; Entry[] oldTab = table; int oldLen = oldTab.length; //Êñ∞Êï∞ÁªÑ‰∏∫ÂéüÊï∞ÁªÑÁöÑ2ÂÄç int newLen = oldLen * 2; Entry[] newTab = new Entry[newLen]; int count = 0; for (int j = 0; j &lt; oldLen; ++j) &#123; Entry e = oldTab[j]; if (e != null) &#123; ThreadLocal&lt;?&gt; k = e.get(); //ÈÅçÂéÜËøáÁ®ã‰∏≠Â¶ÇÊûúÈÅáÂà∞ËÑèentryÁöÑËØùÁõ¥Êé•Âè¶value‰∏∫null,ÊúâÂä©‰∫évalueËÉΩÂ§üË¢´ÂõûÊî∂ if (k == null) &#123; e.value = null; // Help the GC &#125; else &#123; //ÈáçÊñ∞Á°ÆÂÆöentryÂú®Êñ∞Êï∞ÁªÑÁöÑ‰ΩçÁΩÆÔºåÁÑ∂ÂêéËøõË°åÊèíÂÖ• int h = k.threadLocalHashCode &amp; (newLen - 1); while (newTab[h] != null) h = nextIndex(h, newLen); newTab[h] = e; count++; &#125; &#125; &#125; //ËÆæÁΩÆÊñ∞ÂìàÂ∏åË°®ÁöÑthreshHoldÂíåsizeÂ±ûÊÄß setThreshold(newLen); size = count; table = newTab;&#125; private static int nextIndex(int i, int len) &#123; return ((i + 1 &lt; len) ? i + 1 : 0);&#125; Êâ©ÂÆπËøòÊòØÈùûÂ∏∏ÁÆÄÂçïÁöÑÔºåÂõ†‰∏∫‰∏çÊ∂âÂèäÂ§öÁ∫øÁ®ãÔºåËÄå‰∏îÂè™Áî®Âà∞Êï∞ÁªÑÔºåÊï¥‰ΩìÈÄªËæëÂ¶Ç‰∏ãÔºö new ‰∏Ä‰∏™ÂéüÊù•ÂÆπÈáè‰∏§ÂÄçÁöÑÊï∞ÁªÑÔºõ ÈÅáÂà∞‰∫ÜËÑè entryÔºåÂ∞±Â∞ÜÂÖ∂ value ÁΩÆ‰∏∫ nullÔºåÊñπ‰æø GCÔºåÂ¶ÇÊûú key != nullÔºåÂ∞±ÈáçÊñ∞ËÆ°ÁÆó entry Âú®Êñ∞Êï∞ÁªÑÁöÑ‰ΩçÁΩÆÔºõ ÁÑ∂ÂêéÊèíÂÖ•ÔºåÂ¶ÇÊûúÊúâÂÜ≤Á™ÅÂ∞±Á∫øÊÄßÊé¢ÊµãÂ∞±Â•Ω‰∫ÜÔºõ ÊúÄÂêéÊõ¥Êñ∞ threshold„ÄÅsize„ÄÅtableÂ∞±Â•ΩÂï¶„ÄÇ remove()12345678910111213141516private void remove(ThreadLocal&lt;?&gt; key) &#123; Entry[] tab = table; int len = tab.length; int i = key.threadLocalHashCode &amp; (len-1); for (Entry e = tab[i]; e != null; e = tab[i = nextIndex(i, len)]) &#123; if (e.get() == key) &#123; //Â∞ÜentryÁöÑkeyÁΩÆ‰∏∫null e.clear(); //Â∞ÜËØ•entryÁöÑvalue‰πüÁΩÆ‰∏∫null expungeStaleEntry(i); return; &#125; &#125;&#125; ËøôÈáå‰πüÂæàÁÆÄÂçïÔºåÂ∞±‰∏çËØ¥‰∫ÜÔºåÂ∞±Ë∑ü‰∏äÈù¢ÁöÑ‰∏ÄÊ†∑ÔºåÂú®ËøôÁñØÁãÇÁî® expungeStaleEntry()ÔºÅÔºÅÔºÅ ThreadLocalMapÔºà‰∫åÔºâËøôÈáåÂçïÁã¨ÂºÄ‰∏ÄÂ∞èËäÇÔºåËÆ≤ ThreadLocalMap‰∏≠ÊòØÂ¶Ç‰ΩïÂ§ÑÁêÜËÑè entry ÁöÑÔºå‰πüÂ∞±ÊòØ key == null ÁöÑÈîÆÂÄºÂØπÔºåËøôÊ†∑‰ºöÂØºËá¥ÂÜÖÂ≠òÊ≥ÑÊºèÔºåÊâÄ‰ª•ÂøÖÈ°ªÂ§ÑÁêÜ„ÄÇ cleanSomeSlots()ÂèØ‰ª•ÁúãÂà∞ÔºåÊ†∏ÂøÉ‰æùÊóßÊòØ expungeStaleEntry()„ÄÇ 123456789101112131415161718192021// Ê∏ÖÈô§ÈÉ®ÂàÜ ËÑèentry// ÂêØÂèëÂºèÁöÑÊâ´ÊèèËøáÊúüÊï∞ÊçÆÂπ∂Êì¶Èô§ÔºåÂêØÂèëÂºèÊòØËøôÊ†∑ÁöÑÔºö// Â¶ÇÊûúÂÆûÂú®Ê≤°ÊúâËøáÊúüÊï∞ÊçÆÔºåÈÇ£‰πàËøô‰∏™ÁÆóÊ≥ïÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶Â∞±ÊòØO(log s)// Â¶ÇÊûúÊúâËøáÊúüÊï∞ÊçÆÔºåÈÇ£‰πàËøô‰∏™ÁÆóÊ≥ïÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶Â∞±ÊòØO(log n)private boolean cleanSomeSlots(int i, int n) &#123; boolean removed = false; Entry[] tab = table; int len = tab.length; do &#123; i = nextIndex(i, len); Entry e = tab[i]; // Â¶ÇÊûú entry ‰∏ç‰∏∫Á©∫Ôºå‰∏îentry‰∏≠ÁöÑkeyÊåáÂêëÁöÑÊòØ null // ËØ¥Êòé‰∫ßÁîü‰∫Ü ËÑèentry if (e != null &amp;&amp; e.get() == null) &#123; n = len; removed = true; i = expungeStaleEntry(i); &#125; &#125; while ( (n &gt;&gt;&gt;= 1) != 0); return removed;&#125; Êï¥‰ΩìÈÄªËæëÂ¶Ç‰∏ãÔºö ‰ªéÊèíÂÖ•ÁöÑentryÁ¥¢ÂºïÁöÑÂêé‰∏Ä‰ΩçÂºÄÂßãÊ£ÄÊµãÊòØÂê¶Êúâ ËÑèentryÔºõ ÂÖàn == sizeÔºålog n ÂéªÊ£ÄÊµãÔºåÂ¶ÇÊûúÂèëÁé∞ÊúâËÑèentryÔºåÁ´ãÂç≥Âä†Â§ßn = lengthÔºåÁÑ∂Âêé‰ªé‰∏ã‰∏Ä‰∏™ÂìàÂ∏åÊ°∂‰∏∫ null ÁöÑÁ¥¢Âºï‰ΩçÁΩÆ i ÁªßÁª≠ log n Ê£ÄÊµãÔºõ ÊúÄÂêéËøîÂõûÊòØÂê¶Êúâ‰øÆÊîπ„ÄÇ expungeStaleEntry()1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950/** * Expunge a stale entry by rehashing any possibly colliding entries * lying between staleSlot and the next null slot. This also expunges * any other stale entries encountered before the trailing null. See * Knuth, Section 6.4 * * @param staleSlot index of slot known to have null key * @return the index of the next null slot after staleSlot * (all between staleSlot and this slot will have been checked * for expunging). */private int expungeStaleEntry(int staleSlot) &#123; Entry[] tab = table; int len = tab.length; //Ê∏ÖÈô§ÂΩìÂâçËÑèentry // expunge entry at staleSlot tab[staleSlot].value = null; tab[staleSlot] = null; size--; // Rehash until we encounter null Entry e; int i; //2.ÂæÄÂêéÁéØÂΩ¢ÁªßÁª≠Êü•Êâæ,Áõ¥Âà∞ÈÅáÂà∞table[i]==nullÊó∂ÁªìÊùü for (i = nextIndex(staleSlot, len); (e = tab[i]) != null; i = nextIndex(i, len)) &#123; ThreadLocal&lt;?&gt; k = e.get(); //3. Â¶ÇÊûúÂú®ÂêëÂêéÊêúÁ¥¢ËøáÁ®ã‰∏≠ÂÜçÊ¨°ÈÅáÂà∞ËÑèentryÔºåÂêåÊ†∑Â∞ÜÂÖ∂Ê∏ÖÁêÜÊéâ if (k == null) &#123; e.value = null; tab[i] = null; size--; &#125; else &#123; //Â§ÑÁêÜrehashÁöÑÊÉÖÂÜµ int h = k.threadLocalHashCode &amp; (len - 1); if (h != i) &#123; tab[i] = null; // Unlike Knuth 6.4 Algorithm R, we must scan until // null because multiple entries could have been stale. while (tab[h] != null) h = nextIndex(h, len); tab[h] = e; &#125; &#125; &#125; return i;&#125; ËØ•ÊñπÊ≥ïÈÄªËæëËØ∑ÁúãÊ≥®ÈáäÔºàÁ¨¨1,2,3Ê≠•ÔºâÔºå‰∏ªË¶ÅÂÅö‰∫ÜËøô‰πàÂá†‰ª∂‰∫ãÊÉÖÔºö Ê∏ÖÁêÜÂΩìÂâçËÑèentryÔºåÂç≥Â∞ÜÂÖ∂valueÂºïÁî®ÁΩÆ‰∏∫nullÔºåÂπ∂‰∏îÂ∞Ütable[staleSlot]‰πüÁΩÆ‰∏∫null„ÄÇvalueÁΩÆ‰∏∫nullÂêéËØ•valueÂüüÂèò‰∏∫‰∏çÂèØËææÔºåÂú®‰∏ã‰∏ÄÊ¨°gcÁöÑÊó∂ÂÄôÂ∞±‰ºöË¢´ÂõûÊî∂ÊéâÔºåÂêåÊó∂table[staleSlot]‰∏∫nullÂêé‰ª•‰æø‰∫éÂ≠òÊîæÊñ∞ÁöÑentry; ‰ªéÂΩìÂâçstaleSlot‰ΩçÁΩÆÂêëÂêéÁéØÂΩ¢ÔºànextIndexÔºâÁªßÁª≠ÊêúÁ¥¢ÔºåÁõ¥Âà∞ÈÅáÂà∞ÂìàÂ∏åÊ°∂Ôºàtab[i]Ôºâ‰∏∫nullÁöÑÊó∂ÂÄôÈÄÄÂá∫Ôºõ Ëã•Âú®ÊêúÁ¥¢ËøáÁ®ãÂÜçÊ¨°ÈÅáÂà∞ËÑèentryÔºåÁªßÁª≠Â∞ÜÂÖ∂Ê∏ÖÈô§„ÄÇ ‰πüÂ∞±ÊòØËØ¥ËØ•ÊñπÊ≥ïÔºåÊ∏ÖÁêÜÊéâÂΩìÂâçËÑèentryÂêéÔºåÂπ∂Ê≤°ÊúâÈó≤‰∏ãÊù•ÁªßÁª≠ÂêëÂêéÊêúÁ¥¢ÔºåËã•ÂÜçÊ¨°ÈÅáÂà∞ËÑèentryÁªßÁª≠Â∞ÜÂÖ∂Ê∏ÖÁêÜÔºåÁõ¥Âà∞ÂìàÂ∏åÊ°∂Ôºàtable[i]Ôºâ‰∏∫nullÊó∂ÈÄÄÂá∫„ÄÇÂõ†Ê≠§ÊñπÊ≥ïÊâßË°åÂÆåÁöÑÁªìÊûú‰∏∫ ‰ªéÂΩìÂâçËÑèentryÔºàstaleSlotÔºâ‰ΩçÂà∞ËøîÂõûÁöÑi‰ΩçÔºåËøô‰∏≠Èó¥ÊâÄÊúâÁöÑentry‰∏çÊòØËÑèentry„ÄÇ‰∏∫‰ªÄ‰πàÊòØÈÅáÂà∞nullÈÄÄÂá∫Âë¢ÔºüÂéüÂõ†ÊòØÂ≠òÂú®ËÑèentryÁöÑÂâçÊèêÊù°‰ª∂ÊòØ ÂΩìÂâçÂìàÂ∏åÊ°∂Ôºàtable[i]Ôºâ‰∏ç‰∏∫null,Âè™ÊòØËØ•entryÁöÑkeyÂüü‰∏∫null„ÄÇÂ¶ÇÊûúÈÅáÂà∞ÂìàÂ∏åÊ°∂‰∏∫null,ÂæàÊòæÁÑ∂ÂÆÉËøûÊàê‰∏∫ËÑèentryÁöÑÂâçÊèêÊù°‰ª∂ÈÉΩ‰∏çÂÖ∑Â§á„ÄÇ cleanSomeSlotÊñπÊ≥ï‰∏ªË¶ÅÊúâËøôÊ†∑Âá†ÁÇπÔºö ‰ªéÂΩìÂâç‰ΩçÁΩÆiÂ§ÑÔºà‰Ωç‰∫éiÂ§ÑÁöÑentry‰∏ÄÂÆö‰∏çÊòØËÑèentryÔºâ‰∏∫Ëµ∑ÁÇπÂú®ÂàùÂßãÂ∞èËåÉÂõ¥Ôºàlog2(n)Ôºån‰∏∫ÂìàÂ∏åË°®Â∑≤ÊèíÂÖ•entryÁöÑ‰∏™Êï∞sizeÔºâÂºÄÂßãÂêëÂêéÊêúÁ¥¢ËÑèentryÔºåËã•Âú®Êï¥‰∏™ÊêúÁ¥¢ËøáÁ®ãÊ≤°ÊúâËÑèentryÔºåÊñπÊ≥ïÁªìÊùüÈÄÄÂá∫ Â¶ÇÊûúÂú®ÊêúÁ¥¢ËøáÁ®ã‰∏≠ÈÅáÂà∞ËÑèentrytÈÄöËøáexpungeStaleEntryÊñπÊ≥ïÊ∏ÖÁêÜÊéâÂΩìÂâçËÑèentryÔºåÂπ∂‰∏îËØ•ÊñπÊ≥ï‰ºöËøîÂõû‰∏ã‰∏Ä‰∏™ÂìàÂ∏åÊ°∂(table[i])‰∏∫nullÁöÑÁ¥¢Âºï‰ΩçÁΩÆ‰∏∫i„ÄÇËøôÊó∂ÈáçÊñ∞‰ª§ÊêúÁ¥¢Ëµ∑ÁÇπ‰∏∫Á¥¢Âºï‰ΩçÁΩÆiÔºån‰∏∫ÂìàÂ∏åË°®ÁöÑÈïøÂ∫¶lenÔºåÂÜçÊ¨°Êâ©Â§ßÊêúÁ¥¢ËåÉÂõ¥‰∏∫log2(n)ÁªßÁª≠ÊêúÁ¥¢„ÄÇ ‰∏ãÈù¢Ôºå‰ª•‰∏Ä‰∏™‰æãÂ≠êÊõ¥Ê∏ÖÊô∞ÁöÑÊù•ËØ¥‰∏Ä‰∏ãÔºåÂÅáËÆæÂΩìÂâçtableÊï∞ÁªÑÁöÑÊÉÖÂÜµÂ¶Ç‰∏ãÂõæ„ÄÇ Â¶ÇÂõæÂΩìÂâçnÁ≠â‰∫éhashË°®ÁöÑsizeÂç≥n=10Ôºåi=1,Âú®Á¨¨‰∏ÄË∂üÊêúÁ¥¢ËøáÁ®ã‰∏≠ÈÄöËøánextIndex,iÊåáÂêë‰∫ÜÁ¥¢Âºï‰∏∫2ÁöÑ‰ΩçÁΩÆÔºåÊ≠§Êó∂table[2]‰∏∫nullÔºåËØ¥ÊòéÁ¨¨‰∏ÄË∂üÊú™ÂèëÁé∞ËÑèentry,ÂàôÁ¨¨‰∏ÄË∂üÁªìÊùüËøõË°åÁ¨¨‰∫åË∂üÁöÑÊêúÁ¥¢„ÄÇ Á¨¨‰∫åË∂üÊâÄÊêúÂÖàÈÄöËøánextIndexÊñπÊ≥ïÔºåÁ¥¢ÂºïÁî±2ÁöÑ‰ΩçÁΩÆÂèòÊàê‰∫Üi=3,ÂΩìÂâçtable[3]!=null‰ΩÜÊòØËØ•entryÁöÑkey‰∏∫nullÔºåËØ¥ÊòéÊâæÂà∞‰∫Ü‰∏Ä‰∏™ËÑèentryÔºåÂÖàÂ∞ÜnÁΩÆ‰∏∫ÂìàÂ∏åË°®ÁöÑÈïøÂ∫¶len,ÁÑ∂ÂêéÁªßÁª≠Ë∞ÉÁî®expungeStaleEntryÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ï‰ºöÂ∞ÜÂΩìÂâçÁ¥¢Âºï‰∏∫3ÁöÑËÑèentryÁªôÊ∏ÖÈô§ÊéâÔºà‰ª§value‰∏∫nullÔºåÂπ∂‰∏îtable[3]‰πü‰∏∫nullÔºâ,‰ΩÜÊòØËØ•ÊñπÊ≥ïÂèØ‰∏çÊÉ≥ÂÅ∑ÊáíÔºåÂÆÉ‰ºöÁªßÁª≠ÂæÄÂêéÁéØÂΩ¢ÊêúÁ¥¢ÔºåÂæÄÂêé‰ºöÂèëÁé∞Á¥¢Âºï‰∏∫4,5ÁöÑ‰ΩçÁΩÆÁöÑentryÂêåÊ†∑‰∏∫ËÑèentryÔºåÁ¥¢Âºï‰∏∫6ÁöÑ‰ΩçÁΩÆÁöÑentry‰∏çÊòØËÑèentry‰øùÊåÅ‰∏çÂèòÔºåÁõ¥Ëá≥i=7ÁöÑÊó∂ÂÄôÊ≠§Â§Ñtable[7]‰ΩçnullÔºåËØ•ÊñπÊ≥ïÂ∞±‰ª•i=7ËøîÂõû„ÄÇËá≥Ê≠§ÔºåÁ¨¨‰∫åË∂üÊêúÁ¥¢ÁªìÊùüÔºõ Áî±‰∫éÂú®Á¨¨‰∫åË∂üÊêúÁ¥¢‰∏≠ÂèëÁé∞ËÑèentryÔºånÂ¢ûÂ§ß‰∏∫Êï∞ÁªÑÁöÑÈïøÂ∫¶lenÔºåÂõ†Ê≠§Êâ©Â§ßÊêúÁ¥¢ËåÉÂõ¥ÔºàÂ¢ûÂ§ßÂæ™ÁéØÊ¨°Êï∞ÔºâÁªßÁª≠ÂêëÂêéÁéØÂΩ¢ÊêúÁ¥¢Ôºõ Áõ¥Âà∞Âú®Êï¥‰∏™ÊêúÁ¥¢ËåÉÂõ¥ÈáåÈÉΩÊú™ÂèëÁé∞ËÑèentryÔºåcleanSomeSlotÊñπÊ≥ïÊâßË°åÁªìÊùüÈÄÄÂá∫„ÄÇ replaceStaleEntry()12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273/* * @param key the key * @param value the value to be associated with key * @param staleSlot index of the first stale entry encountered while * searching for key. */private void replaceStaleEntry(ThreadLocal&lt;?&gt; key, Object value, int staleSlot) &#123; Entry[] tab = table; int len = tab.length; Entry e; // Back up to check for prior stale entry in current run. // We clean out whole runs at a time to avoid continual // incremental rehashing due to garbage collector freeing // up refs in bunches (i.e., whenever the collector runs). //ÂêëÂâçÊâæÂà∞Á¨¨‰∏Ä‰∏™ËÑèentry int slotToExpunge = staleSlot; for (int i = prevIndex(staleSlot, len); (e = tab[i]) != null; i = prevIndex(i, len)) if (e.get() == null)1. slotToExpunge = i; // Find either the key or trailing null slot of run, whichever // occurs first for (int i = nextIndex(staleSlot, len); (e = tab[i]) != null; i = nextIndex(i, len)) &#123; ThreadLocal&lt;?&gt; k = e.get(); // If we find key, then we need to swap it // with the stale entry to maintain hash table order. // The newly stale slot, or any other stale slot // encountered above it, can then be sent to expungeStaleEntry // to remove or rehash all of the other entries in run. if (k == key) &#123; //Â¶ÇÊûúÂú®ÂêëÂêéÁéØÂΩ¢Êü•ÊâæËøáÁ®ã‰∏≠ÂèëÁé∞keyÁõ∏ÂêåÁöÑentryÂ∞±Ë¶ÜÁõñÂπ∂‰∏îÂíåËÑèentryËøõË°å‰∫§Êç¢2. e.value = value;3. tab[i] = tab[staleSlot];4. tab[staleSlot] = e; // Start expunge at preceding stale entry if it exists //Â¶ÇÊûúÂú®Êü•ÊâæËøáÁ®ã‰∏≠ËøòÊú™ÂèëÁé∞ËÑèentryÔºåÈÇ£‰πàÂ∞±‰ª•ÂΩìÂâç‰ΩçÁΩÆ‰Ωú‰∏∫cleanSomeSlots //ÁöÑËµ∑ÁÇπ if (slotToExpunge == staleSlot)5. slotToExpunge = i; //ÊêúÁ¥¢ËÑèentryÂπ∂ËøõË°åÊ∏ÖÁêÜ6. cleanSomeSlots(expungeStaleEntry(slotToExpunge), len); return; &#125; // If we didn't find stale entry on backward scan, the // first stale entry seen while scanning for key is the // first still present in the run. //Â¶ÇÊûúÂêëÂâçÊú™ÊêúÁ¥¢Âà∞ËÑèentryÔºåÂàôÂú®Êü•ÊâæËøáÁ®ãÈÅáÂà∞ËÑèentryÁöÑËØùÔºåÂêéÈù¢Â∞±‰ª•Ê≠§Êó∂Ëøô‰∏™‰ΩçÁΩÆ //‰Ωú‰∏∫Ëµ∑ÁÇπÊâßË°åcleanSomeSlots if (k == null &amp;&amp; slotToExpunge == staleSlot)7. slotToExpunge = i; &#125; // If key not found, put new entry in stale slot //Â¶ÇÊûúÂú®Êü•ÊâæËøáÁ®ã‰∏≠Ê≤°ÊúâÊâæÂà∞ÂèØ‰ª•Ë¶ÜÁõñÁöÑentryÔºåÂàôÂ∞ÜÊñ∞ÁöÑentryÊèíÂÖ•Âú®ËÑèentry8. tab[staleSlot].value = null;9. tab[staleSlot] = new Entry(key, value); // If there are any other stale entries in run, expunge them10. if (slotToExpunge != staleSlot) //ÊâßË°åcleanSomeSlots11. cleanSomeSlots(expungeStaleEntry(slotToExpunge), len);&#125; Ëøô‰∏™ÊúâÁÇπÂ§çÊùÇÔºåÊöÇÊó∂Â∞±‰∏çÂéªÊéåÊè°‰∫Ü‚Ä¶Âè™ÈúÄË¶ÅÁü•ÈÅìËøô‰∏™ÂáΩÊï∞Áî®ÂΩìÂâçÊèíÂÖ•ÁöÑÂÄºÊõøÊç¢ÊéâËøô‰∏™key‰∏∫nullÁöÑ‚ÄúËÑè‚ÄùentryÔºåÂπ∂‰∏îÂπ∂‰∏çÂ±ÄÈôê‰∫éÂ¶ÇÊ≠§ÔºåËøòÊääÈôÑËøëÊâÄÊúâÂèØËÉΩÊòØËÑèentryÈÉΩÊ∏ÖÁêÜ‰∫ÜÔºåÂ∫îËØ•ÁÆóÊòØÊï¥‰∏™ ThreadLocal‰∏≠ÊúÄ‰∏∫Â§çÊùÇÁöÑÂáΩÊï∞‰∫Ü„ÄÇ ThreadLocalMap ‰∏é HashMap ÁöÑÈÉ®ÂàÜÂå∫Âà´ Ëß£ÂÜ≥ÂÜ≤Á™ÅÁöÑÊñπÂºè‰∏ç‰∏ÄÊ†∑„ÄÇ‰∏Ä‰∏™‰ΩøÁî®ÁöÑÊòØÂºÄÊîæÂú∞ÂùÄÊ≥ïÔºå‰∏Ä‰∏™ÊòØÈìæÂú∞ÂùÄÊ≥ïÔºõ ÈªòËÆ§Ë£ÖËΩΩÂõ†Â≠ê‰∏çÂêå„ÄÇThreadLocalMap 2/3ÔºåHashMap 0.75Ôºõ ThreadLocalMap Ê≤°ÊúâÊâ∞Âä®ÂáΩÊï∞ÔºåÁõ¥Êé•Â∞±ÊòØÁõ∏‰∏é(‰πüÂ∞±ÊòØÂèñÊ®°ÁöÑËøáÁ®ã)ÔºåËÄå HashMap ÊúâÈ´ò16‰Ωç‰∏é‰Ωé16‰ΩçÁõ∏‰∏éËøõË°åÊâ∞Âä®Ôºõ Êâ©ÂÆπÂíåÂàùÂßãÂÆπÈáèÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂàùÂßã16ÔºåÁÑ∂ÂêéÊâ©ÂÆπÈÉΩÊòØ‰∏§ÂÄç„ÄÇ Âº±ÂºïÁî® ÂõõÂ§ßÂºïÁî®ÁöÑÊ¶ÇÂøµ QÔºöÂº±ÂºïÁî®ÁöÑÊ¶ÇÂøµ AÔºöÂõõÂ§ßÂºïÁî®„ÄÇÂº∫ÂºïÁî®„ÄÅÂº±ÂºïÁî®„ÄÅËΩØÂºïÁî®„ÄÅÂπªÊÉ≥ÂºïÁî®„ÄÇÂº±ÂºïÁî®ÈÄöËøáWeakReferenceÁ±ªÂÆûÁé∞„ÄÇ Âº±ÂºïÁî®ÁöÑÁîüÂëΩÂë®ÊúüÊØîËΩØÂºïÁî®Áü≠„ÄÇÂú®ÂûÉÂúæÂõûÊî∂Âô®Á∫øÁ®ãÊâ´ÊèèÂÆÉÊâÄÁÆ°ËæñÁöÑÂÜÖÂ≠òÂå∫ÂüüÁöÑËøáÁ®ã‰∏≠Ôºå‰∏ÄÊó¶ÂèëÁé∞‰∫ÜÂÖ∑ÊúâÂº±ÂºïÁî®ÁöÑÂØπË±°Ôºå‰∏çÁÆ°ÂΩìÂâçÂÜÖÂ≠òÁ©∫Èó¥Ë∂≥Â§ü‰∏éÂê¶ÔºåÈÉΩ‰ºöÂõûÊî∂ÂÆÉÁöÑÂÜÖÂ≠ò„ÄÇÁî±‰∫éÂûÉÂúæÂõûÊî∂Âô®ÊòØ‰∏Ä‰∏™‰ºòÂÖàÁ∫ßÂæà‰ΩéÁöÑÁ∫øÁ®ãÔºåÂõ†Ê≠§‰∏ç‰∏ÄÂÆö‰ºöÂæàÂø´ÂõûÊî∂Âº±ÂºïÁî®ÁöÑÂØπË±°„ÄÇÂº±ÂºïÁî®ÂèØ‰ª•Âíå‰∏Ä‰∏™ÂºïÁî®ÈòüÂàóÔºàReferenceQueueÔºâËÅîÂêà‰ΩøÁî®ÔºåÂ¶ÇÊûúÂº±ÂºïÁî®ÊâÄÂºïÁî®ÁöÑÂØπË±°Ë¢´ÂûÉÂúæÂõûÊî∂ÔºåJavaËôöÊãüÊú∫Â∞±‰ºöÊääËøô‰∏™Âº±ÂºïÁî®Âä†ÂÖ•Âà∞‰∏é‰πãÂÖ≥ËÅîÁöÑÂºïÁî®ÈòüÂàó‰∏≠„ÄÇ QÔºöËøôÈáåÁöÑkeyÂØπThreadLocal‰∏∫Âº±ÂºïÁî®ÁöÑ‰ΩúÁî®ÔºåÂ¶ÇÊûú‰ΩøÁî®Âº∫ÂºïÁî®Âë¢Ôºü AÔºöËøôÈáåÁöÑ key ÂØπ ThreadLocal ÈááÁî®Âº±ÂºïÁî®ÔºåÊòØ‰∏∫‰∫ÜÂáèÂ∞ëÂÜÖÂ≠òÊ≥ÑÊºèÁöÑÂèëÁîü„ÄÇÂΩì ThreadLocal Âº∫ÂºïÁî®ÂÖ®ÈÉ®Ê∂àÂ§±Êó∂ÔºåEntry ‰∏≠ÁöÑ key ‰ºöÂèò‰∏∫ nullÔºå‰ΩÜÊ≠§Êó∂ value ËøòÊòØË¢´ map ÊåÅÊúâÂº∫ÂºïÁî®ÔºåÊ≠§Êó∂ entry Â∞±ÊòØÂèØËÉΩ‰ºöÈÄ†ÊàêÂÜÖÂ≠òÊ≥ÑÊºèÔºå‰∏çÂèØÁî®‰ΩÜÊòØÂèØËææÔºåÊó†Ê≥ï gcÔºåÈíàÂØπËøô‰∏™ÈóÆÈ¢òÔºåTHreadLocalMap‰∏≠ÂèØ‰ª•Ë∞ÉÁî® set()„ÄÅget()„ÄÅremove()Á≠âÊñπÊ≥ïÈÉΩ‰ºöËß¶Âèë expungeStaleEntryÊú∫Âà∂ÔºåÂ∞ÜËÑè entryÊ∏ÖÈô§ÊéâÈò≤Ê≠¢ÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇÂ¶ÇÊûúÂÉè‰ª•Ââç‰ΩøÁî®‰∫ÜÂº∫ÂºïÁî®ÔºåÈÇ£‰πàÂΩìÂØπË±°‰ΩøÁî®ÂÆå ThreadLocal ÂèòÈáèÔºåThreadLocalÁî±‰∫é‰∏ÄÁõ¥Ë¢´ key ÊåÅÊúâÂº∫ÂºïÁî®ÔºåÊó†Ê≥ïÂõûÊî∂ÔºåÂπ∂‰∏îËØ• Entry ‰πüËøáÊúü‰∫ÜÔºåÂØºËá¥Êõ¥Â§ßÁöÑÂÜÖÂ≠òÊ≥ÑÊºèÔºåÂπ∂‰∏îÊ≠§Êó∂Êó†Ê≥ïÈÄöËøá expungeStaleEntryÊú∫Âà∂Ëß£ÂÜ≥ËØ•ÈóÆÈ¢ò„ÄÇËá≥‰∫éÈÄ†ÊàêÂÜÖÂ≠òÊ≥ÑÊºèÁöÑÂéüÂõ†ÔºåÊ†πÊú¨Âú®‰∫é ThreadLocalMap Âíå Thread Êã•ÊúâÂêåÊ†∑ÈïøÁöÑÁîüÂëΩÂë®Êúü„ÄÇ ÈáçË¶ÅÁöÑ‰∫ãÊÉÖËØ¥‰∏âÈÅçÔºÅÁî®ÂÆåThreadLocalÊúÄÂêé‰∏ÄÂÆöË¶Å remove()„ÄÅremove()„ÄÅremove()„ÄÇ QÔºöEntry„ÄÅvalue ‰ΩøÁî®Âº±ÂºïÁî®ÔºåÊòØ‰ªÄ‰πàÊïàÊûúÔºü AÔºöEntryÂÆö‰πâ‰∏∫Âº±ÂºïÁî®ÔºöÂΩìGCÂõûÊî∂ÂêéÔºåÊó†Ê≥ïÂå∫ÂàÜÊòØÂéüÊú¨Â∞±Ê≤°ÊúâÂÜôÂÖ•ËøòÊòØË¢´ÂõûÊî∂‰∫ÜÔºåÂêéÁª≠Á∫øÊÄßÊé¢ÊµãÁöÑ‰øÆË°•‰πüÊó†Ê≥ïÂÆåÊàê„ÄÇ valueÂÆö‰πâ‰∏∫Âº±ÂºïÁî®Ôºö‰ºº‰πé‰πüÊòØ‰∏™‰∏çÈîôÁöÑÊñπÊ≥ïÔºå‰∏∫Âï•Ê≤°Ëøô‰πàÂÅöÔºüÂõ†‰∏∫Ëøô‰πàÂÅöÂíåÂ∞ÜkeyÂÆö‰πâ‰∏∫Âº±ÂºïÁî®Âü∫Êú¨Ê≤°Âå∫Âà´Ôºå‰ªçÁÑ∂ÂèØ‰ª•‰æùËµñÂº±ÂºïÁî®Êú∫Âà∂Ê∏ÖÁêÜÔºå‰ΩÜÈÄöÂ∏∏Âú®Êàë‰ª¨ÁöÑ‰ΩøÁî®‰∏≠‰∏ç‰ºöÊåÅÊúâvalueÁöÑÂº∫ÂºïÁî®ÔºåÂè™‰ºöÊåÅÊúâkeyÂç≥ThreadLocalÂØπË±°ÁöÑÂº∫ÂºïÁî®ÔºåËÄåvalueÊ≤°ÊúâÂº∫ÂºïÁî®ÁöÑÊÉÖÂÜµ‰∏ã‰ºöË¢´GCÂõûÊî∂Ôºå‰∏éÊàë‰ª¨ÊúüÊúõÁöÑÂäüËÉΩ‰∏çÁ¨¶„ÄÇ ÂÜÖÂ≠òÊ≥ÑÊºè ‰∏ªË¶ÅÂèÇËÄÉÁΩëÂùÄÔºöhttps://juejin.im/post/5d75ebf451882576c478a102 ËøôÂ∫îËØ•ÊòØ ThreadLocal ÊúÄÈöæÁöÑÈÉ®ÂàÜ‰∫ÜÔºåÁΩë‰∏äÊü•ÈòÖ‰∫ÜÂá†ÁôæÁØáÊñáÁ´†ÔºåÂü∫Êú¨‰∏äÊääÊâÄÊúâÊúâÂÖ≥ÁöÑ ThreadLocal ÂÜÖÂ≠òÊ≥ÑÊºèÁöÑÊñáÁ´†ÈÉΩÁúã‰∫Ü‰∏ÄÈÅç‚Ä¶Âè™ÊúâËøô‰∏ÄÁØáÊØîËæÉÊ¨£ËµèÔºåÂâ©‰∏ãÁöÑÂü∫Êú¨‰∏äÂÖ®ÈÉ®ÊòØÂú®‰∫íÁõ∏ÊäÑ‚Ä¶Â•ΩÂ§öÂú∞ÊñπËß£ÈáäÁöÑ‰πü‰∏çÈÄö‚Ä¶Êé•‰∏ãÊù•Â∏åÊúõËá™Â∑±ËÉΩÊääËøô‰∏™ËÆ≤ÈÄöÂêß‚Ä¶ ‰ªÄ‰πàÊòØÂÜÖÂ≠òÊ≥ÑÊºèÂØπË±°Â∑≤ÁªèÊ≤°ÊúâË¢´Â∫îÁî®Á®ãÂ∫è‰ΩøÁî®Ôºå‰ΩÜÊòØÂûÉÂúæÂõûÊî∂Âô®Ê≤°ÂäûÊ≥ïÁßªÈô§ÂÆÉ‰ª¨ÔºåÂõ†‰∏∫ËøòÂú®Ë¢´ÂºïÁî®ÁùÄ„ÄÇ Âú®Java‰∏≠ÔºåÂÜÖÂ≠òÊ≥ÑÊºèÂ∞±ÊòØÂ≠òÂú®‰∏Ä‰∫õË¢´ÂàÜÈÖçÁöÑÂØπË±°ÔºåËøô‰∫õÂØπË±°Êúâ‰∏ãÈù¢‰∏§‰∏™ÁâπÁÇπÔºåÈ¶ñÂÖàÔºåËøô‰∫õÂØπË±°ÊòØÂèØËææÁöÑÔºåÂç≥Âú®ÊúâÂêëÂõæ‰∏≠ÔºåÂ≠òÂú®ÈÄöË∑ØÂèØ‰ª•‰∏éÂÖ∂Áõ∏ËøûÔºõÂÖ∂Ê¨°ÔºåËøô‰∫õÂØπË±°ÊòØÊó†Áî®ÁöÑÔºåÂç≥Á®ãÂ∫è‰ª•Âêé‰∏ç‰ºöÂÜç‰ΩøÁî®Ëøô‰∫õÂØπË±°„ÄÇÂ¶ÇÊûúÂØπË±°Êª°Ë∂≥Ëøô‰∏§‰∏™Êù°‰ª∂ÔºåËøô‰∫õÂØπË±°Â∞±ÂèØ‰ª•Âà§ÂÆö‰∏∫Java‰∏≠ÁöÑÂÜÖÂ≠òÊ≥ÑÊºèÔºåËøô‰∫õÂØπË±°‰∏ç‰ºöË¢´GCÊâÄÂõûÊî∂ÔºåÁÑ∂ËÄåÂÆÉÂç¥Âç†Áî®ÂÜÖÂ≠ò„ÄÇ ThreadLocal ‰ªÄ‰πàÊó∂ÂÄô‰ºöÂèëÁîüÂÜÖÂ≠òÊ≥ÑÊºèÊàë‰∏™‰∫∫ÂÄæÂêë‰∫éÂ∞ÜÂÖ∂ÂàÜ‰∏∫‰∏§Á±ªÔºö ÂΩì ThreadLocal ÂèòÈáè‰∏ç‰ΩøÁî® static ‰øÆÈ•∞ÂΩì ThreadLocal ÂèòÈáè‰∏ç‰ΩøÁî® static ‰øÆÈ•∞ÔºåÈÇ£‰πà ThreadLocal ÁöÑÂº∫ÂºïÁî®Â∞±ÂæàÊúâÂèØËÉΩÂÖ®ÈÉ®Ê∂àÂ§±„Äå‰ªÄ‰πàÊó∂ÂÄô‰ºöÊ∂àÂ§±ÔºüÔºü Ëøô‰∏™Áøª‰∫ÜÊï¥‰∏™‰∫íËÅîÁΩëÈÉΩÊ≤°ËßÅÂà∞‚Ä¶„ÄçÔºåËÄå ThreadLocalMap ‰∏≠ÁöÑ key ÂØπ ThreadLocal ÁöÑÂºïÁî®ÊòØÂº±ÂºïÁî®ÔºåÊ†πÊçÆ GC ËßÑÂàôÔºåThreadLocal ÂèòÈáè‰ºöË¢´ÂõûÊî∂ÔºåÊ≠§Êó∂ ThreadLocaMap ÂØπÂ∫îÁöÑ key ‰ºöËá™Âä®Âèò‰∏∫ nullÔºåËÄå Ê≠§Êó∂ÁöÑ Entry Âíå value ÂèàË¢´ ThreadLocalMap Âº∫ÂºïÁî®ÔºåÂç≥‰∏çÂèØËÉΩ‰ºöË¢´GCÔºåÊâÄ‰ª•Ê≠§Êó∂Â∞±ÈÄ†Êàê‰∫ÜÂÜÖÂ≠òÊ≥ÑÊºèÔºåËß£ÂÜ≥ÁöÑÊñπÊ≥ïÂ∞±ÊòØÊòæÁ§∫ÁöÑË∞ÉÁî® set()„ÄÅget()„ÄÅremove()„ÄåÂΩìÁÑ∂Ë∞ÉÁî® set()„ÄÅget() ‰πü‰∏ç‰∏ÄÂÆöËÉΩËß£ÂÜ≥ÂÜÖÂ≠òÊ≥ÑÊºèÈóÆÈ¢òÔºåÂõ†‰∏∫Ëøô‰∏§‰∏™ÊñπÊ≥ïÂèØËÉΩÂú®Ê≤°Á¢∞Âà∞ËÑè entryÂ∞±ÁªìÊùüÂæ™ÁéØ‰∫Ü„ÄçÁ≠âÊñπÊ≥ïÔºåÂõ†‰∏∫ÂÖ∂ÂèØ‰ª•Ë∞ÉÁî® expungeStaleEntry() Â∞ÜËøô‰∫õ key ‰∏∫ null ÁöÑÈîÆÂÄºÂØπÂõûÊî∂„ÄÇÂΩìÁÑ∂‰∫ÜÔºåÂ¶ÇÊûúÁ∫øÁ®ã‰ºöÁªìÊùüÔºåÈÇ£ÊúÄÁªà‰πü‰∏ç‰ºöÂèëÁîüÂÜÖÂ≠òÊ≥ÑÊºèÂï¶ÔºåÁ∫øÁ®ãÊ≠ª‰∫ÜÈÇ£ËÇØÂÆöÂ∞±Ëá™Âä®Ê∏ÖÁêÜ map ‰∫Ü„ÄÇ QÔºöÂõûÂà∞‰∏äÈù¢ÈÇ£‰∏™ÈóÆÈ¢òÔºå‰ªÄ‰πàÊó∂ÂÄôÂº∫ÂºïÁî®‰ºöÊ∂àÂ§±Ôºü AÔºöÊàëÂèÇËÄÉÁöÑÁΩëÂùÄÁªà‰∫éÊúâ‰∫Ü‰∏Ä‰∏™‰æãÂ≠ê„ÄÇÂº∫ÂºïÁî®ÊòØÂØπÂ∫îÁöÑÂ≠êÁ∫øÁ®ãÊàñ‰∏ªÁ∫øÁ®ã‰∏≠Êüê‰∏™ÂØπË±°ÊåÅÊúâÁöÑÔºåÂØπË±°ÁîüÂëΩÂë®ÊúüÁªìÊùüÊàñÂØπË±°ÊõøÊç¢ÊåáÂêëËøô‰∏™keyÁöÑÂºïÁî®ÂêéÔºåkeyÁöÑÂº∫ÂºïÁî®‰πüÂ∞±Êñ≠‰∫Ü„ÄÇÂØπÔºåÂ∞±ÊòØÂØπË±°ÁîüÂëΩÂë®ÊúüÁªìÊùüÔºåÂº∫ÂºïÁî®Â∞±Ê∂àÂ§±‰∫Ü„ÄÇ egÔºöÂÅáÂ¶ÇÊàëÁé∞Âú®Êúâ‰∏Ä‰∏™‰∏ªÁ∫øÁ®ãÔºåÁÑ∂ÂêéÊàëË∞ÉÁî®‰∫Ü AÔºåÂàõÂª∫‰∫Ü A ÁöÑÂÆû‰æãÂØπË±° a1Ôºåa1 Ë∞ÉÁî®‰∫Ü ThreadLocal ÂèòÈáèÔºåÊ≠§Êó∂ÂØπË±° a1 ÊòØÊúâÂØπ ThreadLocal ÁöÑÂº∫ÂºïÁî®ÁöÑÔºåÊ≠§Êó∂ ThreadLocalMap ‰∏≠ÁöÑ keyËøò‰∏ç‰ºö‰∏∫ null ÔºåÂΩì‰∏ªÁ∫øÁ®ãË∞ÉÁî®‰∫Ü a = nullÔºåËØ•ÂØπË±°ÁîüÂëΩÂë®ÊúüÁªìÊùüÔºåÊ≠§Êó∂Âº∫ÂºïÁî®Ê∂àÂ§±‰∫ÜÔºå‰ΩÜÊòØ ThreadLocalMap ‰∏≠ÁöÑ value ËøòÊòØÂº∫ÂºïÁî®ÔºåÊó†Ê≥ï GCÔºå‰πüÂ∞±ÊòØ‰∏äÈù¢ÁöÑÊÉÖÂÜµ„ÄÇ 12345678910111213141516public class A &#123; private ThreadLocal&lt;Context&gt; local = new ThreadLocal&lt;&gt;(); public void doSth() &#123; // Context ctx = ... local.set(ctx); &#125;&#125;public static void main(String[] args)&#123; A a = new A(); a.doSth(); a = null; // ÊàñËÄÖÁõ¥Êé• finalize(); // ... doSometing();&#125; ÂΩì ThreadLocal ÂèòÈáè‰ΩøÁî®‰∫Ü static ‰øÆÈ•∞ÂΩì ThreadLocal ÂèòÈáè‰ΩøÁî®‰∫Ü static ‰øÆÈ•∞ÔºåËØ¥ÊòéËØ•ÂèòÈáèÁöÑÁîüÂëΩÂë®ÊúüÂíåÁ±ª‰∏ÄÊ†∑ÁöÑÔºåÂè™Ë¶ÅÂºïÁî®‰∏çÊîπÂèòÔºåÈÇ£‰πàËØ•ÂèòÈáè‰ºö‰∏ÄÁõ¥ÊåÅÊúâÂº∫ÂºïÁî®ÔºàÂº∫ÂºïÁî®‰∏äÈù¢Â∑≤ÁªèËÆ≤‰∫ÜÔºâÔºåÈÇ£‰πàÊ≠§Êó∂ key ÂØπ ThreadLocal ÊåÅÊúâÂº±ÂºïÁî®Êàë‰∏™‰∫∫ËßâÂæóÂ∞±Ê≤°Êúâ‰ªª‰ΩïÊÑè‰πâ‰∫ÜÔºåÂõ†‰∏∫ÊòØ‰∏çÂèØËÉΩËß¶Âèë expungeStaleEntry() ÁöÑÔºåÂõ†‰∏∫ key ‰∏ç‰ºöÂèò‰∏∫ null„ÄÇÈÇ£‰πàÊ≠§Êó∂ÊòØ‰∏çÊòØÂ∞±‰∏ç‰ºöÂá∫Áé∞ÂÜÖÂ≠òÊ≥ÑÊºè‰∫ÜÂë¢Ôºü‰∏çÔºå‰æùÊóß‰ºöÂá∫Áé∞„ÄÇÂÖ∂ÂÆûÊ≠§Êó∂Â¶ÇÊûúÊàë‰ª¨Ê≠£Â∏∏‰ΩøÁî®ÔºåÊòØ‰∏ç‰ºö‰∫ßÁîüÂÜÖÂ≠òÊ≥ÑÊºèÁöÑÔºå‰ΩÜÊòØ‰∏ÄÊó¶Êàë‰ª¨‰ΩøÁî®ÁöÑÊòØÁ∫øÁ®ãÊ±†ÔºåÁ∫øÁ®ã‰ΩøÁî®ÂÆå‰πãÂêé‰∏ç‰ºöÂõûÊî∂ÔºåËÄåÊàë‰ª¨‰πãÂâç‰ΩøÁî®ÁöÑ ThreadLocalMap ÂèàÂ≠òÂú®ÂæàÂ§öËøáÊúüÁöÑ value ÈúÄË¶ÅÊ∏ÖÁêÜÔºåÊ≠§Êó∂Â∞±ÁÆó key ÊòØÂº±ÂºïÁî®Ôºå‰πüÊ≤°ÊúâÂäûÊ≥ïÔºåÂõ†‰∏∫ ThreadLocal ‰∏ÄÁõ¥ÊåÅÊúâÂº∫ÂºïÁî®Ê†πÊú¨‰∏ç‰ºöËß¶Âèë GCÔºåÊ≠§Êó∂Â∞±‰∫ßÁîü‰∫ÜÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºö Á∫øÁ®ã1ÂíåÁ∫øÁ®ã2ÈÉΩÁî®‰∫ÜthreadLocal1ÂíåthreadLocal2Ôºå‰∏îËÆæÁΩÆ‰∫Üvalue Á∫øÁ®ã1‰ΩøÁî®ÂÆåÊØïÂΩíËøòÁ∫øÁ®ãÊ±†Ôºå‰ΩÜÊ≤°ÊúâË∞ÉÁî®threadLocal1.remove() ‰πãÂêéÁ∫øÁ®ã1‰∏çÂÜç‰ΩøÁî®threadLocal1‰∫ÜÔºå‰ªÖ‰ΩøÁî®threadLocal2 Á∫øÁ®ã1ÁöÑthreadLocalMap‰∏≠‰ªçÁÑ∂‰øùÂ≠ò‰∫Üobj1 Áî±‰∫éÈùôÊÄÅÂèòÈáèthreadLocal1ÂºïÁî®‰ªçÁÑ∂ÂèØËææÔºå‰∏ç‰ºöË¢´ÂõûÊî∂ÔºåÁ∫øÁ®ã1Êó†Ê≥ïËß¶ÂèëexpungeStaleEntryÊú∫Âà∂ÔºåthreadLocal1ÂØπÂ∫îÁöÑentryÂíåvalueÊó†Ê≥ïÂõûÊî∂ÔºåÈÄ†Êàê‰∫ÜÂÜÖÂ≠òÊ≥ÑÊºè ÊâÄ‰ª•Áî®private static‰øÆÈ•∞‰πãÂêéÔºåÂ•ΩÂ§ÑÂ∞±ÊòØ‰ªÖ‰ΩøÁî®ÊúâÈôêÁöÑThreadLocalÂØπË±°‰ª•ËäÇÁ∫¶ÂàõÂª∫ÂØπË±°ÂíåÂêéÁª≠Ëá™Âä®ÂõûÊî∂ÁöÑÂºÄÈîÄÔºåÂùèÂ§ÑÊòØÈúÄË¶ÅÊàë‰ª¨ÊâãÂä®Ë∞ÉÁî®removeÊñπÊ≥ïÊ∏ÖÁêÜ‰ΩøÁî®ÂÆåÁöÑslotÔºåÂê¶Âàô‰ºöÊúâÂÜÖÂ≠òÊ≥ÑÊºèÈóÆÈ¢ò„ÄÇ ÈóÆÈ¢ò https://juejin.im/post/5a0e985df265da430e4ebb92#heading-2 https://zhuanlan.zhihu.com/p/91756169 Q1ÔºöThreadLocal Ë∑üÊôÆÈÄöÂ±ÄÈÉ®ÂèòÈáèÊúâ‰ΩïÂå∫Âà´ÔºåÂú®ÂÖ∂ÂÜÖÈÉ®‰ΩøÁî®Â±ÄÈÉ®ÂèòÈáè‰∏çÊòØ‰∏ÄÊ†∑ÁöÑÂêóÔºü A1ÔºöÁΩë‰∏äÊúâ‰∏§ÁßçËØ¥Ê≥ï„ÄÇ ËØ•ÂÆû‰æãÈúÄË¶ÅÂú®Â§ö‰∏™ÊñπÊ≥ï‰∏≠ÂÖ±‰∫´Ôºå‰ΩÜ‰∏çÂ∏åÊúõË¢´Â§öÁ∫øÁ®ãÂÖ±‰∫´ÔºåÊ≠§Êó∂ÂèØ‰ª•‰ΩøÁî® ThreadLocalÔºåËøôÊ†∑‰ΩøÂæó‰ª£Á†ÅËÄ¶ÂêàÂ∫¶Êõ¥‰ΩéÔºåÊó†ÈúÄÂú®ÊØè‰∏™ÊñπÊ≥ï‰∏≠ÈÉΩÂéªÂ£∞Êòé‰∏Ä‰∏™Â±ÄÈÉ®ÂèòÈáèÔºåÁÆÄËÄåË®Ä‰πãÔºåÂ∞±ÊòØÂÅöÂà∞Á∫øÁ®ãÈó¥ÈöîÁ¶ªÔºåÁ∫øÁ®ãÂÜÖÂÖ±‰∫´„ÄÇÊàë‰∏™‰∫∫ËßâÂæóËøôÁßçËØ¥Ê≥ïÊúâ‰∫õËøá‰∫éÁâµÂº∫Ôºå‰ΩÜÊòØË≤å‰ººÁΩë‰∏äÂü∫Êú¨ÈÉΩÊòØËøôÁßçËØ¥Ê≥ï‚Ä¶ ÊàëËßâÂæó ThreadLocal Áõ∏ÊØîÂ±ÄÈÉ®ÂèòÈáèËÄåË®ÄÔºåÂÖ∂ÂÆû‰πüÂ∞±ÊòØ ÂÖ®Â±ÄÂèòÈáè Âíå Â±ÄÈÉ®ÂèòÈáè ÁöÑÂå∫Âà´„ÄÇËôΩÁÑ∂ÊØè‰∏™Á∫øÁ®ãÁöÑ ThreadLocal ÂâØÊú¨‰∫í‰∏çÂΩ±ÂìçÔºå‰ΩÜÊòØÊàëÂèØ‰ª•ÈÄöËøá ThreadLocal ËøõË°åÈÄö‰ø°ÔºåËøôÊòØÂ±ÄÈÉ®ÂèòÈáèÊâÄ‰∏çÂÖ∑Â§áÁöÑËÉΩÂäõ„ÄÇ‰∏æ‰∏™‰æãÂ≠êÔºåÂÅáËÆæË¶ÅËÆæËÆ°Ëøô‰πà‰∏Ä‰∏™Á®ãÂ∫èÔºö‰∏â‰∏™Á∫øÁ®ãÂêåÊó∂‰ªé0Êï∞Âà∞10Ôºå‰∏ÄÊó¶Êúâ‰∏Ä‰∏™Á∫øÁ®ãÊï∞Âà∞‰∫Ü10Ôºå‰∏â‰∏™Á∫øÁ®ãÈÉΩ‰ªé0ÈáçÊñ∞ÂºÄÂßãÊï∞Ôºå‰∏ÄÁõ¥Ëøô‰πàÂæ™ÁéØ„ÄÇÁî®runÂàõÂª∫Â±ÄÈÉ®ÂèòÈáèÁöÑÊñπÂºèÂ∞±Ê≤°Ê≥ïÂÅöÔºåÂõ†‰∏∫ÊØè‰∏Ä‰∏™Á∫øÁ®ã‰πãÈó¥ÊòØÂÆåÂÖ®Áã¨Á´ãÁöÑ„ÄÇ ThreadLocal‰øùÂ≠òÂÖ±‰∫´ÂèòÈáèÁöÑÂâØÊú¨ÔºåÁî®‰∫éÁâπÂÆöÁöÑ‰ΩøÁî®Âú∫ÊôØ„ÄÇÁúãÊ∫êÁ†ÅÂ∞±Áü•ÈÅìThreadLocalÁ±ªÊòØÂü∫‰∫éThreadÁ±ªÊù•ÂÆûÁé∞ÁöÑÔºåÂ¶ÇÊûúÁõ¥Êé•Áî®ÁªßÊâøThreadÊù•ÂÆûÁé∞‰∏äÈù¢ÁöÑÂäüËÉΩ‰πüÊòØÂèØ‰ª•ÁöÑÔºåÂè™‰∏çËøáJDKÈÉΩÂ∑≤ÁªèÁªôÂ∞ÅË£ÖÂ•Ω‰∫ÜÔºåËá™Â∑±ËÉΩÊÉ≥Âà∞ÁöÑÊÄùË∑Ø‰º∞ËÆ°Ë∑üThreadLocalÁöÑÂÆûÁé∞ÊÄùË∑ØÂ∑Æ‰∏çÂ§ö„ÄÇÂ¶ÇÊûúÂú∫ÊôØÈÄÇÂêà‰ΩøÁî®ThreadLocalÔºå‰∏∫‰Ωï‰∏çÁõ¥Êé•Áî®Âë¢„ÄÇ ÊâÄ‰ª•ÔºåÁ∫øÁ®ãÈó¥ÂèØÈÄö‰ø°‰∏îÂèØ‰ª•ÂÅöÂà∞‰∫í‰∏çÂΩ±ÂìçÔºåÊàëËßâÂæóËøôÊâçÊòØ ThreadLocal ÁúüÊ≠£Â≠òÂú®ÁöÑÊÑè‰πâÂêß„ÄÇ Q2ÔºöÊó¢ÁÑ∂ ThreadMap ‰ªéÂ±û‰∫éÊØè‰∏™Á∫øÁ®ãÔºåÈÇ£‰∏∫‰Ωï‰∏çÊää ThreadLocalMap ÊîæÂà∞ Thread Á±ª‰∏≠ÔºåÂèçËÄåÊòØÊàê‰∏∫‰∫Ü ThreadLocal ÁöÑÂÜÖÈÉ®Á±ªÔºü A2ÔºöÂÖ∂ÂÆûÊàëËßâÂæóÈÉΩÊòØÂèØ‰ª•ÁöÑÔºå‰∏çÁÆ°ÊîæÂà∞ Thread Á±ª‰∏≠ÔºåËøòÊòØÊîæÂà∞ ThreadLocal ‰∏≠ÔºåÈÉΩÊòØÂèØ‰ª•Ëß£ÂÜ≥ÈóÆÈ¢òÁöÑÔºå‰ΩÜÊòØÊàëËßâÂæó‰ΩúËÄÖËøôÊ†∑ËÆæËÆ°Ôºå‰∏ªË¶ÅÊòØÂõ†‰∏∫Âú®‰πãÂâç ThreadLocalMap ÊòØ‰ªéÂ±û‰∫é ThreadLocal ÁöÑÔºåÂèØËÉΩÂêéÊù•ËÄÉËôëÂà∞Êàë‰∏äÊñáÊèêÂà∞ÁöÑÈúÄË¶ÅÂä†ÈîÅËøòÊúâÁ∫øÁ®ãÁªìÊùüÂ∏¶Êù•ÁöÑ ThreadLocal ÁöÑÂÜÖÂ≠òÊ≥ÑÊºèÈóÆÈ¢òÔºåÊîπÊàê‰∫Ü ThreadLocalMap ‰ªéÂ±û‰∫é ThreadÔºå‰∏∫‰∫ÜÊúÄÂ§ßÈôêÂ∫¶ÁöÑ‰∏çÊîπÂä®‰ª£Á†ÅÔºåÂè™Âú® Thread ‰∏≠Ê∑ªÂä†‰∫Ü‰∏Ä‰∏™ÊàêÂëòÂèòÈáè ThreadLocal.ThreadLocalMap threadLocalsÔºåÂπ∂‰∏îËøôÊ†∑ËÆæËÆ°ÁöÑËØùÔºåÁî®Êà∑Â±ÇÈù¢ÂéªË∞ÉÁî® api ÁöÑÊó∂ÂÄôÊ†πÊú¨‰∏ç‰ºöÂèëÁé∞ ThreadLocalMap ÁöÑÂ≠òÂú®ÔºåËÆæËÆ°ÁöÑËøòÊòØÈùûÂ∏∏‰ºòÁæéÁöÑÔºÅ Q3Ôºö‰∏∫‰ΩïÂÆòÊñπÂª∫ËÆÆÂÆö‰πâ ThreadLocal Êó∂ ÈááÁî® private static ‰øÆÈ•∞Ôºü A3ÔºöÂèØ‰ª•ÈÅøÂÖçÈáçÂ§çÂàõÂª∫TSO(Thread Specific ObjectÔºåÂç≥‰∏éÁ∫øÁ®ãÁõ∏ÂÖ≥ÁöÑÂèòÈáè)ÔºåÂ¶ÇÊûúÊää ThreadLocal Â£∞Êòé‰∏∫Êüê‰∏™Á±ªÁöÑÂÆû‰æãÂèòÈáèÔºàËÄå‰∏çÊòØÈùôÊÄÅÂèòÈáèÔºâÔºåÈÇ£‰πàÊØèÂàõÂª∫‰∏Ä‰∏™ËØ•Á±ªÁöÑÂÆû‰æãÂ∞±‰ºöÂØºËá¥‰∏Ä‰∏™Êñ∞ÁöÑTSOÂÆû‰æãË¢´ÂàõÂª∫„ÄÇÊòæÁÑ∂ÔºåËøô‰∫õË¢´ÂàõÂª∫ÁöÑTSOÂÆû‰æãÊòØÊ≤°Êúâ‰ªª‰ΩïÊÑè‰πâÁöÑ„ÄÇÊó¢ÁÑ∂ÊâÄÊúâÁöÑÁ∫øÁ®ãÁî®Âà∞ÁöÑ ThreadLocal ÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÔºåÈÇ£‰πàÂæàÊòéÊòæËÆæËÆ°Êàê static ÊòØÂæàÊ≠£Â∏∏ÁöÑÔºå‰∏ç‰ª•ÂØπË±°‰∏∫Âá∫ÂèëÁÇπÔºåËÄå‰ª•Êï¥‰∏™Á±ª‰∏∫Âá∫ÂèëÁÇπÂ∞±Â•Ω‰∫Ü„ÄÇ ÊâÄ‰ª•Áî®private static‰øÆÈ•∞‰πãÂêéÔºåÂ•ΩÂ§ÑÂ∞±ÊòØ‰ªÖ‰ΩøÁî®ÊúâÈôêÁöÑThreadLocalÂØπË±°‰ª•ËäÇÁ∫¶ÂàõÂª∫ÂØπË±°ÂíåÂêéÁª≠Ëá™Âä®ÂõûÊî∂ÁöÑÂºÄÈîÄÔºåÂùèÂ§ÑÊòØÈúÄË¶ÅÊàë‰ª¨ÊâãÂä®Ë∞ÉÁî®removeÊñπÊ≥ïÊ∏ÖÁêÜ‰ΩøÁî®ÂÆåÁöÑslotÔºåÂê¶Âàô‰ºöÊúâÂÜÖÂ≠òÊ≥ÑÊºèÈóÆÈ¢ò„ÄÇ Q4ÔºöThreadLocal ÁöÑÁî®ÈÄîÔºü A4Ôºö Á∫øÁ®ãÈó¥ÈöîÁ¶ªÔºåÁ∫øÁ®ãÂÜÖÈÄö‰ø°ÔºåËß£ÂÜ≥Áõ∏ÂêåÂèòÈáèÂú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÁöÑÂÜ≤Á™ÅÈóÆÈ¢òÔºå‰æãÂ¶ÇÔºö hibernate‰∏≠ÁöÑsession‰ΩøÁî®Ôºõ spring‰∏≠Âçï‰æãbeanÁöÑÂ§öÁ∫øÁ®ãËÆøÈóÆ„ÄÇÊàë‰ª¨Áü•ÈÅìÂú®‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÂè™ÊúâÊó†Áä∂ÊÄÅÁöÑBeanÊâçÂèØ‰ª•Âú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÂÖ±‰∫´ÔºåÂú®Spring‰∏≠ÔºåÁªùÂ§ßÈÉ®ÂàÜBeanÈÉΩÂèØ‰ª•Â£∞Êòé‰∏∫singleton‰ΩúÁî®Âüü„ÄÇÂ∞±ÊòØÂõ†‰∏∫SpringÂØπ‰∏Ä‰∫õBeanÔºàÂ¶ÇRequestContextHolder„ÄÅTransactionSynchronizationManager„ÄÅLocaleContextHolderÁ≠âÔºâ‰∏≠ÈùûÁ∫øÁ®ãÂÆâÂÖ®Áä∂ÊÄÅÈááÁî®ThreadLocalËøõË°åÂ§ÑÁêÜÔºåËÆ©ÂÆÉ‰ª¨‰πüÊàê‰∏∫Á∫øÁ®ãÂÆâÂÖ®ÁöÑÁä∂ÊÄÅÔºåÊúâÁä∂ÊÄÅÁöÑBeanÂ∞±ÂèØ‰ª•Âú®Â§öÁ∫øÁ®ã‰∏≠ÂÖ±‰∫´‰∫ÜÔºõ ‰ª•Âèä spring Â¶Ç‰Ωï‰øùËØÅÊï∞ÊçÆÂ∫ì‰∫ãÂä°Âú®Âêå‰∏Ä‰∏™ËøûÊé•‰∏ãÊâßË°åÁöÑ„ÄÇDataSourceTransactionManager ÊòØspringÁöÑÊï∞ÊçÆÊ∫ê‰∫ãÂä°ÁÆ°ÁêÜÂô®Ôºå ÂÆÉ‰ºöÂú®‰Ω†Ë∞ÉÁî®getConnection()ÁöÑÊó∂ÂÄô‰ªéÊï∞ÊçÆÂ∫ìËøûÊé•Ê±†‰∏≠Ëé∑Âèñ‰∏Ä‰∏™connectionÔºå ÁÑ∂ÂêéÂ∞ÜÂÖ∂‰∏éThreadLocalÁªëÂÆöÔºå ‰∫ãÂä°ÂÆåÊàêÂêéËß£Èô§ÁªëÂÆö„ÄÇËøôÊ†∑Â∞±‰øùËØÅ‰∫Ü‰∫ãÂä°Âú®Âêå‰∏ÄËøûÊé•‰∏ãÂÆåÊàê„ÄÇ ÂèØ‰ª•Áî®‰∫éÁ∫øÁ®ãÈó¥ÈÄö‰ø°ÔºåÊØîÂ¶Ç‰∏â‰∏™Á∫øÁ®ãÈÉΩÁî®Âà∞‰∫Ü ThreadLocalÔºåÂè™Ë¶ÅÊúâ‰∏Ä‰∏™ËææÂà∞‰∫ÜÁõÆÊ†áÂÄºÔºåÊàëÂ∞±ÂÖ®ÈÉ®ËÆæ‰∏∫ÂàùÂÄºÔºåËøôÊòØÂèØ‰ª•ÈÄöËøá ThreadLocalÁõ¥Êé•ÂÆåÊàêÁöÑ„ÄÇ Q5ÔºöThreadLocal Âíå Synchronized Âå∫Âà´Ôºü A5ÔºöThreadLocalÂíåsynchronizedÂÖ≥ÈîÆÂ≠óÈÉΩÁî®‰∫éÂ§ÑÁêÜÂ§öÁ∫øÁ®ãÂπ∂ÂèëËÆøÈóÆÂèòÈáèÁöÑÈóÆÈ¢òÔºåÂè™ÊòØ‰∫åËÄÖÂ§ÑÁêÜÈóÆÈ¢òÁöÑËßíÂ∫¶ÂíåÊÄùË∑Ø‰∏çÂêå„ÄÇ ThreadLocalÊòØ‰∏Ä‰∏™JavaÁ±ª,ÈÄöËøáÂØπÂΩìÂâçÁ∫øÁ®ã‰∏≠ÁöÑÂ±ÄÈÉ®ÂèòÈáèÁöÑÊìç‰ΩúÊù•Ëß£ÂÜ≥‰∏çÂêåÁ∫øÁ®ãÁöÑÂèòÈáèËÆøÈóÆÁöÑÂÜ≤Á™ÅÈóÆÈ¢ò„ÄÇÊâÄ‰ª•ÔºåThreadLocalÊèê‰æõ‰∫ÜÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂÖ±‰∫´ÂØπË±°Êú∫Âà∂ÔºåÊØè‰∏™Á∫øÁ®ãÈÉΩÊã•ÊúâÂÖ∂ÂâØÊú¨„ÄÇ Java‰∏≠ÁöÑsynchronizedÊòØ‰∏Ä‰∏™‰øùÁïôÂ≠óÔºåÂÆÉ‰æùÈù†JVMÁöÑÈîÅÊú∫Âà∂Êù•ÂÆûÁé∞‰∏¥ÁïåÂå∫ÁöÑÂáΩÊï∞ÊàñËÄÖÂèòÈáèÁöÑËÆøÈóÆ‰∏≠ÁöÑÂéüÂ≠êÊÄß„ÄÇÂú®ÂêåÊ≠•Êú∫Âà∂‰∏≠ÔºåÈÄöËøáÂØπË±°ÁöÑÈîÅÊú∫Âà∂‰øùËØÅÂêå‰∏ÄÊó∂Èó¥Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆÂèòÈáè„ÄÇÊ≠§Êó∂ÔºåË¢´Áî®‰Ωú‚ÄúÈîÅÊú∫Âà∂‚ÄùÁöÑÂèòÈáèÊó∂Â§ö‰∏™Á∫øÁ®ãÂÖ±‰∫´ÁöÑ„ÄÇ ÂêåÊ≠•Êú∫Âà∂(synchronizedÂÖ≥ÈîÆÂ≠ó)ÈááÁî®‰∫Ü‰ª•‚ÄúÊó∂Èó¥Êç¢Á©∫Èó¥‚ÄùÁöÑÊñπÂºèÔºåÊèê‰æõ‰∏Ä‰ªΩÂèòÈáèÔºåËÆ©‰∏çÂêåÁöÑÁ∫øÁ®ãÊéíÈòüËÆøÈóÆ„ÄÇËÄåThreadLocalÈááÁî®‰∫Ü‚Äú‰ª•Á©∫Èó¥Êç¢Êó∂Èó¥‚ÄùÁöÑÊñπÂºèÔºå‰∏∫ÊØè‰∏Ä‰∏™Á∫øÁ®ãÈÉΩÊèê‰æõ‰∏Ä‰ªΩÂèòÈáèÁöÑÂâØÊú¨Ôºå‰ªéËÄåÂÆûÁé∞ÂêåÊó∂ËÆøÈóÆËÄå‰∫í‰∏çÂΩ±Âìç„ÄÇ]]></content>
      <categories>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>ThreadLocal</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè]]></title>
    <url>%2F2020%2F02%2F25%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html</url>
    <content type="text"><![CDATA[ÂàõÂª∫ÂûãÊ®°ÂºèÔºåÂÖ±‰∫îÁßçÔºöÂ∑•ÂéÇÊñπÊ≥ïÊ®°Âºè„ÄÅÊäΩË±°Â∑•ÂéÇÊ®°Âºè„ÄÅÂçï‰æãÊ®°Âºè„ÄÅÂª∫ÈÄ†ËÄÖÊ®°Âºè„ÄÅÂéüÂûãÊ®°Âºè„ÄÇ ÁªìÊûÑÂûãÊ®°ÂºèÔºåÂÖ±‰∏ÉÁßçÔºöÈÄÇÈÖçÂô®Ê®°Âºè„ÄÅË£ÖÈ•∞Âô®Ê®°Âºè„ÄÅ‰ª£ÁêÜÊ®°Âºè„ÄÅÂ§ñËßÇÊ®°Âºè„ÄÅÊ°•Êé•Ê®°Âºè„ÄÅÁªÑÂêàÊ®°Âºè„ÄÅ‰∫´ÂÖÉÊ®°Âºè„ÄÇ Ë°å‰∏∫ÂûãÊ®°ÂºèÔºåÂÖ±ÂçÅ‰∏ÄÁßçÔºöÁ≠ñÁï•Ê®°Âºè„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°Âºè„ÄÅËßÇÂØüËÄÖÊ®°Âºè„ÄÅËø≠‰ª£Â≠êÊ®°Âºè„ÄÅË¥£‰ªªÈìæÊ®°Âºè„ÄÅÂëΩ‰ª§Ê®°Âºè„ÄÅÂ§áÂøòÂΩïÊ®°Âºè„ÄÅÁä∂ÊÄÅÊ®°Âºè„ÄÅËÆøÈóÆËÄÖÊ®°Âºè„ÄÅ‰∏≠‰ªãËÄÖÊ®°Âºè„ÄÅËß£ÈáäÂô®Ê®°Âºè„ÄÇ Êï¥Êå∫Â•ΩÔºöhttps://blog.csdn.net/carson_ho/article/details/54910518 Âçï‰æãÊ®°ÂºèÁÆÄ‰ªã‰ªãÁªçÂçï‰æãÊ®°ÂºèÔºàSingletonÔºâÔºå‰πüÂè´ÂçïÂ≠êÊ®°ÂºèÔºåÊòØ‰∏ÄÁßçÂ∏∏Áî®ÁöÑËΩØ‰ª∂ËÆæËÆ°Ê®°Âºè„ÄÇÂú®Â∫îÁî®Ëøô‰∏™Ê®°ÂºèÊó∂ÔºåÂçï‰æãÂØπË±°ÁöÑÁ±ªÂøÖÈ°ª‰øùËØÅÂè™Êúâ‰∏Ä‰∏™ÂÆû‰æãÂ≠òÂú®„ÄÇËÆ∏Â§öÊó∂ÂÄôÊï¥‰∏™Á≥ªÁªüÂè™ÈúÄË¶ÅÊã•Êúâ‰∏Ä‰∏™ÁöÑÂÖ®Â±ÄÂØπË±°ÔºåËøôÊ†∑ÊúâÂà©‰∫éÊàë‰ª¨ÂçèË∞ÉÁ≥ªÁªüÊï¥‰ΩìÁöÑË°å‰∏∫„ÄÇÊØîÂ¶ÇÂú®Êüê‰∏™ÊúçÂä°Âô®Á®ãÂ∫è‰∏≠ÔºåËØ•ÊúçÂä°Âô®ÁöÑÈÖçÁΩÆ‰ø°ÊÅØÂ≠òÊîæÂú®‰∏Ä‰∏™Êñá‰ª∂‰∏≠ÔºåËøô‰∫õÈÖçÁΩÆÊï∞ÊçÆÁî±‰∏Ä‰∏™Âçï‰æãÂØπË±°Áªü‰∏ÄËØªÂèñÔºåÁÑ∂ÂêéÊúçÂä°ËøõÁ®ã‰∏≠ÁöÑÂÖ∂‰ªñÂØπË±°ÂÜçÈÄöËøáËøô‰∏™Âçï‰æãÂØπË±°Ëé∑ÂèñËøô‰∫õÈÖçÁΩÆ‰ø°ÊÅØ„ÄÇËøôÁßçÊñπÂºèÁÆÄÂåñ‰∫ÜÂú®Â§çÊùÇÁéØÂ¢É‰∏ãÁöÑÈÖçÁΩÆÁÆ°ÁêÜ„ÄÇ ÂÆûÁé∞ÊÄùË∑Ø‰∏Ä‰∏™Á±ªËÉΩËøîÂõûÂØπË±°‰∏Ä‰∏™ÂºïÁî®(Ê∞∏ËøúÊòØÂêå‰∏Ä‰∏™)Âíå‰∏Ä‰∏™Ëé∑ÂæóËØ•ÂÆû‰æãÁöÑÊñπÊ≥ïÔºàÂøÖÈ°ªÊòØÈùôÊÄÅÊñπÊ≥ïÔºåÈÄöÂ∏∏‰ΩøÁî®getInstanceËøô‰∏™Âêç Áß∞ÔºâÔºõÂΩìÊàë‰ª¨Ë∞ÉÁî®Ëøô‰∏™ÊñπÊ≥ïÊó∂ÔºåÂ¶ÇÊûúÁ±ªÊåÅÊúâÁöÑÂºïÁî®‰∏ç‰∏∫Á©∫Â∞±ËøîÂõûËøô‰∏™ÂºïÁî®ÔºåÂ¶ÇÊûúÁ±ª‰øùÊåÅÁöÑÂºïÁî®‰∏∫Á©∫Â∞±ÂàõÂª∫ËØ•Á±ªÁöÑÂÆû‰æãÂπ∂Â∞ÜÂÆû‰æãÁöÑÂºïÁî®Ëµã‰∫àËØ•Á±ª‰øùÊåÅÁöÑÂºïÁî®ÔºõÂêåÊó∂Êàë‰ª¨ ËøòÂ∞ÜËØ•Á±ªÁöÑÊûÑÈÄ†ÂáΩÊï∞ÂÆö‰πâ‰∏∫ÁßÅÊúâÊñπÊ≥ïÔºåËøôÊ†∑ÂÖ∂‰ªñÂ§ÑÁöÑ‰ª£Á†ÅÂ∞±Êó†Ê≥ïÈÄöËøáË∞ÉÁî®ËØ•Á±ªÁöÑÊûÑÈÄ†ÂáΩÊï∞Êù•ÂÆû‰æãÂåñËØ•Á±ªÁöÑÂØπË±°ÔºåÂè™ÊúâÈÄöËøáËØ•Á±ªÊèê‰æõÁöÑÈùôÊÄÅÊñπÊ≥ïÊù•ÂæóÂà∞ËØ•Á±ªÁöÑÂîØ‰∏ÄÂÆû‰æã„ÄÇ Ê≥®ÊÑèÁÇπÂçï‰æãÊ®°ÂºèÂú®Â§öÁ∫øÁ®ãÁöÑÂ∫îÁî®Âú∫Âêà‰∏ãÂøÖÈ°ªÂ∞èÂøÉ‰ΩøÁî®„ÄÇÂ¶ÇÊûúÂΩìÂîØ‰∏ÄÂÆû‰æãÂ∞öÊú™ÂàõÂª∫Êó∂ÔºåÊúâ‰∏§‰∏™Á∫øÁ®ãÂêåÊó∂Ë∞ÉÁî®ÂàõÂª∫ÊñπÊ≥ïÔºåÈÇ£‰πàÂÆÉ‰ª¨ÂêåÊó∂Ê≤°ÊúâÊ£ÄÊµãÂà∞ÂîØ‰∏ÄÂÆû‰æãÁöÑÂ≠òÂú®Ôºå‰ªéËÄåÂêåÊó∂ÂêÑËá™ÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÂÆû‰æãÔºå ËøôÊ†∑Â∞±Êúâ‰∏§‰∏™ÂÆû‰æãË¢´ÊûÑÈÄ†Âá∫Êù•Ôºå‰ªéËÄåËøùÂèç‰∫ÜÂçï‰æãÊ®°Âºè‰∏≠ÂÆû‰æãÂîØ‰∏ÄÁöÑÂéüÂàô„ÄÇ Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÁöÑÂäûÊ≥ïÊòØ‰∏∫ÊåáÁ§∫Á±ªÊòØÂê¶Â∑≤ÁªèÂÆû‰æãÂåñÁöÑÂèòÈáèÊèê‰æõ‰∏Ä‰∏™‰∫íÊñ•ÈîÅ(ËôΩÁÑ∂ËøôÊ†∑‰ºöÈôç‰ΩéÊïàÁéá)„ÄÇ ‰ºòÁº∫ÁÇπ‰ºòÁÇπÔºö Âú®Âçï‰æãÊ®°Âºè‰∏≠ÔºåÊ¥ªÂä®ÁöÑÂçï‰æãÂè™Êúâ‰∏Ä‰∏™ÂÆû‰æãÔºåÂØπÂçï‰æãÁ±ªÁöÑÊâÄÊúâÂÆû‰æãÂåñÂæóÂà∞ÁöÑÈÉΩÊòØÁõ∏ÂêåÁöÑ‰∏Ä‰∏™ÂÆû‰æã„ÄÇËøôÊ†∑Â∞±Èò≤Ê≠¢ÂÖ∂ÂÆÉÂØπË±°ÂØπËá™Â∑±ÁöÑÂÆû‰æãÂåñÔºåÁ°Æ‰øùÊâÄÊúâÁöÑÂØπË±°ÈÉΩËÆøÈóÆ‰∏Ä‰∏™ÂÆû‰æã„ÄÇ Âçï‰æãÊ®°ÂºèÂÖ∑Êúâ‰∏ÄÂÆöÁöÑ‰º∏Áº©ÊÄßÔºåÁ±ªËá™Â∑±Êù•ÊéßÂà∂ÂÆû‰æãÂåñËøõÁ®ãÔºåÁ±ªÂ∞±Âú®ÊîπÂèòÂÆû‰æãÂåñËøõÁ®ã‰∏äÊúâÁõ∏Â∫îÁöÑ‰º∏Áº©ÊÄß„ÄÇ Êèê‰æõ‰∫ÜÂØπÂîØ‰∏ÄÂÆû‰æãÁöÑÂèóÊéßËÆøÈóÆ„ÄÇ Áî±‰∫éÂú®Á≥ªÁªüÂÜÖÂ≠ò‰∏≠Âè™Â≠òÂú®‰∏Ä‰∏™ÂØπË±°ÔºåÂõ†Ê≠§ÂèØ‰ª• ËäÇÁ∫¶Á≥ªÁªüËµÑÊ∫êÔºåÂΩì ÈúÄË¶ÅÈ¢ëÁπÅÂàõÂª∫ÂíåÈîÄÊØÅÁöÑÂØπË±°Êó∂Âçï‰æãÊ®°ÂºèÊó†ÁñëÂèØ‰ª•ÊèêÈ´òÁ≥ªÁªüÁöÑÊÄßËÉΩ„ÄÇ ÂÖÅËÆ∏ÂèØÂèòÊï∞ÁõÆÁöÑÂÆû‰æã„ÄÇ ÈÅøÂÖçÂØπÂÖ±‰∫´ËµÑÊ∫êÁöÑÂ§öÈáçÂç†Áî®„ÄÇ Áº∫ÁÇπÔºö ‰∏çÈÄÇÁî®‰∫éÂèòÂåñÁöÑÂØπË±°ÔºåÂ¶ÇÊûúÂêå‰∏ÄÁ±ªÂûãÁöÑÂØπË±°ÊÄªÊòØË¶ÅÂú®‰∏çÂêåÁöÑÁî®‰æãÂú∫ÊôØÂèëÁîüÂèòÂåñÔºåÂçï‰æãÂ∞±‰ºöÂºïËµ∑Êï∞ÊçÆÁöÑÈîôËØØÔºå‰∏çËÉΩ‰øùÂ≠òÂΩºÊ≠§ÁöÑÁä∂ÊÄÅ„ÄÇ Áî±‰∫éÂçï‰æãÊ®°Âºè‰∏≠Ê≤°ÊúâÊäΩË±°Â±ÇÔºåÂõ†Ê≠§Âçï‰æãÁ±ªÁöÑÊâ©Â±ïÊúâÂæàÂ§ßÁöÑÂõ∞Èöæ„ÄÇ Âçï‰æãÁ±ªÁöÑËÅåË¥£ËøáÈáçÔºåÂú®‰∏ÄÂÆöÁ®ãÂ∫¶‰∏äËøùËÉå‰∫Ü‚ÄúÂçï‰∏ÄËÅåË¥£ÂéüÂàô‚Äù„ÄÇ Êª•Áî®Âçï‰æãÂ∞ÜÂ∏¶Êù•‰∏Ä‰∫õË¥üÈù¢ÈóÆÈ¢òÔºåÂ¶Ç‰∏∫‰∫ÜËäÇÁúÅËµÑÊ∫êÂ∞ÜÊï∞ÊçÆÂ∫ìËøûÊé•Ê±†ÂØπË±°ËÆæËÆ°‰∏∫ÁöÑÂçï‰æãÁ±ªÔºåÂèØËÉΩ‰ºöÂØºËá¥ÂÖ±‰∫´ËøûÊé•Ê±†ÂØπË±°ÁöÑÁ®ãÂ∫èËøáÂ§öËÄåÂá∫Áé∞ËøûÊé•Ê±†Ê∫¢Âá∫ÔºõÂ¶ÇÊûúÂÆû‰æãÂåñÁöÑÂØπË±°ÈïøÊó∂Èó¥‰∏çË¢´Âà©Áî®ÔºåÁ≥ªÁªü‰ºöËÆ§‰∏∫ÊòØÂûÉÂúæËÄåË¢´ÂõûÊî∂ÔºåËøôÂ∞ÜÂØºËá¥ÂØπË±°Áä∂ÊÄÅÁöÑ‰∏¢Â§±„ÄÇ ÈÄÇÁî®Âú∫ÊôØÂçï‰æãÊ®°ÂºèÂè™ÂÖÅËÆ∏ÂàõÂª∫‰∏Ä‰∏™ÂØπË±°ÔºåÂõ†Ê≠§ËäÇÁúÅÂÜÖÂ≠òÔºåÂä†Âø´ÂØπË±°ËÆøÈóÆÈÄüÂ∫¶ÔºåÂõ†Ê≠§ÂØπË±°ÈúÄË¶ÅË¢´ÂÖ¨Áî®ÁöÑÂú∫ÂêàÈÄÇÂêà‰ΩøÁî®ÔºåÂ¶ÇÂ§ö‰∏™Ê®°Âùó‰ΩøÁî®Âêå‰∏Ä‰∏™Êï∞ÊçÆÊ∫êËøûÊé•ÂØπË±°Á≠âÁ≠â„ÄÇÂ¶ÇÔºö ÈúÄË¶ÅÈ¢ëÁπÅÂÆû‰æãÂåñÁÑ∂ÂêéÈîÄÊØÅÁöÑÂØπË±°„ÄÇ ÂàõÂª∫ÂØπË±°Êó∂ËÄóÊó∂ËøáÂ§öÊàñËÄÖËÄóËµÑÊ∫êËøáÂ§öÔºå‰ΩÜÂèàÁªèÂ∏∏Áî®Âà∞ÁöÑÂØπË±°„ÄÇ ÊúâÁä∂ÊÄÅÁöÑÂ∑•ÂÖ∑Á±ªÂØπË±°„ÄÇ È¢ëÁπÅËÆøÈóÆÊï∞ÊçÆÂ∫ìÊàñÊñá‰ª∂ÁöÑÂØπË±°„ÄÇ ‰ª•‰∏ãÈÉΩÊòØÂçï‰æãÊ®°ÂºèÁöÑÁªèÂÖ∏‰ΩøÁî®Âú∫ÊôØÔºö ËµÑÊ∫êÂÖ±‰∫´ÁöÑÊÉÖÂÜµ‰∏ãÔºåÈÅøÂÖçÁî±‰∫éËµÑÊ∫êÊìç‰ΩúÊó∂ÂØºËá¥ÁöÑÊÄßËÉΩÊàñÊçüËÄóÁ≠â„ÄÇÂ¶Ç‰∏äËø∞‰∏≠ÁöÑÊó•ÂøóÊñá‰ª∂ÔºåÂ∫îÁî®ÈÖçÁΩÆ„ÄÇ ÊéßÂà∂ËµÑÊ∫êÁöÑÊÉÖÂÜµ‰∏ãÔºåÊñπ‰æøËµÑÊ∫ê‰πãÈó¥ÁöÑ‰∫íÁõ∏ÈÄö‰ø°„ÄÇÂ¶ÇÁ∫øÁ®ãÊ±†Á≠â„ÄÇ Â∫îÁî®Âú∫ÊôØ‰∏æ‰æãÔºö Â§ñÈÉ®ËµÑÊ∫êÔºöÊØèÂè∞ËÆ°ÁÆóÊú∫ÊúâËã•Âπ≤‰∏™ÊâìÂç∞Êú∫Ôºå‰ΩÜÂè™ËÉΩÊúâ‰∏Ä‰∏™PrinterSpoolerÔºå‰ª•ÈÅøÂÖç‰∏§‰∏™ÊâìÂç∞‰Ωú‰∏öÂêåÊó∂ËæìÂá∫Âà∞ÊâìÂç∞Êú∫„ÄÇÂÜÖÈÉ®ËµÑÊ∫êÔºöÂ§ßÂ§öÊï∞ËΩØ‰ª∂ÈÉΩÊúâ‰∏Ä‰∏™ÔºàÊàñÂ§ö‰∏™ÔºâÂ±ûÊÄßÊñá‰ª∂Â≠òÊîæÁ≥ªÁªüÈÖçÁΩÆÔºåËøôÊ†∑ÁöÑÁ≥ªÁªüÂ∫îËØ•Êúâ‰∏Ä‰∏™ÂØπË±°ÁÆ°ÁêÜËøô‰∫õÂ±ûÊÄßÊñá‰ª∂„ÄÇ WindowsÁöÑTask ManagerÔºà‰ªªÂä°ÁÆ°ÁêÜÂô®ÔºâÂ∞±ÊòØÂæàÂÖ∏ÂûãÁöÑÂçï‰æãÊ®°ÂºèÔºàËøô‰∏™ÂæàÁÜüÊÇâÂêßÔºâÔºåÊÉ≥ÊÉ≥ÁúãÔºåÊòØ‰∏çÊòØÂë¢Ôºå‰Ω†ËÉΩÊâìÂºÄ‰∏§‰∏™windows task managerÂêóÔºü ‰∏ç‰ø°‰Ω†Ëá™Â∑±ËØïËØïÁúãÂì¶~ windowsÁöÑRecycle BinÔºàÂõûÊî∂Á´ôÔºâ‰πüÊòØÂÖ∏ÂûãÁöÑÂçï‰æãÂ∫îÁî®„ÄÇÂú®Êï¥‰∏™Á≥ªÁªüËøêË°åËøáÁ®ã‰∏≠ÔºåÂõûÊî∂Á´ô‰∏ÄÁõ¥Áª¥Êä§ÁùÄ‰ªÖÊúâÁöÑ‰∏Ä‰∏™ÂÆû‰æã„ÄÇ ÁΩëÁ´ôÁöÑËÆ°Êï∞Âô®Ôºå‰∏ÄËà¨‰πüÊòØÈááÁî®Âçï‰æãÊ®°ÂºèÂÆûÁé∞ÔºåÂê¶ÂàôÈöæ‰ª•ÂêåÊ≠•„ÄÇ Â∫îÁî®Á®ãÂ∫èÁöÑÊó•ÂøóÂ∫îÁî®Ôºå‰∏ÄËà¨ÈÉΩ‰ΩïÁî®Âçï‰æãÊ®°ÂºèÂÆûÁé∞ÔºåËøô‰∏ÄËà¨ÊòØÁî±‰∫éÂÖ±‰∫´ÁöÑÊó•ÂøóÊñá‰ª∂‰∏ÄÁõ¥Â§Ñ‰∫éÊâìÂºÄÁä∂ÊÄÅÔºåÂõ†‰∏∫Âè™ËÉΩÊúâ‰∏Ä‰∏™ÂÆû‰æãÂéªÊìç‰ΩúÔºåÂê¶ÂàôÂÜÖÂÆπ‰∏çÂ•ΩËøΩÂä†„ÄÇ WebÂ∫îÁî®ÁöÑÈÖçÁΩÆÂØπË±°ÁöÑËØªÂèñÔºå‰∏ÄËà¨‰πüÂ∫îÁî®Âçï‰æãÊ®°ÂºèÔºåËøô‰∏™ÊòØÁî±‰∫éÈÖçÁΩÆÊñá‰ª∂ÊòØÂÖ±‰∫´ÁöÑËµÑÊ∫ê„ÄÇ Êï∞ÊçÆÂ∫ìËøûÊé•Ê±†ÁöÑËÆæËÆ°‰∏ÄËà¨‰πüÊòØÈááÁî®Âçï‰æãÊ®°ÂºèÔºåÂõ†‰∏∫Êï∞ÊçÆÂ∫ìËøûÊé•ÊòØ‰∏ÄÁßçÊï∞ÊçÆÂ∫ìËµÑÊ∫ê„ÄÇÊï∞ÊçÆÂ∫ìËΩØ‰ª∂Á≥ªÁªü‰∏≠‰ΩøÁî®Êï∞ÊçÆÂ∫ìËøûÊé•Ê±†Ôºå‰∏ªË¶ÅÊòØËäÇÁúÅÊâìÂºÄÊàñËÄÖÂÖ≥Èó≠Êï∞ÊçÆÂ∫ìËøûÊé•ÊâÄÂºïËµ∑ÁöÑÊïàÁéáÊçüËÄóÔºåËøôÁßçÊïàÁéá‰∏äÁöÑÊçüËÄóËøòÊòØÈùûÂ∏∏ÊòÇË¥µÁöÑÔºåÂõ†‰∏∫‰ΩïÁî®Âçï‰æãÊ®°ÂºèÊù•Áª¥Êä§ÔºåÂ∞±ÂèØ‰ª•Â§ßÂ§ßÈôç‰ΩéËøôÁßçÊçüËÄó„ÄÇ Â§öÁ∫øÁ®ãÁöÑÁ∫øÁ®ãÊ±†ÁöÑËÆæËÆ°‰∏ÄËà¨‰πüÊòØÈááÁî®Âçï‰æãÊ®°ÂºèÔºåËøôÊòØÁî±‰∫éÁ∫øÁ®ãÊ±†Ë¶ÅÊñπ‰æøÂØπÊ±†‰∏≠ÁöÑÁ∫øÁ®ãËøõË°åÊéßÂà∂„ÄÇ Êìç‰ΩúÁ≥ªÁªüÁöÑÊñá‰ª∂Á≥ªÁªüÔºå‰πüÊòØÂ§ßÁöÑÂçï‰æãÊ®°ÂºèÂÆûÁé∞ÁöÑÂÖ∑‰Ωì‰æãÂ≠êÔºå‰∏Ä‰∏™Êìç‰ΩúÁ≥ªÁªüÂè™ËÉΩÊúâ‰∏Ä‰∏™Êñá‰ª∂Á≥ª„ÄÇ HttpApplication ‰πüÊòØÂçï‰æãÁöÑÂÖ∏ÂûãÂ∫îÁî®„ÄÇ ‰ª•‰∏äÊù•Ëá™Ôºöhttps://www.cnblogs.com/damsoft/p/6105122.html ÂÆûÁé∞ÊñπÂºèÈ•øÊ±âÂºèËøôÁßçÊñπÊ≥ïÈùûÂ∏∏ÁÆÄÂçïÔºåÂõ†‰∏∫Âçï‰æãÁöÑÂÆû‰æãË¢´Â£∞ÊòéÊàê static Âíå final ÂèòÈáè‰∫ÜÔºåÂú®Á¨¨‰∏ÄÊ¨°Âä†ËΩΩÁ±ªÂà∞ÂÜÖÂ≠ò‰∏≠Êó∂Â∞±‰ºöÂàùÂßãÂåñÔºåÊâÄ‰ª•ÂàõÂª∫ÂÆû‰æãÊú¨Ë∫´ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ 12345678public class Singleton &#123; // Á±ªÂä†ËΩΩÊó∂Â∞±ÂàùÂßãÂåñ private static final Singleton instance = new Singleton(); private Singleton() &#123;&#125; public static Singleton getInstance()&#123; return instance; &#125;&#125; Áº∫ÁÇπÊòØÂÆÉ‰∏çÊòØ‰∏ÄÁßçÊáíÂä†ËΩΩÊ®°ÂºèÔºàlazy initializationÔºâÔºåÂçï‰æã‰ºöÂú®Âä†ËΩΩÁ±ªÂêé‰∏ÄÂºÄÂßãÂ∞±Ë¢´ÂàùÂßãÂåñÔºåÂç≥‰ΩøÂÆ¢Êà∑Á´ØÊ≤°ÊúâË∞ÉÁî® getInstance()ÊñπÊ≥ï„ÄÇÈ•øÊ±âÂºèÁöÑÂàõÂª∫ÊñπÂºèÂú®‰∏Ä‰∫õÂú∫ÊôØ‰∏≠Â∞ÜÊó†Ê≥ï‰ΩøÁî®ÔºöË≠¨Â¶Ç Singleton ÂÆû‰æãÁöÑÂàõÂª∫ÊòØ‰æùËµñÂèÇÊï∞ÊàñËÄÖÈÖçÁΩÆÊñá‰ª∂ÁöÑÔºåÂú® getInstance() ‰πãÂâçÂøÖÈ°ªË∞ÉÁî®Êüê‰∏™ÊñπÊ≥ïËÆæÁΩÆÂèÇÊï∞ÁªôÂÆÉÔºåÈÇ£Ê†∑ËøôÁßçÂçï‰æãÂÜôÊ≥ïÂ∞±Êó†Ê≥ï‰ΩøÁî® ÊáíÊ±âÂºèÔºåÁ∫øÁ®ã‰∏çÂÆâÂÖ®12345678910public class Singleton &#123; private static Singleton instance; private Singleton () &#123;&#125; public static Singleton getInstance() &#123; if (instance == null) &#123; instance = new Singleton(); &#125; return instance; &#125;&#125; ËøôÊÆµ‰ª£Á†ÅÁÆÄÂçïÊòé‰∫ÜÔºåËÄå‰∏î‰ΩøÁî®‰∫ÜÊáíÂä†ËΩΩÊ®°ÂºèÔºå‰ΩÜÊòØÂç¥Â≠òÂú®Ëá¥ÂëΩÁöÑÈóÆÈ¢ò„ÄÇÂΩìÊúâÂ§ö‰∏™Á∫øÁ®ãÂπ∂Ë°åË∞ÉÁî® getInstance() ÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöÂàõÂª∫Â§ö‰∏™ÂÆû‰æã ÊáíÊ±âÂºèÔºåÁ∫øÁ®ãÂÆâÂÖ®‰∏∫‰∫ÜËß£ÂÜ≥‰∏äÈù¢ÁöÑÈóÆÈ¢òÔºåÊúÄÁÆÄÂçïÁöÑÊñπÊ≥ïÊòØÂ∞ÜÊï¥‰∏™ getInstance() ÊñπÊ≥ïËÆæ‰∏∫ÂêåÊ≠•ÔºàsynchronizedÔºâ 123456public static synchronized Singleton getInstance() &#123; if (instance == null) &#123; instance = new Singleton(); &#125; return instance;&#125; ËôΩÁÑ∂ÂÅöÂà∞‰∫ÜÁ∫øÁ®ãÂÆâÂÖ®ÔºåÂπ∂‰∏îËß£ÂÜ≥‰∫ÜÂ§öÂÆû‰æãÁöÑÈóÆÈ¢òÔºå‰ΩÜÊòØÂÆÉÂπ∂‰∏çÈ´òÊïà„ÄÇÂõ†‰∏∫Âú®‰ªª‰ΩïÊó∂ÂÄôÂè™ËÉΩÊúâ‰∏Ä‰∏™Á∫øÁ®ãË∞ÉÁî® getInstance() ÊñπÊ≥ï„ÄÇ‰ΩÜÊòØÂêåÊ≠•Êìç‰ΩúÂè™ÈúÄË¶ÅÂú®Á¨¨‰∏ÄÊ¨°Ë∞ÉÁî®Êó∂ÊâçË¢´ÈúÄË¶ÅÔºåÂç≥Á¨¨‰∏ÄÊ¨°ÂàõÂª∫Âçï‰æãÂÆû‰æãÂØπË±°Êó∂„ÄÇËøôÂ∞±ÂºïÂá∫‰∫ÜÂèåÈáçÊ£ÄÈ™åÈîÅ ÂèåÈáçÊ£ÄÈ™åÈîÅ1234567891011121314public class Singleton &#123; private volatile static Singleton instance; private Singleton () &#123;&#125; public static Singleton getSingleton() &#123; if (instance == null) &#123; synchronized (Singleton.class) &#123; if (instance == null) &#123; instance = new Singleton(); &#125; &#125; &#125; return instance; &#125; &#125; Áß∞ÂÖ∂‰∏∫ÂèåÈáçÊ£ÄÊü•ÈîÅÔºåÊòØÂõ†‰∏∫‰ºöÊúâ‰∏§Ê¨°Ê£ÄÊü• instance == nullÔºå‰∏ÄÊ¨°ÊòØÂú®ÂêåÊ≠•ÂùóÂ§ñÔºå‰∏ÄÊ¨°ÊòØÂú®ÂêåÊ≠•ÂùóÂÜÖ„ÄÇ‰∏∫‰ªÄ‰πàÂú®ÂêåÊ≠•ÂùóÂÜÖËøòË¶ÅÂÜçÊ£ÄÈ™å‰∏ÄÊ¨°ÔºüÂõ†‰∏∫ÂèØËÉΩ‰ºöÊúâÂ§ö‰∏™Á∫øÁ®ã‰∏ÄËµ∑ËøõÂÖ•ÂêåÊ≠•ÂùóÂ§ñÁöÑ ifÔºåÂ¶ÇÊûúÂú®ÂêåÊ≠•ÂùóÂÜÖ‰∏çËøõË°å‰∫åÊ¨°Ê£ÄÈ™åÁöÑËØùÂ∞±‰ºöÁîüÊàêÂ§ö‰∏™ÂÆû‰æã‰∫Ü ËÄå instance = new Singleton() ËøôÂè•ÔºåÂπ∂ÈùûÊòØ‰∏Ä‰∏™ÂéüÂ≠êÊìç‰ΩúÔºå‰∫ãÂÆû‰∏äÂú® JVM ‰∏≠ËøôÂè•ËØùÂÅö‰∫Ü‰∏ãÈù¢ 3 ‰ª∂‰∫ãÔºö Áªô instance ÂàÜÈÖçÂÜÖÂ≠ò Ë∞ÉÁî® Singleton ÁöÑÊûÑÈÄ†ÂáΩÊï∞Êù•ÂàùÂßãÂåñÊàêÂëòÂèòÈáè Â∞Ü instance ÂØπË±°ÊåáÂêëÂàÜÈÖçÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºàÊâßË°åÂÆåËøôÊ≠• instance Â∞±‰∏∫Èùû null ‰∫ÜÔºâ ‰ΩÜÊòØÂú® JVM ÁöÑÂç≥Êó∂ÁºñËØëÂô®‰∏≠Â≠òÂú®Êåá‰ª§ÈáçÊéíÂ∫èÁöÑ‰ºòÂåñ„ÄÇ‰πüÂ∞±ÊòØËØ¥‰∏äÈù¢ÁöÑÁ¨¨‰∫åÊ≠•ÂíåÁ¨¨‰∏âÊ≠•ÁöÑÈ°∫Â∫èÊòØ‰∏çËÉΩ‰øùËØÅÁöÑÔºåÊúÄÁªàÁöÑÊâßË°åÈ°∫Â∫èÂèØËÉΩÊòØ 1-2-3 ‰πüÂèØËÉΩÊòØ 1-3-2„ÄÇÂ¶ÇÊûúÊòØÂêéËÄÖÔºåÂàôÂú® 3 ÊâßË°åÂÆåÊØï„ÄÅ2 Êú™ÊâßË°å‰πãÂâçÔºåË¢´Á∫øÁ®ã‰∫åÊä¢Âç†‰∫ÜÔºåËøôÊó∂ instance Â∑≤ÁªèÊòØÈùû null ‰∫ÜÔºà‰ΩÜÂç¥Ê≤°ÊúâÂàùÂßãÂåñÔºâÔºåÊâÄ‰ª•Á∫øÁ®ã‰∫å‰ºöÁõ¥Êé•ËøîÂõû instanceÔºåÁÑ∂Âêé‰ΩøÁî®ÔºåÁÑ∂ÂêéÈ°∫ÁêÜÊàêÁ´†Âú∞Êä•Èîô ÊâÄ‰ª•ÈúÄË¶ÅÂ∞Ü instance ÂèòÈáèÂ£∞ÊòéÊàê volatile „ÄåÁ¶ÅÊ≠¢ÈáçÊéíÂ∫è„Äç ÈùôÊÄÅÂÜÖÈÉ®Á±ª123456789public class Singleton &#123; private static class SingletonHolder &#123; private static final Singleton INSTANCE = new Singleton(); &#125; private Singleton () &#123;&#125; public static final Singleton getInstance() &#123; return SingletonHolder.INSTANCE; &#125; &#125; ÈùôÊÄÅÂÜÖÈÉ®Á±ª‰∏éÂ§ñÈÉ®Á±ªÊ≤°Êúâ‰ªÄ‰πàÂÖ≥Á≥ªÔºåÂ§ñÈÉ®Á±ªÂä†ËΩΩÁöÑÊó∂ÂÄôÔºåÂÜÖÈÉ®Á±ª‰∏ç‰ºöË¢´Âä†ËΩΩÔºåÈùôÊÄÅÂÜÖÈÉ®Á±ªÂè™ÊòØË∞ÉÁî®ÁöÑÊó∂ÂÄôÁî®‰∫ÜÂ§ñÈÉ®Á±ªÁöÑÂêçÂ≠óËÄåÂ∑≤ÔºåÊâÄ‰ª•Âç≥‰Ωø Singleton Á±ªË¢´Âä†ËΩΩ‰πü‰∏ç‰ºöÂàõÂª∫Âçï‰æãÂØπË±° ÈùôÊÄÅÂÜÖÈÉ®Á±ª SingletonHolder Âè™ÊúâÂú® getInstance() ÊñπÊ≥ïÁ¨¨‰∏ÄÊ¨°Ë¢´Ë∞ÉÁî®Êó∂ÔºåÊâç‰ºöË¢´Âä†ËΩΩÔºå‰ªéËÄåÂàùÂßãÂåñÂÆÉÁöÑÈùôÊÄÅÂüüÔºàÂàõÂª∫ Singleton ÁöÑÂÆû‰æãÔºâÔºåÂõ†Ê≠§ËØ•ÁßçÊñπÂºèÂÆûÁé∞‰∫ÜÊáíÊ±âÂºèÁöÑÂçï‰æãÊ®°Âºè ‰∏ç‰ªÖÂ¶ÇÊ≠§ÔºåÊ†πÊçÆ JVM Êú¨Ë∫´Êú∫Âà∂ÔºåÁî±‰∫éÊòØÈùôÊÄÅÁöÑÂüüÔºåÂõ†Ê≠§Âè™‰ºöÂú®ËôöÊãüÊú∫Ë£ÖËΩΩÁ±ªÁöÑÊó∂ÂÄôÂàùÂßãÂåñ‰∏ÄÊ¨°ÔºåÂπ∂Áî±ËôöÊãüÊú∫Êù•‰øùËØÅÂÆÉÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÊÄß ÂêåÊó∂‰∏çÁî® synchronizedÔºåÊâÄ‰ª•Ê≤°ÊúâÊÄßËÉΩÁº∫Èô∑ 1234567public class Singleton &#123; private static final Singleton INSTANCE = new Singleton(); private Singleton() &#123;&#125; public static Singleton getInstance() &#123; return INSTANCE; &#125;&#125; Ëøô‰∏™ÂÜôÊ≥ï‰πüÊòØÂà©Áî®Á±ªÁöÑÈùôÊÄÅÂèòÈáèÁöÑÂîØ‰∏ÄÊÄßÔºå‰∏çËøáÂíå‰∏äÈù¢ÁöÑÂÜôÊ≥ïÁõ∏ÊØîÔºå‰∏çËÉΩÂÆûÁé∞ÊáíÂä†ËΩΩ EnumÁî®Êûö‰∏æÂÜôÂçï‰æãÊúÄÂ§ßÁöÑ‰ºòÁÇπÊòØÁÆÄÂçï 1234567891011121314151617public enum Singleton &#123; INSTANCE &#123; @Override protected void read() &#123; System.out.println("read"); &#125; @Override protected void write() &#123; System.out.println("write"); &#125; &#125;; protected abstract void read(); protected abstract void write();&#125; ‰ª•‰∏äÊòØ‰∏Ä‰∏™Âçï‰æãÊûö‰∏æÁöÑ‰æãÂ≠êÔºåË¶ÅËé∑ÂèñËØ•ÂÆû‰æãÂè™ÈúÄË¶Å Singleton.INSTANCEÔºåÂπ∂‰∏îÊ≠§ÁßçÊñπÂºèÂèØ‰ª•‰øùËØÅËØ•Âçï‰æãÁ∫øÁ®ãÂÆâÂÖ®„ÄÅÈò≤ÂèçÂ∞ÑÊîªÂáª„ÄÅÈò≤Ê≠¢Â∫èÂàóÂåñÁîüÊàêÊñ∞ÁöÑÂÆû‰æã ÂèçÁºñËØëÂêéÁöÑÁ±ªÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546public abstract class Singleton extends Enum &#123; private Singleton(String s, int i) &#123; super(s, i); &#125; protected abstract void read(); protected abstract void write(); public static Singleton[] values() &#123; Singleton asingleton[]; int i; Singleton asingleton1[]; System.arraycopy(asingleton = ENUM$VALUES, 0, asingleton1 = new Singleton[i = asingleton.length], 0, i); return asingleton1; &#125; public static Singleton valueOf(String s) &#123; return (Singleton)Enum.valueOf(singleton/Singleton, s); &#125; Singleton(String s, int i, Singleton singleton) &#123; this(s, i); &#125; public static final Singleton INSTANCE; private static final Singleton ENUM$VALUES[]; static &#123; INSTANCE = new Singleton("INSTANCE", 0) &#123; protected void read() &#123; System.out.println("read"); &#125; protected void write() &#123; System.out.println("write"); &#125; &#125;; ENUM$VALUES = (new Singleton[] &#123; INSTANCE &#125;); &#125;&#125; Áúã‰∫ÜËøô‰∏™Á±ªÁöÑÁúüË∫´ÂêéÔºåÂèØ‰ª•Áü•ÈÅìÔºö Êûö‰∏æÁ±ªÂÆûÁé∞ÂÖ∂ÂÆûÁúÅÁï•‰∫Ü private Á±ªÂûãÁöÑÊûÑÈÄ†ÂáΩÊï∞ Êûö‰∏æÁ±ªÁöÑÂüüÂÖ∂ÂÆûÊòØÁõ∏Â∫îÁöÑ enum Á±ªÂûãÁöÑ‰∏Ä‰∏™ÂÆû‰æãÂØπË±° Êûö‰∏æÁ±ªÁöÑÂüü‰ºöÂú® static ÊñπÊ≥ïÂùó‰∏≠Ë¢´ÂÆû‰æãÂåñÔºå‰πüÂ∞±ÊòØËØ¥Âú® enum Ë¢´Á±ªÂä†ËΩΩÂô®Âä†ËΩΩÊó∂Ë¢´ÂÆû‰æãÂåñÔºåÂπ∂ÈùûÊáíÂä†ËΩΩ enum ÊòØ abstract Á±ªÔºåÊâÄ‰ª•Ê≤°Ê≥ïÂÆû‰æãÂåñÔºåÂèçÂ∞Ñ‰πüÊó†ËÉΩ‰∏∫Âäõ ÂÖ≥‰∫éÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ‰øùËØÅÔºåÂÖ∂ÂÆûÊòØÈÄöËøáÁ±ªÂä†ËΩΩÊú∫Âà∂Êù•‰øùËØÅÁöÑÔºåINSTANCE ÊòØÂú® static Âùó‰∏≠ÂÆû‰æãÂåñÁöÑÔºåJVM Âä†ËΩΩÁ±ªÁöÑËøáÁ®ãÊòæÁÑ∂ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ ËÄåÊûö‰∏æÂèØ‰ª•ÂèçÂ∫èÂàóÂåñÊòØÂõ†‰∏∫ Enum ÂÆûÁé∞‰∫Ü readResolve ÊñπÊ≥ï ÂØπ‰∫é‰∏Ä‰∏™Ê†áÂáÜÁöÑ enum Âçï‰æãÊ®°ÂºèÔºåÊúÄ‰ºòÁßÄÁöÑÂÜôÊ≥ïËøòÊòØÂÆûÁé∞Êé•Âè£ÁöÑÂΩ¢Âºè: 1234567891011121314151617// ÂÆö‰πâÂçï‰æãÊ®°Âºè‰∏≠ÈúÄË¶ÅÂÆåÊàêÁöÑ‰ª£Á†ÅÈÄªËæëpublic interface MySingleton &#123; void doSomething();&#125;public enum Singleton implements MySingleton &#123; INSTANCE &#123; @Override public void doSomething() &#123; System.out.println("complete singleton"); &#125; &#125;; public static MySingleton getInstance() &#123; return Singleton.INSTANCE; &#125;&#125; Á†¥ÂùèÂçï‰æãÊ®°ÂºèÁöÑ‰∏âÁßçÊñπÂºè ÂèçÂ∞Ñ Â∫èÂàóÂåñ ÂÖãÈöÜ ÂΩìÂçï‰æãÁ±ªË¢´Â§ö‰∏™Á±ªÂä†ËΩΩÂô®Âä†ËΩΩÔºåÂ¶Ç‰ΩïËøòËÉΩ‰øùÊåÅÂçï‰æãÂ¶ÇÊûúÂçï‰æãÁî±‰∏çÂêåÁöÑÁ±ªË£ÖËΩΩÂô®Ë£ÖÂÖ•ÔºåÈÇ£‰æøÊúâÂèØËÉΩÂ≠òÂú®Â§ö‰∏™Âçï‰æãÁ±ªÁöÑÂÆû‰æã„ÄÇÂÅáÂÆö‰∏çÊòØËøúÁ´ØÂ≠òÂèñÔºå‰æãÂ¶Ç‰∏Ä‰∫õ servlet ÂÆπÂô®ÂØπÊØè‰∏™ servlet ‰ΩøÁî®ÂÆåÂÖ®‰∏çÂêåÁöÑÁ±ªË£ÖËΩΩÂô®ÔºåËøôÊ†∑ÁöÑËØùÂ¶ÇÊûúÊúâ‰∏§‰∏™ servlet ËÆøÈóÆ‰∏Ä‰∏™Âçï‰æãÁ±ªÔºåÂÆÉ‰ª¨Â∞±ÈÉΩ‰ºöÊúâÂêÑËá™ÁöÑÂÆû‰æã Âü∫‰∫éÂêåÊ†∑ÁöÑÂéüÂõ†ÔºåÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂíåÈõÜÁæ§Á≥ªÁªü‰πüÈÉΩÂèØËÉΩÂá∫Áé∞Âçï‰æãÂ§±ÊïàÁöÑÊÉÖÂÜµ Ëß£ÂÜ≥ÊñπÊ≥ïÔºöÁî®Â§ö‰∏™Á±ªÂä†ËΩΩÂô®ÁöÑÁà∂Á±ªÊù•Âä†ËΩΩÂçï‰æãÁ±ª 123456789private static Class getClass(String classname) throws ClassNotFoundException &#123; // Á∫øÁ®ã‰∏ä‰∏ãÊñáÁ±ªÂä†ËΩΩÂô®ÔºåÊú™ËÆæÁΩÆÁöÑËØùÈªòËÆ§ÊòØÂ∫îÁî®Á®ãÂ∫èÁ±ªÂä†ËΩΩÂô® ClassLoader classLoader = Thread.currentThread().getContextClassLoader(); if (classLoader == null) classLoader = Singleton.class.getClassLoader(); return classLoader.loadClass(classname);&#125; Âçï‰æãÁ±ªÈò≤Ê≠¢ÂèçÂ∫èÂàóÂåñ123456public class Singleton implements java.io.Serializable &#123; // ... private Object readResolve() &#123; return INSTANCE; &#125;&#125; readResolve() ÊñπÊ≥ïÂèØ‰ª•ÁêÜËß£ÂèçÂ∫èÂàóÂåñËøáÁ®ãÁöÑÂá∫Âè£ÔºåÂ∞±ÊòØÂú®ÂèçÂ∫èÂàóÂåñÂÆåÊàêÂæóÂà∞ÂØπË±°ÂâçÔºåÊääËøô‰∏™ÂØπË±°Êç¢ÊàêÊàë‰ª¨Á°ÆÂÆöÂ•ΩÁöÑÈÇ£‰∏™„ÄÇ ÂèçÂ∞ÑÁ†¥ÂùèÂçï‰æãÂéüÂàôÂú®Âçï‰æãÊ®°Âºè‰∏≠ÔºåÂè™ÂØπÂ§ñÊèê‰æõÂ∑•ÂéÇÊñπÊ≥ïÔºàËé∑ÂèñÂçï‰æãÔºâÔºåÂπ∂ÁßÅÊúâÂåñÊûÑÈÄ†ÂáΩÊï∞ÔºåÊù•Èò≤Ê≠¢Â§ñÈù¢Â§ö‰ΩôÁöÑÂàõÂª∫„ÄÇÂØπ‰∫é‰∏ÄËà¨ÁöÑÂ§ñÈÉ®Ë∞ÉÁî®Êù•ËØ¥ÔºåÁßÅÊúâÊûÑÈÄ†ÂáΩÊï∞Â∑≤ÁªèÂæàÂÆâÂÖ®‰∫Ü„ÄÇ‰ΩÜÊòØ‰∏Ä‰∫õÁâπÊùÉÁî®Êà∑ÂèØ‰ª•ÈÄöËøáÂèçÂ∞ÑÊù•ËÆøÈóÆÁßÅÊúâÊûÑÈÄ†ÂáΩÊï∞ÔºåÁÑ∂ÂêéÊâìÂºÄËÆøÈóÆÊùÉÈôê setAccessible(true)ÔºåÂ∞±ÂèØ‰ª•ËÆøÈóÆÁßÅÊúâÊûÑÈÄ†ÂáΩÊï∞‰∫ÜÔºåËøôÊ†∑Á†¥Âùè‰∫ÜÂçï‰æãÁöÑÁßÅÊúâÊûÑÈÄ†ÂáΩÊï∞‰øùÊä§ÔºåÂàõÂª∫‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑÂÆû‰æã„ÄÇÂ¶ÇÊûúË¶ÅÈò≤Âæ°ËøôÊ†∑ÁöÑÂèçÂ∞Ñ‰æµÂÖ•ÔºåÂèØ‰ª•‰øÆÊîπÊûÑÈÄ†ÂáΩÊï∞ÔºåÂä†‰∏äÁ¨¨‰∫åÊ¨°ÂÆû‰æãÂåñÁöÑÊ£ÄÊü•ÔºåÂΩìÂèëÁîüÂàõÂª∫Á¨¨‰∫å‰∏™Âçï‰æãÁöÑËØ∑Ê±ÇÊó∂‰ºöÊäõÂá∫ÂºÇÂ∏∏„ÄÇ 1234567private static int cntInstance = 0; private Singleton() throws Exception &#123; if (cntInstance++ &gt; 1) &#123; throw new Exception("can't create another singleton instance."); &#125;&#125; ‰ΩúËÄÖÔºöÊù∞Âì•ÈïøÂæóÂ∏ÖÈìæÊé•Ôºöhttps://www.jianshu.com/p/ee110d76c42bÊù•Ê∫êÔºöÁÆÄ‰π¶Ëëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ Ê®°ÊùøÊñπÂºèÊ®°ÂºèËá™Â∑±Ê†πÊçÆ AQS ÈáçÂÜô‰∫Ü‰∏Ä‰∏™ÂèØÈáçÂÖ•Ôºå‰∏Ä‰∏™‰∏çÂèØÈáçÂÖ•ÁöÑÊòæÁ§∫ÈîÅ„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164/** * ÈùûÈáçÂÖ• */class MutexDemo &#123;// private static Mutex mutex = new Mutex(); private static aa mutex = new aa(); public static void main(String[] args) &#123; for (int i = 0; i &lt; 2 ; i++)&#123; Thread thread = new Thread(() -&gt; &#123; mutex.lock(); try &#123; System.out.println("Current Thread:" + Thread.currentThread().getName()); try &#123; Thread.sleep(3000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; finally &#123; mutex.unlock(); &#125; &#125;); thread.start(); &#125; &#125;&#125;class Mutex implements Lock, java.io.Serializable &#123; // Our internal helper class private static class Sync extends AbstractQueuedSynchronizer &#123; // Reports whether in locked state protected boolean isHeldExclusively() &#123; return getState() == 1; &#125; protected boolean tryAcquire(int acquires) &#123; assert acquires == 1; // Otherwise unused if (compareAndSetState(0, 1)) &#123; setExclusiveOwnerThread(Thread.currentThread()); return true; &#125; return false; &#125; protected boolean tryRelease(int releases) &#123; assert releases == 1; // Otherwise unused if (getState() == 0) throw new IllegalMonitorStateException(); setExclusiveOwnerThread(null); setState(0); return true; &#125; // Provides a Condition Condition newCondition() &#123; return new ConditionObject(); &#125; &#125; // The sync object does all the hard work. We just forward to it. private final Sync sync = new Sync(); public void lock() &#123; sync.acquire(1); &#125; public boolean tryLock() &#123; return sync.tryAcquire(1); &#125; public void unlock() &#123; sync.release(1); &#125; public Condition newCondition() &#123; return sync.newCondition(); &#125; public void lockInterruptibly() throws InterruptedException &#123; sync.acquireInterruptibly(1); &#125; public boolean tryLock(long timeout, TimeUnit unit) throws InterruptedException &#123; return sync.tryAcquireNanos(1, unit.toNanos(timeout)); &#125;&#125;/** * ÂèØÈáçÂÖ• */class aa implements Lock,java.io.Serializable&#123; private static class Sync extends AbstractQueuedSynchronizer&#123; protected boolean isHeldExclusively()&#123; return getExclusiveOwnerThread() == Thread.currentThread(); &#125; protected boolean tryAcquire(int acquires)&#123; final Thread current = Thread.currentThread(); int c = getState(); if (c == 0) &#123; if (compareAndSetState(0, acquires)) &#123; setExclusiveOwnerThread(current); return true; &#125; &#125; else if (current == getExclusiveOwnerThread()) &#123; int next = c + acquires; if (next &lt; 0) // overflow throw new Error("Maximum lock count exceeded"); setState(next); return true; &#125; return false; &#125; protected final boolean tryRelease(int releases) &#123; int c = getState() - releases; if (Thread.currentThread() != getExclusiveOwnerThread()) throw new IllegalMonitorStateException(); boolean free = false; if (c == 0) &#123; free = true; setExclusiveOwnerThread(null); &#125; setState(c); return free; &#125; // Provides a Condition Condition newCondition() &#123; return new ConditionObject(); &#125; &#125; private final Sync sync = new Sync(); @Override public void lock() &#123; sync.acquire(1); &#125; @Override public void lockInterruptibly() throws InterruptedException &#123; sync.acquireInterruptibly(1); &#125; @Override public boolean tryLock() &#123; return sync.tryAcquire(1); &#125; @Override public boolean tryLock(long time, TimeUnit unit) throws InterruptedException &#123; return sync.tryAcquireNanos(1, unit.toNanos(time)); &#125; @Override public void unlock() &#123; sync.release(1); &#125; @Override public Condition newCondition() &#123; return sync.newCondition(); &#125;&#125; ‰ª£ÁêÜËÆæËÆ°Ê®°ÂºèÂä®ÊÄÅ‰ª£ÁêÜ‰∏∫‰ΩïÂä®ÊÄÅ‰ª£ÁêÜÂè™ËÉΩ‰ª£ÁêÜÊé•Âè£ÂÖ∂ÂÆûÊàëËßâÂæóÂÆåÂÖ®ÂèØ‰ª•‰ª£ÁêÜÁ±ªÔºåÂ¶ÇÊûú‰Ω†ËØ¥ ‚ÄùÊòØÂõ†‰∏∫Proxy$0Â∑≤ÁªèÁªßÊâø‰∫ÜProxyÔºåjavaÈáåÈù¢ÂçïÁªßÊâøÊâÄ‰ª•ÂØºËá¥Âè™ËÉΩ‰ª£ÁêÜÊé•Âè£‚ÄúÔºåÈÇ£ÊàëÂ∞±ÂæóÂê¶ËÆ§‰Ω†‰∫ÜÔºåÂõ†‰∏∫ÂÖ∂ÂÆûÂÆåÂÖ®ÂèØ‰ª•ÂÅöÂà∞Áõ¥Êé•ËÆ© ‚ÄùProxyÂéª‰ª£ÁêÜ‚ÄúÔºåÊâÄ‰ª•ÔºåÊàëËßâÂæó‰∫∫ÂÆ∂Ëøô‰πàËÆæËÆ°ÁöÑÂéüÂõ†Âè™Êúâ‰∏Ä‰∏™Ôºö Áúã‰∫ÜËøô‰πàÂ§öÂàÜÊûêÁöÑÔºåÊàëËßâÂæóËøôÊ†∑ËÆæËÆ°ÁöÑÂàùË°∑Â∞±ÊòØ‰∏∫‰∫ÜÂ•óÁî®‰ª£ÁêÜÊ®°ÂºèÊ®°ÊùøÂíåÂü∫‰∫éÊé•Âè£ÁºñÁ®ãËßÑËåÉÁöÑ ÈùôÊÄÅ‰ª£ÁêÜ‰∏≠Â∞±ÊòØÂÆûÁé∞Êé•Âè£ÔºåÂÜçÂú®‰ª£ÁêÜÁ±ªsetËøõÂÆûÁé∞Á±ªÁöÑÂºïÁî®ÔºåË∞ÉÁî®ÁúüÊ≠£‰ª£ÁêÜÁöÑÊñπÊ≥ï Â∞±ÁÆó‰ªñ‰∏çÁªßÊâøProxyÔºå‰πü‰∏ç‰ºöÁªßÊâøË¢´‰ª£ÁêÜÁöÑÂÆûÁé∞Á±ª ÔºåËÄåÊòØÂøÖÈ°ªÊúâ‰∏Ä‰∏™‰ª£ÁêÜÁ±ªÁöÑÊé•Âè£ÂéªÂÆûÁé∞ÂÆÉÔºåËøôÊòØËÆæËÆ°ÁöÑÂàùË°∑ ‰ΩúËÄÖÔºöForwardÈìæÊé•Ôºöhttps://www.zhihu.com/question/62201338/answer/904553916Êù•Ê∫êÔºöÁü•‰πéËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ Âä®ÊÄÅ‰ª£ÁêÜÁöÑËøáÁ®ãÊòØ‰ªÄ‰πà‰ª£ÁêÜÁöÑËøáÁ®ãÂú® Proxy.newProxyInstance() ÊñπÊ≥ï‰∏≠ÔºåÁ®ãÂ∫èÂÖàÊòØËøõË°å‰∫ÜÈ™åËØÅ„ÄÅ‰ºòÂåñ„ÄÅÁºìÂ≠ò„ÄÅÂêåÊ≠•„ÄÅÁîüÊàêÂ≠óËäÇÁ†ÅÂíåÊòæÂºèÁ±ªÂä†ËΩΩÁ≠âÊìç‰ΩúÔºåÊúÄÂêéË∞ÉÁî®ÁöÑ sum.misc.ProxyGenerator.generateProxyClass() Êù•ÂÆåÊàêÁîüÊàêÂ≠óËäÇÁ†ÅÁöÑÂä®‰ΩúÔºåËøô‰∏™ÊñπÊ≥ïÂèØ‰ª•Âú®ËøêË°åÊó∂‰∫ßÁîü‰∏Ä‰∏™ÊèèËø∞‰ª£ÁêÜÁ±ªÁöÑÂ≠óËäÇÁ†ÅÊï∞ÁªÑbyte[]„ÄÇ ‰ª£ÁêÜÁ±ªÁöÑÂÆûÁé∞‰ª£Á†Å‰πüÂæàÁÆÄÂçïÔºåÂÆÉ‰∏∫ÊØè‰∏Ä‰∏™‰º†ÂÖ•Êé•Âè£‰∏≠ÁöÑÊØè‰∏Ä‰∏™ÊñπÊ≥ïÈÉΩËøõË°å‰∫ÜÁõ∏Â∫îÁöÑÂÆûÁé∞ÔºåË∞ÉÁî®ÁöÑÊñπÊ≥ïÈÉΩÊòØÂú®ÊâßË°å InvocationHandler.invoke() ‰∏≠ÁöÑ‰ª£ÁêÜÈÄªËæë„ÄÇ Âä®ÊÄÅ‰ª£ÁêÜÁöÑÂ•ΩÂ§ÑÊòØ‰ªÄ‰πàÂÆûÁé∞‰∫ÜÂèØ‰ª•Âú®ÂéüÂßãÁ±ªÂíåÊé•Âè£ËøòÊú™Áü•ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ∞±Á°ÆÂÆö‰ª£ÁêÜÁ±ªÁöÑ‰ª£ÁêÜË°å‰∏∫ÔºåÂΩì‰ª£ÁêÜÁ±ª‰∏éÂéüÂßãÁ±ªËÑ±Á¶ªÁõ¥Êé•ËÅîÁ≥ªÂêéÔºåÂ∞±ÂèØ‰ª•ÁÅµÊ¥ªÁöÑÈáçÁî®‰∫é‰∏çÂêåÁöÑÂ∫îÁî®Âú∫ÊôØ‰∏≠‰∫Ü„ÄÇ ‰ªÄ‰πàÂè´ÈùôÊÄÅ‰ª£ÁêÜÈùôÊÄÅ‰ª£ÁêÜÔºåÂú®ÁºñËØëÊúüÈó¥Â∞±Â∑≤ÁªèÁ°ÆÂÆö‰∫ÜË¶Å‰ª£ÁêÜÁöÑÁ±ªÂíåÊé•Âè£ÔºåÊòØÂÜôÊ≠ª‰∫ÜÁöÑ„ÄÇ 123456789101112131415161718192021nterface Person&#123; public void play();&#125;class ÈùôÊÄÅ‰ª£ÁêÜ&#123; public static void main(String[] args) &#123; Person person = new StaticProxy(); person.play(); &#125;&#125;class StaticProxy implements Person&#123; @Override public void play() &#123; Student student = new Student("jerome",10); student.play(); System.out.println("ÈùôÊÄÅ‰ª£ÁêÜ"); &#125;&#125; Demo123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566package ËÆæËÆ°Ê®°Âºè;import java.lang.reflect.InvocationHandler;import java.lang.reflect.Method;import java.lang.reflect.Proxy;public class ‰ª£ÁêÜ &#123; public static void main(String[] args) &#123; Person person = new Student("jerome",18); InvocationHandler dynamic = new Dynamic(person); Person person_proxy = (Person) Proxy.newProxyInstance(person.getClass().getClassLoader(),person.getClass().getInterfaces(),dynamic); person_proxy.play();// System.getProperties().put("sun.misc.ProxyGenerator.saveGeneratedFiles","true"); &#125;&#125;class Dynamic implements InvocationHandler&#123; // Ë¶Å‰ª£ÁêÜÁöÑÂØπË±°Âæó‰º†ËøõÊù• private Object object; public Dynamic(Object object)&#123; this.object = object; &#125; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; //do something System.out.println("let's begin!"); Object result = method.invoke(object,args); System.out.println("It's over!"); return result; &#125;&#125;class Student implements Person &#123; private String name; private int age; public Student(String name,int age)&#123; this.name = name; this.age = age; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; public void play()&#123; System.out.println("I just want to play with " + this.name + ", and her age is " + this.age); &#125;&#125;interface Person&#123; public void play();&#125; Áõ∏ÂÖ≥ÁöÑÂ≠óËäÇÁ†ÅÁîüÊàêÊäÄÊúØ‚Äî-cglibÁõ∏ÂÖ≥ÁöÑ Aop &amp; IOC]]></content>
  </entry>
  <entry>
    <title><![CDATA[LeetCode ‰∫åÂà∑Â§ç‰π†]]></title>
    <url>%2F2020%2F02%2F10%2Fleetcode%26%E5%89%91%E6%8C%87%20%E4%BA%8C%E5%88%B7(%E6%8C%89tag).html</url>
    <content type="text"><![CDATA[dpËÉåÂåÖ‰πùËÆ≤ÈóÆÈ¢ò 01 ËÉåÂåÖÈóÆÈ¢ò ÂÆåÂÖ®ËÉåÂåÖÈóÆÈ¢ò Â§öÈáçËÉåÂåÖÈóÆÈ¢ò Ê∑∑ÂêàËÉåÂåÖÈóÆÈ¢ò ‰∫åÁª¥Ë¥πÁî®ÁöÑËÉåÂåÖÈóÆÈ¢ò ÂàÜÁªÑËÉåÂåÖÈóÆÈ¢ò ËÉåÂåÖÈóÆÈ¢òÊ±ÇÊñπÊ°àÊï∞ ËÉåÂåÖÈóÆÈ¢òÊ±ÇÊñπÊ°àË∑ØÂæÑ Êúâ‰æùËµñÁöÑËÉåÂåÖÈóÆÈ¢ò 01ËÉåÂåÖÈóÆÈ¢òËÉåÊôØÔºöÊúâ n ‰ª∂Áâ©ÂìÅÔºåÊØè‰∏Ä‰ª∂Áâ©ÂìÅ i ÂØπÂ∫î‰∏Ä‰∏™‰ΩìÁßØ v[i] Âíå‰∏Ä‰∏™‰ª∑ÂÄº w[i]ÔºåËÆæÊúâ‰∏Ä‰∏™ËÉåÂåÖÔºå‰ΩìÁßØ‰∏∫ VÔºåÂú®Ëøô‰∏™ËÉåÂåÖ‰∏ãËÉΩË£Ö‰∏ãÁöÑ‰ª∑ÂÄºÁöÑÊúÄÂ§ßÂÄºÊòØÂ§öÂ∞ëÔºü Ê®°Êùø ÊúÄÂéüÂßãÊñπÊ≥ïÔºö dp[i][j]ÂÆö‰πâÔºöË°®Á§∫Ââç i ‰∏™Áâ©ÂìÅÔºåÊÄª‰ΩìÁßØÊòØ j ÁöÑÊÉÖÂÜµ‰∏ãÔºåÊÄª‰ª∑ÂÄºÊúÄÂ§ßÊòØ‰ªÄ‰πàÔºü Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ãÔºödp[i][j] = Math.max(dp[i-1][j], dp[i-1][j -v[i]] + w[i]) Max = dp[n][V] ‰ºòÂåñ dp[i][j] Âè™Ë∑ü ‰∏ä‰∏ÄÂ±ÇÁöÑÂ§ñÂæ™ÁéØ ÊúâÂÖ≥ÔºåÊâÄ‰ª•Ê†πÊú¨Ê≤°ÊúâÂøÖË¶Å‰ΩøÁî®‰∫åÁª¥Êï∞ÁªÑÔºåÂè™ÈúÄË¶Å‰ΩøÁî®‰∏ÄÁª¥Êï∞ÁªÑÂç≥ÂèØÔºåÊ≥®ÊÑèÔºå‰ΩøÁî®‰∏ÄÁª¥Êï∞ÁªÑÁöÑÊó∂ÂÄôÔºåÂÜÖÂ±ÇÂæ™ÁéØÈúÄË¶Å‰ªéÂêéÂêëÂâçÈÅçÂéÜÔºõ Â∞Ü dp[0][j] ÂÖ®ÈÉ®ÂàùÂßãÂåñ‰∏∫ 0 ÔºåÂàô dp[i][j] Â∞±‰ª£Ë°®Ââç i ‰∏™Áâ©ÂìÅÔºåÊÄª‰ΩìÁßØÂ∞è‰∫éÁ≠â‰∫é j ÁöÑÊúÄÂ§ßÊÄª‰ª∑ÂÄºÔºåÊïÖ‰∏äÊñáÁöÑMax = dp[V]Ôºå‰ª£Ë°®ÊÄª‰ΩìÁßØÂ∞è‰∫éÁ≠â‰∫é V ÁöÑÊúÄÂ§ßÊÄª‰ª∑ÂÄºÔºõ Â¶ÇÊûúË¶ÅÊ±ÇÁöÑÊÄª‰ª∑ÂÄºÁöÑÂâçÊèêÊòØËÉåÂåÖÂÆπÈáèÊÅ∞Â•ΩÊòØ VÔºåÂàô Âè™ÈúÄË¶ÅÂ∞ÜÂàùÂßãÂåñÁöÑÂÄºÊîπ‰∏∫ dp[0][0] = 0 Ôºådp[0][j] = - INF Âç≥ÂèØ„ÄÇ ÊúÄÁªàÊ®°Êùø 1234567int[] dp = new int[V+1];for(int i = 1;i &lt;= n;i++)&#123; for(int j = V;j &gt;= v[i];j--)&#123; dp[j] = Math.max(dp[j],dp[j - v[i]] + w[i]); &#125;&#125;return dp[V]; ‚Äã ‰æãÈ¢ò leetcodeÁ¨¨416È¢òÔºöÂàÜÂâ≤Á≠âÂíåÂ≠êÈõÜ leetcodeÁ¨¨494È¢ò ÁõÆÊ†áÂíå 416 È¢ò‰ª£Á†Å 12345678910111213141516171819public class Solution &#123; public boolean canPartition(int[] nums) &#123; int sum = 0; for(int i = 0;i &lt; nums.length;i++)&#123; sum = sum + nums[i]; &#125; if(sum % 2 != 0 ) return false; int target = sum / 2; boolean[] dp = new boolean[target+1]; dp[0] = true; for(int i = 1;i &lt;= nums.length;i++)&#123; for(int j = target;j &gt;= nums[i-1];j--)&#123; if(dp[target]) return true; dp[j] = dp[j] || dp[j-nums[i-1]]; &#125; &#125; return false; &#125;&#125; 494 È¢ò‰ª£Á†Å 12345678910111213141516171819202122232425public class Solution &#123; public int findTargetSumWays(int[] nums, int S) &#123; // Ê≠£Êï∞ÈõÜÂêà PÔºåË¥üÊï∞ÈõÜÂêà T // P - T = targetÔºå P + T = sum // P = (sum + target) / 2 // Âç≥È¢òÁõÆÂ∞±ÊòØÊâæ Â≠êÈõÜÂíåÁöÑÊñπÊ≥ïÊï∞ // ÂÖ∏ÂûãÁöÑ01ËÉåÂåÖÈóÆÈ¢òÊ±ÇËß£ÊñπÊ°àÊï∞ÔºåÂè™ÈúÄË¶ÅÊääÂàùÂßãÂåñÁöÑÂÄºÊîπÂä®‰∏Ä‰∏ãÔºåËøòË¶ÅÊääÁä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã‰∏≠ÁöÑ max ---&gt; sum int count = 0; for(int i = 0;i &lt; nums.length;i++)&#123; count = count + nums[i]; &#125; if(count &lt; S) return 0; if((S + count) % 2 != 0) return 0; int P = (S + count)/2; int[] dp = new int[P+1]; dp[0] = 1; // ËøôÈáåÊòØÁ¨¨‰∏Ä‰∏™ÊîπÂä®ÔºåÂõ†‰∏∫‰æãÂ¶Ç‰∫åÁª¥Êï∞ÁªÑ‰∏≠ÁöÑdp[1][1] = dp[0][0] + dp[0][1],dp[0][1] = 0 //Ê≠§Êó∂Ë¶Å‰ΩøÂæódp[1][1] = 1,Âàôdp[0][0] = 1,Ëøô‰πüÁ¨¶ÂêàÂ∏∏ÁêÜÔºåÂç≥0‰∏™Êï∞ËÉΩÊâæÂà∞Âíå‰∏∫0ÁöÑÊñπÊ°à‰∏∫‰∏ÄÁßç for(int i = 1;i &lt;= nums.length;i++)&#123; for(int j = P;j &gt;= nums[i-1];j--)&#123; dp[j] = dp[j] + dp[j - nums[i-1]]; &#125; &#125; return dp[P]; &#125;&#125; ÂÆåÂÖ®ËÉåÂåÖÁõ∏ÊØî 01 ËÉåÂåÖÈóÆÈ¢òÊù•ËØ¥ÔºåËøôÈáåÁöÑ‰∏Ä‰ª∂Áâ©ÂìÅÂèØ‰ª•ÈÄâ‰∏çÊ≠¢‰∏ÄÊ¨° ÊâÄ‰ª•ÔºåËøôÈáåÁöÑÂÅöÊ≥ïË∑ü 01 ËÉåÂåÖÂè™Êúâ‰∏Ä‰∏™‰∏çÂêåÔºå01ËÉåÂåÖÁöÑ‰∏ÄÁª¥Êï∞ÁªÑÁöÑÊñπÊ≥ï‰∏≠ÁöÑÂÜÖÂ±ÇÂæ™ÁéØÊòØ‰ªéÂêéÂêëÂâçÈÅçÂéÜÔºåÂéüÂõ†ÊòØÂÖ∂Âú®Âæ™ÁéØÁ¨¨ i ‰∏™Áâ©ÂìÅÊó∂Ë¶ÅÁî®Âà∞Á¨¨ i-1‰∏™Áâ©ÂìÅÁöÑÂØπÂ∫îÁöÑÂÄºÔºå‰∏îË¶ÅÁî®Âà∞ÁöÑÂÄºÈÉΩÊ≤°ÊúâË¢´Êú¨Ê¨°Âæ™ÁéØÊõ¥Êñ∞ËøáÔºåËÄåËøôÈáåÊÅ∞ÊÅ∞Áõ∏ÂèçÔºåÂõ†‰∏∫‰∏ÄÊ¨°Áâ©ÂìÅÂèØ‰ª•Áî®Â§öÊ¨°ÔºåÊâÄ‰ª•ÂÆåÂÖ®ËÉåÂåÖÈóÆÈ¢òÂÖÅËÆ∏Âú®Âæ™ÁéØÁ¨¨ i ‰∏™Áâ©ÂìÅÊó∂ÊèêÂâçÊõ¥Êñ∞Ë¶ÅÁî®Âà∞ÁöÑÂÄºÔºåÂÖ∑‰ΩìÀôËØÅÊòéÂèØ‰ª•‰ΩøÁî® Êï∞Â≠¶ÂΩíÁ∫≥Ê≥ï„ÄÇ Ê®°Êùøf[j] Ë°®Á§∫ ÊÄª‰ΩìÁßØÊòØ j ÁöÑÊÉÖÂÜµ‰∏ãÔºåÊúÄÂ§ß‰ª∑ÂÄºÊòØ‰ªÄ‰πà 12345678int[] dp = new int[V+1];// Ê≥®ÊÑèÂÜÖÂ±ÇÂæ™ÁéØÊòØ‰ªéÂâçÂæÄÂêéfor(int i = 0;i &lt;= n;i++)&#123; for(int j = v[i];j &lt;= V;j--)&#123; dp[j] = Math.max(dp[j],dp[j - v[i]] + w[i]); &#125;&#125;return dp[V]; Â§öÈáçËÉåÂåÖÈóÆÈ¢ò IÁõ∏ÊØî ÂÆåÂÖ®ËÉåÂåÖÈóÆÈ¢ò Áõ∏ÊØîÔºåÂ∞±ÊòØÊØè‰∏™Áâ©ÂìÅÂ§ö‰∫Ü‰∏Ä‰∏™Êï∞ÈáèÁöÑÈôêÂà∂ÔºåÁ±ª‰ºº‰∫é01ËÉåÂåÖÔºåÂè™‰∏çËøáÈÇ£ÈáåÁöÑÁâ©ÂìÅÁöÑÊï∞Èáè‰∏∫1ÔºåËøôÈáåÁöÑÊï∞ÈáèÊòØ s„ÄÇ Ê®°Êùø123456789101112// ÂàùÂßãÂåñÔºåf[i] = 0,i =0...nint[] dp = new int[V+1];for(int i = 1;i &lt;= n;i++)&#123; for(int j = V;j &gt;= 0;j--)&#123; // Âíå01ËÉåÂåÖÂîØ‰∏ÄÁöÑÂå∫Âà´ for(int k = 1;k &lt;= s &amp;&amp; j &gt;= k * v[i];k++)&#123; dp[j] = Math.max(dp[j],dp[j - v[i]*k] + w[i]*k); &#125; &#125;&#125;return dp[V]; Â§öÈáçËÉåÂåÖÈóÆÈ¢ò IIÂÖ∂ÂÆûÂ∞±ÊòØÂØπ‰∏äÈù¢Ëøô‰∏™Ê®°ÊùøÁöÑ‰ºòÂåñÔºåÊòØÂØπÂ§öÈáçËÉåÂåÖÁöÑ‰∫åËøõÂà∂‰ºòÂåñÊñπÊ≥ï „ÄÇÊúÄÂÜÖÂ±ÇÂæ™ÁéØÁöÑÊÑèÊÄùÂÖ∂ÂÆûÂ∞±ÊòØÊääËÉåÂåÖÁöÑÊØè‰∏ÄÊ¨°ÈáçÂ§çÈÉΩÂΩìÊàê‰∏ÄÊ¨°Êñ∞ÁöÑÁâ©ÂìÅÔºåÁ±ª‰ºº‰∫éÊâìÂåÖÁöÑÂΩ¢ÂºèÔºåÊØîÂ¶ÇÁ¨¨‰∏Ä‰∏™Áâ©ÂìÅ‰ΩìÁßØÊòØ vÔºå‰ª∑ÂÄº‰∏∫ wÔºåÁ¨¨‰∫å‰∏™Áâ©ÂìÅÂ∞±ÊòØ 2vÔºå‰ª∑ÂÄº‰∏∫ 2wÔºå‰ª•Ê≠§Á±ªÊé®Ôºå‰ΩÜÊòØËøôÊ†∑ÂàÜËß£ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶Â§™È´ò‰∫ÜÔºåÂèØ‰ª•ÈÄöËøá‰∫åËøõÂà∂‰ºòÂåñÊñπÊ≥ïÔºå‰∏∫‰ªÄ‰πàÂë¢ÔºüÂõ†‰∏∫‰ªñ‰ª¨‰πãÈó¥ÊòØ‰∫íÊñ•ÁöÑÔºåÊØèÊ¨°ÈÉΩ‰ºöÂè™ÈÄâÂá∫‰∏Ä‰∏™Êù•ÔºåÊòØÂêéÈù¢ÁöÑÂàÜÁªÑËÉåÂåÖÁöÑÁâπÊÆäÊÉÖÂÜµÔºåÊâÄ‰ª•Êàë‰ª¨Âè™ÈúÄË¶ÅÊâæÂà∞ËÉΩË°®Á§∫ÊâÄÊúâÊñπÊ°àÁöÑÁâ©ÂìÅÂ∞±Ë°åÔºåÊó†ÈúÄÂÖ®ÈÉ®ÁΩóÂàóÈÉΩÂΩìÊàê01ËÉåÂåÖÁöÑÁâ©ÂìÅ„ÄÇÊØîÂ¶ÇÁé∞Âú®ÁöÑ s ‰∏∫7ÔºåÊåâÁÖß‰∏äÈù¢ÁöÑÊñπÊ≥ïÔºåÊàë‰ª¨ÈúÄË¶ÅÊØîËæÉ0„ÄÅ1„ÄÅ2„ÄÅ3„ÄÅ4„ÄÅ5„ÄÅ6„ÄÅ7Ëøô8‰∏™ÊñπÊ°àÁöÑÊúÄÂ§ßÂÄºÔºå‰ΩÜÊòØÂÖ∂ÂÆûÊàë‰ª¨ÂèØ‰ª•Áî®‰∏â‰ΩçÊï∞Â∞±Ë°®Á§∫0„ÄÅ1„ÄÅ2„ÄÅ3„ÄÅ4„ÄÅ5„ÄÅ6„ÄÅ7ÔºåÂõ†‰∏∫Êàë‰ª¨Âè™ÈúÄË¶Å‰ªéËøô8‰∏™ÊñπÊ°à‰∏≠ÈÄâÂèñ‰∏Ä‰∏™Âç≥ÂèØÔºåÊâÄ‰ª•‰∏â‰ΩçÊï∞Â∞±ÂèØ‰ª•Ë°®Á§∫ÊâÄÊúâÔºåÁÑ∂Âêé‰ªé‰∏≠ÈÄâÂèñËá™Â∑±Á¨¶ÂêàË¶ÅÊ±ÇÁöÑÂ∞±Ë°åÔºåÂú®ËøôÈáåÊàë‰ª¨ÂèØ‰ª•ÈÄâÊã©1„ÄÅ2„ÄÅ4ÔºåÂ∞±ËÉΩË°®Á§∫ 0 ~ 7 ÊâÄÊúâÂÖÉÁ¥†ÔºåÂ¶ÇÊûú s ‰∏∫ 10ÔºåÈÇ£‰πàÊàë‰ª¨ÂèØ‰ª•ÈÄâÂèñ 1„ÄÅ2„ÄÅ4„ÄÅ3 Ôºå3ÊòØÂ¶Ç‰ΩïÊù•ÁöÑÂë¢ÔºåÊòØ 10 - Ôºà2^ 3 -1Ôºâ ÂæóÊù•ÁöÑÔºåÊïÖÂ∞±Â∞Ü Á∫øÊÄßÂ§çÊùÇÂ∫¶ Âèò‰∏∫ log2 Â§çÊùÇÂ∫¶‰∫Ü„ÄÇ Ê®°Êùø123456789101112int[] dp = new int[V+1];for(int i = 1;i &lt;= n;i++)&#123; for(int j = V;j &gt;= 0;j--)&#123; for(int k = 1;k &lt;= s;k = k * 2)&#123; s = s - k; // ÊääÊØè‰∏™ k ÂØπÂ∫îÁöÑÈÉΩÂèòÊàê ‰∏ÄÁßçÁâ©ÂìÅ if(j &gt;= k * v[i]) dp[j] = Math.max(dp[j],dp[j - k * v[i]] + k * w[i]); &#125; //‰∏çÁ≠â‰∫é0ÔºåËØ¥ÊòéÊúâ‰ΩôÊï∞ if(s != 0 &amp;&amp; j &gt;= s * v[i]) dp[j] = Math.max(dp[j],dp[j - s * v[i]] + s * w[i]); &#125;&#125; Â§öÈáçËÉåÂåÖÈóÆÈ¢ò IIIËøôÊòØÂØπÂ§öÈáçËÉåÂåÖÁöÑÂÜçÊ¨°‰ºòÂåñÔºå‰∏äÊñáÂ∑≤ÁªèÂ∞ÜÊúÄÂÜÖÂ±ÇÂæ™ÁéØ‰ªé O(n) Èôç‰∏∫‰∫Ü O(logn)ÔºåËøôÈáåÂèØ‰ª•ËøêÁî® ÂçïË∞ÉÈòüÂàó Â∞ÜÊúÄÂÜÖÂ±ÇÂæ™ÁéØÁöÑ O(n) ÈôçÊàê O(1)„ÄÇ ÂÆåÂÖ®ËÉåÂåÖÈóÆÈ¢òËΩ¨ÁßªÂõæÂíåÂ§öÈáçËÉåÂåÖ‰∏ÄÊ†∑„ÄÇ‰∏çËøáÊ≤°Êúâ‰∫ÜÁâ©ÂìÅ‰∏™Êï∞ÈôêÂà∂ÔºåÊâÄ‰ª•‰∏çÊòØÊªëÂä®Á™óÂè£ÊÉÖÂÜµÔºå‰∏çÁî®ÂçïË∞ÉÈòüÂàó„ÄÇÂè™‰øùÂ≠ò‰∏Ä‰∏™ÊúÄÂ§ßÂÄºÂ∞±ÂèØ‰ª•„ÄÇÊâÄ‰ª•ÂÆåÂÖ®ËÉåÂåÖÈóÆÈ¢òÂèØ‰ª•Áõ¥Êé•‰ªéÂâçÂêëÂêéÈÅçÂéÜÔºåÂõ†‰∏∫ÂÖ∂Âè™ÈúÄË¶Å‰øùÂ≠ò‰∏Ä‰∏™ÊúÄÂ§ßÂÄº„ÄÇÊâÄ‰ª•ËøôÈáåÂºïÂÖ•‰∫ÜÂçïË∞ÉÈòüÂàó‰πãÂêéÔºå‰πüÁª¥Êä§‰∫ÜÁõ∏Âêå‰ΩôÊï∞ÁöÑÊúÄÂ§ßÂÄºÔºåÊïÖ j ‰πüÂèØ‰ª•‰ªéÂâçÂêëÂêéÈÅçÂéÜ„ÄÇ ÊÄùË∑ØÔºöhttps://blog.csdn.net/qq_40679299/article/details/81978770 ‰∏∫‰ΩïÂºïÂÖ•ÂçïË∞ÉÈòüÂàóÂàÜÊûêÔºöhttps://www.cnblogs.com/DeepJay/p/12025225.html ‰ª£Á†ÅÂíåÊÄùË∑ØÁ≤æÁÆÄÁâàÔºöhttps://www.acwing.com/solution/acwing/content/6500/Ôºà‰∏ªÊé®Ëøô‰∏™Ôºâ Ê®°Êùø1234567891011121314151617181920212223242526272829303132333435363738394041import java.util.Arrays;import java.util.LinkedList;import java.util.Scanner;public class Main &#123; public static void main(String[] args) &#123; Scanner scan = new Scanner(System.in); // Ë°®Á§∫Áâ©ÂìÅÁßçÁ±ª int n = scan.nextInt(); // Ë°®Á§∫ ÊúÄÂ§ßÁöÑÂÆπÁßØ int V = scan.nextInt(); int[] dp = new int[V + 1]; for (int i = 0; i &lt; n; i++) &#123; int v = scan.nextInt(); int w = scan.nextInt(); int s = scan.nextInt(); int[] pre = Arrays.copyOf(dp,dp.length); // ÈÅçÂéÜÊâÄÊúâ‰ΩôÊï∞ for (int j = 0; j &lt; v; j++) &#123; // ÊØè‰∏™‰ΩôÊï∞ÂØπÂ∫î‰∏Ä‰∏™ÂèåÁ´ØÈòüÂàóÔºåÂÆûÁé∞ÂçïË∞ÉÈòüÂàó LinkedList&lt;Integer&gt; queue = new LinkedList(); for (int k = j; k &lt;= V; k = k + v) &#123; // 1. ÂéªÈô§ÈòüÂ∞æ‰∏çÁ¨¶ÂêàË¶ÅÊ±ÇÁöÑÔºå‰øùËØÅ‰ªéÂ§ßÂà∞Â∞èÔºåÂ¶ÇÊûúÂâçÈù¢Êï∞Â∞èÂàôÈúÄË¶Å‰æùÊ¨°ÂºπÂá∫ while (!queue.isEmpty() &amp;&amp; pre[queue.peekLast()] - (queue.peekLast() - j) / v * w &lt;= pre[k] - (k - j) / v * w) &#123; queue.pollLast(); &#125; // 2.Âà§Êñ≠ÂΩìÂâçÈòüÂàó‰∏≠ÈòüÈ¶ñÁöÑÂÄºÊòØÂê¶ÊúâÊïà if (!queue.isEmpty() &amp;&amp; queue.peek() &lt; k - s * v) &#123; queue.poll(); &#125; // 3.Ê∑ªÂä†ÂΩìÂâçÂÄºÂØπÂ∫îÁöÑÊï∞ÁªÑ‰∏ãÊ†á queue.addLast(k); // 4.ÊãøÂà∞ÈòüÈ¶ñÊúÄÂ§ßÂÄº dp[k] = Math.max(dp[k], pre[queue.peek()] + (k - queue.peek()) / v * w); &#125; &#125; &#125; System.out.println(dp[V]); &#125;&#125; ‰æãÈ¢òLeetCode Á¨¨ 239 È¢òÔºöÊªëÂä®Á™óÂè£ÊúÄÂ§ßÂÄº ËØ•È¢ò‰πüÊòØÂêåÊ†∑ÈááÁî®‰∫ÜÂçïË∞ÉÈòüÂàóÁöÑÊñπÂºèÔºåÂÆòÊñπÈ¢òËß£ÁöÑËß£Ê≥ï‰∫å Â∞±ÊòØÈááÁî®ÂèåÁ´ØÈòüÂàóÂÆûÁé∞ÂçïË∞ÉÈòüÂàó„ÄÇ 1234567891011121314151617181920212223242526272829class Solution &#123; public int[] maxSlidingWindow(int[] nums, int k) &#123; if(nums == null || nums.length &lt; 2) return nums; // ÂèåÂêëÈòüÂàó ‰øùÂ≠òÂΩìÂâçÁ™óÂè£ÊúÄÂ§ßÂÄºÁöÑÊï∞ÁªÑ‰ΩçÁΩÆ ‰øùËØÅÈòüÂàó‰∏≠Êï∞ÁªÑ‰ΩçÁΩÆÁöÑÊï∞ÂÄºÊåâ‰ªéÂ§ßÂà∞Â∞èÊéíÂ∫è LinkedList&lt;Integer&gt; queue = new LinkedList(); // ÁªìÊûúÊï∞ÁªÑ int[] result = new int[nums.length-k+1]; // ÈÅçÂéÜnumsÊï∞ÁªÑ for(int i = 0;i &lt; nums.length;i++)&#123; // ‰øùËØÅ‰ªéÂ§ßÂà∞Â∞è Â¶ÇÊûúÂâçÈù¢Êï∞Â∞èÂàôÈúÄË¶Å‰æùÊ¨°ÂºπÂá∫ÔºåÁõ¥Ëá≥Êª°Ë∂≥Ë¶ÅÊ±Ç while(!queue.isEmpty() &amp;&amp; nums[queue.peekLast()] &lt;= nums[i])&#123; queue.pollLast(); &#125; // 11 10 9 8 7 6 5 // Âà§Êñ≠ÂΩìÂâçÈòüÂàó‰∏≠ÈòüÈ¶ñÁöÑÂÄºÊòØÂê¶ÊúâÊïà if(!queue.isEmpty() &amp;&amp; queue.peek() &lt;= i-k)&#123; queue.poll(); &#125; // Ê∑ªÂä†ÂΩìÂâçÂÄºÂØπÂ∫îÁöÑÊï∞ÁªÑ‰∏ãÊ†á queue.addLast(i); // ÂΩìÁ™óÂè£ÈïøÂ∫¶Á¨¨‰∏ÄÊ¨°ËææÂà∞kÂêéÔºåÂºÄÂßã‰øùÂ≠òÂΩìÂâçÁ™óÂè£‰∏≠ÊúÄÂ§ßÂÄº // ‰ª•ÂêéÊØèËµ∞‰∏ÄÊ≠•ÔºåÂ∞±‰ºö‰øùÂ≠ò‰∏Ä‰∏™ÊúÄÂ§ßÂÄº if(i+1 &gt;= k)&#123; result[i+1-k] = nums[queue.peek()]; &#125; &#125; return result; &#125;&#125; ÊïÖÊÄªÁªì‰∏Ä‰∏ãÔºåÂçïË∞ÉÈòüÂàóÁöÑÊ®°Êùø‰∏∫Ôºö 1234// 1.Â≠òÂÖ•ÂèåÁ´ØÈòüÂàóÁöÑÊòØÂÄºÁöÑÁ¥¢ÂºïÔºåÁ¨¨‰∏ÄÊ≠•ÊòØÂÖàÊääÈòüÂ∞æ‰∏çÁ¨¶ÂêàË¶ÅÊ±ÇÁöÑÂÖ®ÈÉ®ÂºπÊ†à// 2.ÁÑ∂ÂêéÂà§Êñ≠ÈòüÈ¶ñÊòØ‰∏çÊòØÊúâ‰∏çÁ¨¶ÂêàË¶ÅÊ±ÇÁöÑÔºåÂç≥‰∏çÂú®Á™óÂè£‰πã‰∏≠// 3.Â∞ÜËØ•ÂÄºÂä†ÂÖ•Âà∞ÈòüÂàó‰∏≠// 4.Ëé∑ÂèñÂà∞È¢òÁõÆÈúÄË¶ÅÁöÑ‰∏úË•øÔºåÊØîÂ¶Ç‰∏äÊñáË¶ÅÂèñÊØè‰∏™Á™óÂè£ÁöÑÊúÄÂ§ßÂÄºÔºåÂàôÂ∞ÜÊØè‰∏™Á™óÂè£ÁöÑÊúÄÂ§ßÂÄºÂ≠òÂÖ•Êï∞ÁªÑÂç≥ÂèØ Ê∑∑ÂêàËÉåÂåÖÈóÆÈ¢òÊ∑∑ÂêàËÉåÂåÖÔºåÂ∞±ÊòØ01ËÉåÂåÖÔºåÂÆåÂÖ®ËÉåÂåÖÔºåÂ§öÈáçËÉåÂåÖÁªìÂêàÂú®‰∏ÄËµ∑ÔºåÊñπÊ≥ïÂ∞±ÊòØÂàÜÁ±ªÂà§Êñ≠ÔºåÂàÜÁ±ªÂ§ÑÁêÜÂç≥ÂèØÔºåÈùûÂ∏∏ÁÆÄÂçïÔºåÂ∞±‰∏çÂÅöËøáÂ§öËß£Èáä‰∫Ü„ÄÇ ‰∫åÁª¥Ë¥πÁî®ÁöÑËÉåÂåÖÈóÆÈ¢òÂÖ∂ÂÆûË∑ü‰∏ÄÁª¥Ë¥πÁî®ÁöÑËÉåÂåÖÈóÆÈ¢òÂ¶ÇÂá∫‰∏ÄËæôÔºåÂ∞±ÊòØÂ§ö‰∫Ü‰∏ÄÂ±ÇÂæ™ÁéØÔºådp Áî±‰∏ÄÁª¥ÂèòÊàê‰∫Ü‰∫åÁª¥ÔºåÂÖ∂‰ªñÁöÑË∑ü‰∏ÄÁª¥ÁöÑÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ ÂàÜÁªÑËÉåÂåÖÈóÆÈ¢òÂÖ∂ÂÆûÔºåÂàÜÁªÑËÉåÂåÖÂâçÈù¢Â∑≤ÁªèËÆ≤Ëøá‰∫ÜÔºåÂ∞±ÊòØÂ§öÈáçËÉåÂåÖÁöÑ‰∏ÄËà¨ÂåñÔºåÂ∞±ÊòØÂõ†‰∏∫Â§öÈáçËÉåÂåÖÁöÑÁâπÊÆäÔºåÊâÄ‰ª•Êâç‰ºöÊúâ‰∏§‰∏™‰ºòÂåñÁöÑÊñπÊ≥ï‚Äî‚Äî-‰∫åËøõÂà∂‰ºòÂåñ &amp;&amp; ÂçïË∞ÉÈòüÂàó‰ºòÂåñÔºåÊâÄ‰ª•ÂØπ‰∫éÂàÜÁªÑËÉåÂåÖÈóÆÈ¢òÔºåÂ∞±Âè™ËÉΩÈááÁî® Â§öÈáçËÉåÂåÖÈóÆÈ¢ò I ÁöÑÊñπÊ≥ïÔºå‰∏âÂ±ÇÂæ™ÁéØ„ÄÇ ËÉåÂåÖÈóÆÈ¢òÊ±ÇÊñπÊ°àÊï∞Ê±ÇÊñπÊ°àÊï∞ÁöÑÂÖ≥ÈîÆÂ∞±Âú®‰∫éÁ°ÆÂÆöÔºöÂú®ÊØè‰∏ÄÊ¨°Âæ™ÁéØ‰∏≠ÔºåÊòØ‰∏çÊòØÈÄâ‰∫ÜËØ•Êï∞„ÄÇÊ±ÇÊúÄ‰ºòÊñπÊ°àÁöÑÊñπÊ°àÊï∞ÊòØÈÄöËøáÂà§Êñ≠ËØ•‰ΩìÁßØÂØπÂ∫îÁöÑ‰ª∑ÂÄºÁöÑÊúÄÂ§ßÂÄºÊúâÊ≤°ÊúâÊîπÂèòÔºå‰ªéËÄåÂà§Êñ≠ÊòØÂê¶ÈÄâ‰∫ÜËØ•Êï∞ÔºåÈÄâ‰∫ÜÁöÑËØùÂ∞±Êää‰ª•ÂâçÁöÑÊñπÊ°àÊï∞ÊõøÊç¢ÊàñËÄÖÁ¥ØÂä†Âç≥ÂèØÔºõÊ±ÇÂõ∫ÂÆö‰ΩìÁßØÁöÑÊñπÊ°àÊï∞ÔºåÂ∞±ÊòØÁõ¥Êé•dp[j] = dp[j] + dp[j - v[i]]Ôºå‰ΩìÁßØ‰∏∫ j ÁöÑÂ∞±ÊòØÁ≠â‰∫éÈÄâ‰∫ÜÂíåÊ≤°ÈÄâÁöÑÊÄªÊñπÊ°àÊï∞ÔºàËøô‰∏™ÂàùÂßãÂåñÊòØÂÖ≥ÈîÆÔºâ„ÄÇ Ê±ÇÊúÄ‰ºòÊñπÊ°àÁöÑÊñπÊ°àÊï∞ËøôÈáåÂè™Êúâ‰∏Ä‰∏™ÊØîËæÉÂ§ßÁöÑÊîπÂä®ÔºåÈÇ£Â∞±ÊòØÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™ cnt Êï∞ÁªÑÊù•ÁªüËÆ°ÊñπÊ°àÊï∞„ÄÇ ËøôÈáåÂàùÂßãÂåñÁöÑÊó∂ÂÄôÔºåÊúâ‰∏§‰∏™ÊñπÊ°àÔºå‰∏Ä‰∏™ÊòØÔºådp[0] = 0Ôºådp[i] = 0; Âè¶Â§ñ‰∏Ä‰∏™ÊòØ dp[0] = 0Ôºådp[i] = -INF„ÄÇ ÊñπÊ≥ï‰∏ÄÂíåÊñπÊ≥ï‰∫åÂå∫Âà´‰∏çÂ§ßÔºåË∑ü 01ËÉåÂåÖ‰∏ÄÊ†∑ÔºåÁî±‰∫éÂàùÂßãÂåñÁöÑ‰∏çÂêåÔºåÂØºËá¥ÊúÄÂêéÁöÑÁªìÊûúÔºå‰∏Ä‰∏™Áõ¥Êé•ÂèñÂÆπÈáèÊúÄÂ§ßÂÄºÂç≥ÂèØÔºå‰∏Ä‰∏™ÈúÄË¶ÅÈÅçÂéÜÔºåËøôÈáåËøòÊòØÊé®ËçêÊñπÊ°à‰∏ÄÔºÅ ÊñπÊ≥ï‰∏Ä ËæìÂÖ• 1234567ÊÄªÁâ©ÂìÅÊï∞Ôºö4 ÊúÄÂ§ßÂÆπÁßØÔºö5Áâ©ÂìÅ‰ΩìÁßØ ‰ª∑ÂÄº1 22 43 44 6 Ëã•ÂàùÂßãÂåñÁöÑÂÄºÈÉΩ‰∏∫ 0 0 1 2 3 4 5 0 0 0 0 0 0 0 1 0 2 2 2 2 2 2 0 2 2 6 6 6 3 0 2 2 6 6 8 4 0 2 2 6 6 8 Ê®°Êùø ÂÆö‰πâ‰∏§‰∏™Êï∞ÁªÑÔºådp[j] Áî®Êù•Â≠òÂÇ®ËÉåÂåÖÂÆπÁßØÊòØ j Êó∂ÁöÑÊúÄ‰Ω≥ÊñπÊ°àÁöÑÊÄª‰ª∑ÂÄºÔºåcnt[j] Áî®Êù•Â≠òÂÇ®ÂÆπÁßØ‰∏∫ j Êó∂ÊÄª‰ª∑ÂÄº‰∏∫ÊúÄ‰Ω≥ÁöÑÊñπÊ°àÊï∞Ôºõ ÂÖàÂàùÂßãÂåñ dp[0] = 0Ôºådp[j] = -INFÔºåÂæàÂÆπÊòìÁêÜËß£ÔºåÂÆπÁßØ‰∏∫ 0ÔºåËá™ÁÑ∂‰ª∑ÂÄºÂ∞±‰∏∫ 0 ‰∫ÜÔºåËÄåË¶Å‰ΩøÂæóÂÆπÁßØ‰∏∫ 1„ÄÅ2‚Ä¶‰∏îÊ≤°ÊúâÊï∞ÔºåÂàôËá™ÁÑ∂‰ª∑ÂÄºÂ∞±‰∏çÂ≠òÂú®‰∫ÜÔºåËÆ∞‰∏∫ -INFÔºåÂÜçÂàùÂßãÂåñÊâÄÊúâÁöÑ cnt[j] = 1ÔºåÂõ†‰∏∫ËÉåÂåÖÈáå‰ªÄ‰πàÈÉΩ‰∏çË£ÖÂØπ‰ªª‰ΩïÂÆπÁßØÊù•ËØ¥ÈÉΩÊòØ‰∏ÄÁßçÊñπÊ°àÔºåÂú®Ê≤°ÊúâÊï∞ÁöÑÊÉÖÂÜµ‰∏ãËá™ÁÑ∂Â∞±ÊòØÊúÄÂ•ΩÁöÑÊÉÖÂÜµ‰∫ÜÔºõ Âú®ÊØèÊ¨°Âæ™ÁéØÊñ∞Áâ©ÂìÅÊó∂ÔºåÂÖàÊ±ÇÂæóË£ÖÊñ∞Áâ©ÂìÅÁöÑÊÄª‰ª∑ÂÄºÔºåÁÑ∂Âêé‰∏é‰∏çË£ÖÊñ∞Áâ©ÂìÅÂØπÊØîÔºåÂ¶ÇÊûúË£Ö‰∫ÜÊñ∞Áâ©ÂìÅÁöÑ‰ª∑ÂÄºÊõ¥Â§ßÔºåÈÇ£‰πàÂ∞±ÈúÄË¶ÅÁî® dp[j - v[i]] + w Êõ¥Êñ∞ dp[j]ÔºåÂêåÊó∂Áî® cnt[j - v[i]] Êù•Êõ¥Êñ∞ cnt[j]Ôºõ Â¶ÇÊûúÊÄª‰ª∑ÂÄºÁõ∏Á≠âÔºåÈÇ£‰πà cnt[j] = cnt[j] + cnt[j-v[i]]Ôºõ ÂΩìÁÑ∂Â¶ÇÊûúË£Ö‰∫ÜÊñ∞Áâ©ÂìÅËøò‰∏çÂ¶Ç‰∏çË£ÖÂë¢ÔºåÈÇ£Â∞±Âï•‰πü‰∏çÁî®ÂÅö‰∫Ü„ÄÇ 1234567891011121314151617181920212223242526272829303132import java.util.Scanner;public class Test &#123; public static void main(String[] args) &#123; Scanner scan = new Scanner(System.in); // Ë°®Á§∫Áâ©ÂìÅÁßçÁ±ª int n = scan.nextInt(); // Ë°®Á§∫ ÊúÄÂ§ßÁöÑÂÆπÁßØ int V = scan.nextInt(); int[] dp = new int[V + 1]; int[] cnt = new int[V + 1]; for (int j = 0; j &lt;= V; j++) &#123; cnt[j] = 1; &#125; for (int i = 0; i &lt; n; i++) &#123; int v = scan.nextInt(); int w = scan.nextInt(); for (int j = V; j &gt;= v; j--) &#123; int value = dp[j - v] + w; if (value &gt; dp[j]) &#123; dp[j] = value; cnt[j] = cnt[j - v]; &#125; else if (value == dp[j]) &#123; cnt[j] = cnt[j] + cnt[j - v]; &#125; &#125; &#125; System.out.println(cnt[V]); &#125;&#125; ÂõûÁúãË°®Ê†º(Êã¨Âè∑ÂÜÖ‰∏∫ cnt ÁöÑÂÄº) 1234567ÊÄªÁâ©ÂìÅÊï∞Ôºö4 ÊúÄÂ§ßÂÆπÁßØÔºö5Áâ©ÂìÅ‰ΩìÁßØ ‰ª∑ÂÄº1 22 43 44 6 0 1 2 3 4 5 0 0(1) 0(1) 0(1) 0(1) 0(1) 0(1) 1 0(1) 2(1) 2(1) 2(1) 2(1) 2(1) 2 0(1) 2(1) 4(1) 6(1) 6(1) 6(1) 3 0(1) 2(1) 4(1) 6(1) 6(2) 8(1) 4 0(1) 2(1) 4(1) 6(1) 6(3) 8(2) ÂÜçÊù•‰∏Ä‰∏™Á§∫‰æã 1234567ÊÄªÁâ©ÂìÅÊï∞Ôºö4 ÊúÄÂ§ßÂÆπÁßØÔºö5Áâ©ÂìÅ‰ΩìÁßØ ‰ª∑ÂÄº2 42 43 44 6 0 1 2 3 4 5 0 0(1) 0(1) 0(1) 0(1) 0(1) 0(1) 1 0(1) 0(1) 4(1) 4(1) 4(1) 4(1) 2 0(1) 0(1) 4(2) 4(2) 8(1) 8(1) 3 0(1) 0(1) 4(2) 4(3) 8(1) 8(3) 4 0(1) 0(1) 4(2) 4(3) 8(1) 8(3) Â•óÁî®‰∏äËø∞Ê®°ÊùøÔºåÂÆûÁé∞ LeetCode 494È¢ò 1234567891011121314151617181920212223242526272829public class Solution &#123; public int findTargetSumWays(int[] nums, int S) &#123; int count = 0; for(int i = 0;i &lt; nums.length;i++)&#123; count = count + nums[i]; &#125; if(count &lt; S) return 0; if((S + count) % 2 != 0) return 0; int V = (S + count)/2; int[] dp = new int[V + 1]; int[] cnt = new int[V + 1]; for (int j = 0; j &lt;= V; j++) &#123; cnt[j] = 1; &#125; for (int i = 0; i &lt; nums.length; i++) &#123; int v = nums[i]; for (int j = V; j &gt;= v; j--) &#123; int value = dp[j - v] + v; if (value &gt; dp[j]) &#123; dp[j] = value; cnt[j] = cnt[j - v]; &#125; else if (value == dp[j]) &#123; cnt[j] = cnt[j] + cnt[j - v]; &#125; &#125; &#125; return cnt[V]; &#125;&#125; ÊñπÊ≥ï‰∫å Ëã•ÂàùÂßãÂåñÁöÑÂÄº‰∏çÈÉΩ‰∏∫ 0,Áî®‰∏äÈù¢ÁöÑÁ§∫‰æã 1234567ÊÄªÁâ©ÂìÅÊï∞Ôºö4 ÊúÄÂ§ßÂÆπÁßØÔºö5Áâ©ÂìÅ‰ΩìÁßØ ‰ª∑ÂÄº2 42 43 44 6 0 1 2 3 4 5 0 0(1) -INF(1) -INF(1) -INF(1) -INF(1) -INF(1) 1 0(1) -INF(1) 4(1) -INF(1) -INF(1) -INF(1) 2 0(1) -INF(1) 4(2) -INF(2) 8(1) -INF(1) 3 0(1) -INF(1) 4(2) 4(1) 8(1) 8(2) 4 0(1) -INF(1) 4(2) 4(1) 8(1) 8(2) Ê®°Êùø 1234567891011121314151617181920212223242526272829303132333435363738394041424344import java.util.Scanner;public class Test &#123; public static void main(String[] args) &#123; Scanner scan = new Scanner(System.in); int ma = (int) (Math.pow(10,9) + 7); // Ë°®Á§∫Áâ©ÂìÅÁßçÁ±ª int n = scan.nextInt(); // Ë°®Á§∫ ÊúÄÂ§ßÁöÑÂÆπÁßØ int V = scan.nextInt(); int[] dp = new int[V + 1]; int[] cnt = new int[V + 1]; for (int j = 0; j &lt;= V; j++) &#123; cnt[j] = 1; dp[j] = Integer.MIN_VALUE; &#125; dp[0] = 0; for (int i = 0; i &lt; n; i++) &#123; int v = scan.nextInt(); int w = scan.nextInt(); for (int j = V; j &gt;= v; j--) &#123; int value = dp[j - v] + w; if (value &gt; dp[j]) &#123; dp[j] = value; cnt[j] = cnt[j - v]; &#125; else if (value == dp[j]) &#123; cnt[j] = cnt[j] + cnt[j - v]; &#125; &#125; &#125; int max = Integer.MIN_VALUE; int count = 0; for(int i = 0;i &lt;= V;i++)&#123; max = Math.max(dp[i],max); &#125; for(int i = 0;i &lt;= V;i++)&#123; if(dp[i] == max)&#123; count+=cnt[i]; &#125; &#125; System.out.println(count); &#125;&#125; ÊÄùË∑Ø‰∏ÄÊ®°‰∏ÄÊ†∑‚Ä¶Â∞±ÊòØÂ§¥ÂíåÂ∞æÂ§çÊùÇ‰∫Ü‰∏Ä‰∏ãÔºåÊâÄ‰ª•ÊÑüËßâÊ≤°Âï•Â≠êÂøÖË¶Å‚Ä¶ Ê±ÇËÉåÂåÖË£ÖËá≥ÊåáÂÆöÂÆπÈáèÁöÑÊñπÊ°àÊï∞Ëøô‰∏™ÈùûÂ∏∏ÁÆÄÂçï‰∫ÜÔºåÂ∞±ÊòØ‰∏äÈù¢ÁöÑÁâπÊÆäÂåñ‰æãÂ≠êÔºå‰πüÂ∞±ÊòØÊää Âæ™ÁéØÂà∞ÁöÑËØ•Êï∞ÁöÑÂÆπÈáè ‰Ωú‰∏∫‰ª∑ÂÄºÔºåÁÑ∂ÂêéËÆ°ÁÆóÊåáÂÆö‰ª∑ÂÄºÁöÑÊñπÊ°àÊï∞ÔºåËøôÊòØ‰∏ÄËà¨ÂåñÁöÑÂÅöÊ≥ïÔºå‰ΩÜÊòØÊó¢ÁÑ∂Ë∞àÂà∞ÁâπÊÆäÂåñÔºå‰πüÂ∞±ÊòØÂÆπÈáèÂíå‰ª∑ÂÄºÁõ∏Á≠âÔºåÈÇ£Ëá™ÁÑ∂ÂèØ‰ª•ÈááÁî®Êõ¥ÁÆÄÂçïÁöÑÊñπÊ≥ïÂéªÂ§ÑÁêÜ‰∫Ü„ÄÇ ÂàùÂßãÂåñ dp[0] = 1Ôºå‰ª£Ë°® 0 ÂÆπÈáèÁöÑËÉåÂåÖÁöÑÊñπÊ°à‰∏∫1ÔºåÂÖ∂‰ªñÈÉΩ‰∏∫0Ôºõ dp[i][j] = dp[i-1][j] + dp[i-1][j-v[i]]ÔºåÂæàÂ•ΩÁêÜËß£‰∫ÜÔºåÂ∞±‰∏çÂÅöËß£Èáä‰∫Ü„ÄÇ Á§∫‰æãÂ∞±ÊòØ LeetCode 494 È¢ò„ÄÇ ËÉåÂåÖÈóÆÈ¢òÊ±ÇÊñπÊ°àË∑ØÂæÑÂ¶ÇÊûúÊ≤°ÊúâË¶ÅÊ±ÇÂæóÂà∞ ÊåâÂ≠óÂÖ∏È°∫Â∫èÊúÄÂ∞èÁöÑ ÊñπÊ°àË∑ØÂæÑÁöÑËØùÔºåÂ∞±ÂèØ‰ª•Áõ¥Êé•Êåâ01ËÉåÂåÖÁöÑÊñπÊ≥ïÂéªÂÅö(Áî±‰∫éË¶ÅËÆ∞ÂΩïÊñπÊ°àË∑ØÂæÑÔºåÊâÄ‰ª•‰∏çËÉΩ‰ΩøÁî®ÊªöÂä®Êï∞ÁªÑÔºåÈúÄË¶ÅÁî®Âà∞ÊØè‰∏ÄËΩÆÁöÑÊñπÊ°àÔºåÊâÄ‰ª•ÈúÄË¶ÅÊîπ‰∏∫‰∫åÁª¥Êï∞ÁªÑ)ÔºåÁÑ∂ÂêéÂú®ÈÅçÂéÜÁöÑÊó∂ÂÄôÔºåÂà§Êñ≠ f[i][j]ÊòØÂê¶Âíå f[i-1][j-v[i]] + w[i] Áõ∏Á≠âÔºåÂ¶ÇÊûúÁõ∏Á≠âËØ¥ÊòéÁî®Âà∞‰∫ÜËØ•‰∏™Áâ©ÂìÅÔºåÂä†ÂÖ•ÊñπÊ°àË∑ØÂæÑ‰∏≠Âç≥ÂèØ„ÄÇ Â¶ÇÊûúË¶ÅÊ±ÇÊòØÂæóÂà∞ÊúÄÂ∞èÁöÑ ÊñπÊ°àË∑ØÂæÑÁöÑËØùÔºåÂàôÈúÄË¶ÅÂ∞ÜÊñπÊ°à‰ªéÊú´Â∞æÈÅçÂéÜÂà∞ÂºÄÂßãÔºåÂæóÂà∞ÊúÄ‰Ω≥ÊñπÊ°àÂêéÔºåÂÜç‰ªéÂâçÂêëÂêéÂØªÊâæÊñπÊ°àË∑ØÂæÑ„ÄÇ Ê®°Êùø123456789101112131415int[][] dp = new int[n+1][V+1];for(int i = n;i &gt;= 1;i--)&#123; // ‰∫åÁª¥ÁöÑËØùÂÜÖÂ±ÇÂæ™ÁéØÂ∞±Êó†ÊâÄË∞ìÊòØ‰ªéÂâçÂæÄÂêéËøòÊòØ‰ªéÂêéÂæÄÂâç‰∫Ü for(int j = V;j &gt;= v[i];j--)&#123; dp[i][j] = Math.max(dp[i+1][j],dp[i+1][j - v[i]] + w[i]); &#125;&#125;int vol = m;for(int i = 1;i &lt;= n;i++)&#123; if(f[i][vol] == f[i+1][vol-v[i]] + w[i])&#123; // Â∞ÜËØ•ÊñπÊ°àÂä†ÂÖ• System.out.println(i); vol = vol - v[i]; &#125;&#125; Êúâ‰æùËµñÁöÑËÉåÂåÖÈóÆÈ¢òÔºà ÊàëÊöÇÊó∂Ê≤°Â§ç‰π†ÔºÅÔºâËøôÂ∫îËØ•ÊòØËÉåÂåÖÈóÆÈ¢òÈáåÈù¢ÊúÄÈöæÁöÑ‰∏ÄÁ±ª‰∫ÜÔºåÊòØÁî® Ê†ëÂΩ¢ dp + ÂàÜÁªÑËÉåÂåÖÈóÆÈ¢ò ÁöÑÊÄùË∑ØÂéªËß£ÂÜ≥„ÄÇ https://www.acwing.com/solution/acwing/content/8316/ Êõ¥Â§öËßÅËßÜÈ¢ëÔºöhttps://www.bilibili.com/video/av33930433/?p=2„ÄÅhttps://www.bilibili.com/video/av34467850/?p=2ÔºàËøô‰∏™ËßÜÈ¢ëÊòØ‰ªéÁ¨¨ 12 ÂàÜÈíüÂºÄÂßãËÆ≤ËÉåÂåÖ 9 ËÆ≤ÂêéÈù¢ÁöÑ 3 ËÆ≤Ôºâ ËÆ≠ÁªÉÂú∞ÂùÄÔºöhttps://www.acwing.com/problem/content/2/ Êõ¥ËØ¶ÁªÜÁöÑËÉåÂåÖ‰πùËÆ≤ÈóÆÈ¢òÔºöÂ∑≤Áªè‰∏ãËΩΩÂà∞Êú¨Âú∞‰∫ÜÔºåÂ¥îÊ∑ªÁøºÁöÑ pdf‚Äî‚Äî&gt; Êú¨Âú∞Êñá‰ª∂ÂêçÂ≠óÂè´ ËÉåÂåÖÈóÆÈ¢ò‰πùËÆ≤ ‰∫åÂèâÊ†ëÈìæË°® ÁÉ≠È¢ò 100Ôºö 2. ‰∏§Êï∞Áõ∏Âä† 19. Âà†Èô§ÈìæË°®ÁöÑÂÄíÊï∞Á¨¨N‰∏™ËäÇÁÇπ 21. ÂêàÂπ∂‰∏§‰∏™ÊúâÂ∫èÈìæË°® 23. ÂêàÂπ∂ K ‰∏™ÊéíÂ∫èÈìæË°® 141. ÁéØÂΩ¢ÈìæË°® 142. ÁéØÂΩ¢ÈìæË°® II 148. ÊéíÂ∫èÈìæË°® 160. Áõ∏‰∫§ÈìæË°® 206. ÂèçËΩ¨ÈìæË°® 234. ÂõûÊñáÈìæË°® ÂâëÊåá offerÔºö 18. Âà†Èô§ÈìæË°®ÁöÑËäÇÁÇπ 22. Âà†Èô§ÂÄíÊï∞Á¨¨ k ‰∏™ËäÇÁÇπ 24. ÂèçËΩ¨ÈìæË°® 35. Â§çÊùÇÈìæË°®ÁöÑÂ§çÂà∂ 52. ‰∏§‰∏™ÈìæË°®ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖ¨ÂÖ±ËäÇÁÇπ Áõ∏ÂÖ≥È¢òÁõÆÔºàÁÉ≠È¢ò100Ôºâ ‰∏§Êï∞Áõ∏Âä†1234567891011121314151617181920212223class Solution &#123; public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123; // È¶ñÂÖàÊØîËæÉ‰ΩçÊï∞Ôºå‰∏§‰∏™ÂêåÊó∂ÂêëÂêéÈÅçÂéÜÔºåÂΩì cur.next == null Êó∂ËØ¥ÊòéÊúâ‰∏Ä‰∏™Â∑≤ÁªèÂà∞‰∫ÜÊúÄÈ´ò‰Ωç // ÊåâÁÖßÈÄÜÂ∫èÁöÑÊñπÂºèÂ≠òÂÇ®ÔºåÂÖ∂ÂÆûÊòØÂ∞ÜÈ¢òÁõÆÂèòÁÆÄÂçï‰∫Ü„ÄÇÂõ†‰∏∫Êàë‰ª¨Âú®ËÆ°ÁÆó‰∏§Êï∞Áõ∏Âä†Êó∂ÔºåÊòØÂÖàÁÆó‰Ωé‰ΩçÔºåÂÜçËøõ‰ΩçÁªôÈ´ò‰Ωç // ÈÄÜÂ∫èÁöÑËØùÂàöÂ•ΩÂ∞±Á¨¶ÂêàËøôÁßçËøêÁÆóËßÑÂàô // Â§¥ÁªìÁÇπ ListNode res = new ListNode(-1); ListNode cur = res; // ÂÆö‰πâ‰∏Ä‰∏™Ëøõ‰Ωç int quo = 0; while(l1 != null || l2 != null || quo != 0)&#123; int t = (l1 == null ? 0 : l1.val) + (l2 == null ? 0 : l2.val) + quo; quo = t/10; t = t % 10; cur.next = new ListNode(t); cur = cur.next; l1 = l1 == null ? l1 : l1.next; l2 = l2 == null ? l2 : l2.next; &#125; return res.next; &#125;&#125; ÊãìÂ±ïÔºåÈìæË°®Ê≠£Â∫èÂ≠òÂÇ®Êï∞Â≠óÔºåÂ¶Ç‰ΩïËÆ°ÁÆóÔºü ÂèåÁ´ØÈòüÂàó 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859public class addTwoNumbers &#123; public static void main(String[] args) &#123; addTwoNumbers addTwoNumbers = new addTwoNumbers(); ListNode list1 = new ListNode(9);// list1.next = new ListNode(4);// list1.next.next = new ListNode(3); ListNode list2 = new ListNode(5); list2.next = new ListNode(6); list2.next.next = new ListNode(4); // 9 + 564 = 573 // 243 + 564 = 807 ListNode listNode = addTwoNumbers.addTwoNumbers(list1,list2); System.out.println(listNode.val + "-----&gt;" + listNode.next.val + "------&gt;" + listNode.next.next.val); &#125; // ÊñπÊ≥ï‰∏ÄÔºöÁî®ÂèåÁ´ØÈòüÂàóÂÆûÁé∞ public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123; // ÊÉ≥Ê≥ïÊòØ‰ΩøÁî®‰∏§‰∏™ÂèåÁ´ØÈòüÂàóÔºåÂÖàÂ∞ÜÊï∞ÈÉΩ‰ªéÈòüÂ∞æËøõÈòüÔºåÂΩìÊüê‰∏™Êï∞ ‰ΩçÊï∞‰∏çÂ§üÊó∂ÔºåÁî®0Âä†Âà∞ÈòüÈ¶ñ // ËÆ°ÁÆóÊòØÈÉΩ‰ªéÈòüÂ∞æÂá∫ // Âá∫ÈòüÂêéÂÜçÁî®Ê†àÊé•Êî∂‰∏Ä‰∏ã LinkedList&lt;Integer&gt; deque_l1 = new LinkedList&lt;&gt;(); LinkedList&lt;Integer&gt; deque_l2 = new LinkedList&lt;&gt;(); while(l1 != null)&#123; deque_l1.push(l1.val); l1 = l1.next; &#125; while (l2 != null)&#123; deque_l2.push(l2.val); l2 = l2.next; &#125; int deq1_len = deque_l1.size(); int deq2_len = deque_l2.size(); if(deq1_len &gt; deq2_len)&#123; for(int i = 1;i &lt;= deq1_len - deq2_len;i++)&#123; deque_l2.addLast(0); &#125; &#125; else if(deq2_len &gt; deq1_len)&#123; for(int i = 1;i &lt;= deq2_len - deq1_len;i++)&#123; deque_l1.addLast(0); &#125; &#125; Stack&lt;Integer&gt; stack = new Stack(); int quo = 0; while (deque_l1.size() != 0)&#123; int sum = deque_l1.pop() + deque_l2.pop() + quo; stack.push(sum % 10); quo = sum/10; &#125; ListNode res = new ListNode(-1); ListNode cur = res; while(!stack.isEmpty())&#123; cur.next = new ListNode(stack.pop()); cur = cur.next; &#125; return res.next; &#125;&#125; Â∞ÜÈìæË°®ÂèçËΩ¨ÔºåÁÑ∂ÂêéËÆ°ÁÆóÔºåÊúÄÂêéÂÜçÂèçËΩ¨ÂõûÊù• 12345678910111213141516171819202122232425262728293031323334353637public ListNode addTwoNumbers2(ListNode l1, ListNode l2)&#123; ListNode reverse_l1 = reverseList(l1); ListNode reverse_l2 = reverseList(l2); ListNode tmp = addTwoNumbers(reverse_l1,reverse_l2); ListNode listNode = reverseList(tmp); return listNode; &#125; public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123; // Â§¥ÁªìÁÇπ ListNode res = new ListNode(-1); ListNode cur = res; // ÂÆö‰πâ‰∏Ä‰∏™Ëøõ‰Ωç int quo = 0; while(l1 != null || l2 != null || quo != 0)&#123; int t = (l1 == null ? 0 : l1.val) + (l2 == null ? 0 : l2.val) + quo; quo = t/10; t = t % 10; cur.next = new ListNode(t); cur = cur.next; l1 = l1 == null ? l1 : l1.next; l2 = l2 == null ? l2 : l2.next; &#125; return res.next; &#125; public ListNode reverseList(ListNode head) &#123; // Â¶ÇÊûúÂΩìÂâçË¶ÅÂèçËΩ¨ÁöÑËäÇÁÇπ‰∏∫ null ÊàñËÄÖÂèçËΩ¨ÈìæË°®‰∏∫ null // head.next ‰∏∫ nullÔºåÂç≥ÂèçËΩ¨ÈìæË°®ÁöÑÂ∞æÁªìÁÇπ‰∏çÂ≠òÂú®ÔºåÂç≥ÂèçËΩ¨ÈìæË°®‰∏çÂ≠òÂú® if (head == null || head.next == null) return head; // ËäÇÁÇπ p ÂÖ∂ÂÆûÂ∞±ÊòØÂèçËΩ¨ÈìæË°®ÁöÑÂ§¥ËäÇÁÇπ ListNode p = reverseList(head.next); // Êàë‰ª¨Â∞ÜÂèçËΩ¨ÈìæË°®ÁöÑÂ∞æÁªìÁÇπÔºàhead.nextÔºâÁöÑ next ÊåáÂêëÂΩìÂâçÂç≥Â∞ÜÂèçËΩ¨ÁöÑËäÇÁÇπ head.next.next = head; // ÁÑ∂ÂêéËÆ©ÂΩìÂâçËäÇÁÇπÂèòÊàêÂèçËΩ¨ÈìæË°®ÁöÑÂ∞æÁªìÁÇπ head.next = null; // ËøîÂõûÂèçËΩ¨ÈìæË°®ÁöÑÂ§¥ÁªìÁÇπ return p; &#125; Âà†Èô§ÈìæË°®ÁöÑÂÄíÊï∞Á¨¨ N ‰∏™ËäÇÁÇπÂà©Áî®ÂÖàÂêéÊåáÈíàÔºåÂ∏∏Áî®ÁöÑÂèåÊåáÈíàÊäÄÂ∑ß‰πã‰∏ÄÔºöÂø´ÊÖ¢ÊåáÈíà„ÄÅÂÖàÂêéÊåáÈíà„ÄÅÊªëÂä®Á™óÂè£„ÄÇ 1234567891011121314151617181920class Solution &#123; public ListNode removeNthFromEnd(ListNode head, int n) &#123; if(head == null) return null; //ÂèØËÉΩ‰ºöÊääÂ§¥ÁªìÁÇπÁªôÂà†‰∫ÜÔºåÊâÄ‰ª•ÂèØ‰ª•Âª∫‰∏™ÂìëÂ∑¥ËäÇÁÇπ ListNode dummy = new ListNode(-1); dummy.next = head; ListNode front = dummy; ListNode back = dummy; for(int i = 1;i &lt;= n;i++)&#123; front = front.next; &#125; while(front.next != null)&#123; front = front.next; back = back.next; &#125; back.next = back.next.next; return dummy.next; &#125;&#125; ÂêàÂπ∂‰∏§‰∏™ÊúâÂ∫èÈìæË°®Ëøô‰∏™Ë≤å‰ººÊ≤°‰ªÄ‰πàÈöæÂ∫¶ÔºåÁ®çÂæÆÊ≥®ÊÑè‰∏ÄÁÇπÁªÜËäÇÂ∞±Ë°å‰∫Ü Ëø≠‰ª£ 123456789101112131415161718192021class Solution &#123; public ListNode mergeTwoLists(ListNode l1, ListNode l2) &#123; ListNode res = new ListNode(-1); ListNode dummy = res; while(l1 != null &amp;&amp; l2 != null)&#123; if(l1.val &gt; l2.val)&#123; res.next = new ListNode(l2.val); l2 = l2.next; &#125; else&#123; res.next = new ListNode(l1.val); l1 = l1.next; &#125; res = res.next; &#125; if(l1 == null) res.next = l2; else res.next = l1; return dummy.next; &#125;&#125; ÈÄíÂΩí 12345678910111213141516class Solution &#123; public ListNode mergeTwoLists(ListNode l1, ListNode l2) &#123; if (l1 == null) &#123; return l2; &#125; if (l2 == null) &#123; return l1; &#125; if (l1.val &lt; l2.val) &#123; l1.next = mergeTwoLists(l1.next, l2); return l1; &#125; l2.next = mergeTwoLists(l1, l2.next); return l2; &#125;&#125; ÂêàÂπ∂ K ‰∏™ÊéíÂ∫èÈìæË°® ‰ºòÂÖàÁ∫ßÈòüÂàó 1234567891011121314151617181920class Solution &#123; // ÊñπÊ≥ï‰∏ÄÔºöÁõ¥Êé•‰ΩøÁî®‰ºòÂÖàÁ∫ßÈòüÂàó public ListNode mergeKLists(ListNode[] lists) &#123; PriorityQueue&lt;ListNode&gt; priorityQueue = new PriorityQueue((Comparator&lt;ListNode&gt;) (o1, o2) -&gt; o1.val - o2.val); ListNode dummy = new ListNode(-1); ListNode cur = dummy; if(lists.length == 0) return null; for(ListNode list : lists)&#123; if(list == null) continue; priorityQueue.add(list); &#125; while(!priorityQueue.isEmpty())&#123; ListNode min = priorityQueue.poll(); cur.next = min; if(min.next != null) priorityQueue.add(min.next); cur = cur.next; &#125; return dummy.next; &#125;&#125; ÂΩíÂπ∂ 123456789101112131415161718192021222324252627282930313233343536class Solution &#123; /** * ÊñπÊ≥ï‰∫å ÂΩíÂπ∂ÊéíÂ∫è * Ë¶ÅÊ≥®ÊÑèË∑üÊï∞ÁªÑÁöÑÂå∫Âà´ * Êï∞ÁªÑÂèØ‰ª•Áõ¥Êé•ÈÄöËøá‰∏ãÊ†áÁ¥¢ÂºïÔºåÊâÄ‰ª•Âú®ÂΩíÂπ∂Êó∂Êó†ÈúÄËøîÂõûÂÄºÔºå‰ΩÜÈìæË°®ÂøÖÈ°ªÂú®ÊØèÊ¨°ÂΩíÂπ∂Êó∂Êèê‰æõÈìæË°®Â§¥ÁªìÁÇπÔºåÂê¶ÂàôÊó†Ê≥ïÂΩíÂπ∂ * @param lists * @return */ public ListNode mergeKLists(ListNode[] lists) &#123; if(lists.length == 0) return null; return merge(lists,0,lists.length-1); &#125; private ListNode merge(ListNode[] lists, int left, int right) &#123; if(left == right) return lists[left]; int mid = left + (right - left)/2; ListNode l1 = merge(lists,left,mid); ListNode l2 = merge(lists,mid+1,right); return mergeTwoLists(l1,l2); &#125; public ListNode mergeTwoLists(ListNode l1, ListNode l2) &#123; if (l1 == null) &#123; return l2; &#125; if (l2 == null) &#123; return l1; &#125; if (l1.val &lt; l2.val) &#123; l1.next = mergeTwoLists(l1.next, l2); return l1; &#125; l2.next = mergeTwoLists(l1, l2.next); return l2; &#125;&#125; Êö¥ÂäõÊ≥ï 123456789101112131415161718192021222324class Solution &#123; public ListNode mergeKLists(ListNode[] lists) &#123; if(lists.length == 0) return null; for(int i = 1;i &lt; lists.length;i++)&#123; lists[i] = mergeTwoLists(lists[i],lists[i-1]); &#125; return lists[lists.length-1]; &#125; public ListNode mergeTwoLists(ListNode l1, ListNode l2) &#123; if (l1 == null) &#123; return l2; &#125; if (l2 == null) &#123; return l1; &#125; if (l1.val &lt; l2.val) &#123; l1.next = mergeTwoLists(l1.next, l2); return l1; &#125; l2.next = mergeTwoLists(l1, l2.next); return l2; &#125;&#125; ÁéØÂΩ¢ÈìæË°® SetÈõÜÂêàÂ≠òÂÇ® 123456789101112131415public class Solution &#123; //Áî® Set Êù•Â≠òÂÇ®ÔºåÂ¶ÇÊûúÂá∫Áé∞‰∫ÜÔºåÂàôËØ¥ÊòéÊúâÁéØÔºåÂê¶ÂàôÂ∞±Êó†ÁéØ public boolean hasCycle(ListNode head) &#123; HashSet&lt;ListNode&gt; set = new HashSet&lt;&gt;(); while(head != null)&#123; if(set.add(head))&#123; head = head.next; &#125; else &#123; return true; &#125; &#125; return false; &#125;&#125; Âø´ÊÖ¢ÊåáÈíà 1234567891011121314public class Solution &#123; //Áî® Âø´ÊÖ¢ÊåáÈíà public boolean hasCycle(ListNode head) &#123; if (head == null || head.next == null) return false; ListNode slow = head; ListNode fast = head.next; while (fast != null &amp;&amp; fast.next != null) &#123; if (slow == fast) return true; slow = slow.next; fast = fast.next.next; &#125; return false; &#125;&#125; ÁéØÂΩ¢ÈìæË°® IIÂÖ∏ÂûãÁöÑÂø´ÊÖ¢ÊåáÈíàËß£ÂÜ≥Ê≠§ÈóÆÈ¢ò Ëµ∑ÁÇπÊòØÂìëÂ∑¥ËäÇÁÇπ 12345678910111213141516171819202122232425public class Solution &#123; public ListNode detectCycle(ListNode head) &#123; if(head == null || head.next == null) return null; // Ëµ∑ÁÇπÂæàÈáçË¶ÅÔºåËøô‰∏™Ë∑üÁéØÂΩ¢ÈìæË°® I ‰∏ç‰∏ÄÊ†∑ // ‰∏ÄÂÆöË¶ÅÊ≥®ÊÑèËøô‰∏™ÁªÜËäÇ // Âõ†‰∏∫Á¨¨‰∫åÊ¨°Áõ∏ÈÅáÂæó fast Âíå slow Ëµ∞ÁöÑË∑ùÁ¶ª‰∏ÄÊ†∑ ListNode slow = head; ListNode fast = head.next; while (true) &#123; if(fast == null || fast.next == null) return null; if (slow == fast) &#123; break; &#125;; slow = slow.next; fast = fast.next.next; &#125; slow = head; fast = fast.next; while(slow != fast)&#123; slow = slow.next; fast = fast.next; &#125; return slow; &#125;&#125; Ëµ∑ÁÇπÊòØÂ§¥ÁªìÁÇπ 123456789101112131415161718192021222324public class Solution &#123; public ListNode detectCycle(ListNode head) &#123; if(head == null) return null; // Ëµ∑ÁÇπÂæàÈáçË¶ÅÔºåËøô‰∏™Ë∑üÁéØÂΩ¢ÈìæË°® I ‰∏ç‰∏ÄÊ†∑ // ‰∏ÄÂÆöË¶ÅÊ≥®ÊÑèËøô‰∏™ÁªÜËäÇ // Âõ†‰∏∫Á¨¨‰∫åÊ¨°Áõ∏ÈÅáÂæó fast Âíå slow Ëµ∞ÁöÑË∑ùÁ¶ª‰∏ÄÊ†∑ ListNode slow = head; ListNode fast = head; while (true) &#123; if(fast == null || fast.next == null) return null; slow = slow.next; fast = fast.next.next; // Ê≥®ÊÑèËøôÈáåÂà§Êñ≠ÁöÑÂú∞ÊñπË∑ü‰∏äÈù¢Áï•Êúâ‰∏çÂêå if (slow == fast) &#123; break; &#125;; &#125; slow = head; while(slow != fast)&#123; slow = slow.next; fast = fast.next; &#125; return slow; &#125; ÊéíÂ∫èÈìæË°®„ÄêÈöæÁÇπÂìàÔºÅ„Äë ‰∏çÁ¨¶ÂêàÁ©∫Èó¥Â§çÊùÇÂ∫¶ÔºåÁõ¥Êé•Âà©Áî®ÂàóË°® 12345678910111213141516171819class Solution &#123; public ListNode sortList(ListNode head) &#123; List&lt;Integer&gt; arrayList = new ArrayList(); while(head != null)&#123; arrayList.add(head.val); head = head.next; &#125; Collections.sort(arrayList); return ListToLinked(arrayList); &#125; public ListNode ListToLinked(List&lt;Integer&gt; arrayList)&#123; if(arrayList.size() == 0) return null; ListNode node = new ListNode(arrayList.get(0)); // Ê≥®ÊÑèËøô‰∏™ arrayList.subList()ÁöÑËøîÂõûÂÄºÊòØ List // Âπ∂‰∏îÊñπÊ≥ï‰∏≠ÁöÑÂèÇÊï∞ÊòØ[fromIndex,toIndex)ÔºåÂ∑¶Èó≠Âè≥ÂºÄ„ÄÇ node.next = ListToLinked(arrayList.subList(1,arrayList.size())); return node; &#125;&#125; ÂΩíÂπ∂ÊéíÂ∫èÔºåÂπ∂‰∏îÂú®ÂêàÂπ∂Êó∂ÈááÁî®ÈÄíÂΩíÔºåÁ©∫Èó¥Â§çÊùÇÂ∫¶Èôç‰∏∫ O(logn)ÔºåËøô‰∏™Â∞±Ë∑üÂêàÂπ∂ K ‰∏™ÊúâÂ∫èÈìæË°®ÊòØ‰∏ÄÊ†∑ÁöÑÊÄùË∑ØÔºåÂè™‰∏çËøáËøôÈáåÂ∞±Áõ∏ÂΩì‰∫é K ‰∏™ ÈìæË°®ÈïøÂ∫¶‰∏∫ 1 ÁöÑÈìæË°®ËøõË°åÂΩíÂπ∂ÔºåÂπ∂‰∏îËøò‰∏çËÉΩÈÄöËøáÊï∞ÁªÑÁ¥¢ÂºïÂà∞ midÔºåÂè™ËÉΩÊòØÈÄöËøáÂø´ÊÖ¢ÊåáÈíàÊâæÂà∞ mid„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637/** * Definition for singly-linked list. * public class ListNode &#123; * int val; * ListNode next; * ListNode(int x) &#123; val = x; &#125; * &#125; */class Solution &#123; public ListNode sortList(ListNode head) &#123; if (head == null || head.next == null) return head; ListNode fast = head.next, slow = head; while (fast != null &amp;&amp; fast.next != null) &#123; slow = slow.next; fast = fast.next.next; &#125; ListNode tmp = slow.next; slow.next = null; ListNode left = sortList(head); ListNode right = sortList(tmp); ListNode h = new ListNode(0); ListNode res = h; while (left != null &amp;&amp; right != null) &#123; if (left.val &lt; right.val) &#123; h.next = left; left = left.next; &#125; else &#123; h.next = right; right = right.next; &#125; h = h.next; &#125; h.next = left != null ? left : right; return res.next; &#125;&#125; ÂΩíÂπ∂ÊéíÂ∫èÔºåÂêàÂπ∂Êó∂‰∏çÈááÁî®ÈÄíÂΩíÔºåÁ©∫Èó¥Â§çÊùÇÂ∫¶‰∏∫Â∏∏Êï∞ ËøòÊú™Á†îËØªÔºÅ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354class Solution &#123; public ListNode sortList(ListNode head) &#123; ListNode h, h1, h2, pre, res; h = head; int length = 0, intv = 1; while (h != null) &#123; h = h.next; length++; &#125; res = new ListNode(0); res.next = head; while (intv &lt; length) &#123; pre = res; h = res.next; while (h != null) &#123; int i = intv; h1 = h; while (i &gt; 0 &amp;&amp; h != null) &#123; h = h.next; i--; &#125; if (i &gt; 0) break; i = intv; h2 = h; while (i &gt; 0 &amp;&amp; h != null) &#123; h = h.next; i--; &#125; int c1 = intv, c2 = intv - i; while (c1 &gt; 0 &amp;&amp; c2 &gt; 0) &#123; if (h1.val &lt; h2.val) &#123; pre.next = h1; h1 = h1.next; c1--; &#125; else &#123; pre.next = h2; h2 = h2.next; c2--; &#125; pre = pre.next; &#125; pre.next = c1 == 0 ? h2 : h1; while (c1 &gt; 0 || c2 &gt; 0) &#123; pre = pre.next; c1--; c2--; &#125; pre.next = h; &#125; intv *= 2; &#125; return res.next; &#125;&#125; Áõ∏‰∫§ÈìæË°®Ëµ∞Áõ∏ÂêåË∑ùÁ¶ªÁöÑË∑ØÔºåÂøÖÂÆöÂú®Áõ∏‰∫§ÁÇπÁõ∏ÈÅá„ÄÇ 123456789101112public class Solution &#123; public ListNode getIntersectionNode(ListNode headA, ListNode headB) &#123; if(headA == null || headB == null) return null; ListNode p1 = headA; ListNode p2 = headB; while(p1 != p2)&#123; p1 = (p1 == null ? headB : p1.next); p2 = (p2 == null ? headA : p2.next); &#125; return p1; &#125;&#125; ÂèçËΩ¨ÈìæË°® ÈÄíÂΩí(Ëøô 5 Ê≠•ÂæóÁâ¢ËÆ∞‰∫éÂøÉ) 123456789class Solution &#123; public ListNode reverseList(ListNode head) &#123; if(head == null || head.next == null) return head; ListNode p = reverseList(head.next); head.next.next = head; head.next = null; return p; &#125;&#125; ÈùûÈÄíÂΩí(ÊØè‰∏ÄÊ≠•Â∞±Âè™ÊòØÊää‰∏ã‰∏ÄÊ¨°ËØ•ÂèçËΩ¨ÁöÑËäÇÁÇπËÆ∞‰ΩèÂç≥ÂèØÔºåÁÑ∂ÂêéÊääcurr.nextÊç¢ÊàêpreÂ∞±Ë°å‰∫Ü) 12345678910111213141516class Solution &#123; public ListNode reverseList(ListNode head) &#123; // Âà©Áî®‰∏â‰∏™ÊåáÈíàÔºåÂàÜÂà´Â≠òÂÇ®ÈÅçÂéÜÁöÑËØ•ËäÇÁÇπÔºåÂâçËäÇÁÇπÂíåÂêéËäÇÁÇπ ListNode pre = null; ListNode cur = head; while(cur != null)&#123; // Âè™ÈúÄË¶Å‰øùÂ≠ò‰∏ã‰∏ÄÊ¨°ÂèçËΩ¨ÁöÑËäÇÁÇπÂ∞±Ë°å‰∫Ü ListNode nextTemp = cur.next; cur.next = pre; // ‰∏ã‰∏ÄÊ¨°ÂèçËΩ¨ pre = cur; cur = nextTemp; &#125; return pre; &#125;&#125; ÂõûÊñáÈìæË°® ÂÖàÂà©Áî®Âø´ÊÖ¢ÊåáÈíàÊâæÂà∞‰∏≠ÁÇπÔºåÁÑ∂ÂêéÂèçËΩ¨ÂâçÂçäÈÉ®ÂàÜÔºåÁÑ∂ÂêéÊØîÂØπÂç≥ÂèØ 123456789101112131415161718192021222324252627282930313233class Solution &#123; // ÂèçËΩ¨ÂâçÂçäÈÉ®ÂàÜ public boolean isPalindrome(ListNode head) &#123; ListNode slow = head; ListNode fast = head; while(fast != null &amp;&amp; fast.next != null)&#123; slow = slow.next; fast = fast.next.next; &#125; // 1 2 3 4 Ê≠§Êó∂ fast ‰ºö‰∏∫ null Ôºåslow ‰ºö‰∏∫ 3 // 1 2 3 4 5 Ê≠§Êó∂ fast.next ‰ºö‰∏∫ nullÔºåslow ‰ºö‰∏∫ 3 // ‰πüÂ∞±ÊòØ ‰∏çËÆ∫ÊòØÂ•áÊï∞ËøòÊòØÂÅ∂Êï∞Ôºåslow ÈÉΩ‰ºöÊòØÂêéÂçäÈÉ®ÂàÜÁöÑÁ¨¨‰∏Ä‰∏™Êï∞ // ÂèçËΩ¨ÂâçÂçäÈÉ®ÂàÜ ListNode pre = null; ListNode cur = head; while(cur != slow)&#123; ListNode nextTemp = cur.next; cur.next = pre; pre = cur; cur = nextTemp; &#125; if(fast != null)&#123; slow = slow.next; &#125; while(pre != null)&#123; if(pre.val != slow.val) return false; pre = pre.next; slow = slow.next; &#125; return true; &#125;&#125; ÂèØ‰ª•‰ºòÂåñ‰∏Ä‰∏ãÔºåÁõ¥Êé•Âú®Âø´ÊÖ¢ÊåáÈíàÊâæ‰∏≠ÁÇπÁöÑÂêåÊó∂ËøõË°åÁøªËΩ¨ 1234567891011121314151617181920212223242526class Solution &#123; // ÂèçËΩ¨ÂâçÂçäÈÉ®ÂàÜ public boolean isPalindrome(ListNode head) &#123; if(head == null) return true; ListNode fast = head; ListNode cur = head, pre = null; while(fast != null &amp;&amp; fast.next != null) &#123; // ËøôÈáåÁöÑ cur ÊåáÈíàÂ∞±ÊòØ slow ÊåáÈíàÔºåÂÖÖÂΩì‰∫Ü‰∏§‰∏™‰ΩúÁî® // ‰∏Ä‰∏™ÊòØÂø´ÊÖ¢ÊåáÈíàÊâæ‰∏≠ÁÇπÔºå‰∏Ä‰∏™ÊòØÂèçËΩ¨ÈìæË°®ÔºåÂõ†‰∏∫ cur ‰πüÊòØÊØèËΩÆÂæ™ÁéØËµ∞‰∏ÄÊ≠• fast = fast.next.next; ListNode nextTemp = cur.next; cur.next = pre; pre = cur; cur = nextTemp; &#125; if(fast != null) &#123; cur = cur.next; &#125; while(pre != null) &#123; if(pre.val != cur.val) return false; pre = pre.next; cur = cur.next; &#125; return true; &#125;&#125; ÈìæË°®ËΩ¨ÂàóË°®ÔºåÁÑ∂ÂêéÊØîÂØπ 123456789101112131415161718192021class Solution &#123; public boolean isPalindrome(ListNode head) &#123; List&lt;Integer&gt; vals = new ArrayList&lt;&gt;(); ListNode currentNode = head; while (currentNode != null) &#123; vals.add(currentNode.val); currentNode = currentNode.next; &#125; int front = 0; int back = vals.size() - 1; while (front &lt; back) &#123; if (!vals.get(front).equals(vals.get(back))) &#123; return false; &#125; front++; back--; &#125; return true; &#125;&#125; (ÂâëÊåáoffer) Âà†Èô§ÈìæË°®‰∏≠ÁöÑËäÇÁÇπ Êâæ‰∏Ä‰∏™Áâ∫Áâ≤ËÄÖ 12345678910111213141516171819202122class Solution &#123; public ListNode deleteNode(ListNode head, int val) &#123; // Ëøô‰∏™ÊñπÊ≥ïÂè´Êâæ‰∏Ä‰∏™Áâ∫Áâ≤ËÄÖ ListNode dummy = new ListNode(-1); dummy.next = head; ListNode cur = head; ListNode pre = dummy; while(cur != null &amp;&amp; cur.next != null)&#123; if(cur.val == val)&#123; cur.val = cur.next.val; cur.next = cur.next.next; return dummy.next; &#125; pre = cur; cur = cur.next; &#125; if(cur.next == null)&#123; pre.next = null; &#125; return dummy.next; &#125;&#125; Áõ¥Êé•Âà§Êñ≠‰∏ã‰∏Ä‰∏™ÊòØ‰∏çÊòØ 123456789101112131415class Solution &#123; public ListNode deleteNode(ListNode head, int val) &#123; ListNode dummy = new ListNode(-1); ListNode pre = dummy; dummy.next = head; while(pre.next != null)&#123; if(pre.next.val == val)&#123; pre.next = pre.next.next; return dummy.next; &#125; pre = pre.next; &#125; return dummy.next; &#125;&#125; ÈìæË°®‰∏≠ÁöÑÂÄíÊï∞Á¨¨K‰∏™ËäÇÁÇπ123456789101112131415class Solution &#123; public ListNode getKthFromEnd(ListNode head, int k) &#123; //‰ΩøÁî®ÂâçÂêéÊåáÈíà ListNode back = head; ListNode front = head; for(int i = 0;i &lt; k;i++)&#123; front = front.next; &#125; while(front != null)&#123; back = back.next; front = front.next; &#125; return back; &#125;&#125; Â§çÂà∂Â∏¶ÈöèÂç≥ÊåáÈíàÁöÑÈìæË°®„ÄêÈöæÁÇπÂìà„Äë HashMap Â§çÂà∂ 1234567891011121314151617181920212223242526272829303132/*// Definition for a Node.class Node &#123; int val; Node next; Node random; public Node(int val) &#123; this.val = val; this.next = null; this.random = null; &#125;&#125;*/class Solution &#123; public Node copyRandomList(Node head) &#123; if (head == null) return null; Map&lt;Node, Node&gt; lookup = new HashMap&lt;&gt;(); Node node = head; while (node != null)&#123; lookup.put(node, new Node(node.val, null, null)); node = node.next; &#125; node = head; while (node != null)&#123; lookup.get(node).next = lookup.get(node.next); lookup.get(node).random = lookup.get(node.random); node = node.next; &#125; return lookup.get(head); &#125;&#125; O(1) Á©∫Èó¥Â§çÊùÇÂ∫¶ 123456789101112131415161718192021222324252627282930313233343536373839class Solution &#123; public Node copyRandomList(Node head) &#123; if(head == null) return null; Node cur = head; // Â§çÂà∂ while(cur != null)&#123; Node tmp = cur.next; cur.next = new Node(cur.val,null,null); cur.next.next = tmp; cur = tmp; &#125; // ÁΩÆÈöèÊú∫ÊåáÈíà cur = head; while(cur != null)&#123; // ÊòìÈîôÁÇπÔºåÂà´Âøò‰∫ÜÂà§Êñ≠ if(cur.random != null) cur.next.random = cur.random.next; cur = cur.next.next; &#125; // ÊãÜÂàÜ cur = head; Node copy_head = head.next; Node copy_cur = copy_head; while(copy_cur.next != null)&#123; cur.next = cur.next.next; cur = cur.next; // Ê≥®ÊÑèÂì¶ÔºåËøôÈáåwhileÂæ™ÁéØÂøÖÈ°ªÊòØ copy_cur.next != null // ÂéüÂõ†ÊòØ‰∏ãÈù¢ËøôË°å‰ª£Á†ÅÔºåÂ¶ÇÊûúÊòØ copy_cur != nullÔºåÈÇ£‰∏ãÈù¢Â∞±‰ºöÁ©∫ÊåáÈíàÂºÇÂ∏∏ copy_cur.next = copy_cur.next.next; copy_cur = copy_cur.next; &#125; //Âà´Âøò‰∫ÜÁªô cur ÊúÄÂêé Âä† null cur.next = null; return copy_head; &#125;&#125;]]></content>
  </entry>
  <entry>
    <title><![CDATA[Èõ∂Á¢éÁü•ËØÜÁÇπÊÄªÁªì]]></title>
    <url>%2F2020%2F02%2F07%2F%E9%9B%B6%E7%A2%8E%E7%9F%A5%E8%AF%86%E7%82%B9.html</url>
    <content type="text"><![CDATA[ÈùôÊÄÅÊñπÊ≥ï &amp; ÈùûÈùôÊÄÅÊñπÊ≥ïÁöÑÂå∫Âà´ Êú¨Ë¥®Âå∫Âà´ÔºöÈùôÊÄÅÊñπÊ≥ï‰∏éÈùûÈùôÊÄÅÊñπÊ≥ïÁöÑÊú¨Ë¥®Âå∫Âà´ÔºöÈùôÊÄÅÊñπÊ≥ïÂú®Á®ãÂ∫èÂàùÂßãÂåñÂêé‰ºö‰∏ÄÁõ¥Ë¥ÆÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠Ôºå‰∏ç‰ºöË¢´ÂûÉÂúæÂõûÊî∂Âô®ÂõûÊî∂ÔºåÈùûÈùôÊÄÅÊñπÊ≥ïÂè™Âú®ËØ•Á±ªÂàùÂßãÂåñÂêéË¥ÆÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÂΩìËØ•Á±ªË∞ÉÁî®ÂÆåÊØïÂêé‰ºöË¢´ÂûÉÂúæÂõûÊî∂Âô®Êî∂ÈõÜÈáäÊîæ„ÄÇ Ë∞ÉÁî®ÊñπÂºèÂå∫Âà´ÔºöÂú®Â§ñÈÉ®Ë∞ÉÁî®ÈùôÊÄÅÊñπÊ≥ïÊó∂ÔºåÂèØ‰ª•‰ΩøÁî®‚ÄùÁ±ªÂêç.ÊñπÊ≥ïÂêç‚ÄùÁöÑÊñπÂºèÔºå‰πüÂèØ‰ª•‰ΩøÁî®‚ÄùÂØπË±°Âêç.ÊñπÊ≥ïÂêç‚ÄùÁöÑÊñπÂºè„ÄÇËÄåÂÆû‰æãÊñπÊ≥ïÂè™ÊúâÂêéÈù¢ËøôÁßçÊñπÂºè„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåË∞ÉÁî®ÈùôÊÄÅÊñπÊ≥ïÂèØ‰ª•Êó†ÈúÄÂàõÂª∫ÂØπË±°„ÄÇ ËÆøÈóÆÈôêÂà∂‰∏çÂêåÔºöÈùôÊÄÅÊñπÊ≥ïÂú®ËÆøÈóÆÊú¨Á±ªÁöÑÊàêÂëòÊó∂ÔºåÂè™ÂÖÅËÆ∏ËÆøÈóÆÈùôÊÄÅÊàêÂëòÔºàÂç≥ÈùôÊÄÅÊàêÂëòÂèòÈáèÂíåÈùôÊÄÅÊñπÊ≥ïÔºâÔºåËÄå‰∏çÂÖÅËÆ∏ËÆøÈóÆÂÆû‰æãÊàêÂëòÂèòÈáèÂíåÂÆû‰æãÊñπÊ≥ïÔºõÂÆû‰æãÊñπÊ≥ïÂàôÊó†Ê≠§ÈôêÂà∂„ÄÇÂ¶ÇÊûúÊÉ≥Ë¶ÅÂú®ÈùôÊÄÅÊñπÊ≥ï‰∏≠ËÆøÈóÆÊú¨Á±ªÁöÑÈùûÈùôÊÄÅÊñπÊ≥ïÔºåÂàôÈúÄË¶ÅÂÖàÂÆû‰æãÂåñÁ±ªÔºåÂÜçÂÆû‰æãÂåñÁ±ª.ÂÆû‰æãÊñπÊ≥ï„ÄÇ ‰πãÊâÄ‰ª•‰∏çÂÖÅËÆ∏ÈùôÊÄÅÊñπÊ≥ïÁõ¥Êé•ËÆøÈóÆÂÆû‰æãÊàêÂëòÂèòÈáèÔºåÊòØÂõ†‰∏∫ÂÆû‰æãÊàêÂëòÂèòÈáèÊòØÂ±û‰∫éÊüê‰∏™ÂØπË±°ÁöÑÔºåËÄåÈùôÊÄÅÊñπÊ≥ïÂú®ÊâßË°åÊó∂ÔºåÂπ∂‰∏ç‰∏ÄÂÆöÂ≠òÂú®ÂØπË±°„ÄÇÂêåÊ†∑ÔºåÂõ†‰∏∫ÂÆû‰æãÊñπÊ≥ïÂèØ‰ª•ËÆøÈóÆÂÆû‰æãÊàêÂëòÂèòÈáèÔºåÂ¶ÇÊûúÂÖÅËÆ∏ÈùôÊÄÅÊñπÊ≥ïË∞ÉÁî®ÂÆû‰æãÊñπÊ≥ïÔºåÂ∞ÜÈó¥Êé•Âú∞ÂÖÅËÆ∏ÂÆÉ‰ΩøÁî®ÂÆû‰æãÊàêÂëòÂèòÈáèÔºåÊâÄ‰ª•ÂÆÉ‰πü‰∏çËÉΩË∞ÉÁî®ÂÆû‰æãÊñπÊ≥ï„ÄÇÂü∫‰∫éÂêåÊ†∑ÁöÑÈÅìÁêÜÔºåÈùôÊÄÅÊñπÊ≥ï‰∏≠‰πü‰∏çËÉΩ‰ΩøÁî®ÂÖ≥ÈîÆÂ≠óthis„ÄÇ Â£∞ÊòéÊñπÂºè‰∏çÂêåÔºöÈùôÊÄÅÊñπÊ≥ïÂ£∞ÊòéÂøÖÈ°ªÊúâstaticÔºåË∞ÉÁî®Êó∂‰ΩøÁî®Á±ªÂêç+.+ÈùôÊÄÅÊñπÊ≥ïÂêçÁöÑÊñπÂºè„ÄÇÈùûÈùôÊÄÅÊñπÊ≥ï‰∏çËÉΩ‰ΩøÁî®staticÂÖ≥ÈîÆÂ≠óÔºåË∞ÉÁî®Êó∂ÈúÄÂàùÂßãÂåñËØ•ÊñπÊ≥ïÊâÄÂ±ûÁ±ª„ÄÇ Èõ∂Êã∑Ë¥ù https://www.jianshu.com/p/275602182f39 https://blog.csdn.net/CringKong/article/details/80274148 ÁÆÄËÄåË®Ä‰πãÔºåÂ∞±ÊòØÂáèÂ∞ë‰∫ÜÊã∑Ë¥ùÊ¨°Êï∞ÔºåÁõ¥Êé•‰ΩøÁî® DMAÔºàDirect Memory AccessÔºåÁõ¥Êé•ÂÜÖÂ≠òÂ≠òÂèñÔºâÔºåÂπ∂‰∏îÂáèÂ∞ë‰∫Ü‰∏ä‰∏ãÊñáÂàáÊç¢ÁöÑÊ¨°Êï∞ÔºåÊâÄË∞ìÁöÑÈõ∂Êã∑Ë¥ùÔºåÊÑèÊÄùÂ∫îËØ•ÊòØÊåá‰∏çÈúÄË¶Å CPU ÂèÇ‰∏éÊã∑Ë¥ùÂ∞±ËÉΩÂÆåÊàêÊï∞ÊçÆÁöÑÊã∑Ë¥ùËøáÁ®ã„ÄÇ Tip: kafka‰πãÊâÄ‰ª•Ëøô‰πàÂø´ÔºåÂ∞±ÊòØÁî®‰∫ÜÈõ∂Êã∑Ë¥ùÊäÄÊúØ ‰º†ÁªüÁöÑËØªÂÜô(ËøôÈáåÂÅáËÆæÊòØÂ∞ÜÊñá‰ª∂‰∏≠ÁöÑÊï∞ÊçÆËØªÂèñÂà∞ÁΩëÁªú‰∏ä)Ôºö È¶ñÂÖàÊòØ‰ªéÁ£ÅÁõòÈÄöËøá DMA Âä†ËΩΩÂà∞ÂÜÖÂ≠òÔºåÁ¨¨‰∏ÄÊ¨°Êã∑Ë¥ùÔºåÁÑ∂ÂêéÂÜÖÂ≠òÂ∞ÜÂÖ∂ÊîæÂà∞ÂÜÖÊ†∏ÁºìÂÜ≤Âå∫ÔºåÂêåÊó∂ÂÆåÊàê‰∫Ü‰∏ÄÊ¨°‰ªé Áî®Êà∑ÊÄÅÂà∞ ÂÜÖÊ†∏ÊÄÅÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢Ôºõ ÁÑ∂ÂêéÊòØÂÜÖÊ†∏ÁºìÂÜ≤Âå∫Êã∑Ë¥ùÂà∞Áî®Êà∑ÁºìÂ≠òÂå∫ÔºåÁ¨¨‰∫åÊ¨°Êã∑Ë¥ùÔºåÂêåÊó∂ÂèàÂ∞ÜÂÜÖÊ†∏ÊÄÅÂàáÂõûÂà∞Áî®Êà∑ÊÄÅÔºõ ÁÑ∂ÂêéÊòØÁî®Êà∑ÁºìÂÜ≤Âå∫Êã∑Ë¥ùËá≥ Socket ÁºìÂÜ≤Âå∫ÔºåÁ¨¨‰∏âÊ¨°Êã∑Ë¥ùÔºåÂêåÊó∂Â∞ÜÁî®Êà∑ÊÄÅÂàáÂõûÂÜÖÊ†∏ÊÄÅÔºõ ÁÑ∂Âêé Socket ÁºìÂÜ≤Âå∫ÈÄöËøá DMA Â∞ÜÊï∞ÊçÆÊã∑Ë¥ùËá≥ÁΩëÁªúÂºïÊìéÔºåÁÑ∂ÂêéÁªìÊùü wirteÔºåÊ≠§Êó∂Á¨¨ÂõõÊ¨°Êã∑Ë¥ùÔºåÂπ∂ÊúÄÁªàÂ∞ÜÂÜÖÊ†∏ÊÄÅÂàáÂõûÁî®Êà∑ÊÄÅ„ÄÇ ÂéÜÁªè‰∫Ü 4 Ê¨°Êã∑Ë¥ùÔºå4 Ê¨°‰∏ä‰∏ãÊñáÂàáÊç¢ÔºåÂÖ∂‰∏≠ÂåÖÊã¨2Ê¨°ÈúÄË¶Å CPU ÂèÇ‰∏éÂ∑•‰Ωú(Á¨¨‰∫åÊ≠•ÂíåÁ¨¨‰∏âÊ≠•)„ÄÇ mmap ÂØπÂÜÖÊ†∏ÁºìÂÜ≤Âå∫ÂíåÁî®Êà∑ÁºìÂÜ≤Âå∫ÂÅöÂú∞ÂùÄÊò†Â∞ÑÔºåËøôÊ†∑ÁöÑËØù‰∏äËø∞Á¨¨‰∫åÊ≠•ÂíåÁ¨¨‰∏âÊ≠•ÂèØ‰ª•Áõ¥Êé•ÂΩí‰∏∫‰∏ÄÊ≠•Ôºå‰πüÂ∞±ÊòØÂáèÂ∞ë‰∫Ü‰∏ÄÊ¨°Êã∑Ë¥ùÔºå‰ΩÜÊòØÂπ∂Ê≤°ÊúâÂáèÂ∞ë‰∏ä‰∏ãÊñáÂàáÊç¢ÁöÑÊ¨°Êï∞„ÄÇ sendfile ËøôÊòØÁúüÊ≠£ÁöÑÈõ∂Êã∑Ë¥ùÊäÄÊúØÔºå Java ‰∏≠ÁöÑ NIO Â∞±ÊòØÈÄöËøáËøô‰∏™Â∫ïÂ±ÇÂÆûÁé∞ÁöÑÔºå‰πüÂ∞±ÊòØÁ¨¨‰∫åÊ≠•‰∏≠Áõ¥Êé•Â∞ÜÂÜÖÊ†∏ÁºìÂÜ≤Âå∫ÈÄöËøá DMA ÂèëÈÄÅËá≥ÁΩëÁªúÂºïÊìéÔºåÂ∞ÜÂÜÖÊ†∏ÊÄÅÂàáÊç¢‰∏∫Áî®Êà∑ÊÄÅÔºåÊ≠§Êó∂ÂÖ®Á®ã‰∏çÈúÄË¶Å CPU ÂèÇ‰∏éÂ∑•‰ΩúÔºå‰∏îÊã∑Ë¥ùÊ¨°Êï∞Èôç‰∏∫2Ê¨°Ôºå‰∏ä‰∏ãÊñáÂàáÊç¢Ê¨°Êï∞‰πüÂêåÊó∂Èôç‰∏∫2Ê¨°„ÄÇ Spring AOPÂéüÁêÜSpring MVC ËøáÁ®ãSpring IocSpring BeanSpring Bean ÁöÑÁîüÂëΩÂë®ÊúüÊäΩË±°Á±ªÂíåÊé•Âè£ÁöÑÂå∫Âà´ÊäΩË±°Á±ªÔºö‰∏Ä‰∏™ÂåÖÂê´ÊäΩË±°ÊñπÊ≥ïÁöÑÁ±ªÔºåÊäΩË±°ÊñπÊ≥ïÊòØÊåáÁî® abstract ‰øÆÈ•∞ÔºåÊ≤°ÊúâÂÆûÁé∞ÁöÑÊñπÊ≥ïÔºõ Êé•Âè£Ôºö‰∏Ä‰∏™ÊñπÊ≥ïÁöÑÈõÜÂêàÔºõ Âå∫Âà´Ôºö ÊäΩË±°Á±ªÂÖ∑ÊúâÁ±ªÁöÑÁâπÊÄßÔºåÂèØ‰ª• public„ÄÅprivate„ÄÅprotected ‰øÆÈ•∞Á±ªÔºåËÄåÊé•Âè£Âè™ËÉΩ‰ΩøÁî® publicÔºå‰∏îÊäΩË±°Á±ªÂÖ∑ÊúâÊûÑÈÄ†ÂáΩÊï∞„ÄÅÊàêÂëòÂèòÈáèÔºåÊé•Âè£ÈÉΩ‰∏çÂÖ∑Â§áÔºõ ÊäΩË±°Á±ªÂíåÊé•Âè£ÈÉΩ‰∏çËÉΩÂÆû‰æãÂåñÔºå‰ΩÜÊòØÊäΩË±°Á±ª‰∏≠ÂèØ‰ª•ÊúâÂÆûÁé∞Â•ΩÁöÑÊñπÊ≥ïÔºåÂèØ‰ª•Ë¢´ÁªßÊâøÔºåÁªßÊâøËÄÖÂèØ‰ª•ÈÄâÊã©ÂÆûÁé∞ÈÉ®ÂàÜÊäΩË±°Á±ªÁöÑÊñπÊ≥ïÔºåÁÑ∂Âêé‰∫§Áî±Â≠êÁ±ªÁªßÁª≠ÂéªÂÆåÊàêÊäΩË±°Á±ª‰∏≠Êú™ÂÆåÊàêÁöÑÊäΩË±°ÊñπÊ≥ïÁöÑÈáçÂÜôÔºå‰ΩÜÊòØÊé•Âè£ÂøÖÈ°ªÊääÊâÄÊúâÂÆö‰πâÁöÑÊñπÊ≥ïÂÖ®ÈÉ®ÂÆûÁé∞Ôºõ ÊäΩË±°Á±ªÂèØ‰ª•Ë¢´ÁªßÊâøÔºåÊâÄ‰ª•ÂøÖÈ°ªÊª°Ë∂≥ÂçïÁªßÊâøÔºå‰ΩÜÊòØÊé•Âè£‰∏ç‰∏ÄÊ†∑ÔºåÊé•Âè£Ê≤°ÊúâÈôêÂà∂„ÄÇ Java‰∏≠publicÔºåprotectedÔºåprivate‰ª•ÂèäÈªòËÆ§ÁöÑËÆøÈóÆÊùÉÈôê‰ΩúÁî®Âüü ÂÜÖÈÉ®Á±ª https://www.cnblogs.com/dolphin0520/p/3811445.html ÂÜôÁöÑÁúüÁöÑÂ§™Â•Ω‰∫Ü‚Ä¶ ÂÜÖÈÉ®Á±ªÂü∫Á°ÄÂÜÖÈÉ®Á±ªÂ∞±ÊòØ‰∏Ä‰∏™Á±ªÂèØ‰ª•ÊîæÂà∞Âè¶Â§ñ‰∏Ä‰∏™Á±ªÊàñËÄÖÊñπÊ≥ïÈáåÈù¢ÔºåÊÄªÂÖ±ÂàÜ‰∏∫ÂõõÁßçÊÉÖÂÜµÔºö ÊàêÂëòÂÜÖÈÉ®Á±ªÔºõ„ÄåÊîæÂú®Á±ª‰∏≠„Äç Â±ÄÈÉ®ÂÜÖÈÉ®Á±ªÔºõ„ÄåÊîæÂú®ÊñπÊ≥ï‰∏≠„Äç ÂåøÂêçÂÜÖÈÉ®Á±ªÔºõ ÈùôÊÄÅÂÜÖÈÉ®Á±ª„ÄÇ ÊàêÂëòÂÜÖÈÉ®Á±ª123456789101112131415161718192021222324252627282930313233343536public class InnerClassDemo &#123; public int age = 18; public int sex = 1; // Â§ñÈÉ®Á±ªÂè™ËÉΩÊòØ public or default // Ë∑üÂ§ñÈÉ®Á±ª‰∏ç‰∏ÄÊ†∑ÔºåËøôÈáåÂèØ‰ª•Êúâprivate„ÄÅpublic„ÄÅprotected„ÄÅ‰∏çÂä†(default) class Inner &#123; public int age = 20; // ÂΩìÂÜÖÈÉ®Á±ªÁöÑÂèòÈáèÂíåÂ§ñÈÉ®Á±ªÂèòÈáèÂêçÂ≠ó‰∏ÄËá¥ÔºåÊ≥®ÊÑèÂØπË±°ÔºåÂ¶ÇÊûúË¶Å‰ΩøÁî®Â§ñÈÉ®ÂØπË±° // ÂàôÊòØ Â§ñÈÉ®Á±ªÂêç.this public int inner_sex = 1; public void showAge() &#123; int age = 25; System.out.println(sex); System.out.println(age);//25 System.out.println(this.age);//20 System.out.println(InnerClassDemo.this.age);//18 ÂÜÖÈÉ®Á±ªËÆøÈóÆÂ§ñÈÉ®Á±ªÁöÑÂØπË±°Ôºå‰ΩøÁî® Á±ªÂêç.this &#125; &#125; // ËôΩÁÑ∂ÊàêÂëòÂÜÖÈÉ®Á±ªÂèØ‰ª•Êó†Êù°‰ª∂Âú∞ËÆøÈóÆÂ§ñÈÉ®Á±ªÁöÑÊàêÂëòÔºå // ËÄåÂ§ñÈÉ®Á±ªÊÉ≥ËÆøÈóÆÊàêÂëòÂÜÖÈÉ®Á±ªÁöÑÊàêÂëòÂç¥‰∏çÊòØËøô‰πàÈöèÂøÉÊâÄÊ¨≤‰∫Ü„ÄÇ // Âú®Â§ñÈÉ®Á±ª‰∏≠Â¶ÇÊûúË¶ÅËÆøÈóÆÊàêÂëòÂÜÖÈÉ®Á±ªÁöÑÊàêÂëòÔºåÂøÖÈ°ªÂÖàÂàõÂª∫‰∏Ä‰∏™ÊàêÂëòÂÜÖÈÉ®Á±ªÁöÑÂØπË±°ÔºåÂÜçÈÄöËøáÊåáÂêëËøô‰∏™ÂØπË±°ÁöÑÂºïÁî®Êù•ËÆøÈóÆÔºö public void get_inner_sex()&#123; Inner inner = new Inner(); inner.showAge(); System.out.println(inner.inner_sex); &#125;&#125;class Test &#123; public static void main(String[] args) &#123; // Ê≥®ÊÑèÂÜôÊ≥ïÔºönew Á±ªÂêç().new ÂÜÖÈÉ®Á±ªÂêç() InnerClassDemo.Inner innerClassDemo = new InnerClassDemo().new Inner(); innerClassDemo.showAge(); &#125;&#125; ÊàêÂëòÂÜÖÈÉ®Á±ªÊúâÂõõÁÇπÈúÄË¶ÅÊ≥®ÊÑèÔºö ÂÜÖÈÉ®Á±ªÂèØ‰ª•Êã•ÊúâprivateËÆøÈóÆÊùÉÈôê„ÄÅprotectedËÆøÈóÆÊùÉÈôê„ÄÅpublicËÆøÈóÆÊùÉÈôêÂèäÂåÖËÆøÈóÆÊùÉÈôê„ÄÇÊØîÂ¶Ç‰∏äÈù¢ÁöÑ‰æãÂ≠êÔºåÂ¶ÇÊûúÊàêÂëòÂÜÖÈÉ®Á±ªInnerÁî®private‰øÆÈ•∞ÔºåÂàôÂè™ËÉΩÂú®Â§ñÈÉ®Á±ªÁöÑÂÜÖÈÉ®ËÆøÈóÆÔºåÂ¶ÇÊûúÁî®public‰øÆÈ•∞ÔºåÂàô‰ªª‰ΩïÂú∞ÊñπÈÉΩËÉΩËÆøÈóÆÔºõÂ¶ÇÊûúÁî®protected‰øÆÈ•∞ÔºåÂàôÂè™ËÉΩÂú®Âêå‰∏Ä‰∏™ÂåÖ‰∏ãÊàñËÄÖÁªßÊâøÂ§ñÈÉ®Á±ªÁöÑÊÉÖÂÜµ‰∏ãËÆøÈóÆÔºõÂ¶ÇÊûúÊòØÈªòËÆ§ËÆøÈóÆÊùÉÈôêÔºåÂàôÂè™ËÉΩÂú®Âêå‰∏Ä‰∏™ÂåÖ‰∏ãËÆøÈóÆ„ÄÇËøô‰∏ÄÁÇπÂíåÂ§ñÈÉ®Á±ªÊúâ‰∏ÄÁÇπ‰∏ç‰∏ÄÊ†∑ÔºåÂ§ñÈÉ®Á±ªÂè™ËÉΩË¢´publicÂíåÂåÖËÆøÈóÆ‰∏§ÁßçÊùÉÈôê‰øÆÈ•∞„ÄÇÊàë‰∏™‰∫∫ÊòØËøô‰πàÁêÜËß£ÁöÑÔºåÁî±‰∫éÊàêÂëòÂÜÖÈÉ®Á±ªÁúãËµ∑Êù•ÂÉèÊòØÂ§ñÈÉ®Á±ªÁöÑ‰∏Ä‰∏™ÊàêÂëòÔºåÊâÄ‰ª•ÂèØ‰ª•ÂÉèÁ±ªÁöÑÊàêÂëò‰∏ÄÊ†∑Êã•ÊúâÂ§öÁßçÊùÉÈôê‰øÆÈ•∞„ÄÇ ÂΩìÂÜÖÈÉ®Á±ªÂíåÂ§ñÈÉ®Á±ªÊúâÁùÄ‰∏ÄÊ†∑ÁöÑÂèòÈáèÊó∂ÔºåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂ¶ÇÊûúÁî® this.ÂèòÈáèÂêç Ëé∑ÂæóÁöÑÊòØÂÜÖÈÉ®Á±ªÁöÑÊàêÂëòÂèòÈáèÔºåÂ¶ÇÊûúÊÉ≥Ë¶ÅËé∑ÂæóÂ§ñÈÉ®Á±ªÁöÑÊàêÂëòÂèòÈáèÊàñËÄÖÊàêÂëòÊñπÊ≥ïÈúÄË¶Å‰ΩøÁî® Â§ñÈÉ®Á±ªÂêç.this.ÂèòÈáèÂêç Âíå Â§ñÈÉ®Á±ªÂêç.this.ÊàêÂëòÊñπÊ≥ïÂêçÔºõ ËôΩÁÑ∂ÊàêÂëòÂÜÖÈÉ®Á±ªÂèØ‰ª•Êó†Êù°‰ª∂Âú∞ËÆøÈóÆÂ§ñÈÉ®Á±ªÁöÑÊàêÂëòÔºåËÄåÂ§ñÈÉ®Á±ªÊÉ≥ËÆøÈóÆÊàêÂëòÂÜÖÈÉ®Á±ªÁöÑÊàêÂëòÂç¥‰∏çÊòØËøô‰πàÈöèÂøÉÊâÄÊ¨≤‰∫Ü„ÄÇÂú®Â§ñÈÉ®Á±ª‰∏≠Â¶ÇÊûúË¶ÅËÆøÈóÆÊàêÂëòÂÜÖÈÉ®Á±ªÁöÑÊàêÂëòÔºåÂøÖÈ°ªÂÖàÂàõÂª∫‰∏Ä‰∏™ÊàêÂëòÂÜÖÈÉ®Á±ªÁöÑÂØπË±°ÔºåÂÜçÈÄöËøáÊåáÂêëËøô‰∏™ÂØπË±°ÁöÑÂºïÁî®Êù•ËÆøÈóÆÔºõ ÊàêÂëòÂÜÖÈÉ®Á±ªÊòØ‰æùÈôÑÂ§ñÈÉ®Á±ªËÄåÂ≠òÂú®ÁöÑÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÂ¶ÇÊûúË¶ÅÂàõÂª∫ÊàêÂëòÂÜÖÈÉ®Á±ªÁöÑÂØπË±°ÔºåÂâçÊèêÊòØÂøÖÈ°ªÂ≠òÂú®‰∏Ä‰∏™Â§ñÈÉ®Á±ªÁöÑÂØπË±°„ÄÇ‰πüÂ∞±ÊòØ new Á±ªÂêç().new ÂÜÖÈÉ®Á±ªÂêç()„ÄÇ Â±ÄÈÉ®ÂÜÖÈÉ®Á±ª12345678910111213141516171819202122232425262728293031package ÂÜÖÈÉ®Á±ª;/** * ‰∏éÊàêÂëòÂÜÖÈÉ®Á±ªÂü∫Êú¨‰∏ÄËá¥Ôºå‰ΩÜÊòØÊúâ2Â§Ñ‰∏ç‰∏ÄÊ†∑ * 1.Â±ÄÈÉ®ÂÜÖÈÉ®Á±ªÊòØÂÆö‰πâÂú®‰∏Ä‰∏™ÊñπÊ≥ïÊàñËÄÖ‰∏Ä‰∏™‰ΩúÁî®ÂüüÈáåÈù¢ÁöÑÁ±ªÔºåÂÆÉÂíåÊàêÂëòÂÜÖÈÉ®Á±ªÁöÑÂå∫Âà´Âú®‰∫éÂ±ÄÈÉ®ÂÜÖÈÉ®Á±ªÁöÑËÆøÈóÆ‰ªÖÈôê‰∫éÊñπÊ≥ïÂÜÖÊàñËÄÖËØ•‰ΩúÁî®ÂüüÂÜÖ„ÄÇ * 2. ÂÜÖÈÉ®Á±ªÊ≠§Êó∂‰∏çËÉΩÊúâ‰øÆÈ•∞Á¨¶ */public class InnerClassDemo2 &#123; public int age = 18; public void example()&#123; int age = 20; // ‰∏çËÉΩÊúâ‰øÆÈ•∞ÔºÅ class Inner2&#123; public int age = 25; public void inner_method()&#123; System.out.println(age); // 25 System.out.println(this.age); // 25 System.out.println(InnerClassDemo2.this.age); //18 &#125; &#125; new Inner2().inner_method(); &#125;&#125;class Test2 &#123; public static void main(String[] args) &#123; InnerClassDemo2 innerClassDemo2 = new InnerClassDemo2(); innerClassDemo2.example(); &#125;&#125; Â±ÄÈÉ®ÂÜÖÈÉ®Á±ªÊòØÂÆö‰πâÂú®‰∏Ä‰∏™ÊñπÊ≥ïÊàñËÄÖ‰∏Ä‰∏™‰ΩúÁî®ÂüüÈáåÈù¢ÁöÑÁ±ªÔºåÂÆÉÂíåÊàêÂëòÂÜÖÈÉ®Á±ªÁöÑÂå∫Âà´Âú®‰∫éÂ±ÄÈÉ®ÂÜÖÈÉ®Á±ªÁöÑËÆøÈóÆ‰ªÖÈôê‰∫éÊñπÊ≥ïÂÜÖÊàñËÄÖËØ•‰ΩúÁî®ÂüüÂÜÖ„ÄÇ Ê≥®ÊÑèÔºåÂ±ÄÈÉ®ÂÜÖÈÉ®Á±ªÂ∞±ÂÉèÊòØÊñπÊ≥ïÈáåÈù¢ÁöÑ‰∏Ä‰∏™Â±ÄÈÉ®ÂèòÈáè‰∏ÄÊ†∑ÔºåÊòØ‰∏çËÉΩÊúâpublic„ÄÅprotected„ÄÅprivate‰ª•Âèästatic‰øÆÈ•∞Á¨¶ÁöÑ„ÄÇ ÂåøÂêçÂÜÖÈÉ®Á±ª1234567891011121314151617181920212223242526package ÂÜÖÈÉ®Á±ª;public class InnerClassDemo3 implements Runnable&#123; @Override public void run() &#123; System.out.println("‰∏ç‰ΩøÁî®ÂÜÖÈÉ®Á±ªÔºåÂæóÂÖàÂ£∞Êòé‰∏Ä‰∏™Á±ªÂπ∂ÂÆûÁé∞Êé•Âè£"); &#125;&#125;class Test3&#123; public static void main(String[] args) &#123; // ‰ΩøÁî®ÂÜÖÈÉ®Á±ªÔºåÂèØ‰ª•Âä†ÊåÅ lambda Ë°®ËææÂºè new Thread(() -&gt; System.out.println("ÂÜÖÈÉ®Á±ªÁúüÂ•ΩÁî®")).start(); // ‰ΩøÁî®ÂÜÖÈÉ®Á±ªÔºå‰ΩÜÊòØÊ≤°Áî® lambda Ë°®ËææÂºè new Thread(new Runnable() &#123; @Override public void run() &#123; System.out.println("ÂÜÖÈÉ®Á±ªÁúüÂ•ΩÁî®"); &#125; &#125;).start(); // ‰∏ç‰ΩøÁî®ÂÜÖÈÉ®Á±ªÔºåÂèàËá≠ÂèàÈïø InnerClassDemo3 innerClassDemo3 = new InnerClassDemo3(); new Thread(innerClassDemo3).start(); &#125;&#125; ÂæàÊòéÊòæÔºåÂÜÖÈÉ®Á±ª + lambdaË°®ËææÂºè ‰ΩøÂæó‰ª£Á†ÅÈùûÂ∏∏ÁöÑÂπ≤ÂáÄ„ÄÇ‰ΩøÁî®ÂåøÂêçÂÜÖÈÉ®Á±ªËÉΩÂ§üÂú®ÂÆûÁé∞Áà∂Á±ªÊàñËÄÖÊé•Âè£‰∏≠ÁöÑÊñπÊ≥ïÊÉÖÂÜµ‰∏ãÂêåÊó∂‰∫ßÁîü‰∏Ä‰∏™Áõ∏Â∫îÁöÑÂØπË±°Ôºå‰ΩÜÊòØÂâçÊèêÊòØËøô‰∏™Áà∂Á±ªÊàñËÄÖÊé•Âè£ÂøÖÈ°ªÂÖàÂ≠òÂú®ÊâçËÉΩËøôÊ†∑‰ΩøÁî®„ÄÇ ÂΩìÁÑ∂ÔºåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºö ÂåøÂêçÂÜÖÈÉ®Á±ªÊòØÂîØ‰∏Ä‰∏ÄÁßçÊ≤°ÊúâÊûÑÈÄ†Âô®ÁöÑÁ±ª„ÄÇÊ≠£Âõ†‰∏∫ÂÖ∂Ê≤°ÊúâÊûÑÈÄ†Âô®ÔºåÊâÄ‰ª•ÂåøÂêçÂÜÖÈÉ®Á±ªÁöÑ‰ΩøÁî®ËåÉÂõ¥ÈùûÂ∏∏ÊúâÈôêÔºåÂ§ßÈÉ®ÂàÜÂåøÂêçÂÜÖÈÉ®Á±ªÁî®‰∫éÊé•Âè£ÂõûË∞É„ÄÇÂåøÂêçÂÜÖÈÉ®Á±ªÂú®ÁºñËØëÁöÑÊó∂ÂÄôÁî±Á≥ªÁªüËá™Âä®Ëµ∑Âêç‰∏∫Outter$1.class„ÄÇ‰∏ÄËà¨Êù•ËØ¥ÔºåÂåøÂêçÂÜÖÈÉ®Á±ªÁî®‰∫éÁªßÊâøÂÖ∂‰ªñÁ±ªÊàñÊòØÂÆûÁé∞Êé•Âè£ÔºåÂπ∂‰∏çÈúÄË¶ÅÂ¢ûÂä†È¢ùÂ§ñÁöÑÊñπÊ≥ïÔºåÂè™ÊòØÂØπÁªßÊâøÊñπÊ≥ïÁöÑÂÆûÁé∞ÊàñÊòØÈáçÂÜô„ÄÇ ÈùôÊÄÅÂÜÖÈÉ®Á±ª ÈùôÊÄÅÂÜÖÈÉ®Á±ª‰πüÊòØÂÆö‰πâÂú®Âè¶‰∏Ä‰∏™Á±ªÈáåÈù¢ÁöÑÁ±ªÔºåÂè™‰∏çËøáÂú®Á±ªÁöÑÂâçÈù¢Â§ö‰∫Ü‰∏Ä‰∏™ÂÖ≥ÈîÆÂ≠ó staticÔºõ ÈùôÊÄÅÂÜÖÈÉ®Á±ªÊòØ‰∏çÈúÄË¶Å‰æùËµñ‰∫éÂ§ñÈÉ®Á±ªÁöÑÂÆû‰æãÂØπË±°ÁöÑÔºåÊâÄ‰ª•Âú®Âà´ÁöÑÁ±ª‰∏≠Ë∞ÉÁî®ÂÜÖÈÉ®Á±ªÊó∂Ôºå‰∏çÈúÄË¶ÅÂÖàÂéªËé∑ÂèñÂ§ñÈÉ®Á±ªÁöÑÂØπË±°ÔºåËøôÁÇπÂíåÁ±ªÁöÑÈùôÊÄÅÊàêÂëòÂ±ûÊÄßÊúâÁÇπÁ±ª‰ººÔºõ Âπ∂‰∏îÂÆÉ‰∏çËÉΩ‰ΩøÁî®Â§ñÈÉ®Á±ªÁöÑÈùûstaticÊàêÂëòÂèòÈáèÊàñËÄÖÊñπÊ≥ïÔºåËøôÁÇπÂæàÂ•ΩÁêÜËß£ÔºåÂõ†‰∏∫Âú®Ê≤°ÊúâÂ§ñÈÉ®Á±ªÁöÑÂØπË±°ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂèØ‰ª•ÂàõÂª∫ÈùôÊÄÅÂÜÖÈÉ®Á±ªÁöÑÂØπË±°ÔºåÂ¶ÇÊûúÂÖÅËÆ∏ËÆøÈóÆÂ§ñÈÉ®Á±ªÁöÑÈùûstaticÊàêÂëòÂ∞±‰ºö‰∫ßÁîüÁüõÁõæÔºåÂõ†‰∏∫Â§ñÈÉ®Á±ªÁöÑÈùûstaticÊàêÂëòÂøÖÈ°ª‰æùÈôÑ‰∫éÂÖ∑‰ΩìÁöÑÂØπË±°„ÄÇ ‰∏∫‰∫ÜÂØπÊØîÁ¨¨‰∏ÄÁßçÂå∫Âà´ÔºåÊàëÁõ¥Êé•Âú®Á¨¨‰∏ÄÁßç‰ª£Á†Å‰∏äÂÅö‰∫ÜÈÉ®ÂàÜÊîπÂä®Ôºö 1234567891011121314151617181920212223242526272829303132333435363738394041package ÂÜÖÈÉ®Á±ª;public class InnerClassDemo4 &#123; public int age = 18; public int sex = 1; public static int static_age = 188; // Â§ñÈÉ®Á±ªÂè™ËÉΩÊòØ public or default // Ë∑üÂ§ñÈÉ®Á±ª‰∏ç‰∏ÄÊ†∑ÔºåËøôÈáåÂèØ‰ª•Êúâprivate„ÄÅpublic„ÄÅprotected„ÄÅ‰∏çÂä†(default) static class Inner &#123; public int age = 20; // ÂΩìÂÜÖÈÉ®Á±ªÁöÑÂèòÈáèÂíåÂ§ñÈÉ®Á±ªÂèòÈáèÂêçÂ≠ó‰∏ÄËá¥ÔºåÊ≥®ÊÑèÂØπË±°ÔºåÂ¶ÇÊûúË¶Å‰ΩøÁî®Â§ñÈÉ®ÂØπË±° // ÂàôÊòØ Â§ñÈÉ®Á±ªÂêç.this public int inner_sex = 1; public void showAge() &#123; int age = 25;// System.out.println(sex); // Ê≠§Êó∂Â∞±‰∏çËÉΩ‰ΩøÁî®‰∫ÜÔºåÂõ†‰∏∫ÊòØ Èùû static System.out.println(age);//25 System.out.println(this.age);//20// System.out.println(InnerClassDemo4.this.age);//18 ÂÜÖÈÉ®Á±ªËÆøÈóÆÂ§ñÈÉ®Á±ªÁöÑÂØπË±°Ôºå‰ΩøÁî® Á±ªÂêç.this ---&gt;Ê≠§Êó∂‰ºöÊä•Èîô System.out.println(InnerClassDemo4.static_age); //188 &#125; &#125; // ËôΩÁÑ∂ÊàêÂëòÂÜÖÈÉ®Á±ªÂèØ‰ª•Êó†Êù°‰ª∂Âú∞ËÆøÈóÆÂ§ñÈÉ®Á±ªÁöÑÊàêÂëòÔºå // ËÄåÂ§ñÈÉ®Á±ªÊÉ≥ËÆøÈóÆÊàêÂëòÂÜÖÈÉ®Á±ªÁöÑÊàêÂëòÂç¥‰∏çÊòØËøô‰πàÈöèÂøÉÊâÄÊ¨≤‰∫Ü„ÄÇ // Âú®Â§ñÈÉ®Á±ª‰∏≠Â¶ÇÊûúË¶ÅËÆøÈóÆÊàêÂëòÂÜÖÈÉ®Á±ªÁöÑÊàêÂëòÔºåÂøÖÈ°ªÂÖàÂàõÂª∫‰∏Ä‰∏™ÊàêÂëòÂÜÖÈÉ®Á±ªÁöÑÂØπË±°ÔºåÂÜçÈÄöËøáÊåáÂêëËøô‰∏™ÂØπË±°ÁöÑÂºïÁî®Êù•ËÆøÈóÆÔºö public void get_inner_sex()&#123; Inner inner = new Inner(); inner.showAge(); System.out.println(inner.inner_sex); &#125;&#125;class Test4 &#123; public static void main(String[] args) &#123; // Ê≥®ÊÑèÂÜôÊ≥ïÔºönew Á±ªÂêç().new ÂÜÖÈÉ®Á±ªÂêç()// InnerClassDemo4.Inner innerClassDemo = new InnerClassDemo4().new Inner();// Ê≠§Êó∂‰ºöÊä•Èîô InnerClassDemo4.Inner innerClassDemo = new InnerClassDemo4.Inner(); innerClassDemo.showAge(); &#125;&#125; ‰ªé‰∏äËø∞‰ª£Á†ÅÂèØ‰ª•ÁúãÂà∞ÔºåÊúâ‰∏§‰∏™Âú∞ÊñπÂíåÁ¨¨‰∏ÄÂ§Ñ‰∏ç‰∏ÄÊ†∑Ôºö ÂÜÖÈÉ®Á±ª‰∏≠Êó†Ê≥ïË∞ÉÁî®Â§ñÈÉ®Á±ªÈùû static ÂèòÈáèÔºõ ÂÖ∂‰ªñÁ±ªË∞ÉÁî®ÂÜÖÈÉ®Á±ªÊó∂ÔºåÊó†ÈúÄÂÖàÂÆû‰æãÂåñÂ§ñÈÉ®Á±ª‰∫ÜÔºåÂèØ‰ª•Áõ¥Êé•Â§ñÈÉ®Á±ªÂêç.ÂÜÖÈÉ®Á±ªÂêç()„ÄÇ Ê∑±ÂÖ•ÁêÜËß£ÂÜÖÈÉ®Á±ª1.‰∏∫‰ΩïÂú®ÊàêÂëòÂÜÖÈÉ®Á±ª‰∏≠ÔºåÂÜÖÈÉ®Á±ªÂèØ‰ª•ÈöèÊÑèËÆøÈóÆÂ§ñÈÉ®Á±ªÔºü ËôΩÁÑ∂Êàë‰ª¨Âú®ÂÆö‰πâÁöÑÂÜÖÈÉ®Á±ªÁöÑÊûÑÈÄ†Âô®ÊòØÊó†ÂèÇÊûÑÈÄ†Âô®ÔºåÁºñËØëÂô®ËøòÊòØ‰ºöÈªòËÆ§Ê∑ªÂä†‰∏Ä‰∏™ÂèÇÊï∞ÔºåËØ•ÂèÇÊï∞ÁöÑÁ±ªÂûã‰∏∫ÊåáÂêëÂ§ñÈÉ®Á±ªÂØπË±°ÁöÑ‰∏Ä‰∏™ÂºïÁî®ÔºåÊâÄ‰ª•ÊàêÂëòÂÜÖÈÉ®Á±ª‰∏≠ÁöÑOutter this&amp;0 ÊåáÈíà‰æøÊåáÂêë‰∫ÜÂ§ñÈÉ®Á±ªÂØπË±°ÔºåÂõ†Ê≠§ÂèØ‰ª•Âú®ÊàêÂëòÂÜÖÈÉ®Á±ª‰∏≠ÈöèÊÑèËÆøÈóÆÂ§ñÈÉ®Á±ªÁöÑÊàêÂëò„ÄÇ‰ªéËøôÈáå‰πüÈó¥Êé•ËØ¥Êòé‰∫ÜÊàêÂëòÂÜÖÈÉ®Á±ªÊòØ‰æùËµñ‰∫éÂ§ñÈÉ®Á±ªÁöÑÔºåÂ¶ÇÊûúÊ≤°ÊúâÂàõÂª∫Â§ñÈÉ®Á±ªÁöÑÂØπË±°ÔºåÂàôÊó†Ê≥ïÂØπOutter this&amp;0ÂºïÁî®ËøõË°åÂàùÂßãÂåñËµãÂÄºÔºå‰πüÂ∞±Êó†Ê≥ïÂàõÂª∫ÊàêÂëòÂÜÖÈÉ®Á±ªÁöÑÂØπË±°‰∫Ü„ÄÇ 2.ÈùôÊÄÅÂÜÖÈÉ®Á±ªÊúâÁâπÊÆäÁöÑÂú∞ÊñπÂêóÔºü ‰ªéÂâçÈù¢ÂèØ‰ª•Áü•ÈÅìÔºåÈùôÊÄÅÂÜÖÈÉ®Á±ªÊòØ‰∏ç‰æùËµñ‰∫éÂ§ñÈÉ®Á±ªÁöÑÔºå‰πüÂ∞±ËØ¥ÂèØ‰ª•Âú®‰∏çÂàõÂª∫Â§ñÈÉ®Á±ªÂØπË±°ÁöÑÊÉÖÂÜµ‰∏ãÂàõÂª∫ÂÜÖÈÉ®Á±ªÁöÑÂØπË±°„ÄÇÂè¶Â§ñÔºåÈùôÊÄÅÂÜÖÈÉ®Á±ªÊòØ‰∏çÊåÅÊúâÊåáÂêëÂ§ñÈÉ®Á±ªÂØπË±°ÁöÑÂºïÁî®ÁöÑÔºåËøô‰∏™ËØªËÄÖÂèØ‰ª•Ëá™Â∑±Â∞ùËØïÂèçÁºñËØëclassÊñá‰ª∂Áúã‰∏Ä‰∏ãÂ∞±Áü•ÈÅì‰∫ÜÔºåÊòØÊ≤°ÊúâOutter this&amp;0ÂºïÁî®ÁöÑ„ÄÇ ÂÜÖÈÉ®Á±ªÁöÑ‰ΩøÁî®Âú∫ÊôØ‰∏∫‰ªÄ‰πàÂú®Java‰∏≠ÈúÄË¶ÅÂÜÖÈÉ®Á±ªÔºüÊÄªÁªì‰∏Ä‰∏ã‰∏ªË¶ÅÊúâ‰ª•‰∏ãÂõõÁÇπÔºö ÊØè‰∏™ÂÜÖÈÉ®Á±ªÈÉΩËÉΩÁã¨Á´ãÁöÑÁªßÊâø‰∏Ä‰∏™Êé•Âè£ÁöÑÂÆûÁé∞ÔºåÊâÄ‰ª•Êó†ËÆ∫Â§ñÈÉ®Á±ªÊòØÂê¶Â∑≤ÁªèÁªßÊâø‰∫ÜÊüê‰∏™(Êé•Âè£ÁöÑ)ÂÆûÁé∞ÔºåÂØπ‰∫éÂÜÖÈÉ®Á±ªÈÉΩÊ≤°ÊúâÂΩ±ÂìçÔºåÂÜÖÈÉ®Á±ª‰ΩøÂæóÂ§öÁªßÊâøÁöÑËß£ÂÜ≥ÊñπÊ°àÂèòÂæóÂÆåÊï¥Ôºõ Êñπ‰æøÂ∞ÜÂ≠òÂú®‰∏ÄÂÆöÈÄªËæëÂÖ≥Á≥ªÁöÑÁ±ªÁªÑÁªáÂú®‰∏ÄËµ∑ÔºåÂèàÂèØ‰ª•ÂØπÂ§ñÁïåÈöêËóèÔºõ„ÄåThreadLocal &amp; ThreadLocalMap„Äç Êñπ‰æøÁºñÂÜôÁ∫øÁ®ã‰ª£Á†Å„ÄÇ ÊúÄÂêéË°•ÂÖÖ‰∏ÄÁÇπÁü•ËØÜÔºöÂÖ≥‰∫éÊàêÂëòÂÜÖÈÉ®Á±ªÁöÑÁªßÊâøÈóÆÈ¢ò„ÄÇ‰∏ÄËà¨Êù•ËØ¥ÔºåÂÜÖÈÉ®Á±ªÊòØÂæàÂ∞ëÁî®Êù•‰Ωú‰∏∫ÁªßÊâøÁî®ÁöÑ„ÄÇ‰ΩÜÊòØÂΩìÁî®Êù•ÁªßÊâøÁöÑËØùÔºåË¶ÅÊ≥®ÊÑè‰∏§ÁÇπÔºö 1ÔºâÊàêÂëòÂÜÖÈÉ®Á±ªÁöÑÂºïÁî®ÊñπÂºèÂøÖÈ°ª‰∏∫ Â§ñÈÉ®Á±ªÂêç.ÂÜÖÈÉ®Á±ªÂêçÔºõ 2ÔºâÊûÑÈÄ†Âô®‰∏≠ÂøÖÈ°ªÊúâÊåáÂêëÂ§ñÈÉ®Á±ªÂØπË±°ÁöÑÂºïÁî®ÔºåÂπ∂ÈÄöËøáËøô‰∏™ÂºïÁî®Ë∞ÉÁî®super()„ÄÇËøôÊÆµ‰ª£Á†ÅÊëòËá™„ÄäJavaÁºñÁ®ãÊÄùÊÉ≥„Äã 1234567891011121314151617class WithInner &#123; class Inner&#123; &#125;&#125;class InheritInner extends WithInner.Inner &#123; // InheritInner() ÊòØ‰∏çËÉΩÈÄöËøáÁºñËØëÁöÑÔºå‰∏ÄÂÆöË¶ÅÂä†‰∏äÂΩ¢ÂèÇ InheritInner(WithInner wi) &#123; wi.super(); //ÂøÖÈ°ªÊúâËøôÂè•Ë∞ÉÁî® &#125; public static void main(String[] args) &#123; WithInner wi = new WithInner(); InheritInner obj = new InheritInner(wi); &#125;&#125; ÂèçÂ∞ÑÊú∫Âà∂ ÂèçÂ∞ÑÁöÑÂü∫Êú¨Áî®Ê≥ïÔºöhttps://blog.csdn.net/a745233700/article/details/82893076 Ëé∑ÂèñÁ±ªÔºàÁ¨¨‰∏â‰∏™ÊñπÊ≥ïÊúÄÂ∏∏Áî®Ôºâ // ÊñπÊ≥ï‰∏ÄÔºöÈÄöËøáÂÆû‰æãÂØπË±°Ëé∑ÂèñÔºå‰∏çËøáËØ¥ÂÆûËØùÔºåÈÉΩËÉΩÊãøÂà∞ÂØπË±°‰∫ÜÔºåËøòË¶ÅÁ±ªÂØπË±°Âπ≤Âòõ..// ‰∏çËøáÊúâÁßçÁî®ÈÄîÔºåÂ∞±ÊòØÊØîÂ¶ÇÂèØ‰ª•Ë∂äËøáÊ≥õÂûãÊ£ÄÊü•ÔºåÊ∑ªÂä†Êï∞ÊçÆ// ÊØîÂ¶Ç‰∏Ä‰∏™ÂØπË±°ÊòØ ArrayList\ÔºåÂèØÈÄöËøáÂèçÂ∞ÑÊ∑ªÂä†‰∏Ä‰∏™ IntegerÁöÑÊï∞// Âõ†‰∏∫javaÁöÑÊ≥õÂûãÊòØÂú®ÁºñËØë‰πãÂêéÊì¶Èô§ÁöÑ‚Ä¶Â≠òÂú®ÊºèÊ¥ûÂìàÂìàÂìà// ‰æãÂ≠êËßÅÔºö https://blog.csdn.net/sinat_38259539/article/details/71799078 123&gt; InnerClassDemo1 innerClassDemo1 = new InnerClassDemo1();&gt; Class innerClass = innerClassDemo1.getClass();&gt; ÊñπÊ≥ï‰∫åÔºöÁ±ªÂêç.classÔºåËøô‰∏™ÈúÄË¶ÅÂØºÂåÖ‚Ä¶ 12&gt; Class innerClass = InnerClassDemo1.class;&gt; ÊñπÊ≥ï‰∏âÔºöÊúÄÂ∏∏Áî®Ôºå‰ΩøÁî®Á±ªÂêçÔºàÁõ∏ÂØπË∑ØÂæÑÔºâ 12&gt; Class innerClass = Class.forName("ÂÜÖÈÉ®Á±ª.InnerClassDemo1");&gt; Ëé∑ÂæóÂÆû‰æãÂØπË±° 1234&gt; Class.forname("").getConstructor(String.class).newinstance() // ÂèØÁî®‰∫éÁîüÊàêÊúâÂèÇÁöÑÂØπË±°&gt; &gt; Class.forname("").newInstance() // ÂèØÁîüÊàêÊó†ÂèÇÁöÑÂØπË±°&gt; ÊãøÂà∞ÂÆû‰æãÂ±ûÊÄß„ÄÅÂÆû‰æãÊñπÊ≥ï 123456789&gt; // ÊãøÂà∞ÂØπË±°ÁöÑÂ±ûÊÄß&gt; Field field = innerClass.getField("sex");&gt; // Â¶ÇÊûúÂèÇÊï∞ÊòØprivateÔºåÂèØ‰ª•Êì¶Èô§&gt; // field.setAccessible(true);&gt; int a = (int) field.get(innerClassDemo1);&gt; // ÊãøÂà∞ÊñπÊ≥ï&gt; Method showAge = innerClass.getMethod("get_inner_sex");&gt; showAge.invoke(innerClassDemo1);&gt; ÊãøÂà∞ÈùôÊÄÅÂèòÈáèÊàñËÄÖÈùôÊÄÅÂØπË±° 123456&gt; // ÊãøÂà∞Á±ªÁöÑÂ±ûÊÄß&gt; Field ff = innerClass.getField("haha");&gt; int b = (int) ff.get(innerClass);&gt; // ÊàñËÄÖ int b = (int) ff.get(innerClassDemo1);&gt; System.out.println("b: " + b);&gt; Âä®ÊÄÅ‰ª£ÁêÜ demo ÊµãËØïÁ±ª 12345678910111213141516171819202122232425262728package Proxy;import java.lang.reflect.InvocationHandler;import java.lang.reflect.Proxy;public class test &#123; public static void main(String[] args) &#123; // Áõ∏ÂΩì‰∫éÂÅöÁîüÊÑèÁöÑËøáÁ®ãÔºåÊØîÂ¶ÇÊàëÂéªÂåªÈô¢Êï¥ÂÆπÔºåÈ¶ñÂÖàÊàëË¶ÅÁ°Æ‰øùÊàëÊúâÈí±(‰πüÂ∞±ÊòØÊúâÊé•Âè£) Universities person = new Universities(); // ÂÖ∂Ê¨°ÔºåÊàëÂæóÂéªÂåªÈô¢ÊâæÂà∞Áõ∏Â∫îÁöÑÂåªÁîüÔºå‰πüÂ∞±ÊòØÊääÊàëÊÉ≥‰ª£ÁêÜÁöÑÂØπË±°ÔºåÂç≥ÊàëÊú¨‰∫∫ÔºåÂëäÁü•ÁªôÂåªÁîü // ÂåªÁîüËÇØÂÆöÂæóÊúâËÉΩÊï¥ÂÆπÁöÑÊäÄÊúØÔºåÈÇ£Â∞±ÊòØÂæóÁªßÊâø InvocationHandler InvocationHandler dynamic_person = new Dynamic(person); // ËøõË°å‰∫§ÊòìÁöÑËøáÁ®ãÔºå‰∏ÄÊâã‰∫§Èí±‰∏ÄÊâã‰∫§Êç¢ÔºåÂåªÁîüÊãøÂà∞Èí±Ôºå‰ºöËøîÂõû‰∏Ä‰∏™ÊúâÈí±ÁöÑÂ§ÑÁêÜÂ•ΩÁöÑÁæéÂ•≥Ôºå‰πüÂ∞±ÊòØ‰ª£ÁêÜÂÆåÊàê‰∫Ü // ËøôÈáåÂøÖÈ°ªÂº∫Ë∞É‰ª£ÁêÜËøîÂõûÁöÑÊòØ Êé•Âè£ÂØπË±°Ôºå‰πüÂ∞±ÊòØÂåªÁîüÂè™‰ºöÂØπÊúâÈí±‰∫∫ËøõË°å‰ª£ÁêÜÔºåÊ≤°Èí±ÁöÑ‰ª£ÁêÜÂ∞±Â§±Ë¥•‰∫Ü // Â¶ÇÊûúÊúÄÂºÄÂßãÊàëÊ≤°Èí±ÔºåÊàëÂ∞±ÂéªÊâæÂåªÁîü‰∫ÜÔºåÈÇ£Âú®Ëøô‰∏ÄÊ≠•‰∫§ÊòìÁöÑËøáÁ®ãÂ∞±‰ºöÂá∫ÈîôÔºåÂõ†‰∏∫ÂåªÁîüÂè™‰ºöÂ§ÑÁêÜÊúâÈí±‰∫∫ÔºåÂπ∂‰∏îËøîÂõûÊúâÈí±‰∫∫ÁöÑ‰ª£ÁêÜÂ•ΩÁöÑÂØπË±° // ‰∫§ÊòìÁöÑ‰∏â‰∏™ÂèÇÊï∞Ôºå‰πüÂ∞±ÊòØÊú¨‰∫∫„ÄÅÈí±„ÄÅËøòÊúâÂåªÁîü„ÄÇÊú¨‰∫∫Â∞±ÊòØÂÆû‰æãÂØπË±°ÔºåÈí±Â∞±ÊòØÂâçÊñáËØ¥ÁöÑÊé•Âè£ÔºåÂåªÁîüÂ∞±ÊòØ‰∏äÈù¢ÁöÑÂä®ÊÄÅ‰ª£ÁêÜÂØπË±° // ÊúâÈí±‰∫∫ÂæóÂà∞‰ª£ÁêÜÂêéÁöÑÂØπË±°ÔºåÂ∞±ÂèØ‰ª•‰∏∫ÊâÄÊ¨≤‰∏∫‰∫Ü Person pp = (Person) Proxy.newProxyInstance(person.getClass().getClassLoader(),person.getClass().getInterfaces(),dynamic_person); // pp Â∞±ÊòØ Ë¢´‰ª£ÁêÜÂØπË±° Ë¢´ ‰ª£ÁêÜÂØπË±° ‰ª£ÁêÜÂêéÁöÑÂØπË±° pp.dance(); System.out.println("-----------"); pp.play(); &#125;&#125; Person Êé•Âè£ 1234567package Proxy;public interface Person &#123; void play(); void dance();&#125; Universities ÂÆûÁé∞Á±ª 1234567891011121314package Proxy;public class Universities implements Person &#123; @Override public void play() &#123; System.out.println("I like play computer"); &#125; @Override public void dance() &#123; System.out.println("I like dance"); &#125;&#125; Âä®ÊÄÅ‰ª£ÁêÜÁ±ª 1234567891011121314151617181920package Proxy;import java.lang.reflect.InvocationHandler;import java.lang.reflect.Method;public class Dynamic implements InvocationHandler &#123; // Êï¥ÂÆπÁöÑ‰∫∫ÊòØË∞ÅÔºåÊàëÂæóÁü•ÈÅì public Object obj; public Dynamic(Object obj)&#123; this.obj = obj; &#125; // Êï¥ÂÆπÁöÑËøáÁ®ãÂ∞±ÊòØËøôÁöÑ @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; System.out.println("ÂºÄÂßã‰∏∫" + method.getName() + "ÊñπÊ≥ïËøõË°å‰ª£ÁêÜ"); Object result = method.invoke(obj,args); System.out.println("ÁªìÊùü" + method.getName() + "ÊñπÊ≥ïÁöÑ‰ª£ÁêÜ"); return result; &#125;&#125; Integer Âíå int ÁöÑÂå∫Âà´Âü∫Êú¨ÂØπÊØî IntegerÊòØintÁöÑÂåÖË£ÖÁ±ªÔºõintÊòØÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºõ IntegerÂèòÈáèÂøÖÈ°ªÂÆû‰æãÂåñÂêéÊâçËÉΩ‰ΩøÁî®ÔºõintÂèòÈáè‰∏çÈúÄË¶ÅÔºõ IntegerÂÆûÈôÖÊòØÂØπË±°ÁöÑÂºïÁî®ÔºåÊåáÂêëÊ≠§newÁöÑIntegerÂØπË±°ÔºõintÊòØÁõ¥Êé•Â≠òÂÇ®Êï∞ÊçÆÂÄºÔºõ IntegerÁöÑÈªòËÆ§ÂÄºÊòØnullÔºõintÁöÑÈªòËÆ§ÂÄºÊòØ0„ÄÇ Ê∑±ÂÖ•ÂØπÊØî demo Áî±‰∫éIntegerÂèòÈáèÂÆûÈôÖ‰∏äÊòØÂØπ‰∏Ä‰∏™IntegerÂØπË±°ÁöÑÂºïÁî®ÔºåÊâÄ‰ª•‰∏§‰∏™ÈÄöËøánewÁîüÊàêÁöÑIntegerÂèòÈáèÊ∞∏ËøúÊòØ‰∏çÁõ∏Á≠âÁöÑÔºàÂõ†‰∏∫newÁîüÊàêÁöÑÊòØ‰∏§‰∏™ÂØπË±°ÔºåÂÖ∂ÂÜÖÂ≠òÂú∞ÂùÄ‰∏çÂêåÔºâ„ÄÇ 123Integer i = new Integer(100);Integer j = new Integer(100);System.out.print(i == j); //false IntegerÂèòÈáèÂíåintÂèòÈáèÊØîËæÉÊó∂ÔºåÂè™Ë¶Å‰∏§‰∏™ÂèòÈáèÁöÑÂÄºÊòØÂêëÁ≠âÁöÑÔºåÂàôÁªìÊûú‰∏∫trueÔºàÂõ†‰∏∫ÂåÖË£ÖÁ±ªIntegerÂíåÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãintÊØîËæÉÊó∂Ôºåjava‰ºöËá™Âä®ÊãÜÂåÖË£Ö‰∏∫intÔºåÁÑ∂ÂêéËøõË°åÊØîËæÉÔºåÂÆûÈôÖ‰∏äÂ∞±Âèò‰∏∫‰∏§‰∏™intÂèòÈáèÁöÑÊØîËæÉÔºâ 123Integer i = new Integer(100);int j = 100ÔºõSystem.out.print(i == j); //true ÈùûnewÁîüÊàêÁöÑIntegerÂèòÈáèÂíånew Integer()ÁîüÊàêÁöÑÂèòÈáèÊØîËæÉÊó∂ÔºåÁªìÊûú‰∏∫false„ÄÇÔºàÂõ†‰∏∫ÈùûnewÁîüÊàêÁöÑIntegerÂèòÈáèÊåáÂêëÁöÑÊòØjavaÂ∏∏ÈáèÊ±†‰∏≠ÁöÑÂØπË±°„ÄåÊ≥®ÊÑèÊòØ -128 ~ 127 ÊâçÊúâÁºìÂ≠òÔºåÂÖ∂‰ªñÁöÑÊï∞‰πüÊòØ‰ºöÈáçÊñ∞ÂºÄËæüÁ©∫Èó¥„ÄçÔºåËÄånew Integer()ÁîüÊàêÁöÑÂèòÈáèÊåáÂêëÂ†Ü‰∏≠Êñ∞Âª∫ÁöÑÂØπË±°Ôºå‰∏§ËÄÖÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂú∞ÂùÄ‰∏çÂêåÔºâ 123Integer i = new Integer(100);Integer j = 100;System.out.print(i == j); //false ÂØπ‰∫é‰∏§‰∏™ÈùûnewÁîüÊàêÁöÑIntegerÂØπË±°ÔºåËøõË°åÊØîËæÉÊó∂ÔºåÂ¶ÇÊûú‰∏§‰∏™ÂèòÈáèÁöÑÂÄºÂú®Âå∫Èó¥-128Âà∞127‰πãÈó¥ÔºåÂàôÊØîËæÉÁªìÊûú‰∏∫trueÔºåÂ¶ÇÊûú‰∏§‰∏™ÂèòÈáèÁöÑÂÄº‰∏çÂú®Ê≠§Âå∫Èó¥ÔºåÂàôÊØîËæÉÁªìÊûú‰∏∫false„ÄÇ 1234567Integer i = 100;Integer j = 100;System.out.print(i == j); //true Integer i = 128;Integer j = 128;System.out.print(i == j); //false ÁºìÂ≠òÈÉ®ÂàÜÂèØ‰ª•ÁúãÂà∞Ê∫ê‰ª£Á†ÅÁöÑÂÜôÊ≥ïÔºö 1234567public static Integer valueOf(int i)&#123; assert IntegerCache.high &gt;= 127; if (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)&#123; return IntegerCache.cache[i + (-IntegerCache.low)]; &#125; return new Integer(i);&#125; ‚Äú== ‚Äú Âíå equals() Âú® Integer ‰∏≠ÁöÑ‰∏çÂêå 12345678910111213141516171819202122/** * Integer vs Int */class Test3&#123; public static void main(String[] args) &#123; Integer a1 = 200; Integer a11 = 200; Integer b1 = 200; Integer b11 = 200; System.out.println(a1.equals(b1)); // trueÔºåequals ‰ºöËá™Âä®ÊãÜÁÆ± System.out.println(a1 == b1); // falseÔºå== Âè™ÊúâÈÅáÂà∞‰∫ÜÁÆóÊúØËøêÁÆóÊâç‰ºöÊãÜÁÆ±ÔºåÊ≠§Êó∂Áî±‰∫é‰∏çÂú®ÁºìÂ≠òËåÉÂõ¥ÂÜÖÔºåÊâÄ‰ª•ÊòØ‰∏çÂêåÁöÑÂØπË±° System.out.println(a1 + a11 == b1 + b11); // trueÔºåÁÆóÊúØËøêÁÆóÔºåÊâÄ‰ª•ÊãÜÁÆ±‰∫Ü // ‰∏çÁî® new ÂæóÂà∞ÁöÑ Integer ÂØπË±°ÔºåÂÆûÈôÖ‰∏äË∑ü String.inner ‰∏ÄÊ†∑ // Â∏∏ÈáèÊ±†Ê≤°ÊúâÔºåÂ∞±ÂàõÂª∫‰∏Ä‰∏™ÊâîÂ∏∏ÈáèÊ±†‰∏≠Ôºå‰ΩÜÊòØËøôÈáåÁöÑ Integer ÊúâÈôêÂà∂ÔºåÊòØ -128 ~ 127 // ÊâÄ‰ª•ËøôÈáåÁöÑ 127 ÈÉΩÊòØÂ∏∏ÈáèÊ±†‰∏≠ÁöÑÊï∞Â≠óÔºå‰πüÂ∞±ÊòØÊâÄË∞ìÁöÑÁºìÂ≠òÊú∫Âà∂ÔºåÊâÄ‰ª•ÊòØÂêå‰∏Ä‰∏™ÂØπË±° Integer a2 = 127; Integer b2 = 127; System.out.println(a2.equals(b2)); // trueÔºåÊãÜÁÆ±‰∫Ü System.out.println(a2 == b2); // trueÔºåËôΩÁÑ∂Êú™ÊãÜÁÆ±Ôºå‰ΩÜÊòØÂú®ÁºìÂ≠òËåÉÂõ¥ÔºåÊòØ‰∏Ä‰∏™ÂØπË±° &#125;&#125; Kafka ÁöÑÁõ∏ÂÖ≥ÈóÆÈ¢ò ‰∏∫‰Ωï‰ΩøÁî® kafka Ëß£ËÄ¶ÔºåËßÑÂÆöÂêÑÊ®°ÂùóËæìÂÖ•ËæìÂá∫Ê†ºÂºèÂ∞±ÂèØ‰ª•‰∫ÜÔºåÂêÑÊ®°ÂùóËÄ¶ÂêàÊÄß‰∏ãÈôçÔºõ ÂºÇÊ≠•ÔºåÊ∂àÊÅØÊù•‰∫ÜÔºå‰∏çÁî®Á´ãÂç≥Êé•Êî∂ÔºåÂèØ‰ª•ÊÖ¢ÊÖ¢Ê∂àË¥πÔºå‰πüËææÂà∞‰∫Ü‰∏Ä‰∏™ÂâäÂ≥∞ÁöÑ‰ΩúÁî®„ÄÇ ‰∏∫‰Ωï‰∏çÁî®ÂÖ∂‰ªñÁöÑ MQÔºü Kafka ÂêûÂêêÈáèÊúÄÂ§ßÔºõ Á®≥ÂÆöÊÄßÂ•Ω ‰∏∫‰ªÄ‰πà kafka ÂæàÂø´Ôºü ÂíåProducer‰∏éConsumÊî∂ÂèëÊ∂àÊÅØÂø´ÁöÑÂéüÂõ†ÊòØÁî®‰∫Ü NIOÁöÑsocketÊúâÂÖ≥ÁöÑÂäüËÉΩÔºå‰πüÂ∞±ÊòØ I/O Â§çÁî®ÊäÄÊúØ„ÄåÂ∫ïÂ±Ç‰ΩøÁî® epoll„ÄçÔºåÁî®selectorÂéªËΩÆËØ¢Ôºå‰∏çÈúÄË¶ÅÂú®ËøûÊé•producerÂíåconsumer‰πãÂêé‰∏ÄÁõ¥Á≠âÂæÖÔºåÁ≠âÂà∞producerÂáÜÂ§áÂ•ΩÊï∞ÊçÆ‰πãÂêéÊâçÂéªnew‰∏Ä‰∏™Á∫øÁ®ãË∑ü‰ªñ‰º†ËæìÊ∂àÊÅØÔºõ ÁÑ∂ÂêéÊ∂àÊÅØ‰º†ËæìÂà∞ÊúçÂä°Âô®‰∏ä‰πãÂêé‰ΩøÁî®NIO‰∏≠ÁöÑFileÊúâÂÖ≥ÁöÑÂäüËÉΩÔºå‰πüÂ∞±ÊòØÈõ∂Êã∑Ë¥ùÊäÄÊúØ‰∏≠ÁöÑ mmapÔºåÂÜÖÂ≠òÂú∞ÂùÄÂíåÁ£ÅÁõòÂú∞ÂùÄÊò†Â∞ÑÔºåËØªÂÜôÂÜÖÂ≠òÂ∞±Áõ∏ÂΩì‰∫éÁõ¥Êé•ËØªÂÜôÁ£ÅÁõòÔºåÊâÄ‰ª•ÂæàÂø´„ÄÇ ÂÖ∂ËøòÊèê‰æõÂàÜÂå∫ÔºåËøôÊ†∑ÁöÑËØùÂèØ‰ª•Â§ö‰∏™brokerÂêåÊó∂ÂÜôÁ£ÅÁõòÔºåÊâÄ‰ª•Â∞±ÂæàÂø´ ÁÑ∂ÂêéÂú®Â∞Übroker‰∏≠Êï∞ÊçÆÁõ¥Êé•ÂèëÁªôconsumer‰∏≠ÊòØÈááÁî®‰∫ÜsendfileËøô‰∏™Èõ∂Êã∑Ë¥ùÊäÄÊúØÔºåÁõ¥Êé•ÈÄöËøáDMAÂ∞ÜÂÜÖÊ†∏ÁºìÂÜ≤Âå∫‰∏≠ÁöÑÊï∞ÊçÆ‰º†ÈÄÅÂà∞socketÁºìÂÜ≤Âå∫„ÄåFileChannel.transferTo/transferFrom„Äç https://www.jianshu.com/p/7863667d5fa7 ÂÜôÁöÑÁúüÁöÑÂ•Ω kakfa‰ºö‰∏¢Ê∂àÊÅØÂêó ‰ºöÁöÑÔºåÂΩìleaderËøòÂú®ËøõË°åÂêåÊ≠•Â§çÂà∂ÁöÑÊó∂ÂÄôÔºåÂâØÊú¨Â§çÂà∂ÁªôÂÖ∂‰ªñfollowerÔºåËøòÊ≤°Â§çÂà∂ÂÆåÊàêÔºåleaderÂ∞±ÊåÇ‰∫ÜÔºåÊ≠§Êó∂ÂÜçÊ¨°ÈÄâ‰∏æ‰πãÂâçÁöÑÈÉ®ÂàÜÊï∞ÊçÆÂ∞±‰∏¢Â§±‰∫Ü„ÄÇ kafkaÂ¶Ç‰Ωï‰øùËØÅ‰∏ç‰∏¢Ê∂àÊÅØ Producer Á´ØÊòØÈááÁî®‰∫Ü ack Êú∫Âà∂ÔºåÂèëÈÄÅÊ∂àÊÅØ‰πãÂêé‰ºöÊúâ‰∏Ä‰∏™ ackÁöÑÂèçÈ¶àÔºõ ConsumerÁ´ØÊòØÈááÁî®‰∫ÜoffsetËøõË°å‰∏Ä‰∏™ÊéßÂà∂Ôºå‰øùËØÅ‰∏ç‰∏¢Ê∂àÊÅØÔºåÊØèÊ¨°ÈÉΩËÆ∞ÂΩïÊúÄÂêé‰∏ÄÊ¨°ËØªÂèñÁöÑlastoffset kafkaÊ∂àÊÅØÊúâÂ∫èÂêó Âêå‰∏Ä‰∏™partitionÊòØÊúâÂ∫èÁöÑÔºå‰ΩÜÊòØ‰∏çÂêåpartition‰πãÈó¥ÊòØÊó†Â∫èÁöÑ„ÄÇ Â¶Ç‰ΩïÈò≤Ê≠¢Êï∞ÊçÆ‰∏¢Â§± Â§öÂâØÊú¨ÂÜó‰ΩôÁöÑÈ´òÂèØÁî®Êú∫Âà∂„ÄÇ„ÄÇ„ÄÇ„ÄÇ Leader‰ºöË∑üË∏™‰∏éÂÖ∂‰øùÊåÅÂêåÊ≠•ÁöÑReplicaÂàóË°®ÔºåËØ•ÂàóË°®Áß∞‰∏∫ISRÔºàÂç≥in-sync ReplicaÔºâÔºå‰øùÊåÅÂêåÊ≠•ÁöÑÂâØÊú¨„ÄÇKafkaÁöÑÂ§çÂà∂Êú∫Âà∂Êó¢‰∏çÊòØÂÆåÂÖ®ÁöÑÂêåÊ≠•Â§çÂà∂Ôºå‰πü‰∏çÊòØÂçïÁ∫ØÁöÑÂºÇÊ≠•Â§çÂà∂„ÄÇËÄåKafkaÁöÑËøôÁßç‰ΩøÁî®ISRÁöÑÊñπÂºèÂàôÂæàÂ•ΩÁöÑÂùáË°°‰∫ÜÁ°Æ‰øùÊï∞ÊçÆ‰∏ç‰∏¢Â§±‰ª•ÂèäÂêûÂêêÁéá„ÄÇFollowerÂèØ‰ª•ÊâπÈáèÁöÑ‰ªéLeaderÂ§çÂà∂Êï∞ÊçÆÔºåËøôÊ†∑ÊûÅÂ§ßÁöÑÊèêÈ´òÂ§çÂà∂ÊÄßËÉΩÔºàÊâπÈáèÂÜôÁ£ÅÁõòÔºâÔºåÊûÅÂ§ßÂáèÂ∞ë‰∫ÜFollower‰∏éLeaderÁöÑÂ∑ÆË∑ù„ÄÇ //ÊâπÈáèÂ§çÂà∂Êï∞ÊçÆÊñπÂºèÔºåÈò≤Ê≠¢Êï∞ÊçÆ‰∏¢Â§±1 ‰∏ÄÊù°Ê∂àÊÅØÂè™ÊúâË¢´ISRÈáåÁöÑÊâÄÊúâFollowerÈÉΩ‰ªéLeaderÂ§çÂà∂ËøáÂéªÊâç‰ºöË¢´ËÆ§‰∏∫Â∑≤Êèê‰∫§„ÄÇËøôÊ†∑Â∞±ÈÅøÂÖç‰∫ÜÈÉ®ÂàÜÊï∞ÊçÆË¢´ÂÜôËøõ‰∫ÜLeaderÔºåËøòÊ≤°Êù•ÂæóÂèäË¢´‰ªª‰ΩïFollowerÂ§çÂà∂Â∞±ÂÆïÊú∫‰∫ÜÔºåËÄåÈÄ†ÊàêÊï∞ÊçÆ‰∏¢Â§±ÔºàConsumerÊó†Ê≥ïÊ∂àË¥πËøô‰∫õÊï∞ÊçÆÔºâ„ÄÇ //Èò≤Ê≠¢Êï∞ÊçÆ‰∏¢Â§±2 Â¶Ç‰ΩïÂà§Êñ≠ kafka ‰∏≠ÁöÑbrokerÊåÇÊéâ zookeeper ÁöÑÂøÉË∑≥Êú∫Âà∂ ISRÊú∫Âà∂ÔºåÊØè‰∏™leader‰ºöÂÖ≥Ê≥®followÁöÑÂêåÊ≠•Áä∂ÂÜµÔºåÂ¶ÇÊûú‰∏çËÉΩÂèäÊó∂ÁöÑÊõ¥Êñ∞leaderÁöÑÂÜôÊìç‰ΩúÔºåÂª∂Êó∂Â§™‰πÖÔºåleaderÂ∞±‰ºöÂ∞ÜÂÖ∂ÁßªÈô§ Kafka ÁöÑÊ∂àÊÅØ‰º†ÈÄíËØ≠‰πâ At most once - Ê∂àÊÅØ‰º†ÈÄíËøáÁ®ã‰∏≠ÊúâÂèØËÉΩ‰∏¢Â§±Ôºå‰∏¢Â§±ÁöÑÊ∂àÊÅØ‰πü‰∏ç‰ºöÈáçÊñ∞‰º†ÈÄíÔºåÂÖ∂ÂÆûÂ∞±ÊòØ‰øùËØÅÊ∂àÊÅØ‰∏ç‰ºöÈáçÂ§çÂèëÈÄÅÊàñËÄÖÈáçÂ§çÊ∂àË¥π At least once - Ê∂àÊÅØÂú®‰º†ÈÄíÁöÑËøáÁ®ã‰∏≠‰∏çÂèØËÉΩ‰ºö‰∏¢Â§±Ôºå‰∏¢Â§±ÁöÑÊ∂àÊÅØ‰ºöÈáçÊñ∞‰º†ÈÄíÔºåÂÖ∂ÂÆûÂ∞±ÊòØ‰øùËØÅÊ∂àÊÅØ‰∏ç‰ºö‰∏¢Â§±Ôºå‰ΩÜÊòØÊ∂àÊÅØÊúâÂèØËÉΩÈáçÂ§çÂèëÈÄÅÊàñËÄÖÈáçÊñ∞Ë¢´Ê∂àË¥π „ÄåÈªòËÆ§„Äç Exactly once - Ëøô‰∏™ÊòØÂ§ßÂ§öÊï∞Âú∫ÊôØÈúÄË¶ÅÁöÑËØ≠‰πâÔºåÂÖ∂ÂÆûÂ∞±ÊòØ‰øùËØÅÊ∂àÊÅØ‰∏ç‰ºö‰∏¢Â§±Ôºå‰πü‰∏ç‰ºöÈáçÂ§çË¢´Ê∂àË¥πÔºåÊ∂àÊÅØÂè™‰º†ÈÄí‰∏ÄÊ¨° Âú® Producer Á´ØÂÆûÁé∞ At least onceÔºö Âú®0.11.0.0ÁâàÊú¨ÔºåKafkaÁöÑProducerÂºÄÂßãÊîØÊåÅ‰∫ÜÂπÇÁ≠âÂèëÈÄÅÊ∂àÊÅØ‰∫ÜÔºåÂÖ∂ÂÆûËØ¥ÁôΩ‰∫ÜÔºåÂ∞±ÊòØÈáçÂ§çÂèëÈÄÅ‰∏ÄÊù°Ê∂àÊÅØ‰∏ç‰ºöÂØºËá¥broker server‰∏≠Â≠òÂÇ®‰∏§Êù°‰∏ÄÊ†∑ÁöÑÊ∂àÊÅØ‰∫Ü„ÄÇËøôÊ†∑ÁöÑËØùKafkaÂú®Ê∂àÊÅØÁöÑÂèëÈÄÅÁöÑËØ≠‰πâÂ∞±ÂèØ‰ª•ËææÂà∞Exactly once‰∫Ü ‰∏∫‰∫ÜÂÆûÁé∞ÂπÇÁ≠âÂèëÈÄÅÊ∂àÊÅØÔºåÂú®0.11.0.0ÁâàÊú¨ÔºåKafkaÁªôÊØè‰∏Ä‰∏™Producer‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑIDÔºå‰ª•ÂèäÁªôÂèëÈÄÅÁöÑÊØè‰∏ÄÊù°Ê∂àÊÅØ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑsequence numberÔºåÂà©Áî®Ëøô‰∏§‰∏™‰ø°ÊÅØÂ∞±ÂèØ‰ª•Âú®broker serverÊÆµÂØπÊ∂àÊÅØËøõË°åÂéªÈáç‰∫Ü„ÄÇ Â¶ÇÊûúÊÉ≥Ë¶ÅÂÆûÁé∞ Exactly onceÔºö ÂçèË∞ÉÂ•ΩÊ∂àË¥πËÄÖÊ∂àË¥πÁöÑÊ∂àÊÅØoffsetÁöÑ‰øùÂ≠òÂíåÂ§ÑÁêÜÊ∂àÊÅØÁªìÊûúÁöÑ‰øùÂ≠ò‰πãÈó¥ÁöÑÂÖ≥Á≥ªÂ∞±ÂèØ‰ª•ËææÂà∞Exactly onceÁöÑËØ≠‰πâÔºåÂ∞±ÊòØËØ¥ÔºåÂΩìÊ∂àË¥πÁöÑÊ∂àÊÅØoffsetÁöÑ‰øùÂ≠òÊàêÂäü‰ª•ÂèäÂ§ÑÁêÜÊ∂àÊÅØÁªìÊûúÁöÑ‰øùÂ≠òÊàêÂäüÔºåÂàôÁÆóÊàêÂäüÔºåÂ¶ÇÊûú‰∏§ËÄÖÊúâ‰∏Ä‰∏™Â§±Ë¥•ÁöÑËØùÔºåÈÇ£‰πàÂ∞±ÈúÄË¶ÅÂõûÊªö‰∏§‰∏™‰øùÂ≠ò‰∫Ü(Âíå‰∫ãÂä°ÊúâÁÇπÂÉè)„ÄÇ kafka‰∏≠ÁöÑackÊú∫Âà∂ Á¨¨‰∏ÄÁßçÈÄâÊã©ÊòØÊääacksÂèÇÊï∞ËÆæÁΩÆ‰∏∫0ÔºåÊÑèÊÄùÂ∞±ÊòØÊàëÁöÑKafkaProducerÂú®ÂÆ¢Êà∑Á´ØÔºåÂè™Ë¶ÅÊääÊ∂àÊÅØÂèëÈÄÅÂá∫ÂéªÔºå‰∏çÁÆ°ÈÇ£Êù°Êï∞ÊçÆÊúâÊ≤°ÊúâÂú®Âì™ÊÄïPartition Leader‰∏äËêΩÂà∞Á£ÅÁõòÔºåÊàëÂ∞±‰∏çÁÆ°‰ªñ‰∫ÜÔºåÁõ¥Êé•Â∞±ËÆ§‰∏∫Ëøô‰∏™Ê∂àÊÅØÂèëÈÄÅÊàêÂäü‰∫Ü„ÄÇ Â¶ÇÊûú‰Ω†ÈááÁî®ËøôÁßçËÆæÁΩÆÁöÑËØùÔºåÈÇ£‰πà‰Ω†ÂøÖÈ°ªÊ≥®ÊÑèÁöÑ‰∏ÄÁÇπÊòØÔºåÂèØËÉΩ‰Ω†ÂèëÈÄÅÂá∫ÂéªÁöÑÊ∂àÊÅØËøòÂú®ÂçäË∑Ø„ÄÇÁªìÊûúÂë¢ÔºåPartition LeaderÊâÄÂú®BrokerÂ∞±Áõ¥Êé•ÊåÇ‰∫ÜÔºåÁÑ∂ÂêéÁªìÊûú‰Ω†ÁöÑÂÆ¢Êà∑Á´ØËøòËÆ§‰∏∫Ê∂àÊÅØÂèëÈÄÅÊàêÂäü‰∫ÜÔºåÊ≠§Êó∂Â∞±‰ºöÂØºËá¥ËøôÊù°Ê∂àÊÅØÂ∞±‰∏¢Â§±‰∫Ü„ÄÇ Á¨¨‰∫åÁßçÈÄâÊã©ÊòØËÆæÁΩÆ acks = 1ÔºåÊÑèÊÄùÂ∞±ÊòØËØ¥Âè™Ë¶ÅPartition LeaderÊé•Êî∂Âà∞Ê∂àÊÅØËÄå‰∏îÂÜôÂÖ•Êú¨Âú∞Á£ÅÁõò‰∫ÜÔºåÂ∞±ËÆ§‰∏∫ÊàêÂäü‰∫ÜÔºå‰∏çÁÆ°‰ªñÂÖ∂‰ªñÁöÑFollowerÊúâÊ≤°ÊúâÂêåÊ≠•ËøáÂéªËøôÊù°Ê∂àÊÅØ‰∫Ü„ÄÇ ËøôÁßçËÆæÁΩÆÂÖ∂ÂÆûÊòØkafkaÈªòËÆ§ÁöÑËÆæÁΩÆÔºåÂ§ßÂÆ∂ËØ∑Ê≥®ÊÑèÔºåÂàíÈáçÁÇπÔºÅËøôÊòØÈªòËÆ§ÁöÑËÆæÁΩÆ ‰πüÂ∞±ÊòØËØ¥ÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå‰Ω†Ë¶ÅÊòØ‰∏çÁÆ°acksËøô‰∏™ÂèÇÊï∞ÔºåÂè™Ë¶ÅPartition LeaderÂÜôÊàêÂäüÂ∞±ÁÆóÊàêÂäü„ÄÇ ‰ΩÜÊòØËøôÈáåÊúâ‰∏Ä‰∏™ÈóÆÈ¢òÔºå‰∏á‰∏ÄPartition LeaderÂàöÂàöÊé•Êî∂Âà∞Ê∂àÊÅØÔºåFollowerËøòÊ≤°Êù•ÂæóÂèäÂêåÊ≠•ËøáÂéªÔºåÁªìÊûúLeaderÊâÄÂú®ÁöÑbrokerÂÆïÊú∫‰∫ÜÔºåÊ≠§Êó∂‰πü‰ºöÂØºËá¥ËøôÊù°Ê∂àÊÅØ‰∏¢Â§±ÔºåÂõ†‰∏∫‰∫∫ÂÆ∂ÂÆ¢Êà∑Á´ØÂ∑≤ÁªèËÆ§‰∏∫ÂèëÈÄÅÊàêÂäü‰∫Ü„ÄÇ ÊúÄÂêé‰∏ÄÁßçÊÉÖÂÜµÔºåÂ∞±ÊòØËÆæÁΩÆacks=allÔºåËøô‰∏™ÊÑèÊÄùÂ∞±ÊòØËØ¥ÔºåPartition LeaderÊé•Êî∂Âà∞Ê∂àÊÅØ‰πãÂêéÔºåËøòÂøÖÈ°ªË¶ÅÊ±ÇISRÂàóË°®ÈáåË∑üLeader‰øùÊåÅÂêåÊ≠•ÁöÑÈÇ£‰∫õFollowerÈÉΩË¶ÅÊääÊ∂àÊÅØÂêåÊ≠•ËøáÂéªÔºåÊâçËÉΩËÆ§‰∏∫ËøôÊù°Ê∂àÊÅØÊòØÂÜôÂÖ•ÊàêÂäü‰∫Ü„ÄÇ Â¶ÇÊûúËØ¥Partition LeaderÂàöÊé•Êî∂Âà∞‰∫ÜÊ∂àÊÅØÔºå‰ΩÜÊòØÁªìÊûúFollowerÊ≤°ÊúâÊî∂Âà∞Ê∂àÊÅØÔºåÊ≠§Êó∂LeaderÂÆïÊú∫‰∫ÜÔºåÈÇ£‰πàÂÆ¢Êà∑Á´Ø‰ºöÊÑüÁü•Âà∞Ëøô‰∏™Ê∂àÊÅØÊ≤°ÂèëÈÄÅÊàêÂäüÔºå‰ªñ‰ºöÈáçËØïÂÜçÊ¨°ÂèëÈÄÅÊ∂àÊÅØËøáÂéª„ÄÇ Ê≠§Êó∂ÂèØËÉΩPartition 2ÁöÑFollowerÂèòÊàêLeader‰∫ÜÔºåÊ≠§Êó∂ISRÂàóË°®ÈáåÂè™ÊúâÊúÄÊñ∞ÁöÑËøô‰∏™FollowerËΩ¨ÂèòÊàêÁöÑLeader‰∫ÜÔºåÈÇ£‰πàÂè™Ë¶ÅËøô‰∏™Êñ∞ÁöÑLeaderÊé•Êî∂Ê∂àÊÅØÂ∞±ÁÆóÊàêÂäü‰∫Ü„ÄÇ ack = all Â∞±ËÉΩ‰øùËØÅÊï∞ÊçÆ‰∏ç‰∏¢Â§±ÂêóÔºü ÂΩìÁÑ∂‰∏çÊòØÔºåÂ¶ÇÊûú‰Ω†ÁöÑPartitionÂè™Êúâ‰∏Ä‰∏™ÂâØÊú¨Ôºå‰πüÂ∞±ÊòØ‰∏Ä‰∏™LeaderÔºå‰ªª‰ΩïFollowerÈÉΩÊ≤°ÊúâÔºå‰Ω†ËÆ§‰∏∫acks=allÊúâÁî®ÂêóÔºü ÂΩìÁÑ∂Ê≤°Áî®‰∫ÜÔºåÂõ†‰∏∫ISRÈáåÂ∞±‰∏Ä‰∏™LeaderÔºå‰ªñÊé•Êî∂ÂÆåÊ∂àÊÅØÂêéÂÆïÊú∫Ôºå‰πü‰ºöÂØºËá¥Êï∞ÊçÆ‰∏¢Â§±„ÄÇ ÊâÄ‰ª•ËØ¥ÔºåËøô‰∏™acks=allÔºåÂøÖÈ°ªË∑üISRÂàóË°®ÈáåËá≥Â∞ëÊúâ2‰∏™‰ª•‰∏äÁöÑÂâØÊú¨ÈÖçÂêà‰ΩøÁî®ÔºåËµ∑Á†ÅÊòØÊúâ‰∏Ä‰∏™LeaderÂíå‰∏Ä‰∏™FollowerÊâçÂèØ‰ª•„ÄÇ ÊúÄÂêéÊÄªÁªì‰∏Ä‰∏ã kafka Â¶Ç‰Ωï‰øùËØÅÁîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖ‰∏ç‰∏¢Ê∂àÊÅØÔºåÂ¶Ç‰Ωï‰øùËØÅÁîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖ‰∏çÁîü‰∫ßÂíåÊ∂àË¥πÈáçÂ§çÊ∂àÊÅØÔºåÂ¶Ç‰Ωï‰øùËØÅÊ∂àÊÅØÊúâÂ∫èÔºü ÂÖàÂõûÁ≠îÁ¨¨‰∏Ä‰∏™ÈóÆÈ¢ò„ÄÇ‰øùËØÅÁîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖ‰∏ç‰∏¢Ê∂àÊÅØÔºåÈ¶ñÂÖàÁî±‰∫é kafka ÁöÑÈªòËÆ§ÁöÑÊ∂àÊÅØ‰º†ÈÄíËØ≠‰πâÊòØ at least onceÔºåÂ∞±ÊòØÁ°Æ‰øùÁîü‰∫ßËÄÖÊ∂àÊÅØ‰∏ç‰∏¢ÔºåÁ°Æ‰øùÁöÑÊâãÊÆµÂ∞±ÊòØ ack = all Êú∫Âà∂ÔºåÂä†‰∏äËÆæÁΩÆÂ∞ΩÈáèÂ§öÁöÑ brokerÔºåËææÂà∞È´òÂèØÁî®ÔºåËøôÊ†∑ÂèØ‰ª•‰ΩøÂæóÂ∞±ÁÆó leader ÊåÇ‰∫ÜÔºåËøòÊúâÂÖ∂‰ªñÁöÑ follower ËÉΩÂ§üÈ°∂‰∏äÂéª„ÄÇÁ°Æ‰øùÊ∂àË¥πËÄÖ‰∏ç‰∏¢Ê∂àÊÅØÔºåÈúÄË¶ÅÊàë‰ª¨Á®ãÂ∫èÂëòËá™Â∑±ÂéªÁ°Æ‰øùÔºåÂõ†‰∏∫ kafka Âπ∂Ê≤°ÊúâÊèê‰æõËøôÊ†∑ÁöÑÊ∂àÊÅØËØ≠‰πâÔºåÂõ†‰∏∫ÂÆÉÊòØÂÖÅËÆ∏‰∏¢Ê∂àÊÅØÁöÑÔºåÂΩìÊ∂àË¥πËÄÖÊ∂àÊÅØ‰∏¢‰∫Ü‰πãÂêéÔºåÊàë‰ª¨Êó†ÈúÄÂéªÊîπÂä®Ê∂àË¥πÁöÑoffsetÔºåËøôÊ†∑Â∞±‰∏ç‰ºöÂéªÂØºËá¥Ê∂àË¥π‰∏çÂà∞Ê∂àÊÅØÔºåÊàë‰ª¨ÈÄöËøáËøôÁßçÊâãÂä®ÊéßÂà∂ offset ÁöÑÊñπÂºè‰πüÂêåÊ†∑ËÉΩÂ§üÁ°Æ‰øù‰∏ç‰ºöÂéªÈáçÂ§çÊ∂àË¥πÔºåÂõ†‰∏∫Êàë‰ª¨Âú®ÂÆ¢Êà∑Á´ØÂ∑≤ÁªèÂÅö‰∫Ü‰∏Ä‰∏™‰∫ãÂä°ÁöÑÂéüÂ≠êÊìç‰ΩúÔºåÁªëÂÆö‰∫ÜÊõ¥Êîπ offset ÂíåÊ∂àË¥πÊ∂àÊÅØËøô‰∏§‰ª∂‰∫ã„ÄÇ Á¨¨‰∫å‰∏™ÈóÆÈ¢òÔºåÂ¶Ç‰Ωï‰øùËØÅÁîü‰∫ßËÄÖ‰∏çÈáçÂ§çÁîü‰∫ßÂêåÊ†∑ÁöÑÊ∂àÊÅØÔºå kafka ÁöÑÊú∫Âà∂ÊòØÊØè‰∏™ProducerÈÉΩÊúâ‰∏Ä‰∏™ idÔºåÁÑ∂ÂêéÊØè‰∏ÄÊù°Ê∂àÊÅØÈÉΩÊúâ‰∏Ä‰∏™ idÔºåÂè™Ë¶ÅÊúçÂä°Âô®Êî∂Âà∞‰∫ÜÔºåÂ∞±‰ºöËÆ∞ÂΩï‰∏ãËØ•idÔºåÁÑ∂ÂêéÂ∞±ÁÆóÈáçÂ§çÂèëÈÄÅ‰∫Ü‰πü‰ºöÂπÇÁ≠âÔºåÊâÄ‰ª•Â∞±Ëß£ÂÜ≥‰∫ÜËØ•ÈóÆÈ¢òÔºåËá≥‰∫éÊ∂àË¥πËÄÖÂ¶Ç‰ΩïËß£ÂÜ≥Ê∂àË¥πÈáçÂ§çÈóÆÈ¢òÔºåÊàëÂú®‰∏äÈù¢Â∑≤ÁªèËÆ≤Ëøá‰∫ÜÔºåÊâãÂä®ÊéßÂà∂ offset Â∞±‰∏ç‰ºöÈáçÂ§çÊ∂àË¥π‰∫Ü„ÄÇ Á¨¨‰∏â‰∏™ÈóÆÈ¢òÔºåÂ¶Ç‰Ωï‰øùËØÅÊúâÂ∫èÔºåApache KafkaÂÆòÊñπ‰øùËØÅ‰∫ÜpartitionÂÜÖÈÉ®ÁöÑÊï∞ÊçÆÊúâÊïàÊÄßÔºàËøΩÂä†ÂÜô„ÄÅoffsetËØªÔºâÔºõ‰∏∫‰∫ÜÊèêÈ´òTopicÁöÑÂπ∂ÂèëÂêûÂêêËÉΩÂäõÔºåÂèØ‰ª•ÊèêÈ´òTopicÁöÑpartitionÊï∞ÔºåÂπ∂ÈÄöËøáËÆæÁΩÆpartitionÁöÑreplicaÊù•‰øùËØÅÊï∞ÊçÆÈ´òÂèØÈù†Ôºõ ‰ΩÜÊòØÂú®Â§ö‰∏™PartitionÊó∂Ôºå‰∏çËÉΩ‰øùËØÅTopicÁ∫ßÂà´ÁöÑÊï∞ÊçÆÊúâÂ∫èÊÄß„ÄÇ ‰∏∫‰Ωï‰ΩøÁî® MongoDB ÈúÄÊ±ÇÊÄªÊòØÂèòÂåñÔºåno-sqlÊï∞ÊçÆÂ∫ìÊîπÂä®Â∞è ÈÄüÂ∫¶Âø´ÔºåmmapÂÜÖÂ≠òÊò†Â∞Ñ ÊñáÊ°£Â§öÔºåÁ§æÂå∫ËµÑÊ∫êÂ§ö ÊîØÊåÅËåÉÂõ¥Êü•ËØ¢ÔºåpythonÂíånodeÊîØÊåÅÁöÑ‰πüÂæàÂ•ΩÔºåmongoengine]]></content>
      <categories>
        <category>Èõ∂Á¢éÁü•ËØÜÁÇπ</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Â§öÁ∫øÁ®ãÔºà‰∏ÄÔºâ--- ÈîÅ & ÂÖ≥ÈîÆÂ≠ó]]></title>
    <url>%2F2020%2F01%2F29%2F%E5%A4%9A%E7%BA%BF%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89----%20%E9%94%81%20%26%20%E5%85%B3%E9%94%AE%E5%AD%97%20.html</url>
    <content type="text"><![CDATA[Á∫øÁ®ãÁöÑÂü∫Êú¨Êìç‰ΩúÂèäÁä∂ÊÄÅËΩ¨Êç¢ÂàõÂª∫Á∫øÁ®ãÁöÑ‰∏âÁßçÊñπÂºèÁªßÊâø Thread Á±ªÊñπÊ≥ï‰∏Ä ÁªßÊâø Thread Á±ªÂπ∂ÈáçÂÜô run ÊñπÊ≥ï ÂàõÂª∫Á∫øÁ®ãÂØπË±° Ë∞ÉÁî®ËØ•Á∫øÁ®ãÂØπË±°ÁöÑ start() ÊñπÊ≥ïÊù•ÂêØÂä®Á∫øÁ®ã demo 12345678910111213141516class ThreadDemo&#123; public static void main(String[] args) &#123; new ThreadTest().start(); &#125;&#125;class ThreadTest extends Thread&#123; private int i; @Override public void run() &#123; for (; i &lt; 100; i++) &#123; System.out.println(Thread.currentThread().getName() + " is running: " + i); &#125; &#125;&#125; ÊñπÊ≥ï‰∫å ÂΩìÁÑ∂‰πüÂèØ‰ª•Áõ¥Êé•ÂÆûÁé∞ÂÜÖÈÉ®Á±ªÔºåÁÑ∂ÂêéÈáçÂÜô run() ÊñπÊ≥ïÔºåÁÑ∂ÂêéÈÄÇÂΩìÁöÑÂèØ‰ª•Áî® lamda Ë°®ËææÂºè demo 123456789101112 public static void main(String[] args) &#123;// new ThreadTest().start(); // 2. Áõ¥Êé•ÁªßÊâø Thread Á±ª Thread threadC = new Thread()&#123; @Override public void run()&#123; System.out.println("3.1 get resource c"); super.run(); &#125; &#125;; threadC.start(); &#125; ÂÆûÁé∞RunnableÊé•Âè£ÊñπÊ≥ï‰∏Ä ÂÆö‰πâ‰∏Ä‰∏™Á±ªÂÆûÁé∞ Runnable Êé•Âè£ÔºåÂπ∂ÈáçÂÜôËØ•Êé•Âè£ÁöÑ run() ÊñπÊ≥ï ÂàõÂª∫ Runnable ÂÆûÁé∞Á±ªÁöÑÂØπË±°Ôºå‰Ωú‰∏∫ÂàõÂª∫ Thread ÂØπË±°ÁöÑ target ÂèÇÊï∞ÔºåÊ≠§ Thread ÂØπË±°ÊâçÊòØÁúüÊ≠£ÁöÑÁ∫øÁ®ãÂØπË±°ÔºåËøô‰∏™Ë∑üÁªßÊâø Thread ‰∏ç‰∏ÄÊ†∑ÔºåÁ¨¨‰∏ÄÁßçÊñπÂºèÊòØÁõ¥Êé• Thread ÁöÑÂÆûÁé∞Á±ªÂ∞±ÊòØÁúüÊ≠£ÁöÑÁ∫øÁ®ãÂØπË±°ÔºåËÄåÂÆûÁé∞ Runnable Êé•Âè£ÂæóÂØπË±°Âú®ËøôÈáåÂπ∂‰∏çÊòØÁúüÊ≠£ÁöÑÁ∫øÁ®ãÂØπË±°„ÄÇ Ë∞ÉÁî®Á∫øÁ®ãÂØπË±°ÁöÑ start() ÊñπÊ≥ïÊù•ÂêØÂä®Á∫øÁ®ã demo 12345678910111213141516class RunnableDemo &#123; public static void main(String[] args) &#123; RunnableTest runnableTest = new RunnableTest(); new Thread(runnableTest, "Á∫øÁ®ã1").start(); new Thread(runnableTest, "Á∫øÁ®ã2").start(); &#125;&#125;class RunnableTest implements Runnable&#123; private int i = 0; @Override public void run() &#123; for (; i &lt; 100; i++) &#123; System.out.println(Thread.currentThread().getName() + " is running: " + i); &#125; &#125;&#125; ÊñπÊ≥ï‰∫å Áõ¥Êé•ÂÆûÁé∞ÂåøÂêçÂÜÖÈÉ®Á±ªÂ∞±Ë°å‰∫ÜÔºåË∑üÊñπÂºè‰∏Ä‰∏≠ÁöÑÊñπÊ≥ï‰∫å‰∏ÄÊ†∑ demo 1234567891011121314class RunnableDemo &#123; public static void main(String[] args) &#123;// RunnableTest runnableTest = new RunnableTest();// new Thread(runnableTest, "Á∫øÁ®ã1").start();// new Thread(runnableTest, "Á∫øÁ®ã2").start(); Thread thread = new Thread(new Runnable() &#123; @Override public void run() &#123; System.out.println("ËøôÈáåÊòØÂÆûÁé∞ Runnable Êé•Âè£ÁöÑÁ∫øÁ®ã"); &#125; &#125;); thread.start(); &#125;&#125; ÂÆûÁé∞ Callable Êé•Âè£‰∏äËø∞‰∏§ÁßçÊñπÂºèÈÉΩÊúâ‰∏Ä‰∏™Áº∫Èô∑Â∞±ÊòØÔºöÂú®ÊâßË°åÂÆå‰ªªÂä°‰πãÂêéÊó†Ê≥ïËé∑ÂèñÊâßË°åÁªìÊûú„ÄÇ‰∫éÊòØjavaÂêéÈù¢ÂèàÂ¢ûÂä†‰∫Ü Callable Âíå FutureÔºåÈÄöËøáÂÆÉ‰ª¨ÂèØ‰ª•Âú®‰ªªÂä°ÊâßË°åÂÆåÊØï‰πãÂêéÂæóÂà∞‰ªªÂä°ÊâßË°åÁªìÊûú„ÄÇ Runnable Âíå Callable Runnable Âè™ÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåÈáåÈù¢Âè™ÊòØÂ£∞Êòé‰∫Ü‰∏Ä‰∏™runÊñπÊ≥ïÔºåÂèØ‰ª•ÁúãÂà∞ÊñπÊ≥ïÁöÑËøîÂõûÂÄºÊòØvoidÔºåÊâÄ‰ª•Á∫øÁ®ãÊâßË°åÂÆå‰∫ÜÊ≤°Êúâ‰ªª‰ΩïÁöÑËøîÂõûÂÄº„ÄÇ Callable ‰πüÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåÂÆÉÈáåÈù¢Â£∞Êòé‰∫Ü‰∏Ä‰∏™callÊñπÊ≥ïÔºåÂèØ‰ª•ÁúãÂà∞ÂÆÉÊòØ‰∏Ä‰∏™Ê≥õÂûãÊé•Âè£Ôºåcall()ÂáΩÊï∞ËøîÂõûÁöÑÁ±ªÂûãÂ∞±ÊòØ‰º†ÈÄíËøõÊù•ÁöÑVÁ±ªÂûã„ÄÇÁ∫øÁ®ãÁöÑÊâßË°åÊòØÂºÇÊ≠•ÁöÑÔºå‰∏Ä‰∏™Á∫øÁ®ãÂíåÂè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãÁöÑÊâßË°åÊòØ‰∫í‰∏çÂπ≤Êâ∞ÁöÑÔºåÊâÄ‰ª•‰Ω†‰∏çÂèØËÉΩ‰ªéÂà´ÁöÑÁ∫øÁ®ã‰∏≠Ëé∑ÂæóËøîÂõûÂÄºÔºåÊâÄ‰ª•Ë¶ÅÊÉ≥Ëé∑ÂæóCallableÁöÑËøîÂõûÂÄºÂ∞±ÈúÄË¶ÅÁî®Âà∞FutureËøô‰∏™Êé•Âè£ÔºåFutrueÂèØ‰ª•ÁõëËßÜÁõÆÊ†áÁ∫øÁ®ãË∞ÉÁî®callÁöÑÊÉÖÂÜµÔºåÂΩì‰Ω†Ë∞ÉÁî®FutureÁöÑget()ÊñπÊ≥ï‰ª•Ëé∑ÂæóÁªìÊûúÊó∂ÔºåÂΩìÂâçÁ∫øÁ®ãÂ∞±ÂºÄÂßãÈòªÂ°ûÔºåÁõ¥Âà∞callÊñπÊ≥ïÁªìÊùüËøîÂõûÁªìÊûú„ÄÇ ÊÄªËÄåË®Ä‰πãÔºåÂ∞±ÊòØ‰∏âÁÇπÔºö Runnable Ë∞ÉÁî® runÊñπÊ≥ïÔºåCallable Ë∞ÉÁî® call ÊñπÊ≥ïÔºõ Runnable‰∏çËÉΩÊúâËøîÂõûÂÄºÔºå‰ΩÜÊòØ CallableÂèØ‰ª•ËøîÂõû‰∏Ä‰∏™FutureÂØπË±°Ôºõ Runnable‰∏çÂèØ‰ª•ÊäõÂá∫ÂºÇÂ∏∏Ôºå‰ΩÜÊòØ Callable ÂèØ‰ª•ÊäõÂá∫ÂºÇÂ∏∏„ÄÇ FutureFuture Â∞±ÊòØÂØπ‰∫éÂÖ∑‰ΩìÁöÑ Runnable ÊàñËÄÖ Callable ‰ªªÂä°ÁöÑÊâßË°åÁªìÊûúËøõË°åÂèñÊ∂à„ÄÅÊü•ËØ¢ÊòØÂê¶ÂÆåÊàê„ÄÅËé∑ÂèñÁªìÊûú„ÄÇÂøÖË¶ÅÊó∂ÂèØ‰ª•ÈÄöËøágetÊñπÊ≥ïËé∑ÂèñÊâßË°åÁªìÊûúÔºåËØ•ÊñπÊ≥ï‰ºöÈòªÂ°ûÁõ¥Âà∞‰ªªÂä°ËøîÂõûÁªìÊûú„ÄÇ 12345678public interface Future&lt;V&gt; &#123; boolean cancel(boolean mayInterruptIfRunning); boolean isCancelled(); boolean isDone(); V get() throws InterruptedException, ExecutionException; V get(long timeout, TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException;&#125; ‰∏ãÈù¢Êàë‰ª¨ËÆ≤Ëß£‰∏ãËøô‰∫î‰∏™ÊñπÊ≥ïÁöÑ‰ΩúÁî®Ôºö cancelÊñπÊ≥ïÔºöÁî®Êù•ÂèñÊ∂à‰ªªÂä°ÔºåÂ¶ÇÊûúÂèñÊ∂à‰ªªÂä°ÊàêÂäüÂàôËøîÂõûtrueÔºåÂ¶ÇÊûúÂèñÊ∂à‰ªªÂä°Â§±Ë¥•ÂàôËøîÂõûfalse„ÄÇÂèÇÊï∞mayInterruptIfRunningË°®Á§∫ÊòØÂê¶ÂÖÅËÆ∏ÂèñÊ∂àÊ≠£Âú®ÊâßË°åÂç¥Ê≤°ÊúâÊâßË°åÂÆåÊØïÁöÑ‰ªªÂä°ÔºåÂ¶ÇÊûúËÆæÁΩÆtrueÔºåÂàôË°®Á§∫ÂèØ‰ª•ÂèñÊ∂àÊ≠£Âú®ÊâßË°åËøáÁ®ã‰∏≠ÁöÑ‰ªªÂä°„ÄÇÂ¶ÇÊûú‰ªªÂä°Â∑≤ÁªèÂÆåÊàêÔºåÂàôÊó†ËÆ∫mayInterruptIfRunning‰∏∫trueËøòÊòØfalseÔºåÊ≠§ÊñπÊ≥ïËÇØÂÆöËøîÂõûfalseÔºåÂç≥Â¶ÇÊûúÂèñÊ∂àÂ∑≤ÁªèÂÆåÊàêÁöÑ‰ªªÂä°‰ºöËøîÂõûfalseÔºõÂ¶ÇÊûú‰ªªÂä°Ê≠£Âú®ÊâßË°åÔºåËã•mayInterruptIfRunningËÆæÁΩÆ‰∏∫trueÔºåÂàôËøîÂõûtrueÔºåËã•mayInterruptIfRunningËÆæÁΩÆ‰∏∫falseÔºåÂàôËøîÂõûfalseÔºõÂ¶ÇÊûú‰ªªÂä°ËøòÊ≤°ÊúâÊâßË°åÔºåÂàôÊó†ËÆ∫mayInterruptIfRunning‰∏∫trueËøòÊòØfalseÔºåËÇØÂÆöËøîÂõûtrue„ÄÇ isCancelledÊñπÊ≥ïÔºöË°®Á§∫‰ªªÂä°ÊòØÂê¶Ë¢´ÂèñÊ∂àÊàêÂäüÔºåÂ¶ÇÊûúÂú®‰ªªÂä°Ê≠£Â∏∏ÂÆåÊàêÂâçË¢´ÂèñÊ∂àÊàêÂäüÔºåÂàôËøîÂõû true isDoneÊñπÊ≥ïÔºöË°®Á§∫‰ªªÂä°ÊòØÂê¶Â∑≤ÁªèÂÆåÊàêÔºåËã•‰ªªÂä°ÂÆåÊàêÔºåÂàôËøîÂõûtrue get()ÊñπÊ≥ïÔºöÁî®Êù•Ëé∑ÂèñÊâßË°åÁªìÊûúÔºåËøô‰∏™ÊñπÊ≥ï‰ºö‰∫ßÁîüÈòªÂ°ûÔºå‰ºö‰∏ÄÁõ¥Á≠âÂà∞‰ªªÂä°ÊâßË°åÂÆåÊØïÊâçËøîÂõû„ÄÇËøôÈáåÁöÑÈòªÂ°ûÈúÄË¶ÅËß£Èáä‰∏Ä‰∏ãÔºåÈòªÂ°ûÁöÑÊòØÂΩìÂâçË∞ÉÁî®getÊñπÊ≥ïÁöÑÁ∫øÁ®ãÔºåÁõ¥Âà∞getÊñπÊ≥ïËøîÂõûÁªìÊûúÊâçËÉΩÁªßÁª≠Âêë‰∏ãÊâßË°åÔºåÂ¶ÇÊûúgetÊñπÊ≥ï‰∏ÄÁõ¥Ê≤°ÊúâËøîÂõûÂÄºÔºåÈÇ£‰πàÂΩìÂâçÁ∫øÁ®ã‰ºö‰∏ÄÁõ¥ÈòªÂ°û‰∏ãÂéª get(long timeout, TimeUnit unit)ÊñπÊ≥ïÔºöËé∑ÂèñÊâßË°åÁªìÊûúÔºåÂ¶ÇÊûúÂú®ÊåáÂÆöÊó∂Èó¥ÂÜÖÔºåËøòÊ≤°Ëé∑ÂèñÂà∞ÁªìÊûúÔºåÂ∞±Áõ¥Êé•ËøîÂõûnullÔºåËøô‰∏™Â∞±ÈÅøÂÖç‰∫Ü‰∏ÄÁõ¥Ëé∑Âèñ‰∏çÂà∞ÁªìÊûú‰ΩøÂæóÂΩìÂâçÁ∫øÁ®ã‰∏ÄÁõ¥ÈòªÂ°ûÁöÑÊÉÖÂÜµÂèëÁîü ‰πüÂ∞±ÊòØËØ¥FutureÊèê‰æõ‰∫Ü‰∏âÁßçÂäüËÉΩÔºö 1ÔºâÂà§Êñ≠‰ªªÂä°ÊòØÂê¶ÂÆåÊàêÔºõ 2ÔºâËÉΩÂ§ü‰∏≠Êñ≠‰ªªÂä°Ôºõ 3ÔºâËÉΩÂ§üËé∑Âèñ‰ªªÂä°ÊâßË°åÁªìÊûú„ÄÇ Âõ†‰∏∫FutureÂè™ÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåÊâÄ‰ª•ÊòØÊó†Ê≥ïÁõ¥Êé•Áî®Êù•ÂàõÂª∫ÂØπË±°‰ΩøÁî®ÁöÑÔºåÂõ†Ê≠§Â∞±Êúâ‰∫Ü‰∏ãÈù¢ÁöÑ FutureTask„ÄÇ FutureTaskÊàë‰ª¨ÂÖàÊù•Áúã‰∏Ä‰∏ã FutureTask ÁöÑÁ±ªÂõæÔºö ÂèØ‰ª•ÁúãÂá∫ RunnableFuture ÁªßÊâø‰∫Ü Runnable Êé•Âè£Âíå Future Êé•Âè£ÔºåËÄå FutureTask ÂÆûÁé∞‰∫Ü RunnableFuture Êé•Âè£„ÄÇÊâÄ‰ª•ÂÆÉÊó¢ÂèØ‰ª•‰Ωú‰∏∫ Runnable Ë¢´Á∫øÁ®ãÊâßË°åÔºåÂèàÂèØ‰ª•‰Ωú‰∏∫ Future ÂæóÂà∞ Callable ÁöÑËøîÂõûÂÄº„ÄÇ ÂÆûÁé∞ ExecutorService &amp; Future &amp; Callable Á¨¨‰∏ÄÁßçÊñπÂºèÊòØ‰ΩøÁî®ÁªßÊâø‰∫ÜExecutorServiceÁöÑÁ∫øÁ®ãÊ±†ThreadPoolExecutor‰∏≠ÁöÑsubmitÊñπÊ≥ïÔºåÂ∞ÜCallableÁõ¥Êé•Êèê‰∫§ÂàõÂª∫Future„ÄÇ demo 123456789101112131415161718192021class CallableDemo&#123; public static void main(String[] args) &#123; // ExecutorService &amp; Callable ExecutorService service = Executors.newSingleThreadExecutor(); // ÊàñËÄÖÁî®Ëøô‰∏™// ExecutorService service = Executors.newCachedThreadPool(); Future&lt;String&gt; future = service.submit((Callable) () -&gt; "ÈÄöËøáÂÆûÁé∞CallableÊé•Âè£"); System.out.println(future.isDone()); service.shutdown(); try &#123; String result = future.get(); System.out.println(result); System.out.println(future.isDone()); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; catch (ExecutionException e) &#123; e.printStackTrace(); &#125; &#125;&#125; ExecutorService &amp; futureTask &amp; Callable Á¨¨‰∫åÁßçÊñπÂºèÂ∞±ÊòØ‰ΩøÁî® futureTaskÔºåÂÖ∑‰ΩìÁúã demo Âêß demo 12345678910111213141516171819202122232425262728293031323334class CallableDemo &#123; public static void main(String[] args) &#123; // FutureTask &amp; Callable CallableTest callableTest = new CallableTest(); FutureTask&lt;Integer&gt; futureTask = new FutureTask&lt;&gt;(callableTest); // futureTask ÂèØ‰ª•ÈááÁî®‰∏§ÁßçÊñπÂºèËøêË°åÁ∫øÁ®ã // 1. Áõ¥Êé•new Thread// new Thread(futureTask).start(); // 2. Â∞ÜFutureTask ÂØπË±°ÊîæÂÖ• executorService ‰∏≠ ExecutorService service = Executors.newCachedThreadPool(); service.submit(futureTask); service.shutdown(); try &#123; System.out.println("Â≠êÁ∫øÁ®ãÁöÑËøîÂõûÂÄº: " + futureTask.get(3, TimeUnit.SECONDS)); &#125; catch (InterruptedException | TimeoutException e) &#123; e.printStackTrace(); &#125; catch (ExecutionException e) &#123; e.printStackTrace(); &#125; &#125;&#125;class CallableTest implements Callable &#123; @Override public Integer call() throws Exception &#123; int sum = 0; for (int i = 1; i &lt; 101; i++) &#123; sum += i; &#125; Thread.sleep(2000); System.out.println(Thread.currentThread().getName() + " is running: " + sum); return sum; &#125;&#125; futureTask &amp; Callable Âõ†‰∏∫ futureTask ÂÆûÁé∞‰∫Ü run() ÊñπÊ≥ïÔºåÊâÄ‰ª•ÂèØ‰ª•Áõ¥Êé• new Thread ÂêØÂä®„ÄÇ demo 12345678910111213141516171819202122232425262728293031323334class CallableDemo &#123; public static void main(String[] args) &#123; // FutureTask &amp; Callable CallableTest callableTest = new CallableTest(); FutureTask&lt;Integer&gt; futureTask = new FutureTask&lt;&gt;(callableTest); // futureTask ÂèØ‰ª•ÈááÁî®‰∏§ÁßçÊñπÂºèËøêË°åÁ∫øÁ®ã // 1. Áõ¥Êé•new Thread new Thread(futureTask).start(); // 2. Â∞ÜFutureTask ÂØπË±°ÊîæÂÖ• executorService ‰∏≠// ExecutorService service = Executors.newCachedThreadPool();// service.submit(futureTask);// service.shutdown(); try &#123; System.out.println("Â≠êÁ∫øÁ®ãÁöÑËøîÂõûÂÄº: " + futureTask.get(3, TimeUnit.SECONDS)); &#125; catch (InterruptedException | TimeoutException e) &#123; e.printStackTrace(); &#125; catch (ExecutionException e) &#123; e.printStackTrace(); &#125; &#125;&#125;class CallableTest implements Callable &#123; @Override public Integer call() throws Exception &#123; int sum = 0; for (int i = 1; i &lt; 101; i++) &#123; sum += i; &#125; Thread.sleep(2000); System.out.println(Thread.currentThread().getName() + " is running: " + sum); return sum; &#125;&#125; ‰∏âÁßçÊñπÂºèÁöÑÊØîËæÉ1.ÂÆûÁé∞Runnable/CallableÊé•Âè£Áõ∏ÊØîÁªßÊâøThreadÁ±ªÁöÑ‰ºòÂäø Ôºà1ÔºâÈÄÇÂêàÂ§ö‰∏™Á∫øÁ®ãËøõË°åËµÑÊ∫êÂÖ±‰∫´ Ôºà2ÔºâÂèØ‰ª•ÈÅøÂÖçjava‰∏≠ÂçïÁªßÊâøÁöÑÈôêÂà∂ Ôºà3ÔºâÂ¢ûÂä†Á®ãÂ∫èÁöÑÂÅ•Â£ÆÊÄßÔºå‰ª£Á†ÅÂíåÊï∞ÊçÆÁã¨Á´ã Ôºà4ÔºâÁ∫øÁ®ãÊ±†Âè™ËÉΩÊîæÂÖ• Runable Êàñ Callable Êé•Âè£ÂÆûÁé∞Á±ªÔºå‰∏çËÉΩÁõ¥Êé•ÊîæÂÖ•ÁªßÊâø Thread ÁöÑÁ±ª 2.CallableÂíåRunnableÁöÑÂå∫Âà´ ‚Äã (1) Callable ÈáçÂÜôÁöÑÊòØ call() ÊñπÊ≥ïÔºå Runnable ÈáçÂÜôÁöÑÊñπÊ≥ïÊòØ run() ÊñπÊ≥ï ‚Äã (2) call() ÊñπÊ≥ïÊâßË°åÂêéÂèØ‰ª•ÊúâËøîÂõûÂÄºÔºårun() ÊñπÊ≥ïÊ≤°ÊúâËøîÂõûÂÄº ‚Äã (3) call() ÊñπÊ≥ïÂèØ‰ª•ÊäõÂá∫ÂºÇÂ∏∏Ôºårun() ÊñπÊ≥ï‰∏çÂèØ‰ª• ‚Äã (4) ËøêË°å Callable ‰ªªÂä°ÂèØ‰ª•ÊãøÂà∞‰∏Ä‰∏™ Future ÂØπË±°ÔºåË°®Á§∫ÂºÇÊ≠•ËÆ°ÁÆóÁöÑÁªìÊûú „ÄÇÈÄöËøá Future ÂØπË±°ÂèØ‰ª•‰∫ÜËß£‰ªªÂä°ÊâßË°åÊÉÖÂÜµÔºåÂèØÂèñÊ∂à‰ªªÂä°ÁöÑÊâßË°åÔºåËøòÂèØËé∑ÂèñÊâßË°åÁªìÊûú https://zhuanlan.zhihu.com/p/88933756 https://juejin.im/post/5ae6cf7a518825670960fcc2 Synchronized Ë∂ÖËØ¶ÁªÜ‰æãÂ≠êËÆ≤Ëø∞ Synchronized ÂΩ¢Ë±°ËÆ≤Ëø∞ÂØπË±°ÈîÅÂíåÁ±ªÈîÅÂå∫Âà´ Synchronized ‰∏ªË¶ÅÊòØÁ±ªÈîÅÂíåÂØπË±°ÈîÅÁöÑÂå∫Âà´ synchronizedÁâπÁÇπÔºö‰øùËØÅÂÜÖÂ≠òÂèØËßÅÊÄß„ÄÅÊìç‰ΩúÂéüÂ≠êÊÄß synchronizedÂΩ±ÂìçÊÄßËÉΩÁöÑÂéüÂõ†Ôºö 1„ÄÅÂä†ÈîÅËß£ÈîÅÊìç‰ΩúÈúÄË¶ÅÈ¢ùÂ§ñÊìç‰ΩúÔºõ 2„ÄÅ‰∫íÊñ•ÂêåÊ≠•ÂØπÊÄßËÉΩÊúÄÂ§ßÁöÑÂΩ±ÂìçÊòØÈòªÂ°ûÁöÑÂÆûÁé∞ÔºåÂõ†‰∏∫ÈòªÂ°ûÊ∂âÂèäÂà∞ÁöÑÊåÇËµ∑Á∫øÁ®ãÂíåÊÅ¢Â§çÁ∫øÁ®ãÁöÑÊìç‰ΩúÈÉΩÈúÄË¶ÅËΩ¨ÂÖ•ÂÜÖÊ†∏ÊÄÅ‰∏≠ÂÆåÊàêÔºàÁî®Êà∑ÊÄÅ‰∏éÂÜÖÊ†∏ÊÄÅÁöÑÂàáÊç¢ÁöÑÊÄßËÉΩ‰ª£‰ª∑ÊòØÊØîËæÉÂ§ßÁöÑÔºâ synchronizedÈîÅÔºöÂØπË±°Â§¥‰∏≠ÁöÑMark WordÊ†πÊçÆÈîÅÊ†áÂøó‰ΩçÁöÑ‰∏çÂêåËÄåË¢´Â§çÁî® ÂÅèÂêëÈîÅÔºöÂú®Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÊâßË°åÂêåÊ≠•ÂùóÊó∂ÊèêÈ´òÊÄßËÉΩ„ÄÇMark WordÂ≠òÂÇ®ÈîÅÂÅèÂêëÁöÑÁ∫øÁ®ãIDÔºå‰ª•ÂêéËØ•Á∫øÁ®ãÂú®ËøõÂÖ•ÂíåÈÄÄÂá∫ÂêåÊ≠•ÂùóÊó∂‰∏çÈúÄË¶ÅËøõË°åCASÊìç‰ΩúÊù•Âä†ÈîÅÂíåËß£ÈîÅÔºåÂè™ÈúÄÁÆÄÂçïÊØîËæÉThreadID„ÄÇÁâπÁÇπÔºöÂè™ÊúâÁ≠âÂà∞Á∫øÁ®ãÁ´û‰∫âÂá∫Áé∞ÊâçÈáäÊîæÂÅèÂêëÈîÅÔºåÊåÅÊúâÂÅèÂêëÈîÅÁöÑÁ∫øÁ®ã‰∏ç‰ºö‰∏ªÂä®ÈáäÊîæÂÅèÂêëÈîÅ„ÄÇ‰πãÂêéÁöÑÁ∫øÁ®ãÁ´û‰∫âÂÅèÂêëÈîÅÔºå‰ºöÂÖàÊ£ÄÊü•ÊåÅÊúâÂÅèÂêëÈîÅÁöÑÁ∫øÁ®ãÊòØÂê¶Â≠òÊ¥ªÔºåÂ¶ÇÊûú‰∏çÂ≠òË¥ßÔºåÂàôÂØπË±°Âèò‰∏∫Êó†ÈîÅÁä∂ÊÄÅÔºåÈáçÊñ∞ÂÅèÂêëÔºõÂ¶ÇÊûú‰ªçÂ≠òÊ¥ªÔºåÂàôÂÅèÂêëÈîÅÂçáÁ∫ß‰∏∫ËΩªÈáèÁ∫ßÈîÅÔºåÊ≠§Êó∂ËΩªÈáèÁ∫ßÈîÅÁî±ÂéüÊåÅÊúâÂÅèÂêëÈîÅÁöÑÁ∫øÁ®ãÊåÅÊúâÔºåÁªßÁª≠ÊâßË°åÂÖ∂ÂêåÊ≠•‰ª£Á†ÅÔºåËÄåÊ≠£Âú®Á´û‰∫âÁöÑÁ∫øÁ®ã‰ºöËøõÂÖ•Ëá™ÊóãÁ≠âÂæÖËé∑ÂæóËØ•ËΩªÈáèÁ∫ßÈîÅ ËΩªÈáèÁ∫ßÈîÅÔºöÂú®ÂΩìÂâçÁ∫øÁ®ãÁöÑÊ†àÂ∏ß‰∏≠Âª∫Á´ã‰∏Ä‰∏™Âêç‰∏∫ÈîÅËÆ∞ÂΩïÔºàLock RecordÔºâÁöÑÁ©∫Èó¥ÔºåÂ∞ùËØïÊã∑Ë¥ùÈîÅÂØπË±°ÁõÆÂâçÁöÑMark WordÂà∞Ê†àÂ∏ßÁöÑLock RecordÔºåËã•Êã∑Ë¥ùÊàêÂäüÔºöËôöÊãüÊú∫Â∞Ü‰ΩøÁî®CASÊìç‰ΩúÂ∞ùËØïÂ∞ÜÂØπË±°ÁöÑMark WordÊõ¥Êñ∞‰∏∫ÊåáÂêëLock RecordÁöÑÊåáÈíàÔºåÂπ∂Â∞ÜLock recordÈáåÁöÑownerÊåáÈíàÊåáÂêëÂØπË±°ÁöÑMark Word„ÄÇËã•Êã∑Ë¥ùÂ§±Ë¥•ÔºöËã•ÂΩìÂâçÂè™Êúâ‰∏Ä‰∏™Á≠âÂæÖÁ∫øÁ®ãÔºåÂàôÂèØÈÄöËøáËá™ÊóãÁ®çÂæÆÁ≠âÂæÖ‰∏Ä‰∏ãÔºåÂèØËÉΩÊåÅÊúâËΩªÈáèÁ∫ßÈîÅÁöÑÁ∫øÁ®ãÂæàÂø´Â∞±‰ºöÈáäÊîæÈîÅ„ÄÇ ‰ΩÜÊòØÂΩìËá™ÊóãË∂ÖËøá‰∏ÄÂÆöÁöÑÊ¨°Êï∞ÔºåÊàñËÄÖ‰∏Ä‰∏™Á∫øÁ®ãÂú®ÊåÅÊúâÈîÅÔºå‰∏Ä‰∏™Âú®Ëá™ÊóãÔºåÂèàÊúâÁ¨¨‰∏â‰∏™Êù•ËÆøÊó∂ÔºåËΩªÈáèÁ∫ßÈîÅËÜ®ËÉÄ‰∏∫ÈáçÈáèÁ∫ßÈîÅ ÈáçÈáèÁ∫ßÈîÅÔºöÊåáÂêë‰∫íÊñ•ÈáèÔºàmutexÔºâÔºåÂ∫ïÂ±ÇÈÄöËøáÊìç‰ΩúÁ≥ªÁªüÁöÑmutex lockÂÆûÁé∞„ÄÇÁ≠âÂæÖÈîÅÁöÑÁ∫øÁ®ã‰ºöË¢´ÈòªÂ°ûÔºåÁî±‰∫éLinux‰∏ãJavaÁ∫øÁ®ã‰∏éÊìç‰ΩúÁ≥ªÁªüÂÜÖÊ†∏ÊÄÅÁ∫øÁ®ã‰∏Ä‰∏ÄÊò†Â∞ÑÔºåÊâÄ‰ª•Ê∂âÂèäÂà∞Áî®Êà∑ÊÄÅÂíåÂÜÖÊ†∏ÊÄÅÁöÑÂàáÊç¢„ÄÅÊìç‰ΩúÁ≥ªÁªüÂÜÖÊ†∏ÊÄÅ‰∏≠ÁöÑÁ∫øÁ®ãÁöÑÈòªÂ°ûÂíåÊÅ¢Â§ç„ÄÇ Volatile volatileÂèØËßÅÊÄßÂéüÁêÜÂ∫ïÂ±ÇÂàÜÊûêÔºàËßÜÈ¢ëÔºâ https://juejin.im/post/5ae9b41b518825670b33e6c4 https://www.infoq.cn/article/java-memory-model-4/ ÊòØÂê¶ËÉΩÈáçÊéíÂ∫è Á¨¨‰∫å‰∏™Êìç‰Ωú Á¨¨‰∏Ä‰∏™Êìç‰Ωú ÊôÆÈÄöËØª / ÂÜô volatile ËØª volatile ÂÜô ÊôÆÈÄöËØª / ÂÜô NO volatile ËØª NO NO( NO volatile ÂÜô NO NO( ‰ªé‰∏äË°®Êàë‰ª¨ÂèØ‰ª•ÁúãÂá∫Ôºö ÂΩìÁ¨¨‰∫å‰∏™Êìç‰ΩúÊòØ volatile ÂÜôÊó∂Ôºå‰∏çÁÆ°Á¨¨‰∏Ä‰∏™Êìç‰ΩúÊòØ‰ªÄ‰πàÔºåÈÉΩ‰∏çËÉΩÈáçÊéíÂ∫è„ÄÇËøô‰∏™ËßÑÂàôÁ°Æ‰øù volatile ÂÜô‰πãÂâçÁöÑÊìç‰Ωú‰∏ç‰ºöË¢´ÁºñËØëÂô®ÈáçÊéíÂ∫èÂà∞ volatile ÂÜô‰πãÂêé„ÄÇ ÂΩìÁ¨¨‰∏Ä‰∏™Êìç‰ΩúÊòØ volatile ËØªÊó∂Ôºå‰∏çÁÆ°Á¨¨‰∫å‰∏™Êìç‰ΩúÊòØ‰ªÄ‰πàÔºåÈÉΩ‰∏çËÉΩÈáçÊéíÂ∫è„ÄÇËøô‰∏™ËßÑÂàôÁ°Æ‰øù volatile ËØª‰πãÂêéÁöÑÊìç‰Ωú‰∏ç‰ºöË¢´ÁºñËØëÂô®ÈáçÊéíÂ∫èÂà∞ volatile ËØª‰πãÂâç„ÄÇ ÂΩìÁ¨¨‰∏Ä‰∏™Êìç‰ΩúÊòØ volatile ÂÜôÔºåÁ¨¨‰∫å‰∏™Êìç‰ΩúÊòØ volatile ËØªÊó∂Ôºå‰∏çËÉΩÈáçÊéíÂ∫è„ÄÇ ‰∏∫‰∫ÜÂÆûÁé∞ volatile ÁöÑÂÜÖÂ≠òËØ≠‰πâÔºåÁºñËØëÂô®Âú®ÁîüÊàêÂ≠óËäÇÁ†ÅÊó∂Ôºå‰ºöÂú®Êåá‰ª§Â∫èÂàó‰∏≠ÊèíÂÖ•ÂÜÖÂ≠òÂ±èÈöúÊù•Á¶ÅÊ≠¢ÁâπÂÆöÁ±ªÂûãÁöÑÂ§ÑÁêÜÂô®ÈáçÊéíÂ∫è„ÄÇÂØπ‰∫éÁºñËØëÂô®Êù•ËØ¥ÔºåÂèëÁé∞‰∏Ä‰∏™ÊúÄ‰ºòÂ∏ÉÁΩÆÊù•ÊúÄÂ∞èÂåñÊèíÂÖ•Â±èÈöúÁöÑÊÄªÊï∞Âá†‰πé‰∏çÂèØËÉΩÔºå‰∏∫Ê≠§ÔºåJMM ÈááÂèñ‰øùÂÆàÁ≠ñÁï•„ÄÇ‰∏ãÈù¢ÊòØÂü∫‰∫é‰øùÂÆàÁ≠ñÁï•ÁöÑ JMM ÂÜÖÂ≠òÂ±èÈöúÊèíÂÖ•Á≠ñÁï•Ôºö Âú®ÊØè‰∏™ volatile ÂÜôÊìç‰ΩúÁöÑÂâçÈù¢ÊèíÂÖ•‰∏Ä‰∏™ StoreStore Â±èÈöú„ÄÇ Âú®ÊØè‰∏™ volatile ÂÜôÊìç‰ΩúÁöÑÂêéÈù¢ÊèíÂÖ•‰∏Ä‰∏™ StoreLoad Â±èÈöú„ÄÇ(ÂèØ‰ª•ÂÖÅËÆ∏ÊôÆÈÄö) Âú®ÊØè‰∏™ volatile ËØªÊìç‰ΩúÁöÑÂêéÈù¢ÊèíÂÖ•‰∏Ä‰∏™ LoadLoad Â±èÈöú„ÄÇ Âú®ÊØè‰∏™ volatile ËØªÊìç‰ΩúÁöÑÂêéÈù¢ÊèíÂÖ•‰∏Ä‰∏™ LoadStore Â±èÈöú„ÄÇ ‰∏äËø∞ÂÜÖÂ≠òÂ±èÈöúÊèíÂÖ•Á≠ñÁï•ÈùûÂ∏∏‰øùÂÆàÔºå‰ΩÜÂÆÉÂèØ‰ª•‰øùËØÅÂú®‰ªªÊÑèÂ§ÑÁêÜÂô®Âπ≥Âè∞Ôºå‰ªªÊÑèÁöÑÁ®ãÂ∫è‰∏≠ÈÉΩËÉΩÂæóÂà∞Ê≠£Á°ÆÁöÑ volatile ÂÜÖÂ≠òËØ≠‰πâ„ÄÇ ‰∏ãÈù¢ÊòØ‰øùÂÆàÁ≠ñÁï•‰∏ãÔºåvolatile ÂÜôÊèíÂÖ•ÂÜÖÂ≠òÂ±èÈöúÂêéÁîüÊàêÁöÑÊåá‰ª§Â∫èÂàóÁ§∫ÊÑèÂõæÔºö ‰∏äÂõæ‰∏≠ÁöÑ StoreStore Â±èÈöúÂèØ‰ª•‰øùËØÅÂú® volatile ÂÜô‰πãÂâçÔºåÂÖ∂ÂâçÈù¢ÁöÑÊâÄÊúâÊôÆÈÄöÂÜôÊìç‰ΩúÂ∑≤ÁªèÂØπ‰ªªÊÑèÂ§ÑÁêÜÂô®ÂèØËßÅ‰∫Ü„ÄÇËøôÊòØÂõ†‰∏∫ StoreStore Â±èÈöúÂ∞Ü‰øùÈöú‰∏äÈù¢ÊâÄÊúâÁöÑÊôÆÈÄöÂÜôÂú® volatile ÂÜô‰πãÂâçÂà∑Êñ∞Âà∞‰∏ªÂÜÖÂ≠ò„ÄÇ ËøôÈáåÊØîËæÉÊúâÊÑèÊÄùÁöÑÊòØ volatile ÂÜôÂêéÈù¢ÁöÑ StoreLoad Â±èÈöú„ÄÇËøô‰∏™Â±èÈöúÁöÑ‰ΩúÁî®ÊòØÈÅøÂÖç volatile ÂÜô‰∏éÂêéÈù¢ÂèØËÉΩÊúâÁöÑ volatile ËØª / ÂÜôÊìç‰ΩúÈáçÊéíÂ∫è„ÄÇÂõ†‰∏∫ÁºñËØëÂô®Â∏∏Â∏∏Êó†Ê≥ïÂáÜÁ°ÆÂà§Êñ≠Âú®‰∏Ä‰∏™ volatile ÂÜôÁöÑÂêéÈù¢ÔºåÊòØÂê¶ÈúÄË¶ÅÊèíÂÖ•‰∏Ä‰∏™ StoreLoad Â±èÈöúÔºàÊØîÂ¶ÇÔºå‰∏Ä‰∏™ volatile ÂÜô‰πãÂêéÊñπÊ≥ïÁ´ãÂç≥ returnÔºâ„ÄÇ‰∏∫‰∫Ü‰øùËØÅËÉΩÊ≠£Á°ÆÂÆûÁé∞ volatile ÁöÑÂÜÖÂ≠òËØ≠‰πâÔºåJMM Âú®ËøôÈáåÈááÂèñ‰∫Ü‰øùÂÆàÁ≠ñÁï•ÔºöÂú®ÊØè‰∏™ volatile ÂÜôÁöÑÂêéÈù¢ÊàñÂú®ÊØè‰∏™ volatile ËØªÁöÑÂâçÈù¢ÊèíÂÖ•‰∏Ä‰∏™ StoreLoad Â±èÈöú„ÄÇ‰ªéÊï¥‰ΩìÊâßË°åÊïàÁéáÁöÑËßíÂ∫¶ËÄÉËôëÔºåJMM ÈÄâÊã©‰∫ÜÂú®ÊØè‰∏™ volatile ÂÜôÁöÑÂêéÈù¢ÊèíÂÖ•‰∏Ä‰∏™ StoreLoad Â±èÈöú„ÄÇÂõ†‰∏∫ volatile ÂÜô - ËØªÂÜÖÂ≠òËØ≠‰πâÁöÑÂ∏∏ËßÅ‰ΩøÁî®Ê®°ÂºèÊòØÔºö‰∏Ä‰∏™ÂÜôÁ∫øÁ®ãÂÜô volatile ÂèòÈáèÔºåÂ§ö‰∏™ËØªÁ∫øÁ®ãËØªÂêå‰∏Ä‰∏™ volatile ÂèòÈáè„ÄÇÂΩìËØªÁ∫øÁ®ãÁöÑÊï∞ÈáèÂ§ßÂ§ßË∂ÖËøáÂÜôÁ∫øÁ®ãÊó∂ÔºåÈÄâÊã©Âú® volatile ÂÜô‰πãÂêéÊèíÂÖ• StoreLoad Â±èÈöúÂ∞ÜÂ∏¶Êù•ÂèØËßÇÁöÑÊâßË°åÊïàÁéáÁöÑÊèêÂçá„ÄÇ‰ªéËøôÈáåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ JMM Âú®ÂÆûÁé∞‰∏äÁöÑ‰∏Ä‰∏™ÁâπÁÇπÔºöÈ¶ñÂÖàÁ°Æ‰øùÊ≠£Á°ÆÊÄßÔºåÁÑ∂ÂêéÂÜçÂéªËøΩÊ±ÇÊâßË°åÊïàÁéá„ÄÇ ‰∏ãÈù¢ÊòØÂú®‰øùÂÆàÁ≠ñÁï•‰∏ãÔºåvolatile ËØªÊèíÂÖ•ÂÜÖÂ≠òÂ±èÈöúÂêéÁîüÊàêÁöÑÊåá‰ª§Â∫èÂàóÁ§∫ÊÑèÂõæÔºö ‰∏äÂõæ‰∏≠ÁöÑ LoadLoad Â±èÈöúÁî®Êù•Á¶ÅÊ≠¢Â§ÑÁêÜÂô®Êää‰∏äÈù¢ÁöÑ volatile ËØª‰∏é‰∏ãÈù¢ÁöÑÊôÆÈÄöËØªÈáçÊéíÂ∫è„ÄÇLoadStore Â±èÈöúÁî®Êù•Á¶ÅÊ≠¢Â§ÑÁêÜÂô®Êää‰∏äÈù¢ÁöÑ volatile ËØª‰∏é‰∏ãÈù¢ÁöÑÊôÆÈÄöÂÜôÈáçÊéíÂ∫è„ÄÇ ‰∏äËø∞ volatile ÂÜôÂíå volatile ËØªÁöÑÂÜÖÂ≠òÂ±èÈöúÊèíÂÖ•Á≠ñÁï•ÈùûÂ∏∏‰øùÂÆà„ÄÇÂú®ÂÆûÈôÖÊâßË°åÊó∂ÔºåÂè™Ë¶Å‰∏çÊîπÂèò volatile ÂÜô - ËØªÁöÑÂÜÖÂ≠òËØ≠‰πâÔºåÁºñËØëÂô®ÂèØ‰ª•Ê†πÊçÆÂÖ∑‰ΩìÊÉÖÂÜµÁúÅÁï•‰∏çÂøÖË¶ÅÁöÑÂ±èÈöú„ÄÇ‰∏ãÈù¢Êàë‰ª¨ÈÄöËøáÂÖ∑‰ΩìÁöÑÁ§∫‰æã‰ª£Á†ÅÊù•ËØ¥ÊòéÔºö 123456789101112131415class VolatileBarrierExample &#123; int a; volatile int v1 = 1; volatile int v2 = 2; void readAndWrite() &#123; int i = v1; // Á¨¨‰∏Ä‰∏™ volatile ËØª int j = v2; // Á¨¨‰∫å‰∏™ volatile ËØª a = i + j; // ÊôÆÈÄöÂÜô v1 = i + 1; // Á¨¨‰∏Ä‰∏™ volatile ÂÜô v2 = j * 2; // Á¨¨‰∫å‰∏™ volatile ÂÜô &#125; ‚Ä¶ // ÂÖ∂‰ªñÊñπÊ≥ï &#125; ÈíàÂØπ readAndWrite() ÊñπÊ≥ïÔºåÁºñËØëÂô®Âú®ÁîüÊàêÂ≠óËäÇÁ†ÅÊó∂ÂèØ‰ª•ÂÅöÂ¶Ç‰∏ãÁöÑ‰ºòÂåñÔºö Ê≥®ÊÑèÔºåÊúÄÂêéÁöÑ StoreLoad Â±èÈöú‰∏çËÉΩÁúÅÁï•„ÄÇÂõ†‰∏∫Á¨¨‰∫å‰∏™ volatile ÂÜô‰πãÂêéÔºåÊñπÊ≥ïÁ´ãÂç≥ return„ÄÇÊ≠§Êó∂ÁºñËØëÂô®ÂèØËÉΩÊó†Ê≥ïÂáÜÁ°ÆÊñ≠ÂÆöÂêéÈù¢ÊòØÂê¶‰ºöÊúâ volatile ËØªÊàñÂÜôÔºå‰∏∫‰∫ÜÂÆâÂÖ®Ëµ∑ËßÅÔºåÁºñËØëÂô®Â∏∏Â∏∏‰ºöÂú®ËøôÈáåÊèíÂÖ•‰∏Ä‰∏™ StoreLoad Â±èÈöú„ÄÇ ‰∏äÈù¢ÁöÑ‰ºòÂåñÊòØÈíàÂØπ‰ªªÊÑèÂ§ÑÁêÜÂô®Âπ≥Âè∞ÔºåÁî±‰∫é‰∏çÂêåÁöÑÂ§ÑÁêÜÂô®Êúâ‰∏çÂêå‚ÄúÊùæÁ¥ßÂ∫¶‚ÄùÁöÑÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÔºåÂÜÖÂ≠òÂ±èÈöúÁöÑÊèíÂÖ•ËøòÂèØ‰ª•Ê†πÊçÆÂÖ∑‰ΩìÁöÑÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÁªßÁª≠‰ºòÂåñ„ÄÇ‰ª• x86 Â§ÑÁêÜÂô®‰∏∫‰æãÔºå‰∏äÂõæ‰∏≠Èô§ÊúÄÂêéÁöÑ StoreLoad Â±èÈöúÂ§ñÔºåÂÖ∂ÂÆÉÁöÑÂ±èÈöúÈÉΩ‰ºöË¢´ÁúÅÁï•„ÄÇ ÂâçÈù¢‰øùÂÆàÁ≠ñÁï•‰∏ãÁöÑ volatile ËØªÂíåÂÜôÔºåÂú® x86 Â§ÑÁêÜÂô®Âπ≥Âè∞ÂèØ‰ª•‰ºòÂåñÊàêÔºö ÂâçÊñáÊèêÂà∞ËøáÔºåx86 Â§ÑÁêÜÂô®‰ªÖ‰ºöÂØπÂÜô - ËØªÊìç‰ΩúÂÅöÈáçÊéíÂ∫è„ÄÇX86 ‰∏ç‰ºöÂØπËØª - ËØªÔºåËØª - ÂÜôÂíåÂÜô - ÂÜôÊìç‰ΩúÂÅöÈáçÊéíÂ∫èÔºåÂõ†Ê≠§Âú® x86 Â§ÑÁêÜÂô®‰∏≠‰ºöÁúÅÁï•ÊéâËøô‰∏âÁßçÊìç‰ΩúÁ±ªÂûãÂØπÂ∫îÁöÑÂÜÖÂ≠òÂ±èÈöú„ÄÇÂú® x86 ‰∏≠ÔºåJMM ‰ªÖÈúÄÂú® volatile ÂÜôÂêéÈù¢ÊèíÂÖ•‰∏Ä‰∏™ StoreLoad Â±èÈöúÂç≥ÂèØÊ≠£Á°ÆÂÆûÁé∞ volatile ÂÜô - ËØªÁöÑÂÜÖÂ≠òËØ≠‰πâ„ÄÇËøôÊÑèÂë≥ÁùÄÂú® x86 Â§ÑÁêÜÂô®‰∏≠Ôºåvolatile ÂÜôÁöÑÂºÄÈîÄÊØî volatile ËØªÁöÑÂºÄÈîÄ‰ºöÂ§ßÂæàÂ§öÔºàÂõ†‰∏∫ÊâßË°å StoreLoad Â±èÈöúÂºÄÈîÄ‰ºöÊØîËæÉÂ§ßÔºâ„ÄÇ AQS AQSÊ∫êÁ†ÅÂàÜÊûê‚ÄîÁã¨Âç†Ê®°Âºè&amp;ÂÖ±‰∫´Ê®°Âºè AQSÂàÜÊûê‰∏Ä„ÄÅAQSÂàÜÊûê‰∫å ÁæéÂõ¢Âõ¢ÈòüÔºö‰ªéReentrantLockÁöÑÂÆûÁé∞ÁúãAQSÁöÑÂéüÁêÜÂèäÂ∫îÁî® ÂÖ®Áß∞ÊòØ AbstractQueuedSynchronizerÔºàÊäΩË±°ÈòüÂàóÂêåÊ≠•Âô®ÔºâÔºåÊòØÈÄöËøá‰∏Ä‰∏™ÂÖàËøõÂÖàÂá∫ÁöÑÈòüÂàóÔºàÂ≠òÂÇ®Á≠âÂæÖÁöÑÁ∫øÁ®ãÔºâÊù•ÂÆûÁé∞ÂêåÊ≠•Âô®ÁöÑ‰∏Ä‰∏™Ê°ÜÊû∂ÔºåLock„ÄÅReentrantLock„ÄÅSemaphore Á≠âÁ≠âÈÉΩÊòØÂü∫‰∫é AQS ÂÆûÁé∞ÁöÑ„ÄÇ Êï¥‰ΩìÊ°ÜÊû∂ ‰∏äÂõæ‰∏≠ÊúâÈ¢úËâ≤ÁöÑ‰∏∫MethodÔºåÊó†È¢úËâ≤ÁöÑ‰∏∫Attribution„ÄÇ ÊÄªÁöÑÊù•ËØ¥ÔºåAQSÊ°ÜÊû∂ÂÖ±ÂàÜ‰∏∫‰∫îÂ±ÇÔºåËá™‰∏äËÄå‰∏ãÁî±ÊµÖÂÖ•Ê∑±Ôºå‰ªéAQSÂØπÂ§ñÊö¥Èú≤ÁöÑAPIÂà∞Â∫ïÂ±ÇÂü∫Á°ÄÊï∞ÊçÆ„ÄÇ ÂΩìÊúâËá™ÂÆö‰πâÂêåÊ≠•Âô®Êé•ÂÖ•Êó∂ÔºåÂè™ÈúÄÈáçÂÜôÁ¨¨‰∏ÄÂ±ÇÊâÄÈúÄË¶ÅÁöÑÈÉ®ÂàÜÊñπÊ≥ïÂç≥ÂèØÔºå‰∏çÈúÄË¶ÅÂÖ≥Ê≥®Â∫ïÂ±ÇÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÊµÅÁ®ã„ÄÇÂΩìËá™ÂÆö‰πâÂêåÊ≠•Âô®ËøõË°åÂä†ÈîÅÊàñËÄÖËß£ÈîÅÊìç‰ΩúÊó∂ÔºåÂÖàÁªèËøáÁ¨¨‰∏ÄÂ±ÇÁöÑAPIËøõÂÖ•AQSÂÜÖÈÉ®ÊñπÊ≥ïÔºåÁÑ∂ÂêéÁªèËøáÁ¨¨‰∫åÂ±ÇËøõË°åÈîÅÁöÑËé∑ÂèñÔºåÊé•ÁùÄÂØπ‰∫éËé∑ÂèñÈîÅÂ§±Ë¥•ÁöÑÊµÅÁ®ãÔºåËøõÂÖ•Á¨¨‰∏âÂ±ÇÂíåÁ¨¨ÂõõÂ±ÇÁöÑÁ≠âÂæÖÈòüÂàóÂ§ÑÁêÜÔºåËÄåËøô‰∫õÂ§ÑÁêÜÊñπÂºèÂùá‰æùËµñ‰∫éÁ¨¨‰∫îÂ±ÇÁöÑÂü∫Á°ÄÊï∞ÊçÆÊèê‰æõÂ±Ç„ÄÇ ‰∏ãÈù¢Êàë‰ª¨‰ºö‰ªéÊï¥‰ΩìÂà∞ÁªÜËäÇÔºå‰ªéÊµÅÁ®ãÂà∞ÊñπÊ≥ïÈÄê‰∏ÄÂâñÊûêAQSÊ°ÜÊû∂Ôºå‰∏ªË¶ÅÂàÜÊûêËøáÁ®ãÂ¶Ç‰∏ãÔºö ÂéüÁêÜÊ¶ÇËø∞AQSÊ†∏ÂøÉÊÄùÊÉ≥ÊòØÔºåÂ¶ÇÊûúË¢´ËØ∑Ê±ÇÁöÑÂÖ±‰∫´ËµÑÊ∫êÁ©∫Èó≤ÔºåÈÇ£‰πàÂ∞±Â∞ÜÂΩìÂâçËØ∑Ê±ÇËµÑÊ∫êÁöÑÁ∫øÁ®ãËÆæÁΩÆ‰∏∫ÊúâÊïàÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÔºåÂ∞ÜÂÖ±‰∫´ËµÑÊ∫êËÆæÁΩÆ‰∏∫ÈîÅÂÆöÁä∂ÊÄÅÔºõÂ¶ÇÊûúÂÖ±‰∫´ËµÑÊ∫êË¢´Âç†Áî®ÔºåÂ∞±ÈúÄË¶Å‰∏ÄÂÆöÁöÑÈòªÂ°ûÁ≠âÂæÖÂî§ÈÜíÊú∫Âà∂Êù•‰øùËØÅÈîÅÂàÜÈÖç„ÄÇËøô‰∏™Êú∫Âà∂‰∏ªË¶ÅÁî®ÁöÑÊòØCLHÈòüÂàóÁöÑÂèò‰ΩìÂÆûÁé∞ÁöÑÔºåÂ∞ÜÊöÇÊó∂Ëé∑Âèñ‰∏çÂà∞ÈîÅÁöÑÁ∫øÁ®ãÂä†ÂÖ•Âà∞ÈòüÂàó‰∏≠„ÄÇ CLHÔºöCraig„ÄÅLandin and HagerstenÈòüÂàóÔºåÊòØÂçïÂêëÈìæË°®ÔºåAQS‰∏≠ÁöÑÈòüÂàóÊòØCLHÂèò‰ΩìÁöÑËôöÊãüÂèåÂêëÈòüÂàóÔºàFIFOÔºâÔºåAQSÊòØÈÄöËøáÂ∞ÜÊØèÊù°ËØ∑Ê±ÇÂÖ±‰∫´ËµÑÊ∫êÁöÑÁ∫øÁ®ãÂ∞ÅË£ÖÊàê‰∏Ä‰∏™ËäÇÁÇπÊù•ÂÆûÁé∞ÈîÅÁöÑÂàÜÈÖç„ÄÇ AQS‰ΩøÁî®‰∏Ä‰∏™VolatileÁöÑintÁ±ªÂûãÁöÑÊàêÂëòÂèòÈáèÊù•Ë°®Á§∫ÂêåÊ≠•Áä∂ÊÄÅÔºåÈÄöËøáÂÜÖÁΩÆÁöÑFIFOÈòüÂàóÊù•ÂÆåÊàêËµÑÊ∫êËé∑ÂèñÁöÑÊéíÈòüÂ∑•‰ΩúÔºåÈÄöËøáCASÂÆåÊàêÂØπStateÂÄºÁöÑ‰øÆÊîπ„ÄÇ AQS ÁöÑÁªìÊûÑÂ§ßÊ¶ÇÂèØÊÄªÁªì‰∏∫‰ª•‰∏ã 3 ÈÉ®ÂàÜÔºö Áî® volatile ‰øÆÈ•∞ÁöÑÊï¥Êï∞Á±ªÂûãÁöÑ state Áä∂ÊÄÅÔºåÁî®‰∫éË°®Á§∫ÂêåÊ≠•Áä∂ÊÄÅÔºåÊèê‰æõ getState Âíå setState Êù•Êìç‰ΩúÂêåÊ≠•Áä∂ÊÄÅÔºõ Êèê‰æõ‰∫Ü‰∏Ä‰∏™ FIFO Á≠âÂæÖÈòüÂàóÔºåÂÆûÁé∞Á∫øÁ®ãÈó¥ÁöÑÁ´û‰∫âÂíåÁ≠âÂæÖÔºåËøôÊòØ AQS ÁöÑÊ†∏ÂøÉÔºõ AQS ÂÜÖÈÉ®Êèê‰æõ‰∫ÜÂêÑÁßçÂü∫‰∫é CAS ÂéüÂ≠êÊìç‰ΩúÊñπÊ≥ïÔºåÂ¶Ç compareAndSetState ÊñπÊ≥ïÔºåÂπ∂‰∏îÊèê‰æõ‰∫ÜÈîÅÊìç‰ΩúÁöÑacquireÂíåreleaseÊñπÊ≥ï„ÄÇ Êï∞ÊçÆÁªìÊûÑ &amp; ÈáçË¶ÅÂèòÈáèÂíåÁ±ªÂÖàÊù•Áúã‰∏ãAQS‰∏≠ÊúÄÂü∫Êú¨ÁöÑÊï∞ÊçÆÁªìÊûÑ‚Äî‚ÄîNodeÔºåNodeÂç≥‰∏∫‰∏äÈù¢CLHÂèò‰ΩìÈòüÂàó‰∏≠ÁöÑËäÇÁÇπ„ÄÇ 123456//AQSÁ≠âÂæÖÈòüÂàóÁöÑÂ§¥ÁªìÁÇπÔºåAQSÁöÑÁ≠âÂæÖÈòüÂàóÊòØÂü∫‰∫é‰∏Ä‰∏™ÂèåÂêëÈìæË°®Êù•ÂÆûÁé∞ÁöÑÔºåËøô‰∏™Â§¥ÁªìÁÇπÂπ∂‰∏çÂåÖÂê´ÂÖ∑‰ΩìÁöÑÁ∫øÁ®ãÊòØ‰∏Ä‰∏™Á©∫ÁªìÁÇπÔºàÊ≥®ÊÑè‰∏çÊòØnullÔºâprivate transient volatile Node head;//AQSÁ≠âÂæÖÈòüÂàóÁöÑÂ∞æÈÉ®ÁªìÁÇπprivate transient volatile Node tail;//AQSÂêåÊ≠•Âô®Áä∂ÊÄÅÔºå‰πüÂèØ‰ª•ËØ¥ÊòØÈîÅÁöÑÁä∂ÊÄÅÔºåÊ≥®ÊÑèvolatile‰øÆÈ•∞ËØÅÊòéËøô‰∏™ÂèòÈáèÁä∂ÊÄÅË¶ÅÂØπÂ§öÁ∫øÁ®ãÂèØËßÅprivate volatile int state; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849static final class Node &#123; //‰∏ãÈù¢‰∏§‰∏™Â±ûÊÄßÈÉΩÊòØËØ¥ÊòéËøô‰∏™ÁªìÁÇπÊòØÂÖ±‰∫´Ê®°ÂºèËøòÊòØÁã¨Âç†Ê®°Âºè static final Node SHARED = new Node(); static final Node EXCLUSIVE = null; //‰∏ãÈù¢ËøôÂõõ‰∏™Â±ûÊÄßÂ∞±ÊòØËØ¥ÊòéÁªìÁÇπÁöÑÁä∂ÊÄÅ static final int CANCELLED = 1;//Áî±‰∫éË∂ÖÊó∂Êàñ‰∏≠Êñ≠ÔºåËäÇÁÇπÂ∑≤Ë¢´ÂèñÊ∂à static final int SIGNAL = -1;//Ë°®Á§∫‰∏ã‰∏Ä‰∏™ËäÇÁÇπÊòØÈÄöËøáparkÈòªÂ°ûÁöÑÔºåÈúÄË¶ÅÈÄöËøáunparkÂî§ÈÜí static final int CONDITION = -2;//Ë°®Á§∫Á∫øÁ®ãÂú®Á≠âÂæÖÊù°‰ª∂ÂèòÈáèÔºàÂÖàËé∑ÂèñÈîÅÔºåÂä†ÂÖ•Âà∞Êù°‰ª∂Á≠âÂæÖÈòüÂàóÔºåÁÑ∂ÂêéÈáäÊîæÈîÅÔºåÁ≠âÂæÖÊù°‰ª∂ÂèòÈáèÊª°Ë∂≥Êù°‰ª∂ÔºõÂè™ÊúâÈáçÊñ∞Ëé∑ÂèñÈîÅ‰πã ÂêéÊâçËÉΩËøîÂõûÔºâ static final int PROPAGATE = -3;//Ë°®Á§∫ÂêéÁª≠ÁªìÁÇπ‰ºö‰º†Êí≠Âî§ÈÜíÁöÑÊìç‰ΩúÔºåÂÖ±‰∫´Ê®°Âºè‰∏ãËµ∑‰ΩúÁî® //ÂΩìÂâçËäÇÁÇπÂú®ÈòüÂàó‰∏≠ÁöÑÁä∂ÊÄÅÔºåÂ∞±ÊòØ‰∏äËø∞Âá†‰∏™Êï∞ÂÄº volatile int waitStatus; //ÂâçÈ©±ÁªìÁÇπÔºàÂèåÈìæË°®Ôºâ volatile Node prev; //ÂêéÁªßÁªìÁÇπÔºàÂèåÈìæË°®Ôºâ volatile Node next; // ÁªìÁÇπÊâÄÂåÖË£ÖÁöÑÁ∫øÁ®ã volatile Thread thread; // ÂØπ‰∫éCondtionË°®Á§∫‰∏ã‰∏Ä‰∏™Á≠âÂæÖÊù°‰ª∂ÂèòÈáèÁöÑËäÇÁÇπ // ÂÖ∂ÂÆÉÊÉÖÂÜµ‰∏ãÁî®‰∫éÊòØÂå∫ÂàÜÂÖ±‰∫´Ê®°ÂºèÂíåÁã¨Âç†Ê®°Âºè Node nextWaiter; final boolean isShared() &#123; return nextWaiter == SHARED; &#125; //ÂèñÂæóÂâçÈ©±ÁªìÁÇπ final Node predecessor() throws NullPointerException &#123; Node p = prev; if (p == null) //nullÁöÑÊó∂ÂÄôÊäõÂá∫ÂºÇÂ∏∏ throw new NullPointerException(); else return p; &#125; Node() &#123; &#125; Node(Thread thread, Node mode) &#123; this.nextWaiter = mode; this.thread = thread; &#125; Node(Thread thread, int waitStatus) &#123; this.waitStatus = waitStatus; this.thread = thread; &#125; &#125; ‰∏§ÁßçÈîÅÊ®°ÂºèAQSÊîØÊåÅ‰∏§ÁßçÈîÅ‰∏ÄÁßçÊòØÁã¨Âç†ÈîÅÔºàÁã¨Âç†Ê®°ÂºèÔºâÔºå‰∏ÄÁßçÊòØÂÖ±‰∫´ÈîÅÔºàÂÖ±‰∫´Ê®°ÂºèÔºâ Áã¨Âç†ÈîÅÔºöÊØîÂ¶ÇÂÉèReentrantLockÂ∞±ÊòØ‰∏ÄÁßçÁã¨Âç†ÈîÅÊ®°ÂºèÔºåÂ§ö‰∏™Á∫øÁ®ãÂéªÂêåÊó∂Êä¢‰∏Ä‰∏™ÈîÅÔºåÂè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãËÉΩÊä¢Âà∞Ëøô‰∏™ÈîÅÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂ∞±Âè™ËÉΩÈòªÂ°ûÁ≠âÂæÖÈîÅË¢´ÈáäÊîæÂêéÈáçÊñ∞Á´û‰∫âÈîÅ„ÄÇ ÂÖ±‰∫´ÈîÅÔºöÊØîÂ¶ÇÂÉèËØªÂÜôÈîÅÈáåÈù¢ÁöÑËØªÈîÅÔºå‰∏Ä‰∏™ÈîÅÂèØ‰ª•ÂêåÊó∂Ë¢´Â§ö‰∏™Á∫øÁ®ãÊã•ÊúâÔºàÂ§ö‰∏™Á∫øÁ®ãÂèØ‰ª•ÂêåÊó∂Êã•ÊúâËØªÈîÅÔºâÔºåÂÜçÊØîÂ¶ÇSemaphore ËÆæÁΩÆ‰∏Ä‰∏™ËµÑÊ∫êÊï∞ÁõÆÔºàÂèØ‰ª•ÁêÜËß£‰∏∫‰∏Ä‰∏™ÈîÅËÉΩÂêåÊó∂Ë¢´Â§öÂ∞ë‰∏™Á∫øÁ®ãÊã•ÊúâÔºâ„ÄÇ ÂÖ±‰∫´ÈîÅË∑üÁã¨Âç†ÈîÅÂèØ‰ª•ÂêåÊó∂Â≠òÂú®ÔºåÊØîÂ¶ÇËØªÂÜôÈîÅÔºåËØªÈîÅ„ÄÅÂÜôÈîÅÂàÜÂà´ÂØπÂ∫îÂÖ±‰∫´ÈîÅÂíåÁã¨Âç†ÈîÅ ÈòüÂàóËäÇÁÇπÁä∂ÊÄÅÈòüÂàó‰∏≠ÁöÑ NodeÔºåÊúâ‰∏Ä‰∏™ waitStatusÔºåÁî®Êù•Ë°®Á§∫ËØ•ËäÇÁÇπÂØπÂ∫îÁöÑÁ∫øÁ®ãÁä∂ÊÄÅ„ÄÇ CANCELLED = 1ÔºõÂèñÊ∂àÁä∂ÊÄÅÔºåÂ¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãÁöÑ ÂâçÁΩÆËäÇÁÇπ Áä∂ÊÄÅ‰∏∫ CANCELLEDÔºåÂàôË°®ÊòéÂâçÁΩÆËäÇÁÇπÂ∑≤ÁªèÁ≠âÂæÖË∂ÖÊó∂ÊàñËÄÖÂ∑≤ÁªèË¢´‰∏≠Êñ≠‰∫ÜÔºåËøôÊó∂ÈúÄË¶ÅÂ∞ÜÂÖ∂‰ªéÁ≠âÂæÖÈòüÂàó‰∏≠Âà†Èô§„ÄÇ SIGNAL = -1ÔºõÁ≠âÂæÖËß¶ÂèëÁä∂ÊÄÅÔºåÂ¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãÁöÑ ÂâçÁΩÆËäÇÁÇπ Áä∂ÊÄÅ‰∏∫ SIGNALÔºåÂàôË°®ÊòéÂΩìÂâçÁ∫øÁ®ãÈúÄË¶ÅÈòªÂ°û„ÄÇ CONDITION = -2ÔºõÁî®‰∫é conditionÔºå‰πüÂ∞±ÊòØÁ∫øÁ®ãÈó¥ÈÄö‰ø°ÔºåÁ±ª‰ºº‰∫é Synchronized ‰∏≠ÁöÑ wait/notify Êú∫Âà∂ÔºåÂú® Lock ‰∏≠ÊòØÁî® condition Êù•ÂÆåÊàêÁöÑÔºå waitStatus = -2 Ë°®Á§∫ËØ•Á∫øÁ®ãÂú®ËøõÈòüÂàó‰πãÂâçÂ∞±Â∑≤ÁªèËé∑ÂèñÂà∞‰∫ÜÈîÅÔºåÁÑ∂ÂêéÂÜçÂä†ÂÖ•Âà∞Êù°‰ª∂Á≠âÂæÖÈòüÂàó‰∏≠ÔºåÁÑ∂ÂêéÈáäÊîæÈîÅËµÑÊ∫êÔºåÁ≠âÂà∞Êù°‰ª∂Êª°Ë∂≥‰∫ÜÔºåÂ∞±ÂÜçÊ¨°Ëé∑ÂèñÈîÅÔºåÁÑ∂ÂêéËøõË°åÁ∫øÁ®ãÁõ∏Â∫îÁöÑÊìç‰Ωú„ÄÇ PROPAGATE = -3ÔºõÁä∂ÊÄÅÈúÄË¶ÅÂêëÂêé‰º†Êí≠ÔºåË°®Á§∫ releaseShared ÈúÄË¶ÅË¢´‰º†Êí≠ÁªôÂêéÁª≠ËäÇÁÇπÔºå‰ªÖÂú®ÂÖ±‰∫´ÈîÅÊ®°Âºè‰∏ã‰ΩøÁî®„ÄÇ ÂèØ‰ª•Ëøô‰πàÁêÜËß£Ôºöhead ËäÇÁÇπÂèØ‰ª•Ë°®Á§∫ÊàêÂΩìÂâçÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ãÁöÑËäÇÁÇπÔºåÂÖ∂‰ΩôÁ∫øÁ®ãÁ´û‰∫âÈîÅÂ§±Ë¥•ÂêéÔºå‰ºöÂä†ÂÖ•Âà∞ÈòüÂ∞æÔºåtail ÂßãÁªàÊåáÂêëÈòüÂàóÁöÑÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπ„ÄÇ Áã¨Âç†Ê®°ÂºèÁã¨Âç†ÈîÅÁöÑÂéüÁêÜÊòØÂ¶ÇÊûúÊúâÁ∫øÁ®ãËé∑ÂèñÂà∞ÈîÅÔºåÈÇ£‰πàÂÖ∂ÂÆÉÁ∫øÁ®ãÂè™ËÉΩÊòØËé∑ÂèñÈîÅÂ§±Ë¥•ÔºåÁÑ∂ÂêéËøõÂÖ•Á≠âÂæÖÈòüÂàó‰∏≠Á≠âÂæÖË¢´Âî§ÈÜí„ÄÇ 12345678// Ëé∑ÂèñÈîÅÊñπÊ≥ïprotected boolean tryAcquire(int arg) &#123; throw new UnsupportedOperationException();&#125;// ÈáäÊîæÈîÅÊñπÊ≥ïprotected boolean tryRelease(int arg) &#123; throw new UnsupportedOperationException();&#125; ÂèØ‰ª•ÁúãÂà∞ÔºåÂú® AQS ‰∏≠Âπ∂Ê≤°ÊúâÊèê‰æõËé∑ÂèñÈîÅÂíåÈáäÊîæÈîÅÁöÑÊñπÊ≥ïÔºåÈúÄË¶ÅÂÆûÁé∞Á±ªËá™Â∑±ÂéªÂÆûÁé∞Ëøô‰∏§‰∏™ÊñπÊ≥ïÔºåÂú®ËøôÈáåÂè™ÊòØÊäõÂá∫‰∫ÜÂºÇÂ∏∏ËÄåÂ∑≤„ÄÇ Ëé∑ÂèñÈîÅ12345public final void acquire(int arg) &#123; if (!tryAcquire(arg) &amp;&amp; acquireQueued(addWaiter(Node.EXCLUSIVE), arg)) selfInterrupt();&#125; Ê∫êÁ†ÅËß£ËØªÔºö ÈÄöËøá tryAcquire(arg) ÊñπÊ≥ïÂ∞ùËØïËé∑ÂèñÈîÅÔºåËøô‰∏™ÊñπÊ≥ïÈúÄË¶ÅÂÆûÁé∞Á±ªËá™Â∑±ÂÆûÁé∞Ëé∑ÂèñÈîÅÁöÑÈÄªËæëÔºåËé∑ÂèñÈîÅÊàêÂäüÂêéÂàô‰∏çÊâßË°åÂêéÈù¢Âä†ÂÖ•Á≠âÂæÖÈòüÂàóÁöÑÈÄªËæë‰∫ÜÔºõ Â¶ÇÊûúÂ∞ùËØïËé∑ÂèñÈîÅÂ§±Ë¥•ÂêéÔºåÂàôÊâßË°å addWaiter(Node.EXCLUSIVE) ÊñπÊ≥ïÂ∞ÜÂΩìÂâçÁ∫øÁ®ãÂ∞ÅË£ÖÊàê‰∏Ä‰∏™ Node ËäÇÁÇπÂØπË±°ÔºåÂπ∂Âä†ÂÖ•ÈòüÂàóÂ∞æÈÉ®Ôºõ ÊääÂΩìÂâçÁ∫øÁ®ãÊâßË°åÂ∞ÅË£ÖÊàê Node ËäÇÁÇπÂêéÔºåÁªßÁª≠ÊâßË°å acquireQueued ÁöÑÈÄªËæëÔºåËØ•ÈÄªËæë‰∏ªË¶ÅÊòØÂà§Êñ≠ÂΩìÂâçËäÇÁÇπÁöÑÂâçÁΩÆËäÇÁÇπÊòØÂê¶ÊòØÂ§¥ËäÇÁÇπÔºåÊù•Â∞ùËØïËé∑ÂèñÈîÅÔºåÂ¶ÇÊûúËé∑ÂèñÈîÅÊàêÂäüÔºåÂàôÂΩìÂâçËäÇÁÇπÂ∞±‰ºöÊàê‰∏∫Êñ∞ÁöÑÂ§¥ËäÇÁÇπÔºåËøô‰πüÊòØËé∑ÂèñÈîÅÁöÑÊ†∏ÂøÉÈÄªËæë„ÄÇ ÁªßÁª≠Áúã addWaiter(Node.EXCLUSIVE)Ôºö 12345678910111213141516171819private Node addWaiter(Node mode) &#123; // ÂàõÂª∫‰∏Ä‰∏™Âü∫‰∫éÂΩìÂâçÁ∫øÁ®ãÁöÑËäÇÁÇπÔºåËØ•ËäÇÁÇπÊòØ Node.EXCLUSIVE Áã¨Âç†ÂºèÁ±ªÂûã // Ê≥®ÊÑèËøôÈáåÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞Â∞±ÊòØ NextWaiterÔºåÁî®Êù•Âå∫ÂàÜÊòØÂÖ±‰∫´Ê®°ÂºèËøòÊòØÁã¨Âç†Ê®°Âºè Node node = new Node(Thread.currentThread(), mode); // Try the fast path of enq; backup to full enq on failure Node pred = tail; // ËøôÈáåÂÖàÂà§Êñ≠ÈòüÂ∞æÊòØÂê¶‰∏∫Á©∫ÔºåÂ¶ÇÊûú‰∏ç‰∏∫Á©∫ÂàôÁõ¥Êé•Â∞ÜËäÇÁÇπÂä†ÂÖ•ÈòüÂ∞æ if (pred != null) &#123; node.prev = pred; // ËøôÈáåÂøÖÈ°ªÈááÁî® CASÔºåÂõ†‰∏∫ÂèØËÉΩÊúâÂ§ö‰∏™Á∫øÁ®ãÂä†ÂÖ•ÂêåÊó∂Âä†ÂÖ•Âà∞ÈòüÂ∞æ // ÈááÂèñ CAS Êìç‰ΩúÔºåÂ∞ÜÂΩìÂâçËäÇÁÇπËÆæÁΩÆ‰∏∫ÈòüÂ∞æËäÇÁÇπÔºåÁî±‰∫éÈááÁî®‰∫Ü CAS ÂéüÂ≠êÊìç‰ΩúÔºåÊó†ËÆ∫Âπ∂ÂèëÊÄé‰πà‰øÆÊîπÔºåÈÉΩÊúâ‰∏îÂè™Êúâ‰∏ÄÊù°Á∫øÁ®ãÂèØ‰ª•‰øÆÊîπÊàêÂäüÔºåÂÖ∂‰ΩôÈÉΩÂ∞ÜÊâßË°åÂêéÈù¢ÁöÑenqÊñπÊ≥ï if (compareAndSetTail(pred, node)) &#123; pred.next = node; return node; &#125; &#125; enq(node); return node;&#125; ÁÆÄÂçïÊù•ËØ¥ addWaiter(Node mode) ÊñπÊ≥ïÂÅö‰∫Ü‰ª•‰∏ã‰∫ãÊÉÖÔºö ÂàõÂª∫Âü∫‰∫éÂΩìÂâçÁ∫øÁ®ãÁöÑÁã¨Âç†ÂºèÁ±ªÂûãÁöÑËäÇÁÇπÔºõ Âà©Áî® CAS ÂéüÂ≠êÊìç‰ΩúÔºåÂ∞ÜËäÇÁÇπÂä†ÂÖ•ÈòüÂ∞æ„ÄÇ Êàë‰ª¨ÁªßÁª≠Áúã enq(Node node) ÊñπÊ≥ïÔºö 12345678910111213141516171819private Node enq(final Node node) &#123; // Ëá™ÊóãÊìç‰Ωú for (;;) &#123; Node t = tail; // Â¶ÇÊûúÈòüÂ∞æËäÇÁÇπ‰∏∫Á©∫ÔºåÈÇ£‰πàËøõË°åCASÊìç‰ΩúÂàùÂßãÂåñÈòüÂàó if (t == null) &#123; // ËøôÈáåÂæàÂÖ≥ÈîÆÔºåÂç≥Â¶ÇÊûúÈòüÂàó‰∏∫Á©∫ÔºåÈÇ£‰πàÊ≠§Êó∂ÂøÖÈ°ªÂàùÂßãÂåñÈòüÂàóÔºåÂàùÂßãÂåñ‰∏Ä‰∏™Á©∫ÁöÑËäÇÁÇπË°®Á§∫ÈòüÂàóÂ§¥ÔºåÁî®‰∫éË°®Á§∫ÂΩìÂâçÊ≠£Âú®ÊâßË°åÁöÑËäÇÁÇπÔºåÂ§¥ËäÇÁÇπÂç≥Ë°®Á§∫ÂΩìÂâçÊ≠£Âú®ËøêË°åÁöÑËäÇÁÇπ if (compareAndSetHead(new Node())) tail = head; &#125; else &#123; node.prev = t; // Ëøô‰∏ÄÊ≠•‰πüÊòØÈááÂèñCASÊìç‰ΩúÔºåÂ∞ÜÂΩìÂâçËäÇÁÇπÂä†ÂÖ•ÈòüÂ∞æÔºåÂ¶ÇÊûúÂ§±Ë¥•ÁöÑËØùÔºåËá™ÊóãÁªßÁª≠‰øÆÊîπÁõ¥Âà∞ÊàêÂäü‰∏∫Ê≠¢ if (compareAndSetTail(t, node)) &#123; t.next = node; return t; &#125; &#125; &#125;&#125; enq(Node node)‰∏ªË¶ÅÂÅö‰∫Ü‰∏â‰ª∂‰∫ãÔºö ÈááÁî®‰∫ÜËá™ÊóãÊú∫Âà∂ÔºåÊ≤°ÊàêÂäüÂ∞±‰∏ÄÁõ¥Âæ™ÁéØËøõË°å Ëã•ÈòüÂ∞æËäÇÁÇπ‰∏∫Á©∫ÔºåÂ∞±ÂÖàÂàùÂßãÂåñÈòüÂàóÔºåÁÑ∂ÂêéÂõ†‰∏∫Ëá™ÊóãÔºåÂÜçÂú® head ËäÇÁÇπÂêéÂ∞ÜÂΩìÂâçËäÇÁÇπÂä†ÂÖ•ÈòüÂ∞æ Ëã•ÂØπÂ∞æÁªìÁÇπ‰∏ç‰∏∫Á©∫ÔºåÂàôÈááÂèñ CAS ÔºåÂ∞ÜÂΩìÂâçËäÇÁÇπÂä†ÂÖ•ÈòüÂ∞æ Ê≥®ÊÑèËøîÂõûÂÄºÊòØÂΩìÂâçËäÇÁÇπÁöÑ pred ËäÇÁÇπ 123456789101112131415161718192021222324252627final boolean acquireQueued(final Node node, int arg) &#123; boolean failed = true; try &#123; // Á∫øÁ®ã‰∏≠Êñ≠Ê†áËÆ∞Â≠óÊÆµ boolean interrupted = false; for (;;) &#123; // Ëé∑ÂèñÂΩìÂâçËäÇÁÇπÁöÑ pred ËäÇÁÇπ final Node p = node.predecessor(); // Â¶ÇÊûú pred ËäÇÁÇπ‰∏∫ head ËäÇÁÇπÔºåÈÇ£‰πàÂÜçÊ¨°Â∞ùËØïËé∑ÂèñÈîÅ if (p == head &amp;&amp; tryAcquire(arg)) &#123; // Ëé∑ÂèñÈîÅ‰πãÂêéÔºåÈÇ£‰πàÂΩìÂâçËäÇÁÇπ‰πüÂ∞±Êàê‰∏∫‰∫Ü head ËäÇÁÇπ setHead(node); p.next = null; // help GC failed = false; // ‰∏çÈúÄË¶ÅÊåÇËµ∑ÔºåËøîÂõû false return interrupted; &#125; // Ëé∑ÂèñÈîÅÂ§±Ë¥•ÔºåÂàôËøõÂÖ•ÊåÇËµ∑ÈÄªËæë if (shouldParkAfterFailedAcquire(p, node) &amp;&amp; parkAndCheckInterrupt()) interrupted = true; &#125; &#125; finally &#123; if (failed) cancelAcquire(node); &#125;&#125; acquireQueued ‰∏ªË¶ÅÂÅö‰∫Ü‰∏§‰ª∂‰∫ãÔºö Âà§Êñ≠ÂΩìÂâçËäÇÁÇπÁöÑ pred ËäÇÁÇπÊòØÂê¶ÊòØ head ËäÇÁÇπÔºåÂ¶ÇÊûúÊòØÔºåËØ¥Êòé‰∏ã‰∏Ä‰∏™ÊâßË°åÁöÑÁ∫øÁ®ãÂ∞±ÊòØËØ•Á∫øÁ®ãÔºåÊâÄ‰ª•Â∞±ÂèØ‰ª•ÂéªÂ∞ùËØïËé∑ÂèñÈîÅÔºàËá™ÊóãÁöÑËøáÁ®ãÔºâÔºåÂ¶ÇÊûúËé∑Âèñ‰∫ÜÈîÅÔºåÂ∞±Â∞ÜÂΩìÂâçËäÇÁÇπÁΩÆ‰∏∫ headÔºõ Ëé∑ÂèñÈîÅÂ¶ÇÊûúÂ§±Ë¥•‰∫ÜÔºåÂ∞±ÂæóËøõÂÖ•ÊåÇËµ∑ÈÄªËæëÔºåÂç≥ËøõÂÖ• shouldParkAfterFailedAcquire(p, node)„ÄÇ Êé•‰∏ãÊù•Êàë‰ª¨ÁªßÁª≠ÁúãÊåÇËµ∑ÈÄªËæëÔºö 123456789101112131415161718private static boolean shouldParkAfterFailedAcquire(Node pred, Node node) &#123; int ws = pred.waitStatus; if (ws == Node.SIGNAL) // Â¶ÇÊûú pred ËäÇÁÇπ‰∏∫ SIGNAL Áä∂ÊÄÅÔºåËøîÂõûtrueÔºåËØ¥ÊòéÂΩìÂâçËäÇÁÇπÈúÄË¶ÅÊåÇËµ∑ return true; // Â¶ÇÊûúws &gt; 0,ËØ¥ÊòéËäÇÁÇπÁä∂ÊÄÅ‰∏∫CANCELLEDÔºåÈúÄË¶Å‰ªéÈòüÂàó‰∏≠Âà†Èô§ if (ws &gt; 0) &#123; do &#123; node.prev = pred = pred.prev; &#125; while (pred.waitStatus &gt; 0); pred.next = node; &#125; else &#123; // Â¶ÇÊûúÊòØÂÖ∂ÂÆÉÁä∂ÊÄÅÔºåÂàôÊìç‰ΩúCASÁªü‰∏ÄÊîπÊàêSIGNALÁä∂ÊÄÅ // Áî±‰∫éËøôÈáåwaitStatusÁöÑÂÄºÂè™ËÉΩÊòØ0ÊàñËÄÖPROPAGATEÔºåÊâÄ‰ª•Êàë‰ª¨Â∞ÜËäÇÁÇπËÆæÁΩÆ‰∏∫SIGNALÔºåÈáçÊñ∞Âæ™ÁéØ‰∏ÄÊ¨°Âà§Êñ≠ compareAndSetWaitStatus(pred, ws, Node.SIGNAL); &#125; return false;&#125; shouldParkAfterFailedAcquire(Node pred, Node node) ‰∏ªË¶ÅÂÅö‰∫Ü‰∏â‰ª∂‰∫ãÔºö Âà§Êñ≠ÂΩìÂâçËäÇÁÇπÁöÑ pred ÁöÑ waitStatus ÊòØÂê¶‰∏∫ SIGNALÔºåÂ¶ÇÊûúÊòØÔºåÂàôËØ¥ÊòéÂΩìÂâçËäÇÁÇπÂèØ‰ª•ÊåÇËµ∑Ôºõ Â¶ÇÊûú‰∏çÊòØ SIGNAL Áä∂ÊÄÅÔºåËã•ÊòØ CANCELLED Áä∂ÊÄÅÔºåÂàôÈúÄË¶ÅÂ∞ÜËØ•ËäÇÁÇπ‰ªéÈòüÂàó‰∏≠Âà†Èô§Ôºõ Âê¶ÂàôÔºåÈúÄË¶ÅÂ∞ÜËØ•ËäÇÁÇπÁöÑÂâçÁΩÆËäÇÁÇπÁΩÆ‰∏∫ SIGNALÔºåÂÜç‰ªé acquireQueued ÊñπÊ≥ïËá™ÊóãÊìç‰ΩúÂæ™ÁéØ‰∏ÄÊ¨°Âà§Êñ≠„ÄÇ ÈÄö‰øóÊù•ËØ¥Â∞±ÊòØÔºöÊ†πÊçÆ pred ËäÇÁÇπÁä∂ÊÄÅÊù•Âà§Êñ≠ÂΩìÂâçËäÇÁÇπÊòØÂê¶ÂèØ‰ª•ÊåÇËµ∑ÔºåÂ¶ÇÊûúËØ•ÊñπÊ≥ïËøîÂõû falseÔºåÈÇ£‰πàÊåÇËµ∑Êù°‰ª∂ËøòÊ≤°ÂáÜÂ§áÂ•ΩÔºåÂ∞±‰ºöÈáçÊñ∞ËøõÂÖ• acquireQueued(final Node node, int arg) ÁöÑËá™Êóã‰ΩìÔºåÈáçÊñ∞ËøõË°åÂà§Êñ≠„ÄÇÂ¶ÇÊûúËøîÂõû trueÔºåÈÇ£Â∞±ËØ¥ÊòéÂΩìÂâçÁ∫øÁ®ãÂèØ‰ª•ËøõË°åÊåÇËµ∑Êìç‰Ωú‰∫ÜÔºåÈÇ£‰πàÂ∞±‰ºöÁªßÁª≠ÊâßË°åÊåÇËµ∑„ÄÇ ÁªßÁª≠ÁúãÊåÇËµ∑ÈÄªËæëÔºö 1234private final boolean parkAndCheckInterrupt() &#123; LockSupport.park(this); return Thread.interrupted();&#125; LockSupport ÊòØÁî®Êù•ÂàõÂª∫ÈîÅÂíåÂÖ∂‰ªñÂêåÊ≠•Á±ªÁöÑÂü∫Êú¨Á∫øÁ®ãÈòªÂ°ûÂéüËØ≠„ÄÇLockSupport Êèê‰æõ park() Âíå unpark() ÊñπÊ≥ïÂÆûÁé∞ÈòªÂ°ûÁ∫øÁ®ãÂíåËß£Èô§Á∫øÁ®ãÈòªÂ°û„ÄÇrelease ÈáäÊîæÈîÅÊñπÊ≥ïÈÄªËæë‰ºöË∞ÉÁî® LockSupport.unPark ÊñπÊ≥ïÊù•Âî§ÈÜíÂêéÁªßËäÇÁÇπ„ÄÇ ÊúÄÂêéÁúã‰∏Ä‰∏ã cancelAcquire()Ôºö 12345678910111213141516171819202122232425262728293031323334353637// java.util.concurrent.locks.AbstractQueuedSynchronizerprivate void cancelAcquire(Node node) &#123; // Â∞ÜÊó†ÊïàËäÇÁÇπËøáÊª§ if (node == null) return; // ËÆæÁΩÆËØ•ËäÇÁÇπ‰∏çÂÖ≥ËÅî‰ªª‰ΩïÁ∫øÁ®ãÔºå‰πüÂ∞±ÊòØËôöËäÇÁÇπ node.thread = null; Node pred = node.prev; // ÈÄöËøáÂâçÈ©±ËäÇÁÇπÔºåË∑≥ËøáÂèñÊ∂àÁä∂ÊÄÅÁöÑnode while (pred.waitStatus &gt; 0) node.prev = pred = pred.prev; // Ëé∑ÂèñËøáÊª§ÂêéÁöÑÂâçÈ©±ËäÇÁÇπÁöÑÂêéÁªßËäÇÁÇπ Node predNext = pred.next; // ÊääÂΩìÂâçnodeÁöÑÁä∂ÊÄÅËÆæÁΩÆ‰∏∫CANCELLED node.waitStatus = Node.CANCELLED; // Â¶ÇÊûúÂΩìÂâçËäÇÁÇπÊòØÂ∞æËäÇÁÇπÔºåÂ∞Ü‰ªéÂêéÂæÄÂâçÁöÑÁ¨¨‰∏Ä‰∏™ÈùûÂèñÊ∂àÁä∂ÊÄÅÁöÑËäÇÁÇπËÆæÁΩÆ‰∏∫Â∞æËäÇÁÇπ // Êõ¥Êñ∞Â§±Ë¥•ÁöÑËØùÔºåÂàôËøõÂÖ•elseÔºåÂ¶ÇÊûúÊõ¥Êñ∞ÊàêÂäüÔºåÂ∞ÜtailÁöÑÂêéÁªßËäÇÁÇπËÆæÁΩÆ‰∏∫null if (node == tail &amp;&amp; compareAndSetTail(node, pred)) &#123; compareAndSetNext(pred, predNext, null); &#125; else &#123; int ws; // Â¶ÇÊûúÂΩìÂâçËäÇÁÇπ‰∏çÊòØheadÁöÑÂêéÁªßËäÇÁÇπ //1:Âà§Êñ≠ÂΩìÂâçËäÇÁÇπÂâçÈ©±ËäÇÁÇπÁöÑÊòØÂê¶‰∏∫SIGNALÔºå2:Â¶ÇÊûú‰∏çÊòØÔºåÂàôÊääÂâçÈ©±ËäÇÁÇπËÆæÁΩÆ‰∏∫SINGALÁúãÊòØÂê¶ÊàêÂäü // Â¶ÇÊûú1Âíå2‰∏≠Êúâ‰∏Ä‰∏™‰∏∫trueÔºåÂÜçÂà§Êñ≠ÂΩìÂâçËäÇÁÇπÁöÑÁ∫øÁ®ãÊòØÂê¶‰∏∫null // Â¶ÇÊûú‰∏äËø∞Êù°‰ª∂ÈÉΩÊª°Ë∂≥ÔºåÊääÂΩìÂâçËäÇÁÇπÁöÑÂâçÈ©±ËäÇÁÇπÁöÑÂêéÁªßÊåáÈíàÊåáÂêëÂΩìÂâçËäÇÁÇπÁöÑÂêéÁªßËäÇÁÇπ if (pred != head &amp;&amp; ((ws = pred.waitStatus) == Node.SIGNAL || (ws &lt;= 0 &amp;&amp; compareAndSetWaitStatus(pred, ws, Node.SIGNAL))) &amp;&amp; pred.thread != null) &#123; Node next = node.next; if (next != null &amp;&amp; next.waitStatus &lt;= 0) compareAndSetNext(pred, predNext, next); &#125; else &#123; // Â¶ÇÊûúÂΩìÂâçËäÇÁÇπÊòØheadÁöÑÂêéÁªßËäÇÁÇπÔºåÊàñËÄÖ‰∏äËø∞Êù°‰ª∂‰∏çÊª°Ë∂≥ÔºåÈÇ£Â∞±Âî§ÈÜíÂΩìÂâçËäÇÁÇπÁöÑÂêéÁªßËäÇÁÇπ unparkSuccessor(node); &#125; node.next = node; // help GC &#125;&#125; ÂÖ∑‰ΩìÂèØÂèÇËÄÉÔºö https://tech.meituan.com/2019/12/05/aqs-theory-and-apply.html Êï¥‰ΩìÈÄªËæëÂõæÂ¶Ç‰∏ãÔºö ÈáäÊîæÈîÅ123456789public final boolean release(int arg) &#123; if (tryRelease(arg)) &#123; Node h = head; if (h != null &amp;&amp; h.waitStatus != 0) unparkSuccessor(h); return true; &#125; return false;&#125; ÊÄùË∑ØËøòÊòØÂæàÂ•ΩÁêÜËß£ÁöÑÔºåÂÖàÂ∞ùËØïÈáäÊîæÈîÅÔºåËøô‰∏™ tryRelease() ÈúÄË¶ÅËá™Â∑±ÂÆûÁé∞ÔºåÂ¶ÇÊûúÂ§¥ÁªìÁÇπ‰∏ç‰∏∫Á©∫Ôºå‰∏î waitStatus != 0 ÔºàÂõ†‰∏∫ addWaiter ÊñπÊ≥ïÈªòËÆ§ÁöÑËäÇÁÇπÁä∂ÊÄÅ‰∏∫ 0Ôºå‰∏∫ 0 ËØ¥ÊòéÊ≠§Êó∂ËäÇÁÇπËøòÊ≤°ÊúâËøõÂÖ•Â∞±Áª™Áä∂ÊÄÅÔºâÔºåÂ∞±ÂèØ‰ª•ÊâßË°åÂî§ÈÜí‰∏ã‰∏™ËäÇÁÇπÁöÑÊìç‰Ωú„ÄÇ 123456789101112131415161718192021private void unparkSuccessor(Node node) &#123; int ws = node.waitStatus; if (ws &lt; 0) // Â∞ÜÂ§¥ËäÇÁÇπÁöÑÁä∂ÊÄÅËÆæÁΩÆ‰∏∫0 // ËøôÈáå‰ºöÂ∞ùËØïÊ∏ÖÈô§Â§¥ËäÇÁÇπÁöÑÁä∂ÊÄÅÔºåÊîπ‰∏∫ÂàùÂßãÁä∂ÊÄÅ compareAndSetWaitStatus(node, ws, 0); // ÂêéÁªßËäÇÁÇπ Node s = node.next; // Â¶ÇÊûúÂêéÁªßËäÇÁÇπ‰∏∫nullÔºåÊàñËÄÖÂ∑≤ÁªèË¢´ÂèñÊ∂à‰∫Ü if (s == null || s.waitStatus &gt; 0) &#123; s = null; // forÂæ™ÁéØ‰ªéÈòüÂàóÂ∞æÈÉ®‰∏ÄÁõ¥ÂæÄÂâçÊâæÂèØ‰ª•Âî§ÈÜíÁöÑËäÇÁÇπ for (Node t = tail; t != null &amp;&amp; t != node; t = t.prev) if (t.waitStatus &lt;= 0) s = t; &#125; if (s != null) // Âî§ÈÜíÂêéÁªßËäÇÁÇπ LockSupport.unpark(s.thread);&#125; unparkSuccessor(Node node) ‰∏ªË¶ÅÂÅö‰∫Ü‰∫å‰ª∂‰∫ãÔºö Â∞ÜÂ§¥ÁªìÁÇπÁöÑ waitStatus ÁΩÆ‰∏∫ÂàùÂßãÁä∂ÊÄÅ 0 Ôºõ ÊâæÂêéÁªßËäÇÁÇπÔºåÂ¶ÇÊûúÂêéÁªßËäÇÁÇπÊòØ null ÊàñËÄÖ waitStatus = Node.CancelledÔºåÂ∞±Áõ¥Êé•‰ªéÈòüÂ∞æÂºÄÂßãÂêëÂâçÈÅçÂéÜÔºåÊâæÂà∞ÊúÄÈù†ËøëÂ§¥ÁªìÁÇπÁöÑ‰∏ã‰∏Ä‰∏™Á¨¶ÂêàÊù°‰ª∂ÁöÑËäÇÁÇπÔºåÂπ∂Â∞ÜÂÖ∂Âî§ÈÜí„ÄÇ ÂÖ±‰∫´Ê®°ÂºèËé∑ÂèñÈîÅ123456public final void acquireShared(int arg) &#123; // Â∞ùËØïËé∑ÂèñÂÖ±‰∫´ÈîÅÔºåÂ∞è‰∫é0Ë°®Á§∫Ëé∑ÂèñÂ§±Ë¥• if (tryAcquireShared(arg) &lt; 0) // ÊâßË°åËé∑ÂèñÈîÅÂ§±Ë¥•ÁöÑÈÄªËæë doAcquireShared(arg);&#125; Ë∑üÁã¨Âç†Ê®°ÂºèÂ∑Æ‰∏çÂ§öÔºå tryAcquireShared() ÈúÄË¶ÅÂÆûÁé∞Á±ªËá™Â∑±ÂéªÂÆûÁé∞ÔºåËøôÈáåÂè™Ë¶Å &gt;=0 ËØ¥ÊòéÂÖ±‰∫´ÈîÅÁöÑËµÑÊ∫êËøòÊúâÔºåÂ∞±ËØ¥ÊòéËé∑ÂèñÈîÅÊàêÂäüÔºåÂê¶ÂàôÂ∞±ÊâßË°åËé∑ÂèñÈîÅÂ§±Ë¥•ÁöÑÈÄªËæë„ÄÇ 1234567891011121314151617181920212223242526272829303132private void doAcquireShared(int arg) &#123; // Ê∑ªÂä†ÂÖ±‰∫´ÈîÅÁ±ªÂûãËäÇÁÇπÂà∞ÈòüÂàó‰∏≠ final Node node = addWaiter(Node.SHARED); boolean failed = true; try &#123; boolean interrupted = false; for (;;) &#123; final Node p = node.predecessor(); if (p == head) &#123; // ÂÜçÊ¨°Â∞ùËØïËé∑ÂèñÂÖ±‰∫´ÈîÅ int r = tryAcquireShared(arg); // Â¶ÇÊûúÂú®ËøôÈáåÊàêÂäüËé∑ÂèñÂÖ±‰∫´ÈîÅÔºå‰ºöËøõÂÖ•ÂÖ±‰∫´ÈîÅÂî§ÈÜíÈÄªËæë if (r &gt;= 0) &#123; // ÂÖ±‰∫´ÈîÅÂî§ÈÜíÈÄªËæë setHeadAndPropagate(node, r); p.next = null; // help GC if (interrupted) selfInterrupt(); failed = false; return; &#125; &#125; // ‰∏éÁã¨Âç†ÈîÅÁõ∏ÂêåÁöÑÊåÇËµ∑ÈÄªËæë if (shouldParkAfterFailedAcquire(p, node) &amp;&amp; parkAndCheckInterrupt()) interrupted = true; &#125; &#125; finally &#123; if (failed) cancelAcquire(node); &#125;&#125; Ë∑üÁã¨Âç†ÈîÅÂü∫Êú¨‰∏ÄÊ†∑ÁöÑÈÄªËæëÔºå‰πüÊòØÂÖàÂ∞ÜËØ•Á∫øÁ®ãÂåÖË£ÖÊàê NodeÔºåÂä†ÂÖ•ÈòüÂ∞æÔºåÁÑ∂Âêé‰∏çÊñ≠Ëá™ÊóãÔºåÂà§Êñ≠ÂΩìÂâçËäÇÁÇπÁöÑÂâçÁΩÆËäÇÁÇπÊòØÂê¶‰∏∫ headÔºåÂ¶ÇÊûúÊòØ headÔºåÂ∞±Â∞ùËØïËé∑ÂèñÈîÅÔºåÂΩìÁÑ∂ËøôÈáåÊúâ‰∏Ä‰∏™‰∏çÂêåÁöÑÂú∞ÊñπÔºåÈÇ£Â∞±ÊòØÂéüÊù•ÁöÑ setHead() ÂèòÊàê‰∫Ü setHeadAndPropagate()ÔºåÂõ†‰∏∫ËøôÈáå‰∏ç‰ªÖË¶ÅÂ∞ÜËé∑ÂèñÂà∞ÈîÅÁöÑËäÇÁÇπÁΩÆ‰∏∫Â§¥ÁªìÁÇπÔºåÂêåÊó∂Âè™Ë¶ÅÂÖ±‰∫´ÈîÅËøòÊã•ÊúâËµÑÊ∫êÔºåÂ∞±ÈúÄË¶ÅÂéªÂî§ÈÜíÂêéÁª≠ÂÖ±‰∫´ÈîÅËäÇÁÇπ„ÄÇ‰∏ãÈù¢Êàë‰ª¨ÂÖ∑‰ΩìÁúãÁúã setHeadAndPropagate(node, r)„ÄÇ 12345678910111213141516private void setHeadAndPropagate(Node node, int propagate) &#123; // Â§¥ËäÇÁÇπ Node h = head; // ËÆæÁΩÆÂΩìÂâçËäÇÁÇπ‰∏∫Êñ∞ÁöÑÂ§¥ËäÇÁÇπ // ËøôÈáå‰∏çÈúÄË¶ÅÂä†ÈîÅÊìç‰ΩúÔºåÂõ†‰∏∫Ëé∑ÂèñÂÖ±‰∫´ÈîÅÂêéÔºå‰ºö‰ªéFIFOÈòüÂàó‰∏≠‰æùÊ¨°Âî§ÈÜíÈòüÂàóÔºåÂπ∂‰∏ç‰ºö‰∫ßÁîüÂπ∂ÂèëÂÆâÂÖ®ÈóÆÈ¢ò setHead(node); if (propagate &gt; 0 || h == null || h.waitStatus &lt; 0 || (h = head) == null || h.waitStatus &lt; 0) &#123; // ÂêéÁªßËäÇÁÇπ Node s = node.next; // Â¶ÇÊûúÂêéÁªßËäÇÁÇπ‰∏∫Á©∫ÊàñËÄÖÂêéÁªßËäÇÁÇπ‰∏∫ÂÖ±‰∫´Á±ªÂûãÔºåÂàôËøõË°åÂî§ÈÜíÂêéÁªßËäÇÁÇπ // ËøôÈáåÂêéÁªßËäÇÁÇπ‰∏∫Á©∫ÊÑèÊÄùÊòØÂè™Ââ©‰∏ãÂΩìÂâçÂ§¥ËäÇÁÇπ‰∫Ü if (s == null || s.isShared()) doReleaseShared(); &#125;&#125; ‰∏ªË¶ÅÂÅö‰∫Ü‰∏§‰ª∂‰∫ãÔºö Â∞ÜÂΩìÂâçËäÇÁÇπÁΩÆ‰∏∫ headÔºåËøô‰∏™Ë∑üÁã¨Âç†ÈîÅÊòØ‰∏ÄÊ†∑ÁöÑÔºõ ÂØªÊâæÂêéÁª≠ÁöÑÂÖ±‰∫´ÈîÅÁ∫øÁ®ãÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂Âî§ÈÜí„ÄÇ Êàë‰ª¨Ê≥®ÊÑèÂà∞ÔºåËøôÈáåÂî§ÈÜíË∞ÉÁî®ÁöÑÊòØ doReleaseShared()Ôºå‰πüÂ∞±ÊòØËØ¥ÈáäÊîæÂÖ±‰∫´ÈîÅ‰πüÊòØË∞ÉÁî®ÁöÑËøô‰∏™ÊñπÊ≥ïÔºåÈÇ£‰πàÊòØÊÄé‰πàÂÅöÂà∞Âî§ÈÜíÂ§ö‰∏™Êã•ÊúâÂÖ±‰∫´ÈîÅÁ∫øÁ®ãÂë¢ÔºüÊàë‰ª¨Ê≥®ÊÑèÂà∞È¶ñÂÖàÊòØÂ∞ÜÂΩìÂâçËé∑ÂèñÂà∞ÈîÅÁöÑÁ∫øÁ®ãÁΩÆ‰∏∫ headÔºåÁÑ∂ÂêéÂè™Ë¶ÅËøòÊúâËµÑÊ∫êÔºåÂ∞±Âî§ÈÜíËØ•Á∫øÁ®ãÔºå ÈáäÊîæÈîÅ123456789public final boolean releaseShared(int arg) &#123; // Áî±Áî®Êà∑Ëá™Ë°åÂÆûÁé∞ÈáäÊîæÈîÅÊù°‰ª∂ if (tryReleaseShared(arg)) &#123; // ÊâßË°åÈáäÊîæÈîÅ doReleaseShared(); return true; &#125; return false;&#125; 1234567891011121314151617181920212223242526272829303132private void doReleaseShared() &#123; for (;;) &#123; // ‰ªéÂ§¥ËäÇÁÇπÂºÄÂßãÊâßË°åÂî§ÈÜíÊìç‰Ωú // ËøôÈáåÈúÄË¶ÅÊ≥®ÊÑèÔºåÂ¶ÇÊûú‰ªésetHeadAndPropagateÊñπÊ≥ïË∞ÉÁî®ËØ•ÊñπÊ≥ïÔºåÈÇ£‰πàËøôÈáåÁöÑheadÊòØÊñ∞ÁöÑÂ§¥ËäÇÁÇπ Node h = head; if (h != null &amp;&amp; h != tail) &#123; int ws = h.waitStatus; //Ë°®Á§∫ÂêéÁªßËäÇÁÇπÈúÄË¶ÅË¢´Âî§ÈÜí if (ws == Node.SIGNAL) &#123; // ÂàùÂßãÂåñËäÇÁÇπÁä∂ÊÄÅ //ËøôÈáåÈúÄË¶ÅCASÂéüÂ≠êÊìç‰ΩúÔºåÂõ†‰∏∫setHeadAndPropagateÂíåreleaseSharedËøô‰∏§‰∏™ÊñπÊ≥ïÈÉΩ‰ºöÈ°∂Áî®doReleaseSharedÔºåÈÅøÂÖç‰∏§Ê¨°unparkÂî§ÈÜíÊìç‰Ωú if (!compareAndSetWaitStatus(h, Node.SIGNAL, 0)) // Â¶ÇÊûúÂàùÂßãÂåñËäÇÁÇπÁä∂ÊÄÅÂ§±Ë¥•ÔºåÁªßÁª≠Âæ™ÁéØÊâßË°å continue; // loop to recheck cases // ÊâßË°åÂî§ÈÜíÊìç‰Ωú // Ê≥®ÊÑèËøôÈáåÊòØÂî§ÈÜíÂ§¥ÁªìÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπ // Âî§ÈÜí‰∫Ü‰∏ã‰∏Ä‰∏™ËäÇÁÇπ‰πãÂêéÔºå‰∏ã‰∏Ä‰∏™ËäÇÁÇπÂ∞±‰ºöÂéªÂ∞ùËØïËé∑ÂèñÈîÅÔºåÂΩ¢Êàê‰∏Ä‰∏™Âæ™ÁéØ unparkSuccessor(h); &#125; // ËøôÈáå‰∏™‰∫∫ËÆ§‰∏∫ÊòØ‰∏∫ setHeadAndPropagate()‰∏≠ s == nullÂáÜÂ§áÁöÑÔºåÂΩìÂè™ÊúâÂ§¥ÁªìÁÇπÁöÑÊó∂ÂÄô // ÂêéÁªßËäÇÁÇπÊ≤°ÊúâÊâÄ‰ª•‰∏çÈúÄË¶ÅÂî§ÈÜíÔºå‰ΩÜÊòØÊàë‰ª¨ÂøÖÈ°ªÊääËøôÁßçÂèØ‰º†ÈÄíÁöÑÁä∂ÊÄÅÊòæÁ§∫Ë°®Áé∞Âá∫Êù• // Á°Æ‰øùÂêéÁª≠ÂèØ‰ª•‰º†ÈÄíÁªôÂêéÁªßËäÇÁÇπ else if (ws == 0 &amp;&amp; !compareAndSetWaitStatus(h, 0, Node.PROPAGATE)) continue; // loop on failed CAS &#125; // Â¶ÇÊûúÂú®Âî§ÈÜíÁöÑËøáÁ®ã‰∏≠Â§¥ËäÇÁÇπÊ≤°ÊúâÊõ¥ÊîπÔºåÈÄÄÂá∫Âæ™ÁéØ // ËøôÈáåÈò≤Ê≠¢ÂÖ∂ÂÆÉÁ∫øÁ®ãÂèàËÆæÁΩÆ‰∫ÜÂ§¥ËäÇÁÇπÔºåËØ¥ÊòéÂÖ∂ÂÆÉÁ∫øÁ®ãËé∑Âèñ‰∫ÜÂÖ±‰∫´ÈîÅÔºå‰ºöÁªßÁª≠Âæ™ÁéØÊìç‰Ωú if (h == head) // loop if head changed break; &#125;&#125; Ê≥®Ôºö‰∏äÈù¢ÁöÑsetHeadAndPropagate()ÊñπÊ≥ïË°®Á§∫Á≠âÂæÖÈòüÂàó‰∏≠ÁöÑÁ∫øÁ®ãÊàêÂäüËé∑ÂèñÂà∞ÂÖ±‰∫´ÈîÅÔºåËøôÊó∂ÂÄôÂÆÉÈúÄË¶ÅË∞ÉÁî®doReleaseShared() Âî§ÈÜíÂÆÉÂêéÈù¢ÁöÑÂÖ±‰∫´ËäÇÁÇπÔºàÂ¶ÇÊûúÊúâÔºâÔºå‰ΩÜÊòØÂΩìÈÄöËøá releaseShared() ÊñπÊ≥ïÂéªË∞ÉÁî®doReleaseShared() ÈáäÊîæ‰∏Ä‰∏™ÂÖ±‰∫´ÈîÅÁöÑÊó∂ÂÄôÔºåÊé•‰∏ãÊù•Á≠âÂæÖÁã¨Âç†ÈîÅË∑üÂÖ±‰∫´ÈîÅÁöÑÁ∫øÁ®ãÈÉΩÂèØ‰ª•Ë¢´Âî§ÈÜíËøõË°åÂ∞ùËØïËé∑Âèñ„ÄÇ ÊÄªÁªìÈÄªËæëÂõæ Ëé∑ÂèñÈîÅÁöÑËøáÁ®ãÔºö ÂΩìÁ∫øÁ®ãË∞ÉÁî®acquireShared()Áî≥ËØ∑Ëé∑ÂèñÈîÅËµÑÊ∫êÊó∂ÔºåÂ¶ÇÊûúÊàêÂäüÔºåÂàôËøõÂÖ•‰∏¥ÁïåÂå∫„ÄÇ ÂΩìËé∑ÂèñÈîÅÂ§±Ë¥•Êó∂ÔºåÂàôÂàõÂª∫‰∏Ä‰∏™ÂÖ±‰∫´Á±ªÂûãÁöÑËäÇÁÇπÂπ∂ËøõÂÖ•‰∏Ä‰∏™FIFOÁ≠âÂæÖÈòüÂàóÔºåÁÑ∂ÂêéË¢´ÊåÇËµ∑Á≠âÂæÖÂî§ÈÜí„ÄÇ ÂΩìÈòüÂàó‰∏≠ÁöÑÁ≠âÂæÖÁ∫øÁ®ãË¢´Âî§ÈÜí‰ª•ÂêéÂ∞±ÈáçÊñ∞Â∞ùËØïËé∑ÂèñÈîÅËµÑÊ∫êÔºåÂ¶ÇÊûúÊàêÂäüÂàôÂî§ÈÜíÂêéÈù¢ËøòÂú®Á≠âÂæÖÁöÑÂÖ±‰∫´ËäÇÁÇπÂπ∂ÊääËØ•Âî§ÈÜí‰∫ã‰ª∂‰º†ÈÄí‰∏ãÂéªÔºåÂç≥‰ºö‰æùÊ¨°Âî§ÈÜíÂú®ËØ•ËäÇÁÇπÂêéÈù¢ÁöÑÊâÄÊúâÂÖ±‰∫´ËäÇÁÇπÔºåÁÑ∂ÂêéËøõÂÖ•‰∏¥ÁïåÂå∫ÔºåÂê¶ÂàôÁªßÁª≠ÊåÇËµ∑Á≠âÂæÖ„ÄÇ ÈáäÊîæÈîÅËøáÁ®ãÔºö ÂΩìÁ∫øÁ®ãË∞ÉÁî®releaseShared()ËøõË°åÈîÅËµÑÊ∫êÈáäÊîæÊó∂ÔºåÂ¶ÇÊûúÈáäÊîæÊàêÂäüÔºåÂàôÂî§ÈÜíÈòüÂàó‰∏≠Á≠âÂæÖÁöÑËäÇÁÇπÔºåÂ¶ÇÊûúÊúâÁöÑËØù„ÄÇ ÊØîËæÉË∑üÁã¨Âç†ÈîÅÁõ∏ÊØîÔºåÂÖ±‰∫´ÈîÅÁöÑ‰∏ªË¶ÅÁâπÂæÅÂú®‰∫éÂΩì‰∏Ä‰∏™Âú®Á≠âÂæÖÈòüÂàó‰∏≠ÁöÑÂÖ±‰∫´ËäÇÁÇπÊàêÂäüËé∑ÂèñÂà∞ÈîÅ‰ª•ÂêéÔºàÂÆÉËé∑ÂèñÂà∞ÁöÑÊòØÂÖ±‰∫´ÈîÅÔºâÔºåÊó¢ÁÑ∂ÊòØÂÖ±‰∫´ÔºåÈÇ£ÂÆÉÂøÖÈ°ªË¶Å‰æùÊ¨°Âî§ÈÜíÂêéÈù¢ÊâÄÊúâÂèØ‰ª•Ë∑üÂÆÉ‰∏ÄËµ∑ÂÖ±‰∫´ÂΩìÂâçÈîÅËµÑÊ∫êÁöÑËäÇÁÇπÔºåÊØ´Êó†ÁñëÈóÆÔºåËøô‰∫õËäÇÁÇπÂøÖÈ°ª‰πüÊòØÂú®Á≠âÂæÖÂÖ±‰∫´ÈîÅÔºàËøôÊòØÂ§ßÂâçÊèêÔºåÂ¶ÇÊûúÁ≠âÂæÖÁöÑÊòØÁã¨Âç†ÈîÅÔºåÈÇ£ÂâçÈù¢Â∑≤ÁªèÊúâ‰∏Ä‰∏™ÂÖ±‰∫´ËäÇÁÇπËé∑ÂèñÈîÅ‰∫ÜÔºåÂÆÉËÇØÂÆöÊòØËé∑Âèñ‰∏çÂà∞ÁöÑÔºâ„ÄÇÂΩìÂÖ±‰∫´ÈîÅË¢´ÈáäÊîæÁöÑÊó∂ÂÄôÔºåÂèØ‰ª•Áî®ËØªÂÜôÈîÅ‰∏∫‰æãËøõË°åÊÄùËÄÉÔºåÂΩì‰∏Ä‰∏™ËØªÈîÅË¢´ÈáäÊîæÔºåÊ≠§Êó∂‰∏çËÆ∫ÊòØËØªÈîÅËøòÊòØÂÜôÈîÅÈÉΩÊòØÂèØ‰ª•Á´û‰∫âËµÑÊ∫êÁöÑ„ÄÇ https://juejin.im/post/5cd2b58f6fb9a032332b45aa https://www.cnblogs.com/lfls/p/7599863.html Èù¢ËØïÈ¢òÁõÆQÔºöÊüê‰∏™Á∫øÁ®ãËé∑ÂèñÈîÅÂ§±Ë¥•ÁöÑÂêéÁª≠ÊµÅÁ®ãÊòØ‰ªÄ‰πàÂë¢Ôºü AÔºöÂ≠òÂú®ÊüêÁßçÊéíÈòüÁ≠âÂÄôÊú∫Âà∂ÔºåÁ∫øÁ®ãÁªßÁª≠Á≠âÂæÖÔºå‰ªçÁÑ∂‰øùÁïôËé∑ÂèñÈîÅÁöÑÂèØËÉΩÔºåËé∑ÂèñÈîÅÊµÅÁ®ã‰ªçÂú®ÁªßÁª≠„ÄÇ QÔºöÊó¢ÁÑ∂ËØ¥Âà∞‰∫ÜÊéíÈòüÁ≠âÂÄôÊú∫Âà∂ÔºåÈÇ£‰πàÂ∞±‰∏ÄÂÆö‰ºöÊúâÊüêÁßçÈòüÂàóÂΩ¢ÊàêÔºåËøôÊ†∑ÁöÑÈòüÂàóÊòØ‰ªÄ‰πàÊï∞ÊçÆÁªìÊûÑÂë¢Ôºü AÔºöÊòØCLHÂèò‰ΩìÁöÑFIFOÂèåÁ´ØÈòüÂàó„ÄÇ QÔºöÂ§Ñ‰∫éÊéíÈòüÁ≠âÂÄôÊú∫Âà∂‰∏≠ÁöÑÁ∫øÁ®ãÔºå‰ªÄ‰πàÊó∂ÂÄôÂèØ‰ª•ÊúâÊú∫‰ºöËé∑ÂèñÈîÅÂë¢Ôºü AÔºöÂΩìÂâçËäÇÁÇπÁöÑÂâçÁΩÆËäÇÁÇπ‰∏∫ headÔºåÂèØ‰ª•Â∞ùËØïËé∑ÂèñÈîÅ„ÄÇ QÔºöÂ¶ÇÊûúÂ§Ñ‰∫éÊéíÈòüÁ≠âÂÄôÊú∫Âà∂‰∏≠ÁöÑÁ∫øÁ®ã‰∏ÄÁõ¥Êó†Ê≥ïËé∑ÂèñÈîÅÔºåÈúÄË¶Å‰∏ÄÁõ¥Á≠âÂæÖ‰πàÔºüËøòÊòØÊúâÂà´ÁöÑÁ≠ñÁï•Êù•Ëß£ÂÜ≥Ëøô‰∏ÄÈóÆÈ¢òÔºü AÔºöÁ∫øÁ®ãÊâÄÂú®ËäÇÁÇπÁöÑÁä∂ÊÄÅ‰ºöÂèòÊàêÂèñÊ∂àÁä∂ÊÄÅÔºåÂèñÊ∂àÁä∂ÊÄÅÁöÑËäÇÁÇπ‰ºö‰ªéÈòüÂàó‰∏≠ÈáäÊîæ„ÄÇ QÔºöLockÂáΩÊï∞ÈÄöËøáAcquireÊñπÊ≥ïËøõË°åÂä†ÈîÅÔºå‰ΩÜÊòØÂÖ∑‰ΩìÊòØÂ¶Ç‰ΩïÂä†ÈîÅÁöÑÂë¢Ôºü AÔºöAQSÁöÑAcquire‰ºöË∞ÉÁî®tryAcquireÊñπÊ≥ïÔºåtryAcquireÁî±ÂêÑ‰∏™Ëá™ÂÆö‰πâÂêåÊ≠•Âô®ÂÆûÁé∞ÔºåÈÄöËøátryAcquireÂÆåÊàêÂä†ÈîÅËøáÁ®ã„ÄÇ Tip: Ëá™ÊàëÂÆûÁé∞‰∏Ä‰∏™ÈîÅÔºåÂà©Áî® AQS 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110package Â§öÁ∫øÁ®ã.ConcurrentÂåÖÁêÜËß£;import java.io.IOException;import java.io.ObjectInputStream;import java.util.concurrent.TimeUnit;import java.util.concurrent.locks.AbstractQueuedSynchronizer;import java.util.concurrent.locks.Condition;import java.util.concurrent.locks.Lock;public class AQS &#123; public static void main(String[] args) &#123; return; &#125;&#125;class MutexDemo &#123; private static Mutex mutex = new Mutex(); public static void main(String[] args) &#123; for (int i = 0; i &lt; 10 ; i++)&#123; Thread thread = new Thread(() -&gt; &#123; mutex.lock(); try &#123; System.out.println("Current Thread:" + Thread.currentThread().getName()); Thread.sleep(3000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; mutex.unlock(); &#125; &#125;); thread.start(); &#125; &#125;&#125;class Mutex implements Lock, java.io.Serializable &#123; // Our internal helper class private static class Sync extends AbstractQueuedSynchronizer &#123; // Reports whether in locked state protected boolean isHeldExclusively() &#123; return getState() == 1; &#125; public boolean tryAcquire(int acquires) &#123; assert acquires == 1; // Otherwise unused if (compareAndSetState(0, 1)) &#123; setExclusiveOwnerThread(Thread.currentThread()); return true; &#125; return false; &#125; protected boolean tryRelease(int releases) &#123; assert releases == 1; // Otherwise unused if (getState() == 0) throw new IllegalMonitorStateException(); setExclusiveOwnerThread(null); setState(0); return true; &#125; // Provides a Condition Condition newCondition() &#123; return new ConditionObject(); &#125; // Deserializes properly ÂèçÂ∫èÂàóÂåñ private void readObject(ObjectInputStream s) throws IOException, ClassNotFoundException &#123; s.defaultReadObject(); setState(0); // reset to unlocked state &#125; &#125; // The sync object does all the hard work. We just forward to it. private final Sync sync = new Sync(); public void lock() &#123; sync.acquire(1); &#125; public boolean tryLock() &#123; return sync.tryAcquire(1); &#125; public void unlock() &#123; sync.release(1); &#125; public Condition newCondition() &#123; return sync.newCondition(); &#125; public boolean isLocked() &#123; return sync.isHeldExclusively(); &#125; public boolean hasQueuedThreads() &#123; return sync.hasQueuedThreads(); &#125; public void lockInterruptibly() throws InterruptedException &#123; sync.acquireInterruptibly(1); &#125; public boolean tryLock(long timeout, TimeUnit unit) throws InterruptedException &#123; return sync.tryAcquireNanos(1, unit.toNanos(timeout)); &#125;&#125; ReentrantLock ÂèØÈáçÂÖ•ÊÄß„ÄÅÂÖ¨Âπ≥‰∏éÈùûÂÖ¨Âπ≥ ReentranLockÁöÑÁâπÁÇπ ÈáçÁÇπËøòÊòØÔºö ÂèØÈáçÂÖ•ÊÄßÁöÑÂÆûÁé∞ ÂÖ¨Âπ≥ÈîÅÂíåÈùûÂÖ¨Âπ≥ÈîÅÁöÑÂå∫Âà´ ÂÖ∂‰ªñÁöÑÂü∫Êú¨‰∏äÂ∞±ÊòØ AQS ÁöÑÁã¨Âç†ÈîÅÂÆûÁé∞ËÄåÂ∑≤ ÂèØÈáçÂÖ•ÊÄßÁöÑÂÆûÁé∞Âú®ÂèØÈáçÂÖ•ÊÄßÊñπÈù¢Ôºå‰∏™‰∫∫ËßâÂæóËøòÊòØÈíàÂØπ‰∫éÂêå‰∏ÄÊääÈîÅËÄåË®ÄÁöÑÔºå‰∏çÂêåÈîÅÂéªË∞àÈáçÂÖ•ÊÄßÊ≤°ÊúâÊÑè‰πâÔºå‰ΩÜÊòØÊúâ‰∏™Áâπ‰æãÔºåÂ∞±ÊòØ ReentrantReadWriteLockÔºåÂõ†‰∏∫ÂÖ∂ ReadLock Âíå WriteLock ÊòØÂ±û‰∫éÂêå‰∏ÄÊääÂ§ßÈîÅ‰∏ãÁöÑ‰∏§ÊääÂ∞èÈîÅÔºåÂÆÉ‰ª¨‰πãÈó¥ÁöÑÈáçÂÖ•ÊÄßÊúâ‰∫õÁâπÊÆäÔºå‰πüÂ∞±ÊòØÂêå‰∏ÄÊääÂÜôÈîÅËÇØÂÆöÊòØÂèØ‰ª•ÈáçÂÖ•ÁöÑÔºåÂêå‰∏ÄÊääËØªÈîÅËÇØÂÆö‰πüÊòØÂèØ‰ª•ÈáçÂÖ•ÁöÑÔºå‰ΩÜÊòØÊ≥®ÊÑèÁöÑÊòØËØªÈîÅ‰∏ã‰∏çÂèØÈáçÂÖ•ÂÜôÈîÅÔºåÂõ†‰∏∫ËØª-ÂÜô‰∫íÊñ•Ôºå‰ΩÜÊòØÊúâ‰∏™ÈîÅÈôçÁ∫ßÔºå‰πüÂ∞±ÊòØ ÂÜôÈîÅÂèØ‰ª•ÈáçÂÖ•ËØªÈîÅÔºåÂ∞ÜÂÜôÈîÅÈôçÁ∫ß‰∏∫ËØªÈîÅÔºàÂÖàËé∑ÂèñÂÜôÈîÅÔºåÁÑ∂ÂêéËé∑ÂèñËØªÈîÅÔºåÁÑ∂ÂêéÈáäÊîæÂÜôÈîÅÔºåÁÑ∂ÂêéÂÜçÈáäÊîæËØªÈîÅÔºâ„ÄÇ Ë®ÄÂΩíÊ≠£‰º†Ôºå‰∏çÂêåÈîÅÁöÑ ReentrantLockÔºå‰πãÈó¥‰∏ç‰ºöÊúâÂΩ±ÂìçÔºå Á±ª‰ºº‰∫é‰∏ãÈù¢ÁöÑ demoÔºö 123456789101112131415161718192021222324252627282930package Â§öÁ∫øÁ®ã.ConcurrentÂåÖÁêÜËß£;import java.util.concurrent.TimeUnit;import java.util.concurrent.locks.ReentrantLock;public class ReentrantLockDemo &#123; public static final ReentrantLock lock1 = new ReentrantLock(); public static final ReentrantLock lock2 = new ReentrantLock(); public static void main(String[] args) throws InterruptedException &#123; for(int i = 0;i &lt; 10;i++)&#123; Thread thread = new Thread(() -&gt; &#123; lock1.lock(); lock2.lock(); try&#123; System.out.println("current:" + Thread.currentThread().getName() ); TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; lock2.unlock(); lock1.unlock(); &#125; &#125;); thread.start(); &#125; &#125;&#125; Êàë‰ª¨‰ª•ÈùûÂÖ¨Âπ≥ÈîÅ‰∏∫‰æãÔºåÁúãÁúãÂèØÈáçÂÖ•ÁöÑ‰ª£Á†ÅÂÆûÁé∞Ôºö 123456789101112131415161718192021final boolean nonfairTryAcquire(int acquires) &#123; final Thread current = Thread.currentThread(); int c = getState(); //1. Â¶ÇÊûúËØ•ÈîÅÊú™Ë¢´‰ªª‰ΩïÁ∫øÁ®ãÂç†ÊúâÔºåËØ•ÈîÅËÉΩË¢´ÂΩìÂâçÁ∫øÁ®ãËé∑Âèñ if (c == 0) &#123; if (compareAndSetState(0, acquires)) &#123; setExclusiveOwnerThread(current); return true; &#125; &#125; //2.Ëã•Ë¢´Âç†ÊúâÔºåÊ£ÄÊü•Âç†ÊúâÁ∫øÁ®ãÊòØÂê¶ÊòØÂΩìÂâçÁ∫øÁ®ã else if (current == getExclusiveOwnerThread()) &#123; // 3. ÂÜçÊ¨°Ëé∑ÂèñÔºåËÆ°Êï∞Âä†‰∏Ä int nextc = c + acquires; if (nextc &lt; 0) // overflow throw new Error("Maximum lock count exceeded"); setState(nextc); return true; &#125; return false;&#125; 123456789101112131415protected final boolean tryRelease(int releases) &#123; //1. ÂêåÊ≠•Áä∂ÊÄÅÂáè1 int c = getState() - releases; if (Thread.currentThread() != getExclusiveOwnerThread()) throw new IllegalMonitorStateException(); boolean free = false; if (c == 0) &#123; //2. Âè™ÊúâÂΩìÂêåÊ≠•Áä∂ÊÄÅ‰∏∫0Êó∂ÔºåÈîÅÊàêÂäüË¢´ÈáäÊîæÔºåËøîÂõûtrue free = true; setExclusiveOwnerThread(null); &#125; // 3. ÈîÅÊú™Ë¢´ÂÆåÂÖ®ÈáäÊîæÔºåËøîÂõûfalse setState(c); return free;&#125; ÂÖ¨Âπ≥ÈîÅ‰∏éÈùûÂÖ¨Âπ≥ÈîÅReentrantLockÊîØÊåÅ‰∏§ÁßçÈîÅÔºöÂÖ¨Âπ≥ÈîÅÂíåÈùûÂÖ¨Âπ≥ÈîÅ„ÄÇ‰ΩïË∞ìÂÖ¨Âπ≥ÊÄßÔºåÊòØÈíàÂØπËé∑ÂèñÈîÅËÄåË®ÄÁöÑÔºåÂ¶ÇÊûú‰∏Ä‰∏™ÈîÅÊòØÂÖ¨Âπ≥ÁöÑÔºåÈÇ£‰πàÈîÅÁöÑËé∑ÂèñÈ°∫Â∫èÂ∞±Â∫îËØ•Á¨¶ÂêàËØ∑Ê±Ç‰∏äÁöÑÁªùÂØπÊó∂Èó¥È°∫Â∫èÔºåÊª°Ë∂≥FIFO„ÄÇReentrantLockÁöÑÊûÑÈÄ†ÊñπÊ≥ïÊó†ÂèÇÊó∂ÊòØÊûÑÈÄ†ÈùûÂÖ¨Âπ≥ÈîÅÔºåÊ∫êÁ†Å‰∏∫Ôºö 123public ReentrantLock() &#123; sync = new NonfairSync();&#125; Âè¶Â§ñËøòÊèê‰æõ‰∫ÜÂè¶Â§ñ‰∏ÄÁßçÊñπÂºèÔºåÂèØ‰º†ÂÖ•‰∏Ä‰∏™booleanÂÄºÔºåtrueÊó∂‰∏∫ÂÖ¨Âπ≥ÈîÅÔºåfalseÊó∂‰∏∫ÈùûÂÖ¨Âπ≥ÈîÅÔºåÊ∫êÁ†Å‰∏∫Ôºö 123public ReentrantLock(boolean fair) &#123; sync = fair ? new FairSync() : new NonfairSync();&#125; Âú®‰∏äÈù¢ÈùûÂÖ¨Âπ≥ÈîÅËé∑ÂèñÊó∂ÔºànonfairTryAcquireÊñπÊ≥ïÔºâÂè™ÊòØÁÆÄÂçïÁöÑËé∑Âèñ‰∫Ü‰∏Ä‰∏ãÂΩìÂâçÁä∂ÊÄÅÂÅö‰∫Ü‰∏Ä‰∫õÈÄªËæëÂ§ÑÁêÜÔºåÂπ∂Ê≤°ÊúâËÄÉËôëÂà∞ÂΩìÂâçÂêåÊ≠•ÈòüÂàó‰∏≠Á∫øÁ®ãÁ≠âÂæÖÁöÑÊÉÖÂÜµ„ÄÇÊàë‰ª¨Êù•ÁúãÁúãÂÖ¨Âπ≥ÈîÅÁöÑÂ§ÑÁêÜÈÄªËæëÊòØÊÄéÊ†∑ÁöÑÔºåÊ†∏ÂøÉÊñπÊ≥ï‰∏∫Ôºö 1234567891011121314151617181920protected final boolean tryAcquire(int acquires) &#123; final Thread current = Thread.currentThread(); int c = getState(); if (c == 0) &#123; if (!hasQueuedPredecessors() &amp;&amp; compareAndSetState(0, acquires)) &#123; setExclusiveOwnerThread(current); return true; &#125; &#125; else if (current == getExclusiveOwnerThread()) &#123; int nextc = c + acquires; if (nextc &lt; 0) throw new Error("Maximum lock count exceeded"); setState(nextc); return true; &#125; return false; &#125;&#125; ÂÖ∂ÂÆûÂ∞±ÊòØÂ§ö‰∫Ü‰∏Ä‰∏™ÊñπÊ≥ï hasQueuedPredecessors()ÔºåÊñπÊ≥ïÂêçÂ∞±ÂèØÁü•ÈÅìËØ•ÊñπÊ≥ïÁî®Êù•Âà§Êñ≠ÂΩìÂâçËäÇÁÇπÂú®ÂêåÊ≠•ÈòüÂàó‰∏≠ÊòØÂê¶ÊúâÂâçÈ©±ËäÇÁÇπÁöÑÂà§Êñ≠ÔºåÂ¶ÇÊûúÊúâÂâçÈ©±ËäÇÁÇπËØ¥ÊòéÊúâÁ∫øÁ®ãÊØîÂΩìÂâçÁ∫øÁ®ãÊõ¥Êó©ÁöÑËØ∑Ê±ÇËµÑÊ∫êÔºåÊ†πÊçÆÂÖ¨Âπ≥ÊÄßÔºåÂΩìÂâçÁ∫øÁ®ãËØ∑Ê±ÇËµÑÊ∫êÂ§±Ë¥•„ÄÇÂ¶ÇÊûúÂΩìÂâçËäÇÁÇπÊ≤°ÊúâÂâçÈ©±ËäÇÁÇπÁöÑËØùÔºåÂÜçÊâçÊúâÂÅöÂêéÈù¢ÁöÑÈÄªËæëÂà§Êñ≠ÁöÑÂøÖË¶ÅÊÄß„ÄÇÂÖ¨Âπ≥ÈîÅÊØèÊ¨°ÈÉΩÊòØ‰ªéÂêåÊ≠•ÈòüÂàó‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ËäÇÁÇπËé∑ÂèñÂà∞ÈîÅÔºåËÄåÈùûÂÖ¨Âπ≥ÊÄßÈîÅÂàô‰∏ç‰∏ÄÂÆöÔºåÊúâÂèØËÉΩÂàöÈáäÊîæÈîÅÁöÑÁ∫øÁ®ãËÉΩÂÜçÊ¨°Ëé∑ÂèñÂà∞ÈîÅ„ÄÇ ÂÖ¨Âπ≥ÈîÅ VS ÈùûÂÖ¨Âπ≥ÈîÅ ÂÖ¨Âπ≥ÈîÅÊØèÊ¨°Ëé∑ÂèñÂà∞ÈîÅ‰∏∫ÂêåÊ≠•ÈòüÂàó‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ËäÇÁÇπÔºå‰øùËØÅËØ∑Ê±ÇËµÑÊ∫êÊó∂Èó¥‰∏äÁöÑÁªùÂØπÈ°∫Â∫èÔºåËÄåÈùûÂÖ¨Âπ≥ÈîÅÊúâÂèØËÉΩÂàöÈáäÊîæÈîÅÁöÑÁ∫øÁ®ã‰∏ãÊ¨°ÁªßÁª≠Ëé∑ÂèñËØ•ÈîÅÔºåÂàôÊúâÂèØËÉΩÂØºËá¥ÂÖ∂‰ªñÁ∫øÁ®ãÊ∞∏ËøúÊó†Ê≥ïËé∑ÂèñÂà∞ÈîÅÔºåÈÄ†Êàê‚ÄúÈ••È•ø‚ÄùÁé∞Ë±°„ÄÇ ÂÖ¨Âπ≥ÈîÅ‰∏∫‰∫Ü‰øùËØÅÊó∂Èó¥‰∏äÁöÑÁªùÂØπÈ°∫Â∫èÔºåÈúÄË¶ÅÈ¢ëÁπÅÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢ÔºåËÄåÈùûÂÖ¨Âπ≥ÈîÅ‰ºöÈôç‰Ωé‰∏ÄÂÆöÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢ÔºåÈôç‰ΩéÊÄßËÉΩÂºÄÈîÄ„ÄÇÂõ†Ê≠§ÔºåReentrantLockÈªòËÆ§ÈÄâÊã©ÁöÑÊòØÈùûÂÖ¨Âπ≥ÈîÅÔºåÂàôÊòØ‰∏∫‰∫ÜÂáèÂ∞ë‰∏ÄÈÉ®ÂàÜ‰∏ä‰∏ãÊñáÂàáÊç¢Ôºå‰øùËØÅ‰∫ÜÁ≥ªÁªüÊõ¥Â§ßÁöÑÂêûÂêêÈáè„ÄÇ ‰∏é Synchronized ÁöÑÂå∫Âà´ÂèØÈáçÂÖ•ÊÄß‰ªéÂêçÂ≠ó‰∏äÁêÜËß£ÔºåReenTrantLockÁöÑÂ≠óÈù¢ÊÑèÊÄùÂ∞±ÊòØÂÜçËøõÂÖ•ÁöÑÈîÅÔºåÂÖ∂ÂÆûsynchronizedÂÖ≥ÈîÆÂ≠óÊâÄ‰ΩøÁî®ÁöÑÈîÅ‰πüÊòØÂèØÈáçÂÖ•ÁöÑÔºå‰∏§ËÄÖÂÖ≥‰∫éËøô‰∏™ÁöÑÂå∫Âà´‰∏çÂ§ß„ÄÇ‰∏§ËÄÖÈÉΩÊòØÂêå‰∏Ä‰∏™Á∫øÁ®ãÊ≤°ËøõÂÖ•‰∏ÄÊ¨°ÔºåÈîÅÁöÑËÆ°Êï∞Âô®ÈÉΩËá™Â¢û1ÔºåÊâÄ‰ª•Ë¶ÅÁ≠âÂà∞ÈîÅÁöÑËÆ°Êï∞Âô®‰∏ãÈôç‰∏∫0Êó∂ÊâçËÉΩÈáäÊîæÈîÅ„ÄÇ ÈîÅÁöÑÂÆûÁé∞SynchronizedÊòØ‰æùËµñ‰∫éJVMÂÆûÁé∞ÁöÑÔºåËÄåReenTrantLockÊòØJDKÂÆûÁé∞ÁöÑÔºåÊúâ‰ªÄ‰πàÂå∫Âà´ÔºåËØ¥ÁôΩ‰∫ÜÂ∞±Á±ª‰ºº‰∫éÊìç‰ΩúÁ≥ªÁªüÊù•ÊéßÂà∂ÂÆûÁé∞ÂíåÁî®Êà∑Ëá™Â∑±Êï≤‰ª£Á†ÅÂÆûÁé∞ÁöÑÂå∫Âà´„ÄÇÂâçËÄÖÁöÑÂÆûÁé∞ÊòØÊØîËæÉÈöæËßÅÂà∞ÁöÑÔºåÂêéËÄÖÊúâÁõ¥Êé•ÁöÑÊ∫êÁ†ÅÂèØ‰æõÈòÖËØª„ÄÇ ÊÄßËÉΩÁöÑÂå∫Âà´Âú®Synchronized‰ºòÂåñ‰ª•ÂâçÔºåsynchronizedÁöÑÊÄßËÉΩÊòØÊØîReenTrantLockÂ∑ÆÂæàÂ§öÁöÑÔºå‰ΩÜÊòØËá™‰ªéSynchronizedÂºïÂÖ•‰∫ÜÂÅèÂêëÈîÅÔºåËΩªÈáèÁ∫ßÈîÅÔºàËá™ÊóãÈîÅÔºâÂêéÔºå‰∏§ËÄÖÁöÑÊÄßËÉΩÂ∞±Â∑Æ‰∏çÂ§ö‰∫ÜÔºåÂú®‰∏§ÁßçÊñπÊ≥ïÈÉΩÂèØÁî®ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂÆòÊñπÁîöËá≥Âª∫ËÆÆ‰ΩøÁî®synchronizedÔºåÂÖ∂ÂÆûsynchronizedÁöÑ‰ºòÂåñÊàëÊÑüËßâÂ∞±ÂÄüÈâ¥‰∫ÜReenTrantLock‰∏≠ÁöÑCASÊäÄÊúØ„ÄÇÈÉΩÊòØËØïÂõæÂú®Áî®Êà∑ÊÄÅÂ∞±ÊääÂä†ÈîÅÈóÆÈ¢òËß£ÂÜ≥ÔºåÈÅøÂÖçËøõÂÖ•ÂÜÖÊ†∏ÊÄÅÁöÑÁ∫øÁ®ãÈòªÂ°û„ÄÇ ÂäüËÉΩÂå∫Âà´‰æøÂà©ÊÄßÔºöÂæàÊòéÊòæSynchronizedÁöÑ‰ΩøÁî®ÊØîËæÉÊñπ‰æøÁÆÄÊ¥ÅÔºåÂπ∂‰∏îÁî±ÁºñËØëÂô®Âéª‰øùËØÅÈîÅÁöÑÂä†ÈîÅÂíåÈáäÊîæÔºåËÄåReenTrantLockÈúÄË¶ÅÊâãÂ∑•Â£∞ÊòéÊù•Âä†ÈîÅÂíåÈáäÊîæÈîÅÔºå‰∏∫‰∫ÜÈÅøÂÖçÂøòËÆ∞ÊâãÂ∑•ÈáäÊîæÈîÅÈÄ†ÊàêÊ≠ªÈîÅÔºåÊâÄ‰ª•ÊúÄÂ•ΩÂú®finally‰∏≠Â£∞ÊòéÈáäÊîæÈîÅ„ÄÇ ÈîÅÁöÑÁªÜÁ≤íÂ∫¶ÂíåÁÅµÊ¥ªÂ∫¶ÔºöÂæàÊòéÊòæReenTrantLock‰ºò‰∫éSynchronized ReenTrantLockÁã¨ÊúâÁöÑËÉΩÂäõ ReenTrantLockÂèØ‰ª•ÊåáÂÆöÊòØÂÖ¨Âπ≥ÈîÅËøòÊòØÈùûÂÖ¨Âπ≥ÈîÅ„ÄÇËÄåsynchronizedÂè™ËÉΩÊòØÈùûÂÖ¨Âπ≥ÈîÅ„ÄÇÊâÄË∞ìÁöÑÂÖ¨Âπ≥ÈîÅÂ∞±ÊòØÂÖàÁ≠âÂæÖÁöÑÁ∫øÁ®ãÂÖàËé∑ÂæóÈîÅ„ÄÇ ReenTrantLockÊèê‰æõ‰∫Ü‰∏Ä‰∏™ConditionÔºàÊù°‰ª∂ÔºâÁ±ªÔºåÁî®Êù•ÂÆûÁé∞ÂàÜÁªÑÂî§ÈÜíÈúÄË¶ÅÂî§ÈÜíÁöÑÁ∫øÁ®ã‰ª¨ÔºåËÄå‰∏çÊòØÂÉèsynchronizedË¶Å‰πàÈöèÊú∫Âî§ÈÜí‰∏Ä‰∏™Á∫øÁ®ãË¶Å‰πàÂî§ÈÜíÂÖ®ÈÉ®Á∫øÁ®ã„ÄÇ ReenTrantLockÊèê‰æõ‰∫Ü‰∏ÄÁßçËÉΩÂ§ü‰∏≠Êñ≠Á≠âÂæÖÈîÅÁöÑÁ∫øÁ®ãÁöÑÊú∫Âà∂ÔºåÈÄöËøálock.lockInterruptibly()Êù•ÂÆûÁé∞Ëøô‰∏™Êú∫Âà∂„ÄÇ ReenTrantLockÂÆûÁé∞ÁöÑÂéüÁêÜÁÆÄÂçïÊù•ËØ¥ÔºåReenTrantLockÁöÑÂÆûÁé∞ÊòØ‰∏ÄÁßçËá™ÊóãÈîÅÔºåÈÄöËøáÂæ™ÁéØË∞ÉÁî®CASÊìç‰ΩúÊù•ÂÆûÁé∞Âä†ÈîÅ„ÄÇÂÆÉÁöÑÊÄßËÉΩÊØîËæÉÂ•Ω‰πüÊòØÂõ†‰∏∫ÈÅøÂÖç‰∫Ü‰ΩøÁ∫øÁ®ãËøõÂÖ•ÂÜÖÊ†∏ÊÄÅÁöÑÈòªÂ°ûÁä∂ÊÄÅ„ÄÇÊÉ≥Â∞ΩÂäûÊ≥ïÈÅøÂÖçÁ∫øÁ®ãËøõÂÖ•ÂÜÖÊ†∏ÁöÑÈòªÂ°ûÁä∂ÊÄÅÊòØÊàë‰ª¨ÂéªÂàÜÊûêÂíåÁêÜËß£ÈîÅËÆæËÆ°ÁöÑÂÖ≥ÈîÆÈí•Âåô„ÄÇ ‰ªÄ‰πàÊÉÖÂÜµ‰∏ã‰ΩøÁî®ReenTrantLockÁ≠îÊ°àÊòØÔºåÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÂÆûÁé∞ReenTrantLockÁöÑ‰∏â‰∏™Áã¨ÊúâÂäüËÉΩÊó∂„ÄÇ ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚ÄîÁâàÊùÉÂ£∞ÊòéÔºöÊú¨Êñá‰∏∫CSDNÂçö‰∏ª„Äåqq838642798„ÄçÁöÑÂéüÂàõÊñáÁ´†ÔºåÈÅµÂæ™ CC 4.0 BY-SA ÁâàÊùÉÂçèËÆÆÔºåËΩ¨ËΩΩËØ∑ÈôÑ‰∏äÂéüÊñáÂá∫Â§ÑÈìæÊé•ÂèäÊú¨Â£∞Êòé„ÄÇÂéüÊñáÈìæÊé•Ôºöhttps://blog.csdn.net/qq838642798/article/details/65441415 ReentrantReadWriteLock ÂÜôÈîÅ‚Äî-ÁúüÁöÑÊòØÂÜôÁöÑË∂ÖÊ£íÔºÅ ËØªÈîÅ‚Äî-‰∏çËØ¥‰∫ÜÂ§™Ëµû‰∫ÜÔºÅÔºÅÂÖ≥Ê≥®Ëøô‰∏™‰ΩúËÄÖ ÈîÅÈôçÁ∫ßÈóÆÈ¢ò Ëøô‰∏™ÊâçÊòØÂÆåÊï¥ÁªßÊâø‰∫Ü AQS Âü∫Êú¨ÊâÄÊúâÊñπÊ≥ïÁöÑÂÆûÁé∞Á±ªÔºåÂõ†‰∏∫ÂÆÉ‰∏çÂÉè ReentrantLock Âè™ÊúâÁã¨Âç†ÈîÅÔºåÂÆÉÂèØ‰ª•ÂêåÊó∂Êã•ÊúâÁã¨Âç†ÈîÅÂíåÂÖ±‰∫´ÈîÅÔºåÂπ∂‰∏îËøô‰∏§‰∏™ÈîÅËøòÊúâ‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑÈôêÂà∂Ôºå‰πüÂ∞±ÊòØ ÂÜô-ËØª‰∫íÊñ•(ÂΩìÁÑ∂ÈîÅÈôçÁ∫ßÈô§Â§ñ)ÔºåÂÜô-ÂÜô‰∫íÊñ•ÔºåËØª-ËØªÂÖ±‰∫´„ÄÇÊâÄ‰ª•Ëøô‰∏™ÂæàÊúâÂøÖË¶ÅËØ¶ÁªÜËØ¥‰∏Ä‰∏ã„ÄÇ ‰∏ªË¶ÅËøòÊòØ‰∏â‰∏™ÁâπÁÇπÔºö ÂÖ¨Âπ≥ÊÄßÈÄâÊã©ÔºöÊîØÊåÅÈùûÂÖ¨Âπ≥ÊÄßÔºàÈªòËÆ§ÔºâÂíåÂÖ¨Âπ≥ÁöÑÈîÅËé∑ÂèñÊñπÂºèÔºåÂêûÂêêÈáèËøòÊòØÈùûÂÖ¨Âπ≥‰ºò‰∫éÂÖ¨Âπ≥Ôºõ ÈáçÂÖ•ÊÄßÔºöÊîØÊåÅÈáçÂÖ•ÔºåËØªÈîÅËé∑ÂèñÂêéËÉΩÂÜçÊ¨°Ëé∑ÂèñÔºåÂÜôÈîÅËé∑Âèñ‰πãÂêéËÉΩÂ§üÂÜçÊ¨°Ëé∑ÂèñÂÜôÈîÅÔºåÂêåÊó∂‰πüËÉΩÂ§üËé∑ÂèñËØªÈîÅÔºõ ÈîÅÈôçÁ∫ßÔºöÈÅµÂæ™Ëé∑ÂèñÂÜôÈîÅÔºåËé∑ÂèñËØªÈîÅÂÜçÈáäÊîæÂÜôÈîÅÁöÑÊ¨°Â∫èÔºåÂÜôÈîÅËÉΩÂ§üÈôçÁ∫ßÊàê‰∏∫ËØªÈîÅ Ë¶ÅÂºÑÊ∏ÖÊ•ö‰∏äËø∞‰∏â‰∏™ÁâπÁÇπÔºåÂ∞±ÂæóËß£ÂÜ≥‰ª•‰∏ãÂá†‰∏™ÈóÆÈ¢òÔºö ÂÜôÈîÅÂíåËØªÈîÅÊòØÂ¶Ç‰ΩïËÆ∞ÂΩïËØªÂÜôÁä∂ÊÄÅÁöÑÔºõ ÂÜôÈîÅÊòØÂ¶Ç‰ΩïËé∑ÂèñÂíåÈáäÊîæÁöÑÔºõ ËØªÈîÅÊòØÂ¶Ç‰ΩïËé∑ÂèñÂíåÈáäÊîæÁöÑÔºõ ÈîÅÈôçÁ∫ßÁöÑËßÑÂàôÊòØ‰ªÄ‰πà„ÄÇ ËØªÂÜôÈîÅÂ¶Ç‰ΩïËÆ∞ÂΩïÁä∂ÊÄÅ‰πãÂâçÈÉΩÊòØÁî® state Ëøô‰∏™ÂèòÈáèÊù•ËÆ∞ÂΩïÈîÅÁöÑËé∑ÂèñÊÉÖÂÜµÔºåËøôÈáå‰πüÊòØ‰∏ÄÊ†∑Ôºå‰ΩÜÊòØËøôÈáåÊØîËæÉÁâπÊÆäÔºå‰ΩøÁî®‰∫Ü(Integer 32‰Ωç)‰Ωé 16 ‰ΩçÊù•Â≠òÂÇ®ÂÜôÈîÅÁöÑËé∑ÂèñÊÉÖÂÜµÔºåÈ´ò 16 ‰ΩçÁî®Êù•Â≠òÂÇ®ËØªÈîÅÁöÑËé∑ÂèñÊÉÖÂÜµ„ÄÇ ÂÜôÈîÅÁöÑËé∑ÂèñÂíåÈáäÊîæÂÜôÈîÅÁî±‰∫éÊòØÁã¨Âç†ÈîÅÔºåÂπ∂‰∏î‰∏çËÉΩÈîÅÂçáÁ∫ßÔºà‰πüÂ∞±ÊòØ‰∏çÂÖÅËÆ∏ËØªÈîÅÂÜÖÂµåÂ•óÂÜôÈîÅÔºâÔºåÊâÄ‰ª•‰πüÂ∞±ÊØîËæÉÁÆÄÂçï‰∫Ü„ÄÇ tryAcquire()ÂÜôÈîÅÁã¨Âç†ÈîÅÔºåÊâÄ‰ª•ÈúÄË¶ÅÂÆûÁé∞ÁöÑÂ∞±ÊòØ AQS ‰∏≠ÁöÑ tryAcquire() 1234567891011121314151617181920212223242526272829303132// Â¶ÇÊûúÊúâËØªÈîÅÔºåÊ≠§Êó∂ÊòØËé∑Âèñ‰∏çÂà∞ÂÜôÈîÅÁöÑ„ÄÇÂΩìÊúâÂÜôÈîÅÊó∂ÔºåÂà§Êñ≠ÈáçÂÖ•Ê¨°Êï∞„ÄÇ// ÂΩìÂÜôÈîÅÁ©∫Èó≤ÔºåËØªÈîÅÁ©∫Èó≤ÔºåÂÖ¨Âπ≥Ê®°Âºè‰∏ãÔºåÂ¶ÇÊûúÈòüÂàó‰∏≠ÊúâÁ≠âÂæÖÁöÑÔºå‰∏ç‰ºöÊä¢ÈîÅ„ÄÇÈùûÂÖ¨Âπ≥Ê®°Âºè‰∏ãÔºåÂøÖÊä¢ÈîÅ„ÄÇprotected final boolean tryAcquire(int acquires) &#123; // ÂÜô Thread current = Thread.currentThread(); int c = getState(); // Áî® state &amp; 65535 ÂæóÂà∞‰Ωé 16 ‰ΩçÁöÑÂÄº„ÄÇ int w = exclusiveCount(c); if (c != 0) &#123; // (Note: if c != 0 and w == 0 then shared count != 0) // Â¶ÇÊûú state ‰∏çÊòØ0Ôºå‰∏î‰Ωé16‰ΩçÊòØ0ÔºåËØ¥Êòé‰∫Ü‰ªÄ‰πàÔºüËØ¥ÊòéÂÜôÈîÅÊòØÁ©∫Èó≤ÁöÑÔºåËØªÈîÅË¢´Èú∏Âç†‰∫Ü„ÄÇÈÇ£‰πà‰πü‰∏çËÉΩÊãøÈîÅÔºåËøîÂõû fasle„ÄÇ // Â¶ÇÊûú‰Ωé 16 ‰Ωç‰∏çÊòØ0ÔºåËØ¥ÊòéÂÜôÈîÅË¢´Èú∏Âç†‰∫ÜÔºåÂπ∂‰∏îÔºåÂ¶ÇÊûúÊåÅÊúâÈîÅÁöÑ‰∏çÊòØÂΩìÂâçÁ∫øÁ®ãÔºåÈÇ£‰πàËøôÊ¨°ÊãøÈîÅÊòØÂ§±Ë¥•ÁöÑ„ÄÇËøîÂõû fasle„ÄÇ // ÊÄª‰πãÔºåÂΩìÂè™ÊúâËØªÈîÅÊó∂ÔºåÂ∞±‰∏çËÉΩËé∑ÂèñÂÜôÈîÅ„ÄÇÂΩìÊúâÂÜôÈîÅÔºåÂèØËÉΩÊòØÂÜôÈîÅÈôçÁ∫ßÔºå‰πüÂèØËÉΩÊòØÊ≠£Â∏∏ÁöÑÊã•ÊúâÂÜôÈîÅÔºåÊ≠§Êó∂Â∞± // ÂøÖÈ°ªÊòØÈáçÂÖ•ÈîÅ„ÄÇ if (w == 0 || current != getExclusiveOwnerThread()) return false; // Âà∞Ëøô‰∏ÄÊ≠•‰∫ÜÔºåÂè™‰ºöÊòØÂÜôÈáçÂÖ•ÈîÅ„ÄÇÂ¶ÇÊûúÂÜôÈáçÂÖ•Ê¨°Êï∞Ë∂ÖËøáÊúÄÂ§ßÂÄº 65535ÔºåÂ∞±‰ºöÊ∫¢Âá∫„ÄÇ if (w + exclusiveCount(acquires) &gt; MAX_COUNT) throw new Error("Maximum lock count exceeded"); // Reentrant acquire // Â∞Ü state + 1 setState(c + acquires); return true; &#125; // ÂΩì state ÊòØ 0 ÁöÑÊó∂ÂÄôÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•Ëé∑ÂèñÈîÅ‰∫Ü„ÄÇ // writerShouldBlock Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÈîÅ„ÄÇÈùûÂÖ¨Âπ≥ÊÉÖÂÜµ‰∏ãÔºåËøîÂõû false„ÄÇÂÖ¨Âπ≥ÊÉÖÂÜµ‰∏ãÔºåÊ†πÊçÆ hasQueuedPredecessors ÁªìÊûúÂà§Êñ≠„ÄÇ // ÂΩìÈòüÂàó‰∏≠ÊúâÈîÅÁ≠âÂæÖ‰∫ÜÔºåÂ∞±ËøîÂõû false ‰∫Ü„ÄÇ // ÂΩìÊòØÈùûÂÖ¨Âπ≥ÈîÅÁöÑÊó∂ÂÄôÔºåÊàñËÄÖÈòüÂàó‰∏≠Ê≤°ÊúâÁ≠âÂæÖËäÇÁÇπÁöÑÊó∂ÂÄôÔºåÂ∞ùËØïÁî® CAS ‰øÆÊîπ state„ÄÇ if (writerShouldBlock() || !compareAndSetState(c, c + acquires)) return false; // ‰øÆÊîπÊàêÂäü state ÂêéÔºå‰øÆÊîπÈîÅÁöÑÊåÅÊúâÁ∫øÁ®ã„ÄÇ setExclusiveOwnerThread(current); ÊúÄÈöæÁêÜËß£ÁöÑÂ∞±ÊòØif (w == 0 || current != getExclusiveOwnerThread()) Ëøô‰∏ÄÊ≠•ÔºåÂÖ∑‰ΩìÁöÑÊµÅÁ®ãÂàÜÊûêÂ¶Ç‰∏ãÂõæÔºö tryRelease()123456789101112131415protected final boolean tryRelease(int releases) &#123; // ÊòØÂê¶ÊåÅÊúâÂΩìÂâçÈîÅ if (!isHeldExclusively()) throw new IllegalMonitorStateException(); // ËÆ°ÁÆó state ÂÄº int nextc = getState() - releases; // ËÆ°ÁÆóÂÜôÈîÅÁöÑÁä∂ÊÄÅÔºåÂ¶ÇÊûúÊòØ0ÔºåËØ¥ÊòéÊòØÂê¶ÊàêÂäü„ÄÇ boolean free = exclusiveCount(nextc) == 0; // ÈáäÊîæÊàêÂäüÔºåËÆæÁΩÆÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ã‰∏∫ null„ÄÇ if (free) setExclusiveOwnerThread(null); // ËÆæÁΩÆ state setState(nextc); return free;&#125; ËøôÈáåËøòÊòØÂæàÁÆÄÂçïÁöÑÔºåÂè™ÊòØÊúâ‰∏Ä‰∏™Âú∞ÊñπÈúÄË¶ÅÊ≥®ÊÑèÔºö 12// ËÆ°ÁÆóÂÜôÈîÅÁöÑÁä∂ÊÄÅÔºåÂ¶ÇÊûúÊòØ0ÔºåËØ¥ÊòéÊòØÂê¶ÊàêÂäü„ÄÇboolean free = exclusiveCount(nextc) == 0; ËøôÈáåËÆ°ÁÆóÁöÑÂè™ÊòØ state ÂèòÈáèÁöÑ‰Ωé 16 ÁöÑÂÄºÔºåËÄå‰∏çÊòØÊï¥‰∏™ state ÁöÑÂÄº„ÄÇËôΩÁÑ∂ÂÜôÁöÑÊó∂ÂÄôÔºåÂøÖÁÑ∂ÊòØ‰∏≤Ë°åÁöÑÔºå‰ΩÜËøôÈáåËÆ°ÁÆóÁöÑ‰ªçÁÑ∂ÊòØ‰Ωé 16 ‰ΩçÁöÑ„ÄÇ ËØªÈîÅÁöÑËé∑ÂèñÂíåÈáäÊîæËé∑ÂèñËØªÈîÅÁöÑËøáÁ®ãÊòØËé∑ÂèñÂÖ±‰∫´ÈîÅÁöÑËøáÁ®ã„ÄÇ tryAcquireShared()123456789101112131415161718192021222324252627282930313233343536373839404142434445protected final int11 tryAcquireShared(int unused) &#123; Thread current = Thread.currentThread(); int c = getState(); // exclusiveCount(c) != 0 ---„Äã Áî® state &amp; 65535 ÂæóÂà∞‰Ωé 16 ‰ΩçÁöÑÂÄº„ÄÇÂ¶ÇÊûú‰∏çÊòØ0ÔºåËØ¥ÊòéÂÜôÈîÅÂà´ÊåÅÊúâ‰∫Ü„ÄÇ // getExclusiveOwnerThread() != current----&gt; ‰∏çÊòØÂΩìÂâçÁ∫øÁ®ã // Â¶ÇÊûúÂÜôÈîÅË¢´Èú∏Âç†‰∫ÜÔºå‰∏îÊåÅÊúâÁ∫øÁ®ã‰∏çÊòØÂΩìÂâçÁ∫øÁ®ãÔºåËøîÂõû falseÔºåÂä†ÂÖ•ÈòüÂàó„ÄÇËé∑ÂèñÂÜôÈîÅÂ§±Ë¥•„ÄÇ // Âèç‰πãÔºåÂ¶ÇÊûúÊåÅÊúâÂÜôÈîÅÁöÑÊòØÂΩìÂâçÁ∫øÁ®ãÔºåÂ∞±ÂèØ‰ª•ÁªßÁª≠Ëé∑ÂèñËØªÈîÅ‰∫Ü„ÄÇ if (exclusiveCount(c) != 0 &amp;&amp; getExclusiveOwnerThread() != current) // Ëé∑ÂèñÈîÅÂ§±Ë¥• return -1; // Â¶ÇÊûúÂÜôÈîÅÊ≤°ÊúâË¢´Èú∏Âç†ÔºåÂàôÂ∞ÜÈ´ò16‰ΩçÁßªÂà∞‰Ωé16‰Ωç„ÄÇ int r = sharedCount(c);// c &gt;&gt;&gt; 16 // !readerShouldBlock() ÂíåÂÜôÈîÅÁöÑÈÄªËæë‰∏ÄÊ†∑ÔºàÊ†πÊçÆÂÖ¨Âπ≥‰∏éÂê¶Á≠ñÁï•ÂíåÈòüÂàóÊòØÂê¶Âê´ÊúâÁ≠âÂæÖËäÇÁÇπÔºâ // ‰∏çËÉΩÂ§ß‰∫é 65535Ôºå‰∏î CAS ‰øÆÊîπÊàêÂäü if (!readerShouldBlock() &amp;&amp; r &lt; 65535 &amp;&amp; compareAndSetState(c, c + 65536)) &#123; // Â¶ÇÊûúËØªÈîÅÊòØÁ©∫Èó≤ÁöÑÔºå Ëé∑ÂèñÈîÅÊàêÂäü„ÄÇ if (r == 0) &#123; // Â∞ÜÂΩìÂâçÁ∫øÁ®ãËÆæÁΩÆ‰∏∫Á¨¨‰∏Ä‰∏™ËØªÈîÅÁ∫øÁ®ã firstReader = current; // ËÆ°Êï∞Âô®‰∏∫1 firstReaderHoldCount = 1; &#125;// Â¶ÇÊûúËØªÈîÅ‰∏çÊòØÁ©∫Èó≤ÁöÑÔºå‰∏îÁ¨¨‰∏Ä‰∏™ËØªÁ∫øÁ®ãÊòØÂΩìÂâçÁ∫øÁ®ã„ÄÇËé∑ÂèñÈîÅÊàêÂäü„ÄÇ else if (firstReader == current) &#123;// // Â∞ÜËÆ°Êï∞Âô®Âä†‰∏Ä firstReaderHoldCount++; &#125; else &#123;// Â¶ÇÊûú‰∏çÊòØÁ¨¨‰∏Ä‰∏™Á∫øÁ®ãÔºåËé∑ÂèñÈîÅÊàêÂäü„ÄÇ // cachedHoldCounter ‰ª£Ë°®ÁöÑÊòØÊúÄÂêé‰∏Ä‰∏™Ëé∑ÂèñËØªÈîÅÁöÑÁ∫øÁ®ãÁöÑËÆ°Êï∞Âô®„ÄÇ HoldCounter rh = cachedHoldCounter; // Â¶ÇÊûúÊúÄÂêé‰∏Ä‰∏™Á∫øÁ®ãËÆ°Êï∞Âô®ÊòØ null ÊàñËÄÖ‰∏çÊòØÂΩìÂâçÁ∫øÁ®ãÔºåÈÇ£‰πàÂ∞±Êñ∞Âª∫‰∏Ä‰∏™ HoldCounter ÂØπË±° if (rh == null || rh.tid != getThreadId(current)) // ÁªôÂΩìÂâçÁ∫øÁ®ãÊñ∞Âª∫‰∏Ä‰∏™ HoldCounter cachedHoldCounter = rh = readHolds.get(); // Â¶ÇÊûú‰∏çÊòØ nullÔºå‰∏î count ÊòØ 0ÔºåÂ∞±Â∞Ü‰∏ä‰∏™Á∫øÁ®ãÁöÑ HoldCounter Ë¶ÜÁõñÊú¨Âú∞ÁöÑ„ÄÇ else if (rh.count == 0) readHolds.set(rh); // ÂØπ count Âä†‰∏Ä rh.count++; &#125; return 1; &#125; // Ê≠ªÂæ™ÁéØËé∑ÂèñËØªÈîÅ„ÄÇÂåÖÂê´ÈîÅÈôçÁ∫ßÁ≠ñÁï•„ÄÇ return fullTryAcquireShared(current);&#125; ÊÄªÁªì‰∏Ä‰∏ã‰∏äÈù¢‰ª£Á†ÅÁöÑÈÄªËæëÂêßÔºÅ Âà§Êñ≠ÂÜôÈîÅÊòØÂê¶Á©∫Èó≤„ÄÇ Â¶ÇÊûú‰∏çÊòØÁ©∫Èó≤Ôºå‰∏îÂΩìÂâçÁ∫øÁ®ã‰∏çÊòØÊåÅÊúâÂÜôÈîÅÁöÑÁ∫øÁ®ãÔºåÂàôËøîÂõû -1 ÔºåË°®Á§∫Êä¢ÈîÅÂ§±Ë¥•„ÄÇÂ¶ÇÊûúÊòØÁ©∫Èó≤ÁöÑÔºåËøõÂÖ•Á¨¨‰∏âÊ≠•„ÄÇÂ¶ÇÊûúÊòØÂΩìÂâçÁ∫øÁ®ãÔºåËøõÂÖ•Á¨¨‰∏âÊ≠•„ÄÇ Âà§Êñ≠ÊåÅÊúâËØªÈîÅÁöÑÊï∞ÈáèÊòØÂê¶Ë∂ÖËøá 65535ÔºåÁÑ∂Âêé‰ΩøÁî® CAS ËÆæÁΩÆ int È´ò 16 ‰ΩçÁöÑÂÄºÔºå‰πüÂ∞±ÊòØÂä†‰∏Ä„ÄÇ Â¶ÇÊûúËÆæÁΩÆÊàêÂäüÔºå‰∏îÊòØÁ¨¨‰∏ÄÊ¨°Ëé∑ÂèñËØªÈîÅÔºåÂ∞±ËÆæÁΩÆ firstReader Áõ∏ÂÖ≥ÁöÑÂ±ûÊÄßÔºà‰∏∫‰∫ÜÊÄßËÉΩÊèêÂçáÔºâ„ÄÇ Â¶ÇÊûú‰∏çÊòØÁ¨¨‰∏ÄÊ¨°ÔºåÂΩìÂΩìÂâçÁ∫øÁ®ãÂ∞±ÊòØÁ¨¨‰∏ÄÊ¨°Ëé∑ÂèñËØªÈîÅÁöÑÁ∫øÁ®ãÔºåÂØπ ‚ÄúÁ¨¨‰∏ÄÊ¨°Ëé∑ÂèñËØªÈîÅÁ∫øÁ®ãËÆ°Êï∞Âô®‚Äù Âä† 1. Â¶ÇÊûúÈÉΩ‰∏çÊòØÔºåÂàôËé∑ÂèñÊúÄÂêé‰∏Ä‰∏™ËØªÈîÅÁöÑÁ∫øÁ®ãËÆ°Êï∞Âô®ÔºåÂà§Êñ≠Ëøô‰∏™ËÆ°Êï∞Âô®ÊòØ‰∏çÊòØÂΩìÂâçÁ∫øÁ®ãÁöÑ„ÄÇÂ¶ÇÊûúÊòØÔºåÂä†‰∏ÄÔºåÂ¶ÇÊûú‰∏çÊòØÔºåËá™Â∑±ÂàõÂª∫‰∏Ä‰∏™Êñ∞ËÆ°Êï∞Âô®ÔºåÂπ∂Êõ¥Êñ∞ ‚ÄúÊúÄÂêéËØªÂèñÁöÑÁ∫øÁ®ãËÆ°Êï∞Âô®‚ÄùÔºà‰πüÊòØ‰∏∫‰∫ÜÊÄßËÉΩËÄÉËôëÔºâ„ÄÇÊúÄÂêéÂä†‰∏Ä„ÄÇËøîÂõûÊàêÂäü„ÄÇ Â¶ÇÊûú‰∏äÈù¢ÁöÑÂà§Êñ≠Â§±Ë¥•‰∫ÜÔºàCAS ËÆæÁΩÆÂ§±Ë¥•ÔºåÊàñËÄÖÈòüÂàóÊúâÁ≠âÂæÖÁöÑÁ∫øÁ®ãÔºàÂÖ¨Âπ≥ÊÉÖÂÜµ‰∏ãÔºâÔºâ„ÄÇÂ∞±Ë∞ÉÁî® fullTryAcquireShared ÊñπÊ≥ïÊ≠ªÂæ™ÁéØÊâßË°å‰∏äÈù¢ÁöÑÊ≠•È™§„ÄÇ Ê≠•È™§ËøòÊòØÊúâÁÇπÂ§öÂìàÔºåÁîª‰∏™ÂõæÂêßÔºåÊõ¥Ê∏ÖÊô∞‰∏ÄÁÇπ„ÄÇ ÂèØ‰ª•ÁúãÂà∞ËØªÈîÅÂØπ AQS ÁöÑÂÖ±‰∫´ÈîÅÂÅö‰∫Ü‰∏§‰∏™‰ºòÂåñÔºö ÂºïËøõ‰∫Ü firstReaderHoldCount Âíå cachedHoldCounter ÔºåÂèØ‰ª•Âä†Âø´ËÆ°Êï∞ÁöÑÊÄßËÉΩÔºõ ÂºïÂÖ•ÈîÅÈôçÁ∫ßÊú∫Âà∂ÔºåÂØπËØªÂ§öÂÜôÂ∞ë‰∏îËØªÊõ¥ÈáçË¶ÅÁöÑÂú∫ÊôØÂæàÈÄÇÁî®„ÄÇ ÁªßÁª≠Áúã fullTryAcquireShared()Ôºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364final int fullTryAcquireShared(Thread current) &#123; /* * ËøôÊÆµ‰ª£Á†Å‰∏étryAcquireShared‰∏≠ÁöÑ‰ª£Á†ÅÊúâÈÉ®ÂàÜÈáçÂ§çÔºå‰ΩÜÊï¥‰ΩìÊõ¥ÁÆÄÂçï„ÄÇ */ HoldCounter rh = null; // Ê≠ªÂæ™ÁéØ for (;;) &#123; int c = getState(); // Â¶ÇÊûúÂ≠òÂú®ÂÜôÈîÅ if (exclusiveCount(c) != 0) &#123; // Âπ∂‰∏î‰∏çÊòØÂΩìÂâçÁ∫øÁ®ãÔºåËé∑ÂèñÈîÅÂ§±Ë¥•ÔºåÂèç‰πãÔºåÂ¶ÇÊûúÊåÅÊúâÂÜôÈîÅÁöÑÊòØÂΩìÂâçÁ∫øÁ®ãÔºåÈÇ£‰πàÂ∞±‰ºöËøõÂÖ•‰∏ãÈù¢ÁöÑÈÄªËæë„ÄÇ // Âèç‰πãÔºåÂ¶ÇÊûúÂ≠òÂú®ÂÜôÈîÅÔºå‰ΩÜÊåÅÊúâÂÜôÈîÅÁöÑÊòØÂΩìÂâçÁ∫øÁ®ã„ÄÇÈÇ£‰πàÂ∞±ÁªßÁª≠Â∞ùËØïËé∑ÂèñËØªÈîÅ„ÄÇ if (getExclusiveOwnerThread() != current) return -1; // Â¶ÇÊûúÂÜôÈîÅÁ©∫Èó≤Ôºå‰∏îÂèØ‰ª•Ëé∑ÂèñËØªÈîÅ„ÄÇ &#125; else if (readerShouldBlock()) &#123; // Á¨¨‰∏Ä‰∏™ËØªÁ∫øÁ®ãÊòØÂΩìÂâçÁ∫øÁ®ã if (firstReader == current) &#123; // Â¶ÇÊûú‰∏çÊòØÂΩìÂâçÁ∫øÁ®ã &#125; else &#123; if (rh == null) &#123; rh = cachedHoldCounter; if (rh == null || rh.tid != getThreadId(current)) &#123; // ‰ªé ThreadLocal ‰∏≠ÂèñÂá∫ËÆ°Êï∞Âô® rh = readHolds.get(); if (rh.count == 0) readHolds.remove(); &#125; &#125; if (rh.count == 0) return -1; &#125; &#125; // Â¶ÇÊûúËØªÈîÅÊ¨°Êï∞ËææÂà∞ 65535 ÔºåÊäõÂá∫ÂºÇÂ∏∏ if (sharedCount(c) == MAX_COUNT) throw new Error("Maximum lock count exceeded"); // Â∞ùËØïÂØπ state Âä† 65536, ‰πüÂ∞±ÊòØËÆæÁΩÆËØªÈîÅÔºåÂÆûÈôÖÂ∞±ÊòØÂØπÈ´ò16‰ΩçÂä†‰∏Ä„ÄÇ if (compareAndSetState(c, c + SHARED_UNIT)) &#123; // Â¶ÇÊûúËØªÈîÅÊòØÁ©∫Èó≤ÁöÑ if (sharedCount(c) == 0) &#123; // ËÆæÁΩÆÁ¨¨‰∏Ä‰∏™ËØªÈîÅ firstReader = current; // ËÆ°Êï∞Âô®‰∏∫ 1 firstReaderHoldCount = 1; // Â¶ÇÊûú‰∏çÊòØÁ©∫Èó≤ÁöÑÔºåÊü•ÁúãÁ¨¨‰∏Ä‰∏™Á∫øÁ®ãÊòØÂê¶ÊòØÂΩìÂâçÁ∫øÁ®ã„ÄÇ &#125; else if (firstReader == current) &#123; firstReaderHoldCount++;// Êõ¥Êñ∞ËÆ°Êï∞Âô® &#125; else &#123;// Â¶ÇÊûú‰∏çÊòØÂΩìÂâçÁ∫øÁ®ã if (rh == null) rh = cachedHoldCounter; if (rh == null || rh.tid != getThreadId(current))// Â¶ÇÊûúÊúÄÂêé‰∏Ä‰∏™ËØªËÆ°Êï∞Âô®ÊâÄÂ±ûÁ∫øÁ®ã‰∏çÊòØÂΩìÂâçÁ∫øÁ®ã„ÄÇ // Ëá™Â∑±ÂàõÂª∫‰∏Ä‰∏™„ÄÇ rh = readHolds.get(); else if (rh.count == 0) readHolds.set(rh); // ÂØπËÆ°Êï∞Âô® ++ rh.count++; // Êõ¥Êñ∞ÁºìÂ≠òËÆ°Êï∞Âô®„ÄÇ cachedHoldCounter = rh; // cache for release &#125; return 1; &#125; &#125;&#125; Âü∫Êú¨‰∏äÂíå tryAcquireShared() Â∑Æ‰∏çÂ§öÔºåÂè™‰∏çËøáËøôÈáåÊúâ‰∏Ä‰∏™Ëá™ÊóãÁöÑËøáÁ®ã„ÄÇ firstReader ÊòØËé∑ÂèñËØªÈîÅÁöÑÁ¨¨‰∏Ä‰∏™Á∫øÁ®ã„ÄÇÂ¶ÇÊûúÂè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãËé∑ÂèñËØªÈîÅÔºåÂæàÊòéÊòæÔºå‰ΩøÁî®ËøôÊ†∑‰∏Ä‰∏™ÂèòÈáèÈÄüÂ∫¶Êõ¥Âø´„ÄÇ firstReaderHoldCountÊòØ firstReaderÁöÑËÆ°Êï∞Âô®„ÄÇÂêå‰∏ä„ÄÇ cachedHoldCounterÊòØÊúÄÂêé‰∏Ä‰∏™Ëé∑ÂèñÂà∞ËØªÈîÅÁöÑÁ∫øÁ®ãËÆ°Êï∞Âô®ÔºåÊØèÂΩìÊúâÊñ∞ÁöÑÁ∫øÁ®ãËé∑ÂèñÂà∞ËØªÈîÅÔºåËøô‰∏™ÂèòÈáèÈÉΩ‰ºöÊõ¥Êñ∞„ÄÇËøô‰∏™ÂèòÈáèÁöÑÁõÆÁöÑÊòØÔºöÂΩìÊúÄÂêé‰∏Ä‰∏™Ëé∑ÂèñËØªÈîÅÁöÑÁ∫øÁ®ãÈáçÂ§çËé∑ÂèñËØªÈîÅÔºåÊàñËÄÖÈáäÊîæËØªÈîÅÔºåÂ∞±‰ºöÁõ¥Êé•‰ΩøÁî®Ëøô‰∏™ÂèòÈáèÔºåÈÄüÂ∫¶Êõ¥Âø´ÔºåÁõ∏ÂΩì‰∫éÁºìÂ≠ò„ÄÇ tryReleaseShared()1234567891011121314151617181920212223242526272829303132333435363738protected final boolean tryReleaseShared(int unused) &#123; Thread current = Thread.currentThread(); // Â¶ÇÊûúÊòØÁ¨¨‰∏Ä‰∏™Á∫øÁ®ã if (firstReader == current) &#123; // Â¶ÇÊûúÊòØ 1ÔºåÂ∞ÜÁ¨¨‰∏Ä‰∏™Á∫øÁ®ãËÆæÁΩÆÊàê null„ÄÇÁªìÊùü„ÄÇ if (firstReaderHoldCount == 1) firstReader = null; // Â¶ÇÊûú‰∏çÊòØ 1ÔºåÂáè‰∏ÄÊìç‰Ωú else firstReaderHoldCount--; &#125; else &#123;//Â¶ÇÊûú‰∏çÊòØÂΩìÂâçÁ∫øÁ®ã HoldCounter rh = cachedHoldCounter; // Â¶ÇÊûúÁºìÂ≠òÊòØ null ÊàñËÄÖÁºìÂ≠òÊâÄÂ±ûÁ∫øÁ®ã‰∏çÊòØÂΩìÂâçÁ∫øÁ®ãÔºåÂàôÂΩìÂâçÁ∫øÁ®ã‰∏çÊòØÊúÄÂêé‰∏Ä‰∏™ËØªÈîÅ„ÄÇ if (rh == null || rh.tid != getThreadId(current)) // Ëé∑ÂèñÂΩìÂâçÁ∫øÁ®ãÁöÑËÆ°Êï∞Âô® rh = readHolds.get(); int count = rh.count; // Â¶ÇÊûúËÆ°Êï∞Âô®Â∞è‰∫éÁ≠â‰∫é‰∏ÄÔºåÂ∞±Áõ¥Êé•Âà†Èô§ËÆ°Êï∞Âô® if (count &lt;= 1) &#123; readHolds.remove(); // Â¶ÇÊûúËÆ°Êï∞Âô®ÁöÑÂÄºÂ∞è‰∫éÁ≠â‰∫é0ÔºåËØ¥ÊòéÊúâÈóÆÈ¢ò‰∫ÜÔºåÊäõÂá∫ÂºÇÂ∏∏ if (count &lt;= 0) throw unmatchedUnlockException(); &#125; // ÂØπËÆ°Êï∞Âô®Âáè‰∏Ä --rh.count; &#125; for (;;) &#123;// Ê≠ªÂæ™ÁéØ‰ΩøÁî® CAS ‰øÆÊîπÁä∂ÊÄÅ int c = getState(); // c - 65536, ÂÖ∂ÂÆûÂ∞±ÊòØÂáèÂéª‰∏Ä‰∏™ËØªÈîÅ„ÄÇÂØπÈ´ò16‰ΩçÂáè‰∏Ä„ÄÇ int nextc = c - SHARED_UNIT; // ‰øÆÊîπ state Áä∂ÊÄÅ„ÄÇ if (compareAndSetState(c, nextc)) // ‰øÆÊîπÊàêÂäüÂêéÔºåÂ¶ÇÊûúÊòØ 0ÔºåË°®Á§∫ËØªÈîÅÂíåÂÜôÈîÅÈÉΩÁ©∫Èó≤ÔºåÂàôÂèØ‰ª•Âî§ÈÜíÂêéÈù¢ÁöÑÁ≠âÂæÖÁ∫øÁ®ã return nextc == 0; &#125;&#125; ÈáäÊîæËøòÊòØÂæàÁÆÄÂçïÁöÑÔºåÊ≠•È™§Â¶Ç‰∏ãÔºö Â¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãÊòØÁ¨¨‰∏Ä‰∏™ÊåÅÊúâËØªÈîÅÁöÑÁ∫øÁ®ãÔºåÂàôÂè™ÈúÄË¶ÅÊìç‰Ωú firstReaderHoldCount Âáè‰∏Ä„ÄÇÂ¶ÇÊûú‰∏çÊòØÔºåËøõÂÖ•Á¨¨‰∫åÊ≠•„ÄÇ Ëé∑ÂèñÂà∞ÁºìÂ≠òËÆ°Êï∞Âô®ÔºàÊúÄÂêé‰∏Ä‰∏™Á∫øÁ®ãÁöÑËÆ°Êï∞Âô®ÔºâÔºåÂ¶ÇÊûúÂåπÈÖçÂà∞ÂΩìÂâçÁ∫øÁ®ãÔºåÂ∞±Âáè‰∏Ä„ÄÇÂ¶ÇÊûú‰∏çÂåπÈÖçÔºåËøõÂÖ•Á¨¨‰∏âÊ≠•„ÄÇ Ëé∑ÂèñÂΩìÂâçÁ∫øÁ®ãËá™Â∑±ÁöÑËÆ°Êï∞Âô®ÔºàÁî±‰∫éÊØè‰∏™Á∫øÁ®ãÈÉΩ‰ºöÂ§öÊ¨°Ëé∑ÂèñÂà∞ÈîÅÔºåÊâÄ‰ª•ÔºåÊØè‰∏™Á∫øÁ®ãÂøÖÈ°ª‰øùÂ≠òËá™Â∑±ÁöÑËÆ°Êï∞Âô®„ÄÇÔºâ„ÄÇ ÂÅöÂáè‰∏ÄÊìç‰Ωú„ÄÇ Ê≠ªÂæ™ÁéØ‰øÆÊîπ state ÂèòÈáè„ÄÇ ÈîÅÈôçÁ∫ßÈáçÂÖ•ËøòÂÖÅËÆ∏‰ªéÂÜôÂÖ•ÈîÅÈôçÁ∫ß‰∏∫ËØªÂèñÈîÅÔºåÂÖ∂ÂÆûÁé∞ÊñπÂºèÊòØÔºöÂÖàËé∑ÂèñÂÜôÂÖ•ÈîÅÔºåÁÑ∂ÂêéËé∑ÂèñËØªÂèñÈîÅÔºåÊúÄÂêéÈáäÊîæÂÜôÂÖ•ÈîÅ„ÄÇ‰ΩÜÊòØÔºå‰ªéËØªÂèñÈîÅÂçáÁ∫ßÂà∞ÂÜôÂÖ•ÈîÅÊòØ‰∏çÂèØËÉΩÁöÑ„ÄÇ ÈîÅÈôçÁ∫ßÁöÑÂøÖË¶ÅÊÄß‰∏ªË¶ÅÊúâ‰∏§‰∏™ËßÇÁÇπÔºö „Äå‰∏™‰∫∫ËøòÊòØÂÄæÂêë‰∫éÁ¨¨‰∏ÄÁßçËßÇÁÇπ„Äç ÊòØ‰∏∫‰∫Ü‰øùËØÅÊï∞ÊçÆÁöÑÂèØËßÅÊÄßÔºåÁ±ª‰ºº‰∫évolatileÔºåÂè™ÊúâÂÜôÈîÅÈôçÁ∫ßÊâçËÉΩ‰øùËØÅÊàëËØªÂà∞ÁöÑÊï∞ÊçÆÊòØÊàëËøôÊ¨°ÂÜôÊï∞ÊçÆÂêéÁöÑÊï∞ÊçÆÔºåÂê¶ÂàôÂ∞±ÂèØËÉΩÂèëÁîüÂÖ∂‰ªñÁ∫øÁ®ãÂÖàÊä¢ÂÜôÈîÅÔºåÂØºËá¥ËØªÂà∞ÁöÑÊï∞ÊçÆÂπ∂‰∏çÊòØÊàëËøô‰∏™Á∫øÁ®ãÂÜôÂêéÁöÑÊï∞ÊçÆÔºåÂΩìÂâçÁ∫øÁ®ãÊó†Ê≥ïÊÑüÁü•Êï∞ÊçÆÊõ¥Êñ∞„ÄÇ ÁâπÊÆäÁöÑÂÜôÈîÅÈáçÂÖ•Êú∫Âà∂ÔºåJDK ‰ΩøÁî® ÂÖàËé∑ÂèñÂÜôÂÖ•ÈîÅÔºåÁÑ∂ÂêéËé∑ÂèñËØªÂèñÈîÅÔºåÊúÄÂêéÈáäÊîæÂÜôÂÖ•ÈîÅ Ëøô‰∏™Ê≠•È™§ÔºåÊòØ‰∏∫‰∫ÜÊèêÈ´òËé∑ÂèñÈîÅÁöÑÊïàÁéá„ÄÇÂ∞§ÂÖ∂ÊòØËØªÈîÅÁöÑÊïàÁéáÔºå‰∏çÈúÄË¶ÅÁ≠âÂà∞ÂÜôÈîÅÈáäÊîæÔºå‰πüÊó†ÈúÄË∑üÂÜôÈîÅÁ´û‰∫âÂÖ±‰∫´ËµÑÊ∫ê„ÄÇ Condition Ê∫êÁ†ÅÈÉ®ÂàÜËÆ≤ÁöÑÂæàÂ•ΩÔºåÂàÜÊûêÁöÑÂæàÈÄèÂΩª ÁÆÄ‰ªãÈÉ®ÂàÜÂÜôÁöÑËøòË°åÔºå‰ΩÜÊòØÊ∫êÁ†ÅÂàÜÊûêÁöÑÈùûÂ∏∏Á≥üÁ≥ï ÁÆÄ‰ªã‰ªªÊÑè‰∏Ä‰∏™JavaÂØπË±°ÔºåÈÉΩÊã•Êúâ‰∏ÄÁªÑÁõëËßÜÂô®ÊñπÊ≥ïÔºàÂÆö‰πâÂú®java.lang.Object‰∏äÔºâÔºå‰∏ªË¶ÅÂåÖÊã¨wait()„ÄÅwait(long timeout)„ÄÅnotify()‰ª•ÂèänotifyAll()ÊñπÊ≥ïÔºåËøô‰∫õÊñπÊ≥ï‰∏ésynchronizedÂêåÊ≠•ÂÖ≥ÈîÆÂ≠óÈÖçÂêàÔºåÂèØ‰ª•ÂÆûÁé∞Á≠âÂæÖ/ÈÄöÁü•Ê®°Âºè„ÄÇConditionÊé•Âè£‰πüÊèê‰æõ‰∫ÜÁ±ª‰ººObjectÁöÑÁõëËßÜÂô®ÊñπÊ≥ïÔºå‰∏éLockÈÖçÂêàÂèØ‰ª•ÂÆûÁé∞Á≠âÂæÖ/ÈÄöÁü•Ê®°ÂºèÔºå‰ΩÜÊòØËøô‰∏§ËÄÖÂú®‰ΩøÁî®ÊñπÂºè‰ª•ÂèäÂäüËÉΩÁâπÊÄß‰∏äËøòÊòØÊúâÂ∑ÆÂà´ÁöÑ„ÄÇ QÔºö‰∏∫‰ªÄ‰πà wait/notify Á≠âÊñπÊ≥ïÂÆö‰πâÂú® Object ÊñπÊ≥ïÂÜÖÔºü AÔºöJava‰∏≠ÊâÄÊúâÁöÑÁ±ªÂíåÂØπË±°ÈÄªËæë‰∏äÈÉΩÂØπÂ∫îÊúâ‰∏Ä‰∏™ÈîÅÂíåÁõëËßÜÂô®Ôºå‰πüÂ∞±ÊòØËØ¥Âú®Java‰∏≠‰∏ÄÂàáÂØπË±°ÈÉΩÂèØ‰ª•Áî®Êù•Á∫øÁ®ãÁöÑÂêåÊ≠•„ÄÅÊâÄ‰ª•Ëøô‰∫õÁÆ°Á®ãÔºàÁõëËßÜÂô®ÔºâÁöÑ‚ÄúËøáÁ®ã‚ÄùÊñπÊ≥ïÂÆö‰πâÂú®Object‰∏≠‰∏ÄÁÇπ‰πü‰∏çÂ•áÊÄ™„ÄÇ ‰∏ÄÂè•ËØùÂΩíÁ∫≥ÔºåÂ∞±ÊòØ Lock Êê≠ÈÖç Condition(await/signal)ÔºåSynchronized(ÁõëËßÜÂô®) Êê≠ÈÖç wait/notify„ÄÇ ‰ªéÊï¥‰Ωì‰∏äÊù•ÁúãObjectÁöÑwaitÂíånotify/notifyÊòØ‰∏éÂØπË±°ÁõëËßÜÂô®ÈÖçÂêàÂÆåÊàêÁ∫øÁ®ãÈó¥ÁöÑÁ≠âÂæÖ/ÈÄöÁü•Êú∫Âà∂ÔºåËÄåCondition‰∏éLockÈÖçÂêàÂÆåÊàêÁ≠âÂæÖÈÄöÁü•Êú∫Âà∂ÔºåÂâçËÄÖÊòØjavaÂ∫ïÂ±ÇÁ∫ßÂà´ÁöÑÔºåÂêéËÄÖÊòØËØ≠Ë®ÄÁ∫ßÂà´ÁöÑÔºåÂÖ∑ÊúâÊõ¥È´òÁöÑÂèØÊéßÂà∂ÊÄßÂíåÊâ©Â±ïÊÄß„ÄÇ‰∏§ËÄÖÈô§‰∫ÜÂú®‰ΩøÁî®ÊñπÂºè‰∏ä‰∏çÂêåÂ§ñÔºåÂú®ÂäüËÉΩÁâπÊÄß‰∏äËøòÊòØÊúâÂæàÂ§öÁöÑ‰∏çÂêåÔºö ÂâçÁΩÆÊù°‰ª∂‰∏çÂêåÔºåObjecÊñπÂºèÁöÑÂØπË±°ÁõëËßÜÂô®ÈúÄË¶ÅËé∑ÂæóÈîÅÔºåËÄå Condition ÁöÑÂâçÊèêÊòØË¶ÅÊãøÂà∞ LockÔºõ ConditionËÉΩÂ§üÊîØÊåÅ‰∏çÂìçÂ∫î‰∏≠Êñ≠ÔºåËÄåÈÄöËøá‰ΩøÁî®ObjectÊñπÂºè‰∏çÊîØÊåÅÔºõ ConditionËÉΩÂ§üÊîØÊåÅÂ§ö‰∏™Á≠âÂæÖÈòüÂàóÔºànew Â§ö‰∏™ConditionÂØπË±°ÔºâÔºåËÄåObjectÊñπÂºèÂè™ËÉΩÊîØÊåÅ‰∏Ä‰∏™Ôºõ ConditionËÉΩÂ§üÊîØÊåÅË∂ÖÊó∂Êó∂Èó¥ÁöÑËÆæÁΩÆÔºåËÄåObject‰∏çÊîØÊåÅ„ÄÇ ÂèÇÁÖßObjectÁöÑwaitÂíånotify/notifyAllÊñπÊ≥ïÔºåCondition‰πüÊèê‰æõ‰∫ÜÂêåÊ†∑ÁöÑÊñπÊ≥ïÔºö ÈíàÂØπObjectÁöÑwaitÊñπÊ≥ï void await() throws InterruptedException:ÂΩìÂâçÁ∫øÁ®ãËøõÂÖ•Á≠âÂæÖÁä∂ÊÄÅÔºåÂ¶ÇÊûúÂÖ∂‰ªñÁ∫øÁ®ãË∞ÉÁî®conditionÁöÑsignalÊàñËÄÖsignalAllÊñπÊ≥ïÂπ∂‰∏îÂΩìÂâçÁ∫øÁ®ãËé∑ÂèñLock‰ªéawaitÊñπÊ≥ïËøîÂõûÔºåÂ¶ÇÊûúÂú®Á≠âÂæÖÁä∂ÊÄÅ‰∏≠Ë¢´‰∏≠Êñ≠‰ºöÊäõÂá∫Ë¢´‰∏≠Êñ≠ÂºÇÂ∏∏Ôºõ long awaitNanos(long nanosTimeout)ÔºöÂΩìÂâçÁ∫øÁ®ãËøõÂÖ•Á≠âÂæÖÁä∂ÊÄÅÁõ¥Âà∞Ë¢´ÈÄöÁü•Ôºå‰∏≠Êñ≠ÊàñËÄÖË∂ÖÊó∂Ôºõ boolean await(long time, TimeUnit unit)throws InterruptedExceptionÔºöÂêåÁ¨¨‰∫åÁßçÔºåÊîØÊåÅËá™ÂÆö‰πâÊó∂Èó¥Âçï‰Ωç boolean awaitUntil(Date deadline) throws InterruptedExceptionÔºöÂΩìÂâçÁ∫øÁ®ãËøõÂÖ•Á≠âÂæÖÁä∂ÊÄÅÁõ¥Âà∞Ë¢´ÈÄöÁü•Ôºå‰∏≠Êñ≠ÊàñËÄÖÂà∞‰∫ÜÊüê‰∏™Êó∂Èó¥ ÈíàÂØπObjectÁöÑnotify/notifyAllÊñπÊ≥ï void signal()ÔºöÂî§ÈÜí‰∏Ä‰∏™Á≠âÂæÖÂú®condition‰∏äÁöÑÁ∫øÁ®ãÔºåÂ∞ÜËØ•Á∫øÁ®ã‰ªéÁ≠âÂæÖÈòüÂàó‰∏≠ËΩ¨ÁßªÂà∞ÂêåÊ≠•ÈòüÂàó‰∏≠ÔºåÂ¶ÇÊûúÂú®ÂêåÊ≠•ÈòüÂàó‰∏≠ËÉΩÂ§üÁ´û‰∫âÂà∞LockÂàôÂèØ‰ª•‰ªéÁ≠âÂæÖÊñπÊ≥ï‰∏≠ËøîÂõû„ÄÇ void signalAll()Ôºö‰∏é1ÁöÑÂå∫Âà´Âú®‰∫éËÉΩÂ§üÂî§ÈÜíÊâÄÊúâÁ≠âÂæÖÂú®condition‰∏äÁöÑÁ∫øÁ®ã Ê∫êÁ†ÅÂàÜÊûêÂàõÂª∫‰∏Ä‰∏™ Condition ÂØπË±°ÔºåÊòØÈÄöËøá lock.newCondition()ÔºånewÂá∫Êù•‰∏Ä‰∏™ ConditionObject ÂØπË±°ÔºåËÄåËøô‰∏™ÊÅ∞Â•ΩÂèàÊòØ AQS ÁöÑÂÜÖÈÉ®Á±ªÔºåÂâçÈù¢Êàë‰ª¨ËØ¥ËøáÔºåconditionÊòØË¶ÅÂíålockÈÖçÂêà‰ΩøÁî®ÁöÑÔºå‰πüÂ∞±ÊòØconditionÂíålockÊòØÁªëÂÆöÂú®‰∏ÄËµ∑ÁöÑÔºåËÄålockÁöÑÂÆûÁé∞ÂéüÁêÜÂèà‰æùËµñ‰∫éAQSÔºåËá™ÁÑ∂ËÄåÁÑ∂ ConditionObject ‰Ωú‰∏∫AQSÁöÑ‰∏Ä‰∏™ÂÜÖÈÉ®Á±ªÊó†ÂèØÂéöÈùû„ÄÇ Êàë‰ª¨Âú® AQS ËÆ≤ËøáÔºånextWaiter Êó¢ÂèØ‰ª•Áî®Êù•Ê†áÂøó Condition ÈòüÂàó‰∏≠ÁöÑ‰∏ã‰∏Ä‰∏™ÔºåÂèàÂèØ‰ª•Ê†áÂøóÊòØÁã¨Âç†ÈîÅ/ÂÖ±‰∫´ÈîÅÔºåÂæàÊòéÊòæ‰ªéËøôÈáåÂ∞±ÂèØ‰ª•ÁúãÂá∫Á≠âÂæÖÈòüÂàóÊòØ‰∏Ä‰∏™ÂçïÂêëÈòüÂàóÔºå‰∏çÂêå‰∫éÂêåÊ≠•ÈòüÂàóÊòØ‰∏Ä‰∏™ÂèåÂêëÈòüÂàóÔºåÂπ∂‰∏îÁ≠âÂæÖÈòüÂàóÂπ∂Ê≤°ÊúâÂ§¥ÁªìÁÇπÔºå‰∏çÂÉèÂêåÊ≠•ÈòüÂàóÊòØÊúâ‰∏Ä‰∏™Â§¥ÁªìÁÇπÁöÑ„ÄÇËøòÊúâ‰∏ÄÁÇπÈúÄË¶ÅÂÜçÂº∫Ë∞É‰∏ÄÊ¨°ÔºåÂØπË±°ObjectÂØπË±°ÁõëËßÜÂô®‰∏äÂè™ËÉΩÊã•Êúâ‰∏Ä‰∏™ÂêåÊ≠•ÈòüÂàóÂíå‰∏Ä‰∏™Á≠âÂæÖÈòüÂàóÔºåËÄåÂπ∂ÂèëÂåÖ‰∏≠ÁöÑLockÊã•Êúâ‰∏Ä‰∏™ÂêåÊ≠•ÈòüÂàóÂíåÂ§ö‰∏™Á≠âÂæÖÈòüÂàó„ÄÇ Ê≥®Ôºö Âõæ‰∏≠ÁöÑÊù°‰ª∂ÈòüÂàóÂç≥Á≠âÂæÖÈòüÂàó„ÄÇÊù°‰ª∂ÈòüÂàó(Á≠âÂæÖÈòüÂàó)ÁöÑÂ±ûÊÄßÂ¶Ç‰∏ãÔºåÁî®Â§¥Â∞æÊåáÈíàÊéßÂà∂Êï¥‰∏™ÈòüÂàó„ÄÇ 12345678910private static final long serialVersionUID = 1173984872572414699L;/** First node of condition queue. */private transient Node firstWaiter; // Êù°‰ª∂ÈòüÂàóÁöÑÂ§¥ËäÇÁÇπ/** Last node of condition queue. */ private transient Node lastWaiter; // Êù°‰ª∂ÈòüÂàóÁöÑÂ∞æËäÇÁÇπ /** * Creates a new &#123;@code ConditionObject&#125; instance. */public ConditionObject() &#123; &#125; ConditionÁöÑÂÆûÁé∞‰∏ªË¶ÅÂåÖÊã¨ÔºöÊù°‰ª∂ÈòüÂàó„ÄÅÁ≠âÂæÖÂíåÈÄöÁü•„ÄÇÂÖ∂‰∏≠Êù°‰ª∂ÈòüÂàóÊîæÁöÑÊòØAQSÈáåÁöÑNodeÊï∞ÊçÆÁªìÊûÑÔºå‰ΩøÁî®nextWaiterÊù•Áª¥Êä§Êù°‰ª∂ÈòüÂàó„ÄÇÁ≠âÂæÖÂíåÈÄöÁü•ÂÖ±Êúâ7‰∏™ÊñπÊ≥ï„ÄÇ 12345678signal() //Âî§ÈÜíËØ•Êù°‰ª∂ÈòüÂàóÁöÑÂ§¥ËäÇÁÇπ„ÄÇsignalAll() //Âî§ÈÜíËØ•Êù°‰ª∂ÈòüÂàóÁöÑÊâÄÊúâËäÇÁÇπ„ÄÇawaitUninterruptibly() //Á≠âÂæÖÔºåÊ≠§ÊñπÊ≥ïÊó†Ê≥ïË¢´‰∏≠Êñ≠ÔºåÂøÖÈ°ªÈÄöËøáÂî§ÈÜíÊâçËÉΩËß£Èô§ÈòªÂ°û„ÄÇawait() //ÂΩìÂâçÁ∫øÁ®ãËøõÂÖ•Á≠âÂæÖ„ÄÇawaitNanos(long) //ÂΩìÂâçÁ∫øÁ®ãËøõÂÖ•Á≠âÂæÖÔºåÊúâË∂ÖÊó∂Êó∂Èó¥ÔºåÂÖ•ÂèÇÁöÑÂçï‰Ωç‰∏∫Á∫≥Áßí„ÄÇawaitUntil(Date) //ÂΩìÂÖàÁ∫øÁ®ãËøõÂÖ•Á≠âÂæÖÔºåÁõ¥Âà∞ÂΩìÂâçÊó∂Èó¥Ë∂ÖËøáÂÖ•ÂèÇÁöÑÊó∂Èó¥„ÄÇawait(long, TimeUnit) //ÂΩìÂâçÁ∫øÁ®ãËøõÂÖ•Á≠âÂæÖÔºåÊúâË∂ÖÊó∂Êó∂Èó¥ÔºåÂÖ•ÂèÇÂèØ‰ª•Ëá™Â∑±ËÆæÁΩÆÊó∂Èó¥Âçï‰Ωç„ÄÇ Ëøô‰∫õÊñπÊ≥ïÂÖ∂ÂÆûÂ§ßÂêåÂ∞èÂºÇÔºåÂõ†Ê≠§Êú¨ÊñáÂè™ÂØπÂ∏∏Áî®ÁöÑsignal()„ÄÅsignalAll()Âíåawait()ÊñπÊ≥ïÂ±ïÂºÄËØ¶Ëß£„ÄÇÊêûÊáÇ‰∫ÜËøô3‰∏™ÊñπÊ≥ïÔºåÊêûÊáÇÂÖ∂‰ªñÂá†‰∏™ÊñπÊ≥ï‰πüÂü∫Êú¨Ê≤°‰ªÄ‰πàÈòªÁ¢ç„ÄÇ await()123456789101112131415161718public final void await() throws InterruptedException &#123; // ÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÔºåÁõ¥Êé•Ë¢´Âî§ÈÜíÊàñË¢´‰∏≠Êñ≠ if (Thread.interrupted()) // Â¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãË¢´‰∏≠Êñ≠ËøáÔºåÂàôÊäõÂá∫‰∏≠Êñ≠ÂºÇÂ∏∏ throw new InterruptedException(); Node node = addConditionWaiter(); // Ê∑ªÂä†‰∏Ä‰∏™waitStatus‰∏∫CONDITIONÁöÑËäÇÁÇπÂà∞Êù°‰ª∂ÈòüÂàóÂ∞æÈÉ® int savedState = fullyRelease(node); // ÈáäÊîæÊìç‰Ωú„ÄÇÊàë‰ª¨Áü•ÈÅìÂè™ÊúâÂú®Êã•ÊúâÈîÅÔºàacquireÊàêÂäüÔºâÁöÑÊó∂ÂÄôÊâçËÉΩË∞ÉÁî®await()ÊñπÊ≥ïÔºåÂõ†Ê≠§ÔºåË∞ÉÁî®await()ÊñπÊ≥ïÁöÑÁ∫øÁ®ãÁöÑËäÇÁÇπÂøÖÁÑ∂ÊòØÂêåÊ≠•ÈòüÂàóÁöÑÂ§¥ËäÇÁÇπ„ÄÇÊâÄ‰ª•ÔºåÂΩìË∞ÉÁî®await()ÊñπÊ≥ïÊó∂ÔºåÁõ∏ÂΩì‰∫éÂêåÊ≠•ÈòüÂàóÁöÑÈ¶ñËäÇÁÇπÔºàËé∑Âèñ‰∫ÜÈîÅÁöÑËäÇÁÇπÔºâÁßªÂä®Âà∞ConditionÁöÑÊù°‰ª∂ÈòüÂàó‰∏≠„ÄÇ int interruptMode = 0; // 0‰∏∫Ê≠£Â∏∏ÔºåË¢´‰∏≠Êñ≠ÂÄº‰∏∫THROW_IEÊàñREINTERRUPT while (!isOnSyncQueue(node)) &#123; // isOnSyncQueueÔºöÂà§Êñ≠nodeÊòØÂê¶Âú®ÂêåÊ≠•ÈòüÂàóÔºàÊ≥®ÊÑèÂíåÊù°‰ª∂ÈòüÂàóÂå∫ÂàÜ„ÄÇË∞ÉÁî®signalÊñπÊ≥ï‰ºöÂ∞ÜËäÇÁÇπ‰ªéÊù°‰ª∂ÈòüÂàóÁßªÂä®Âà∞ÂêåÊ≠•ÈòüÂàóÔºåÂõ†Ê≠§ËøôËæπÂ∞±ÂèØ‰ª•Ë∑≥Âá∫whileÂæ™ÁéØÔºâ LockSupport.park(this); // nodeÂ¶ÇÊûú‰∏çÂú®ÂêåÊ≠•ÈòüÂàóÂàôËøõË°åparkÔºàÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÔºâ if ((interruptMode = checkInterruptWhileWaiting(node)) != 0) // Ê£ÄÊü•Á∫øÁ®ãË¢´Âî§ÈÜíÊòØÂê¶ÊòØÂõ†‰∏∫Ë¢´‰∏≠Êñ≠ÔºåÂ¶ÇÊûúÊòØÂàôË∑≥Âá∫Âæ™ÁéØÔºåÂê¶Âàô‰ºöËøõË°å‰∏ã‰∏ÄÊ¨°Âæ™ÁéØÔºåÂõ†‰∏∫Ë¢´Âî§ÈÜíÂâçÊèêÊòØËøõÂÖ•ÂêåÊ≠•ÈòüÂàóÔºåÊâÄ‰ª•‰∏ã‰∏ÄÊ¨°Âæ™ÁéØ‰πüÂøÖÁÑ∂‰ºöË∑≥Âá∫Âæ™ÁéØ break; &#125; if (acquireQueued(node, savedState) &amp;&amp; interruptMode != THROW_IE) // acquireQueuedËøîÂõûtrue‰ª£Ë°®Ë¢´‰∏≠Êñ≠ËøáÔºåÂ¶ÇÊûú‰∏≠Êñ≠Ê®°Âºè‰∏çÊòØTHROW_IEÔºåÂàôÂøÖÁÑ∂‰∏∫REINTERRUPTÔºàËßÅ‰∏äÈù¢ÁöÑcheckInterruptWhileWaitingÊñπÊ≥ïÔºâ interruptMode = REINTERRUPT; if (node.nextWaiter != null) // clean up if cancelled unlinkCancelledWaiters(); // ÁßªÈô§waitStatus‰∏∫CANCELLEDÁöÑËäÇÁÇπ if (interruptMode != 0) // Â¶ÇÊûúË∑≥Âá∫whileÂæ™ÁéØÊòØÂõ†‰∏∫Ë¢´‰∏≠Êñ≠ reportInterruptAfterWait(interruptMode); // ÂàôÊ†πÊçÆinterruptModeÔºåÈÄâÊã©ÊäõÂá∫InterruptedException Êàñ ÈáçÊñ∞‰∏≠Êñ≠ÂΩìÂâçÁ∫øÁ®ã&#125; ÊÄªÁªì‰∏Ä‰∏ãÊï¥‰ΩìÁöÑÊµÅÁ®ãÔºö Âà§Êñ≠Á∫øÁ®ãÊòØÂê¶Ë¢´‰∏≠Êñ≠ÔºåÊòØÁöÑËØùÂ∞±ÊäõÂá∫ÂºÇÂ∏∏Ôºõ ÁÑ∂ÂêéÂ∞ÜÁªôÁ∫øÁ®ãÂåÖË£ÖÊàêËäÇÁÇπÔºå‰∏î WaitStatus == ConditionÔºåËøô‰∏™Áî± addConditionWaiter() ÂÆåÊàêÔºå‰∏ãÈù¢‰ºöËÆ≤Ôºõ ÁÑ∂ÂêéÂ∞ÜÂêåÊ≠•ÈòüÂàó‰∏≠ÁöÑËäÇÁÇπÂà†Èô§ÔºåÂÖ∂ÂÆûÂ∞±Áõ∏ÂΩì‰∫éÊòØÂ∞ÜÂêåÊ≠•ÈòüÂàóÁöÑÂ§¥ÁªìÁÇπÂä†ÂÖ•Âà∞Êù°‰ª∂ÈòüÂàó‰∏≠ÁöÑÂ∞æÁªìÁÇπÔºåËøô‰∏™ÊòØÁî±fullRelease() ÂÆåÊàêÁöÑÔºõ ÁÑ∂ÂêéÂà§Êñ≠Á∫øÁ®ãÊòØÂê¶Âú®ÂêåÊ≠•ÈòüÂàó‰∏≠ÔºåËøô‰∏™‰ΩøÁî®ÁöÑÊòØ isOnSyncQueue()ÔºåÁ¨¨‰∏ÄÊ¨°ËÇØÂÆöÊòØÂ∑≤Áªè‰∏çÂú®‰∫ÜÔºåÂõ†‰∏∫Ë∞ÉÁî®‰∫Ü fullRelease() Â∑≤ÁªèÂ∞ÜÂÖ∂‰ªéÂêåÊ≠•ÈòüÂàó‰∏≠Âà†Èô§‰∫ÜÔºåËøõÂÖ•Âæ™ÁéØÂêéÔºåÂ∞±‰ºöÈòªÂ°ûËØ•Á∫øÁ®ãÔºåÂ¶Ç‰ΩïÈÄÄÂá∫Âë¢ÔºåÈÇ£Â∞±ÈúÄË¶Å signal‰∫ÜÔºõ ÂΩìË∞ÉÁî®‰∫Ü signal ÂêéÔºåÁ®ãÂ∫è‰ºöË∑≥Âá∫Âæ™ÁéØÔºåÊ≠§Êó∂ signal ÂáΩÊï∞Â∑≤ÁªèÂ∞ÜËØ•ËäÇÁÇπ‰ªéÊù°‰ª∂ÈòüÂàóÂä†ÂõûËá≥ÂêåÊ≠•ÈòüÂàó‰∏≠‰∫ÜÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅË∞ÉÁî® acquireQueued() Â∞ùËØïËé∑ÂèñÈîÅÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ Êé•‰∏ãÊù•ÔºåËÆ≤‰∏Ä‰∏ãÂàöÊâçÁî®Âà∞ÁöÑÂá†‰∏™ÊñπÊ≥ïÔºö addConditionWaiter()123456789101112131415private Node addConditionWaiter() &#123; // Ê∑ªÂä†‰∏Ä‰∏™waitStatus‰∏∫CONDITIONÁöÑËäÇÁÇπÂà∞Êù°‰ª∂ÈòüÂàóÂ∞æÈÉ® Node t = lastWaiter; // If lastWaiter is cancelled, clean out. if (t != null &amp;&amp; t.waitStatus != Node.CONDITION) &#123; unlinkCancelledWaiters(); // ÁßªÈô§waitStatus‰∏ç‰∏∫CONDITIONÁöÑËäÇÁÇπÔºàÊù°‰ª∂ÈòüÂàóÈáåÁöÑËäÇÁÇπwaitStatusÈÉΩ‰∏∫CONDITIONÔºâ t = lastWaiter; // Â∞ÜtËµãÂÄº‰∏∫ÁßªÈô§‰∫ÜwaitStatus‰∏ç‰∏∫CONDITIONÂêéÁöÑÂ∞æËäÇÁÇπÔºà‰∏äÈù¢ËøõË°å‰∫ÜÁßªÈô§Êìç‰ΩúÔºåÂõ†Ê≠§Â∞æËäÇÁÇπÂèØËÉΩ‰ºöÂèëÁîüÂèòÂåñÔºâ &#125; Node node = new Node(Thread.currentThread(), Node.CONDITION); // ‰ª•ÂΩìÂâçÁ∫øÁ®ãÊñ∞Âª∫‰∏Ä‰∏™waitStatus‰∏∫CONDITIONÁöÑËäÇÁÇπ if (t == null) // t‰∏∫Á©∫Ôºå‰ª£Ë°®Êù°‰ª∂ÈòüÂàó‰∏∫Á©∫ firstWaiter = node; // Â∞ÜÂ§¥ËäÇÁÇπËµãÂÄº‰∏∫node else t.nextWaiter = node; // Âê¶ÂàôÔºåÈòüÂàó‰∏ç‰∏∫Á©∫„ÄÇÂ∞ÜtÔºàÂéüÂ∞æËäÇÁÇπÔºâÁöÑÂêéÁªßËäÇÁÇπËµãÂÄº‰∏∫node lastWaiter = node; // Â∞ÜnodeËµãÂÄºÁªôÂ∞æËäÇÁÇπÔºåÂç≥Â∞ÜnodeÊîæÂà∞Êù°‰ª∂ÈòüÂàóÁöÑÂ∞æÈÉ®„ÄÇËøôÈáåÊ≤°ÊúâÁî®CASÊù•‰øùËØÅÂéüÂ≠êÊÄßÔºåÂéüÂõ†Âú®‰∫éË∞ÉÁî®await()ÊñπÊ≥ïÁöÑÁ∫øÁ®ãÂøÖÂÆöÊòØËé∑Âèñ‰∫ÜÈîÅÁöÑÁ∫øÁ®ãÔºå‰πüÂ∞±ÊòØËØ¥ËØ•ËøáÁ®ãÊòØÁî±ÈîÅÊù•‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ return node;&#125; Ëøô‰∏™ÂáΩÊï∞ÁöÑ‰∏ª‰ΩìÂäüËÉΩÂ∞±ÊòØÊ∑ªÂä†‰∏Ä‰∏™waitStatus‰∏∫CONDITIONÁöÑËäÇÁÇπÂà∞Êù°‰ª∂ÈòüÂàóÂ∞æÈÉ®ÔºåÂÖ∑‰ΩìÂÆûÁé∞Ê≠•È™§ÊòØÔºö Â¶ÇÊûúÊù°‰ª∂ÈòüÂàóÁöÑÂ∞æËäÇÁÇπ‰∏ç‰∏∫nullÂπ∂‰∏îwaitStatus‰∏ç‰∏∫CONDITIONÔºåÂàôË∞ÉÁî®unlinkCancelledWaitersÊñπÊ≥ïÔºàËØ¶Ëß£ËßÅ‰∏ãÊñáunlinkCancelledWaitersÊñπÊ≥ïÔºâÁßªÈô§waitStatus‰∏ç‰∏∫CONDITIONÁöÑËäÇÁÇπÔºàÊù°‰ª∂ÈòüÂàóÈáåÁöÑËäÇÁÇπwaitStatusÈÉΩ‰∏∫CONDITIONÔºâÔºåÂπ∂Â∞ÜtËµãÂÄº‰∏∫ÁßªÈô§‰∫ÜwaitStatus‰∏ç‰∏∫CONDITIONÂêéÁöÑÂ∞æËäÇÁÇπÔºà‰∏äÈù¢ËøõË°å‰∫ÜÁßªÈô§Êìç‰ΩúÔºåÂõ†Ê≠§Â∞æËäÇÁÇπÂèØËÉΩ‰ºöÂèëÁîüÂèòÂåñÔºâÔºõ Êñ∞Âª∫‰∏Ä‰∏™ËäÇÁÇπÔºåÂ≠òÂÇ®ÂΩìÂâçÁ∫øÁ®ãÔºõ Ê∑ªÂä†Âà∞ÈòüÂ∞æÔºåÊ≥®ÊÑèËøôÈáå‰∏çÈúÄË¶Å‰ΩøÁî® CAS„ÄÇ 12345678910111213141516171819private void unlinkCancelledWaiters() &#123; // ‰ªéÊù°‰ª∂ÈòüÂàóÁßªÈô§ÊâÄÊúâwaitStatus‰∏ç‰∏∫CONDITIONÁöÑËäÇÁÇπ Node t = firstWaiter; // tËµãÂÄº‰∏∫Êù°‰ª∂ÈòüÂàóÁöÑÂ∞æËäÇÁÇπ Node trail = null; while (t != null) &#123; Node next = t.nextWaiter; // Âêë‰∏ãÈÅçÂéÜ if (t.waitStatus != Node.CONDITION) &#123; // Â¶ÇÊûútÁöÑwaitStatus‰∏ç‰∏∫CONDITION t.nextWaiter = null; // Êñ≠ÂºÄt‰∏étÂêéÁªßËäÇÁÇπÁöÑÂÖ≥ËÅî if (trail == null) // Â¶ÇÊûútrail‰∏∫nullÔºåÂàôÂ∞ÜfirstWaiterËµãÂÄº‰∏∫nextËäÇÁÇπÔºåÊ≠§Êó∂ËøòÊ≤°ÊúâÈÅçÂéÜÂà∞waitStatus‰∏∫CONDITIONÁöÑËäÇÁÇπÔºåÂõ†Ê≠§Áõ¥Êé•ÁßªÂä®firstWaiterÁöÑÊåáÈíàÂç≥ÂèØÁßªÈô§ÂâçÈù¢ÁöÑËäÇÁÇπ firstWaiter = next; else trail.nextWaiter = next; // Âê¶ÂàôÂ∞ÜtrailÁöÑÂêéÁªßËäÇÁÇπËÆæ‰∏∫nextËäÇÁÇπ„ÄÇÊ≠§Êó∂ÔºåtrailËäÇÁÇπÂà∞nextËäÇÁÇπ‰∏≠ÁöÑÊâÄÊúâËäÇÁÇπË¢´ÁßªÈô§ÔºàÂåÖÊã¨tËäÇÁÇπÔºå‰ΩÜÂèØËÉΩ‰∏çÊ≠¢tËäÇÁÇπ„ÄÇÂõ†‰∏∫ÔºåtrailÂßãÁªàÊåáÂêëÈÅçÂéÜËøáÁöÑÊúÄÂêé‰∏Ä‰∏™waitStatus‰∏∫CONDITIONÔºåÂõ†Ê≠§Âè™ÈúÄË¶ÅÂ∞ÜtrailÁöÑÂêéÁªßËäÇÁÇπËÆæÁΩÆ‰∏∫nextÔºåÂç≥ÂèØÂ∞Ütrail‰πãÂêéÂà∞next‰πãÂâçÁöÑÊâÄÊúâËäÇÁÇπÁßªÈô§Ôºâ if (next == null) lastWaiter = trail; &#125; else trail = t; // Â¶ÇÊûútÁöÑwaitStatus‰∏∫CONDITIONÔºåÂàôÂ∞ÜtrailËµãÂÄº‰∏∫tÔºåtrailÂßãÁªàÊåáÂêëÈÅçÂéÜËøáÁöÑÊúÄÂêé‰∏Ä‰∏™waitStatus‰∏∫CONDITION t = next; // tÊåáÂêë‰∏ã‰∏Ä‰∏™ËäÇÁÇπ &#125;&#125; fullRelease()‰∏ª‰Ωì‰πüÂ∞±ÊòØ AQS ÁöÑ release ÊñπÊ≥ïÔºåÂ∞ÜÂÖ∂‰ªéÂêåÊ≠•ÈòüÂàó‰∏≠Âà†Èô§„ÄÇ 123456789101112131415final int fullyRelease(Node node) &#123; // ÈáäÊîæÈîÅ boolean failed = true; try &#123; int savedState = getState(); // ÂΩìÂâçÁöÑÂêåÊ≠•Áä∂ÊÄÅ if (release(savedState)) &#123; // Áã¨Âç†Ê®°Âºè‰∏ãreleaseÔºà‰∏ÄËà¨ÊåáÈáäÊîæÈîÅÔºâ failed = false; return savedState; &#125; else &#123; throw new IllegalMonitorStateException(); &#125; &#125; finally &#123; if (failed) node.waitStatus = Node.CANCELLED; // Â¶ÇÊûúreleaseÂ§±Ë¥•ÂàôÂ∞ÜËØ•ËäÇÁÇπÁöÑwaitStatusËÆæÁΩÆ‰∏∫CANCELLED &#125;&#125; isOnSyncQueue()12345678910111213141516171819final boolean isOnSyncQueue(Node node) &#123; // Âà§Êñ≠nodeÊòØÂê¶ÂÜçÂêåÊ≠•ÈòüÂàó‰∏≠ if (node.waitStatus == Node.CONDITION || node.prev == null) // Â¶ÇÊûúwaitStatus‰∏∫CONDITION Êàñ nodeÊ≤°ÊúâÂâçÈ©±ËäÇÁÇπÔºåÂàôÂøÖÁÑ∂‰∏çÂú®ÂêåÊ≠•ÈòüÂàóÔºåÁõ¥Êé•ËøîÂõûfalse return false; if (node.next != null) // Â¶ÇÊûúÊúâÂêéÁªßËäÇÁÇπÔºåÂøÖÁÑ∂ÊòØÂú®ÂêåÊ≠•ÈòüÂàó‰∏≠ÔºåËøîÂõûtrue return true; return findNodeFromTail(node); // ËøîÂõûnodeÊòØÂê¶‰∏∫ÂêåÊ≠•ÈòüÂàóËäÇÁÇπÔºåÂ¶ÇÊûúÊòØËøîÂõûtrueÔºåÂê¶ÂàôËøîÂõûfalse&#125;// ‰ªéÂêåÊ≠•ÈòüÂàóÁöÑÂ∞æËäÇÁÇπÂºÄÂßãÂêëÂâçÈÅçÂéÜÔºåÂ¶ÇÊûúnode‰∏∫ÂêåÊ≠•ÈòüÂàóËäÇÁÇπÂàôËøîÂõûtrueÔºåÂê¶ÂàôËøîÂõûfalseprivate boolean findNodeFromTail(Node node) &#123; Node t = tail; for (;;) &#123; if (t == node) return true; if (t == null) return false; t = t.prev; &#125; signal()1234567public final void signal() &#123; if (!isHeldExclusively()) // Ê£ÄÊü•ÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶‰∏∫Áã¨Âç†Ê®°ÂºèÂêåÊ≠•Âô®ÁöÑÊâÄÊúâËÄÖ throw new IllegalMonitorStateException(); Node first = firstWaiter; if (first != null) doSignal(first); // Âî§ÈÜíÊù°‰ª∂ÈòüÂàóÁöÑÂ§¥ËäÇÁÇπ&#125; Âõ†‰∏∫Êù°‰ª∂ÈòüÂàóÔºåÂç≥Á≠âÂæÖÈòüÂàó‰πüÊòØ FIFOÔºåÂ§¥ÁªìÁÇπÂøÖÁÑ∂ÊòØÁ≠âÁöÑÊúÄ‰πÖÁöÑ‰∏Ä‰∏™ÔºåÊâÄ‰ª•ÊØèÊ¨°Âî§ÈÜíÈÉΩÊòØÂî§ÈÜíÂ§¥ÁªìÁÇπ„ÄÇ ÂÖ∑‰ΩìÊ≠•È™§Ôºö Ê£ÄÊü•ÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶‰∏∫Áã¨Âç†Ê®°ÂºèÂêåÊ≠•Âô®ÁöÑÊâÄÊúâËÄÖÔºåÂú®ReentrantLock‰∏≠Âç≥Ê£ÄÊü•ÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶‰∏∫Êã•ÊúâÈîÅÁöÑÁ∫øÁ®ã„ÄÇÂ¶ÇÊûú‰∏çÊòØÔºåÂàôÊäõIllegalMonitorStateException„ÄÇ ÊãøÂà∞Êù°‰ª∂ÈòüÂàóÁöÑÂ§¥ËäÇÁÇπÔºåÂ¶ÇÊûú‰∏ç‰∏∫nullÔºåÂàôË∞ÉÁî®doSignalÊñπÊ≥ïÔºàËØ¶Ëß£ËßÅ‰∏ãÊñádoSignalÊñπÊ≥ïÔºâÂî§ÈÜíÂ§¥ËäÇÁÇπ„ÄÇ 12345678910111213141516171819202122232425private void doSignal(Node first) &#123; // Â∞ÜÊù°‰ª∂ÈòüÂàóÁöÑÂ§¥ËäÇÁÇπÁßªÂà∞ÂêåÊ≠•ÈòüÂàó do &#123; if ( (firstWaiter = first.nextWaiter) == null) // Â∞ÜfirstËäÇÁÇπËµãÂÄº‰∏∫firstËäÇÁÇπÁöÑÂêéÁªßËäÇÁÇπÔºàÁõ∏ÂΩì‰∫éÁßªÈô§firstËäÇÁÇπÔºâÔºåÂ¶ÇÊûúfirstËäÇÁÇπÁöÑÂêéÁªßËäÇÁÇπ‰∏∫Á©∫ÔºåÂàôÂ∞ÜlastWaiterËµãÂÄº‰∏∫null lastWaiter = null; first.nextWaiter = null; // Êñ≠ÂºÄfirstËäÇÁÇπÂØπfirstËäÇÁÇπÂêéÁªßËäÇÁÇπÁöÑÂÖ≥ËÅî &#125; while (!transferForSignal(first) &amp;&amp; // transferForSignalÔºöÂ∞ÜfirstËäÇÁÇπ‰ªéÊù°‰ª∂ÈòüÂàóÁßªÂä®Âà∞ÂêåÊ≠•ÈòüÂàó (first = firstWaiter) != null); // Â¶ÇÊûútransferForSignalÂ§±Ë¥•ÔºåÂπ∂‰∏îfirstËäÇÁÇπ‰∏ç‰∏∫nullÔºåÂàôÂêë‰∏ãÈÅçÂéÜÊù°‰ª∂ÈòüÂàóÁöÑËäÇÁÇπÔºåÁõ¥Âà∞ËäÇÁÇπÊàêÂäüÁßªÂä®Âà∞ÂêåÊ≠•ÈòüÂàó ÊàñËÄÖ firstWaiter‰∏∫null&#125;// Â∞ÜnodeËäÇÁÇπ‰ªéÊù°‰ª∂ÈòüÂàóÁßªÂä®Âà∞ÂêåÊ≠•ÈòüÂàóÔºåÂ¶ÇÊûúÊàêÂäüÂàôËøîÂõûtrue„ÄÇfinal boolean transferForSignal(Node node) &#123; if (!compareAndSetWaitStatus(node, Node.CONDITION, 0)) // Â¶ÇÊûú‰∏çËÉΩÊõ¥ÊîπËäÇÁÇπÁöÑwaitStatusÔºåÂàôË°®Á§∫ËØ•ËäÇÁÇπÂ∑≤Ë¢´ÂèñÊ∂àÔºåËøîÂõûfalse return false; // Âê¶ÂàôÔºåË∞ÉÁî®enqÊñπÊ≥ïÂ∞ÜnodeÊ∑ªÂä†Âà∞ÂêåÊ≠•ÈòüÂàóÔºåÊ≥®ÊÑèÔºöenqÊñπÊ≥ïËøîÂõûÁöÑËäÇÁÇπÊòØnodeÁöÑÂâçÈ©±ËäÇÁÇπ Node p = enq(node); int ws = p.waitStatus; // Â∞ÜwsËµãÂÄº‰∏∫nodeÂâçÈ©±ËäÇÁÇπÁöÑÁ≠âÂæÖÁä∂ÊÄÅ if (ws &gt; 0 || !compareAndSetWaitStatus(p, ws, Node.SIGNAL)) // Â¶ÇÊûúnodeÂâçÈ©±ËäÇÁÇπÁöÑÁä∂ÊÄÅ‰∏∫CANCELLEDÔºàws&gt;0Ôºâ //Êàñ ‰ΩøÁî®CASÂ∞ÜwaitStatus‰øÆÊîπÊàêSIGNALÂ§±Ë¥•ÔºåÂàô‰ª£Ë°®nodeÁöÑÂâçÈ©±ËäÇÁÇπÊó†Ê≥ïÊù•Âî§ÈÜínodeËäÇÁÇπÔºåÂõ†Ê≠§Áõ¥Êé•Ë∞ÉÁî®LockSupport.unparkÊñπÊ≥ïÂî§ÈÜínodeËäÇÁÇπ // Ê≥®ÊÑèÔºåunparkSuccessor(node)ÊòØÂî§ÈÜíËØ•ËäÇÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπÔºåËÄåLockSupport.lockÂàôÊòØÁõ¥Êé•Âî§ÈÜíËØ•ËäÇÁÇπ LockSupport.unpark(node.thread); return true;&#125; signalAll()1234567public final void signalAll() &#123; if (!isHeldExclusively()) // Ê£ÄÊü•ÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶‰∏∫Áã¨Âç†Ê®°ÂºèÂêåÊ≠•Âô®ÁöÑÊâÄÊúâËÄÖ throw new IllegalMonitorStateException(); Node first = firstWaiter; if (first != null) doSignalAll(first); // Âî§ÈÜíÊù°‰ª∂ÈòüÂàóÁöÑÊâÄÊúâËäÇÁÇπ&#125; 123456789private void doSignalAll(Node first) &#123; // Â∞ÜÊù°‰ª∂ÈòüÂàóÁöÑÊâÄÊúâËäÇÁÇπÁßªÂà∞ÂêåÊ≠•ÈòüÂàó lastWaiter = firstWaiter = null; // Âõ†‰∏∫Ë¶ÅÁßªÈô§Êù°‰ª∂ÈòüÂàóÁöÑÊâÄÊúâËäÇÁÇπÂà∞ÂêåÊ≠•ÈòüÂàóÔºåÂõ†Ê≠§ËøôËæπÁõ¥Êé•Â∞ÜfirstWaiterÂíålastWaiterËµãÂÄº‰∏∫null do &#123; Node next = first.nextWaiter; // nextËµãÂÄº‰∏∫firstËäÇÁÇπÁöÑÂêéÁªßËäÇÁÇπ first.nextWaiter = null; // Êñ≠ÂºÄfirstËäÇÁÇπÂØπfirstËäÇÁÇπÂêéÁªßËäÇÁÇπÁöÑÂÖ≥ËÅî transferForSignal(first); // transferForSignalÔºöÂ∞ÜfirstËäÇÁÇπ‰ªéÊù°‰ª∂ÈòüÂàóÁßªÂä®Âà∞ÂêåÊ≠•ÈòüÂàó first = next; // firstËµãÂÄº‰∏∫nextËäÇÁÇπ &#125; while (first != null); // Âæ™ÁéØÈÅçÂéÜÔºåÂ∞ÜÊù°‰ª∂ÈòüÂàóÁöÑÊâÄÊúâËäÇÁÇπÁßªÂä®Âà∞ÂêåÊ≠•ÈòüÂàó&#125; Ëá≥Ê≠§ÔºåCondition Â∞±ÂàÜÊûêÂÆå‰∫ÜÔºåÊàë‰ª¨ÂèØ‰ª•Áî® Condition ÂÜô‰∏Ä‰∏™ Áîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÁöÑdemoÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677package Â§öÁ∫øÁ®ã.Producer_Consumer;import java.util.LinkedList;import java.util.concurrent.TimeUnit;import java.util.concurrent.locks.Condition;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.ReentrantLock;public class await_signal &#123; private final static Lock lock = new ReentrantLock(); private final static Condition producer_condition = lock.newCondition(); private final static Condition consumer_condition = lock.newCondition(); private final static LinkedList&lt;Long&gt; linkedList = new LinkedList&lt;&gt;(); private final static int MAX_CAPACITY = 100; public static void main(String[] args) &#123; new Thread(() -&gt; &#123; for (int i = 0; i &lt; 10; i++) &#123; while (true) &#123; await_signal.producer(); try &#123; TimeUnit.SECONDS.sleep(5); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125;).start(); new Thread(() -&gt; &#123; for (int i = 0; i &lt; 14; i++) &#123; while (true) &#123; await_signal.consumer(); try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125;).start(); &#125; private static void producer() &#123; try &#123; lock.lock(); if (linkedList.size() &gt; MAX_CAPACITY) &#123; producer_condition.await(); &#125; &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; long value = System.currentTimeMillis(); System.out.println(Thread.currentThread().getName() + ":-------PRODUCER-------- " + value); linkedList.addLast(value); consumer_condition.signalAll(); lock.unlock(); &#125; &#125; private static void consumer() &#123; try &#123; lock.lock(); if (linkedList.size() == 0) &#123; consumer_condition.await(); &#125; &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; long value = linkedList.pop(); System.out.println(Thread.currentThread().getName() + "::-------CONSUMER-------- " + value); producer_condition.signalAll(); lock.unlock(); &#125; &#125;&#125; LockSupport &amp; UnsafeLockSupport.park() vs Object.wait() vs Thread.sleep() ‰ªéÈáäÊîæËµÑÊ∫êÁúãÔºå‰∏âËÄÖÂú®ÈòªÂ°ûÁ∫øÁ®ãÂêéÔºåLockSupport.park() ‰ºöÈòªÂ°ûÁ∫øÁ®ãÂπ∂‰∏î‰∏ç‰ºöÈáäÊîæÈîÅËµÑÊ∫êÔºåÊ≥®ÊÑèÔºåÊú¨Ë∫´ park() ÊòØ‰∏ç‰ºöÈáäÊîæËµÑÊ∫êÁöÑÔºåÊàë‰ª¨Âú®ÂêåÊ≠•ÈòüÂàó‰∏≠‰∏≠Â∞±ÊòØÁî® park() Êù•‰ΩøÂæóÁ∫øÁ®ãÊåÇËµ∑ÔºàwaitÁä∂ÊÄÅÔºâÔºåÁ≠âÂæÖËµÑÊ∫ê„ÄÇObject.wait() Ôºà‰πüÊòØwaitÁä∂ÊÄÅÔºâ‰ºöÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÔºåÂπ∂‰∏îËÆ©Âá∫Êó∂Èó¥ÁâáÂíåÈîÅËµÑÊ∫êÔºåÁ≠âÂæÖË¢´ notify ÊâçËé∑Âæó monitorÔºåÊãøÂà∞ÈîÅËµÑÊ∫ê„ÄÇThread.sleep() ‰ºöËÆ©Á∫øÁ®ãsleepÔºàsleepÁä∂ÊÄÅÔºâÔºåÂêåÊ†∑ÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÔºå‰ΩÜÊòØ‰∏ç‰ºöËÆ©Âá∫ÈîÅËµÑÊ∫êÔºõ ‰ΩøÁî®ÁöÑÂâçÊèêÊù°‰ª∂Áúã„ÄÇObject.wait() ÂøÖÈ°ªÂú® Synchronized ÈáåÁî®ÔºåLockSupport.park() ÂèØ‰ª•Âú®‰ªª‰ΩïÂú∞ÊñπÁî®ÔºåThread.sleep() ÂΩìÁÑ∂‰πüÊòØÂú∞ÊñπÈÉΩËÉΩÁî®Ôºõ ‰ªé‰∏≠Êñ≠ÂºÇÂ∏∏Áúã„ÄÇLockSupport.park() ‰∏çÈúÄË¶ÅÊçïËé∑‰∏≠Êñ≠ÂºÇÂ∏∏ÔºåÊ≥®ÊÑèÔºåÂÆÉ‰∏çÈúÄË¶ÅÊçïËé∑ÔºåÂπ∂‰∏îÂÆÉ‰ºö‰ªé‰∏≠Êñ≠‰∏≠ÈÜíÊù•ÔºåÂ∞ÜÁ∫øÁ®ãÁî± interrupted ‚Äî&gt; runningÔºåÊâÄ‰ª•Â§ñÈÉ®Ë∞ÉÁî®Êó∂ÈúÄË¶ÅË∞®ÊÖéÔºåËøôÈáåÊèêÈÜí‰∏Ä‰∏ãÔºåÂ∞§ÂÖ∂ÊòØÂú® StampedLock ‰∏≠‰ΩøÁî®ÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûú writeLock ‰∏ÄÁõ¥Âú®‰ΩøÁî®ÈîÅËµÑÊ∫êÔºåËÄåreadLockÂú®Á≠âÂæÖÈîÅËµÑÊ∫êÂêéÂºÄÂßãÊåÇËµ∑ÔºåÁ™ÅÁÑ∂Â∞ÜreadLockÁ∫øÁ®ã‰∏≠Êñ≠ÁöÑËØùÔºåÂõ†‰∏∫ StampedLock.readLock() ‰∏çÂ§ÑÁêÜ‰∏≠Êñ≠ÔºåÊâÄ‰ª•Áõ¥Êé•Â∞ÜÁ∫øÁ®ãÁî± wait ‚Äì&gt; runningÔºåÊ≠§Êó∂Á∫øÁ®ã‰ºö‰∏ÄÁõ¥Ëá™ÊóãËé∑ÂèñÈîÅÔºå‰ΩÜÊòØÁî±‰∫éÈîÅ‰∏ÄÁõ¥Ë¢´ writeLockÔºåÊ≠§Êó∂ CPUÂ∞±‰ºöÁàÜÁÇ∏„ÄÇObject.wait() Â£∞ÊòéÊäõÂá∫‰∫Ü‰∏≠Êñ≠ÂºÇÂ∏∏ÔºåË∞ÉÁî®ËÄÖÈúÄË¶ÅÊçïËé∑ÊàñËÄÖÂÜçÊäõÂá∫ÔºåThread.sleep()ÊñπÊ≥ïÂ£∞Êòé‰∏ä‰πüÊòØÊäõÂá∫‰∫ÜInterruptedException‰∏≠Êñ≠ÂºÇÂ∏∏ÔºåÊâÄ‰ª•Ë∞ÉÁî®ËÄÖÈúÄË¶ÅÊçïËé∑Ëøô‰∏™ÂºÇÂ∏∏ÊàñËÄÖÂÜçÊäõÂá∫Ôºõ Âî§ÈÜíÊñπÂºèÁúã„ÄÇLockSupport.park() ÂèØ‰ª•ÈÄöËøá LockSupport.unpark() ÊàñËÄÖ‰∏≠Êñ≠Âî§ÈÜíÔºåObject.wait() ÂàôÈúÄË¶ÅË∞ÉÁî® Âè¶‰∏Ä‰∏™Á∫øÁ®ãÊâßË°å notify() ËøõË°åÂî§ÈÜíÔºåThread.sleep() Âè™ËÉΩËá™Â∑±ÈÜíËøáÊù•Ôºõ Ë°•ÂÖÖÔºöÂ¶ÇÊûúÂú®wait()‰πãÂâçÊâßË°å‰∫Ünotify()‰ºöÊÄéÊ†∑ÔºüÊäõÂá∫IllegalMonitorStateExceptionÂºÇÂ∏∏Ôºõ Â¶ÇÊûúÂú®park()‰πãÂâçÊâßË°å‰∫Üunpark()‰ºöÊÄéÊ†∑ÔºüÁ∫øÁ®ã‰∏ç‰ºöË¢´ÈòªÂ°ûÔºåÁõ¥Êé•Ë∑≥Ëøápark()ÔºåÁªßÁª≠ÊâßË°åÂêéÁª≠ÂÜÖÂÆπ„ÄÇ ÁÆÄ‰ªãLockSupport‰∏ãÁöÑÂæàÂ§öÊñπÊ≥ïÔºå‰æãÂ¶ÇÊàë‰ª¨‰πãÂâçÂ∏∏Â∏∏ÊèêÂèäÁöÑ LockSupport.park()„ÄÅLockSupport.unpark() ÈÉΩÊòØÁî®‰∫Ü Unsafe Á±ª‰∏ãÁöÑ park() Âíå unpark() ÊñπÊ≥ï„ÄÇ 123456public static void park(Object blocker) &#123; Thread t = Thread.currentThread(); setBlocker(t, blocker); UNSAFE.park(false, 0L); setBlocker(t, null); &#125; 1234private static void setBlocker(Thread t, Object arg) &#123; // Even though volatile, hotspot doesn't need a write barrier here. UNSAFE.putObject(t, parkBlockerOffset, arg);&#125; 12345public static Object getBlocker(Thread t) &#123; if (t == null) throw new NullPointerException(); return UNSAFE.getObjectVolatile(t, parkBlockerOffset);&#125; ÂèØ‰ª•ÁúãÂà∞ÔºåÂü∫Êú¨‰∏äÊØè‰∏™ÊñπÊ≥ïÁöÑÂ∫ïÂ±ÇÈÉΩÊòØ‰ΩøÁî®‰∫Ü Unsafe Á±ªÁöÑÊñπÊ≥ïÔºåÊâÄ‰ª•Êé•‰∏ãÊù•‰∏ªË¶ÅÂàÜÊûê‰∏Ä‰∏ã Unsafe„ÄÇ UnsafeÁÆÄ‰ªã https://tech.meituan.com/2019/02/14/talk-about-java-magic-class-unsafe.html Â±û‰∫é sun.misc.Unsafe„ÄÇ ÈááÁî®È•øÊ±âÂºèÁöÑÂçï‰æãÊ®°ÂºèÔºå‰ΩÜUnsafeÁ±ªÂÅö‰∫ÜÈôêÂà∂ÔºåÂ¶ÇÊûúÊòØÊôÆÈÄöÁöÑË∞ÉÁî®ÁöÑËØùÔºåÂÆÉ‰ºöÊäõÂá∫‰∏Ä‰∏™SecurityExceptionÂºÇÂ∏∏ÔºõÂè™ÊúâÁî±‰∏ªÁ±ªÂä†ËΩΩÂô®Âä†ËΩΩÁöÑÁ±ªÊâçËÉΩË∞ÉÁî®Ëøô‰∏™ÊñπÊ≥ï„ÄÇ 1234567891011121314151617private static native void registerNatives();static &#123; registerNatives(); sun.reflect.Reflection.registerMethodsToFilter(Unsafe.class, "getUnsafe");&#125;private Unsafe() &#123;&#125;private static final Unsafe theUnsafe = new Unsafe();@CallerSensitivepublic static Unsafe getUnsafe() &#123; Class&lt;?&gt; caller = Reflection.getCallerClass(); if (!VM.isSystemDomainLoader(caller.getClassLoader())) throw new SecurityException("Unsafe"); return theUnsafe;&#125; ÂäüËÉΩ‰ªãÁªç Â¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåUnsafeÊèê‰æõÁöÑAPIÂ§ßËá¥ÂèØÂàÜ‰∏∫ÂÜÖÂ≠òÊìç‰Ωú„ÄÅCAS„ÄÅClassÁõ∏ÂÖ≥„ÄÅÂØπË±°Êìç‰Ωú„ÄÅÁ∫øÁ®ãË∞ÉÂ∫¶„ÄÅÁ≥ªÁªü‰ø°ÊÅØËé∑Âèñ„ÄÅÂÜÖÂ≠òÂ±èÈöú„ÄÅÊï∞ÁªÑÊìç‰ΩúÁ≠âÂá†Á±ªÔºå‰∏ãÈù¢Â∞ÜÂØπÂÖ∂Áõ∏ÂÖ≥ÊñπÊ≥ïÂíåÂ∫îÁî®Âú∫ÊôØËøõË°åËØ¶ÁªÜ‰ªãÁªç„ÄÇ ÂÜÖÂ≠òÊìç‰Ωú‰∏ªË¶ÅÊòØÁÆ°ÊéßÂ†ÜÂ§ñÁöÑ‰∏Ä‰∫õÂÜÖÂ≠òÊìç‰Ωú„ÄÇ 123456789101112131415161718//ÂàÜÈÖçÂÜÖÂ≠ò, Áõ∏ÂΩì‰∫éC++ÁöÑmallocÂáΩÊï∞public native long allocateMemory(long bytes);//Êâ©ÂÖÖÂÜÖÂ≠òpublic native long reallocateMemory(long address, long bytes);//ÈáäÊîæÂÜÖÂ≠òpublic native void freeMemory(long address);//Âú®ÁªôÂÆöÁöÑÂÜÖÂ≠òÂùó‰∏≠ËÆæÁΩÆÂÄºpublic native void setMemory(Object o, long offset, long bytes, byte value);//ÂÜÖÂ≠òÊã∑Ë¥ùpublic native void copyMemory(Object srcBase, long srcOffset, Object destBase, long destOffset, long bytes);//Ëé∑ÂèñÁªôÂÆöÂú∞ÂùÄÂÄºÔºåÂøΩÁï•‰øÆÈ•∞ÈôêÂÆöÁ¨¶ÁöÑËÆøÈóÆÈôêÂà∂„ÄÇ‰∏éÊ≠§Á±ª‰ººÊìç‰ΩúËøòÊúâ: getIntÔºågetDoubleÔºågetLongÔºågetCharÁ≠âpublic native Object getObject(Object o, long offset);//‰∏∫ÁªôÂÆöÂú∞ÂùÄËÆæÁΩÆÂÄºÔºåÂøΩÁï•‰øÆÈ•∞ÈôêÂÆöÁ¨¶ÁöÑËÆøÈóÆÈôêÂà∂Ôºå‰∏éÊ≠§Á±ª‰ººÊìç‰ΩúËøòÊúâ: putInt,putDoubleÔºåputLongÔºåputCharÁ≠âpublic native void putObject(Object o, long offset, Object x);//Ëé∑ÂèñÁªôÂÆöÂú∞ÂùÄÁöÑbyteÁ±ªÂûãÁöÑÂÄºÔºàÂΩì‰∏î‰ªÖÂΩìËØ•ÂÜÖÂ≠òÂú∞ÂùÄ‰∏∫allocateMemoryÂàÜÈÖçÊó∂ÔºåÊ≠§ÊñπÊ≥ïÁªìÊûú‰∏∫Á°ÆÂÆöÁöÑÔºâpublic native byte getByte(long address);//‰∏∫ÁªôÂÆöÂú∞ÂùÄËÆæÁΩÆbyteÁ±ªÂûãÁöÑÂÄºÔºàÂΩì‰∏î‰ªÖÂΩìËØ•ÂÜÖÂ≠òÂú∞ÂùÄ‰∏∫allocateMemoryÂàÜÈÖçÊó∂ÔºåÊ≠§ÊñπÊ≥ïÁªìÊûúÊâçÊòØÁ°ÆÂÆöÁöÑÔºâpublic native void putByte(long address, byte x); ÈÄöÂ∏∏ÔºåÊàë‰ª¨Âú®Java‰∏≠ÂàõÂª∫ÁöÑÂØπË±°ÈÉΩÂ§Ñ‰∫éÂ†ÜÂÜÖÂÜÖÂ≠òÔºàheapÔºâ‰∏≠ÔºåÂ†ÜÂÜÖÂÜÖÂ≠òÊòØÁî±JVMÊâÄÁÆ°ÊéßÁöÑJavaËøõÁ®ãÂÜÖÂ≠òÔºåÂπ∂‰∏îÂÆÉ‰ª¨ÈÅµÂæ™JVMÁöÑÂÜÖÂ≠òÁÆ°ÁêÜÊú∫Âà∂ÔºåJVM‰ºöÈááÁî®ÂûÉÂúæÂõûÊî∂Êú∫Âà∂Áªü‰∏ÄÁÆ°ÁêÜÂ†ÜÂÜÖÂ≠ò„ÄÇ‰∏é‰πãÁõ∏ÂØπÁöÑÊòØÂ†ÜÂ§ñÂÜÖÂ≠òÔºåÂ≠òÂú®‰∫éJVMÁÆ°Êéß‰πãÂ§ñÁöÑÂÜÖÂ≠òÂå∫ÂüüÔºåJava‰∏≠ÂØπÂ†ÜÂ§ñÂÜÖÂ≠òÁöÑÊìç‰ΩúÔºå‰æùËµñ‰∫éUnsafeÊèê‰æõÁöÑÊìç‰ΩúÂ†ÜÂ§ñÂÜÖÂ≠òÁöÑnativeÊñπÊ≥ï„ÄÇ ‰ΩøÁî®Â†ÜÂ§ñÂÜÖÂ≠òÁöÑÂéüÂõ† ÂØπÂûÉÂúæÂõûÊî∂ÂÅúÈ°øÁöÑÊîπÂñÑ„ÄÇÁî±‰∫éÂ†ÜÂ§ñÂÜÖÂ≠òÊòØÁõ¥Êé•ÂèóÊìç‰ΩúÁ≥ªÁªüÁÆ°ÁêÜËÄå‰∏çÊòØJVMÔºåÊâÄ‰ª•ÂΩìÊàë‰ª¨‰ΩøÁî®Â†ÜÂ§ñÂÜÖÂ≠òÊó∂ÔºåÂç≥ÂèØ‰øùÊåÅËæÉÂ∞èÁöÑÂ†ÜÂÜÖÂÜÖÂ≠òËßÑÊ®°„ÄÇ‰ªéËÄåÂú®GCÊó∂ÂáèÂ∞ëÂõûÊî∂ÂÅúÈ°øÂØπ‰∫éÂ∫îÁî®ÁöÑÂΩ±Âìç„ÄÇ ÊèêÂçáÁ®ãÂ∫èI/OÊìç‰ΩúÁöÑÊÄßËÉΩ„ÄÇÈÄöÂ∏∏Âú®I/OÈÄö‰ø°ËøáÁ®ã‰∏≠Ôºå‰ºöÂ≠òÂú®Â†ÜÂÜÖÂÜÖÂ≠òÂà∞Â†ÜÂ§ñÂÜÖÂ≠òÁöÑÊï∞ÊçÆÊã∑Ë¥ùÊìç‰ΩúÔºåÂØπ‰∫éÈúÄË¶ÅÈ¢ëÁπÅËøõË°åÂÜÖÂ≠òÈó¥Êï∞ÊçÆÊã∑Ë¥ù‰∏îÁîüÂëΩÂë®ÊúüËæÉÁü≠ÁöÑÊöÇÂ≠òÊï∞ÊçÆÔºåÈÉΩÂª∫ËÆÆÂ≠òÂÇ®Âà∞Â†ÜÂ§ñÂÜÖÂ≠ò„ÄÇ ÂÖ∏ÂûãÂ∫îÁî®DirectByteBufferÊòØJavaÁî®‰∫éÂÆûÁé∞Â†ÜÂ§ñÂÜÖÂ≠òÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÁ±ªÔºåÈÄöÂ∏∏Áî®Âú®ÈÄö‰ø°ËøáÁ®ã‰∏≠ÂÅöÁºìÂÜ≤Ê±†ÔºåÂ¶ÇÂú®Netty„ÄÅMINAÁ≠âNIOÊ°ÜÊû∂‰∏≠Â∫îÁî®ÂπøÊ≥õ„ÄÇDirectByteBufferÂØπ‰∫éÂ†ÜÂ§ñÂÜÖÂ≠òÁöÑÂàõÂª∫„ÄÅ‰ΩøÁî®„ÄÅÈîÄÊØÅÁ≠âÈÄªËæëÂùáÁî±UnsafeÊèê‰æõÁöÑÂ†ÜÂ§ñÂÜÖÂ≠òAPIÊù•ÂÆûÁé∞„ÄÇ ‰∏ãÂõæ‰∏∫DirectByteBufferÊûÑÈÄ†ÂáΩÊï∞ÔºåÂàõÂª∫DirectByteBufferÁöÑÊó∂ÂÄôÔºåÈÄöËøáUnsafe.allocateMemoryÂàÜÈÖçÂÜÖÂ≠ò„ÄÅUnsafe.setMemoryËøõË°åÂÜÖÂ≠òÂàùÂßãÂåñÔºåËÄåÂêéÊûÑÂª∫CleanerÂØπË±°Áî®‰∫éË∑üË∏™DirectByteBufferÂØπË±°ÁöÑÂûÉÂúæÂõûÊî∂Ôºå‰ª•ÂÆûÁé∞ÂΩìDirectByteBufferË¢´ÂûÉÂúæÂõûÊî∂Êó∂ÔºåÂàÜÈÖçÁöÑÂ†ÜÂ§ñÂÜÖÂ≠ò‰∏ÄËµ∑Ë¢´ÈáäÊîæ„ÄÇ ÈÇ£‰πàÂ¶Ç‰ΩïÈÄöËøáÊûÑÂª∫ÂûÉÂúæÂõûÊî∂ËøΩË∏™ÂØπË±°CleanerÂÆûÁé∞Â†ÜÂ§ñÂÜÖÂ≠òÈáäÊîæÂë¢Ôºü CleanerÁªßÊâøËá™JavaÂõõÂ§ßÂºïÁî®Á±ªÂûã‰πã‰∏ÄÁöÑËôöÂºïÁî®PhantomReferenceÔºà‰ºóÊâÄÂë®Áü•ÔºåÊó†Ê≥ïÈÄöËøáËôöÂºïÁî®Ëé∑Âèñ‰∏é‰πãÂÖ≥ËÅîÁöÑÂØπË±°ÂÆû‰æãÔºå‰∏îÂΩìÂØπË±°‰ªÖË¢´ËôöÂºïÁî®ÂºïÁî®Êó∂ÔºåÂú®‰ªª‰ΩïÂèëÁîüGCÁöÑÊó∂ÂÄôÔºåÂÖ∂ÂùáÂèØË¢´ÂõûÊî∂ÔºâÔºåÈÄöÂ∏∏PhantomReference‰∏éÂºïÁî®ÈòüÂàóReferenceQueueÁªìÂêà‰ΩøÁî®ÔºåÂèØ‰ª•ÂÆûÁé∞ËôöÂºïÁî®ÂÖ≥ËÅîÂØπË±°Ë¢´ÂûÉÂúæÂõûÊî∂Êó∂ËÉΩÂ§üËøõË°åÁ≥ªÁªüÈÄöÁü•„ÄÅËµÑÊ∫êÊ∏ÖÁêÜÁ≠âÂäüËÉΩ„ÄÇÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÔºåÂΩìÊüê‰∏™Ë¢´CleanerÂºïÁî®ÁöÑÂØπË±°Â∞ÜË¢´ÂõûÊî∂Êó∂ÔºåJVMÂûÉÂúæÊî∂ÈõÜÂô®‰ºöÂ∞ÜÊ≠§ÂØπË±°ÁöÑÂºïÁî®ÊîæÂÖ•Âà∞ÂØπË±°ÂºïÁî®‰∏≠ÁöÑpendingÈìæË°®‰∏≠ÔºåÁ≠âÂæÖReference-HandlerËøõË°åÁõ∏ÂÖ≥Â§ÑÁêÜ„ÄÇÂÖ∂‰∏≠ÔºåReference-Handler‰∏∫‰∏Ä‰∏™Êã•ÊúâÊúÄÈ´ò‰ºòÂÖàÁ∫ßÁöÑÂÆàÊä§Á∫øÁ®ãÔºå‰ºöÂæ™ÁéØ‰∏çÊñ≠ÁöÑÂ§ÑÁêÜpendingÈìæË°®‰∏≠ÁöÑÂØπË±°ÂºïÁî®ÔºåÊâßË°åCleanerÁöÑcleanÊñπÊ≥ïËøõË°åÁõ∏ÂÖ≥Ê∏ÖÁêÜÂ∑•‰Ωú„ÄÇ Tip: ËøôÂùóÂü∫Êú¨‰∏çÊáÇÂïä‚Ä¶‚Ä¶Á≠âÂ§ç‰π†ÂÆåÂ§öÁ∫øÁ®ãÂæóÊÅ∂Ë°•‰∏Ä‰∏ã JVM ÁöÑÁõ∏ÂÖ≥Áü•ËØÜ‰∫Ü‚Ä¶ CAS Áõ∏ÂÖ≥12345678910111213/** * CAS * @param o ÂåÖÂê´Ë¶Å‰øÆÊîπfieldÁöÑÂØπË±° * @param offset ÂØπË±°‰∏≠ÊüêfieldÁöÑÂÅèÁßªÈáè * @param expected ÊúüÊúõÂÄº * @param update Êõ¥Êñ∞ÂÄº * @return true | false */public final native boolean compareAndSwapObject(Object o, long offset, Object expected, Object update);public final native boolean compareAndSwapInt(Object o, long offset, int expected,int update); public final native boolean compareAndSwapLong(Object o, long offset, long expected, long update); ‰ªÄ‰πàÊòØCAS? Âç≥ÊØîËæÉÂπ∂ÊõøÊç¢ÔºåÂÆûÁé∞Âπ∂ÂèëÁÆóÊ≥ïÊó∂Â∏∏Áî®Âà∞ÁöÑ‰∏ÄÁßçÊäÄÊúØ„ÄÇCASÊìç‰ΩúÂåÖÂê´‰∏â‰∏™Êìç‰ΩúÊï∞‚Äî‚ÄîÂÜÖÂ≠ò‰ΩçÁΩÆ„ÄÅÈ¢ÑÊúüÂéüÂÄºÂèäÊñ∞ÂÄº„ÄÇÊâßË°åCASÊìç‰ΩúÁöÑÊó∂ÂÄôÔºåÂ∞ÜÂÜÖÂ≠ò‰ΩçÁΩÆÁöÑÂÄº‰∏éÈ¢ÑÊúüÂéüÂÄºÊØîËæÉÔºåÂ¶ÇÊûúÁõ∏ÂåπÈÖçÔºåÈÇ£‰πàÂ§ÑÁêÜÂô®‰ºöËá™Âä®Â∞ÜËØ•‰ΩçÁΩÆÂÄºÊõ¥Êñ∞‰∏∫Êñ∞ÂÄºÔºåÂê¶ÂàôÔºåÂ§ÑÁêÜÂô®‰∏çÂÅö‰ªª‰ΩïÊìç‰Ωú„ÄÇÊàë‰ª¨ÈÉΩÁü•ÈÅìÔºåCASÊòØ‰∏ÄÊù°CPUÁöÑÂéüÂ≠êÊåá‰ª§ÔºàcmpxchgÊåá‰ª§ÔºâÔºå‰∏ç‰ºöÈÄ†ÊàêÊâÄË∞ìÁöÑÊï∞ÊçÆ‰∏ç‰∏ÄËá¥ÈóÆÈ¢òÔºåUnsafeÊèê‰æõÁöÑCASÊñπÊ≥ïÔºàÂ¶ÇcompareAndSwapXXXÔºâÂ∫ïÂ±ÇÂÆûÁé∞Âç≥‰∏∫CPUÊåá‰ª§cmpxchg„ÄÇ Á∫øÁ®ãË∞ÉÂ∫¶1234567891011121314//ÂèñÊ∂àÈòªÂ°ûÁ∫øÁ®ãpublic native void unpark(Object thread);//ÈòªÂ°ûÁ∫øÁ®ãpublic native void park(boolean isAbsolute, long time);//Ëé∑ÂæóÂØπË±°ÈîÅÔºàÂèØÈáçÂÖ•ÈîÅÔºâ@Deprecatedpublic native void monitorEnter(Object o);//ÈáäÊîæÂØπË±°ÈîÅ@Deprecatedpublic native void monitorExit(Object o);//Â∞ùËØïËé∑ÂèñÂØπË±°ÈîÅ@Deprecatedpublic native boolean tryMonitorEnter(Object o); Â¶Ç‰∏äÊ∫êÁ†ÅËØ¥Êòé‰∏≠ÔºåÊñπÊ≥ïpark„ÄÅunparkÂç≥ÂèØÂÆûÁé∞Á∫øÁ®ãÁöÑÊåÇËµ∑‰∏éÊÅ¢Â§çÔºåÂ∞Ü‰∏Ä‰∏™Á∫øÁ®ãËøõË°åÊåÇËµ∑ÊòØÈÄöËøáparkÊñπÊ≥ïÂÆûÁé∞ÁöÑÔºåË∞ÉÁî®parkÊñπÊ≥ïÂêéÔºåÁ∫øÁ®ãÂ∞Ü‰∏ÄÁõ¥ÈòªÂ°ûÁõ¥Âà∞Ë∂ÖÊó∂ÊàñËÄÖ‰∏≠Êñ≠Á≠âÊù°‰ª∂Âá∫Áé∞ÔºõunparkÂèØ‰ª•ÁªàÊ≠¢‰∏Ä‰∏™ÊåÇËµ∑ÁöÑÁ∫øÁ®ãÔºå‰ΩøÂÖ∂ÊÅ¢Â§çÊ≠£Â∏∏„ÄÇ JavaÈîÅÂíåÂêåÊ≠•Âô®Ê°ÜÊû∂ÁöÑÊ†∏ÂøÉÁ±ªAbstractQueuedSynchronizerÔºåÂ∞±ÊòØÈÄöËøáË∞ÉÁî®LockSupport.park()ÂíåLockSupport.unpark()ÂÆûÁé∞Á∫øÁ®ãÁöÑÈòªÂ°ûÂíåÂî§ÈÜíÁöÑÔºåËÄåLockSupportÁöÑpark„ÄÅunparkÊñπÊ≥ïÂÆûÈôÖÊòØË∞ÉÁî®UnsafeÁöÑpark„ÄÅunparkÊñπÂºèÊù•ÂÆûÁé∞„ÄÇ ClassÁõ∏ÂÖ≥Ê≠§ÈÉ®ÂàÜ‰∏ªË¶ÅÊèê‰æõClassÂíåÂÆÉÁöÑÈùôÊÄÅÂ≠óÊÆµÁöÑÊìç‰ΩúÁõ∏ÂÖ≥ÊñπÊ≥ïÔºåÂåÖÂê´ÈùôÊÄÅÂ≠óÊÆµÂÜÖÂ≠òÂÆö‰Ωç„ÄÅÂÆö‰πâÁ±ª„ÄÅÂÆö‰πâÂåøÂêçÁ±ª„ÄÅÊ£ÄÈ™å&amp;Á°Æ‰øùÂàùÂßãÂåñÁ≠â„ÄÇ 123456789101112//Ëé∑ÂèñÁªôÂÆöÈùôÊÄÅÂ≠óÊÆµÁöÑÂÜÖÂ≠òÂú∞ÂùÄÂÅèÁßªÈáèÔºåËøô‰∏™ÂÄºÂØπ‰∫éÁªôÂÆöÁöÑÂ≠óÊÆµÊòØÂîØ‰∏Ä‰∏îÂõ∫ÂÆö‰∏çÂèòÁöÑpublic native long staticFieldOffset(Field f);//Ëé∑Âèñ‰∏Ä‰∏™ÈùôÊÄÅÁ±ª‰∏≠ÁªôÂÆöÂ≠óÊÆµÁöÑÂØπË±°ÊåáÈíàpublic native Object staticFieldBase(Field f);//Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÂàùÂßãÂåñ‰∏Ä‰∏™Á±ªÔºåÈÄöÂ∏∏Âú®Ëé∑Âèñ‰∏Ä‰∏™Á±ªÁöÑÈùôÊÄÅÂ±ûÊÄßÁöÑÊó∂ÂÄôÔºàÂõ†‰∏∫‰∏Ä‰∏™Á±ªÂ¶ÇÊûúÊ≤°ÂàùÂßãÂåñÔºåÂÆÉÁöÑÈùôÊÄÅÂ±ûÊÄß‰πü‰∏ç‰ºöÂàùÂßãÂåñÔºâ‰ΩøÁî®„ÄÇ ÂΩì‰∏î‰ªÖÂΩìensureClassInitializedÊñπÊ≥ï‰∏çÁîüÊïàÊó∂ËøîÂõûfalse„ÄÇpublic native boolean shouldBeInitialized(Class&lt;?&gt; c);//Ê£ÄÊµãÁªôÂÆöÁöÑÁ±ªÊòØÂê¶Â∑≤ÁªèÂàùÂßãÂåñ„ÄÇÈÄöÂ∏∏Âú®Ëé∑Âèñ‰∏Ä‰∏™Á±ªÁöÑÈùôÊÄÅÂ±ûÊÄßÁöÑÊó∂ÂÄôÔºàÂõ†‰∏∫‰∏Ä‰∏™Á±ªÂ¶ÇÊûúÊ≤°ÂàùÂßãÂåñÔºåÂÆÉÁöÑÈùôÊÄÅÂ±ûÊÄß‰πü‰∏ç‰ºöÂàùÂßãÂåñÔºâ‰ΩøÁî®„ÄÇpublic native void ensureClassInitialized(Class&lt;?&gt; c);//ÂÆö‰πâ‰∏Ä‰∏™Á±ªÔºåÊ≠§ÊñπÊ≥ï‰ºöË∑≥ËøáJVMÁöÑÊâÄÊúâÂÆâÂÖ®Ê£ÄÊü•ÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåClassLoaderÔºàÁ±ªÂä†ËΩΩÂô®ÔºâÂíåProtectionDomainÔºà‰øùÊä§ÂüüÔºâÂÆû‰æãÊù•Ê∫ê‰∫éË∞ÉÁî®ËÄÖpublic native Class&lt;?&gt; defineClass(String name, byte[] b, int off, int len, ClassLoader loader, ProtectionDomain protectionDomain);//ÂÆö‰πâ‰∏Ä‰∏™ÂåøÂêçÁ±ªpublic native Class&lt;?&gt; defineAnonymousClass(Class&lt;?&gt; hostClass, byte[] data, Object[] cpPatches); ÂØπË±°Êìç‰ΩúÊ≠§ÈÉ®ÂàÜ‰∏ªË¶ÅÂåÖÂê´ÂØπË±°ÊàêÂëòÂ±ûÊÄßÁõ∏ÂÖ≥Êìç‰ΩúÂèäÈùûÂ∏∏ËßÑÁöÑÂØπË±°ÂÆû‰æãÂåñÊñπÂºèÁ≠âÁõ∏ÂÖ≥ÊñπÊ≥ï„ÄÇ 1234567891011121314//ËøîÂõûÂØπË±°ÊàêÂëòÂ±ûÊÄßÂú®ÂÜÖÂ≠òÂú∞ÂùÄÁõ∏ÂØπ‰∫éÊ≠§ÂØπË±°ÁöÑÂÜÖÂ≠òÂú∞ÂùÄÁöÑÂÅèÁßªÈáèpublic native long objectFieldOffset(Field f);//Ëé∑ÂæóÁªôÂÆöÂØπË±°ÁöÑÊåáÂÆöÂú∞ÂùÄÂÅèÁßªÈáèÁöÑÂÄºÔºå‰∏éÊ≠§Á±ª‰ººÊìç‰ΩúËøòÊúâÔºögetIntÔºågetDoubleÔºågetLongÔºågetCharÁ≠âpublic native Object getObject(Object o, long offset);//ÁªôÂÆöÂØπË±°ÁöÑÊåáÂÆöÂú∞ÂùÄÂÅèÁßªÈáèËÆæÂÄºÔºå‰∏éÊ≠§Á±ª‰ººÊìç‰ΩúËøòÊúâÔºöputIntÔºåputDoubleÔºåputLongÔºåputCharÁ≠âpublic native void putObject(Object o, long offset, Object x);//‰ªéÂØπË±°ÁöÑÊåáÂÆöÂÅèÁßªÈáèÂ§ÑËé∑ÂèñÂèòÈáèÁöÑÂºïÁî®Ôºå‰ΩøÁî®volatileÁöÑÂä†ËΩΩËØ≠‰πâpublic native Object getObjectVolatile(Object o, long offset);//Â≠òÂÇ®ÂèòÈáèÁöÑÂºïÁî®Âà∞ÂØπË±°ÁöÑÊåáÂÆöÁöÑÂÅèÁßªÈáèÂ§ÑÔºå‰ΩøÁî®volatileÁöÑÂ≠òÂÇ®ËØ≠‰πâpublic native void putObjectVolatile(Object o, long offset, Object x);//ÊúâÂ∫è„ÄÅÂª∂ËøüÁâàÊú¨ÁöÑputObjectVolatileÊñπÊ≥ïÔºå‰∏ç‰øùËØÅÂÄºÁöÑÊîπÂèòË¢´ÂÖ∂‰ªñÁ∫øÁ®ãÁ´ãÂç≥ÁúãÂà∞„ÄÇÂè™ÊúâÂú®fieldË¢´volatile‰øÆÈ•∞Á¨¶‰øÆÈ•∞Êó∂ÊúâÊïàpublic native void putOrderedObject(Object o, long offset, Object x);//ÁªïËøáÊûÑÈÄ†ÊñπÊ≥ï„ÄÅÂàùÂßãÂåñ‰ª£Á†ÅÊù•ÂàõÂª∫ÂØπË±°public native Object allocateInstance(Class&lt;?&gt; cls) throws InstantiationException; Â∏∏ËßÑÂØπË±°ÂÆû‰æãÂåñÊñπÂºèÔºöÊàë‰ª¨ÈÄöÂ∏∏ÊâÄÁî®Âà∞ÁöÑÂàõÂª∫ÂØπË±°ÁöÑÊñπÂºèÔºå‰ªéÊú¨Ë¥®‰∏äÊù•ËÆ≤ÔºåÈÉΩÊòØÈÄöËøánewÊú∫Âà∂Êù•ÂÆûÁé∞ÂØπË±°ÁöÑÂàõÂª∫„ÄÇ‰ΩÜÊòØÔºånewÊú∫Âà∂Êúâ‰∏™ÁâπÁÇπÂ∞±ÊòØÂΩìÁ±ªÂè™Êèê‰æõÊúâÂèÇÁöÑÊûÑÈÄ†ÂáΩÊï∞‰∏îÊó†ÊòæÁ§∫Â£∞ÊòéÊó†ÂèÇÊûÑÈÄ†ÂáΩÊï∞Êó∂ÔºåÂàôÂøÖÈ°ª‰ΩøÁî®ÊúâÂèÇÊûÑÈÄ†ÂáΩÊï∞ËøõË°åÂØπË±°ÊûÑÈÄ†ÔºåËÄå‰ΩøÁî®ÊúâÂèÇÊûÑÈÄ†ÂáΩÊï∞Êó∂ÔºåÂøÖÈ°ª‰º†ÈÄíÁõ∏Â∫î‰∏™Êï∞ÁöÑÂèÇÊï∞ÊâçËÉΩÂÆåÊàêÂØπË±°ÂÆû‰æãÂåñ„ÄÇ ÈùûÂ∏∏ËßÑÁöÑÂÆû‰æãÂåñÊñπÂºèÔºöËÄåUnsafe‰∏≠Êèê‰æõallocateInstanceÊñπÊ≥ïÔºå‰ªÖÈÄöËøáClassÂØπË±°Â∞±ÂèØ‰ª•ÂàõÂª∫Ê≠§Á±ªÁöÑÂÆû‰æãÂØπË±°ÔºåËÄå‰∏î‰∏çÈúÄË¶ÅË∞ÉÁî®ÂÖ∂ÊûÑÈÄ†ÂáΩÊï∞„ÄÅÂàùÂßãÂåñ‰ª£Á†Å„ÄÅJVMÂÆâÂÖ®Ê£ÄÊü•Á≠â„ÄÇÂÆÉÊäëÂà∂‰øÆÈ•∞Á¨¶Ê£ÄÊµãÔºå‰πüÂ∞±ÊòØÂç≥‰ΩøÊûÑÈÄ†Âô®ÊòØprivate‰øÆÈ•∞ÁöÑ‰πüËÉΩÈÄöËøáÊ≠§ÊñπÊ≥ïÂÆû‰æãÂåñÔºåÂè™ÈúÄÊèêÁ±ªÂØπË±°Âç≥ÂèØÂàõÂª∫Áõ∏Â∫îÁöÑÂØπË±°„ÄÇÁî±‰∫éËøôÁßçÁâπÊÄßÔºåallocateInstanceÂú®java.lang.invoke„ÄÅObjenesisÔºàÊèê‰æõÁªïËøáÁ±ªÊûÑÈÄ†Âô®ÁöÑÂØπË±°ÁîüÊàêÊñπÂºèÔºâ„ÄÅGsonÔºàÂèçÂ∫èÂàóÂåñÊó∂Áî®Âà∞Ôºâ‰∏≠ÈÉΩÊúâÁõ∏Â∫îÁöÑÂ∫îÁî®„ÄÇ Êï∞ÁªÑÁõ∏ÂÖ≥ËøôÈÉ®ÂàÜ‰∏ªË¶Å‰ªãÁªç‰∏éÊï∞ÊçÆÊìç‰ΩúÁõ∏ÂÖ≥ÁöÑarrayBaseOffset‰∏éarrayIndexScaleËøô‰∏§‰∏™ÊñπÊ≥ïÔºå‰∏§ËÄÖÈÖçÂêàËµ∑Êù•‰ΩøÁî®ÔºåÂç≥ÂèØÂÆö‰ΩçÊï∞ÁªÑ‰∏≠ÊØè‰∏™ÂÖÉÁ¥†Âú®ÂÜÖÂ≠ò‰∏≠ÁöÑ‰ΩçÁΩÆ„ÄÇ 1234//ËøîÂõûÊï∞ÁªÑ‰∏≠Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÂÅèÁßªÂú∞ÂùÄpublic native int arrayBaseOffset(Class&lt;?&gt; arrayClass);//ËøîÂõûÊï∞ÁªÑ‰∏≠‰∏Ä‰∏™ÂÖÉÁ¥†Âç†Áî®ÁöÑÂ§ßÂ∞èpublic native int arrayIndexScale(Class&lt;?&gt; arrayClass); Ëøô‰∏§‰∏™‰∏éÊï∞ÊçÆÊìç‰ΩúÁõ∏ÂÖ≥ÁöÑÊñπÊ≥ïÔºåÂú®java.util.concurrent.atomic ÂåÖ‰∏ãÁöÑAtomicIntegerArrayÔºàÂèØ‰ª•ÂÆûÁé∞ÂØπIntegerÊï∞ÁªÑ‰∏≠ÊØè‰∏™ÂÖÉÁ¥†ÁöÑÂéüÂ≠êÊÄßÊìç‰ΩúÔºâ‰∏≠ÊúâÂÖ∏ÂûãÁöÑÂ∫îÁî®ÔºåÂ¶Ç‰∏ãÂõæAtomicIntegerArrayÊ∫êÁ†ÅÊâÄÁ§∫ÔºåÈÄöËøáUnsafeÁöÑarrayBaseOffset„ÄÅarrayIndexScaleÂàÜÂà´Ëé∑ÂèñÊï∞ÁªÑÈ¶ñÂÖÉÁ¥†ÁöÑÂÅèÁßªÂú∞ÂùÄbaseÂèäÂçï‰∏™ÂÖÉÁ¥†Â§ßÂ∞èÂõ†Â≠êscale„ÄÇ ÂÜÖÂ≠òÂ±èÈöúÂú®Java 8‰∏≠ÂºïÂÖ•ÔºåÁî®‰∫éÂÆö‰πâÂÜÖÂ≠òÂ±èÈöúÔºà‰πüÁß∞ÂÜÖÂ≠òÊ†ÖÊ†èÔºåÂÜÖÂ≠òÊ†ÖÈöúÔºåÂ±èÈöúÊåá‰ª§Á≠âÔºåÊòØ‰∏ÄÁ±ªÂêåÊ≠•Â±èÈöúÊåá‰ª§ÔºåÊòØCPUÊàñÁºñËØëÂô®Âú®ÂØπÂÜÖÂ≠òÈöèÊú∫ËÆøÈóÆÁöÑÊìç‰Ωú‰∏≠ÁöÑ‰∏Ä‰∏™ÂêåÊ≠•ÁÇπÔºå‰ΩøÂæóÊ≠§ÁÇπ‰πãÂâçÁöÑÊâÄÊúâËØªÂÜôÊìç‰ΩúÈÉΩÊâßË°åÂêéÊâçÂèØ‰ª•ÂºÄÂßãÊâßË°åÊ≠§ÁÇπ‰πãÂêéÁöÑÊìç‰ΩúÔºâÔºåÈÅøÂÖç‰ª£Á†ÅÈáçÊéíÂ∫è„ÄÇ Âú®Java 8‰∏≠ÂºïÂÖ•‰∫Ü‰∏ÄÁßçÈîÅÁöÑÊñ∞Êú∫Âà∂‚Äî‚ÄîStampedLockÔºåÂÆÉÂèØ‰ª•ÁúãÊàêÊòØËØªÂÜôÈîÅÁöÑ‰∏Ä‰∏™ÊîπËøõÁâàÊú¨„ÄÇStampedLockÊèê‰æõ‰∫Ü‰∏ÄÁßç‰πêËßÇËØªÈîÅÁöÑÂÆûÁé∞ÔºåËøôÁßç‰πêËßÇËØªÈîÅÁ±ª‰ºº‰∫éÊó†ÈîÅÁöÑÊìç‰ΩúÔºåÂÆåÂÖ®‰∏ç‰ºöÈòªÂ°ûÂÜôÁ∫øÁ®ãËé∑ÂèñÂÜôÈîÅÔºå‰ªéËÄåÁºìËß£ËØªÂ§öÂÜôÂ∞ëÊó∂ÂÜôÁ∫øÁ®ã‚ÄúÈ••È•ø‚ÄùÁé∞Ë±°„ÄÇÁî±‰∫éStampedLockÊèê‰æõÁöÑ‰πêËßÇËØªÈîÅ‰∏çÈòªÂ°ûÂÜôÁ∫øÁ®ãËé∑ÂèñËØªÈîÅÔºåÂΩìÁ∫øÁ®ãÂÖ±‰∫´ÂèòÈáè‰ªé‰∏ªÂÜÖÂ≠òloadÂà∞Á∫øÁ®ãÂ∑•‰ΩúÂÜÖÂ≠òÊó∂Ôºå‰ºöÂ≠òÂú®Êï∞ÊçÆ‰∏ç‰∏ÄËá¥ÈóÆÈ¢òÔºåÊâÄ‰ª•ÂΩì‰ΩøÁî®StampedLockÁöÑ‰πêËßÇËØªÈîÅÊó∂ÔºåÈúÄË¶ÅÈÅµ‰ªéÂ¶Ç‰∏ãÂõæÁî®‰æã‰∏≠‰ΩøÁî®ÁöÑÊ®°ÂºèÊù•Á°Æ‰øùÊï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄß„ÄÇ Á≥ªÁªüÁõ∏ÂÖ≥ËøôÈÉ®ÂàÜÂåÖÂê´‰∏§‰∏™Ëé∑ÂèñÁ≥ªÁªüÁõ∏ÂÖ≥‰ø°ÊÅØÁöÑÊñπÊ≥ï„ÄÇ 1234//ËøîÂõûÁ≥ªÁªüÊåáÈíàÁöÑÂ§ßÂ∞è„ÄÇËøîÂõûÂÄº‰∏∫4Ôºà32‰ΩçÁ≥ªÁªüÔºâÊàñ 8Ôºà64‰ΩçÁ≥ªÁªüÔºâ„ÄÇpublic native int addressSize(); //ÂÜÖÂ≠òÈ°µÁöÑÂ§ßÂ∞èÔºåÊ≠§ÂÄº‰∏∫2ÁöÑÂπÇÊ¨°Êñπ„ÄÇpublic native int pageSize(); ÂêÑÁßçÈîÅÂ§ç‰π† ÂêÑÁßçÈîÅÁöÑÂØπÊØî ÂÅèÂêëÈîÅ„ÄÅËΩªÈáèÁ∫ßÈîÅ„ÄÅËá™ÊóãÈîÅ„ÄÅÈáçÈáèÁ∫ßÈîÅ Âπ∂ÂèëÁºñÁ®ã‰πãÈîÅ‰ºòÂåñ]]></content>
      <categories>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Synchronized</tag>
        <tag>Volatile</tag>
        <tag>ÈîÅ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÁÆóÊ≥ïÈ¢òÊÄªÁªì]]></title>
    <url>%2F2020%2F01%2F26%2F%E9%83%A8%E5%88%86%E5%81%9A%E9%A2%98%E6%80%BB%E7%BB%93.html</url>
    <content type="text"><![CDATA[Âú®Á∫ø oj ËæìÂÖ• 12345678910import java.util.Scanner; public class Main&#123; public static void main(String[] args)&#123; Scanner in = new Scanner(System.in); String s =in.nextLine(); String[] str = s.spilt(" "); for(String data : str) System.out.println(data); &#125;&#125; Êõ¥ÂÖ∑‰Ωì‰∏ÄÁÇπÁöÑÔºöhttps://blog.csdn.net/da_kao_la/article/details/80225003?utm_source=blogxgwz2 Êï∞ÁªÑÈÉΩÊòØarr.lengthÔºåÂ≠óÁ¨¶‰∏≤ÊòØstr.length()ÔºåÂàóË°®ÊòØlist.size() Â≠óÁ¨¶‰∏≤ ‚Äî‚Äî&gt; Êï∞ÁªÑÔºåÂèØ‰ª•Êúâ str.toCharArray()ÔºåÁÑ∂ÂêéÊï∞ÁªÑ ‚Äî‚Äì&gt; Â≠óÁ¨¶‰∏≤ ÊòØ new String(arr)ÔºåÊ≥®ÊÑèÂ¶ÇÊûúÊÉ≥Ë¶ÅÁõ¥Êé•ÊâìÂç∞Êï∞ÁªÑÂÜÖÂÆπÂàôÊòØ Arrays.toString(arr)ÔºåÊâìÂç∞Â§öÁª¥Êï∞ÁªÑÊòØ Arrays.deeptoString() String ‰∏çËÉΩÁõ¥Êé•ÂèòÂåñÔºå‰ΩÜÊòØÂèØ‰ª•Áî®StringBuilder 123StringBuilder sb = new StringBuilder(str);sb.replace(1,2,"aa");return sb.toString(); ‰∏çÁÆ°ÊòØÊï∞ÁªÑËΩ¨Êç¢ÊàêÈõÜÂêàÔºåËøòÊòØÈõÜÂêàËΩ¨Êç¢ÊàêÊï∞ÁªÑÔºåÈÉΩË¶ÅÊ≥®ÊÑèËΩ¨Êç¢Á±ªÂûãÁöÑ‰∏ÄËá¥ÊÄßÔºåString[]Êï∞ÁªÑËΩ¨StringÁ±ªÂûãÁöÑÈõÜÂêàÔºåÂΩìÈúÄË¶Å‰ΩøÁî®intÔºådoubleÁ≠âÈõÜÂêàÁöÑÊó∂ÂÄôÔºåÈúÄË¶Å‰ΩøÁî®ÂØπÂ∫îÁöÑÂØπË±° Â¶ÇÔºöÊï∞ÁªÑint[]Áî®Integer[]Ôºådouble[]Áî®Double[] ,Âõ†‰∏∫ListÈõÜÂêàÊòØÂØπË±°ÁöÑÈõÜÂêàÔºåËÄåint„ÄÅdoubleÁ≠â‰∏çÊòØÂØπË±°ÔºåÊâÄ‰ª•ÈúÄË¶ÅÁî®Â≠óÊÆµÁöÑÂØπÂ∫îÂØπË±°Á±ª Êï∞ÁªÑÁõ¥Êé•ËΩ¨ÊàêÂàóË°® 1234// Ê≥®ÊÑèËøôÈáåÂøÖÈ°ªÊòØ IntegerÂØπË±°ÁöÑÊï∞ÁªÑÔºåÂê¶ÂàôËΩ¨‰∏ç‰∫ÜInteger[] nums = &#123;1,2,3&#125;;ArrayList arr= new ArrayList&lt;&gt;(nums.length);Collections.addAll(arr,nums); 12// Â•ΩÂÉè‰πüÂèØ‰ª•Ôºå‰ΩÜÊòØË∑ü‰∏äÈù¢‰∏ÄÊ†∑ÔºåÂæóÊòØ String„ÄÅIntegerÁ±ªÂûãÁöÑÊï∞ÁªÑArrays.asList(arr); Â¶ÇÊûúÊòØintÔºåÈúÄË¶ÅË£ÖÁÆ±ÂÜçËΩ¨ÊâçÂèØ‰ª• 123int[] a = &#123;1,2,3,4&#125;;List arr = Arrays.stream(a).boxed().collect(Collectors.toList());System.out.println(arr); ÂàóË°®ËΩ¨Êï∞ÁªÑ ÈááÁî®ÈõÜÂêàÁöÑtoArray()ÊñπÊ≥ïÁõ¥Êé•ÊääListÈõÜÂêàËΩ¨Êç¢ÊàêÊï∞ÁªÑÔºåËøôÈáåÈúÄË¶ÅÊ≥®ÊÑèÔºå‰∏çËÉΩËøôÊ†∑ÂÜôÔºö 1String[] array = (String[]) mlist.toArray(); ËøôÊ†∑ÂÜôÁöÑËØùÔºåÁºñËØëËøêË°åÊó∂‰ºöÊä•Á±ªÂûãÊó†Ê≥ïËΩ¨Êç¢java.lang.ClassCastExceptionÁöÑÈîôËØØÔºåËøôÊòØ‰∏∫‰ΩïÂë¢ÔºåËøôÊ†∑ÂÜôÁúãËµ∑Êù•Ê≤°ÊúâÈóÆÈ¢òÂïä Âõ†‰∏∫java‰∏≠ÁöÑÂº∫Âà∂Á±ªÂûãËΩ¨Êç¢ÊòØÈíàÂØπÂçï‰∏™ÂØπË±°ÊâçÊúâÊïàÊûúÁöÑÔºåËÄåListÊòØÂ§öÂØπË±°ÁöÑÈõÜÂêàÔºåÊâÄ‰ª•Â∞ÜÊï¥‰∏™ListÂº∫Âà∂ËΩ¨Êç¢ÊòØ‰∏çË°åÁöÑ „ÄÇÊ≠£Á°ÆÁöÑÂÜôÊ≥ïÂ∫îËØ•ÊòØËøôÊ†∑ÁöÑÔºö 1String[] array = mlist.toArray(new String[0]); 12345List&lt;int[]&gt; res = new ArrayList();res.add(new int[]&#123;1,2&#125;);res.add(new int[]&#123;3,4&#125;);System.out.println(res);int[][] a = res.toArray(new int[0][]); 123456List&lt;Integer&gt; res = new ArrayList();res.add(1);res.add(2);System.out.println(res);Integer[] a = res.toArray(new Integer[0]);System.out.println(Arrays.toString(a)); ÂìàÂ∏åË°®‰∏≠ÁªüËÆ°Êï∞Âá∫Áé∞ÁöÑÊ¨°Êï∞ 123456789class Solution &#123; public void majorityElement(int[] nums) &#123; Map&lt;Integer, Integer&gt; numCount = new HashMap&lt;&gt;(); for (int num : nums) &#123; int count = numCount.getOrDefault(num, 0) + 1; numCount.put(num, count); &#125; &#125;&#125; ÂØπÂìàÂ∏åmap‰∏≠ÁöÑ value ÂÄºÂçáÂ∫èÊéíÂàó 123456789List&lt;Map.Entry&lt;Integer, Integer&gt;&gt; list = new ArrayList&lt;Map.Entry&lt;Integer, Integer&gt;&gt;(hashMap.entrySet());Collections.sort(list, (o1, o2) -&gt; &#123; int compare = (o1.getValue()).compareTo(o2.getValue()); return compare;&#125;);Map&lt;Integer, Integer&gt; returnMap = new LinkedHashMap&lt;Integer, Integer&gt;();for (Map.Entry&lt;Integer, Integer&gt; entry : list) &#123; returnMap.put(entry.getKey(), entry.getValue());&#125; Êï∞Â≠óËΩ¨Â≠óÁ¨¶ÔºåÂ≠óÁ¨¶ËΩ¨Êï∞Â≠ó 12345678910// Êï∞Â≠óËΩ¨Â≠óÁ¨¶ ÊñπÂºè‰∏ÄString str = "1230";int d = Integer.parseInt(str); //ÈùôÊÄÅÂáΩÊï∞Áõ¥Êé•ÈÄöËøáÁ±ªÂêçË∞ÉÁî®// Êï∞Â≠óËΩ¨Â≠óÁ¨¶ ÊñπÂºè‰∫åint d3 = Integer.valueOf("1230");System.out.println("digit3: " + d3);// Â≠óÁ¨¶ËΩ¨Êï∞Â≠óString s = String.valueOf(d);]]></content>
  </entry>
  <entry>
    <title><![CDATA[Á∫¢ÈªëÊ†ë]]></title>
    <url>%2F2020%2F01%2F16%2F%E7%BA%A2%E9%BB%91%E6%A0%91.html</url>
    <content type="text"><![CDATA[Á∫¢ÈªëÊ†ëÁâπÁÇπ ÊØè‰∏™ËäÇÁÇπÊàñËÄÖÊòØÁ∫¢Ëâ≤ÁöÑÔºåÊàñËÄÖÊòØÈªëËâ≤ÁöÑÔºõ Ê†πËäÇÁÇπÊòØÈªëËâ≤ÁöÑÔºõ ÊØè‰∏™Âè∂Â≠êÁªìÁÇπÔºàÊúÄÂêéÁöÑÁ©∫ËäÇÁÇπÔºâÊòØÈªëËâ≤ÁöÑÔºõ Â¶ÇÊûú‰∏Ä‰∏™ËäÇÁÇπÊòØÁ∫¢Ëâ≤ÁöÑÔºåÈÇ£‰πà‰ªñÁöÑÂ≠©Â≠êÈÉΩÊòØÈªëËâ≤ÁöÑ Ôºõ[Á∫¢Ëâ≤‰∏çËÉΩËøûÁùÄ] ‰ªé‰ªªÊÑè‰∏Ä‰∏™ËäÇÁÇπÂà∞Âè∂Â≠êËäÇÁÇπÁªèËøáÁöÑÈªëËâ≤ËäÇÁÇπÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ Â¢ûÂä†Êìç‰Ωú Âõæ‰∏≠ C ‰∏∫ÂΩìÂâçÈúÄË¶ÅÊèíÂÖ•ÁöÑËäÇÁÇπÔºåP ‰∏∫ÂΩìÂâçÊèíÂÖ•ËäÇÁÇπÁöÑÂèå‰∫≤ÁªìÁÇπÔºåU ‰∏∫ÂΩìÂâçÊèíÂÖ•ËäÇÁÇπÁöÑÂèîÂèîËäÇÁÇπÔºåG ‰∏∫ÂΩìÂâçÊèíÂÖ•ËäÇÁÇπÁöÑÁ•ñÁà∂ËäÇÁÇπÔºÅÂ¢ûÂä†ËäÇÁÇπÂ∞±ÊòØËøôÂõõÁßçÊÉÖÂÜµ‰∫ÜÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅËÄÉËôë‰∏â‰ª£ËäÇÁÇπÔºåËøòÊòØÈùûÂ∏∏ÁÆÄÂçïÁöÑ‚Ä¶ ËøôÈáåÊé®Ëçê‰∏Ä‰∏™ÁΩëÁ´ôÔºåÂèØ‰ª•ËØïÈ™å‰∏Ä‰∏ãÁ∫¢ÈªëÊ†ëÁöÑÂ¢ûÂä†Âà†Èô§ÔºåÊÑüËßâË¥ºÁàΩÂïäÔºÅÔºÅÔºÅ (ÂÖ∂ÂÆûÊòØÊàë‰∏çÊÉ≥ÁîªÂõæÊâæ‰æãÂ≠ê‰∫Ü‚Ä¶Ëá™Â∑±ÂéªËØïÈ™åÂêß..ËøôÂõõÁßçÊÉÖÂÜµÁöÑÊñπÊ≥ïÂ±°ËØï‰∏çÁàΩ) cs.usfca.edu/~galles/visualization/RedBlack.html ËØùËØ¥ÔºåÂí±‰∏≠ÊñáÁöÑÂçöÂÆ¢ÁúüÁöÑÂ•ΩÂ§ö‰∫∫ÈÉΩ‰∏çÂ§™ÊáÇËøô‰∏™Á∫¢ÈªëÊ†ëÔºåÂêÑÁßçÈîôËØØÁöÑ‰æãÂ≠êÂ∞±ÂæÄ‰∏äË¥¥ÔºåÂÖ∂ÂÆûÊú¨Êù•ÊòØÂæàÁÆÄÂçïÁöÑÁü•ËØÜÁÇπÔºåÊääÊàëÁ°¨ÊòØÊï¥Ëø∑Á≥ä‰∫Ü‚Ä¶ÁúüÊòØËØØ‰∫∫Â≠êÂºüÂïä‚Ä¶Â•ΩÊ∞îÂïäÔºÅ Âà†Èô§Êìç‰ΩúÂà†Èô§ÊòØÁ∫¢ÈªëÊ†ë‰∏≠ÊúÄÈöæÁöÑÈÉ®ÂàÜÔºÅ‰ΩÜÊòØÂÖ∂ÂÆûË∑üÊãßÈ≠îÊñπÊòØ‰∏ÄÊ†∑ÂìíÔºÅÂè™Ë¶ÅÊéåÊè°‰∫ÜÊäÄÂ∑ßÔºåÁÆ°‰Ω†ÊòØ‰ªÄ‰πàÔºåÂ•óÂÖ¨ÂºèÂ∞±ÂÆå‰∫ãÂÑø‰∫ÜÔºÅ [Áª¥Âü∫ÁôæÁßëÂÜôÁöÑÂï•Áé©ÊÑèÂÑøÔºåÊàëÁöÑÊô∫ÂïÜÂèóÂà∞‰∫ÜÂéãÂà∂‚Ä¶] ÊÉ≥Ë¶ÅÂà†Èô§‰∏Ä‰∏™ËäÇÁÇπÔºåÈ¶ñÂÖàÂ∞±Ë¶ÅËÄÉËôëÂÆÉÊúâÂá†‰∏™Â≠©Â≠êÔºö Ëã•ÊÉ≥Ë¶ÅÂà†Èô§ÁöÑËäÇÁÇπÔºåÊàëËøôÈáåËÆ∞‰∏∫ NÔºåËã• N Êúâ‰∏§‰∏™Â≠©Â≠êÔºåÂàôÊàë‰ª¨ÂèØ‰ª•Êâæ N ÁöÑÂ∑¶Â≠êÊ†ëÊúÄÂ§ßÂÄº ÊàñËÄÖÊòØ N ÁöÑÂè≥Â≠êÊ†ëÊúÄÂ∞èÂÄºÔºåÂ∞ÜÂÖ∂ÂÄºÂ§çÂà∂Âà∞ N ,ÁÑ∂Âêé ‰∏çÂà†Èô§ N Ëøô‰∏™ËäÇÁÇπÔºåËΩ¨ËÄåÂéªÂà†Èô§Ë¢´Â§çÂà∂ÁöÑÈÇ£‰∏™ËäÇÁÇπ(N ÁöÑÂ∑¶Â≠êÊ†ëÊúÄÂ§ßÂÄº ÊàñËÄÖÊòØ N ÁöÑÂè≥Â≠êÊ†ëÊúÄÂ∞èÂÄºÊâÄÂú®ÁöÑËäÇÁÇπ)Ôºå‰∏∫‰ªÄ‰πàË¶ÅËøôÊ†∑ËΩ¨Êç¢Âë¢ÔºüÂõ†‰∏∫Êàë‰ª¨Áü•ÈÅìÔºåN ÁöÑÂ∑¶Â≠êÊ†ëÊúÄÂ§ßÂÄº ÊàñËÄÖÊòØ N ÁöÑÂè≥Â≠êÊ†ëÊúÄÂ∞èÂÄºÊúÄÂ§ö‰πüÂ∞±‰∏Ä‰∏™ÂÑøÂ≠ê(ÊàëËøôÈáåËØ¥ÁöÑÂÑøÂ≠êÊòØ‰∏çÂåÖÊã¨Âè∂Â≠êÁªìÁÇπ[Âè∂Â≠êÁªìÁÇπÂÖ®ÈÉ®ÊòØÈªëËâ≤Á©∫ËäÇÁÇπÂì¶ÔºåËøôÊòØÁ∫¢ÈªëÊ†ëÁöÑÊÄßË¥®3]ÁöÑÂìà~) ÊâÄ‰ª•Êàë‰ª¨Áé∞Âú®Âè™ÈúÄË¶ÅËÄÉËôëÂà†Èô§ Âè™Êúâ‰∏Ä‰∏™ÂÑøÂ≠êÊàñËÄÖÊ≤°ÊúâÂÑøÂ≠êÁöÑËäÇÁÇπ Áúã‰∏äÂõæÔºåÂÖ∂ÂÆû‰πüÂ∞±Ââ©‰∏ã3ÁßçÊÉÖÂÜµÔºåÂàÜÂà´ÊòØ ÈúÄÂà†Èô§ËäÇÁÇπ‰∏∫ÈªëËâ≤ÔºåÊúâ‰∏Ä‰∏™È¢úËâ≤‰∏∫Á∫¢Ëâ≤ÁöÑÂ≠©Â≠ê ÈúÄÂà†Èô§ËäÇÁÇπ‰∏∫Á∫¢Ëâ≤Ôºå‰∏îÊ≤°ÊúâÂÑøÂ≠ê ÈúÄÂà†Èô§ËäÇÁÇπ‰∏∫ÈªëËâ≤Ôºå‰∏îÊ≤°ÊúâÂÑøÂ≠ê ÂâçÈù¢‰∏§ÁßçÊÉÖÂÜµÊòØÂæàÂ•ΩÂ§ÑÁêÜÁöÑÔºåÊúÄÈöæÁöÑÂ∞±ÊòØÁ¨¨‰∏âÁßçÊÉÖÂÜµÔºåÈúÄÂà†Èô§ËäÇÁÇπ‰∏∫ÈªëËâ≤Ôºå‰∏îÊ≤°ÊúâÂÑøÂ≠êÔºåÊé•‰∏ãÊù•Êàë‰ª¨Â∞±Âè™ÈúÄË¶ÅËÄÉËôëËøôÁßçÊÉÖÂÜµÔºÅÔºÅÔºÅ ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂè™ÈúÄË¶ÅËÄÉËôëÂõõ‰∏™ËäÇÁÇπÔºåÂàÜÂà´ÊòØ Áà∂‰∫≤ËäÇÁÇπ P„ÄÅÂÖÑÂºüËäÇÁÇπ S„ÄÅS ÁöÑÂ∑¶Â≠©Â≠ê S1„ÄÅS ÁöÑÂè≥Â≠©Â≠ê S2ÔºåÊåâÁêÜËØ¥4‰∏™ËäÇÁÇπÔºåÈ¢úËâ≤ÊéíÂàóÁªÑÂêàÔºåÂèØ‰ª•ÊéíÊàê16ÁßçÔºå‰ΩÜÊòØÊúâ‰∫õÊòØ‰∏çÁ¨¶ÂêàÁ∫¢ÈªëÊ†ëÊÄßË¥®ÁöÑÁªÑÂêàÔºåÁé∞Âú®Êàë‰ª¨Êù•‰∏Ä‰∏ÄÊéíÂàó‰∏Ä‰∏ã„ÄÇ Á≤óÁï•Áúã‰∏Ä‰∏ãÔºåÊÄªÂÖ±ÊòØÊúâ9ÁßçÊÉÖÂÜµÁöÑÔºÅÂú®ÊñáÊú´‰ºöÁªôÂá∫ÊàëËá™Â∑±ÊÄªÁªìÁöÑËøô9ÁßçÂàÜÂà´ÂØπÂ∫îÁöÑÊìç‰ΩúÊñπÂºèÔºåÂ§ßÂÆ∂ÂèØ‰ª•Áõ¥Êé•ÁúãÊñáÊú´ÔºÅÔºÅÔºÅ ‰∏ÄÈÅì‰æãÈ¢ò Ë¶ÅÂà†Èô§ÁöÑËäÇÁÇπÊòØÈªëËâ≤ËäÇÁÇπÔºå‰∏îÂÑøÂ≠ê‰∏∫Âè∂Â≠êÁªìÁÇπ Â¶ÇÈ¢òÔºåË¶ÅÂà†Èô§ÁöÑËäÇÁÇπÊòØ40ÔºåÂÖ∂Áà∂‰∫≤ÊòØ55ÔºåÈªëËâ≤ËäÇÁÇπÔºåËÆ∞‰∏∫PÔºõÂÖ∂ÂÖÑÂºüÊòØ65ÔºåÁ∫¢Ëâ≤ËäÇÁÇπÔºåËÆ∞‰∏∫SÔºåÂÖ∂‰æÑÂ≠êÊòØ60Ôºå75ÔºåÈªëËâ≤ËäÇÁÇπ„ÄÇ Â¶ÇÂõæÔºåËøôÊòØÂà†Èô§‰∫Ü40‰πãÂêéÁöÑÂõæÔºåÂÖ∂ÂÑøÂ≠ê‚Äî-Âè∂Â≠êÁªìÁÇπÂèò‰∏∫xÔºåÁé∞Âú®‰∏çÊª°Ë∂≥ÊÄßË¥®5ÔºåÈúÄË¶ÅËøõË°åÂèòÊç¢„ÄÇ Case IÔºöS ‰∏∫ Á∫¢Ëâ≤ÔºåP ‰∏∫ÈªëËâ≤ Â∞Ü S Âíå P ÁöÑÈ¢úËâ≤‰∫íÊç¢ÔºåÂç≥ S Âèò‰∏∫ÈªëËâ≤ÔºåP Âèò‰∏∫Á∫¢Ëâ≤ ÂØπÁà∂‰∫≤ËäÇÁÇπ P ËøõË°å Â∑¶ÊóãÔºåÊ≥®ÊÑèÂì¶ÔºåÂõ†‰∏∫ÊòØÂ∑¶ÊóãÔºåÊâÄ‰ª•ÂúÜÂøÉÊòØ ÂÖÑÂºüËäÇÁÇπ S Case IIÔºöÊ≠§Êó∂ÂèàÊòØ‰∏Ä‰∏™Êñ∞ÁöÑÂèØËÉΩÂá∫Áé∞ÁöÑÂú∫ÊôØÔºåÂà†Èô§ËäÇÁÇπÂêéÔºåP ‰∏∫Á∫¢Ëâ≤ËäÇÁÇπÔºåËÄåÂÖÑÂºüËäÇÁÇπ S ‰∏∫ÈªëËâ≤ËäÇÁÇπÔºå‰ΩÜÊòØÂÖÑÂºüÁöÑÂ∑¶Â≠©Â≠ê‰∏∫ Á∫¢Ëâ≤ÔºåÂè≥Â≠©Â≠ê(Âè∂Â≠êÁªìÁÇπÔºåÂΩìÁÑ∂ÂÖ∂‰πüÂè™ËÉΩÊòØÂè∂Â≠êËäÇÁÇπÔºåÂê¶ÂàôÂ∞±ËøùÂèçÊÄßË¥®5‰∫Ü)‰∏∫ÈªëËâ≤„ÄÇ Ê≠§Êó∂ÔºåÂ∞Ü S Âèò‰∏∫ Á∫¢Ëâ≤ÔºåS ÁöÑÂ∑¶Â≠©Â≠êÂèò‰∏∫ ÈªëËâ≤ ÁÑ∂ÂêéÔºåËøùÊ≥ï‰∫ÜÊÄßË¥® 4ÔºåÂ∞Ü S Âè≥Êóã Case IIIÔºöÊ≠§Êó∂Á¨¨‰∏âÁßçÊÉÖÂÜµÂá∫Áé∞‰∫ÜÔºåP ‰∏∫Á∫¢Ëâ≤Ôºå S ‰∏∫ÈªëËâ≤ÔºåS ÁöÑÂ∑¶Â≠©Â≠ê‰∏∫ÈªëËâ≤Âè∂Â≠êÁªìÁÇπÔºåS ÁöÑÂè≥Â≠©Â≠ê‰∏∫Á∫¢Ëâ≤ËäÇÁÇπ Â∞Ü S ÁöÑÂè≥Â≠©Â≠ê(Á∫¢Ëâ≤)„ÄÅP(Á∫¢Ëâ≤)„ÄÅS(ÈªëËâ≤)ÔºåÈ¢úËâ≤‰∫íÊç¢ ÁÑ∂ÂêéÂ∞Ü x Áé∞Âú®ÁöÑÁà∂‰∫≤ËøõË°åÂ∑¶Êóã Áª¥Âü∫ÁôæÁßëÈÉ®ÂàÜÊÉÖÂΩ¢1: NÊòØÊñ∞ÁöÑÊ†π„ÄÇÂú®ËøôÁßçÊÉÖÂΩ¢‰∏ãÔºåÊàë‰ª¨Â∞±ÂÅöÂÆå‰∫Ü„ÄÇÊàë‰ª¨‰ªéÊâÄÊúâË∑ØÂæÑÂéªÈô§‰∫Ü‰∏Ä‰∏™ÈªëËâ≤ËäÇÁÇπÔºåËÄåÊñ∞Ê†πÊòØÈªëËâ≤ÁöÑÔºåÊâÄ‰ª•ÊÄßË¥®ÈÉΩ‰øùÊåÅÁùÄ„ÄÇ Ê≥®ÊÑèÔºöÂú®ÊÉÖÂΩ¢2„ÄÅ5Âíå6‰∏ãÔºåÊàë‰ª¨ÂÅáÂÆöNÊòØÂÆÉÁà∂‰∫≤ÁöÑÂ∑¶ÂÑøÂ≠ê„ÄÇÂ¶ÇÊûúÂÆÉÊòØÂè≥ÂÑøÂ≠êÔºåÂàôÂú®Ëøô‰∫õÊÉÖÂΩ¢‰∏ãÁöÑÂ∑¶ÂíåÂè≥Â∫îÂΩìÂØπË∞É„ÄÇ ÊÉÖÂΩ¢2Ôºö SÊòØÁ∫¢Ëâ≤„ÄÇÂú®ËøôÁßçÊÉÖÂΩ¢‰∏ãÊàë‰ª¨Âú®NÁöÑÁà∂‰∫≤‰∏äÂÅöÂ∑¶ÊóãËΩ¨ÔºåÊääÁ∫¢Ëâ≤ÂÖÑÂºüËΩ¨Êç¢ÊàêNÁöÑÁ•ñÁà∂ÔºåÊàë‰ª¨Êé•ÁùÄÂØπË∞ÉNÁöÑÁà∂‰∫≤ÂíåÁ•ñÁà∂ÁöÑÈ¢úËâ≤„ÄÇÂÆåÊàêËøô‰∏§‰∏™Êìç‰ΩúÂêéÔºåÂ∞ΩÁÆ°ÊâÄÊúâË∑ØÂæÑ‰∏äÈªëËâ≤ËäÇÁÇπÁöÑÊï∞ÁõÆÊ≤°ÊúâÊîπÂèòÔºå‰ΩÜÁé∞Âú®NÊúâ‰∫Ü‰∏Ä‰∏™ÈªëËâ≤ÁöÑÂÖÑÂºüÂíå‰∏Ä‰∏™Á∫¢Ëâ≤ÁöÑÁà∂‰∫≤ÔºàÂÆÉÁöÑÊñ∞ÂÖÑÂºüÊòØÈªëËâ≤Âõ†‰∏∫ÂÆÉÊòØÁ∫¢Ëâ≤SÁöÑ‰∏Ä‰∏™ÂÑøÂ≠êÔºâÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•Êé•‰∏ãÂéªÊåâÊÉÖÂΩ¢4„ÄÅÊÉÖÂΩ¢5ÊàñÊÉÖÂΩ¢6Êù•Â§ÑÁêÜ„ÄÇÔºàÊ≥®ÊÑèÔºöËøôÈáåÁöÑÂõæ‰∏≠Ê≤°ÊúâÊòæÁ§∫Âá∫Êù•ÔºåNÊòØÂà†Èô§‰∫ÜÈªëËâ≤ËäÇÁÇπÂêéÊõøÊç¢‰∏äÊù•ÁöÑÂ≠êËäÇÁÇπÔºåÊâÄ‰ª•Ëøô‰∏™ËøáÁ®ã‰∏≠Áî±P-&gt;X-&gt;NÂèòÊàê‰∫ÜP-&gt;NÔºåÂÆûÈôÖ‰∏äÊòØÂ∞ë‰∫Ü‰∏Ä‰∏™ÈªëËâ≤ËäÇÁÇπÔºå‰πüÂèØ‰ª•ÁêÜËß£‰∏∫Parent(Black)ÂíåSilbing(Red)ÈÇ£‰πà‰ªñ‰ª¨ÁöÑÂ≠©Â≠êÈªëËâ≤ËäÇÁÇπÁöÑÊï∞ÁõÆËÇØÂÆö‰∏çÁ≠âÔºåËÆ©‰ªñ‰ª¨ÂÅöÊñ∞ÂÖÑÂºüËÇØÂÆöÊòØ‰∏çÂπ≥Ë°°ÁöÑÔºåËøòÈúÄÂêéÈù¢ÁªßÁª≠Â§ÑÁêÜ„ÄÇËøôÈáåÁúãËã±ÊñáÁâàÊú¨ÁöÑ[1]ÊØîËæÉÁöÑÊòé‰∫ÜÔºâ ÊÉÖÂΩ¢3Ôºö NÁöÑÁà∂‰∫≤„ÄÅSÂíåSÁöÑÂÑøÂ≠êÈÉΩÊòØÈªëËâ≤ÁöÑ„ÄÇÂú®ËøôÁßçÊÉÖÂΩ¢‰∏ãÔºåÊàë‰ª¨ÁÆÄÂçïÁöÑÈáçÁªòS‰∏∫Á∫¢Ëâ≤„ÄÇÁªìÊûúÊòØÈÄöËøáSÁöÑÊâÄÊúâË∑ØÂæÑÔºåÂÆÉ‰ª¨Â∞±ÊòØ‰ª•Ââç‰∏çÈÄöËøáNÁöÑÈÇ£‰∫õË∑ØÂæÑÔºåÈÉΩÂ∞ë‰∫Ü‰∏Ä‰∏™ÈªëËâ≤ËäÇÁÇπ„ÄÇÂõ†‰∏∫Âà†Èô§NÁöÑÂàùÂßãÁöÑÁà∂‰∫≤‰ΩøÈÄöËøáNÁöÑÊâÄÊúâË∑ØÂæÑÂ∞ë‰∫Ü‰∏Ä‰∏™ÈªëËâ≤ËäÇÁÇπÔºåËøô‰Ωø‰∫ãÊÉÖÈÉΩÂπ≥Ë°°‰∫ÜËµ∑Êù•„ÄÇ‰ΩÜÊòØÔºåÈÄöËøáPÁöÑÊâÄÊúâË∑ØÂæÑÁé∞Âú®ÊØî‰∏çÈÄöËøáPÁöÑË∑ØÂæÑÂ∞ë‰∫Ü‰∏Ä‰∏™ÈªëËâ≤ËäÇÁÇπÔºåÊâÄ‰ª•‰ªçÁÑ∂ËøùÂèçÊÄßË¥®5„ÄÇË¶Å‰øÆÊ≠£Ëøô‰∏™ÈóÆÈ¢òÔºåÊàë‰ª¨Ë¶Å‰ªéÊÉÖÂΩ¢1ÂºÄÂßãÔºåÂú®P‰∏äÂÅöÈáçÊñ∞Âπ≥Ë°°Â§ÑÁêÜ„ÄÇ ÊÉÖÂΩ¢4Ôºö SÂíåSÁöÑÂÑøÂ≠êÈÉΩÊòØÈªëËâ≤Ôºå‰ΩÜÊòØNÁöÑÁà∂‰∫≤ÊòØÁ∫¢Ëâ≤„ÄÇÂú®ËøôÁßçÊÉÖÂΩ¢‰∏ãÔºåÊàë‰ª¨ÁÆÄÂçïÁöÑ‰∫§Êç¢NÁöÑÂÖÑÂºüÂíåÁà∂‰∫≤ÁöÑÈ¢úËâ≤„ÄÇËøô‰∏çÂΩ±Âìç‰∏çÈÄöËøáNÁöÑË∑ØÂæÑÁöÑÈªëËâ≤ËäÇÁÇπÁöÑÊï∞ÁõÆÔºå‰ΩÜÊòØÂÆÉÂú®ÈÄöËøáNÁöÑË∑ØÂæÑ‰∏äÂØπÈªëËâ≤ËäÇÁÇπÊï∞ÁõÆÂ¢ûÂä†‰∫Ü‰∏ÄÔºåÊ∑ªË°•‰∫ÜÂú®Ëøô‰∫õË∑ØÂæÑ‰∏äÂà†Èô§ÁöÑÈªëËâ≤ËäÇÁÇπ„ÄÇ ÊÉÖÂΩ¢5Ôºö SÊòØÈªëËâ≤ÔºåSÁöÑÂ∑¶ÂÑøÂ≠êÊòØÁ∫¢Ëâ≤ÔºåSÁöÑÂè≥ÂÑøÂ≠êÊòØÈªëËâ≤ÔºåËÄåNÊòØÂÆÉÁà∂‰∫≤ÁöÑÂ∑¶ÂÑøÂ≠ê„ÄÇÂú®ËøôÁßçÊÉÖÂΩ¢‰∏ãÊàë‰ª¨Âú®S‰∏äÂÅöÂè≥ÊóãËΩ¨ÔºåËøôÊ†∑SÁöÑÂ∑¶ÂÑøÂ≠êÊàê‰∏∫SÁöÑÁà∂‰∫≤ÂíåNÁöÑÊñ∞ÂÖÑÂºü„ÄÇÊàë‰ª¨Êé•ÁùÄ‰∫§Êç¢SÂíåÂÆÉÁöÑÊñ∞Áà∂‰∫≤ÁöÑÈ¢úËâ≤„ÄÇÊâÄÊúâË∑ØÂæÑ‰ªçÊúâÂêåÊ†∑Êï∞ÁõÆÁöÑÈªëËâ≤ËäÇÁÇπÔºå‰ΩÜÊòØÁé∞Âú®NÊúâ‰∫Ü‰∏Ä‰∏™ÈªëËâ≤ÂÖÑÂºüÔºå‰ªñÁöÑÂè≥ÂÑøÂ≠êÊòØÁ∫¢Ëâ≤ÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨ËøõÂÖ•‰∫ÜÊÉÖÂΩ¢6„ÄÇNÂíåÂÆÉÁöÑÁà∂‰∫≤ÈÉΩ‰∏çÂèóËøô‰∏™ÂèòÊç¢ÁöÑÂΩ±Âìç„ÄÇ ÊÉÖÂΩ¢6Ôºö SÊòØÈªëËâ≤ÔºåSÁöÑÂè≥ÂÑøÂ≠êÊòØÁ∫¢Ëâ≤ÔºåËÄåNÊòØÂÆÉÁà∂‰∫≤ÁöÑÂ∑¶ÂÑøÂ≠ê„ÄÇÂú®ËøôÁßçÊÉÖÂΩ¢‰∏ãÊàë‰ª¨Âú®NÁöÑÁà∂‰∫≤‰∏äÂÅöÂ∑¶ÊóãËΩ¨ÔºåËøôÊ†∑SÊàê‰∏∫NÁöÑÁà∂‰∫≤ÔºàPÔºâÂíåSÁöÑÂè≥ÂÑøÂ≠êÁöÑÁà∂‰∫≤„ÄÇÊàë‰ª¨Êé•ÁùÄ‰∫§Êç¢NÁöÑÁà∂‰∫≤ÂíåSÁöÑÈ¢úËâ≤ÔºåÂπ∂‰ΩøSÁöÑÂè≥ÂÑøÂ≠ê‰∏∫ÈªëËâ≤„ÄÇÂ≠êÊ†ëÂú®ÂÆÉÁöÑÊ†π‰∏äÁöÑ‰ªçÊòØÂêåÊ†∑ÁöÑÈ¢úËâ≤ÔºåÊâÄ‰ª•ÊÄßË¥®3Ê≤°ÊúâË¢´ËøùÂèç„ÄÇ‰ΩÜÊòØÔºåNÁé∞Âú®Â¢ûÂä†‰∫Ü‰∏Ä‰∏™ÈªëËâ≤Á•ñÂÖàÔºöË¶Å‰πàNÁöÑÁà∂‰∫≤ÂèòÊàêÈªëËâ≤ÔºåË¶Å‰πàÂÆÉÊòØÈªëËâ≤ËÄåSË¢´Â¢ûÂä†‰∏∫‰∏Ä‰∏™ÈªëËâ≤Á•ñÁà∂„ÄÇÊâÄ‰ª•ÔºåÈÄöËøáNÁöÑË∑ØÂæÑÈÉΩÂ¢ûÂä†‰∫Ü‰∏Ä‰∏™ÈªëËâ≤ËäÇÁÇπ„ÄÇÊ≠§Êó∂ÔºåÂ¶ÇÊûú‰∏Ä‰∏™Ë∑ØÂæÑ‰∏çÈÄöËøáNÔºåÂàôÊúâ‰∏§ÁßçÂèØËÉΩÊÄßÔºöÂÆÉÈÄöËøáNÁöÑÊñ∞ÂÖÑÂºü„ÄÇÈÇ£‰πàÂÆÉ‰ª•ÂâçÂíåÁé∞Âú®ÈÉΩÂøÖÂÆöÈÄöËøáSÂíåNÁöÑÁà∂‰∫≤ÔºåËÄåÂÆÉ‰ª¨Âè™ÊòØ‰∫§Êç¢‰∫ÜÈ¢úËâ≤„ÄÇÊâÄ‰ª•Ë∑ØÂæÑ‰øùÊåÅ‰∫ÜÂêåÊ†∑Êï∞ÁõÆÁöÑÈªëËâ≤ËäÇÁÇπ„ÄÇÂÆÉÈÄöËøáNÁöÑÊñ∞ÂèîÁà∂ÔºåSÁöÑÂè≥ÂÑøÂ≠ê„ÄÇÈÇ£‰πàÂÆÉ‰ª•ÂâçÈÄöËøáS„ÄÅSÁöÑÁà∂‰∫≤ÂíåSÁöÑÂè≥ÂÑøÂ≠êÔºå‰ΩÜÊòØÁé∞Âú®Âè™ÈÄöËøáSÔºåÂÆÉË¢´ÂÅáÂÆö‰∏∫ÂÆÉ‰ª•ÂâçÁöÑÁà∂‰∫≤ÁöÑÈ¢úËâ≤ÔºåÂíåSÁöÑÂè≥ÂÑøÂ≠êÔºåÂÆÉË¢´‰ªéÁ∫¢Ëâ≤ÊîπÂèò‰∏∫ÈªëËâ≤„ÄÇÂêàÊàêÊïàÊûúÊòØËøô‰∏™Ë∑ØÂæÑÈÄöËøá‰∫ÜÂêåÊ†∑Êï∞ÁõÆÁöÑÈªëËâ≤ËäÇÁÇπ„ÄÇÂú®‰ªª‰ΩïÊÉÖÂÜµ‰∏ãÔºåÂú®Ëøô‰∫õË∑ØÂæÑ‰∏äÁöÑÈªëËâ≤ËäÇÁÇπÊï∞ÁõÆÈÉΩÊ≤°ÊúâÊîπÂèò„ÄÇÊâÄ‰ª•Êàë‰ª¨ÊÅ¢Â§ç‰∫ÜÊÄßË¥®4„ÄÇÂú®Á§∫ÊÑèÂõæ‰∏≠ÁöÑÁôΩËâ≤ËäÇÁÇπÂèØ‰ª•ÊòØÁ∫¢Ëâ≤ÊàñÈªëËâ≤Ôºå‰ΩÜÊòØÂú®ÂèòÊç¢ÂâçÂêéÈÉΩÂøÖÈ°ªÊåáÂÆöÁõ∏ÂêåÁöÑÈ¢úËâ≤„ÄÇ Ëá™Â∑±ÊÄªÁªìÁöÑÊìç‰ΩúÊñπÂºè ÊÄªÁªìËá≥Ê≠§ÔºåÁ∫¢ÈªëÊ†ëÂëä‰∏ÄÊÆµËêΩ‰∫Ü‚Ä¶Â≠¶‰∫Ü‰∏§Â§©ÊâçÁúüÊ≠£ÊêûÊòéÁôΩÊØè‰∏ÄÊ≠•Âπ≤ÂòõÁöÑ‚Ä¶ÁúüÊòØÂ§™È∫ªÁÉ¶‰∫Ü Âª∫ËÆÆÂ≠¶Á∫¢ÈªëÊ†ëÔºåÂÖàÁÜüÊÇâÂÆÉÁöÑ5‰∏™ÊÄßË¥®ÔºåÁÑ∂ÂêéÂ∞ÜÂ¢ûÂä†ÂíåÂà†Èô§ÁöÑÊìç‰ΩúËÉå‰∏Ä‰∏ãÂ∞±Ë°å‚Ä¶Ëá™Â∑±ÂèØ‰ª•Â§ö‰∏äÊàëÊé®ËçêÁöÑÈÇ£‰∏™ÁΩëÁ´ôÔºåÁî®ÊàëÊÄªÁªìÁöÑÊìç‰ΩúÊñπÂºèÂ§öÊìç‰ΩúÂá†ÈÅçÔºåÂ∞±Â∫îËØ•Ê≤°Âï•Â§ßÈóÆÈ¢ò‰∫ÜÔºÅËá≥‰∫éÊâãÂÜôÁ∫¢ÈªëÊ†ë‰ª£Á†Å‚Ä¶ÊàëÈÄâÊã©ÊîæÂºÉ‰∫ÜÔºÅ]]></content>
  </entry>
  <entry>
    <title><![CDATA[Map]]></title>
    <url>%2F2020%2F01%2F15%2FMap%20%26%20Set%20%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90.html</url>
    <content type="text"><![CDATA[HashMapÂèÇËÄÉ ÈõÜÂêàÁï™@HashMap‰∏ÄÊñáÈÄöÔºà1.7ÁâàÔºâ ÈõÜÂêàÁï™@HashMap‰∏ÄÊñáÈÄöÔºà1.8ÁâàÔºâ HashMapÊ∫êÁ†ÅÂàÜÊûê‚ÄîÊéòÈáëÂçö‰∏ª ÁæéÂõ¢ÊäÄÊúØËÆ≤Ëß£HashMap Áõ∏ÂÖ≥Èù¢ËØïÈóÆÈ¢ò ÈóÆÈ¢òÂºïÂØºÁî±‰∫éÁü•ËØÜÁÇπÂ§™Â§öÔºåÊàëÂ∞±‰ª•Ëá™Â∑±ÊêúÈõÜÂà∞ÁöÑÈù¢ËØïÂ∏∏ÈóÆÁöÑÊúâÂÖ≥‰∫éHashMapÁöÑÈóÆÈ¢òËøõË°åËß£ÂÜ≥ÔºåÁÑ∂ÂêéÂÜçËøõ‰∏ÄÊ≠•Ê∑±ÊåñÔºÅ HashMapÁöÑÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÔºü HashMapÁöÑ‰∏ªË¶ÅÊñπÊ≥ïÔºü HashMap ÊòØÂ¶Ç‰ΩïÁ°ÆÂÆöÂÖÉÁ¥†Â≠òÂÇ®‰ΩçÁΩÆÁöÑ‰ª•ÂèäÂ¶Ç‰ΩïÂ§ÑÁêÜÂìàÂ∏åÂÜ≤Á™ÅÁöÑÔºü HashMap Êâ©ÂÆπÊú∫Âà∂ÊòØÊÄéÊ†∑ÁöÑÔºü JDK 1.8 Âú®Êâ©ÂÆπÂíåËß£ÂÜ≥ÂìàÂ∏åÂÜ≤Á™Å‰∏äÂØπ HashMap Ê∫êÁ†ÅÂÅö‰∫ÜÂì™‰∫õÊîπÂä®ÔºüÊúâ‰ªÄ‰πàÂ•ΩÂ§Ñ? ‰ªÄ‰πàÊó∂ÂÄô‰ºö‰ΩøÁî®HashMapÔºü‰ªñÊúâ‰ªÄ‰πàÁâπÁÇπÔºü ‰Ω†Áü•ÈÅìHashMapÁöÑÂ∑•‰ΩúÂéüÁêÜÂêóÔºü ‰Ω†Áü•ÈÅìgetÂíåputÁöÑÂéüÁêÜÂêóÔºüequals()ÂíåhashCode()ÈÉΩÊúâ‰ªÄ‰πà‰ΩúÁî®Ôºü ‰Ω†Áü•ÈÅìhashÁöÑÂÆûÁé∞ÂêóÔºü‰∏∫‰ªÄ‰πàË¶ÅËøôÊ†∑ÂÆûÁé∞Ôºü Â¶ÇÊûúHashMapÁöÑÂ§ßÂ∞èË∂ÖËøá‰∫ÜË¥üËΩΩÂõ†Â≠êÔºàload factorÔºâÂÆö‰πâÁöÑÂÆπÈáèÔºåÊÄé‰πàÂäûÔºü ‰Ω†‰∫ÜËß£ÈáçÊñ∞Ë∞ÉÊï¥HashMapÂ§ßÂ∞èÂ≠òÂú®‰ªÄ‰πàÈóÆÈ¢òÂêóÔºü ‰∏∫‰ªÄ‰πà‰ΩøÁî®StringÔºåIntergerËøôÊ†∑ÁöÑwrapperÁ±ªÈÄÇÂêà‰Ωú‰∏∫ÈîÆÔºü Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®Ëá™ÂÆö‰πâÁöÑÂØπË±°‰Ωú‰∏∫ÈîÆÂêóÔºü Â¶Ç‰ΩïÂØπHashMapËøõË°åÊéíÂ∫èÔºü HashMapÁöÑÂà†Èô§Èô∑Èò±Ôºü ‰∏∫‰ªÄ‰πàÂè™ÂÖÅËÆ∏ÈÄöËøáiteratorËøõË°åÂà†Èô§Êìç‰ΩúÔºü Â¶ÇÊûúÊòØÈÅçÂéÜËøáÁ®ã‰∏≠Â¢ûÂä†Êàñ‰øÆÊîπÊï∞ÊçÆÂë¢Ôºü hashmap‰∏∫‰ªÄ‰πàÂàùÂßãÈïøÂ∫¶‰∏∫16Ôºü HashMap‰∏≠ÁöÑÊâ∞Âä®ÂáΩÊï∞ÊòØ‰ªÄ‰πàÔºåÊúâ‰ªÄ‰πà‰ΩúÁî®ÔºåTreeMap‰∏≠ÊúâÂêóÔºü HashMap‰∏∫‰ΩïÂèØ‰ª•ÊèíÂÖ•Á©∫ÂÄºÔºü‰∏∫‰ªÄ‰πàÂÆÉÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÔºü Ëøô20‰∏™ÈóÆÈ¢òÁöÑÂèÇËÄÉÊÉ≥Ê≥ï‰ºöÂú®ÊñáÁ´†Êú´Â∞æÁªôÂá∫ÔºÅÂÖà‰∏ÄËµ∑Êù•Â≠¶‰π†‰∏ÄÂìàHashMapÁöÑÊ∫êÁ†ÅÔºÅ Ê¶ÇËø∞ HashMapÁöÑÁâπÊÄß HashMapÁöÑÂ≠òÂÇ®ÁªìÊûÑ HashMapÁöÑÈáçË¶ÅÊñπÊ≥ï‚ÄîÂ¢ûÂà†ÊîπÊü• HashMapÁöÑÊâ©ÂÆπÊú∫Âà∂ HashMapÁöÑËø≠‰ª£Âô® HashMapÁöÑFail-FastÊú∫Âà∂ HashMap‰∏éÂ§ßÂÆ∂Â∫≠‰∏≠ÂÖ∂‰ªñMapÁöÑÂå∫Âà´ Êé•‰∏ãÊù•‰ªéËøô‰∫õÊñπÈù¢Êãø‰∏ãHashMapÔºÅÔºÅÔºÅ HashMapÁöÑÁâπÊÄß ÂÆÉÊ†πÊçÆÈîÆÁöÑ hashCodeÂÄº Â≠òÂÇ®Êï∞ÊçÆÔºåÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÂèØ‰ª•Áõ¥Êé•ÂÆö‰ΩçÂà∞ÂÆÉÁöÑÂÄºÔºåÂõ†ËÄåÂÖ∑ÊúâÂæàÂø´ÁöÑËÆøÈóÆÈÄüÂ∫¶Ôºå‰ΩÜÈÅçÂéÜÈ°∫Â∫èÂç¥ÊòØ‰∏çÁ°ÆÂÆöÁöÑ„ÄÇ[Âè™ÊòØËØ¥Ë∑ühashCodeÁöÑÂÄºÊúâÂÖ≥Á≥ªÂì¶ÔºÅÂπ∂‰∏çÊòØÁõ¥Êé•ÊåâÁÖßhashCode()ËøîÂõûÂÄºÂ≠òÂèñÁöÑ] HashMapÊúÄÂ§öÂè™ÂÖÅËÆ∏‰∏ÄÊù°ËÆ∞ÂΩïÁöÑÈîÆ‰∏∫nullÔºåÂÖÅËÆ∏Â§öÊù°ËÆ∞ÂΩïÁöÑÂÄº‰∏∫null„ÄÇ HashMap ÈùûÁ∫øÁ®ãÂÆâÂÖ®ÔºåÂç≥‰ªª‰∏ÄÊó∂ÂàªÂèØ‰ª•ÊúâÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂ÂÜôHashMapÔºåÂèØËÉΩ‰ºöÂØºËá¥Êï∞ÊçÆÁöÑ‰∏ç‰∏ÄËá¥„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÊª°Ë∂≥Á∫øÁ®ãÂÆâÂÖ®ÔºåÂèØ‰ª•Áî® Collections ÁöÑ synchronizedMap ÊñπÊ≥ï‰Ωø HashMap ÂÖ∑ÊúâÁ∫øÁ®ãÂÆâÂÖ®ÁöÑËÉΩÂäõÔºåÊàñËÄÖ‰ΩøÁî®ConcurrentHashMap„ÄÇ ÈîÆÂîØ‰∏ÄÔºåÂ¶ÇÊûúÈîÆÁõ∏ÂêåÔºåÂàôÂÄº‰ºöË¢´Ë¶ÜÁõñ„ÄÇÂêåÊó∂Ëã•ÈîÆ‰∏∫Ëá™ÂÆö‰πâÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåÂàôÈúÄË¶Å‰øùËØÅÂ∑≤ÁªèÈáçÂÜô‰∫Üequals() Âíå hashCode()„ÄÇ ‚Äî‚Äî&gt; equals() Âíå hashCode()ËØ¶Ëß£ HashMapÁöÑÂ≠òÂÇ®ÁªìÊûÑJDK 1.7 ÁâàÊú¨ÁöÑHashMapÊòØ‰ª• Êï∞ÁªÑ + ÈìæË°® Â≠òÂÇ®ÁöÑÔºå‰πüÂ∞±ÊòØÊàë‰ª¨Â∏∏ËØ¥ÁöÑÊåâ ÈìæÂú∞ÂùÄÊ≥ï Â≠òÂÇ® Â∏∏ËßÅÁöÑÂ§ÑÁêÜÂìàÂ∏åÂÜ≤Á™ÅÁöÑÊñπÊ≥ïÂ∞±‰∏§ÁßçÔºö ÂºÄÊîæÂú∞ÂùÄÊ≥ï ÂºÄÊîæÂú∞ÂùÄÊ≥ïÂèàÂèØ‰ª•ÂàÜ‰∏∫Á∫øÊÄßÊé¢ÊµãÊ≥ï„ÄÅÂπ≥ÊñπÊé¢ÊµãÊ≥ï„ÄÅÂÜçÊï£ÂàóÊ≥ï ÊãâÈìæÊ≥ï JDK 1.8 ÁâàÊú¨ÁöÑHashMapÊòØ‰ª• Êï∞ÁªÑ + ÈìæË°® + Á∫¢ÈªëÊ†ë ÂÆûÁé∞ÁöÑÔºåÁ∫¢ÈªëÊ†ë ÂèØËÉΩÂ§ßÂÆ∂Êé•Ëß¶ÁöÑ‰∏çÊòØÂæàÂ§öÔºåÊâÄ‰ª•ÊàëËµ∂Á¥ßÂ≠¶‰π†‰∫Ü‰∏ÄÊ≥¢ ‰º†ÈÄÅÈó®)ÔºåÂÖ∑‰ΩìÁöÑÂÆûÁé∞Â¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö Ê∫êÁ†Å‰∏≠ÁöÑÁõ∏ÂÖ≥Ê¶ÇÂøµÈáçË¶ÅÂèÇÊï∞ ÂìàÂ∏åÊ°∂ÔºàbucketsÔºâÔºöÂú® HashMap ÁöÑÊ≥®ÈáäÈáå‰ΩøÁî®ÂìàÂ∏åÊ°∂Êù•ÂΩ¢Ë±°ÁöÑË°®Á§∫Êï∞ÁªÑ‰∏≠ÊØè‰∏™Âú∞ÂùÄ‰ΩçÁΩÆ„ÄÇÊ≥®ÊÑèËøôÈáåÂπ∂‰∏çÊòØÊï∞ÁªÑÊú¨Ë∫´ÔºåÊï∞ÁªÑÊòØË£ÖÂìàÂ∏åÊ°∂ÁöÑÔºå‰ªñÂèØ‰ª•Ë¢´Áß∞‰∏∫ÂìàÂ∏åË°®„ÄÇ ÂàùÂßãÂÆπÈáè(initial capacity) : Ëøô‰∏™ÂæàÂÆπÊòìÁêÜËß£ÔºåÂ∞±ÊòØÂìàÂ∏åË°®‰∏≠ÂìàÂ∏åÊ°∂ÂàùÂßãÁöÑÊï∞Èáè„ÄÇÂ¶ÇÊûúÊàë‰ª¨Ê≤°ÊúâÈÄöËøáÊûÑÈÄ†ÊñπÊ≥ï‰øÆÊîπËøô‰∏™ÂÆπÈáèÂÄºÈªòËÆ§‰∏∫DEFAULT_INITIAL_CAPACITY = 1&lt;&lt;4 Âç≥16„ÄÇÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØ‰∏∫‰∫Ü‰øùËØÅ HashMap Ê∑ªÂä†ÂíåÊü•ÊâæÁöÑÈ´òÊïàÊÄßÔºåHashMap ÁöÑÂÆπÈáèÊÄªÊòØ 2^n ÁöÑÂΩ¢ÂºèÔºå‰∏ãÊñá‰ºöËÆ≤‰∏∫‰ªÄ‰πà HashMap ÁöÑÂÆπÈáèÊÄªÊòØ 2^nÊ¨°Êñπ„ÄÇ Âä†ËΩΩÂõ†Â≠ê(load factor)ÔºöÂä†ËΩΩÂõ†Â≠êÊòØÂìàÂ∏åË°®ÔºàÊï£ÂàóË°®ÔºâÂú®ÂÖ∂ÂÆπÈáèËá™Âä®Â¢ûÂä†‰πãÂâçË¢´ÂÖÅËÆ∏Ëé∑ÂæóÁöÑÊúÄÂ§ßÊï∞ÈáèÁöÑÂ∫¶Èáè„ÄÇÂΩìÂìàÂ∏åË°®‰∏≠ÁöÑÊù°ÁõÆÊï∞ÈáèË∂ÖËøáË¥üËΩΩÂõ†Â≠êÂíåÂΩìÂâçÂÆπÈáèÁöÑ‰πòÁßØÊó∂ÔºåÊï£ÂàóË°®Â∞±‰ºöË¢´ÈáçÊñ∞Êò†Â∞ÑÔºàÂç≥ÈáçÂª∫ÂÜÖÈÉ®Êï∞ÊçÆÁªìÊûÑÔºâÔºåÈáçÊñ∞ÂàõÂª∫ÁöÑÊï£ÂàóË°®ÂÆπÈáèÂ§ßÁ∫¶ÊòØ‰πãÂâçÊï£ÂàóË°®ÂìàÁ≥ªÁªüÊ°∂Êï∞ÈáèÁöÑ‰∏§ÂÄç„ÄÇÈªòËÆ§Âä†ËΩΩÂõ†Â≠êÔºà0.75ÔºâÂú®Êó∂Èó¥ÂíåÁ©∫Èó¥ÊàêÊú¨‰πãÈó¥Êèê‰æõ‰∫ÜËâØÂ•ΩÁöÑÊäòË°∑„ÄÇÂä†ËΩΩÂõ†Â≠êËøáÂ§ß‰ºöÂØºËá¥ÂæàÂÆπÊòìÈìæË°®ËøáÈïøÔºåÂä†ËΩΩÂõ†Â≠êÂæàÂ∞èÂèàÂÆπÊòìÂØºËá¥È¢ëÁπÅÁöÑÊâ©ÂÆπ„ÄÇÊâÄ‰ª•‰∏çË¶ÅËΩªÊòìËØïÁùÄÂéªÊîπÂèòËøô‰∏™ÈªòËÆ§ÂÄº„ÄÇ Êâ©ÂÆπÈòàÂÄºÔºàthresholdÔºâÔºöÂÖ∂ÂÆûÂú®ËØ¥Âä†ËΩΩÂõ†Â≠êÁöÑÊó∂ÂÄôÂ∑≤ÁªèÊèêÂà∞‰∫ÜÊâ©ÂÆπÈòàÂÄº‰∫ÜÔºåÊâ©ÂÆπÈòàÂÄº = ÂìàÂ∏åË°®ÂÆπÈáè * Âä†ËΩΩÂõ†Â≠ê„ÄÇÂìàÂ∏åË°®ÁöÑÈîÆÂÄºÂØπÊÄªÊï∞ = ÊâÄÊúâÂìàÂ∏åÊ°∂‰∏≠ÊâÄÊúâÈìæË°®ËäÇÁÇπÊï∞ÁöÑÂä†ÂíåÔºåÊâ©ÂÆπÈòàÂÄºÊØîËæÉÁöÑÊòØÊòØÈîÆÂÄºÂØπÁöÑ‰∏™Êï∞ËÄå‰∏çÊòØÂìàÂ∏åË°®ÁöÑÊï∞ÁªÑ‰∏≠ÊúâÂ§öÂ∞ë‰∏™‰ΩçÁΩÆË¢´Âç†‰∫Ü„ÄÇ Ê†ëÂåñÈòÄÂÄº(TREEIFY_THRESHOLD) ÔºöËøô‰∏™ÂèÇÊï∞Ê¶ÇÂøµÊòØÂú® JDK1.8ÂêéÂä†ÂÖ•ÁöÑÔºåÂÆÉÁöÑÂê´‰πâ‰ª£Ë°®‰∏Ä‰∏™ÂìàÂ∏åÊ°∂‰∏≠ÁöÑËäÇÁÇπ‰∏™Êï∞Â§ß‰∫éËØ•ÂÄºÔºàÈªòËÆ§‰∏∫8ÔºâÁöÑÊó∂ÂÄôÂ∞Ü‰ºöË¢´ËΩ¨‰∏∫Á∫¢ÈªëÊ†ëË°åÂ≠òÂÇ®ÁªìÊûÑ„ÄÇ ÈùûÊ†ëÂåñÈòÄÂÄº(UNTREEIFY_THRESHOLD)Ôºö ‰∏éÊ†ëÂåñÈòàÂÄºÁõ∏ÂØπÂ∫îÔºåË°®Á§∫ÂΩì‰∏Ä‰∏™Â∑≤ÁªèËΩ¨Âåñ‰∏∫Êï∞ÂΩ¢Â≠òÂÇ®ÁªìÊûÑÁöÑÂìàÂ∏åÊ°∂‰∏≠ËäÇÁÇπÊï∞ÈáèÂ∞è‰∫éËØ•ÂÄºÔºàÈªòËÆ§‰∏∫ 6ÔºâÁöÑÊó∂ÂÄôÂ∞ÜÂÜçÊ¨°Êîπ‰∏∫ÂçïÈìæË°®ÁöÑÊ†ºÂºèÂ≠òÂÇ®„ÄÇÂØºËá¥ËøôÁßçÊìç‰ΩúÁöÑÂéüÂõ†ÂèØËÉΩÊúâÂà†Èô§ËäÇÁÇπÊàñËÄÖÊâ©ÂÆπ„ÄÇ ÊúÄÂ∞èÊ†ëÂåñÂÆπÈáè(MIN_TREEIFY_CAPACITY): ÁªèËøá‰∏äËæπÁöÑ‰ªãÁªçÊàë‰ª¨Âè™Áü•ÈÅìÔºåÂΩìÈìæË°®ÁöÑËäÇÁÇπÊï∞Ë∂ÖËøá8ÁöÑÊó∂ÂÄôÂ∞±‰ºöËΩ¨Âåñ‰∏∫Ê†ëÂåñÂ≠òÂÇ®ÔºåÂÖ∂ÂÆûÂØπ‰∫éËΩ¨ÂåñËøòÊúâ‰∏Ä‰∏™Ë¶ÅÊ±ÇÂ∞±ÊòØÂìàÂ∏åË°®ÁöÑÊï∞ÈáèË∂ÖËøáÊúÄÂ∞èÊ†ëÂåñÂÆπÈáèÁöÑË¶ÅÊ±ÇÔºàÈªòËÆ§Ë¶ÅÊ±ÇÊòØ 64Ôºâ,‰∏î‰∏∫‰∫ÜÈÅøÂÖçËøõË°åÊâ©ÂÆπ„ÄÅÊ†ëÂΩ¢ÂåñÈÄâÊã©ÁöÑÂÜ≤Á™ÅÔºåËøô‰∏™ÂÄº‰∏çËÉΩÂ∞è‰∫é 4 * TREEIFY_THRESHOLD);Âú®ËææÂà∞ËØ•Ë¶ÅÊ±Ç‰πãÂâç‰ºòÂÖàÈÄâÊã©Êâ©ÂÆπ„ÄÇÊâ©ÂÆπÂõ†‰∏∫Âõ†‰∏∫ÂÆπÈáèÁöÑÂèòÂåñÂèØËÉΩ‰ºö‰ΩøÂçïÈìæË°®ÁöÑÈïøÂ∫¶ÊîπÂèò„ÄÇ ‰∏éËøô‰∏™Âá†‰∏™Ê¶ÇÂøµÂØπÂ∫îÁöÑÂú® HashMap ‰∏≠Âá†‰∏™Â∏∏‰∫ÆÈáèÔºåÁî±‰∫é‰∏äËæπÁöÑ‰ªãÁªçÊØîËæÉËØ¶ÁªÜ‰∫ÜÔºå‰∏ãËæπ‰ªÖÂàóÂá∫Âá†‰∏™ÂèòÈáèÁöÑÂ£∞ÊòéÔºö 1234567891011121314151617/*ÈªòËÆ§ÂàùÂßãÂÆπÈáè*/static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16/*ÊúÄÂ§ßÂ≠òÂÇ®ÂÆπÈáè*/static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;/*ÈªòËÆ§Âä†ËΩΩÂõ†Â≠ê*/static final float DEFAULT_LOAD_FACTOR = 0.75f;/*ÈªòËÆ§Ê†ëÂåñÈòàÂÄº*/static final int TREEIFY_THRESHOLD = 8;/*ÈªòËÆ§ÈùûÊ†ëÂåñÈòàÂÄº*/static final int UNTREEIFY_THRESHOLD = 6;/*ÈªòËÆ§ÊúÄÂ∞èÊ†ëÂåñÂÆπÈáè*/static final int MIN_TREEIFY_CAPACITY = 64; ÂØπÂ∫îÁöÑËøòÊúâÂá†‰∏™ÂÖ®Â±ÄÂèòÈáèÔºö 1234567891011121314// Êâ©ÂÆπÈòàÂÄº = ÂÆπÈáè x Âä†ËΩΩÂõ†Â≠êint threshold;//Â≠òÂÇ®ÂìàÂ∏åÊ°∂ÁöÑÊï∞ÁªÑÔºåÂìàÂ∏åÊ°∂‰∏≠Ë£ÖÁöÑÊòØ‰∏Ä‰∏™ÂçïÈìæË°®Êàñ‰∏ÄÈ¢óÁ∫¢ÈªëÊ†ëÔºåÈïøÂ∫¶‰∏ÄÂÆöÊòØ 2^ntransient Node&lt;K,V&gt;[] table; // HashMap‰∏≠Â≠òÂÇ®ÁöÑÈîÆÂÄºÂØπÁöÑÊï∞ÈáèÊ≥®ÊÑèËøôÈáåÊòØÈîÆÂÄºÂØπÁöÑ‰∏™Êï∞ËÄå‰∏çÊòØÊï∞ÁªÑÁöÑÈïøÂ∫¶transient int size; //ÊâÄÊúâÈîÆÂÄºÂØπÁöÑSetÈõÜÂêà Âå∫ÂàÜ‰∫é table ÂèØ‰ª•Ë∞ÉÁî® entrySet(ÔºâÂæóÂà∞ËØ•ÈõÜÂêàtransient Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet; //Êìç‰ΩúÊï∞ËÆ∞ÂΩï ‰∏∫‰∫ÜÂ§öÁ∫øÁ®ãÊìç‰ΩúÊó∂ Fast-fail Êú∫Âà∂transient int modCount; ‰ΩúËÄÖÔºöÂÉè‰∏ÄÂè™ÁãóÈìæÊé•Ôºöhttps://juejin.im/post/5ac83fa35188255c5668afd0Êù•Ê∫êÔºöÊéòÈáë Âü∫Êú¨Â≠òÂÇ®ÂçïÂÖÉNode12345678910111213141516171819202122232425262728293031323334353637383940414243444546/** * Basic hash bin node, used for most entries. (See below for * TreeNode subclass, and in LinkedHashMap for its Entry subclass.) * 1.8‰∏≠Â∞ÜEntryÊîπÊàêNodeÔºàÂÜÖÈÉ®ÁªìÊûÑ‰∏çÂèòÔºâ * ËôΩÁÑ∂Âè™ÊòØÊîπ‰∫ÜÂêçÂ≠óÔºå‰ΩÜÂêçÂ≠óÁöÑÂèòÊõ¥‰ΩìÁé∞Âá∫HashMapÂØπ‰∫éËäÇÁÇπÊ¶ÇÂøµÁöÑÈáçËßÜ */ static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final int hash;//ÂìàÂ∏åÂÄº,Êñ∞Â¢ûfinalÂ±ûÊÄßÔºåË°®ÊòéhashÂÄº‰πü‰∏çÂèØÂèò‰∫ÜÔºåÊõ¥Âä†‰∏•Ë∞® final K key;//key V value;//value Node&lt;K,V&gt; next;//ÈìæË°®ÂêéÁΩÆËäÇÁÇπ Node(int hash, K key, V value, Node&lt;K,V&gt; next) &#123; this.hash = hash; this.key = key; this.value = value; this.next = next; &#125; public final K getKey() &#123; return key; &#125; public final V getValue() &#123; return value; &#125; public final String toString() &#123; return key + "=" + value; &#125; //ÊØè‰∏Ä‰∏™ËäÇÁÇπÁöÑhashÂÄºÔºåÊòØÂ∞Ü key ÁöÑ hashCode Âíå value ÁöÑ hashCode ÂºÇÊàñÂæóÂà∞ÁöÑ„ÄÇ public final int hashCode() &#123; return Objects.hashCode(key) ^ Objects.hashCode(value); &#125; //ËÆæÁΩÆÊñ∞ÁöÑvalue ÂêåÊó∂ËøîÂõûÊóßvalue public final V setValue(V newValue) &#123; V oldValue = value; value = newValue; return oldValue; &#125; public final boolean equals(Object o) &#123; if (o == this) return true; if (o instanceof Map.Entry) &#123; Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o; if (Objects.equals(key, e.getKey()) &amp;&amp; Objects.equals(value, e.getValue())) return true; &#125; return false; &#125; &#125; TreeNode12345678910111213141516171819202122232425262728293031/** * Entry for Tree bins. Extends LinkedHashMap.Entry (which in turn extends Node) * so can be used as extension of either regular or linked node. * Á∫¢ÈªëÊ†ëËäÇÁÇπ Áõ∏ÊØî‰∫éTreeMapÔºå * 1.Â¢ûÂä†preÊù•ËÆ∞ÂΩïÂâç‰∏Ä‰∏™ËäÇÁÇπ * 2.ÁªßÊâøLinkedHashMap.Entry&lt;K,V&gt;ÔºåËÄåLinkedHashMap.Entry&lt;K,V&gt;ÂèàÁªßÊâøHashMap.NodeÔºö * 1.Êã•Êúâ‰∫ÜNodeÂíåÈìæË°®NodeÁöÑÊâÄÊúâÂäüËÉΩ * 2.ÂÖ∑ÊúâÈ¢ùÂ§ñ6‰∏™Â±ûÊÄßEntry&lt;K,V&gt; before, after;final int hash;final K key;V value;Node&lt;K,V&gt; next; */static final class TreeNode&lt;K,V&gt; extends LinkedHashMap.Entry&lt;K,V&gt; &#123; TreeNode&lt;K,V&gt; parent; // Áà∂ËäÇÁÇπ TreeNode&lt;K,V&gt; left;//Â∑¶Â≠êËäÇÁÇπ TreeNode&lt;K,V&gt; right;//Âè≥Â≠êËäÇÁÇπ TreeNode&lt;K,V&gt; prev; // Ââç‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑËäÇÁÇπ boolean red;//ÊòØÂê¶ÊòØÁ∫¢ËäÇÁÇπ TreeNode(int hash, K key, V val, Node&lt;K,V&gt; next) &#123; super(hash, key, val, next); &#125; ...&#125;/** * LinkedHashMap.EntryÁöÑÂÆûÁé∞ * HashMap.Node subclass for normal LinkedHashMap entries. * ÂèØ‰ª•ÂèëÁé∞ÔºåÊúÄÁªàTreeNodeËøòÊòØÁªßÊâø‰∫ÜHashMap.NodeÁöÑÊâÄÊúâÂäüËÉΩÔºåÂ∫ïÂ±ÇÂÆûÁé∞ËøòÊòØNode */static class Entry&lt;K,V&gt; extends HashMap.Node&lt;K,V&gt; &#123; Entry&lt;K,V&gt; before, after; Entry(int hash, K key, V value, Node&lt;K,V&gt; next) &#123; super(hash, key, value, next); &#125;&#125; ÈáçË¶ÅÊñπÊ≥ïÁ°ÆÂÆöÂìàÂ∏åÊ°∂Êï∞ÁªÑÁ¥¢Âºï‰ΩçÁΩÆ‰∏çÁÆ°Â¢ûÂä†„ÄÅÂà†Èô§„ÄÅÊü•ÊâæÈîÆÂÄºÂØπÔºåÂÆö‰ΩçÂà∞ÂìàÂ∏åÊ°∂Êï∞ÁªÑÁöÑ‰ΩçÁΩÆÈÉΩÊòØÂæàÂÖ≥ÈîÆÁöÑÁ¨¨‰∏ÄÊ≠•„ÄÇÂâçÈù¢ËØ¥ËøáHashMapÁöÑÊï∞ÊçÆÁªìÊûÑÊòØÊï∞ÁªÑÂíåÈìæË°®ÁöÑÁªìÂêàÔºåÊâÄ‰ª•Êàë‰ª¨ÂΩìÁÑ∂Â∏åÊúõËøô‰∏™HashMapÈáåÈù¢ÁöÑÂÖÉÁ¥†‰ΩçÁΩÆÂ∞ΩÈáèÂàÜÂ∏ÉÂùáÂåÄ‰∫õÔºåÂ∞ΩÈáè‰ΩøÂæóÊØè‰∏™‰ΩçÁΩÆ‰∏äÁöÑÂÖÉÁ¥†Êï∞ÈáèÂè™Êúâ‰∏Ä‰∏™ÔºåÈÇ£‰πàÂΩìÊàë‰ª¨Áî®hashÁÆóÊ≥ïÊ±ÇÂæóËøô‰∏™‰ΩçÁΩÆÁöÑÊó∂ÂÄôÔºåÈ©¨‰∏äÂ∞±ÂèØ‰ª•Áü•ÈÅìÂØπÂ∫î‰ΩçÁΩÆÁöÑÂÖÉÁ¥†Â∞±ÊòØÊàë‰ª¨Ë¶ÅÁöÑÔºå‰∏çÁî®ÈÅçÂéÜÈìæË°®ÔºåÂ§ßÂ§ß‰ºòÂåñ‰∫ÜÊü•ËØ¢ÁöÑÊïàÁéá„ÄÇHashMapÂÆö‰ΩçÊï∞ÁªÑÁ¥¢Âºï‰ΩçÁΩÆÔºåÁõ¥Êé•ÂÜ≥ÂÆö‰∫ÜhashÊñπÊ≥ïÁöÑÁ¶ªÊï£ÊÄßËÉΩ„ÄÇÂÖàÁúãÁúãÊ∫êÁ†ÅÁöÑÂÆûÁé∞(ÊñπÊ≥ï‰∏Ä+ÊñπÊ≥ï‰∫å): 1234567891011//ÊñπÊ≥ï‰∏ÄÔºöÁß∞‰∏∫Êâ∞Âä®ÂáΩÊï∞static final int hash(Object key) &#123; //jdk1.8 &amp; jdk1.7 int h; // h = key.hashCode() ‰∏∫Á¨¨‰∏ÄÊ≠• ÂèñhashCodeÂÄº // h ^ (h &gt;&gt;&gt; 16) ‰∏∫Á¨¨‰∫åÊ≠• È´ò‰ΩçÂèÇ‰∏éËøêÁÆóÔºåÈ´ò16‰ΩçÂíå‰Ωé16‰ΩçËøõË°åÂºÇÊàñ return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);&#125;//ÊñπÊ≥ï‰∫åÔºöstatic int indexFor(int h, int length) &#123; //jdk1.7ÁöÑÊ∫êÁ†ÅÔºåjdk1.8Ê≤°ÊúâËøô‰∏™ÊñπÊ≥ïÔºå‰ΩÜÊòØÂÆûÁé∞ÂéüÁêÜ‰∏ÄÊ†∑ÁöÑ return h &amp; (length-1); //Á¨¨‰∏âÊ≠• ÂèñÊ®°ËøêÁÆó&#125; ËøôÈáåÁöÑHashÁÆóÊ≥ïÊú¨Ë¥®‰∏äÂ∞±ÊòØ‰∏âÊ≠•ÔºöÂèñkeyÁöÑhashCodeÂÄº„ÄÅÈ´ò‰ΩçËøêÁÆó„ÄÅÂèñÊ®°ËøêÁÆó„ÄÇ ÂØπ‰∫é‰ªªÊÑèÁªôÂÆöÁöÑÂØπË±°ÔºåÂè™Ë¶ÅÂÆÉÁöÑhashCode()ËøîÂõûÂÄºÁõ∏ÂêåÔºåÈÇ£‰πàÁ®ãÂ∫èË∞ÉÁî®ÊñπÊ≥ï‰∏ÄÊâÄËÆ°ÁÆóÂæóÂà∞ÁöÑHashÁ†ÅÂÄºÊÄªÊòØÁõ∏ÂêåÁöÑ„ÄÇÊàë‰ª¨È¶ñÂÖàÊÉ≥Âà∞ÁöÑÂ∞±ÊòØÊäähashÂÄºÂØπÊï∞ÁªÑÈïøÂ∫¶ÂèñÊ®°ËøêÁÆóÔºåËøôÊ†∑‰∏ÄÊù•ÔºåÂÖÉÁ¥†ÁöÑÂàÜÂ∏ÉÁõ∏ÂØπÊù•ËØ¥ÊòØÊØîËæÉÂùáÂåÄÁöÑ„ÄÇ‰ΩÜÊòØÔºåÊ®°ËøêÁÆóÁöÑÊ∂àËÄóËøòÊòØÊØîËæÉÂ§ßÁöÑÔºåÂú®HashMap‰∏≠ÊòØËøôÊ†∑ÂÅöÁöÑÔºöË∞ÉÁî®ÊñπÊ≥ï‰∫åÊù•ËÆ°ÁÆóËØ•ÂØπË±°Â∫îËØ•‰øùÂ≠òÂú®tableÊï∞ÁªÑÁöÑÂì™‰∏™Á¥¢ÂºïÂ§Ñ„ÄÇ Ëøô‰∏™ÊñπÊ≥ïÈùûÂ∏∏Â∑ßÂ¶ôÔºåÂÆÉÈÄöËøáh &amp; (table.length -1)Êù•ÂæóÂà∞ËØ•ÂØπË±°ÁöÑ‰øùÂ≠ò‰ΩçÔºåËÄåHashMapÂ∫ïÂ±ÇÊï∞ÁªÑÁöÑÈïøÂ∫¶ÊÄªÊòØ2ÁöÑnÊ¨°ÊñπÔºåËøôÊòØHashMapÂú®ÈÄüÂ∫¶‰∏äÁöÑ‰ºòÂåñ„ÄÇÂΩìlengthÊÄªÊòØ2ÁöÑnÊ¨°ÊñπÊó∂Ôºåh&amp; (length-1)ËøêÁÆóÁ≠â‰ª∑‰∫éÂØπlengthÂèñÊ®°Ôºå‰πüÂ∞±ÊòØh%lengthÔºå‰ΩÜÊòØ&amp;ÊØî%ÂÖ∑ÊúâÊõ¥È´òÁöÑÊïàÁéá„ÄÇ Âú®JDK1.8ÁöÑÂÆûÁé∞‰∏≠Ôºå‰ºòÂåñ‰∫ÜÈ´ò‰ΩçËøêÁÆóÁöÑÁÆóÊ≥ïÔºåÈÄöËøáhashCode()ÁöÑÈ´ò16‰ΩçÂºÇÊàñ‰Ωé16‰ΩçÂÆûÁé∞ÁöÑÔºö(h = k.hashCode()) ^ (h &gt;&gt;&gt; 16)Ôºå‰∏ªË¶ÅÊòØ‰ªéÈÄüÂ∫¶„ÄÅÂäüÊïà„ÄÅË¥®ÈáèÊù•ËÄÉËôëÁöÑÔºåËøô‰πàÂÅöÂèØ‰ª•Âú®Êï∞ÁªÑtableÁöÑlengthÊØîËæÉÂ∞èÁöÑÊó∂ÂÄôÔºå‰πüËÉΩ‰øùËØÅËÄÉËôëÂà∞È´ò‰ΩéBitÈÉΩÂèÇ‰∏éÂà∞HashÁöÑËÆ°ÁÆó‰∏≠ÔºåÂêåÊó∂‰∏ç‰ºöÊúâÂ§™Â§ßÁöÑÂºÄÈîÄ„ÄÇ ‰∏ãÈù¢‰∏æ‰æãËØ¥Êòé‰∏ãÔºån‰∏∫tableÁöÑÈïøÂ∫¶„ÄÇ PutÊñπÊ≥ï(Êñ∞Â¢û) ‚ë† Âà§Êñ≠ÈîÆÂÄºÂØπÊï∞ÁªÑtable[i]ÊòØÂê¶‰∏∫Á©∫Êàñ‰∏∫nullÔºåÂê¶ÂàôÊâßË°åresize()ËøõË°åÊâ©ÂÆπÔºõ ‚ë° Ê†πÊçÆÈîÆÂÄºkeyËÆ°ÁÆóhashÂÄºÂæóÂà∞ÊèíÂÖ•ÁöÑÊï∞ÁªÑÁ¥¢ÂºïiÔºåÂ¶ÇÊûútable[i]==nullÔºåÁõ¥Êé•Êñ∞Âª∫ËäÇÁÇπÊ∑ªÂä†ÔºåËΩ¨Âêë‚ë•ÔºåÂ¶ÇÊûútable[i]‰∏ç‰∏∫Á©∫ÔºåËΩ¨Âêë‚ë¢Ôºõ ‚ë¢ Âà§Êñ≠table[i]ÁöÑÈ¶ñ‰∏™ÂÖÉÁ¥†ÊòØÂê¶Âíåkey‰∏ÄÊ†∑ÔºåÂ¶ÇÊûúÁõ∏ÂêåÁõ¥Êé•Ë¶ÜÁõñvalueÔºåÂê¶ÂàôËΩ¨Âêë‚ë£ÔºåËøôÈáåÁöÑÁõ∏ÂêåÊåáÁöÑÊòØhashCode‰ª•ÂèäequalsÔºõ ‚ë£ Âà§Êñ≠table[i] ÊòØÂê¶‰∏∫treeNodeÔºåÂç≥table[i] ÊòØÂê¶ÊòØÁ∫¢ÈªëÊ†ëÔºåÂ¶ÇÊûúÊòØÁ∫¢ÈªëÊ†ëÔºåÂàôÁõ¥Êé•Âú®Ê†ë‰∏≠ÊèíÂÖ•ÈîÆÂÄºÂØπÔºåÂê¶ÂàôËΩ¨Âêë‚ë§Ôºõ ‚ë§ ÈÅçÂéÜtable[i]ÔºåÂà§Êñ≠ÈìæË°®ÈïøÂ∫¶ÊòØÂê¶Â§ß‰∫é8ÔºåÂ§ß‰∫é8ÁöÑËØùÔºåËøõÂÖ•Âà∞ treeifyBin()Ôºå‰ºöÂÖàÂéªÂà§Êñ≠ÂΩìÂâçÂìàÂ∏åÊ°∂Â§ßÂ∞èÊòØ‰∏çÊòØÂà∞‰∫Ü MIN_TREEIFY_CAPACITY ÔºàÈªòËÆ§ÊòØ 64ÔºâÔºåÂ¶ÇÊûúÊ≤°ÊúâÂ∞±Áõ¥Êé•Êâ©ÂÆπÔºåÂ¶ÇÊûúÂà∞‰∫Ü64Ôºà‚â•64ÔºâÔºåÂ∞±ÊääÈìæË°®ËΩ¨Êç¢‰∏∫Á∫¢ÈªëÊ†ëÔºåÂú®Á∫¢ÈªëÊ†ë‰∏≠ÊâßË°åÊèíÂÖ•Êìç‰ΩúÔºåÂê¶ÂàôËøõË°åÈìæË°®ÁöÑÊèíÂÖ•Êìç‰ΩúÔºõÈÅçÂéÜËøáÁ®ã‰∏≠Ëã•ÂèëÁé∞keyÂ∑≤ÁªèÂ≠òÂú®Áõ¥Êé•Ë¶ÜÁõñvalueÂç≥ÂèØÔºõ ‚ë• ÊèíÂÖ•ÊàêÂäüÂêéÔºåÂà§Êñ≠ÂÆûÈôÖÂ≠òÂú®ÁöÑÈîÆÂÄºÂØπÊï∞ÈáèsizeÊòØÂê¶Ë∂ÖÂ§ö‰∫ÜÊúÄÂ§ßÂÆπÈáèthresholdÔºåÂ¶ÇÊûúË∂ÖËøáÔºåËøõË°åÊâ©ÂÆπ„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879public V put(K key, V value) &#123; return putVal(hash(key), key, value, false, true);&#125;/** * Implements Map.put and related methods * Êñ∞Â¢ûÈîÆÂÄºÂØπ * @param hash hash for key * @param key the key * @param value the value to put * @param onlyIfAbsent if true, don't change existing value * @param evict if false, the table is in creation mode. * @return previous value, or null if none *///Ê≥®ÊÑè ‰∏çÂèØ‰ª•Ë¢´ÁªßÊâøÈáçËΩΩ Â¶ÇÊûú‰ΩøÁî®hashMapÁöÑÊñπÂºèÁöÑËØùfinal V putVal(int hash, K key, V value, boolean onlyIfAbsent,boolean evict) &#123; Node&lt;K, V&gt;[] tab; Node&lt;K, V&gt; p; int n, i; //ÂΩìÊï∞ÁªÑ‰∏∫Á©∫Êó∂ if ((tab = table) == null || (n = tab.length) == 0) &#123; n = (tab = resize()).length;//ÂΩìÂàùÂßãÂåñÊàñËÄÖÂΩìÂâçÊï∞ÁªÑÈïøÂ∫¶‰∏∫0Êó∂ÔºåÈúÄË¶ÅÈáçÊñ∞resizeÂπ∂ËøîÂõûÊñ∞ÁöÑÈïøÂ∫¶ &#125; //Áõ∏ÂΩì‰∫éÈÄöËøá h &amp; (length-1) ËÆ°ÁÆó‰∏ãÊ†áÂπ∂Ëé∑ÂèñÂÖÉÁ¥† if ((p = tab[i = (n - 1) &amp; hash]) == null)&#123; //Ëã•ÂΩìÂâç‰∏ãÊ†á‰ΩçÁΩÆÁ©∫ÁΩÆÔºàÂç≥ËØ•key‰∏çÂ≠òÂú®ÔºâÔºåÂ∞±Êñ∞Âª∫‰∏Ä‰∏™ÊôÆÈÄö(non-tree)ËäÇÁÇπ tab[i] = newNode(hash, key, value, null); &#125;else &#123; //ÂΩìËØ•keyÂ≠òÂú®ÊàñËÄÖÂèëÁîühashÂÜ≤Á™ÅÊó∂ Node&lt;K,V&gt; e; K k; //Ëã•Âú®Êï∞ÁªÑ‰∏≠ÈÄöËøáhashÂíåequalsÊØîËæÉËÉΩÂ§üÁõ¥Êé•ÊâæÂà∞ËØ•ÂÄºÔºåÂ∞±Ë¶ÜÁõñÊóßÂÄº //Âç≥ÂΩìÂâçÊ°∂Âç≥ÈùûÈìæË°®‰πüÈùûÁ∫¢ÈªëÊ†ë if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))&#123; e = p;//Ë¶ÜÁõñ &#125; //Âê¶ÂàôÈúÄË¶ÅÂÖàÂà§Êñ≠ËäÇÁÇπÊòØÂê¶ÊòØÁ∫¢ÈªëÊ†ëËäÇÁÇπ else if (p instanceof TreeNode)&#123;//Ëã•ÊòØÁ∫¢ÈªëÊ†ëÁ±ªÂûãÔºåÊâßË°åÊ†ëËäÇÁÇπputTreeValÊìç‰Ωú e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value); &#125; else &#123; //Ê≠§Êó∂ÂèëÁîü‰∫ÜÂÜ≤Á™Å for (int binCount = 0; ; ++binCount) &#123; //Â¶ÇÊûúÊ≠§Êó∂ÁöÑÊ°∂Ëøò‰∏çÊòØÈìæË°®ÔºåÈúÄË¶ÅËΩ¨Âèò‰∏∫ÈìæË°® ÊàñËÄÖ Â¶ÇÊûúÂú®ÈìæË°®‰∏≠Ê≤°ÊúâÔºåÈÇ£Â∞±Êñ∞Â¢û‰∏Ä‰∏™ËäÇÁÇπ if ((e = p.next) == null) &#123; //Ê≥®ÊÑèÈìæË°®ÊèíÂÖ•Êó∂1.7‰∏é1.8ÊòØ‰∏çÂêåÁöÑ //1.7:ÊòØÂ§¥ÊèíÂÖ•Ê≥ïÔºåÂêéÊù•ÁöÑÁïôÂú®Êï∞ÁªÑ‰∏äÔºåÂÖàÊù•ÁöÑÈìæÂú®Â∞æ‰∏äÔºàÈÅçÂéÜÊó∂ÊòØÂÖàËøõÂêéÂá∫Ôºâ //1.8:ÊòØÂ∞æÊèíÂÖ•Ê≥ïÔºåÂÖàÊù•ÁöÑÁïôÂú®Êï∞ÁªÑ‰∏äÔºåÂêéÊù•ÁöÑÈìæÂú®Â∞æ‰∏äÔºàÈÅçÂéÜÊó∂ÊòØÂÖàËøõÂÖàÂá∫Ôºâ p.next = newNode(hash, key, value, null); //Â¶ÇÊûúÊ°∂ÁöÑÈìæË°®ÈïøÂ∫¶&gt;=Ê°∂ÁöÑÊ†ëÂåñÈòàÂÄºÔºåÈúÄË¶ÅÂ∞ÜÈìæË°®ËΩ¨Âèò‰∏∫Á∫¢ÈªëÊ†ë //ËøôÈáåÈúÄË¶ÅÊ≥®ÊÑèÔºöÊòØÂÖàÊñ∞Â¢ûÂÖÉÁ¥†‰πãÂêéÂÜçÂà§Êñ≠Ê†ëÂåñÊù°‰ª∂ÔºåËÄå‰∏çÊòØÂÖàÊ†ëÂåñÂÜçÊñ∞Â¢û if (binCount &gt;= TREEIFY_THRESHOLD - 1) treeifyBin(tab, hash); //ÂΩìÂâçÊ°∂Ê†ëÂåñ break; &#125; //Â¶ÇÊûúÂú®ÈìæË°®‰∏≠Â∑≤ÁªèÂ≠òÂú®ËØ•ÂÄºÔºåÂ∞±Ë¶ÜÁõñÊóßÂÄº if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) break; p = e; &#125; &#125; //ÂéüÂàôÔºöÁî®Êñ∞ÂÄºË¶ÜÁõñÊóßÂÄº if (e != null) &#123; // existing mapping for key V oldValue = e.value; //onlyIfAbsent Ëã•ÊòØtrueÔºå‰∏çÂÖÅËÆ∏Ë¶ÜÁõñ if (!onlyIfAbsent || oldValue == null) e.value = value; afterNodeAccess(e);//Áõ∏ÂΩì‰∫é1.7ÁöÑafterNodeAccessÔºåLinkedHashMap‰∏ìÁî®ÔºåÁî®‰∫éÊúâÂ∫èÊéßÂà∂ return oldValue; &#125; &#125; ++modCount; if (++size &gt; threshold)//Ë∂ÖËøáÈòàÂÄºÂ∞±Êâ©ÂÆπ resize(); afterNodeInsertion(evict);//LinkedHashMap‰∏ìÁî®ÔºåÁî®‰∫éÂà†Èô§ÊúÄÊóßÂÖÉÁ¥† (remove eldest) return null;&#125;// Create a regular (non-tree) node ÂàõÂª∫‰∏Ä‰∏™ÊôÆÈÄöÁöÑÈùûÊ†ëËäÇÁÇπNode&lt;K,V&gt; newNode(int hash, K key, V value, Node&lt;K,V&gt; next) &#123; return new Node&lt;&gt;(hash, key, value, next);&#125; resizeÊñπÊ≥ï(Êâ©ÂÆπ)Êï¥‰ΩìÂàÜ‰∏∫‰∏§ÈÉ®ÂàÜÔºö1. ÂØªÊâæÊâ©ÂÆπÂêéÊï∞ÁªÑÁöÑÂ§ßÂ∞è‰ª•ÂèäÊñ∞ÁöÑÊâ©ÂÆπÈòàÂÄºÔºå2. Â∞ÜÂéüÊúâÂìàÂ∏åË°®Êã∑Ë¥ùÂà∞Êñ∞ÁöÑÂìàÂ∏åË°®‰∏≠„ÄÇ Êàë‰ª¨ÂàÜÊûê‰∏ãresizeÁöÑÊ∫êÁ†ÅÔºåÈâ¥‰∫éJDK1.8ËûçÂÖ•‰∫ÜÁ∫¢ÈªëÊ†ëÔºåËæÉÂ§çÊùÇÔºå‰∏∫‰∫Ü‰æø‰∫éÁêÜËß£Êàë‰ª¨‰ªçÁÑ∂‰ΩøÁî®JDK1.7ÁöÑ‰ª£Á†ÅÔºåÂ•ΩÁêÜËß£‰∏Ä‰∫õÔºåÊú¨Ë¥®‰∏äÂå∫Âà´‰∏çÂ§ßÔºåÂÖ∑‰ΩìÂå∫Âà´ÂêéÊñáÂÜçËØ¥„ÄÇ 12345678910111213void resize(int newCapacity) &#123; //‰º†ÂÖ•Êñ∞ÁöÑÂÆπÈáè Entry[] oldTable = table; //ÂºïÁî®Êâ©ÂÆπÂâçÁöÑEntryÊï∞ÁªÑ int oldCapacity = oldTable.length; if (oldCapacity == MAXIMUM_CAPACITY) &#123; //Êâ©ÂÆπÂâçÁöÑÊï∞ÁªÑÂ§ßÂ∞èÂ¶ÇÊûúÂ∑≤ÁªèËææÂà∞ÊúÄÂ§ß(2^30)‰∫Ü threshold = Integer.MAX_VALUE; //‰øÆÊîπÈòàÂÄº‰∏∫intÁöÑÊúÄÂ§ßÂÄº(2^31-1)ÔºåËøôÊ†∑‰ª•ÂêéÂ∞±‰∏ç‰ºöÊâ©ÂÆπ‰∫Ü return; &#125; Entry[] newTable = new Entry[newCapacity]; //ÂàùÂßãÂåñ‰∏Ä‰∏™Êñ∞ÁöÑEntryÊï∞ÁªÑ transfer(newTable); //ÔºÅÔºÅÂ∞ÜÊï∞ÊçÆËΩ¨ÁßªÂà∞Êñ∞ÁöÑEntryÊï∞ÁªÑÈáå table = newTable; //HashMapÁöÑtableÂ±ûÊÄßÂºïÁî®Êñ∞ÁöÑEntryÊï∞ÁªÑ threshold = (int)(newCapacity * loadFactor);//‰øÆÊîπÈòàÂÄº&#125; ËøôÈáåÂ∞±ÊòØ‰ΩøÁî®‰∏Ä‰∏™ÂÆπÈáèÊõ¥Â§ßÁöÑÊï∞ÁªÑÊù•‰ª£ÊõøÂ∑≤ÊúâÁöÑÂÆπÈáèÂ∞èÁöÑÊï∞ÁªÑÔºåtransfer()ÊñπÊ≥ïÂ∞ÜÂéüÊúâEntryÊï∞ÁªÑÁöÑÂÖÉÁ¥†Êã∑Ë¥ùÂà∞Êñ∞ÁöÑEntryÊï∞ÁªÑÈáå„ÄÇ 1234567891011121314151617void transfer(Entry[] newTable) &#123; Entry[] src = table; //srcÂºïÁî®‰∫ÜÊóßÁöÑEntryÊï∞ÁªÑ int newCapacity = newTable.length; for (int j = 0; j &lt; src.length; j++) &#123; //ÈÅçÂéÜÊóßÁöÑEntryÊï∞ÁªÑ Entry&lt;K,V&gt; e = src[j]; //ÂèñÂæóÊóßEntryÊï∞ÁªÑÁöÑÊØè‰∏™ÂÖÉÁ¥† if (e != null) &#123; src[j] = null;//ÈáäÊîæÊóßEntryÊï∞ÁªÑÁöÑÂØπË±°ÂºïÁî®ÔºàforÂæ™ÁéØÂêéÔºåÊóßÁöÑEntryÊï∞ÁªÑ‰∏çÂÜçÂºïÁî®‰ªª‰ΩïÂØπË±°Ôºâ do &#123; Entry&lt;K,V&gt; next = e.next; int i = indexFor(e.hash, newCapacity); //ÔºÅÔºÅÈáçÊñ∞ËÆ°ÁÆóÊØè‰∏™ÂÖÉÁ¥†Âú®Êï∞ÁªÑ‰∏≠ÁöÑ‰ΩçÁΩÆ e.next = newTable[i]; //Ê†áËÆ∞[1] newTable[i] = e; //Â∞ÜÂÖÉÁ¥†ÊîæÂú®Êï∞ÁªÑ‰∏ä e = next; //ËÆøÈóÆ‰∏ã‰∏Ä‰∏™EntryÈìæ‰∏äÁöÑÂÖÉÁ¥† &#125; while (e != null); &#125; &#125;&#125; newTable[i]ÁöÑÂºïÁî®ËµãÁªô‰∫Üe.nextÔºå‰πüÂ∞±ÊòØ‰ΩøÁî®‰∫ÜÂçïÈìæË°®ÁöÑÂ§¥ÊèíÂÖ•ÊñπÂºèÔºåÂêå‰∏Ä‰ΩçÁΩÆ‰∏äÊñ∞ÂÖÉÁ¥†ÊÄª‰ºöË¢´ÊîæÂú®ÈìæË°®ÁöÑÂ§¥ÈÉ®‰ΩçÁΩÆÔºõËøôÊ†∑ÂÖàÊîæÂú®‰∏Ä‰∏™Á¥¢Âºï‰∏äÁöÑÂÖÉÁ¥†Áªà‰ºöË¢´ÊîæÂà∞EntryÈìæÁöÑÂ∞æÈÉ®(Â¶ÇÊûúÂèëÁîü‰∫ÜhashÂÜ≤Á™ÅÁöÑËØùÔºâÔºåËøô‰∏ÄÁÇπÂíåJdk1.8ÊúâÂå∫Âà´Ôºå‰∏ãÊñáËØ¶Ëß£„ÄÇÂú®ÊóßÊï∞ÁªÑ‰∏≠Âêå‰∏ÄÊù°EntryÈìæ‰∏äÁöÑÂÖÉÁ¥†ÔºåÈÄöËøáÈáçÊñ∞ËÆ°ÁÆóÁ¥¢Âºï‰ΩçÁΩÆÂêéÔºåÊúâÂèØËÉΩË¢´ÊîæÂà∞‰∫ÜÊñ∞Êï∞ÁªÑÁöÑ‰∏çÂêå‰ΩçÁΩÆ‰∏ä„ÄÇ ‰∏ãÈù¢‰∏æ‰∏™‰æãÂ≠êËØ¥Êòé‰∏ãÊâ©ÂÆπËøáÁ®ã„ÄÇÂÅáËÆæ‰∫ÜÊàë‰ª¨ÁöÑhashÁÆóÊ≥ïÂ∞±ÊòØÁÆÄÂçïÁöÑÁî®key mod ‰∏Ä‰∏ãË°®ÁöÑÂ§ßÂ∞èÔºà‰πüÂ∞±ÊòØÊï∞ÁªÑÁöÑÈïøÂ∫¶Ôºâ„ÄÇÂÖ∂‰∏≠ÁöÑÂìàÂ∏åÊ°∂Êï∞ÁªÑtableÁöÑsize=2Ôºå ÊâÄ‰ª•key = 3„ÄÅ7„ÄÅ5ÔºåputÈ°∫Â∫è‰æùÊ¨°‰∏∫ 5„ÄÅ7„ÄÅ3„ÄÇÂú®mod 2‰ª•ÂêéÈÉΩÂÜ≤Á™ÅÂú®table[1]ËøôÈáå‰∫Ü„ÄÇËøôÈáåÂÅáËÆæË¥üËΩΩÂõ†Â≠ê loadFactor=1ÔºåÂç≥ÂΩìÈîÆÂÄºÂØπÁöÑÂÆûÈôÖÂ§ßÂ∞èsize Â§ß‰∫é tableÁöÑÂÆûÈôÖÂ§ßÂ∞èÊó∂ËøõË°åÊâ©ÂÆπ„ÄÇÊé•‰∏ãÊù•ÁöÑ‰∏â‰∏™Ê≠•È™§ÊòØÂìàÂ∏åÊ°∂Êï∞ÁªÑ resizeÊàê4ÔºåÁÑ∂ÂêéÊâÄÊúâÁöÑNodeÈáçÊñ∞rehashÁöÑËøáÁ®ã„ÄÇ ‰∏ãÈù¢Êàë‰ª¨ËÆ≤Ëß£‰∏ãJDK1.8ÂÅö‰∫ÜÂì™‰∫õ‰ºòÂåñ„ÄÇÁªèËøáËßÇÊµãÂèØ‰ª•ÂèëÁé∞ÔºåÊàë‰ª¨‰ΩøÁî®ÁöÑÊòØ2Ê¨°ÂπÇÁöÑÊâ©Â±ï(ÊåáÈïøÂ∫¶Êâ©‰∏∫ÂéüÊù•2ÂÄç)ÔºåÊâÄ‰ª•ÔºåÂÖÉÁ¥†ÁöÑ‰ΩçÁΩÆË¶Å‰πàÊòØÂú®Âéü‰ΩçÁΩÆÔºåË¶Å‰πàÊòØÂú®Âéü‰ΩçÁΩÆÂÜçÁßªÂä®2Ê¨°ÂπÇÁöÑ‰ΩçÁΩÆ„ÄÇÁúã‰∏ãÂõæÂèØ‰ª•ÊòéÁôΩËøôÂè•ËØùÁöÑÊÑèÊÄùÔºån‰∏∫tableÁöÑÈïøÂ∫¶ÔºåÂõæÔºàaÔºâË°®Á§∫Êâ©ÂÆπÂâçÁöÑkey1Âíåkey2‰∏§ÁßçkeyÁ°ÆÂÆöÁ¥¢Âºï‰ΩçÁΩÆÁöÑÁ§∫‰æãÔºåÂõæÔºàbÔºâË°®Á§∫Êâ©ÂÆπÂêékey1Âíåkey2‰∏§ÁßçkeyÁ°ÆÂÆöÁ¥¢Âºï‰ΩçÁΩÆÁöÑÁ§∫‰æãÔºåÂÖ∂‰∏≠hash1ÊòØkey1ÂØπÂ∫îÁöÑÂìàÂ∏å‰∏éÈ´ò‰ΩçËøêÁÆóÁªìÊûú„ÄÇ ÂÖÉÁ¥†Âú®ÈáçÊñ∞ËÆ°ÁÆóhash‰πãÂêéÔºåÂõ†‰∏∫nÂèò‰∏∫2ÂÄçÔºåÈÇ£‰πàn-1ÁöÑmaskËåÉÂõ¥Âú®È´ò‰ΩçÂ§ö1bit(Á∫¢Ëâ≤)ÔºåÂõ†Ê≠§Êñ∞ÁöÑindexÂ∞±‰ºöÂèëÁîüËøôÊ†∑ÁöÑÂèòÂåñÔºö Âõ†Ê≠§ÔºåÊàë‰ª¨Âú®Êâ©ÂÖÖHashMapÁöÑÊó∂ÂÄôÔºå‰∏çÈúÄË¶ÅÂÉèJDK1.7ÁöÑÂÆûÁé∞ÈÇ£Ê†∑ÈáçÊñ∞ËÆ°ÁÆóhashÔºåÂè™ÈúÄË¶ÅÁúãÁúãÂéüÊù•ÁöÑhashÂÄºÊñ∞Â¢ûÁöÑÈÇ£‰∏™bitÊòØ1ËøòÊòØ0Â∞±Â•Ω‰∫ÜÔºåÊòØ0ÁöÑËØùÁ¥¢ÂºïÊ≤°ÂèòÔºåÊòØ1ÁöÑËØùÁ¥¢ÂºïÂèòÊàê‚ÄúÂéüÁ¥¢Âºï+oldCap‚ÄùÔºåÂèØ‰ª•ÁúãÁúã‰∏ãÂõæ‰∏∫16Êâ©ÂÖÖ‰∏∫32ÁöÑresizeÁ§∫ÊÑèÂõæÔºö Ëøô‰∏™ËÆæËÆ°Á°ÆÂÆûÈùûÂ∏∏ÁöÑÂ∑ßÂ¶ôÔºåÊó¢ÁúÅÂéª‰∫ÜÈáçÊñ∞ËÆ°ÁÆóhashÂÄºÁöÑÊó∂Èó¥ÔºåËÄå‰∏îÂêåÊó∂ÔºåÁî±‰∫éÊñ∞Â¢ûÁöÑ1bitÊòØ0ËøòÊòØ1ÂèØ‰ª•ËÆ§‰∏∫ÊòØÈöèÊú∫ÁöÑÔºåÂõ†Ê≠§resizeÁöÑËøáÁ®ãÔºåÂùáÂåÄÁöÑÊää‰πãÂâçÁöÑÂÜ≤Á™ÅÁöÑËäÇÁÇπÂàÜÊï£Âà∞Êñ∞ÁöÑbucket‰∫Ü„ÄÇËøô‰∏ÄÂùóÂ∞±ÊòØJDK1.8Êñ∞Â¢ûÁöÑ‰ºòÂåñÁÇπ„ÄÇÊúâ‰∏ÄÁÇπÊ≥®ÊÑèÂå∫Âà´ÔºåJDK1.7‰∏≠rehashÁöÑÊó∂ÂÄôÔºåÊóßÈìæË°®ËøÅÁßªÊñ∞ÈìæË°®ÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÂú®Êñ∞Ë°®ÁöÑÊï∞ÁªÑÁ¥¢Âºï‰ΩçÁΩÆÁõ∏ÂêåÔºåÂàôÈìæË°®ÂÖÉÁ¥†‰ºöÂÄíÁΩÆÔºå‰ΩÜÊòØ‰ªé‰∏äÂõæÂèØ‰ª•ÁúãÂá∫ÔºåJDK1.8‰∏ç‰ºöÂÄíÁΩÆ„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107/** * Initializes or doubles table size. If null, allocates in accord with initial capacity * target held in field threshold. Otherwise, because we are using power-of-two expansion, * the elements from each bin must either stay at same index, or move with a power of two * offset in the new table. * ÂàùÂßãÂåñMapÊàñ2ÂÄçÊâ©ÂÆπÔºå‰∏î‰ºöÂùáÂåÄÁöÑÊää‰πãÂâçÁöÑÂÜ≤Á™ÅÁöÑËäÇÁÇπÂàÜÊï£Âà∞Êñ∞ÁöÑÊ°∂‰∏≠ * ÂΩìMap‰∏∫Á©∫Êó∂ÔºåÂ∞ÜÂàÜÈÖç‰∏éÈòàÂÄº‰∏ÄÊ†∑Â§ßÂ∞èÁöÑÂÆπÈáè * ÂΩìMap‰∏ç‰∏∫Á©∫Êó∂ÔºåÁî±‰∫é2Ê¨°ÂπÇÊâ©ÂÆπÔºåÂÖÉÁ¥†‰ΩçÁΩÆ‰ºö‰∫ßÁîü‰∏§ÁßçÊÉÖÂÜµ * 1.Ë¶Å‰πàÂÖÉÁ¥†ÊâÄÂú®‰ΩçÁΩÆ‰∏çÂèò * 2.Ë¶Å‰πàÂÖÉÁ¥†ÊâÄÂú®‰ΩçÁΩÆÂèòÂä®ÔºöÂêëÂè≥‰ΩçÁßª2Ê¨°ÂπÇ‰ΩçÁΩÆ * Ê≥®ÊÑèÔºöÁî±‰∫é1.8‰∏≠ÂÆπÈáèÊòØÊ†πÊçÆÈòàÂÄºÂæóÊù•ÁöÑÔºåÂõ†Ê≠§ËØªËÄÖ‰ºöÂú®1.8‰∏≠ÁúãÂà∞ÂæàÂ§öÂØπÈòàÂÄºÁöÑÂà§Êñ≠ÂíåÂ§ÑÁêÜÔºåËøôÁÇπ‰∏ÄÂÆöË¶ÅÊ∏ÖÊ•ö * @return the table */final Node&lt;K,V&gt;[] resize() &#123; Node&lt;K,V&gt;[] oldTab = table;//Áî±‰∫éÊñ∞Êï∞ÁªÑ‰ºöË¶ÜÁõñÊóßÊï∞ÁªÑÔºåÊâÄ‰ª•Ë¶Å‰∏¥Êó∂ÂÖàÂ§á‰ªΩ‰∏Ä‰ªΩÔºåÁî®‰∫éÂØπÊñ∞Êï∞ÁªÑÈáçÊñ∞ËµãÂÄº int oldCap = (oldTab == null) ? 0 : oldTab.length; int oldThr = threshold; int newCap, newThr = 0; if (oldCap &gt; 0) &#123;//ÂΩìMap‰∏ç‰∏∫Á©∫Êó∂ //‰∏¥ÁïåÂ§ÑÁêÜÔºöÊúÄÂ§ßÂÄº if (oldCap &gt;= MAXIMUM_CAPACITY) &#123; threshold = Integer.MAX_VALUE;//ÊúÄÂ§ßÂÄºÂÖ∂ÂÆûÊòØIntegerÁöÑÊúÄÂ§ßÂÄº return oldTab; &#125; //Ëã•2ÂÄçÂÆπÈáè &lt; MAXIMUM_CAPACITY ÂêåÊó∂ ÂéüÂÆπÈáè&gt;=ÈªòËÆ§ÂÆπÈáè(Âç≥16)ÔºåÈÇ£‰πàÂ∞±Êâ©ÂÆπ2ÂÄç else if ((newCap = oldCap &lt;&lt; 1) &lt; MAXIMUM_CAPACITY &amp;&amp; oldCap &gt;= DEFAULT_INITIAL_CAPACITY) newThr = oldThr &lt;&lt; 1; // double threshold ÈòàÂÄºÁõ¥Êé•‰∏§ÂÄçÔºàÂÆπÈáèÈÉΩÊòØÊ†πÊçÆÈòàÂÄºÊù•ÁöÑÔºâ &#125; else if (oldThr &gt; 0)&#123;//ÂΩìMap‰∏∫Á©∫Êó∂ÔºåÈúÄË¶ÅÂà§Êñ≠ÈòàÂÄºÊòØÂê¶&gt;0 newCap = oldThr;//ÈòàÂÄºÂç≥Êñ∞ÂÆπÈáèÔºàÊ≥®ÊÑèÔºöÂàùÂßãÂåñÊó∂ÂÄôÂ∞±ÊòØÊâßË°åËØ•Êìç‰ΩúÂÆåÊàêÂÆπÈáèËµãÂÄºÔºâ // initial capacity was placed in thresholdÔºàÂÆπÈáèÈÉΩÊòØÊ†πÊçÆÈòàÂÄºÊù•ÁöÑÔºâ &#125; else &#123; //ÂΩìMap‰∏∫Á©∫Ôºå‰∏îÈòàÂÄº‰∏çÊòØÂ§ß‰∫é0ÔºàÂç≥Êó†ÊïàÈòàÂÄºÔºâÔºåÈÇ£‰πàÂ∞±‰ΩøÁî®ÈªòËÆ§ÂÄº // zero initial threshold signifies using defaults newCap = DEFAULT_INITIAL_CAPACITY;//1 &lt;&lt; 4 = 16 newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);//0.75 * 16 = 12 &#125; //ÂΩìÊñ∞ÈòàÂÄºÊ≤°ÊúâË¢´ÈáçÁΩÆÊó∂ÔºåÈúÄË¶ÅÊ†πÊçÆ Êñ∞ÂÆπÈáèÂíåË¥üËΩΩÂõ†Â≠ê ÈáçÊñ∞ËÆ°ÁÆóÂá∫Êñ∞ÁöÑÈòàÂÄº //Ê≥®ÊÑèÔºöÂàùÂßãÂåñÁöÑÊó∂ÂÄôÔºåÈòàÂÄº‰ºöË¢´ÈáçÁΩÆÔºåÂç≥Ê≠§Êó∂ ÈòàÂÄºÔºÅ=ÂÆπÈáè ÔºåÂÆπÈáèÂ∑≤ÁªèÂú®(oldThr &gt; 0)Êó∂ÈáçÁΩÆËøá‰∫Ü if (newThr == 0) &#123; //Á≠âÂêå‰∫é1.7ÁâàÊú¨Ôºöthreshold = (int)Math.min(capacity * loadFactor, MAXIMUM_CAPACITY + 1); float ft = (float)newCap * loadFactor; newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (float)MAXIMUM_CAPACITY ? (int)ft : Integer.MAX_VALUE); &#125; threshold = newThr;//ÈáçÁΩÆÁªôÁúüÂÆûÈòàÂÄº @SuppressWarnings(&#123;"rawtypes","unchecked"&#125;) Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])new Node[newCap];//Êñ∞Âª∫‰∏Ä‰∏™Êñ∞ÂÆπÈáèÁöÑNodeÊï∞ÁªÑ table = newTab;//Ë¶ÜÁõñÂéüÊï∞ÁªÑÔºàÁ¨¨‰∏ÄË°åÂ∑≤ÁªèÂ§á‰ªΩ‰∫ÜÔºâ //ÂΩìÂéüÊï∞ÁªÑÈùûÁ©∫ÔºåÈúÄË¶ÅÂØπÊñ∞Êï∞ÁªÑÈáçÊñ∞Â°´ÂÖÖ if (oldTab != null) &#123; //ÈÅçÂéÜ for (int j = 0; j &lt; oldCap; ++j) &#123; Node&lt;K,V&gt; e;//Áî®‰∫éÂ§á‰ªΩÂΩìÂâçËäÇÁÇπ //Ëã•ËØ•Êï∞ÁªÑ‰∏ãÊ†á‰ΩçÁΩÆÈùûÁ©∫ if ((e = oldTab[j]) != null) &#123; oldTab[j] = null;//ÂÖàÊääÂéüÊï∞ÁªÑÁöÑÂΩìÂâç‰ΩçÁΩÆÊ∏ÖÁ©∫ÔºåÂõ†‰∏∫Â∑≤ÁªèÂ§á‰ªΩ‰∫Ü help gc if (e.next == null)//ÂΩìÂâçÊ°∂Êó¢ÈùûÈìæË°®‰πüÈùûÁ∫¢ÈªëÊ†ë newTab[e.hash &amp; (newCap - 1)] = e;//‰ΩçÁΩÆÂèØËÉΩ‰∏çÂèòÊàñÁßªÂä®2Ê¨°ÂπÇÔºåË∑ünewCap-1ÊúâÂÖ≥ else if (e instanceof TreeNode)//Ëã•ÂΩìÂâçÊ°∂ÊòØÊ†ëËäÇÁÇπÔºåÈúÄË¶ÅÂØπÊ†ëËøõË°åÂàáÂàÜ ((TreeNode&lt;K,V&gt;)e).split(this, newTab, j, oldCap); else &#123; // preserve order ÂΩìÂâçÊ°∂ÊòØÈìæË°®ÔºåË¶Å‰øùÊåÅÈ°∫Â∫è 1.7ÁöÑ‰ºöÂÄíÁΩÆ //Êâ©ÂÆπÂêéÔºåÊñ∞Êï∞ÁªÑ‰∏≠ÁöÑÈìæË°®È°∫Â∫è‰æùÁÑ∂‰∏éÊóßÊï∞ÁªÑ‰∏≠ÁöÑÈìæË°®È°∫Â∫è‰øùÊåÅ‰∏ÄËá¥!!! Node&lt;K,V&gt; loHead = null, loTail = null;//lo=lowÔºåË°®Á§∫‰Ωé‰ΩçÔºàÂç≥Êï∞ÁªÑÂâçÂçäÈÉ®ÂàÜÁöÑÈìæË°®Ôºâ Node&lt;K,V&gt; hiHead = null, hiTail = null;//hi=highÔºåË°®Á§∫È´ò‰ΩçÔºàÂç≥Êï∞ÁªÑÂêéÂçäÈÉ®ÂàÜÁöÑÈìæË°®Ôºâ Node&lt;K,V&gt; next; //ÈÅçÂéÜÂΩìÂâçÊ°∂ÁöÑÈìæË°® //1.8:ÊòØÂ∞æÊèíÂÖ•Ê≥ïÔºåÂÖàÊù•ÁöÑÁïôÂú®Êï∞ÁªÑ‰∏äÔºåÂêéÊù•ÁöÑÈìæÂú®Â∞æ‰∏äÔºàÈÅçÂéÜÊó∂ÊòØÂÖàËøõÂÖàÂá∫Ôºâ do &#123; next = e.next; //Ê†πÊçÆe.hash &amp; oldCapÊòØÂê¶‰∏∫Èõ∂Â∞ÜÂéüÈìæË°®ÊãÜÂàÜÊàê2‰∏™ÈìæË°® //Âà§Êñ≠ÂΩìÂâç‰ΩçÁΩÆÊòØÂê¶ÂèëÁîüÂèòÂä® 0ÂàôÊ≤°Âèò Âç≥‰øùÁïôÂú®ÂéüÈìæË°®‰∏≠‰∏çÈúÄË¶ÅÁßªÂä® if ((e.hash &amp; oldCap) == 0) &#123; //ÂéüÁ¥¢Âºï Âú®Êï∞ÁªÑÂâçÂçäÈÉ®ÂàÜÂ§ÑÁêÜ //Ëã•ÈòüÂ∞æ‰∏∫Á©∫ÔºåÂΩìÂâçÂÖÉÁ¥†Âç≥ÊòØÈòüÈ¶ñÂÖÉÁ¥†Ôºà‰πüÂ∞±ÊòØÁ¨¨‰∏Ä‰∏™ÊèíÂÖ•ÁöÑÂÖÉÁ¥†ÔºâÔºå‰øùËØÅÂÖàËøõÂÖàÂá∫ if (loTail == null) loHead = e; else //Ëã•ÈòüÂ∞æ‰∏ç‰∏∫Á©∫ÔºåÂΩìÂâçÂÖÉÁ¥†ÈìæÊé•Âà∞ÂéüÈòüÂ∞æÂÖÉÁ¥†ÂêéÈù¢Ôºå‰øùËØÅÂÖàËøõÂÖàÂá∫ loTail.next = e; loTail = e;//‰∏∫‰∫Ü‰øùËØÅÊèíÂÖ•È°∫Â∫è‰∏çÂèòÔºåÂΩìÂâçÂÖÉÁ¥†ÈÉΩÈúÄÂÖàËÆæÁΩÆ‰∏∫ÈòüÂ∞æÂÖÉÁ¥† &#125; //ÂéüÁ¥¢Âºï+oldCap Âê¶ÂàôÁßªÂä®Âà∞"ÂéüÁ¥¢Âºï+oldCap"ÁöÑÊñ∞ÈìæË°®‰∏≠ else &#123; //Âú®Êï∞ÁªÑÂêéÂçäÈÉ®ÂàÜÂ§ÑÁêÜ if (hiTail == null) hiHead = e; else hiTail.next = e; hiTail = e;//‰∏∫‰∫Ü‰øùËØÅÊèíÂÖ•È°∫Â∫è‰∏çÂèòÔºåÂΩìÂâçÂÖÉÁ¥†ÈÉΩÈúÄÂÖàËÆæÁΩÆ‰∏∫ÈòüÂ∞æÂÖÉÁ¥† &#125; &#125; while ((e = next) != null); //ÂéüÁ¥¢ÂºïÊîæÂà∞ÂéüÊ°∂‰∏≠ if (loTail != null) &#123;//Â¶ÇÊûúÈòüÂ∞æÂÖÉÁ¥†ÈùûÁ©∫ loTail.next = null;//loTailÊ≠§Êó∂Â∞±ÊòØÈòüÂ∞æÂÖÉÁ¥† newTab[j] = loHead;//ÈòüÈ¶ñÊòØÊîæÂú®Êï∞ÁªÑÈáåÈù¢ÁöÑ &#125; //ÂéüÁ¥¢Âºï+oldCapÊîæÂà∞Êñ∞Ê°∂‰∏≠ if (hiTail != null) &#123;//Â¶ÇÊûúÈòüÂ∞æÂÖÉÁ¥†ÈùûÁ©∫ hiTail.next = null;//hiTailÊ≠§Êó∂Â∞±ÊòØÈòüÂ∞æÂÖÉÁ¥† newTab[j + oldCap] = hiHead;//ÈòüÈ¶ñÊòØÊîæÂú®Êï∞ÁªÑÈáåÈù¢ÁöÑ &#125; &#125; &#125; &#125; &#125; return newTab;&#125; ÊâÄ‰ª•ËØ¥ÔºåJDK 1.8‰πãÂêéÊâ©ÂÆπÁöÑÊîπËøõÊúâÔºö ÈìæË°®‰∏äÁöÑËäÇÁÇπÊòØÂ∞æÊèíÊ≥ïÔºåÂÖàÊù•ÁöÑÊîæÂà∞Êï∞ÁªÑ‰∏≠ÔºåÂêéÊù•ÁöÑÊîæÂà∞ÈìæË°®‰∏≠ÔºåÂÖàÂà∞ÂÖàÂá∫ÔºåÁ±ª‰ºº‰∫éÊ†à„ÄÇ JDK 1.8 ‰∏çÂÉè JDK1.7‰∏≠‰ºöÈáçÊñ∞ËÆ°ÁÆóÊØè‰∏™ËäÇÁÇπÂú®Êñ∞ÂìàÂ∏åË°®‰∏≠ÁöÑ‰ΩçÁΩÆÔºåËÄåÊòØÈÄöËøá (e.hash &amp; oldCap) == 0ÊòØÂê¶Á≠â‰∫é0 Â∞±ÂèØ‰ª•ÂæóÂá∫ÂéüÊù•ÈìæË°®‰∏≠ÁöÑËäÇÁÇπÂú®Êñ∞ÂìàÂ∏åË°®ÁöÑ‰ΩçÁΩÆ„ÄÇÊó†ÈúÄÈáçÊñ∞ËÆ°ÁÆóHashÔºåËäÇÁúÅ‰∫ÜÊó∂Èó¥ÔºåÊñ∞Á¥¢Âºï=ÂéüÁ¥¢Âºï+ÂéüÂÆπÈáè HashMap Âú® 1.7ÁöÑÊó∂ÂÄôÊâ©ÂÆπÂêéÔºåÈìæË°®ÁöÑËäÇÁÇπÈ°∫Â∫è‰ºöÂÄíÁΩÆÔºå1.8Âàô‰∏ç‰ºöÂá∫Áé∞ËøôÁßçÊÉÖÂÜµ„ÄÇÂõ†‰∏∫1.7ÊòØÂêéËøõÂÖàÂá∫Ôºå1.8ÊòØÂÖàËøõÂÖàÂá∫„ÄÇ treeifyBinÊñπÊ≥ï(Ê†ëÂåñÊñπÊ≥ï)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889 /** * Replaces all linked nodes in bin at index for given hash unless * table is too small, in which case resizes instead. * Ê°∂ÂÜÖÈìæË°®Ê†ëÂåñÔºöÂ∞ÜÊ°∂ÂÜÖÊâÄÊúâÁöÑÈìæË°®ËäÇÁÇπÊõøÊç¢ÊàêÁ∫¢ÈªëÊ†ëËäÇÁÇπÔºåÂΩìÂÖÉÁ¥†Êï∞Èáè‰∏çÂ§üÊ†ëÂåñÊó∂‰ºöÈáçÊñ∞resize * Ê≥®ÊÑèÔºö‰∏çÊòØÊï¥‰∏™MapËΩ¨Êç¢ÔºåÂè™ÊòØÂΩìÂâçÊ°∂ÔºÅ */final void treeifyBin(Node&lt;K,V&gt;[] tab, int hash) &#123; int n, index; Node&lt;K,V&gt; e; //ÂΩìÊï∞ÁªÑ‰∏∫Á©∫ ÊàñËÄÖ Êï∞ÁªÑÈïøÂ∫¶ &lt; Ê†ëÂåñÈòàÂÄºÔºà64ÔºâÊó∂ÈúÄË¶ÅÊâßË°åresizeÊñπÊ≥ïÔºåÈáçÊñ∞ÂÜ≥ÂÆöÂÜÖÈÉ®ÁöÑÊï∞ÊçÆÁªìÊûÑÁ±ªÂûã if (tab == null || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY) resize(); //Âê¶ÂàôÔºåÈúÄË¶ÅÊ†ëÂåñ else if ((e = tab[index = (n - 1) &amp; hash]) != null) &#123; TreeNode&lt;K,V&gt; hd = null, tl = null;//hdÊåáÁöÑÊòØheadÔºåtlÊåáÁöÑÊòØtailÔºåÂàÜÂà´ÊåáÂêëÁ∫¢ÈªëÊ†ëÁöÑÂ§¥„ÄÅÂ∞æËäÇÁÇπ //‰ªéÈìæË°®Â§¥ËäÇÁÇπÂºÄÂßãÈÅçÂéÜÈìæË°®ÔºåÂ§¥ËäÇÁÇπÊòØÂ≠òÊîæÂú®Êï∞ÁªÑ‰∏≠ÁöÑ do &#123; //Êñ∞Âª∫‰∏Ä‰∏™Ê†ëÂΩ¢ËäÇÁÇπÔºåÂÜÖÂÆπÂíåÂΩìÂâçÈìæË°®ËäÇÁÇπe‰øùÊåÅ‰∏ÄËá¥ //Ê≠§Êó∂nextÈªòËÆ§‰∏∫nullÔºå‰ºöÂú®ÂêéÈù¢ÊåâÈ°∫Â∫èÈáçÊñ∞ÂØπnextËµãÂÄº TreeNode&lt;K,V&gt; p = replacementTreeNode(e, null); if (tl == null)//ÂΩìÂ∞æËäÇÁÇπ‰∏∫Á©∫ÔºåÂç≥ÂΩìÂâçËäÇÁÇπÂ∫î‰∏∫Â§¥ËäÇÁÇπÔºàÂõ†‰∏∫Â∞±Ëøô‰∏Ä‰∏™ËäÇÁÇπÔºâ hd = p; else &#123; p.prev = tl;//prevË¢´ËµãÂÄºÔºå‰∏ªË¶ÅÊòØËÆ∞ÂΩïÂΩìÂâçËäÇÁÇπÁöÑ‰∏ä‰∏Ä‰∏™ËäÇÁÇπ tl.next = p;//pÊåáÂêë‰πãÂâçÂ∞æËäÇÁÇπÁöÑnextÔºå‰øùÊåÅÊèíÂÖ•È°∫Â∫è &#125; tl = p;//ÂΩìÂâçËäÇÁÇπËÆæÁΩÆ‰∏∫Â∞æËäÇÁÇπÔºå‰øùÊåÅÊèíÂÖ•È°∫Â∫è &#125; while ((e = e.next) != null); //Ê°∂ÂÜÖÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†Âç≥ÈìæË°®Â§¥ËäÇÁÇπÔºåÂπ∂ÊîæÂú®Êï∞ÁªÑ‰∏≠ if ((tab[index] = hd) != null) hd.treeify(tab);//‰ªéÂ§¥ËäÇÁÇπÂºÄÂßãÈÅçÂéÜÔºåÂ∞ÜÊï¥‰∏™Ê°∂Ê†ëÂåñ //Ê≥®ÊÑèÂ§¥ËäÇÁÇπÂπ∂‰∏ç‰∏ÄÂÆöÊòØÊ†ëÁöÑÊ†πËäÇÁÇπÔºöÊ†ëÂåñÂêéÁöÑÊ†πËäÇÁÇπ‰ºöÈáçÊñ∞ËÆæÁΩÆ‰∏∫Â§¥ËäÇÁÇπÔºåÂç≥tab[index]=root //ÂÖ∑‰ΩìÂèÇËßÅmoveRootToFront() &#125;&#125;// For treeifyBin Êñ∞Âª∫‰∏Ä‰∏™Ê†ëÂΩ¢ËäÇÁÇπTreeNode&lt;K,V&gt; replacementTreeNode(Node&lt;K,V&gt; p, Node&lt;K,V&gt; next) &#123; return new TreeNode&lt;&gt;(p.hash, p.key, p.value, next);&#125;/** * Forms tree of the nodes linked from this node. * Â°ëÈÄ†Á∫¢ÈªëÊ†ë * @return root of tree ËøôÈáåÊØîËæÉÊúâÊÑèÊÄùÔºåÊòéÊòéÊó∂void‰ΩÜÊúâÊ≥®Èáä@returnÔºå‰∏çÁü•Â§ßÁ•û‰ª¨‰ΩïÊÑè */final void treeify(Node&lt;K,V&gt;[] tab) &#123; TreeNode&lt;K,V&gt; root = null;//Ê†πËäÇÁÇπÈúÄË¶ÅÊéíÂ∫èÂêéÈáçÊñ∞ËÆæÁΩÆÔºà‰πãÂâçÈìæË°®ÁöÑÂ§¥ËäÇÁÇπ‰∏ç‰∏ÄÂÆöÊòØÊ†ëÁöÑÊ†πËäÇÁÇπÔºâ //thisÊåáÁöÑÊòØÂΩìÂâç‰∫åÂèâÊ†ëÁöÑÂ§¥ËäÇÁÇπÔºå‰ªéÂ§¥ËäÇÁÇπÂºÄÂßãÈÅçÂéÜ for (TreeNode&lt;K,V&gt; x = this, next; x != null; x = next) &#123; next = (TreeNode&lt;K,V&gt;)x.next; x.left = x.right = null; //ÂΩìÊ†πËäÇÁÇπ‰∏∫Á©∫Êó∂ÔºåÂÖàËÆæÁΩÆÊ†πËäÇÁÇπ‰∏∫ÈªëËâ≤ÔºåÂêåÊó∂ÂΩìÂâçËäÇÁÇπÂÖàÂΩì‰ΩúÊ†πËäÇÁÇπÔºàÂç≥Ëá™‰∏äËÄå‰∏ãÊèíÂÖ•Ôºâ if (root == null) &#123; x.parent = null; x.red = false;//Á∫¢ÈªëÊ†ëÁöÑÊ†πËäÇÁÇπ‰∏∫ÈªëËâ≤ root = x; &#125; else &#123; //ÂêéÈù¢ËøõÂÖ•Âæ™ÁéØËµ∞ÁöÑÈÄªËæëÔºåx ÊåáÂêëÊ†ë‰∏≠ÁöÑÊüê‰∏™ËäÇÁÇπ K k = x.key; int h = x.hash; Class&lt;?&gt; kc = null; //ÈáçÊñ∞Âæ™ÁéØÔºå‰ªéÊ†πËäÇÁÇπÂºÄÂßãÔºåÈÅçÂéÜÊâÄÊúâËäÇÁÇπ‰∏éÂΩìÂâçËäÇÁÇπxÊØîËæÉÔºåÈáçÊñ∞Ë∞ÉÊï¥‰ΩçÁΩÆÔºåÁ±ª‰ººÂÜíÊ≥°ÊéíÂ∫è for (TreeNode&lt;K,V&gt; p = root;;) &#123; int dir, ph; K pk = p.key; if ((ph = p.hash) &gt; h)//Â¶ÇÊûúÊØîËæÉËäÇÁÇπÁöÑhashÊØîÂΩìÂâçËäÇÁÇπÁöÑhashÂ§ßÔºåÊü•Â∑¶Â≠êÊ†ë dir = -1; else if (ph &lt; h) dir = 1;//Â¶ÇÊûúÊØîËæÉËäÇÁÇπÁöÑhashÊØîÂΩìÂâçËäÇÁÇπÁöÑhashÂ∞èÔºåÊü•Âè≥Â≠êÊ†ë else if ((kc == null &amp;&amp; (kc = comparableClassFor(k)) == null) || (dir = compareComparables(kc, k, pk)) == 0 ) //tieBreakOrder Áî®‰∫éhashÁõ∏ÂêåÊó∂‰∏îkeyÊó†Ê≥ïÊØîËæÉÊó∂ÔºåÁõ¥Êé•Ê†πÊçÆÂºïÁî®ÊØîËæÉ //ËøôÈáåÊåáÁöÑÊòØÂ¶ÇÊûúÂΩìÂâçÊØîËæÉËäÇÁÇπÁöÑÂìàÂ∏åÂÄºÊØîxÂ§ßÔºåËøîÂõû-1ÔºåÂê¶ÂàôËøîÂõû1 dir = tieBreakOrder(k, pk); //ÁªèËøáÂâçÈù¢ÁöÑËÆ°ÁÆóÔºåÂæóÂà∞‰∫ÜÂΩìÂâçËäÇÁÇπÂíåË¶ÅÊèíÂÖ•ËäÇÁÇπxÁöÑ‰∏Ä‰∏™Â§ßÂ∞èÂÖ≥Á≥ª //Â¶ÇÊûúÂΩìÂâçÊØîËæÉËäÇÁÇπÁöÑÂìàÂ∏åÂÄºÊØîxÂ§ßÔºåxÂ∞±ÊòØÂ∑¶Â≠êËäÇÁÇπÔºåÂê¶ÂàôxÊòØÂè≥Â≠êËäÇÁÇπ TreeNode&lt;K,V&gt; xp = p; if ((p = (dir &lt;= 0) ? p.left : p.right) == null) &#123; x.parent = xp;//ÊääÂΩìÂâçËäÇÁÇπÂèòÊàêxÁöÑÁà∂ËäÇÁÇπ if (dir &lt;= 0) xp.left = x; else xp.right = x; root = balanceInsertion(root, x); break; &#125; &#125; &#125; &#125; moveRootToFront(tab, root);//Â∞ÜÊ†πËäÇÁÇπËÆæÁΩÆ‰∏∫Â§¥ËäÇÁÇπ getÊñπÊ≥ï(Êü•ËØ¢) Ê†πÊçÆÈîÆÂÄºÂØπÁöÑ key ÂéªËé∑ÂèñÂØπÂ∫îÁöÑ Value 1234567891011121314151617181920212223242526272829public V get(Object key) &#123; Node&lt;K,V&gt; e; //ÈÄöËøá getNodeÂØªÊâæ key ÂØπÂ∫îÁöÑ Value Â¶ÇÊûúÊ≤°ÊâæÂà∞ÔºåÊàñËÄÖÊâæÂà∞ÁöÑÁªìÊûú‰∏∫ null Â∞±‰ºöËøîÂõûnull Âê¶Âàô‰ºöËøîÂõûÂØπÂ∫îÁöÑ Value return (e = getNode(hash(key), key)) == null ? null : e.value;&#125;final Node&lt;K,V&gt; getNode(int hash, Object key) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n; K k; //Áé∞Ê†πÊçÆ key ÁöÑ hash ÂÄºÂéªÊâæÂà∞ÂØπÂ∫îÁöÑÈìæË°®ÊàñËÄÖÁ∫¢ÈªëÊ†ë if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (first = tab[(n - 1) &amp; hash]) != null) &#123; // Â¶ÇÊûúÁ¨¨‰∏Ä‰∏™ËäÇÁÇπÂ∞±ÊòØÈÇ£‰πàÁõ¥Êé•ËøîÂõû if (first.hash == hash &amp;&amp; // always check first node ((k = first.key) == key || (key != null &amp;&amp; key.equals(k)))) return first; //Â¶ÇÊûú ÂØπÂ∫îÁöÑ‰ΩçÁΩÆ‰∏∫Á∫¢ÈªëÊ†ëË∞ÉÁî®Á∫¢ÈªëÊ†ëÁöÑÊñπÊ≥ïÂéªÂØªÊâæËäÇÁÇπ if ((e = first.next) != null) &#123; if (first instanceof TreeNode) return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key); //ÈÅçÂéÜÂçïÈìæË°®ÊâæÂà∞ÂØπÂ∫îÁöÑ key Âíå Value do &#123; if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) return e; &#125; while ((e = e.next) != null); &#125; &#125; return null;&#125; JDK 1.8Êñ∞Â¢û get ÊñπÊ≥ïÔºåÂú®ÂØªÊâæ key ÂØπÂ∫î Value ÁöÑÊó∂ÂÄôÂ¶ÇÊûúÊ≤°ÊâæÂà∞ÂàôËøîÂõûÊåáÂÆöÈªòËÆ§ÂÄº„ÄÇ 12345@Overridepublic V getOrDefault(Object key, V defaultValue) &#123; Node&lt;K,V&gt; e; return (e = getNode(hash(key), key)) == null ? defaultValue : e.value;&#125; deleteÊñπÊ≥ï(Âà†Èô§)HashMap Ê≤°Êúâ set ÊñπÊ≥ïÔºåÂ¶ÇÊûúÊÉ≥Ë¶Å‰øÆÊîπÂØπÂ∫î key Êò†Â∞ÑÁöÑ Value ÔºåÂè™ÈúÄË¶ÅÂÜçÊ¨°Ë∞ÉÁî® put ÊñπÊ≥ïÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇÊàë‰ª¨Êù•Áúã‰∏ãÂ¶Ç‰ΩïÁßªÈô§ HashMap ‰∏≠ÂØπÂ∫îÁöÑËäÇÁÇπÁöÑÊñπÊ≥ïÔºö 12345678910 public V remove(Object key) &#123; Node&lt;K,V&gt; e; return (e = removeNode(hash(key), key, null, false, true)) == null ? null : e.value;&#125; public V remove(Object key) &#123; Node&lt;K,V&gt; e; return (e = removeNode(hash(key), key, null, false, true)) == null ? null : e.value;&#125; ËøôÈáåÊúâ‰∏§‰∏™ÂèÇÊï∞ÈúÄË¶ÅÊàë‰ª¨ÊèêËµ∑Ê≥®ÊÑèÔºö matchValue Â¶ÇÊûúËøô‰∏™ÂÄº‰∏∫ true ÂàôË°®Á§∫Âè™ÊúâÂΩì Value ‰∏éÁ¨¨‰∏â‰∏™ÂèÇÊï∞ Value Áõ∏ÂêåÁöÑÊó∂ÂÄôÊâçÂà†Èô§ÂØπ‰∏Ä‰∏™ÁöÑËäÇÁÇπ movable Ëøô‰∏™ÂèÇÊï∞Âú®Á∫¢ÈªëÊ†ë‰∏≠ÂÖàÂà†Èô§ËäÇÁÇπÊó∂ÂÄô‰ΩøÁî® true Ë°®Á§∫Âà†Èô§Âπ∂ÂÖ∂‰ªñÊï∞‰∏≠ÁöÑËäÇÁÇπ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051 final Node&lt;K,V&gt; removeNode(int hash, Object key, Object value, boolean matchValue, boolean movable) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, index; //Âà§Êñ≠ÂìàÂ∏åË°®ÊòØÂê¶‰∏∫Á©∫ÔºåÈïøÂ∫¶ÊòØÂê¶Â§ß‰∫é0 ÂØπÂ∫îÁöÑ‰ΩçÁΩÆ‰∏äÊòØÂê¶ÊúâÂÖÉÁ¥† if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (p = tab[index = (n - 1) &amp; hash]) != null) &#123; // node Áî®Êù•Â≠òÊîæË¶ÅÁßªÈô§ÁöÑËäÇÁÇπÔºå e Ë°®Á§∫‰∏ã‰∏™ËäÇÁÇπ k Ôºåv ÊØè‰∏™ËäÇÁÇπÁöÑÈîÆÂÄº Node&lt;K,V&gt; node = null, e; K k; V v; //Â¶ÇÊûúÁ¨¨‰∏Ä‰∏™ËäÇÁÇπÂ∞±ÊòØÊàë‰ª¨Ë¶ÅÊâæÁöÑÁõ¥Êé•ËµãÂÄºÁªô node if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) node = p; else if ((e = p.next) != null) &#123; // ÈÅçÂéÜÁ∫¢ÈªëÊ†ëÊâæÂà∞ÂØπÂ∫îÁöÑËäÇÁÇπ if (p instanceof TreeNode) node = ((TreeNode&lt;K,V&gt;)p).getTreeNode(hash, key); else &#123; //ÈÅçÂéÜÂØπÂ∫îÁöÑÈìæË°®ÊâæÂà∞ÂØπÂ∫îÁöÑËäÇÁÇπ do &#123; if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) &#123; node = e; break; &#125; p = e; &#125; while ((e = e.next) != null); &#125; &#125; // Â¶ÇÊûúÊâæÂà∞‰∫ÜËäÇÁÇπ // !matchValue ÊòØÂê¶‰∏çÂà†Èô§ËäÇÁÇπ // (v = node.value) == value || // (value != null &amp;&amp; value.equals(v))) ËäÇÁÇπÂÄºÊòØÂê¶Áõ∏ÂêåÔºå if (node != null &amp;&amp; (!matchValue || (v = node.value) == value || (value != null &amp;&amp; value.equals(v)))) &#123; //Âà†Èô§ËäÇÁÇπ if (node instanceof TreeNode) ((TreeNode&lt;K,V&gt;)node).removeTreeNode(this, tab, movable); else if (node == p) tab[index] = node.next; else p.next = node.next; ++modCount; --size; afterNodeRemoval(node); return node; &#125; &#125; return null;&#125; 1234567891011public void remove() &#123; if (current == null) throw new IllegalStateException(); if (modCount != expectedModCount) throw new ConcurrentModificationException(); Object k = current.key; current = null; HashMap.this.removeEntryForKey(k); //ÈáçË¶ÅÊìç‰ΩúÔºöËø≠‰ª£Âô®‰∏≠Âà†Èô§Êó∂ÂêåÊ≠•‰∫ÜexpectedModCountÂÄº‰∏émodCountÁõ∏Âêå expectedModCount = modCount;&#125; Ëø≠‰ª£Map ÊòØÊ≤°ÊúâËø≠‰ª£Âô®ÁöÑÔºåÈúÄË¶ÅËΩ¨Êàê Set Êìç‰Ωú 1234567Map map = new HashMap();Iterator iter = map.entrySet().iterator();while (iter.hasNext()) &#123; Map.Entry entry = (Map.Entry) iter.next(); Object key = entry.getKey(); Object val = entry.getValue();&#125; Ë¶ÅÂº∫Ë∞ÉÁöÑÊòØÔºåÊó†ËÆ∫Âì™ÁßçËø≠‰ª£Âô®ÈÉΩÊòØÈÄöËøáÈÅçÂéÜ table Ë°®Êù•Ëé∑Âèñ‰∏ã‰∏™ËäÇÁÇπÔºåÊù•ÈÅçÂéÜÁöÑÔºåÈÅçÂéÜËøáÁ®ãÂèØ‰ª•ÁêÜËß£‰∏∫‰∏ÄÁßçÊ∑±Â∫¶‰ºòÂÖàÈÅçÂéÜÔºåÂç≥‰ºòÂÖàÈÅçÂéÜÈìæË°®ËäÇÁÇπÔºàÊàñËÄÖÁ∫¢ÈªëÊ†ëÔºâÔºåÁÑ∂ÂêéÂú®ÈÅçÂéÜÂÖ∂‰ªñÊï∞ÁªÑ‰ΩçÁΩÆ„ÄÇ Fail-FastÂΩì‰ΩøÁî®Ëø≠‰ª£Âô®ÁöÑËøáÁ®ã‰∏≠ÊúâÂÖ∂‰ªñÁ∫øÁ®ã‰øÆÊîπ‰∫ÜmapÔºåÂπ∂‰∏î‰∏çÊòØ‰ΩøÁî®Ëø≠‰ª£Âô®‰øÆÊîπÁöÑÔºåÂ∞ÜÂºïÂèëConcurrentModificationException 1234567891011121314//‰øÆÊîπËÆ°Êï∞ put„ÄÅremoveÊàñclearÊó∂mount++ clearÊó∂Ê∏ÖÁ©∫transient int modCount;HashIterator() &#123; expectedModCount = modCount; if (size &gt; 0) &#123; Entry[] t = table; while (index &lt; t.length &amp;&amp; (next = t[index++]) == null); &#125;&#125;final Entry&lt;K,V&gt; nextEntry() &#123; //ÊúüÊúõÂèòÊõ¥Êï∞Èáè‰∏çÂåπÈÖç if (modCount != expectedModCount) throw new ConcurrentModificationException();&#125; ‰∏éHashTableÁöÑÂå∫Âà´ HashMap ÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÔºåHashTableÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇ HashMap ÂÖÅËÆ∏ key Âíå Vale ÊòØ nullÔºå‰ΩÜÊòØÂè™ÂÖÅËÆ∏‰∏Ä‰∏™ key ‰∏∫ null,‰∏îËøô‰∏™ÂÖÉÁ¥†Â≠òÊîæÂú®ÂìàÂ∏åË°® 0 ËßíÊ†á‰ΩçÁΩÆ„ÄÇ HashTable ‰∏çÂÖÅËÆ∏key„ÄÅvalue ÊòØ null„ÄÇ HashMap ÂÜÖÈÉ®‰ΩøÁî®hash(Object key)Êâ∞Âä®ÂáΩÊï∞ÂØπ key ÁöÑ hashCode ËøõË°åÊâ∞Âä®Âêé‰Ωú‰∏∫ hash ÂÄº„ÄÇHashTable ÊòØÁõ¥Êé•‰ΩøÁî® key ÁöÑ hashCode() ËøîÂõûÂÄº‰Ωú‰∏∫ hash ÂÄº„ÄÇ HashMapÈªòËÆ§ÂÆπÈáè‰∏∫ 2^4 ‰∏îÂÆπÈáè‰∏ÄÂÆöÊòØ 2^n ; HashTable ÈªòËÆ§ÂÆπÈáèÊòØ11,‰∏ç‰∏ÄÂÆöÊòØ 2^n„ÄÇ HashTable ÂèñÂìàÂ∏åÊ°∂‰∏ãÊ†áÊòØÁõ¥Êé•Áî®Ê®°ËøêÁÆó,Êâ©ÂÆπÊó∂Êñ∞ÂÆπÈáèÊòØÂéüÊù•ÁöÑ2ÂÄç+1„ÄÇHashMap Âú®Êâ©ÂÆπÁöÑÊó∂ÂÄôÊòØÂéüÊù•ÁöÑ‰∏§ÂÄçÔºå‰∏îÂìàÂ∏åÊ°∂ÁöÑ‰∏ãÊ†á‰ΩøÁî® &amp;ËøêÁÆó‰ª£Êõø‰∫ÜÂèñÊ®°„ÄÇ HashtableÊòØDictionaryÁöÑÂ≠êÁ±ªÂêåÊó∂‰πüÂÆûÁé∞‰∫ÜMapÊé•Âè£ÔºåHashMapÊòØMapÊé•Âè£ÁöÑ‰∏Ä‰∏™ÂÆûÁé∞Á±ª„ÄÇ Èù¢ËØïÈ¢òÁ≠îÊ°à HashMapÁöÑÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÔºü Êï∞ÁªÑ + ÈìæË°® + Á∫¢ÈªëÊ†ë HashMapÁöÑ‰∏ªË¶ÅÊñπÊ≥ïÔºü put()„ÄÅresize()„ÄÅtreeifyBin()„ÄÅget()„ÄÅdelete()Á≠âÁ≠â HashMap ÊòØÂ¶Ç‰ΩïÁ°ÆÂÆöÂÖÉÁ¥†Â≠òÂÇ®‰ΩçÁΩÆÁöÑ‰ª•ÂèäÂ¶Ç‰ΩïÂ§ÑÁêÜÂìàÂ∏åÂÜ≤Á™ÅÁöÑÔºü ÊòØÈÄöËøáhashcodeÂíåÊâ∞‰π±ÂáΩÊï∞Á°ÆÂÆöÁöÑÔºåÂÖàËÆ°ÁÆóÂ•ΩkeyÁöÑhashCode,ÁÑ∂ÂêéÂ∞ÜhashCodeÁöÑ‰Ωé16‰ΩçÂíåÈ´ò16‰ΩçËøõË°åÁõ∏ÂºÇÊàñÔºåÂºÇÊàñÂÆåÊàêÂêéÂÜçËøõË°åÂèñÊ®°(ÂÖ∂ÂÆû‰πüÂ∞±ÊòØ‰∏éÂÆπÈáè-1ËøõË°åÁõ∏‰∏é[Êúâ0ÂàôÂÖ®‰∏∫0ÔºåÂÖ®1Êâç‰∏∫1])„ÄÇ‰∏ÄÂè•ËØùÊÄªÁªìÂ∞±ÊòØÔºö ÂèñkeyÁöÑhashCodeÂÄº„ÄÅÈ´ò‰ΩçËøêÁÆó„ÄÅÂèñÊ®°ËøêÁÆó HashMap Êâ©ÂÆπÊú∫Âà∂ÊòØÊÄéÊ†∑ÁöÑÔºü ÂÖàÂà§Êñ≠ÊòØÂê¶Ë∂ÖËøá‰∫ÜÊï¥Êï∞ÂûãÁöÑÊúÄÂ§ßÂÄºÔºåÂ¶ÇÊûúÊ≤°ÊúâÔºåÂÜçÂà§Êñ≠ÊòØÂê¶Â∑≤ÁªèË∂ÖËøá‰∫ÜÊâ©ÂÆπÈòàÂÄºÔºåÂ¶ÇÊûúË∂ÖËøá‰∫ÜÔºåÂàôÁõ¥Êé•Êâ©ÂÆπ‰∏§ÂÄçÔºåÊâ©ÂÆπÁöÑÊï∞ÈáèÈÉΩÊòØ2ÁöÑnÊ¨°ÊñπÔºåHashMapÈÉΩÊòØ‰ºòÂÖàÊâ©ÂÆπÁöÑÔºåÁÑ∂ÂêéÂÖ∂Ê¨°ÊâçÊòØÊ†ëÂåñÁ≠âÁ≠â„ÄÇ ÊÄªÁöÑÊù•ËØ¥ÂàÜ‰∏∫‰∏§Ê≠•Ôºö1. ÂØªÊâæÊâ©ÂÆπÂêéÊï∞ÁªÑÁöÑÂ§ßÂ∞è‰ª•ÂèäÊñ∞ÁöÑÊâ©ÂÆπÈòàÂÄºÔºå2. Â∞ÜÂéüÊúâÂìàÂ∏åË°®Êã∑Ë¥ùÂà∞Êñ∞ÁöÑÂìàÂ∏åË°®‰∏≠„ÄÇ JDK 1.8 Âú®Êâ©ÂÆπÂíåËß£ÂÜ≥ÂìàÂ∏åÂÜ≤Á™Å‰∏äÂØπ HashMap Ê∫êÁ†ÅÂÅö‰∫ÜÂì™‰∫õÊîπÂä®ÔºüÊúâ‰ªÄ‰πàÂ•ΩÂ§Ñ? Âú®Êâ©ÂÆπÊñπÈù¢ÔºåÁî±‰∫éÊòØÈÄâÁî®‰∫Ü2ÁöÑnÊ¨°Êñπ‰Ωú‰∏∫Ê°∂ÁöÑÊï∞ÈáèÔºåÊâÄ‰ª•Âú®ÂèñÊ®°ÁöÑÊó∂ÂÄôÂ∞±ÈùûÂ∏∏Êñπ‰æø‰∫ÜÔºåÁõ¥Êé•ÁúãhashCodeÁöÑÂâç‰∏Ä‰ΩçÊòØ1ÊàñËÄÖ0Â∞±ÂèØ‰ª•Âà§Êñ≠Âú®Êâ©ÂÆπÂêéÁöÑÊñ∞‰ΩçÁΩÆÔºåÊó†ÈúÄÈáçÊñ∞ÂèñÊ®°ËøêÁÆóÔºõ Êó¢ÁúÅÂéª‰∫ÜÈáçÊñ∞ËÆ°ÁÆóhashÂÄºÁöÑÊó∂Èó¥ÔºåËÄå‰∏îÂêåÊó∂ÔºåÁî±‰∫éÊñ∞Â¢ûÁöÑ1bitÊòØ0ËøòÊòØ1ÂèØ‰ª•ËÆ§‰∏∫ÊòØÈöèÊú∫ÁöÑÔºåÂõ†Ê≠§resizeÁöÑËøáÁ®ãÔºåÂùáÂåÄÁöÑÊää‰πãÂâçÁöÑÂÜ≤Á™ÅÁöÑËäÇÁÇπÂàÜÊï£Âà∞Êñ∞ÁöÑbucket‰∫ÜÔºåËøô‰∏ÄÂùóÂ∞±ÊòØJDK1.8Êñ∞Â¢ûÁöÑ‰ºòÂåñÁÇπÔºõ HashMap Âú® 1.7ÁöÑÊó∂ÂÄôÊâ©ÂÆπÂêéÔºåÈìæË°®ÁöÑËäÇÁÇπÈ°∫Â∫è‰ºöÂÄíÁΩÆÔºå1.8Âàô‰∏ç‰ºöÂá∫Áé∞ËøôÁßçÊÉÖÂÜµ„ÄÇÂõ†‰∏∫1.7ÊòØÂêéËøõÂÖàÂá∫Ôºå1.8ÊòØÂÖàËøõÂÖàÂá∫„ÄÇ1.7ÊòØÂ§¥ÊèíÊ≥ïÔºå1.8ÊòØÂ∞æÊèíÊ≥ïÔºõ ‰ªÄ‰πàÊó∂ÂÄô‰ºö‰ΩøÁî®HashMapÔºü‰ªñÊúâ‰ªÄ‰πàÁâπÁÇπÔºü Âü∫‰∫éMapÊé•Âè£ÂÆûÁé∞ÁöÑKey-ValueÂÆπÂô®ÔºåÂÖÅËÆ∏‰∏∫Á©∫ÂÄºÔºåÂêåÊó∂ÈùûÊúâÂ∫èÔºåÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÔºåÈùûÂêåÊ≠•„ÄÇ ‰Ω†Áü•ÈÅìHashMapÁöÑÂ∑•‰ΩúÂéüÁêÜÂêóÔºü ÁªèËøáHashCodeÂíåÊâ∞‰π±ÂáΩÊï∞ÔºåÂæóÂà∞Áõ∏Â∫îÁöÑÁ¥¢Âºï‰ΩçÁΩÆÔºåÁÑ∂ÂêéÊèíÂÖ•ÔºåÂ¶ÇÊûúÈùûÁ©∫Áõ¥Êé•ÊèíÂÖ•Âç≥ÂèØÔºåÂ¶ÇÊûúÊòØÊúâÊï∞ÊçÆÔºåÂàôÂà§Êñ≠ÊòØÈìæË°®ËøòÊòØÁ∫¢ÈªëÊ†ëÔºåÂ¶ÇÊûúÈìæË°®Ë∂ÖËøá8ÂàôÂÖàÂà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÊâ©ÂÆπÔºåÂ¶ÇÊûú‰∏çÈúÄË¶ÅÂ∞±Â∞ÜÈìæË°®ÂèòÊàêÁ∫¢ÈªëÊ†ëÔºÅ ‰Ω†Áü•ÈÅìgetÂíåputÁöÑÂéüÁêÜÂêóÔºüequals()ÂíåhashCode()ÈÉΩÊúâ‰ªÄ‰πà‰ΩúÁî®Ôºü ÈÄöËøáÂØπkeyÁöÑhashCode()ËøõË°åÂìàÂ∏åÂ§ÑÁêÜÔºåÂπ∂ËÆ°ÁÆó‰∏ãÊ†áÔºàn-1ÔºÜhashÔºâÔºå‰ªéËÄåËé∑ÂæóÂ≠òÂÇ®Ê°∂ÁöÑ‰ΩçÁΩÆ„ÄÇÂ¶ÇÊûú‰∫ßÁîüÁ¢∞ÊíûÔºåÂàôÂà©Áî®key.equals()ÊñπÊ≥ïÂéªÈìæË°®ÊàñÊ†ë‰∏≠ÂéªÊü•ÊâæÂØπÂ∫îÁöÑÈòüÂàó„ÄÇ ‰Ω†Áü•ÈÅìhashÁöÑÂÆûÁé∞ÂêóÔºü‰∏∫‰ªÄ‰πàË¶ÅËøôÊ†∑ÂÆûÁé∞Ôºü Âú®Java 1.8ÁöÑÂÆûÁé∞‰∏≠ÔºåÊòØÈÄöËøáhashCodeÔºàÔºâÁöÑÈ´ò16‰ΩçÂºÇÊàñ‰Ωé16‰ΩçÂÆûÁé∞ÁöÑÔºöÔºàh = k.hashCodeÔºàÔºâÔºâ^Ôºàh &gt;&gt;&gt; 16ÔºâÔºå‰∏ªË¶ÅÊòØ‰ªéÈÄüÂ∫¶ÔºåÊïàÁõäÔºåË¥®ÈáèÊù•ËÄÉËôëÁöÑÔºåËøôÊ†∑ÂÅöÂèØ‰ª•Âú®bucketÁöÑnÊØîËæÉÂ∞èÁöÑÊó∂ÂÄôÔºå‰πüËÉΩ‰øùËØÅËÄÉËôëÂà∞È´ò‰Ωé‰ΩçÈÉΩÂèÇ‰∏éÂà∞hashÁöÑËÆ°ÁÆó‰∏≠ÔºåÂêåÊó∂‰∏ç‰ºöÊúâÂ§™Â§ßÁöÑÂºÄÈîÄ„ÄÇ ‰ΩøÁî®hashËøòÊúâ‰∏Ä‰∏™Â•ΩÂ§ÑÂ∞±ÊòØÂèØ‰ª•Á°Æ‰øùÊØè‰∏™ÈìæË°®‰∏≠ÁöÑÈïøÂ∫¶‰∏ÄËá¥ Â¶ÇÊûúHashMapÁöÑÂ§ßÂ∞èË∂ÖËøá‰∫ÜË¥üËΩΩÂõ†Â≠êÔºàload factorÔºâÂÆö‰πâÁöÑÂÆπÈáèÔºåÊÄé‰πàÂäûÔºü Â¶ÇÊûúË∂ÖËøá‰∫ÜË¥üËΩΩÂõ†Â≠êÔºàÊúÄÂ∞è0.75ÔºâÔºåÂàôÈáçÊñ∞ÈáçÊñ∞Ë∞ÉÊï¥‰∏Ä‰∏™ÂéüÂÖàÈïøÂ∫¶ÁöÑHashMapÔºåÂπ∂ÈáçÊñ∞Ë∞ÉÁî®hashÊñπÊ≥ï„ÄÇ ‰Ω†‰∫ÜËß£ÈáçÊñ∞Ë∞ÉÊï¥HashMapÂ§ßÂ∞èÂ≠òÂú®‰ªÄ‰πàÈóÆÈ¢òÂêóÔºü ÂΩìÊï∞ÊçÆËøáÂ§öÊó∂ÔºåÂæàÂèØËÉΩÂá∫Áé∞ÊÄßËÉΩ‰∏ãÈôçÔºàÂåÖÊã¨rehashÊó∂Èó¥Ôºâ Â§öÁ∫øÁ®ãÊÉÖÂÜµ‰∏ãÂèØËÉΩ‰∫ßÁîüÊù°‰ª∂Á´û‰∫âÁ´û‰∫â‰ªéËÄåÈÄ†ÊàêÊ≠ªÂæ™ÁéØÔºàÂÖ∑‰ΩìË°®Áé∞Âú®CPUÊé•Ëøë100ÔºÖ)ÔºåÂ§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÊé®Ëçê‰ΩøÁî®ConcurrentHashMap ‰∏∫‰ªÄ‰πà‰ΩøÁî®StringÔºåIntergerËøôÊ†∑ÁöÑwrapperÁ±ªÈÄÇÂêà‰Ωú‰∏∫ÈîÆÔºü Âõ†‰∏∫ËøôÁßçÁ±ªÂÖ∑ÊúâfinalÂ±ûÊÄßÔºåÂèØ‰ª•‰øùËØÅÁ∫øÁ®ãÁöÑÁõ∏ÂØπÂÆâÂÖ®Ôºå‰πüÂèØ‰ª•ÂáèÂ∞ëÁ¢∞Êíû [Ëá™Âä®Ë£ÖÁÆ±ÔºåËá™Âä®ÊãÜÁÆ±ÁöÑÁü•ËØÜÁÇπÔºÅÔºÅ] ÂèØ‰ª•ÂêåÊó∂ÈáçÂª∫equals()ÂíåhashCode()ÊñπÊ≥ï„ÄÇ Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®Ëá™ÂÆö‰πâÁöÑÂØπË±°‰Ωú‰∏∫ÈîÆÂêóÔºü ÂΩìÁÑ∂‰Ω†ÂèØËÉΩ‰ΩøÁî®‰ªª‰ΩïÂØπË±°‰Ωú‰∏∫ÈîÆÔºåÂè™Ë¶ÅÂÆÉÈÅµÂÆà‰∫ÜequalsÔºàÔºâÂíåhashCodeÔºàÔºâÊñπÊ≥ïÁöÑÂÆö‰πâËßÑÂàôÔºåÂπ∂‰∏îÂΩìÂØπË±°ÊèíÂÖ•Âà∞Map‰∏≠‰πãÂêéÂ∞Ü‰∏ç‰ºöÂÜçÊîπÂèò‰∫Ü„ÄÇËá™ÂÆö‰πâÂØπË±°Êó∂‰∏çÂèØÂèòÁöÑÔºåÈÇ£‰πàÂÆÉÂ∑≤ÁªèÊª°Ë∂≥‰∫Ü‰Ωú‰∏∫ÈîÆÁöÑÊù°‰ª∂ÔºåÂõ†‰∏∫ÂΩìÂÆÉÂàõÂª∫‰πãÂêéÂ∞±Â∑≤Áªè‰∏çËÉΩÊîπÂèò‰∫Ü„ÄÇ Â¶Ç‰ΩïÂØπHashMapËøõË°åÊéíÂ∫èÔºü Â≠òÂÖ•LinkedHashMap HashMapÁöÑÂà†Èô§Èô∑Èò±Ôºü ÈÄöËøáIteratorÊñπÂºèÂèØÊ≠£Á°ÆÈÅçÂéÜÂÆåÊàêÂà†Èô§Êìç‰Ωú Áõ¥Êé•Ë∞ÉÁî®listÁöÑremoveÊñπÊ≥ïÂ∞±‰ºöÊäõÂºÇÂ∏∏ ‰∏∫‰ªÄ‰πàÂè™ÂÖÅËÆ∏ÈÄöËøáiteratorËøõË°åÂà†Èô§Êìç‰ΩúÔºü HashMapÂíåkeySetÁöÑÂà†Èô§ÊñπÊ≥ïÈÉΩÂèØ‰ª•ÈÄöËøá‰º†ÈÄíkeyÂèÇÊï∞Âà†Èô§‰ªªÊÑèÁöÑÂÖÉÁ¥† ËÄåiteratorÂè™ËÉΩÂà†Èô§ÂΩìÂâçÂÖÉÁ¥†ÔºàÂΩìÂâçÔºâÔºå‰∏ÄÊó¶Âà†Èô§ÁöÑÂÖÉÁ¥†ÊòØiteratorÂØπË±°‰∏≠‰∏ã‰∏Ä‰∏™Ê≠£Âú®ÂºïÁî®ÁöÑÔºåÂ¶ÇÊûúÊ≤°ÊúâÈÄöËøámodCountÔºåexpectedModCountÁöÑÊØîËæÉÂÆûÁé∞Âø´ÈÄüÂ§±Ë¥•ÂºÇÂ∏∏ÔºåÂàô‰∏ã‰∏ÄÂæ™ÁéØËØ•ÂÖÉÁ¥†Â∞ÜÊàê‰∏∫ÂΩìÂâçÊåáÂêëÔºåÊ≠§Êó∂iteratorÂ∞±ÈÅçÂéÜ‰∫Ü‰∏Ä‰∏™Â∑≤ÁßªÈô§ÁöÑËøáÊúüÊï∞ÊçÆ ‰πãÊâÄ‰ª•Êé®ËçêËø≠‰ª£Âô®removeÁöÑÊ†πÊú¨ÂéüÂõ†Âú®‰∫éÂè™ÊúâËø≠‰ª£Âô®ÁöÑremoveÊñπÊ≥ï‰∏≠ÂÆûÁé∞‰∫ÜÂèòÊõ¥Êó∂‰∫émodCountÁöÑÂêåÊ≠•Â∑•‰ΩúexpectedModCount = modCount; Â¶ÇÊûúÊòØÈÅçÂéÜËøáÁ®ã‰∏≠Â¢ûÂä†Êàñ‰øÆÊîπÊï∞ÊçÆÂë¢Ôºü Â¢ûÂä†Êàñ‰øÆÊîπÊï∞ÊçÆÂè™ËÉΩÈÄöËøáMapÁöÑputÊñπÊ≥ïÂÆûÁé∞ÔºåÂú®ÈÅçÂéÜËøáÁ®ã‰∏≠‰øÆÊîπÊï∞ÊçÆÂèØ‰ª•Ôºå‰ΩÜÂ¶ÇÊûúÂ¢ûÂä†Êñ∞ÂØÜÈí•Â∞±‰ºöÂú®‰∏ãÊ¨°Âæ™ÁéØÊó∂ÊäõÂá∫ÂºÇÂ∏∏ÔºåÂõ†‰∏∫Âú®Ê∑ªÂä†Êñ∞ÂØÜÈí•Êó∂modCount‰πü‰ºöËá™Â¢ûÔºàËø≠‰ª£Âô®Âè™ÂÆûÁé∞‰∫ÜÂà†Èô§ÊñπÊ≥ï‰πüÊòØÂéüÂõ†‰πã‰∏ÄÔºâ hashmap‰∏∫‰ªÄ‰πàÂàùÂßãÈïøÂ∫¶‰∏∫16Ôºü È¶ñÂÖàË¶Å‰∏∫2ÁöÑÂπÇÊ¨°„ÄÇËøôÊòØÂõ†‰∏∫ÔºåhashmapËÆ°ÁÆókeyÁöÑhashÂÄºËøõË°åÂ≠òÂÇ®ÁöÑÊó∂ÂÄôÈááÁî®ÁöÑÊñπÊ≥ïÊòØ ‚ÄúÁî®keyÁöÑhashÂÄºÂíåhashmapÁöÑÈïøÂ∫¶Âáè‰∏ÄÔºàlength-1ÔºâÊåâ‰Ωç‰∏éÔºà&amp;ÔºâÔºå2ÁöÑÂπÇÊ¨°Âáè‰∏ÄÁöÑ‰∫åËøõÂà∂ÊòØ111‚Ä¶‚Ä¶Ôºå‰ªª‰ΩïÊï∞Âíå1‰∏éÂ∞±ÊòØ‰ªñÊú¨Ë∫´ÔºåËøôÊ†∑Â≠òÂÇ®ËøõÊù•ÁöÑhash‰ΩçÁΩÆÂ∞±ÂèñÂÜ≥‰∫ékeyÁöÑ‰∫åËøõÂà∂ÂÄº‰∫ÜÔºåËøôÊ†∑‰ºöËÆ©hashÂàÜÂ∏ÉÁõ∏ÂØπÂàÜÊï£„ÄÇÊèêÂçáÊÄßËÉΩ„ÄÇ HashMap‰∏≠ÁöÑÊâ∞Âä®ÂáΩÊï∞ÊòØ‰ªÄ‰πàÔºåÊúâ‰ªÄ‰πà‰ΩúÁî®ÔºåTreeMap‰∏≠ÊúâÂêóÔºü Â∞±ÊòØËøîÂõû hashCodeÁöÑÈ´ò16‰ΩçÂíå‰Ωé16‰ΩçÁõ∏ÂºÇÊàñÁÑ∂Âêé‰∏é ÂÆπÈáè-1 Áõ∏‰∏éÁöÑÁªìÊûúÔºåËøôÊ†∑ÁöÑËØùÂàÜÊï£Êõ¥ÂùáÂåÄÔºåTreeMapÊ≤°Êúâ„ÄÇ Êúâ‰ªÄ‰πàÊñπÊ≥ïÂèØ‰ª•ÂáèÂ∞ëÁ¢∞ÊíûÔºü Êâ∞Âä®ÂáΩÊï∞ÂèØ‰ª•ÂáèÂ∞ëÁ¢∞Êíû ÂéüÁêÜÊòØÂ¶ÇÊûú‰∏§‰∏™‰∏çÁõ∏Á≠âÁöÑÂØπË±°ËøîÂõû‰∏çÂêåÁöÑ hashcode ÁöÑËØùÔºåÈÇ£‰πàÁ¢∞ÊíûÁöÑÂá†ÁéáÂ∞±‰ºöÂ∞è‰∫õ„ÄÇËøôÂ∞±ÊÑèÂë≥ÁùÄÂ≠òÈìæË°®ÁªìÊûÑÂáèÂ∞èÔºåËøôÊ†∑ÂèñÂÄºÁöÑËØùÂ∞±‰∏ç‰ºöÈ¢ëÁπÅË∞ÉÁî® equal ÊñπÊ≥ïÔºå‰ªéËÄåÊèêÈ´ò HashMap ÁöÑÊÄßËÉΩÔºàÊâ∞Âä®Âç≥ Hash ÊñπÊ≥ïÂÜÖÈÉ®ÁöÑÁÆóÊ≥ïÂÆûÁé∞ÔºåÁõÆÁöÑÊòØËÆ©‰∏çÂêåÂØπË±°ËøîÂõû‰∏çÂêåhashcodeÔºâ„ÄÇ ‰ΩøÁî®‰∏çÂèØÂèòÁöÑ„ÄÅÂ£∞Êòé‰Ωú final ÂØπË±°ÔºåÂπ∂‰∏îÈááÁî®ÂêàÈÄÇÁöÑ equals() Âíå hashCode() ÊñπÊ≥ïÔºåÂ∞Ü‰ºöÂáèÂ∞ëÁ¢∞ÊíûÁöÑÂèëÁîü ‰∏çÂèØÂèòÊÄß‰ΩøÂæóËÉΩÂ§üÁºìÂ≠ò‰∏çÂêåÈîÆÁöÑ hashcodeÔºåËøôÂ∞ÜÊèêÈ´òÊï¥‰∏™Ëé∑ÂèñÂØπË±°ÁöÑÈÄüÂ∫¶Ôºå‰ΩøÁî® String„ÄÅInteger ËøôÊ†∑ÁöÑ wrapper Á±ª‰Ωú‰∏∫ÈîÆÊòØÈùûÂ∏∏Â•ΩÁöÑÈÄâÊã©„ÄÇ HashMap‰∏∫‰ΩïÂèØ‰ª•ÊèíÂÖ•Á©∫ÂÄºÔºü‰∏∫‰ªÄ‰πàÂÆÉÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÔºü HashMapÂú®putÁöÑÊó∂ÂÄô‰ºöË∞ÉÁî®hash()ÊñπÊ≥ïÊù•ËÆ°ÁÆókeyÁöÑhashcodeÂÄºÔºåÂèØ‰ª•‰ªéhashÁÆóÊ≥ï‰∏≠ÁúãÂá∫ÂΩìkey==nullÊó∂ËøîÂõûÁöÑÂÄº‰∏∫0„ÄÇÂõ†Ê≠§key‰∏∫nullÊó∂ÔºåhashÁÆóÊ≥ïËøîÂõûÂÄº‰∏∫0Ôºå‰∏ç‰ºöË∞ÉÁî®keyÁöÑhashcodeÊñπÊ≥ï„ÄÇËÄåHashtableÂ≠òÂÖ•ÁöÑvalue‰∏∫nullÊó∂ÔºåÊäõÂá∫NullPointerExceptionÂºÇÂ∏∏„ÄÇÂ¶ÇÊûúvalue‰∏ç‰∏∫nullÔºåËÄåkey‰∏∫Á©∫ÔºåÂú®ÊâßË°åÂà∞int hash = key.hashCode()Êó∂ÂêåÊ†∑‰ºöÊäõÂá∫NullPointerExceptionÂºÇÂ∏∏„ÄÇ ‰∏äÈù¢ËØ¥Âà∞ÔºåHashMap‰ºöËøõË°åresizeÊìç‰ΩúÔºåÂú®resizeÊìç‰ΩúÁöÑÊó∂ÂÄô‰ºöÈÄ†ÊàêÁ∫øÁ®ã‰∏çÂÆâÂÖ®„ÄÇ‰∏ãÈù¢Â∞Ü‰∏æ‰∏§‰∏™ÂèØËÉΩÂá∫Áé∞Á∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÂú∞Êñπ„ÄÇ putÁöÑÊó∂ÂÄôÂØºËá¥ÁöÑÂ§öÁ∫øÁ®ãÊï∞ÊçÆ‰∏ç‰∏ÄËá¥„ÄÇ Âè¶Â§ñ‰∏Ä‰∏™ÊØîËæÉÊòéÊòæÁöÑÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÈóÆÈ¢òÊòØHashMapÁöÑgetÊìç‰ΩúÂèØËÉΩÂõ†‰∏∫resizeËÄåÂºïËµ∑Ê≠ªÂæ™ÁéØÔºàcpu100%)„ÄÇ ÂèØ‰ª•‰ΩøÁî® CocurrentHashMap Êù•‰ª£Êõø Hashtable ÂêóÔºü Êàë‰ª¨Áü•ÈÅì Hashtable ÊòØ synchronized ÁöÑÔºå‰ΩÜÊòØ ConcurrentHashMap ÂêåÊ≠•ÊÄßËÉΩÊõ¥Â•ΩÔºåÂõ†‰∏∫ÂÆÉ‰ªÖ‰ªÖÊ†πÊçÆÂêåÊ≠•Á∫ßÂà´ÂØπ map ÁöÑ‰∏ÄÈÉ®ÂàÜËøõË°å‰∏äÈîÅ„ÄÇ ConcurrentHashMap ÂΩìÁÑ∂ÂèØ‰ª•‰ª£Êõø HashTableÔºå‰ΩÜÊòØ HashTable Êèê‰æõÊõ¥Âº∫ÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÊÄß ÂÆÉ‰ª¨ÈÉΩÂèØ‰ª•Áî®‰∫éÂ§öÁ∫øÁ®ãÁöÑÁéØÂ¢ÉÔºå‰ΩÜÊòØÂΩì Hashtable ÁöÑÂ§ßÂ∞èÂ¢ûÂä†Âà∞‰∏ÄÂÆöÁöÑÊó∂ÂÄôÔºåÊÄßËÉΩ‰ºöÊÄ•Ââß‰∏ãÈôçÔºåÂõ†‰∏∫Ëø≠‰ª£Êó∂ÈúÄË¶ÅË¢´ÈîÅÂÆöÂæàÈïøÁöÑÊó∂Èó¥„ÄÇ Áî±‰∫é ConcurrentHashMap ÂºïÂÖ•‰∫ÜÂàÜÂâ≤ÔºàsegmentationÔºâÔºå‰∏çËÆ∫ÂÆÉÂèòÂæóÂ§ö‰πàÂ§ßÔºå‰ªÖ‰ªÖÈúÄË¶ÅÈîÅÂÆö Map ÁöÑÊüê‰∏™ÈÉ®ÂàÜÔºåÂÖ∂ÂÆÉÁöÑÁ∫øÁ®ã‰∏çÈúÄË¶ÅÁ≠âÂà∞Ëø≠‰ª£ÂÆåÊàêÊâçËÉΩËÆøÈóÆ Map„ÄÇ ÁÆÄËÄåË®Ä‰πãÔºåÂú®Ëø≠‰ª£ÁöÑËøáÁ®ã‰∏≠ÔºåConcurrentHashMap ‰ªÖ‰ªÖÈîÅÂÆö Map ÁöÑÊüê‰∏™ÈÉ®ÂàÜÔºåËÄå Hashtable Âàô‰ºöÈîÅÂÆöÊï¥‰∏™ Map„ÄÇ CocurrentHashMapÔºàJDK 1.8Ôºâ CocurrentHashMap ÊäõÂºÉ‰∫ÜÂéüÊúâÁöÑ Segment ÂàÜÊÆµÈîÅÔºåÈááÁî®‰∫Ü CAS + synchronized Êù•‰øùËØÅÂπ∂ÂèëÂÆâÂÖ®ÊÄß„ÄÇÂÖ∂‰∏≠ÁöÑ val next ÈÉΩÁî®‰∫Ü volatile ‰øÆÈ•∞Ôºå‰øùËØÅ‰∫ÜÂèØËßÅÊÄß„ÄÇ ÊúÄÂ§ßÁâπÁÇπÊòØÂºïÂÖ•‰∫Ü CAS ÂÄüÂä© Unsafe Êù•ÂÆûÁé∞ native code„ÄÇCASÊúâ3‰∏™Êìç‰ΩúÊï∞ÔºåÂÜÖÂ≠òÂÄº V„ÄÅÊóßÁöÑÈ¢ÑÊúüÂÄº A„ÄÅË¶Å‰øÆÊîπÁöÑÊñ∞ÂÄº B„ÄÇÂΩì‰∏î‰ªÖÂΩìÈ¢ÑÊúüÂÄº A ÂíåÂÜÖÂ≠òÂÄº V Áõ∏ÂêåÊó∂ÔºåÂ∞ÜÂÜÖÂ≠òÂÄºV‰øÆÊîπ‰∏∫ BÔºåÂê¶Âàô‰ªÄ‰πàÈÉΩ‰∏çÂÅö„ÄÇUnsafe ÂÄüÂä© CPU Êåá‰ª§ cmpxchg Êù•ÂÆûÁé∞„ÄÇ CAS ‰ΩøÁî®ÂÆû‰æã ÂØπ sizeCtl ÁöÑÊéßÂà∂ÈÉΩÊòØÁî® CAS Êù•ÂÆûÁé∞ÁöÑÔºö -1 ‰ª£Ë°® table Ê≠£Âú®ÂàùÂßãÂåñ N Ë°®Á§∫Êúâ -N-1 ‰∏™Á∫øÁ®ãÊ≠£Âú®ËøõË°åÊâ©ÂÆπÊìç‰Ωú Â¶ÇÊûú table Êú™ÂàùÂßãÂåñÔºåË°®Á§∫tableÈúÄË¶ÅÂàùÂßãÂåñÁöÑÂ§ßÂ∞è Â¶ÇÊûú table ÂàùÂßãÂåñÂÆåÊàêÔºåË°®Á§∫tableÁöÑÂÆπÈáèÔºåÈªòËÆ§ÊòØtableÂ§ßÂ∞èÁöÑ0.75ÂÄçÔºåÁî®Ëøô‰∏™ÂÖ¨ÂºèÁÆó 0.75Ôºàn ‚Äì (n &gt;&gt;&gt; 2)Ôºâ CAS ‰ºöÂá∫Áé∞ÁöÑÈóÆÈ¢òÔºöABA Ëß£ÂÜ≥ÔºöÂØπÂèòÈáèÂ¢ûÂä†‰∏Ä‰∏™ÁâàÊú¨Âè∑ÔºåÊØèÊ¨°‰øÆÊîπÔºåÁâàÊú¨Âè∑Âä† 1ÔºåÊØîËæÉÁöÑÊó∂ÂÄôÊØîËæÉÁâàÊú¨Âè∑„ÄÇ Ë¥¥‰∏Ä‰∏™Â§ç‰π†Êó∂ÂèØ‰ª•ÁúãÁöÑÈóÆÁ≠î https://cloud.tencent.com/developer/article/1491634 TreeMap Êé•‰∏ãÊù•Êàë‰ª¨‰∏ÄËµ∑Êù•ÂàÜÊûê‰∏ÄÊ≥¢ TreeMap ÔºÅÔºÅÔºÅ ÂèÇËÄÉTreeMap Ê∫êÁ†ÅÂàÜÊûê javaÈõÜÂêàÔºà6ÔºâÔºöTreeMapÊ∫êÁ†ÅÂàÜÊûêÔºàjdk1.8Ôºâ Â¶Ç‰ΩïÂÜ≥ÂÆö‰ΩøÁî®HashMap Or TreeMap ÈóÆÈ¢òÂºïÂØº Â¶Ç‰ΩïÂÜ≥ÂÆö‰ΩøÁî® HashMap ËøòÊòØ TreeMapÔºü TreeMapÁöÑÁâπÁÇπ Ê¶ÇËø∞ TreeMap Â∫ïÂ±ÇÂü∫‰∫éÁ∫¢ÈªëÊ†ëÂÆûÁé∞ ËØ•ÈõÜÂêàÊúÄÈáçË¶ÅÁöÑÁâπÁÇπÂ∞±ÊòØÂèØÊéíÂ∫èÔºåËØ•Êò†Â∞ÑÊ†πÊçÆÂÖ∂ÈîÆÁöÑËá™ÁÑ∂È°∫Â∫èËøõË°åÊéíÂ∫èÔºåÊàñËÄÖÊ†πÊçÆÂàõÂª∫Êò†Â∞ÑÊó∂Êèê‰æõÁöÑ Comparator ËøõË°åÊéíÂ∫èÔºåÂÖ∑‰ΩìÂèñÂÜ≥‰∫é‰ΩøÁî®ÁöÑÊûÑÈÄ†ÊñπÊ≥ï„ÄÇ Áî±‰∏äÂõæÂèØÁü•ÔºåTreeMap ÁªßÊâø‰∫Ü AbstractMapÔºåÂêåÊó∂ÂÆûÁé∞‰∫Ü NavigableMap (ÂØºËà™ map )ÔºåËÄå NavigableMap ÂàôÊòØÁªßÊâø‰∫Ü SortedMap ,ËÄå SortedMap Âíå AbstractMap ÂàôÊòØÂÆûÁé∞‰∫Ü Map Êé•Âè£„ÄÇ NavigableMap Êé•Âè£ÔºåNavigableMap Êé•Âè£Â£∞Êòé‰∫Ü‰∏Ä‰∫õÂàóÂÖ∑ÊúâÂØºËà™ÂäüËÉΩÁöÑÊñπÊ≥ïÔºåÈÄöËøáËøô‰∫õÂØºËà™ÊñπÊ≥ïÔºåÊàë‰ª¨ÂèØ‰ª•Âø´ÈÄüÂÆö‰ΩçÂà∞ÁõÆÊ†áÁöÑ key Êàñ Entry„ÄÇÊØîÂ¶ÇÔºö 12345678910111213141516/** * ËøîÂõûÁ∫¢ÈªëÊ†ë‰∏≠ÊúÄÂ∞èÈîÆÊâÄÂØπÂ∫îÁöÑ Entry */Map.Entry&lt;K,V&gt; firstEntry();/** * ËøîÂõûÊúÄÂ§ßÁöÑÈîÆ maxKeyÔºå‰∏î maxKey ‰ªÖÂ∞è‰∫éÂèÇÊï∞ key */K lowerKey(K key);/** * ËøîÂõûÊúÄÂ∞èÁöÑÈîÆ minKeyÔºå‰∏î minKey ‰ªÖÂ§ß‰∫éÂèÇÊï∞ key */K higherKey(K key);// ÂÖ∂‰ªñÁï• Ëá≥‰∫é SortedMap Êé•Âè£ÔºåËøô‰∏™Êé•Âè£Êèê‰æõ‰∫Ü‰∏Ä‰∫õÂü∫‰∫éÊúâÂ∫èÈîÆÁöÑÊìç‰ΩúÔºåÊØîÂ¶Ç: 1234567891011/** * ËøîÂõûÂåÖÂê´ÈîÆÂÄºÂú® [minKey, toKey) ËåÉÂõ¥ÂÜÖÁöÑ Map */SortedMap&lt;K,V&gt; headMap(K toKey);();/** * ËøîÂõûÂåÖÂê´ÈîÆÂÄºÂú® [fromKey, toKey) ËåÉÂõ¥ÂÜÖÁöÑ Map */SortedMap&lt;K,V&gt; subMap(K fromKey, K toKey);// ÂÖ∂‰ªñÁï• Ê∫êÁ†ÅÂàÜÊûêJDK 1.8‰∏≠ÁöÑTreeMapÊ∫êÁ†ÅÊúâ‰∏§ÂçÉÂ§öË°åÔºåËøòÊòØÊØîËæÉÂ§öÁöÑ„ÄÇTreeMapÂÆûÁé∞ÁöÑÊ†∏ÂøÉÈÉ®ÂàÜÊòØÂÖ≥‰∫éÁ∫¢ÈªëÊ†ëÁöÑÂÆûÁé∞ÔºåÂÖ∂ÁªùÂ§ßÈÉ®ÂàÜÁöÑÊñπÊ≥ïÂü∫Êú¨ÈÉΩÊòØÂØπÂ∫ïÂ±ÇÁ∫¢ÈªëÊ†ëÂ¢û„ÄÅÂà†„ÄÅÊü•Êìç‰ΩúÁöÑ‰∏Ä‰∏™Â∞ÅË£Ö„ÄÇÂ¶ÇÁÆÄ‰ªã‰∏ÄËäÇÊâÄËØ¥ÔºåÂè™Ë¶ÅÂºÑÊáÇ‰∫ÜÁ∫¢ÈªëÊ†ëÂéüÁêÜÔºåTreeMap Â∞±Ê≤°‰ªÄ‰πàÁßòÂØÜ‰∫Ü„ÄÇÂÖ≥‰∫éÁ∫¢ÈªëÊ†ëÁöÑÂéüÁêÜÔºåËØ∑ÂèÇËÄÉÊú¨‰∫∫ÁöÑÂè¶‰∏ÄÁØáÊñáÁ´† Á∫¢ÈªëÊ†ëËØ¶ÁªÜÂàÜÊûê„ÄÇ Á±ªÂêçÂèäÁ±ªÊàêÂëòÂèòÈáè1234567891011121314151617181920212223242526public class TreeMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements NavigableMap&lt;K,V&gt;, Cloneable, java.io.Serializable&#123; // ÊØîËæÉÂô®ÂØπË±° private final Comparator&lt;? super K&gt; comparator; // Ê†πËäÇÁÇπ private transient Entry&lt;K,V&gt; root; // ÈõÜÂêàÂ§ßÂ∞è private transient int size = 0; // Ê†ëÁªìÊûÑË¢´‰øÆÊîπÁöÑÊ¨°Êï∞ private transient int modCount = 0; // ÈùôÊÄÅÂÜÖÈÉ®Á±ªÁî®Êù•Ë°®Á§∫ËäÇÁÇπÁ±ªÂûã static final class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; K key; // ÈîÆ V value; // ÂÄº Entry&lt;K,V&gt; left; // ÊåáÂêëÂ∑¶Â≠êÊ†ëÁöÑÂºïÁî®ÔºàÊåáÈíàÔºâ Entry&lt;K,V&gt; right; // ÊåáÂêëÂè≥Â≠êÊ†ëÁöÑÂºïÁî®ÔºàÊåáÈíàÔºâ Entry&lt;K,V&gt; parent; // ÊåáÂêëÁà∂ËäÇÁÇπÁöÑÂºïÁî®ÔºàÊåáÈíàÔºâ boolean color = BLACK; // &#125;&#125; ÊûÑÈÄ†ÊñπÊ≥ï123456789101112131415161718192021public TreeMap() &#123; // 1,Êó†ÂèÇÊûÑÈÄ†ÊñπÊ≥ï comparator = null; // ÈªòËÆ§ÊØîËæÉÊú∫Âà∂&#125;public TreeMap(Comparator&lt;? super K&gt; comparator) &#123; // 2ÔºåËá™ÂÆö‰πâÊØîËæÉÂô®ÁöÑÊûÑÈÄ†ÊñπÊ≥ï this.comparator = comparator;&#125;public TreeMap(Map&lt;? extends K, ? extends V&gt; m) &#123; // 3ÔºåÊûÑÈÄ†Â∑≤Áü•MapÂØπË±°‰∏∫TreeMap comparator = null; // ÈªòËÆ§ÊØîËæÉÊú∫Âà∂ putAll(m);&#125;public TreeMap(SortedMap&lt;K, ? extends V&gt; m) &#123; // 4ÔºåÊûÑÈÄ†Â∑≤Áü•ÁöÑSortedMapÂØπË±°‰∏∫TreeMap comparator = m.comparator(); // ‰ΩøÁî®Â∑≤Áü•ÂØπË±°ÁöÑÊûÑÈÄ†Âô® try &#123; buildFromSorted(m.size(), m.entrySet().iterator(), null, null); &#125; catch (java.io.IOException cannotHappen) &#123; &#125; catch (ClassNotFoundException cannotHappen) &#123; &#125;&#125; Êü•ÊâæTreeMapÂü∫‰∫éÁ∫¢ÈªëÊ†ëÂÆûÁé∞ÔºåËÄåÁ∫¢ÈªëÊ†ëÊòØ‰∏ÄÁßçËá™Âπ≥Ë°°‰∫åÂèâÊü•ÊâæÊ†ëÔºåÊâÄ‰ª• TreeMap ÁöÑÊü•ÊâæÊìç‰ΩúÊµÅÁ®ãÂíå‰∫åÂèâÊü•ÊâæÊ†ë‰∏ÄËá¥„ÄÇ‰∫åÂèâÊ†ëÁöÑÊü•ÊâæÊµÅÁ®ãÊòØËøôÊ†∑ÁöÑÔºåÂÖàÂ∞ÜÁõÆÊ†áÂÄºÂíåÊ†πËäÇÁÇπÁöÑÂÄºËøõË°åÊØîËæÉÔºåÂ¶ÇÊûúÁõÆÊ†áÂÄºÂ∞è‰∫éÊ†πËäÇÁÇπÁöÑÂÄºÔºåÂàôÂÜçÂíåÊ†πËäÇÁÇπÁöÑÂ∑¶Â≠©Â≠êËøõË°åÊØîËæÉ„ÄÇÂ¶ÇÊûúÁõÆÊ†áÂÄºÂ§ß‰∫éÊ†πËäÇÁÇπÁöÑÂÄºÔºåÂàôÁªßÁª≠ÂíåÊ†πËäÇÁÇπÁöÑÂè≥Â≠©Â≠êÊØîËæÉ„ÄÇÂú®Êü•ÊâæËøáÁ®ã‰∏≠ÔºåÂ¶ÇÊûúÁõÆÊ†áÂÄºÂíå‰∫åÂèâÊ†ë‰∏≠ÁöÑÊüê‰∏™ËäÇÁÇπÂÄºÁõ∏Á≠âÔºåÂàôËøîÂõû trueÔºåÂê¶ÂàôËøîÂõû false„ÄÇTreeMap Êü•ÊâæÂíåÊ≠§Á±ª‰ººÔºåÂè™‰∏çËøáÂú® TreeMap ‰∏≠ÔºåËäÇÁÇπÔºàEntryÔºâÂ≠òÂÇ®ÁöÑÊòØÈîÆÂÄºÂØπ„ÄÇÂú®Êü•ÊâæËøáÁ®ã‰∏≠ÔºåÊØîËæÉÁöÑÊòØÈîÆÁöÑÂ§ßÂ∞èÔºåËøîÂõûÁöÑÊòØÂÄºÔºåÂ¶ÇÊûúÊ≤°ÊâæÂà∞ÔºåÂàôËøîÂõûnull„ÄÇTreeMap ‰∏≠ÁöÑÊü•ÊâæÊñπÊ≥ïÊòØgetÔºåÂÖ∑‰ΩìÂÆûÁé∞Âú®getEntryÊñπÊ≥ï‰∏≠ÔºåÁõ∏ÂÖ≥Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728public V get(Object key) &#123; Entry&lt;K,V&gt; p = getEntry(key); return (p==null ? null : p.value);&#125;final Entry&lt;K,V&gt; getEntry(Object key) &#123; // Offload comparator-based version for sake of performance if (comparator != null) return getEntryUsingComparator(key); if (key == null) throw new NullPointerException(); @SuppressWarnings("unchecked") Comparable&lt;? super K&gt; k = (Comparable&lt;? super K&gt;) key; Entry&lt;K,V&gt; p = root; // Êü•ÊâæÊìç‰ΩúÁöÑÊ†∏ÂøÉÈÄªËæëÂ∞±Âú®Ëøô‰∏™ while Âæ™ÁéØÈáå // key ‰∏é root ‰ΩúÊØîËæÉ while (p != null) &#123; int cmp = k.compareTo(p.key); if (cmp &lt; 0) p = p.left; else if (cmp &gt; 0) p = p.right; else return p; &#125; return null;&#125; ÈÅçÂéÜ Iterator È°∫Â∫èÈÅçÂéÜ 12345678TreeMap map = new TreeMap();Set set = map.entrySet();Iterator iter = set.iterator();while(iter.hasNext())&#123; Map.Entry entry = (Map.Entry) iter.next(); Object key = entry.getKey(); Object value = entry.getValue();&#125; foreach ÈÅçÂéÜ 1234567891011//ÈÅçÂéÜMap Á¨¨‰∫åÁßçÊñπÂºèMap&lt;String, Integer&gt; map1 = new TreeMap&lt;&gt;();map1.put("jack", 20);map1.put("rose", 18);map1.put("lucy", 17);map1.put("java", 25);//ÈÄöËøáMap.Entry(String,Integer) Ëé∑ÂèñÔºåÁÑ∂Âêé‰ΩøÁî®entry.getKey()Ëé∑ÂèñÂà∞ÈîÆÔºåÈÄöËøáentry.getValue()Ëé∑ÂèñÂà∞ÂÄºfor(Map.Entry&lt;String, Integer&gt; entry : map1.entrySet())&#123; System.out.println("ÈîÆ key Ôºö"+entry.getKey()+" ÂÄºvalue Ôºö"+entry.getValue());&#125; ‰ªé‰∏äÈù¢‰ª£Á†ÅÁâáÊÆµ‰∏≠ÂèØ‰ª•ÁúãÂá∫ÔºåÂ§ßÂÆ∂‰∏ÄËà¨ÈÉΩÊòØÂØπ TreeMap ÁöÑ key ÈõÜÂêàÊàñ Entry ÈõÜÂêàËøõË°åÈÅçÂéÜ„ÄÇ‰∏äÈù¢‰ª£Á†ÅÁâáÊÆµ‰∏≠Áî® foreach ÈÅçÂéÜ entrySet ÊñπÊ≥ï‰∫ßÁîüÁöÑÈõÜÂêàÔºåÂú®ÁºñËØëÊó∂‰ºöËΩ¨Êç¢ÊàêÁî®Ëø≠‰ª£Âô®ÈÅçÂéÜÔºåÁ≠â‰ª∑‰∫éÔºö 1234567Set entry = map.entrySet();Iterator ite = entry.iterator();while (ite.hasNext()) &#123; Map.Entry entry = (Map.Entry) iter.next(); Object key = entry.getKey(); // do something&#125; Âè¶‰∏ÄÊñπÈù¢ÔºåTreeMap Êúâ‰∏Ä‰∏™ÁâπÊÄßÔºåÂç≥ÂèØ‰ª•‰øùËØÅÈîÆÁöÑÊúâÂ∫èÊÄßÔºåÈªòËÆ§ÊòØÊ≠£Â∫è„ÄÇÊâÄ‰ª•Âú®ÈÅçÂéÜËøáÁ®ã‰∏≠ÔºåÂ§ßÂÆ∂‰ºöÂèëÁé∞ TreeMap ‰ºö‰ªéÂ∞èÂà∞Â§ßËæìÂá∫ÈîÆÁöÑÂÄº„ÄÇÈÇ£‰πàÔºåÊé•‰∏ãÊù•Â∞±Êù•ÂàÜÊûê‰∏Ä‰∏ãkeySetÊñπÊ≥ïÔºå‰ª•ÂèäÂú®ÈÅçÂéÜ keySet ÊñπÊ≥ï‰∫ßÁîüÁöÑÈõÜÂêàÊó∂ÔºåTreeMap ÊòØÂ¶Ç‰Ωï‰øùËØÅÈîÆÁöÑÊúâÂ∫èÊÄßÁöÑ„ÄÇÁõ∏ÂÖ≥‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586public Set&lt;K&gt; keySet() &#123; return navigableKeySet();&#125;public NavigableSet&lt;K&gt; navigableKeySet() &#123; KeySet&lt;K&gt; nks = navigableKeySet; return (nks != null) ? nks : (navigableKeySet = new KeySet&lt;&gt;(this));&#125;static final class KeySet&lt;E&gt; extends AbstractSet&lt;E&gt; implements NavigableSet&lt;E&gt; &#123; private final NavigableMap&lt;E, ?&gt; m; KeySet(NavigableMap&lt;E,?&gt; map) &#123; m = map; &#125; public Iterator&lt;E&gt; iterator() &#123; if (m instanceof TreeMap) return ((TreeMap&lt;E,?&gt;)m).keyIterator(); else return ((TreeMap.NavigableSubMap&lt;E,?&gt;)m).keyIterator(); &#125; // ÁúÅÁï•ÈùûÂÖ≥ÈîÆ‰ª£Á†Å&#125;Iterator&lt;K&gt; keyIterator() &#123; return new KeyIterator(getFirstEntry());&#125;final class KeyIterator extends PrivateEntryIterator&lt;K&gt; &#123; KeyIterator(Entry&lt;K,V&gt; first) &#123; super(first); &#125; public K next() &#123; return nextEntry().key; &#125;&#125;abstract class PrivateEntryIterator&lt;T&gt; implements Iterator&lt;T&gt; &#123; Entry&lt;K,V&gt; next; Entry&lt;K,V&gt; lastReturned; int expectedModCount; PrivateEntryIterator(Entry&lt;K,V&gt; first) &#123; expectedModCount = modCount; lastReturned = null; next = first; &#125; public final boolean hasNext() &#123; return next != null; &#125; final Entry&lt;K,V&gt; nextEntry() &#123; Entry&lt;K,V&gt; e = next; if (e == null) throw new NoSuchElementException(); if (modCount != expectedModCount) throw new ConcurrentModificationException(); // ÂØªÊâæËäÇÁÇπ e ÁöÑÂêéÁªßËäÇÁÇπ next = successor(e); lastReturned = e; return e; &#125; /** * Returns the successor of the specified Entry, or null if no such. */ static &lt;K,V&gt; TreeMap.Entry&lt;K,V&gt; successor(Entry&lt;K,V&gt; t) &#123; if (t == null) return null; else if (t.right != null) &#123; Entry&lt;K,V&gt; p = t.right; while (p.left != null) p = p.left; return p; &#125; else &#123; Entry&lt;K,V&gt; p = t.parent; Entry&lt;K,V&gt; ch = t; while (p != null &amp;&amp; ch == p.right) &#123; ch = p; p = p.parent; &#125; return p; &#125; &#125; // ÂÖ∂‰ªñÊñπÊ≥ïÁúÅÁï•&#125; ‰∏äÈù¢ÁöÑ‰ª£Á†ÅÊØîËæÉÂ§öÔºåkeySet Ê∂âÂèäÁöÑ‰ª£Á†ÅËøòÊòØÊØîËæÉÂ§öÁöÑÔºåÂ§ßÂÆ∂ÂèØ‰ª•‰ªé‰∏äÂæÄ‰∏ãÁúã„ÄÇ‰ªé‰∏äÈù¢Ê∫êÁ†ÅÂèØ‰ª•ÁúãÂá∫ keySet ÊñπÊ≥ïËøîÂõûÁöÑÊòØKeySetÁ±ªÁöÑÂØπË±°„ÄÇËøô‰∏™Á±ªÂÆûÁé∞‰∫ÜIterableÊé•Âè£ÔºåÂèØ‰ª•ËøîÂõû‰∏Ä‰∏™Ëø≠‰ª£Âô®„ÄÇËØ•Ëø≠‰ª£Âô®ÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÊòØKeyIteratorÔºåËÄå KeyIterator Á±ªÁöÑÊ†∏ÂøÉÈÄªËæëÊòØÂú®PrivateEntryIterator‰∏≠ÂÆûÁé∞ÁöÑ„ÄÇ‰∏äÈù¢ÁöÑ‰ª£Á†ÅËôΩÂ§öÔºå‰ΩÜÊ†∏ÂøÉ‰ª£Á†ÅËøòÊòØ KeySet Á±ªÂíå PrivateEntryIterator Á±ªÁöÑ nextEntryÊñπÊ≥ï„ÄÇKeySet Á±ªÂ∞±ÊòØ‰∏Ä‰∏™ÈõÜÂêàÔºåËøôÈáå‰∏çÂàÜÊûê‰∫Ü„ÄÇËÄå nextEntry ÊñπÊ≥ïÊØîËæÉÈáçË¶ÅÔºå‰∏ãÈù¢ÁÆÄÂçïÂàÜÊûê‰∏Ä‰∏ã„ÄÇ Âú®ÂàùÂßãÂåñ KeyIterator Êó∂Ôºå‰ºöÂ∞Ü TreeMap ‰∏≠ÂåÖÂê´ÊúÄÂ∞èÈîÆÁöÑ Entry ‰º†Áªô PrivateEntryIterator„ÄÇÂΩìË∞ÉÁî® nextEntry ÊñπÊ≥ïÊó∂ÔºåÈÄöËøáË∞ÉÁî® successor ÊñπÊ≥ïÊâæÂà∞ÂΩìÂâç entry ÁöÑÂêéÁªßÔºåÂπ∂ËÆ© next ÊåáÂêëÂêéÁªßÔºåÊúÄÂêéËøîÂõûÂΩìÂâçÁöÑ entry„ÄÇÈÄöËøáËøôÁßçÊñπÂºèÂç≥ÂèØÂÆûÁé∞ÊåâÊ≠£Â∫èËøîÂõûÈîÆÂÄºÁöÑÁöÑÈÄªËæë„ÄÇ ÊèíÂÖ•‰∏éÂà†Èô§ÂÖ∂ÂÆûÂ∞±ÊòØÁ∫¢ÈªëÊ†ëÁöÑÊèíÂÖ•ÂíåÂà†Èô§ÔºåÂÖ∑‰ΩìÁ∫¢ÈªëÊ†ëÁöÑÊèíÂÖ•ÂíåÂà†Èô§ËßÅÊàëÂè¶ÂÜôÁöÑÁ∫¢ÈªëÊ†ëÊñáÁ´†„ÄÇ ÊèíÂÖ• 1234567891011121314151617181920212223242526272829303132333435363738394041public V put(K key, V value) &#123; Entry&lt;K,V&gt; t = root; // 1.Â¶ÇÊûúÊ†πËäÇÁÇπ‰∏∫ nullÔºåÂ∞ÜÊñ∞ËäÇÁÇπËÆæ‰∏∫Ê†πËäÇÁÇπ if (t == null) &#123; compare(key, key); root = new Entry&lt;&gt;(key, value, null); size = 1; modCount++; return null; &#125; int cmp; Entry&lt;K,V&gt; parent; // split comparator and comparable paths Comparator&lt;? super K&gt; cpr = comparator; if (cpr != null) &#123; // 2.‰∏∫ key Âú®Á∫¢ÈªëÊ†ëÊâæÂà∞ÂêàÈÄÇÁöÑ‰ΩçÁΩÆ do &#123; parent = t; cmp = cpr.compare(key, t.key); if (cmp &lt; 0) t = t.left; else if (cmp &gt; 0) t = t.right; else return t.setValue(value); &#125; while (t != null); &#125; else &#123; // ‰∏é‰∏äÈù¢‰ª£Á†ÅÈÄªËæëÁ±ª‰ººÔºåÁúÅÁï• &#125; Entry&lt;K,V&gt; e = new Entry&lt;&gt;(key, value, parent); // 3.Â∞ÜÊñ∞ËäÇÁÇπÈìæÂÖ•Á∫¢ÈªëÊ†ë‰∏≠ if (cmp &lt; 0) parent.left = e; else parent.right = e; // 4.ÊèíÂÖ•Êñ∞ËäÇÁÇπÂèØËÉΩ‰ºöÁ†¥ÂùèÁ∫¢ÈªëÊ†ëÊÄßË¥®ÔºåËøôÈáå‰øÆÊ≠£‰∏Ä‰∏ã fixAfterInsertion(e); size++; modCount++; return null;&#125; put ÊñπÊ≥ï‰ª£Á†ÅÂ¶Ç‰∏äÔºåÈÄªËæëÂíå‰∫åÂèâÊü•ÊâæÊ†ëÊèíÂÖ•ËäÇÁÇπÈÄªËæë‰∏ÄËá¥„ÄÇÈáçË¶ÅÁöÑÊ≠•È™§ÊàëÂ∑≤ÁªèÂÜô‰∫ÜÊ≥®ÈáäÔºåÂπ∂‰∏çÈöæÁêÜËß£„ÄÇÊèíÂÖ•ÈÄªËæëÁöÑÂ§çÊùÇ‰πãÂ§ÑÂú®‰∫éÊèíÂÖ•ÂêéÁöÑ‰øÆÂ§çÊìç‰ΩúÔºåÂØπÂ∫îÁöÑÊñπÊ≥ïfixAfterInsertionÔºåËØ•ÊñπÊ≥ïÁöÑÊ∫êÁ†ÅÂíåËØ¥ÊòéÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041/** From CLR */ private void fixAfterInsertion(Entry&lt;K,V&gt; x) &#123; x.color = RED; while (x != null &amp;&amp; x != root &amp;&amp; x.parent.color == RED) &#123; if (parentOf(x) == leftOf(parentOf(parentOf(x)))) &#123; Entry&lt;K,V&gt; y = rightOf(parentOf(parentOf(x))); if (colorOf(y) == RED) &#123; setColor(parentOf(x), BLACK); setColor(y, BLACK); setColor(parentOf(parentOf(x)), RED); x = parentOf(parentOf(x)); &#125; else &#123; if (x == rightOf(parentOf(x))) &#123; x = parentOf(x); rotateLeft(x); &#125; setColor(parentOf(x), BLACK); setColor(parentOf(parentOf(x)), RED); rotateRight(parentOf(parentOf(x))); &#125; &#125; else &#123; Entry&lt;K,V&gt; y = leftOf(parentOf(parentOf(x))); if (colorOf(y) == RED) &#123; setColor(parentOf(x), BLACK); setColor(y, BLACK); setColor(parentOf(parentOf(x)), RED); x = parentOf(parentOf(x)); &#125; else &#123; if (x == leftOf(parentOf(x))) &#123; x = parentOf(x); rotateRight(x); &#125; setColor(parentOf(x), BLACK); setColor(parentOf(parentOf(x)), RED); rotateLeft(parentOf(parentOf(x))); &#125; &#125; &#125; root.color = BLACK; &#125; Âà†Èô§ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364public V remove(Object key) &#123; Entry&lt;K,V&gt; p = getEntry(key); if (p == null) return null; V oldValue = p.value; deleteEntry(p); return oldValue;&#125;private void deleteEntry(Entry&lt;K,V&gt; p) &#123; modCount++; size--; /* * 1. Â¶ÇÊûú p Êúâ‰∏§‰∏™Â≠©Â≠êËäÇÁÇπÔºåÂàôÊâæÂà∞ÂêéÁªßËäÇÁÇπÔºå * Âπ∂ÊääÂêéÁªßËäÇÁÇπÁöÑÂÄºÂ§çÂà∂Âà∞ËäÇÁÇπ P ‰∏≠ÔºåÂπ∂ËÆ© p ÊåáÂêëÂÖ∂ÂêéÁªßËäÇÁÇπ */ if (p.left != null &amp;&amp; p.right != null) &#123; Entry&lt;K,V&gt; s = successor(p); p.key = s.key; p.value = s.value; p = s; &#125; // p has 2 children // Start fixup at replacement node, if it exists. Entry&lt;K,V&gt; replacement = (p.left != null ? p.left : p.right); if (replacement != null) &#123; /* * 2. Â∞Ü replacement parent ÂºïÁî®ÊåáÂêëÊñ∞ÁöÑÁà∂ËäÇÁÇπÔºå * ÂêåÊó∂ËÆ©Êñ∞ÁöÑÁà∂ËäÇÁÇπÊåáÂêë replacement„ÄÇ */ replacement.parent = p.parent; if (p.parent == null) root = replacement; else if (p == p.parent.left) p.parent.left = replacement; else p.parent.right = replacement; // Null out links so they are OK to use by fixAfterDeletion. p.left = p.right = p.parent = null; // 3. Â¶ÇÊûúÂà†Èô§ÁöÑËäÇÁÇπ p ÊòØÈªëËâ≤ËäÇÁÇπÔºåÂàôÈúÄË¶ÅËøõË°åË∞ÉÊï¥ if (p.color == BLACK) fixAfterDeletion(replacement); &#125; else if (p.parent == null) &#123; // Âà†Èô§ÁöÑÊòØÊ†πËäÇÁÇπÔºå‰∏îÊ†ë‰∏≠ÂΩìÂâçÂè™Êúâ‰∏Ä‰∏™ËäÇÁÇπ root = null; &#125; else &#123; // Âà†Èô§ÁöÑËäÇÁÇπÊ≤°ÊúâÂ≠©Â≠êËäÇÁÇπ // p ÊòØÈªëËâ≤ÔºåÂàôÈúÄË¶ÅËøõË°åË∞ÉÊï¥ if (p.color == BLACK) fixAfterDeletion(p); // Â∞Ü P ‰ªéÊ†ë‰∏≠ÁßªÈô§ if (p.parent != null) &#123; if (p == p.parent.left) p.parent.left = null; else if (p == p.parent.right) p.parent.right = null; p.parent = null; &#125; &#125;&#125; ‰ªéÊ∫êÁ†Å‰∏≠ÂèØ‰ª•ÁúãÂá∫ÔºåremoveÊñπÊ≥ïÂè™ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰øùËØÅÔºåÊ†∏ÂøÉÂÆûÁé∞Âú®deleteEntryÊñπÊ≥ï‰∏≠„ÄÇdeleteEntry ‰∏ªË¶ÅÂÅö‰∫ÜËøô‰πàÂá†‰ª∂‰∫ãÔºö Â¶ÇÊûúÂæÖÂà†Èô§ËäÇÁÇπ P Êúâ‰∏§‰∏™Â≠©Â≠êÔºåÂàôÂÖàÊâæÂà∞ P ÁöÑÂêéÁªß SÔºåÁÑ∂ÂêéÂ∞Ü S ‰∏≠ÁöÑÂÄºÊã∑Ë¥ùÂà∞ P ‰∏≠ÔºåÂπ∂ËÆ© P ÊåáÂêë S Â¶ÇÊûúÊúÄÁªàË¢´Âà†Èô§ËäÇÁÇπ PÔºàP Áé∞Âú®ÊåáÂêëÊúÄÁªàË¢´Âà†Èô§ËäÇÁÇπÔºâÁöÑÂ≠©Â≠ê‰∏ç‰∏∫Á©∫ÔºåÂàôÁî®ÂÖ∂Â≠©Â≠êËäÇÁÇπÊõøÊç¢Êéâ Â¶ÇÊûúÊúÄÁªàË¢´Âà†Èô§ÁöÑËäÇÁÇπÊòØÈªëËâ≤ÁöÑËØùÔºåË∞ÉÁî® fixAfterDeletion ÊñπÊ≥ïËøõË°å‰øÆÂ§ç ‰∏äÈù¢ËØ¥‰∫Ü replacement ‰∏ç‰∏∫Á©∫Êó∂ÔºådeleteEntry ÁöÑÊâßË°åÈÄªËæë„ÄÇ‰∏äÈù¢ËØ¥ÁöÑÁï•ÂæÆÂï∞Âó¶ÔºåÂ¶ÇÊûúÁÆÄÂçïËØ¥ÁöÑËØùÔºå7‰∏™Â≠óÂç≥ÂèØÊÄªÁªìÔºöÊâæÂêéÁªß -&gt; ÊõøÊç¢ -&gt; ‰øÆÂ§ç„ÄÇËøô‰∏âÊ≠•‰∏≠ÔºåÊúÄÂ§çÊùÇÁöÑÊòØ‰øÆÂ§çÊìç‰Ωú„ÄÇ‰øÆÂ§çÊìç‰ΩúË¶ÅÈáçÊñ∞‰ΩøÁ∫¢ÈªëÊ†ëÊÅ¢Â§çÂπ≥Ë°°Ôºå‰øÆÂ§çÊìç‰ΩúÁöÑÊ∫êÁ†ÅÂàÜÊûêÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/** From CLR */ private void fixAfterDeletion(Entry&lt;K,V&gt; x) &#123; while (x != root &amp;&amp; colorOf(x) == BLACK) &#123; if (x == leftOf(parentOf(x))) &#123; Entry&lt;K,V&gt; sib = rightOf(parentOf(x)); if (colorOf(sib) == RED) &#123; setColor(sib, BLACK); setColor(parentOf(x), RED); rotateLeft(parentOf(x)); sib = rightOf(parentOf(x)); &#125; if (colorOf(leftOf(sib)) == BLACK &amp;&amp; colorOf(rightOf(sib)) == BLACK) &#123; setColor(sib, RED); x = parentOf(x); &#125; else &#123; if (colorOf(rightOf(sib)) == BLACK) &#123; setColor(leftOf(sib), BLACK); setColor(sib, RED); rotateRight(sib); sib = rightOf(parentOf(x)); &#125; setColor(sib, colorOf(parentOf(x))); setColor(parentOf(x), BLACK); setColor(rightOf(sib), BLACK); rotateLeft(parentOf(x)); x = root; &#125; &#125; else &#123; // symmetric Entry&lt;K,V&gt; sib = leftOf(parentOf(x)); if (colorOf(sib) == RED) &#123; setColor(sib, BLACK); setColor(parentOf(x), RED); rotateRight(parentOf(x)); sib = leftOf(parentOf(x)); &#125; if (colorOf(rightOf(sib)) == BLACK &amp;&amp; colorOf(leftOf(sib)) == BLACK) &#123; setColor(sib, RED); x = parentOf(x); &#125; else &#123; if (colorOf(leftOf(sib)) == BLACK) &#123; setColor(rightOf(sib), BLACK); setColor(sib, RED); rotateLeft(sib); sib = leftOf(parentOf(x)); &#125; setColor(sib, colorOf(parentOf(x))); setColor(parentOf(x), BLACK); setColor(leftOf(sib), BLACK); rotateRight(parentOf(x)); x = root; &#125; &#125; &#125; setColor(x, BLACK); &#125; Ëá™ÂÆö‰πâÊØîËæÉÂô® Âú®ÂÆû‰ΩìÁ±ªÂØπË±°‰∏≠ÂÆûÁé∞ComparableÊé•Âè£Âπ∂ÂÆûÁé∞‰∫ÜcompareTo()ÊñπÊ≥ï„ÄêStringÔºåIntegerÂØπË±°Â∞±ÊòØÊ≠§ÁßçÊñπÂºè„Äë 12345678910111213141516171819202122232425262728293031323334353637class TreeMap2_Comparable &#123; public static void main(String[] args) &#123; Map&lt;User, String&gt; map = new TreeMap&lt;&gt;(); map.put(new User("jerome", 30), "hello"); map.put(new User("memory", 30), "hello"); map.put(new User("aa", 22), "hello"); map.put(new User("bb", 20), "hello"); for (Map.Entry&lt;User, String&gt; each : map.entrySet()) &#123; System.out.println(each.getKey()+"::"+each.getValue()); &#125; &#125;&#125;class User implements Comparable&lt;User&gt;&#123; private String username; private int age; public User(String username, int age) &#123; this.username = username; this.age = age; &#125; @Override public String toString() &#123; return "User [username=" + username + ", age=" + age + "]"; &#125; @Override public int compareTo(User user) &#123; // ÂÖàÊØîËæÉ age ÔºåÂÜçÊØîËæÉ username int temp = this.age - user.age; return temp == 0 ? this.username.compareTo(user.username) : temp; &#125;&#125; ËæìÂá∫Ôºö 12345&gt; User [username=bb, age=20]::hello&gt; User [username=aa, age=22]::hello&gt; User [username=jerome, age=30]::hello&gt; User [username=memory, age=30]::hello&gt; ÂÜô‰∏Ä‰∏™Á±ªÂÆûÁé∞java.util.ComparatorÊé•Âè£(Ê≥®ÊÑèËøôÈáåÊòØComparatorÔºå‰∏äÈù¢ÊòØComparable)ÔºåÂπ∂Â∞ÜËØ•Á±ªÂØπË±°‰º†ÈÄíÁªôTreeMapÁöÑÊûÑÈÄ†ÊñπÊ≥ï„ÄÇËøôÁßçÊñπÂºèÂ∞ÜÂÆû‰ΩìÁ±ªÂíåÊØîËæÉÊú∫Âà∂Ëß£ËÄ¶ÂêàÔºåÂèØ‰ª•ÂÜôÂæàÂ§ö‰∏™‰∏çÂêåÁöÑÊØîËæÉÂô®ÂØπË±°„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152class TreeMap2_Comparator&#123; public static void main(String[] args) &#123; Map&lt;User2, String&gt; map = new TreeMap&lt;&gt;(new TreeMapComparator()); map.put(new User2("jerome", 30), "hello"); map.put(new User2("memory", 30), "hello"); map.put(new User2("aa", 22), "hello"); map.put(new User2("bb", 20), "hello"); for (Map.Entry&lt;User2, String&gt; each : map.entrySet()) &#123; System.out.println(each.getKey()+"::"+each.getValue()); &#125; &#125;&#125;class User2 &#123; // UserÂØπË±°‰∏çÂÜçÂÆûÁé∞‰ªª‰ΩïÊé•Âè£ private String username; private int age; public User2(String username, int age) &#123; super(); this.username = username; this.age = age; &#125; public String getUsername() &#123; return username; &#125; public void setUsername(String username) &#123; this.username = username; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; @Override public String toString() &#123; return "User2 [username=" + username + ", age=" + age + "]"; &#125;&#125;class TreeMapComparator implements Comparator&lt;User2&gt; &#123; // ÊØîËæÉÂô®Á±ª @Override public int compare(User2 o1, User2 o2) &#123; int temp = o1.getAge() - o2.getAge(); return temp == 0 ? o1.getUsername().compareTo(o2.getUsername()) : temp; &#125;&#125; ËæìÂá∫Âêå‰∏ä ‰∏çÂÜôÊØîËæÉÂô®Á±ªÔºåËÄåÊòØ‰ΩøÁî®ÂåøÂêçÂÜÖÈÉ®Á±ªÁöÑÂΩ¢ÂºèÊù•ÂÜôÊØîËæÉÂô® 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748class TreeMap2_InnerComparator &#123; public static void main(String[] args) &#123; Map&lt;User3, String&gt; map = new TreeMap&lt;&gt;(new Comparator&lt;User3&gt;() &#123; @Override public int compare(User3 o1, User3 o2) &#123; int temp = o1.getAge() - o2.getAge(); return temp == 0 ? o1.getUsername().compareTo(o2.getUsername()) : temp; &#125; &#125;); map.put(new User3("jimmy1", 30), "hello"); map.put(new User3("jimmy2", 30), "hello"); map.put(new User3("jimmy", 22), "hello"); map.put(new User3("jimmy", 20), "hello"); for (Map.Entry&lt;User3, String&gt; each : map.entrySet()) &#123; System.out.println(each.getKey() + "::" + each.getValue()); &#125; &#125;&#125;class User3 &#123; // UserÂØπË±°‰∏çÂÜçÂÆûÁé∞‰ªª‰ΩïÊé•Âè£ private String username; private int age; public User3(String username, int age) &#123; super(); this.username = username; this.age = age; &#125; public String getUsername() &#123; return username; &#125; public void setUsername(String username) &#123; this.username = username; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; @Override public String toString() &#123; return "User3 [username=" + username + ", age=" + age + "]"; &#125;&#125; Èù¢ËØïÁõ∏ÂÖ≥È¢òÁõÆ HashMap Âíå TreeMap ÊúâËø≠‰ª£Âô®ÂêóÔºü keySet()ÂíåentrySet()ÊñπÊ≥ïÔºåÂú®Â∞ÜHashMapÁöÑÊó∂ÂÄôÂ∑≤ÁªèËÆ≤Ëøá‰∫ÜÔºåMapÊ≤°ÊúâËø≠‰ª£Âô®ÔºåË¶ÅÂ∞ÜMapËΩ¨Âåñ‰∏∫SetÔºåÁî®SetÁöÑËø≠‰ª£Âô®ÊâçËÉΩËøõË°åÂÖÉÁ¥†Ëø≠‰ª£„ÄÇ Â¶Ç‰ΩïÂÜ≥ÂÆö‰ΩøÁî® HashMap ËøòÊòØ TreeMapÔºü ÈÉΩÊòØÈùûÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÂæóÂà∞‰∏Ä‰∏™ÊúâÂ∫èÁöÑÁªìÊûúÊó∂Â∞±Â∫îËØ•‰ΩøÁî®TreeMapÔºàÂõ†‰∏∫HashMap‰∏≠ÂÖÉÁ¥†ÁöÑÊéíÂàóÈ°∫Â∫èÊòØ‰∏çÂõ∫ÂÆöÁöÑÔºâ„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåÁî±‰∫éHashMapÊúâÊõ¥Â•ΩÁöÑÊÄßËÉΩÔºåÊïÖÂ§ßÂ§ö‰∏çÈúÄË¶ÅÊéíÂ∫èÁöÑÊó∂ÂÄôÊàë‰ª¨‰ºö‰ΩøÁî®HashMap„ÄÇ TreeMapÁöÑÁâπÁÇπÔºü ÈùûÁ∫øÁ®ãÂÆâÂÖ®ÔºåÂèØÊéíÂ∫èÔºåÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ã‰∏çÂÖÅËÆ∏ÈáçÂ§ç(ÈªòËÆ§Ê≤°ÊúâÈáçÂÜôÊØîËæÉÂô®)ÔºåÂ∫ïÂ±ÇÈááÁî®ÁöÑÊòØÁ∫¢ÈªëÊ†ë„ÄÇÂõ†‰∏∫ÂÖ∂ÈùûÁ∫øÁ®ãÂÆâÂÖ®ÔºåÊïÖÂèØ‰ª•ÂÖÅËÆ∏nullÂÄºÔºåËøô‰∏™Ë∑üHashMap„ÄÅArrayList„ÄÅLinkedListÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ Map ÁöÑ key ÂÄºÈÉΩÊòØ‰∏çÂèØ‰ª•ÈáçÂ§çÁöÑÔºåÊïÖ Set ‰∏é List ÊúÄÂ§ßÁöÑÂå∫Âà´Â∞±ÊòØ‰∏Ä‰∏™Êï∞ÊçÆ‰∏çÂèØÈáçÂ§çÔºå‰∏Ä‰∏™ÊòØÂèØ‰ª•ÈáçÂ§çÁöÑ„ÄÇ HashMap„ÄÅTreeMap„ÄÅConcurrentHashMap„ÄÅHashTable„ÄÅArrayDeque„ÄÅArrayList„ÄÅLinkedList„ÄÅVectorÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢ò‰ª•Âèä key„ÄÅvalue ÊòØÂê¶ËÉΩ‰∏∫Á©∫Ôºü ÈõÜÂêà Á∫øÁ®ãÊòØÂê¶ÂÆâÂÖ® key„ÄÅvalueÊòØÂê¶ÂèØ‰ª•‰∏∫Á©∫ ÂéüÂõ† HashMap ÈùûÁ∫øÁ®ãÂÆâÂÖ® Key„ÄÅvalueÂùáËÉΩ‰∏∫Á©∫ Key ÂèØ‰ª•‰∏∫Á©∫Ôºå‰ΩÜÂøÖÈ°ªÂîØ‰∏ÄÔºåvalueÊ≤°ÊúâÈôêÂà∂ TreeMap ÈùûÁ∫øÁ®ãÂÆâ Key‰∏çËÉΩ‰∏∫null„ÄÅvalue‰∏çËÉΩ‰∏∫null key‰∏çËÉΩ‰∏∫nullÔºåÂõ†‰∏∫ÂÖ∂ÈúÄË¶ÅÊéíÂ∫èÔºåvalueÂèØ‰ª•‰∏∫null ConcurrentHashMap Á∫øÁ®ãÂÆâÂÖ® Key„ÄÅvalueÂùá‰∏çËÉΩ‰∏∫Á©∫ key‰∏çËÉΩ‰∏∫Á©∫ÔºåÂõ†‰∏∫ÈááÁî®‰∫Üfail-safeÊú∫Âà∂ÔºåËøôÁßçÊú∫Âà∂‰ºö‰ΩøÂæóËØªÂèñÁöÑÊï∞ÊçÆ‰∏ç‰∏ÄÂÆöÊòØÊúÄÊñ∞ÁöÑÔºå‰ΩøÁî®nullÂÄºÔºåÂ∞±‰ºö‰ΩøÂæóÂÖ∂Êó†Ê≥ïÂà§Êñ≠ÂØπÂ∫îÁöÑkeyÊòØ‰∏çÂ≠òÂú®ËøòÊòØ‰∏∫Á©∫ÔºåÂõ†‰∏∫‰Ω†Êó†Ê≥ïÂÜçË∞ÉÁî®‰∏ÄÊ¨°contains(keyÔºâÊù•ÂØπkeyÊòØÂê¶Â≠òÂú®ËøõË°åÂà§Êñ≠ÔºåHashTableÂêåÁêÜ„ÄÇÊïÖÂú®ÂÖ•ÂèÇÊó∂ÔºåËã•‰∏∫ null Â∞±Êä•Á©∫ÊåáÈíàÂºÇÂ∏∏ÔºåËÄå‰∏îÂú®ÂèñhashcodeÊó∂ÔºåÂéãÊ†πÂ∞±Ê≤°ËÄÉËôëÁ©∫ÁöÑÊÉÖÂÜµ„ÄÇ HashTable Á∫øÁ®ãÂÆâÂÖ® Key„ÄÅvalueÂùá‰∏çËÉΩ‰∏∫Á©∫ value‰∏çËÉΩ‰∏∫Á©∫ÔºåÂΩìÈÄöËøáget(k)Ëé∑ÂèñÂØπÂ∫îÁöÑvalueÊó∂ÔºåÂ¶ÇÊûúËé∑ÂèñÂà∞ÁöÑÊòØnullÊó∂ÔºåÊó†Ê≥ïÂà§Êñ≠ÔºåÂÆÉÊòØputÔºàk,vÔºâÁöÑÊó∂ÂÄôvalue‰∏∫nullÔºåËøòÊòØËøô‰∏™key‰ªéÊù•Ê≤°ÊúâÂÅöËøáÊò†Â∞Ñ„ÄÇÂÅáÂ¶ÇÁ∫øÁ®ã1Ë∞ÉÁî®m.containsÔºàkeyÔºâËøîÂõûtrueÔºåÁÑ∂ÂêéÂú®Ë∞ÉÁî®m.get(key)ÔºåËøôÊó∂ÁöÑmÂèØËÉΩÂ∑≤Áªè‰∏çÂêå‰∫Ü„ÄÇÂõ†‰∏∫Á∫øÁ®ã2ÂèØËÉΩÂú®Á∫øÁ®ã1Ë∞ÉÁî®m.containsÔºàkeyÔºâÊó∂ÔºåÂà†Èô§‰∫ÜkeyËäÇÁÇπÔºåËøôÊ†∑Â∞±‰ºöÂØºËá¥Á∫øÁ®ã1ÂæóÂà∞ÁöÑÁªìÊûú‰∏çÊòéÁ°ÆÔºå‰∫ßÁîüÂ§öÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢òÔºåÂõ†Ê≠§ÔºåHashmapÂíåConcurrentHashMapÁöÑkeyÂíåvalue‰∏çËÉΩ‰∏∫null„ÄÇ ArrayDeque ÈùûÁ∫øÁ®ãÂÆâÂÖ® ÂÄº‰∏çËÉΩ‰∏∫Á©∫ ‰∏çËÉΩÂ≠òÂÖ• nullÔºåÂõ†‰∏∫Âú®addÊó∂Â∞±ÊúâÂà§Êñ≠ÔºåÂ¶ÇÊûúÊòØ nullÔºåÂ∞±Êä•Á©∫ÊåáÈíàÂºÇÂ∏∏ ArrayList ÈùûÁ∫øÁ®ãÂÆâÂÖ® ÂÄºÂèØ‰ª•‰∏∫Á©∫ ÂèØ‰ª•‰∏∫Á©∫ÔºåÂΩìÊàê‰∏Ä‰∏™ÂØπË±°Âä†ÂÖ•ÊàñÂà†Èô§ÔºåÊ∑ªÂä†null‰πü‰ºöÂ¢ûÂä†size LinkedList ÈùûÁ∫øÁ®ãÂÆâÂÖ® ÂÄºÂèØ‰ª•‰∏∫Á©∫ ÂêåArrayList Vector Á∫øÁ®ãÂÆâÂÖ® ÂÄº‰∏çÂèØ‰ª•‰∏∫Á©∫ ‰∏çËÉΩ‰∏∫Á©∫ÔºåÂõ†‰∏∫ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå‰ΩøÁî®‰∫Üfail-safeÊú∫Âà∂ÔºåÂêåConcurrentHashMap LinkedHashMapÂèÇËÄÉLinkedHashMapÊ∫êÁ†ÅËØ¶ÁªÜÂàÜÊûê LinkedHashMap Ê∫êÁ†ÅËß£ËØª(JDK 1.8) LinkedHashMapËØ¶Ëß£ JavaÈõÜÂêà‰πãLinkedHashMap JavaÈõÜÂêàÊ°ÜÊû∂‰πãLinkedHashMapËØ¶Ëß£ Java LinkedHashMapÁ±ªÊ∫êÁ†ÅËß£Êûê Java8ÈõÜÂêàÁ≥ªÂàó‰πãLinkedHashMap LinkedHashMap„ÄÅConcurrentHashMapÊ¶ÇÊã¨ Ê¶ÇËø∞ LinkedHashMapÊòØHashMapÁöÑ‰∏Ä‰∏™Â≠êÁ±ªÔºåÂÆÉ‰øùÁïôÊèíÂÖ•ÊàñËÄÖËÆøÈóÆÈ°∫Â∫èÔºåÂ∏ÆÂä©Êàë‰ª¨ÂÆûÁé∞‰∫ÜÊúâÂ∫èÁöÑHashMap„ÄÇ ÂÖ∂Áª¥Êä§‰∏Ä‰∏™ÂèåÂêëÈìæË°®ÔºåÂπ∂‰∏çÊòØËØ¥ÂÖ∂Èô§‰∫ÜÁª¥Êä§Â≠òÂÖ•ÁöÑÊï∞ÊçÆÔºåÂè¶Â§ñÁª¥Êä§‰∫Ü‰∏Ä‰∏™ÂèåÂêëÈìæË°®ÂØπË±°ÔºåËÄåÊòØËØ¥ÂÖ∂Ê†πÊçÆÈáçÂÜôHashMapÁöÑÂÆû‰ΩìÁ±ªEntryÔºåÊù•ÂÆûÁé∞ËÉΩÂ§üÂ∞ÜHashMapÁöÑÊï∞ÊçÆÁªÑÊàê‰∏Ä‰∏™ÂèåÂêëÂàóË°®ÔºåÂÖ∂Â≠òÂÇ®ÁöÑÁªìÊûÑËøòÊòØÊï∞ÁªÑ+ÈìæË°®+Á∫¢ÈªëÊ†ëÁöÑÂΩ¢ÂºèÔºå‰πüÂ∞±ÊòØÈìæË°®‰∏äÁöÑËäÇÁÇπÊúâ‰∏â‰∏™ÊåáÈíàÔºåÂàÜÂà´ÊòØbefore„ÄÅafter„ÄÅnext„ÄÇ ‰∏é HashMap ÁöÑÂå∫Âà´ËøôÈáåÁî®‰∏Ä‰∏™ demo ÂëàÁé∞Âá∫ LinkedHashMap ÁöÑÊúâÂ∫èÁöÑÁâπÁÇπ 123456789101112 public static void main(String[] args) &#123;// LinkedHashMap&lt;String,Integer&gt; map = new LinkedHashMap(16, 0.75f,true); LinkedHashMap&lt;String,Integer&gt; map = new LinkedHashMap(); map.put("apple",10000); map.put("huawei",5000); map.put("xiaomi",2000);// map.get("apple");// map.get("xiaomi"); for(Map.Entry a:map.entrySet())&#123; System.out.println(a.getValue()); &#125; &#125; 1234ËæìÂá∫‰∏∫Ôºö1000050002000 ÂèØ‰ª•ÁúãÂà∞ÔºåÂú®‰ΩøÁî®‰∏äÔºåLinkedHashMapÂíåHashMapÁöÑÂå∫Âà´Â∞±ÊòØLinkedHashMapÊòØÊúâÂ∫èÁöÑ„ÄÇ ‰∏äÈù¢Ëøô‰∏™‰æãÂ≠êÊòØÊ†πÊçÆÊèíÂÖ•È°∫Â∫èÊéíÂ∫èÔºåÊ≠§Â§ñÔºåLinkedHashMapËøòÊúâ‰∏Ä‰∏™ÂèÇÊï∞(accessOrder)ÂÜ≥ÂÆöÊòØÂê¶Âú®Ê≠§Âü∫Á°Ä‰∏äÂÜçÊ†πÊçÆËÆøÈóÆÈ°∫Â∫è(get,put)ÊéíÂ∫è,ËÆ∞‰ΩèÔºåÊòØÂú®ÊèíÂÖ•È°∫Â∫èÁöÑÂü∫Á°Ä‰∏äÂÜçÊéíÂ∫èÔºåÂêéÈù¢Áúã‰∫ÜÊ∫êÁ†ÅÂ∞±Áü•ÈÅì‰∏∫‰ªÄ‰πà‰∫Ü„ÄÇÁúã‰∏ã‰æãÂ≠ê: 123456789101112 public static void main(String[] args) &#123; LinkedHashMap&lt;String,Integer&gt; map = new LinkedHashMap(16, 0.75f,true);// LinkedHashMap&lt;String,Integer&gt; map = new LinkedHashMap(); map.put("apple",10000); map.put("huawei",5000); map.put("xiaomi",2000); map.get("apple"); map.get("xiaomi"); for(Map.Entry a:map.entrySet())&#123; System.out.println(a.getValue()); &#125; &#125; 1234ËæìÂá∫‰∏∫Ôºö5000100002000 ÂæàÊòéÊòæËÉΩÁúãÂá∫Êù•ÔºåÁî±‰∫éÂ∞Ü accessOrder == trueÔºåÊåâÁÖß‰∫ÜËØªÂèñÈ°∫Â∫èÊéíÂàóÔºåÊúÄÂºÄÂßãÁöÑÈ°∫Â∫èÊòØ apple - huawei - xiaomiÔºåÁî±‰∫éËØªÂèñ‰∫ÜappleÔºåappleÂàôËøõÂÖ•Âà∞Â∞æ(tail)ÔºåÈ°∫Â∫èÂèò‰∏∫ huawei - xiaomi - appleÔºåÂèàËØªÂèñ‰∫Ü xiaomiÔºåÊïÖÈ°∫Â∫èÂèò‰∏∫ huawei - apple - xiaomi ÔºåÊïÖÊúÄÂêéÁöÑÁ≠îÊ°àÊòØ 5000 - 10000 - 2000„ÄÇ LinkedHashMapÁöÑÂ≠òÂÇ®ÁªìÊûÑLinkedHashMap‰πãÊâÄ‰ª•ËÉΩÂÆûÁé∞Â≠òÂèñÁöÑÈ°∫Â∫èÊÄßÔºå‰∏ªË¶ÅÊòØ‰ªñÈáçÊñ∞ÂÆö‰πâ‰∫Ü Entry ÔºåËøô‰∏™Êñ∞ÁöÑ Entry ÁªßÊâøËá™HashMap.NodeÔºåÂπ∂ÂÅö‰∫ÜÊñ∞ÁöÑÊâ©Â±ïÔºå‰∏ãÈù¢Êàë‰ª¨ÁªìÂêàÊ∫êÁ†ÅÊù•ÂàÜÊûê‰∏Ä‰∏ã„ÄÇ 123456789101112131415161718192021/*** ÁªßÊâøËá™ HashMap.NodeÔºåÊñ∞Â¢û‰∫Ü before„ÄÅafter ËÆ∞ÂΩïÊèíÂÖ•È°∫Â∫è*///ÈìæË°®ÁªìÁÇπstatic class Entry&lt;K,V&gt; extends HashMap.Node&lt;K,V&gt; &#123; Entry&lt;K,V&gt; before, after; Entry(int hash, K key, V value, Node&lt;K,V&gt; next) &#123; super(hash, key, value, next); &#125;&#125;private static final long serialVersionUID = 3801124242820219131L;//ÈìæË°®Â§¥ÈÉ®transient LinkedHashMap.Entry&lt;K,V&gt; head;//ÈìæË°®Â∞æÈÉ®transient LinkedHashMap.Entry&lt;K,V&gt; tail;/** * ËÆøÈóÆÈ°∫Â∫è * The iteration ordering method for this linked hash map: &lt;tt&gt;true&lt;/tt&gt; * for access-order, &lt;tt&gt;false&lt;/tt&gt; for insertion-order. */final boolean accessOrder; Áî±‰∏äÈù¢ÁöÑ‰ª£Á†ÅÊàë‰ª¨ÂèØ‰ª•ÁúãÂá∫ÔºåËøô‰∏™Ëá™ÂÆö‰πâÁöÑ EntryÊØî HashMap.NodeÂ§ö‰∫Ü‰∏§‰∏™Â±ûÊÄßÔºåbeforeÂíåafter„ÄÇÊ≠£ÊòØ‰ΩøÁî®Ëøô‰∏§‰∏™ÂÖ≥ÈîÆÁöÑÂ±ûÊÄßÔºåÂú®LinkedHashMapÂÜÖÈÉ®ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™ÂèåÂêëÈìæË°®„ÄÇÂèåÂêëÈìæË°®Â∞±ÊòØÊØè‰∏™ËäÇÁÇπÈô§‰∫ÜÂ≠òÂÇ®Êï∞ÊçÆÊú¨Ë∫´‰πãÂ§ñÔºåËøò‰øùÂ≠òÁùÄ‰∏§‰∏™ÊåáÈíàÔºåÂú®javaÈáåÈù¢Â∞±ÊòØÊåáÂêëÂØπË±°ÁöÑÂºïÁî®Ôºå‰∏Ä‰∏™ÊòØÂâçÈ©±ËäÇÁÇπÔºå‰πüÂ∞±ÊòØ‰ªñÁöÑÂâç‰∏Ä‰∏™ËäÇÁÇπÁöÑÂºïÁî®Ôºå‰∏Ä‰∏™ÊòØÂêéÁªßËäÇÁÇπÔºå‰πüÂ∞±ÊòØ‰ªñÁöÑÂêé‰∏Ä‰∏™ËäÇÁÇπÁöÑÂºïÁî®„ÄÇËøôÊ†∑ÔºåÂ∞±ÂèØ‰ª•ÂÆûÁé∞Â≠òÂÇ®‰∏Ä‰∏™ÊúâÂ∫èËäÇÁÇπÁöÑÊï∞ÊçÆÁªìÊûÑ‰∫Ü„ÄÇÔºàËøôÈáåËØ¥Êòé‰∏ãÔºåÂú®jdk1.7‰∏≠Ôºå‰ΩøÁî®ÁöÑÁªìÊûÑ‰∏∫ÁéØÂΩ¢ÂèåÂêëÈìæË°®ÔºâÂè¶Â§ñÔºåÁªßÊâøËá™HashMap.NodeÁöÑEntryËá™Ë∫´Ëøò‰øùÁïôÁùÄÁî®‰∫éÁª¥ÊåÅÂçïÈìæË°®ÁöÑnextÂ±ûÊÄßÔºåÂõ†Ê≠§LinkedHashMapÁöÑEntryËäÇÁÇπÂÖ∑Êúâ‰∏â‰∏™ÊåáÈíàÂüüÔºånextÊåáÈíàÁª¥Êä§HashÊ°∂‰∏≠ÂÜ≤Á™ÅkeyÁöÑÈìæË°®ÔºåbeforeÂíåafterÁª¥Êä§ÂèåÂêëÈìæË°®„ÄÇÁªìÊûÑÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö ÈáçË¶ÅÊñπÊ≥ïÊûÑÈÄ†ÂáΩÊï∞‰∏§‰∏™ÊûÑÈÄ†ÊñπÊ≥ïÔºå‰∏Ä‰∏™ÊòØÁªßÊâø HashMap Ôºå‰∏Ä‰∏™ÊòØÂèØ‰ª•ÈÄâÊã© accessOrder ÁöÑÂÄº(ÈªòËÆ§ falseÔºå‰ª£Ë°®ÊåâÁÖßÊèíÂÖ•È°∫Â∫èÊéíÂ∫è)Êù•Á°ÆÂÆöÊòØÊåâÊèíÂÖ•È°∫Â∫èËøòÊòØËØªÂèñÈ°∫Â∫èÊéíÂ∫è„ÄÇ 123456789101112131415161718192021//Ë∞ÉÁî®Áà∂Á±ªHashMapÁöÑÊûÑÈÄ†ÊñπÊ≥ï„ÄÇpublic LinkedHashMap(int initialCapacity) &#123; super(initialCapacity); accessOrder = false;&#125;/** * //Ë∞ÉÁî®Áà∂Á±ªHashMapÁöÑÊûÑÈÄ†ÊñπÊ≥ï„ÄÇ * Constructs an empty insertion-ordered &lt;tt&gt;LinkedHashMap&lt;/tt&gt; instance * with the default initial capacity (16) and load factor (0.75). */public LinkedHashMap() &#123; super(); accessOrder = false;&#125;public LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder) &#123; super(initialCapacity, loadFactor); this.accessOrder = accessOrder;&#125; put()LinkedHashMap ÁöÑ put ÊñπÊ≥ï‰πüÊòØ‰ΩøÁî® HashMap ÁöÑÊñπÊ≥ïÔºå‰∏çÂêåÂú®‰∫éÈáçÂÜô‰∫Ü newNode(), afterNodeAccess() Âíå afterNodeInsertion() ËøôÂá†‰∏™ÊñπÊ≥ï„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374// HashMap ‰∏≠ÂÆûÁé∞public V put(K key, V value) &#123; return putVal(hash(key), key, value, false, true);&#125;// HashMap ‰∏≠ÂÆûÁé∞final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i; if ((tab = table) == null || (n = tab.length) == 0) &#123;...&#125; // ÈÄöËøáËäÇÁÇπ hash ÂÆö‰ΩçËäÇÁÇπÊâÄÂú®ÁöÑÊ°∂‰ΩçÁΩÆÔºåÂπ∂Ê£ÄÊµãÊ°∂‰∏≠ÊòØÂê¶ÂåÖÂê´ËäÇÁÇπÂºïÁî® if ((p = tab[i = (n - 1) &amp; hash]) == null) &#123;...&#125; else &#123; Node&lt;K,V&gt; e; K k; if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) e = p; else if (p instanceof TreeNode) &#123;...&#125; else &#123; // ÈÅçÂéÜÈìæË°®ÔºåÂπ∂ÁªüËÆ°ÈìæË°®ÈïøÂ∫¶ for (int binCount = 0; ; ++binCount) &#123; // Êú™Âú®ÂçïÈìæË°®‰∏≠ÊâæÂà∞Ë¶ÅÊèíÂÖ•ÁöÑËäÇÁÇπÔºåÂ∞ÜÊñ∞ËäÇÁÇπÊé•Âú®ÂçïÈìæË°®ÁöÑÂêéÈù¢ if ((e = p.next) == null) &#123; p.next = newNode(hash, key, value, null); if (binCount &gt;= TREEIFY_THRESHOLD - 1) &#123;...&#125; break; &#125; // ÊèíÂÖ•ÁöÑËäÇÁÇπÂ∑≤ÁªèÂ≠òÂú®‰∫éÂçïÈìæË°®‰∏≠ if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) break; p = e; &#125; &#125; if (e != null) &#123; // existing mapping for key V oldValue = e.value; if (!onlyIfAbsent || oldValue == null) &#123;...&#125; afterNodeAccess(e); // ÂõûË∞ÉÊñπÊ≥ïÔºåÂêéÁª≠ËØ¥ÊòéÔºÅÔºÅÔºÅÈáçÁÇπÂìàÔºÅÔºÅÔºÅ return oldValue; &#125; &#125; ++modCount; if (++size &gt; threshold) &#123;...&#125; afterNodeInsertion(evict); // ÂõûË∞ÉÊñπÊ≥ïÔºåÂêéÁª≠ËØ¥ÊòéÔºÅÔºÅÔºÅÈáçÁÇπÂìàÔºÅÔºÅÔºÅ return null;&#125;// HashMap ‰∏≠ÂÆûÁé∞Node&lt;K,V&gt; newNode(int hash, K key, V value, Node&lt;K,V&gt; next) &#123; return new Node&lt;&gt;(hash, key, value, next);&#125;// LinkedHashMap ‰∏≠Ë¶ÜÂÜôÔºÅÔºÅÔºÅÔºÅÔºÅÈáçÁÇπÔºÅÔºÅÔºÅNode&lt;K,V&gt; newNode(int hash, K key, V value, Node&lt;K,V&gt; e) &#123; LinkedHashMap.Entry&lt;K,V&gt; p = new LinkedHashMap.Entry&lt;K,V&gt;(hash, key, value, e); // Â∞Ü Entry Êé•Âú®ÂèåÂêëÈìæË°®ÁöÑÂ∞æÈÉ® linkNodeLast(p); return p;&#125;// LinkedHashMap ‰∏≠ÂÆûÁé∞ÔºÅÔºÅÔºÅÔºÅÔºÅprivate void linkNodeLast(LinkedHashMap.Entry&lt;K,V&gt; p) &#123; LinkedHashMap.Entry&lt;K,V&gt; last = tail; tail = p; // last ‰∏∫ nullÔºåË°®ÊòéÈìæË°®ËøòÊú™Âª∫Á´ã if (last == null) head = p; else &#123; // Â∞ÜÊñ∞ËäÇÁÇπ p Êé•Âú®ÈìæË°®Â∞æÈÉ® p.before = last; last.after = p; &#125;&#125; ÊàëÊää newNode ÊñπÊ≥ïÁ∫¢Ëâ≤ËÉåÊôØÊ†áÊ≥®‰∫ÜÂá∫Êù•ÔºåËøô‰∏ÄÊ≠•ÊØîËæÉÂÖ≥ÈîÆ„ÄÇLinkedHashMap Ë¶ÜÂÜô‰∫ÜËØ•ÊñπÊ≥ï„ÄÇÂú®Ëøô‰∏™ÊñπÊ≥ï‰∏≠ÔºåLinkedHashMap ÂàõÂª∫‰∫Ü EntryÔºåÂπ∂ÈÄöËøá linkNodeLast ÊñπÊ≥ïÂ∞Ü Entry Êé•Âú®ÂèåÂêëÈìæË°®ÁöÑÂ∞æÈÉ®ÔºåÂÆûÁé∞‰∫ÜÂèåÂêëÈìæË°®ÁöÑÂª∫Á´ã„ÄÇÂèåÂêëÈìæË°®Âª∫Á´ã‰πãÂêéÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ÊåâÁÖßÊèíÂÖ•È°∫Â∫èÂéªÈÅçÂéÜ LinkedHashMap„ÄÇ Êé•‰∏ãÊù•Â∞±ÈáçÁÇπ‰ªãÁªç newNode() „ÄÅlinkNodeLast()„ÄÅafterNodeAccess() „ÄÅafterNodeInsertion()„ÄÅafterNodeInsertion() newNode() 12345678910/** * Ê†πÊçÆ key-value ÂàõÂª∫ÂèåÂêëÈìæË°®ËäÇÁÇπ * e Ë°®Á§∫‰∏ã‰∏Ä‰∏™ËäÇÁÇπ, ‰∏çËøáËøôÈáåÊòØÁ©∫ÂÄº, ‰∏çÁî®ÁêÜ‰ºö */Node&lt;K,V&gt; newNode(int hash, K key, V value, Node&lt;K,V&gt; e) &#123; LinkedHashMap.Entry&lt;K,V&gt; p = new LinkedHashMap.Entry&lt;K,V&gt;(hash, key, value, e); linkNodeLast(p); return p;&#125; linkNodeLast() 1234567891011121314/** * ÊääÊñ∞ËäÇÁÇπÊèíÂÖ•Âà∞ÂèåÂêëÈìæË°®Â∞æÈÉ® */private void linkNodeLast(LinkedHashMap.Entry&lt;K,V&gt; p) &#123; LinkedHashMap.Entry&lt;K,V&gt; last = tail; tail = p; // Â¶ÇÊûúËøôÊòØÁ©∫ÈìæË°®, Êñ∞ËäÇÁÇπÂ∞±ÊòØÂ§¥ÁªìÁÇπ if (last == null) head = p; else &#123; p.before = last; last.after = p; &#125;&#125; afterNodeAccess() &amp; afterNodeInsertion() &amp; afterNodeRemoval() 1234// Callbacks to allow LinkedHashMap post-actionsvoid afterNodeAccess(Node&lt;K,V&gt; p) &#123; &#125;void afterNodeRemoval(Node&lt;K,V&gt; p) &#123; &#125;void afterNodeInsertion(boolean evict) &#123; &#125; Ê†πÊçÆËøô‰∏â‰∏™ÊñπÊ≥ïÁöÑÊ≥®ÈáäÂèØ‰ª•ÁúãÂá∫ÔºåËøô‰∫õÊñπÊ≥ïÁöÑÁî®ÈÄîÊòØÂú®Â¢ûÂà†Êü•Á≠âÊìç‰ΩúÂêéÔºåÈÄöËøáÂõûË∞ÉÁöÑÊñπÂºèÔºåËÆ© LinkedHashMap ÊúâÊú∫‰ºöÂÅö‰∏Ä‰∫õÂêéÁΩÆÊìç‰Ωú„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253//Ê†áÂáÜÁöÑÂ¶Ç‰ΩïÂú®ÂèåÂêëÈìæË°®‰∏≠Â∞ÜÊåáÂÆöÂÖÉÁ¥†ÊîæÂÖ•ÈòüÂ∞æ// LinkedHashMap ‰∏≠Ë¶ÜÂÜô//ËÆøÈóÆÂÖÉÁ¥†‰πãÂêéÁöÑÂõûË∞ÉÊñπÊ≥ï/** * 1. ‰ΩøÁî® get ÊñπÊ≥ï‰ºöËÆøÈóÆÂà∞ËäÇÁÇπ, ‰ªéËÄåËß¶ÂèëË∞ÉÁî®Ëøô‰∏™ÊñπÊ≥ï * 2. ‰ΩøÁî® put ÊñπÊ≥ïÊèíÂÖ•ËäÇÁÇπ, Â¶ÇÊûú key Â≠òÂú®, ‰πüÁÆóË¶ÅËÆøÈóÆËäÇÁÇπ, ‰ªéËÄåËß¶ÂèëËØ•ÊñπÊ≥ï * 3. Âè™Êúâ accessOrder ÊòØ true Êâç‰ºöË∞ÉÁî®ËØ•ÊñπÊ≥ï * 4. Ëøô‰∏™ÊñπÊ≥ï‰ºöÊääËÆøÈóÆÂà∞ÁöÑÊúÄÂêéËäÇÁÇπÈáçÊñ∞ÊèíÂÖ•Âà∞ÂèåÂêëÈìæË°®ÁªìÂ∞æ */void afterNodeAccess(Node&lt;K,V&gt; e) &#123; // move node to last // Áî® last Ë°®Á§∫ÊèíÂÖ• e ÂâçÁöÑÂ∞æËäÇÁÇπ // ÊèíÂÖ• e Âêé e ÊòØÂ∞æËäÇÁÇπ, ÊâÄ‰ª•‰πüÊòØË°®Á§∫ e ÁöÑÂâç‰∏Ä‰∏™ËäÇÁÇπ LinkedHashMap.Entry&lt;K,V&gt; last; //Â¶ÇÊûúÊòØËÆøÈóÆÂ∫èÔºå‰∏îÂΩìÂâçËäÇÁÇπÂπ∂‰∏çÊòØÂ∞æËäÇÁÇπ //Â∞ÜËØ•ËäÇÁÇπÁΩÆ‰∏∫ÂèåÂêëÈìæË°®ÁöÑÂ∞æÈÉ® if (accessOrder &amp;&amp; (last = tail) != e) &#123; // p: ÂΩìÂâçËäÇÁÇπ // b: Ââç‰∏Ä‰∏™ËäÇÁÇπ // a: Âêé‰∏Ä‰∏™ËäÇÁÇπ // ÁªìÊûÑ‰∏∫: b &lt;=&gt; p &lt;=&gt; a LinkedHashMap.Entry&lt;K,V&gt; p = (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after; // ÁªìÊûÑÂèòÊàê: b &lt;=&gt; p &lt;- a p.after = null; // Â¶ÇÊûúÂΩìÂâçËäÇÁÇπ p Êú¨Ë∫´ÊòØÂ§¥ËäÇÁÇπ, ÈÇ£‰πàÂ§¥ÁªìÁÇπË¶ÅÊîπÊàê a if (b == null) head = a; // Â¶ÇÊûú p ‰∏çÊòØÂ§¥Â∞æËäÇÁÇπ, ÊääÂâçÂêéËäÇÁÇπËøûÊé•, ÂèòÊàê: b -&gt; a else b.after = a; // a ÈùûÁ©∫, Âíå b ËøûÊé•, ÂèòÊàê: b &lt;- a if (a != null) a.before = b; // Â¶ÇÊûú a ‰∏∫Á©∫, ËØ¥Êòé p ÊòØÂ∞æËäÇÁÇπ, b Â∞±ÊòØÂÆÉÁöÑÂâç‰∏Ä‰∏™ËäÇÁÇπ, Á¨¶Âêà last ÁöÑÂÆö‰πâ // Ëøô‰∏™ else Ê≤°ÊúâÊÑè‰πâÔºåÂõ†‰∏∫ÊúÄÂºÄÂ§¥ifÂ∑≤ÁªèÁ°Æ‰øù‰∫Üp‰∏çÊòØÂ∞æÁªìÁÇπ‰∫ÜÔºåËá™ÁÑ∂after‰∏ç‰ºöÊòØnull else last = b; // Â¶ÇÊûúËøôÊòØÁ©∫ÈìæË°®, p ÊîπÊàêÂ§¥ÁªìÁÇπ if (last == null) head = p; // Âê¶ÂàôÊää p ÊèíÂÖ•Âà∞ÈìæË°®Â∞æÈÉ® else &#123; p.before = last; last.after = p; &#125; tail = p; ++modCount; &#125;&#125; 12345678910111213141516void afterNodeRemoval(Node&lt;K,V&gt; e) &#123; // ‰ºòÁæéÁöÑ‰∏ÄÁ¨îÔºåÂ≠¶‰π†‰∏ÄÊ≥¢Â¶Ç‰ΩïÂú®ÂèåÂêëÈìæË°®‰∏≠Âà†Èô§ËäÇÁÇπ LinkedHashMap.Entry&lt;K,V&gt; p = (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after; // Â∞Ü p ËäÇÁÇπÁöÑÂâçÈ©±ÂêéÂêéÁªßÂºïÁî®ÁΩÆÁ©∫ p.before = p.after = null; // b ‰∏∫ nullÔºåË°®Êòé p ÊòØÂ§¥ËäÇÁÇπ if (b == null) head = a; else b.after = a; // a ‰∏∫ nullÔºåË°®Êòé p ÊòØÂ∞æËäÇÁÇπ if (a == null) tail = b; else a.before = b;&#125; 123456789101112131415161718192021222324252627// Âú®ÊèíÂÖ•‰∏Ä‰∏™Êñ∞ÂÖÉÁ¥†‰πãÂêéÔºåÂ¶ÇÊûúÊòØÊåâÊèíÂÖ•È°∫Â∫èÊéíÂ∫èÔºåÂç≥Ë∞ÉÁî®newNode()‰∏≠ÁöÑlinkNodeLast()ÂÆåÊàê// Â¶ÇÊûúÊòØÊåâÁÖßËØªÂèñÈ°∫Â∫èÊéíÂ∫èÔºåÂç≥Ë∞ÉÁî®afterNodeAccess()ÂÆåÊàê// ÈÇ£‰πàËøô‰∏™ÊñπÊ≥ïÊòØÂπ≤ÂòõÁöÑÂë¢ÔºåËøô‰∏™Â∞±ÊòØËëóÂêçÁöÑ LRU ÁÆóÊ≥ïÂï¶// Âú®ÊèíÂÖ•ÂÆåÊàê‰πãÂêéÔºåÈúÄË¶ÅÂõûË∞ÉÂáΩÊï∞Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÁßªÈô§Êüê‰∫õÂÖÉÁ¥†ÔºÅ/** * ÊèíÂÖ•Êñ∞ËäÇÁÇπÊâç‰ºöËß¶ÂèëËØ•ÊñπÊ≥ïÔºåÂõ†‰∏∫Âè™ÊúâÊèíÂÖ•Êñ∞ËäÇÁÇπÊâçÈúÄË¶ÅÂÜÖÂ≠ò * Ê†πÊçÆ HashMap ÁöÑ putVal ÊñπÊ≥ï, evict ‰∏ÄÁõ¥ÊòØ true * removeEldestEntry ÊñπÊ≥ïË°®Á§∫ÁßªÈô§ËßÑÂàô, Âú® LinkedHashMap Èáå‰∏ÄÁõ¥ËøîÂõû false * ÊâÄ‰ª•Âú® LinkedHashMap ÈáåËøô‰∏™ÊñπÊ≥ïÁõ∏ÂΩì‰∫é‰ªÄ‰πàÈÉΩ‰∏çÂÅö */void afterNodeInsertion(boolean evict) &#123; // possibly remove eldest LinkedHashMap.Entry&lt;K,V&gt; first; // Ê†πÊçÆÊù°‰ª∂Âà§Êñ≠ÊòØÂê¶ÁßªÈô§ÊúÄËøëÊúÄÂ∞ëË¢´ËÆøÈóÆÁöÑËäÇÁÇπ if (evict &amp;&amp; (first = head) != null &amp;&amp; removeEldestEntry(first)) &#123; K key = first.key; removeNode(hash(key), key, null, false, true); &#125;&#125;// ÁßªÈô§ÊúÄËøëÊúÄÂ∞ëË¢´ËÆøÈóÆÊù°‰ª∂‰πã‰∏ÄÔºåÈÄöËøáË¶ÜÁõñÊ≠§ÊñπÊ≥ïÂèØÂÆûÁé∞‰∏çÂêåÁ≠ñÁï•ÁöÑÁºìÂ≠ò// LinkedHashMapÊòØÈªòËÆ§ËøîÂõûfalseÁöÑÔºåÊàë‰ª¨ÂèØ‰ª•ÁªßÊâøLinkedHashMapÁÑ∂ÂêéÂ§çÂÜôËØ•ÊñπÊ≥ïÂç≥ÂèØ// ‰æãÂ¶Ç LeetCode Á¨¨ 146 È¢òÂ∞±ÊòØÈááÁî®ËØ•ÁßçÊñπÊ≥ïÔºåÁõ¥Êé• return size() &gt; capacity;protected boolean removeEldestEntry(Map.Entry&lt;K,V&gt; eldest) &#123; return false;&#125; get()ÂâçÈù¢ËØ¥‰∫ÜÊèíÂÖ•È°∫Â∫èÁöÑÂÆûÁé∞ÔºåÊú¨ËäÇÊù•ËÆ≤ËÆ≤ËÆøÈóÆÈ°∫Â∫è„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåLinkedHashMap ÊòØÊåâÊèíÂÖ•È°∫Â∫èÁª¥Êä§ÈìæË°®„ÄÇ‰∏çËøáÊàë‰ª¨ÂèØ‰ª•Âú®ÂàùÂßãÂåñ LinkedHashMapÔºåÊåáÂÆö accessOrder ÂèÇÊï∞‰∏∫ trueÔºåÂç≥ÂèØËÆ©ÂÆÉÊåâËÆøÈóÆÈ°∫Â∫èÁª¥Êä§ÈìæË°®„ÄÇËÆøÈóÆÈ°∫Â∫èÁöÑÂéüÁêÜ‰∏äÂπ∂‰∏çÂ§çÊùÇÔºåÂΩìÊàë‰ª¨Ë∞ÉÁî®get„ÄÅgetOrDefault„ÄÅreplaceÁ≠âÊñπÊ≥ïÊó∂ÔºåÂè™ÈúÄË¶ÅÂ∞ÜËøô‰∫õÊñπÊ≥ïËÆøÈóÆÁöÑËäÇÁÇπÁßªÂä®Âà∞ÈìæË°®ÁöÑÂ∞æÈÉ®Âç≥ÂèØ„ÄÇÁõ∏Â∫îÁöÑÊ∫êÁ†ÅÂ¶Ç‰∏ã: 1234567891011121314151617181920212223242526272829303132333435363738394041424344// LinkedHashMap ‰∏≠Ë¶ÜÂÜôpublic V get(Object key) &#123; Node&lt;K,V&gt; e; if ((e = getNode(hash(key), key)) == null) return null; // Â¶ÇÊûú accessOrder ‰∏∫ trueÔºåÂàôË∞ÉÁî® afterNodeAccess Â∞ÜË¢´ËÆøÈóÆËäÇÁÇπÁßªÂä®Âà∞ÈìæË°®ÊúÄÂêé if (accessOrder) afterNodeAccess(e); return e.value;&#125;// LinkedHashMap ‰∏≠Ë¶ÜÂÜôvoid afterNodeAccess(Node&lt;K,V&gt; e) &#123; // move node to last LinkedHashMap.Entry&lt;K,V&gt; last; if (accessOrder &amp;&amp; (last = tail) != e) &#123; LinkedHashMap.Entry&lt;K,V&gt; p = (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after; p.after = null; // Â¶ÇÊûú b ‰∏∫ nullÔºåË°®Êòé p ‰∏∫Â§¥ËäÇÁÇπ if (b == null) head = a; else b.after = a; if (a != null) a.before = b; /* * ËøôÈáåÂ≠òÁñëÔºåÁà∂Êù°‰ª∂ÂàÜÊîØÂ∑≤ÁªèÁ°Æ‰øùËäÇÁÇπ e ‰∏ç‰ºöÊòØÂ∞æËäÇÁÇπÔºå * ÈÇ£‰πà e.after ÂøÖÁÑ∂‰∏ç‰ºö‰∏∫ nullÔºå‰∏çÁü•ÈÅì else ÂàÜÊîØÊúâ‰ªÄ‰πà‰ΩúÁî® */ else last = b; if (last == null) head = p; else &#123; // Â∞Ü p Êé•Âú®ÈìæË°®ÁöÑÊúÄÂêé p.before = last; last.after = p; &#125; tail = p; ++modCount; &#125;&#125; delete()‰∏éÊèíÂÖ•Êìç‰Ωú‰∏ÄÊ†∑ÔºåLinkedHashMap Âà†Èô§Êìç‰ΩúÁõ∏ÂÖ≥ÁöÑ‰ª£Á†Å‰πüÊòØÁõ¥Êé•Áî®Áà∂Á±ªÁöÑÂÆûÁé∞„ÄÇÂú®Âà†Èô§ËäÇÁÇπÊó∂ÔºåÁà∂Á±ªÁöÑÂà†Èô§ÈÄªËæëÂπ∂‰∏ç‰ºö‰øÆÂ§ç LinkedHashMap ÊâÄÁª¥Êä§ÁöÑÂèåÂêëÈìæË°®ÔºåËøô‰∏çÊòØÂÆÉÁöÑËÅåË¥£„ÄÇÈÇ£‰πàÂà†Èô§ÂèäËäÇÁÇπÂêéÔºåË¢´Âà†Èô§ÁöÑËäÇÁÇπËØ•Â¶Ç‰Ωï‰ªéÂèåÈìæË°®‰∏≠ÁßªÈô§Âë¢ÔºüÂΩìÁÑ∂ÔºåÂäûÊ≥ïËøòÁÆóÊòØÊúâÁöÑ„ÄÇ‰∏ä‰∏ÄËäÇÊúÄÂêéÊèêÂà∞ HashMap ‰∏≠‰∏â‰∏™ÂõûË∞ÉÊñπÊ≥ïËøêË°å LinkedHashMap ÂØπ‰∏Ä‰∫õÊìç‰ΩúÂÅöÂá∫ÂìçÂ∫î„ÄÇÊâÄ‰ª•ÔºåÂú®Âà†Èô§ÂèäËäÇÁÇπÂêéÔºåÂõûË∞ÉÊñπÊ≥ï afterNodeRemoval ‰ºöË¢´Ë∞ÉÁî®„ÄÇLinkedHashMap Ë¶ÜÂÜôËØ•ÊñπÊ≥ïÔºåÂπ∂Âú®ËØ•ÊñπÊ≥ï‰∏≠ÂÆåÊàê‰∫ÜÁßªÈô§Ë¢´Âà†Èô§ËäÇÁÇπÁöÑÊìç‰Ωú„ÄÇÁõ∏ÂÖ≥Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110// HashMap ‰∏≠ÂÆûÁé∞public V remove(Object key) &#123; Node&lt;K,V&gt; e; return (e = removeNode(hash(key), key, null, false, true)) == null ? null : e.value;&#125;// HashMap ‰∏≠ÂÆûÁé∞final Node&lt;K,V&gt; removeNode(int hash, Object key, Object value, boolean matchValue, boolean movable) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, index; if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (p = tab[index = (n - 1) &amp; hash]) != null) &#123; Node&lt;K,V&gt; node = null, e; K k; V v; if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) node = p; else if ((e = p.next) != null) &#123; if (p instanceof TreeNode) &#123;...&#125; else &#123; // ÈÅçÂéÜÂçïÈìæË°®ÔºåÂØªÊâæË¶ÅÂà†Èô§ÁöÑËäÇÁÇπÔºåÂπ∂ËµãÂÄºÁªô node ÂèòÈáè do &#123; if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) &#123; node = e; break; &#125; p = e; &#125; while ((e = e.next) != null); &#125; &#125; if (node != null &amp;&amp; (!matchValue || (v = node.value) == value || (value != null &amp;&amp; value.equals(v)))) &#123; if (node instanceof TreeNode) &#123;...&#125; // Â∞ÜË¶ÅÂà†Èô§ÁöÑËäÇÁÇπ‰ªéÂçïÈìæË°®‰∏≠ÁßªÈô§ else if (node == p) tab[index] = node.next; else p.next = node.next; ++modCount; --size; afterNodeRemoval(node); // Ë∞ÉÁî®Âà†Èô§ÂõûË∞ÉÊñπÊ≥ïËøõË°åÂêéÁª≠Êìç‰Ωú return node; &#125; &#125; return null;&#125;//ÂÖ∑‰ΩìÂàÜÊûê ‰∏äÈù¢ put() ‰∏≠ËÆ≤ÁöÑÂæàÊ∏ÖÊ•ö‰∫ÜÔºÅ// LinkedHashMap ‰∏≠Ë¶ÜÂÜôvoid afterNodeRemoval(Node&lt;K,V&gt; e) &#123; // unlink LinkedHashMap.Entry&lt;K,V&gt; p = (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after; // Â∞Ü p ËäÇÁÇπÁöÑÂâçÈ©±ÂêéÂêéÁªßÂºïÁî®ÁΩÆÁ©∫ p.before = p.after = null; // b ‰∏∫ nullÔºåË°®Êòé p ÊòØÂ§¥ËäÇÁÇπ if (b == null) head = a; else b.after = a; // a ‰∏∫ nullÔºåË°®Êòé p ÊòØÂ∞æËäÇÁÇπ if (a == null) tail = b; else a.before = b;&#125;// ÊàëÂ∑≤ÁªèÂú® HashMap ÈÉ®ÂàÜËÆ≤Ëøá‰∫Üfinal Node&lt;K,V&gt; removeNode(int hash, Object key, Object value, boolean matchValue, boolean movable) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, index; if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (p = tab[index = (n - 1) &amp; hash]) != null) &#123; Node&lt;K,V&gt; node = null, e; K k; V v; if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) node = p; else if ((e = p.next) != null) &#123; if (p instanceof TreeNode) node = ((TreeNode&lt;K,V&gt;)p).getTreeNode(hash, key); else &#123; do &#123; if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) &#123; node = e; break; &#125; p = e; &#125; while ((e = e.next) != null); &#125; &#125; if (node != null &amp;&amp; (!matchValue || (v = node.value) == value || (value != null &amp;&amp; value.equals(v)))) &#123; if (node instanceof TreeNode) ((TreeNode&lt;K,V&gt;)node).removeTreeNode(this, tab, movable); else if (node == p) tab[index] = node.next; else p.next = node.next; ++modCount; --size; afterNodeRemoval(node); return node; &#125; &#125; return null; &#125; Âà†Èô§ÁöÑËøáÁ®ãÂπ∂‰∏çÂ§çÊùÇÔºå‰∏äÈù¢Ëøô‰πàÂ§ö‰ª£Á†ÅÂÖ∂ÂÆûÂ∞±ÂÅö‰∫Ü‰∏â‰ª∂‰∫ãÔºö Ê†πÊçÆ hash ÂÆö‰ΩçÂà∞Ê°∂‰ΩçÁΩÆ ÈÅçÂéÜÈìæË°®ÊàñË∞ÉÁî®Á∫¢ÈªëÊ†ëÁõ∏ÂÖ≥ÁöÑÂà†Èô§ÊñπÊ≥ï ‰ªé LinkedHashMap Áª¥Êä§ÁöÑÂèåÈìæË°®‰∏≠ÁßªÈô§Ë¶ÅÂà†Èô§ÁöÑËäÇÁÇπ replacementTreeNode()Âú®ËøõË°åÁ∫¢ÈªëÊ†ëËΩ¨Êç¢ÁöÑÊó∂ÂÄô‰∏Ä‰∫õÊñπÊ≥ï‰πüËøõË°å‰∫ÜÈáçÂÜôÔºåÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021TreeNode&lt;K,V&gt; replacementTreeNode(Node&lt;K,V&gt; p, Node&lt;K,V&gt; next) &#123; LinkedHashMap.Entry&lt;K,V&gt; q = (LinkedHashMap.Entry&lt;K,V&gt;)p; //TreeNode‰æùÊóßÊòØHashMap‰∏≠ÁöÑÂÜÖÈÉ®Á±ª TreeNode&lt;K,V&gt; t = new TreeNode&lt;K,V&gt;(q.hash, q.key, q.value, next); transferLinks(q, t); return t;&#125;//Â∞±ÊòØÂØπÂéüÊù•ÂèåÂêëÈìæË°®‰∏≠ÁöÑÁªìÁÇπÁªìÁÇπËøõË°åÊõøÊç¢ÔºåÊõøÊç¢ÊàêTreeNodeÁªìÁÇπÔºàÂè¶Â§ñÔºåTreeNodeÁªßÊâø‰∫ÜLinkedHashMap.EntryÔºâprivate void transferLinks(LinkedHashMap.Entry&lt;K,V&gt; src, LinkedHashMap.Entry&lt;K,V&gt; dst) &#123; LinkedHashMap.Entry&lt;K,V&gt; b = dst.before = src.before; LinkedHashMap.Entry&lt;K,V&gt; a = dst.after = src.after; if (b == null) head = dst; else b.after = dst; if (a == null) tail = dst; else a.before = dst;&#125; Ëø≠‰ª£LinkedHashMap ÁöÑÈÅçÂéÜÊñπÂºèÂíå HashMap ÁöÑ‰∏ÄÊ†∑ÔºåÈÉΩÊòØÈÄöËøá entrySet ÊñπÊ≥ïËøîÂõû Set ÂÆû‰æã,ÔºåÁÑ∂ÂêéÈÄöËøá iterator ÊñπÊ≥ïËøîÂõûËø≠‰ª£Âô®ËøõË°åÈÅçÂéÜ„ÄÇ entrySet 12345678910111213141516171819/** * ËøîÂõû LinkedEntrySet ÂÆû‰æã, ËøôÊòØÈùûÈùôÊÄÅÂÜÖÈÉ®Á±ª */public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() &#123; Set&lt;Map.Entry&lt;K,V&gt;&gt; es; return (es = entrySet) == null ? (entrySet = new LinkedEntrySet()) : es;&#125;/** * Âíå HashMap ÁöÑ EntrySet Á±ª‰∏ÄÊ†∑ÁªßÊâø AbstractSet * iterator ÊñπÊ≥ïËøîÂõû LinkedEntryIterator ÂÆû‰æã */final class LinkedEntrySet extends AbstractSet&lt;Map.Entry&lt;K,V&gt;&gt; &#123; ... public final Iterator&lt;Map.Entry&lt;K,V&gt;&gt; iterator() &#123; return new LinkedEntryIterator(); &#125; ...&#125; next Âíå hasNext 1234567891011121314151617181920212223242526272829303132333435363738394041/** * next ÊñπÊ≥ïÂÆûÈôÖÊòØË∞ÉÁî®Áà∂Á±ª nextNode ÊñπÊ≥ïËøîÂõûËäÇÁÇπ */final class LinkedEntryIterator extends LinkedHashIterator implements Iterator&lt;Map.Entry&lt;K,V&gt;&gt; &#123; public final Map.Entry&lt;K,V&gt; next() &#123; return nextNode(); &#125;&#125;abstract class LinkedHashIterator &#123; LinkedHashMap.Entry&lt;K,V&gt; next; LinkedHashMap.Entry&lt;K,V&gt; current; int expectedModCount; /** * ÊûÑÈÄ†ÂáΩÊï∞, ‰ªéÂèåÂêëÈìæË°®Â§¥ËäÇÁÇπÂºÄÂßãÈÅçÂéÜ */ LinkedHashIterator() &#123; next = head; expectedModCount = modCount; current = null; &#125; public final boolean hasNext() &#123; return next != null; &#125; /** * ÈÅçÂéÜÊØîËæÉÁÆÄÂçï, Áõ¥Êé•ËØªÂèñ‰∏ã‰∏Ä‰∏™ËäÇÁÇπÂ∞±Ë°å */ final LinkedHashMap.Entry&lt;K,V&gt; nextNode() &#123; LinkedHashMap.Entry&lt;K,V&gt; e = next; if (modCount != expectedModCount) throw new ConcurrentModificationException(); if (e == null) throw new NoSuchElementException(); current = e; next = e.after; //Áõ¥Êé•ÈÅçÂéÜÂèåÂêëÈìæË°®ÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπÂç≥ÂèØ return e; &#125; ...&#125; ÈáçË¶ÅË°•ÂÖÖÁÇπ###‰∏∫‰Ωï TreeNode Ëøô‰∏™Á±ªÁªßÊâøÁöÑÊòØ LinkedHashMap ÁöÑ EntryÔºåËÄå‰∏çÊòØ HashMap ‰∏≠ÁöÑ Node Ôºü ÂÖàÊù•ÁúãÁúãÁªßÊâø‰ΩìÁ≥ªÁªìÊûÑÂõæÔºö ‰∏äÈù¢ÁöÑÁªßÊâø‰ΩìÁ≥ª‰πç‰∏ÄÁúãËøòÊòØÊúâÁÇπÂ§çÊùÇÁöÑÔºåÂêåÊó∂‰πüÊúâÁÇπËÆ©‰∫∫Ëø∑ÊÉë„ÄÇHashMap ÁöÑÂÜÖÈÉ®Á±ª TreeNode ‰∏çÁªßÊâøÂÆÉÁöÑÂÜÖÈÉ®Á±ª NodeÔºåÂç¥ÁªßÊâøËá™ Node ÁöÑÂ≠êÁ±ª LinkedHashMap ÂÜÖÈÉ®Á±ª Entry„ÄÇËøôÈáåËøôÊ†∑ÂÅöÊòØÊúâ‰∏ÄÂÆöÂéüÂõ†ÁöÑÔºåËøôÈáåÂÖà‰∏çËØ¥„ÄÇÂÖàÊù•ÁÆÄÂçïËØ¥Êòé‰∏Ä‰∏ã‰∏äÈù¢ÁöÑÁªßÊâø‰ΩìÁ≥ª„ÄÇLinkedHashMap ÂÜÖÈÉ®Á±ª Entry ÁªßÊâøËá™ HashMap ÂÜÖÈÉ®Á±ª NodeÔºåÂπ∂Êñ∞Â¢û‰∫Ü‰∏§‰∏™ÂºïÁî®ÔºåÂàÜÂà´ÊòØ before Âíå after„ÄÇËøô‰∏§‰∏™ÂºïÁî®ÁöÑÁî®ÈÄî‰∏çÈöæÁêÜËß£Ôºå‰πüÂ∞±ÊòØÁî®‰∫éÁª¥Êä§ÂèåÂêëÈìæË°®„ÄÇÂêåÊó∂ÔºåTreeNode ÁªßÊâø LinkedHashMap ÁöÑÂÜÖÈÉ®Á±ª Entry ÂêéÔºåÂ∞±ÂÖ∑Â§á‰∫ÜÂíåÂÖ∂‰ªñ Entry ‰∏ÄËµ∑ÁªÑÊàêÈìæË°®ÁöÑËÉΩÂäõ„ÄÇ‰ΩÜÊòØËøôÈáåÈúÄË¶ÅÂ§ßÂÆ∂ËÄÉËôë‰∏Ä‰∏™ÈóÆÈ¢ò„ÄÇÂΩìÊàë‰ª¨‰ΩøÁî® HashMap Êó∂ÔºåTreeNode Âπ∂‰∏çÈúÄË¶ÅÂÖ∑Â§áÁªÑÊàêÈìæË°®ËÉΩÂäõ„ÄÇÂ¶ÇÊûúÁªßÊâø LinkedHashMap ÂÜÖÈÉ®Á±ª Entry ÔºåTreeNode Â∞±Â§ö‰∫Ü‰∏§‰∏™Áî®‰∏çÂà∞ÁöÑÂºïÁî®ÔºåËøôÊ†∑ÂÅö‰∏çÊòØ‰ºöÊµ™Ë¥πÁ©∫Èó¥ÂêóÔºüÁÆÄÂçïËØ¥Êòé‰∏Ä‰∏ãËøô‰∏™ÈóÆÈ¢òÔºàÊ∞¥Âπ≥ÊúâÈôêÔºå‰∏ç‰øùËØÅÂÆåÂÖ®Ê≠£Á°ÆÔºâÔºåËøôÈáåËøô‰πàÂÅöÁ°ÆÂÆû‰ºöÊµ™Ë¥πÁ©∫Èó¥Ôºå‰ΩÜ‰∏é TreeNode ÈÄöËøáÁªßÊâøËé∑ÂèñÁöÑÁªÑÊàêÈìæË°®ÁöÑËÉΩÂäõÁõ∏ÊØîÔºåËøôÁÇπÊµ™Ë¥πÊòØÂÄºÂæóÁöÑ„ÄÇÂú® HashMap ÁöÑËÆæËÆ°ÊÄùË∑ØÊ≥®Èáä‰∏≠ÔºåÊúâËøôÊ†∑‰∏ÄÊÆµËØùÔºö Because TreeNodes are about twice the size of regular nodes, weuse them only when bins contain enough nodes to warrant use(see TREEIFY_THRESHOLD). And when they become too small (due toremoval or resizing) they are converted back to plain bins. Inusages with well-distributed user hashCodes, tree bins arerarely used. Â§ßËá¥ÁöÑÊÑèÊÄùÊòØ TreeNode ÂØπË±°ÁöÑÂ§ßÂ∞èÁ∫¶ÊòØÊôÆÈÄö Node ÂØπË±°ÁöÑ2ÂÄçÔºåÊàë‰ª¨‰ªÖÂú®Ê°∂ÔºàbinÔºâ‰∏≠ÂåÖÂê´Ë∂≥Â§üÂ§öÁöÑËäÇÁÇπÊó∂ÂÜç‰ΩøÁî®„ÄÇÂΩìÊ°∂‰∏≠ÁöÑËäÇÁÇπÊï∞ÈáèÂèòÂ∞ëÊó∂ÔºàÂèñÂÜ≥‰∫éÂà†Èô§ÂíåÊâ©ÂÆπÔºâÔºåTreeNode ‰ºöË¢´ËΩ¨Êàê Node„ÄÇÂΩìÁî®Êà∑ÂÆûÁé∞ÁöÑ hashCode ÊñπÊ≥ïÂÖ∑ÊúâËâØÂ•ΩÂàÜÂ∏ÉÊÄßÊó∂ÔºåÊ†ëÁ±ªÂûãÁöÑÊ°∂Â∞Ü‰ºöÂæàÂ∞ëË¢´‰ΩøÁî®„ÄÇ ÈÄöËøá‰∏äÈù¢ÁöÑÊ≥®ÈáäÔºåÊàë‰ª¨ÂèØ‰ª•‰∫ÜËß£Âà∞„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÂè™Ë¶Å hashCode ÁöÑÂÆûÁé∞‰∏çÁ≥üÁ≥ïÔºåNode ÁªÑÊàêÁöÑÈìæË°®ÂæàÂ∞ë‰ºöË¢´ËΩ¨ÊàêÁî± TreeNode ÁªÑÊàêÁöÑÁ∫¢ÈªëÊ†ë„ÄÇ‰πüÂ∞±ÊòØËØ¥ TreeNode ‰ΩøÁî®ÁöÑÂπ∂‰∏çÂ§öÔºåÊµ™Ë¥πÈÇ£ÁÇπÁ©∫Èó¥ÊòØÂèØÊé•ÂèóÁöÑ„ÄÇÂÅáÂ¶Ç TreeNode Êú∫Âà∂ÁªßÊâøËá™ Node Á±ªÔºåÈÇ£‰πàÂÆÉË¶ÅÊÉ≥ÂÖ∑Â§áÁªÑÊàêÈìæË°®ÁöÑËÉΩÂäõÔºåÂ∞±ÈúÄË¶Å Node ÂéªÁªßÊâø LinkedHashMap ÁöÑÂÜÖÈÉ®Á±ª Entry„ÄÇËøô‰∏™Êó∂ÂÄôÂ∞±Âæó‰∏çÂÅøÂ§±‰∫ÜÔºåÊµ™Ë¥πÂæàÂ§öÁ©∫Èó¥ÂéªËé∑Âèñ‰∏ç‰∏ÄÂÆöÁî®ÂæóÂà∞ÁöÑËÉΩÂäõ„ÄÇ Âà©Áî®LinkedHashMapÂÆûÁé∞LRUÁºìÂ≠ò( ÊàñËÄÖ LeetCode Á¨¨ 146 È¢ò)LRUÂç≥Least Recently UsedÔºåÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåÂΩìÁºìÂ≠òÊª°‰∫ÜÔºå‰ºö‰ºòÂÖàÊ∑òÊ±∞ÈÇ£‰∫õÊúÄËøëÊúÄ‰∏çÂ∏∏ËÆøÈóÆÁöÑÊï∞ÊçÆ„ÄÇÊàë‰ª¨ÁöÑLinkedHashMapÊ≠£Â•ΩÊª°Ë∂≥Ëøô‰∏™ÁâπÊÄßÔºå‰∏∫‰ªÄ‰πàÂë¢ÔºüÂΩìÊàë‰ª¨ÂºÄÂêØaccessOrder‰∏∫trueÊó∂ÔºåÊúÄÊñ∞ËÆøÈóÆ(getÊàñËÄÖput(Êõ¥Êñ∞Êìç‰Ωú))ÁöÑÊï∞ÊçÆ‰ºöË¢´‰∏¢Âà∞ÈòüÂàóÁöÑÂ∞æÂ∑¥Â§ÑÔºåÈÇ£‰πàÂèåÂêëÈòüÂàóÁöÑÂ§¥Â∞±ÊòØÊúÄ‰∏çÁªèÂ∏∏‰ΩøÁî®ÁöÑÊï∞ÊçÆ‰∫Ü„ÄÇÊØîÂ¶Ç: Â¶ÇÊûúÊúâ1 2 3Ëøô3‰∏™EntryÔºåÈÇ£‰πàËÆøÈóÆ‰∫Ü1ÔºåÂ∞±Êää1ÁßªÂà∞Â∞æÈÉ®ÂéªÔºåÂç≥2 3 1„ÄÇÊØèÊ¨°ËÆøÈóÆÈÉΩÊääËÆøÈóÆÁöÑÈÇ£‰∏™Êï∞ÊçÆÁßªÂà∞ÂèåÂêëÈòüÂàóÁöÑÂ∞æÈÉ®ÂéªÔºåÈÇ£‰πàÊØèÊ¨°Ë¶ÅÊ∑òÊ±∞Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂèåÂêëÈòüÂàóÊúÄÂ§¥ÁöÑÈÇ£‰∏™Êï∞ÊçÆ‰∏çÂ∞±ÊòØÊúÄ‰∏çÂ∏∏ËÆøÈóÆÁöÑÈÇ£‰∏™Êï∞ÊçÆ‰∫ÜÂêóÔºüÊç¢Âè•ËØùËØ¥ÔºåÂèåÂêëÈìæË°®ÊúÄÂ§¥ÁöÑÈÇ£‰∏™Êï∞ÊçÆÂ∞±ÊòØË¶ÅÊ∑òÊ±∞ÁöÑÊï∞ÊçÆ„ÄÇ Ê≠§Â§ñÔºåLinkedHashMapËøòÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ïÂ∞±ÊòØ‰∏∫‰∫ÜÊàë‰ª¨ÂÆûÁé∞LRUÁºìÂ≠òËÄåÊèê‰æõÁöÑÔºåremoveEldestEntry(Map.Entry eldest) ÊñπÊ≥ï„ÄÇËØ•ÊñπÊ≥ïÂèØ‰ª•Êèê‰æõÂú®ÊØèÊ¨°Ê∑ªÂä†Êñ∞Êù°ÁõÆÊó∂ÁßªÈô§ÊúÄÊóßÊù°ÁõÆÁöÑÂÆûÁé∞Á®ãÂ∫èÔºåÈªòËÆ§ËøîÂõû false„ÄÇ Êù•ÔºåÁªôÂ§ßÂÆ∂‰∏Ä‰∏™ÁÆÄÈôãÁöÑLRUÁºìÂ≠ò: 1234567891011121314151617public class LRUCache extends LinkedHashMap&#123; public LRUCache(int maxSize) &#123; super(maxSize, 0.75F, true); maxElements = maxSize; &#125; protected boolean removeEldestEntry(java.util.Map.Entry eldest) &#123; //ÈÄªËæëÂæàÁÆÄÂçïÔºåÂΩìÂ§ßÂ∞èË∂ÖÂá∫‰∫ÜMapÁöÑÂÆπÈáèÔºåÂ∞±ÁßªÈô§ÊéâÂèåÂêëÈòüÂàóÂ§¥ÈÉ®ÁöÑÂÖÉÁ¥†ÔºåÁªôÂÖ∂‰ªñÂÖÉÁ¥†ËÖæÂá∫ÁÇπÂú∞Êù•„ÄÇ return size() &gt; maxElements; &#125; private static final long serialVersionUID = 1L; protected int maxElements;&#125; ConcurrentHashMapÂèÇËÄÉConcurrentHashMap Ê∫êÁ†ÅÂàÜÊûê Âπ∂ÂèëÂÆπÂô®‰πãConcurrentHashMap(JDK 1.8ÁâàÊú¨) ÂÜôÁöÑÊúÄÂ•ΩÔºÅ Ê≠ªÁ£ï ConcurrentHashMap Java 8 ConcurrentHashMapÊ∫êÁ†ÅÂàÜÊûê ConcurrentHashMap ËØ¶Ëß£‰∏Ä javaÂπ∂Âèë‰πãConcurrentHashMap 1.8ÂéüÁêÜËØ¶Ëß£ ÂÜôÁöÑ‰πüÈùûÂ∏∏ÊúâÊ∑±Â∫¶ÔºåÂèØÊÉúÊéíÁâàÂæàÂ∑ÆÔºÅÔºÅÔºÅ ÂÜôÂæóÂ•Ω ‰∏ªË¶ÅÂ∞±ÊòØÂèÇËÄÉ‰∏äÈù¢‰∏â‰∏™Ëá™Â∑±ËßâÂæóÂÜôÂæóÂ•ΩÁöÑÔºÅ Ê¶ÇËø∞Âú®‰ΩøÁî® HashMap Êó∂Âú®Â§öÁ∫øÁ®ãÊÉÖÂÜµ‰∏ãÊâ©ÂÆπ‰ºöÂá∫Áé∞ CPU Êé•Ëøë 100%ÁöÑÊÉÖÂÜµÔºåÂõ†‰∏∫ hashmap Âπ∂‰∏çÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÈÄöÂ∏∏Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®Âú® java ‰ΩìÁ≥ª‰∏≠Âè§ËÄÅÁöÑ hashtable Á±ªÔºåËØ•Á±ªÂü∫Êú¨‰∏äÊâÄÊúâÁöÑÊñπÊ≥ïÈÉΩÈááÁî® synchronized ËøõË°åÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÊéßÂà∂ÔºåÂèØÊÉ≥ËÄåÁü•ÔºåÂú®È´òÂπ∂ÂèëÁöÑÊÉÖÂÜµ‰∏ãÔºåÊØèÊ¨°Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãËÉΩÂ§üËé∑ÂèñÂØπË±°ÁõëËßÜÂô®ÈîÅÔºåËøôÊ†∑ÁöÑÂπ∂ÂèëÊÄßËÉΩÁöÑÁ°Æ‰∏ç‰ª§‰∫∫Êª°ÊÑè„ÄÇÂè¶Â§ñ‰∏ÄÁßçÊñπÂºèÈÄöËøá Collections ÁöÑMap synchronizedMap(Map m)Â∞Ü hashmap ÂåÖË£ÖÊàê‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®ÁöÑ map„ÄÇÊØîÂ¶Ç SynchronzedMap ÁöÑ put ÊñπÊ≥ïÊ∫êÁ†Å‰∏∫Ôºö 123public V put(K key, V value) &#123; synchronized (mutex) &#123;return m.put(key, value);&#125;&#125; ÂÆûÈôÖ‰∏ä SynchronizedMap ÂÆûÁé∞‰æùÁÑ∂ÊòØÈááÁî® synchronized Áã¨Âç†ÂºèÈîÅËøõË°åÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂπ∂ÂèëÊéßÂà∂ÁöÑ„ÄÇÂêåÊ†∑ÔºåËøôÁßçÊñπÊ°àÁöÑÊÄßËÉΩ‰πüÊòØ‰ª§‰∫∫‰∏çÂ§™Êª°ÊÑèÁöÑ„ÄÇÈíàÂØπËøôÁßçÂ¢ÉÂÜµÔºåDoug Lea Â§ßÂ∏à‰∏çÈÅó‰ΩôÂäõÁöÑ‰∏∫Êàë‰ª¨ÂàõÈÄ†‰∫Ü‰∏Ä‰∫õÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂπ∂ÂèëÂÆπÂô®ÔºåËÆ©ÊØè‰∏Ä‰∏™ java ÂºÄÂèë‰∫∫ÂëòÂÄçÊÑüÂπ∏Á¶è„ÄÇÁõ∏ÂØπ‰∫é hashmap Êù•ËØ¥ÔºåConcurrentHashMap Â∞±ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ mapÔºåÂÖ∂‰∏≠Âà©Áî®‰∫ÜÈîÅÂàÜÊÆµÁöÑÊÄùÊÉ≥ÊèêÈ´ò‰∫ÜÂπ∂ÂèëÂ∫¶„ÄÇ ConcurrentHashMap Âú® JDK1.7 ÁöÑÁâàÊú¨ÁΩë‰∏äËµÑÊñôÂæàÂ§öÔºåÊúâÂÖ¥Ë∂£ÁöÑÂèØ‰ª•ÂéªÁúãÁúã„ÄÇ JDK 1.7 ÁâàÊú¨ÂÖ≥ÈîÆË¶ÅÁ¥†Ôºö segment ÁªßÊâø‰∫Ü ReentrantLock ÂÖÖÂΩìÈîÅÁöÑËßíËâ≤Ôºå‰∏∫ÊØè‰∏Ä‰∏™ segment Êèê‰æõ‰∫ÜÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ‰øùÈöúÔºõ segment Áª¥Êä§‰∫ÜÂìàÂ∏åÊï£ÂàóË°®ÁöÑËã•Âπ≤‰∏™Ê°∂ÔºåÊØè‰∏™Ê°∂Áî± HashEntry ÊûÑÊàêÁöÑÈìæË°®„ÄÇ ËÄåÂà∞‰∫Ü JDK 1.8 ÁöÑ ConcurrentHashMap Â∞±Êúâ‰∫ÜÂæàÂ§ßÁöÑÂèòÂåñÔºåÂÖâÊòØ‰ª£Á†ÅÈáèÂ∞±Ë∂≥Ë∂≥Â¢ûÂä†‰∫ÜÂæàÂ§ö„ÄÇ1.8 ÁâàÊú¨ËàçÂºÉ‰∫Ü segmentÔºåÂπ∂‰∏îÂ§ßÈáè‰ΩøÁî®‰∫Ü synchronizedÔºå‰ª•Âèä CAS Êó†ÈîÅÊìç‰Ωú‰ª•‰øùËØÅ ConcurrentHashMap Êìç‰ΩúÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÊÄß„ÄÇËá≥‰∫é‰∏∫‰ªÄ‰πà‰∏çÁî® ReentrantLock ËÄåÊòØ Synchronzied Âë¢ÔºüÂÆûÈôÖ‰∏äÔºåsynchronzied ÂÅö‰∫ÜÂæàÂ§öÁöÑ‰ºòÂåñÔºåÂåÖÊã¨ÂÅèÂêëÈîÅÔºåËΩªÈáèÁ∫ßÈîÅÔºåÈáçÈáèÁ∫ßÈîÅÔºåÂèØ‰ª•‰æùÊ¨°Âêë‰∏äÂçáÁ∫ßÈîÅÁä∂ÊÄÅÔºå‰ΩÜ‰∏çËÉΩÈôçÁ∫ßÔºåÂõ†Ê≠§Ôºå‰ΩøÁî® synchronized Áõ∏ËæÉ‰∫é ReentrantLock ÁöÑÊÄßËÉΩ‰ºöÊåÅÂπ≥ÁîöËá≥Âú®Êüê‰∫õÊÉÖÂÜµÊõ¥‰ºòÔºåÂÖ∑‰ΩìÁöÑÊÄßËÉΩÊµãËØïÂèØ‰ª•ÂéªÁΩë‰∏äÊü•ÈòÖ‰∏Ä‰∫õËµÑÊñô„ÄÇÂè¶Â§ñÔºåÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÊîπÂèò‰∏∫ÈááÁî®Êï∞ÁªÑ+ÈìæË°®+Á∫¢ÈªëÊ†ëÁöÑÊï∞ÊçÆÂΩ¢Âºè„ÄÇ ‰ΩúËÄÖ: ‰Ω†Âê¨___ÈìæÊé•Ôºöhttps://juejin.im/post/5aeeaba8f265da0b9d781d16Êù•Ê∫êÔºöÊéòÈáëËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ ‰∏éHashMapÂå∫Âà´Á∫øÁ®ãÂÆâÂÖ® ‰∏é ÈùûÁ∫øÁ®ãÂÆâÂÖ® ÁöÑÂå∫Âà´ ÂÖ≥ÈîÆÂ±ûÊÄßÂíåÁ±ªtableÊâÄÊúâÊï∞ÊçÆÈÉΩÂ≠òÂú®table‰∏≠ÔºåtableÁöÑÂÆπÈáè‰ºöÊ†πÊçÆÂÆûÈôÖÊÉÖÂÜµËøõË°åÊâ©ÂÆπÔºåtable[i]Â≠òÊîæÁöÑÊï∞ÊçÆÁ±ªÂûãÊúâ‰ª•‰∏ã3ÁßçÔºö TreeBin Áî®‰∫éÂåÖË£ÖÁ∫¢ÈªëÊ†ëÁªìÊûÑÁöÑÁªìÁÇπÁ±ªÂûã ForwardingNode Êâ©ÂÆπÊó∂Â≠òÊîæÁöÑÁªìÁÇπÁ±ªÂûãÔºåÂπ∂ÂèëÊâ©ÂÆπÁöÑÂÆûÁé∞ÂÖ≥ÈîÆ‰πã‰∏Ä Node ÊôÆÈÄöÁªìÁÇπÁ±ªÂûãÔºåË°®Á§∫ÈìæË°®Â§¥ÁªìÁÇπ ‰Ωú‰∏∫ ConcurrentHashMap ÁöÑÊï∞ÊçÆÂÆπÂô®ÔºåÈááÁî® ÊáíÂä†ËΩΩ ÁöÑÊñπÂºèÔºåÁõ¥Âà∞Á¨¨‰∏ÄÊ¨°ÊèíÂÖ•Êï∞ÊçÆÁöÑÊó∂ÂÄôÊâç‰ºöËøõË°åÂàùÂßãÂåñÊìç‰ΩúÔºåÊï∞ÁªÑÁöÑÂ§ßÂ∞èÊÄªÊòØ‰∏∫ 2 ÁöÑÂπÇÊ¨°Êñπ„ÄÇ nextTable12//Êâ©ÂÆπÊó∂‰ΩøÁî®ÔºåÂπ≥Êó∂‰∏∫ nullÔºåÂè™ÊúâÂú®Êâ©ÂÆπÁöÑÊó∂ÂÄôÊâç‰∏∫Èùû nullvolatile Node&lt;K,V&gt;[] nextTable; sizeCtl1private transient volatile int sizeCtl; ÊéßÂà∂Ê†áËØÜÁ¨¶ÔºåÁî®Êù•ÊéßÂà∂tableÁöÑÂàùÂßãÂåñÂíåÊâ©ÂÆπÁöÑÊìç‰ΩúÔºå‰∏çÂêåÁöÑÂÄºÊúâ‰∏çÂêåÁöÑÂê´‰πâÔºö ÂΩì‰∏∫Ë¥üÊï∞Êó∂Ôºö-1‰ª£Ë°®Ê≠£Âú®ÂàùÂßãÂåñÔºàÂÖ∂ÂÆû‰πüÂ∞±Áõ∏ÂΩì‰∫éÁ¨¨‰∏ÄÊ¨°Êâ©ÂÆπÔºâÔºå-N‰ª£Ë°®ÊúâN-1‰∏™Á∫øÁ®ãÊ≠£Âú®Â∏ÆÂøôËøõË°åÊâ©ÂÆπ ÂΩì‰∏∫0Êó∂Ôºö‰ª£Ë°®ÂΩìÊó∂ÁöÑtableËøòÊ≤°ÊúâË¢´ÂàùÂßãÂåñ ÂΩì‰∏∫Ê≠£Êï∞Êó∂ÔºöË°®Á§∫ÂàùÂßãÂåñÊàñËÄÖ‰∏ã‰∏ÄÊ¨°ËøõË°åÊâ©ÂÆπÁöÑÂ§ßÂ∞è sizeCtl ÂèòÈáèÊãÖÂΩì‰∫Ü 5 ÁßçËßíËâ≤Ôºå ËÆæËÆ°ÈùûÂ∏∏Á≤æÂ∑ß ‚ë† È¶ñÊ¨°ÂàùÂßãÂåñÊó∂Ôºå ÂÖ∂ÂèòÈáèÂê´‰πâ‰∏∫ÂàùÂßãÂÆπÈáè ‚ë° Êâ©ÂÆπ‰ª•ÂêéÔºå ÂÖ∂ÂÄº‰∏∫Ëß¶Âèë‰∏ã‰∏ÄÊ¨°Êâ©ÂÆπÁöÑÂÖÉÁ¥†Êï∞ÈáèÈòàÂÄº ‚ë¢ ÂÖ∂Ê≠£Ë¥üÁä∂ÊÄÅÔºå Ê†áËØÜ‰∫ÜÂΩìÂâçÊï∞ÁªÑÊòØÂê¶Â§Ñ‰∫éÊâ©ÂÆπÁä∂ÊÄÅ ‚ë£ sizeCtl ‰∏∫Ë¥üÂÄºÊó∂ÔºåÈ´ò16‰ΩçbitÂèçÊò†‰∫ÜÊ≠£Âú®ËøõË°åÁöÑÊâ©ÂÆπÊìç‰ΩúÊòØÈíàÂØπÂì™‰∏™ÂÆπÈáèËøõË°åÁöÑ ‚ë§ sizeCtl ‰∏∫Ë¥üÂÄºÊó∂Ôºå‰Ωé 16‰Ωçbit ÂèçÊò†‰∫ÜÂèÇ‰∏éÊ≠§Ê¨°Êâ©ÂÆπÁöÑÁ∫øÁ®ãÊúâÂ§öÂ∞ë‰∏™ 1234567891011if tableÊú™ÂÆåÊàêÂàùÂßãÂåñ: sizeCtl = 0 //Êú™ÊåáÂÆöÂàùÂßãÂÆπÈáèÊó∂ÁöÑÈªòËÆ§ÂÄº sizeCtl &gt; 0 //ÊåáÂÆöÂàùÂßãÂÆπÈáè(Èùû‰º†ÂÖ•ÂÄºÔºåÊòØ2ÁöÑÂπÇÊ¨°‰øÆÊ≠£ÂÄº)Â§ßÂ∞èÁöÑ‰∏§ÂÄç sizeCtl =- 1 //Ë°®ÊòétableÊ≠£Âú®ÂàùÂßãÂåñelse if nextTable‰∏∫Á©∫: if Êâ©ÂÆπÊó∂ÂèëÁîüÈîôËØØ(Â¶ÇÂÜÖÂ≠ò‰∏çË∂≥„ÄÅtable.length * 2 &gt; Integer.MAX_VALUEÁ≠â): sizeCtl = Integer.MAX_VALUE //‰∏çÂøÖÂÜçÊâ©ÂÆπ‰∫ÜÔºÅ else: sizeCtl = table.length * 0.75 //Êâ©ÂÆπÈòàÂÄºË∞É‰∏∫tableÂÆπÈáèÂ§ßÂ∞èÁöÑ0.75ÂÄçelse: sizeCtl = -(1+N) //NÁöÑ‰ΩéRESIZE_STAMP_SHIFT‰ΩçË°®Á§∫ÂèÇ‰∏éÊâ©ÂÆπÁ∫øÁ®ãÊï∞ÔºåÂêéÈù¢ËØ¶ÁªÜ‰ªãÁªç sun.misc.Unsafe UÂú® ConcurrentHashMap ÁöÑÂÆûÁé∞‰∏≠ÂèØ‰ª•ÁúãÂà∞Â§ßÈáèÁöÑ U.compareAndSwapXXXX ÁöÑÊñπÊ≥ïÂéª‰øÆÊîπ ConcurrentHashMap ÁöÑ‰∏Ä‰∫õÂ±ûÊÄß„ÄÇËøô‰∫õÊñπÊ≥ïÂÆûÈôÖ‰∏äÊòØÂà©Áî®‰∫Ü CAS ÁÆóÊ≥ï ‰øùËØÅ‰∫ÜÁ∫øÁ®ãÂÆâÂÖ®ÊÄßÔºåËøôÊòØ‰∏ÄÁßç‰πêËßÇÁ≠ñÁï•ÔºåÂÅáËÆæÊØè‰∏ÄÊ¨°Êìç‰ΩúÈÉΩ‰∏ç‰ºö‰∫ßÁîüÂÜ≤Á™ÅÔºåÂΩì‰∏î‰ªÖÂΩìÂÜ≤Á™ÅÂèëÁîüÁöÑÊó∂ÂÄôÂÜçÂéªÂ∞ùËØï„ÄÇËÄå CAS Êìç‰Ωú‰æùËµñ‰∫éÁé∞‰ª£Â§ÑÁêÜÂô®Êåá‰ª§ÈõÜÔºåÈÄöËøáÂ∫ïÂ±ÇCMPXCHGÊåá‰ª§ÂÆûÁé∞„ÄÇCAS(V,O,N)Ê†∏ÂøÉÊÄùÊÉ≥‰∏∫ÔºöËã•ÂΩìÂâçÂèòÈáèÂÆûÈôÖÂÄº V ‰∏éÊúüÊúõÁöÑÊóßÂÄº O Áõ∏ÂêåÔºåÂàôË°®ÊòéËØ•ÂèòÈáèÊ≤°Ë¢´ÂÖ∂‰ªñÁ∫øÁ®ãËøõË°å‰øÆÊîπÔºåÂõ†Ê≠§ÂèØ‰ª•ÂÆâÂÖ®ÁöÑÂ∞ÜÊñ∞ÂÄº N ËµãÂÄºÁªôÂèòÈáèÔºõËã•ÂΩìÂâçÂèòÈáèÂÆûÈôÖÂÄº V ‰∏éÊúüÊúõÁöÑÊóßÂÄº O ‰∏çÁõ∏ÂêåÔºåÂàôË°®ÊòéËØ•ÂèòÈáèÂ∑≤ÁªèË¢´ÂÖ∂‰ªñÁ∫øÁ®ãÂÅö‰∫ÜÂ§ÑÁêÜÔºåÊ≠§Êó∂Â∞ÜÊñ∞ÂÄº N ËµãÁªôÂèòÈáèÊìç‰ΩúÂ∞±ÊòØ‰∏çÂÆâÂÖ®ÁöÑÔºåÂú®ËøõË°åÈáçËØï„ÄÇËÄåÂú®Â§ßÈáèÁöÑÂêåÊ≠•ÁªÑ‰ª∂ÂíåÂπ∂ÂèëÂÆπÂô®ÁöÑÂÆûÁé∞‰∏≠‰ΩøÁî® CAS ÊòØÈÄöËøásun.misc.UnsafeÁ±ªÂÆûÁé∞ÁöÑÔºåËØ•Á±ªÊèê‰æõ‰∫Ü‰∏Ä‰∫õÂèØ‰ª•Áõ¥Êé•ÊìçÊéßÂÜÖÂ≠òÂíåÁ∫øÁ®ãÁöÑÂ∫ïÂ±ÇÊìç‰ΩúÔºåÂèØ‰ª•ÁêÜËß£‰∏∫ java ‰∏≠ÁöÑ‚ÄúÊåáÈíà‚Äù„ÄÇËØ•ÊàêÂëòÂèòÈáèÁöÑËé∑ÂèñÊòØÂú®ÈùôÊÄÅ‰ª£Á†ÅÂùó‰∏≠Ôºö 12345678static &#123; try &#123; U = sun.misc.Unsafe.getUnsafe(); ....... &#125; catch (Exception e) &#123; throw new Error(e); &#125;&#125; Âú® ConcurrentHashMap ‰∏≠Ôºå‰∏ªË¶ÅÁî®Âà∞ CAS ÁÆóÊ≥ïÁöÑÊúâ‰∏â‰∏™ÊñπÊ≥ïÔºö tabAt 123static final &lt;K,V&gt; Node&lt;K,V&gt; tabAt(Node&lt;K,V&gt;[] tab, int i) &#123; return (Node&lt;K,V&gt;)U.getObjectVolatile(tab, ((long)i &lt;&lt; ASHIFT) + ABASE);&#125; ËØ•ÊñπÊ≥ïÁî®Êù•Ëé∑Âèñ table Êï∞ÁªÑ‰∏≠Á¥¢Âºï‰∏∫ i ÁöÑ Node ÂÖÉÁ¥†„ÄÇ casTabAt 1234static final &lt;K,V&gt; boolean casTabAt(Node&lt;K,V&gt;[] tab, int i, Node&lt;K,V&gt; c, Node&lt;K,V&gt; v) &#123; return U.compareAndSwapObject(tab, ((long)i &lt;&lt; ASHIFT) + ABASE, c, v);&#125; Âü∫‰∫é CAS Â∞ùËØïÊõ¥Êñ∞ table ‰∏ä‰∏ãÊ†á‰∏∫ i ÁöÑÁªìÁÇπÁöÑÂÄº‰∏∫ v„ÄÇ setTabAt 123static final &lt;K,V&gt; void setTabAt(Node&lt;K,V&gt;[] tab, int i, Node&lt;K,V&gt; v) &#123; U.putObjectVolatile(tab, ((long)i &lt;&lt; ASHIFT) + ABASE, v);&#125; Áî®‰∫éËÆæÁΩÆ table ‰∏ä‰∏ãÊ†á‰∏∫ i ÁöÑÁªìÁÇπ‰∏∫ vÔºåÁõ∏ÂØπ‰∫é casTabAt ÊñπÊ≥ïÁöÑÂå∫Âà´Âú®‰∫é‰∏çÂÖ≥Ê≥®ÂéÜÂè≤ÂÄº„ÄÇ NodeNode Á±ªÂÆûÁé∞‰∫Ü Map.Entry Êé•Âè£Ôºå‰∏ªË¶ÅÂ≠òÊîæ key-value ÂØπÔºåÂπ∂‰∏îÂÖ∑Êúâ next ÂüüÔºåÂè¶Â§ñÂèØ‰ª•ÁúãÂá∫ÂæàÂ§öÂ±ûÊÄßÈÉΩÊòØÁî® volatile ËøõË°å‰øÆÈ•∞ÁöÑÔºå‰πüÂ∞±ÊòØ‰∏∫‰∫Ü‰øùËØÅÂÜÖÂ≠òÂèØËßÅÊÄß„ÄÇ 1234567static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final int hash; final K key; volatile V val; volatile Node&lt;K,V&gt; next; ......&#125; TreeNodeÊ†ëËäÇÁÇπÔºåÁªßÊâø‰∫éÊâøËΩΩÊï∞ÊçÆÁöÑ Node Á±ª„ÄÇËÄåÁ∫¢ÈªëÊ†ëÁöÑÊìç‰ΩúÊòØÈíàÂØπ TreeBin Á±ªÁöÑÔºå‰ªéËØ•Á±ªÁöÑÊ≥®Èáä‰πüÂèØ‰ª•ÁúãÂá∫Ôºå‰πüÂ∞±ÊòØ TreeBin ‰ºöÂ∞Ü TreeNode ËøõË°åÂÜç‰∏ÄÊ¨°Â∞ÅË£Ö 1234567891011** * Nodes for use in TreeBins */static final class TreeNode&lt;K,V&gt; extends Node&lt;K,V&gt; &#123; TreeNode&lt;K,V&gt; parent; // red-black tree links TreeNode&lt;K,V&gt; left; TreeNode&lt;K,V&gt; right; TreeNode&lt;K,V&gt; prev; // needed to unlink next upon deletion boolean red; ......&#125; TreeBinËøô‰∏™Á±ªÂπ∂‰∏çË¥üË¥£ÂåÖË£ÖÁî®Êà∑ÁöÑ key„ÄÅvalue ‰ø°ÊÅØÔºåËÄåÊòØÂåÖË£ÖÁöÑÂæàÂ§ö TreeNode ËäÇÁÇπ„ÄÇÂÆûÈôÖÁöÑ ConcurrentHashMap‚ÄúÊï∞ÁªÑ‚Äù‰∏≠ÔºåÂ≠òÊîæÁöÑÊòØ TreeBin ÂØπË±°ÔºåËÄå‰∏çÊòØ TreeNode ÂØπË±°„ÄÇ 1234567891011static final class TreeBin&lt;K,V&gt; extends Node&lt;K,V&gt; &#123; TreeNode&lt;K,V&gt; root; volatile TreeNode&lt;K,V&gt; first; volatile Thread waiter; volatile int lockState; // values for lockState static final int WRITER = 1; // set while holding write lock static final int WAITER = 2; // set when waiting for write lock static final int READER = 4; // increment value for setting read lock ......&#125; ForwardingNodeÂú®Êâ©ÂÆπÊó∂Êâç‰ºöÂá∫Áé∞ÁöÑÁâπÊÆäËäÇÁÇπÔºåÂú®ËΩ¨ÁßªÁöÑÊó∂ÂÄôÊîæÂú®Â§¥ÈÉ®ÁöÑËäÇÁÇπÔºåÊòØ‰∏Ä‰∏™Á©∫ËäÇÁÇπÔºåÂÖ∂ key,value,hash ÂÖ®ÈÉ®‰∏∫ null„ÄÇÂπ∂Êã•Êúâ nextTable ÊåáÈíàÂºïÁî®Êñ∞ÁöÑ table Êï∞ÁªÑ„ÄÇ 12345678static final class ForwardingNode&lt;K,V&gt; extends Node&lt;K,V&gt; &#123; final Node&lt;K,V&gt;[] nextTable; ForwardingNode(Node&lt;K,V&gt;[] tab) &#123; super(MOVED, null, null, null); this.nextTable = tab; &#125; .....&#125; ÈÉ®ÂàÜ final Â∏∏Èáè1234567891011121314151617181920212223242526272829// nodeÊï∞ÁªÑÊúÄÂ§ßÂÆπÈáèÔºö2^30=1073741824,Âõ†‰∏∫Á¨¨‰∏Ä‰ΩçÊòØÁ¨¶Âè∑‰ΩçÔºåÊâÄ‰ª•ÊòØ 30 Ê¨°ÂπÇprivate static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;// ÈªòËÆ§ÂàùÂßãÂÄºÔºåÂøÖÈ°ªÊòØ2ÁöÑÂπÇÊï∞private static final int DEFAULT_CAPACITY = 16;//Êï∞ÁªÑÂèØËÉΩÊúÄÂ§ßÂÄºÔºåÈúÄË¶Å‰∏étoArrayÔºàÔºâÁõ∏ÂÖ≥ÊñπÊ≥ïÂÖ≥ËÅîstatic final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;//Âπ∂ÂèëÁ∫ßÂà´ÔºåÈÅóÁïô‰∏ãÊù•ÁöÑÔºå‰∏∫ÂÖºÂÆπ‰ª•ÂâçÁöÑÁâàÊú¨private static final int DEFAULT_CONCURRENCY_LEVEL = 16;// Ë¥üËΩΩÂõ†Â≠êprivate static final float LOAD_FACTOR = 0.75f;// ÈìæË°®ËΩ¨Á∫¢ÈªëÊ†ëÈòÄÂÄº,&gt; 8 ÈìæË°®ËΩ¨Êç¢‰∏∫Á∫¢ÈªëÊ†ëstatic final int TREEIFY_THRESHOLD = 8;//Ê†ëËΩ¨ÈìæË°®ÈòÄÂÄºÔºåÂ∞è‰∫éÁ≠â‰∫é6ÔºàtranferÊó∂Ôºålc„ÄÅhc=0‰∏§‰∏™ËÆ°Êï∞Âô®ÂàÜÂà´++ËÆ∞ÂΩïÂéübin„ÄÅÊñ∞binTreeNodeÊï∞ÈáèÔºå&lt;=UNTREEIFY_THRESHOLD Âàôuntreeify(lo)Ôºâstatic final int UNTREEIFY_THRESHOLD = 6;static final int MIN_TREEIFY_CAPACITY = 64;private static final int MIN_TRANSFER_STRIDE = 16;private static int RESIZE_STAMP_BITS = 16;// 2^15-1Ôºåhelp resizeÁöÑÊúÄÂ§ßÁ∫øÁ®ãÊï∞private static final int MAX_RESIZERS = (1 &lt;&lt; (32 - RESIZE_STAMP_BITS)) - 1;// 32-16=16ÔºåsizeCtl‰∏≠ËÆ∞ÂΩïsizeÂ§ßÂ∞èÁöÑÂÅèÁßªÈáèprivate static final int RESIZE_STAMP_SHIFT = 32 - RESIZE_STAMP_BITS;// forwarding nodesÁöÑhashÂÄºstatic final int MOVED = -1; // Ê†ëÊ†πËäÇÁÇπÁöÑhashÂÄºstatic final int TREEBIN = -2; // ReservationNodeÁöÑhashÂÄºstatic final int RESERVED = -3; // ÂèØÁî®Â§ÑÁêÜÂô®Êï∞Èáèstatic final int NCPU = Runtime.getRuntime().availableProcessors(); ‰∏ªË¶ÅÊñπÊ≥ïÊûÑÈÄ†ÂáΩÊï∞Âú®‰ΩøÁî® ConcurrentHashMap Á¨¨‰∏Ä‰ª∂‰∫ãËá™ÁÑ∂ËÄåÁÑ∂Â∞±ÊòØ new Âá∫Êù•‰∏Ä‰∏™ ConcurrentHashMap ÂØπË±°Ôºå‰∏ÄÂÖ±Êèê‰æõ‰∫ÜÂ¶Ç‰∏ãÂá†‰∏™ÊûÑÈÄ†Âô®ÊñπÊ≥ïÔºö 12345678910// 1. ÊûÑÈÄ†‰∏Ä‰∏™Á©∫ÁöÑmapÔºåÂç≥tableÊï∞ÁªÑËøòÊú™ÂàùÂßãÂåñÔºåÂàùÂßãÂåñÊîæÂú®Á¨¨‰∏ÄÊ¨°ÊèíÂÖ•Êï∞ÊçÆÊó∂ÔºåÈªòËÆ§Â§ßÂ∞è‰∏∫16ConcurrentHashMap()// 2. ÁªôÂÆömapÁöÑÂ§ßÂ∞èConcurrentHashMap(int initialCapacity)// 3. ÁªôÂÆö‰∏Ä‰∏™mapConcurrentHashMap(Map&lt;? extends K, ? extends V&gt; m)// 4. ÁªôÂÆömapÁöÑÂ§ßÂ∞è‰ª•ÂèäÂä†ËΩΩÂõ†Â≠êConcurrentHashMap(int initialCapacity, float loadFactor)// 5. ÁªôÂÆömapÂ§ßÂ∞èÔºåÂä†ËΩΩÂõ†Â≠ê‰ª•ÂèäÂπ∂ÂèëÂ∫¶ÔºàÈ¢ÑËÆ°ÂêåÊó∂Êìç‰ΩúÊï∞ÊçÆÁöÑÁ∫øÁ®ãÔºåjdk1.8Âü∫Êú¨‰∏çÁî®ÔºâConcurrentHashMap(int initialCapacity,float loadFactor, int concurrencyLevel) ConcurrentHashMap ‰∏ÄÂÖ±ÁªôÊàë‰ª¨Êèê‰æõ‰∫Ü 5 ÁßçÊûÑÈÄ†Âô®ÊñπÊ≥ïÔºåÂÖ∑‰Ωì‰ΩøÁî®ËØ∑ÁúãÊ≥®ÈáäÔºåÊàë‰ª¨Êù•ÁúãÁúãÁ¨¨ 2 ÁßçÊûÑÈÄ†Âô®Ôºå‰º†ÂÖ•ÊåáÂÆöÂ§ßÂ∞èÊó∂ÁöÑÊÉÖÂÜµÔºåËØ•ÊûÑÈÄ†Âô®Ê∫êÁ†Å‰∏∫Ôºö 123456789101112public ConcurrentHashMap(int initialCapacity) &#123; //1. Â∞è‰∫é0Áõ¥Êé•ÊäõÂºÇÂ∏∏ if (initialCapacity &lt; 0) throw new IllegalArgumentException(); //2. Âà§Êñ≠ÊòØÂê¶Ë∂ÖËøá‰∫ÜÂÖÅËÆ∏ÁöÑÊúÄÂ§ßÂÄºÔºåË∂ÖËøá‰∫ÜËØùÂàôÂèñÊúÄÂ§ßÂÄºÔºåÂê¶ÂàôÂÜçÂØπËØ•ÂÄºËøõ‰∏ÄÊ≠•Â§ÑÁêÜ // Ëá≥‰∫é‰∏∫‰ªÄ‰πàËøôÊ†∑ÂèñËøô‰∏™ÂÄº...ÊöÇÊó∂ÊàëËøòÊ≤°ÊêûÊáÇÔºåÂêéÈù¢‰πüÊúâtryPresize()‰πüÊòØËøôÊ†∑ int cap = ((initialCapacity &gt;= (MAXIMUM_CAPACITY &gt;&gt;&gt; 1)) ? MAXIMUM_CAPACITY : tableSizeFor(initialCapacity + (initialCapacity &gt;&gt;&gt; 1) + 1)); //3. ËµãÂÄºÁªôsizeCtl this.sizeCtl = cap;&#125; ËøôÊÆµ‰ª£Á†ÅÁöÑÈÄªËæëËØ∑ÁúãÊ≥®ÈáäÔºåÂæàÂÆπÊòìÁêÜËß£ÔºåÂ¶ÇÊûúÂ∞è‰∫é 0 Â∞±Áõ¥Êé•ÊäõÂá∫ÂºÇÂ∏∏ÔºåÂ¶ÇÊûúÊåáÂÆöÂÄºÂ§ß‰∫é‰∫ÜÊâÄÂÖÅËÆ∏ÁöÑÊúÄÂ§ßÂÄºÁöÑËØùÂ∞±ÂèñÊúÄÂ§ßÂÄºÔºåÂê¶ÂàôÔºåÂú®ÂØπÊåáÂÆöÂÄºÂÅöËøõ‰∏ÄÊ≠•Â§ÑÁêÜ„ÄÇÊúÄÂêéÂ∞Ü cap ËµãÂÄºÁªô sizeCtl,ÂÖ≥‰∫é sizeCtl ÁöÑËØ¥ÊòéËØ∑Áúã‰∏äÈù¢ÁöÑËØ¥ÊòéÔºåÂΩìË∞ÉÁî®ÊûÑÈÄ†Âô®ÊñπÊ≥ï‰πãÂêéÔºåsizeCtl ÁöÑÂ§ßÂ∞èÂ∫îËØ•Â∞±‰ª£Ë°®‰∫Ü ConcurrentHashMap ÁöÑÂ§ßÂ∞èÔºåÂç≥ table Êï∞ÁªÑÈïøÂ∫¶„ÄÇtableSizeFor ÂÅö‰∫ÜÂì™‰∫õ‰∫ãÊÉÖ‰∫ÜÔºüÊ∫êÁ†Å‰∏∫Ôºö 12345678910111213/** * Returns a power of two table size for the given desired capacity. * See Hackers Delight, sec 3.2 */private static final int tableSizeFor(int c) &#123; int n = c - 1; n |= n &gt;&gt;&gt; 1; n |= n &gt;&gt;&gt; 2; n |= n &gt;&gt;&gt; 4; n |= n &gt;&gt;&gt; 8; n |= n &gt;&gt;&gt; 16; return (n &lt; 0) ? 1 : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1;&#125; ÈÄöËøáÊ≥®ÈáäÂ∞±ÂæàÊ∏ÖÊ•ö‰∫ÜÔºåËØ•ÊñπÊ≥ï‰ºöÂ∞ÜË∞ÉÁî®ÊûÑÈÄ†Âô®ÊñπÊ≥ïÊó∂ÊåáÂÆöÁöÑÂ§ßÂ∞èËΩ¨Êç¢Êàê‰∏Ä‰∏™ 2 ÁöÑÂπÇÊ¨°ÊñπÊï∞Ôºå‰πüÂ∞±ÊòØËØ¥ ConcurrentHashMap ÁöÑÂ§ßÂ∞è‰∏ÄÂÆöÊòØ 2 ÁöÑÂπÇÊ¨°ÊñπÔºåÊØîÂ¶ÇÔºåÂΩìÊåáÂÆöÂ§ßÂ∞è‰∏∫ 18 Êó∂Ôºå‰∏∫‰∫ÜÊª°Ë∂≥ 2 ÁöÑÂπÇÊ¨°ÊñπÁâπÊÄßÔºåÂÆûÈôÖ‰∏ä concurrentHashMapd ÁöÑÂ§ßÂ∞è‰∏∫ 2 ÁöÑ 5 Ê¨°ÊñπÔºà32Ôºâ„ÄÇÂè¶Â§ñÔºåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåË∞ÉÁî®ÊûÑÈÄ†Âô®ÊñπÊ≥ïÁöÑÊó∂ÂÄôÂπ∂Êú™ÊûÑÈÄ†Âá∫ table Êï∞ÁªÑÔºàÂèØ‰ª•ÁêÜËß£‰∏∫ ConcurrentHashMap ÁöÑÊï∞ÊçÆÂÆπÂô®ÔºâÔºåÂè™ÊòØÁÆóÂá∫ table Êï∞ÁªÑÁöÑÈïøÂ∫¶ÔºåÂΩìÁ¨¨‰∏ÄÊ¨°Âêë ConcurrentHashMap ÊèíÂÖ•Êï∞ÊçÆÁöÑÊó∂ÂÄôÊâçÁúüÊ≠£ÁöÑÂÆåÊàêÂàùÂßãÂåñÂàõÂª∫ table Êï∞ÁªÑÁöÑÂ∑•‰Ωú„ÄÇ ÂàùÂßãÂåñtableÊï¥‰ΩìÊµÅÁ®ãÂ¶Ç‰∏ãÔºö Âà§Êñ≠ sizeCtl ÂÄºÊòØÂê¶Â∞è‰∫é 0ÔºåÂ¶ÇÊûúÂ∞è‰∫é 0 ÂàôË°®Á§∫ ConcurrentHashMap Ê≠£Âú®ÊâßË°åÂàùÂßãÂåñÊìç‰ΩúÔºåÊâÄ‰ª•ÈúÄË¶ÅÂÖàÁ≠âÂæÖ‰∏Ä‰ºöÔºåÂ¶ÇÊûúÂÖ∂ÂÆÉÁ∫øÁ®ãÂàùÂßãÂåñÂ§±Ë¥•ËøòÂèØ‰ª•È°∂Êõø‰∏äÂéª Â¶ÇÊûú sizeCtl ÂÄºÂ§ß‰∫éÁ≠â‰∫é 0ÔºåÂàôÂü∫‰∫é CAS Á≠ñÁï•Êä¢Âç†Ê†áËÆ∞ sizeCtl ‰∏∫ -1ÔºåË°®Á§∫ ConcurrentHashMap Ê≠£Âú®ÊâßË°åÂàùÂßãÂåñÔºåÁÑ∂ÂêéÊûÑÈÄ† tableÔºåÂπ∂Êõ¥Êñ∞ sizeCtl ÁöÑÂÄº 1234567891011121314151617181920212223242526private final Node&lt;K,V&gt;[] initTable() &#123; Node&lt;K,V&gt;[] tab; int sc; while ((tab = table) == null || tab.length == 0) &#123; if ((sc = sizeCtl) &lt; 0) // 1. ‰øùËØÅÂè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÊ≠£Âú®ËøõË°åÂàùÂßãÂåñÊìç‰ΩúÔºåÂèëÁé∞sizeCtl‰∏∫Ë¥üÊï∞Êó∂ÔºåÂæóËÆ©Âá∫Êó∂Èó¥ÁâáÁ≠âÂæÖ Thread.yield(); // lost initialization race; just spin else if (U.compareAndSwapInt(this, SIZECTL, sc, -1)) &#123; try &#123; if ((tab = table) == null || tab.length == 0) &#123; // 2. ÂæóÂá∫Êï∞ÁªÑÁöÑÂ§ßÂ∞è int n = (sc &gt; 0) ? sc : DEFAULT_CAPACITY; @SuppressWarnings("unchecked") // 3. ËøôÈáåÊâçÁúüÊ≠£ÁöÑÂàùÂßãÂåñÊï∞ÁªÑ Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])new Node&lt;?,?&gt;[n]; table = tab = nt; // 4. ËÆ°ÁÆóÊï∞ÁªÑ‰∏≠ÂèØÁî®ÁöÑÂ§ßÂ∞èÔºöÂÆûÈôÖÂ§ßÂ∞èn*0.75ÔºàÂä†ËΩΩÂõ†Â≠êÔºâ sc = n - (n &gt;&gt;&gt; 2); &#125; &#125; finally &#123; sizeCtl = sc; &#125; break; &#125; &#125; return tab;&#125; put() „ÄêÈáçÁÇπÔºåÊúâÂæàÂ§öÂºïÁî≥ÔºåÂåÖÊã¨Êâ©ÂÆπ„ÄëÂÖàÊîæÊ∫êÁ†ÅÔºåÁÑ∂ÂêéÊàë‰ª¨ÊÖ¢ÊÖ¢Êù•ÂàÜÊûê‰∏ÄÊ≥¢ÔºåËøôÊòØÊï¥‰∏™ ConcurrentHashMap() ÁöÑÊ†∏ÂøÉÔºåÊàë‰ª¨‰ª•ÁÇπÊé®Èù¢ÔºåÂ∞Ü put() Áî®Âà∞ÁöÑÊØîËæÉÊúâ‰ª£Ë°®ÊÄßÁöÑÂáΩÊï∞ÈÉΩÊåëÂá∫Êù•ËÆ≤‰∏ÄËÆ≤ÔºÅ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970public V put(K key, V value) &#123; return putVal(key, value, false);&#125;/** Implementation for put and putIfAbsent */final V putVal(K key, V value, boolean onlyIfAbsent) &#123; if (key == null || value == null) throw new NullPointerException(); int hash = spread(key.hashCode()); //1.‰∏§Ê¨°hashÔºåÂáèÂ∞ëhashÂÜ≤Á™ÅÔºåÂèØ‰ª•ÂùáÂåÄÂàÜÂ∏ÉÔºåÂêéÈù¢‰ºöËÆ≤ int binCount = 0; //Áî®‰∫éËÆ∞ÂΩïÂÖÉÁ¥†‰∏™Êï∞,‰πüÂ∞±ÊòØÈìæË°®ÈïøÂ∫¶ for (Node&lt;K,V&gt;[] tab = table;;) &#123; //ÂØπËøô‰∏™tableËøõË°åËø≠‰ª£ Node&lt;K,V&gt; f; int n, i, fh; //2.ËøôÈáåÂ∞±ÊòØ‰∏äÈù¢ÊûÑÈÄ†ÊñπÊ≥ïÊ≤°ÊúâËøõË°åÂàùÂßãÂåñÔºåÂú®ËøôÈáåËøõË°åÂà§Êñ≠Ôºå‰∏∫nullÂ∞±Ë∞ÉÁî®initTableËøõË°åÂàùÂßãÂåñÔºåÂ±û‰∫éÊáíÊ±âÊ®°ÂºèÂàùÂßãÂåñ if (tab == null || (n = tab.length) == 0) tab = initTable(); //‰∏äÈù¢Â∑≤ÁªèËÆ≤Ëøá‰∫Ü else if ((f = tabAt(tab, i = (n - 1) &amp; hash)) == null) &#123;//3.Â¶ÇÊûúi‰ΩçÁΩÆÊ≤°ÊúâÊï∞ÊçÆÔºåÂ∞±Áõ¥Êé•Êó†ÈîÅCASÊèíÂÖ•,‰∏äÊñáÂ∑≤ÁªèËÆ≤Ëøá‰∫Ü if (casTabAt(tab, i, null, new Node&lt;K,V&gt;(hash, key, value, null))) break; // no lock when adding to empty bin &#125; else if ((fh = f.hash) == MOVED)//4.Â¶ÇÊûúÂú®ËøõË°åÊâ©ÂÆπ(ÂΩìÂâçËäÇÁÇπÊòØforwardingNode)ÔºåÂàôÂÖàËøõË°åÊâ©ÂÆπÊìç‰Ωú tab = helpTransfer(tab, f); //ÂêéÈù¢‰ºöËØ¶Ëß£ else &#123; V oldVal = null; //5.Â¶ÇÊûú‰ª•‰∏äÊù°‰ª∂ÈÉΩ‰∏çÊª°Ë∂≥ÔºåÈÇ£Â∞±Ë¶ÅËøõË°åÂä†ÈîÅÊìç‰ΩúÔºåÂç≥Â≠òÂú®hashÂÜ≤Á™ÅÔºåÈîÅ‰ΩèÈìæË°®ÊàñËÄÖÁ∫¢ÈªëÊ†ëÁöÑÂ§¥ÁªìÁÇπ synchronized (f) &#123; if (tabAt(tab, i) == f) &#123; //fÊîπÂèòÂÜçÊ¨°Âæ™ÁéØ if (fh &gt;= 0) &#123; //Ë°®Á§∫ËØ•ËäÇÁÇπÊòØÈìæË°®ÁªìÊûÑ(Á∫¢ÈªëÊ†ë -2ÔºåÊàñËÄÖÊ≠£Âú®ËΩ¨ÁßªÈÉΩ‰∏∫Ë¥üÊï∞) binCount = 1; for (Node&lt;K,V&gt; e = f;; ++binCount) &#123; K ek; //ËøôÈáåÊ∂âÂèäÂà∞Áõ∏ÂêåÁöÑkeyËøõË°åputÂ∞±‰ºöË¶ÜÁõñÂéüÂÖàÁöÑvalue if (e.hash == hash &amp;&amp; ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek)))) &#123; oldVal = e.val; if (!onlyIfAbsent) //Âè™Êúâ‰∏çÂ≠òÂú®ÁöÑÊó∂ÂÄôÊâçÊèíÂÖ• e.val = value; break; &#125; Node&lt;K,V&gt; pred = e; if ((e = e.next) == null) &#123; //ÊèíÂÖ•ÈìæË°®Â∞æÈÉ® pred.next = new Node&lt;K,V&gt;(hash, key, value, null); break; &#125; &#125; &#125; else if (f instanceof TreeBin) &#123;//Á∫¢ÈªëÊ†ëÁªìÊûÑ Node&lt;K,V&gt; p; binCount = 2; //Á∫¢ÈªëÊ†ëÁªìÊûÑÊóãËΩ¨ÊèíÂÖ• if ((p = ((TreeBin&lt;K,V&gt;)f).putTreeVal(hash, key, value)) != null) &#123; oldVal = p.val; if (!onlyIfAbsent) p.val = value; &#125; &#125; &#125; &#125; if (binCount != 0) &#123; //6.Â¶ÇÊûúÈìæË°®ÁöÑÈïøÂ∫¶Â§ß‰∫é8Êó∂Â∞±‰ºöËøõË°åÁ∫¢ÈªëÊ†ëÁöÑËΩ¨Êç¢ if (binCount &gt;= TREEIFY_THRESHOLD) treeifyBin(tab, i); if (oldVal != null) return oldVal; break; &#125; &#125; &#125; addCount(1L, binCount);//7.ÁªüËÆ°sizeÔºåÂπ∂‰∏îÊ£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÊâ©ÂÆπ return null; ÊïÖÊï¥‰∏™ put() ÁöÑÊµÅÁ®ãÂàÜ‰∏∫ 7 Ê≠•Ôºö 1.Ë∞ÉÁî® spread()ÔºåËøõË°å‰∏§Ê¨°ÂìàÂ∏å 2.Â¶ÇÊûúÊ≤°ÊúâÂàùÂßãÂåñÂ∞±ÂÖàË∞ÉÁî® initTable() ÊñπÊ≥ïÊù•ËøõË°åÂàùÂßãÂåñËøáÁ®ã 3.Â¶ÇÊûúÊ≤°ÊúâhashÂÜ≤Á™ÅÂ∞±Áõ¥Êé• CAS ÊèíÂÖ• 4.Â¶ÇÊûúËøòÂú®ËøõË°åÊâ©ÂÆπÊìç‰ΩúÂ∞±ÂÖàËøõË°åÊâ©ÂÆπ 5.Â¶ÇÊûúÂ≠òÂú®hashÂÜ≤Á™ÅÔºåÂ∞±Âä†ÈîÅÊù•‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÔºåËøôÈáåÊúâ‰∏§ÁßçÊÉÖÂÜµÔºå‰∏ÄÁßçÊòØÈìæË°®ÂΩ¢ÂºèÂ∞±Áõ¥Êé•ÈÅçÂéÜÂà∞Â∞æÁ´ØÊèíÂÖ•Ôºå‰∏ÄÁßçÊòØÁ∫¢ÈªëÊ†ëÂ∞±ÊåâÁÖßÁ∫¢ÈªëÊ†ëÁªìÊûÑÊèíÂÖ• 6.ÊúÄÂêé‰∏Ä‰∏™Â¶ÇÊûúËØ•ÈìæË°®ÁöÑÊï∞ÈáèÂ§ß‰∫éÈòàÂÄº8ÔºåÂ∞±Ë¶ÅÂÖàËΩ¨Êç¢ÊàêÈªëÁ∫¢Ê†ëÁöÑÁªìÊûÑÔºåbreakÂÜç‰∏ÄÊ¨°ËøõÂÖ•Âæ™ÁéØ 7.Â¶ÇÊûúÊ∑ªÂä†ÊàêÂäüÂ∞±Ë∞ÉÁî® addCount() ÊñπÊ≥ïÁªüËÆ° sizeÔºåÂπ∂‰∏îÊ£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÊâ©ÂÆπ Êé•‰∏ãÊù•ÈíàÂØπÊØè‰∏ÄÊ≠•ËøõË°åÁªÜËá¥ÁöÑÂàÜÊûêÔºåÂåÖÊã¨ÂÜÖÈÉ®ÂáΩÊï∞ÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÔºÅ spread()È¶ñÂÖàÊòØ spread() ÂáΩÊï∞ÔºÅÂÖà‰∏äÊ∫êÁ†ÅÔºÅ 1234static final int HASH_BITS = 0x7fffffff; // usable bits of normal node hashstatic final int spread(int h) &#123; return (h ^ (h &gt;&gt;&gt; 16)) &amp; HASH_BITS;&#125; Â∞±ÊòØÊàë‰ª¨Âú® HashMap Á´†ËäÇËÆ≤ËøáÁöÑÔºåÂ∞Ü hashcode ÂÄºÁöÑ‰Ωé16‰ΩçÂíåÈ´ò16‰Ωç Áõ∏ÂºÇÊàñÔºå‰πüÁß∞‰πã‰∏∫ Êâ∞Âä®ÂáΩÊï∞ÔºÅ initTable() &amp; tabAt() &amp; casTabAt()‰∏äÊñáÂ∑≤ÁªèËÆ≤ËøáËøô‰∏â‰∏™ÂáΩÊï∞‰∫ÜÔºåËÆ©Êàë‰ª¨ go onÔºÅÔºÅ helpTransfer()Â¶ÇÊûúÂú®ËøõË°åÊâ©ÂÆπÔºåÂàôÂÖàËøõË°åÊâ©ÂÆπÊìç‰ΩúÔºåËøô‰∏™ÂáΩÊï∞Â∞±ÊòØÂ∏ÆÂä©Êâ©ÂÆπÁöÑÔºÅËøôÊ†∑ÂèØ‰ª•ÊèêÈ´òÊâ©ÂÆπÁöÑÈÄüÂ∫¶ÔºÅ ËØ•ÊñπÊ≥ïÁöÑ‰∏ªË¶Å‰ΩúÁî®Â∞±ÊòØÂü∫‰∫é CAS Â∞ùËØïÊ∑ªÂä†‰∏Ä‰∏™Á∫øÁ®ãÂéªÂçèÂä©Êâ©ÂÆπÊìç‰ΩúÔºåÂ¶ÇÊûúËÉΩÂ§üÊàêÂäüÂä†ÂÖ•ÂàôÂ∞Ü sizeCtl ÂÄºÂä† 1„ÄÇÊñπÊ≥ï transfer ÊòØÁúüÊ≠£ÊâßË°åÊâ©ÂÆπÊìç‰ΩúÁöÑÂú∞ÊñπÔºåÂπ∂Âú®Â§ö‰∏™Ê≠•È™§‰∏≠Ë¢´Ëß¶Âèë„ÄÇËøôÈáåÂÖàÁªôÂá∫ËØ•ÊñπÊ≥ïÁöÑÂÆö‰πâÔºàÂ¶Ç‰∏ãÔºâÔºåÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÂêéÈù¢‰ºö‰∏ìÈó®ËøõË°åÂàÜÊûêÔºåËØ•ÊñπÊ≥ïÊé•Êî∂ 2 ‰∏™ÂèÇÊï∞ÔºåÂÖ∂‰∏≠ tab ÊòØÂΩìÂâçÈúÄË¶ÅË¢´Êâ©ÂÆπÁöÑ tableÔºåËÄå nextTab ÊòØÊâ©ÂÆπ‰πãÂêéÁöÑ tableÔºåÂÆπÈáè‰∏äÊòØ‰πãÂâçÁöÑ‰∏§ÂÄçÔºåhelpTransfer ‰º†ÈÄíÁöÑ nextTab ÊòØ‰∏Ä‰∏™Èùû null ÂÄºÔºåÂõ†‰∏∫Ëß¶Âèë helpTransfer ÁöÑÂâçÊèêÂ∞±ÊòØÂΩìÂâçÂ∑≤ÁªèÂ§Ñ‰∫éÊâ©ÂÆπÈò∂ÊÆµ„ÄÇ 1234567891011121314151617181920212223242526272829303132 /** * Helps transfer if a resize is in progress. * Â∏ÆÂä©‰ªéÊóßÁöÑtableÁöÑÂÖÉÁ¥†Â§çÂà∂Âà∞Êñ∞ÁöÑtable‰∏≠ */final Node&lt;K,V&gt;[] helpTransfer(Node&lt;K,V&gt;[] tab, Node&lt;K,V&gt; f) &#123; Node&lt;K,V&gt;[] nextTab; int sc; // Êñ∞ÁöÑtable nextTabÂ∑≤ÁªèÂ≠òÂú®ÂâçÊèê‰∏ãÊâçËÉΩÂ∏ÆÂä©Êâ©ÂÆπ // ÂΩìÂâçÁªìÁÇπÊòØ ForwardingNode Á±ªÂûã if (tab != null &amp;&amp; (f instanceof ForwardingNode) &amp;&amp; (nextTab = ((ForwardingNode&lt;K,V&gt;)f).nextTable) != null) &#123; int rs = resizeStamp(tab.length); // ‰∏ãÈù¢‰ºöËÆ≤ÔºåÊâ©ÂÆπÊà≥ while (nextTab == nextTable &amp;&amp; table == tab &amp;&amp; (sc = sizeCtl) &lt; 0) &#123; // Êù°‰ª∂1Âà§Êñ≠ÊòØÂê¶‰∏∫ÂΩìÂâçÊâ©ÂÆπÊà≥ // Êù°‰ª∂2Âà§Êñ≠ÊòØÂê¶Êâ©ÂÆπÁªìÊùü // Êù°‰ª∂3Âà§Êñ≠Êâ©ÂÆπÁ∫øÁ®ãÊòØÂê¶Â∑≤ÁªèË∂ÖËøáÊúÄÂ§ßÂπ∂ÂèëÊâ©ÂÆπÁ∫øÁ®ãÊï∞ (ËøôÂÖ∂ÂÆûÊòØ‰∏Ä‰∏™bug,ËßÅ‰∏ãÈù¢ËØ¶Ëß£) // Êù°‰ª∂4Âà§Êñ≠ÂΩìÂâçÊòØÂê¶ÊúâÂèØ‰ª•ÂàÜÈÖçÁöÑ‰ªªÂä° // sc=((rs=resizeStamp())&lt;&lt;&lt;RESIZE_STAMP_SHIFT ) // sc È´ò16‰ΩçÁî®‰∫éËÆ∞ÂΩïÊú¨Ê¨°Êâ©ÂÆπÊà≥,‰Ωé16‰ΩçÁî®‰∫éËÆ∞ÂΩïÊâ©ÂÆπÁ∫øÁ®ãÊï∞Èáè,rs = sc - 1 if ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 || sc == rs + MAX_RESIZERS || transferIndex &lt;= 0) break; // Âü∫‰∫é CAS Â∞Ü Êâ©ÂÆπÁ∫øÁ®ãÊï∞ + 1ÔºåËØ¥ÊòéÂèàÊúâ‰∏Ä‰∏™Á∫øÁ®ãÂä†ÂÖ•Êâ©ÂÆπ‰∫Ü if (U.compareAndSwapInt(this, SIZECTL, sc, sc + 1)) &#123; transfer(tab, nextTab);// Ë∞ÉÁî®Êâ©ÂÆπÊñπÊ≥ïÔºåÊâ©ÂÆπÊúÄÊ†∏ÂøÉÁöÑÂáΩÊï∞ break; &#125; &#125; return nextTab; &#125; return table;&#125; Âú® helptransfer() ‰∏≠ÔºåË∞ÉÁî®‰∫Ü resizeStamp() ÂáΩÊï∞(ÂΩìÁÑ∂ËøòÊúâ transfer()ÔºåËøô‰∏™ÊòØÊâ©ÂÆπÊ†∏ÂøÉ‰ª£Á†ÅÔºå‰∏ãÈù¢ÂçïÁã¨‰ºöÊãéÂá∫Êù•ËÆ≤)ÔºåÊàë‰ª¨Áé∞Âú®ÂàÜÊûê‰∏Ä‰∏ãËøô‰∏§‰∏™ÂáΩÊï∞ÔºÅ 123456789 /* ---------------- Table Initialization and Resizing -------------- */// ÁîüÊàêË°®ÁöÑÊâ©ÂÆπÊà≥ÔºåÊØè‰∏™nÈÉΩÊúâ‰∏çÂêåÁöÑÊâ©ÂÆπÊà≥ /** * Returns the stamp bits for resizing a table of size n. * Must be negative when shifted left by RESIZE_STAMP_SHIFT. */ static final int resizeStamp(int n) &#123; return Integer.numberOfLeadingZeros(n) | (1 &lt;&lt; (RESIZE_STAMP_BITS - 1)); &#125; Integer.numberOfLeadingZeros(n) Âú®ÊåáÂÆö int ÂÄºÁöÑ‰∫åËøõÂà∂Ë°•Á†ÅË°®Á§∫ÂΩ¢Âºè‰∏≠ÊúÄÈ´ò‰ΩçÔºàÊúÄÂ∑¶ËæπÔºâÁöÑ 1 ‰Ωç‰πãÂâçÔºåËøîÂõûÈõ∂‰ΩçÁöÑÊï∞Èáè„ÄÇÂÖ∑‰ΩìÊàë‰πü‰∏çÊáÇÂï•ÊÑèÊÄùÔºåÂèçÊ≠£Â∞±ÊòØ‰ºöÁîüÊàê‰∏Ä‰∏™ÁâπÊÆäÁöÑÊâ©ÂÆπÊà≥ÔºÅ treeifyBin()Êù•Âà∞ËøôÈáåÔºåÂ∞±ÊòØ put() ÁöÑÁ¨¨ÂÖ≠Ê≠•‰∫ÜÔºå‰∏äÊ∫êÁ†ÅÔºÅ 12345678910111213141516171819202122232425262728293031private final void treeifyBin(Node&lt;K, V&gt;[] tab, int index) &#123; Node&lt;K, V&gt; b; int n, sc; if (tab != null) &#123; // 1. Â¶ÇÊûú table ÈïøÂ∫¶Â∞è‰∫é 64ÔºåÊâßË°åÊâ©ÂÆπÊìç‰Ωú if ((n = tab.length) &lt; MIN_TREEIFY_CAPACITY) &#123; this.tryPresize(n &lt;&lt; 1); &#125; // 2. Âê¶ÂàôÔºåÂ∞ÜÈìæË°®ËΩ¨Êç¢ÊàêÁ∫¢ÈªëÊ†ë else if ((b = tabAt(tab, index)) != null &amp;&amp; b.hash &gt;= 0) &#123; // Â§¥ÁªìÁÇπ hash Â§ß‰∫é 0ÔºåËØ¥ÊòéÊòØÈìæË°® synchronized (b) &#123; if (tabAt(tab, index) == b) &#123; TreeNode&lt;K, V&gt; hd = null, tl = null; // Â∞ÜÈìæË°®ËΩ¨Êç¢Êàê‰∏ÄÊ£µÁ∫¢ÈªëÊ†ë for (Node&lt;K, V&gt; e = b; e != null; e = e.next) &#123; TreeNode&lt;K, V&gt; p = new TreeNode&lt;&gt;(e.hash, e.key, e.val, null, null); if ((p.prev = tl) == null) &#123; hd = p; &#125; else &#123; tl.next = p; &#125; tl = p; &#125; // Â∞ÜÁ∫¢ÈªëÊ†ëËÆæÁΩÆÂà∞ table ÂØπÂ∫îÁöÑ‰ΩçÁΩÆ // Ê≥®ÊÑèÂì¶ÔºåÊï∞ÁªÑ‰∏≠Â≠òÂÇ®ÁöÑÂèØÊòØ TreeBin setTabAt(tab, index, new TreeBin&lt;&gt;(hd)); &#125; &#125; &#125; &#125;&#125; ÁªÜÂøÉÁöÑÂ∞è‰ºô‰º¥ÂèëÁé∞‰∫ÜÔºåËøôÈáåÂèàÊúâ‰∏Ä‰∏™Êâ©ÂÆπÊìç‰ΩúÁöÑÂáΩÊï∞ tryPresize() ÔºåÊù•ÔºåÂí±‰∏çËÉΩÊîæËøáÂÆÉÔºåËøõÂéªÁúãÁúãÔºÅ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849private final void tryPresize(int size) &#123; // Â¶ÇÊûúÂΩìÂâçÊúüÊúõÁöÑÂ§ßÂ∞èÔºàsizeÔºâÂ∞è‰∫éÊúÄÂ§ßÂÖÅËÆ∏ÂÆπÈáèÁöÑ‰∏ÄÂçäÔºåÂàôÊâ©ÂÆπÂ§ßÂ∞è‰∏∫ size ÁöÑ 1.5 ÂÄçÂä† 1ÔºåÂú®Âêë‰∏äÂèñÊúÄÂ∞èÁöÑ 2 Ê¨°ÂπÇ,Ê≥®ÊÑèÂì¶ÔºåËøôÈáåÁöÑ size ‰º†ËøõÊù•ÁöÑÊó∂ÂÄôÂ∞±Â∑≤ÁªèÊòØÂéüÊï∞ÁªÑÁöÑ‰∏§ÂÄçÂ§ßÂ∞è‰∫ÜÔºÅÔºÅÔºÅ // ËøôÈáåÊàëÊ≤°ÊêûÊ∏Ö‰ªñË¶ÅÂπ≤Âòõ... Âõ†‰∏∫ c ÂèØÊòØ‰∏ÄÊ¨°ÊÄßÊâ©‰∫ÜÂ•ΩÂ§öÂÄç // ÁúüÊ≠£ÂéªÊâßË°åÊâ©ÂÆπÁöÑËøòÊòØ transfer Ëøô‰∏™ÂáΩÊï∞ int c = (size &gt;= (MAXIMUM_CAPACITY &gt;&gt;&gt; 1)) ? MAXIMUM_CAPACITY : tableSizeFor(size + (size &gt;&gt;&gt; 1) + 1); int sc; while ((sc = sizeCtl) &gt;= 0) &#123; // Ê£ÄÊü•ÂΩìÂâçÊú™Â§Ñ‰∫éÊâ©ÂÆπÈò∂ÊÆµ Node&lt;K, V&gt;[] tab = table; int n; // ÂàùÂßãÂåñ nextTable if (tab == null || (n = tab.length) == 0) &#123; n = (sc &gt; c) ? sc : c; if (U.compareAndSwapInt(this, SIZECTL, sc, -1)) &#123; try &#123; if (table == tab) &#123; @SuppressWarnings("unchecked") Node&lt;K, V&gt;[] nt = (Node&lt;K, V&gt;[]) new Node&lt;?, ?&gt;[n]; table = nt; sc = n - (n &gt;&gt;&gt; 2); &#125; &#125; finally &#123; sizeCtl = sc; &#125; &#125; &#125; else if (c &lt;= sc || n &gt;= MAXIMUM_CAPACITY) &#123; break; &#125; else if (tab == table) &#123; int rs = resizeStamp(n); // 2. Âü∫‰∫é CAS Â∞Ü sc ÁöÑÂÄºÂä† 1ÔºåÁÑ∂ÂêéÊâßË°å transfer ÊñπÊ≥ï if (sc &lt; 0) &#123; Node&lt;K, V&gt;[] nt; if ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 || sc == rs + MAX_RESIZERS || (nt = nextTable) == null || transferIndex &lt;= 0) &#123; break; &#125; if (U.compareAndSwapInt(this, SIZECTL, sc, sc + 1)) &#123; // ÊâßË°å transfer ÊñπÊ≥ï this.transfer(tab, nt); &#125; &#125; // 1. Âü∫‰∫é CAS Â∞Ü sizeCtl ÁöÑÂÄºËÆæÁΩÆ‰∏∫ (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2 else if (U.compareAndSwapInt(this, SIZECTL, sc, (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2)) &#123; // ÊâßË°å transfer ÊñπÊ≥ïÔºåÊ≠§Êó∂ nextTable ÊòØ null this.transfer(tab, null); &#125; &#125; &#125;&#125; ËØ•ÊñπÊ≥ïÁöÑÊ†∏ÂøÉÊìç‰ΩúÂú®‰∫éÊúÄÂêé‰∏Ä‰∏™Ê∑ªÂä† transfer ‰ªªÂä°ÔºåÂπ∂ËÆæÁΩÆ sizeCtl ÂÄºÔºåËØ•ÊñπÊ≥ïÁ¨¨‰∏ÄÊ¨°Ë∞ÉÁî® transfer ÊñπÊ≥ïÊó∂ sizeCtl ‰∏ÄÂÆöÊòØÂ§ß‰∫éÁ≠â‰∫é 0 ÁöÑÔºåÊâÄ‰ª•ÊñπÊ≥ï‰ºöÂ∞ùËØïÂ∞Ü sizeCtl ËÆæÁΩÆ‰∏∫ (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2ÔºåËøôÊòØÂ§ßË¥üÊï∞ÔºåÂπ∂ÊâßË°å transfer(tab, null) Êìç‰ΩúÔºåÂêéÈù¢ÁöÑÂæ™ÁéØ sizeCtl ÂùáÂ∞è‰∫é 0ÔºåÊâÄ‰ª•‰ºöÊâßË°å transfer(tab, nt)ÔºåÂπ∂Â∞Ü sizeCtl Âä† 1„ÄÇÊ≥®ÊÑèÊï¥‰∏™ËøáÁ®ã‰∏≠ sizeCtl ÂÄºÁöÑÂèòÂåñÔºåÂú®‰∏ÄÊ¨°Êâ©ÂÆπÊìç‰Ωú‰∏≠Á¨¨‰∏ÄÊ¨°Ë∞ÉÁî® transfer ÊñπÊ≥ïÊó∂Â∞Ü sizeCtl ËÆæÁΩÆ‰∏∫ (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2ÔºåÂπ∂Âú®Êâ©ÂÆπËøáÁ®ãÂÜçÊ¨°Ë∞ÉÁî® transfer ÊñπÊ≥ïÊó∂Â∞Ü sizeCtl Âä† 1„ÄÇËøôÂØπ‰∫é‰∏ã‰∏ÄËäÇÁêÜËß£Êâ©ÂÆπÊìç‰Ωú‰ªÄ‰πàÊó∂ÂÄôÁªìÊùüËá≥ÂÖ≥ÈáçË¶Å„ÄÇ transfer()Êù•‰∫ÜÔºåÂÆÉÁªà‰∫éÊù•‰∫Ü‚Ä¶Âú®‰πãÂâçÊàë‰ª¨Â∑≤ÁªèÈì∫Âû´‰∫ÜÂæà‰πÖ‰∫ÜÔºåÊú¨Êù•ÊòØÊâìÁÆóÂÜçÊîæÂà∞ÂêéÈù¢‰∏ÄÁÇπÁöÑÔºåÂõ†‰∏∫Âú® put() ÁöÑÁ¨¨‰∏ÉÊ≠• addCount() ÊñπÊ≥ï‰∏≠‰πüË∞ÉÁî®‰∫ÜËøô‰∏™ÊñπÊ≥ïÔºå‰ΩÜÊòØ‚Ä¶ ÊàëÂøç‰∏ç‰Ωè‰∫ÜÔºÅÔºÅÔºÅ Âú®ËÆ≤ transfer() ‰πãÂâçÔºåÊàë‰ª¨Êù•ÂõûÈ°æ‰∏Ä‰∏ãÊÄªÂÖ±ÊúâÂì™‰∫õÂáΩÊï∞Ë∞ÉÁî®‰∫ÜÂÆÉÔºå‰πüÂ∞±ÊòØÊàë‰ª¨ÈúÄË¶ÅÂú®‰ªÄ‰πàÊó∂ÂÄôÊâ©ÂÆπÂë¢Ôºü helpTransfer()„ÄÇÂΩì‰∏Ä‰∏™Á∫øÁ®ãË¶ÅÂØπtable‰∏≠ÂÖÉÁ¥†ËøõË°åÊìç‰ΩúÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÊ£ÄÊµãÂà∞ËäÇÁÇπÁöÑHASHÂÄº‰∏∫MOVEDÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöË∞ÉÁî®helpTransferÊñπÊ≥ïÔºåÂú®helpTransfer‰∏≠ÂÜçË∞ÉÁî®transferÊñπÊ≥ïÊù•Â∏ÆÂä©ÂÆåÊàêÊï∞ÁªÑÁöÑÊâ©ÂÆπ„ÄÇ tryPresize()„ÄÇtreeIfybin Âíå putAll ÊñπÊ≥ï‰∏≠Ë∞ÉÁî®ÔºåtreeIfybin ‰∏ªË¶ÅÊòØÂú®putÊ∑ªÂä†ÂÖÉÁ¥†ÂÆå‰πãÂêéÔºåÂà§Êñ≠ËØ•Êï∞ÁªÑËäÇÁÇπÁõ∏ÂÖ≥ÂÖÉÁ¥†ÊòØ‰∏çÊòØÂ∑≤ÁªèË∂ÖËøá8‰∏™ÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúË∂ÖËøáÂàô‰ºöË∞ÉÁî®Ëøô‰∏™ tryPresize ÊñπÊ≥ïÊù•Êâ©ÂÆπÊï∞ÁªÑÊàñËÄÖÊääÈìæË°®ËΩ¨‰∏∫Ê†ë„ÄÇ addCount()„ÄÇÂΩìÂØπÊï∞ÁªÑËøõË°åÊìç‰ΩúÔºå‰ΩøÂæóÊï∞ÁªÑ‰∏≠Â≠òÂÇ®ÁöÑÂÖÉÁ¥†‰∏™Êï∞ÂèëÁîü‰∫ÜÂèòÂåñÁöÑÊó∂ÂÄô‰ºöË∞ÉÁî®ÁöÑÊñπÊ≥ï„ÄÇ ÊÄªÁªì‰∏Ä‰∏ãÔºå‰πüÂ∞±ÊòØ‰∏§ÁßçÊÉÖÂÜµÔºö Âè™ÊúâÂú®ÂæÄmap‰∏≠Ê∑ªÂä†ÂÖÉÁ¥†ÁöÑÊó∂ÂÄôÔºåÂú®Êüê‰∏Ä‰∏™ËäÇÁÇπÁöÑÊï∞ÁõÆÂ∑≤ÁªèË∂ÖËøá‰∫Ü8‰∏™ÔºåÂêåÊó∂Êï∞ÁªÑÁöÑÈïøÂ∫¶ÂèàÂ∞è‰∫é64ÁöÑÊó∂ÂÄôÔºåÊâç‰ºöËß¶ÂèëÊï∞ÁªÑÁöÑÊâ©ÂÆπ„ÄÇ ÂΩìÊï∞ÁªÑ‰∏≠ÂÖÉÁ¥†ËææÂà∞‰∫ÜsizeCtlÁöÑÊï∞ÈáèÁöÑÊó∂ÂÄôÔºåÂàô‰ºöË∞ÉÁî®transferÊñπÊ≥ïÊù•ËøõË°åÊâ©ÂÆπ„ÄÇ Êâ©ÂÆπÊìç‰ΩúÁÆÄÂçïÂú∞ËØ¥Â∞±ÊòØÊñ∞Âª∫‰∏Ä‰∏™ÈïøÂ∫¶ÁøªÂÄçÁöÑ nextTableÔºåÁÑ∂ÂêéÂ∞Ü‰πãÂâç table ‰∏äÁöÑÁªìÁÇπÈáçÊñ∞ÂìàÂ∏åËøÅÁßªÂà∞Êñ∞ÁöÑ nextTable ‰∏äÔºåÂπ∂Âú®ËøÅÁßªÂÆåÊàê‰πãÂêé‰ΩøÁî® nextTable ÊõøÊç¢ÂéüÂÖàÁöÑ table„ÄÇÂØπ‰∫é‰∏Ä‰∏™ table ËÄåË®ÄÔºå‰∏äÈù¢ÂàÜÂ∏ÉÁùÄ n ‰∏™ bin ÁªìÁÇπÔºåËÄåÁªìÁÇπËøÅÁßªÁöÑËøáÁ®ãÂèØ‰ª•ÊòØÂπ∂ÂèëÁöÑÔºåËøôÊ†∑ÂèØ‰ª•ÊèêÂçáËøÅÁßªÁöÑÊïàÁéá„ÄÇConcurrentHashMap ‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ stride ÂèòÈáèÁî®‰∫éÊåáÂÆöÂ∞Ü stride ‰∏™ bin ÁªìÁÇπÁªÑÊàê‰∏Ä‰∏™‰ªªÂä°ÂçïÂÖÉÁî±‰∏Ä‰∏™Á∫øÁ®ãË¥üË¥£Â§ÑÁêÜÔºåÂú®ÂçïÊ†∏ CPU ‰∏ã stride ÁöÑÂÄº‰∏∫ table ÁöÑÈïøÂ∫¶ nÔºåÂú®Â§öÊ†∏ CPU ‰∏ã‰∏∫ (n &gt;&gt;&gt; 3) / NCPUÔºåÊúÄÂ∞èÂÄº‰∏∫ 16„ÄÇ ConcurrentHashMap ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Á±ªÂÆû‰æãÂèòÈáè transferIndexÔºåÁî®‰∫éÊåáÂÆö‰ªªÂä°ÁöÑËæπÁïå„ÄÇ‰ªªÂä°ÂàíÂàÜÁöÑËøáÁ®ãÂú® table ‰∏äÊòØ‰ªéÂêéÂæÄÂâçËøõË°åÁöÑÔºå‰æãÂ¶ÇÁé∞Âú®Êúâ n ‰∏™ÁªìÁÇπÔºåÂàôÁºñÂè∑ Ôºàn-1-stride, ..., n-1Ôºâ ÁöÑ‰ªªÂä°‰∫§ÁªôÁ¨¨ 1 ‰∏™Á∫øÁ®ãËøõË°åÂ§ÑÁêÜÔºåÁºñÂè∑ Ôºàn-1-2*stride, ..., n-1-strideÔºâ ÁöÑ‰ªªÂä°‰∫§ÁªôÁ¨¨ 2 ‰∏™Á∫øÁ®ãËøõË°åÂ§ÑÁêÜÔºå‰ª•Ê≠§Á±ªÊé®„ÄÇÂΩìÊúâÊñ∞ÁöÑÁ∫øÁ®ãÂä†ÂÖ•Êó∂ÂèØ‰ª•‰æùÊçÆ transferIndex ÂÄºÁü•ÈÅìÊé•‰∏ãÂéªÂ∫îËØ•ÂàÜÈÖçÂì™‰∏ÄÂùóÁöÑ bin ÁªìÁÇπÁªôÂΩìÂâçÁ∫øÁ®ã„ÄÇ ÂÖ∑‰Ωì‰ª£Á†ÅÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203private final void transfer(Node&lt;K, V&gt;[] tab, Node&lt;K, V&gt;[] nextTab) &#123; int n = tab.length, stride; /* * stride Âç≥Ê≠•ËøõÔºå * Âú®ÂçïÊ†∏‰∏ã‰∏∫ table ÁöÑÈïøÂ∫¶ nÔºåÂú®Â§öÊ†∏Ê®°Âºè‰∏ã‰∏∫ (n &gt;&gt;&gt; 3) / NCPUÔºåÊúÄÂ∞èÂÄº‰∏∫ 16 */ // ÊØèÊ†∏Â§ÑÁêÜÁöÑÈáèÂ∞è‰∫é16ÔºåÂàôÂº∫Âà∂ËµãÂÄº16 // NCPU‰∏∫CPUÊ†∏ÂøÉÊï∞ÔºåÊØè‰∏™Ê†∏ÂøÉÂùáÂàÜÂ§çÂà∂‰ªªÂä°ÔºåÂ¶ÇÊûúÂùáÂàÜÂ∞è‰∫é16‰∏™ÔºåÈÇ£‰πà‰ª•16‰∏∫Ê≠•ÈïøÂàÜÁªôÂ§ÑÁêÜÂô® // ‰æãÂ¶Ç0-15Âè∑ÁªôÂ§ÑÁêÜÂô®1Ôºå16-32Âè∑ÂàÜÁªôÂ§ÑÁêÜÂô®2„ÄÇÂ§ÑÁêÜÂô®3Â∞±‰∏çÁî®Êé•‰ªªÂä°‰∫Ü„ÄÇ if ((stride = (NCPU &gt; 1) ? (n &gt;&gt;&gt; 3) / NCPU : n) &lt; MIN_TRANSFER_STRIDE) &#123; stride = MIN_TRANSFER_STRIDE; // subdivide range &#125; // 1. Â¶ÇÊûú nextTable Êú™ÂàùÂßãÂåñÔºåÂàôÂÖàËøõË°åÂàùÂßãÂåñÔºåÂÆπÈáèÊòØ‰πãÂâçÁöÑ‰∏§ÂÄç // Â¶ÇÊûúnextTab‰∏∫Á©∫ÂàôÂàùÂßãÂåñ‰∏∫ÂéütabÁöÑ‰∏§ÂÄçÔºåËøôÈáåÂè™‰ºöÊúâÂçïÁ∫øÁ®ãËøõÂæóÊù•ÔºåÂõ†‰∏∫ÂàùÂßãÂåñnextTabÂè™ÈúÄË¶Å‰∏Ä‰∏™Ôºå // addcountÈáåÈù¢Âà§Êñ≠‰∫ÜnextTab‰∏∫Á©∫Âàô‰∏çÊâßË°åÊâ©ÂÆπ‰ªªÂä° if (nextTab == null) &#123; try &#123; @SuppressWarnings("unchecked") Node&lt;K, V&gt;[] nt = (Node&lt;K, V&gt;[]) new Node&lt;?, ?&gt;[n &lt;&lt; 1]; // ÂÆπÈáèÁøªÂÄç nextTab = nt; &#125; catch (Throwable ex) &#123; // try to cope with OOME sizeCtl = Integer.MAX_VALUE; return; &#125; nextTable = nextTab; transferIndex = n; //Êâ©ÂÆπÊÄªËøõÂ∫¶ÔºåtransferIndex‰πãÂêéÁöÑÊ°∂ÈÉΩÂ∑≤ÂàÜÈÖçÂá∫Âéª,Âõ†‰∏∫ÊòØÂÄíÂ∫èÂàÜÈÖç &#125; // 2. ÊâßË°åËøÅÁßªÂ∑•‰Ωú int nextn = nextTab.length; // ForwardingNode Ë°®Á§∫‰∏Ä‰∏™Ê≠£Âú®Ë¢´ËøÅÁßªÁöÑÁªìÁÇπÔºåÂØπÂ∫îÁöÑ hash ÂÄºÊòØ MOVED ForwardingNode&lt;K, V&gt; fwd = new ForwardingNode&lt;&gt;(nextTab); boolean advance = true; // Ê†áËÆ∞‰∏Ä‰∏™ÁªìÁÇπÊòØÂê¶ËøÅÁßªÂÆåÊàê boolean finishing = false; // Ê†áËÆ∞Êâ©ÂÆπ‰ªªÂä°ÊòØÂê¶ÂÆåÊàê // i ÊòØÁ¥¢ÂºïÔºåbound ÊòØËæπÁïåÂÄºÔºàÂ∑¶ËæπÁïåÂÄºÔºâÔºå‰ªéÂêéÂæÄÂâçËøÅÁßª for (int i = 0, bound = 0; ; ) &#123; Node&lt;K, V&gt; f; int fh; /* * 2.1 Âü∫‰∫é CAS ËÆ°ÁÆóÊú¨Ê¨°‰ªªÂä°ÁöÑËæπÁïåÂÄºÔºåÂç≥ i Âíå bound ÂÄºÔºå * Â∞Ü i ÊåáÂêë transferIndexÔºåÂ∞Ü bound ÊåáÂêë transferIndex - stride */ while (advance) &#123; int nextIndex, nextBound; // Ê†áËÆ∞ÂΩìÂâçÁªìÁÇπËøÅÁßªÂÆåÊàê if (--i &gt;= bound || finishing) &#123; advance = false; &#125; // ‰∏ÄÊó¶ transferIndex &lt;= 0ÔºåË°®Á§∫ÊâÄÊúâ‰ªªÂä°Â∑≤ÁªèÂàÜÈÖçÁªôÁõ∏Â∫îÁöÑÁ∫øÁ®ãËøõË°åÂ§ÑÁêÜ else if ((nextIndex = transferIndex) &lt;= 0) &#123; i = -1; // ÂàÜÈÖçÂÆåÊàêÔºå‰∏ãÈù¢Áõ¥Êé•ÊâßË°åËøÅÁßª‰ªªÂä° advance = false; &#125; // Âü∫‰∫é CAS ËÆ°ÁÆó transferIndex ÂÄºÔºàÂç≥ transferIndex - strideÔºâ // nextBound ÊòØÊú¨Ê¨°‰ªªÂä°ÁöÑËæπÁïå //Á°ÆÂÆöÂΩìÂâçÁ∫øÁ®ãÊØèÊ¨°ÂàÜÈÖçÁöÑÂæÖËøÅÁßªÊ°∂ÁöÑËåÉÂõ¥[bound, nextIndex) //ÊØè‰∏™Á∫øÁ®ãÊâßË°åÂÆå‰πãÂâçÁöÑ‰ªªÂä°‰ª•Âêé‰ºöËµ∞Ëøô‰∏™ÂàÜÊîØÁªßÁª≠Ëé∑ÂèñÊñ∞ÁöÑ‰ªªÂä°,Áõ¥Âà∞ÊâÄÊúâ‰ªªÂä°ÈÉΩÂàÜÈÖçÂÆåÊØï else if (U.compareAndSwapInt( this, TRANSFERINDEX, nextIndex, nextBound = (nextIndex &gt; stride ? nextIndex - stride : 0))) &#123; bound = nextBound; i = nextIndex - 1; advance = false; &#125; &#125; // ~end while /* * 2.2 ÊâßË°åËøÅÁßª‰ªªÂä° */ if (i &lt; 0 || i &gt;= n || i + n &gt;= nextn) &#123; int sc; // ÂÆåÊàê‰∫ÜÊâÄÊúâÁªìÁÇπÁöÑËøÅÁßª if (finishing) &#123; nextTable = null; table = nextTab; // Êõ¥Êñ∞ table ‰∏∫ nextTable sizeCtl = (n &lt;&lt; 1) - (n &gt;&gt;&gt; 1); // sizeCtl ÂÄºÊõ¥Êñ∞‰∏∫ table ÈïøÂ∫¶ÁöÑ 1.5 ÂÄç return; &#125; // ‰ªªÂä°ÁªßÁª≠ /* * Âü∫‰∫é CAS Â∞Ü sizeCtl Âáè 1 * Âú®ËøÅÁßªÊìç‰ΩúÂºÄÂßãÂâç‰ºöÂ∞Ü sizeCtl ËÆæÁΩÆ‰∏∫ (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2ÔºåÊØè‰∏Ä‰∏™Á∫øÁ®ãÂä†ÂÖ•ËøÅÁßª‰ªªÂä°Â∞±‰ºöÂ∞Ü sizeCtl Âä† 1Ôºå * ÊâÄ‰ª•ËøôÈáåÊâßË°å sizeCtl Âáè 1Ôºå‰ª£Ë°®ÂΩìÂâç‰ªªÂä°ÂÆåÊàê */ if (U.compareAndSwapInt(this, SIZECTL, sc = sizeCtl, sc - 1)) &#123; if ((sc - 2) != resizeStamp(n) &lt;&lt; RESIZE_STAMP_SHIFT) &#123; // ÂΩìÂâç‰ªªÂä°ÁªìÊùüÔºå‰ΩÜÊòØÊï¥‰Ωì‰ªªÂä°ËøòÊú™ÂÆåÊàê return; &#125; // Ê≠§Êó∂ sizeCtl == (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2ÔºåËØ¥ÊòéÊâÄÊúâÁöÑ‰ªªÂä°ÈÉΩÊâßË°åÂÆå‰∫Ü finishing = advance = true; i = n; // recheck before commit,ÂÜçÊ¨°Ê£ÄÊü•‰∏Ä‰∏ãÊï¥Âº†Ë°® &#125; &#125; // Âê¶ÂàôÔºåËé∑Âèñ table ‰∏≠‰ΩçÁΩÆ‰∏∫ i ÁöÑÂ§¥ÁªìÁÇπÔºå‰∏î‰∏∫ null else if ((f = tabAt(tab, i)) == null) &#123; // Âú®ÂΩìÂâç‰ΩçÁΩÆËÆæÁΩÆ‰∏Ä‰∏™Á©∫ÁöÑ ForwardingNode ËäÇÁÇπ advance = casTabAt(tab, i, null, fwd); &#125; // Âê¶ÂàôÔºåÂΩìÂâç‰ΩçÁΩÆÂ∑≤ÁªèÊòØ‰∏Ä‰∏™ ForwardingNodeÔºå‰ª£Ë°®Ê≠£Âú®ÊâßË°åËøÅÁßªÂ∑•‰Ωú else if ((fh = f.hash) == MOVED) &#123; advance = true; // already processed &#125; // Âê¶ÂàôÔºåÂºÄÂßãÂØπÂΩìÂâçÁªìÁÇπÊâßË°åËøÅÁßªÂ∑•‰Ωú else &#123; synchronized (f) &#123; if (tabAt(tab, i) == f) &#123; // ÂÜçÊ¨°Ê†°È™åÁªìÁÇπ Node&lt;K, V&gt; ln, hn; // ÂΩìÂâç bin ÊòØ‰∏Ä‰∏™ÈìæË°® if (fh &gt;= 0) &#123; int runBit = fh &amp; n; // n ‰∏∫ËÄÅ table ÁöÑÈïøÂ∫¶ Node&lt;K, V&gt; lastRun = f; // ÈÅçÂéÜÂΩìÂâçÈìæË°®ÔºåÊâæÂà∞ÊúÄÂêé p.hash &amp; n ÂÄºÁõ∏ÂêåÁöÑÁ¨¨‰∏Ä‰∏™ÁªìÁÇπ for (Node&lt;K, V&gt; p = f.next; p != null; p = p.next) &#123; int b = p.hash &amp; n; if (b != runBit) &#123; runBit = b; lastRun = p; &#125; &#125; // runBit == 0 Ë°®Á§∫ËøòÂú®ËÄÅ table ÂéüÂÖàÁöÑ‰ΩçÁΩÆ if (runBit == 0) &#123; ln = lastRun; hn = null; &#125; // Ê≠§Â§Ñ runBit Á≠â‰∫éËÄÅ table ÁöÑÈïøÂ∫¶ÔºåÂç≥ n else &#123; hn = lastRun; ln = null; &#125; // ‰ª• lastRun ‰∏∫Áïå for (Node&lt;K, V&gt; p = f; p != lastRun; p = p.next) &#123; int ph = p.hash; K pk = p.key; V pv = p.val; if ((ph &amp; n) == 0) &#123; ln = new Node&lt;&gt;(ph, pk, pv, ln); &#125; else &#123; hn = new Node&lt;&gt;(ph, pk, pv, hn); &#125; &#125; // Â∞ÜÂÖ∂‰∏≠‰∏Ä‰∏™ÈìæË°®ÊîæÁΩÆÂú® nextTable ÁöÑ i ‰ΩçÁΩÆ setTabAt(nextTab, i, ln); // Â∞ÜÂè¶Â§ñ‰∏Ä‰∏™ÈìæË°®ÊîæÁΩÆÂú® nextTable ÁöÑ i+n ‰ΩçÁΩÆ setTabAt(nextTab, i + n, hn); // ËÆæÁΩÆÂΩìÂâç table ÁöÑ i ‰ΩçÁΩÆ‰∏∫ ForwardingNode Á©∫ÁªìÁÇπÔºå‰ª£Ë°®Â∑≤ÁªèÂ§ÑÁêÜÂÆå setTabAt(tab, i, fwd); advance = true; &#125; // ÂΩìÂâç bin ÊòØ‰∏ÄÈ¢óÁ∫¢ÈªëÊ†ë else if (f instanceof TreeBin) &#123; TreeBin&lt;K, V&gt; t = (TreeBin&lt;K, V&gt;) f; TreeNode&lt;K, V&gt; lo = null, loTail = null; TreeNode&lt;K, V&gt; hi = null, hiTail = null; int lc = 0, hc = 0; for (Node&lt;K, V&gt; e = t.first; e != null; e = e.next) &#123; int h = e.hash; TreeNode&lt;K, V&gt; p = new TreeNode&lt;&gt;(h, e.key, e.val, null, null); if ((h &amp; n) == 0) &#123; if ((p.prev = loTail) == null) &#123; lo = p; &#125; else &#123; loTail.next = p; &#125; loTail = p; ++lc; &#125; else &#123; if ((p.prev = hiTail) == null) &#123; hi = p; &#125; else &#123; hiTail.next = p; &#125; hiTail = p; ++hc; &#125; &#125; /* Â¶ÇÊûúÂ∞ÜÁ∫¢ÈªëÊ†ë‰∏ÄÂàÜ‰∏∫‰∫åÂêéÔºåÁªìÁÇπÊï∞ÁõÆÂ∞è‰∫é 6ÔºåÂàôÂ∞ÜÁ∫¢ÈªëÊ†ëËΩ¨Êç¢ÊàêÈìæË°® */ ln = (lc &lt;= UNTREEIFY_THRESHOLD) ? untreeify(lo) : (hc != 0) ? new TreeBin&lt;&gt;(lo) : t; hn = (hc &lt;= UNTREEIFY_THRESHOLD) ? untreeify(hi) : (lc != 0) ? new TreeBin&lt;&gt;(hi) : t; // Â∞ÜÂÖ∂‰∏≠‰∏Ä‰∏™Á∫¢ÈªëÊ†ëÔºàÊàñÈìæË°®ÔºâÊîæÁΩÆÂú® nextTable ÁöÑ i ‰ΩçÁΩÆ setTabAt(nextTab, i, ln); // Â∞ÜÂè¶Â§ñ‰∏Ä‰∏™Á∫¢ÈªëÊ†ëÔºàÊàñÈìæË°®ÔºâÊîæÁΩÆÂú® nextTable ÁöÑ i+n ‰ΩçÁΩÆ setTabAt(nextTab, i + n, hn); // ËÆæÁΩÆÂΩìÂâç table ÁöÑ i ‰ΩçÁΩÆ‰∏∫ ForwardingNode Á©∫ÁªìÁÇπÔºå‰ª£Ë°®Â∑≤ÁªèÂ§ÑÁêÜÂÆå setTabAt(tab, i, fwd); advance = true; &#125; &#125; &#125; &#125; &#125;&#125; ÊñπÊ≥ïÁöÑÂÆûÁé∞ÂæàÂ§çÊùÇÔºå‰∏çËøáÊï¥‰ΩìÊµÅÁ®ãÂèØ‰ª•Ê¶ÇÊã¨‰∏∫ 2 Â§ßÈÉ®ÂàÜÔºö Â¶ÇÊûú nextTable Êú™ÂàùÂßãÂåñÔºåÂàôÂÖàÊâßË°åÂàùÂßãÂåñÊìç‰ΩúÔºåÊñ∞ÁöÑ table ÂÆπÈáèÁøªÂÄç ÊâßË°åËøÅÁßª‰ªªÂä° ÂÖ∂‰∏≠ËøáÁ®ã 1 ÊØîËæÉÁÆÄÂçïÔºå‰∏çËøáÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÂπ∂‰∏çÊòØÊâÄÊúâËß¶Âèë transfer ÊñπÊ≥ïÈÉΩÈúÄË¶ÅÊâßË°åÂàùÂßãÂåñ table ÁöÑÊìç‰ΩúÔºåÂè™Êúâ‰∏ªÂä®Ëß¶ÂèëÊâ©ÂÆπÁöÑÁ∫øÁ®ãÈúÄË¶ÅÊâßË°åËØ•Êìç‰ΩúÔºåÂØπ‰∫éÂêéÊù•Âä†ÂÖ•‚ÄúÂ∏ÆÂøô‚ÄùÁöÑÁ∫øÁ®ã‰ºöË∑≥ËøáËøáÁ®ã 1ÔºåÁõ¥Êé•ËøõÂÖ•ËøáÁ®ã 2„ÄÇ ËøáÁ®ã 2 ÈÄöËøá transferIndex ÂÆû‰æãÂèòÈáèÂçèË∞É‰ªªÂä°ÁöÑÂàÜÈÖçÔºåÂπ∂‰∏∫ÊØè‰∏™Á∫øÁ®ãÂàÜÈÖç stride ‰∏™ÁªìÁÇπËøõË°åËøÅÁßªÔºå‰ªªÂä°ÂàÜÈÖçÁöÑËøáÁ®ãÂÆûÈôÖ‰∏äÂ∞±ÊòØÁ°ÆÂÆöÂΩìÂâçÁ∫øÁ®ãËøÅÁßªÁªìÁÇπÁöÑ‰∏ä‰∏ãÁïåÁöÑËøáÁ®ãÔºåËØ•ËøáÁ®ã‰Ωç‰∫é while Âæ™ÁéØ‰∏≠ÔºàÂç≥‰ª£Á†ÅÊ≥®Èáä 2.1ÔºâÔºåËØ•Âæ™ÁéØÊï¥‰Ωì‰∏äÂ∞±ÊòØ‰∏Ä‰∏™ CAS Êìç‰ΩúÔºåÂ¶ÇÊûúËøÅÁßª‰ªªÂä°Â∑≤ÁªèÂÆåÊàêÔºåÊàñËÄÖÊ≤°ÊúâÂâ©‰ΩôÁöÑÁªìÁÇπÂèØ‰ª•ËøÅÁßªÔºàÂÆû‰æãÂèòÈáè transferIndex Â∞è‰∫éÁ≠â‰∫é 0ÔºâÔºåÂàôÈÄÄÂá∫ CASÔºåÂê¶ÂàôÂ∞ùËØï‰∏∫Êú¨Ê¨°‰ªªÂä°ÂàÜÈÖçÊñ∞ÁöÑ‰∏ä‰∏ãÁïåÔºåÂêåÊó∂Êõ¥Êñ∞ transferIndex ÂÄº„ÄÇ Êé•‰∏ãÊù•Ê≠£ÂºèÂºÄÂßãËøÅÁßªÂ∑•‰ΩúÔºåÊï¥‰ΩìÊµÅÁ®ãÂèØ‰ª•Ê¶ÇÊã¨‰∏∫Ôºö Ê£ÄÊü•Êï¥‰ΩìËøÅÁßª‰ªªÂä°ÊòØÂê¶ÂÆåÊàêÔºåÂ¶ÇÊûúÂÆåÊàêÂàôÊõ¥Êñ∞ table Âíå sizeCtl ÂÄº Âê¶ÂàôÔºåÊ£ÄÊü•ÂΩìÂâç‰ªªÂä°ÊòØÂê¶Â∑≤ÁªèÂÆåÊàêÔºåÂ¶ÇÊûúÂÆåÊàêÂàôÈÄÄÂá∫Êú¨Ê¨°‰ªªÂä° ÂØπ‰∫é‰ªçÂú®ËøõË°å‰∏≠ÁöÑ‰ªªÂä°‰ºöÁªßÁª≠ÊâßË°åËøÅÁßªÊìç‰ΩúÔºåÂ¶ÇÊûúÂΩìÂâçÁªìÁÇπÊòØ‰∏Ä‰∏™Á©∫ÁªìÁÇπÔºåÂàôÂú®ËØ•‰ΩçÁΩÆËÆæÁΩÆ‰∏Ä‰∏™Á©∫ÁöÑ ForwardingNode ÁªìÁÇπÔºåÁî®‰∫éÊ†áËÆ∞ÂΩìÂâçÁªìÁÇπÊ≠£Âú®ËøÅÁßª‰∏≠ Âê¶ÂàôÔºåÂ¶ÇÊûúÂΩìÂâçÁªìÁÇπÊòØ‰∏Ä‰∏™ ForwardingNode ÁªìÁÇπÔºåÂç≥ÂΩìÂâçÁªìÁÇπÊ≠£Âú®ËøÅÁßª‰∏≠ÔºåËøõÂÖ•‰∏ã‰∏ÄËΩÆ‰ªªÂä°ÂàÜÈÖç Âê¶ÂàôÔºåÂØπÂΩìÂâçÁªìÁÇπÊâßË°åËøÅÁßªÊìç‰Ωú ‰∏ãÈù¢ÈíàÂØπÊµÅÁ®ã‰∏≠ÁöÑ‰∏Ä‰∫õÂÖ≥ÈîÆÁÇπËøõË°åËØ¥ÊòéÔºåÈ¶ñÂÖàÊù•Áúã‰∏Ä‰∏ãËøáÁ®ã 2 Áõ∏ÂÖ≥ÁöÑ‰ª£Á†ÅÔºö 123456789101112131415/* * Âü∫‰∫é CAS Â∞Ü sizeCtl Âáè 1 * Âú®ËøÅÁßªÊìç‰ΩúÂºÄÂßãÂâç‰ºöÂ∞Ü sizeCtl ËÆæÁΩÆ‰∏∫ (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2ÔºåÊØè‰∏Ä‰∏™Á∫øÁ®ãÂä†ÂÖ•ËøÅÁßª‰ªªÂä°Â∞±‰ºöÂ∞Ü sizeCtl Âä† 1Ôºå * ÂâçÈù¢‰∏§‰∏™Ë∞ÉÁî® transferÂáΩÊï∞ÁöÑÔºåÂú®Ë∞ÉÁî®‰πãÂâçÈÉΩ‰ºöÂÖàÂä† sizeCtl + 1 * ÊâÄ‰ª•ËøôÈáåÊâßË°å sizeCtl Âáè 1Ôºå‰ª£Ë°®ÂΩìÂâç‰ªªÂä°ÂÆåÊàê */if (U.compareAndSwapInt(this, SIZECTL, sc = sizeCtl, sc - 1)) &#123; if ((sc - 2) != resizeStamp(n) &lt;&lt; RESIZE_STAMP_SHIFT) &#123; // ÂΩìÂâç‰ªªÂä°ÁªìÊùüÔºå‰ΩÜÊòØÊï¥‰Ωì‰ªªÂä°ËøòÊú™ÂÆåÊàê return; &#125; // Ê≠§Êó∂ sizeCtl == (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2ÔºåËØ¥ÊòéÊâÄÊúâÁöÑ‰ªªÂä°ÈÉΩÊâßË°åÂÆå‰∫Ü finishing = advance = true; i = n; // recheck before commit&#125; ÂâçÈù¢Êàë‰ª¨ÊõæÊèêÂà∞ÂΩìÊñ∞Â¢û‰∏Ä‰∏™Á∫øÁ®ãÊîØÊåÅËøÅÁßª‰ªªÂä°Êó∂‰ºöÊâßË°å U.compareAndSwapInt(this, SIZECTL, sc, sc + 1) Êìç‰ΩúÔºåÂπ∂‰∏îÂú®Êâ©ÂÆπÊìç‰ΩúÂºÄÂßãÂâç‰ºöËÆæÁΩÆ sizeCtl ÁöÑÂÄº‰∏∫ (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2ÔºåËÄåËøôÈáåÂú®ÂÆåÊàê‰∏Ä‰∏™‰ªªÂä°ÁöÑÊó∂ÂÄô‰ºöÊâßË°å U.compareAndSwapInt(this, SIZECTL, sc = sizeCtl, sc - 1) Êìç‰ΩúÂ∞Ü sizeCtl ÁöÑÂÄºÂáè 1„ÄÇ‰∏äÈù¢ÁöÑ‰ª£Á†Å‰ºöÂà§ÂÆöÂΩìÂâç sizeCtl ÂÄºÊòØÂê¶Á≠â‰∫é (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2ÔºåÂ¶ÇÊûúÁõ∏Á≠âÂàôËØ¥ÊòéÊï¥‰ΩìÊâ©ÂÆπ‰ªªÂä°ÂÆåÊàêÔºåÂê¶Âàô‰ªÖËØ¥ÊòéÂΩìÂâç‰ªªÂä°ÂÆåÊàêÔºåÂ∞ÜÁ∫øÁ®ã‰ªªÂä°Êï∞Âáè 1„ÄÇ Êé•‰∏ãÊù•Êàë‰ª¨ÁªßÁª≠Êù•Áúã‰∏Ä‰∏™ÁªìÁÇπËøÅÁßªÁöÑËøáÁ®ãÔºåËøÅÁßªÂå∫ÂàÜÈìæË°®ÂíåÁ∫¢ÈªëÊ†ëÔºå‰∏çËøáÂü∫Êú¨ÊÄùÊÉ≥ÊòØÊÉ≥ÈÄöÁöÑÔºåËøôÈáå‰ª•ÈìæË°®ËøõË°åËØ¥ÊòéÔºåÁõ∏ÂÖ≥ÂÆûÁé∞Â¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041// ÂΩìÂâç bin ÊòØ‰∏Ä‰∏™ÈìæË°®if (fh &gt;= 0) &#123; int runBit = fh &amp; n; // n ‰∏∫ËÄÅ table ÁöÑÈïøÂ∫¶ Node&lt;K, V&gt; lastRun = f; // ÈÅçÂéÜÂΩìÂâçÈìæË°®ÔºåÊâæÂà∞ÊúÄÂêé p.hash &amp; n ÂÄºÁõ∏ÂêåÁöÑÁ¨¨‰∏Ä‰∏™ÁªìÁÇπ for (Node&lt;K, V&gt; p = f.next; p != null; p = p.next) &#123; int b = p.hash &amp; n; if (b != runBit) &#123; runBit = b; lastRun = p; &#125; &#125; // runBit == 0 Ë°®Á§∫ËøòÂú®ËÄÅ table ÂéüÂÖàÁöÑ‰ΩçÁΩÆ if (runBit == 0) &#123; ln = lastRun; hn = null; &#125; // Ê≠§Â§Ñ runBit Á≠â‰∫éËÄÅ table ÁöÑÈïøÂ∫¶ÔºåÂç≥ n else &#123; hn = lastRun; ln = null; &#125; // ‰ª• lastRun ‰∏∫Áïå for (Node&lt;K, V&gt; p = f; p != lastRun; p = p.next) &#123; int ph = p.hash; K pk = p.key; V pv = p.val; if ((ph &amp; n) == 0) &#123; ln = new Node&lt;&gt;(ph, pk, pv, ln); &#125; else &#123; hn = new Node&lt;&gt;(ph, pk, pv, hn); &#125; &#125; // Â∞ÜÂÖ∂‰∏≠‰∏Ä‰∏™ÈìæË°®ÊîæÁΩÆÂú® nextTable ÁöÑ i ‰ΩçÁΩÆ setTabAt(nextTab, i, ln); // Â∞ÜÂè¶Â§ñ‰∏Ä‰∏™ÈìæË°®ÊîæÁΩÆÂú® nextTable ÁöÑ i+n ‰ΩçÁΩÆ setTabAt(nextTab, i + n, hn); // ËÆæÁΩÆÂΩìÂâç table ÁöÑ i ‰ΩçÁΩÆ‰∏∫ ForwardingNode Á©∫ÁªìÁÇπÔºå‰ª£Ë°®Â∑≤ÁªèÂ§ÑÁêÜÂÆå setTabAt(tab, i, fwd); advance = true;&#125; Ëøô‰∏ÄÊÆµ‰ª£Á†ÅÂ¶ÇÊûúÂ∏åÊúõÊõ¥Â•ΩÁöÑÁêÜËß£ÔºåÂª∫ËÆÆËá™Â∑±Ê®°Êãü‰∏Ä‰∏™ tableÔºåÂπ∂ debug ‰∏Ä‰∏ãÊâßË°åÊµÅÁ®ã„ÄÇÂÖ∂ÂÆû‰πü‰∏çÈöæÔºåËøôÊÆµ‰ª£Á†ÅÁöÑÂ∑•‰ΩúÂ∞±ÊòØÂ∞Ü‰∏Ä‰∏™ÈìæË°®ÁöÑÊãÜÂàÜÊàê‰∏§‰∏™ÈìæË°®ÔºåÂπ∂Â∞ÜÂÆÉ‰ª¨ÊèíÂÖ•Âà∞Êñ∞ table ÈÄÇÂΩìÁöÑ‰ΩçÁΩÆ„ÄÇÂÅáËÆæËÄÅÁöÑ table ÈïøÂ∫¶‰∏∫ 16ÔºåÈÇ£‰πà‰∏äÈù¢ÁöÑÂÆûÁé∞Êúâ‰∏Ä‰∏™Â∑ßÂ¶ôÁöÑÂú∞ÊñπÂú®‰∫éÂØπÈìæË°®‰∏≠ÊâÄÊúâÁªìÁÇπÁöÑÂìàÂ∏åÂÄºÊâßË°å p.hash &amp; n Êìç‰ΩúÔºåÂÖ∂ÁªìÊûú‰∏çÊòØ 0 Â∞±ÊòØ 16ÔºàËÄÅ table ÁöÑÈïøÂ∫¶ÔºâÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•‰æùÊçÆ p.hash &amp; n ÁöÑÂÄºÂ∞Ü‰∏Ä‰∏™ÈìæË°®ÊãÜÂàÜÊàê‰∏§‰∏™ÈìæË°®ÔºåÂÖ∂‰∏≠ÂÄºÂùá‰∏∫ 0 ÁöÑÁªìÁÇπÊûÑÊàêÁöÑÈìæË°®‰ªçÁÑ∂ÊîæÁΩÆÂú®Êñ∞ table ÁöÑÂΩìÂâç‰ΩçÁΩÆ iÔºåËÄåÂÄºÂùá‰∏∫ 16 ÁöÑÁªìÁÇπÊûÑÊàêÁöÑÈìæË°®ÂàôÊîæÁΩÆÂú®Êñ∞ÁöÑ‰ΩçÁΩÆÔºåÂç≥ i + 16„ÄÇÂèòÈáè lastRun ÊâÄË°®Á§∫ÁöÑÁªìÁÇπÂÆûÈôÖ‰∏äÊòØÊúÄÂêéÂá†‰∏™ÂÖ∑Â§áÁõ∏Âêå p.hash &amp; n ÂÄºÁöÑËøûÁª≠ÁªìÁÇπÁöÑÊúÄÂ∑¶ËæπÁªìÁÇπÔºåÂõ†‰∏∫ËøôÊ†∑ÂèØ‰ª•ÂáèÂ∞ëËØ•ÁªìÁÇπÂè≥ËæπÂá†‰∏™ÁªìÁÇπÁöÑËøÅÁßªÂ∑•‰ΩúÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ÂÖ∑Â§áÁõ∏ÂêåÁöÑ p.hash &amp; n ÂÄºÔºåËá™ÁÑ∂‰πüÂ∞±‰Ωç‰∫éÂêå‰∏Ä‰∏™ÈìæË°®‰∏ä„ÄÇ addCount()Âú® put ÊñπÊ≥ïÁªìÂ∞æÂ§ÑË∞ÉÁî®‰∫Ü addCount ÊñπÊ≥ïÔºåÊääÂΩìÂâç ConcurrentHashMap ÁöÑÂÖÉÁ¥†‰∏™Êï∞+1Ôºå Ëøô‰∏™ÊñπÊ≥ï‰∏ÄÂÖ±ÂÅö‰∫Ü‰∏§‰ª∂‰∫ã,Êõ¥Êñ∞ baseCount ÁöÑÂÄºÔºåÊ£ÄÊµãÊòØÂê¶ËøõË°åÊâ©ÂÆπ„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657// ‰ªé putVal ‰º†ÂÖ•ÁöÑÂèÇÊï∞ÊòØ 1//binCountÔºåbinCount ÈªòËÆ§ÊòØ0ÔºåÂè™Êúâ hash ÂÜ≤Á™Å‰∫ÜÊâç‰ºöÂ§ß‰∫é 1.‰∏î‰ªñÁöÑÂ§ßÂ∞èÊòØÈìæË°®ÁöÑÈïøÂ∫¶ÔºàÂ¶ÇÊûú‰∏çÊòØÁ∫¢ÈªëÊï∞ÁªìÊûÑÁöÑËØùÔºâprivate final void addCount(long x, int check) &#123; CounterCell[] as; long b, s; //Âà©Áî®CASÊñπÊ≥ïÊõ¥Êñ∞baseCountÁöÑÂÄº // Â¶ÇÊûúËÆ°Êï∞ÁõíÂ≠ê‰∏çÊòØÁ©∫ ÊàñËÄÖ // Â¶ÇÊûú‰øÆÊîπ baseCount Â§±Ë¥• if ((as = counterCells) != null || !U.compareAndSwapLong(this, BASECOUNT, b = baseCount, s = b + x)) &#123; CounterCell a; long v; int m; boolean uncontended = true; // Â¶ÇÊûúËÆ°Êï∞ÁõíÂ≠êÊòØÁ©∫ÔºàÂ∞öÊú™Âá∫Áé∞Âπ∂ÂèëÔºâ // Â¶ÇÊûúÈöèÊú∫Âèñ‰Ωô‰∏Ä‰∏™Êï∞ÁªÑ‰ΩçÁΩÆ‰∏∫Á©∫ ÊàñËÄÖ // ‰øÆÊîπËøô‰∏™ÊßΩ‰ΩçÁöÑÂèòÈáèÂ§±Ë¥•ÔºàÂá∫Áé∞Âπ∂Âèë‰∫ÜÔºâ // ÊâßË°å fullAddCount ÊñπÊ≥ï„ÄÇÂπ∂ÁªìÊùü if (as == null || (m = as.length - 1) &lt; 0 || (a = as[ThreadLocalRandom.getProbe() &amp; m]) == null || !(uncontended = U.compareAndSwapLong(a, CELLVALUE, v = a.value, v + x))) &#123; fullAddCount(x, uncontended); return; &#125; if (check &lt;= 1) return; s = sumCount(); &#125; // Â¶ÇÊûúÈúÄË¶ÅÊ£ÄÊü•,Ê£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÊâ©ÂÆπÔºåÂú® putVal ÊñπÊ≥ïË∞ÉÁî®Êó∂ÔºåÈªòËÆ§Â∞±ÊòØË¶ÅÊ£ÄÊü•ÁöÑ„ÄÇ if (check &gt;= 0) &#123; Node&lt;K,V&gt;[] tab, nt; int n, sc; // Â¶ÇÊûúmap.size() Â§ß‰∫é sizeCtlÔºàËææÂà∞Êâ©ÂÆπÈòàÂÄºÈúÄË¶ÅÊâ©ÂÆπÔºâ ‰∏î // table ‰∏çÊòØÁ©∫Ôºõ‰∏î table ÁöÑÈïøÂ∫¶Â∞è‰∫é 1 &lt;&lt; 30„ÄÇÔºàÂèØ‰ª•Êâ©ÂÆπÔºâ while (s &gt;= (long)(sc = sizeCtl) &amp;&amp; (tab = table) != null &amp;&amp; (n = tab.length) &lt; MAXIMUM_CAPACITY) &#123; // Ê†πÊçÆ length ÂæóÂà∞‰∏Ä‰∏™Ê†áËØÜ int rs = resizeStamp(n); // Â¶ÇÊûúÊ≠£Âú®Êâ©ÂÆπ if (sc &lt; 0) &#123; if ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 || sc == rs + MAX_RESIZERS || (nt = nextTable) == null || transferIndex &lt;= 0) break; // Â¶ÇÊûúÂ∑≤ÁªèÊúâÂÖ∂‰ªñÁ∫øÁ®ãÂú®ÊâßË°åÊâ©ÂÆπÊìç‰Ωú // ÂèØ‰ª•Â∏ÆÂä©Êâ©ÂÆπÔºåÈÇ£‰πàÂ∞Ü sc Âä† 1. Ë°®Á§∫Â§ö‰∫Ü‰∏Ä‰∏™Á∫øÁ®ãÂú®Â∏ÆÂä©Êâ©ÂÆπ if (U.compareAndSwapInt(this, SIZECTL, sc, sc + 1)) // Êâ©ÂÆπ transfer(tab, nt); &#125; // Â¶ÇÊûú‰∏çÂú®Êâ©ÂÆπÔºåÂ∞Ü sc Êõ¥Êñ∞ÔºöÊ†áËØÜÁ¨¶Â∑¶Áßª 16 ‰Ωç ÁÑ∂Âêé + 2. ‰πüÂ∞±ÊòØÂèòÊàê‰∏Ä‰∏™Ë¥üÊï∞„ÄÇÈ´ò 16 ‰ΩçÊòØÊ†áËØÜÁ¨¶Ôºå‰Ωé 16 ‰ΩçÂàùÂßãÊòØ 2. else if (U.compareAndSwapInt(this, SIZECTL, sc, (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2)) // Êõ¥Êñ∞ sizeCtl ‰∏∫Ë¥üÊï∞ÂêéÔºåÂºÄÂßãÊâ©ÂÆπ„ÄÇ transfer(tab, null); s = sumCount(); &#125; &#125;&#125; ÊÄªÁªì‰∏Ä‰∏ãËØ•ÊñπÊ≥ïÁöÑÈÄªËæëÔºö x ÂèÇÊï∞Ë°®Á§∫ÁöÑÊ≠§Ê¨°ÈúÄË¶ÅÂØπË°®‰∏≠ÂÖÉÁ¥†ÁöÑ‰∏™Êï∞Âä†Âá†„ÄÇcheck ÂèÇÊï∞Ë°®Á§∫ÊòØÂê¶ÈúÄË¶ÅËøõË°åÊâ©ÂÆπÊ£ÄÊü•ÔºåÂ§ß‰∫éÁ≠â‰∫é0 ÈúÄË¶ÅËøõË°åÊ£ÄÊü•ÔºåËÄåÊàë‰ª¨ÁöÑ putVal ÊñπÊ≥ïÁöÑ binCount ÂèÇÊï∞ÊúÄÂ∞è‰πüÊòØ 0 ÔºåÂõ†Ê≠§ÔºåÊØèÊ¨°Ê∑ªÂä†ÂÖÉÁ¥†ÈÉΩ‰ºöËøõË°åÊ£ÄÊü•„ÄÇÔºàÈô§ÈùûÊòØË¶ÜÁõñÊìç‰ΩúÔºâ Âà§Êñ≠ËÆ°Êï∞ÁõíÂ≠êÂ±ûÊÄßÊòØÂê¶ÊòØÁ©∫ÔºåÂ¶ÇÊûúÊòØÁ©∫ÔºåÂ∞±Â∞ùËØï‰øÆÊîπ baseCount ÂèòÈáèÔºåÂØπËØ•ÂèòÈáèËøõË°åÂä† X„ÄÇ Â¶ÇÊûúËÆ°Êï∞ÁõíÂ≠ê‰∏çÊòØÁ©∫ÔºåÊàñËÄÖ‰øÆÊîπ baseCount ÂèòÈáèÂ§±Ë¥•‰∫ÜÔºåÂàôÊîæÂºÉÂØπ baseCount ËøõË°åÊìç‰Ωú„ÄÇ Â¶ÇÊûúËÆ°Êï∞ÁõíÂ≠êÊòØ null ÊàñËÄÖËÆ°Êï∞ÁõíÂ≠êÁöÑ length ÊòØ 0ÔºåÊàñËÄÖÈöèÊú∫Âèñ‰∏Ä‰∏™‰ΩçÁΩÆÂèñ‰∫éÊï∞ÁªÑÈïøÂ∫¶ÊòØ nullÔºåÈÇ£‰πàÂ∞±ÂØπÂàöÂàöÁöÑÂÖÉÁ¥†ËøõË°å CAS ËµãÂÄº„ÄÇ Â¶ÇÊûúËµãÂÄºÂ§±Ë¥•ÔºåÊàñËÄÖÊª°Ë∂≥‰∏äÈù¢ÁöÑÊù°‰ª∂ÔºåÂàôË∞ÉÁî® fullAddCount ÊñπÊ≥ïÈáçÊñ∞Ê≠ªÂæ™ÁéØÊèíÂÖ•„ÄÇ ËøôÈáåÂ¶ÇÊûúÊìç‰Ωú baseCount Â§±Ë¥•‰∫ÜÔºàÊàñËÄÖËÆ°Êï∞ÁõíÂ≠ê‰∏çÊòØ NullÔºâÔºå‰∏îÂØπËÆ°Êï∞ÁõíÂ≠êËµãÂÄºÊàêÂäüÔºåÈÇ£‰πàÂ∞±Ê£ÄÊü• check ÂèòÈáèÔºåÂ¶ÇÊûúËØ•ÂèòÈáèÂ∞è‰∫éÁ≠â‰∫é 1. Áõ¥Êé•ÁªìÊùü„ÄÇÂê¶ÂàôÔºåËÆ°ÁÆó‰∏Ä‰∏ã count ÂèòÈáè„ÄÇ Â¶ÇÊûú check Â§ß‰∫éÁ≠â‰∫é 0 ÔºåËØ¥ÊòéÈúÄË¶ÅÂØπÊòØÂê¶Êâ©ÂÆπËøõË°åÊ£ÄÊü•„ÄÇ Â¶ÇÊûú map ÁöÑ size Â§ß‰∫é sizeCtlÔºàÊâ©ÂÆπÈòàÂÄºÔºâÔºå‰∏î table ÁöÑÈïøÂ∫¶Â∞è‰∫é 1 &lt;&lt; 30ÔºåÈÇ£‰πàÂ∞±ËøõË°åÊâ©ÂÆπ„ÄÇ Ê†πÊçÆ length ÂæóÂà∞‰∏Ä‰∏™Ê†áËØÜÁ¨¶ÔºåÁÑ∂ÂêéÔºåÂà§Êñ≠ sizeCtl Áä∂ÊÄÅÔºåÂ¶ÇÊûúÂ∞è‰∫é 0 ÔºåËØ¥ÊòéË¶Å‰πàÂú®ÂàùÂßãÂåñÔºåË¶Å‰πàÂú®Êâ©ÂÆπ„ÄÇ Â¶ÇÊûúÊ≠£Âú®Êâ©ÂÆπÔºåÈÇ£‰πàÂ∞±Ê†°È™å‰∏Ä‰∏ãÊï∞ÊçÆÊòØÂê¶ÂèòÂåñ‰∫ÜÔºàÂÖ∑‰ΩìÂèØ‰ª•Áúã‰∏äÈù¢‰ª£Á†ÅÁöÑÊ≥®ÈáäÔºâ„ÄÇÂ¶ÇÊûúÊ£ÄÈ™åÊï∞ÊçÆ‰∏çÈÄöËøáÔºåbreak„ÄÇ Â¶ÇÊûúÊ†°È™åÊï∞ÊçÆÈÄöËøá‰∫ÜÔºåÈÇ£‰πàÂ∞Ü sizeCtl Âä†‰∏ÄÔºåË°®Á§∫Â§ö‰∫Ü‰∏Ä‰∏™Á∫øÁ®ãÂ∏ÆÂä©Êâ©ÂÆπ„ÄÇÁÑ∂ÂêéËøõË°åÊâ©ÂÆπ„ÄÇ Â¶ÇÊûúÊ≤°ÊúâÂú®Êâ©ÂÆπÔºå‰ΩÜÊòØÈúÄË¶ÅÊâ©ÂÆπ„ÄÇÈÇ£‰πàÂ∞±Â∞Ü sizeCtl Êõ¥Êñ∞ÔºåËµãÂÄº‰∏∫Ê†áËØÜÁ¨¶Â∑¶Áßª 16 ‰Ωç ‚Äî‚Äî ‰∏Ä‰∏™Ë¥üÊï∞„ÄÇÁÑ∂ÂêéÂä† 2„ÄÇ Ë°®Á§∫ÔºåÂ∑≤ÁªèÊúâ‰∏Ä‰∏™Á∫øÁ®ãÂºÄÂßãÊâ©ÂÆπ‰∫Ü„ÄÇÁÑ∂ÂêéËøõË°åÊâ©ÂÆπ„ÄÇÁÑ∂ÂêéÂÜçÊ¨°Êõ¥Êñ∞ countÔºåÁúãÁúãÊòØÂê¶ËøòÈúÄË¶ÅÊâ©ÂÆπ„ÄÇ ‰ªé‰∏äÈù¢ÁöÑÂàÜÊûê‰∏≠Êàë‰ª¨ÂèØ‰ª•ÁúãÔºåaddCount()ÊòØÊâ©ÂÆπÊòØËÄÅËÄÅÂÆûÂÆûÊåâÂÆπÈáèx2Êù•Êâ©ÂÆπÁöÑÔºåtryPresize()‰ºö‰º†ÂÖ•‰∏Ä‰∏™sizeÂèÇÊï∞ÔºåÂèØËÉΩ‰∏ÄÊ¨°ÊÄßÊâ©ÂÆπÂæàÂ§öÂÄç„ÄÇÂêéÈù¢ÈááÁî®‰∏ÄÊ†∑ÁöÑÊñπÂºèË∞ÉÁî®transfer()Êù•ËøõË°åÁúüÊ≠£ÁöÑÊâ©ÂÆπÂ§ÑÁêÜ„ÄÇ ‰ΩúËÄÖÔºöexposureÈìæÊé•Ôºöhttps://juejin.im/post/5c36bcc0e51d45513236ee78Êù•Ê∫êÔºöÊéòÈáëËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ get()ÊñπÊ≥ï put ÁöÑÊâßË°åÊµÅÁ®ãÂèØ‰ª•Âä†Ê∑±Êàë‰ª¨ÂØπ‰∫é ConcurrentHashMap Â≠òÂÇ®ÁªìÊûÑÁöÑÁêÜËß£ÔºåËÄåÁêÜËß£‰∫Ü ConcurrentHashMap ÁöÑÂ≠òÂÇ®ÁªìÊûÑÔºåÈÇ£‰πàÂàÜÊûê get ÊñπÊ≥ïÁöÑËøêË°åÊú∫Âà∂‰πüÊòØÊ∞¥Âà∞Ê∏†ÊàêÁöÑ‰∫ãÊÉÖÔºåÂÆûÁé∞Â¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728public V get(Object key) &#123; Node&lt;K, V&gt;[] tab; Node&lt;K, V&gt; e, p; int n, eh; K ek; // ËÆ°ÁÆó key ÁöÑ hash ÂÄº int h = spread(key.hashCode()); // table Ë°®‰∏ç‰∏∫Á©∫Ôºå‰∏î key ÂØπÂ∫îÁöÑ table Â§¥ÁªìÁÇπÂ≠òÂú® if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (e = tabAt(tab, (n - 1) &amp; h)) != null) &#123; if ((eh = e.hash) == h) &#123; if ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek))) &#123; // ÊâæÂà∞ÂØπÂ∫îÁöÑ keyÔºåËøîÂõû value return e.val; &#125; &#125; // ÂΩìÂâç bin ‰∏∫Ê†ëÔºåÊâßË°å find ÊñπÊ≥ïÊ£ÄÁ¥¢ else if (eh &lt; 0) &#123; return (p = e.find(h, key)) != null ? p.val : null; &#125; // ÂΩìÂâç bin ÊòØÈìæË°®ÔºåÁõ¥Êé•ÈÅçÂéÜÊ£ÄÁ¥¢ while ((e = e.next) != null) &#123; if (e.hash == h &amp;&amp; ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek)))) &#123; return e.val; &#125; &#125; &#125; return null;&#125; ÊñπÊ≥ïÈ¶ñÂÖà‰æùÊçÆÁõ∏ÂêåÁöÑÂÆûÁé∞ËÆ°ÁÆó key ÁöÑÂìàÂ∏åÂÄºÔºåÁÑ∂ÂêéÂÆö‰Ωç key Âú® table ‰∏≠ÁöÑ bin ‰ΩçÁΩÆ„ÄÇÂ¶ÇÊûú bin ÁªìÁÇπÂ≠òÂú®ÔºåÂàô‰æùÊçÆÂΩìÂâç bin Á±ªÂûãÔºàÈìæË°®ÊàñÁ∫¢ÈªëÊ†ëÔºâÊ£ÄÁ¥¢ÁõÆÊ†áÂÄº„ÄÇ Ë°•ÂÖÖQÔºöÂº±‰∏ÄËá¥ÊÄßÁöÑÈóÆÈ¢òÔºü AÔºö‰πãÂâçÁªèÂ∏∏ÊúâÁúãÂà∞ËØ¥ ConcurrentHashMap Âú®jdk1.6 ÁâàÊú¨‰∏≠ÊòØÂº±‰∏ÄËá¥ÊÄßÁöÑÔºåÂéüÂõ†ÊòØÂÖ∂Ë∑ü CopyOnWriteArrayList ‰∏ÄÊ†∑ÔºåÂè™ÊúâÂú®ÂÜôÊï∞ÊçÆÊó∂Âä†ÈîÅÔºåÂú®ËØªÊï∞ÊçÆÊó∂‰∏çÈúÄË¶ÅÂä†ÈîÅÔºå‰∏îÊï∞ÁªÑÂºïÁî®ÊòØ volatile ÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞ÁöÑÔºåËøô‰∏™Âº±‰∏ÄËá¥ÊÄßÂæàÂ•ΩÁêÜËß£ÔºåÂ∞±ÊòØËØªÂà∞ÁöÑÊï∞ÊçÆÂèØËÉΩ‰∏çÊòØÊúÄÊñ∞ÁöÑÔºåÂõ†‰∏∫Âú®ÂÜôÂÆåÂêéÊï∞ÁªÑÂºïÁî®Âπ∂Ê≤°ÊúâÂèëÁîüÊîπÂèòÔºåÂè™ÊòØÂÖÉÁ¥†ÁöÑÂÄºÂèëÁîü‰∫ÜÂèòÂåñÔºåËøô‰∏™Êó∂ÂÄô volatile ÊòØ‰∏ç‰ºöÂéªÂà∑Êñ∞Êï∞ÊçÆÁöÑÔºåÂè™ÊúâÁ≠âÂÜôÂÆåÂêéÁöÑÊï∞ÊçÆ‰ªéÂ∑•‰ΩúÂÜÖÂ≠òÂÜôÂõûÂà∞‰∏ªÂÜÖÂ≠ò‰∏≠ÔºåËØªÂà∞ÁöÑÊï∞ÊçÆÊâçÊòØÂÜôÂêéÁöÑÊï∞ÊçÆÔºåÊâÄ‰ª•ÊòØÂº±‰∏ÄËá¥ÊÄß„ÄÇËá≥‰∫é jdk1.8ËÄåË®ÄÔºåÊ≠§Êó∂ÁöÑÈîÅÂ∑≤ÁªèÊòØË°åÁ≤íÂ∫¶‰∫ÜÔºåÂπ∂‰∏îËØªÊï∞ÊçÆÊó∂‰ΩøÁî®‰∫Ü CASÔºåÂº∫Ë°åÂéªËØªÂà∞ volatileÁöÑÂÄºÔºåÊâÄ‰ª•Ê≠§Êó∂Â∫îËØ•ÊòØÂº∫‰∏ÄËá¥ÊÄßÁöÑ„ÄÇ HashTableÁî±‰∫éËøô‰∏™Âü∫Êú¨Â∑≤ÁªèË¢´Ê∑òÊ±∞‰∫Ü‚Ä¶ÊâÄ‰ª•Â∞±‰∏çÂÜçËøõË°åÁ≥ªÁªüÁöÑÊ∫êÁ†ÅÂàÜÊûê‰∫Ü„ÄÇ ÂÖ∂ÂÆû HashTable Ê∫ê‰ª£Á†ÅÂè™Êúâ1000Â§öË°åÁÇπÔºåÊ∫ê‰ª£Á†ÅÂæàÂ∞ëÔºå‰πüÂü∫Êú¨‰∏äÊòØ HashMap ÁöÑÂéüÊù•ÁöÑÁâàÊú¨Âä†‰∏ä synchronized ÂÖ≥ÈîÆÂ≠óÔºåÊØèÊ¨°ÈÉΩÊòØÈîÅÂÆöÊï¥‰∏™ÂìàÂ∏åË°®ÔºåÊâÄ‰ª•ÊïàÁéáÈùûÂ∏∏‰Ωé‰∏ãÔºåÊ≥®ÊÑèÂìà~ Ë∑ü HashMap ÁöÑÂå∫Âà´‰∏ªË¶ÅÂÖ∂Âü∫Êú¨ÂÖÉÁ¥†ËøòÊòØ EntryÔºåÁÑ∂ÂêéÈªòËÆ§ÂàùÂßãÂÄºÊòØ 11Ôºå‰∏çÊòØ 2 ÁöÑÂπÇÊ¨°ÊñπÔºåÂêåÊó∂Êâ©ÂÆπÁöÑÊó∂ÂÄô‰πü‰∏çÊòØÊåâ 2 ÁöÑÂπÇÊ¨°ÊñπËøõË°åÊâ©ÂÆπÁöÑÔºåËÄåÊòØ 2 ÁöÑÂπÇÊ¨°Êñπ + 1Êù•Êâ©ÂÆπÁöÑÔºåÂπ∂‰∏îÔºåÂÖ∂Êâ∞Âä®ÂáΩÊï∞‰æùÊóßÊòØÂéüÊù•ÁöÑ jdk7ÁöÑÊâ∞Âä®ÂáΩÊï∞ÊñπÂºèÔºåÂç≥Êâ∞Âä®4Ê¨°ÔºåÊïàÁéá‰Ωé‰∏ãÔºåÂèñ‰Ωô‰πüÊòØÁõ¥Êé•Âèñ‰ΩôÔºåÂõ†‰∏∫ÂÖ∂ÊÄªÊï∞‰∏çÊòØ 2 ÁöÑÂπÇÊ¨°ÊñπÔºåÊïÖ‰∏çËÉΩÁõ¥Êé•Áõ∏‰∏éÂæóÂà∞ÂìàÂ∏åÊ°∂ÁöÑ‰∏ãÊ†áÂÄº„ÄÇ ‰∏éHashMapÂå∫Âà´ ÂÆûÁé∞ÊñπÂºè‰∏ç‰∏ÄÊ†∑ HashtableÁªßÊâøËá™ Dictionary Á±ªÔºåËÄå HashMap ÁªßÊâøËá™ AbstractMap Á±ª„ÄÇ‰ΩÜ‰∫åËÄÖÈÉΩÂÆûÁé∞‰∫Ü Map Êé•Âè£„ÄÇ 12public class Hashtable&lt;K,V&gt; extends Dictionary&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable 12public class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable Á∫øÁ®ãÂÆâÂÖ®ÊÄß‰∏çÂêå Hashtable ‰∏≠ÁöÑÊñπÊ≥ïÊòØSynchronizeÁöÑÔºåËÄåHashMap‰∏≠ÁöÑÊñπÊ≥ïÂú®Áº∫ÁúÅÊÉÖÂÜµ‰∏ãÊòØÈùûSynchronizeÁöÑ„ÄÇ ÊòØÂê¶Êèê‰æõcontainsÊñπÊ≥ïHashMapÊääHashtableÁöÑcontainsÊñπÊ≥ïÂéªÊéâ‰∫ÜÔºåÊîπÊàêcontainsValueÂíåcontainsKeyÔºåÂõ†‰∏∫containsÊñπÊ≥ïÂÆπÊòìËÆ©‰∫∫ÂºïËµ∑ËØØËß£„ÄÇHashtableÂàô‰øùÁïô‰∫ÜcontainsÔºåcontainsValueÂíåcontainsKey‰∏â‰∏™ÊñπÊ≥ïÔºåÂÖ∂‰∏≠containsÂíåcontainsValueÂäüËÉΩÁõ∏Âêå„ÄÇ keyÂíåvalueÊòØÂê¶ÂÖÅËÆ∏nullÂÄº „ÄêÈáçÁÇπÔºÅÔºÅÔºÅÂèØ‰ª•ÂºïÁî≥Âà∞ fail-fast Âíå fail-safe Êú∫Âà∂ÔºåËøõËÄåÂºïÂèëÂà∞Â§öÁ∫øÁ®ã‰∏ä„Äë Ëø≠‰ª£Âô®‰∏çÂêå HashMap ‰∏≠ÁöÑ Iterator Ëø≠‰ª£Âô®ÊòØ fail-fast ÁöÑÔºåËÄå Hashtable ÁöÑ Enumerator ‰∏çÊòØ fail-fast ÁöÑ„ÄÇ ÊâÄ‰ª•ÔºåÂΩìÂÖ∂‰ªñÁ∫øÁ®ãÊîπÂèò‰∫ÜHashMap ÁöÑÁªìÊûÑÔºåÂ¶ÇÔºöÂ¢ûÂà†ÔºåÂ∞Ü‰ºöÊäõÂá∫ConcurrentModificationException ÂºÇÂ∏∏ÔºåËÄå Hashtable Âàô‰∏ç‰ºö„ÄÇ[fail-fast Âíå fail-safe] Êâ©ÂÆπÊú∫Âà∂‰∏çÂêå ÂΩìÁé∞ÊúâÂÆπÈáèÂ§ß‰∫éÊÄªÂÆπÈáè * Ë¥üËΩΩÂõ†Â≠êÊó∂ÔºåHashMap Êâ©ÂÆπËßÑÂàô‰∏∫ÂΩìÂâçÂÆπÈáèÁøªÂÄçÔºåHashtable Êâ©ÂÆπËßÑÂàô‰∏∫ÂΩìÂâçÂÆπÈáèÁøªÂÄç + 1„ÄÇ ÂàùÂßãÂåñÂÆπÈáè‰∏çÂêå HashMap ÁöÑÂàùÂßãÂÆπÈáè‰∏∫Ôºö16ÔºåHashtable ÂàùÂßãÂÆπÈáè‰∏∫Ôºö11Ôºå‰∏§ËÄÖÁöÑË¥üËΩΩÂõ†Â≠êÈªòËÆ§ÈÉΩÊòØÔºö0.75„ÄÇ HashÂÄºËé∑Âèñ‰∏ç‰∏ÄÊ†∑ HashMap ÂÜÖÈÉ®‰ΩøÁî®hash(Object key)Êâ∞Âä®ÂáΩÊï∞ÂØπ key ÁöÑ hashCode ËøõË°åÊâ∞Âä®Âêé‰Ωú‰∏∫ hash ÂÄº„ÄÇHashTable ÊòØÁõ¥Êé•‰ΩøÁî® key ÁöÑ hashCode() ËøîÂõûÂÄº‰Ωú‰∏∫ hash ÂÄº„ÄÇ HashSet &amp; TreeSet &amp; LinkedHashSetSet ÁöÑÂ∫ïÂ±ÇÂÆûÁé∞Â∞±ÊòØ MapÔºåÂîØ‰∏ÄÁöÑÂå∫Âà´Â∞±ÊòØ Set Â≠òÁöÑÂÄºÂ∞±ÊòØ Map ÁöÑ keyÔºåvalue ÂÄºÊòØ‰∏Ä‰∏™Âõ∫ÂÆöÂÄºÔºåÊâÄ‰ª•‚Ä¶Â∞±‰∏çÁî®ÂàÜÊûêÂï¶ÔºÅÔºÅÔºÅ Êúâ‰∏™Ê≥®ÊÑèÁÇπÂìà~~ TreeMap Áî±‰∫é key ‰∏çÂèØ‰ª•‰∏∫ nullÔºåvalue ÂèØ‰ª•‰∏∫null„ÄÇÊâÄ‰ª•Âú® TreeSet ‰∏≠ÔºåÂ∞±‰∏çËÉΩÊèíÂÖ• null ÂÖÉÁ¥†„ÄÇ Áõ∏ÂÖ≥Áü•ËØÜÁÇπfail-fast Âíå fail-safe Êú∫Âà∂‰∏ÄÔºöÂø´ÈÄüÂ§±Ë¥•Ôºàfail‚ÄîfastÔºâ Âú®Áî®Ëø≠‰ª£Âô®ÈÅçÂéÜ‰∏Ä‰∏™ÈõÜÂêàÂØπË±°Êó∂ÔºåÂ¶ÇÊûúÈÅçÂéÜËøáÁ®ã‰∏≠ÂØπÈõÜÂêàÂØπË±°ÁöÑÂÜÖÂÆπËøõË°å‰∫Ü‰øÆÊîπÔºàÂ¢ûÂä†„ÄÅÂà†Èô§„ÄÅ‰øÆÊîπÔºâÔºåÂàô‰ºöÊäõÂá∫Concurrent Modification Exception„ÄÇ ÂéüÁêÜÔºöËø≠‰ª£Âô®Âú®ÈÅçÂéÜÊó∂Áõ¥Êé•ËÆøÈóÆÈõÜÂêà‰∏≠ÁöÑÂÜÖÂÆπÔºåÂπ∂‰∏îÂú®ÈÅçÂéÜËøáÁ®ã‰∏≠‰ΩøÁî®‰∏Ä‰∏™ modCount ÂèòÈáè„ÄÇÈõÜÂêàÂú®Ë¢´ÈÅçÂéÜÊúüÈó¥Â¶ÇÊûúÂÜÖÂÆπÂèëÁîüÂèòÂåñÔºåÂ∞±‰ºöÊîπÂèòmodCountÁöÑÂÄº„ÄÇÊØèÂΩìËø≠‰ª£Âô®‰ΩøÁî®hashNext()/next()ÈÅçÂéÜ‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†‰πãÂâçÔºåÈÉΩ‰ºöÊ£ÄÊµãmodCountÂèòÈáèÊòØÂê¶‰∏∫expectedmodCountÂÄºÔºåÊòØÁöÑËØùÂ∞±ËøîÂõûÈÅçÂéÜÔºõÂê¶ÂàôÊäõÂá∫ÂºÇÂ∏∏ÔºåÁªàÊ≠¢ÈÅçÂéÜ„ÄÇ Ê≥®ÊÑèÔºöËøôÈáåÂºÇÂ∏∏ÁöÑÊäõÂá∫Êù°‰ª∂ÊòØÊ£ÄÊµãÂà∞ modCountÔºÅ=expectedmodCount Ëøô‰∏™Êù°‰ª∂„ÄÇÂ¶ÇÊûúÈõÜÂêàÂèëÁîüÂèòÂåñÊó∂‰øÆÊîπmodCountÂÄºÂàöÂ•ΩÂèàËÆæÁΩÆ‰∏∫‰∫ÜexpectedmodCountÂÄºÔºåÂàôÂºÇÂ∏∏‰∏ç‰ºöÊäõÂá∫„ÄÇÂõ†Ê≠§Ôºå‰∏çËÉΩ‰æùËµñ‰∫éËøô‰∏™ÂºÇÂ∏∏ÊòØÂê¶ÊäõÂá∫ËÄåËøõË°åÂπ∂ÂèëÊìç‰ΩúÁöÑÁºñÁ®ãÔºåËøô‰∏™ÂºÇÂ∏∏Âè™Âª∫ËÆÆÁî®‰∫éÊ£ÄÊµãÂπ∂Âèë‰øÆÊîπÁöÑbug„ÄÇ Âú∫ÊôØÔºöjava.utilÂåÖ‰∏ãÁöÑÈõÜÂêàÁ±ªÈÉΩÊòØÂø´ÈÄüÂ§±Ë¥•ÁöÑÔºå‰∏çËÉΩÂú®Â§öÁ∫øÁ®ã‰∏ãÂèëÁîüÂπ∂Âèë‰øÆÊîπ„ÄÇ ‰∫åÔºöÂÆâÂÖ®Â§±Ë¥•Ôºàfail‚ÄîsafeÔºâ ÈááÁî®ÂÆâÂÖ®Â§±Ë¥•Êú∫Âà∂ÁöÑÈõÜÂêàÂÆπÂô®ÔºåÂú®ÈÅçÂéÜÊó∂‰∏çÊòØÁõ¥Êé•Âú®ÈõÜÂêàÂÜÖÂÆπ‰∏äËÆøÈóÆÁöÑÔºåËÄåÊòØÂÖàÂ§çÂà∂ÂéüÊúâÈõÜÂêàÂÜÖÂÆπÔºåÂú®Êã∑Ë¥ùÁöÑÈõÜÂêà‰∏äËøõË°åÈÅçÂéÜ„ÄÇ ÂéüÁêÜÔºöÁî±‰∫éËø≠‰ª£Êó∂ÊòØÂØπÂéüÈõÜÂêàÁöÑÊã∑Ë¥ùËøõË°åÈÅçÂéÜÔºåÊâÄ‰ª•Âú®ÈÅçÂéÜËøáÁ®ã‰∏≠ÂØπÂéüÈõÜÂêàÊâÄ‰ΩúÁöÑ‰øÆÊîπÂπ∂‰∏çËÉΩË¢´Ëø≠‰ª£Âô®Ê£ÄÊµãÂà∞ÔºåÊâÄ‰ª•‰∏ç‰ºöËß¶ÂèëConcurrent Modification Exception„ÄÇ Áº∫ÁÇπÔºöÂü∫‰∫éÊã∑Ë¥ùÂÜÖÂÆπÁöÑ‰ºòÁÇπÊòØÈÅøÂÖç‰∫ÜConcurrent Modification ExceptionÔºå‰ΩÜÂêåÊ†∑Âú∞ÔºåËø≠‰ª£Âô®Âπ∂‰∏çËÉΩËÆøÈóÆÂà∞‰øÆÊîπÂêéÁöÑÂÜÖÂÆπÔºåÂç≥ÔºöËø≠‰ª£Âô®ÈÅçÂéÜÁöÑÊòØÂºÄÂßãÈÅçÂéÜÈÇ£‰∏ÄÂàªÊãøÂà∞ÁöÑÈõÜÂêàÊã∑Ë¥ùÔºåÂú®ÈÅçÂéÜÊúüÈó¥ÂéüÈõÜÂêàÂèëÁîüÁöÑ‰øÆÊîπËø≠‰ª£Âô®ÊòØ‰∏çÁü•ÈÅìÁöÑ„ÄÇ Âú∫ÊôØÔºöjava.util.concurrentÂåÖ‰∏ãÁöÑÂÆπÂô®ÈÉΩÊòØÂÆâÂÖ®Â§±Ë¥•ÔºåÂèØ‰ª•Âú®Â§öÁ∫øÁ®ã‰∏ãÂπ∂Âèë‰ΩøÁî®ÔºåÂπ∂Âèë‰øÆÊîπ„ÄÇ Âø´ÈÄüÂ§±Ë¥•ÂíåÂÆâÂÖ®Â§±Ë¥•ÊòØÂØπËø≠‰ª£Âô®ËÄåË®ÄÁöÑ„ÄÇ Âø´ÈÄüÂ§±Ë¥•ÔºöÂΩìÂú®ÈÅçÂéÜ‰∏Ä‰∏™ÈõÜÂêàÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÊúâÂè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãÂú®‰øÆÊîπËøô‰∏™ÈõÜÂêàÔºåÂ∞±‰ºöÊäõÂá∫ConcurrentModificationÂºÇÂ∏∏Ôºåjava.util‰∏ãÈÉΩÊòØÂø´ÈÄüÂ§±Ë¥•„ÄÇ ÂÆâÂÖ®Â§±Ë¥•ÔºöÂú®ÈÅçÂéÜÊó∂‰ºöÂú®ÈõÜÂêà‰∫åÂ±ÇÂÅö‰∏Ä‰∏™Êã∑Ë¥ùÔºåÊâÄ‰ª•Âú®‰øÆÊîπÈõÜÂêà‰∏äÂ±ÇÂÖÉÁ¥†‰∏ç‰ºöÂΩ±Âìç‰∏ãÂ±Ç„ÄÇÂú®java.util.concurrent‰∏ãÈÉΩÊòØÂÆâÂÖ®Â§±Ë¥•„ÄÇ Á∫øÁ®ãÂÆâÂÖ®ËØ¶Ëß£ÂèÇËÄÉÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢ò]]></content>
  </entry>
  <entry>
    <title><![CDATA[‰∫åÂèâÊ†ë‰∏ìÈ¢òÊÄªÁªì]]></title>
    <url>%2F2020%2F01%2F10%2F%E4%BA%8C%E5%8F%89%E6%A0%91%E4%B8%93%E9%A2%98%E9%83%A8%E5%88%86.html</url>
    <content type="text"><![CDATA[ÂõõÁßçÈÅçÂéÜÂÖàÂ∫è„ÄÅ‰∏≠Â∫è„ÄÅÂêéÂ∫èÈÅçÂéÜÔºåÈùûÂ∏∏ÁÆÄÂçïÔºÅÊé•‰∏ãÊù•Êàë‰ºöÁî®‰∏ÄÁßçÈÄöÁî®ÁöÑÊñπÂºèÂÆåÊàêËøô‰∏âÁßçÈÅçÂéÜÂìüÔºÅ ‰øùËØÅ‰Ω†ÁúãÂÆåËÉΩËøÖÈÄüÊâãÂÜô‰∏âÁßçÈÅçÂéÜÁöÑÈùûÈÄíÂΩíÔºÅ ÂÖàÂ∫èÈÅçÂéÜÈÄíÂΩí1234567891011121314class Solution &#123; public List&lt;Integer&gt; preorderTraversal(TreeNode root) &#123; List&lt;Integer&gt; result = new LinkedList&lt;&gt;(); preorderHelper(root, result); return result; &#125; private void preorderHelper(TreeNode root, List&lt;Integer&gt; result) &#123; if (root == null) return; result.add(root.val); // ËÆøÈóÆÊ†πËäÇÁÇπ preorderHelper(root.left, result); // ÈÄíÂΩíÈÅçÂéÜÂ∑¶Â≠êÊ†ë preorderHelper(root.right, result); //ÈÄíÂΩíÈÅçÂéÜÂè≥Â≠êÊ†ë &#125;&#125; ÈùûÈÄíÂΩí12345678910111213141516171819202122232425/** * ÂÜçÂÜô‰∏Ä‰∏™ÈùûÈÄíÂΩíÁöÑ * Áªü‰∏ÄÂÖàÂ∫è‰∏≠Â∫èÂêéÂ∫èÁöÑÂÜôÊ≥ï * ‰ªéÊ≠§ÂéãÊ†àÊó∂ÂÜçÊó†Â∑¶Â≠êÊ†ëÂéãÊ†àÔºåÂÖ®ÈÉ®ÈÉΩÊòØÊ†πËäÇÁÇπÂíåÂÖ∂Âè≥Â≠êÊ†ëÔºÅ * @param root */private List&lt;Integer&gt; preorderTraversalByIteration(TreeNode root) &#123; List&lt;Integer&gt; res = new ArrayList&lt;&gt;(); //ÂæóÁî®‰∏Ä‰∏™Ê†àÊù•ËøõË°åÂ§ÑÁêÜ Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;(); TreeNode cur = root; while(cur != null || !stack.isEmpty())&#123; while (cur != null)&#123; //ÂÖàÊääÊ†πËäÇÁÇπÂä†ÂÖ•Âà∞listÔºåÁÑ∂ÂêéÊääÊâÄÊúâÁöÑÊ†πËäÇÁÇπÂä†ÂÖ• //Â∑¶ËäÇÁÇπÂÖ∂ÂÆû‰πüÂ∞±ÊòØÂ≠êÊ†ëÁöÑÊ†πËäÇÁÇπ res.add(cur.val); stack.push(cur); cur = cur.left; &#125; //ÁÑ∂ÂêéÊãøÂà∞Ê†πËäÇÁÇπÁöÑÂè≥Â≠êÊ†ëÔºåËøõË°åÈÅçÂéÜ cur = stack.pop(); cur = cur.right; &#125; return res;&#125; Tip: ÊàëËøôÈáåÂÜçÊãìÂ±ï‰∏ÄÁßçÈùûÈÄíÂΩíÁöÑÊÉ≥Ê≥ïÂêß‚Ä¶‰ΩÜÊòØÊàëËßâÂæóËøôÁßçÊÉ≥Ê≥ï‰∏çÊòØÂæàÂ•ΩÔºåÊ≤°ÊúâÈÄöÁî®ÁöÑÈùûÈÄíÂΩíÊÄùÊÉ≥ÁÆÄÂçïÔºÅÂº∫ÁÉàÂª∫ËÆÆ‰ΩøÁî®‰∏äÈù¢ÁöÑÈùûÈÄíÂΩíÊÄùÊÉ≥ÔºÅÔºÅÔºÅ Ëá≥‰∫é‰∏∫‰ΩïÈùûË¶ÅÊèêËøôÁßçÊÄùÊÉ≥ÊçèÔºåÂéüÂõ†Â∞±ÊòØ Ê†à Â¶ÇÊûúÊç¢Êàê ÈòüÂàóÔºåÂ∑¶Âè≥ËäÇÁÇπÈ°∫Â∫èË∞É‰∏Ä‰∏ãÔºåÂ∞±ÊòØÂ±ÇÂ∫èÈÅçÂéÜ‰∫ÜÔºÅ ÊÄùÊÉ≥Ôºö ‰∏äÈù¢ÁöÑÈùûÈÄíÂΩíÁöÑÂÅöÊ≥ïÊòØÊää‰∏ÄÊ£µÊ†ëÁúãÂÅöÂè™ÊúâÊ†πËäÇÁÇπÂíåÂè≥ËäÇÁÇπÔºåÂÖàÂÖ®ÈÉ®ÊääÊ†πËäÇÁÇπËØªÂÆå‰∫ÜÔºåÂÜçÂéªËØªÂÖ∂Âè≥ËäÇÁÇπÔºåËøôÊ†∑‰πüÂ∞±ÂÅöÂà∞‰∫Ü Ê†π - Â∑¶ - Âè≥ ‰∏ãÈù¢Ë¶ÅËÆ≤ÁöÑÈùûÈÄíÂΩíÁöÑÂÅöÊ≥ïÊòØ ÂÖàËØªÊ†πËäÇÁÇπÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂Âä†ÂÖ•Ê†àÔºåÁÑ∂ÂêéÂè™Ë¶ÅÊ†àÈùûÁ©∫ÔºåÂ∞±ÂºπÊ†àÔºåÂ∞ÜÂÖ∂Âä†ÂÖ•ÈúÄË¶ÅËøîÂõûÁöÑÂàóË°®‰∏≠ÔºåÁÑ∂ÂêéÂÖàÂ∞ÜÂÖ∂Âè≥Â≠êÊ†ëËäÇÁÇπÂä†ÂÖ•Âà∞Ê†à‰∏≠ÔºåÁÑ∂ÂêéÂ∞ÜÂ∑¶Â≠êÊ†ëËäÇÁÇπÂä†ÂÖ•Âà∞Ê†à‰∏≠ÔºåÊ≥®ÊÑèÔºåËøôÈáåÊòØÂÖàÂè≥Â≠êÊ†ëÔºåÂêéÂ∑¶Â≠êÊ†ëÔºåÂõ†‰∏∫Ê†àÊòØÂêéËøõÂÖàÂá∫ÔºÅ‰∏ã‰∏ÄÊ≠•Â∞±ÊòØÂ∑¶Â≠êÊ†ëÂá∫Ê†àÔºåÂ∞ÜÂÖ∂Âä†ÂÖ•ÂàóË°®‰∏≠„ÄÇ 12345678910111213141516class Solution &#123; public List&lt;Integer&gt; preorderTraversal(TreeNode root) &#123; List&lt;Integer&gt; result = new LinkedList&lt;&gt;(); if (root == null) return result; Stack&lt;TreeNode&gt; toVisit = new Stack&lt;&gt;(); toVisit.push(root); TreeNode cur; while (!toVisit.isEmpty()) &#123; cur = toVisit.pop(); result.add(cur.val); // ËÆøÈóÆÊ†πËäÇÁÇπ if (cur.right != null) toVisit.push(cur.right); // Âè≥ËäÇÁÇπÂÖ•Ê†à if (cur.left != null) toVisit.push(cur.left); // Â∑¶ËäÇÁÇπÂÖ•Ê†à &#125; return result; &#125;&#125; ‰∏≠Â∫èÈÅçÂéÜÈÄíÂΩí1234567891011121314class Solution &#123; public List&lt;Integer&gt; preorderTraversal(TreeNode root) &#123; List&lt;Integer&gt; result = new LinkedList&lt;&gt;(); preorderHelper(root, result); return result; &#125; private void preorderHelper(TreeNode root, List&lt;Integer&gt; result) &#123; if (root == null) return; preorderHelper(root.left, result); // ÈÄíÂΩíÈÅçÂéÜÂ∑¶Â≠êÊ†ë result.add(root.val); // ËÆøÈóÆÊ†πËäÇÁÇπ preorderHelper(root.right, result); //ÈÄíÂΩíÈÅçÂéÜÂè≥Â≠êÊ†ë &#125;&#125; ÈùûÈÄíÂΩí123456789101112131415161718private List&lt;Integer&gt; inorderTraversalByIteration(TreeNode root) &#123; List&lt;Integer&gt; res = new ArrayList&lt;&gt;(); Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;(); TreeNode cur = root; while(cur != null || !stack.isEmpty())&#123; while (cur != null)&#123; //Â∑¶ËäÇÁÇπÂÖ∂ÂÆû‰πüÂ∞±ÊòØÂ≠êÊ†ëÁöÑÊ†πËäÇÁÇπ stack.push(cur); cur = cur.left; &#125; //‰ªéÊúÄÂ∫ï‰∏ãÁöÑÊ†πËäÇÁÇπÂºÄÂßãÔºåÊîæÂÖ•ÂàóË°® cur = stack.pop(); res.add(cur.val); //ÁÑ∂ÂêéÊãøÂà∞Ê†πËäÇÁÇπÁöÑÂè≥Â≠êÊ†ëÔºåËøõË°åÈÅçÂéÜ cur = cur.right; &#125; return res;&#125; ÂêéÂ∫èÈÅçÂéÜÈÄíÂΩí1234567891011121314class Solution &#123; public List&lt;Integer&gt; preorderTraversal(TreeNode root) &#123; List&lt;Integer&gt; result = new LinkedList&lt;&gt;(); preorderHelper(root, result); return result; &#125; private void preorderHelper(TreeNode root, List&lt;Integer&gt; result) &#123; if (root == null) return; preorderHelper(root.left, result); // ÈÄíÂΩíÈÅçÂéÜÂ∑¶Â≠êÊ†ë preorderHelper(root.right, result); //ÈÄíÂΩíÈÅçÂéÜÂè≥Â≠êÊ†ë result.add(root.val); // ËÆøÈóÆÊ†πËäÇÁÇπ &#125;&#125; ÈùûÈÄíÂΩíÂêéÂ∫èÈùûÈÄíÂΩíÁõ∏ÂØπÂâç‰∏§‰∏™ÈÅçÂéÜÁöÑÈùûÈÄíÂΩíÈúÄË¶Å‰∏Ä‰∏™Â∞èÊäÄÂ∑ßÔºÅ ÂêéÂ∫èÊòØ Â∑¶ - Âè≥ - Ê†πÔºåÂèçËøáÊù•Â∞±ÊòØÊ†π - Âè≥ - Â∑¶,ÈÇ£ÂÖ∂ÂÆûË∑üÂÖàÂ∫èÂü∫Êú¨Â∞±‰∏ÄÊ®°‰∏ÄÊ†∑‰∫ÜÔºåÂÖàÂ∫èÊòØÊ†π - Â∑¶ - Âè≥ÔºåÊâÄ‰ª•Âè™ÈúÄË¶ÅÂú®ÂÖàÂ∫èÁöÑÈùûÈÄíÂΩí‰∏≠ Êîπ‰∏§Ë°å‰ª£Á†Å + Âä†‰∏ÄË°å‰ª£Á†Å Â∞±ÂÆåÊàê‰∫ÜÔºÅ 12345678910111213141516private List&lt;Integer&gt; postorderTraversalByIteration(TreeNode root)&#123; List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); TreeNode cur = root; Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;(); while(cur != null || !stack.isEmpty())&#123; while(cur != null)&#123; list.add(cur.val); stack.push(cur); cur = cur.right; &#125; cur = stack.pop(); cur = cur.left; &#125; Collections.reverse(list); return list;&#125; Â±ÇÂ∫èÈÅçÂéÜÂ±ÇÂ∫èÊòØ‰∏çÊòØËøòÊúâ‰∏Ä‰∏™ÂêçÂ≠ó Âè´ BFS ÈÄíÂΩíËøô‰∏™Á´üÁÑ∂Êó∂Èó¥ÂíåÁ©∫Èó¥ÂáªË¥•‰∫Ü100%ÁöÑ‰∫∫‚Ä¶ Ëé´ÂêçÊúâÁÇπÂºÄÂøÉÂïä 123456789101112131415161718192021public List&lt;List&lt;Integer&gt;&gt; levelOrder(Node root) &#123; if (root == null) return res; List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;(); helper(root, 0, res); return res;&#125;private void helper(Node root, int depth, List&lt;List&lt;Integer&gt;&gt; res) &#123; if (root == null) return; //Âà§Êñ≠ÊòØÂê¶ÊòØÊñ∞ÁöÑ‰∏ÄÂ±Ç if (depth + 1 &gt; res.size()) &#123; res.add(new ArrayList&lt;&gt;()); &#125; res.get(depth).add(root.val); //Â§ÑÁêÜÂ≠êËäÇÁÇπ for (Node node : root.children) &#123; if (node != null) &#123; helper(node, depth + 1, res); &#125; &#125;&#125; ÈùûÈÄíÂΩí‰∏äÈù¢ËÆ≤‰∫Ü‰∏ÄÁßçÁî®ÈòüÂàóÂÆûÁé∞ÁöÑÈùûÈÄíÂΩíÊÄùÊÉ≥ 1234567891011121314public static List&lt;Integer&gt; levelOrder(TreeNode root) &#123; List&lt;Integer&gt; result = new LinkedList&lt;&gt;(); if (root == null) return result; Queue&lt;TreeNode&gt; toVisit = new ArrayDeque&lt;&gt;(); toVisit.add(root); TreeNode cur; while (!toVisit.isEmpty()) &#123; cur = toVisit.poll(); result.add(cur.val); // ËÆøÈóÆÊ†πËäÇÁÇπ if (cur.left != null) toVisit.add(cur.left); // Â∑¶ËäÇÁÇπÂÖ•ÈòüÂàó if (cur.right != null) toVisit.add(cur.right); // Âè≥ËäÇÁÇπÂÖ•ÈòüÂàó &#125; return result;&#125; 1234567891011121314151617181920212223242526272829/** * ÈùûÈÄíÂΩíÊñπÊ≥ï‰∫åÔºåËøîÂõûÂÄº‰∏ç‰∏ÄÊ†∑ * @param root * @return */public List&lt;List&lt;Integer&gt;&gt; levelOrderBy(TreeNode root) &#123; List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;(); if (root == null) return res; Queue&lt;TreeNode&gt; queue = new ArrayDeque&lt;&gt;(); queue.add(root); TreeNode cur; while (!queue.isEmpty()) &#123; List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); int pre_number = queue.size(); while(pre_number &gt; 0)&#123; cur = queue.poll(); pre_number--; list.add(cur.val); if (cur.left != null)&#123; queue.add(cur.left); // Â∑¶ËäÇÁÇπÂÖ•ÈòüÂàó &#125; if (cur.right != null) &#123; queue.add(cur.right); // Âè≥ËäÇÁÇπÂÖ•ÈòüÂàó &#125; &#125; res.add(list); &#125; return res;&#125; Áõ∏ÂÖ≥È¢òÂûã‰∫åÂèâÊ†ëÁöÑÂè≥ËßÜÂõæÈ¢òÁõÆÁªôÂÆö‰∏ÄÊ£µ‰∫åÂèâÊ†ëÔºåÊÉ≥Ë±°Ëá™Â∑±Á´ôÂú®ÂÆÉÁöÑÂè≥‰æßÔºåÊåâÁÖß‰ªéÈ°∂ÈÉ®Âà∞Â∫ïÈÉ®ÁöÑÈ°∫Â∫èÔºåËøîÂõû‰ªéÂè≥‰æßÊâÄËÉΩÁúãÂà∞ÁöÑËäÇÁÇπÂÄº„ÄÇ Á§∫‰æã: 123456789ËæìÂÖ•: [1,2,3,null,5,null,4]ËæìÂá∫: [1, 3, 4]Ëß£Èáä: 1 &lt;--- / \2 3 &lt;--- \ \ 5 4 &lt;--- ÊÄùË∑Ø Â±ÇÂ∫èÈÅçÂéÜ BFS„ÄÇÂÖàÂÜôÂá∫ÂèåÈáç list ÁöÑÂ±ÇÂ∫èÈÅçÂéÜÔºåÁÑ∂ÂêéÂú®ÊØè‰∏Ä‰∏™ÂÜÖÂ±Çlist‰∏≠ÊãøÂà∞ÊúÄÂêé‰∏Ä‰∏™ÂÄºÂç≥ÂèØÔºõ Ê∑±Â∫¶ÈÅçÂéÜ DFS„ÄÇÈÄíÂΩí DFSÔºå‰ªéÂè≥ÂêëÂ∑¶ÔºåÊãøÂà∞Á¨¨‰∏Ä‰∏™Êï∞Âç≥ÂèØ„ÄÇ ÂÆûÁé∞ BFS 123456789101112131415161718192021222324252627282930313233343536373839404142434445/** * Definition for a binary tree node. * public class TreeNode &#123; * int val; * TreeNode left; * TreeNode right; * TreeNode(int x) &#123; val = x; &#125; * &#125; */class Solution &#123; public List&lt;Integer&gt; rightSideView(TreeNode root) &#123; List&lt;List&lt;Integer&gt;&gt; lists = levelOrderBy(root); List&lt;Integer&gt; res = new ArrayList(); for(List&lt;Integer&gt; list : lists)&#123; res.add(list.get(list.size()-1)); &#125; return res; &#125;public List&lt;List&lt;Integer&gt;&gt; levelOrderBy(TreeNode root) &#123; List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;(); if (root == null) return res; Queue&lt;TreeNode&gt; queue = new ArrayDeque&lt;&gt;(); queue.add(root); TreeNode cur; while (!queue.isEmpty()) &#123; List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); int pre_number = queue.size(); while(pre_number &gt; 0)&#123; cur = queue.poll(); pre_number--; list.add(cur.val); if (cur.left != null)&#123; queue.add(cur.left); // Â∑¶ËäÇÁÇπÂÖ•ÈòüÂàó &#125; if (cur.right != null) &#123; queue.add(cur.right); // Âè≥ËäÇÁÇπÂÖ•ÈòüÂàó &#125; &#125; res.add(list); &#125; return res;&#125;&#125; DFS 1234567891011121314151617class Solution &#123; public List&lt;Integer&gt; rightSideView(TreeNode root) &#123; List&lt;Integer&gt; res = new ArrayList&lt;&gt;(); solve(root, 0, res); return res; &#125; public void solve(TreeNode root, int level, List&lt;Integer&gt; res) &#123; if (root != null) &#123; if (res.size() == level) &#123; res.add(root.val); &#125; solve(root.right, level + 1, res); solve(root.left, level + 1, res); &#125; &#125;&#125; ÂØπÁß∞‰∫åÂèâÊ†ëÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™‰∫åÂèâÊ†ëÔºåÊ£ÄÊü•ÂÆÉÊòØÂê¶ÊòØÈïúÂÉèÂØπÁß∞ÁöÑ„ÄÇ ‰æãÂ¶ÇÔºå‰∫åÂèâÊ†ë [1,2,2,3,4,4,3] ÊòØÂØπÁß∞ÁöÑ„ÄÇ 12345 1 / \ 2 2 / \ / \3 4 4 3 ‰ΩÜÊòØ‰∏ãÈù¢Ëøô‰∏™ [1,2,2,null,3,null,3] Âàô‰∏çÊòØÈïúÂÉèÂØπÁß∞ÁöÑ: 12345 1 / \2 2 \ \ 3 3 ÊÄùË∑Ø ÂÖàËÆ≤‰∏Ä‰∏ãËá™Â∑±ÁöÑÊÄùË∑Ø: Âà©Áî®Â±ÇÂ∫èÈùûÈÄíÂΩíÔºåÁî®ÂèåÂ±ÇListÂ≠òÂÇ®Ê†ëÁöÑËäÇÁÇπÔºåÊØè‰∏ÄÂ±ÇÂ≠òÂÖ•‰∏Ä‰∏™ÂçïÂ±ÇList‰∏≠ÔºåÁÑ∂ÂêéÂçïÂ±ÇListÂèØ‰ª•ÈááÁî®‰∫åÂàÜÂà§Êñ≠ÊòØÂê¶ÂØπÁß∞ÔºÅ Á≠îÊ°àÊÄùË∑ØÔºöÊ†ëÁöÑÂ§çÂà∂ÔºåËøô‰∏™ÊÉ≥Ê≥ïÂæàniceÔºÅÂ§çÂà∂ÂéüÊ†ëÔºåÂà§Êñ≠ÂÖ∂Â∑¶Â≠êÊ†ëËäÇÁÇπÊòØÂê¶ÂíåÂè≥Â≠êÊ†ëËäÇÁÇπÁõ∏Âêå‰∏îÂà§Êñ≠ÂÖ∂Â∑¶Â≠êÊ†ëÁöÑÂ∑¶ÊòØÂê¶Á≠â‰∫éÂè≥Â≠êÊ†ëÁöÑÂè≥ÔºåÂ∑¶Â≠êÊ†ëÁöÑÂè≥ÊòØÂê¶Á≠â‰∫éÂè≥Â≠êÊ†ëÁöÑÂ∑¶„ÄÇÂú®ÈùûÈÄíÂΩíÁöÑÂÜôÊ≥ï‰∏≠ÔºåÊ†ëÁöÑÂ§çÂà∂ËøôÁßçÊÄùÊÉ≥‰ΩìÁé∞ÁöÑÊõ¥Âä†ÊòéÊòæÔºåËøô‰∏™Â∞±ÊòØÂÖ∏ÂûãÁöÑÁî®Á©∫Èó¥Êç¢Êó∂Èó¥ÔºÅ ÂÆûÁé∞ Ê†ëÂ§çÂà∂ÊÄùÊÉ≥‰πãÈÄíÂΩí 12345678910111213141516171819202122232425262728293031323334/** * ÂØπÁß∞‰∫åÂèâÊ†ë ÈÄíÂΩíÂÅöÊ≥ï * ÊàëÁöÑÊÉ≥Ê≥ïÊòØ‰ΩøÁî®Â±ÇÂ∫èÈÅçÂéÜÔºåÊâæÂà∞ÂØπÁß∞ÁÇπÔºåÊØè‰∏ÄÂ±ÇÂà§Êñ≠ÂÆåÂç≥ÂèØÔºÅ * ÁªìÊûúÊòØÊ≤°ÂÜôÂá∫Êù• * Áúã‰∫ÜÁ≠îÊ°àÊòØËá™Â∑±Ë∑üËá™Â∑±ÈïúÂÉèÊØîËæÉÔºåÂ§™Â¶ô‰∫ÜÔºÅÔºÅ * @param root * @return */ private static boolean isSymmetricByRecursion(TreeNode root)&#123; if (root == null) return true; return helper(root.left,root.right); &#125; /** * ÈÄíÂΩí‰∏âÈÉ®Êõ≤ * 1„ÄÅÁ°ÆÂÆöÈÄíÂΩíÂá∫Âè£ÔºåÂΩìËäÇÁÇπ‰∏∫Á©∫Êó∂ÔºåÂç≥Êó†ÈúÄÂÜçÈÄíÂΩí * 2„ÄÅÁ°ÆÂÆöËøîÂõûÂÄºÔºåËøîÂõûÂÄº‰∏∫booleanÔºåÂà§Êñ≠ÂΩìÂâç * 3„ÄÅÈïúÂÉèÂòøÂòøÔºåËøô‰∏™ÊÉ≥Ê≥ïÂæànice * @param tree1 * @param tree2 * @return */ private static boolean helper(TreeNode tree1, TreeNode tree2) &#123; //Âà§Êñ≠ÊòØÂê¶ÊòØÊñ∞ÁöÑ‰∏ÄÂ±Ç if(tree1 == null &amp;&amp; tree2 == null)&#123; return true; &#125; else if(tree1 == null || tree2 == null)&#123; return false; &#125; else &#123; return tree1.val == tree2.val &amp;&amp; helper(tree1.left,tree2.right) &amp;&amp; helper(tree1.right,tree2.left); &#125; &#125; Ê†ëÂ§çÂà∂‰πãÈùûÈÄíÂΩí Tip: Âú®Â§çÁé∞ÈùûÈÄíÂΩíÊó∂ÔºåÂèëÁé∞‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ∞±ÊòØQueueÁöÑÂÆûÁé∞Á±ªArrayDequeÊòØÈùûÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå‰ΩÜÊòØÂÖ∂‰∏çÂÖÅËÆ∏Â≠òÂÇ®nullÂÖÉÁ¥†ÔºåËøô‰∏™Ë∑üArrayList„ÄÅLinkedList„ÄÅHashMap„ÄÅTreeMapÁ≠âÈùûÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÈõÜÂêà‰∏çÂêåÔºÅÔºÅÔºÅÔºÅÂõ†‰∏∫Á≥ªÁªüÊ†πÊçÆÊüê‰∏™‰ΩçÁΩÆÊòØÂê¶‰∏∫nullÊù•Âà§Êñ≠ÂÖÉÁ¥†ÁöÑÂ≠òÂú®ÔºånullÊèíÂÖ•Áõ¥Êé•‰ºöÊä•Á©∫ÊåáÈíàÂºÇÂ∏∏„ÄÇ[ArrayDequeÂΩì‰Ωú‰∏∫Ê†à‰ΩøÁî®Êó∂ÔºåÊÄßËÉΩÊØîStackÂ•ΩÔºõÂΩì‰Ωú‰∏∫ÈòüÂàó‰ΩøÁî®Êó∂ÔºåÊÄßËÉΩÊØîLinkedListÂ•Ω„ÄÇ] ÊâÄ‰ª•ËøôÈáå‰ΩøÁî®‰∫ÜQueueÁöÑÂè¶Â§ñ‰∏Ä‰∏™ÂÆûÁé∞Á±ªLinkedListÔºåÂÆÉ‰πüÊòØÈùûÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂìüÔºå‰ΩÜÊòØÂèØ‰ª•Â≠òÂÇ®nullÔºÅÔºÅÔºÅ 123456789101112131415161718private static boolean isSymmetricByIteration(TreeNode root)&#123; Queue&lt;TreeNode&gt; queue = new LinkedList&lt;&gt;(); if(root == null) return true; queue.add(root.left); queue.add(root.right); while(!queue.isEmpty())&#123; TreeNode tree1 = queue.poll(); TreeNode tree2 = queue.poll(); if(tree1 == null &amp;&amp; tree2 == null ) continue; if(tree1 == null || tree2 == null) return false; if(tree1.val != tree2.val) return false; queue.add(tree1.left); queue.add(tree2.right); queue.add(tree1.right); queue.add(tree2.left); &#125; return true;&#125; Â±ÇÂ∫èÈùûÈÄíÂΩí 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950/** * Ëø≠‰ª£ * @param root * @return */ private static boolean isSymmetricByLevel(TreeNode root)&#123; List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;(); if (root == null) return true; Queue&lt;TreeNode&gt; queue = new LinkedList&lt;&gt;(); queue.add(root); TreeNode cur; //ÂæóÂà∞ÂèåÂ±Çlist while (!queue.isEmpty()) &#123; List&lt;Integer&gt; list = new LinkedList&lt;&gt;(); int pre_number = queue.size(); System.out.println(pre_number); while(pre_number &gt; 0 )&#123; cur = queue.poll(); pre_number--; if(cur == null) &#123; list.add(null); continue; &#125; list.add(cur.val); if (cur.left != null)&#123; queue.add(cur.left); // Â∑¶ËäÇÁÇπÂÖ•ÈòüÂàó &#125; else&#123; queue.add(null); &#125; if (cur.right != null) &#123; queue.add(cur.right); // Âè≥ËäÇÁÇπÂÖ•ÈòüÂàó &#125; else&#123; queue.add(null); &#125; &#125; res.add(list); &#125; //ÂØπÊØè‰∏ÄÂ±ÇlistËøõË°åÂà§Êñ≠ÔºåÁúãÊòØÂê¶ÊòØÂØπÁß∞ÁöÑÔºåÂèØ‰ª•‰ΩøÁî®dp for(List list:res)&#123; int size = list.size(); for(int i = 0;i &lt; size/2;i++)&#123; if(list.get(i) != list.get(size-1-i))&#123; return false; &#125; &#125; &#125; return true; &#125; ‰∫åÂèâÊ†ëÁöÑÊúÄÂ§ßÊ∑±Â∫¶ÂêñÔºÅËøô‰∏™ÊòØ‰∫åÂèâÊ†ëÊúÄÁÆÄÂçïÁöÑÈ¢òÁõÆ‰∫ÜÂêß‚Ä¶‰ΩÜÊòØÁªùÂØπÊòØ‰∏ÄÈÅìÁªèÂÖ∏Â•ΩÈ¢òÔºÅ‰∏ãÈù¢Â∞ÜÁî®ÊúÄÂ∏∏Áî®ÁöÑ‰∏âÁßçÊñπÊ≥ïËß£ÂÜ≥ÂÆÉÔºÅ È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™‰∫åÂèâÊ†ëÔºåÊâæÂá∫ÂÖ∂ÊúÄÂ§ßÊ∑±Â∫¶„ÄÇ ‰∫åÂèâÊ†ëÁöÑÊ∑±Â∫¶‰∏∫Ê†πËäÇÁÇπÂà∞ÊúÄËøúÂè∂Â≠êËäÇÁÇπÁöÑÊúÄÈïøË∑ØÂæÑ‰∏äÁöÑËäÇÁÇπÊï∞„ÄÇ ËØ¥Êòé: Âè∂Â≠êËäÇÁÇπÊòØÊåáÊ≤°ÊúâÂ≠êËäÇÁÇπÁöÑËäÇÁÇπ„ÄÇ Á§∫‰æãÔºö ÁªôÂÆö‰∫åÂèâÊ†ë [3,9,20,null,null,15,7]Ôºå 3 / \ 9 20 / \ 15 7 ËøîÂõûÂÆÉÁöÑÊúÄÂ§ßÊ∑±Â∫¶ 3 „ÄÇ ÊÄùË∑Ø ÊñπÊ≥ï‰∏ÄÔºöÈÄíÂΩí„ÄÇËøô‰∏™ÊàëÂú®Âè¶Â§ñ‰∏ÄÁØáÈÄíÂΩí‰∏≠ÁöÑÊñáÁ´†‰∏≠ÊúâÊèêÂà∞ÔºåÂèØ‰ª•‰∏ÄË°å‰ª£Á†ÅËß£ÂÜ≥ÂìüÔºÅ ÊñπÊ≥ï‰∫åÔºöÂ±ÇÂ∫èÈÅçÂéÜ„ÄÇÂç≥Áî®BFSËß£ÂÜ≥ÔºåÊØèÈÅçÂéÜÂÆå‰∏ÄÂ±ÇÂ∞±ËÆ∞ÂΩïÊ∑±Â∫¶„ÄÇ ÊñπÊ≥ï‰∏âÔºöDFS„ÄÇÁî®Ê†àÂÆûÁé∞Âç≥ÂèØ„ÄÇ(ËøòÂ≠¶Âà∞PairËøôÁé©ÊÑè‚Ä¶‰∏∫‰ΩïÊàë‰ª•ÂâçÈÉΩ‰∏çÁü•ÈÅì) ÂÆûÁé∞ ÈÄíÂΩí 1„ÄÅÊâæÂá∫Âè£ÔºåËäÇÁÇπ‰∏∫Á©∫Âç≥ÂèØÈÄÄÂá∫ÈÄíÂΩí„ÄÇ 2„ÄÅÊâæËøîÂõûÂÄºÔºåËøîÂõûÁöÑÊòØËØ•ËäÇÁÇπÊâÄÂú®Â±ÇÁöÑÊ∑±Â∫¶„ÄÇ 3„ÄÅÁ°ÆÂÆö‰∏ÄÊ¨°ÈÄíÂΩíÈúÄË¶ÅÂÅö‰ªÄ‰πà„ÄÇÂΩìÂâçËäÇÁÇπÊ∑±Â∫¶ = Â≠êËäÇÁÇπÊúÄÂ§ßÊ∑±Â∫¶ + 1„ÄÇ 12345class Solution &#123; public int maxDepth(TreeNode root) &#123; return root == null ? 0 : Math.max(maxDepth(root.left), maxDepth(root.right)) + 1; &#125;&#125; BFS Â±ÇÂ∫èÈùûÈÄíÂΩíÈÅçÂéÜÔºåÁ®çÂæÆÊîπÂÜô‰∏Ä‰∏ãÂ∞±Â•Ω‰∫ÜÔºåËøôÈáå‰∏çÈúÄË¶ÅÂ≠òÂÇ®ËäÇÁÇπÔºåÊâÄ‰ª•Âè™ÈúÄË¶ÅÁî®‰∏Ä‰∏™ÂÄºÊù•ËÆ∞ÂΩïÊ∑±Â∫¶Âç≥ÂèØ„ÄÇ Á¨¨‰∏ÄÁßçÈùûÈÄíÂΩíÊñπÂºèÊîπÂÜô 12345678910111213141516171819import javafx.util.Pair;class Solution &#123; public int maxDepth(TreeNode root) &#123; List&lt;Integer&gt; result = new LinkedList&lt;&gt;(); if (root == null) return 0; Queue&lt;Pair&lt;TreeNode,Integer&gt;&gt; toVisit = new ArrayDeque&lt;&gt;(); toVisit.add(new Pair&lt;&gt;(root,1)); Pair&lt;TreeNode,Integer&gt; cur; int max_depth = 0; while (!toVisit.isEmpty()) &#123; cur = toVisit.poll(); int depth = cur.getValue(); max_depth = Math.max(max_depth,depth); if (cur.getKey().left != null) toVisit.add(new Pair&lt;&gt;(cur.getKey().left,depth + 1)); // Â∑¶ËäÇÁÇπÂÖ•ÈòüÂàó if (cur.getKey().right != null) toVisit.add(new Pair&lt;&gt;(cur.getKey().right,depth + 1)); // Âè≥ËäÇÁÇπÂÖ•ÈòüÂàó &#125; return max_depth; &#125;&#125; Á¨¨‰∫åÁßçÈùûÈÄíÂΩíÊñπÂºèÊîπÂÜô 1234567891011121314151617181920212223242526272829303132333435363738/** * Definition for a binary tree node. * public class TreeNode &#123; * int val; * TreeNode left; * TreeNode right; * TreeNode(int x) &#123; val = x; &#125; * &#125; */class Solution &#123; public int maxDepth(TreeNode root) &#123; // List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;(); //ËøôÈáåÊó†ÈúÄÂ≠òÂÇ®ËäÇÁÇπÔºåÂè™ÈúÄËÆ∞ÂΩïÊ∑±Â∫¶Âç≥ÂèØ int depth = 0; if (root == null) return depth; Queue&lt;TreeNode&gt; queue = new ArrayDeque&lt;&gt;(); queue.add(root); TreeNode cur; while (!queue.isEmpty()) &#123;// List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); int pre_number = queue.size(); while(pre_number &gt; 0)&#123; cur = queue.poll(); pre_number--;// list.add(cur.val); //ËøôÈáåÂèØ‰ª•‰∏çÁî®Âä†ÂÖ•ÂàóË°® if (cur.left != null)&#123; queue.add(cur.left); // Â∑¶ËäÇÁÇπÂÖ•ÈòüÂàó &#125; if (cur.right != null) &#123; queue.add(cur.right); // Âè≥ËäÇÁÇπÂÖ•ÈòüÂàó &#125; &#125;// res.add(list); depth++; &#125;// return res.size(); return depth; &#125;&#125; DFS ÂÖ∂ÂÆûÂ∞±ÊòØÂú®ÂÖàÂ∫èÈùûÈÄíÂΩíÁöÑÂü∫Á°Ä‰∏äÁ®çÂä†ÊîπÂä®ÔºåÂéãÊ†àÁöÑ‰∏çÂÜçÂè™ÊòØËäÇÁÇπÔºåËøòÂåÖÊã¨‰∫ÜËäÇÁÇπÁöÑÊ∑±Â∫¶ÔºåÁî®PairÁ±ªÂûãÂ≠òÂÇ®ÔºÅ Â∞ùËØï‰∫ÜÁî®MapÁ±ªÂûãÂ≠òÂÇ®ÔºåÂèëÁé∞Ë°å‰∏çÈÄö‚Ä¶Âõ†‰∏∫Êãø‰∏çÂà∞Ê†àÈ°∂ÁöÑËäÇÁÇπÔºÅ 123456789101112131415161718192021222324import javafx.util.Pair;class Solution &#123; public int maxDepth(TreeNode root) &#123; //ÂæóÁî®‰∏Ä‰∏™Ê†àÊù•ËøõË°åÂ§ÑÁêÜ Stack&lt;Pair&lt;TreeNode,Integer&gt;&gt; stack = new Stack&lt;&gt;(); TreeNode cur = root; int depth= 0; int MaxDepth = 0; while(cur != null || !stack.isEmpty())&#123; while (cur != null)&#123; //Â∑¶ËäÇÁÇπÂÖ∂ÂÆû‰πüÂ∞±ÊòØÂ≠êÊ†ëÁöÑÊ†πËäÇÁÇπ depth++; stack.push(new Pair&lt;&gt;(cur,depth)); cur = cur.left; &#125; //ÁÑ∂ÂêéÊãøÂà∞Ê†πËäÇÁÇπÁöÑÂè≥Â≠êÊ†ëÔºåËøõË°åÈÅçÂéÜ Pair&lt;TreeNode,Integer&gt; top = stack.pop(); depth = top.getValue(); MaxDepth = Math.max(depth,MaxDepth); cur = top.getKey().right; &#125; return MaxDepth; &#125;&#125; ‰∫åÂèâÊ†ëÁöÑÊúÄÂ∞èÊ∑±Â∫¶È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™‰∫åÂèâÊ†ëÔºåÊâæÂá∫ÂÖ∂ÊúÄÂ∞èÊ∑±Â∫¶„ÄÇ ÊúÄÂ∞èÊ∑±Â∫¶ÊòØ‰ªéÊ†πËäÇÁÇπÂà∞ÊúÄËøëÂè∂Â≠êËäÇÁÇπÁöÑÊúÄÁü≠Ë∑ØÂæÑ‰∏äÁöÑËäÇÁÇπÊï∞Èáè„ÄÇ ËØ¥Êòé: Âè∂Â≠êËäÇÁÇπÊòØÊåáÊ≤°ÊúâÂ≠êËäÇÁÇπÁöÑËäÇÁÇπ„ÄÇ Á§∫‰æã: ÁªôÂÆö‰∫åÂèâÊ†ë [3,9,20,null,null,15,7], 12345 3 / \9 20 / \ 15 7 ËøîÂõûÂÆÉÁöÑÊúÄÂ∞èÊ∑±Â∫¶ 2„ÄÇ ÊÄùË∑Ø BFSÔºåÂ•óÁî® BFS Ê®°Êùø„ÄÇ ‰ª£Á†Å1234567891011121314151617181920212223242526class Solution &#123; public int minDepth(TreeNode root) &#123; if(root == null) return 0; LinkedList&lt;TreeNode&gt; queue = new LinkedList(); queue.add(root); int depth = 1; while(!queue.isEmpty())&#123; int sz = queue.size(); for(int i = 0;i &lt; sz;i++)&#123; TreeNode cur = queue.poll(); if(cur.left == null &amp;&amp; cur.right == null)&#123; return depth; &#125; if(cur.left != null)&#123; queue.add(cur.left); &#125; if(cur.right != null)&#123; queue.add(cur.right); &#125; &#125; depth++; &#125; return depth; &#125;&#125; Ë∑ØÂæÑÊÄªÂíåÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™‰∫åÂèâÊ†ëÂíå‰∏Ä‰∏™ÁõÆÊ†áÂíåÔºåÂà§Êñ≠ËØ•Ê†ë‰∏≠ÊòØÂê¶Â≠òÂú®Ê†πËäÇÁÇπÂà∞Âè∂Â≠êËäÇÁÇπÁöÑË∑ØÂæÑÔºåËøôÊù°Ë∑ØÂæÑ‰∏äÊâÄÊúâËäÇÁÇπÂÄºÁõ∏Âä†Á≠â‰∫éÁõÆÊ†áÂíå„ÄÇ ËØ¥Êòé: Âè∂Â≠êËäÇÁÇπÊòØÊåáÊ≤°ÊúâÂ≠êËäÇÁÇπÁöÑËäÇÁÇπ„ÄÇ Á§∫‰æã:ÁªôÂÆöÂ¶Ç‰∏ã‰∫åÂèâÊ†ëÔºå‰ª•ÂèäÁõÆÊ†áÂíå sum = 22Ôºå 5 / \ 4 8 / / \ 11 13 4 / \ \ 7 2 1 ËøîÂõû true, Âõ†‰∏∫Â≠òÂú®ÁõÆÊ†áÂíå‰∏∫ 22 ÁöÑÊ†πËäÇÁÇπÂà∞Âè∂Â≠êËäÇÁÇπÁöÑË∑ØÂæÑ 5-&gt;4-&gt;11-&gt;2„ÄÇ ÊÄùË∑Ø ÈÄíÂΩí„ÄÇÊàëÈÉΩÈÄíÂΩíÁöÑË¶ÅÂêê‰∫ÜÔºå‰∫åÂèâÊ†ëÊó•Â∏∏ÈÄíÂΩíÔºÅ DFSÔºåËá™Â∑±Âª∫Ê†àÊ®°ÊãüÈÄíÂΩí„ÄÇ ÂÆûÁé∞ ÈÄíÂΩí 1 Ôºà‰∏âÂÖÉË°®ËææÂºèÁ∫ØÁ≤πË£ÖÈÄºÂìàÂìàÂìàÔºâ 12345678910class Solution &#123; public boolean hasPathSum(TreeNode root, int sum) &#123; return root == null ? false : hasPathSumByRecursion(root,0,sum); &#125; private boolean hasPathSumByRecursion(TreeNode root, int total, int sum) &#123; if(root == null) return false; total = total + root.val; return (root.left == null &amp;&amp; root.right == null) ? total == sum : hasPathSumByRecursion(root.left,total,sum) || hasPathSumByRecursion(root.right,total,sum); &#125;&#125; ÈÄíÂΩí 2 12345678public boolean hasPathSum(TreeNode root,int sum)&#123; if(root == null) return false; sum-=root.val; if(root.left == null &amp;&amp; root.right == null)&#123; return sum == 0; &#125; return hasPathSum(root.left,sum) || hasPathSum(root.right,sum);&#125; DFS ÊàëËßâÂæóÊÄùÊÉ≥ÈÉΩÂæàÁÆÄÂçïÂïäÔºåÂÖ∂ÂÆû‰∫åÂèâÊ†ëÁöÑÂü∫Êú¨‰∏äÊâÄÊúâÁöÑÈ¢òÁõÆÈÉΩÊòØÂª∫Á´ãÂú®ÂâçÂ∫èÂíåÂ±ÇÂ∫èÈÅçÂéÜÁöÑÂü∫Á°Ä‰∏äÁöÑÔºåÁÜüÁªÉÊéåÊè°‰∫ÜÂâçÂ∫èÂíåÂ±ÇÂ∫èÁöÑÈÄíÂΩíÈùûÈÄíÂΩíÂ∞±Âü∫Êú¨ËÉΩËß£ÊâÄÊúâÈ¢òÁõÆ‰∫Ü‚Ä¶ (Âú®ÂâçÂ∫èÈùûÈÄíÂΩíÁöÑÂü∫Á°Ä‰∏äÁ®çÂä†ÊîπÂä®Â∞±Ë°å‰∫Ü‚Ä¶) 123456789101112131415import javafx.util.Pair;class Solution &#123; public boolean hasPathSum(TreeNode root, int sum) &#123; if (root == null) return false; Stack&lt;Pair&lt;TreeNode,Integer&gt;&gt; toVisit = new Stack&lt;&gt;(); toVisit.push(new Pair&lt;&gt;(root,root.val)); while (!toVisit.isEmpty())&#123; Pair&lt;TreeNode,Integer&gt; cur = toVisit.pop(); if (cur.getKey().right != null) toVisit.push(new Pair&lt;&gt;(cur.getKey().right,cur.getValue()+cur.getKey().right.val)); // Âè≥ËäÇÁÇπÂÖ•Ê†à if (cur.getKey().left != null) toVisit.push(new Pair&lt;&gt;(cur.getKey().left,cur.getValue()+cur.getKey().left.val)); // Â∑¶ËäÇÁÇπÂÖ•Ê†à if(cur.getKey().left == null &amp;&amp; cur.getKey().right == null &amp;&amp; cur.getValue() == sum) return true; &#125; return false; &#125;&#125; ‰ªé‰∏≠Â∫è‰∏éÂêéÂ∫èÈÅçÂéÜÂ∫èÂàóÊûÑÈÄ†‰∫åÂèâÊ†ëÈ¢òÁõÆÊ†πÊçÆ‰∏ÄÊ£µÊ†ëÁöÑ‰∏≠Â∫èÈÅçÂéÜ‰∏éÂêéÂ∫èÈÅçÂéÜÊûÑÈÄ†‰∫åÂèâÊ†ë„ÄÇ Ê≥®ÊÑè:‰Ω†ÂèØ‰ª•ÂÅáËÆæÊ†ë‰∏≠Ê≤°ÊúâÈáçÂ§çÁöÑÂÖÉÁ¥†„ÄÇ ‰æãÂ¶ÇÔºåÁªôÂá∫ 12‰∏≠Â∫èÈÅçÂéÜ inorder = [9,3,15,20,7]ÂêéÂ∫èÈÅçÂéÜ postorder = [9,15,7,20,3] ËøîÂõûÂ¶Ç‰∏ãÁöÑ‰∫åÂèâÊ†ëÔºö 12345 3 / \9 20 / \ 15 7 ÊÄùË∑ØÊàëÂÜôÁöÑÂ∫îËØ•ÊØîËæÉÁÆÄÊ¥ÅÔºåÂèÇÊï∞Â∞ëÁöÑÂéüÂõ†ÊòØÊäì‰Ωè‰∫ÜÂêéÂ∫èÊòØÂ∑¶--Âè≥--Ê†πÁöÑÁâπÁÇπÔºåÊâÄ‰ª•ÂêéÂ∫èÈÅçÂéÜ‰ªéÂêéÂêëÂâçÊòØÊ†π--Âè≥--Â∑¶ÔºåÊïÖÂú®ÈÄíÂΩíÊó∂Ê†πÊú¨Ê≤°ÊúâÂøÖË¶ÅÂ∞ÜÂêéÂ∫èÈÅçÂéÜÁöÑÊï∞ÁªÑÁïåÈôê‰º†ÂÖ•ÔºåÊØèÊ¨°ÊúâËäÇÁÇπÂä†ÂÖ•Â∞±Ëá™Âáè‰∏ÄÂ∞±Ë°åÔºåÂè™Ë¶ÅÊª°Ë∂≥‰∫ÜÂÖàÊãøÂà∞Ê†πËäÇÁÇπÁÑ∂ÂêéÈÅçÂéÜÂè≥Â≠êÊ†ëÔºåÂÜçÈÅçÂéÜÂ∑¶Â≠êÊ†ëËøô‰∏™ÂéüÂàôÂ∞±Okay„ÄÇ Ëá≥‰∫éÈÄíÂΩíÂ¶Ç‰ΩïÂÜôÔºåÂÖ∂ÂÆûÊääÊè°‰∏â‰∏™ÂéüÂàôÂ∞±Ë°åÔºö ÈÄíÂΩíÂá∫Âè£ÔºåËøôÈáåÂ∞±‰∏çËß£Èáä‰∫Ü ÊØèÊ¨°ÈÄíÂΩíÁöÑËøîÂõûÂÄºÔºåËøôÈáåÂæàÊòéÊòæÂ∞±ÊòØÈ¢òÁõÆË¶ÅÊ±ÇÁöÑrootËäÇÁÇπ ÂçïÊ¨°ÈÄíÂΩíÈúÄË¶ÅÂÅöÁöÑ‰∫ãÔºåÊàë‰ª¨ÈúÄË¶ÅÊûÑÂª∫‰∏Ä‰∏™Ê†ëÔºåÈÇ£‰πàÂçïÊ¨°ÈÄíÂΩíÂ∞±ÊòØÊãøÂà∞Ê†πËäÇÁÇπÔºåÂπ∂‰∏îÊåáÂêëÊ≠£Á°ÆÁöÑÂ∑¶Âè≥Â≠êÊ†ëÂç≥ÂèØ„ÄÇ ‰ª£Á†Å123456789101112131415161718192021222324class Solution &#123; int index; Map&lt;Integer,Integer&gt; map = new HashMap&lt;&gt;(); public TreeNode buildTree(int[] inorder,int[] postorder)&#123; index = inorder.length - 1; for(int i = 0;i &lt;= index; i++)&#123; map.put(inorder[i],i); &#125; return buildTreeByRecursion(inorder,postorder,0,index); &#125; private TreeNode buildTreeByRecursion(int[] inorder,int[] postorder,int inorder_start,int inorder_end)&#123; if(inorder_start &gt; inorder_end) return null; //ÂÖàÊãøÂà∞Ê†πËäÇÁÇπÁöÑÂÄº,Á°ÆÂÆöÂÖ∂Âú®‰∏≠Â∫èÈÅçÂéÜÁöÑ‰ΩçÁΩÆÔºåÂπ∂‰∏îÂ∞ÜÂÖ∂ÂêéÂ∫èÈÅçÂéÜÁöÑÁ¥¢ÂºïÂÄºÁöÑÊú´Â∞æÂæÄÂâç‰∏Ä‰Ωç int inorder_root = map.get(postorder[index]); TreeNode root = new TreeNode(postorder[index--]); //ÁÑ∂ÂêéÁ°ÆÂÆöÂ∑¶Âè≥Â≠êÊ†ëÔºåÂπ∂‰∏îÈÄíÂΩíÂç≥ÂèØ // Ê≥®ÊÑèÂì¶ÔºÅÊòØÂøÖÈ°ªÂÖàÈÄíÂΩíÂè≥Â≠êÊ†ëÔºåÂÜçÈÄíÂΩíÂ∑¶Â≠êÊ†ëÔºåÂõ†‰∏∫ÂêéÂ∫èÊòØÂ∑¶Âè≥Ê†πÁöÑÈ°∫Â∫èÔºåÂêéÂ∫èÊú´Â∞æËá™Âáè‰∏ÄÔºåÊ≠§Êó∂Â∫îËØ•ÊòØÂè≥Â≠êÊ†ëÁöÑÊ†πËäÇÁÇπÔºÅ // ÊâÄ‰ª•ÂøÖÈ°ªÂÖ®ÈÉ®Âè≥Â≠êÊ†ëÊûÑÂª∫ÂÆåÊàêÂÜçÂéªÊûÑÂª∫Â∑¶Â≠êÊ†ë root.right = buildTreeByRecursion(inorder,postorder,inorder_root + 1,inorder_end); root.left = buildTreeByRecursion(inorder,postorder,inorder_start,inorder_root - 1); return root; &#125;&#125; ‰ªéÂâçÂ∫è‰∏é‰∏≠Â∫èÈÅçÂéÜÂ∫èÂàóÊûÑÈÄ†‰∫åÂèâÊ†ëÈ¢òÁõÆÊ†πÊçÆ‰∏ÄÊ£µÊ†ëÁöÑÂâçÂ∫èÈÅçÂéÜ‰∏é‰∏≠Â∫èÈÅçÂéÜÊûÑÈÄ†‰∫åÂèâÊ†ë„ÄÇ Ê≥®ÊÑè:‰Ω†ÂèØ‰ª•ÂÅáËÆæÊ†ë‰∏≠Ê≤°ÊúâÈáçÂ§çÁöÑÂÖÉÁ¥†„ÄÇ ‰æãÂ¶ÇÔºåÁªôÂá∫ 12ÂâçÂ∫èÈÅçÂéÜ preorder = [3,9,20,15,7]‰∏≠Â∫èÈÅçÂéÜ inorder = [9,3,15,20,7] ËøîÂõûÂ¶Ç‰∏ãÁöÑ‰∫åÂèâÊ†ëÔºö 12345 3 / \9 20 / \ 15 7 ÊÄùË∑ØË∑ü‰∏äÈù¢ÁöÑÊÄùË∑Ø‰∏ÄËá¥ÔºåÂ∞±ÊòØÂàöÂ•ΩÁõ∏ÂèçËÄåÂ∑≤Âòõ‚Ä¶ ‰ª£Á†Å1234567891011121314151617181920212223class Solution &#123; int pre = 0; Map&lt;Integer,Integer&gt; pre_in_map = new HashMap&lt;&gt;(); public TreeNode buildTree(int[] preorder,int[] inorder)&#123; int inorder_end = inorder.length - 1; for(int i = 0;i &lt;= inorder_end; i++)&#123; pre_in_map.put(inorder[i],i); &#125; return buildTreeByRecursion(preorder,inorder,0,inorder_end); &#125; private TreeNode buildTreeByRecursion(int[] preorder,int[] inorder,int inorder_start,int inorder_end)&#123; if(inorder_start &gt; inorder_end) return null; //ÂÖàÊãøÂà∞Ê†πËäÇÁÇπÁöÑÂÄº,Á°ÆÂÆöÂÖ∂Âú®‰∏≠Â∫èÈÅçÂéÜÁöÑ‰ΩçÁΩÆÔºåÂπ∂‰∏îÂ∞ÜÂÖàÂ∫èÈÅçÂéÜÁöÑÁ¥¢ÂºïÂÄºÁöÑÂºÄÂßãÂÄºÂêëÂâç‰∏Ä‰Ωç int inorder_root = pre_in_map.get(preorder[pre]); TreeNode root = new TreeNode(preorder[pre++]); //ÁÑ∂ÂêéÁ°ÆÂÆöÂ∑¶Âè≥Â≠êÊ†ëÔºåÂπ∂‰∏îÈÄíÂΩíÂç≥ÂèØ // Ê≥®ÊÑèÂì¶ÔºÅÊòØÂøÖÈ°ªÂÖàÈÄíÂΩíÂ∑¶Â≠êÊ†ëÔºåÂÜçÈÄíÂΩíÂè≥Â≠êÊ†ëÔºåÂõ†‰∏∫ÂÖàÂ∫èÊòØÊ†πÂ∑¶Âè≥ÁöÑÈ°∫Â∫è // ÊâÄ‰ª•ÂøÖÈ°ªÂÖ®ÈÉ®Â∑¶Â≠êÊ†ëÊûÑÂª∫ÂÆåÊàêÂÜçÂéªÊûÑÂª∫Âè≥Â≠êÊ†ë root.left = buildTreeByRecursion(preorder,inorder,inorder_start,inorder_root - 1); root.right = buildTreeByRecursion(preorder,inorder,inorder_root + 1,inorder_end); return root; &#125;&#125; Â°´ÂÖÖÊØè‰∏™ËäÇÁÇπÁöÑ‰∏ã‰∏Ä‰∏™Âè≥‰æßËäÇÁÇπÊåáÈíàÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ÂÆåÁæé‰∫åÂèâÊ†ëÔºåÂÖ∂ÊâÄÊúâÂè∂Â≠êËäÇÁÇπÈÉΩÂú®Âêå‰∏ÄÂ±ÇÔºåÊØè‰∏™Áà∂ËäÇÁÇπÈÉΩÊúâ‰∏§‰∏™Â≠êËäÇÁÇπ„ÄÇ‰∫åÂèâÊ†ëÂÆö‰πâÂ¶Ç‰∏ãÔºö 123456struct Node &#123; int val; Node *left; Node *right; Node *next;&#125; Â°´ÂÖÖÂÆÉÁöÑÊØè‰∏™ next ÊåáÈíàÔºåËÆ©Ëøô‰∏™ÊåáÈíàÊåáÂêëÂÖ∂‰∏ã‰∏Ä‰∏™Âè≥‰æßËäÇÁÇπ„ÄÇÂ¶ÇÊûúÊâæ‰∏çÂà∞‰∏ã‰∏Ä‰∏™Âè≥‰æßËäÇÁÇπÔºåÂàôÂ∞Ü next ÊåáÈíàËÆæÁΩÆ‰∏∫ NULL„ÄÇ ÂàùÂßãÁä∂ÊÄÅ‰∏ãÔºåÊâÄÊúâ next ÊåáÈíàÈÉΩË¢´ËÆæÁΩÆ‰∏∫ NULL„ÄÇ Á§∫‰æãÔºö ÊÄùË∑Ø ÊúÄÁÆÄÂçïÁöÑÊÄùË∑ØÔºöÂ±ÇÂ∫èÈÅçÂéÜÔºåÂàÜÂà´Ëé∑ÂæóÊØèÂ±ÇÁöÑËäÇÁÇπÔºåÁÑ∂ÂêéÁîüÊàêÈìæË°®ÔºåÊâÄ‰ª•Ëøô‰∏™‰∏çÊòØÂÆåÁæé‰∫åÂèâÊ†ë‰πüÂèØ‰ª•ÂÅöÔºå‰πüÂ∞±ÊòØËØ¥Ê≤°ÊúâÁî®Âà∞ ÂÆåÂÖ®‰∫åÂèâÊ†ë ÁöÑÊÄßË¥®ÔºÅÊâÄ‰ª•ÂøÖÂÆö‰∏çÊòØÊúÄ‰ºòËß£ÔºÅËÄå‰∏îËøô‰∏™‰ΩøÁî®ÁöÑ‰∏çÊòØÂ∏∏ÈáèÁ∫ßÁöÑÁ©∫Èó¥ÔºåÂÖ∂ÂÆûÊòØ‰∏çÂ§™Á¨¶ÂêàË¶ÅÊ±ÇÁöÑ„ÄÇ (Áúã‰∫ÜÁ≠îÊ°àÁöÑ)È´òËµûÁöÑ ÊãâÊãâÈìæËß£Ê≥ïÔºåÂ∞Ü‰∏ÄÊ£µÂ§ßÁöÑ‰∫åÂèâÊ†ë‰∏ÄÂàÜ‰∏∫‰∫åÔºåÂ§ÑÁêÜ‰∏§Ê£µÂ∞è‰∫åÂèâÊ†ëÁöÑËøûÊé•ÔºåÂÜçÈÄíÂΩíËß£ÂÜ≥Â∞è‰∫åÂèâÊ†ëÂÜÖÈÉ®ËøûÊé•„ÄÇ ËøòÊúâ‰∏ÄÁßçÈùûÈÄíÂΩíÁöÑÊñπÊ≥ïÔºå‰∏™‰∫∫ËßâÂæó‰πüÊòØÈùûÂ∏∏ÁöÑÁ≤æÂ¶ôÔºå‰πãÂâçÊàë‰ª¨ÊòØÁî®ÂàóË°®‰øùÂ≠òÊØè‰∏ÄÂ±ÇÁöÑËäÇÁÇπÔºåÂÖ∂ÂÆûËøôÊòØ‰∏ÄÁßçÊµ™Ë¥π„ÄÇÂè™ÈúÄË¶ÅËß£ÂÜ≥‰∏â‰∏™ÈóÆÈ¢òÂ∞±Â§ü‰∫Ü„ÄÇÂèÇËÄÉÁΩëÂùÄ ÊØè‰∏ÄÂ±ÇÊÄé‰πàÈÅçÂéÜÔºü ‰πãÂâçÊòØÁî®ÈòüÂàóÂ∞Ü‰∏ã‰∏ÄÂ±ÇÁöÑËäÇÁÇπ‰øùÂ≠ò‰∫ÜËµ∑Êù•„ÄÇ ËøôÈáåÁöÑËØùÔºåÂÖ∂ÂÆûÂè™ÈúÄË¶ÅÊèêÂâçÊää‰∏ã‰∏ÄÂ±ÇÁöÑnextÊûÑÈÄ†ÂÆåÊàêÔºåÂà∞‰∫Ü‰∏ã‰∏ÄÂ±ÇÁöÑÊó∂ÂÄôÂ∞±ÂèØ‰ª•ÈÅçÂéÜ‰∫Ü„ÄÇ ‰ªÄ‰πàÊó∂ÂÄôËøõÂÖ•‰∏ã‰∏ÄÂ±ÇÔºü ‰πãÂâçÊòØÂæóÂà∞ÂΩìÂâçÈòüÂàóÁöÑÂÖÉÁ¥†‰∏™Êï∞ÔºåÁÑ∂ÂêéÈÅçÂéÜÈÇ£‰πàÂ§öÊ¨°„ÄÇ ‚Äã ËøôÈáåÁöÑËØùÔºåÊ≥®ÊÑèÂà∞ÊúÄÂè≥ËæπÁöÑËäÇÁÇπÁöÑnext‰∏∫nullÔºåÊâÄ‰ª•ÂèØ‰ª•Âà§Êñ≠ÂΩìÂâçÈÅçÂéÜÁöÑËäÇÁÇπÊòØ‰∏çÊòØnull„ÄÇ ÊÄé‰πàÂæóÂà∞ÊØèÂ±ÇÂºÄÂ§¥ËäÇÁÇπÔºü ‰πãÂâçÈòüÂàóÊääÂΩìÂâçÂ±ÇÁöÑÊâÄ‰ª•ËäÇÁÇπÂ≠ò‰∫ÜËµ∑Êù•ÔºåÂæóÂà∞ÂºÄÂ§¥ËäÇÁÇπÂΩìÁÑ∂ÂæàÂÆπÊòì„ÄÇ ËøôÈáåÁöÑËØùÔºåÊàë‰ª¨È¢ùÂ§ñÈúÄË¶Å‰∏Ä‰∏™ÂèòÈáèÊääÂÆÉÂ≠òËµ∑Êù•„ÄÇ ‰∏â‰∏™ÈóÆÈ¢òÈÉΩËß£ÂÜ≥‰∫ÜÔºåÂ∞±ÂèØ‰ª•ÂÜô‰ª£Á†Å‰∫Ü„ÄÇÂà©Áî®‰∏â‰∏™ÊåáÈíàÔºåstartÊåáÁöÑÊòØÂΩìÂâçÂ±ÇÁöÑÊúÄÂ∑¶ËäÇÁÇπÔºå‰πüÂ∞±ÊòØÊú¨Â±ÇÁöÑËµ∑ÁÇπÔºåcurÊåáÁöÑÊòØÂΩìÂâçÊ≠£Âú®ÈÅçÂéÜÁöÑËäÇÁÇπÔºåcur.nextÊåáÁöÑÊòØÊ≠£Âú®ÈÅçÂéÜÁöÑËäÇÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπÔºÅÊàëËßâÂæóËøô‰∏™ÊñπÊ≥ïÊúÄÈöæÊÉ≥ÁöÑÂ∞±ÊòØ Âú®ÈÅçÂéÜÊú¨Â±ÇÁöÑÊó∂ÂÄôÔºåÂ∞Ü‰∏ãÂ±ÇÁöÑnextÊûÑÈÄ†ÂÆåÊàêÔºÅÔºÅÔºÅ ‰ª£Á†Å ÊñπÊ≥ï‰∏ÄÔºöÂ±ÇÂ∫èÈÅçÂéÜ 12345678910111213141516171819202122232425262728293031/** * Â±ÇÂ∫èÈÅçÂéÜ * @param root * @return */public Node connect1(Node root) &#123; if (root == null) &#123; return root; &#125; Queue&lt;Node&gt; queue = new LinkedList&lt;Node&gt;(); queue.offer(root); while (!queue.isEmpty()) &#123; int size = queue.size(); Node pre = null; for (int i = 0; i &lt; size; i++) &#123; Node cur = queue.poll(); //‰ªéÁ¨¨‰∫å‰∏™ËäÇÁÇπÂºÄÂßãÔºåÂ∞ÜÂâç‰∏Ä‰∏™ËäÇÁÇπÁöÑ pre ÊåáÂêëÂΩìÂâçËäÇÁÇπ if (i &gt; 0) &#123; pre.next = cur; &#125; pre = cur; if (cur.left != null) &#123; queue.offer(cur.left); &#125; if (cur.right != null) &#123; queue.offer(cur.right); &#125; &#125; &#125; return root;&#125; ÊñπÊ≥ï‰∫åÔºöÊãâÊãâÈìæÊ≥ï 123456789101112131415161718/** * ÊñπÊ≥ï‰∫å ÊãâÊãâÈìæÊ≥ï * @param root * @return */public Node connect2(Node root)&#123; if(root == null) return null; Node left = root.left; Node right = root.right; while(left != null)&#123; left.next = right; left = left.right; right = right.left; &#125; connect1(root.left); connect1(root.right); return root;&#125; ÊñπÊ≥ï‰∏âÔºöÈùûÈÄíÂΩíËß£Ê≥ïÔºà‰∏™‰∫∫ÊúÄÊé®ËçêÁöÑÂÅöÊ≥ïÔºâ 12345678910111213141516171819/** * ÈùûÈÄíÂΩíËß£Ê≥ïÔºåËøô‰∏™Â∫îËØ•ÊòØÊúÄÁ¨¶ÂêàÈ¢òÊÑèÁöÑËß£Ê≥ï * @param root * @return */public Node connect3(Node root)&#123; if(root == null) return null; Node start = root; while(start.left != null)&#123; Node cur = start; while(cur != null)&#123; cur.left.next = cur.right; if(cur.next != null) cur.right.next = cur.next.left; cur = cur.next; &#125; start = start.left; &#125; return root;&#125; Â°´ÂÖÖÊØè‰∏™ËäÇÁÇπÁöÑ‰∏ã‰∏Ä‰∏™Âè≥‰æßËäÇÁÇπÊåáÈíà IIÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™‰∫åÂèâÊ†ë 123456struct Node &#123; int val; Node *left; Node *right; Node *next;&#125; Â°´ÂÖÖÂÆÉÁöÑÊØè‰∏™ next ÊåáÈíàÔºåËÆ©Ëøô‰∏™ÊåáÈíàÊåáÂêëÂÖ∂‰∏ã‰∏Ä‰∏™Âè≥‰æßËäÇÁÇπ„ÄÇÂ¶ÇÊûúÊâæ‰∏çÂà∞‰∏ã‰∏Ä‰∏™Âè≥‰æßËäÇÁÇπÔºåÂàôÂ∞Ü next ÊåáÈíàËÆæÁΩÆ‰∏∫ NULL„ÄÇ ÂàùÂßãÁä∂ÊÄÅ‰∏ãÔºåÊâÄÊúâ next ÊåáÈíàÈÉΩË¢´ËÆæÁΩÆ‰∏∫ NULL„ÄÇ ËøõÈò∂Ôºö ‰Ω†Âè™ËÉΩ‰ΩøÁî®Â∏∏ÈáèÁ∫ßÈ¢ùÂ§ñÁ©∫Èó¥„ÄÇ ‰ΩøÁî®ÈÄíÂΩíËß£È¢ò‰πüÁ¨¶ÂêàË¶ÅÊ±ÇÔºåÊú¨È¢ò‰∏≠ÈÄíÂΩíÁ®ãÂ∫èÂç†Áî®ÁöÑÊ†àÁ©∫Èó¥‰∏çÁÆóÂÅöÈ¢ùÂ§ñÁöÑÁ©∫Èó¥Â§çÊùÇÂ∫¶„ÄÇ Á§∫‰æãÔºö 123ËæìÂÖ•Ôºöroot = [1,2,3,4,5,null,7]ËæìÂá∫Ôºö[1,#,2,3,#,4,5,7,#]Ëß£ÈáäÔºöÁªôÂÆö‰∫åÂèâÊ†ëÂ¶ÇÂõæ A ÊâÄÁ§∫Ôºå‰Ω†ÁöÑÂáΩÊï∞Â∫îËØ•Â°´ÂÖÖÂÆÉÁöÑÊØè‰∏™ next ÊåáÈíàÔºå‰ª•ÊåáÂêëÂÖ∂‰∏ã‰∏Ä‰∏™Âè≥‰æßËäÇÁÇπÔºåÂ¶ÇÂõæ B ÊâÄÁ§∫„ÄÇ ÊèêÁ§∫Ôºö Ê†ë‰∏≠ÁöÑËäÇÁÇπÊï∞Â∞è‰∫é 6000 -100 &lt;= node.val &lt;= 100 ÊÄùË∑Ø ÊñπÊ≥ï‰∏ÄÔºö‰∏ä‰∏ÄÈ¢òÂ∑≤ÁªèËÆ≤ËøáÔºå‰æùÊóßÂèØ‰ª•Áî®‰∏äÈù¢ÁöÑ‰ª£Á†ÅÔºåBFS„ÄÇ ÊñπÊ≥ï‰∫åÔºöÈ¢òÁõÆË¶ÅÊ±ÇÂè™ËÉΩ‰ΩøÁî®Â∏∏ÈáèÁ∫ßÈ¢ùÂ§ñÁ©∫Èó¥ÔºåÊÑèÂë≥ÁùÄÂÖ∂ÂÆû‰∏•Ê†º‰∏ä‰∏çËÉΩ‰ΩøÁî®ÈòüÂàóÔºåÈÇ£ÊÄé‰πàÂÅöÂë¢Ôºü ÂèØ‰ª•‰ΩøÁî®‰∏Ä‰∏™Â∞æÊåáÈíàÔºåÂ∞ÜÊâÄÊúâÁöÑËäÇÁÇπËøûÊé•Ëµ∑Êù•ÔºåÂàöÂ•ΩÂ∞±ÊòØÈ¢òÁõÆÁöÑnextÊåáÈíàÔºåÂèØ‰ª•ÂÅöÂà∞Ëøô‰∏ÄÁÇπÔºåËá≥‰∫éÊØè‰∏ÄÂ±ÇÂ¶Ç‰ΩïÂºÄÂßãÔºåÂè™ÈúÄË¶ÅÂÜçÂºïÂÖ•‰∏Ä‰∏™ÊåáÈíàËøõË°åÊ†áËÆ∞Âç≥ÂèØÔºå‰∏çÂêå‰∫éBFSÁöÑÊòØÔºåBFSÂú®ÈÅçÂéÜÂΩìÂâçÂ±ÇÊó∂ÔºåÊòØÂ§ÑÁêÜÂΩìÂâçÂ±ÇÁöÑÊ®™ÂêëËøûÊé•ÔºåÂπ∂‰∏îÂ∞ÜÂ≠êËäÇÁÇπÂä†ÂÖ•ÈòüÂàó‰∏≠‰ª•‰æø‰∏ã‰∏ÄÊ¨°ÁöÑÈÅçÂéÜÔºåËÄåÊñπÊ≥ï‰∫åÂàôÊòØÂú®ÊØèÊ¨°Âæ™ÁéØÊó∂ÔºåÁõ¥Êé•Â§ÑÁêÜ‰∏ã‰∏ÄÂ±ÇËäÇÁÇπÁöÑÊ®™ÂêëËøûÊé•ÈóÆÈ¢òÔºåÂõ†‰∏∫ÊàëÂπ∂‰∏çÁü•ÈÅìÊØè‰∏ÄÂ±ÇÁöÑËäÇÁÇπÊï∞ÈáèÂíåÂÖ∑‰Ωì‰ΩçÁΩÆ(Êó†Ê≥ï‰øùÂ≠ò)ÔºåÂè™ËÉΩÊòØÂ¶ÇÊûúËØ•Â±Ç‰∏ãÁöÑÂ≠êËäÇÁÇπÂ≠òÂú®ÔºåÂ∞±Â∞Ü‰ªñ‰ª¨ËøûÊé•ÔºÅ 1234567891011cur ÊåáÈíàÂà©Áî® next ‰∏çÂÅúÁöÑÈÅçÂéÜÂΩìÂâçÂ±Ç„ÄÇÂ¶ÇÊûú cur ÁöÑÂ≠©Â≠ê‰∏ç‰∏∫ null Â∞±Â∞ÜÂÆÉÊé•Âà∞ tail ÂêéËæπÔºåÁÑ∂ÂêéÊõ¥Êñ∞tail„ÄÇÂΩì cur ‰∏∫ null ÁöÑÊó∂ÂÄôÔºåÂÜçÂà©Áî® dummy ÊåáÈíàÂæóÂà∞Êñ∞ÁöÑ‰∏ÄÂ±ÇÁöÑÂºÄÂßãËäÇÁÇπ„ÄÇdummy ÊåáÈíàÂú®ÈìæË°®‰∏≠ÁªèÂ∏∏Áî®Âà∞Ôºå‰ªñÂè™ÊòØ‰∏∫‰∫ÜÂ§ÑÁêÜÂ§¥ÁªìÁÇπÁöÑÊÉÖÂÜµÔºåÂÆÉÂπ∂‰∏çÂ±û‰∫éÂΩìÂâçÈìæË°®„ÄÇ‰ΩúËÄÖÔºöwindliangÈìæÊé•Ôºöhttps://leetcode-cn.com/problems/populating-next-right-pointers-in-each-node-ii/solution/xiang-xi-tong-su-de-si-lu-fen-xi-duo-jie-fa-by-28/Êù•Ê∫êÔºöÂäõÊâ£ÔºàLeetCodeÔºâ ‰ª£Á†Å ÊñπÊ≥ï‰∏ÄÔºöÂêå‰∏ä(Áï•) ÊñπÊ≥ï‰∫åÔºö 12345678910111213141516171819202122232425public Node connectII(Node root)&#123; if(root == null) return null; Node cur = root; //ÈÅçÂéÜÁöÑÂΩìÂâçËäÇÁÇπ Node tail; //‰∏≠Èó¥ËäÇÁÇπÔºåËµ∑ÊâøÊé•ÁöÑ‰ΩúÁî® while(cur != null)&#123; //ÈÅçÂéÜÊï¥Ê£µÊ†ë //Ê≥®ÊÑèËøôÈáåÁöÑstartÂ∫îËØ•ÊòØ‰∏Ä‰∏™ÈìæË°®Â§¥ÁªìÁÇπÔºåÂÖ∂ÊåáÂêëÁöÑnext‰∏∫ÂΩìÂâçÂ±ÇÁöÑ‰∏ã‰∏ÄÂ±ÇÁöÑÁ¨¨‰∏Ä‰∏™ËäÇÁÇπ Node start = new Node(); tail = start; //ÈÅçÂéÜÂΩìÂâçÂ±Ç while(cur != null)&#123; if(cur.left != null)&#123; tail.next = cur.left; tail = tail.next; &#125; if(cur.right != null)&#123; tail.next = cur.right; tail = tail.next; &#125; cur = cur.next; &#125; cur = start.next; &#125; return root;&#125; ‰∫åÂèâÊ†ëÁöÑÊúÄËøëÂÖ¨ÂÖ±Á•ñÂÖàÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™‰∫åÂèâÊ†ë, ÊâæÂà∞ËØ•Ê†ë‰∏≠‰∏§‰∏™ÊåáÂÆöËäÇÁÇπÁöÑÊúÄËøëÂÖ¨ÂÖ±Á•ñÂÖà„ÄÇ ÁôæÂ∫¶ÁôæÁßë‰∏≠ÊúÄËøëÂÖ¨ÂÖ±Á•ñÂÖàÁöÑÂÆö‰πâ‰∏∫Ôºö‚ÄúÂØπ‰∫éÊúâÊ†πÊ†ë T ÁöÑ‰∏§‰∏™ÁªìÁÇπ p„ÄÅqÔºåÊúÄËøëÂÖ¨ÂÖ±Á•ñÂÖàË°®Á§∫‰∏∫‰∏Ä‰∏™ÁªìÁÇπ xÔºåÊª°Ë∂≥ x ÊòØ p„ÄÅq ÁöÑÁ•ñÂÖà‰∏î x ÁöÑÊ∑±Â∫¶Â∞ΩÂèØËÉΩÂ§ßÔºà‰∏Ä‰∏™ËäÇÁÇπ‰πüÂèØ‰ª•ÊòØÂÆÉËá™Â∑±ÁöÑÁ•ñÂÖàÔºâ„ÄÇ‚Äù ‰æãÂ¶ÇÔºåÁªôÂÆöÂ¶Ç‰∏ã‰∫åÂèâÊ†ë: root = [3,5,1,6,2,0,8,null,null,7,4] Á§∫‰æã 1: 123ËæìÂÖ•: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1ËæìÂá∫: 3Ëß£Èáä: ËäÇÁÇπ 5 ÂíåËäÇÁÇπ 1 ÁöÑÊúÄËøëÂÖ¨ÂÖ±Á•ñÂÖàÊòØËäÇÁÇπ 3„ÄÇ Á§∫‰æã 2: 123ËæìÂÖ•: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4ËæìÂá∫: 5Ëß£Èáä: ËäÇÁÇπ 5 ÂíåËäÇÁÇπ 4 ÁöÑÊúÄËøëÂÖ¨ÂÖ±Á•ñÂÖàÊòØËäÇÁÇπ 5„ÄÇÂõ†‰∏∫Ê†πÊçÆÂÆö‰πâÊúÄËøëÂÖ¨ÂÖ±Á•ñÂÖàËäÇÁÇπÂèØ‰ª•‰∏∫ËäÇÁÇπÊú¨Ë∫´„ÄÇ ËØ¥Êòé: ÊâÄÊúâËäÇÁÇπÁöÑÂÄºÈÉΩÊòØÂîØ‰∏ÄÁöÑ„ÄÇ p„ÄÅq ‰∏∫‰∏çÂêåËäÇÁÇπ‰∏îÂùáÂ≠òÂú®‰∫éÁªôÂÆöÁöÑ‰∫åÂèâÊ†ë‰∏≠„ÄÇ ÊÄùË∑ØÊ≥®ÊÑèp,qÂøÖÁÑ∂Â≠òÂú®Ê†ëÂÜÖ, ‰∏îÊâÄÊúâËäÇÁÇπÁöÑÂÄºÂîØ‰∏ÄÔºÅÔºÅÔºÅÈÄíÂΩíÊÄùÊÉ≥ÔºåÂØπ‰ª•root‰∏∫Ê†πÁöÑ(Â≠ê)Ê†ëËøõË°åÊü•ÊâæpÂíåqÔºåÂ¶ÇÊûúroot == null || p || q Áõ¥Êé•ËøîÂõûrootË°®Á§∫ÂØπ‰∫éÂΩìÂâçÊ†ëÁöÑÊü•ÊâæÂ∑≤ÁªèÂÆåÊØïÔºåÂê¶ÂàôÂØπÂ∑¶Âè≥Â≠êÊ†ëËøõË°åÊü•ÊâæÔºåÊ†πÊçÆÂ∑¶Âè≥Â≠êÊ†ëÁöÑËøîÂõûÂÄºÂà§Êñ≠: Â∑¶Âè≥Â≠êÊ†ëÁöÑËøîÂõûÂÄºÈÉΩ‰∏ç‰∏∫null, Áî±‰∫éÂÄºÂîØ‰∏ÄÂ∑¶Âè≥Â≠êÊ†ëÁöÑËøîÂõûÂÄºÂ∞±ÊòØpÂíåq, Ê≠§Êó∂root‰∏∫LCA Â¶ÇÊûúÂ∑¶Âè≥Â≠êÊ†ëËøîÂõûÂÄºÂè™Êúâ‰∏Ä‰∏™‰∏ç‰∏∫null, ËØ¥ÊòéÂè™ÊúâpÂíåqÂ≠òÂú®‰∫éÂ∑¶ÊàñÂè≥Â≠êÊ†ë‰∏≠, ÊúÄÂÖàÊâæÂà∞ÁöÑÈÇ£‰∏™ËäÇÁÇπ‰∏∫LCA Â∑¶Âè≥Â≠êÊ†ëËøîÂõûÂÄºÂùá‰∏∫null, pÂíåqÂùá‰∏çÂú®Ê†ë‰∏≠, ËøîÂõûnull ‰ª£Á†Å123456789class Solution &#123; public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) &#123; if(root == null || p == root || q == root)return root; TreeNode left = lowestCommonAncestor(root.left,p,q); TreeNode right = lowestCommonAncestor(root.right,p,q); if(left!=null &amp;&amp; right != null)return root; return left == null ? right : left; &#125;&#125; ‰∫åÂèâÊ†ëÁöÑÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñÈ¢òÁõÆÂ∫èÂàóÂåñÊòØÂ∞Ü‰∏Ä‰∏™Êï∞ÊçÆÁªìÊûÑÊàñËÄÖÂØπË±°ËΩ¨Êç¢‰∏∫ËøûÁª≠ÁöÑÊØîÁâπ‰ΩçÁöÑÊìç‰ΩúÔºåËøõËÄåÂèØ‰ª•Â∞ÜËΩ¨Êç¢ÂêéÁöÑÊï∞ÊçÆÂ≠òÂÇ®Âú®‰∏Ä‰∏™Êñá‰ª∂ÊàñËÄÖÂÜÖÂ≠ò‰∏≠ÔºåÂêåÊó∂‰πüÂèØ‰ª•ÈÄöËøáÁΩëÁªú‰º†ËæìÂà∞Âè¶‰∏Ä‰∏™ËÆ°ÁÆóÊú∫ÁéØÂ¢ÉÔºåÈááÂèñÁõ∏ÂèçÊñπÂºèÈáçÊûÑÂæóÂà∞ÂéüÊï∞ÊçÆ„ÄÇ ËØ∑ËÆæËÆ°‰∏Ä‰∏™ÁÆóÊ≥ïÊù•ÂÆûÁé∞‰∫åÂèâÊ†ëÁöÑÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñ„ÄÇËøôÈáå‰∏çÈôêÂÆö‰Ω†ÁöÑÂ∫èÂàó / ÂèçÂ∫èÂàóÂåñÁÆóÊ≥ïÊâßË°åÈÄªËæëÔºå‰Ω†Âè™ÈúÄË¶Å‰øùËØÅ‰∏Ä‰∏™‰∫åÂèâÊ†ëÂèØ‰ª•Ë¢´Â∫èÂàóÂåñ‰∏∫‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Âπ∂‰∏îÂ∞ÜËøô‰∏™Â≠óÁ¨¶‰∏≤ÂèçÂ∫èÂàóÂåñ‰∏∫ÂéüÂßãÁöÑÊ†ëÁªìÊûÑ„ÄÇ Á§∫‰æã: 123456789‰Ω†ÂèØ‰ª•Â∞Ü‰ª•‰∏ã‰∫åÂèâÊ†ëÔºö 1 / \ 2 3 / \ 4 5Â∫èÂàóÂåñ‰∏∫ "[1,2,3,null,null,4,5]" ÊèêÁ§∫: Ëøô‰∏é LeetCode ÁõÆÂâç‰ΩøÁî®ÁöÑÊñπÂºè‰∏ÄËá¥ÔºåËØ¶ÊÉÖËØ∑ÂèÇÈòÖ LeetCode Â∫èÂàóÂåñ‰∫åÂèâÊ†ëÁöÑÊ†ºÂºè„ÄÇ‰Ω†Âπ∂ÈùûÂøÖÈ°ªÈááÂèñËøôÁßçÊñπÂºèÔºå‰Ω†‰πüÂèØ‰ª•ÈááÁî®ÂÖ∂‰ªñÁöÑÊñπÊ≥ïËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ ËØ¥Êòé: ‰∏çË¶Å‰ΩøÁî®Á±ªÁöÑÊàêÂëò / ÂÖ®Â±Ä / ÈùôÊÄÅÂèòÈáèÊù•Â≠òÂÇ®Áä∂ÊÄÅÔºå‰Ω†ÁöÑÂ∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñÁÆóÊ≥ïÂ∫îËØ•ÊòØÊó†Áä∂ÊÄÅÁöÑ„ÄÇ ÊÄùË∑ØËøôÈ¢òÂÅö‰∫Ü‰∏§‰∏™Â∞èÊó∂‚Ä¶ËøòÊ≤°Êï¥Âá∫Êù•‚Ä¶ÊÄùË∑ØÂÖ∂ÂÆûÁâπÂà´ÁöÑÁÆÄÂçïÔºåÂ∞±ÊòØÁî®Â±ÇÂ∫èÈÅçÂéÜÔºåÂ∞ÜÊâÄÊúâÁªìÁÇπÂ≠òÂÖ•ÂàóË°®‰∏≠ÔºàÂåÖÊã¨‰∫ÜÁ©∫ËäÇÁÇπÔºâÔºåÁÑ∂ÂêéËΩ¨ÊàêÂ≠óÁ¨¶‰∏≤ÔºåÂ≠óÁ¨¶‰∏≤ÂÜçËΩ¨ÊàêÂàóË°®ÁÑ∂ÂêéÂª∫Á´ãÊ†ë Âç°Âú®Âª∫Á´ãÊ†ëËøôÂùó‚Ä¶ÂøÉÊÄÅÊúâÁÇπÁÇ∏‚Ä¶ÂÜ∑Èùô‰ºö ‰ª£Á†Å12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576public class Codec &#123; // Encodes a tree to a single string. public String serialize(TreeNode root) &#123; if (root == null) &#123; return "[]"; &#125; Queue&lt;String&gt; res = new LinkedList&lt;&gt;(); Queue&lt;TreeNode&gt; queue = new LinkedList&lt;&gt;(); queue.offer(root); res.offer(String.valueOf(root.val)); while(!queue.isEmpty()) &#123; TreeNode node = queue.poll(); // ÊúâÂ∑¶ËäÇÁÇπÂ∞±ÊèíÂÖ•Â∑¶ËäÇÁÇπÔºåÊ≤°ÊúâÂ∞±ÊèíÂÖ•null if (node.left != null) &#123; queue.offer(node.left); res.offer(String.valueOf(node.left.val)); &#125; else &#123; res.offer("null"); &#125; // ÊúâÂè≥ËäÇÁÇπÂ∞±ÊèíÂÖ•Âè≥ËäÇÁÇπÔºåÊ≤°ÊúâÂ∞±ÊèíÂÖ•null if (node.right != null) &#123; queue.offer(node.right); res.offer(String.valueOf(node.right.val)); &#125; else &#123; res.offer("null"); &#125; &#125; StringBuilder sb = new StringBuilder(); sb.append("["); while(!res.isEmpty()) &#123; sb.append(res.poll()); if (!res.isEmpty()) &#123; sb.append(","); &#125; &#125; sb.append("]"); return sb.toString(); &#125; // Decodes your encoded data to tree. public TreeNode deserialize(String data) &#123; data = data.substring(1, data.length()-1); if (data.length() == 0) &#123; return null; &#125; Queue&lt;String&gt; ls = new LinkedList&lt;&gt;(Arrays.asList(data.split(","))); Queue&lt;TreeNode&gt; queue = new LinkedList&lt;&gt;(); TreeNode root = null; while(!ls.isEmpty()) &#123; String res = ls.poll(); // ÂàõÂª∫Ê†πËäÇÁÇπ if (root == null) &#123; root = new TreeNode(Integer.valueOf(res)); queue.offer(root); continue; &#125; // Ê≥®ÊÑèÔºölsÁöÑÈïøÂ∫¶ÊÄªÊòØÂ•áÊï∞ÁöÑÔºåÊâÄ‰ª•Èô§‰∫ÜÊ†πËäÇÁÇπÔºåÂÖ∂‰ΩôËäÇÁÇπÂàõÂª∫Êó∂ÂèØ‰ª•‰∏ÄÊ¨°Âèñ‰∏§‰∏™ls‰∏≠ÁöÑÂÖÉÁ¥† TreeNode father = queue.poll(); // ÂàõÂª∫Â∑¶ËäÇÁÇπ if (!res.equals("null")) &#123; TreeNode curr = new TreeNode(Integer.valueOf(res)); father.left = curr; queue.offer(curr); &#125; // ÂàõÂª∫Âè≥ËäÇÁÇπ res = ls.poll(); if (!res.equals("null")) &#123; TreeNode curr = new TreeNode(Integer.valueOf(res)); father.right = curr; queue.offer(curr); &#125; &#125; return root; &#125;&#125; ÁøªËΩ¨‰∫åÂèâÊ†ëÈ¢òÁõÆÁøªËΩ¨‰∏ÄÊ£µ‰∫åÂèâÊ†ë„ÄÇ Á§∫‰æãÔºö ËæìÂÖ•Ôºö 4 / \ 2 7 / \ / \ 1 3 6 9 ËæìÂá∫Ôºö 4 / \ 7 2 / \ / \ 9 6 3 1 ÊÄùË∑ØÈÄíÂΩí‚Ä¶Ê≥®ÈáäÊúâËØ¥ ‰ª£Á†Å1234567891011121314151617/** * ÈÄíÂΩí‰∏âÈÉ®Êõ≤ * 1„ÄÅÊâæÂà∞Âá∫Âè£ÔºåËäÇÁÇπ‰∏∫Á©∫Âç≥‰∏∫Âá∫Âè£ * 2„ÄÅÊâæÂà∞ËøîÂõûÂÄºÔºåËøîÂõûÂÄºÔºåËøîÂõûÂÄºÂ∫îËØ•ÊòØÂ≠êÊ†ëÁöÑÊ†πËäÇÁÇπ * 3„ÄÅ‰∏ÄÊ¨°ÈÄíÂΩíÈúÄË¶ÅÂÅöÂï•ÔºåÈúÄË¶ÅÂ∞ÜÂ∑¶Âè≥Â≠êÊ†ëÁøªËΩ¨ÔºåÁé∞Âú®Êàë‰ª¨Êâã‰∏ä‰πüÂ∞±ÊòØ‰∏â‰∏™ËäÇÁÇπ * ÂàÜÂà´ÊòØÊ†πËäÇÁÇπÔºåÂ∑¶Â≠êÊ†ëÊ†πËäÇÁÇπÔºåÂè≥Â≠êÊ†ëÊ†πËäÇÁÇπÔºåË¶ÅÂÅöÁöÑÂ∞±Âè™ÊòØÂ∑¶Âè≥Â≠êÊ†ëÊ†πËäÇÁÇπÁøªËΩ¨Âç≥ÂèØ * @param root * @return */private static TreeNode invertTree(TreeNode root)&#123; if(root == null) return null; TreeNode left = invertTree(root.left); TreeNode right = invertTree(root.right); root.left = right; root.right = left; return root;&#125; ÂêàÂπ∂‰∫åÂèâÊ†ëÈ¢òÁõÆÁªôÂÆö‰∏§‰∏™‰∫åÂèâÊ†ëÔºåÊÉ≥Ë±°ÂΩì‰Ω†Â∞ÜÂÆÉ‰ª¨‰∏≠ÁöÑ‰∏Ä‰∏™Ë¶ÜÁõñÂà∞Âè¶‰∏Ä‰∏™‰∏äÊó∂Ôºå‰∏§‰∏™‰∫åÂèâÊ†ëÁöÑ‰∏Ä‰∫õËäÇÁÇπ‰æø‰ºöÈáçÂè†„ÄÇ ‰Ω†ÈúÄË¶ÅÂ∞Ü‰ªñ‰ª¨ÂêàÂπ∂‰∏∫‰∏Ä‰∏™Êñ∞ÁöÑ‰∫åÂèâÊ†ë„ÄÇÂêàÂπ∂ÁöÑËßÑÂàôÊòØÂ¶ÇÊûú‰∏§‰∏™ËäÇÁÇπÈáçÂè†ÔºåÈÇ£‰πàÂ∞Ü‰ªñ‰ª¨ÁöÑÂÄºÁõ∏Âä†‰Ωú‰∏∫ËäÇÁÇπÂêàÂπ∂ÂêéÁöÑÊñ∞ÂÄºÔºåÂê¶Âàô‰∏ç‰∏∫ NULL ÁöÑËäÇÁÇπÂ∞ÜÁõ¥Êé•‰Ωú‰∏∫Êñ∞‰∫åÂèâÊ†ëÁöÑËäÇÁÇπ„ÄÇ Á§∫‰æã 1: 1234567891011121314ËæìÂÖ•: Tree 1 Tree 2 1 2 / \ / \ 3 2 1 3 / \ \ 5 4 7 ËæìÂá∫: ÂêàÂπ∂ÂêéÁöÑÊ†ë: 3 / \ 4 5 / \ \ 5 4 7 Ê≥®ÊÑè: ÂêàÂπ∂ÂøÖÈ°ª‰ªé‰∏§‰∏™Ê†ëÁöÑÊ†πËäÇÁÇπÂºÄÂßã„ÄÇ ÊÄùË∑Ø‰ΩøÁî®ÈÄíÂΩí„ÄÇÊàë‰ª¨ÂèØ‰ª•ÂØπËøô‰∏§Ê£µÊ†ëÂêåÊó∂ËøõË°åÂâçÂ∫èÈÅçÂéÜÔºåÂπ∂Â∞ÜÂØπÂ∫îÁöÑËäÇÁÇπËøõË°åÂêàÂπ∂„ÄÇÂú®ÈÅçÂéÜÊó∂ÔºåÂ¶ÇÊûú‰∏§Ê£µÊ†ëÁöÑÂΩìÂâçËäÇÁÇπÂùá‰∏ç‰∏∫Á©∫ÔºåÊàë‰ª¨Â∞±Â∞ÜÂÆÉ‰ª¨ÁöÑÂÄºËøõË°åÁõ∏Âä†ÔºåÂπ∂ÂØπÂÆÉ‰ª¨ÁöÑÂ∑¶Â≠©Â≠êÂíåÂè≥Â≠©Â≠êËøõË°åÈÄíÂΩíÂêàÂπ∂ÔºõÂ¶ÇÊûúÂÖ∂‰∏≠Êúâ‰∏ÄÊ£µÊ†ë‰∏∫Á©∫ÔºåÈÇ£‰πàÊàë‰ª¨ËøîÂõûÂè¶‰∏ÄÈ¢óÊ†ë‰Ωú‰∏∫ÁªìÊûúÔºõÂ¶ÇÊûú‰∏§Ê£µÊ†ëÂùá‰∏∫Á©∫ÔºåÊ≠§Êó∂ËøîÂõû‰ªªÊÑè‰∏ÄÊ£µÊ†ëÂùáÂèØÔºàÂõ†‰∏∫ÈÉΩÊòØÁ©∫Ôºâ„ÄÇ ‰ª£Á†Å123456789101112131415161718192021/** * Definition for a binary tree node. * public class TreeNode &#123; * int val; * TreeNode left; * TreeNode right; * TreeNode(int x) &#123; val = x; &#125; * &#125; */public class Solution &#123; public TreeNode mergeTrees(TreeNode t1, TreeNode t2) &#123; if (t1 == null) return t2; if (t2 == null) return t1; t1.val += t2.val; t1.left = mergeTrees(t1.left, t2.left); t1.right = mergeTrees(t1.right, t2.right); return t1; &#125;&#125; È™åËØÅ‰∫åÂèâÊêúÁ¥¢Ê†ëÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™‰∫åÂèâÊ†ëÔºåÂà§Êñ≠ÂÖ∂ÊòØÂê¶ÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑ‰∫åÂèâÊêúÁ¥¢Ê†ë„ÄÇ ÂÅáËÆæ‰∏Ä‰∏™‰∫åÂèâÊêúÁ¥¢Ê†ëÂÖ∑ÊúâÂ¶Ç‰∏ãÁâπÂæÅÔºö ËäÇÁÇπÁöÑÂ∑¶Â≠êÊ†ëÂè™ÂåÖÂê´Â∞è‰∫éÂΩìÂâçËäÇÁÇπÁöÑÊï∞„ÄÇ ËäÇÁÇπÁöÑÂè≥Â≠êÊ†ëÂè™ÂåÖÂê´Â§ß‰∫éÂΩìÂâçËäÇÁÇπÁöÑÊï∞„ÄÇ ÊâÄÊúâÂ∑¶Â≠êÊ†ëÂíåÂè≥Â≠êÊ†ëËá™Ë∫´ÂøÖÈ°ª‰πüÊòØ‰∫åÂèâÊêúÁ¥¢Ê†ë„ÄÇ Á§∫‰æã 1: 12345ËæìÂÖ•: 2 / \ 1 3ËæìÂá∫: true Á§∫‰æã 2: 123456789ËæìÂÖ•: 5 / \ 1 4 / \ 3 6ËæìÂá∫: falseËß£Èáä: ËæìÂÖ•‰∏∫: [5,1,4,null,null,3,6]„ÄÇÊ†πËäÇÁÇπÁöÑÂÄº‰∏∫ 5 Ôºå‰ΩÜÊòØÂÖ∂Âè≥Â≠êËäÇÁÇπÂÄº‰∏∫ 4 „ÄÇ ÊÄùË∑Ø‰∫åÂèâÊêúÁ¥¢Ê†ëÁöÑÁâπÁÇπÔºåÂ∞±ÊòØÊ†πËäÇÁÇπË¶ÅÂ§ß‰∫éÂ∑¶Â≠êÊ†ëÂÖ®ÈÉ®ËäÇÁÇπÁöÑÊï∞ÔºåÂ∞è‰∫éÂè≥Â≠êÊ†ëÂÖ®ÈÉ®ËäÇÁÇπÁöÑÊï∞ÔºåÊïÖÂ¶ÇÊûúÊàë‰ª¨ÊòØ‰∏≠Â∫èÈÅçÂéÜÔºåÂàô‰∫åÂèâÊêúÁ¥¢Ê†ëÈÅçÂéÜÁöÑËäÇÁÇπÁöÑÂÄº‰∏ÄÂÆöÊòØÈÄíÂ¢ûÁöÑÔºÅÂΩìÁÑ∂Êàë‰ª¨Ê≤°ÊúâÂøÖË¶ÅÁî®‰∏Ä‰∏™Êï∞ÁªÑÂ∞ÜÊâÄÊúâËäÇÁÇπÁöÑÂÄºÂ≠òËµ∑Êù•ÔºåÂè™ÈúÄË¶ÅÂ≠òÂÇ®ÂΩìÂâçÈÅçÂéÜËäÇÁÇπÁöÑ‰πãÂâç‰∏Ä‰∏™ËäÇÁÇπÁöÑÂÄºÂç≥ÂèØÔºÅ ‰ª£Á†Å123456789101112131415class Solution &#123; public boolean isValidBST(TreeNode root) &#123; // ‰∏çÁî®int[]ÊòØ‰∏∫‰∫ÜÈò≤Ê≠¢ÂàùÂßãÂåñÂÄºÁ≠â‰∫éTreeNode‰∏≠ÁöÑval return validByInorderTraversal(root, new long[] &#123;Long.MIN_VALUE&#125;); &#125; boolean validByInorderTraversal(TreeNode root, long[] prev) &#123; if (root == null) return true; if (!validByInorderTraversal(root.left, prev)) return false; // ÊØèÊ¨°Ë∑üÂè™Ë∑üÂâç‰∏Ä‰∏™ÂÖÉÁ¥†ÂÅöÂà§Êñ≠ÔºåÁ¨¶ÂêàÊù°‰ª∂ÂàôÊõøÊç¢ÔºåÂê¶ÂàôËøîÂõûfalse if (prev[0] &gt;= root.val) return false; prev[0] = root.val; if (!validByInorderTraversal(root.right, prev)) return false; return true; &#125;&#125; ‰∫åÂèâÊ†ëÁöÑÁõ¥ÂæÑÈ¢òÁõÆÁªôÂÆö‰∏ÄÊ£µ‰∫åÂèâÊ†ëÔºå‰Ω†ÈúÄË¶ÅËÆ°ÁÆóÂÆÉÁöÑÁõ¥ÂæÑÈïøÂ∫¶„ÄÇ‰∏ÄÊ£µ‰∫åÂèâÊ†ëÁöÑÁõ¥ÂæÑÈïøÂ∫¶ÊòØ‰ªªÊÑè‰∏§‰∏™ÁªìÁÇπË∑ØÂæÑÈïøÂ∫¶‰∏≠ÁöÑÊúÄÂ§ßÂÄº„ÄÇËøôÊù°Ë∑ØÂæÑÂèØËÉΩÁ©øËøáÊ†πÁªìÁÇπ„ÄÇ Á§∫‰æã :ÁªôÂÆö‰∫åÂèâÊ†ë 12345 1 / \ 2 3 / \ 4 5 ËøîÂõû 3, ÂÆÉÁöÑÈïøÂ∫¶ÊòØË∑ØÂæÑ [4,2,1,3] ÊàñËÄÖ [5,2,1,3]„ÄÇ Ê≥®ÊÑèÔºö‰∏§ÁªìÁÇπ‰πãÈó¥ÁöÑË∑ØÂæÑÈïøÂ∫¶ÊòØ‰ª•ÂÆÉ‰ª¨‰πãÈó¥ËæπÁöÑÊï∞ÁõÆË°®Á§∫„ÄÇ ÊÄùË∑ØÊåâÁÖßÂ∏∏Áî®ÊñπÊ≥ïËÆ°ÁÆó‰∏Ä‰∏™ËäÇÁÇπÁöÑÊ∑±Â∫¶Ôºömax(depth of node.left, depth of node.right) + 1„ÄÇÂú®ËÆ°ÁÆóÁöÑÂêåÊó∂ÔºåÁªèËøáËøô‰∏™ËäÇÁÇπÁöÑÊúÄÂ§ßÁõ¥ÂæÑ‰∏∫ (depth of node.left) + (depth of node.right) „ÄÇÊêúÁ¥¢ÊØè‰∏™ËäÇÁÇπÂπ∂ËÆ∞ÂΩïËøô‰∫õË∑ØÂæÑÁªèËøáÁöÑÁÇπÊï∞ÊúÄÂ§ßÂÄºÔºåÊúüÊúõÈïøÂ∫¶ÊòØÂ∞±ÊòØÁªìÊûú„ÄÇ ‰ª£Á†Å12345678910111213141516class Solution &#123; int ans; public int diameterOfBinaryTree(TreeNode root) &#123; ans = 0; //ÊãøÂà∞ÊØè‰∏™ËäÇÁÇπÁöÑÂ∑¶Âè≥Â≠êÊ†ëÁöÑÊ∑±Â∫¶ÁöÑÂíåÔºåans‰ª£Ë°®‰∫ÜÊúÄÈïøÁõ¥ÂæÑÔºåÂÖ∂ÂÆû‰πüÂ∞±ÊòØÊúÄÂ§ßÁöÑÂ∑¶Âè≥Â≠êÊ†ëÊ∑±Â∫¶‰πãÂíå depth(root); return ans; &#125; public int depth(TreeNode node) &#123; if (node == null) return 0; int L = depth(node.left); int R = depth(node.right); ans = Math.max(ans, L+R); return Math.max(L, R) + 1; &#125;&#125; Êää‰∫åÂèâÊêúÁ¥¢Ê†ëËΩ¨Êç¢‰∏∫Á¥ØÂä†Ê†ëÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™‰∫åÂèâÊêúÁ¥¢Ê†ëÔºàBinary Search TreeÔºâÔºåÊääÂÆÉËΩ¨Êç¢Êàê‰∏∫Á¥ØÂä†Ê†ëÔºàGreater Tree)Ôºå‰ΩøÂæóÊØè‰∏™ËäÇÁÇπÁöÑÂÄºÊòØÂéüÊù•ÁöÑËäÇÁÇπÂÄºÂä†‰∏äÊâÄÊúâÂ§ß‰∫éÂÆÉÁöÑËäÇÁÇπÂÄº‰πãÂíå„ÄÇ ‰æãÂ¶ÇÔºö 123456789101112ËæìÂÖ•: ‰∫åÂèâÊêúÁ¥¢Ê†ë: 5 / \ 2 13ËæìÂá∫: ËΩ¨Êç¢‰∏∫Á¥ØÂä†Ê†ë: 18 / \ 20 13Êù•Ê∫êÔºöÂäõÊâ£ÔºàLeetCodeÔºâÈìæÊé•Ôºöhttps://leetcode-cn.com/problems/convert-bst-to-greater-tree ÊÄùË∑Ø‰∫åÂèâÊêúÁ¥¢Ê†ëÔºåÁ¨¨‰∏ÄÊÉ≥Ê≥ïÂ∞±ÊòØÁî®‰∏≠Â∫èÈÄíÂΩíÂéªÂÅöÔºåÁ¥ØÂä†Ê†ëÁöÑÊÑèÊÄùÊòØ Ê†πËäÇÁÇπÁöÑÂÄº = Ê†πËäÇÁÇπÁöÑÂÄº + Âè≥Â≠êÊ†ëÁöÑÂÄº ÔºåÁÑ∂ÂêéÂÜçÊõ¥Êñ∞Â∑¶Â≠êÊ†ëÁöÑÂÄº = Ê†πËäÇÁÇπÁöÑÂÄº + Â∑¶Â≠êÊ†ëÁöÑÂÄºÔºåÊâÄ‰ª•Â∞±Á¨¶ÂêàÂè≥‰∏≠Â∑¶ÁöÑÈÅçÂéÜÈ°∫Â∫èÔºåÂè™Ë¶ÅÂÜôÂá∫Êù•Âè≥‰∏≠Â∑¶ÁöÑÈÄíÂΩíÔºåÁÑ∂ÂêéÁî®‰∏Ä‰∏™ÂÖ®Â±ÄÂèòÈáèËÆ∞ÂΩï‰∏ä‰∏Ä‰∏™ÈÅçÂéÜÁöÑËäÇÁÇπÁöÑÂÄºÂÜçÂä†‰∏äÊú¨Ë∫´ÁöÑÂÄºÔºåÂ∞±okay‰∫ÜÔºÅ ‰ª£Á†Å1234567891011class Solution &#123; int add = 0; public TreeNode convertBST(TreeNode root) &#123; if (root == null) return root; convertBST(root.right); root.val += add; add = root.val; convertBST(root.left); return root; &#125;&#125; Tip: ÂÖ∂ÂÆû‰∏™‰∫∫ËßâÂæóËøô‰∏™È¢òÁõÆÊúâÈóÆÈ¢òÔºåÊó¢ÁÑ∂ÊòØÁ¥ØÂä†Ê†ëÔºå‰∏∫‰ΩïÊòØÊåâÁÖßÂè≥‰∏≠Â∑¶ÁöÑÈÅçÂéÜÈ°∫Â∫èÊù•Á¥ØÂä†Âë¢‚Ä¶ÊàëÁöÑÊ†πËäÇÁÇπËøòÂæóÂä†Âà∞ÊàëÂ∑¶Â≠êÊ†ëÁöÑÊúÄÂè≥Âè∂Â≠êËäÇÁÇπ‰∏äÔºÅÁúüÁöÑËçíÂîêÂïä‚Ä¶ ‰∫åÂèâÊ†ëÂ±ïÂºÄ‰∏∫ÈìæË°®È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™‰∫åÂèâÊ†ëÔºåÂéüÂú∞Â∞ÜÂÆÉÂ±ïÂºÄ‰∏∫ÈìæË°®„ÄÇ ‰æãÂ¶ÇÔºåÁªôÂÆö‰∫åÂèâÊ†ë 12345 1 / \ 2 5 / \ \3 4 6 Â∞ÜÂÖ∂Â±ïÂºÄ‰∏∫Ôºö 12345678910111 \ 2 \ 3 \ 4 \ 5 \ 6 ÊÄùË∑ØÊ≥®ÊÑèÈ¢òÁõÆÁöÑË¶ÅÊ±ÇÊòØ ÂéüÂú∞ Â±ïÂºÄÔºÅ ËøôÈáåÂº∫Êé®‰∏ÄÊâãÈ¢òËß£Èáå‰∏Ä‰ΩçÂ§ß‰Ω¨ÂÜôÁöÑÔºÅÊÄªÂÖ±3‰∏™Â§ßÊñπÊ≥ïÔºåÈùûÂ∏∏Â•ΩÔºÅÔºÅÔºÅ ‰∫åÂèâÊ†ëËΩ¨Êç¢ÊàêÈìæË°® Ëß£Ê≥ï‰∏Ä[Ëá™È°∂Âêë‰∏ãÈùûÈÄíÂΩí]ÂèØ‰ª•ÂèëÁé∞Â±ïÂºÄÁöÑÈ°∫Â∫èÂÖ∂ÂÆûÂ∞±ÊòØ‰∫åÂèâÊ†ëÁöÑÂÖàÂ∫èÈÅçÂéÜ„ÄÇÁÆóÊ≥ïÂíå 94 È¢ò‰∏≠Â∫èÈÅçÂéÜÁöÑ Morris ÁÆóÊ≥ïÊúâ‰∫õÁ•û‰ºº„ÄÇ Â∞ÜÂ∑¶Â≠êÊ†ëÊèíÂÖ•Âà∞Âè≥Â≠êÊ†ëÁöÑÂú∞Êñπ Â∞ÜÂéüÊù•ÁöÑÂè≥Â≠êÊ†ëÊé•Âà∞Â∑¶Â≠êÊ†ëÁöÑÊúÄÂè≥ËæπËäÇÁÇπ ‰ª£Á†ÅÁöÑËØù‰πüÂæàÂ•ΩÂÜôÔºåÈ¶ñÂÖàÊàë‰ª¨ÈúÄË¶ÅÊâæÂá∫Â∑¶Â≠êÊ†ëÊúÄÂè≥ËæπÁöÑËäÇÁÇπ‰ª•‰æøÊääÂè≥Â≠êÊ†ëÊé•ËøáÊù•„ÄÇ 1234567891011121314151617181920public void flatten(TreeNode root) &#123; while (root != null) &#123; //Â∑¶Â≠êÊ†ë‰∏∫ nullÔºåÁõ¥Êé•ËÄÉËôë‰∏ã‰∏Ä‰∏™ËäÇÁÇπ if (root.left == null) &#123; root = root.right; &#125; else &#123; // ÊâæÂ∑¶Â≠êÊ†ëÊúÄÂè≥ËæπÁöÑËäÇÁÇπ TreeNode pre = root.left; while (pre.right != null) &#123; pre = pre.right; &#125; //Â∞ÜÂéüÊù•ÁöÑÂè≥Â≠êÊ†ëÊé•Âà∞Â∑¶Â≠êÊ†ëÁöÑÊúÄÂè≥ËæπËäÇÁÇπ pre.right = root.right; // Â∞ÜÂ∑¶Â≠êÊ†ëÊèíÂÖ•Âà∞Âè≥Â≠êÊ†ëÁöÑÂú∞Êñπ root.right = root.left; root.left = null; // ËÄÉËôë‰∏ã‰∏Ä‰∏™ËäÇÁÇπ root = root.right; &#125; &#125; Ëß£Ê≥ï‰∫å[Ëá™È°∂Âêë‰∏äÔºåÊé®Ëçê]È¢òÁõÆ‰∏≠ÔºåË¶ÅÊ±ÇËØ¥ÊòØ in-placeÔºå‰πãÂâç‰∏ÄÁõ¥‰ª•‰∏∫Ëøô‰∏™ÊÑèÊÄùÂ∞±ÊòØË¶ÅÊ±ÇÁ©∫Èó¥Â§çÊùÇÂ∫¶ÊòØ O(1)„ÄÇÂÅ∂ÁÑ∂ÁúãËßÅËØÑËÆ∫Âå∫Â§ßÁ•ûÁöÑËß£ÈáäÔºå in-place ÁöÑÊÑèÊÄùÂèØËÉΩÊõ¥Â§öËØ¥ÁöÑÊòØÁõ¥Êé•Âú®ÂéüÊù•ÁöÑËäÇÁÇπ‰∏äÊîπÂèòÊåáÂêëÔºåÁ©∫Èó¥Â§çÊùÇÂ∫¶Âπ∂Ê≤°ÊúâË¶ÅÊ±Ç„ÄÇÊâÄ‰ª•ËøôÈÅìÈ¢ò‰πüÂèØ‰ª•Áî®ÈÄíÂΩíËß£‰∏Ä‰∏ã„ÄÇÂà©Áî®ÂèòÂΩ¢ÁöÑÂêéÂ∫èÈÅçÂéÜ Âè≥Â∑¶Ê†πÂç≥ÂèØ„ÄÇ 1234567891011private TreeNode pre = null;public void flatten(TreeNode root) &#123; if (root == null) return; flatten(root.right); flatten(root.left); root.right = pre; root.left = null; pre = root;&#125; Áõ∏Â∫îÁöÑÂ∑¶Â≠©Â≠ê‰πüË¶ÅÁΩÆ‰∏∫ nullÔºåÂêåÊ†∑ÁöÑ‰πü‰∏çÁî®ÊãÖÂøÉÂ∑¶Â≠©Â≠ê‰∏¢Â§±ÔºåÂõ†‰∏∫ÊòØÂêéÂ∫èÈÅçÂéÜÔºåÂ∑¶Â≠©Â≠êÂ∑≤ÁªèÈÅçÂéÜËøá‰∫Ü„ÄÇÂíå 112 È¢ò‰∏ÄÊ†∑ÔºåÈÉΩÂ∑ßÂ¶ôÁöÑÂà©Áî®‰∫ÜÂêéÂ∫èÈÅçÂéÜ„ÄÇ Êó¢ÁÑ∂ÂêéÂ∫èÈÅçÂéÜËøô‰πàÊúâÁî®ÔºåÂà©Áî® 112 È¢ò‰ªãÁªçÁöÑÂêéÂ∫èÈÅçÂéÜÁöÑËø≠‰ª£ÊñπÊ≥ïÔºåÊääËøôÈÅìÈ¢ò‰πüÊîπ‰∏Ä‰∏ãÂêß„ÄÇ 12345678910111213141516171819202122232425public void flatten(TreeNode root) &#123; Stack&lt;TreeNode&gt; toVisit = new Stack&lt;&gt;(); TreeNode cur = root; TreeNode pre = null; while (cur != null || !toVisit.isEmpty()) &#123; while (cur != null) &#123; toVisit.push(cur); // Ê∑ªÂä†Ê†πËäÇÁÇπ cur = cur.right; // ÈÄíÂΩíÊ∑ªÂä†Âè≥ËäÇÁÇπ &#125; cur = toVisit.peek(); // Â∑≤ÁªèËÆøÈóÆÂà∞ÊúÄÂè≥ÁöÑËäÇÁÇπ‰∫Ü // Âú®‰∏çÂ≠òÂú®Â∑¶ËäÇÁÇπÊàñËÄÖÂè≥ËäÇÁÇπÂ∑≤ÁªèËÆøÈóÆËøáÁöÑÊÉÖÂÜµ‰∏ãÔºåËÆøÈóÆÊ†πËäÇÁÇπ if (cur.left == null || cur.left == pre) &#123; toVisit.pop(); /**************‰øÆÊîπÁöÑÂú∞Êñπ***************/ cur.right = pre; cur.left = null; /*************************************/ pre = cur; cur = null; &#125; else &#123; cur = cur.left; // Â∑¶ËäÇÁÇπËøòÊ≤°ÊúâËÆøÈóÆËøáÂ∞±ÂÖàËÆøÈóÆÂ∑¶ËäÇÁÇπ &#125; &#125; &#125; Ëß£Ê≥ï‰∏â[Ëá™È°∂Âêë‰∏ä]Ëß£Ê≥ï‰∫å‰∏≠ÊèêÂà∞Â¶ÇÊûúÁî®ÂÖàÂ∫èÈÅçÂéÜÁöÑËØùÔºå‰ºö‰∏¢Â§±ÊéâÂè≥Â≠©Â≠êÔºåÈô§‰∫ÜÁî®ÂêéÂ∫èÈÅçÂéÜÔºåËøòÊúâÊ≤°ÊúâÂÖ∂‰ªñÁöÑÊñπÊ≥ïÈÅøÂÖçËøô‰∏™ÈóÆÈ¢ò„ÄÇÂú® Discuss ÂèàÂèëÁé∞‰∫Ü‰∏ÄÁßçËß£Ê≥ï„ÄÇ ‰∏∫‰∫ÜÊõ¥Â•ΩÁöÑÊéßÂà∂ÁÆóÊ≥ïÔºåÊâÄ‰ª•Êàë‰ª¨Áî®ÂÖàÂ∫èÈÅçÂéÜËø≠‰ª£ÁöÑÂΩ¢ÂºèÔºåÊ≠£Â∏∏ÁöÑÂÖàÂ∫èÈÅçÂéÜ‰ª£Á†ÅÂ¶Ç‰∏ãÔºå 123456789101112131415public static void preOrderStack(TreeNode root) &#123; if (root == null) &#123; return; &#125; Stack&lt;TreeNode&gt; s = new Stack&lt;TreeNode&gt;(); while (root != null || !s.isEmpty()) &#123; while (root != null) &#123; System.out.println(root.val); s.push(root); root = root.left; &#125; root = s.pop(); root = root.right; &#125;&#125; ËøòÊúâ‰∏ÄÁßçÁâπÊÆäÁöÑÂÖàÂ∫èÈÅçÂéÜÔºåÊèêÂâçÂ∞ÜÂè≥Â≠©Â≠ê‰øùÂ≠òÂà∞Ê†à‰∏≠ÔºåÊàë‰ª¨Âà©Áî®ËøôÁßçÈÅçÂéÜÊñπÂºèÂ∞±ÂèØ‰ª•Èò≤Ê≠¢Âè≥Â≠©Â≠êÁöÑ‰∏¢Â§±‰∫Ü„ÄÇÁî±‰∫éÊ†àÊòØÂÖàËøõÂêéÂá∫ÔºåÊâÄ‰ª•Êàë‰ª¨ÂÖàÂ∞ÜÂè≥ËäÇÁÇπÂÖ•Ê†à„ÄÇ 1234567891011121314151617public static void preOrderStack(TreeNode root) &#123; if (root == null)&#123; return; &#125; Stack&lt;TreeNode&gt; s = new Stack&lt;TreeNode&gt;(); s.push(root); while (!s.isEmpty()) &#123; TreeNode temp = s.pop(); System.out.println(temp.val); if (temp.right != null)&#123; s.push(temp.right); &#125; if (temp.left != null)&#123; s.push(temp.left); &#125; &#125;&#125; ‰πãÂâçÊàë‰ª¨ÁöÑÊÄùË∑ØÂ¶Ç‰∏ãÔºö È¢òÁõÆÂÖ∂ÂÆûÂ∞±ÊòØÂ∞Ü‰∫åÂèâÊ†ëÈÄöËøáÂè≥ÊåáÈíàÔºåÁªÑÊàê‰∏Ä‰∏™ÈìæË°®„ÄÇ 11 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5 -&gt; 6 Êàë‰ª¨Áü•ÈÅìÈ¢òÁõÆÁªôÂÆöÁöÑÈÅçÂéÜÈ°∫Â∫èÂÖ∂ÂÆûÂ∞±ÊòØÂÖàÂ∫èÈÅçÂéÜÁöÑÈ°∫Â∫èÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•Âà©Áî®ÂÖàÂ∫èÈÅçÂéÜÁöÑ‰ª£Á†ÅÔºåÊØèÈÅçÂéÜ‰∏Ä‰∏™ËäÇÁÇπÔºåÂ∞±Â∞Ü‰∏ä‰∏Ä‰∏™ËäÇÁÇπÁöÑÂè≥ÊåáÈíàÊõ¥Êñ∞‰∏∫ÂΩìÂâçËäÇÁÇπ„ÄÇ12345ÂÖàÂ∫èÈÅçÂéÜÁöÑÈ°∫Â∫èÊòØ 1 2 3 4 5 6„ÄÇÈÅçÂéÜÂà∞ 2ÔºåÊää 1 ÁöÑÂè≥ÊåáÈíàÊåáÂêë 2„ÄÇ1 -&gt; 2 3 4 5 6„ÄÇÈÅçÂéÜÂà∞ 3ÔºåÊää 2 ÁöÑÂè≥ÊåáÈíàÊåáÂêë 3„ÄÇ1 -&gt; 2 -&gt; 3 4 5 6„ÄÇ Âõ†‰∏∫Êàë‰ª¨Áî®Ê†à‰øùÂ≠ò‰∫ÜÂè≥Â≠©Â≠êÔºåÊâÄ‰ª•‰∏çÈúÄË¶ÅÊãÖÂøÉÂè≥Â≠©Â≠ê‰∏¢Â§±‰∫Ü„ÄÇÁî®‰∏Ä‰∏™ pre ÂèòÈáè‰øùÂ≠ò‰∏äÊ¨°ÈÅçÂéÜÁöÑËäÇÁÇπ„ÄÇ‰øÆÊîπÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö1234567891011121314151617181920212223242526public void flatten(TreeNode root) &#123; if (root == null)&#123; return; &#125; Stack&lt;TreeNode&gt; s = new Stack&lt;TreeNode&gt;(); s.push(root); TreeNode pre = null; while (!s.isEmpty()) &#123; TreeNode temp = s.pop(); /***********‰øÆÊîπÁöÑÂú∞Êñπ*************/ if(pre!=null)&#123; pre.right = temp; pre.left = null; &#125; /********************************/ if (temp.right != null)&#123; s.push(temp.right); &#125; if (temp.left != null)&#123; s.push(temp.left); &#125; /***********‰øÆÊîπÁöÑÂú∞Êñπ*************/ pre = temp; /********************************/ &#125;&#125; ÊÄªÁªìËß£Ê≥ï‰∏ÄÂíåËß£Ê≥ï‰∏âÂèØ‰ª•Áúã‰ΩúËá™È°∂Âêë‰∏ãÁöÑËß£ÂÜ≥ÈóÆÈ¢òÔºåËß£Ê≥ï‰∫åÂèØ‰ª•Áúã‰ΩúËá™Â∫ïÂêë‰∏ä„ÄÇ‰ª•ÂâçËßâÂæóÂêéÂ∫èÈÅçÂéÜÊØîËæÉÈ∫ªÁÉ¶ÔºåÊ≤°ÊÉ≥Âà∞Á´üÁÑ∂ËøûÁª≠ÈÅáÂà∞‰∫ÜÂêéÂ∫èÈÅçÂéÜÁöÑÂ∫îÁî®„ÄÇÂÖàÂ∫èÈÅçÂéÜÁöÑ‰∏§ÁßçÊñπÂºèËá™Â∑±‰πüÊòØÁ¨¨‰∏ÄÊ¨°ÊÑèËØÜÂà∞Ôºå‰πãÂâçÈÉΩÊòØÁî®ÁöÑÁ¨¨‰∏ÄÁßçÊ≠£Â∏∏ÁöÑÊñπÂºè„ÄÇ ‰ΩúËÄÖÔºöwindliangÈìæÊé•Ôºöhttps://leetcode-cn.com/problems/flatten-binary-tree-to-linked-list/solution/xiang-xi-tong-su-de-si-lu-fen-xi-duo-jie-fa-by--26/ Tips: Ëøô‰∏™Â§ß‰Ω¨ÂÜôÁöÑÊòØÁúüÂ•ΩÔºÅ Ê∑±Â∫¶ÂíåÂπøÂ∫¶‰ºòÂÖàÊêúÁ¥¢BFSÊ°ÜÊû∂12345678910111213141516171819202122232425262728// ËÆ°ÁÆó‰ªéËµ∑ÁÇπ start Âà∞ÁªàÁÇπ target ÁöÑÊúÄËøëË∑ùÁ¶ªint BFS(Node start, Node target) &#123; Queue&lt;Node&gt; q; // Ê†∏ÂøÉÊï∞ÊçÆÁªìÊûÑ Set&lt;Node&gt; visited; // ÈÅøÂÖçËµ∞ÂõûÂ§¥Ë∑Ø q.offer(start); // Â∞ÜËµ∑ÁÇπÂä†ÂÖ•ÈòüÂàó visited.add(start); int step = 0; // ËÆ∞ÂΩïÊâ©Êï£ÁöÑÊ≠•Êï∞ while (q not empty) &#123; int sz = q.size(); /* Â∞ÜÂΩìÂâçÈòüÂàó‰∏≠ÁöÑÊâÄÊúâËäÇÁÇπÂêëÂõõÂë®Êâ©Êï£ */ for (int i = 0; i &lt; sz; i++) &#123; Node cur = q.poll(); /* ÂàíÈáçÁÇπÔºöËøôÈáåÂà§Êñ≠ÊòØÂê¶Âà∞ËææÁªàÁÇπ */ if (cur is target) return step; /* Â∞Ü cur ÁöÑÁõ∏ÈÇªËäÇÁÇπÂä†ÂÖ•ÈòüÂàó */ for (Node x : cur.adj()) if (x not in visited) &#123; q.offer(x); visited.add(x); &#125; &#125; /* ÂàíÈáçÁÇπÔºöÊõ¥Êñ∞Ê≠•Êï∞Âú®ËøôÈáå */ step++; &#125;&#125; ÈòüÂàó q Â≠òÂÇ®ÂΩìÂâçÈúÄË¶ÅÈÅçÂéÜÁöÑËäÇÁÇπÔºåBFS ÁöÑÊ†∏ÂøÉÊï∞ÊçÆÁªìÊûÑÔºõcur.adj() Ê≥õÊåá cur Áõ∏ÈÇªÁöÑËäÇÁÇπÔºåÊØîÂ¶ÇËØ¥‰∫åÁª¥Êï∞ÁªÑ‰∏≠Ôºåcur ‰∏ä‰∏ãÂ∑¶Âè≥ÂõõÈù¢ÁöÑ‰ΩçÁΩÆÂ∞±ÊòØÁõ∏ÈÇªËäÇÁÇπÔºõvisited ÁöÑ‰∏ªË¶Å‰ΩúÁî®ÊòØÈò≤Ê≠¢Ëµ∞ÂõûÂ§¥Ë∑ØÔºåÂ§ßÈÉ®ÂàÜÊó∂ÂÄôÈÉΩÊòØÂøÖÈ°ªÁöÑÔºå‰ΩÜÊòØÂÉè‰∏ÄËà¨ÁöÑ‰∫åÂèâÊ†ëÁªìÊûÑÔºåÊ≤°ÊúâÂ≠êËäÇÁÇπÂà∞Áà∂ËäÇÁÇπÁöÑÊåáÈíàÔºå‰∏ç‰ºöËµ∞ÂõûÂ§¥Ë∑ØÂ∞±‰∏çÈúÄË¶Å visited„ÄÇ]]></content>
  </entry>
  <entry>
    <title><![CDATA[Â§çËØïÂáÜÂ§á]]></title>
    <url>%2F2020%2F01%2F05%2F%E5%A4%8D%E8%AF%95%E5%87%86%E5%A4%87.html</url>
    <content type="text"><![CDATA[Â§çËØïÂáÜÂ§áÂ§ßÊ¶ÇËØ¥‰∏Ä‰∏ãÂáÜÂ§áÁ≠ñÁï•Âêß‚Ä¶ÊúÄËøëÊúâËÄÉËØïÔºå‰πüÊ≤°Âï•Êó∂Èó¥ÔºåÂ∞±ÂàùÁï•ÁöÑÂÜô‰∏Ä‰∏ãÂè≠‚Ä¶ÂáëÂêàÁúãÔºÅ Ê¶ÇËø∞‰ªäÂπ¥ÁöÑÂ§çËØïË∑üÂéªÂπ¥Âè™Êúâ‰∏Ä‰∏™‰∏çÂêåÔºåÂ∞±ÊòØÂ∞ÜÂæÄÂπ¥ÁöÑ30ÂàÜÁöÑËÆ°ÁÆóÊú∫ÁΩëÁªúÊõ¥Êç¢‰∏∫ÁÆóÊ≥ïËÆæËÆ°‰∏éÂàÜÊûêÔºåÂÖ∂‰ªñÂÖ®ÈÉ®‰øùÊåÅ‰∏ÄËá¥„ÄÇ Â§çËØïÂàÜ‰∏∫Êú∫ËØï(200) + Èù¢ËØï(140) + Ëã±ËØ≠Á¨îËØï(10)ÔºåÊÄªÂàÜÂÖ±ËÆ°350ÂàÜÔºåÊúÄÂêéÂàÜÊï∞ÊòØÁõ¥Êé•‰∏éÂàùËØïÂàÜÊï∞Áõ∏Âä†ÔºåÊåâÁÖßÊÄªÊàêÁª© ÂàÜÊï∞ËøõË°åÊéíÂêçÔºåÂÖ∂‰∏≠Êú∫ËØïÂ∞§‰∏∫ÂÖ≥ÈîÆÔºåÊåâÁÖßÂæÄÂπ¥ÁªèÈ™åÊù•ËØ¥ÔºåÊú∫ËØïÂàÜÂ∑ÆÂú®50ÂàÜÂ∑¶Âè≥ÈÉΩÊòØÈùûÂ∏∏Â∏∏ËßÅÁöÑÔºÅËá≥‰∫éÈù¢ËØïÔºåÂ§ßÂÆ∂ Â∑ÆÁöÑÈÉΩ‰∏çÂ§öÔºåÊàë‰∏ãÈù¢‰ºö‰∏ªË¶ÅËÆ≤‰∏Ä‰∏ãÊú∫ËØïÂáÜÂ§áÔºåÈ°∫Â∏¶ËÆ≤‰∏Ä‰∏ãÈù¢ËØïÔºÅ Â§çËØïÊµÅÁ®ã‰∏ÄËà¨‰ºöÂú®3ÊúàÂàùËøõË°åÂ§çËØïÔºåÊàë‰ª¨ÂéªÂπ¥ÊòØ2Êúà14Âá∫ÁöÑÊàêÁª©Ôºå3Êúà7Âè∑Â∞±ÂæóÂà∞ËææÂìàÂ∞îÊª®ËøõË°åËÄÉÂâçÁöÑ‰∏Ä‰∫õÊâãÁª≠ÂäûÁêÜÔºå‰∏≠Èó¥Â§ßÊ¶ÇÂè™Êúâ15Â§©ÁöÑÊó∂Èó¥ÂáÜÂ§áÔºåÊâÄ‰ª•Âä°ÂøÖË¶ÅÊèêÂâçÂ§áËÄÉ(ÊàëÂ∞±ÂæàÂêéÊÇîÊ≤°ÊúâÊèêÂâçÂ§áËÄÉ‚Ä¶ÊµÅ‰∏ãÊÇîÊÅ®ÁöÑÊ≥™Ê∞¥Âïä‚Ä¶) ËÄÉÂâç‰∏Ä‰∏§Â§©‰ºöÂÖàËÆ©‰Ω†‰∫§ÂêÑÁßçÊùêÊñôÔºåÁÑ∂ÂêéÂøÉÁêÜÊµãËØÑÔºåÁÑ∂ÂêéÂ∞±ÂºÄÂßãÂ§çËØï„ÄÇÂ§çËØïÊòØ‰∏ÄÊï¥Â§©ÁöÑÔºå‰∏äÂçàÊú∫ËØïÔºå‰∏ãÂçàÈù¢ËØïÔºåÊú∫ËØïÊó∂Èó¥ÊòØ‰∏§Â∞èÊó∂ÔºåÊó∂Èó¥ÊòØÊØîËæÉÁ¥ßÂº†ÁöÑÔºåÂõ†‰∏∫È¢òÈáèÊØîËæÉÂ§ßÔºå‰∏ãÈù¢Êàë‰ºöËØ¶ÁªÜËØ¥ÁöÑÔºÅÂú®Êú∫ËØïÂºÄÂßã‰πãÂâçÔºå‰ºöËÆ©‰Ω†ÂÖàÂÅöËã±ËØ≠Á¨îËØïÔºå‰πüÂ∞±ÊòØÂùêÂú®ÁîµËÑëÈù¢Ââç‰ºöÂÖàÁªô‰Ω†Âèë‰∏ÄÂº†Ëã±ËØ≠ËØïÂç∑(ÂÖ∂ÂÆûÂ∞±ÊòØ‰∏ÄÁØáËã±ÊñáËÆ∫Êñá)ÔºåÁÑ∂Âêé‰Ω†ÈúÄË¶ÅÁúãËøôÁØáËÆ∫ÊñáÔºåÂõûÁ≠îÁõ∏ÂÖ≥ÁöÑ5‰∏™ÈóÆÈ¢òÔºå‰∏ÄÂÖ±10ÂàÜÔºåÊØèÂ∞èÈóÆ2ÂàÜ(Ëøô‰∏™Â§ßÂÆ∂ÈÉΩÂ∑Æ‰∏çÂ§öÁöÑÔºå‰∏çË¶ÅÂΩ±ÂìçËá™Â∑±ÁöÑÊú∫ËØïÂ∞±Ë°åÔºÅ) ÁÑ∂ÂêéÊòØÂºÄÂßãÊú∫ËØïÔºÅ‰∏§‰∏™Â∞èÊó∂ÔºåÂ∫îËØ•ÊòØ9ÁÇπÂçäÂà∞11ÁÇπÂçäÔºü(Êàë‰πü‰∏çËÆ∞Âæó‰∫ÜÂëÄ) ÔºåÊú∫ËØïÂÆå‰πãÂêéÂü∫Êú¨Ê≤°Êúâ‰ºëÊÅØÔºåÂ§ßÊ¶Ç‰∏≠Âçà‰∏ÄÁÇπÂ∞±ÈúÄË¶ÅËøõÂÖ•Èù¢ËØïÂáÜÂ§á‰∫ÜÔºåÊâÄÊúâ‰∫∫‰ºöÊîæÂà∞‰∏Ä‰∏™Â§ßÊàøÈó¥ÈáåÔºåÂéªÂπ¥ÊòØÊúâ8Êù°Á∫øÔºåÊØèÊù°Á∫øÈÉΩÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑËÄÅÂ∏àÔºå‰πüÂ∞±ÊòØÊµÅÊ∞¥Á∫ø‰Ωú‰∏öÔºå‰∏ÄÂÖ±ÊúâÂõõËΩÆÈù¢ËØïÔºåÊØèËΩÆ35ÂàÜÔºåÂÖ±140ÂàÜÔºåÊØè‰∏™‰∫∫‰ºöÂàÜÂà∞‰∏Ä‰∏™Êï∞Â≠óÔºå‰ª£Ë°®‰Ω†ÊòØ8Êù°Á∫øÁöÑÂì™‰∏ÄÊù°ÔºåÁÑ∂ÂêéËøõË°åÈù¢ËØïÔºåÁÑ∂ÂêéÂè™ÊúâÁ≠âÂà∞ÊâÄÊúâ‰∫∫ÂÖ®ÈÉ®Èù¢ËØïÁªìÊùüÔºåÊñπÂèØÁ¶ªÂºÄ„ÄÇ Â§çËØïÂÆåÂΩìÂ§©Â∞±‰ºöÊúâÊ∑±Âú≥Ê†°Âå∫ÁöÑÂÆ£ËÆ≤‰ºöÔºåÊâÄÊúâËÄÅÂ∏àÈÉΩ‰ºöÂà∞Âú∫ÔºÅÔºÅÔºÅÊä•ËÄÉÊ∑±Âú≥ÁöÑÔºÅÔºÅÔºÅÔºÅÂçÉ‰∏áÂçÉ‰∏á‰∏çË¶ÅÈîôËøáÔºåËÑ∏ÁöÆ‰∏ÄÂÆöË¶ÅÂéöÔºÅÔºÅÔºÅÔºÅÔºÅÂΩìÂ§©Â∞±ÈúÄË¶ÅÁ°ÆÂÆöÂØºÂ∏àÁöÑÔºåÂ¶ÇÊûú‰Ω†‰∏çÂéªÊâæÔºåÂà∞Êó∂ÂÄô‰∏äÁ∫ø‰∫ÜÂè™ËÉΩÊåëÂà´‰∫∫Ââ©‰∏ãÁöÑÔºåÊâÄ‰ª•‰∏çÁÆ°‰Ω†Â§çËØïÂà∞Â∫ïÊàêÁª©ÂíãÊ†∑(Â§çËØïÊàêÁª©‰ºöÂú®‰πãÂêé‰∏§Â§©ÊâçÂá∫)ÔºåÂÖàÊâæËÄÅÂ∏àÔºå‰∏äÁ∫ø‰∫ÜÂ∞±ÂèØ‰ª•Áõ¥Êé•Ë∑ü‰ªñËµ∞ÔºåÊ≤°‰∏äÁ∫øÁöÑËØùÂ∞±ÂÜçËÅîÁ≥ªÊú¨ÈÉ®ËÄÅÂ∏àÂ∞±Ë°å‰∫ÜÔºÅ Tip: ÂΩìÁÑ∂‰∫ÜÔºåÊä•ËÄÉÊú¨ÈÉ®ÁöÑÔºåÊåâÁêÜËØ¥Âú®Âá∫ÂàÜÂêéÁ¨¨‰∏ÄÊó∂Èó¥Â∞±Â∫îËØ•ÂéªËÅîÁ≥ªËÄÅÂ∏àÔºåÂõ†‰∏∫‰∏ÄËà¨ÈÉΩÊòØÂÖàÂà∞ÂÖàÂæóÁöÑÔºåÂà∞ÂêéÂ§¥ÂèØËÉΩÂ∞±Âè™ËÉΩÊòØÊåëÂâ©‰∏ãÁöÑ‰∫Ü‚Ä¶ Êú∫ËØïÈÉ®ÂàÜÈ¶ñÂÖàÊòØ200ÂàÜÁöÑÊú∫ËØïÔºåÊåâÁÖßÂæÄÂπ¥Êé®ÁÆóÔºå‰ªäÂπ¥Â∫îËØ•È¢òÂûãÂ§ßÊ¶Ç‰øùÊåÅ‰∏ÄËá¥Ôºå‰πüÂ∞±ÊòØ120ÂàÜÈÄâÊã©È¢ò + 80ÂàÜ‰∏ªËßÇÈ¢òÔºåÂÖ∂‰∏≠80ÂàÜ‰∏ªËßÇÈ¢òÂéªÂπ¥ÊòØÂàÜ‰∏∫20ÂàÜÁºñÁ®ãÈ¢ò + 60ÂàÜÊîπÈîôÈ¢ò„ÄÇËøôÈáåÂº∫ÁÉàÂº∫ÁÉàÂº∫ÁÉàÂª∫ËÆÆ‰∏ÄÂÆöË¶ÅÂÖàÂÖ®ÈÉ®Áúã‰∏Ä‰∏ãÈ¢òÂûãÔºåÂõ†‰∏∫Êú∫ËØïÂèØËÉΩÊØèÂπ¥ÁöÑÈ¢òÂûãÈÉΩ‰∏ç‰∏ÄÊ†∑ÔºåÊàëËÄÉËØïÁöÑÊó∂ÂÄôÂ∞±Ê≤°ÁúãÂêéÈù¢ÁöÑÈ¢òÁõÆÔºåÂ∞±ÂÅöÁùÄÂÅöÁùÄÔºåËøòÂâ©50Êù•ÂàÜÈíüÂÅöÂ§ßÈ¢òÔºåÁ™ÅÁÑ∂ÂèëÁé∞ÊîπÈîôÁî±‰∏ÄÈ¢òÂèò‰∏∫‰∫Ü‰∏âÈ¢òÔºåÁû¨Èó¥Â∞±ÊÖå‰∫Ü‚Ä¶ ÈÄâÊã©È¢òÔºö120ÂàÜÈÄâÊã©È¢òÔºåÂåÖÂê´‰∫ÜÊï∞ÊçÆÂ∫ìÁ≥ªÁªü„ÄÅÁ¶ªÊï£Êï∞Â≠¶„ÄÅÁÆóÊ≥ïËÆæËÆ°‰∏éÂàÜÊûê„ÄÅÈÄªËæëÊÄùÁª¥ËÉΩÂäõ„ÄÇ‰πüÂ∞±ÊòØÂêÑÂç†30ÂàÜÔºåÂÖ∂‰∏≠Ë¶ÅËØ¥ÊòéÁöÑÊòØÊï∞ÊçÆÂ∫ìÁ≥ªÁªü„ÄÅÁ¶ªÊï£Êï∞Â≠¶„ÄÅÁÆóÊ≥ïËÆæËÆ°‰∏éÂàÜÊûêÈÉΩÊòØ2ÂàÜ‰∏ÄÈ¢òÔºå‰πüÂ∞±ÊòØÂÖ±Êúâ45È¢òÔºåËÄåÈÄªËæëÊÄùÁª¥È¢òÊòØ6ÂàÜ‰∏ÄÈ¢ò(Âøò‰∫ÜÊòØ5ÂàÜËøòÊòØ6ÂàÜ‰∫Ü‚Ä¶)ÔºåÊâÄ‰ª•Âä†Ëµ∑Êù•ÈÄâÊã©È¢òÊúâ50Êù•ÈÅìÔºåËøô‰∏™È¢òÈáèÊòØÂæàÂ§ßÁöÑÔºåÂä°ÂøÖË¶ÅËÄÉÂâçËÆ°ÂàíÂ•ΩÊó∂Èó¥ÔºÅÔºÅÔºÅÔºÅÂõ†‰∏∫ÂéªÂπ¥ÂùêÊàëÊóÅËæπÁöÑ‰∏§‰ΩçÂ§ßÂì•‚Ä¶ÊàëÈÄâÊã©È¢òÈÉΩÂÅöÂÆå‰∫Ü‰ªñ‰ª¨ËøòÂú®ÂÅö20È¢òÔºåÊúÄÂêé‰ªñ‰ª¨ÊàëÁúãÂàÜÊï∞ÈÉΩÊòØ80‰∏ä‰∏ã‚Ä¶ ÈÄâÊã©È¢òÁöÑËØùÔºåÊàëÂÜçÂ§öÂò¥‰∏ÄÂè•ÔºåÊúÄÂ•ΩÊòØÂÖàÂéªÂÅöÈÄªËæëÈ¢òÔºåÂõ†‰∏∫Ëøô‰∏™ËôΩÁÑ∂ÁÆÄÂçï‰ΩÜÊòØËøòÊòØÈúÄË¶ÅÂÖÖË£ïÁöÑÊó∂Èó¥ÂéªÊé®ÁêÜÁöÑÔºåÂéªÂπ¥ÂùêÊàëÊóÅËæπÁöÑ‰∏§‰ΩçÂ§ßÂì•Â∞±ÂæàÂèØÊÉú‚Ä¶ÈÄªËæëÈ¢òÂ•ΩÂá†È¢òÊ≤°ÂÜô‚Ä¶ ‰∏ªËßÇÈ¢òÔºö80ÂàÜÔºåÊàëÂè™ËÆ≤ÂéªÂπ¥ÁöÑÈ¢òÂûã„ÄÇ60ÂàÜÊîπÈîôÔºå20ÂàÜÁºñÁ®ãÈ¢ò„ÄÇ ÂÖàËÆ≤20ÂàÜÁºñÁ®ãÈ¢òÔºåÈ¢òÁõÆË¶ÅÊ±ÇÁî®CËØ≠Ë®Ä‰ΩúÁ≠îÔºÅÈ¢òÁõÆÁöÑÈöæÂ∫¶Âü∫Êú¨‰∏éCËØ≠Ë®ÄÈÇ£Êú¨‰π¶(ËãèÂ∞èÁ∫¢ÁöÑ)ÁöÑËØæÂêéÈ¢òÊåÅÂπ≥ÔºåÊàñËÄÖËØ¥ Áï•ÂæÆÈöæ‰∏Ä‰∫õ‰∫õÔºåÂéªÂπ¥ÊòØËÄÉÁöÑÂ≠óÁ¨¶‰∏≤ÊéíÂ∫è‰πãÁ±ªÁöÑ(Êàë‰πüÊúâÁÇπÂøòËÆ∞Âï¶Ôºå‰Ω†‰ª¨ÂèØ‰ª•‰∏äÁéãÈÅìËÆ∫ÂùõÁúãÁúãÊúÄÊñ∞ÁöÑÂ§çËØïËØïÂç∑ÔºåÊàëÊòØÊ≤°ÊúâÊî∂ÈõÜÁöÑÂìà~ÊàëÁªôÁöÑËµÑÊñôÈÉΩÊòØÊàëÂéªÂπ¥ÁöÑÔºåÊ≤°ÊúâÈõÜÂêà19Âπ¥ÁöÑ)„ÄÇ ÂÜçËÆ≤60ÂàÜÊîπÈîô„ÄÇÊîπÈîô‰πüÊòØÁªô‰Ω†‰∏ÄÈÅìÈ¢òÔºåÁªô‰Ω†‰ª£Á†ÅÔºåÁÑ∂Âêé‰Ω†‰øÆÊîπÔºåÂÖ®ÈÉ®ÊîπÂØπÊâçËÉΩacÔºåÂê¶ÂàôÂ∞±ÊòØ0ÂàÜÔºå‰∏ÄÂÖ±3È¢òÔºåÊØèÈ¢ò20ÂàÜÔºÅÈöæÂ∫¶Áï•È´òÔºåÊîæÊúÄÂêéÂÅöÂêß„ÄÇ Êï∞ÊçÆÂ∫ìÁ≥ªÁªüËÄÉËØïÈ¢òÁõÆÊòØÂú®‰∏≠ÂõΩÂ§ßÂ≠¶MOOC‰∏≠ÊàòÂæ∑Ëá£ËÆ≤ÁöÑ„ÄäÊï∞ÊçÆÂ∫ìÁ≥ªÁªü„Äã‰∏≠ÁöÑÊµãÈ™åÈáåÁöÑÈ¢òÁõÆÂá∫Ôºå‰∏ç‰ºöË∂ÖÂá∫Ëøô‰∏™ËåÉÂõ¥ÂìüÔºÅÔºÅÔºÅÔºÅÔºÅÂ¶ÇÊûúÂêéÊúüÊó∂Èó¥‰∏çÂ§™Â§üÔºåÂèØ‰ª•Áõ¥Êé•ÁúãÈ¢òÁõÆËÉåÁ≠îÊ°àÔºåÂΩìÁÑ∂‰Ω†ÈúÄË¶ÅËÉåÁöÑÂæàÁÜüÂì¶(ÊàëÂΩìÊó∂ÊòØÂà∑‰∫ÜÂæàÂ§öÈÅçÔºåÁõ¥Êé•ËÉåÁöÑÈ¢òÁõÆÂíåÁ≠îÊ°àÔºåÁúãÂà∞È¢òÁõÆÂ∞±Áü•ÈÅìÁ≠îÊ°àÔºÅ)ÔºåÂõ†‰∏∫ÊàëÂΩìÊó∂Êó∂Èó¥ÂæàÁ¥ßËø´ÔºåÂ∞±Ê≤°ÊúâÂÖ®ÈÉ®ÁúãÂÆåËßÜÈ¢ëÔºåÂõ†‰∏∫ËßÜÈ¢ëÂ§™Â§ö‰∫Ü‚Ä¶‰∏ä‰∏≠‰∏ã‚Ä¶ÊÑüËßâÂæóÁúãÂá†ÊòüÊúü„ÄÇ È¢ÑÊúüÂ¶ÇÊûú‰∏ÄËæπÁúãËßÜÈ¢ëÔºå‰∏ÄËæπËÉåÈ¢òÁöÑËØùÔºå‰∏ÄÊòüÊúüÂ§ßÊ¶ÇÂ∞±ËÉΩÊãø‰∏ãÔºÅ‰Ω†ÂèØ‰ª•Ëá™Â∑±ÂéªÊÑüÂèó‰∏ãÈ¢òÈáèËøòÊúâËßÜÈ¢ëÁöÑÂ§öÂ∞ëÔºåÁÑ∂ÂêéËá™Â∑±‰º∞ËÆ°ÈúÄË¶ÅÂ§ö‰πÖÊó∂Èó¥ÔºåËÉΩÊääÈáåÈù¢ÁöÑÈ¢òÁõÆÂÖ®ÈÉ®ÂÅö‰ºöÔºåÂπ∂‰∏îË¶ÅÂèçÂ∫îÁâπÂà´Âø´ÔºåËøôÊ†∑‰ºöÁªôÊú∫ËØï‰∫âÂèñÂ§ßÈáèÊó∂Èó¥‚Ä¶ËøôÂèØËÉΩÂ∞±ÊòØÊàëÊú∫ËØïÊØîÂà´‰∫∫ÂÅöÂæóÂø´ÁöÑÂéüÂõ†Âêß‚Ä¶ Á¶ªÊï£Êï∞Â≠¶ËøôÊòØÊâÄÊúâÂ§çËØïÁßëÁõÆÈáåÈù¢ÊúÄÈöæÁöÑ‰∏ÄÈó®ÔºÅÔºÅÂõ†‰∏∫ÂåÖÊã¨‰∫ÜÈõÜÂêàËÆ∫‰∏éÂõæËÆ∫‰ª•ÂèäËøë‰∏ñ‰ª£Êï∞ÔºÅÂª∫ËÆÆÁúãMoocÔºåÁúãÂí±Â∑•Â§ßËÄÅÂ∏àÁöÑÁ¶ªÊï£Êï∞Â≠¶ÔºÅÂÖ∑‰ΩìÂêçÂ≠óÊàëÁªôÂøò‰∫ÜÔºÅ‰∏ÄÂÆöË¶ÅË∂ÅÊó©Â§ç‰π†Ôºå‰∏çÁÑ∂Âü∫Êú¨‰∏äÂêéÊúüÂ∞±ÊòØÂÆåÂÖ®ÊîæÂºÉÁöÑÁä∂ÊÄÅÔºåËøô‰∏™‰∏ÄÂÆöÊèêÊó©Â§ç‰π†ÔºåÈ¢ÑÊúüÂ§ç‰π†Êó∂Èó¥Ëá≥Â∞ëË¶ÅÁªôÂà∞ 15-20 Â§©‚Ä¶ ‰π†È¢òÁöÑËØùÂª∫ËÆÆÊääÊàëËµÑÊñôÈáåÈÇ£‰∫õÁ¶ªÊï£Êï∞Â≠¶ÈÉ®ÂàÜÁöÑ‰π†È¢òÂÅöÂÆåÂ∞±Â∑Æ‰∏çÂ§ö‰∫ÜÔºåÈöæÂ∫¶Âü∫Êú¨‰∏é‰πãÊåÅÂπ≥„ÄÇ ÁÆóÊ≥ïËÆæËÆ°‰∏éÂàÜÊûêËøô‰∏™ÊàëÊ≤°ËÄÉËøá..È¢ÑÊúüÊòØÁÆóÊó∂Èó¥Â§çÊùÇÂ∫¶‰πãÁ±ªÁöÑÈ¢òÂûãÂêß‚Ä¶ÊØïÁ´üÊòØÈÄâÊã©È¢ò‚Ä¶ ÈÄªËæëÊÄùÁª¥ËÉΩÂäõËøô‰∏™ËÄÉÂâçÊó†ÈúÄÂáÜÂ§áÔºåÁ®çÂæÆÁúã‰∏Ä‰∏ãÊàëÁªôÁöÑËµÑÊñôÈáåÁöÑÈ¢òÁõÆÂ∞±Ë°åÔºåÈ¢òÁõÆÊØîËæÉÁÆÄÂçïÔºåÂª∫ËÆÆËÄÉËØïÂÖàÂÅöËøô‰∏™ÔºåÂàÜÂÄºÂæàÈáçÔºåÂæàÂ§öÂêåÂ≠¶Âú®ËÄÉËØïÁöÑÊó∂ÂÄôÊúÄÂêéÈÉΩÊ≤°Êó∂Èó¥ÂÅöËøô‰∏™ÔºÅÔºÅÔºÅÔºÅË¥ºÂèØÊÉúÁöÑÂêñÔºÅÔºÅÈÄÅÂàÜÈ¢òÂèòÊàê‰∫ÜÈÄÅÂëΩÈ¢ò‚Ä¶ CËØ≠Ë®ÄËøô‰∏™80ÂàÜÊòØÂ§ßÂ§¥ÂìüÔºåÂü∫Êú¨‰∏äÂÜ≥ÂÆö‰Ω†ËÉΩ‰∏çËÉΩ‰∏ä‰Ω†ÁöÑ‰∏ÄÂøóÊÑøÔºÅÂü∫Êú¨‰∏äÂÅöÂá∫‰∏§ÈÅìÊîπÈîôÂ∞±ÂæàÁ®≥‰∫ÜÔºåÊØïÁ´ü20ÂàÜ‰∏ÄÈ¢òÂêñÔºÅÊàëÂª∫ËÆÆËøô‰∏™Âú®Âá∫ÂàÜÂâçÂ∞±Âü∫Êú¨Ë¶ÅÂáÜÂ§áÂÆåÊàêÔºåÂá∫ÂàÜÂêéÂèØ‰ª•ËøõË°åÊï∞ÊçÆÂ∫ìÁ≥ªÁªüÁöÑÂ§ç‰π†ÂíåÁ¶ªÊï£Êï∞Â≠¶Ëøë‰∏ñ‰ª£Êï∞ÈÉ®ÂàÜÂ§ç‰π†„ÄÇÂáÜÂ§áÊñπÂºèÂ∞±ÊòØÂà∑ËãèÂ∞èÁ∫¢ËÄÅÂ∏àÈÇ£Êú¨CËØ≠Ë®ÄÁöÑ‰π¶ÔºåÊääÈáçË¶ÅÁ´†ËäÇ(Â≠óÁ¨¶‰∏≤ÈÇ£Âá†Á´†)ËØæÂêéÈ¢òÂÖ®ÈÉ®Âà∑‰∏ÄÈÅçÔºåÊâæÂà∞ ac È¢òÁõÆÁöÑÊÑüËßâÔºåÂêåÊó∂Ê∏©È¶®ÊèêÈÜíÂèØ‰ª•‰∏ä LeetCode Êâæ‰∏Ä‰∫õÁõ∏ÂÖ≥ÁöÑ‰∏ìÈ¢òËøõË°åÁªÉ‰π†ÔºåËøôÊ†∑Âú®ËÄÉÂú∫‰ºöÊúâ‰∏ÄÁßçÁÜüÊÇâÁöÑÊÑüËßâÔºÅ Ëøô‰∏™ÂáÜÂ§áËµ∑Êù•Êó∂Èó¥Â∫îËØ•Â∑Æ‰∏çÂ§ö15Â§©Â∑¶Âè≥Ôºå‰∏ÄÂÆöË¶ÅÂ§öÂÜô‰ª£Á†ÅÔºåÊúâÊÑüËßâÊòØÊúÄÈáçË¶ÅÁöÑ„ÄÇ Èù¢ËØïÈÉ®ÂàÜ‰∏äÈù¢ÊúâËÆ≤ËøáÔºåÈù¢ËØïÊòØÂú®‰∏ãÂçà1ÁÇπÂ∑¶Âè≥Â∞±Â∑Æ‰∏çÂ§öÂáÜÂ§áÂºÄÂßãÁöÑ„ÄÇÂÖ± 4 ËΩÆÔºåÊØèËΩÆ 35 ÂàÜ„ÄÇÈù¢ËØïÁöÑÊï¥‰ΩìÊµÅÁ®ãÊòØÔºå‰ºöÁªô‰Ω†ÊéíÂè∑ÔºåÁÑ∂ÂêéÂà∞‰Ω†‰∫Ü‰ºöÂè´‰Ω†Âá∫ÂéªÔºåÁÑ∂ÂêéÂà∞ÊåáÂÆöÊïôÂÆ§ÁöÑÈó®Â§ñÔºåÊãøÂà∞‰∏ÄÂº†Á∫∏Ôºå‰∏äÈù¢ÊúâËØ•ËΩÆÈù¢ËØïË¶ÅÈóÆÁöÑÈ¢òÁõÆÔºå‰Ω†Âú®Èó®Â§ñÂáÜÂ§á 5ÂàÜÈíüÂ∑¶Âè≥ÔºåÁÑ∂ÂêéËøõÂéªÁõ¥Êé•‰ΩúÁ≠îÂ∞±Â•ΩÔºå‰∏ÄËΩÆÈù¢ËØïÂ§ßÊ¶ÇÊòØ 5 ÂàÜÈíüÂ∑¶Âè≥ÔºåÊó∂Èó¥ÂæàÁü≠„ÄÇ ‰∏ÄÈù¢ 35 ÂàÜÔºåÁ¨¨‰∏ÄÈù¢Ëá™Êàë‰ªãÁªçÔºåÈ¢òÁõÆÂ§ßÊ¶ÇÊòØÔºåÁªô‰Ω†‰∏ÄÂº†ÂõæÔºåËÆ©‰Ω†ÁúãÁúãËÉΩÁúãÂà∞Âï•(È¨ºÁü•ÈÅìËøôÊòØÂú®Êï¥Âï•Áé©ÊÑè‚Ä¶)ÔºåÂÖ®Á®ãÂèØ‰ª•ÈÄâÊã©Ëã±Êñá or ‰∏≠ÊñáÔºåÂèØËÉΩÁî®Ëã±ÊñáÂÖ®Á®ã‰ΩúÁ≠î‰ºöÊúâÁÇπÂä†ÂàÜÂêß‚Ä¶ ‰∫åÈù¢ 35 ÂàÜÔºåÁ¨¨‰∫åÈù¢ÊòØËÆ≤Á´ûËµõÁªèÂéÜÂíåÈ°πÁõÆÁªèÂéÜÔºå‰∏ªË¶ÅÊòØÁúãËØÅ‰π¶(Â•ñÂ≠¶ÈáëËØÅ‰π¶Âï•ÁöÑÊ≤°Áî®Âìà)ÔºåË¶ÅÁöÑÊòØCCF‰πãÁ±ªÁöÑËé∑Â•ñËØÅ‰π¶ÔºåÂÖ∂‰ªñÁöÑ‰∏ÄÂæã‰∏çÁúãÔºÅËøô‰∏ÄÈù¢Â¶ÇÊûúÊ≤°ÊúâÁ´ûËµõÁªèÂéÜÂíåËé∑Â•ñÁªèÂéÜÊâ£ÂàÜ‰ºöÊØîËæÉ‰∏•ÈáçÔºåÈ°πÁõÆÁöÑËØùÂª∫ËÆÆËá™Â∑±ÂåÖË£Ö‰∏Ä‰∏ãÔºåÊúÄÂ•ΩÊòØËÉΩÂïÜÁî®ÁöÑÈ°πÁõÆËÆ≤Âá∫Êù•ÔºåÁÑ∂ÂêéÊ∂âÂèäÁöÑÊäÄÊúØÊ†àÊúÄÂ•Ω‰πüÊòØ‰ºÅ‰∏öÊ≠£Âú®Áî®ÁöÑÔºå‰∏æ‰∏™Â∞è‰æãÂ≠êÔºåÂ∞±ÊØîÂ¶Ç web ÂºÄÂèëÔºåÊ≠£Â∏∏Áé∞Âú®ÈÉΩÊòØÂâçÂêéÁ´ØÂàÜÁ¶ªÔºåÂâçÁ´Ø react/vueÔºåÂêéÁ´Ø springbootÔºåÁÑ∂ÂêéÂ§ñÂ∏¶ÂæÆÊúçÂä° springCloud/DubboÔºåÂπ∂‰∏î‰ΩøÁî®ÂÆπÂô®ÊäÄÊúØ Docker/K8sÔºå‰ΩøÁî®Êï∞ÊçÆÂ∫ì RedisÔºåÁ©øÊèí‰ΩøÁî®Ê∂àÊÅØ‰∏≠Èó¥‰ª∂ RabbitMQ/KafkaÔºåÂ§ßÊ¶ÇËøôÊ†∑ÂåÖË£Ö‰∏Ä‰∏ãÊàëËßâÂæóÂá†ÂàÜÈíü‰∏ãÊù•ËÄÅÂ∏àÊòØÈóÆ‰∏çÂá∫‰ªÄ‰πàÁ†¥ÁªΩÁöÑÔºåÊúÄÂ•ΩÊòØÂÖ®Á®ãÈÉΩÊòØ‰Ω†Âú®ËÆ≤ËøôÊ†∑Â≠êÔºåÊïàÊûú‰ºöÂ•Ω‰∏Ä‰∫õ„ÄÇ ‰∏âÈù¢ÊòØ‰∏ì‰∏öÈù¢Ôºå35 ÂàÜÔºåÂ∞±ÊòØÁªô‰Ω†‰∏ÄÈÅìÈ¢òÔºå‰Ω†Âú®Â§ñÈù¢ÊÄùËÄÉ5ÂàÜÈíüÔºå‰∏ÄËà¨Â∞±ÊòØÊôÆÈÄöÁöÑÊô∫ÂäõÈ¢òÔºå‰∏çÁî®Â§™ÊãÖÂøÉÔºåÊå∫ÁÆÄÂçïÁöÑÔºåÊàëÂΩìÊó∂ÁöÑÈ¢òÁõÆÊòØÁà¨Â±±ÈóÆÈ¢òÔºå‰∏Ä‰∏™‰∫∫‰ªéÂ±±‰∏ãÁà¨‰∏äÂéªÔºå‰∏Ä‰∏™‰ªéÂ±±‰∏ã‰∏ãÊù•Ôºå‰ªÄ‰πàÊó∂ÂÄôÁõ∏ÈÅá‚Ä¶ËøôÁ±ªÁöÑÈóÆÈ¢ò„ÄÇ‰∏™‰∫∫ÊÑüËßâËøô‰∏ÄÈù¢ÊÉ≥ËÄÉÂØüÁöÑËøòÊòØ‰Ω†ÂØπÂÖ∑‰ΩìÁîüÊ¥ªÂú∫ÊôØÁöÑÊäΩË±°ÂåñÔºåËÉΩÂ§üËΩ¨Êç¢ÊàêËÆ°ÁÆóÊú∫ÊÄùÁª¥ÁöÑÊñπÂºèÔºåÂπ∂‰∏îÂ∞ΩÂèØËÉΩÁöÑËÄÉËôëÈóÆÈ¢òÂÖ®Èù¢‰∏Ä‰∫õÔºåÂ∞§ÂÖ∂ÊòØ‰∏Ä‰∫õÊù°‰ª∂ÁöÑËÆæÂÆöÔºåÂèØ‰ª•Ë∑üËÄÅÂ∏àÂ§öÊé¢ËÆ®‰∏Ä‰∏ãÔºå‰∏ªË¶ÅËøòÊòØ‰∏çË¶ÅÂÜ∑Âú∫ÔºåÂÖ®Á®ãÈÉΩÊúâÂú®‰∫§ÊµÅÊàëËßâÂæóÂ∞±ÊØîËæÉ okay ÁöÑ„ÄÇ ÂõõÈù¢ÔºÅÔºÅÔºÅÔºÅ35 ÂàÜÔºåËøô‰∏™ÊàëÊúÄÊÉ≥ËÆ≤ÔºåÂõ†‰∏∫ÊàëÈù¢ÁöÑ‰∏çÂ•ΩÔºåÊ≤°ÊúâÂáÜÂ§áÔºå‰πüÊ≤°ÁªèÈ™åÔºÅÔºÅÊàëÁöÑÂª∫ËÆÆÊòØÔºö‰∏ÄÂÆöË¶ÅÁúãÁúã‰∫∫Â∑•Êô∫ËÉΩÔºåËá™ÁÑ∂ËØ≠Ë®ÄÔºåÊú∫Âô®ÁøªËØëÔºåÊ®°ÂºèËØÜÂà´Á≠âÁ≠â‰πãÁ±ªÁöÑ‰∏úË•øÔºåËøô‰∏ÄÈù¢‰∏ªË¶ÅÂ∞±ÈóÆËøô‰∏™ÔºåÊàëÂΩìÊó∂ÊòØÈù¢ÁöÑ‰∫∫Â∑•Êô∫ËÉΩÔºåÂ¶àÂëÄÂï•‰πü‰∏ç‰ºöÂïäÔºåËÆ≤‰∏çÂá∫ËØù‚Ä¶‰Ω†ÂáÜÂ§áÁöÑËØùÂ∞±Â§ßÊ¶ÇÁúãÁúã‰∫∫Â∑•Êô∫ËÉΩÊòØ‰∏™Âï•‚Ä¶Áî®‰∫éÂì™‰∫õÈ¢ÜÂüüÔºåÊúâÂ§ßÊ¶ÇÂì™‰∫õÊäÄÊúØÔºåÂàùÁï•ÁöÑÂ§ßÊ¶ÇÁúãÁúãÂ∞±Ë°å„ÄÇÂØπ‰∫ÜÔºåÂ•ΩÂÉè‰πüÊúâ‰∏Ä‰∏§Êù°Á∫ø‰ºöÈóÆÁºñËØëÂéüÁêÜÂíåÊìç‰ΩúÁ≥ªÁªüÁöÑÈóÆÈ¢òÔºåÊàëËøôÊù°Á∫øÂÄíÊòØÊ≤°ÈóÆËøáÔºåÂ¶ÇÊûúÊúâÊó∂Èó¥ÁöÑËØùÂèØ‰ª•ÂõûÈ°æ‰∏Ä‰∏ãÊú¨ÁßëÁöÑ pptÔºåÂ∫îËØ•Â∞±Â∑Æ‰∏çÂ§ö‰∫Ü„ÄÇ]]></content>
  </entry>
  <entry>
    <title><![CDATA[ÈÄíÂΩíÊÄªÁªì(ËΩ¨)]]></title>
    <url>%2F2020%2F01%2F04%2F%E9%80%92%E5%BD%92%E8%AF%A6%E8%A7%A3.html</url>
    <content type="text"><![CDATA[3ÈÅìÈ¢òÂΩªÂ∫ïÊêûÂÆöÔºöÂ•óË∑ØËß£ÂÜ≥ÈÄíÂΩíÈóÆÈ¢ò(ËΩ¨)ÂâçË®ÄËΩ¨ÁöÑÂìà~ÊàëËá™Â∑±Â≠¶‰π†ÁúãÁöÑÔºÅÔºÅ ÂéüÊñáÈìæÊé• ‚Äî‚Äî-&gt; Ëß£ÂÜ≥ÈÄíÂΩí Áõ∏‰ø°‰∏çÂ∞ëÂêåÂ≠¶ÂíåÊàë‰∏ÄÊ†∑ÔºåÂú®ÂàöÂ≠¶ÂÆåÊï∞ÊçÆÁªìÊûÑÂêéÂºÄÂßãÂà∑ÁÆóÊ≥ïÈ¢òÊó∂ÔºåÈÅáÂà∞ÈÄíÂΩíÁöÑÈóÆÈ¢òÊÄªÊòØÂæàÂ§¥ÁñºÔºåËÄå‰∏ÄÁúãËß£Á≠îÔºåÂç¥ÂèëÁé∞Â§ß‰Ω¨‰ª¨Âá†Ë°åÈÄíÂΩí‰ª£Á†ÅÂ∞±‰ºòÈõÖÁöÑËß£ÂÜ≥‰∫ÜÈóÆÈ¢ò„ÄÇ‰ªéÊàëËá™Â∑±ÁöÑÂ≠¶‰π†ÁªèÂéÜÊù•ÁúãÔºåÂàöÂºÄÂßãÁêÜËß£ÈÄíÂΩíÊÄùË∑ØÈÉΩÂæàÂõ∞ÈöæÔºåÊõ¥Âà´ËØ¥Ëá™Â∑±ÂÜô‰∫Ü„ÄÇ Êàë‰∏ÄÁõ¥ËßâÂæóÂà∑ÁÆóÊ≥ïÈ¢òÂíåÂ∫îËØï‰∏ÄÊ†∑ÔºåÊó¢ÁÑ∂ÊòØÂ∫îËØïÂ∞±‰∏ÄÂÆöÊúâÂ•óË∑ØÂ≠òÂú®„ÄÇÂú®Âà∑È¢ò‰∏≠ÔºåÊàëÊÄªÁªìÂá∫‰∫Ü‰∏ÄÂ•óËß£ÂÜ≥ÈÄíÂΩíÈóÆÈ¢òÁöÑÊ®°ÁâàÊÄùË∑Ø‰∏éËß£Ê≥ïÔºåÁî®Ëøô‰∏™ÊÄùË∑ØÂèØ‰ª•ÁßíËß£ÂæàÂ§öÈÄíÂΩíÈóÆÈ¢ò„ÄÇ ÈÄíÂΩíËß£È¢ò‰∏âÈÉ®Êõ≤‰Ωï‰∏∫ÈÄíÂΩíÔºüÁ®ãÂ∫èÂèçÂ§çË∞ÉÁî®Ëá™Ë∫´Âç≥ÊòØÈÄíÂΩí„ÄÇ ÊàëËá™Â∑±Âú®ÂàöÂºÄÂßãËß£ÂÜ≥ÈÄíÂΩíÈóÆÈ¢òÁöÑÊó∂ÂÄôÔºåÊÄªÊòØ‰ºöÂéªÁ∫†ÁªìËøô‰∏ÄÂ±ÇÂáΩÊï∞ÂÅö‰∫Ü‰ªÄ‰πàÔºåÂÆÉË∞ÉÁî®Ëá™Ë∫´ÂêéÁöÑ‰∏ã‰∏ÄÂ±ÇÂáΩÊï∞ÂèàÂÅö‰∫Ü‰ªÄ‰πà‚Ä¶ÁÑ∂ÂêéÂ∞±‰ºöËßâÂæóÂÆûÁé∞‰∏Ä‰∏™ÈÄíÂΩíËß£Ê≥ïÂçÅÂàÜÂ§çÊùÇÔºåÊ†πÊú¨Â∞±Êó†‰ªé‰∏ãÊâã„ÄÇ Áõ∏‰ø°ÂæàÂ§öÂàùÂ≠¶ËÄÖÂíåÊàë‰∏ÄÊ†∑ÔºåËøôÊòØ‰∏Ä‰∏™ÊÄùÁª¥ËØØÂå∫Ôºå‰∏ÄÂÆöË¶ÅËµ∞Âá∫Êù•„ÄÇÊó¢ÁÑ∂ÈÄíÂΩíÊòØ‰∏Ä‰∏™ÂèçÂ§çË∞ÉÁî®Ëá™Ë∫´ÁöÑËøáÁ®ãÔºåËøôÂ∞±ËØ¥ÊòéÂÆÉÊØè‰∏ÄÁ∫ßÁöÑÂäüËÉΩÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂõ†Ê≠§Êàë‰ª¨Âè™ÈúÄË¶ÅÂÖ≥Ê≥®‰∏ÄÁ∫ßÈÄíÂΩíÁöÑËß£ÂÜ≥ËøáÁ®ãÂç≥ÂèØ„ÄÇ Êàë‰ª¨ÈúÄË¶ÅÂÖ≥ÂøÉÁöÑ‰∏ªË¶ÅÊòØ‰ª•‰∏ã‰∏âÁÇπÔºö Êï¥‰∏™ÈÄíÂΩíÁöÑÁªàÊ≠¢Êù°‰ª∂„ÄÇ ‰∏ÄÁ∫ßÈÄíÂΩíÈúÄË¶ÅÂÅö‰ªÄ‰πàÔºü Â∫îËØ•ËøîÂõûÁªô‰∏ä‰∏ÄÁ∫ßÁöÑËøîÂõûÂÄºÊòØ‰ªÄ‰πàÔºü Âõ†Ê≠§Ôºå‰πüÂ∞±Êúâ‰∫ÜÊàë‰ª¨Ëß£ÈÄíÂΩíÈ¢òÁöÑ‰∏âÈÉ®Êõ≤Ôºö ÊâæÊï¥‰∏™ÈÄíÂΩíÁöÑÁªàÊ≠¢Êù°‰ª∂ÔºöÈÄíÂΩíÂ∫îËØ•Âú®‰ªÄ‰πàÊó∂ÂÄôÁªìÊùüÔºü ÊâæËøîÂõûÂÄºÔºöÂ∫îËØ•Áªô‰∏ä‰∏ÄÁ∫ßËøîÂõû‰ªÄ‰πà‰ø°ÊÅØÔºü Êú¨Á∫ßÈÄíÂΩíÂ∫îËØ•ÂÅö‰ªÄ‰πàÔºöÂú®Ëøô‰∏ÄÁ∫ßÈÄíÂΩí‰∏≠ÔºåÂ∫îËØ•ÂÆåÊàê‰ªÄ‰πà‰ªªÂä°Ôºü ‰∏ÄÂÆöË¶ÅÁêÜËß£Ëøô3Ê≠•ÔºåËøôÂ∞±ÊòØ‰ª•ÂêéÈÄíÂΩíÁßíÊùÄÁÆóÊ≥ïÈ¢òÁöÑ‰æùÊçÆÂíåÊÄùË∑Ø„ÄÇ ‰ΩÜËøô‰πàËØ¥Â•ΩÂÉèÂæàÁ©∫ÔºåÊàë‰ª¨Êù•‰ª•È¢òÁõÆ‰Ωú‰∏∫‰æãÂ≠êÔºåÁúãÁúãÊÄé‰πàÂ•óËøô‰∏™Ê®°ÁâàÔºåÁõ∏‰ø°3ÈÅìÈ¢ò‰∏ãÊù•Ôºå‰Ω†Â∞±ËÉΩÊÖ¢ÊÖ¢ÁêÜËß£Ëøô‰∏™Ê®°Áâà„ÄÇ‰πãÂêéÂÜçËß£ËøôÁßçÂ•óË∑ØÈÄíÂΩíÈ¢òÈÉΩËÉΩÁõ¥Êé•Áßí‰∫Ü„ÄÇ ‰æã1ÔºöÊ±Ç‰∫åÂèâÊ†ëÁöÑÊúÄÂ§ßÊ∑±Â∫¶ÂÖàÁúã‰∏ÄÈÅìÁÆÄÂçïÁöÑLeetcodeÈ¢òÁõÆÔºö Leetcode 104. ‰∫åÂèâÊ†ëÁöÑÊúÄÂ§ßÊ∑±Â∫¶ È¢òÁõÆÂæàÁÆÄÂçïÔºåÊ±Ç‰∫åÂèâÊ†ëÁöÑÊúÄÂ§ßÊ∑±Â∫¶ÔºåÈÇ£‰πàÁõ¥Êé•Â•óÈÄíÂΩíËß£È¢ò‰∏âÈÉ®Êõ≤Ê®°ÁâàÔºö ÊâæÁªàÊ≠¢Êù°‰ª∂„ÄÇ ‰ªÄ‰πàÊÉÖÂÜµ‰∏ãÈÄíÂΩíÁªìÊùüÔºüÂΩìÁÑ∂ÊòØÊ†ë‰∏∫Á©∫ÁöÑÊó∂ÂÄôÔºåÊ≠§Êó∂Ê†ëÁöÑÊ∑±Â∫¶‰∏∫0ÔºåÈÄíÂΩíÂ∞±ÁªìÊùü‰∫Ü„ÄÇ ÊâæËøîÂõûÂÄº„ÄÇ Â∫îËØ•ËøîÂõû‰ªÄ‰πàÔºüÈ¢òÁõÆÊ±ÇÁöÑÊòØÊ†ëÁöÑÊúÄÂ§ßÊ∑±Â∫¶ÔºåÊàë‰ª¨ÈúÄË¶Å‰ªéÊØè‰∏ÄÁ∫ßÂæóÂà∞ÁöÑ‰ø°ÊÅØËá™ÁÑ∂ÊòØÂΩìÂâçËøô‰∏ÄÁ∫ßÂØπÂ∫îÁöÑÊ†ëÁöÑÊúÄÂ§ßÊ∑±Â∫¶ÔºåÂõ†Ê≠§Êàë‰ª¨ÁöÑËøîÂõûÂÄºÂ∫îËØ•ÊòØÂΩìÂâçÊ†ëÁöÑÊúÄÂ§ßÊ∑±Â∫¶ÔºåËøô‰∏ÄÊ≠•ÂèØ‰ª•ÁªìÂêàÁ¨¨‰∏âÊ≠•Êù•Áúã„ÄÇ Êú¨Á∫ßÈÄíÂΩíÂ∫îËØ•ÂÅö‰ªÄ‰πà„ÄÇ È¶ñÂÖàÔºåËøòÊòØÂº∫Ë∞ÉË¶ÅËµ∞Âá∫‰πãÂâçÁöÑÊÄùÁª¥ËØØÂå∫ÔºåÈÄíÂΩíÂêéÊàë‰ª¨ÁúºÈáåÁöÑÊ†ë‰∏ÄÂÆöÊòØËøô‰∏™Ê†∑Â≠êÁöÑÔºåÁúã‰∏ãÂõæ„ÄÇÊ≠§Êó∂Â∞±‰∏â‰∏™ËäÇÁÇπÔºöroot„ÄÅroot.left„ÄÅroot.rightÔºåÂÖ∂‰∏≠Ê†πÊçÆÁ¨¨‰∫åÊ≠•Ôºåroot.leftÂíåroot.rightÂàÜÂà´ËÆ∞ÂΩïÁöÑÊòØrootÁöÑÂ∑¶Âè≥Â≠êÊ†ëÁöÑÊúÄÂ§ßÊ∑±Â∫¶„ÄÇÈÇ£‰πàÊú¨Á∫ßÈÄíÂΩíÂ∫îËØ•ÂÅö‰ªÄ‰πàÂ∞±ÂæàÊòéÁ°Æ‰∫ÜÔºåËá™ÁÑ∂Â∞±ÊòØÂú®rootÁöÑÂ∑¶Âè≥Â≠êÊ†ë‰∏≠ÈÄâÊã©ËæÉÂ§ßÁöÑ‰∏Ä‰∏™ÔºåÂÜçÂä†‰∏ä1Â∞±ÊòØ‰ª•root‰∏∫Ê†πÁöÑÂ≠êÊ†ëÁöÑÊúÄÂ§ßÊ∑±Â∫¶‰∫ÜÔºåÁÑ∂ÂêéÂÜçËøîÂõûËøô‰∏™Ê∑±Â∫¶Âç≥ÂèØ„ÄÇ ÂÖ∑‰ΩìJava‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12345678910111213class Solution &#123; public int maxDepth(TreeNode root) &#123; //ÁªàÊ≠¢Êù°‰ª∂ÔºöÂΩìÊ†ë‰∏∫Á©∫Êó∂ÁªìÊùüÈÄíÂΩíÔºåÂπ∂ËøîÂõûÂΩìÂâçÊ∑±Â∫¶0 if(root == null)&#123; return 0; &#125; //rootÁöÑÂ∑¶„ÄÅÂè≥Â≠êÊ†ëÁöÑÊúÄÂ§ßÊ∑±Â∫¶ int leftDepth = maxDepth(root.left); int rightDepth = maxDepth(root.right); //ËøîÂõûÁöÑÊòØÂ∑¶Âè≥Â≠êÊ†ëÁöÑÊúÄÂ§ßÊ∑±Â∫¶+1 return Math.max(leftDepth, rightDepth) + 1; &#125;&#125; ÂΩìË∂≥Â§üÁÜüÁªÉÂêéÔºå‰πüÂèØ‰ª•ÂíåLeetcodeËØÑËÆ∫Âå∫‰∏ÄÊ†∑ÔºåÂæàÈ™öÁöÑÂá†Ë°å‰ª£Á†ÅÊêûÂÆöÈóÆÈ¢òÔºåËÆ©‰πãÂêéÁöÑÊñ∞ÊâãÁúãÁöÑ‰∏ÄËÑ∏ÊáµÈÄº(ËøôÈÅìÈ¢ò‰πüÊòØÊàëÁ¨¨‰∏ÄÊ¨°‰∏ÄË°å‰ª£Á†ÅÊêûÂÆö‰∏ÄÈÅìLeetcodeÈ¢ò)Ôºö 12345class Solution &#123; public int maxDepth(TreeNode root) &#123; return root == null ? 0 : Math.max(maxDepth(root.left), maxDepth(root.right)) + 1; &#125;&#125; ‰æã2Ôºö‰∏§‰∏§‰∫§Êç¢ÈìæË°®‰∏≠ÁöÑËäÇÁÇπÁúã‰∫Ü‰∏ÄÈÅìÈÄíÂΩíÂ•óË∑ØËß£ÂÜ≥‰∫åÂèâÊ†ëÁöÑÈóÆÈ¢òÂêéÔºåÊúâÁÇπÂ•óË∑ØÊêûÂÆöÈÄíÂΩíÁöÑÊÑüËßâ‰∫ÜÂêóÔºüÊàë‰ª¨ÂÜçÊù•Áúã‰∏ÄÈÅìLeetcode‰∏≠Á≠âÈöæÂ∫¶ÁöÑÈìæË°®ÁöÑÈóÆÈ¢òÔºåÊéåÊè°Â•óË∑ØÂêéËøôÁßç‰∏≠Á≠âÈöæÂ∫¶ÁöÑÈóÆÈ¢òÁúüÁöÑÂ∞±ÊòØÁßíÔºöLeetcode 24. ‰∏§‰∏§‰∫§Êç¢ÈìæË°®‰∏≠ÁöÑËäÇÁÇπ Áõ¥Êé•‰∏ä‰∏âÈÉ®Êõ≤Ê®°ÁâàÔºö ÊâæÁªàÊ≠¢Êù°‰ª∂„ÄÇ ‰ªÄ‰πàÊÉÖÂÜµ‰∏ãÈÄíÂΩíÁªàÊ≠¢ÔºüÊ≤°Âæó‰∫§Êç¢ÁöÑÊó∂ÂÄôÔºåÈÄíÂΩíÂ∞±ÁªàÊ≠¢‰∫ÜÂëó„ÄÇÂõ†Ê≠§ÂΩìÈìæË°®Âè™Ââ©‰∏Ä‰∏™ËäÇÁÇπÊàñËÄÖÊ≤°ÊúâËäÇÁÇπÁöÑÊó∂ÂÄôÔºåËá™ÁÑ∂ÈÄíÂΩíÂ∞±ÁªàÊ≠¢‰∫Ü„ÄÇ ÊâæËøîÂõûÂÄº„ÄÇ Êàë‰ª¨Â∏åÊúõÂêë‰∏ä‰∏ÄÁ∫ßÈÄíÂΩíËøîÂõû‰ªÄ‰πà‰ø°ÊÅØÔºüÁî±‰∫éÊàë‰ª¨ÁöÑÁõÆÁöÑÊòØ‰∏§‰∏§‰∫§Êç¢ÈìæË°®‰∏≠Áõ∏ÈÇªÁöÑËäÇÁÇπÔºåÂõ†Ê≠§Ëá™ÁÑ∂Â∏åÊúõ‰∫§Êç¢Áªô‰∏ä‰∏ÄÁ∫ßÈÄíÂΩíÁöÑÊòØÂ∑≤ÁªèÂÆåÊàê‰∫§Êç¢Â§ÑÁêÜÔºåÂç≥Â∑≤ÁªèÂ§ÑÁêÜÂ•ΩÁöÑÈìæË°®„ÄÇ Êú¨Á∫ßÈÄíÂΩíÂ∫îËØ•ÂÅö‰ªÄ‰πà„ÄÇ ÁªìÂêàÁ¨¨‰∫åÊ≠•ÔºåÁúã‰∏ãÂõæÔºÅÁî±‰∫éÂè™ËÄÉËôëÊú¨Á∫ßÈÄíÂΩíÔºåÊâÄ‰ª•Ëøô‰∏™ÈìæË°®Âú®Êàë‰ª¨ÁúºÈáåÂÖ∂ÂÆû‰πüÂ∞±‰∏â‰∏™ËäÇÁÇπÔºöhead„ÄÅhead.next„ÄÅÂ∑≤Â§ÑÁêÜÂÆåÁöÑÈìæË°®ÈÉ®ÂàÜ„ÄÇËÄåÊú¨Á∫ßÈÄíÂΩíÁöÑ‰ªªÂä°‰πüÂ∞±ÊòØ‰∫§Êç¢Ëøô3‰∏™ËäÇÁÇπ‰∏≠ÁöÑÂâç‰∏§‰∏™ËäÇÁÇπÔºåÂ∞±Âæàeasy‰∫Ü„ÄÇ ÈôÑ‰∏äJava‰ª£Á†ÅÔºö 123456789101112131415class Solution &#123; public ListNode swapPairs(ListNode head) &#123; //ÁªàÊ≠¢Êù°‰ª∂ÔºöÈìæË°®Âè™Ââ©‰∏Ä‰∏™ËäÇÁÇπÊàñËÄÖÊ≤°ËäÇÁÇπ‰∫ÜÔºåÊ≤°Âæó‰∫§Êç¢‰∫Ü„ÄÇËøîÂõûÁöÑÊòØÂ∑≤ÁªèÂ§ÑÁêÜÂ•ΩÁöÑÈìæË°® if(head == null || head.next == null)&#123; return head; &#125; //‰∏ÄÂÖ±‰∏â‰∏™ËäÇÁÇπ:head, next, swapPairs(next.next) //‰∏ãÈù¢ÁöÑ‰ªªÂä°‰æøÊòØ‰∫§Êç¢Ëøô3‰∏™ËäÇÁÇπ‰∏≠ÁöÑÂâç‰∏§‰∏™ËäÇÁÇπ ListNode next = head.next; head.next = swapPairs(next.next); next.next = head; //Ê†πÊçÆÁ¨¨‰∫åÊ≠•ÔºöËøîÂõûÁªô‰∏ä‰∏ÄÁ∫ßÁöÑÊòØÂΩìÂâçÂ∑≤ÁªèÂÆåÊàê‰∫§Êç¢ÂêéÔºåÂç≥Â§ÑÁêÜÂ•Ω‰∫ÜÁöÑÈìæË°®ÈÉ®ÂàÜ return next; &#125;&#125; ‰æã3ÔºöÂπ≥Ë°°‰∫åÂèâÊ†ëÁõ∏‰ø°ÁªèËøá‰ª•‰∏ä2ÈÅìÈ¢òÔºå‰Ω†Â∑≤ÁªèÂ§ßÊ¶ÇÁêÜËß£‰∫ÜËøô‰∏™Ê®°ÁâàÁöÑËß£È¢òÊµÅÁ®ã‰∫Ü„ÄÇ ÈÇ£‰πàËØ∑‰Ω†ÂÖà‰∏çÁúã‰ª•‰∏ãÈÉ®ÂàÜÔºåÂ∞ùËØïËß£ÂÜ≥‰∏Ä‰∏ãËøôÈÅìeasyÈöæÂ∫¶ÁöÑLeetcodeÈ¢òÔºà‰∏™‰∫∫ËßâÂæóÊ≠§È¢òÊØî‰∏äÈù¢ÁöÑmediumÈöæÂ∫¶Ë¶ÅÈöæÔºâÔºöLeetcode 110. Âπ≥Ë°°‰∫åÂèâÊ†ë ÊàëËßâÂæóËøô‰∏™È¢òÁúüÁöÑÊòØÈõÜÂêà‰∫ÜÊ®°ÁâàÁöÑÁ≤æÈ´ìÊâÄÂú®Ôºå‰∏ãÈù¢Â•ó‰∏âÈÉ®Êõ≤Ê®°ÁâàÔºö ÊâæÁªàÊ≠¢Êù°‰ª∂„ÄÇ ‰ªÄ‰πàÊÉÖÂÜµ‰∏ãÈÄíÂΩíÂ∫îËØ•ÁªàÊ≠¢ÔºüËá™ÁÑ∂ÊòØÂ≠êÊ†ë‰∏∫Á©∫ÁöÑÊó∂ÂÄôÔºåÁ©∫Ê†ëËá™ÁÑ∂ÊòØÂπ≥Ë°°‰∫åÂèâÊ†ë‰∫Ü„ÄÇ Â∫îËØ•ËøîÂõû‰ªÄ‰πà‰ø°ÊÅØÔºö ‰∏∫‰ªÄ‰πàÊàëËØ¥Ëøô‰∏™È¢òÊòØÈõÜÂêà‰∫ÜÊ®°ÁâàÁ≤æÈ´ìÔºüÊ≠£ÊòØÂõ†‰∏∫Ê≠§È¢òÁöÑËøîÂõûÂÄº„ÄÇË¶ÅÁü•ÈÅìÊàë‰ª¨ÊêûËøô‰πàÂ§öËä±ÈáåËÉ°Âì®ÁöÑÔºåÈÉΩÊòØ‰∏∫‰∫ÜËÉΩÂÜôÂá∫Ê≠£Á°ÆÁöÑÈÄíÂΩíÂáΩÊï∞ÔºåÂõ†Ê≠§Âú®Ëß£Ëøô‰∏™È¢òÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨Â∞±ÈúÄË¶ÅÊÄùËÄÉÔºåÊàë‰ª¨Âà∞Â∫ïÂ∏åÊúõËøîÂõû‰ªÄ‰πàÂÄºÔºü ‰Ωï‰∏∫Âπ≥Ë°°‰∫åÂèâÊ†ëÔºüÂπ≥Ë°°‰∫åÂèâÊ†ëÂç≥Â∑¶Âè≥‰∏§Ê£µÂ≠êÊ†ëÈ´òÂ∫¶Â∑Æ‰∏çÂ§ß‰∫é1ÁöÑ‰∫åÂèâÊ†ë„ÄÇËÄåÂØπ‰∫é‰∏ÄÈ¢óÊ†ëÔºåÂÆÉÊòØ‰∏Ä‰∏™Âπ≥Ë°°‰∫åÂèâÊ†ëÈúÄË¶ÅÊª°Ë∂≥‰∏â‰∏™Êù°‰ª∂ÔºöÂÆÉÁöÑÂ∑¶Â≠êÊ†ëÊòØÂπ≥Ë°°‰∫åÂèâÊ†ëÔºåÂÆÉÁöÑÂè≥Â≠êÊ†ëÊòØÂπ≥Ë°°‰∫åÂèâÊ†ëÔºåÂÆÉÁöÑÂ∑¶Âè≥Â≠êÊ†ëÁöÑÈ´òÂ∫¶Â∑Æ‰∏çÂ§ß‰∫é1„ÄÇÊç¢Âè•ËØùËØ¥ÔºöÂ¶ÇÊûúÂÆÉÁöÑÂ∑¶Â≠êÊ†ëÊàñÂè≥Â≠êÊ†ë‰∏çÊòØÂπ≥Ë°°‰∫åÂèâÊ†ëÔºåÊàñËÄÖÂÆÉÁöÑÂ∑¶Âè≥Â≠êÊ†ëÈ´òÂ∫¶Â∑ÆÂ§ß‰∫é1ÔºåÈÇ£‰πàÂÆÉÂ∞±‰∏çÊòØÂπ≥Ë°°‰∫åÂèâÊ†ë„ÄÇ ËÄåÂú®Êàë‰ª¨ÁúºÈáåÔºåËøôÈ¢ó‰∫åÂèâÊ†ëÂ∞±3‰∏™ËäÇÁÇπÔºöroot„ÄÅleft„ÄÅright„ÄÇÈÇ£‰πàÊàë‰ª¨Â∫îËØ•ËøîÂõû‰ªÄ‰πàÂë¢ÔºüÂ¶ÇÊûúËøîÂõû‰∏Ä‰∏™ÂΩìÂâçÊ†ëÊòØÂê¶ÊòØÂπ≥Ë°°‰∫åÂèâÊ†ëÁöÑbooleanÁ±ªÂûãÁöÑÂÄºÔºåÈÇ£‰πàÊàëÂè™Áü•ÈÅìleftÂíårightËøô‰∏§Ê£µÊ†ëÊòØÂê¶ÊòØÂπ≥Ë°°‰∫åÂèâÊ†ëÔºåÊó†Ê≥ïÂæóÂá∫leftÂíårightÁöÑÈ´òÂ∫¶Â∑ÆÊòØÂê¶‰∏çÂ§ß‰∫é1ÔºåËá™ÁÑ∂‰πüÂ∞±Êó†Ê≥ïÂæóÂá∫rootËøôÊ£µÊ†ëÊòØÂê¶ÊòØÂπ≥Ë°°‰∫åÂèâÊ†ë‰∫Ü„ÄÇËÄåÂ¶ÇÊûúÊàëËøîÂõûÁöÑÊòØ‰∏Ä‰∏™Âπ≥Ë°°‰∫åÂèâÊ†ëÁöÑÈ´òÂ∫¶ÁöÑintÁ±ªÂûãÁöÑÂÄºÔºåÈÇ£‰πàÊàëÂ∞±Âè™Áü•ÈÅì‰∏§Ê£µÊ†ëÁöÑÈ´òÂ∫¶Ôºå‰ΩÜÊó†Ê≥ïÁü•ÈÅìËøô‰∏§Ê£µÊ†ëÊòØ‰∏çÊòØÂπ≥Ë°°‰∫åÂèâÊ†ëÔºåËá™ÁÑ∂‰πüÂ∞±Ê≤°Ê≥ïÂà§Êñ≠rootËøôÊ£µÊ†ëÊòØ‰∏çÊòØÂπ≥Ë°°‰∫åÂèâÊ†ë‰∫Ü„ÄÇ Âõ†Ê≠§ÔºåËøôÈáåÊàë‰ª¨ËøîÂõûÁöÑ‰ø°ÊÅØÂ∫îËØ•ÊòØÊó¢ÂåÖÂê´Â≠êÊ†ëÁöÑÊ∑±Â∫¶ÁöÑintÁ±ªÂûãÁöÑÂÄºÔºåÂèàÂåÖÂê´Â≠êÊ†ëÊòØÂê¶ÊòØÂπ≥Ë°°‰∫åÂèâÊ†ëÁöÑbooleanÁ±ªÂûãÁöÑÂÄº„ÄÇÂèØ‰ª•ÂçïÁã¨ÂÆö‰πâ‰∏Ä‰∏™ReturnNodeÁ±ªÔºåÂ¶Ç‰∏ãÔºö 123456789class ReturnNode&#123; boolean isB; int depth; //ÊûÑÈÄ†ÊñπÊ≥ï public ReturnNode(boolean isB, int depth)&#123; this.isB = isB; this.depth = depth; &#125;&#125; Êú¨Á∫ßÈÄíÂΩíÂ∫îËØ•ÂÅö‰ªÄ‰πà„ÄÇ Áü•ÈÅì‰∫ÜÁ¨¨‰∫åÊ≠•ÁöÑËøîÂõûÂÄºÂêéÔºåËøô‰∏ÄÊ≠•Â∞±ÂæàÁÆÄÂçï‰∫Ü„ÄÇÁõÆÂâçÊ†ëÊúâ‰∏â‰∏™ËäÇÁÇπÔºörootÔºåleftÔºåright„ÄÇÊàë‰ª¨È¶ñÂÖàÂà§Êñ≠leftÂ≠êÊ†ëÂíårightÂ≠êÊ†ëÊòØÂê¶ÊòØÂπ≥Ë°°‰∫åÂèâÊ†ëÔºåÂ¶ÇÊûú‰∏çÊòØÂàôÁõ¥Êé•ËøîÂõûfalse„ÄÇÂÜçÂà§Êñ≠‰∏§Ê†ëÈ´òÂ∫¶Â∑ÆÊòØÂê¶‰∏çÂ§ß‰∫é1ÔºåÂ¶ÇÊûúÂ§ß‰∫é1‰πüÁõ¥Êé•ËøîÂõûfalse„ÄÇÂê¶ÂàôËØ¥Êòé‰ª•root‰∏∫ËäÇÁÇπÁöÑÂ≠êÊ†ëÊòØÂπ≥Ë°°‰∫åÂèâÊ†ëÔºåÈÇ£‰πàÂ∞±ËøîÂõûtrueÂíåÂÆÉÁöÑÈ´òÂ∫¶„ÄÇ ÂÖ∑‰ΩìÁöÑJava‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536class Solution &#123; //Ëøô‰∏™ReturnNodeÊòØÂèÇËÄÉÊàëÊèèËø∞ÁöÑÈÄíÂΩíÂ•óË∑ØÁöÑÁ¨¨‰∫åÊ≠•ÔºöÊÄùËÄÉËøîÂõûÂÄºÊòØ‰ªÄ‰πà //‰∏ÄÊ£µÊ†ëÊòØBSTÁ≠â‰ª∑‰∫éÂÆÉÁöÑÂ∑¶„ÄÅÂè≥‰ø©Â≠êÊ†ëÈÉΩÊòØBST‰∏î‰ø©Â≠êÊ†ëÈ´òÂ∫¶Â∑Æ‰∏çË∂ÖËøá1 //Âõ†Ê≠§ÊàëËÆ§‰∏∫ËøîÂõûÂÄºÂ∫îËØ•ÂåÖÂê´ÂΩìÂâçÊ†ëÊòØÂê¶ÊòØBSTÂíåÂΩìÂâçÊ†ëÁöÑÈ´òÂ∫¶Ëøô‰∏§‰∏™‰ø°ÊÅØ private class ReturnNode&#123; boolean isB; int depth; public ReturnNode(int depth, boolean isB)&#123; this.isB = isB; this.depth = depth; &#125; &#125; //‰∏ªÂáΩÊï∞ public boolean isBalanced(TreeNode root) &#123; return isBST(root).isB; &#125; //ÂèÇËÄÉÈÄíÂΩíÂ•óË∑ØÁöÑÁ¨¨‰∏âÈÉ®ÔºöÊèèËø∞ÂçïÊ¨°ÊâßË°åËøáÁ®ãÊòØ‰ªÄ‰πàÊ†∑ÁöÑ //ËøôÈáåÁöÑÂçïÊ¨°ÊâßË°åËøáÁ®ãÂÖ∑‰ΩìÂ¶Ç‰∏ãÔºö //ÊòØÂê¶ÁªàÊ≠¢?-&gt;Ê≤°ÁªàÊ≠¢ÁöÑËØùÔºåÂà§Êñ≠ÊòØÂê¶Êª°Ë∂≥‰∏çÂπ≥Ë°°ÁöÑ‰∏â‰∏™Êù°‰ª∂-&gt;ËøîÂõûÂÄº public ReturnNode isBST(TreeNode root)&#123; if(root == null)&#123; return new ReturnNode(0, true); &#125; //‰∏çÂπ≥Ë°°ÁöÑÊÉÖÂÜµÊúâ3ÁßçÔºöÂ∑¶Ê†ë‰∏çÂπ≥Ë°°„ÄÅÂè≥Ê†ë‰∏çÂπ≥Ë°°„ÄÅÂ∑¶Ê†ëÂíåÂè≥Ê†ëÂ∑ÆÁöÑÁªùÂØπÂÄºÂ§ß‰∫é1 ReturnNode left = isBST(root.left); ReturnNode right = isBST(root.right); if(left.isB == false || right.isB == false)&#123; return new ReturnNode(0, false); &#125; if(Math.abs(left.depth - right.depth) &gt; 1)&#123; return new ReturnNode(0, false); &#125; //‰∏çÊª°Ë∂≥‰∏äÈù¢3ÁßçÊÉÖÂÜµÔºåËØ¥ÊòéÂπ≥Ë°°‰∫ÜÔºåÊ†ëÁöÑÊ∑±Â∫¶‰∏∫Â∑¶Âè≥‰ø©Â≠êÊ†ëÊúÄÂ§ßÊ∑±Â∫¶+1 return new ReturnNode(Math.max(left.depth, right.depth) + 1, true); &#125;&#125; ‰∏Ä‰∫õÂèØ‰ª•Áî®Ëøô‰∏™Â•óË∑ØËß£ÂÜ≥ÁöÑÈ¢òÊöÇÊó∂Â∞±ÂÜôËøô‰πàÂ§öÂï¶Ôºå‰Ωú‰∏∫‰∏Ä‰∏™È´òËÄÉËØ≠ÊñáÂèäÊ†ºÂàÜÔºåÂ§ßÂ≠¶ÂèàÂ≠¶‰∫ÜÂ∑•ÁßëÁöÑ‰∫∫ÔºåË°®Ëø∞ËÉΩÂäõÂÆûÂú®Â∑ÆÂõ†Ê≠§Âï∞Âï∞Âó¶Âó¶ÂÜô‰∫Ü‰∏ÄÂ§ßÂ†ÜÔºåÂ∏åÊúõÂ§ßÂÆ∂ËÉΩÁêÜËß£Ëøô‰∏™ÂæàÂ•ΩÁî®ÁöÑÂ•óË∑Ø„ÄÇ ‰∏ãÈù¢ÊàëÂÜçÂàó‰∏æÂá†ÈÅìÊàëÂú®Âà∑È¢òËøáÁ®ã‰∏≠ÈÅáÂà∞ÁöÑ‰πüÊòØÁî®Ëøô‰∏™Â•óË∑ØÁßíÁöÑÈ¢òÔºåÁúüÁöÑÂ§™Â§ö‰∫ÜÔºåÂ§ßÈÉ®ÂàÜÈìæË°®ÂíåÊ†ëÁöÑÈÄíÂΩíÈ¢òÈÉΩËÉΩËøô‰πàÁßíÔºåÂõ†‰∏∫Ê†ëÂíåÈìæË°®Â§©ÁîüÂ∞±ÊòØÈÄÇÂêàÈÄíÂΩíÁöÑÁªìÊûÑ„ÄÇ Êàë‰ºöÈöèÊó∂Ë°•ÂÖÖÔºåÊ≠£Â•ΩÂ§ßÂÆ∂ÂèØ‰ª•Áúã‰∫Ü‰∏äÈù¢‰∏â‰∏™È¢òÂêéÂèØ‰ª•ÊãøËøô‰∫õÈ¢òÊù•ÁªÉÁªÉÊâãÔºåÁúãÁúãËá™Â∑±ÊòØÂê¶ËÉΩÁã¨Á´ãÂø´ÈÄüÂáÜÁ°ÆÁöÑÂÜôÂá∫ÈÄíÂΩíËß£Ê≥ï‰∫Ü„ÄÇ Leetcode 101. ÂØπÁß∞‰∫åÂèâÊ†ë Leetcode 111. ‰∫åÂèâÊ†ëÁöÑÊúÄÂ∞èÊ∑±Â∫¶ Leetcode 226. ÁøªËΩ¨‰∫åÂèâÊ†ëÔºöËøô‰∏™È¢òÁöÑÂ§áÊ≥®ÊòØÊúÄÈ™öÁöÑ„ÄÇMac OS‰∏ãËΩΩÁ•ûÂô®homebrewÁöÑÂ§ß‰Ω¨‰ΩúËÄÖÂéªÈù¢ËØïË∞∑Ê≠åÔºåÊ≤°ÂÅöÂá∫Êù•ËøôÈÅìÁÆóÊ≥ïÈ¢òÔºåÁÑ∂ÂêéË¢´Ë∞∑Ê≠åÈù¢ËØïÂÆòÊÄº‰∫ÜÔºö‚ÄùÊàë‰ª¨90ÔºÖÁöÑÂ∑•Á®ãÂ∏à‰ΩøÁî®ÊÇ®ÁºñÂÜôÁöÑËΩØ‰ª∂(Homebrew)Ôºå‰ΩÜÊòØÊÇ®Âç¥Êó†Ê≥ïÂú®Èù¢ËØïÊó∂Âú®ÁôΩÊùø‰∏äÂÜôÂá∫ÁøªËΩ¨‰∫åÂèâÊ†ëËøôÈÅìÈ¢òÔºåËøôÂ§™Á≥üÁ≥ï‰∫Ü„ÄÇ‚Äù Leetcode 617. ÂêàÂπ∂‰∫åÂèâÊ†ë Leetcode 654. ÊúÄÂ§ß‰∫åÂèâÊ†ë Leetcode 83. Âà†Èô§ÊéíÂ∫èÈìæË°®‰∏≠ÁöÑÈáçÂ§çÂÖÉÁ¥† Leetcode 206. ÁøªËΩ¨ÈìæË°®]]></content>
      <tags>
        <tag>ÁÆóÊ≥ï</tag>
        <tag>recrusion</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂéÜÂπ¥Èù¢ÁªèÊÄªÁªì]]></title>
    <url>%2F2019%2F12%2F27%2F%E5%8E%86%E5%B9%B4%E9%9D%A2%E7%BB%8F%E6%80%BB%E7%BB%93.html</url>
    <content type="text"><![CDATA[Âø´ÊâãÁØáÊï∞ÊçÆÁªìÊûÑ ËØ¥ËØ¥B+Ê†ëÂíåBÊ†ëÁöÑÂå∫Âà´Ôºå‰ºòÁº∫ÁÇπÁ≠âÔºü B Ê†ëÊØè‰∏™ËäÇÁÇπÈÉΩÊúâÂ≠òÂÇ® DateÂüüÔºåÂπ∂‰∏î B Ê†ëÁöÑÂè∂Â≠êËäÇÁÇπÂπ∂Ê≤°ÊúâÁî®ÈìæË°®ËøûÊé•Ôºå‰ΩÜÊòØ B+ Ê†ëÊØè‰∏™ÈùûÂè∂Â≠êËäÇÁÇπÂè™ÊúâÁ¥¢ÂºïÂÄºÂíåÊåáÈíàÂüüÔºåÂπ∂‰∏çÂ≠òÂÇ® DateÂüüÔºåÂπ∂‰∏îÂÖ∂Âè∂Â≠êËäÇÁÇπÂ≠òÂÇ® Date Áî®ÈìæË°®ËøûÊé•ÔºåBÊ†ëÁöÑËØùÊØîÂπ≥Ë°°‰∫åÂèâÊ†ë„ÄåÊòØ‰∏ÄÊ£µÁ©∫Ê†ëÊàñÂÆÉÁöÑÂ∑¶Âè≥‰∏§‰∏™Â≠êÊ†ëÁöÑÈ´òÂ∫¶Â∑ÆÁöÑÁªùÂØπÂÄº‰∏çË∂ÖËøá1„ÄèËÄåË®ÄÔºåÂ¢ûÂä†ÂíåÂà†Èô§ËäÇÁÇπÊîπÂä®ÂæàÂ∞ëÔºåÊïàÁéáÈ´òÔºåB+ÊòØ‰∏∫‰∫ÜÊï∞ÊçÆÂ∫ìËÄåÁîüÁöÑÔºåÂÖ∂ÈìæË°®ÂèØ‰ª•Êõ¥Â•ΩÁöÑÊîØÊåÅËåÉÂõ¥Êü•ËØ¢ÔºåÂπ∂‰∏îÁî±‰∫é‰ªñÁöÑÈùûÂè∂Â≠êËäÇÁÇπÊòØ‰∏çÂ≠òÂÇ® DateÂüüÁöÑÔºåÊàë‰ª¨Áü•ÈÅìÔºåÊØè‰∏Ä‰∏™ËäÇÁÇπÈÉΩÊòØÈááÁî®ÁöÑÁ£ÅÁõòÈ¢ÑËØªÔºå‰πüÂ∞±ÊòØËØ¥‰∏Ä‰∏™ËäÇÁÇπÂç†Áî®‰∏ÄÈ°µÁöÑÊï∞ÊçÆÔºåËøôÊ†∑ÁöÑËØùB+ Âú®‰∏ÄÈ°µ‰∏≠ÂèØ‰ª•Â≠òÂÇ®Êõ¥Â§öÁöÑÊåáÈíàÂüüÔºåËøôÊ†∑Â∞±Â§ßÂ§ßÈôç‰Ωé‰∫ÜÊ†ëÁöÑÈ´òÂ∫¶ÔºåËøôÊ†∑Á£ÅÁõòËØªÂÜôÁöÑÊ¨°Êï∞Â∞±‰∏ãÈôç‰∫ÜÔºåÈùûÂ∏∏Â•Ω„ÄÇ ÁªèÊúâ‰∏Ä‰∏™Êü•ËØ¢Â•ΩÂèãÁöÑÊé•Âè£ÔºåËÆæËÆ°‰∏Ä‰∏™ÂæÆ‰ø°ÊúãÂèãÂúàÔºåÂèØ‰ª•ÂÆûÁé∞ÂèëË°®ÊúãÂèãÂúàÔºåÊ∑ªÂä†ËØÑËÆ∫ÔºåÊü•ÁúãËØÑËÆ∫Á≠âÂäüËÉΩ„ÄÇ‰∏ªË¶ÅÊòØËÆæËÆ°Êï∞ÊçÆÁªìÊûÑ Êìç‰ΩúÁ≥ªÁªüËÆ°ÁÆóÊú∫ÁΩëÁªú TCP‰∏âÊ¨°Êè°ÊâãÂõõÊ¨°Êå•ÊâãÔºåÂõõÊ¨°Êå•ÊâãËøáÁ®ã‰∏≠ÊúçÂä°Á´ØÁöÑÂì™Âá†ÁßçÁä∂ÊÄÅÔºåÂì™Âá†ÁßçÂåÖ ‰∏âÊ¨°Êè°ÊâãÔºöÂÆ¢Êà∑Á´ØÂèë‰∏Ä‰∏™ syn ÊúçÂä°Âô®Á´ØÂèë‰∏Ä‰∏™ syn ack ÁÑ∂ÂêéÂÆ¢Êà∑Á´ØÂèë‰∏Ä‰∏™ack ÂõõÊ¨°Êå•ÊâãÔºöÂÆ¢Êà∑Á´ØÂèë‰∏Ä‰∏™ fin ÊúçÂä°Âô®Á´ØÂèëÈÄÅ‰∏Ä‰∏™ ack ÁÑ∂ÂêéÂèëÈÄÅ‰∏Ä‰∏™ fin ÁÑ∂ÂêéÂÆ¢Êà∑Á´ØÂÜçÂèëÈÄÅ‰∏Ä‰∏™ack ÁÆóÊ≥ï ÁÆóÊ≥ïÈ¢òÔºöÊó†Â∫èÊï∞Âàó‰∏≠Ê±ÇÁ¨¨kÂ§ßÁöÑÊï∞(Áª¥Êä§ÊúÄÂ∞èÂ†ÜÔºåÁÑ∂Âêé‰æùÊ¨°ÈÅçÂéÜÔºå‰∏éÂ†ÜÈ°∂ÊØîËæÉ ÂÜô‰∏Ä‰∏™ÈÄâÊã©ÊéíÂ∫èÊàñËÄÖÊèíÂÖ•ÊéíÂ∫è ÂÜô‰∏Ä‰∏™Áîü‰∫ßËÄÖÊ∂àË¥πËÄÖ „ÄåGet!!!„Äç ‰∏âÁßçÊñπÊ≥ï„ÄÇ synchronizedÔºàObjectÔºâÁöÑ wait/notifyÔºõ ReentrantLock ‰∏≠ÁöÑ Condition ÁöÑ await/signalÔºõ ÈòªÂ°ûÈòüÂàóÁõ¥Êé•ÂÆûÁé∞ÔºöLinkedBlockingQueue ‰∏Ä‰∏™‰∫åÁª¥Áü©ÈòµËøõË°åÈÄÜÁΩÆÊìç‰ΩúÔºå‰πüÂ∞±ÊòØË°åÂèòÂàóÂàóÂèòË°å„ÄÇÊâ©Â±ï‰∏Ä‰∏ãÔºå‰∫åÁª¥Êï∞ÁªÑÂ≠òÂú®500gÁöÑÊñá‰ª∂‰∏≠ÔºåÊÄé‰πàÂÅöÊâçËÉΩÂÆåÊàê‰∏äÈù¢ÁÆóÊ≥ïÁöÑÊìç‰ΩúÔºåÊàëÂ∞±ËØ¥ÂÖàÊåâË°åÊãÜÂàÜÔºåÊúÄÂêéÂÜçÊãºÊé•„ÄÇ javaÂü∫Á°Ä HashMapÁöÑÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑ „ÄåGet!!!„Äç Á∫¢ÈªëÊ†ë+ÈìæË°®+Êï∞ÁªÑ HashMapÂìàÂ∏åÂáΩÊï∞ÁöÑËÆ§ËØÜÔºåJDK1.8ÈááÁî®ÁöÑhashÂáΩÊï∞ „ÄåGet!!!„Äç Êâ∞Âä®ÂáΩÊï∞ÔºåÈ´ò16‰ΩçÂíå‰Ωé16‰ΩçÁõ∏ÂºÇÊàñÔºå32‰ΩçÈÉΩÂèÇ‰∏éËøêÁÆóÔºåËøôÊ†∑hashÊõ¥ÂùáÂåÄ Ëá≥‰∫éÂ¶Ç‰ΩïËÆ°ÁÆóÊâÄÂú®ÁöÑÊï∞ÁªÑ‰ΩçÁΩÆÔºåÁõ¥Êé• hash ^ tab.length Áõ∏‰∏é Â§öÁ∫øÁ®ã QÔºöÂ§öÁ∫øÁ®ãJUCÂåÖ‰∏ãÁöÑ‰∏Ä‰∫õÂ∏∏ËßÅÁöÑÁ±ªÔºåÊØîÂ¶ÇCountDownLatch„ÄÅSemaphoreÁ≠â „ÄåGet!!!„Äç CountDownLatch ÂÄíËÆ°Êó∂Âô® Semphore ‰ø°Âè∑Èáè QÔºöÈîÅÁöÑÊ¶ÇÂøµÔºåÈîÅÁõ∏ÂÖ≥ÁöÑÂÖ≥ÈîÆÂ≠óÔºåvolatileÔºåsynchronized„ÄÇËøòÊØîËæÉ‰∫ÜReentrantLock‰∏ésynchronized„ÄÇ „ÄåGet!!!„Äç ReentrantLock &amp; syncronized Âå∫Âà´ ReentrantLock Êúâ‰∏â‰∏™ syncronized Ê≤°ÊúâÁöÑÁâπÊÄßÔºåÁ¨¨‰∏Ä‰∏™ÊòØ Êù°‰ª∂ÈòüÂàóÂèØ‰ª•ÊúâÂ§ö‰∏™ÔºåCondition ÂèØ‰ª•ÂàÜÁªÑÔºå‰ΩÜÊòØ syncronized ‰∏çÂèØ‰ª•ÔºõÁ¨¨‰∫å‰∏™ÊòØ ReentrantLock Êèê‰æõ ÂÖ¨Âπ≥ÈîÅ Âíå ÈùûÂÖ¨Âπ≥ÈîÅÁöÑÈÄâÊã©Ôºå‰ΩÜÊòØ syncronized ‰∏çÊèê‰æõÔºõÁ¨¨‰∏â‰∏™ÊòØ ReentrantLockÊúâ lockInterruptibly() ÊñπÊ≥ïÔºåÊèê‰æõ‰ºòÂÖàÂìçÂ∫î‰∏≠Êñ≠ÔºåÂ∞±ÊòØÂΩìÁ∫øÁ®ãÊ≠£Âú®Á≠âÂæÖÊó∂ÔºåÂèØ‰ª•Ë∞ÉÁî®Ëøô‰∏™Á≠âÂæÖÁ∫øÁ®ãÁöÑ Thread.interrupt()ÔºåÂÅúÊ≠¢Á≠âÂæÖÔºåÁõ¥Êé•ËøîÂõû„ÄÇ ReentrantLock ÊòØ‰∏Ä‰∏™Á±ªÔºåjdkÂ±ÇÈù¢ÂÆûÁé∞ÔºåËÄå syncronized ÂàôÊòØ jvmÂ±ÇÈù¢ÂÆûÁé∞ÔºåÊòØ‰∏Ä‰∏™ÂÖ≥ÈîÆÂ≠óÔºõ ÂΩìÁÑ∂‰∫ÜÔºåÈÉΩÊòØÂèØÈáçÂÖ•ÈîÅÔºåËÄå‰∏îÁé∞Âú® syncronized ÁöÑÊÄßËÉΩÂ∑≤ÁªèÂü∫Êú¨ÊåÅÂπ≥ ReentrantLock ‰∫Ü„ÄÇ QÔºöÁ∫øÁ®ãÊ±†ÊúâÂì™‰∫õÂèÇÊï∞ÔºüÂàÜÂà´Êúâ‰ªÄ‰πàÁî®ÔºüÂ¶ÇÊûú‰ªªÂä°Êï∞Ë∂ÖËøáÁöÑÊ†∏ÂøÉÁ∫øÁ®ãÊï∞Ôºå‰ºöÂèëÁîü‰ªÄ‰πàÔºüÈòªÂ°ûÈòüÂàóÂ§ßÂ∞èÊòØÂ§öÂ∞ëÔºü „ÄåGet!!!„Äç Á∫øÁ®ãÊ±†ÁöÑÂèÇÊï∞Êúâ corePoolSizeÔºàÁ∫øÁ®ãÊ±†Ê†∏ÂøÉÊï∞Ôºâ„ÄÅÁ∫øÁ®ãÊúÄÂ§ßÊï∞ÔºàmaxmiumPoolSizeÔºâ„ÄÅÈòªÂ°ûÈòüÂàó(worQueue)„ÄÅkeepAliveTime(Á∫øÁ®ãÊ±†Áª¥Êä§Á∫øÁ®ãÊâÄÂÖÅËÆ∏ÁöÑÁ©∫Èó≤Êó∂Èó¥)„ÄÅÁ∫øÁ®ãÂ∑•ÂéÇÔºàThreadFactoryÔºâ„ÄÅÊãíÁªùÁ≠ñÁï•ÔºàhandlerÔºâ„ÄÇÂ¶ÇÊûú‰ªªÂä°Êï∞Ë∂ÖËøáÊ†∏ÂøÉÁ∫øÁ®ãÊï∞Ôºå‰ºöÂÖàÂ∞Ü‰ªªÂä°ÊîæÂà∞ÈòªÂ°ûÈòüÂàó‰∏≠ÔºåÁÑ∂ÂêéÂ¶ÇÊûúÈòªÂ°ûÈòüÂàóÊª°ÔºåÂàôÊâ©Â§ßÁ∫øÁ®ã„ÄÇÈòªÂ°ûÈòüÂàóÂ§ßÂ∞èÂàÜ‰∏∫Êó†ÁïåÈòªÂ°ûÈòüÂàóÂíåÊúâÁïåÈòªÂ°ûÈòüÂàó„ÄÇ QÔºöÂú®È´òÂπ∂ÂèëÁöÑÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÊÄé‰πàÈÄâÊã©ÊúÄ‰ºòÁöÑÁ∫øÁ®ãÊï∞ÈáèÂë¢ÔºüÈÄâÊã©ÂéüÂàôÂèàÊòØ‰ªÄ‰πàÂë¢ÔºüÁ∫øÁ®ãÊï∞ÊòØ‰∏çÊòØË∂äÂ§öË∂äÂ•ΩÔºü „ÄåGet!!!„Äç ÈÄâÊã©Á∫øÁ®ãÊ±†ÁöÑÊï∞ÈáèÈúÄË¶Å‰ªé CPU ÁöÑËßíÂ∫¶ËÄÉËôëÔºåÂõ†‰∏∫ËÄÉËôë‰∏Ä‰∏™Á≥ªÁªüÁöÑÂêûÂêêÈáè‰∏äÈôêÂ∞±ÊòØCPUÔºåÂÖÖÂàÜÂà©Áî® cpu ÊòØÂÖ≥ÈîÆ„ÄÇCPUÂØÜÈõÜÂûãÂ∫îÁî®ÔºåÂàôÁ∫øÁ®ãÊ±†Â§ßÂ∞èËÆæÁΩÆ‰∏∫N+1ÔºàÁî±‰∫écpuÂæàÂøôÔºåÊâÄ‰ª•È¢ùÂ§ñÁöÑÂàáÊç¢‰∏ä‰∏ãÊñáÈùûÂ∏∏ÁöÑÊ∂àËÄóËµÑÊ∫êÔºåÊâÄ‰ª•‰∏Ä‰∏™Á∫øÁ®ãÂπ≤Ê¥ªÂØπÂ∫î‰∏ÄÊ†∏cpuÂç≥ÂèØÔºåÂ§öÁöÑÈÇ£‰∏Ä‰∏™ÊòØ‰∏∫‰∫ÜÈò≤Ê≠¢Êüê‰∏™Á∫øÁ®ãÂ§±Ë¥•ÊàñËÄÖÊåÇËµ∑ÂØºËá¥Êµ™Ë¥πcpuÊó∂ÈíüÔºâÔºåIOÂØÜÈõÜÂûãÔºåÁ∫øÁ®ãÊ±†Â§ßÂ∞èÊòØ 2N+1,ÂáÜÁ°ÆÁöÑËØ¥ÊòØ ÊúÄ‰Ω≥Á∫øÁ®ãÊï∞ÁõÆ = ÔºàÔºàÁ∫øÁ®ãÁ≠âÂæÖÊó∂Èó¥+Á∫øÁ®ãCPUÊó∂Èó¥Ôºâ/Á∫øÁ®ãCPUÊó∂Èó¥ Ôºâ* CPUÊï∞ÁõÆÔºåÊ∑∑ÂêàÂûãÁöÑËØùÂ∞±Â∞Ü‰∫åËÄÖÁªìÂêàÂ∞±Â•Ω„ÄÇÂΩìÁÑ∂ÔºåË¶ÅÊÉ≥ÊèêÈ´òÁ≥ªÁªüÂêûÂêêÈáèÔºåÁúüÊ≠£ÁöÑÊòØË¶ÅÂéªËß£ÂÜ≥Áü≠ÊùøÊïàÂ∫îÔºå‰πüÂ∞±ÊòØ I/OÔºåÂèØ‰ª•Â∞ÜÂÖ∂Âèò‰∏∫ NIO ‰πãÁ±ªÁöÑ„ÄÇ Á∫øÁ®ãÊï∞ËÇØÂÆö‰∏çÊòØË∂äÂ§öË∂äÂ•ΩÔºåÈ¶ñÂÖà cpu Â∞±ÈÇ£Âá†‰∏™ÔºåÂπ∂Ë°åÁöÑ‰πüÂ∞±ÈÇ£Âá†‰∏™ÔºåÂä†‰∏äÂàáÊç¢Á∫øÁ®ã‰∏ä‰∏ãÊñá‰πüÊòØÈúÄË¶ÅÊ∂àËÄóÁöÑ„ÄÇ https://www.cnblogs.com/jpfss/p/10967703.html QÔºöÊúâÂì™‰∫õÊØîËæÉÂ•ΩÁöÑÁ∫øÁ®ãÊ±†ÔºåÂêÑËá™ÁöÑÁâπÁÇπÊòØ‰ªÄ‰πàÔºü „ÄåGet!!!„Äç ÂõõÂ§ßÁ∫øÁ®ãÊ±† ‰∏ãÈù¢ÊúâÂÜô QÔºöÊÄé‰πàÂÆûÁé∞‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®ÁöÑËÆ°Êï∞Âô®Ôºü „ÄåGet!!!„Äç ‰ΩøÁî®Âä†ÈîÅÁöÑÊñπÂºèÔºåsynchronized or ReentrantLock ÈÉΩÂèØ‰ª•ÔºåÊàñËÄÖ‰ΩøÁî® juc ÂåÖ‰∏ãÁöÑ Atomic ÂéüÂ≠êÁ±ª‰πüÊòØÂèØ‰ª•ÁöÑ„ÄÇ 123456789101112131415161718&gt; public class Count1 &#123;&gt; // 1. ‰ΩøÁî® synchronizedÔºåÁî®‰∏çÁî® volatile ÈÉΩÊòØÂèØ‰ª•ÁöÑ&gt; private static int a = 0;&gt; &gt; public static void main(String[] args) &#123;&gt; final ExecutorService executorService = Executors.newCachedThreadPool();&gt; // ÂêØÂä®1000‰∏™Á∫øÁ®ã&gt; for (int i = 0; i &lt; 1000; i++) &#123;&gt; executorService.execute(() -&gt; count());&gt; &#125;&gt; executorService.shutdown();&gt; System.out.println(a);&gt; &#125;&gt; private static synchronized void count() &#123;&gt; a++;&gt; &#125;&gt; &#125;&gt; 123456789101112131415161718192021222324252627&gt; class Count2 &#123;&gt; // 1. ‰ΩøÁî® volatile + ReentrantLock&gt; // ‰∏çÁî® volatile ‰πüÊòØÂèØ‰ª•ÁöÑ&gt; private static int a = 0;&gt; private static final ReentrantLock lock = new ReentrantLock();&gt; &gt; public static void main(String[] args) &#123;&gt; final ExecutorService executorService = Executors.newCachedThreadPool();&gt; // ÂêØÂä®1000‰∏™Á∫øÁ®ã&gt; for (int i = 0; i &lt; 1000; i++) &#123;&gt; executorService.execute(() -&gt; count());&gt; &#125;&gt; executorService.shutdown();&gt; System.out.println(a);&gt; &#125;&gt; &gt; private static void count() &#123;&gt; try &#123;&gt; lock.lock();&gt; a++;&gt; &#125; finally &#123;&gt; lock.unlock();&gt; &#125;&gt; &gt; &#125;&gt; &#125;&gt; 123456789101112131415&gt; class Count3 &#123;&gt; // 1. Áõ¥Êé•‰ΩøÁî® AtomicÂ∞±ÂèØ‰ª•‰∫Ü&gt; private static AtomicInteger a = new AtomicInteger(0);&gt; &gt; public static void main(String[] args) &#123;&gt; final ExecutorService executorService = Executors.newCachedThreadPool();&gt; // ÂêØÂä®1000‰∏™Á∫øÁ®ã&gt; for (int i = 0; i &lt; 10000; i++) &#123;&gt; executorService.execute(() -&gt; a.getAndIncrement());&gt; &#125;&gt; executorService.shutdown();&gt; System.out.println(a.get());&gt; &#125;&gt; &#125;&gt; Êé•ÁùÄËÅäConcurrentHashMapÔºåÂ∫ïÂ±ÇÂÆûÁé∞ „ÄåGet!!!„Äç Â∫ïÂ±ÇÂÆûÁé∞Ôºü Á∫¢ÈªëÊ†ë+Êï∞ÁªÑ+ÈìæË°® JavaÂ§öÁ∫øÁ®ã‰∫ÜËß£‰πàÔºå‰ªÄ‰πàÊó∂ÂÄô‰∏Ä‰∏™intÔºåÁ±ªÂûãÁöÑÊìç‰ΩúÊòØ‰∏çÂÆâÂÖ®ÁöÑÔºåËá™Âä†Âë¢ÔºåËµãÂÄºÂë¢„ÄÇÂ¶ÇÊûú‰ΩøÁî®volatile‰øÆÈ•∞ÁöÑËØùÊúâ‰ªÄ‰πà‰ΩúÁî®„ÄÇ „ÄåGet!!!„Äç Ëá™Âä†Ôºå‰∏çÂÆâÂÖ®ÔºõËµãÂÄºÔºåÂÆâÂÖ®„ÄÇÂõ†‰∏∫ÂâçËÄÖÊúâËØªÂíåÂÜô‰∏§‰∏™Êìç‰ΩúÔºåÂêéËÄÖÂè™ÊúâÂÜôÊìç‰Ωú Áî®volatile ‰πü‰∏ÄÊ†∑Ôºåvolatile‰∏çËÉΩ‰øùËØÅÂéüÂ≠êÊÄßÔºåÂèØ‰ª•‰ΩøÁî®Âä†ÈîÅÊàñËÄÖ‰ΩøÁî® AtomicÂéüÂ≠êÁ±ª„ÄÇ Êúâ‰∏Ä‰∏™Âú∫ÊôØÔºåÂ§öÁ∫øÁ®ãÂπ∂ÂèëÔºå‰∏∫ÊØè‰∏™Á∫øÁ®ãÂÆâÊéí‰∏Ä‰∏™ÈöèÊú∫ÁöÑÁù°Áú†Êó∂Èó¥ÔºåËÆæÊÉ≥‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑÂéªÂî§ÈÜíÁù°Áú†Êó∂Èó¥ÁªìÊùüÁöÑÁ∫øÁ®ãÔºåÂ∫îËØ•Áî®Âì™ÁßçÁªìÊûÑ „ÄåGet!!!„Äç Â∫îËØ•Áî®‰ºòÂÖàÁ∫ßÈòüÂàóÔºå‰πüÂ∞±ÊòØÂ∞èÈ°∂Â†ÜÔºåÈ°∂ÈÉ®ÊòØÂâ©‰ΩôÁù°Áú†Êó∂Èó¥ÊúÄÁü≠ÁöÑÈÇ£‰∏™Á∫øÁ®ã„ÄÇPriorityQueue„ÄÇ JVM ‰Ω†‰∫ÜËß£Âì™‰∫õÊî∂ÈõÜÂô®ÔºüCMSÂíåG1„ÄÇËØ¶ÁªÜË∞àË∞àG1ÁöÑ‰ºòÁÇπÔºü‰ªÄ‰πàÊó∂ÂÄôËøõË°åFull GCÂë¢Ôºü Serial Serial Old ParNew Parllelscatw„ÄÇ„ÄÇ„ÄÇ parallelOld CMS G1 G1‰ºòÁÇπÔºö ‰∏çÂå∫ÂàÜÊñ∞Áîü‰ª£ÂíåËÄÅÂπ¥‰ª£ÔºåÊòØËøûÁª≠ÁöÑÁ©∫Èó¥ÔºåÁÑ∂ÂêéÊòØ‰∏Ä‰∏™‰∏Ä‰∏™rezoneËøõË°åÁÆ°ÁêÜÔºåÊúâ‰∏Ä‰∏™‰ºòÂÖàÁ∫ßÁöÑÊéíÂ∫èÔºåÂ∞±ÊòØ‰ºöÊääËøô‰∏™rezoneÂûÉÂúæÊúÄÂ§öÁöÑÂÖàÂõûÊî∂ÔºåÁÑ∂ÂêéÊòØÈááÁî®ÁöÑÊ†áËÆ∞Êï¥ÁêÜËß£ÂÜ≥ÂÜÖÂ≠òÁöÑÁ¢éÁâáÈóÆÈ¢òÔºåÂÖºÈ°æ‰∫Ü CMS ‰ΩéÂª∂ËøüÁöÑ‰∏Ä‰∏™ÁâπÊÄßÂíå Parallel Scavenge È´òÂêûÂêêÁéáÁöÑÁâπÊÄß„ÄÇ ËÄÅÂπ¥‰ª£Âå∫ÂüüÊª°‰∫Ü‰∏çÂ∞± Full GC ‰∫ÜÂêó‚Ä¶ Ê∂àÊÅØ‰∏≠Èó¥‰ª∂springÂÖ®ÂÆ∂Ê°∂ Spring‰∏≠Ê∂âÂèäÁöÑ‰∏Ä‰∫õËÆæËÆ°Ê®°Âºè ËÅäËÅäSpringÔºå‰∏ªË¶ÅIOCÁ≠âÁ≠â Êï∞ÊçÆÂ∫ì MySQLÂàõÂª∫Á¥¢ÂºïÁöÑÂéüÂàôÔºåÂ•ΩÂ§Ñ Êï∞ÊçÆÂ∫ìÁ¥¢ÂºïÔºåÁ¥¢ÂºïÂ∫ïÂ±ÇÁöÑÂÆûÁé∞ÔºåB+Ê†ëÁöÑÁªìÊûÑ‰ª•Âèä‰∏éÊôÆÈÄöÊü•ÊâæÊ†ëÁöÑ‰ºòÁÇπ MySQLÂíåredisÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πà ‰∏∫‰ªÄ‰πàMySQLÂíåRedisÈÉΩË¶Å‰ΩøÁî®Áã¨Á´ãËøõÁ®ãÊù•ÈÉ®ÁΩ≤ÔºåÂºÄÊîæÁ´ØÂè£Êù•Êèê‰æõÊúçÂä°Ôºå‰∏∫‰ªÄ‰πà‰∏çÂÜôÂú®ÂÜÖÊ†∏‰∏≠„ÄÇ ÂÖ∂‰ªñ ËÆæËÆ°Ê®°ÂºèÔºöËÆ≤‰∫ÜÂçï‰æãÔºåÂ∑•ÂéÇÊñπÊ≥ïÔºåÊäΩË±°Â∑•ÂéÇÔºåÁ≠ñÁï•Ê®°ÂºèÔºåËßÇÂØüËÄÖÊ®°ÂºèÔºå‰ª£ÁêÜÊ®°ÂºèÔºåËøòÈ°∫‰æøËÆ≤‰∫Ü‰∏ãspringÂä®ÊÄÅ‰ª£ÁêÜÁöÑÂÆûÁé∞ÂéüÁêÜ Á∫¢ÈªëÊ†ëÁöÑÂÖ∑‰ΩìÁªìÊûÑÂèäÂÆûÁé∞ÔºåÁ∫¢ÈªëÊ†ë‰∏éÊü•ÊâæÊ†ëÁöÑÂå∫Âà´‰ΩìÁé∞ Ëøô‰∏™Êàë‰ºö‚Ä¶Â§ç‰π†‰∏ÄÊ≥¢ È°πÁõÆ‰∏≠Áî®Âà∞dubboÔºüÈÇ£‰Ω†ËØ¥ËØ¥‰ªÄ‰πàÊòØrpcÊ°ÜÊû∂ÔºüÂíåhttpË∞ÉÁî®ÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πàÔºü RedisÊúâÂì™‰∫õÊï∞ÊçÆÁªìÊûÑÔºüÊåÅ‰πÖÂåñÊñπÊ°àÂíåÂå∫Âà´Ôºü RedisÂì®ÂÖµ„ÄÅÈõÜÁæ§ÁöÑËÆæËÆ°ÂéüÁêÜÂíåÂå∫Âà´Ôºü RedisÁºìÂ≠òÂíåÊï∞ÊçÆÂ∫ì‰ºöÂ≠òÂú®‰∏ÄËá¥ÊÄßÈóÆÈ¢òÂêóÔºüÊÄé‰πàËß£ÂÜ≥ KafkaÊÄé‰πà‰øùËØÅÊï∞ÊçÆÂèØÈù†ÊÄßÔºüËÆ≤‰∫ÜÁîü‰∫ßËÄÖÁ´ØÂèëÈÄÅÊ∂àÊÅØÂà∞brokerÊåÅ‰πÖÂåñÔºåÂàÜÂå∫ÂíåÂâØÊú¨Êú∫Âà∂ÔºåÊ∂àË¥πËÄÖÊ∂àË¥πÊ∂àÊÅØÁöÑat-least-onceÂíåat-most-onceÔºüÊÄé‰πàÂÆûÁé∞Exactly-OnceÔºü Â≠óËäÇÁØáÊï∞ÊçÆÁªìÊûÑÊìç‰ΩúÁ≥ªÁªü Áî®Êà∑ÊÄÅÂ¶Ç‰ΩïÂàáÊç¢Âà∞ÂÜÖÊ†∏ÊÄÅ ËøõÁ®ãÈó¥ÈÄö‰ø°ÁöÑÊñπÂºèÔºåÂì™ÁßçÊúÄÂø´ ËøõÁ®ãÈó¥ÈÄö‰ø°ÔºàIPCÔºåInterProcess CommunicationÔºâÊòØÊåáÂú®‰∏çÂêåËøõÁ®ã‰πãÈó¥‰º†Êí≠Êàñ‰∫§Êç¢‰ø°ÊÅØ„ÄÇ IPCÁöÑÊñπÂºèÈÄöÂ∏∏ÊúâÁÆ°ÈÅìÔºàÂåÖÊã¨Êó†ÂêçÁÆ°ÈÅìÂíåÂëΩÂêçÁÆ°ÈÅìÔºâ„ÄÅÊ∂àÊÅØÈòüÂàó„ÄÅ‰ø°Âè∑Èáè„ÄÅÂÖ±‰∫´Â≠òÂÇ®„ÄÅSocket„ÄÅStreamsÁ≠â„ÄÇÂÖ∂‰∏≠ SocketÂíåStreamsÊîØÊåÅ‰∏çÂêå‰∏ªÊú∫‰∏äÁöÑ‰∏§‰∏™ËøõÁ®ãIPC„ÄÇ 1.ËøõÁ®ã‰∏éÁ∫øÁ®ã ËøõÁ®ãÔºöÂÖ∑ÊúâÁã¨Á´ãÂäüËÉΩÁöÑÁ®ãÂ∫èÂÖ≥‰∫éÊüê‰∏™Êï∞ÊçÆÈõÜÂêà‰∏äÁöÑ‰∏ÄÊ¨°ËøêË°åÊ¥ªÂä®„ÄÇÁ∫øÁ®ãÔºöËøõÁ®ãÁöÑ‰∏Ä‰∏™ÂÆû‰Ωì„ÄÇÊØîÂñªÔºö‰∏ÄÂàóÁÅ´ËΩ¶ÊòØ‰∏Ä‰∏™ËøõÁ®ãÔºåÁÅ´ËΩ¶ÁöÑÊØè‰∏ÄËäÇËΩ¶Âé¢ÊòØÁ∫øÁ®ã„ÄÇ 2.ËøõÁ®ã‰∏éÁ∫øÁ®ãÁöÑËÅîÁ≥ª ‚ë†‰∏Ä‰∏™Á∫øÁ®ãÂè™ËÉΩÂ±û‰∫é‰∏Ä‰∏™ËøõÁ®ãÔºå‰∏Ä‰∏™ËøõÁ®ãÂèØ‰ª•ÊúâÂ§ö‰∏™Á∫øÁ®ãÔºõ‚ë°Á≥ªÁªüËµÑÊ∫êÂàÜÈÖçÁªôËøõÁ®ãÔºåÂêå‰∏ÄËøõÁ®ãÁöÑÊâÄÊúâÁ∫øÁ®ãÂÖ±‰∫´ËØ•ËøõÁ®ãÁöÑÊâÄÊúâËµÑÊ∫êÔºõ‚ë¢ÁúüÊ≠£Âú®Â§ÑÁêÜÊú∫‰∏äËøêË°åÁöÑÊòØÁ∫øÁ®ãÔºõ‚ë£‰∏çÂêåËøõÁ®ãÁöÑÁ∫øÁ®ãÈó¥Âà©Áî®Ê∂àÊÅØÈÄö‰ø°ÁöÑÊñπÂºèÂÆûÁé∞ÂêåÊ≠•„ÄÇ 3.ËøõÁ®ã‰∏éÁ∫øÁ®ãÁöÑÂå∫Âà´ ‚ë†Ë∞ÉÂ∫¶ÔºöÁ∫øÁ®ãÊòØÁ≥ªÁªüË∞ÉÂ∫¶ÂíåÂàÜÈÖçÁöÑÂü∫Êú¨Âçï‰ΩçÔºåËøõÁ®ãÊòØ‰Ωú‰∏∫Êã•ÊúâÁ≥ªÁªüËµÑÊ∫êÁöÑÂü∫Êú¨Âçï‰ΩçÔºõ‚ë°Âπ∂ÂèëÊÄßÔºöËøõÁ®ã‰πãÈó¥ÂèØ‰ª•Âπ∂ÂèëÊâßË°åÔºåÂêå‰∏ÄËøõÁ®ãÁöÑÂ§ö‰∏™Á∫øÁ®ãÊó∂Èó¥‰∫¶ÂèØ‰ª•Âπ∂ÂèëÊâßË°åÔºõ‚ë¢Êã•ÊúâËµÑÊ∫êÔºöËøõÁ®ãÊòØÊã•ÊúâËµÑÊ∫êÁöÑÁã¨Á´ãÂçï‰ΩçÔºåÁ∫øÁ®ã‰∏çÊã•ÊúâËµÑÊ∫êÔºå‰ΩÜÂèØ‰ª•ËÆøÈóÆÈö∂Â±û‰∫éËøõÁ®ãÁöÑËµÑÊ∫êÔºõ‚ë£Á≥ªÁªüÂºÄÈîÄÔºöÂàõÂª∫ÂíåÊí§ÈîÄËøõÁ®ãÁöÑÂºÄÈîÄÊõ¥Â§ßÔºõËøõÁ®ãÊã•ÊúâÁã¨Á´ãÁöÑÂú∞ÂùÄÁ©∫Èó¥Ôºå‰∏Ä‰∏™ËøõÁ®ãÁöÑÂ¥©Ê∫É‰∏ç‰ºöÂΩ±ÂìçÂÖ∂‰ªñËøõÁ®ãÔºõÁ∫øÁ®ãÊã•ÊúâËá™Â∑±ÁöÑÂ†ÜÊ†àÂíåÂ±ÄÈÉ®ÂèòÈáèÔºåÊ≤°ÊúâÁã¨Á´ãÁöÑÂú∞ÂùÄÁ©∫Èó¥ÔºåÂõ†Ê≠§ËøõÁ®ãÈáåÁöÑ‰∏Ä‰∏™Á∫øÁ®ãÂ¥©Ê∫É‰ºöÂØºËá¥ÂÖ∂‰ªñÁ∫øÁ®ãÂùáÂ¥©Ê∫É„ÄÇ 4.ËøõÁ®ãÈó¥ÈÄö‰ø°ÊñπÂºè ËøõÁ®ãÈó¥ÈÄö‰ø°ÊñπÂºèÊúâÂæàÂ§öÔºåÁΩë‰∏ä‰∏ÄËØ¥ÊúâÂçÅÂá†Áßç„ÄÇÈù¢ËØïÁöÑÊó∂ÂÄôËØ¥‰∏ä‰ª•‰∏ãÂá†ÁßçÂ∑Æ‰∏çÂ§öÔºö‚ë†ÁÆ°ÈÅìÔºöÂçäÂèåÂ∑•ÁöÑÈÄö‰ø°ÊñπÂºèÔºåÊï∞ÊçÆÂè™ËÉΩÂçïÂêëÊµÅÂä®Ôºå‰∏îÂè™ËÉΩÂú®Êúâ‰∫≤ÁºòÂÖ≥Á≥ªÔºàÁà∂Â≠êËøõÁ®ãÊàñÂÖÑÂºüËøõÁ®ãÔºâÁöÑËøõÁ®ãÈó¥‰ΩøÁî®Ôºõ‚ë°ÂëΩÂêçÁÆ°ÈÅìÔºöFIFOÔºåÂçäÂèåÂ∑•ÁöÑÈÄö‰ø°ÊñπÂºèÔºå‰ΩÜÂÖÅËÆ∏Âú®Êó†‰∫≤ÁºòÂÖ≥Á≥ªÁöÑËøõÁ®ãÈó¥ÈÄö‰ø°Ôºõ‚ë¢Ê∂àÊÅØÈòüÂàóÔºöÊ∂àÊÅØÁöÑÈìæË°®ÔºåÂ≠òÊîæÂú®ÂÜÖÊ†∏‰∏≠ÔºåÂπ∂Áî±Ê∂àÊÅØÈòüÂàóÊ†áËØÜÁ¨¶Ê†áËØÜ„ÄÇÊ∂àÊÅØÈòüÂàóÂÖãÊúç‰∫Ü‰ø°Âè∑‰º†ÈÄí‰ø°ÊÅØÂ∞ë„ÄÅÁÆ°ÈÅìÂè™ËÉΩÊâøËΩΩÊó†Ê†ºÂºèÂ≠óËäÇÊµÅ‰ª•ÂèäÁºìÂÜ≤Âå∫Â§ßÂ∞èÂèóÈôêÁ≠âÁº∫ÁÇπÔºõ‚ë£‰ø°Âè∑ÈáèÔºöÊòØ‰∏Ä‰∏™ËÆ°Êï∞Âô®ÔºåÁî®‰∫éÊéßÂà∂Â§ö‰∏™ËøõÁ®ãÈó¥ÂØπÂÖ±‰∫´ËµÑÊ∫êÁöÑËÆøÈóÆÔºõ‚ë§ÂÖ±‰∫´ÂÜÖÂ≠òÔºöÊò†Â∞Ñ‰∏ÄÊÆµËÉΩË¢´ÂÖ∂‰ªñËøõÁ®ãËÆøÈóÆÁöÑÂÜÖÂ≠òÔºåËøôÊÆµÂÜÖÂ≠òÁî±‰∏Ä‰∏™ËøõÁ®ãÂàõÂª∫Ôºå‰ΩÜÂ§ö‰∏™ËøõÁ®ãÈÉΩÂèØ‰ª•ËÆøÈóÆÔºõ„ÄåÊúÄÂø´ÔºåÂèØ‰ª•ËÅîÁ≥ªÂà∞Èõ∂Êã∑Ë¥ùÊää mmap„Äç‚ë•Â•óÊé•Â≠ó 5.Á∫øÁ®ãÈó¥ÈÄö‰ø°ÊñπÂºè Â§ö‰∏™Á∫øÁ®ãÂú®Â§ÑÁêÜÂêå‰∏Ä‰∏™ËµÑÊ∫êÔºåÂπ∂‰∏î‰ªªÂä°‰∏çÂêåÊó∂ÔºåÈúÄË¶ÅÁ∫øÁ®ãÈÄö‰ø°Êù•Â∏ÆÂä©Ëß£ÂÜ≥Á∫øÁ®ã‰πãÈó¥ÂØπÂêå‰∏Ä‰∏™ÂèòÈáèÁöÑ‰ΩøÁî®ÊàñÊìç‰Ωú„ÄÇÂ∞±ÊòØÂ§ö‰∏™Á∫øÁ®ãÂú®Êìç‰ΩúÂêå‰∏Ä‰ªΩÊï∞ÊçÆÊó∂Ôºå ÈÅøÂÖçÂØπÂêå‰∏ÄÂÖ±‰∫´ÂèòÈáèÁöÑ‰∫âÂ§∫„ÄÇ‚ë†ÈîÅÊú∫Âà∂ÔºöÂåÖÊã¨‰∫íÊñ•ÈîÅ„ÄÅÊù°‰ª∂ÂèòÈáè„ÄÅËØªÂÜôÈîÅ ‰∫íÊñ•ÈîÅÊèê‰æõ‰∫Ü‰ª•Êéí‰ªñÊñπÂºèÈò≤Ê≠¢Êï∞ÊçÆÁªìÊûÑË¢´Âπ∂Âèë‰øÆÊîπÁöÑÊñπÊ≥ï„ÄÇËØªÂÜôÈîÅÂÖÅËÆ∏Â§ö‰∏™Á∫øÁ®ãÂêåÊó∂ËØªÂÖ±‰∫´Êï∞ÊçÆÔºåËÄåÂØπÂÜôÊìç‰ΩúÊòØ‰∫íÊñ•ÁöÑ„ÄÇÊù°‰ª∂ÂèòÈáèÂèØ‰ª•‰ª•ÂéüÂ≠êÁöÑÊñπÂºèÈòªÂ°ûËøõÁ®ãÔºåÁõ¥Âà∞Êüê‰∏™ÁâπÂÆöÊù°‰ª∂‰∏∫Áúü‰∏∫Ê≠¢„ÄÇÂØπÊù°‰ª∂ÁöÑÊµãËØïÊòØÂú®‰∫íÊñ•ÈîÅÁöÑ‰øùÊä§‰∏ãËøõË°åÁöÑ„ÄÇÊù°‰ª∂ÂèòÈáèÂßãÁªà‰∏é‰∫íÊñ•ÈîÅ‰∏ÄËµ∑‰ΩøÁî®„ÄÇ‚ë°‰ø°Âè∑ÈáèÊú∫Âà∂(Semaphore)ÔºöÂåÖÊã¨Êó†ÂêçÁ∫øÁ®ã‰ø°Âè∑ÈáèÂíåÂëΩÂêçÁ∫øÁ®ã‰ø°Âè∑Èáè‚ë¢‰ø°Âè∑Êú∫Âà∂(Signal)ÔºöÁ±ª‰ººËøõÁ®ãÈó¥ÁöÑ‰ø°Âè∑Â§ÑÁêÜÁ∫øÁ®ãÈó¥ÁöÑÈÄö‰ø°ÁõÆÁöÑ‰∏ªË¶ÅÊòØÁî®‰∫éÁ∫øÁ®ãÂêåÊ≠•ÔºåÊâÄ‰ª•Á∫øÁ®ãÊ≤°ÊúâÂÉèËøõÁ®ãÈÄö‰ø°‰∏≠ÁöÑÁî®‰∫éÊï∞ÊçÆ‰∫§Êç¢ÁöÑÈÄö‰ø°Êú∫Âà∂„ÄÇ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚ÄîÁâàÊùÉÂ£∞ÊòéÔºöÊú¨Êñá‰∏∫CSDNÂçö‰∏ª„ÄåÂÜØJungle„ÄçÁöÑÂéüÂàõÊñáÁ´†ÔºåÈÅµÂæ™ CC 4.0 BY-SA ÁâàÊùÉÂçèËÆÆÔºåËΩ¨ËΩΩËØ∑ÈôÑ‰∏äÂéüÊñáÂá∫Â§ÑÈìæÊé•ÂèäÊú¨Â£∞Êòé„ÄÇÂéüÊñáÈìæÊé•Ôºöhttps://blog.csdn.net/sinat_21107433/article/details/82809946 ‰ø°Âè∑ÈáèÊÄé‰πàÂÆûÁé∞ÂØπÂÖ±‰∫´ËµÑÊ∫êÁöÑËÆøÈóÆ „ÄåGet!!!„Äç semphoreÔºåÂÖ±‰∫´ÈîÅÂä†‰∏Ä‰∏™ËÆøÈóÆÊï∞ÈáèÁöÑÈôêÂà∂Ôºå‰∏ª‰ΩìËøòÊòØ AQS ÁöÑÂÖ±‰∫´ÈîÅÂÆûÁé∞ÔºåË∂ÖËøá‰∫Ü‰ø°Âè∑ÈáèÁöÑÂÄºÂ∞±Âä†ÂÖ•Á≠âÂæÖÈòüÂàóÁ≠âÂæÖÔºåËøôÈáåÁöÑÁ≠âÂæÖÈòüÂàóÂ∞±ÊòØ‰∏Ä‰∏™ÊôÆÈÄöÁöÑ QueueÔºå‰∏çÂÉèAQS‰∏≠ÁöÑ CLH ÈòüÂàó„ÄÇ selectÂíåepoll Âú®Linux SocketÊúçÂä°Âô®Áü≠ÁºñÁ®ãÊó∂Ôºå‰∏∫‰∫ÜÂ§ÑÁêÜÂ§ßÈáèÂÆ¢Êà∑ÁöÑËøûÊé•ËØ∑Ê±ÇÔºåÈúÄË¶Å‰ΩøÁî®ÈùûÈòªÂ°ûI/OÂíåÂ§çÁî®Ôºåselect„ÄÅpollÂíåepollÊòØLinux APIÊèê‰æõÁöÑI/OÂ§çÁî®ÊñπÂºèÔºåËá™‰ªéLinux 2.6‰∏≠Âä†ÂÖ•‰∫Üepoll‰πãÂêéÔºåÂú®È´òÊÄßËÉΩÊúçÂä°Âô®È¢ÜÂüüÂæóÂà∞ÂπøÊ≥õÁöÑÂ∫îÁî®ÔºåÁé∞Âú®ÊØîËæÉÂá∫ÂêçÁöÑnginxÂ∞±ÊòØ‰ΩøÁî®epollÊù•ÂÆûÁé∞I/OÂ§çÁî®ÊîØÊåÅÈ´òÂπ∂ÂèëÔºåÁõÆÂâçÂú®È´òÂπ∂ÂèëÁöÑÂú∫ÊôØ‰∏ãÔºånginxË∂äÊù•Ë∂äÊî∂Âà∞Ê¨¢Ëøé„ÄÇ (1)select==&gt;Êó∂Èó¥Â§çÊùÇÂ∫¶O(n) ÂÆÉ‰ªÖ‰ªÖÁü•ÈÅì‰∫ÜÔºåÊúâI/O‰∫ã‰ª∂ÂèëÁîü‰∫ÜÔºåÂç¥Âπ∂‰∏çÁü•ÈÅìÊòØÂì™ÈÇ£Âá†‰∏™ÊµÅÔºàÂèØËÉΩÊúâ‰∏Ä‰∏™ÔºåÂ§ö‰∏™ÔºåÁîöËá≥ÂÖ®ÈÉ®ÔºâÔºåÊàë‰ª¨Âè™ËÉΩÊó†Â∑ÆÂà´ËΩÆËØ¢ÊâÄÊúâÊµÅÔºåÊâæÂá∫ËÉΩËØªÂá∫Êï∞ÊçÆÔºåÊàñËÄÖÂÜôÂÖ•Êï∞ÊçÆÁöÑÊµÅÔºåÂØπ‰ªñ‰ª¨ËøõË°åÊìç‰Ωú„ÄÇÊâÄ‰ª•selectÂÖ∑ÊúâO(n)ÁöÑÊó†Â∑ÆÂà´ËΩÆËØ¢Â§çÊùÇÂ∫¶ÔºåÂêåÊó∂Â§ÑÁêÜÁöÑÊµÅË∂äÂ§öÔºåÊó†Â∑ÆÂà´ËΩÆËØ¢Êó∂Èó¥Â∞±Ë∂äÈïø„ÄÇ (2)poll==&gt;Êó∂Èó¥Â§çÊùÇÂ∫¶O(n) pollÊú¨Ë¥®‰∏äÂíåselectÊ≤°ÊúâÂå∫Âà´ÔºåÂÆÉÂ∞ÜÁî®Êà∑‰º†ÂÖ•ÁöÑÊï∞ÁªÑÊã∑Ë¥ùÂà∞ÂÜÖÊ†∏Á©∫Èó¥ÔºåÁÑ∂ÂêéÊü•ËØ¢ÊØè‰∏™fdÂØπÂ∫îÁöÑËÆæÂ§áÁä∂ÊÄÅÔºå ‰ΩÜÊòØÂÆÉÊ≤°ÊúâÊúÄÂ§ßËøûÊé•Êï∞ÁöÑÈôêÂà∂ÔºåÂéüÂõ†ÊòØÂÆÉÊòØÂü∫‰∫éÈìæË°®Êù•Â≠òÂÇ®ÁöÑ. (3)epoll==&gt;Êó∂Èó¥Â§çÊùÇÂ∫¶O(1) epollÂèØ‰ª•ÁêÜËß£‰∏∫event pollÔºå‰∏çÂêå‰∫éÂøôËΩÆËØ¢ÂíåÊó†Â∑ÆÂà´ËΩÆËØ¢Ôºåepoll‰ºöÊääÂì™‰∏™ÊµÅÂèëÁîü‰∫ÜÊÄéÊ†∑ÁöÑI/O‰∫ã‰ª∂ÈÄöÁü•Êàë‰ª¨„ÄÇÊâÄ‰ª•Êàë‰ª¨ËØ¥epollÂÆûÈôÖ‰∏äÊòØ‰∫ã‰ª∂È©±Âä®ÔºàÊØè‰∏™‰∫ã‰ª∂ÂÖ≥ËÅî‰∏äfdÔºâÁöÑÔºåÊ≠§Êó∂Êàë‰ª¨ÂØπËøô‰∫õÊµÅÁöÑÊìç‰ΩúÈÉΩÊòØÊúâÊÑè‰πâÁöÑ„ÄÇÔºàÂ§çÊùÇÂ∫¶Èôç‰ΩéÂà∞‰∫ÜO(1)Ôºâ selectÔºåpollÔºåepollÈÉΩÊòØIOÂ§öË∑ØÂ§çÁî®ÁöÑÊú∫Âà∂„ÄÇI/OÂ§öË∑ØÂ§çÁî®Â∞±ÈÄöËøá‰∏ÄÁßçÊú∫Âà∂ÔºåÂèØ‰ª•ÁõëËßÜÂ§ö‰∏™ÊèèËø∞Á¨¶Ôºå‰∏ÄÊó¶Êüê‰∏™ÊèèËø∞Á¨¶Â∞±Áª™Ôºà‰∏ÄËà¨ÊòØËØªÂ∞±Áª™ÊàñËÄÖÂÜôÂ∞±Áª™ÔºâÔºåËÉΩÂ§üÈÄöÁü•Á®ãÂ∫èËøõË°åÁõ∏Â∫îÁöÑËØªÂÜôÊìç‰Ωú„ÄÇ‰ΩÜselectÔºåpollÔºåepollÊú¨Ë¥®‰∏äÈÉΩÊòØÂêåÊ≠•I/OÔºåÂõ†‰∏∫‰ªñ‰ª¨ÈÉΩÈúÄË¶ÅÂú®ËØªÂÜô‰∫ã‰ª∂Â∞±Áª™ÂêéËá™Â∑±Ë¥üË¥£ËøõË°åËØªÂÜôÔºå‰πüÂ∞±ÊòØËØ¥Ëøô‰∏™ËØªÂÜôËøáÁ®ãÊòØÈòªÂ°ûÁöÑÔºåËÄåÂºÇÊ≠•I/OÂàôÊó†ÈúÄËá™Â∑±Ë¥üË¥£ËøõË°åËØªÂÜôÔºåÂºÇÊ≠•I/OÁöÑÂÆûÁé∞‰ºöË¥üË¥£ÊääÊï∞ÊçÆ‰ªéÂÜÖÊ†∏Êã∑Ë¥ùÂà∞Áî®Êà∑Á©∫Èó¥„ÄÇ ËÆ°ÁÆóÊú∫ÁΩëÁªú TCPÁöÑÊµÅÈáèÊéßÂà∂ÂíåÊã•Â°ûÊéßÂà∂ ‰∏Ä„ÄÅÊµÅÈáèÊéßÂà∂ 1.‰ªÄ‰πàÊòØÊµÅÈáèÊéßÂà∂ Sender won‚Äôt overflow receiver‚Äôs buffer by transmitting too much, too fast. ÔºàÈò≤Ê≠¢ÂèëÈÄÅÊñπÂèëÁöÑÂ§™Âø´ÔºåËÄóÂ∞ΩÊé•Êî∂ÊñπÁöÑËµÑÊ∫êÔºå‰ªéËÄå‰ΩøÊé•Êî∂ÊñπÊù•‰∏çÂèäÂ§ÑÁêÜÔºâ2.ÊµÅÈáèÊéßÂà∂ÁöÑ‰∏Ä‰∫õÁü•ËØÜÁÇπ Ôºà1ÔºâÊé•Êî∂Á´ØÊäëÂà∂ÂèëÈÄÅÁ´ØÁöÑ‰æùÊçÆÔºöÊé•Êî∂Á´ØÁºìÂÜ≤Âå∫ÁöÑÂ§ßÂ∞èÔºà2ÔºâÊµÅÈáèÊéßÂà∂ÁöÑÁõÆÊ†áÊòØÊé•Êî∂Á´ØÔºåÊòØÊÄïÊé•Êî∂Á´ØÊù•‰∏çÂèäÂ§ÑÁêÜÔºà3ÔºâÊµÅÈáèÊéßÂà∂ÁöÑÊú∫Âà∂ÊòØ‰∏¢ÂåÖ3.ÊÄé‰πàÊ†∑ÂÆûÁé∞ÊµÅÈáèÊéßÂà∂Ôºü ‰ΩøÁî®ÊªëÂä®Á™óÂè£ÊªëÂä®Á™óÂè£1.ÊªëÂä®Á™óÂè£ÊòØ‰ªÄ‰πàÔºüÊªëÂä®Á™óÂè£ÊòØÁ±ª‰ºº‰∫é‰∏Ä‰∏™Á™óÂè£‰∏ÄÊ†∑ÁöÑ‰∏úË•øÔºåÊòØÁî®Êù•ÂëäËØâÂèëÈÄÅÁ´ØÂèØ‰ª•ÂèëÈÄÅÊï∞ÊçÆÁöÑÂ§ßÂ∞èÊàñËÄÖËØ¥ÊòØÁ™óÂè£Ê†áËÆ∞‰∫ÜÊé•Êî∂Á´ØÁºìÂÜ≤Âå∫ÁöÑÂ§ßÂ∞èÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÂÆûÁé∞psÔºöÁ™óÂè£ÊåáÁöÑÊòØ‰∏ÄÊ¨°ÊâπÈáèÁöÑÂèëÈÄÅÂ§öÂ∞ëÊï∞ÊçÆ2.‰∏∫‰ªÄ‰πà‰ºöÂá∫Áé∞ÊªëÂä®Á™óÂè£Ôºü Âú®Á°ÆËÆ§Â∫îÁ≠îÁ≠ñÁï•‰∏≠ÔºåÂØπÊØè‰∏Ä‰∏™ÂèëÈÄÅÁöÑÊï∞ÊçÆÊÆµÔºåÈÉΩË¶ÅÁªô‰∏Ä‰∏™ACKÁ°ÆËÆ§Â∫îÁ≠îÔºåÊî∂Âà∞ACKÂêéÂÜçÂèëÈÄÅ‰∏ã‰∏Ä‰∏™Êï∞ÊçÆÊÆµÔºåËøôÊ†∑ÂÅöÊúâ‰∏Ä‰∏™ÊØîËæÉÂ§ßÁöÑÁº∫ÁÇπÔºåÂ∞±ÊòØÊÄßËÉΩÊØîËæÉÂ∑ÆÔºåÂ∞§ÂÖ∂ÊòØÊï∞ÊçÆÂæÄËøîÁöÑÊó∂Èó¥ÈïøÁöÑÊó∂ÂÄô‰ΩøÁî®ÊªëÂä®Á™óÂè£ÔºåÂ∞±ÂèØ‰ª•‰∏ÄÊ¨°ÂèëÈÄÅÂ§öÊù°Êï∞ÊçÆÔºå‰ªéËÄåÂ∞±ÊèêÈ´ò‰∫ÜÊÄßËÉΩ3.ÊªëÂä®Á™óÂè£ÁöÑ‰∏Ä‰∫õÁü•ËØÜÁÇπ Ôºà1ÔºâÊé•Êî∂Á´ØÂ∞ÜËá™Â∑±ÂèØ‰ª•Êé•Êî∂ÁöÑÁºìÂÜ≤Âå∫Â§ßÂ∞èÊîæÂÖ•TCPÈ¶ñÈÉ®‰∏≠ÁöÑ‚ÄúÁ™óÂè£Â§ßÂ∞è‚ÄùÂ≠óÊÆµÔºåÈÄöËøáACKÊù•ÈÄöÁü•ÂèëÈÄÅÁ´ØÔºà2ÔºâÁ™óÂè£Â§ßÂ∞èÂ≠óÊÆµË∂äÂ§ßÔºåËØ¥ÊòéÁΩëÁªúÁöÑÂêûÂêêÁéáË∂äÈ´òÔºà3ÔºâÁ™óÂè£Â§ßÂ∞èÊåáÁöÑÊòØÊó†ÈúÄÁ≠âÂæÖÁ°ÆËÆ§Â∫îÁ≠îËÄåÂèØ‰ª•ÁªßÁª≠ÂèëÈÄÅÊï∞ÊçÆÁöÑÊúÄÂ§ßÂÄºÔºåÂç≥Â∞±ÊòØËØ¥‰∏çÈúÄË¶ÅÊé•Êî∂Á´ØÁöÑÂ∫îÁ≠îÔºåÂèØ‰ª•‰∏ÄÊ¨°ËøûÁª≠ÁöÑÂèëÈÄÅÊï∞ÊçÆÔºà4ÔºâÊìç‰ΩúÁ≥ªÁªüÂÜÖÊ†∏‰∏∫‰∫ÜÁª¥Êä§ÊªëÂä®Á™óÂè£ÔºåÈúÄË¶ÅÂºÄËæüÂèëÈÄÅÁºìÂÜ≤Âå∫ÔºåÊù•ËÆ∞ÂΩïÂΩìÂâçËøòÊúâÈÇ£‰∫õÊï∞ÊçÆÊ≤°ÊúâÂ∫îÁ≠îÔºåÂè™ÊúâÁ°ÆËÆ§Â∫îÁ≠îËøáÁöÑÊï∞ÊçÆÔºåÊâçËÉΩ‰ªéÁºìÂÜ≤Âå∫Âà†ÊéâpsÔºöÂèëÈÄÅÁºìÂÜ≤Âå∫Â¶ÇÊûúÂ§™Â§ßÔºåÂ∞±‰ºöÊúâÁ©∫Èó¥ÂºÄÈîÄ ‰∫å„ÄÅÊã•Â°ûÊéßÂà∂ ÊÖ¢ÂºÄÂßã( slow-start )„ÄÅÊã•Â°ûÈÅøÂÖç( congestion avoidance )„ÄÅÂø´Èáç‰º†( fast retransmit )ÂíåÂø´ÊÅ¢Â§ç( fast recovery )„ÄÇ „Äå‰πòÊ≥ïÂáèÂ∞ëÔºåÂä†Ê≥ïÂ¢ûÂä†„Äç ‰∏â„ÄÅÊµÅÈáèÊéßÂà∂ÂíåÊã•Â°ûÊéßÂà∂ÁöÑÂå∫Âà´1.Áõ∏ÂêåÁÇπ Ôºà1ÔºâÁé∞Ë±°ÈÉΩÊòØ‰∏¢ÂåÖÔºõÔºà2ÔºâÂÆûÁé∞Êú∫Âà∂ÈÉΩÊòØËÆ©ÂèëÈÄÅÊñπÂèëÁöÑÊÖ¢‰∏ÄÁÇπÔºåÂèëÁöÑÂ∞ë‰∏ÄÁÇπ2.‰∏çÂêåÁÇπ Ôºà1Ôºâ‰∏¢ÂåÖ‰ΩçÁΩÆ‰∏çÂêåÊµÅÈáèÊéßÂà∂‰∏¢ÂåÖ‰ΩçÁΩÆÊòØÂú®Êé•Êî∂Á´Ø‰∏äÊã•Â°ûÊéßÂà∂‰∏¢ÂåÖ‰ΩçÁΩÆÊòØÂú®Ë∑ØÁî±Âô®‰∏äÔºà2Ôºâ‰ΩúÁî®ÁöÑÂØπË±°‰∏çÂêåÊµÅÈáèÊéßÂà∂ÁöÑÂØπË±°ÊòØÊé•Êî∂ÊñπÔºåÊÄïÂèëÈÄÅÊñπÂèëÁöÑÂ§™Âø´Ôºå‰ΩøÂæóÊé•Êî∂ÊñπÊù•‰∏çÂèäÂ§ÑÁêÜÊã•Â°ûÊéßÂà∂ÁöÑÂØπË±°ÊòØÁΩëÁªúÔºåÊÄïÂèëÈÄÅÂèëÂèëÁöÑÂ§™Âø´ÔºåÈÄ†ÊàêÁΩëÁªúÊã•Â°ûÔºå‰ΩøÂæóÁΩëÁªúÊù•‰∏çÂèäÂ§ÑÁêÜ3.ËÅîÁ≥ªÊã•Â°ûÊéßÂà∂ Êã•Â°ûÊéßÂà∂ÈÄöÂ∏∏Ë°®Á§∫ÁöÑÊòØ‰∏Ä‰∏™ÂÖ®Â±ÄÊÄßÁöÑËøáÁ®ãÔºåÂÆÉ‰ºöÊ∂âÂèäÂà∞ÁΩëÁªú‰∏≠ÊâÄÊúâÁöÑ‰∏ªÊú∫„ÄÅ ÊâÄÊúâÁöÑË∑ØÁî±Âô®ÂíåÈôç‰ΩéÁΩëÁªú‰º†ËæìÊÄßËÉΩÁöÑÊâÄÊúâÂõ†Á¥†ÊµÅÈáèÊéßÂà∂ ÊµÅÈáèÊéßÂà∂ÂèëÁîüÂú®ÂèëÈÄÅÁ´ØÂíåÊé•Êî∂Á´Ø‰πãÈó¥ÔºåÂè™ÊòØÁÇπÂà∞ÁÇπ‰πãÈó¥ÁöÑÊéßÂà∂ ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚ÄîÁâàÊùÉÂ£∞ÊòéÔºöÊú¨Êñá‰∏∫CSDNÂçö‰∏ª„Äådangzhangjing97„ÄçÁöÑÂéüÂàõÊñáÁ´†ÔºåÈÅµÂæ™ CC 4.0 BY-SA ÁâàÊùÉÂçèËÆÆÔºåËΩ¨ËΩΩËØ∑ÈôÑ‰∏äÂéüÊñáÂá∫Â§ÑÈìæÊé•ÂèäÊú¨Â£∞Êòé„ÄÇÂéüÊñáÈìæÊé•Ôºöhttps://blog.csdn.net/dangzhangjing97/article/details/81008836 ‰∏çÂêåÂ≠êÁΩëÂèØ‰ª•ÈÄöËøáARPËé∑ÂèñmacÂú∞ÂùÄÂêó ÊµèËßàÂô®‰∏≠ËæìÂÖ•ÁΩëÂùÄÂà∞Ëé∑ÂæóÈ°µÈù¢ÁöÑÂÖ®ËøáÁ®ã ËæìÂÖ• www.baidu.comÔºåÊÄé‰πàÂèòÊàê https://www.baidu.com ÁöÑÔºåÊÄé‰πàÁ°ÆÂÆöÁî®HTTPËøòÊòØHTTPS ‰∏âÊ¨°Êè°Êâã Êè°ÊâãÊó∂‰∫ßÁîüÁöÑÂ∫èÂàóÂè∑Âπ≤‰ªÄ‰πàÁî®ÁöÑ ËÆ≤‰∏Ä‰∏ãÊé•Êî∂Á™óÂè£ TCPÂíåUDPÁöÑÊú¨Ë¥®Âå∫Âà´ ‰ªÄ‰πàÊó∂ÂÄôÈÄâÊã©TCP/UDP HTTPSÁöÑËøûÊé•ËøáÁ®ã 7Â±ÇÊ®°ÂûãÂíå4Â±ÇÊ®°ÂûãÔºåÊØè‰∏ÄÂ±ÇÊúâÂì™‰∫õÂ∏∏ËßÅÂçèËÆÆÔºü Ë∑ØÁî±Âô®/‰∫§Êç¢Êú∫ÊòØÂì™‰∏ÄÂ±Ç ÁΩëÁªúÂ±ÇÁî®Êù•Âπ≤ÂòõÔºü‰º†ËæìÂ±ÇÁî®Êù•Âπ≤ÂòõÔºü HTTPÂèØ‰ª•‰ΩøÁî®UDPÂêó HTTPSÊÄé‰πàÁ°ÆËÆ§Êî∂Âà∞ÁöÑÂåÖÂ∞±ÊòØÊúçÂä°Âô®ÂèëÊù•ÁöÑ Á°ÆÂÆöÂèëÈÄÅÁ™óÂè£ÁöÑÂ§ßÂ∞èÔºåÂ¶Ç‰ΩïÊúÄÂ§ßÂà©Áî®Â∏¶ÂÆΩÔºåÂÅáËÆæÂª∂Ëøü100msÔºåÂèëÈÄÅÁ´Ø10Mb/sÔºåÊé•Êî∂Á´Ø100Mb/s ÁΩëÁªú‰∫îÂ±ÇÊ®°ÂûãÔºåÊØè‰∏ÄÂ±ÇÂàÜÂà´ÊúâÂì™‰∫õÂçèËÆÆ ICMPÔºåTCPÔºåIPÔºåHTTPÂàÜÂà´ÊòØÂì™‰∏ÄÂ±ÇÔºå‰∏∫‰ªÄ‰πàÁΩëÁªúÊ®°ÂûãË¶ÅÂàÜÂ±ÇÔºåÊØè‰∏ÄÂ±Ç‰πãÈó¥ÊÄé‰πà‰º†ÈÄí httpÂ§¥ÈáåÁöÑgzip ÂèçÂêë***ËØ¥‰∏Ä‰∏ã ‰∏âÊ¨°Êè°ÊâãÔºå‰∏∫‰ªÄ‰πàË¶Å‰∏âÊ¨°ÔºåÊØè‰∏ÄÊ¨°ÂàÜÂà´Á°ÆËÆ§‰∫Ü‰ªÄ‰πà TCPÂçèËÆÆÁöÑ‰∏âÊ¨°Êè°ÊâãÂíåÂõõÊ¨°Êå•ÊâãËøáÁ®ãÔºü TcpÊÄé‰πà‰øùËØÅÂèØÈù†ÁöÑ Á°ÆËÆ§Èáç‰º†Êú∫Âà∂Ôºõ ÊµÅÈáèÊéßÂà∂ÔºåÊªëÂä®Á™óÂè£ÂçèËÆÆ Êã•Â°ûÊéßÂà∂ÔºöÊÖ¢ÂêØÂä®„ÄÅÊã•Â°ûÈÅøÂÖç„ÄÅÂø´Èáç‰º†„ÄÅÂø´ÊÅ¢Â§ç ÁÆóÊ≥ï Ê±ÇxÁöÑyÊ¨°ÊñπÔºåÊÉ≥Âá∫ÊØîÁõ¥Êé•forÂæ™ÁéØÊõ¥Â•ΩÁöÑÊñπÊ°à Ê±ÇÁªùÂØπ‰ºóÊï∞ ÁÆóÊ≥ïÈ¢òÔºöÁ∫¢Ëìù‰∏§ÁßçÁêÉÔºåÊÄªÂÖ±N‰∏™Ôºå N&gt;2, ÊéíÂàóÁªÑÂêàÔºåËøûÁª≠3‰∏™È¢úËâ≤‰∏ÄÊ†∑ÊòØÈùûÊ≥ïÁöÑÔºåÊ±ÇÂêàÊ≥ïÁöÑÊéíÂàóÊï∞Èáè ÊèèËø∞‰∏Ä‰∏ãÂ†ÜÊéíÁöÑËøáÁ®ãÔºüÂª∫Â†ÜÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÔºüÊúÄÂ§ßÂ†Ü‰∏≠Ê±ÇÂâçk‰∏™ÊúÄÂ§ßÂÄºÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶Ôºü ÁÆóÊ≥ïÈ¢òÔºöÊµ∑Â≤õÈù¢ÁßØËÆ°ÁÆóÈ¢òÔºåÁªô‰∏Ä‰∏™Áü©ÈòµÔºå0Ë°®Á§∫Êµ∑Ê∞¥ÔºåÁõ∏ËøûÁöÑ1Ë°®Á§∫Êµ∑Â≤õÔºå‰∏ä‰∏ãÂ∑¶Âè≥Ë°®Á§∫Áõ∏Ëøû„ÄÇ000111101110001Ôºà1ÔºâÊ±ÇÊúÄÂ§ßÊµ∑Â≤õÈù¢ÁßØ„ÄÇÔºà2ÔºâÊ±ÇÊúÄÂ§ßÊµ∑Â≤õÈù¢ÁßØÂíåÂØπÂ∫îÊµ∑Â≤õÁöÑÊâÄÊúâÂùêÊ†á„ÄÇÔºà3ÔºâÊ±ÇÊâÄÊúâÊµ∑Â≤õÁöÑÊâÄÊúâÂùêÊ†áÔºåÊåâÊµ∑Â≤õÂàÜ„ÄÇÊØèÂ∞èÈ¢òËÆ≤ÊÄùË∑ØÔºåÊúÄÂêéÂÜôÁ¨¨‰∫åÈ¢ò„ÄÇ javaÂü∫Á°Ä BeanÁöÑÈªòËÆ§‰ΩúÁî®ËåÉÂõ¥ÊòØ‰ªÄ‰πàÔºüÂÖ∂‰ªñÁöÑ‰ΩúÁî®ËåÉÂõ¥Ôºü Âπ≥Â∏∏Áî®Á∫øÁ®ã‰∏ªË¶ÅÊòØÊÄé‰πàÂÜôÁöÑÔºå‰ºöÁî®‰∏Ä‰∫õÁ∫øÁ®ãÊ°ÜÊû∂ÂêóÔºüÔºàÊ≤°ÊúâÁî®Ê°ÜÊû∂ÔºâJavaÁ∫øÁ®ãÊ±†ÁöÑÊ¶ÇÂøµÔºüÁ∫øÁ®ãÊ±†ÊúâÂì™‰∫õÔºüÁ∫øÁ®ãÊ±†Â∑•ÂéÇÊúâÂì™‰∫õÁ∫øÁ®ãÊ±†Á±ªÂûãÔºåÂèäÂÖ∂Á∫øÁ®ãÊ±†ÂèÇÊï∞ÊòØ‰ªÄ‰πàÔºü Áî®Á∫øÁ®ãÈÉΩÂèØ‰ª•ÂïäÔºåÁ∫øÁ®ãÊ±† or Áõ¥Êé• new Thread Á∫øÁ®ãÊ°ÜÊû∂ Executor‰∏≠ÁöÑ ThreadPoolExecutor„ÄÅFutureTask Fork-join Exchanger Semphore CycliBarrier CountDownLatch Á∫øÁ®ãÊ±†ÁöÑÊ¶ÇÂøµÔºöÂ∞±ÊòØ‰ºöÂ§çÁî®‰∏ÄÂ†ÜÁ∫øÁ®ã Âõõ‰∏™‰∏ªË¶Å‰ΩøÁî®ÁöÑÁ∫øÁ®ãÊ±†Ôºå newFixedThreadPoolÊòØ‰∏Ä‰∏™ÂÖ∏Âûã‰∏î‰ºòÁßÄÁöÑÁ∫øÁ®ãÊ±†ÔºåÂÆÉÂÖ∑ÊúâÁ∫øÁ®ãÊ±†ÁöÑÈ´òÊïàÁéáÂíåËäÇÁúÅÂàõÂª∫Á∫øÁ®ãÊó∂ÊâÄËÄóÁöÑÂºÄÈîÄÁöÑ‰ºòÁÇπ„ÄÇ‰ΩÜÊòØÂú®Á∫øÁ®ãÊ±†Á©∫Èó≤Êó∂ÔºåÂç≥Á∫øÁ®ãÊ±†‰∏≠Ê≤°ÊúâÂèØËøêË°å‰ªªÂä°Êó∂ÔºåÂÆÉ‰∏ç‰ºöÈáäÊîæÂ∑•‰ΩúÁ∫øÁ®ãÔºåËøò‰ºöÂç†Áî®‰∏ÄÂÆöÁöÑÁ≥ªÁªüËµÑÊ∫ê„ÄÇ‰ΩÜÊòØÊ≥®ÊÑèÂÖ∂Âè™ÊúâÊ†∏ÂøÉÁ∫øÁ®ãÊ±†ÔºåÂú®Á∫øÁ®ãÊ±†‰∏≠Ê≤°ÊúâÈ¢ùÂ§ñÁöÑÁ∫øÁ®ã„ÄÇ‰ΩøÁî®ÁöÑÊòØ LinkedBlockingQueue„ÄÇÊàë‰∏çÁü•ÈÅì‰∏∫‰ªÄ‰πàËøòË¶ÅÊåáÂÆöÊ†∏ÂøÉÁ∫øÁ®ãÊï∞ÂíåÊúÄÂ§ßÁ∫øÁ®ãÊï∞‰∏ÄËá¥ÔºåËøôÈáåÁöÑ LinkedBlockingQueue ÊòéÊòéÂ∞±ÊòØÊó†ÁïåÁöÑÔºå‰πüÂ∞±ÊòØËØ¥‰∏çÂèØËÉΩ‰ºöÂéª‰ΩøÁî®Âà∞Ê†∏ÂøÉÁ∫øÁ®ã‰ª•Â§ñÁöÑÁ∫øÁ®ã„ÄÇ newCachedThreadPoolÁöÑÁâπÁÇπÂ∞±ÊòØÂú®Á∫øÁ®ãÊ±†Á©∫Èó≤Êó∂ÔºåÂç≥Á∫øÁ®ãÊ±†‰∏≠Ê≤°ÊúâÂèØËøêË°å‰ªªÂä°Êó∂ÔºåÂÆÉ‰ºöÈáäÊîæÂ∑•‰ΩúÁ∫øÁ®ãÔºå‰ªéËÄåÈáäÊîæÂ∑•‰ΩúÁ∫øÁ®ãÊâÄÂç†Áî®ÁöÑËµÑÊ∫ê„ÄÇ‰ΩÜÊòØÂΩìÂá∫Áé∞Êñ∞‰ªªÂä°Êó∂ÔºåÂèàË¶ÅÂàõÂª∫Êñ∞ÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÔºåËøô‰ºöÂ∏¶Êù•‰∏ÄÂÆöÁöÑÁ≥ªÁªüÂºÄÈîÄ„ÄÇÂπ∂‰∏îÂú®‰ΩøÁî®CachedThreadPoolÊó∂Ôºå‰∏ÄÂÆöË¶ÅÊ≥®ÊÑèÊéßÂà∂‰ªªÂä°ÁöÑÊï∞ÈáèÔºåÂê¶ÂàôÂ§ßÈáèÁ∫øÁ®ãÂêåÊó∂ËøêË°åÔºåÂèØËÉΩ‰ºöÈÄ†ÊàêÁ≥ªÁªüÁò´Áó™„ÄÇ‰ΩøÁî®ÁöÑÊòØ SynchronousQueue„ÄÇÂõ†‰∏∫‰ªñÊòØÊó†ÁïåÁöÑÔºåÂÖ∂ÂÆû‰πüÊòØÁ©∫ÈòüÂàóÔºåÁ∫øÁ®ãÊï∞Ê≤°ÊúâÈôêÂà∂Ôºå‰ªªÂä°Êù•‰∫ÜÔºåÂ¶ÇÊûúÊ≤°ÊúâÁ©∫Èó≤Á∫øÁ®ãÔºåÁõ¥Êé•new ‰∏Ä‰∏™Á∫øÁ®ã„ÄÇcorePoolSizeËÆæÁΩÆ‰∏∫0ÔºåÂ∞ÜmaximumPoolSizeËÆæÁΩÆ‰∏∫Integer.MAX_VALUE„ÄÇ newScheduledThreadPoolÊòØÂë®ÊúüÁ∫øÁ®ãÊ±†„ÄÇÊîØÊåÅÂÆöÊó∂ÂèäÂë®ÊúüÊÄß‰ªªÂä°ÊâßË°å„ÄÇ‰ΩøÁî®ÁöÑÊòØ DelayBlockingQueue„ÄÇ newSingleThreadPoolÊòØ‰∏Ä‰∏™ÂçïÁ∫øÁ®ãÂåñÁöÑÁ∫øÁ®ãÊ±†ÔºåÂÆÉÂè™‰ºöÁî®ÂîØ‰∏ÄÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÊù•ÊâßË°å‰ªªÂä°Ôºå‰øùËØÅÊâÄÊúâ‰ªªÂä°ÊåâÁÖßÊåáÂÆöÈ°∫Â∫è(FIFO, LIFO, ‰ºòÂÖàÁ∫ß)ÊâßË°å„ÄÇÂΩìÁÑ∂Â¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãÊ≠ª‰∫ÜÔºå‰ºöÊñ∞Âª∫‰∏Ä‰∏™ÈáçÊñ∞ÊâßË°å‰ªªÂä°„ÄÇÂ∞ÜcorePoolSizeÂíåmaximumPoolSizeÈÉΩËÆæÁΩÆ‰∏∫1Ôºå‰πü‰ΩøÁî®ÁöÑLinkedBlockingQueueÔºõ ConcurrentHashMapËÆ≤‰∏ÄËÆ≤Ôºü ËÆ≤‰ªÄ‰πà‚Ä¶ÁÆÄÂçïÁöÑË¶ÅÊ≠ªÁöÑ‰∏úË•øÂìàÂìàÂìàÂìàÂìàÂìàÂìà‚Ä¶Â•ΩÂè≠ËøôÁßçÈóÆÈ¢òÂ•ΩÊ≤°ÊÑèÊÄù Java binÂåÖ‰∏ãÈù¢ÁöÑÂ∑•ÂÖ∑Áî®ËøáÂì™‰∫õÔºü ÂêåÊ≠•IOÂíåÂºÇÊ≠•IOÁöÑÂå∫Âà´Ôºü Á∫øÁ®ãÂ¶Ç‰ΩïÂÆûÁé∞ÂêåÊ≠•Ôºü synchronized lock ConcurrentHashMap Âú®Java7ÂíåJava8‰∏≠ÁöÑÂå∫Âà´Ôºü‰∏∫‰ªÄ‰πàJava8Âπ∂ÂèëÊïàÁéáÊõ¥Â•ΩÔºü‰ªÄ‰πàÊÉÖÂÜµ‰∏ãÁî®HashMapÔºå‰ªÄ‰πàÊÉÖÂÜµÁî®ConcurrentHashMapÔºü Âõ†‰∏∫ÈîÅÁ≤íÂ∫¶Êõ¥Âä†ÁªÜÁ≤íÂ∫¶‰∫ÜÔºåÂπ∂‰∏î‰ΩøÁî®‰∫ÜËΩªÈáèÁ∫ßÈîÅ„ÄÅÂÅèÂêëÈîÅ„ÄÇ Á∫øÁ®ãÂÆâÂÖ®‰ΩøÁî® ConcurrentHashMapÔºåÁ∫øÁ®ã‰∏çÂÆâÂÖ®‰ΩøÁî® HashMap Âä†ÈîÅÊúâ‰ªÄ‰πàÊú∫Âà∂Ôºü Synchronized lock ThreadLocalÔºüÂ∫îÁî®Âú∫ÊôØÔºü Á∫øÁ®ãÂ±ÄÈÉ®ÂèòÈáèÔºåÂ∫îÁî®Âú∫ÊôØ‰∏∫ÂèòÈáèÊòØÁ∫øÁ®ãÈó¥ÈöîÁ¶ªÔºåÁ∫øÁ®ãÂÜÖÂÖ®Â±ÄÂèòÈáè‰ΩøÁî®ÔºåËÄå‰∏îËøòÂèØ‰ª•ÂÅöÂà∞Â±ÄÈÉ®ÂèòÈáèÂÅö‰∏çÂà∞ÁöÑÔºå‰πüÂ∞±ÊòØÂèØ‰ª•Ë∑®Á∫øÁ®ãÈÄö‰ø°„ÄÇ Spring Âçï‰æãbean„ÄÅhibernate‰∏≠ÁöÑsessionÁ≠âÁ≠âÈÉΩ‰ΩøÁî®‰∫Ü ThreadLocal„ÄÇ Â§öÁ∫øÁ®ãJVM Java GCÊú∫Âà∂ÔºüGC RootsÊúâÂì™‰∫õÔºü Ê∂àÊÅØ‰∏≠Èó¥‰ª∂springÂÖ®ÂÆ∂Ê°∂ ÂæÆÊúçÂä°Ê≥®ÂÜåÂèëÁé∞Ôºå‰∏∫‰ªÄ‰πàÁî®ÂæÆÊúçÂä°ÔºågrpcÔºåprotobufÔºådubboËÆ≤‰∏Ä‰∏ã IoCÊòØ‰ªÄ‰πàÊ¶ÇÂøµÔºü WebÂÆπÂô®Áî®ÁöÑ‰ªÄ‰πàÔºü‰Ω†È°πÁõÆÈáåÊ∂âÂèä‰∫ÜSSMÊ°ÜÊû∂Ôºå‰∏Ä‰∏™ËØ∑Ê±ÇÂà∞TomcatÂÆπÂô®‰∫ÜÔºåÊÄé‰πàÂà∞SSM‰ª£Á†Å‰∏≠ÂéªÔºü Êï∞ÊçÆÂ∫ì ‰∫ãÂä°ÁöÑÂõõÂ§ßÁâπÊÄß ÂéüÂ≠êÊÄß„ÄÅÈöîÁ¶ªÊÄß„ÄÅ ÂõõÁßçÈöîÁ¶ªÁ∫ßÂà´ ‰ªÄ‰πàÊòØÂπªËØª InnoDB ÊÄé‰πàÈò≤Ê≠¢ÂπªËØª B+Ê†ëÂéüÁêÜÔºå‰∏∫‰ªÄ‰πà‰ΩøÁî®B+ËÄå‰∏çÊòØ‰∫åÂèâÂπ≥Ë°°Ê†ë 1000‰∏á‰∏™objectÁöÑÊñá‰ª∂ÔºåÊúâABC‰∏â‰∏™date memberÔºåÊÄé‰πàÊ†πÊçÆABCÁöÑÊù°‰ª∂Êü•ËØ¢ÊØîËæÉÂø´ ËÅîÂêàÁ¥¢Âºï Á¥¢ÂºïÊòØ‰ªÄ‰πàÊ¶ÇÂøµÊúâ‰ªÄ‰πà‰ΩúÁî®ÔºüMySQLÈáå‰∏ªË¶ÅÊúâÂì™‰∫õÁ¥¢ÂºïÁªìÊûÑÔºüÂìàÂ∏åÁ¥¢ÂºïÂíåB+Ê†ëÁ¥¢ÂºïÊØîËæÉÔºü MySQL‰∫ÜËß£Âà∞‰ªÄ‰πàÁ®ãÂ∫¶ÔºübinLogÁü•ÈÅìÂêóÔºü ÂÖ∂‰ªñ redisÂàÜÂ∏ÉÂºèÈîÅ‰∏§ÁßçÂÆûÁé∞ ÊÄé‰πàÁêÜËß£ÂæÆÊúçÂä° ‰ªÄ‰πàÊòØPythonÁîüÊàêÂô®ÔºåËø≠‰ª£Âô®Ôºõ ‰ªÄ‰πàÊòØË£ÖÈ•∞Âô®Ôºõ ÊµèËßàÂô®ÁºìÂ≠ò„ÄÅCPUÁöÑÁºìÂ≠òÂíåRedisÁöÑÁºìÂ≠òÁöÑÂÖ≥Á≥ªÔºå‰∏∫‰ªÄ‰πàË¶ÅÊúâÁºìÂ≠ò ÂÖÉÁªÑÂíålistÁöÑÂå∫Âà´Ôºõ Python‰∏≠ÁöÑdictÂ∫ïÂ±ÇÊÄé‰πàÂÆûÁé∞ÁöÑ listÁöÑÂ∫ïÂ±ÇÊÄé‰πàÂÆûÁé∞ÁöÑÔºõ ÂèåÁ≠â‰∫éÂíåisÊúâ‰ªÄ‰πàÂå∫Âà´ JSONÂíåprotobufÂå∫Âà´ BloomFilterÂπ≤ÂòõÁöÑÔºåËß£ÂÜ≥‰∫Ü‰ªÄ‰πàÈóÆÈ¢ò REST apiÂíåRPC ‰∏∫‰ªÄ‰πàprotobufÊïàÁéáÊõ¥È´òÔºåJSONÁº∫ÁÇπ 1000‰∏áÊù°Áõ∏ÂêåclassÊ†ºÂºèobjectÁªÑÊàêÁöÑjsonÔºåÊÄé‰πàÂéãÁº© 123456789ËÆæËÆ°È¢òÔºö‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÂ≠ò‰∫Ü‰ª•‰∏ãÊï∞ÊçÆÔºöÁî®Êà∑idÔºåÁôªÂΩïÊó∂Èó¥ÔºåÁôªÂá∫Êó∂Èó¥ÔºõÂ¶Ç‰ΩïÊâæÂà∞‰∏ÄÂ§©ÂΩì‰∏≠ÁöÑÁî®Êà∑Â≥∞ÂÄºÔºàÁî®‰∏Ä‰∏™hash mapÂ≠òÊâÄÊúâÁßíÊï∞ÁöÑÂú®Á∫ø‰∫∫Êï∞Ôºâ‰∏∫‰ªÄ‰πàË¶ÅÂàÜÁî®Êà∑ÊÄÅÂíåÂÜÖÊ†∏ÊÄÅGit ÂàáÊç¢ÂàÜÊîØÔºåÊèê‰∫§ÔºåÂÖ∑‰ΩìÂ¶Ç‰ΩïÂêàÂπ∂ÂàÜÊîØPythonÂ§öÁ∫øÁ®ãÁî®‰∫ÜÂá†‰∏™CPUÁÆóÊ≥ïÔºö‰∫åÂèâÊ†ëÔºåËæìÂá∫ÊâÄÊúâÂíå‰∏∫nÁöÑË∑ØÂæÑÔºàÂèØ‰ª•‰ªé‰∏≠Èó¥ÁªìÁÇπÂà∞‰∏≠Èó¥ÁªìÁÇπÔºâ ÈòøÈáåÊï∞ÊçÆÁªìÊûÑÊìç‰ΩúÁ≥ªÁªüËÆ°ÁÆóÊú∫ÁΩëÁªúÁÆóÊ≥ï Á∫¢ÈªëÊ†ë„ÄÅ‰∫åÂèâÊ†ëÁöÑÁÆóÊ≥ï javaÂü∫Á°Ä ServletËßÑËåÉ‰∫ÜËß£ÂêóÔºüServletÁöÑÊï¥‰∏™‰∏öÂä°ÊµÅÁ®ãÔºüsessionÂíåcookieÁöÑÂå∫Âà´ÔºüsessionÊÄé‰πàÂèòÊàêcookieÔºåÊÄé‰πàÂèòÂõûsessionÔºüË∞ÅÊù•ÂÆûÁé∞Êï¥‰∏™ÊµÅÁ®ãÔºü ÂàöÊâçÊèêÂà∞ÁöÑÂàÜÂ∏ÉÂºèÂÆûÁé∞Â§ö‰∏™Â∫îÁî®ÁöÑSessionÂÖ±‰∫´ÈóÆÈ¢òÔºü Â§öÁ∫øÁ®ãJVMÊ∂àÊÅØ‰∏≠Èó¥‰ª∂springÂÖ®ÂÆ∂Ê°∂ È°πÁõÆÊèêÂà∞ÁöÑSSMÊ°ÜÊû∂ÈáåÈù¢‰∫ÜËß£Âì™‰∫õÔºüSpring IoC‰∏≠BeanÁöÑÁîüÂëΩÂë®ÊúüÔºüË∞ÅÊù•ÁÆ°ÁêÜBeanÁöÑÁîüÂëΩÂë®ÊúüÔºüBeanFactoryÂíåApplicationContextÁöÑÂÖ≥Á≥ªÔºü@AutowiredÂíå@ResourceÁöÑÂå∫Âà´Ôºü SpringÁöÑËá™Âä®Êâ´ÊèèÊÄé‰πàÂÆûÁé∞ÁöÑÔºüË∞ÅÂÆûÁé∞ÁöÑÔºü MyBatis‰ªãÁªç‰∏Ä‰∏ãÔºü‰Ω†ËØ¥Âà∞ËøôÊòØ‰∏Ä‰∏™ÊåÅ‰πÖÂ±ÇÊ°ÜÊû∂ÔºåÈÇ£‰Ω†‰∫ÜËß£JPAËßÑËåÉÂêóÔºü Êï∞ÊçÆÂ∫ìÂÖ∂‰ªñ UML‰∫ÜËß£ÂêóÔºüÔºà‰∏ç‰ºöÔºâËÆæËÆ°Ê®°ÂºèÔºü Zookeeper‰∫ÜËß£ÂêóÔºü Âçï‰æãÊ®°Âºè„ÄÅÂ∑•ÂéÇÊ®°Âºè„ÄÅ***Ê®°Âºè‚Ä¶‚Ä¶Âçï‰æãÊ®°ÂºèÊúâ‰ªÄ‰πàÈúÄË¶ÅÊ≥®ÊÑèÁöÑÂêóÔºüÔºàÂ§öÁ∫øÁ®ãÂπ∂ÂèëÈóÆÈ¢òÔºösynchronized+volatileÔºâ‰Ω†ÂÜôÂçï‰æãÁöÑÊó∂ÂÄôÂ¶ÇÊûúËøô‰∏™Âçï‰æãÂØπË±°ÊúâÂ≠óÊÆµÂÄºÔºå‰Ω†‰ºöÂéªÊîπÂèòËøô‰∫õÂ≠óÊÆµÂÄºÂêóÔºü‰∏∫‰ªÄ‰πàÂë¢Ôºü ÈπÖÂéÇÊï∞ÊçÆÁªìÊûÑÊìç‰ΩúÁ≥ªÁªüËÆ°ÁÆóÊú∫ÁΩëÁªú http‰∏âÊ¨°Êè°ÊâãÂõõÊ¨°Êå•Êâã HTTPÂ∏∏ËßÅÈîôËØØÁ†ÅÔºüTCP‰∏âÊ¨°Êè°ÊâãÔºü ÁÆóÊ≥ï Êµ∑ÈáèÊï∞ÊçÆÂØªÊâæTopK Êµ∑ÈáèÊï∞ÊçÆÊéíÂ∫è 16GÁöÑÊñá‰ª∂ÂÇ®Â≠òÁöÑÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåË¶ÅÊ±ÇÂè™Áî®1GÂÜÖÂ≠òÊää‰ªñ‰ª¨ÊéíÂ•ΩÂ∫è„ÄÇ ÊéíÂ∫èÁÆóÊ≥ï‰∫ÜËß£Âì™‰∫õÔºüJavaÈáåÂÜÖÁΩÆÁöÑÊòØÁî®‰ªÄ‰πàÊéíÂ∫èÊñπÊ≥ïÔºüÂø´ÊéíÊòØÁ®≥ÂÆöÁöÑÂêóÔºüÂø´ÊéíÊéíÂØπË±°ÁöÑÊó∂ÂÄôÊúâ‰ªÄ‰πàÈóÆÈ¢òÔºüÔºàÊèêÁ§∫ÊàëÔºå‰∏â‰∏™Â≠óÊÆµÔºåÁ¨¨‰∏Ä‰∏™Â≠óÊÆµÂíåÁ¨¨‰∫å‰∏™Â≠óÊÆµÂÅöhashÔºåÁ¨¨‰∏â‰∏™‰∏çÂÅöÔºåËøòÊòØ‰∏çÂ§™ÊáÇÔºâ ÂçÅ‰∫ø‰∏™IPÔºåËé∑ÂæóËÆøÈóÆÊ¨°Êï∞ÊúÄÂ§öÁöÑÂçÅ‰∏™„ÄÇ ‰∫î‰∏™ÂçïËØçÔºåÂú®‰∏Ä‰∏™ÈïøÊñáÊú¨‰∏≠Êü•ÊâæÊòØÂê¶Â≠òÂú®„ÄÇ Âø´ÈÄüÊéíÂ∫èÁÆóÊ≥ï javaÂü∫Á°Ä Java‰∏≠ÂêÑÁßçÈîÅËÅä‰∏Ä‰∏ãÔºåCASÊú∫Âà∂„ÄÇ stlËØ¥‰∏Ä‰∏ãÔºåmapÂéüÁêÜÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶ HashMapÊúâ‰∫ÜËß£ÂêóÔºüHashMapÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÔºüHashMap‰∏≠HashÂÜ≤Á™ÅÊòØÊÄé‰πàËß£ÂÜ≥ÁöÑÔºüÈìæË°®ÁöÑ‰∏ä‰∏ÄÁ∫ßÁªìÊûÑÊòØ‰ªÄ‰πàÔºüJava8‰∏≠ÁöÑHashMapÊúâ‰ªÄ‰πàÂèòÂåñÔºüÁ∫¢ÈªëÊ†ëÈúÄË¶ÅÊØîËæÉÂ§ßÂ∞èÊâçËÉΩËøõË°åÊèíÂÖ•ÔºåÊòØ‰æùÊçÆ‰ªÄ‰πàËøõË°åÊØîËæÉÁöÑÔºüÂÖ∂‰ªñHashÂÜ≤Á™ÅËß£ÂÜ≥ÊñπÂºèÔºü ÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®ÁöÑÊñπÂºèÔºüThreadLocalÂéüÁêÜÔºüÁ∫øÁ®ãÊ±†‰∫ÜËß£ÂêóËØ¥ËØ¥ÁúãÔºüËá™Â∑±Áî®Á∫øÁ®ãÊ±†ÊÄé‰πàÂÆöÂèÇÊï∞Ôºü Â§öÁ∫øÁ®ã volatileÊúâÁî®Ëøá‰πàÔºåÂ∫ïÂ±ÇÂÆûÁé∞ÔºåËøô‰∏™ÈóÆÈ¢òÊòØËÆ≤Âà∞‰∫ÜCPUÂ°´ÂÖÖÁºìÂ≠òË°åÊåá‰ª§„ÄÇ JavaÁ∫øÁ®ãÊ±† JVM GCÂõûÊî∂Âô®JVMË∞É‰ºòÂèÇÊï∞ÈÖçÁΩÆ JJavaÂ†Ü‰∏≠ÊÄé‰πàÂàÜÂå∫ÔºüÊÄé‰πàÂà§Êñ≠ÂØπË±°ÊòØÂê¶ÈúÄË¶ÅÂõûÊî∂ÔºüJavaÂÜÖÂ≠òÂç†Áî®ËøáÂ§ßÊÄé‰πàÊü•ÁúãÔºüJavaÂÜÖÂ≠òÊ∫¢Âá∫ÊúâÁ¢∞Âà∞ËøáÂêóÔºüJavaÂÜÖÂ≠òÊ∫¢Âá∫ÊÄé‰πàÂÆö‰ΩçÔºü Ê∂àÊÅØ‰∏≠Èó¥‰ª∂springÂÖ®ÂÆ∂Ê°∂Êï∞ÊçÆÂ∫ì Êï∞ÊçÆÂ∫ìÁöÑ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ÔºåmvccÊú∫Âà∂ËÅä‰∏Ä‰∏ã„ÄÇ Êï∞ÊçÆÂ∫ìÁ¥¢ÂºïÔºåB+Ê†ëÁªìÊûÑÂíåÁâπÁÇπ„ÄÇÊÄé‰πàËøõË°å‰ºòÂåñ mysqlÈó¥ÈöôÈîÅ‰∏∫‰∫ÜËß£ÂÜ≥‰ªÄ‰πàÈóÆÈ¢òÔºå‰ªÄ‰πàÊù°‰ª∂‰∏ã‰ºöËß¶Âèë„ÄÇ MySQLÊï∞ÊçÆÂ∫ìÂºïÊìéÔºüÂ∫îÁî®Âú∫ÊôØÔºüÊü•ËØ¢‰ºòÂåñÔºüNoSQLÊúâÁî®Êàñ‰∫ÜËß£ÂêóÔºü ÂÖ∂‰ªñ Á∫¢ÈªëÊ†ëÔºåAVLÊ†ëÔºåÊü•ËØ¢Êó∂Èó¥Â§çÊùÇÂ∫¶Ôºå‰ªÄ‰πàÊÉÖÂÜµ‰∏ãÁî®Á∫¢ÈªëÊ†ëËÄå‰∏çÁî®map ËøõÁ®ãÂíåÁ∫øÁ®ãÁöÑÂå∫Âà´ÔºüÂπ≥Â∏∏ÁöÑÂºÄÂèëÁéØÂ¢ÉÊòØWindowsËøòÊòØLinuxÔºüLinuxÂëΩ‰ª§Áü•ÈÅìÂì™‰∫õÔºüË¶ÅÂú®Â§ö‰∏™ÊñáÊú¨Êñá‰ª∂‰∏≠Êâæ‰∏Ä‰∏™ÂÖ≥ÈîÆËØçÁî®‰ªÄ‰πàÂëΩ‰ª§ÔºüÔºàgrepÔºâÁΩëÁªúÁõ∏ÂÖ≥ÁöÑÂëΩ‰ª§ÊòØ‰ªÄ‰πàÔºü Â∫¶Â®òÊï∞ÊçÆÁªìÊûÑÊìç‰ΩúÁ≥ªÁªüËÆ°ÁÆóÊú∫ÁΩëÁªúÁÆóÊ≥ïjavaÂü∫Á°ÄÂ§öÁ∫øÁ®ãJVMÊ∂àÊÅØ‰∏≠Èó¥‰ª∂springÂÖ®ÂÆ∂Ê°∂ springbootÂíåspringÊØîÊúâ‰ªÄ‰πà‰ºòÁÇπ springbootËá™Âä®ÈÖçÁΩÆÂéüÁêÜ Êï∞ÊçÆÂ∫ì È´òÂπ∂ÂèëÊï∞ÊçÆÂ∫ìÂ§ßË°®‰ºòÂåñÔºåÂàÜÂ∫ìÂàÜË°®ÔºåÊ∞¥Âπ≥ÊÄé‰πàÊãÜÔºåÂûÇÁõ¥ÊÄé‰πàÊãÜ Áü•ÈÅìÂì™‰∫õÁ¥¢ÂºïÔºåÁ¥¢ÂºïÊï∞ÊçÆÁªìÊûÑ ËÅîÂêàÁ¥¢ÂºïËßÑÂàô Êï∞ÊçÆÂ∫ìÊÄé‰πà‰ºòÂåñÔºåÊü•ËØ¢ÊÄßËÉΩÁì∂È¢àÊÄé‰πàÊü•ÔºàexplainÔºâ ÂÖ∂‰ªñÁæéÂõ¢Êï∞ÊçÆÁªìÊûÑÊìç‰ΩúÁ≥ªÁªüËÆ°ÁÆóÊú∫ÁΩëÁªúÁÆóÊ≥ïjavaÂü∫Á°ÄÂ§öÁ∫øÁ®ãJVMÊ∂àÊÅØ‰∏≠Èó¥‰ª∂springÂÖ®ÂÆ∂Ê°∂Êï∞ÊçÆÂ∫ìÂÖ∂‰ªñÊãºÂ§ïÂ§ïÊï∞ÊçÆÁªìÊûÑ ‰∫åÂèâÊ†ëÁöÑÂêéÂ∫èÈÅçÂéÜÔºåÈùûÈÄíÂΩíÁÆóÊ≥ï„ÄÇ Êìç‰ΩúÁ≥ªÁªüËÆ°ÁÆóÊú∫ÁΩëÁªú TCP‰∏âÊ¨°Êè°ÊâãÁöÑËøáÁ®ãÔºåÂ¶ÇÊûúÊ≤°ÊúâÁ¨¨‰∏âÊ¨°Êè°ÊâãÊúâ‰ªÄ‰πàÈóÆÈ¢ò„ÄÇ ÁÆóÊ≥ïjavaÂü∫Á°Ä Â¶Ç‰ΩïËÆøÈóÆ‰∏Ä‰∏™Êñá‰ª∂ÁöÑÂ≠óËäÇÊµÅÂë¢ Â§öÁ∫øÁ®ã ÂÅöÁöÑ‰∏ªË¶ÅÊòØJavaÂØπÂêßÔºåËÆ≤‰∏Ä‰∏ãÂ§öÁ∫øÁ®ãÊääÔºåÁî®Âà∞Âì™‰∫õÂÜô‰∏Ä‰∏ãÔºåÂÜô‰∫ÜthreadÂíårunnableÔºåÁÑ∂ÂêéÂÜô‰∫ÜÁ∫øÁ®ãÊ±†ÔºåÂ•πÈóÆÊàëÁ∫øÁ®ãÊ±†Áî±Âì™‰∫õÁªÑ‰ª∂ÁªÑÊàêÔºåÊúâÂì™‰∫õÁ∫øÁ®ãÊ±†ÔºåÂàÜÂà´ÊÄé‰πà‰ΩøÁî®Ôºå‰ª•ÂèäÊãíÁªùÁ≠ñÁï•ÊúâÂì™‰∫õ„ÄÇ ‰ªÄ‰πàÊó∂ÂÄôÂ§öÁ∫øÁ®ã‰ºöÂèëÁîüÊ≠ªÈîÅÔºåÂÜô‰∏Ä‰∏™‰æãÂ≠êÂêßÔºåÁÑ∂ÂêéÊàëÂÜô‰∫Ü‰∏Ä‰∏™‰∏§‰∏™Á∫øÁ®ãÔºå‰∏§‰∏™ÈîÅÔºåÂàÜÂà´ÊåÅÊúâ‰∏Ä‰∏™ÔºåËØ∑Ê±ÇÂè¶‰∏Ä‰∏™ÁöÑÊ≠ªÈîÅÂÆû‰æã ÈõÜÂêàÁ±ªÁÜüÊÇâÂêßÔºåÂÜô‰∏Ä‰∏™È¢òÁõÆÔºå‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÈõÜÂêàÔºåÊâæÂá∫pddÂπ∂‰∏îÂà†Èô§ÔºåÊàëÁõ¥Êé•ÂÜô‰∫Ü‰∏Ä‰∏™listÁÑ∂ÂêéforÂæ™ÁéØÂà§Êñ≠Áõ∏Á≠âÊó∂Âà†Èô§ÔºåÂ•πËØ¥ÊòéÊòæÈóÆÈ¢òÔºåÊàëÊâçÂèëÁé∞listÁõ¥Êé•Âà†‰ΩçÁΩÆ‰ºöÂá∫ÈîôÔºå‰∫éÊòØÊàëËØ¥ÊîπÁî®Êï∞ÁªÑÔºåÂ•πËØ¥‰∏çÂ§™Á¨¶ÂêàË¶ÅÊ±ÇÔºåÊâÄ‰ª•Â∫îËØ•‰ΩøÁî®iteratorÂà†Èô§‰ºöÂ•Ω‰∏ÄÁÇπÔºå‰øÆÊîπ‰ºöÂèçÊò†Âà∞ÈõÜÂêàÁ±ªÔºåÂπ∂‰∏î‰∏ç‰ºöÂá∫Èîô„ÄÇ ÁÑ∂ÂêéËØ¥‰∏Ä‰∏ãRedisÂêßÔºåÊòØÂçïÁ∫øÁ®ãËøòÊòØÂ§öÁ∫øÁ®ãÔºåRedisÁöÑÂàÜÂ∏ÉÂºèÊÄé‰πàÂÅöÔºåËØ¥‰∫ÜÈõÜÁæ§„ÄÇ RPC‰∫ÜËß£‰πàÔºåÊàëËØ¥‰∫Ü‰∏ªË¶ÅÊòØÂçèËÆÆÊ†à+Êï∞ÊçÆÊ†ºÂºè+Â∫èÂàóÂåñÊñπÂºèÔºåÁÑ∂ÂêéÈúÄË¶ÅÊúâÊúçÂä°Ê≥®ÂÜå‰∏≠ÂøÉÁÆ°ÁêÜÁîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÔºå‰ªñÈóÆÊàëÊ≥®ÂÜå‰∏≠ÂøÉÂÆïÊú∫ÊÄé‰πàÂäûÔºåÊàëËØ¥ÂèØ‰ª•ÂÅöÈ´òÂèØÁî®Ôºå‰ªñËØ¥Ë¶ÅÈóÆÁöÑ‰∏çÊòØËøô‰∏™ÔºåÊòØÊÉ≥ÈóÆÊàëÊ≥®ÂÜå‰∏≠ÂøÉÂÆïÊú∫Êó∂Ê∂àË¥πËÄÖÊòØÂê¶ËÉΩËÆøÈóÆÁîü‰∫ßËÄÖ„ÄÇ Á∫øÁ®ãÊï∞ÂæàÂ§ö‰ºöÊÄé‰πàÊ†∑ÔºåÊàëËØ¥‰ºöÂç†ÂÜÖÂ≠òÔºåËøòÊúâÂ∞±ÊòØÂàáÊç¢Á∫øÁ®ãÊØîËæÉÈ¢ëÁπÅÔºå‰ªñÈóÆÂàáÊç¢Á∫øÁ®ã‰ºöÂèëÁîü‰ªÄ‰πàÔºåÂ∫îËØ•Â∞±ÊòØCPUÂàáÊç¢‰∏ä‰∏ãÊñáÔºåÂÖ∑‰ΩìÂ∞±ÊòØÂØÑÂ≠òÂô®ÂíåÂÜÖÂ≠òÂú∞ÂùÄÁöÑÂà∑Êñ∞„ÄÇ JVMÊ∂àÊÅØ‰∏≠Èó¥‰ª∂springÂÖ®ÂÆ∂Ê°∂Êï∞ÊçÆÂ∫ì MySQLÁöÑ‰∏ª‰ªéÂ§çÂà∂ÊÄé‰πàÂÅöÁöÑÔºåÁ≠îÊó•ÂøóÔºåÂÖ∑‰ΩìÂéüÁêÜÊòØ‰ªÄ‰πàÔºåÊúâ‰ªÄ‰πà‰ºòÁº∫ÁÇπ„ÄÇ ÂÖ∂‰ªñ Redis‰∫ÜËß£Âì™‰∫õÂÜÖÂÆπÔºåÊòØÂçïÁ∫øÁ®ã‰πàÔºå‰∏∫‰ªÄ‰πàÊòØÂçïÁ∫øÁ®ãÂë¢ÔºåÊï∞ÊçÆ‰∏ÄÂÆöÊòØÂ≠òÂú®Áâ©ÁêÜÂÜÖÂ≠ò‰∏≠‰πàÔºåÊàë‰∏çÊáÇËøôËØùÂï•ÊÑèÊÄùÔºåÂ∞±ÈóÆ‰∫Ü‰∏Ä‰∏ãÊòØ‰∏çÊòØÊåáÂèØËÉΩ‰πüÂú®ËôöÊãüÂÜÖÂ≠ò‰∏≠„ÄÇ‰ªñËØ¥ÈÇ£ËÆ≤‰∏Ä‰∏ãËôöÊãüÂÜÖÂ≠òÁöÑÊú∫Âà∂ÊääÔºåÊàëÂ∞±ËÆ≤‰∫ÜÂàÜÈ°µÔºåÈ°µË°®ÔºåÊç¢È°µËøô‰∫õ‰∏úË•ø„ÄÇ ÂàÜÂ∏ÉÂºè‰∫ÜËß£Âì™‰∫õ‰∏úË•øÔºåÊ∂àÊÅØÈòüÂàó‰∫ÜËß£‰πàÔºåÁî®Âú®‰ªÄ‰πàÂú∫ÊôØÔºåËØ¥‰∫ÜÂâäÂ≥∞ÔºåÈôêÊµÅÂíåÂºÇÊ≠•„ÄÇËØ¥‰∫ÜkafkaÔºåÈóÆÊàëÊÄé‰πà‰øùËØÅÊï∞ÊçÆ‰∏ç‰∏¢Â§±Ôºå‰ª•ÂèäÁ°Æ‰øùÊ∂àÊÅØ‰∏ç‰ºöË¢´ÈáçÂ§çÊ∂àË¥π„ÄÇËøòÈóÆ‰∫ÜÊ∂àÊÅØÈÄÅËææÁ°ÆËÆ§ÊòØÊÄé‰πàÂÅöÁöÑ„ÄÇ cap‰∫ÜËß£‰πàÔºåÂàÜÂà´Êåá‰ªÄ‰πàÔºåbaseÂë¢ÔºåÂº∫‰∏ÄËá¥ÊÄßÂíåÂº±‰∏ÄËá¥ÊÄßÊúâ‰ªÄ‰πàÊñπÊ≥ïÊù•ÂÅöÔºå2pc‰∫ÜËß£‰πàÔºåËØ¥‰∏Ä‰∏ãÂ§ßÊ¶ÇËøáÁ®ã„ÄÇ ËøôÊ†∑‰∏Ä‰∏™È¢òÁõÆÔºå‰∏Ä‰∏™ËäÇÁÇπË¶ÅÂíåÂÆ¢Êà∑ËøûÊé•Âª∫Á´ãÂøÉË∑≥Ê£ÄÊµãÔºåÂ§ßÊ¶ÇÊúâÁôæ‰∏áÊï∞ÈáèÁöÑËøûÊé•ÔºåÂπ∂‰∏î‰ºöÂÆöÊúüÂèëÈÄÅÂøÉË∑≥ÂåÖÔºåË¶ÅÂÜô‰∏Ä‰∏™updateÊñπÊ≥ïÂíåcheckÊñπÊ≥ïÔºåupdateÊñπÊ≥ïÊõ¥Êñ∞ÂøÉË∑≥Áä∂ÊÄÅÔºåcheckÂà†Èô§Ë∂ÖÊó∂ËäÇÁÇπÔºåÊÄé‰πàÂÅöÔºåÂàöÂºÄÂßãÂÅö‰∫Ü‰∏™hashÂèëÁé∞checkË¶ÅËΩÆËØ¢Â§™ÊÖ¢‰∫ÜÔºåÁÑ∂ÂêéÁî®ËÆ°Êó∂Âô®ÂíåÂºÄÁ∫øÁ®ãÊ£ÄÊµã‰πü‰∏çË°åÔºåÊúÄÂêéËØ¥‰∫Ü‰∏™LRUÔºå‰ªñËØ¥OKÁöÑ„ÄÇ Âçé‰∏∫Êï∞ÊçÆÁªìÊûÑÊìç‰ΩúÁ≥ªÁªüËÆ°ÁÆóÊú∫ÁΩëÁªúÁÆóÊ≥ïjavaÂü∫Á°ÄÂ§öÁ∫øÁ®ãJVMÊ∂àÊÅØ‰∏≠Èó¥‰ª∂springÂÖ®ÂÆ∂Ê°∂ ËØ∑Ê±ÇÂà∞SSHÊ°ÜÊû∂ÁöÑÊµÅÁ®ãÂõæÁîª‰∏Ä‰∏ãÔºüËøúÁ®ãË∞ÉÁî®ShellËÑöÊú¨Áî®Âà∞Âì™‰∫õÂëΩ‰ª§Ôºü Êï∞ÊçÆÂ∫ì Êï∞ÊçÆÈáèÂ§öÂ§ßÔºüÈ°πÁõÆPGÔºàPostgreSQLÔºâÁâàÊú¨ÔºüÈùûÁªìÊûÑÂåñÊï∞ÊçÆÊåáÁöÑÊòØ‰ªÄ‰πàÔºüÊúâÊ≤°ÊúâËÄÉËôëËøánosqlÔºüÂàÜÂ∫ìÂàÜË°®ÊÄé‰πàÂàÜÔºüÊü•ËØ¢ÁöÑË°®‰ºöÂêàÂπ∂Âú®‰∏ÄËµ∑ÂêóÔºü È°πÁõÆÊÄßËÉΩÊúâÊ≤°ÊúâËÄÉËôëËøáÔºüÔºàÊàëÊòØÂÅöÊúçÂä°Á´ØÁöÑÔºå‰∏ªË¶ÅËÄÉËôëËØ∑Ê±ÇÂπ∂ÂèëÈáèÔºâÊï∞ÊçÆÂ∫ìÊÄßËÉΩÂë¢ÔºüÔºà‰∫ÜËß£‰∏ÄÁÇπÔºåMySQL‰∏ª‰ªéÁªìÊûÑÔºâ ÂÖ∂‰ªñ NginxÂéüÁêÜ‰∫ÜËß£ÂêóÔºüÔºàÂè™Áî®Âà∞Ë¥üËΩΩÂùáË°°Ôºå‰ªãÁªç‰∫Ü‰∏Ä‰∏ãË¥üËΩΩÂùáË°°Á≠ñÁï• ÁΩëÊòìÊï∞ÊçÆÁªìÊûÑÊìç‰ΩúÁ≥ªÁªüËÆ°ÁÆóÊú∫ÁΩëÁªúÁÆóÊ≥ï Âà§Êñ≠Ê†ëÂØπÁß∞ Êï∞ÁªÑÈ°∫Êó∂ÈíàÊóãËΩ¨90Â∫¶ Áî®waitÂíånotifyÊ®°ÊãüÁîü‰∫ßËÄÖÊ∂àË¥πËÄÖÊ®°Âºè javaÂü∫Á°Ä public protected privateÂå∫Âà´ÔºüfinalÂíåfinallyÂå∫Âà´ÔºüfinalÂèØ‰ª•Áî®Âú®ÊñπÊ≥ïÂèÇÊï∞‰∏äÂêóÔºüRuntimeExceptionÂíåÈùûRuntimeExceptionÔºüÂêÑ‰∏æÂá†‰∏™‰æãÂ≠êÔºüÊØîÊñπËØ¥Êñá‰ª∂ËØªÂÜôÁöÑÊó∂ÂÄô‰ºöÊúâ‰ªÄ‰πàÂºÇÂ∏∏ÔºüÊÄé‰πàÂÆûÁé∞Â∫èÂàóÂåñÔºüÈô§‰∫ÜJavaÂéüÁîüÂ∫èÂàóÂåñÊñπÊ≥ïÔºåÂ∫èÂàóÂåñËøòÊúâ‰ªÄ‰πàÊ†ºÂºèÔºü ArrayListÂíåLinkedListÂå∫Âà´Ôºü ArrayListÂíåLinkedListÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂêóÔºü‰∏∫‰ªÄ‰πàËØ¥‰ªñ‰ª¨‰∏çÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå‰∏æÂÆûÈôÖÂú∫ÊôØÔºü Êúâ‰ªÄ‰πàÁ∫øÁ®ãÂÆâÂÖ®ÁöÑListÔºüÔºàCopyOnWriteArrayListÔºâËÆ≤‰∏Ä‰∏ãÊÄé‰πàÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®ÁöÑÔºüÔºàËØªÊó∂ÂÖ±‰∫´ÔºåÂÜôÊó∂Â§çÂà∂ÔºåÂä†ÈîÅÊú∫Âà∂Ôºâ Á∫øÁ®ãAÂíåÁ∫øÁ®ãBÂêåÊó∂ÈíàÂØπ‰∏Ä‰∏™ÂÖ±‰∫´ÂèòÈáèËøõË°åÊìç‰ΩúÔºåÂ¶Ç‰ΩïÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®Ôºü Âπ≥Â∏∏ÊÄé‰πàÂàõÂª∫Á∫øÁ®ãÔºüÁ∫øÁ®ãÊ±†ÈáåÈó≤ÁΩÆÁ∫øÁ®ãÊÄé‰πà‰øùÊ¥ªÔºüÔºà‰∏çÊ∏ÖÊ•öÔºåËØ¥‰∫ÜËá™Â∑±ÁöÑÊÉ≥Ê≥ïÔºâÈÇ£ÊÄé‰πàÂî§ÈÜíÔºüÂ¶ÇÊûúÁî®wait()Âíånotify()ÔºåÂØπË∞ÅÂä†ÈîÅÔºüFF synchronized Âíå ReentrantLockÁöÑÂå∫Âà´ÔºüÂπ≥Â∏∏ÊúâÁî®Âì™‰∫õÈõÜÂêàÁ±ªÔºüConcurrentÂåÖÊúâÁî®ÂêóÔºü Â§öÁ∫øÁ®ãJVM JVMÂÜÖÂ≠òÊ®°ÂûãÔºüÂ¶ÇÊûúÁªô‰∏Ä‰∏™Á±ªÔºåÈáåÈù¢Âè™Êúâ‰∏Ä‰∏™mainÊñπÊ≥ïÔºåÊñπÊ≥ïÈáåÈù¢Âè™Êúâ‰∏ÄÂè•System.out.println(‚Äúhelloworld‚Äù)ÔºåÈóÆËøêË°åËøô‰∏™Á±ª‰ºöÂú®JavaÂÜÖÂ≠òÊ®°ÂûãÈáåÂèëÁîü‰ªÄ‰πàÔºü ‚Äúhelloworld‚ÄùÂ≠òÂÇ®Âú®Âì™ÈáåÔºü JVMÂÜÖÂ≠òÊ®°ÂûãÔºüÊØè‰∏™Âå∫ÊòØÂÅö‰ªÄ‰πàÁöÑÔºüÂûÉÂúæÂõûÊî∂Êú∫Âà∂Ôºü Ê∂àÊÅØ‰∏≠Èó¥‰ª∂springÂÖ®ÂÆ∂Ê°∂ Spring‰∏≠BeanÁîüÂëΩÂë®ÊúüÔºüÊèêÂà∞ÁöÑAwareÁõ∏ÂÖ≥Êé•Âè£ÊåáÁöÑÊòØ‰ªÄ‰πàÔºüÂπ≥Â∏∏‰ºöËá™Â∑±‰ºöÁî®AwareÁõ∏ÂÖ≥Êé•Âè£ÂêóÔºüBeanÁîüÂëΩÂë®ÊúüËøô‰πàÈïøÊòØ‰∏∫‰ªÄ‰πàÔºü Êï∞ÊçÆÂ∫ì Áªô‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìË°®ÔºåID„ÄÅscore‰∏§‰∏™Â≠óÊÆµÂàÜÂà´‰ª£Ë°®Â≠¶ÁîüIDÂíåÊàêÁª©ÔºåÂÜôSQLËØ≠Âè•Ê±ÇID=ÔºüÁöÑÂ≠¶ÁîüÊéíÁ¨¨Âá†ÂêçÔºü ÂÅáËÆæÊòØInnoDBÔºåÁªô‰∏äËø∞SQLËØ≠Âè•Âä†Á¥¢ÂºïÊÄé‰πàÂä†Ôºü‰∏∫‰ªÄ‰πàËøôÊ†∑Âª∫Á´ãÔºüËÅöÈõÜÁ¥¢ÂºïÂíåÈùûËÅöÈõÜÁ¥¢ÂºïÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü MySQLÊï∞ÊçÆÂ∫ìÔºåÁªô‰∏Ä‰∏™Áî®Êà∑Ë°®Ê†ºÔºåID„ÄÅÁî®Êà∑Âêç„ÄÅÊÄßÂà´„ÄÅÁî®Êà∑‰ø°ÊÅØ‚Ä¶ÔºåÂÅáËÆæÁªèÂ∏∏ÂØπÊÄßÂà´Â≠óÊÆµËøõË°åÊü•ËØ¢ÔºåÈóÆÊÄé‰πàÂª∫Á´ãÁ¥¢ÂºïÔºü‰∏∫‰ªÄ‰πàÔºüÂÅáËÆæÁî®Êà∑ÂêçÈúÄË¶ÅÊòØÂîØ‰∏ÄÁöÑÔºåÈóÆÊÄé‰πàÂª∫Á¥¢ÂºïÔºü Ê∑ªÂä†Á¥¢ÂºïÁöÑSQLËØ≠Âè•ÔºüÁªô‰∏Ä‰∏™abc‰∏â‰∏™Â≠óÊÆµÁöÑÁ¥¢ÂºïÔºåwhere a=0 order by cËÉΩÁî®Âà∞Á¥¢ÂºïÂêóÔºüwhere a=0 and bÂ§ß‰∫é0 order by cËÉΩÁî®Âà∞Á¥¢ÂºïÂêóÔºüHashÁ¥¢ÂºïÂíåBÊ†ëÁ¥¢ÂºïÁöÑÂå∫Âà´ÔºüHashÁ¥¢ÂºïÊúâÂå∫Èó¥Êü•ËØ¢ÂêóÔºüÊúâÊ≤°ÊúâÁî®nosqlÔºü ÂÖ∂‰ªñ ‰ªãÁªç‰∏Ä‰∏ãËßâÂæóÂÅöÂæóÊúÄÂ•ΩÁöÑÈ°πÁõÆÔºüÁîª‰∏Ä‰∏ãÈ°πÁõÆÁöÑÊ°ÜÊû∂ÁªìÊûÑÂõæÔºüNginxÁî®Êù•ÂÅö‰ªÄ‰πàÔºüÈááÁî®‰∫Ü‰ªÄ‰πàË¥üËΩΩÂùáË°°Á≠ñÁï•Ôºü‰∏á‰∏ÄÊüê‰∏Ä‰∏™ÊúçÂä°Âô®ÊåÇÊéâÊÄé‰πàÂäûÔºüÔºà‰∏ÄËá¥ÊÄßhashÔºâÂ¶ÇÊûúÊ∑ªÂä†‰∏Ä‰∏™ËäÇÁÇπÂë¢Ôºü Âπ≥Â∏∏Áî®Âà∞Âì™‰∫õËÆæËÆ°Ê®°ÂºèÔºü‰ªãÁªç‰∏Ä‰∏ãÊ®°ÂºèÔºüÊ®°ÂºèÂíåË£ÖÈ•∞Âô®Ê®°ÂºèÂå∫Âà´Ôºü NIOÂíåBIOÂå∫Âà´ÔºüNIOÊÄé‰πàÂÜôÔºüÈòªÂ°ûÂíåÈùûÈòªÂ°ûÔºåÂêåÊ≠•ÂíåÂºÇÊ≠•Âå∫Âà´Ôºü CVTEÊï∞ÊçÆÁªìÊûÑÊìç‰ΩúÁ≥ªÁªüËÆ°ÁÆóÊú∫ÁΩëÁªúÁÆóÊ≥ïjavaÂü∫Á°Ä Java‰∏∫‰ªÄ‰πàËØ¥ÊòØÈù¢ÂêëÂØπË±°ÁöÑÔºü avaÁöÑ‰∏âÂ§ßÁâπÊÄßÔºüÂ¶ÇÊûúËØ¥Êúâ‰∏§‰∏™ÊñπÊ≥ïÔºåÂêåÂêçÂêåÂèÇÊï∞‰ΩÜ‰∏çÂêåËøîÂõûÂÄºÔºåÈóÆÊòØÈáçËΩΩÂêóÔºü Âπ≥Â∏∏Áî®Âà∞Âì™‰∫õÈõÜÂêàÁ±ªÔºüArrayListÂíåLinkedListÂå∫Âà´ÔºüHashMapÂÜÖÈÉ®Êï∞ÊçÆÁªìÊûÑÔºüConcurrentHashMapÂàÜÊÆµÈîÅÔºü Â§öÁ∫øÁ®ã VolatileÂÖ≥ÈîÆËØçÔºüÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂêóÔºü Â¶Ç‰ΩïÂÆûÁé∞synchronized‰∏ÄÊ†∑ÁöÑÊïàÊûúÔºü JVMÊ∂àÊÅØ‰∏≠Èó¥‰ª∂springÂÖ®ÂÆ∂Ê°∂ Spring CloudÁî®Âà∞‰ªÄ‰πà‰∏úË•øÔºüÂ¶Ç‰ΩïÂÆûÁé∞Ë¥üËΩΩÂùáË°°ÔºüÊúçÂä°ÊåÇ‰∫ÜÊ≥®ÂÜå‰∏≠ÂøÉÊÄé‰πàÂà§Êñ≠ SpringÁöÑ‰ºòÁÇπÔºüSpring AOPÂÆûÁé∞ÂéüÁêÜÔºüAOPÂ∫îÁî®Âú∫ÊôØÔºüÊã¶Êà™Âô®Áî®Êù•ÂÅö‰ªÄ‰πà‰∏öÂä°Ôºü Êï∞ÊçÆÂ∫ì MySQLÊï∞ÊçÆÂ∫ìÂºïÊìéÂíåÂ∫îÁî®Âú∫ÊôØ MySQLË°åÈîÅÊòØÂê¶‰ºöÊúâÊ≠ªÈîÅÁöÑÊÉÖÂÜµÔºü MySQL‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ MySQLÂπ≥Â∏∏ÊúâÁ¥¢Âºï‰ºòÂåñÂêóÔºüÊÄé‰πàÂéªÁü•ÈÅì‰∏Ä‰∏™SQLËØ≠Âè•ÈúÄ‰∏çÈúÄË¶Å‰ºòÂåñÔºü‰∏Ä‰∏™Ë°®ÔºåÂª∫Á´ã‰∫ÜÁ¥¢ÂºïÔºàBÔºåAÔºâÔºåÈóÆwhere A=1 and B=2Á¥¢ÂºïÊòØÂê¶ËÉΩÂ§üÁîüÊïàÔºü ‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅ‰∫ÜËß£ÂêóÔºüJDK‰∏≠Ê∂âÂèäÂà∞‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅÁöÑÂÜÖÂÆπ ÂÖ∂‰ªñ NginxË¥üËΩΩÂùáË°°Á≠ñÁï•Ôºü ip_hashÁöÑ‰ºòÁº∫ÁÇπÔºü NginxÂíåÂÖ∂‰ªñË¥üËΩΩÂùáË°°Ê°ÜÊû∂ÂØπÊØîËøáÂêóÔºü TomcatÈõÜÁæ§SessionÂÖ±‰∫´ÈóÆÈ¢òÔºü MySQLÈááÁî®‰∫Ü‰ªÄ‰πàÂ≠òÂÇ®ÂºïÊìéÔºå‰∏∫‰ªÄ‰πàÔºü ÂàÜÂ∏ÉÂºèÈîÅÔºü]]></content>
      <tags>
        <tag>Èù¢Áªè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊªëÂä®Á™óÂè£ÊäÄÂ∑ßÊ±áÊÄª]]></title>
    <url>%2F2019%2F12%2F24%2F%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%8A%80%E5%B7%A7%E6%B1%87%E6%80%BB.html</url>
    <content type="text"><![CDATA[Êú¨ÊñáËØ¶Ëß£„ÄåÊªëÂä®Á™óÂè£„ÄçËøôÁßçÈ´òÁ∫ßÂèåÊåáÈíàÊäÄÂ∑ßÁöÑÁÆóÊ≥ïÊ°ÜÊû∂ÔºåÂ∏¶‰Ω†ÁßíÊùÄÂá†ÈÅìÈ´òÈöæÂ∫¶ÁöÑÂ≠êÂ≠óÁ¨¶‰∏≤ÂåπÈÖçÈóÆÈ¢ò„ÄÇ LeetCode ‰∏äËá≥Â∞ëÊúâ 9 ÈÅìÈ¢òÁõÆÂèØ‰ª•Áî®Ê≠§ÊñπÊ≥ïÈ´òÊïàËß£ÂÜ≥„ÄÇ‰ΩÜÊòØÊúâÂá†ÈÅìÊòØ VIP È¢òÁõÆÔºåÊúâÂá†ÈÅìÈ¢òÁõÆËôΩ‰∏çÈöæ‰ΩÜÂ§™Â§çÊùÇÔºåÊâÄ‰ª•Êú¨ÊñáÂè™ÈÄâÊã©ÁÇπËµûÊúÄÈ´òÔºåËæÉ‰∏∫ÁªèÂÖ∏ÁöÑÔºåÊúÄËÉΩÂ§üËÆ≤ÊòéÁôΩÁöÑ‰∏âÈÅìÈ¢òÊù•ËÆ≤Ëß£„ÄÇÁ¨¨‰∏ÄÈ¢ò‰∏∫‰∫ÜËÆ©ËØªËÄÖÊéåÊè°ÁÆóÊ≥ïÊ®°ÊùøÔºåÁØáÂπÖÁõ∏ÂØπÈïøÔºåÂêé‰∏§È¢òÂ∞±Âü∫Êú¨ÁßíÊùÄ‰∫Ü„ÄÇ Êú¨Êñá‰ª£Á†Å‰∏∫ C++ ÂÆûÁé∞Ôºå‰∏ç‰ºöÁî®Âà∞‰ªÄ‰πàÁºñÁ®ãÊñπÈù¢ÁöÑÂ•áÊäÄÊ∑´Â∑ßÔºå‰ΩÜÊòØËøòÊòØÁÆÄÂçï‰ªãÁªç‰∏Ä‰∏ã‰∏Ä‰∫õÁî®Âà∞ÁöÑÊï∞ÊçÆÁªìÊûÑÔºå‰ª•ÂÖçÊúâÁöÑËØªËÄÖÂõ†‰∏∫ËØ≠Ë®ÄÁöÑÁªÜËäÇÈóÆÈ¢òÈòªÁ¢çÂØπÁÆóÊ≥ïÊÄùÊÉ≥ÁöÑÁêÜËß£Ôºö unordered_map Â∞±ÊòØÂìàÂ∏åË°®ÔºàÂ≠óÂÖ∏ÔºâÔºåÂÆÉÁöÑ‰∏Ä‰∏™ÊñπÊ≥ï count(key) Áõ∏ÂΩì‰∫é containsKey(key) ÂèØ‰ª•Âà§Êñ≠ÈîÆ key ÊòØÂê¶Â≠òÂú®„ÄÇ ÂèØ‰ª•‰ΩøÁî®ÊñπÊã¨Âè∑ËÆøÈóÆÈîÆÂØπÂ∫îÁöÑÂÄº map[key]„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂ¶ÇÊûúËØ• key ‰∏çÂ≠òÂú®ÔºåC++ ‰ºöËá™Âä®ÂàõÂª∫Ëøô‰∏™ keyÔºåÂπ∂Êää map[key] ËµãÂÄº‰∏∫ 0„ÄÇ ÊâÄ‰ª•‰ª£Á†Å‰∏≠Â§öÊ¨°Âá∫Áé∞ÁöÑ map[key]++ Áõ∏ÂΩì‰∫é Java ÁöÑ map.put(key, map.getOrDefault(key, 0) + 1)„ÄÇ Êú¨ÊñáÂ§ßÈÉ®ÂàÜ‰ª£Á†ÅÈÉΩÊòØÂõæÁâáÂΩ¢ÂºèÔºåÂèØ‰ª•ÁÇπÂºÄÊîæÂ§ßÔºåÊõ¥ÈáçË¶ÅÁöÑÊòØÂèØ‰ª•Â∑¶Âè≥ÊªëÂä®Êñπ‰æøÂØπÊØî‰ª£Á†Å„ÄÇ‰∏ãÈù¢ËøõÂÖ•Ê≠£È¢ò„ÄÇ ‰∏Ä„ÄÅÊúÄÂ∞èË¶ÜÁõñÂ≠ê‰∏≤ È¢òÁõÆÈìæÊé• È¢òÁõÆ‰∏çÈöæÁêÜËß£ÔºåÂ∞±ÊòØËØ¥Ë¶ÅÂú® S(source) ‰∏≠ÊâæÂà∞ÂåÖÂê´ T(target) ‰∏≠ÂÖ®ÈÉ®Â≠óÊØçÁöÑ‰∏Ä‰∏™Â≠ê‰∏≤ÔºåÈ°∫Â∫èÊó†ÊâÄË∞ìÔºå‰ΩÜËøô‰∏™Â≠ê‰∏≤‰∏ÄÂÆöÊòØÊâÄÊúâÂèØËÉΩÂ≠ê‰∏≤‰∏≠ÊúÄÁü≠ÁöÑ„ÄÇ Â¶ÇÊûúÊàë‰ª¨‰ΩøÁî®Êö¥ÂäõËß£Ê≥ïÔºå‰ª£Á†ÅÂ§ßÊ¶ÇÊòØËøôÊ†∑ÁöÑÔºö 1234for (int i = 0; i &lt; s.size(); i++) for (int j = i + 1; j &lt; s.size(); j++) if s[i:j] ÂåÖÂê´ t ÁöÑÊâÄÊúâÂ≠óÊØç: Êõ¥Êñ∞Á≠îÊ°à ÊÄùË∑ØÂæàÁõ¥Êé•ÂêßÔºå‰ΩÜÊòØÊòæÁÑ∂ÔºåËøô‰∏™ÁÆóÊ≥ïÁöÑÂ§çÊùÇÂ∫¶ËÇØÂÆöÂ§ß‰∫é O(N^2) ‰∫ÜÔºå‰∏çÂ•Ω„ÄÇ ÊªëÂä®Á™óÂè£ÁÆóÊ≥ïÁöÑÊÄùË∑ØÊòØËøôÊ†∑Ôºö 1„ÄÅÊàë‰ª¨Âú®Â≠óÁ¨¶‰∏≤ S ‰∏≠‰ΩøÁî®ÂèåÊåáÈíà‰∏≠ÁöÑÂ∑¶Âè≥ÊåáÈíàÊäÄÂ∑ßÔºåÂàùÂßãÂåñ left = right = 0ÔºåÊääÁ¥¢ÂºïÈó≠Âå∫Èó¥ [left, right] Áß∞‰∏∫‰∏Ä‰∏™„ÄåÁ™óÂè£„Äç„ÄÇ 2„ÄÅÊàë‰ª¨ÂÖà‰∏çÊñ≠Âú∞Â¢ûÂä† right ÊåáÈíàÊâ©Â§ßÁ™óÂè£ [left, right]ÔºåÁõ¥Âà∞Á™óÂè£‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤Á¨¶ÂêàË¶ÅÊ±ÇÔºàÂåÖÂê´‰∫Ü T ‰∏≠ÁöÑÊâÄÊúâÂ≠óÁ¨¶Ôºâ„ÄÇ 3„ÄÅÊ≠§Êó∂ÔºåÊàë‰ª¨ÂÅúÊ≠¢Â¢ûÂä† rightÔºåËΩ¨ËÄå‰∏çÊñ≠Â¢ûÂä† left ÊåáÈíàÁº©Â∞èÁ™óÂè£ [left, right]ÔºåÁõ¥Âà∞Á™óÂè£‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤‰∏çÂÜçÁ¨¶ÂêàË¶ÅÊ±ÇÔºà‰∏çÂåÖÂê´ T ‰∏≠ÁöÑÊâÄÊúâÂ≠óÁ¨¶‰∫ÜÔºâ„ÄÇÂêåÊó∂ÔºåÊØèÊ¨°Â¢ûÂä† leftÔºåÊàë‰ª¨ÈÉΩË¶ÅÊõ¥Êñ∞‰∏ÄËΩÆÁªìÊûú„ÄÇ 4„ÄÅÈáçÂ§çÁ¨¨ 2 ÂíåÁ¨¨ 3 Ê≠•ÔºåÁõ¥Âà∞ right Âà∞ËææÂ≠óÁ¨¶‰∏≤ S ÁöÑÂ∞ΩÂ§¥„ÄÇ Ëøô‰∏™ÊÄùË∑ØÂÖ∂ÂÆû‰πü‰∏çÈöæÔºåÁ¨¨ 2 Ê≠•Áõ∏ÂΩì‰∫éÂú®ÂØªÊâæ‰∏Ä‰∏™„ÄåÂèØË°åËß£„ÄçÔºåÁÑ∂ÂêéÁ¨¨ 3 Ê≠•Âú®‰ºòÂåñËøô‰∏™„ÄåÂèØË°åËß£„ÄçÔºåÊúÄÁªàÊâæÂà∞ÊúÄ‰ºòËß£„ÄÇÂ∑¶Âè≥ÊåáÈíàËΩÆÊµÅÂâçËøõÔºåÁ™óÂè£Â§ßÂ∞èÂ¢ûÂ¢ûÂáèÂáèÔºåÁ™óÂè£‰∏çÊñ≠ÂêëÂè≥ÊªëÂä®„ÄÇ ‰∏ãÈù¢ÁîªÂõæÁêÜËß£‰∏Ä‰∏ãÔºåneeds Âíå window Áõ∏ÂΩì‰∫éËÆ°Êï∞Âô®ÔºåÂàÜÂà´ËÆ∞ÂΩï T ‰∏≠Â≠óÁ¨¶Âá∫Áé∞Ê¨°Êï∞ÂíåÁ™óÂè£‰∏≠ÁöÑÁõ∏Â∫îÂ≠óÁ¨¶ÁöÑÂá∫Áé∞Ê¨°Êï∞„ÄÇ ÂàùÂßãÁä∂ÊÄÅÔºö 0 Â¢ûÂä† rightÔºåÁõ¥Âà∞Á™óÂè£ [left, right] ÂåÖÂê´‰∫Ü T ‰∏≠ÊâÄÊúâÂ≠óÁ¨¶Ôºö 0 Áé∞Âú®ÂºÄÂßãÂ¢ûÂä† leftÔºåÁº©Â∞èÁ™óÂè£ [left, right]„ÄÇ 0 Áõ¥Âà∞Á™óÂè£‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤‰∏çÂÜçÁ¨¶ÂêàË¶ÅÊ±ÇÔºåleft ‰∏çÂÜçÁªßÁª≠ÁßªÂä®„ÄÇ 0 ‰πãÂêéÈáçÂ§ç‰∏äËø∞ËøáÁ®ãÔºåÂÖàÁßªÂä® rightÔºåÂÜçÁßªÂä® left‚Ä¶‚Ä¶ Áõ¥Âà∞ right ÊåáÈíàÂà∞ËææÂ≠óÁ¨¶‰∏≤ S ÁöÑÊú´Á´ØÔºåÁÆóÊ≥ïÁªìÊùü„ÄÇ Â¶ÇÊûú‰Ω†ËÉΩÂ§üÁêÜËß£‰∏äËø∞ËøáÁ®ãÔºåÊÅ≠ÂñúÔºå‰Ω†Â∑≤ÁªèÂÆåÂÖ®ÊéåÊè°‰∫ÜÊªëÂä®Á™óÂè£ÁÆóÊ≥ïÊÄùÊÉ≥„ÄÇËá≥‰∫éÂ¶Ç‰ΩïÂÖ∑‰ΩìÂà∞ÈóÆÈ¢òÔºåÂ¶Ç‰ΩïÂæóÂá∫Ê≠§È¢òÁöÑÁ≠îÊ°àÔºåÈÉΩÊòØÁºñÁ®ãÈóÆÈ¢òÔºåÁ≠â‰ºöÊèê‰æõ‰∏ÄÂ•óÊ®°ÊùøÔºåÁêÜËß£‰∏Ä‰∏ãÂ∞±‰ºö‰∫Ü„ÄÇ ‰∏äËø∞ËøáÁ®ãÂèØ‰ª•ÁÆÄÂçïÂú∞ÂÜôÂá∫Â¶Ç‰∏ã‰º™Á†ÅÊ°ÜÊû∂Ôºö 123456789101112131415161718string s, t;// Âú® s ‰∏≠ÂØªÊâæ t ÁöÑ„ÄåÊúÄÂ∞èË¶ÜÁõñÂ≠ê‰∏≤„Äçint left = 0, right = 0;string res = s;while(right &lt; s.size()) &#123; window.add(s[right]); right++; // Â¶ÇÊûúÁ¨¶ÂêàË¶ÅÊ±ÇÔºåÁßªÂä® left Áº©Â∞èÁ™óÂè£ while (window Á¨¶ÂêàË¶ÅÊ±Ç) &#123; // Â¶ÇÊûúËøô‰∏™Á™óÂè£ÁöÑÂ≠ê‰∏≤Êõ¥Áü≠ÔºåÂàôÊõ¥Êñ∞ res res = minLen(res, window); window.remove(s[left]); left++; &#125;&#125;return res; Â¶ÇÊûú‰∏äËø∞‰ª£Á†Å‰Ω†‰πüËÉΩÂ§üÁêÜËß£ÔºåÈÇ£‰πà‰Ω†Á¶ªËß£È¢òÊõ¥Ëøë‰∫Ü‰∏ÄÊ≠•„ÄÇÁé∞Âú®Â∞±Ââ©‰∏ã‰∏Ä‰∏™ÊØîËæÉÊ£òÊâãÁöÑÈóÆÈ¢òÔºöÂ¶Ç‰ΩïÂà§Êñ≠ window Âç≥Â≠ê‰∏≤ s[left‚Ä¶right] ÊòØÂê¶Á¨¶ÂêàË¶ÅÊ±ÇÔºåÊòØÂê¶ÂåÖÂê´ t ÁöÑÊâÄÊúâÂ≠óÁ¨¶Âë¢Ôºü ÂèØ‰ª•Áî®‰∏§‰∏™ÂìàÂ∏åË°®ÂΩì‰ΩúËÆ°Êï∞Âô®Ëß£ÂÜ≥„ÄÇÁî®‰∏Ä‰∏™ÂìàÂ∏åË°® needs ËÆ∞ÂΩïÂ≠óÁ¨¶‰∏≤ t ‰∏≠ÂåÖÂê´ÁöÑÂ≠óÁ¨¶ÂèäÂá∫Áé∞Ê¨°Êï∞ÔºåÁî®Âè¶‰∏Ä‰∏™ÂìàÂ∏åË°® window ËÆ∞ÂΩïÂΩìÂâç„ÄåÁ™óÂè£„Äç‰∏≠ÂåÖÂê´ÁöÑÂ≠óÁ¨¶ÂèäÂá∫Áé∞ÁöÑÊ¨°Êï∞ÔºåÂ¶ÇÊûú window ÂåÖÂê´ÊâÄÊúâ needs ‰∏≠ÁöÑÈîÆÔºå‰∏îËøô‰∫õÈîÆÂØπÂ∫îÁöÑÂÄºÈÉΩÂ§ß‰∫éÁ≠â‰∫é needs ‰∏≠ÁöÑÂÄºÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•Áü•ÈÅìÂΩìÂâç„ÄåÁ™óÂè£„ÄçÁ¨¶ÂêàË¶ÅÊ±Ç‰∫ÜÔºåÂèØ‰ª•ÂºÄÂßãÁßªÂä® left ÊåáÈíà‰∫Ü„ÄÇ Áé∞Âú®Â∞Ü‰∏äÈù¢ÁöÑÊ°ÜÊû∂ÁªßÁª≠ÁªÜÂåñÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142string s, t;// Âú® s ‰∏≠ÂØªÊâæ t ÁöÑ„ÄåÊúÄÂ∞èË¶ÜÁõñÂ≠ê‰∏≤„Äçint left = 0, right = 0;string res = s;// Áõ∏ÂΩì‰∫é‰∏§‰∏™ËÆ°Êï∞Âô®unordered_map&lt;char, int&gt; window;unordered_map&lt;char, int&gt; needs;for (char c : t) needs[c]++;// ËÆ∞ÂΩï window ‰∏≠Â∑≤ÁªèÊúâÂ§öÂ∞ëÂ≠óÁ¨¶Á¨¶ÂêàË¶ÅÊ±Ç‰∫Üint match = 0; while (right &lt; s.size()) &#123; char c1 = s[right]; if (needs.count(c1)) &#123; window[c1]++; // Âä†ÂÖ• window if (window[c1] == needs[c1]) // Â≠óÁ¨¶ c1 ÁöÑÂá∫Áé∞Ê¨°Êï∞Á¨¶ÂêàË¶ÅÊ±Ç‰∫Ü match++; &#125; right++; // window ‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤Â∑≤Á¨¶Âêà needs ÁöÑË¶ÅÊ±Ç‰∫Ü while (match == needs.size()) &#123; // Êõ¥Êñ∞ÁªìÊûú res res = minLen(res, window); char c2 = s[left]; if (needs.count(c2)) &#123; window[c2]--; // ÁßªÂá∫ window if (window[c2] &lt; needs[c2]) // Â≠óÁ¨¶ c2 Âá∫Áé∞Ê¨°Êï∞‰∏çÂÜçÁ¨¶ÂêàË¶ÅÊ±Ç match--; &#125; left++; &#125;&#125;return res; ‰∏äËø∞‰ª£Á†ÅÂ∑≤ÁªèÂÖ∑Â§áÂÆåÊï¥ÁöÑÈÄªËæë‰∫ÜÔºåÂè™Êúâ‰∏ÄÂ§Ñ‰º™Á†ÅÔºåÂç≥Êõ¥Êñ∞ res ÁöÑÂú∞ÊñπÔºå‰∏çËøáËøô‰∏™ÈóÆÈ¢òÂ§™Â•ΩËß£ÂÜ≥‰∫ÜÔºåÁõ¥Êé•ÁúãËß£Ê≥ïÂêßÔºÅ 123456789101112131415161718192021222324252627282930313233343536373839404142string minWindow(string s, string t) &#123; // ËÆ∞ÂΩïÊúÄÁü≠Â≠ê‰∏≤ÁöÑÂºÄÂßã‰ΩçÁΩÆÂíåÈïøÂ∫¶ int start = 0, minLen = INT_MAX; int left = 0, right = 0; unordered_map&lt;char, int&gt; window; unordered_map&lt;char, int&gt; needs; for (char c : t) needs[c]++; int match = 0; while (right &lt; s.size()) &#123; char c1 = s[right]; if (needs.count(c1)) &#123; window[c1]++; if (window[c1] == needs[c1]) match++; &#125; right++; while (match == needs.size()) &#123; if (right - left &lt; minLen) &#123; // Êõ¥Êñ∞ÊúÄÂ∞èÂ≠ê‰∏≤ÁöÑ‰ΩçÁΩÆÂíåÈïøÂ∫¶ start = left; minLen = right - left; &#125; char c2 = s[left]; if (needs.count(c2)) &#123; window[c2]--; if (window[c2] &lt; needs[c2]) match--; &#125; left++; &#125; &#125; return minLen == INT_MAX ? "" : s.substr(start, minLen);&#125; Â¶ÇÊûúÁõ¥Êé•Áî©Áªô‰Ω†Ëøô‰πà‰∏ÄÂ§ßÊÆµ‰ª£Á†ÅÔºåÊàëÊÉ≥‰Ω†ÁöÑÂøÉÊÄÅÊòØÁàÜÁÇ∏ÁöÑÔºå‰ΩÜÊòØÈÄöËøá‰πãÂâçÁöÑÊ≠•Ê≠•Ë∑üËøõÔºå‰Ω†ÊòØÂê¶ËÉΩÂ§üÁêÜËß£Ëøô‰∏™ÁÆóÊ≥ïÁöÑÂÜÖÂú®ÈÄªËæëÂë¢Ôºü‰Ω†ÊòØÂê¶ËÉΩÊ∏ÖÊô∞ÁúãÂá∫ËØ•ÁÆóÊ≥ïÁöÑÁªìÊûÑÂë¢Ôºü Ëøô‰∏™ÁÆóÊ≥ïÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØ O(M + N)ÔºåM Âíå N ÂàÜÂà´ÊòØÂ≠óÁ¨¶‰∏≤ S Âíå T ÁöÑÈïøÂ∫¶„ÄÇÂõ†‰∏∫Êàë‰ª¨ÂÖàÁî® for Âæ™ÁéØÈÅçÂéÜ‰∫ÜÂ≠óÁ¨¶‰∏≤ T Êù•ÂàùÂßãÂåñ needsÔºåÊó∂Èó¥ O(N)Ôºå‰πãÂêéÁöÑ‰∏§‰∏™ while Âæ™ÁéØÊúÄÂ§öÊâßË°å 2M Ê¨°ÔºåÊó∂Èó¥ O(M)„ÄÇ ËØªËÄÖ‰πüËÆ∏ËÆ§‰∏∫ÂµåÂ•óÁöÑ while Âæ™ÁéØÂ§çÊùÇÂ∫¶Â∫îËØ•ÊòØÂπ≥ÊñπÁ∫ßÔºå‰ΩÜÊòØ‰Ω†ËøôÊ†∑ÊÉ≥Ôºåwhile ÊâßË°åÁöÑÊ¨°Êï∞Â∞±ÊòØÂèåÊåáÈíà left Âíå right Ëµ∞ÁöÑÊÄªË∑ØÁ®ãÔºåÊúÄÂ§öÊòØ 2M Âòõ„ÄÇ ‰∫å„ÄÅÊâæÂà∞Â≠óÁ¨¶‰∏≤‰∏≠ÊâÄÊúâÂ≠óÊØçÂºÇ‰ΩçËØç È¢òÁõÆÈìæÊé• ËøôÈÅìÈ¢òÁöÑÈöæÂ∫¶ÊòØ EasyÔºå‰ΩÜÊòØËØÑËÆ∫Âå∫ÁÇπËµûÊúÄÂ§öÁöÑ‰∏ÄÊù°ÊòØËøôÊ†∑Ôºö 1How can this problem be marked as easy??? ÂÆûÈôÖ‰∏äÔºåËøô‰∏™ Easy ÊòØÂ±û‰∫é‰∫ÜËß£ÂèåÊåáÈíàÊäÄÂ∑ßÁöÑ‰∫∫ÁöÑÔºåÂè™Ë¶ÅÊää‰∏ä‰∏ÄÈÅìÈ¢òÁöÑ‰ª£Á†ÅÊîπ‰∏≠Êõ¥Êñ∞ res ÈÉ®ÂàÜÁöÑ‰ª£Á†ÅÁ®çÂä†‰øÆÊîπÂ∞±Êàê‰∫ÜËøôÈÅìÈ¢òÁöÑËß£Ôºö 12345678910111213141516171819202122232425262728293031323334353637vector&lt;int&gt; findAnagrams(string s, string t) &#123; // Áî®Êï∞ÁªÑËÆ∞ÂΩïÁ≠îÊ°à vector&lt;int&gt; res; int left = 0, right = 0; unordered_map&lt;char, int&gt; needs; unordered_map&lt;char, int&gt; window; for (char c : t) needs[c]++; int match = 0; while (right &lt; s.size()) &#123; char c1 = s[right]; if (needs.count(c1)) &#123; window[c1]++; if (window[c1] == needs[c1]) match++; &#125; right++; while (match == needs.size()) &#123; // Â¶ÇÊûú window ÁöÑÂ§ßÂ∞èÂêàÈÄÇ // Â∞±ÊääËµ∑ÂßãÁ¥¢Âºï left Âä†ÂÖ•ÁªìÊûú if (right - left == t.size()) &#123; res.push_back(left); &#125; char c2 = s[left]; if (needs.count(c2)) &#123; window[c2]--; if (window[c2] &lt; needs[c2]) match--; &#125; left++; &#125; &#125; return res;&#125; Âõ†‰∏∫ËøôÈÅìÈ¢òÂíå‰∏ä‰∏ÄÈÅìÁöÑÂú∫ÊôØÁ±ª‰ººÔºå‰πüÈúÄË¶Å window ‰∏≠ÂåÖÂê´‰∏≤ t ÁöÑÊâÄÊúâÂ≠óÁ¨¶Ôºå‰ΩÜ‰∏ä‰∏ÄÈÅìÈ¢òË¶ÅÊâæÈïøÂ∫¶ÊúÄÁü≠ÁöÑÂ≠ê‰∏≤ÔºåËøôÈÅìÈ¢òË¶ÅÊâæÈïøÂ∫¶Áõ∏ÂêåÁöÑÂ≠ê‰∏≤Ôºå‰πüÂ∞±ÊòØ„ÄåÂ≠óÊØçÂºÇ‰ΩçËØç„ÄçÂòõ„ÄÇ ‰∏â„ÄÅÊó†ÈáçÂ§çÂ≠óÁ¨¶ÁöÑÊúÄÈïøÂ≠ê‰∏≤ È¢òÁõÆÈìæÊé• ÈÅáÂà∞Â≠ê‰∏≤ÈóÆÈ¢òÔºåÈ¶ñÂÖàÊÉ≥Âà∞ÁöÑÂ∞±ÊòØÊªëÂä®Á™óÂè£ÊäÄÂ∑ß„ÄÇ Á±ª‰ºº‰πãÂâçÁöÑÊÄùË∑ØÔºå‰ΩøÁî® window ‰Ωú‰∏∫ËÆ°Êï∞Âô®ËÆ∞ÂΩïÁ™óÂè£‰∏≠ÁöÑÂ≠óÁ¨¶Âá∫Áé∞Ê¨°Êï∞ÔºåÁÑ∂ÂêéÂÖàÂêëÂè≥ÁßªÂä® rightÔºåÂΩì window ‰∏≠Âá∫Áé∞ÈáçÂ§çÂ≠óÁ¨¶Êó∂ÔºåÂºÄÂßãÁßªÂä® left Áº©Â∞èÁ™óÂè£ÔºåÂ¶ÇÊ≠§ÂæÄÂ§çÔºö 123456789101112131415161718192021int lengthOfLongestSubstring(string s) &#123; int left = 0, right = 0; unordered_map&lt;char, int&gt; window; int res = 0; // ËÆ∞ÂΩïÊúÄÈïøÈïøÂ∫¶ while (right &lt; s.size()) &#123; char c1 = s[right]; window[c1]++; right++; // Â¶ÇÊûú window ‰∏≠Âá∫Áé∞ÈáçÂ§çÂ≠óÁ¨¶ // ÂºÄÂßãÁßªÂä® left Áº©Â∞èÁ™óÂè£ while (window[c1] &gt; 1) &#123; char c2 = s[left]; window[c2]--; left++; &#125; res = max(res, right - left); &#125; return res;&#125; ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂõ†‰∏∫Êàë‰ª¨Ë¶ÅÊ±ÇÁöÑÊòØÊúÄÈïøÂ≠ê‰∏≤ÔºåÊâÄ‰ª•ÈúÄË¶ÅÂú®ÊØèÊ¨°ÁßªÂä® right Â¢ûÂ§ßÁ™óÂè£Êó∂Êõ¥Êñ∞ resÔºåËÄå‰∏çÊòØÂÉè‰πãÂâçÁöÑÈ¢òÁõÆÂú®ÁßªÂä® left Áº©Â∞èÁ™óÂè£Êó∂Êõ¥Êñ∞ res„ÄÇ ÊúÄÂêéÊÄªÁªìÈÄöËøá‰∏äÈù¢‰∏âÈÅìÈ¢òÔºåÊàë‰ª¨ÂèØ‰ª•ÊÄªÁªìÂá∫ÊªëÂä®Á™óÂè£ÁÆóÊ≥ïÁöÑÊäΩË±°ÊÄùÊÉ≥Ôºö 12345678910111213int left = 0, right = 0;while (right &lt; s.size()) &#123; window.add(s[right]); right++; while (valid) &#123; window.remove(s[left]); left++; &#125;&#125; ÂÖ∂‰∏≠ window ÁöÑÊï∞ÊçÆÁ±ªÂûãÂèØ‰ª•ËßÜÂÖ∑‰ΩìÊÉÖÂÜµËÄåÂÆöÔºåÊØîÂ¶Ç‰∏äËø∞È¢òÁõÆÈÉΩ‰ΩøÁî®ÂìàÂ∏åË°®ÂÖÖÂΩìËÆ°Êï∞Âô®ÔºåÂΩìÁÑ∂‰Ω†‰πüÂèØ‰ª•Áî®‰∏Ä‰∏™Êï∞ÁªÑÂÆûÁé∞ÂêåÊ†∑ÊïàÊûúÔºåÂõ†‰∏∫Êàë‰ª¨Âè™Â§ÑÁêÜËã±ÊñáÂ≠óÊØç„ÄÇ Á®çÂæÆÈ∫ªÁÉ¶ÁöÑÂú∞ÊñπÂ∞±ÊòØËøô‰∏™ valid Êù°‰ª∂Ôºå‰∏∫‰∫ÜÂÆûÁé∞Ëøô‰∏™Êù°‰ª∂ÁöÑÂÆûÊó∂Êõ¥Êñ∞ÔºåÊàë‰ª¨ÂèØËÉΩ‰ºöÂÜôÂæàÂ§ö‰ª£Á†Å„ÄÇÊØîÂ¶ÇÂâç‰∏§ÈÅìÈ¢òÔºåÁúãËµ∑Êù•Ëß£Ê≥ïÁØáÂπÖÈÇ£‰πàÈïøÔºåÂÆûÈôÖ‰∏äÊÄùÊÉ≥ËøòÊòØÂæàÁÆÄÂçïÔºåÂè™ÊòØÂ§ßÂ§öÊï∞‰ª£Á†ÅÈÉΩÂú®Â§ÑÁêÜËøô‰∏™ÈóÆÈ¢òËÄåÂ∑≤„ÄÇ]]></content>
      <tags>
        <tag>java</tag>
        <tag>ÂèåÊåáÈíà</tag>
        <tag>ÊªëÂä®Á™óÂè£</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂèåÊåáÈíàÊäÄÂ∑ßÊ±áÊÄª]]></title>
    <url>%2F2019%2F12%2F24%2F%E5%8F%8C%E6%8C%87%E9%92%88%E6%8A%80%E5%B7%A7%E6%B1%87%E6%80%BB.html</url>
    <content type="text"><![CDATA[ÊàëÊääÂèåÊåáÈíàÊäÄÂ∑ßÂÜçÂàÜ‰∏∫‰∏§Á±ªÔºå‰∏ÄÁ±ªÊòØ„ÄåÂø´ÊÖ¢ÊåáÈíà„ÄçÔºå‰∏ÄÁ±ªÊòØ„ÄåÂ∑¶Âè≥ÊåáÈíà„Äç„ÄÇÂâçËÄÖËß£ÂÜ≥‰∏ªË¶ÅËß£ÂÜ≥ÈìæË°®‰∏≠ÁöÑÈóÆÈ¢òÔºåÊØîÂ¶ÇÂÖ∏ÂûãÁöÑÂà§ÂÆöÈìæË°®‰∏≠ÊòØÂê¶ÂåÖÂê´ÁéØÔºõÂêéËÄÖ‰∏ªË¶ÅËß£ÂÜ≥Êï∞ÁªÑÔºàÊàñËÄÖÂ≠óÁ¨¶‰∏≤Ôºâ‰∏≠ÁöÑÈóÆÈ¢òÔºåÊØîÂ¶Ç‰∫åÂàÜÊü•Êâæ„ÄÇ ‰∏Ä„ÄÅÂø´ÊÖ¢ÊåáÈíàÁöÑÂ∏∏ËßÅÁÆóÊ≥ïÂø´ÊÖ¢ÊåáÈíà‰∏ÄËà¨ÈÉΩÂàùÂßãÂåñÊåáÂêëÈìæË°®ÁöÑÂ§¥ÁªìÁÇπ headÔºåÂâçËøõÊó∂Âø´ÊåáÈíà fast Âú®ÂâçÔºåÊÖ¢ÊåáÈíà slow Âú®ÂêéÔºåÂ∑ßÂ¶ôËß£ÂÜ≥‰∏Ä‰∫õÈìæË°®‰∏≠ÁöÑÈóÆÈ¢ò„ÄÇ 1„ÄÅÂà§ÂÆöÈìæË°®‰∏≠ÊòØÂê¶Âê´ÊúâÁéØ ËøôÂ∫îËØ•Â±û‰∫éÈìæË°®ÊúÄÂü∫Êú¨ÁöÑÊìç‰Ωú‰∫ÜÔºåÂ¶ÇÊûúËØªËÄÖÂ∑≤ÁªèÁü•ÈÅìËøô‰∏™ÊäÄÂ∑ßÔºåÂèØ‰ª•Ë∑≥Ëøá„ÄÇ ÂçïÈìæË°®ÁöÑÁâπÁÇπÊòØÊØè‰∏™ËäÇÁÇπÂè™Áü•ÈÅì‰∏ã‰∏Ä‰∏™ËäÇÁÇπÔºåÊâÄ‰ª•‰∏Ä‰∏™ÊåáÈíàÁöÑËØùÊó†Ê≥ïÂà§Êñ≠ÈìæË°®‰∏≠ÊòØÂê¶Âê´ÊúâÁéØÁöÑ„ÄÇ Â¶ÇÊûúÈìæË°®‰∏≠‰∏çÂê´ÁéØÔºåÈÇ£‰πàËøô‰∏™ÊåáÈíàÊúÄÁªà‰ºöÈÅáÂà∞Á©∫ÊåáÈíà null Ë°®Á§∫ÈìæË°®Âà∞Â§¥‰∫ÜÔºåËøôËøòÂ•ΩËØ¥ÔºåÂèØ‰ª•Âà§Êñ≠ËØ•ÈìæË°®‰∏çÂê´ÁéØ„ÄÇ 12345boolean hasCycle(ListNode head) &#123; while (head != null) head = head.next; return false;&#125; ‰ΩÜÊòØÂ¶ÇÊûúÈìæË°®‰∏≠Âê´ÊúâÁéØÔºåÈÇ£‰πàËøô‰∏™ÊåáÈíàÂ∞±‰ºöÈô∑ÂÖ•Ê≠ªÂæ™ÁéØÔºåÂõ†‰∏∫ÁéØÂΩ¢Êï∞ÁªÑ‰∏≠Ê≤°Êúâ null ÊåáÈíà‰Ωú‰∏∫Â∞æÈÉ®ËäÇÁÇπ„ÄÇ ÁªèÂÖ∏Ëß£Ê≥ïÂ∞±ÊòØÁî®‰∏§‰∏™ÊåáÈíàÔºå‰∏Ä‰∏™Ë∑ëÂæóÂø´Ôºå‰∏Ä‰∏™Ë∑ëÂæóÊÖ¢„ÄÇÂ¶ÇÊûú‰∏çÂê´ÊúâÁéØÔºåË∑ëÂæóÂø´ÁöÑÈÇ£‰∏™ÊåáÈíàÊúÄÁªà‰ºöÈÅáÂà∞ nullÔºåËØ¥ÊòéÈìæË°®‰∏çÂê´ÁéØÔºõÂ¶ÇÊûúÂê´ÊúâÁéØÔºåÂø´ÊåáÈíàÊúÄÁªà‰ºöË∂ÖÊÖ¢ÊåáÈíà‰∏ÄÂúàÔºåÂíåÊÖ¢ÊåáÈíàÁõ∏ÈÅáÔºåËØ¥ÊòéÈìæË°®Âê´ÊúâÁéØ„ÄÇ 123456789101112boolean hasCycle(ListNode head) &#123; ListNode fast, slow; fast = slow = head; while (fast != null &amp;&amp; fast.next != null) &#123; fast = fast.next.next; slow = slow.next; if (fast == slow) return true; &#125; return false;&#125; 2„ÄÅÂ∑≤Áü•ÈìæË°®‰∏≠Âê´ÊúâÁéØÔºåËøîÂõûËøô‰∏™ÁéØÁöÑËµ∑Âßã‰ΩçÁΩÆ 1 Ëøô‰∏™ÈóÆÈ¢ò‰∏ÄÁÇπÈÉΩ‰∏çÂõ∞ÈöæÔºåÊúâÁÇπÁ±ª‰ººËÑëÁ≠ãÊÄ•ËΩ¨ÂºØÔºåÂÖàÁõ¥Êé•Áúã‰ª£Á†ÅÔºö 12345678910111213141516ListNode detectCycle(ListNode head) &#123; ListNode fast, slow; fast = slow = head; while (fast != null &amp;&amp; fast.next != null) &#123; fast = fast.next.next; slow = slow.next; if (fast == slow) break; &#125; // ‰∏äÈù¢ÁöÑ‰ª£Á†ÅÁ±ª‰ºº hasCycle ÂáΩÊï∞ slow = head; while (slow != fast) &#123; fast = fast.next; slow = slow.next; &#125; return slow;&#125; ÂèØ‰ª•ÁúãÂà∞ÔºåÂΩìÂø´ÊÖ¢ÊåáÈíàÁõ∏ÈÅáÊó∂ÔºåËÆ©ÂÖ∂‰∏≠‰ªª‰∏Ä‰∏™ÊåáÈíàÊåáÂêëÂ§¥ËäÇÁÇπÔºåÁÑ∂ÂêéËÆ©ÂÆÉ‰ø©‰ª•Áõ∏ÂêåÈÄüÂ∫¶ÂâçËøõÔºåÂÜçÊ¨°Áõ∏ÈÅáÊó∂ÊâÄÂú®ÁöÑËäÇÁÇπ‰ΩçÁΩÆÂ∞±ÊòØÁéØÂºÄÂßãÁöÑ‰ΩçÁΩÆ„ÄÇËøôÊòØ‰∏∫‰ªÄ‰πàÂë¢Ôºü Á¨¨‰∏ÄÊ¨°Áõ∏ÈÅáÊó∂ÔºåÂÅáËÆæÊÖ¢ÊåáÈíà slow Ëµ∞‰∫Ü k Ê≠•ÔºåÈÇ£‰πàÂø´ÊåáÈíà fast ‰∏ÄÂÆöËµ∞‰∫Ü 2k Ê≠•Ôºå‰πüÂ∞±ÊòØËØ¥ÊØî slow Â§öËµ∞‰∫Ü k Ê≠•Ôºà‰πüÂ∞±ÊòØÁéØÁöÑÈïøÂ∫¶Ôºâ„ÄÇ 2 ËÆæÁõ∏ÈÅáÁÇπË∑ùÁéØÁöÑËµ∑ÁÇπÁöÑË∑ùÁ¶ª‰∏∫ mÔºåÈÇ£‰πàÁéØÁöÑËµ∑ÁÇπË∑ùÂ§¥ÁªìÁÇπ head ÁöÑË∑ùÁ¶ª‰∏∫ k - mÔºå‰πüÂ∞±ÊòØËØ¥Â¶ÇÊûú‰ªé head ÂâçËøõ k - m Ê≠•Â∞±ËÉΩÂà∞ËææÁéØËµ∑ÁÇπ„ÄÇ Â∑ßÁöÑÊòØÔºåÂ¶ÇÊûú‰ªéÁõ∏ÈÅáÁÇπÁªßÁª≠ÂâçËøõ k - m Ê≠•Ôºå‰πüÊÅ∞Â•ΩÂà∞ËææÁéØËµ∑ÁÇπ„ÄÇ 3 ÊâÄ‰ª•ÔºåÂè™Ë¶ÅÊàë‰ª¨ÊääÂø´ÊÖ¢ÊåáÈíà‰∏≠ÁöÑ‰ªª‰∏Ä‰∏™ÈáçÊñ∞ÊåáÂêë headÔºåÁÑ∂Âêé‰∏§‰∏™ÊåáÈíàÂêåÈÄüÂâçËøõÔºåk - m Ê≠•ÂêéÂ∞±‰ºöÁõ∏ÈÅáÔºåÁõ∏ÈÅá‰πãÂ§ÑÂ∞±ÊòØÁéØÁöÑËµ∑ÁÇπ‰∫Ü„ÄÇ 3„ÄÅÂØªÊâæÈìæË°®ÁöÑ‰∏≠ÁÇπ Á±ª‰ºº‰∏äÈù¢ÁöÑÊÄùË∑ØÔºåÊàë‰ª¨ËøòÂèØ‰ª•ËÆ©Âø´ÊåáÈíà‰∏ÄÊ¨°ÂâçËøõ‰∏§Ê≠•ÔºåÊÖ¢ÊåáÈíà‰∏ÄÊ¨°ÂâçËøõ‰∏ÄÊ≠•ÔºåÂΩìÂø´ÊåáÈíàÂà∞ËææÈìæË°®Â∞ΩÂ§¥Êó∂ÔºåÊÖ¢ÊåáÈíàÂ∞±Â§Ñ‰∫éÈìæË°®ÁöÑ‰∏≠Èó¥‰ΩçÁΩÆ„ÄÇ 123456while (fast != null &amp;&amp; fast.next != null) &#123; fast = fast.next.next; slow = slow.next;&#125;// slow Â∞±Âú®‰∏≠Èó¥‰ΩçÁΩÆreturn slow; ÂΩìÈìæË°®ÁöÑÈïøÂ∫¶ÊòØÂ•áÊï∞Êó∂Ôºåslow ÊÅ∞Â∑ßÂÅúÂú®‰∏≠ÁÇπ‰ΩçÁΩÆÔºõÂ¶ÇÊûúÈïøÂ∫¶ÊòØÂÅ∂Êï∞Ôºåslow ÊúÄÁªàÁöÑ‰ΩçÁΩÆÊòØ‰∏≠Èó¥ÂÅèÂè≥Ôºö center ÂØªÊâæÈìæË°®‰∏≠ÁÇπÁöÑ‰∏Ä‰∏™ÈáçË¶Å‰ΩúÁî®ÊòØÂØπÈìæË°®ËøõË°åÂΩíÂπ∂ÊéíÂ∫è„ÄÇ ÂõûÊÉ≥Êï∞ÁªÑÁöÑÂΩíÂπ∂ÊéíÂ∫èÔºöÊ±Ç‰∏≠ÁÇπÁ¥¢ÂºïÈÄíÂΩíÂú∞ÊääÊï∞ÁªÑ‰∫åÂàÜÔºåÊúÄÂêéÂêàÂπ∂‰∏§‰∏™ÊúâÂ∫èÊï∞ÁªÑ„ÄÇÂØπ‰∫éÈìæË°®ÔºåÂêàÂπ∂‰∏§‰∏™ÊúâÂ∫èÈìæË°®ÊòØÂæàÁÆÄÂçïÁöÑÔºåÈöæÁÇπÂ∞±Âú®‰∫é‰∫åÂàÜ„ÄÇ ‰ΩÜÊòØÁé∞Âú®‰Ω†Â≠¶‰ºö‰∫ÜÊâæÂà∞ÈìæË°®ÁöÑ‰∏≠ÁÇπÔºåÂ∞±ËÉΩÂÆûÁé∞ÈìæË°®ÁöÑ‰∫åÂàÜ‰∫Ü„ÄÇÂÖ≥‰∫éÂΩíÂπ∂ÊéíÂ∫èÁöÑÂÖ∑‰ΩìÂÜÖÂÆπÊú¨ÊñáÂ∞±‰∏çÂÖ∑‰ΩìÂ±ïÂºÄ‰∫Ü„ÄÇ 4„ÄÅÂØªÊâæÈìæË°®ÁöÑÂÄíÊï∞Á¨¨ k ‰∏™ÂÖÉÁ¥† Êàë‰ª¨ÁöÑÊÄùË∑ØËøòÊòØ‰ΩøÁî®Âø´ÊÖ¢ÊåáÈíàÔºåËÆ©Âø´ÊåáÈíàÂÖàËµ∞ k Ê≠•ÔºåÁÑ∂ÂêéÂø´ÊÖ¢ÊåáÈíàÂºÄÂßãÂêåÈÄüÂâçËøõ„ÄÇËøôÊ†∑ÂΩìÂø´ÊåáÈíàËµ∞Âà∞ÈìæË°®Êú´Â∞æ null Êó∂ÔºåÊÖ¢ÊåáÈíàÊâÄÂú®ÁöÑ‰ΩçÁΩÆÂ∞±ÊòØÂÄíÊï∞Á¨¨ k ‰∏™ÈìæË°®ËäÇÁÇπÔºà‰∏∫‰∫ÜÁÆÄÂåñÔºåÂÅáËÆæ k ‰∏ç‰ºöË∂ÖËøáÈìæË°®ÈïøÂ∫¶ÔºâÔºö 1234567891011ListNode slow, fast;slow = fast = head;while (k-- &gt; 0) fast = fast.next;while (fast != null) &#123; slow = slow.next; fast = fast.next;&#125;return slow; ‰∫å„ÄÅÂ∑¶Âè≥ÊåáÈíàÁöÑÂ∏∏Áî®ÁÆóÊ≥ïÂ∑¶Âè≥ÊåáÈíàÂú®Êï∞ÁªÑ‰∏≠ÂÆûÈôÖÊòØÊåá‰∏§‰∏™Á¥¢ÂºïÂÄºÔºå‰∏ÄËà¨ÂàùÂßãÂåñ‰∏∫ left = 0, right = nums.length - 1 „ÄÇ 1„ÄÅ‰∫åÂàÜÊü•Êâæ ÂâçÊñá„Äå‰∫åÂàÜÊü•Êâæ„ÄçÊúâËØ¶ÁªÜËÆ≤Ëß£ÔºåËøôÈáåÂè™ÂÜôÊúÄÁÆÄÂçïÁöÑ‰∫åÂàÜÁÆóÊ≥ïÔºåÊó®Âú®Á™ÅÂá∫ÂÆÉÁöÑÂèåÊåáÈíàÁâπÊÄßÔºö 1234567891011121314int binarySearch(int[] nums, int target) &#123; int left = 0; int right = nums.length - 1; while(left &lt;= right) &#123; int mid = (right + left) / 2; if(nums[mid] == target) return mid; else if (nums[mid] &lt; target) left = mid + 1; else if (nums[mid] &gt; target) right = mid - 1; &#125; return -1;&#125; 2„ÄÅ‰∏§Êï∞‰πãÂíå Áõ¥Êé•Áúã‰∏ÄÈÅì LeetCode È¢òÁõÆÂêßÔºö title Âè™Ë¶ÅÊï∞ÁªÑÊúâÂ∫èÔºåÂ∞±Â∫îËØ•ÊÉ≥Âà∞ÂèåÊåáÈíàÊäÄÂ∑ß„ÄÇËøôÈÅìÈ¢òÁöÑËß£Ê≥ïÊúâÁÇπÁ±ª‰ºº‰∫åÂàÜÊü•ÊâæÔºåÈÄöËøáË∞ÉËäÇ left Âíå right ÂèØ‰ª•Ë∞ÉÊï¥ sum ÁöÑÂ§ßÂ∞èÔºö 123456789101112131415int[] twoSum(int[] nums, int target) &#123; int left = 0, right = nums.length - 1; while (left &lt; right) &#123; int sum = nums[left] + nums[right]; if (sum == target) &#123; // È¢òÁõÆË¶ÅÊ±ÇÁöÑÁ¥¢ÂºïÊòØ‰ªé 1 ÂºÄÂßãÁöÑ return new int[]&#123;left + 1, right + 1&#125;; &#125; else if (sum &lt; target) &#123; left++; // ËÆ© sum Â§ß‰∏ÄÁÇπ &#125; else if (sum &gt; target) &#123; right--; // ËÆ© sum Â∞è‰∏ÄÁÇπ &#125; &#125; return new int[]&#123;-1, -1&#125;;&#125; 3„ÄÅÂèçËΩ¨Êï∞ÁªÑ 1234567891011void reverse(int[] nums) &#123; int left = 0; int right = nums.length - 1; while (left &lt; right) &#123; // swap(nums[left], nums[right]) int temp = nums[left]; nums[left] = nums[right]; nums[right] = temp; left++; right--; &#125;&#125; 4„ÄÅÊªëÂä®Á™óÂè£ÁÆóÊ≥ï Ëøô‰πüËÆ∏ÊòØÂèåÊåáÈíàÊäÄÂ∑ßÁöÑÊúÄÈ´òÂ¢ÉÁïå‰∫ÜÔºåÂ¶ÇÊûúÊéåÊè°‰∫ÜÊ≠§ÁÆóÊ≥ïÔºåÂèØ‰ª•Ëß£ÂÜ≥‰∏ÄÂ§ßÁ±ªÂ≠êÂ≠óÁ¨¶‰∏≤ÂåπÈÖçÁöÑÈóÆÈ¢òÔºå‰∏çËøá„ÄåÊªëÂä®Á™óÂè£„ÄçÁ®çÂæÆÊØî‰∏äËø∞ÁöÑËøô‰∫õÁÆóÊ≥ïÂ§çÊùÇ‰∫õ„ÄÇ Âπ∏ËøêÁöÑÊòØÔºåËøôÁ±ªÁÆóÊ≥ïÊòØÊúâÊ°ÜÊû∂Ê®°ÊùøÁöÑÔºå‰∏ãÁØáÊñáÁ´†Â∞±ÂáÜÂ§áËÆ≤Ëß£„ÄåÊªëÂä®Á™óÂè£„ÄçÁÆóÊ≥ïÊ®°ÊùøÔºåÂ∏ÆÂ§ßÂÆ∂ÁßíÊùÄÂá†ÈÅì LeetCode Â≠ê‰∏≤ÂåπÈÖçÁöÑÈóÆÈ¢ò„ÄÇ]]></content>
      <tags>
        <tag>java</tag>
        <tag>ÂèåÊåáÈíà</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[labuladongÂÖ¨‰ºóÂè∑Á¨îËÆ∞]]></title>
    <url>%2F2019%2F12%2F22%2Flabuladong%E5%85%AC%E4%BC%97%E5%8F%B7%E7%AC%94%E8%AE%B0(dp%26%26%E4%BA%8C%E5%88%86).html</url>
    <content type="text"><![CDATA[Âä®ÊÄÅËßÑÂàíÔºö‰∏çÂêåÁöÑÂÆö‰πâ‰∫ßÁîü‰∏çÂêåÁöÑËß£Ê≥ïÊñáÁ´†ÈìæÊé•ÈîÆÁõòÁªÑÂêàÈóÆÈ¢ò Êî∂Ëé∑ÂØπÁä∂ÊÄÅÊú∫ÁöÑÂÆö‰πâ‰∏çÂêåÔºåÂæóÂà∞ÁöÑÁä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ãÂ∞±ÂÆåÂÖ®‰∏çÂêå ÁªèÂÖ∏Èù¢ËØïÈ¢òÔºöÊúÄÈïøÂõûÊñáÂ≠ê‰∏≤ÔºàLeetCodeÁ¨¨5È¢òÔºâÊñáÁ´†ÈìæÊé•ÁªèÂÖ∏Èù¢ËØïÈ¢òÔºöÊúÄÈïøÂõûÊñáÂ≠ê‰∏≤ Êî∂Ëé∑ÂõûÊñáÂ≠ê‰∏≤Êúâ‰∏§‰∏™ÂÅöÊ≥ïÔºå‰∏Ä‰∏™ÊòØ‰ªé‰∏≠Èó¥Â±ïÂºÄÁöÑÁÆóÊ≥ïÔºå‰∏Ä‰∏™ÊòØ‰∏§‰æßÂêë‰∏≠Èó¥Èù†ÈΩêÁöÑdp ÂçïË∞ÉÊ†àÊñáÁ´†ÈìæÊé•ÂçïË∞ÉÊ†à Monotonic Stack ÁöÑ‰ΩøÁî® Êî∂Ëé∑ ÂçïË∞ÉÊ†àÁÆóÊ≥ïËøáÁ®ã Â§ÑÁêÜNext Greater NumberÔºå‰ªéÂêéÂêëÂâçÈÅçÂéÜ ÂÖàÂà§Êñ≠ Ê†àÊòØÂê¶‰∏∫Á©∫ Âíå Ê†àÈ°∂ÁöÑÂÄºÊòØ‰∏çÊòØÊØîÂç≥Â∞ÜÂÖ•Ê†àÁöÑÂÄºÂ∞è Â¶ÇÊûúÊ†àÁ©∫ÔºåÂàôËØ¥ÊòéÊâæ‰∏çÂà∞ÊØîËØ•Êï∞Â§ßÁöÑÊï∞ÔºåÂ∞ÜÂÖ∂Next Greater NumberÁΩÆ‰∏∫-1 Ê†à‰∏ç‰∏∫Á©∫ÔºåÁõ¥Âà∞ÊâæÂà∞ÊØîËØ•Êï∞Â§ßÁöÑÊï∞ÔºåÂ∞ÜÂÖ∂ÁΩÆ‰∏∫Ê†àÈ°∂ÔºåÊØîÂÖ∂Â∞èÁöÑ‰πüÂ∞±Ê≤°ÊúâÂ≠òÂú®ÁöÑÊÑè‰πâ‰∫Ü ÁÑ∂ÂêéÂ∞ÜËØ•Êï∞ÁöÑNext Greater NumberÂÆö‰∏∫Ê†àÈ°∂ÂÖÉÁ¥†ÔºåÂπ∂Â∞ÜËØ•Êï∞Âä†ÂÖ•Ê†à‰∏≠ Â§ÑÁêÜÂæ™ÁéØÊï∞ÁªÑ Â∞ÜËØ•Êï∞ÁªÑÁöÑÂèåÂÄçÈïøÂ∫¶ÊûÑÈÄ†Âá∫Êù•ÔºåËøôÊ†∑ÁöÑËØùÂ∞±Â∞±‰∏ç‰ªÖËÉΩÊØîËæÉÂè≥ËæπÁöÑÊï∞ÔºåËøòËÉΩÊØîËæÉÂ∑¶ËæπÁöÑÊï∞‰∫Ü ‰∫åÂàÜÊü•ÊâæÁÆóÊ≥ïËØ¶Ëß£ÊñáÁ´†ÈìæÊé•‰∫åÂàÜÊü•ÊâæÁÆóÊ≥ïËØ¶Ëß£ ‰∫åÂàÜÊü•ÊâæÁöÑÊ°ÜÊû∂ ÊúÄÂü∫Êú¨ÁöÑÊ°ÜÊû∂1ÔºàÂΩ¢ÂºèÊòØ[a,b)Ôºâ 123456789101112131415int binarySearch(int nums[],int target)&#123; int left = 0; int right = nums.length; while(left &lt; right)&#123; //Èò≤Ê≠¢ËÆ°ÁÆómidÊó∂Ê∫¢Âá∫ int mid = left + (right - left) / 2; if(nums[mid] == target) return mid; else if(nums[mid] &lt; target) left = mid + 1; else if(nums[mid] &gt; target) right = mid; &#125; return -1;&#125; ÊúÄÂü∫Êú¨ÁöÑÊ°ÜÊû∂2 (ÂΩ¢ÂºèÊòØ[a,b]) 123456789101112131415int binarySearch(int nums[],int target)&#123; int left = 0; int right = nums.length - 1; while(left &lt;= right)&#123; //Èò≤Ê≠¢ËÆ°ÁÆómidÊó∂Ê∫¢Âá∫ int mid = left + (right - left) / 2; if(nums[mid] == target) return mid; else if(nums[mid] &lt; target) left = mid + 1; else if(nums[mid] &gt; target) right = mid - 1; &#125; return -1;&#125; ÂØªÊâæÂ∑¶‰æßËæπÁïåÁöÑ‰∫åÂàÜÊêúÁ¥¢ 12345678910111213141516171819202122232425/** * ËøîÂõûÁöÑÊòØÊØîtargetÂ∞èÁöÑÊï∞ÈáèÔºåÂêåÊó∂‰πüÊòØÊúÄÂ∑¶targetÁöÑ‰∏ãÊ†á * @param nums * @param target * @return */int binarySearchLeft(int nums[],int target)&#123; int left = 0; int right = nums.length; while(left &lt; right)&#123; //Èò≤Ê≠¢ËÆ°ÁÆómidÊó∂Ê∫¢Âá∫ int mid = left + (right - left) / 2; if(nums[mid] == target) right = mid; else if(nums[mid] &lt; target) left = mid + 1; else if(nums[mid] &gt; target) right = mid; &#125; //Ë¶ÅÊó∂ÂàªÊ≥®ÊÑèÂ§ÑÁêÜËæπÁïåÔºåÂ¶ÇÊûúÊï¥‰∏™Êï∞ÁªÑÈÉΩÊ≤°ÊúâËøô‰∏™targetÔºåÂàôleft‰ºöÂà∞nums.length // target ÊØîÊâÄÊúâÊï∞ÈÉΩÂ§ß if (left == nums.length) return -1; // Á±ª‰ºº‰πãÂâçÁÆóÊ≥ïÁöÑÂ§ÑÁêÜÊñπÂºè return nums[left] == target ? left : -1;&#125; ÂØªÊâæÂè≥‰æßËæπÁïåÁöÑ‰∫åÂàÜÊêúÁ¥¢ 1234567891011121314151617181920212223242526/** * ËøîÂõûÁöÑÊòØÊúÄÂè≥targetÁöÑ‰∏ãÊ†á * @param nums * @param target * @return */int binarySearchRight(int nums[],int target)&#123; int left = 0; int right = nums.length; while(left &lt; right)&#123; //Èò≤Ê≠¢ËÆ°ÁÆómidÊó∂Ê∫¢Âá∫ int mid = left + (right - left) / 2; if(nums[mid] == target) left = mid + 1; else if(nums[mid] &lt; target) left = mid + 1; else if(nums[mid] &gt; target) right = mid; &#125; //Ë¶ÅÊó∂ÂàªÊ≥®ÊÑèÂ§ÑÁêÜËæπÁïåÔºåÂ¶ÇÊûúÊï¥‰∏™Êï∞ÁªÑÈÉΩÊ≤°ÊúâËøô‰∏™targetÔºåÂàôleft‰ºöÂà∞nums.length // target ÊØîÊâÄÊúâÊï∞ÈÉΩÂ§ß // return left - 1; if (left == 0) return -1; // Á±ª‰ºº‰πãÂâçÁÆóÊ≥ïÁöÑÂ§ÑÁêÜÊñπÂºè return nums[left-1] == target ? (left-1) : -1;&#125; Êî∂Ëé∑ Â∑¶‰æßËæπÁïåÁöÑ‰∫åÂàÜÊêúÁ¥¢ÔºåleftÂç≥‰ª£Ë°®ÊØîtargetÂ∞èÁöÑÊï∞ÁöÑÊï∞Èáè Âè≥‰æßËæπÁïåÁöÑ‰∫åÂàÜÊêúÁ¥¢ÔºåleftÂç≥‰ª£Ë°®ÊØîtargetÂ§ßÁöÑÁ¨¨‰∏Ä‰∏™Êï∞ÁöÑ‰∏ãÊ†áÔºåÊØîÂ¶ÇÊòØ5ÔºåÂàô‰ª£Ë°®Á¥¢Âºï‰∏∫4ÊòØtargetÁöÑÊúÄÂè≥‰æßÊï∞ ÊúÄÈïøÈÄíÂΩíÂ≠êÂ∫èÂàó(LeetCodeÁ¨¨300È¢ò)ÊñáÁ´†ÈìæÊé•Âä®ÊÄÅËßÑÂàí‰πãÊúÄÈïøÈÄíÂΩíÂ≠êÂ∫èÂàó ‰∏§‰∏™ÊñπÊ≥ïÔºö dp ÊâëÂÖãÁâåÁÆóÊ≥ïÔºåËøêÁî®‰∫åÂàÜÊü•Êâæ dpÊ≥®ÊÑè‰∫ãÈ°πÊúÄÈáçË¶ÅÁöÑÊòØÂÖàÁ°ÆÂÆöÁä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ãÔºåÂπ∂‰∏îÊòéÁ°ÆdpÊï∞ÁªÑÁöÑÂê´‰πâÔºåËøôÈáåË¶ÅÊ±ÇÁöÑÊòØÊúÄÈïøÈÄíÂΩíÂ≠êÂ∫èÂàóÔºåÊâÄÂª∫Á´ãÁöÑdpÊï∞ÁªÑÊòØ‰∏Ä‰∏™‰∏ÄÁª¥Êï∞ÁªÑ(‰∏∫‰ΩïÈÄâÂèñÁöÑÊòØ‰∏ÄÁª¥Êï∞ÁªÑÂë¢Ôºü)ÔºåÂπ∂‰∏îdp[i]ÁöÑÂê´‰πâÊòØÊåá‰ª•Á¥¢ÂºïiÁªìÂ∞æÁöÑÊúÄÈïøÈÄíÂΩíÂ≠êÂ∫èÂàó„ÄÇ ÈááÁî®ÂΩíÁ∫≥Ê≥ïÂèØÁü•ÔºåËã•dp[0‚Ä¶i-1]ÂèØÁü•ÔºåÂàô 1234for(int j = 0; j &lt; i;j++)&#123; if(nums[j] &lt; nums[i]) dp[i] = Math.max(dp[i],dp[j]+1);&#125; Âç≥dp[i]ÊòØ‰πãÂâçÁöÑdp[0‚Ä¶i-1]ÔºåÂà§Êñ≠ÂÖ∂ÊòØÂê¶Â∞è‰∫énums[i]ÔºåËã•Â∞è‰∫éÂàônums[i]ÂèØ‰ª•Êé•Âà∞ÂÖ∂ÂêéÈù¢ÔºåÊúÄÂêéÈÄâÂèñ‰∏Ä‰∏™ÊúÄÈïøÁöÑÈÄíÂΩíÂ≠êÂ∫èÂàóÂç≥ÂèØ„ÄÇ ËøòÊúâË¶ÅËÄÉËôëÁöÑÂ∞±ÊòØbase caseÔºåÁî±‰∫éÊòØÊúÄÁü≠ÈÄíÂΩíÂ≠êÂ∫èÂàóËá≥Â∞ë‰∏∫1ÔºåÊâÄ‰ª•base case‰∏∫1ÔºåÊâÄ‰ª•dpÊï∞ÁªÑÂÖ®ÈÉ®ÂàùÂßãÂåñ‰∏∫1Âç≥ÂèØ„ÄÇ ‰ª£Á†Å123456789101112131415public int lengthOfLtsByDp(int nums[])&#123; int[] dp = new int[nums.length]; Arrays.fill(dp,1); for(int i = 0;i &lt; nums.length;i++)&#123; for(int j = 0; j &lt; i;j++)&#123; if(nums[j] &lt; nums[i]) dp[i] = Math.max(dp[i],dp[j]+1); &#125; &#125; int res = 0; for(int i = 0; i &lt; dp.length; i++)&#123; res = Math.max(res,dp[i]); &#125; return res;&#125; ÊâëÂÖãÁâåÁÆóÊ≥ïÊúÄÈïøÈÄíÂΩíÂ≠êÂ∫èÂàóÂÖ∂ÂÆûÁ±ª‰ºº‰∫éÊàë‰ª¨Âπ≥Êó∂Áé©ÁöÑËúòËõõÁ∫∏ÁâåÔºåegÔºö2Ôºå3Ôºå1Ôºå9Ôºå7Ôºå4Ôºå6Ôºå3 ÔºåÂêå‰∏ÄÂ†ÜÁöÑÁâåÂè™ËÉΩÊòØÂ∞èÁöÑÊîæÂú®Â§ßÁöÑ‰∏äÈù¢ÔºåÂ¶Ç‰∏äÔºåÂ∞±ÂàÜÊàê2Ôºå1 3 9Ôºå7Ôºå6Ôºå3 4 ‰∏ÄÂÖ±4Â†ÜÔºåÂàôÊúÄÈïøÈÄíÂΩíÂ≠êÂ∫èÂàóÊï∞‰∏∫ 4 „ÄÇ Ëá≥‰∫éÂ¶Ç‰ΩïÂ§ÑÁêÜÊâëÂÖãÁâåÊîæÁΩÆÈóÆÈ¢òÔºåÂàôÂèØ‰ª•ÈááÁî®‰∫åÂàÜÊü•ÊâæÔºåÂõ†‰∏∫Â†ÜÈ°∂ÈÉΩÊòØÊúâÂ∫èÁöÑ„ÄÇ 12345678910111213141516171819202122232425public int lengthOfLtsByBinarySearch(int[] nums)&#123; //Â†ÜÁöÑ‰∏™Êï∞ int piles = 0; //ËÆ∞ÂΩïÊØè‰∏™Â†ÜÁöÑÊúÄ‰∏äÈù¢ÁöÑÁâåÔºå‰øùËØÅÊúâÂ∫èÔºåÊâÄ‰ª•ÂøÖÈ°ªÂà©Áî®ÊúÄÂ∑¶‰æßËæπÁïåÁöÑ‰∫åÂàÜÊ≥ï int[] top = new int[nums.length]; for(int i = 0;i &lt; nums.length;i++)&#123; int poker = nums[i]; int left = 0; int right = piles; while(left &lt; right)&#123; int mid = left + (right - left) / 2; if(poker &lt; top[mid]) right = mid; else if(poker &gt; top[mid]) left = mid + 1; else right = mid; &#125; //leftÁöÑÂèñÂÄºÊúâ[0,nums.length],ÂΩìleft‰∏∫nums.lengthÊó∂ÔºåËøôÈáåÊòØpilesÔºåËØ¥ÊòéÁâåÂ†Ü‰∏äÁöÑÁ¨¨‰∏ÄÂº†ÁâåÂÖ®ÈÉ®ÊØîÂÆÉÂ∞èÔºåÂàôËØ¥ÊòéÊ≠§Êó∂ÈúÄË¶ÅÊñ∞Âª∫‰∏Ä‰∏™ÁâåÂ†Ü if (left == piles) piles++; top[left] = poker; &#125; return piles;&#125; ‚Äã Â≠êÂ∫èÂàóËß£È¢òÊ®°ÊùøÊñáÁ´†ÈìæÊé•Â≠êÂ∫èÂàóËß£È¢òÊ®°Êùø Êî∂Ëé∑‰∏§ÁßçÊÄùË∑Ø dpÊï∞ÁªÑ‰∏∫‰∏ÄÁª¥Êï∞ÁªÑ„ÄÇÂ∏∏ËßÅÈ¢òÂûãÊúâ ÊúÄÈïøÈÄíÂ¢ûÂ≠êÂ∫èÂàó„ÄÇÂú®Â≠êÊï∞ÁªÑarray[0..i]‰∏≠Ôºå‰ª•array[i]ÁªìÂ∞æÁöÑÁõÆÊ†áÂ≠êÂ∫èÂàóÔºàÊúÄÈïøÈÄíÂ¢ûÂ≠êÂ∫èÂàóÔºâÁöÑÈïøÂ∫¶ÊòØdp[i]„ÄÇ Ê®°ÊùøÔºö 12345678int n = array.length;int[] dp = new int[n];for (int i = 1; i &lt; n; i++) &#123; for (int j = 0; j &lt; i; j++) &#123; dp[i] = ÊúÄÂÄº(dp[i], dp[j] + ...) &#125;&#125; dpÊï∞ÁªÑ‰∏∫‰∫åÁª¥Êï∞ÁªÑ„ÄÇ‰∫åÁª¥Êï∞ÁªÑÂèàÂàÜ‰∏∫ÊòØÂØπ‰∏§Â≠óÁ¨¶‰∏≤ËÄåË®ÄÂíå‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ËÄåË®Ä„ÄÇ Ê®°ÊùøÔºö 1234567891011int n = arr.length;int[][] dp = new dp[n][n];for (int i = 0; i &lt; n; i++) &#123; for (int j = 1; j &lt; n; j++) &#123; if (arr[i] == arr[j]) dp[i][j] = dp[i][j] + ... else dp[i][j] = ÊúÄÂÄº(...) &#125;&#125; ÂØπ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤‰ΩøÁî®ÁöÑdp‰∏∫‰∫åÁª¥Êï∞ÁªÑ„ÄÇÂ∏∏ËßÅÈ¢òÂûãÊúâ‰πãÂâçÂÅöËøáÁöÑ ÊúÄÈïøÂõûÊñáÂ≠ê‰∏≤Ôºå‰ΩøÁî®ÂèåÊåáÈíàÔºå‰ªé‰∏§ËæπÂêë‰∏≠Èó¥Èù†Êã¢Ôºå‰∫åÁª¥ÂàÜÂà´ÊåáÁöÑÊòØÂ∑¶‰æßÊåáÈíàÂíåÂè≥‰æßÊåáÈíàÁöÑÁ¥¢ÂºïÂÄº„ÄÇÂèØ‰ª•Êé®ÂπøÂà∞ÊúÄÈïøÂõûÊñáÂ≠êÂ∫èÂàó„ÄÇ ÂØπ‰∏§‰∏™Â≠óÁ¨¶‰∏≤‰ΩøÁî®ÁöÑdp‰∏∫‰∫åÁª¥Êï∞ÁªÑ„ÄÇ‰æãÂ¶Ç ÁºñËæëË∑ùÁ¶ª Âíå ÊúÄÈïøÂÖ¨ÂÖ±Â≠êÂ∫èÂàó ÂõûÊñáÂ≠êÂ∫èÂàóÁöÑÊ±ÇËß£(LeetCodeÁ¨¨516È¢ò)ÂõûÊñáÂ≠êÂ∫èÂàóÁöÑÊ±ÇËß£ÔºåÊòØÂú®ÂõûÊñáÂ≠ê‰∏≤ÁöÑÂü∫Á°Ä‰∏äËøõË°åÁöÑÔºådp[i][j] ÁöÑÈïøÂ∫¶ÂèñÂÜ≥‰∫és[i]Âíås[j]‰ª•Âèädp[i+1][j-1] ÂΩìs[i] == s[j]Êó∂Ôºådp[i][j] = dp[i+1][j-1] + 2 ÂΩìs[i] != s[j]Êó∂Ôºå dp[i][j] = Math.max(dp[i][j-1]Ôºådp[i+1][j]) ÂΩìËΩ¨ÁßªÊñπÁ®ãÂÜôÂ•ΩÂêéÔºåÊúÄÂ§ßÁöÑÈöæÁÇπÂ∞±ÊòØÂ¶Ç‰ΩïÈÅçÂéÜdpÔºåÂª∫ËÆÆÈááÁî®Ë°®ÁöÑÂΩ¢ÂºèÔºå‰ªéÊñπÁ®ã‰∏≠ÂèØ‰ª•ÁúãÂà∞ÔºåÊàë‰ª¨ÂøÖÈ°ªÂæóÂà∞Â∑¶Ëæπ„ÄÅ‰∏ãËæπ„ÄÅÂ∑¶‰∏ãÔºå‰∏â‰∏™dpË°®ËææÂºèÊâçËÉΩÂæóÂà∞‰∏ã‰∏Ä‰∏™dpË°®ËææÂºèÔºåÊïÖÂèØ‰ª•ÈááÁî®ÊñúÁùÄÈÅçÂéÜÁöÑÊñπÂºèÂíåÈÄÜÂæ™ÁéØ‰ªé‰∏ãÂæÄ‰∏äÈÅçÂéÜÂç≥ÂèØ„ÄÇ 123456789101112131415161718192021222324/** * ÊñúÁùÄÈÅçÂéÜÁöÑdp * @param nums * @return */ private static int dp(int[] nums)&#123; int[][] dp = new int[nums.length][nums.length];// Arrays.fill(dp, 0); int j = 0; for(int i = 0;i &lt; nums.length;i++)&#123; dp[i][i] = 1; &#125; //ÊñúÁùÄÂæ™ÁéØÈÅçÂéÜ for(int n = 1;n &lt; nums.length;n++)&#123; for(int i = 0; i &lt; nums.length - n;i++)&#123; j = i + n; if(nums[i] == nums[j]) dp[i][j] = dp[i+1][j-1] + 2; else dp[i][j] = Math.max(dp[i][j-1],dp[i+1][j]); &#125; &#125; return dp[0][nums.length-1]; &#125; 12345678910111213141516171819202122232425 /** * ÈÄÜÂæ™ÁéØÈÅçÂéÜÁöÑdp * @param nums * @return */ private static int dpByInverse(int[] nums)&#123; int[][] dp = new int[nums.length][nums.length];// Arrays.fill(dp, 0);// int j = 0; int n = nums.length; for(int i = 0;i &lt; nums.length;i++)&#123; dp[i][i] = 1; &#125; // ÂèçÁùÄÈÅçÂéÜ‰øùËØÅÊ≠£Á°ÆÁöÑÁä∂ÊÄÅËΩ¨Áßª for (int i = n - 1; i &gt;= 0; i--) &#123; for (int j = i + 1; j &lt; n; j++) &#123; // Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã if (nums[i] == nums[j]) dp[i][j] = dp[i + 1][j - 1] + 2; else dp[i][j] = Math.max(dp[i + 1][j], dp[i][j - 1]); &#125; &#125; return dp[0][nums.length-1]; &#125; ÁºñËæëË∑ùÁ¶ªÔºàLeetCodeÁ¨¨72È¢òÔºâÂÖàÊÄªÁªì‰∏ÄÂìàÔºö‰ªéÂêéÂæÄÂâçÔºåÁÑ∂ÂêéÂÜôÈÄíÂΩíÂáΩÊï∞ÔºåÁÑ∂ÂêéÁîªDP TableÔºåÂÜôÈùûÈÄíÂΩíÔºåÊ≥®ÊÑèBase caseÔºÅ ÊñáÁ´†ÈìæÊé•ÁºñËæëË∑ùÁ¶ª È¢òÁõÆÁªôÂÆö‰∏§‰∏™ÂçïËØç word1 Âíå word2ÔºåËÆ°ÁÆóÂá∫Â∞Ü word1 ËΩ¨Êç¢Êàê word2 ÊâÄ‰ΩøÁî®ÁöÑÊúÄÂ∞ëÊìç‰ΩúÊï∞ „ÄÇ ‰Ω†ÂèØ‰ª•ÂØπ‰∏Ä‰∏™ÂçïËØçËøõË°åÂ¶Ç‰∏ã‰∏âÁßçÊìç‰ΩúÔºö ÊèíÂÖ•‰∏Ä‰∏™Â≠óÁ¨¶Âà†Èô§‰∏Ä‰∏™Â≠óÁ¨¶ÊõøÊç¢‰∏Ä‰∏™Â≠óÁ¨¶Á§∫‰æã 1: 123456ËæìÂÖ•: word1 = "horse", word2 = "ros"ËæìÂá∫: 3Ëß£Èáä: horse -&gt; rorse (Â∞Ü 'h' ÊõøÊç¢‰∏∫ 'r')rorse -&gt; rose (Âà†Èô§ 'r')rose -&gt; ros (Âà†Èô§ 'e') Á§∫‰æã 2: 12345678ËæìÂÖ•: word1 = "intention", word2 = "execution"ËæìÂá∫: 5Ëß£Èáä: intention -&gt; inention (Âà†Èô§ 't')inention -&gt; enention (Â∞Ü 'i' ÊõøÊç¢‰∏∫ 'e')enention -&gt; exention (Â∞Ü 'n' ÊõøÊç¢‰∏∫ 'x')exention -&gt; exection (Â∞Ü 'n' ÊõøÊç¢‰∏∫ 'c')exection -&gt; execution (ÊèíÂÖ• 'u') ÊÄùË∑Ø‰∏™‰∫∫ËßâÂæóÂÖ¨‰ºóÂè∑ËØ¥ÁöÑÊúâÁöÑÂï∞Âó¶Âìà~ ÊàëÂ∞±Á®çÂæÆÊÄªÁªì‰∏Ä‰∏ãÊàëÁöÑÊÉ≥Ê≥ïÔºö ÊãøÂà∞È¢òÁõÆÔºåÂèàÊòØ‰∏§‰∏™Â≠óÁ¨¶‰∏≤‰πãÈó¥ÁöÑÈóÆÈ¢òÔºåÊØ´Êó†ÁñëÈóÆÁ¨¨‰∏ÄÊÉ≥Ê≥ïÊÉ≥Âà∞‰ΩøÁî®ÂèåÊåáÈíàÁöÑdpÔºåÂõ†‰∏∫‰∏ÄËà¨ÈÅáÂà∞‰∏§‰∏™Â≠óÁ¨¶‰∏≤ÁöÑÈóÆÈ¢òÈÉΩÊòØÈááÁî®dp‰∫åÁª¥Êï∞ÁªÑËß£ÂÜ≥(ÂèåÊåáÈíà)Ôºõ dpËß£ÂÜ≥ÈóÆÈ¢òÔºåÈ¶ñÂÖàÂ∞±Ë¶ÅÊêûÊ∏ÖÊ•ödpÊï∞ÁªÑ‰ª£Ë°®‰ªÄ‰πàÔºåÂÖ∂Ê¨°Â∞±ÊòØÁä∂ÊÄÅËΩ¨ÁßªÊúâÂì™Âá†ÁßçÊÉÖÂÜµÔºÅ ‰∏ÄËà¨dp‰∫åÁª¥Êï∞ÁªÑ dp[i][j] ,‰ª£Ë°®‰ª•s1[i-1]„ÄÅs2[j-1]ÁªìÂ∞æÁöÑËΩ¨Êç¢ÁöÑÊúÄÂ∞ëÊìç‰ΩúÊï∞Ôºå‰∏∫Âï•ÊòØi-1,j-1ÔºÅÂõ†‰∏∫dpÊòØ‰ªédp[1][1]ÂºÄÂßãÁöÑÔºå‰ª£Ë°®Â≠óÁ¨¶‰∏≤ÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶ÔºÅÔºÅ ÊêûÊòéÁôΩ‰∫ÜdpÊï∞ÁªÑÊòØÂï•Âê´‰πâÔºåÁé∞Âú®Â∞±Ë¶ÅÊêûÊ∏ÖÊ•öÊúâÂì™Âá†ÁßçÁä∂ÊÄÅËΩ¨ÁßªÔºå‰ªéÂÖ¨‰ºóÂè∑‰∏≠ÂèØ‰ª•ÁúãÂà∞Ôºådp[i][j]ÊÉ≥Ë¶ÅÂæÄÂâçÁßªÂä®ÔºåÂàôÂèØ‰ª•ËøõË°åÂà†Èô§„ÄÅ‰øÆÊîπ„ÄÅÊèíÂÖ•Êìç‰ΩúÔºåÂ¶ÇÊûúÂèåÊåáÈíàÊåáÂêëÁöÑÂ≠óÁ¨¶Áõ∏ÂêåÔºåÂàôÊó†ÈúÄËøõË°å‰ªª‰ΩïÊìç‰ΩúÔºåÁõ¥Êé•ÂêëÂâçÁßªÂä®Â∞±Ë°åÔºå‰πüÂ∞±ÊòØÊ≠§Êó∂ dp[i][j] = dp[i-1][j-1] ; Ââ©‰∏ãÁöÑÊèíÂÖ•„ÄÅÂà†Èô§„ÄÅ‰øÆÊîπÂ¶Ç‰ΩïÂÅöÂë¢‚Ä¶Âèñ‰∏âËÄÖÊúÄÂ∞èÂÄºÂ∞±Â•Ω‰∫ÜÂòõÔºÅÔºÅÔºÅ ÂÖ∂ÂÆûËøô‰∏™Áîª‰∏™DPË°®Â∞±ÈùûÂ∏∏ÁöÑÊ∏ÖÊô∞‰∫ÜÔºåÁîªDPË°®‰πüËÉΩÊèêÈÜíÊàë‰ª¨Ê≥®ÊÑèBase Case,Âõ†‰∏∫Ê≤°ÊúâBase Case ÔºåÊàë‰ª¨ÊòØËÇØÂÆöÂÜô‰∏çÂá∫Êù•DPË°®‰∏≠ÁöÑÂÄºÁöÑÔºõ Êúâ‰∏™Ê≥®ÊÑèÁöÑÁÇπÔºåÂ∞±ÊòØÂ§áÂøòÂΩïÂÅöÊ≥ïÊòØ‰ªé0ÂºÄÂßãÁöÑÔºåÊâÄ‰ª•ÂΩìiÊàñËÄÖj = -1Êó∂ÔºåÊ≠§Êó∂ÁöÑi„ÄÅj‰ª£Ë°®ÁöÑÊòØÊï∞ÁªÑÁöÑ‰∏ãÊ†áÔºåÊòØ‰ªé0ÂºÄÂßãÁöÑÔºåÊØîÂ¶ÇËØ¥Ê≠§Êó∂j = 5ÁöÑÔºåËØ¥ÊòéËøòÊúâ6‰∏™Â≠óÁ¨¶ÈúÄË¶ÅÂà†Èô§ÔºåÊâÄ‰ª•Ë¶ÅËÆ∞Âæó+1 ÔºåËÄådpÊòØ‰ªédp[1][1]ÂºÄÂßãÁöÑ(ÊØîÂ¶Ç‰∏§‰∏™Â≠óÁ¨¶‰∏≤‚Äô‚Äôabc‚Äù‚Äùacd‚ÄùÔºådp[1][1]ÊåáÁöÑÊòØÈÉΩÊåáÂêëa)ÔºÅÔºÅÔºÅÔºÅËøô‰∏™ÂæàÂÆπÊòìÈîôÔºÅ ‰∏âÁßçÂÅöÊ≥ï Â∏∏ËßÑÊö¥ÂäõÈÄíÂΩí(Ë∂ÖÊó∂) 123456789101112131415161718192021class Solution &#123; public int minDistance(String word1, String word2) &#123; int len = dp_violence(word1,word2,word1.length()-1,word2.length()-1); return len; &#125; private int dp_violence(String s1,String s2,int i, int j) &#123; if(i == -1) return j + 1; if(j == -1) return i + 1; if(s1.charAt(i) == s2.charAt(j))&#123; return dp_violence(s1,s2,i-1,j-1); &#125; else&#123; int min = Math.min(dp_violence(s1,s2,i-1,j-1)+1, dp_violence(s1,s2,i-1,j)+1); min = Math.min( dp_violence(s1,s2,i,j-1)+1,min); return min; &#125; &#125;&#125; Â∏¶Â§áÂøòÂΩïÁöÑÈÄíÂΩí(Ëøô‰∏™Ë≤å‰ººÊØîdpÊõ¥‰ºòÁßÄ) 1234567891011121314151617181920212223242526272829class Solution &#123; public int minDistance(String word1, String word2) &#123; int[][] beiwanglu = new int[word1.length()][word2.length()]; int len = dp_beiwanglu(beiwanglu,word1,word2,word1.length()-1,word2.length()-1); return len; &#125; private int dp_beiwanglu(int[][] beiwanglu,String s1, String s2, int i, int j) &#123; if(i == -1) return j + 1; if(j == -1) return i + 1; if(beiwanglu[i][j] != 0)&#123; return beiwanglu[i][j]; &#125; if(s1.charAt(i) == s2.charAt(j))&#123; beiwanglu[i][j] = dp_beiwanglu(beiwanglu,s1,s2,i-1,j-1); return dp_beiwanglu(beiwanglu,s1,s2,i-1,j-1); &#125; else&#123; int min = Math.min(dp_beiwanglu(beiwanglu,s1,s2,i-1,j-1)+1, dp_beiwanglu(beiwanglu,s1,s2,i-1,j)+1); min = Math.min( dp_beiwanglu(beiwanglu,s1,s2,i,j-1)+1,min); beiwanglu[i][j] = min; return min; &#125; &#125;&#125; dp 1234567891011121314151617181920212223class Solution &#123; public int minDistance(String s1, String s2) &#123; int[][] dp = new int[s1.length()+1][s2.length()+1]; for(int i = 0;i&lt;= s1.length();i++)&#123; dp[i][0] = i; &#125; for(int j = 0;j&lt;=s2.length();j++)&#123; dp[0][j] = j; &#125; for(int i = 1;i&lt;= s1.length();i++)&#123; for(int j = 1;j &lt;= s2.length();j++)&#123; if(s1.charAt(i-1) == s2.charAt(j-1))&#123; dp[i][j] = dp[i-1][j-1]; &#125; else&#123; dp[i][j] = Math.min(dp[i-1][j-1] + 1,dp[i-1][j] + 1); dp[i][j] = Math.min(dp[i][j],dp[i][j-1] + 1); &#125; &#125; &#125; return dp[s1.length()][s2.length()]; &#125;&#125; ÊúÄÈïøÂÖ¨ÂÖ±Â≠êÂ∫èÂàóÈóÆÈ¢òÔºàLeetCodeÁ¨¨1143È¢òÔºâÂÖ∏ÂûãÁöÑdp‰∫åÁª¥Êï∞ÁªÑËß£ÂÜ≥ÔºåÂ§™ÁÆÄÂçï‰∫Ü‚Ä¶ Á¨¨‰∏Ä‰∏™Ë¶ÅÊ≥®ÊÑèÁöÑÂ∞±ÊòØËØ•dpÂèØ‰ª•‰ºòÂåñÔºåÂΩìÂèåÊåáÈíàÊåáÂêëÁöÑÂ≠óÁ¨¶‰∏çÁ≠âÊó∂Ôºådp[i-1][j-1]ÂèØ‰ª•‰∏çÁî®ËÄÉËôëÔºÅÔºÅÔºÅÔºÅÂõ†‰∏∫max(dp[i][j-1],dp[i-1][j],dp[i-1][j-1])ÊòØ‰∏ÄÂÆöËΩÆ‰∏çÂà∞ÊúÄÂêéËøô‰∏™ÁöÑÔºõ Á¨¨‰∫å‰∏™Ë¶ÅÊ≥®ÊÑèÁöÑÁÇπÂ∞±ÊòØËÆ∞ÂæóBase Case,ËÆ∞ÂæóË¶ÅÁîªDPË°®ÔºÅ ÂêåÊ†∑Ë¶ÅÊ≥®ÊÑèËøôÈáåÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÂØπÂ∫îÁöÑÂ∞±ÊòØdp[1][1]ÔºÅÔºÅÔºÅÔºÅÔºÅ ‰ª£Á†Å1234567891011121314151617class Solution &#123; public int longestCommonSubsequence(String text1, String text2) &#123; int[][] dp = new int[text1.length() + 1][text2.length() + 1]; for(int i = 1;i &lt;= text1.length();i++)&#123; for(int j = 1;j &lt;=text2.length();j++)&#123; if(text1.charAt(i-1) == text2.charAt(j-1))&#123; dp[i][j] = dp[i-1][j-1] + 1; &#125; else&#123; dp[i][j] = Math.max(dp[i-1][j],dp[i][j-1]); &#125; &#125; &#125; return dp[text1.length()][text2.length()]; &#125;&#125; ÊªëÂä®Á™óÂè£ÁÆóÊ≥ï(Á§∫‰æã:LeetCodeÁ¨¨1143ÔºöÊúÄÂ∞èË¶ÜÁõñÂ≠ê‰∏≤ÈóÆÈ¢ò) TipÔºöÊúÄÈáçË¶ÅÁöÑÊòØËøáÊúÄÂêé‰∏Ä‰∏™Áî®‰æãÁöÑËâ∞ËæõÔºåÂõ†‰∏∫ÈúÄË¶ÅËÄÉËôëÂà∞IntegerÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåË∂ÖËøá-127~128‰πãÂêé‰ºönew‰∏Ä‰∏™Êñ∞ÁöÑÂØπË±°ÔºåÂØºËá¥Â∞±ÁÆóÊòØÂÄºÁõ∏Á≠âÔºåÂÖ∂‰πü‰ºöÊòæÁ§∫‰∏çÁõ∏Á≠âÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅ ÊñáÁ´†ÈìæÊé•ÊªëÂä®Á™óÂè£ÁÆóÊ≥ï ‰ª£Á†ÅÊñáÁ´†‰∏≠‰ΩøÁî®C++ÂÆûÁé∞ÁöÑÔºåÊàëÊòØÂú®LeetCodeÁî®ÁöÑJavaÂÆûÁé∞ÁöÑ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566class Solution &#123; public String minWindow(String s, String t) &#123; // Âà©Áî®ÂèåÊåáÈíàÁöÑÊÄùÊÉ≥ÔºåÂÖàËÆ∞ÂΩï‰∏ãt‰ºöÂá∫Áé∞ÁöÑÂçïËØç‰ª•ÂèäÊ¨°Êï∞ // ÁÑ∂ÂêéÂè≥ÊåáÈíàÂºÄÂßãÈÅçÂéÜÔºåÊØèÂΩì‰∏Ä‰∏™ÂçïËØçÂèäÂÖ∂Ê¨°Êï∞Âà∞‰ΩçÂêéÔºåÂΩìÂâçÂçïËØçÂ∞±ÂåπÈÖçÂÆåÊàêÔºåÁõ¥Âà∞ÊâÄÊúâÂçïËØçÈÉΩÂåπÈÖçÂÆåÊàê // ÁÑ∂ÂêéËÆ∞ÂΩï‰∏ãÂΩìÂâçÁöÑÂ≠ê‰∏≤ÁöÑÂºÄÂßãÂíåÁªìÂ∞æÔºåÂç≥Â∑¶Âè≥ÊåáÈíàÁöÑ‰ΩçÁΩÆ // ÁÑ∂ÂêéÂºÄÂßãËØïÂõæÁßªÂä®Â∑¶ÊåáÈíàÔºåÂΩìÁÑ∂ÂâçÊèêÊòØt‰∏≠ÊâÄÊúâÂ≠óÁ¨¶ÁÑ∂ÂêéÂÖ®ÈÉ®ÂåπÈÖçÂÆåÊàêÔºåÂê¶ÂàôÂ∞±Ë∑≥Âá∫Âæ™ÁéØÔºåÁªßÁª≠Ëµ∞Âè≥ËæπÊåáÈíà // Áõ¥Âà∞Âè≥ËæπÊåáÈíàËµ∞Âà∞Â∫ïÔºåÂ¶ÇÊûúËµ∞Âà∞Â∫ïÈïøÂ∫¶‰æùÊóßÊ≤°ÊúâÔºåÂàôËØ¥ÊòéÊâæ‰∏çÂà∞ÊúÄÂ∞èÂ≠ê‰∏≤ÔºåËøîÂõû"" Âê¶ÂàôËøîÂõûÈÄÇÂΩìÁöÑÂ≠ê‰∏≤ int left = 0,right = 0; //ËÆ°ÁÆóÂåπÈÖçÁöÑÂçïËØçÊï∞Èáè int match = 0; //ÁªüËÆ°ÁõÆÊ†áÂ≠óÁ¨¶‰∏≤ÁöÑ‰∏çÂêåÂ≠óÁ¨¶ÁöÑ‰∏™Êï∞ int nums = 0; int min_length = Integer.MAX_VALUE; int start = 0; char[] t_char = t.toCharArray(); char[] s_char = s.toCharArray(); HashMap&lt;Character, Integer&gt; windows = new HashMap&lt;Character, Integer&gt;(); HashMap&lt;Character,Integer&gt; tt = new HashMap&lt;Character, Integer&gt;(); // Áî®‰∏§‰∏™mapÊù•Â≠òÂÇ®‰∏§‰∏™Â≠óÁ¨¶‰∏≤ÔºåÂ≠òÂÇ®ÊñπÂºè‰∏∫key‰∏∫ÂçïËØçÔºåvalue‰∏∫ÂçïËØçÂá∫Áé∞ÁöÑÊï∞Èáè // for (char t1: t_char)&#123; if(tt.containsKey(t1)) &#123; int value = tt.get(t1).intValue(); tt.put(t1, ++value); &#125; else&#123; nums++; tt.put(t1,1); &#125; &#125; while(right &lt; s.length())&#123; if(windows.containsKey(s_char[right]))&#123; int windows_value = windows.get(s_char[right]).intValue(); windows.put(s_char[right],++windows_value); &#125; else&#123; windows.put(s_char[right],1); &#125; //Â¶ÇÊûúÂÖ®ÈÉ®Á¨¶ÂêàË¶ÅÊ±Ç if(tt.containsKey(s_char[right]) &amp;&amp; windows.get(s_char[right]).intValue() == tt.get(s_char[right]).intValue())&#123; match++; &#125; right++; while(match == nums)&#123; //ËØ¥ÊòéÂ∑≤ÁªèÊâæÂà∞‰∏Ä‰∏™Á¨¶ÂêàÊù°‰ª∂ÁöÑ‰∫ÜÔºåËÆ∞ÂΩï‰∏ãËØ•Â≠óÁ¨¶‰∏≤ÁöÑËµ∑ÂßãÂíåÁªìÊùü‰ΩçÁΩÆ int Len = right - left; if(Len &lt; min_length) &#123; min_length = Math.min(min_length,Len); start = left; &#125; int left_value = windows.get(s_char[left]).intValue(); left_value--; windows.put(s_char[left],left_value); if(tt.containsKey(s_char[left]) &amp;&amp; windows.get(s_char[left]).intValue() &lt; tt.get(s_char[left]).intValue())&#123; match--; &#125; left++; &#125; &#125; return min_length == Integer.MAX_VALUE ? "" : s.substring(start,min_length +start); &#125;&#125; ÊúÄÂ§ßÂ≠êÂ∫èÂàóÂíå(LeetCodeÁ¨¨53È¢ò)ÂÖàÊÄªÁªì‰∏Ä‰∏ãÔºåÂèØ‰ª•ËøêÁî® dp Âíå ÊªëÂä®Á™óÂè£ ‰∏§ÁßçÊñπÊ≥ïÔºÅÔºÅÔºÅ È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Êï¥Êï∞Êï∞ÁªÑ nums ÔºåÊâæÂà∞‰∏Ä‰∏™ÂÖ∑ÊúâÊúÄÂ§ßÂíåÁöÑËøûÁª≠Â≠êÊï∞ÁªÑÔºàÂ≠êÊï∞ÁªÑÊúÄÂ∞ëÂåÖÂê´‰∏Ä‰∏™ÂÖÉÁ¥†ÔºâÔºåËøîÂõûÂÖ∂ÊúÄÂ§ßÂíå„ÄÇ Á§∫‰æã: 123ËæìÂÖ•: [-2,1,-3,4,-1,2,1,-5,4],ËæìÂá∫: 6Ëß£Èáä: ËøûÁª≠Â≠êÊï∞ÁªÑ [4,-1,2,1] ÁöÑÂíåÊúÄÂ§ßÔºå‰∏∫ 6„ÄÇ ÊÄùË∑Ø dp Ë¶ÅÁöÑÊòØÂ≠ê‰∏≤ÔºåÂøÖÁÑ∂ÂèØ‰ª•Áî®dpÔºåËÄå‰∏îÊòØÂçïÂ≠ê‰∏≤‰∏îÈùûÂõûÊñáÔºåÂàôÂøÖÁÑ∂‰ΩøÁî®‰∏ÄÁª¥dpÊï∞ÁªÑ Âè™Ë¶ÅÂÆö‰πâÂ•Ω‰∫ÜdpÊï∞ÁªÑÔºåËøôÈÅìÈ¢òÂ∞±Ê≤°Êúâ‰ªª‰ΩïÈöæÂ∫¶Ôºådp[i]ÂÆö‰πâ‰∏∫‰ª•i‰∏∫Á¥¢ÂºïÁöÑÂ≠óÁ¨¶ÁªìÂ∞æÁöÑÊúÄÂ§ßÂíå Âàôdp[i] = Math.max(dp[i-1],nums[i])ÔºåÁÑ∂ÂêéÂèñdp[i]‰∏≠ÊúÄÂ§ßÁöÑÂç≥ÂèØÔºÅ ËøôÈ¢òÂè™Êúâ‰∏Ä‰∏™Â∞èÈöæÁÇπÔºåÈÇ£Â∞±ÊòØÊâæBase Case,Â•ΩÂÉèÂπ∂‰∏çÂ≠òÂú®Base Case,‰ΩÜÊòØÊàë‰ª¨ÂèØ‰ª•ÂàõÈÄ†Base Case,ÂèØ‰ª•‰ª§dp[0] = nums[0]ÔºåËøôÊ†∑Â∞±ÊúâBase Case‰∫ÜÔºåÂêåÊó∂Ê≥®ÊÑèÂìàÔºåËøôÈáå‰∏çÈúÄË¶ÅÂ∞ÜdpÊï∞ÁªÑÁöÑÂ§ßÂ∞èÂèò‰∏∫nums.length+1,Âõ†‰∏∫Ëøô‰∏™È¢òÁõÆ‰∏çÂ≠òÂú®Base Case,ÊâÄ‰ª•dpÂè™‰ºö‰∫ßÁîün‰∏™Êï∞Ôºå‰∏çÈúÄË¶Ån+1‰∏™Â≠òÂÇ®Á©∫Èó¥ÔºåÂÉè‰∏äÊñáÁöÑdp‰∫åÁª¥Êï∞ÁªÑÔºåÂ∞±Â≠òÂú®BaseCaseÔºåÂΩìÊúâ‰∏Ä‰∏™‰∏∫0Êó∂ÔºåÊúâÁõ∏Â∫îÁöÑÂèñÂÄºÔºÅÊÄªËÄåË®Ä‰πãÔºå‰∏ÄÂÆöË¶ÅÁâπÂà´Ê≥®ÊÑèdpÁöÑÊï∞ÁªÑÂ§ßÂ∞è‰ª•ÂèäBaseCase„ÄÇ ÊªëÂä®Á™óÂè£ ÊØîËæÉÁÆÄÂçïÁöÑÊÄùË∑Ø„ÄÇÂ∞±ÊòØsumÂ¶ÇÊûúÂ§ß‰∫é0‰∫ÜÔºåÂ∞±ÁßªÂä®Âè≥ÊåáÈíàÂ∞±Ë°åÔºåÂ¶ÇÊûúÊòØÂ∞è‰∫é0‰∫ÜÔºåÂ∞±ÊØîËæÉsumÂíånum[i]ÔºåÂèñÊúÄÂ§ßÂÄº(Áõ∏ÂΩì‰∫éÁßªÂä®Â∑¶ÊåáÈíà)ÔºåÁõ¥Âà∞Âæ™ÁéØÁªìÊùü„ÄÇ ‰ª£Á†Å dp 12345678910111213class Solution &#123; public int maxSubArray(int[] nums) &#123; //res[i] = Math.max(res[i-1] + nums[i],nums[i]) int[] res = new int[nums.length]; res[0] = nums[0]; int max = res[0]; for(int i = 1;i &lt; nums.length;i++)&#123; res[i] = Math.max(res[i-1] + nums[i],nums[i]); max = Math.max(res[i],max); &#125; return max; &#125;&#125; ÊªëÂä®Á™óÂè£ 1234567891011121314class Solution &#123; public int maxSubArray(int[] nums) &#123; int res = nums[0]; int sum = 0; for(int num:nums)&#123; if(sum &gt; 0) sum += num; else sum = num; res = Math.max(sum,res); &#125; return res; &#125;&#125; ÊâìÂÆ∂Âä´Ëàç I„ÄÅII„ÄÅIII (LeetCodeÁ¨¨198„ÄÅ213„ÄÅ337)ÊñáÁ´†ÈìæÊé•ÊâìÂÆ∂Âä´ËàçÁ≥ªÂàó I ÁöÑ‰ª£Á†Å Ëá™Â∑±ÂÜôÁöÑ(ÊÑüËßâÂÜôÁöÑÊúâÁÇπÂï∞Âó¶~) 123456789101112131415161718192021222324252627class Solution &#123; public int rob(int[] nums) &#123; int[] dp = new int[nums.length]; int res = 0; if(nums.length == 0 )&#123; return 0; &#125; if(nums.length == 1)&#123; dp[0] = nums[0]; res = dp[0]; return res; &#125; if(nums.length == 2)&#123; dp[1] = Math.max(nums[1],nums[0]); res = dp[1]; return res; &#125; dp[0] = nums[0]; dp[1] = Math.max(nums[1],nums[0]); for(int i = 2;i &lt; nums.length;i++)&#123; dp[i] = Math.max(dp[i-1],dp[i-2]+nums[i]); &#125; res = Math.max(dp[nums.length-1],res) return res; &#125;&#125; È´òÂàÜÈ¢òËß£ 123456789101112class Solution &#123; public int rob(int[] nums) &#123; int n = nums.length; if (n &lt;= 1) return n == 0 ? 0 : nums[0]; int[] memo = new int[n]; memo[0] = nums[0]; memo[1] = Math.max(nums[0], nums[1]); for (int i = 2; i &lt; n; i++) memo[i] = Math.max(memo[i - 1], nums[i] + memo[i - 2]); return memo[n - 1]; &#125;&#125; II ÁöÑ‰ª£Á†ÅÂàÜ‰∏§Ê¨°dpÂ∞±Â•Ω‰∫ÜÔºå‰∏ÄÊ¨°[0,nums.length-2]Ôºå‰∏ÄÊ¨°[1,nums.length-1]ÔºåÂèñÊúÄÂ§ßÂÄºÂ∞±Â•Ω~ 12345678910111213141516171819202122232425262728293031class Solution &#123; public int rob(int[] nums) &#123; int[] dp = new int[nums.length]; int res = 0; if(nums.length == 0 )&#123; return 0; &#125; if(nums.length == 1)&#123; dp[0] = nums[0]; res = dp[0]; return res; &#125; if(nums.length == 2)&#123; dp[1] = Math.max(nums[1],nums[0]); res = dp[1]; return res; &#125; dp[0] = nums[0]; dp[1] = Math.max(nums[1],nums[0]); for(int i = 2;i &lt; nums.length-1;i++)&#123; dp[i] = Math.max(dp[i-1],dp[i-2]+nums[i]); &#125; dp[1] = nums[1]; dp[2] = Math.max(nums[1],nums[2]); for(int i = 3;i &lt; nums.length;i++)&#123; dp[i] = Math.max(dp[i-1],dp[i-2]+nums[i]); &#125; res = Math.max(dp[nums.length-1],dp[nums.length-2]); return res; &#125;&#125; III ÁöÑ‰ª£Á†ÅËøôÊòØ‰∏Ä‰∏™Ê†ëÂΩ¢ÁöÑdpÈóÆÈ¢òÔºåËß£ÂÜ≥ÊñπÊ≥ïÊòØÈááÁî®‰∏Ä‰∏™‰∏ÄÁª¥Êï∞ÁªÑÔºå‰πãÂâçÁöÑI IIÂè™Áî®Âà∞‰∫Üdp[nums.length-1]ÔºåËøôÈáåÁî®Âà∞‰∫Ü‰∏§‰∏™,ËÄå‰∏îËøôÈáåÁöÑdpÁ´üÁÑ∂Áî®‰∫ÜÈÄíÂΩíÂìü‚Ä¶ Tip:ÁâπÊÆäÂÅöÊ≥ïËÆ∞ÂøÜËÆ∞ÂøÜËÆ∞ÂøÜÔºÅÔºÅÔºÅ 12345678910111213141516171819202122232425262728293031/** * Definition for a binary tree node. * public class TreeNode &#123; * int val; * TreeNode left; * TreeNode right; * TreeNode(int x) &#123; val = x; &#125; * &#125; */class Solution &#123; public int rob(TreeNode root) &#123; int[] res = robIn(root); return Math.max(res[0],res[1]); &#125; private static int[] robIn(TreeNode root)&#123; //Áî®‰∏Ä‰∏™Êï∞ÁªÑËÆ∞ÂΩïÂÅ∑Ê†πËäÇÁÇπÂíå‰∏çÂÅ∑Ê†πËäÇÁÇπ‰∏§ÁßçÊÉÖÂÜµÔºåËøôÈáåÂæàÁâπÊÆäÁî®‰∫ÜdpÂêåÊó∂ËøòÊê≠ÈÖç‰∫ÜÈÄíÂΩí //ËøôÂ∞±ÊòØËá™Â∫ïÂêë‰∏äÁöÑÈÄíÂΩíÔºåËØ¶ÊÉÖÂèØ‰ª•ËßÅLeetCodeÈÄíÂΩí‰∏ìÈ¢ò int[] res = new int[2]; if(root == null)&#123; return res; &#125; int[] left = robIn(root.left); int[] right = robIn(root.right); //ÂÅ∑Ê†πËäÇÁÇπ res[0] = root.val + left[1] + right[1]; //‰∏çÂÅ∑Ê†πËäÇÁÇπ res[1] = Math.max(left[0],left[1]) + Math.max(right[0],right[1]); return res; &#125;&#125;]]></content>
      <categories>
        <category>Á®ãÂ∫èÂëò</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>LeetCode</tag>
        <tag>dp</tag>
        <tag>‰∫åÂàÜ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊÉ≥Â≠¶ÁöÑ‰∏úË•ø]]></title>
    <url>%2F2019%2F12%2F20%2F%E6%83%B3%E5%AD%A6%E7%9A%84%E4%B8%9C%E8%A5%BF.html</url>
    <content type="text"><![CDATA[dp ‰∫åÂèâÊ†ëÈóÆÈ¢òÁªÉ‰π† ÈìæË°®ÈóÆÈ¢òÈõÜ‰∏≠ÁªÉ‰π† ÂæÆÊúçÂä° ËÆæËÆ°Ê®°Âºè javaÂü∫Á°Ä Èù¢ÁªèspringÂ∏∏ÈóÆÁöÑÈóÆÈ¢ò Âπ∂Âèë„ÄÅJVM]]></content>
  </entry>
  <entry>
    <title><![CDATA[SpringCloud ÂæÆÊúçÂä°Á¨îËÆ∞]]></title>
    <url>%2F2019%2F12%2F13%2FSpringCloud%E7%AC%94%E8%AE%B0.html</url>
    <content type="text"><![CDATA[ÂæÆÊúçÂä°Êû∂ÊûÑÊ¶ÇËø∞Âçï‰ΩìÊû∂ÊûÑ‰∏Ä‰∏™ÂΩíÊ°£ÂåÖ(warÊ†ºÂºè)ÂåÖÂê´ÊâÄÊúâÂäüËÉΩÁöÑÂ∫îÁî®Á®ãÂ∫èÔºåÈÄöÂ∏∏Áß∞‰∏∫Âçï‰ΩìÂ∫îÁî®„ÄÇ Â≠òÂú®ÁöÑÈóÆÈ¢òÔºö Â§çÊùÇÊÄßÈ´ò ÊäÄÊúØÂÄ∫Âä°(‰∏çÂùè‰∏ç‰øÆ) ÈÉ®ÁΩ≤È¢ëÁéá‰Ωé ÂèØÈù†ÊÄßÂ∑Æ Êâ©Â±ïËÉΩÂäõÂèóÈôêÔºå‰∏çÂêåÊ®°ÂùóÂèØËÉΩÈúÄË¶ÅÁöÑÈÖçÁΩÆ‰∏ç‰∏ÄÊ†∑ÔºåÊúâÁöÑÈúÄË¶ÅCPUÂ•Ω‰∏ÄÁÇπÁöÑÔºåÊúâÁöÑÈúÄË¶ÅÂ≠òÂÇ®Â§ß‰∏ÄÁÇπÁöÑÔºå‰∏çËÉΩÊ†πÊçÆ‰∏öÂä°Ê®°ÂùóÁöÑÈúÄË¶ÅËøõË°å‰º∏Áº© ÈòªÁ¢çÊäÄÊúØÂàõÊñ∞ÔºåÂçï‰ΩìÂ∫îÁî®ÂæÄÂæÄ‰ΩøÁî®Áªü‰∏ÄÁöÑÊäÄÊúØÂπ≥Âè∞ÊàñËÄÖÊñπÊ°àËß£ÂÜ≥ÊâÄÊúâÁöÑÈóÆÈ¢ò ÂæÆÊúçÂä°ÂæÆÊúçÂä°Êû∂ÊûÑÈ£éÊ†ºÔºöÂ∞Ü‰∏Ä‰∏™Âçï‰∏ÄÂ∫îÁî®Á®ãÂ∫èÂºÄÂèë‰∏∫‰∏ÄÁªÑÂ∞èÂûãÊúçÂä°ÁöÑÊñπÊ≥ïÔºåÊØè‰∏™ÊúçÂä°ËøêË°åÂú®Ëá™Â∑±ÁöÑËøõÁ®ã‰∏≠ÔºåÊúçÂä°Èó¥ÈÄö‰ø°ÈááÁî®ËΩªÈáèÁ∫ßÈÄö‰ø°Êú∫Âà∂ÔºåÂèØÈÄöËøáÂÖ®Ëá™Âä®ÈÉ®ÁΩ≤Êú∫Âà∂Áã¨Á´ãÈÉ®ÁΩ≤„ÄÇËøô‰∫õÊúçÂä°ÂÖ±Áî®‰∏Ä‰∏™ÊúÄÂ∞èÂûãÁöÑÈõÜ‰∏≠ÂºèÁöÑÁÆ°ÁêÜÔºå‰∏çÂêåÊúçÂä°ÂèØ‰ª•ÈááÁî®‰∏çÂêåÁöÑËØ≠Ë®ÄÂºÄÂèëÔºåÂèØ‰ª•‰ΩøÁî®‰∏çÂêåÁöÑÊï∞ÊçÆÂ≠òÂÇ®ÊäÄÊúØ„ÄÇ ÁâπÊÄß ÊØè‰∏™ÂæÆÊúçÂä°ÂèØ‰ª•Áã¨Á´ãËøêË°åÂú®Ëá™Â∑±ÁöÑËøõÁ®ã‰∏≠ ÊØè‰∏™ÊúçÂä°‰∏∫Áã¨Á´ãÁöÑ‰∏öÂä°ÂºÄÂèë ÂæÆÊúçÂä°ÈÄöËøáÁ±ª‰ºº‰∫éRESTful APIÁ≠â‰∏Ä‰∫õËΩªÈáèÁ∫ßÁöÑÈÄö‰ø°Êú∫Âà∂ËøõË°åÈÄö‰ø° ÂÖ®Ëá™Âä®ÁöÑÈÉ®ÁΩ≤Êú∫Âà∂ ‰ºòÁÇπ Êòì‰∫éÂºÄÂèëÂíåÁª¥Êä§ ÂêØÂä®ÈÄüÂ∫¶Âø´ Â±ÄÈÉ®‰øÆÊîπÊòìÈÉ®ÁΩ≤ ÊäÄÊúØÊ†àÂπ∂‰∏çÂèóÈôê ÊåâÈúÄ‰º∏Áº© Áº∫ÁÇπ ËøêÁª¥Ë¶ÅÊ±ÇÈ´òÔºåÂõ†‰∏∫‰ºöÊúâÂá†ÂçÅÁîöËá≥‰∏äÁôæ‰∏™ÊúçÂä°Âçè‰ΩúËøêË°å ÂàÜÂ∏ÉÂºèÂõ∫ÊúâÁöÑÂ§çÊùÇÊÄß Êé•Âè£Ë∞ÉÊï¥ÊàêÊú¨È´ò ÈáçÂ§çÂä≥Âä® ÂæÆÊúçÂä°ËÆæËÆ°ÂéüÂàô Âçï‰∏ÄËÅåË¥£ÂéüÂàô(SOLIDÂéüÂàô‰πã‰∏Ä) ÊúçÂä°Ëá™Ê≤ªÂéüÂàô„ÄÇÂç≥ÊØè‰∏™ÂæÆÊúçÂä°Â∫îÂÖ∑Â§áÁã¨Á´ãÁöÑ‰∏öÂä°ËÉΩÂäõ„ÄÅ‰æùËµñ‰∏éËøêË°åÁéØÂ¢É„ÄÇ ËΩªÈáèÁ∫ßÈÄö‰ø°Êú∫Âà∂„ÄÇÂ∏∏Áî®ÁöÑÊúâREST„ÄÅAMQP„ÄÅSTOMP„ÄÅMQTTÁ≠â„ÄÇ ÂæÆÊúçÂä°Á≤íÂ∫¶„ÄÇËøô‰∏™ÊØîËæÉÈöæ‰ª•ÊéßÂà∂Ôºå‰∏ÄËà¨ÈÄöËøáÈ¢ÜÂüüÈ©±Âä®ËÆæËÆ°(Domain Driven DesignÔºåDDD)‰∏≠ÁöÑÈôêÂÆö‰∏ä‰∏ãÊñáÂèØ‰Ωú‰∏∫ÂàíÂàÜÂæÆÊúçÂä°ËæπÁïå„ÄÅÁ°ÆÂÆöÂæÆÊúçÂä°Á≤íÂ∫¶„ÄÇ ÂæÆÊúçÂä°Êû∂ÊûÑÊäÄÊúØÈÄâÂûã‰∏ªÊµÅÁöÑËß£ÂÜ≥ÊñπÊ°àÊòØ SpringCloud„ÄÅDubbo ÂÖ∑‰ΩìÁöÑÊ°ÜÊû∂ÂØπÊØîÔºöDubbo VS SpringCloud ÂæÆÊúçÂä°ÂºÄÂèëÊ°ÜÊû∂‚Äî‚ÄîSpring CloudSpring Cloud ÁÆÄ‰ªã Âπ∂‰∏çÊòØ‰∫ëËÆ°ÁÆóËß£ÂÜ≥ÊñπÊ°àÔºåÊòØÂú®Spring BootÂü∫Á°Ä‰∏äÁî®‰∫éÂø´ÈÄüÊûÑÂª∫ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÁöÑÈÄöÁî®Ê®°ÂºèÁöÑÂ∑•ÂÖ∑ÈõÜ ‰ΩøÁî®Spring CloudÂºÄÂèëÁöÑÁ®ãÂ∫èÈùûÂ∏∏ÈÄÇÂêàÂú®DockerÊàñËÄÖPaaS‰∏äÈÉ®ÁΩ≤,ÊâÄ‰ª•ÂèàÂè´‰∫ëÂéüÁîüÂ∫îÁî®Ôºå‰∫ëÂéüÁîüÂèØÁêÜËß£‰∏∫Èù¢Âêë‰∫ëÁéØÂ¢ÉÁöÑËΩØ‰ª∂Êû∂ÊûÑ ‰∫ëÂéüÁîüÊû∂ÊûÑÁöÑÊñπÊ≥ïËÆ∫ÂíåÊúÄ‰Ω≥ÂÆûË∑µÔºö12-factor Apps TipsÔºö ‰∫ëÊúçÂä°ÂàÜ‰∏∫‰∏âÁ±ªÔºåÂàÜÂà´ÊòØ IaaS(Âü∫Á°ÄËÆæÊñΩÊúçÂä°)„ÄÅPaaS(Âπ≥Âè∞ÊúçÂä°)„ÄÅSaaS(ËΩØ‰ª∂ÊúçÂä°) ‰º†ÈÄÅÈó®ÔºöIaaSÔºåPaaSÔºåSaaS ÁöÑÂå∫Âà´ Spring Cloud Âíå Spring Boot ÁöÑËÅîÁ≥ªÈ¶ñÂÖàÔºåÁü•‰πé‰∏äÂØπËøô‰∏™ÊúâÊØîËæÉÂ•ΩÁöÑÂõûÁ≠îÔºöSpring Cloud &amp; Spring Boot ÊÄªÁªì‰∏Ä‰∏ãËØ¥ÁöÑÊØîËæÉÂ•ΩÁöÑÔºö spring CloudÊòØ‰∏Ä‰∏™Âü∫‰∫éSpring BootÂÆûÁé∞ÁöÑ‰∫ëÂ∫îÁî®ÂºÄÂèëÂ∑•ÂÖ∑ÔºåÂÆÉ‰∏∫Âü∫‰∫éJVMÁöÑ‰∫ëÂ∫îÁî®ÂºÄÂèë‰∏≠ÁöÑÈÖçÁΩÆÁÆ°ÁêÜ„ÄÅÊúçÂä°ÂèëÁé∞„ÄÅÊñ≠Ë∑ØÂô®„ÄÅÊô∫ËÉΩË∑ØÁî±„ÄÅÂæÆ‰ª£ÁêÜ„ÄÅÊéßÂà∂ÊÄªÁ∫ø„ÄÅÂÖ®Â±ÄÈîÅ„ÄÅÂÜ≥Á≠ñÁ´ûÈÄâ„ÄÅÂàÜÂ∏ÉÂºè‰ºöËØùÂíåÈõÜÁæ§Áä∂ÊÄÅÁÆ°ÁêÜÁ≠âÊìç‰ΩúÊèê‰æõ‰∫Ü‰∏ÄÁßçÁÆÄÂçïÁöÑÂºÄÂèëÊñπÂºè„ÄÇ spring boot ÁöÑ‰ºòÁÇπÊòØÂèØ‰ª•Âø´ÈÄüÂêØÂä®ÔºåÂø´ÈÄüÊûÑÂª∫Â∫îÁî®Á®ãÂ∫èÔºåËÄå‰∏çÈúÄË¶ÅÂ§™Â§öÁöÑÈÖçÁΩÆÊñá‰ª∂„ÄÇ spring cloud ÊòØÂàÜÂ∏ÉÂºèÂºÄÂèëÁöÑËß£ÂÜ≥ÊñπÊ°àÔºåÂü∫‰∫éspring boot,Âú®spring bootÂÅöËæÉÂ∞ëÁöÑÈÖçÁΩÆÔºå‰æøÂèØÊàê‰∏∫ spring cloud ‰∏≠ÁöÑ‰∏Ä‰∏™ÂæÆÊúçÂä°„ÄÇ ÊúÄÂü∫Á°ÄÁöÑÈÉΩÊòØspringÔºåÁÑ∂ÂêéÂú®Ëøô‰∏™Âü∫Á°Ä‰∏äspring bootÂÅö‰∫Ü‰∏Ä‰∫õËá™Âä®ÈÖçÁΩÆÂíåÂÆûÁé∞ÔºåÁÑ∂ÂêéÂèàÂú®spring bootÁöÑÂü∫Á°Ä‰∏äÂä†ÂÖ•‰∫ÜÂàÜÂ∏ÉÂºèË¥üËΩΩÂùáË°°Á≠âÂäüËÉΩÔºåËøôÊâçÊúâ‰∫Üspring cloud„ÄÇ Spring cloudÊòØÂæÆÊúçÂä°ÂºÄÂèëÂ•ó‰ª∂„ÄÇspringboot=spring+springmvcÔºåspringcloud=springboot+ribbon+Ê≥®ÂÜå‰∏≠ÂøÉ+ÁÜîÊñ≠Âô®+‚Ä¶Á≠â‰∏ÄÁ≥ªÂàóÁªÑ‰ª∂„ÄÇ Spring Cloud ÁâπÁÇπ Á∫¶ÂÆö‰ºò‰∫éÈÖçÁΩÆ ÈöêËóè‰∫ÜÁªÑ‰ª∂Â§çÊùÇÊÄßÔºåÂπ∂‰∏îÊèê‰æõÂ£∞ÊòéÂºèÁöÑÈÖçÁΩÆÊñπÂºè ËΩªÈáèÁ∫ßÁöÑÁªÑ‰ª∂ÔºåÂ¶ÇEureka„ÄÅZuulÁ≠â Ëß£ËÄ¶ÔºåÁÅµÊ¥ª Spring Cloud ÁâàÊú¨‰ª•SRXÂΩ¢ÂºèÂëΩÂêçÁâàÊú¨Âè∑ÔºåÁâàÊú¨Âè∑ÂâçÈù¢‰ºöÊúâ‰∏Ä‰∏™ release train„ÄÇ ‰ªé‰ª•ÂæÄÁöÑÁâàÊú¨ÊúâDalston„ÄÅEdgware„ÄÅFinchley„ÄÅGreenwichÔºåÊ≠£Âú®Â≠µÂåñÁöÑÊúâSpringCloud Alibaba„ÄÇ Spring Cloud ÂÆûÊàòÂæÆÊúçÂä°(FinchleyÁâàÊú¨)Ê¶ÇËø∞Spring CloudÊîØÊåÅÁöÑÊèí‰ª∂‰ºóÂ§öÔºåÂÖàÊù•Áúã‰∏Ä‰∏ãSpring Cloud‰∏≠ÊñáÁΩëÊèê‰æõÁöÑÊØîËæÉ‰ºòÁßÄÁöÑÊèí‰ª∂Ôºö Spring CloudÈõÜÊàêÁöÑÁõ∏ÂÖ≥‰ºòË¥®È°πÁõÆÊé®Ëçê EurekaÔºöÊ≥®ÂÜå‰∏≠ÂøÉÔºå‰∫ëÁ´ØÊúçÂä°ÂèëÁé∞ÔºåÂÆûÁé∞‰∫ëÁ´Ø‰∏≠Èó¥Â±ÇÊúçÂä°ÂèëÁé∞ÂíåÊïÖÈöúËΩ¨Áßª RibbonÔºöË¥üËΩΩÂùáË°°ÔºåÂèØ‰ª•ÊúâÂ§öÁßçË¥üËΩΩÂùáË°°ÁöÑÁ≠ñÁï•‰æõÈÄâÊã©ÔºåÂèØÈÖçÂêàEurekaÂíåHystrix‰ΩøÁî® HystrixÔºöÁÜîÊñ≠Âô®ÔºåÂÆπÈîôÁÆ°ÁêÜÂ∑•ÂÖ∑ÔºåÊó®Âú®ÈÄöËøáÁÜîÊñ≠Êú∫Âà∂ÊéßÂà∂ÊúçÂä°ÂíåÁ¨¨‰∏âÊñπÂ∫ìÁöÑËäÇÁÇπ,‰ªéËÄåÂØπÂª∂ËøüÂíåÊïÖÈöúÊèê‰æõÊõ¥Âº∫Â§ßÁöÑÂÆπÈîôËÉΩÂäõ TurbineÔºöTurbineÊòØËÅöÂêàÊúçÂä°Âô®ÂèëÈÄÅ‰∫ã‰ª∂ÊµÅÊï∞ÊçÆÁöÑ‰∏Ä‰∏™Â∑•ÂÖ∑ÔºåÁî®Êù•ÁõëÊéßÈõÜÁæ§‰∏ãhystrixÁöÑmetricsÊÉÖÂÜµÔºàÂèØËßÜÂåñÔºâ FeignÔºöÂ£∞ÊòéÂºè„ÄÅÊ®°ÂùóÂåñÁöÑHTTPÂÆ¢Êà∑Á´ØÔºåÈõÜÊàê‰∫ÜË¥üËΩΩÂùáË°° ZuulÔºö‰∫ëÂπ≥Âè∞‰∏äÊèê‰æõÂä®ÊÄÅË∑ØÁî±ÔºåÁõëÊéßÔºåÂºπÊÄßÔºåÂÆâÂÖ®Á≠âËæπÁºòÊúçÂä°ÁöÑÊ°ÜÊû∂„ÄÇZuul Áõ∏ÂΩì‰∫éÊòØËÆæÂ§áÂíå Netflix ÊµÅÂ∫îÁî®ÁöÑ Web ÁΩëÁ´ôÂêéÁ´ØÊâÄÊúâËØ∑Ê±ÇÁöÑÂâçÈó® ConfigÔºöÈÖçÁΩÆÁÆ°ÁêÜÂ∑•ÂÖ∑ÂåÖÔºåËÆ©‰Ω†ÂèØ‰ª•ÊääÈÖçÁΩÆÊîæÂà∞ËøúÁ®ãÊúçÂä°Âô®ÔºåÈõÜ‰∏≠ÂåñÁÆ°ÁêÜÈõÜÁæ§ÈÖçÁΩÆÔºåÁõÆÂâçÊîØÊåÅÊú¨Âú∞Â≠òÂÇ®„ÄÅGit‰ª•ÂèäSubversion BusÔºö‰∫ã‰ª∂„ÄÅÊ∂àÊÅØÊÄªÁ∫øÔºåÁî®‰∫éÂú®ÈõÜÁæ§Ôºà‰æãÂ¶ÇÔºåÈÖçÁΩÆÂèòÂåñ‰∫ã‰ª∂Ôºâ‰∏≠‰º†Êí≠Áä∂ÊÄÅÂèòÂåñÔºåÂèØ‰∏éSpring Cloud ConfigËÅîÂêàÂÆûÁé∞ÁÉ≠ÈÉ®ÁΩ≤ SleuthÔºöÊó•ÂøóÊî∂ÈõÜÂ∑•ÂÖ∑ÂåÖÔºåÂ∞ÅË£Ö‰∫ÜDapperÂíålog-basedËøΩË∏™‰ª•ÂèäZipkinÂíåHTraceÊìç‰ΩúÔºå‰∏∫SpringCloudÂ∫îÁî®ÂÆûÁé∞‰∫Ü‰∏ÄÁßçÂàÜÂ∏ÉÂºèËøΩË∏™Ëß£ÂÜ≥ÊñπÊ°à StreamÔºöÊï∞ÊçÆÊµÅÊìç‰ΩúÂºÄÂèëÂåÖÔºåÂ∞ÅË£Ö‰∫Ü‰∏éRedis,Rabbit„ÄÅKafkaÁ≠âÂèëÈÄÅÊé•Êî∂Ê∂àÊÅØ SecurityÔºöÂü∫‰∫éspring securityÁöÑÂÆâÂÖ®Â∑•ÂÖ∑ÂåÖÔºå‰∏∫‰Ω†ÁöÑÂ∫îÁî®Á®ãÂ∫èÊ∑ªÂä†ÂÆâÂÖ®ÊéßÂà∂ ÂÆû‰æã‰ΩøÁî®ÊúçÂä°Êèê‰æõËÄÖ‰∏éÊúçÂä°Ê∂àË¥πËÄÖÊù•ÊèèËø∞ÂæÆÊúçÂä°‰πãÈó¥ÁöÑË∞ÉÁî®ÂÖ≥Á≥ª„ÄÇ‰∏ãË°®Ëß£Èáä‰∫ÜÊúçÂä°Êèê‰æõËÄÖ‰∏éÊúçÂä°Ê∂àË¥πËÄÖ„ÄÇ ‚Äã Ë°®-ÊúçÂä°Êèê‰æõËÄÖ‰∏éÊúçÂä°Ê∂àË¥πËÄÖ ÂêçËØç ÂÆö‰πâ ÊúçÂä°Êèê‰æõËÄÖ ÊúçÂä°ÁöÑË¢´Ë∞ÉÁî®ÊñπÔºàÂç≥Ôºö‰∏∫ÂÖ∂‰ªñÊúçÂä°Êèê‰æõÊúçÂä°ÁöÑÊúçÂä°Ôºâ ÊúçÂä°Ê∂àË¥πËÄÖ ÊúçÂä°ÁöÑË∞ÉÁî®ÊñπÔºàÂç≥Ôºö‰æùËµñÂÖ∂‰ªñÊúçÂä°ÁöÑÊúçÂä°Ôºâ ‰ª•ÁîµÂΩ±ÂîÆÁ•®Á≥ªÁªü‰∏∫‰æã„ÄÇÂ¶ÇÂõæÔºåÁî®Êà∑ÂêëÁîµÂΩ±ÂæÆÊúçÂä°ÂèëËµ∑‰∫Ü‰∏Ä‰∏™Ë¥≠Á•®ÁöÑËØ∑Ê±Ç„ÄÇÂú®ËøõË°åË¥≠Á•®ÁöÑ‰∏öÂä°Êìç‰ΩúÂâçÔºåÁîµÂΩ±ÂæÆÊúçÂä°ÈúÄË¶ÅË∞ÉÁî®Áî®Êà∑ÂæÆÊúçÂä°ÁöÑÊé•Âè£ÔºåÊü•ËØ¢ÂΩìÂâçÁî®Êà∑ÁöÑ‰ΩôÈ¢ùÊòØÂ§öÂ∞ë„ÄÅÊòØ‰∏çÊòØÁ¨¶ÂêàË¥≠Á•®Ê†áÂáÜÁ≠â„ÄÇÂú®ËøôÁßçÂú∫ÊôØ‰∏ãÔºåÁî®Êà∑ÂæÆÊúçÂä°Â∞±ÊòØ‰∏Ä‰∏™ÊúçÂä°Êèê‰æõËÄÖÔºåÁîµÂΩ±ÂæÆÊúçÂä°ÂàôÊòØ‰∏Ä‰∏™ÊúçÂä°Ê∂àË¥πËÄÖ„ÄÇ Âõ¥ÁªïËØ•Âú∫ÊôØÔºåÂÖàÊù•ÁºñÂÜô‰∏Ä‰∏™Áî®Êà∑ÂæÆÊúçÂä°ÔºåÁÑ∂ÂêéÁºñÂÜô‰∏Ä‰∏™ÁîµÂΩ±ÂæÆÊúçÂä°„ÄÇ EurekaÊ≥®ÂÜå‰∏≠ÂøÉÔºå‰∫ëÁ´ØÊúçÂä°ÂèëÁé∞ÔºåÂÆûÁé∞‰∫ëÁ´Ø‰∏≠Èó¥Â±ÇÊúçÂä°ÂèëÁé∞ÂíåÊïÖÈöúËΩ¨Áßª ‰∏çÂ¶®ÂÖàÊÄùËÄÉ‰∏Ä‰∏ãÔºåÊÄéÊ†∑ÊâçËÉΩËÆ©ÊúçÂä°Ê∂àË¥πËÄÖÊÄªËÉΩÊâæÂà∞ÊúçÂä°Êèê‰æõËÄÖÂë¢ÔºüÊàñËÄÖËØ¥ÔºåÊÄéÊ†∑ÊâçËÉΩËÆ©ÊúçÂä°Ê∂àË¥πËÄÖÊÑüÁü•Âà∞ÊúçÂä°Êèê‰æõËÄÖÂú∞ÂùÄÁöÑÂèòÂåñÂë¢Ôºü TIPS ÁõÆÂâçÂ∏ÇÈù¢‰∏äÊääÊúçÂä°Ê∂àË¥πËÄÖÊâæÂà∞ÊúçÂä°Êèê‰æõËÄÖÁöÑËøôÁßçÊú∫Âà∂Áß∞‰∏∫ÊúçÂä°ÂèëÁé∞ÔºåÂèàÊàñËÄÖÊúçÂä°Ê≥®ÂÜå„ÄÇ‰∏ãÈù¢Êù•Êé¢Á¥¢ÊúçÂä°ÂèëÁé∞Á©∂Á´üÊòØÊÄé‰πàÂõû‰∫ã„ÄÇ ÊúçÂä°ÂèëÁé∞ÂéüÁêÜÂàùÊé¢ÂÖ∂ÂÆûÔºåÊúçÂä°ÂèëÁé∞Êú∫Âà∂ÈùûÂ∏∏ÁÆÄÂçïÔºå‰∏çÂ¶®Áî®Â§ßÂÆ∂ÁÜüÊÇâÁöÑMySQLÊù•Á±ªÊØî‚Äî‚ÄîÂè™ÈúÄ‰∏ÄÂº†Ë°®ÔºàÂõæ‰∏≠ÁöÑregistryË°®ÔºâÂç≥ÂèØÂÆûÁé∞ÊúçÂä°ÂèëÁé∞ÔºÅ Â¶ÇÂõæÔºåÂ¶ÇÊûúÊàë‰ª¨ËÉΩÂú®Ôºö Â∫îÁî®ÂêØÂä®Êó∂ÔºåËá™Âä®ÂæÄregistryË°®‰∏≠ÊèíÂÖ•‰∏ÄÊù°Êï∞ÊçÆÔºåÊï∞ÊçÆÂåÖÊã¨ÊúçÂä°ÂêçÁß∞„ÄÅIP„ÄÅÁ´ØÂè£Á≠â‰ø°ÊÅØ„ÄÇ Â∫îÁî®ÂÅúÊ≠¢Êó∂ÔºåËá™Âä®ÊääËá™Â∑±Âú®registryË°®‰∏≠ÁöÑÊï∞ÊçÆÁöÑstatusËÆæ‰∏∫DOWN „ÄÇ ËøôÊ†∑ÔºåÊúçÂä°Ê∂àË¥πËÄÖ‰∏çÂ∞±Ê∞∏ËøúÈÉΩËÉΩÊâæÂà∞ÊúçÂä°Êèê‰æõËÄÖ‰∫ÜÂòõÔºÅÂΩìÊúçÂä°Ê∂àË¥πËÄÖÊÉ≥Ë∞ÉÁî®ÊúçÂä°Êèê‰æõËÄÖÊé•Âè£Êó∂ÔºåÂè™ÈúÄÂêëÊï∞ÊçÆÂ∫ìÂèëÈÄÅSQLËØ≠Âè• SELECT * FROM registry where service_name = &#39;user&#39; and status = &#39;UP&#39; Âç≥ÂèØÊâæÂà∞ÊúçÂä°Êèê‰æõËÄÖÁöÑÊâÄÊúâÂÆû‰æãÔºÅIP„ÄÅÁ´ØÂè£Âï•ÁöÑÈÉΩÊúâ‰∫ÜÔºåËá™Â∑±ÊãºÊé•‰∏Ä‰∏ãÔºåÂÜçÂéªË∞ÉÁî®Â∞±Ë°å‰∫ÜÔºÅ TIPS ÁúãÔºåÊúçÂä°ÂèëÁé∞Êú∫Âà∂ÊòØ‰∏çÊòØÂæàÁÆÄÂçïÔºüÁ®ãÂ∫èÁåøÁªôÂõæ‰∏≠ÁöÑ‚ÄùMySQL‚ÄúÁöÑÁªÑ‰ª∂Ëµ∑‰∫Ü‰∏Ä‰∏™ÁâõÂèâÁöÑÂêçÂ≠óÂè´Ôºö‚ÄùÊ≥®ÂÜå‰∏≠ÂøÉ‚ÄúÔºå‰πüÊúâÁöÑ‰π¶Â∞ÜÂÖ∂Áß∞‰∏∫‚ÄùÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂‚Äú„ÄÇ ‰ΩÜÔºåËøôÊØïÁ´üÂè™ÊòØ‰∏Ä‰∏™ÊúÄÁÆÄÈôãÁöÑÊúçÂä°ÂèëÁé∞ÂéüÁêÜ„ÄÇÂÆåÊï¥ÁöÑÊúçÂä°ÂèëÁé∞Ë¶ÅËÄÉËôëÁöÑÈóÆÈ¢òÊúâÂæàÂ§öÔºå‰æãÂ¶ÇÔºö ÂΩìÊúçÂä°ÊäëÊàñÊâÄÂú®‰∏ªÊú∫Á™ÅÁÑ∂Â¥©Ê∫ÉÊàñËÄÖËøõÂÖ•ÊüêÁßç‰∏çÊ≠£Â∏∏ÁöÑÊÉÖÂÜµÊó†Ê≥ïÊèê‰æõÊúçÂä°Ôºà‰æãÂ¶ÇÂ∫îÁî®ÁöÑÊï∞ÊçÆÂ∫ìÊåÇ‰∫ÜÔºâÊó∂ÔºåÂØπÂ∫îÁöÑÊï∞ÊçÆÁêÜÂ∫îÊ†áËÆ∞DOWNÔºåÊàñËÄÖÁ¥¢ÊÄßÂà†Èô§Ôºõ Â¶ÇÊûúÊØèÊ¨°Ë∞ÉÁî®‰πãÂâçÔºåÈÉΩÂæóÂêëÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂ÂèëÈÄÅÁ±ª‰ººSELECT * FROM registry where service_name = &#39;user&#39; and status = &#39;UP&#39; ÁöÑËØ≠Âè•ÔºåÈÇ£‰πàÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂ÁöÑÂéãÂäõÂæóÊúâÂ§öÂ§ßÔºüÊõ¥ÈáçË¶ÅÁöÑÔºåËøô‰∏éÂΩì‰∏ãÊµÅË°åÁöÑÂéª‰∏≠ÂøÉÂåñËÆæËÆ°ÁöÑÊÄùÊÉ≥Áõ∏ÊÇñÔºõ ÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂Âç≥‰ΩøÊåÇÊéâÔºå‰πü‰∏çÂ∫îËØ•ÂΩ±ÂìçÂæÆÊúçÂä°‰πãÈó¥ÁöÑË∞ÉÁî®„ÄÇ ÈÇ£‰πàÔºå‰∏Ä‰∏™ÂÆåÂñÑÁöÑÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂Â∫îËØ•ÂÖ∑Â§áÂì™‰∫õËÉΩÂäõÂë¢Ôºü ÊúçÂä°ÂèëÁé∞ÂéüÁêÜÊ∑±ÂÖ•‰∏çÂ¶®Êù•Áúã‰∏Ä‰∏ã‰ΩøÁî®ÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂ÂêéÁöÑÊû∂ÊûÑÂõæÔºåÂ¶ÇÂõæÊâÄÁ§∫„ÄÇ ÊúçÂä°Êèê‰æõËÄÖ„ÄÅÊúçÂä°Ê∂àË¥πËÄÖ„ÄÅÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂Ëøô‰∏âËÄÖ‰πãÈó¥ÁöÑÂÖ≥Á≥ªÂ§ßËá¥Â¶Ç‰∏ãÔºö ÂêÑ‰∏™ÂæÆÊúçÂä°Âú®ÂêØÂä®Êó∂ÔºåÂ∞ÜËá™Â∑±ÁöÑÁΩëÁªúÂú∞ÂùÄÁ≠â‰ø°ÊÅØÊ≥®ÂÜåÂà∞ÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂‰∏≠ÔºåÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂‰ºöÂ≠òÂÇ®Ëøô‰∫õ‰ø°ÊÅØÔºõ ÊúçÂä°Ê∂àË¥πËÄÖÂèØ‰ªéÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂Êü•ËØ¢ÊúçÂä°Êèê‰æõËÄÖÁöÑÁΩëÁªúÂú∞ÂùÄÔºåÂπ∂‰ΩøÁî®ËØ•Âú∞ÂùÄË∞ÉÁî®ÊúçÂä°Êèê‰æõËÄÖÁöÑÊé•Âè£Ôºõ ÂêÑ‰∏™ÂæÆÊúçÂä°‰∏éÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂‰ΩøÁî®‰∏ÄÂÆöÊú∫Âà∂Ôºà‰æãÂ¶ÇÂøÉË∑≥ÔºâÈÄö‰ø°„ÄÇÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂Â¶ÇÈïøÊó∂Èó¥Êó†Ê≥ï‰∏éÊüêÂæÆÊúçÂä°ÂÆû‰æãÈÄö‰ø°ÔºåÂ∞±‰ºöËá™Âä®Ê≥®ÈîÄÔºàÂç≥ÔºöÂà†Èô§ÔºâËØ•ÂÆû‰æãÔºõ ÂΩìÂæÆÊúçÂä°ÁΩëÁªúÂú∞ÂùÄÂèëÁîüÂèòÊõ¥Ôºà‰æãÂ¶ÇÂÆû‰æãÂ¢ûÂáèÊàñËÄÖIPÁ´ØÂè£ÂèëÁîüÂèòÂåñÁ≠âÔºâÊó∂Ôºå‰ºöÈáçÊñ∞Ê≥®ÂÜåÂà∞ÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂Ôºõ ÂÆ¢Êà∑Á´ØÁºìÂ≠òÔºöÂêÑ‰∏™ÂæÆÊúçÂä°Â∞ÜÈúÄË¶ÅË∞ÉÁî®ÊúçÂä°ÁöÑÂú∞ÂùÄÁºìÂ≠òÂú®Êú¨Âú∞ÔºåÂπ∂‰ΩøÁî®‰∏ÄÂÆöÊú∫Âà∂Êõ¥Êñ∞Ôºà‰æãÂ¶ÇÂÆöÊó∂‰ªªÂä°Êõ¥Êñ∞„ÄÅ‰∫ã‰ª∂Êé®ÈÄÅÊõ¥Êñ∞Á≠âÔºâ„ÄÇËøôÊ†∑Êó¢ËÉΩÈôç‰ΩéÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂ÁöÑÂéãÂäõÔºåÂêåÊó∂ÔºåÂç≥‰ΩøÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂Âá∫ÈóÆÈ¢òÔºå‰πü‰∏ç‰ºöÂΩ±ÂìçÂà∞ÊúçÂä°‰πãÈó¥ÁöÑË∞ÉÁî®„ÄÇ Áªº‰∏äÔºåÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂Â∫îÂÖ∑Â§á‰ª•‰∏ãÂäüËÉΩ„ÄÇ ÊúçÂä°Ê≥®ÂÜåË°®ÔºöÊúçÂä°Ê≥®ÂÜåË°®ÊòØÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂ÁöÑÊ†∏ÂøÉÔºàÂÖ∂ÂÆûÂ∞±ÊòØÁ±ª‰ºº‰∫é‰∏äÈù¢ÁöÑregistryË°®ÔºâÔºåÂÆÉÁî®Êù•ËÆ∞ÂΩïÂêÑ‰∏™ÂæÆÊúçÂä°ÁöÑ‰ø°ÊÅØÔºå‰æãÂ¶ÇÂæÆÊúçÂä°ÁöÑÂêçÁß∞„ÄÅIP„ÄÅÁ´ØÂè£Á≠â„ÄÇÊúçÂä°Ê≥®ÂÜåË°®Êèê‰æõÊü•ËØ¢APIÂíåÁÆ°ÁêÜAPIÔºåÊü•ËØ¢APIÁî®‰∫éÊü•ËØ¢ÂèØÁî®ÁöÑÂæÆÊúçÂä°ÂÆû‰æãÔºåÁÆ°ÁêÜAPIÁî®‰∫éÊúçÂä°ÁöÑÊ≥®ÂÜåÂíåÊ≥®ÈîÄÔºõ ÊúçÂä°Ê≥®ÂÜå‰∏éÊúçÂä°ÂèëÁé∞ÔºöÊúçÂä°Ê≥®ÂÜåÊòØÊåáÂæÆÊúçÂä°Âú®ÂêØÂä®Êó∂ÔºåÂ∞ÜËá™Â∑±ÁöÑ‰ø°ÊÅØÊ≥®ÂÜåÂà∞ÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂‰∏äÁöÑËøáÁ®ã„ÄÇÊúçÂä°ÂèëÁé∞ÊòØÊåáÊü•ËØ¢ÂèØÁî®ÂæÆÊúçÂä°ÂàóË°®ÂèäÂÖ∂ÁΩëÁªúÂú∞ÂùÄÁöÑÊú∫Âà∂Ôºõ ÊúçÂä°Ê£ÄÊü•ÔºöÊúçÂä°ÂèëÁé∞ÁªÑ‰ª∂‰ΩøÁî®‰∏ÄÂÆöÊú∫Âà∂ÂÆöÊó∂Ê£ÄÊµãÂ∑≤Ê≥®ÂÜåÁöÑÊúçÂä°ÔºåÂ¶ÇÂèëÁé∞ÊüêÂÆû‰æãÈïøÊó∂Èó¥Êó†Ê≥ïËÆøÈóÆÔºåÂ∞±‰ºö‰ªéÊúçÂä°Ê≥®ÂÜåË°®‰∏≠ÁßªÈô§ËØ•ÂÆû‰æã„ÄÇ Áî®ÈÄîÂ∞ÜÂæÆÊúçÂä°ÁöÑÊèê‰æõËÄÖÂíåÊ∂àË¥πËÄÖÈÉΩÊ≥®ÂÜåÂà∞EurekaÊúçÂä°Âô®‰∏äÔºåÁî±EurekaÊúçÂä°Âô®ËøõË°åÁÆ°ÁêÜ Ê∫êÁ†ÅÂàÜÊûêEurekaÂéüÁêÜÂàÜÊûê ÈõÜÊàêÊñπÂºèÁºñÂÜôEureka Server Âä†‰æùËµñ 123456&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt; &lt;/dependency&gt;&lt;/dependencies&gt; Âä†Ê≥®Ëß£ 1234567@SpringBootApplication@EnableEurekaServerpublic class EurekaApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(EurekaApplication.class, args); &#125;&#125; ÂÜôÈÖçÁΩÆ 12345678910server: port: 8761eureka: client: # ÊòØÂê¶Ë¶ÅÊ≥®ÂÜåÂà∞ÂÖ∂‰ªñEureka ServerÂÆû‰æã register-with-eureka: false # ÊòØÂê¶Ë¶Å‰ªéÂÖ∂‰ªñEureka ServerÂÆû‰æãËé∑ÂèñÊï∞ÊçÆ fetch-registry: false service-url: defaultZone: http://localhost:8761/eureka/ TIPS ËøôÈáåÔºåÂ§ßÂÆ∂ÂèØÂÖà‰∏çÂéªÊé¢Á©∂registerWithEureka ‰ª•ÂèäfetchRegistry Á©∂Á´üÊòØ‰ªÄ‰πàÈ¨ºÔºåÁ¨îËÄÖÂ∞ÜÂú®‰∏ã‰∏ÄËäÇ‰∏∫Â§ßÂÆ∂Êè≠Êôì„ÄÇ Â∞ÜÂ∫îÁî®Ê≥®ÂÜåÂà∞Eureka Server‰∏ä Âä†‰æùËµñ 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;&lt;/dependency&gt; Âä†Ê≥®Ëß£ 123456@SpringBootApplicationpublic class ProviderUserApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ProviderUserApplication.class, args); &#125;&#125; Ê≥®ÊÑèÔºöÊó©ÊúüÁöÑÁâàÊú¨ÔºàDalstonÂèäÊõ¥Êó©ÁâàÊú¨ÔºâËøòÈúÄÂú®ÂêØÂä®Á±ª‰∏äÊ∑ªÂä†Ê≥®Ëß£@EnableDiscoveryClient Êàñ@EnableEurekaClient Ôºå‰ªéEdgwareÂºÄÂßãÔºåËØ•Ê≥®Ëß£ÂèØÁúÅÁï•„ÄÇ Ê∑ªÂä†ÈÖçÁΩÆÔºö 123456789101112spring: application: # ÊåáÂÆöÊ≥®ÂÜåÂà∞eureka server‰∏äÁöÑÊúçÂä°ÂêçÁß∞ÔºåÂØπ‰∫éÁîµÂΩ±ÂæÆÊúçÂä°ÔºåÊú¨Á≥ªÂàóÂ∞ÜÂêçÁß∞ËÆæ‰∏∫microservice-consumer-movie name: microservice-provider-usereureka: client: service-url: # ÊåáÂÆöeureka serverÈÄö‰ø°Âú∞ÂùÄÔºåÊ≥®ÊÑè/eureka/Â∞èÂ∞æÂ∑¥‰∏çËÉΩÂ∞ë defaultZone: http://localhost:8761/eureka/ instance: # ÊòØÂê¶Ê≥®ÂÜåIPÂà∞eureka serverÔºåÂ¶Ç‰∏çÊåáÂÆöÊàñËÆæ‰∏∫falseÔºåÈÇ£Â∞±‰ºöÊ≥®ÂÜå‰∏ªÊú∫ÂêçÂà∞eureka server prefer-ip-address: true ÊµãËØï ‰æùÊ¨°ÂêØÂä®Eureka Server‰ª•ÂèäÁî®Êà∑ÂæÆÊúçÂä°„ÄÅÁîµÂΩ±ÂæÆÊúçÂä°Ôºõ ËÆøÈóÆhttp://localhost:8761 ÂèØËßÇÂØüÂà∞Á±ª‰ººÂ¶Ç‰∏ãÁïåÈù¢Ôºö Â∞ÜÁî®Êà∑ÂæÆÊúçÂä°ÂÅúÊ≠¢ÔºåÂèØÁúãÂà∞Eureka ServerÈ¶ñÈ°µÂèòÊàêÁ±ª‰ººÂ¶Ç‰∏ãÁïåÈù¢Ôºö RibbonÁî®ÈÄî‰∏ÄËà¨Êù•ËØ¥ÔºåÊèêÂà∞Ë¥üËΩΩÂùáË°°ÔºåÂ§ßÂÆ∂‰∏ÄËà¨ÂæàÂÆπÊòìÊÉ≥Âà∞ÊµèËßàÂô® -&gt; NGINX -&gt; ÂèçÂêë‰ª£ÁêÜÂ§ö‰∏™TomcatËøôÊ†∑ÁöÑÊû∂ÊûÑÂõæ‚Äî‚Äî‰∏öÁïåÁÆ°ËøôÁßçË¥üËΩΩÂùáË°°Ê®°ÂºèÂè´‚ÄúÊúçÂä°Âô®Á´ØË¥üËΩΩÂùáË°°‚ÄùÔºåÂõ†‰∏∫Ê≠§ÁßçÊ®°Âºè‰∏ãÔºåË¥üËΩΩÂùáË°°ÁÆóÊ≥ïÊòØNGINXÊèê‰æõÁöÑÔºåËÄåNGINXÈÉ®ÁΩ≤Âú®ÊúçÂä°Âô®Á´Ø„ÄÇ NginxÊâ´Áõ≤ Êú¨ËäÇÊâÄËÆ≤ÁöÑRibbonÂàôÊòØ‰∏Ä‰∏™ÂÆ¢Êà∑Á´Ø‰æßË¥üËΩΩÂùáË°°ÁªÑ‰ª∂‚Äî‚ÄîÈÄö‰øóÂú∞ËØ¥ÔºåÂ∞±ÊòØÈõÜÊàêÂú®ÂÆ¢Êà∑Á´ØÔºàÊúçÂä°Ê∂àË¥πËÄÖ‰∏Ä‰æßÔºâÔºåÂπ∂Êèê‰æõË¥üËΩΩÂùáË°°ÁÆóÊ≥ïÁöÑ‰∏Ä‰∏™ÁªÑ‰ª∂„ÄÇ RibbonÈªòËÆ§‰∏∫Êàë‰ª¨Êèê‰æõ‰∫ÜÂæàÂ§öÁöÑË¥üËΩΩÂùáË°°ÁÆóÊ≥ïÔºå‰æãÂ¶ÇËΩÆËØ¢„ÄÅÈöèÊú∫„ÄÅÂìçÂ∫îÊó∂Èó¥Âä†ÊùÉÁ≠â‚Äî‚ÄîÂΩìÁÑ∂Ôºå‰∏∫RibbonËá™ÂÆö‰πâË¥üËΩΩÂùáË°°ÁÆóÊ≥ï‰πüÈùûÂ∏∏ÂÆπÊòìÔºåÂè™ÈúÄÂÆûÁé∞IRule Êé•Âè£Âç≥ÂèØ„ÄÇ ÂÜÖÁΩÆË¥üËΩΩÂùáË°°ÁöÑËßÑÂàôË¥üËΩΩÂùáË°°ËßÑÂàôÊòØRibbonÁöÑÊ†∏ÂøÉÔºå‰∏ãÈù¢Êù•Áúã‰∏Ä‰∏ãRibbonÂÜÖÁΩÆÁöÑË¥üËΩΩÂùáË°°ËßÑÂàô„ÄÇ AvailabilityFilteringRuleÔºöËøáÊª§Êéâ‰∏ÄÁõ¥ËøûÊé•Â§±Ë¥•ÁöÑË¢´Ê†áËÆ∞‰∏∫circuit trippedÁöÑÂêéÁ´ØServerÔºåÂπ∂ËøáÊª§ÊéâÈÇ£‰∫õÈ´òÂπ∂ÂèëÁöÑÂêéÁ´ØServerÊàñËÄÖ‰ΩøÁî®‰∏Ä‰∏™AvailabilityPredicateÊù•ÂåÖÂê´ËøáÊª§serverÁöÑÈÄªËæëÔºåÂÖ∂ÂÆûÂ∞±Â∞±ÊòØÊ£ÄÊü•statusÈáåËÆ∞ÂΩïÁöÑÂêÑ‰∏™ServerÁöÑËøêË°åÁä∂ÊÄÅÔºõ BestAvailableRuleÔºöÈÄâÊã©‰∏Ä‰∏™ÊúÄÂ∞èÁöÑÂπ∂ÂèëËØ∑Ê±ÇÁöÑServerÔºåÈÄê‰∏™ËÄÉÂØüServerÔºåÂ¶ÇÊûúServerË¢´tripped‰∫ÜÔºåÂàôË∑≥Ëøá„ÄÇ RandomRuleÔºöÈöèÊú∫ÈÄâÊã©‰∏Ä‰∏™ServerÔºõ ResponseTimeWeightedRuleÔºö‰ΩúÁî®ÂêåWeightedResponseTimeRuleÔºå‰∫åËÄÖ‰ΩúÁî®‰∏ÄÊ†∑Ôºõ RetryRuleÔºöÂØπÈÄâÂÆöÁöÑË¥üËΩΩÂùáË°°Á≠ñÁï•Êú∫‰∏äÈáçËØïÊú∫Âà∂ÔºåÂú®‰∏Ä‰∏™ÈÖçÁΩÆÊó∂Èó¥ÊÆµÂÜÖÂΩìÈÄâÊã©Server‰∏çÊàêÂäüÔºåÂàô‰∏ÄÁõ¥Â∞ùËØï‰ΩøÁî®subRuleÁöÑÊñπÂºèÈÄâÊã©‰∏Ä‰∏™ÂèØÁî®ÁöÑserverÔºõ RoundRobinRuleÔºöËΩÆËØ¢ÈÄâÊã©Ôºå ËΩÆËØ¢indexÔºåÈÄâÊã©indexÂØπÂ∫î‰ΩçÁΩÆÁöÑServerÔºõ WeightedResponseTimeRuleÔºöÊ†πÊçÆÂìçÂ∫îÊó∂Èó¥Âä†ÊùÉÔºåÂìçÂ∫îÊó∂Èó¥Ë∂äÈïøÔºåÊùÉÈáçË∂äÂ∞èÔºåË¢´ÈÄâ‰∏≠ÁöÑÂèØËÉΩÊÄßË∂ä‰ΩéÔºõ ZoneAvoidanceRuleÔºöÂ§çÂêàÂà§Êñ≠ServerÊâÄÂú®Âå∫ÂüüÁöÑÊÄßËÉΩÂíåServerÁöÑÂèØÁî®ÊÄßÈÄâÊã©ServerÔºõ Â¶ÇÈúÄËá™ÂÆö‰πâË¥üËΩΩÂùáË°°ËßÑÂàôÔºåÂè™ÈúÄÂÆûÁé∞IRule Êé•Âè£ÊàñÁªßÊâøAbstractLoadBalancerRule „ÄÅPredicateBasedRuleÂç≥ÂèØ ÔºåÂèØÂèÇËÄÉRandomRule „ÄÅRoundRobinRule „ÄÅZoneAvoidanceRule Á≠âÂÜÖÁΩÆRuleÁºñÂÜôËá™Â∑±ÁöÑË¥üËΩΩÂùáË°°ËßÑÂàô„ÄÇ ÂºïÂÖ•RibbonÂú®Spring Cloud‰∏≠ÔºåÂΩìRibbon‰∏éEurekaÈÖçÂêà‰ΩøÁî®Êó∂ÔºåRibbonÂèØËá™Âä®‰ªéEureka ServerËé∑ÂèñÊúçÂä°Êèê‰æõËÄÖÂú∞ÂùÄÂàóË°®ÔºåÂπ∂Âü∫‰∫éË¥üËΩΩÂùáË°°ÁÆóÊ≥ïÔºåÈÄâÊã©ÂÖ∂‰∏≠‰∏Ä‰∏™ÊúçÂä°Êèê‰æõËÄÖÂÆû‰æã„ÄÇ‰∏ãÂõæÂ±ïÁ§∫‰∫ÜRibbon‰∏éEurekaÈÖçÂêà‰ΩøÁî®Êó∂ÁöÑÂ§ßËá¥Êû∂ÊûÑ„ÄÇ ÈõÜÊàêÊñπÂºè‰ª£Á†ÅÁ§∫‰æã Â§çÂà∂È°πÁõÆmicroservice-consumer-movie ÔºåÂ∞ÜArtifactId‰øÆÊîπ‰∏∫microservice-consumer-movie-ribbon „ÄÇ Âä†‰æùËµñÔºöÁî±‰∫éspring-cloud-starter-netflix-eureka-client Â∑≤ÁªèÂåÖÂê´spring-cloud-starter-netfilx-ribbon ÔºåÊïÖËÄåÊó†ÈúÄÈ¢ùÂ§ñÊ∑ªÂä†‰æùËµñ„ÄÇ ÂÜô‰ª£Á†ÅÔºö 12345@Bean@LoadBalancedpublic RestTemplate restTemplate() &#123; return new RestTemplate();&#125; Â¶Ç‰ª£Á†ÅÊâÄÁ§∫ÔºåÂè™ÈúÄÂú®RestTemplate ‰∏äÊ∑ªÂä†LoadBalanced Ê≥®Ëß£ÔºåÂç≥ÂèØËÆ©RestTemplateÊï¥ÂêàRibbonÔºÅ Ë∞ÉÁî®Ôºö 1234567891011@GetMapping("/users/&#123;id&#125;")public User findById(@PathVariable Long id) &#123; // ËøôÈáåÁî®Âà∞‰∫ÜRestTemplateÁöÑÂç†‰ΩçÁ¨¶ËÉΩÂäõ User user = this.restTemplate.getForObject( "http://microservice-provider-user/users/&#123;id&#125;", User.class, id ); // ...ÁîµÂΩ±ÂæÆÊúçÂä°ÁöÑ‰∏öÂä°... return user;&#125; Áî±‰ª£Á†ÅÂèØÁü•ÔºåÊàë‰ª¨Â∞ÜËØ∑Ê±ÇÁöÑÁõÆÊ†áÊúçÂä°ÊîπÊàê‰∫Ühttp://microservice-provider-user/users/{id} Ôºå‰πüÂ∞±ÊòØhttp://{ÁõÆÊ†áÊúçÂä°ÂêçÁß∞}/{ÁõÆÊ†áÊúçÂä°Á´ØÁÇπ} ÁöÑÂΩ¢ÂºèÔºåRibbon‰ºöËá™Âä®Âú®ÂÆûÈôÖË∞ÉÁî®Êó∂ÔºåÂ∞ÜÁõÆÊ†áÊúçÂä°ÂêçÊõøÊç¢‰∏∫ËØ•ÊúçÂä°ÁöÑIPÂíåÁ´ØÂè£„ÄÇ ÊµãËØï ‰æùÊ¨°ÂêØÂä®microservice-discovery-eureka „ÄÅmicroservice-provider-user ‰∏§‰∏™ÂÆû‰æã„ÄÅmicroservice-consumer-movie-ribbon ËÆøÈóÆhttp://localhost:8010/movies/users/1 Â§öÊ¨°Ôºå‰ºöÂèëÁé∞‰∏§‰∏™userÊúçÂä°ÂÆû‰æãÈÉΩ‰ºöÊâìÂç∞Êó•Âøó„ÄÇ FeignÁÆÄ‰ªãFeignÊòØNetflixÂºÄÂèëÁöÑÂ£∞ÊòéÂºè„ÄÅÊ®°ÊùøÂåñÁöÑHTTPÂÆ¢Êà∑Á´ØÔºåÈõÜÊàê‰∫Ü RestTemplate + Eureka + Ribbon + Hystrix ÈõÜÊàêÊñπÂºè‰∏ãÈù¢Êù•Â∞ÜÂâçÈù¢ÁöÑ‰æãÂ≠êÁî®FeignÊîπÂÜôÔºåËÆ©ÂÖ∂ËææÂà∞‰∏éRibbon + RestTemplateÁõ∏ÂêåÁöÑÊïàÊûú„ÄÇ Â§çÂà∂È°πÁõÆmicroservice-consumer-movieÔºåÂ∞ÜArtifactId‰øÆÊîπ‰∏∫microservice-consumer-movie-feign Ôºõ Âä†‰æùËµñÔºö 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;&lt;/dependency&gt; Âä†Ê≥®Ëß£ÔºöÂêØÂä®Á±ª‰∏äÊ∑ªÂä†@EnableFeignClients Ôºõ ÁºñÂÜôFeign ClientÔºö 12345@FeignClient(name = "microservice-provider-user")public interface UserFeignClient &#123; @GetMapping("/users/&#123;id&#125;") User findById(@PathVariable("id") Long id);&#125; ËøôÊ†∑‰∏Ä‰∏™Feign ClientÂ∞±ÂÜôÂÆåÂï¶ÔºÅÂÖ∂‰∏≠Ôºå@FeignClient Ê≥®Ëß£‰∏≠ÁöÑmicroservice-provider-userÊòØÊÉ≥Ë¶ÅËØ∑Ê±ÇÊúçÂä°ÁöÑÂêçÁß∞ÔºåËøôÊòØÁî®Êù•ÂàõÂª∫Ribbon ClientÁöÑÔºàFeignÊï¥Âêà‰∫ÜRibbonÔºâ„ÄÇÂú®Êú¨‰æã‰∏≠ÔºåÁî±‰∫é‰ΩøÁî®‰∫ÜEurekaÔºåÊâÄ‰ª•Ribbon‰ºöÊäämicroservice-provider-user Ëß£ÊûêÊàêEureka Server‰∏≠ÁöÑÊúçÂä°„ÄÇ Èô§Ê≠§‰πãÂ§ñÔºåËøòÂèØ‰ΩøÁî®urlÂ±ûÊÄßÊåáÂÆöËØ∑Ê±ÇÁöÑURLÔºàURLÂèØ‰ª•ÊòØÂÆåÊï¥ÁöÑURLÊàñ‰∏ªÊú∫ÂêçÔºâÔºå‰æãÂ¶Ç@FeignClient(name = &quot;abcde&quot;, url = &quot;http://localhost:8000/&quot;) „ÄÇÊ≠§Êó∂ÔºånameÂèØ‰ª•ÊòØ‰ªªÊÑèÂÄºÔºå‰ΩÜ‰∏çÂèØÁúÅÁï•ÔºåÂê¶ÂàôÂ∫îÁî®Â∞ÜÊó†Ê≥ïÂêØÂä®ÔºÅ ControllerÔºö 1234567891011@RequestMapping("/movies")@RestControllerpublic class MovieController &#123; @Autowired private UserFeignClient userFeignClient; @GetMapping("/users/&#123;id&#125;") public User findById(@PathVariable Long id) &#123; return this.userFeignClient.findById(id); &#125;&#125; Âè™ÈúÄ‰ΩøÁî®@AutowireÊ≥®Ëß£ÔºåÂç≥ÂèØÊ≥®ÂÖ•‰∏äÈù¢ÁºñÂÜôÁöÑFeign Client„ÄÇ RestTemplate‰∏éFeignÂØπÊØîÁõ∏‰ø°ÈÄöËøáÊú¨ÊñáÁöÑ‰æãÂ≠êÔºåËÅ™ÊòéÁöÑ‰Ω†ÂØπÂ¶Ç‰Ωï‰ΩøÁî®FeignÂ∑≤Áªè‰∫ÜÁÑ∂‰∫éÂøÉ‰∫Ü„ÄÇÊñáÁ´†ÁöÑÊúÄÂêéÔºåÂØπÊØî‰∏Ä‰∏ãRestTemplate + Ribbon‰∏éFeign„ÄÇ ËßíÂ∫¶ RestTemplate + Ribbon FeignÔºàËá™Â∏¶RibbonÔºâ ÂèØËØªÊÄß„ÄÅÂèØÁª¥Êä§ÊÄß Ê¨†‰Ω≥ÔºàÊó†Ê≥ï‰ªéURLÁõ¥ËßÇ‰∫ÜËß£Ëøô‰∏™ËøúÁ®ãË∞ÉÁî®ÊòØÂπ≤‰ªÄ‰πàÁöÑÔºâ ÊûÅ‰Ω≥ÔºàËÉΩÂú®Êé•Âè£‰∏äÂÜôÊ≥®ÈáäÔºåÊñπÊ≥ïÂêçÁß∞‰πüÊòØÂèØËØªÁöÑÔºåËÉΩ‰∏ÄÁúºÁúãÂá∫Ëøô‰∏™ËøúÁ®ãË∞ÉÁî®ÊòØÂπ≤‰ªÄ‰πàÁöÑÔºâ ÂºÄÂèë‰ΩìÈ™å Ê¨†‰Ω≥ÔºàÈúÄË¶ÅÊãºÂáëURLÔºâ ÊûÅ‰Ω≥ÔºàÊó†ÈúÄÊãºÂáëurlÔºåËá™Âä®ÈõÜÂêàEurekaÂíåRibbonÔºâ È£éÊ†º‰∏ÄËá¥ÊÄß Ê¨†‰Ω≥ÔºàÊú¨Âú∞APIË∞ÉÁî®ÂíåRestTemplateË∞ÉÁî®ÁöÑ‰ª£Á†ÅÈ£éÊ†ºÊà™ÁÑ∂‰∏çÂêåÔºâ ÊûÅ‰Ω≥ÔºàÂÆåÂÖ®‰∏ÄËá¥Ôºå‰∏çÁÇπÂºÄFeignÁöÑÊé•Âè£ÔºåÊ†πÊú¨‰∏ç‰ºöÂØüËßâËøôÊòØ‰∏Ä‰∏™ËøúÁ®ãË∞ÉÁî®ËÄåÈùûÊú¨Âú∞APIË∞ÉÁî®Ôºâ ÊÄßËÉΩ ËæÉÂ•Ω ‰∏≠Á≠âÔºàÊÄßËÉΩÊòØRestTemplateÁöÑ50%Â∑¶Âè≥ÔºõÂ¶ÇÊûú‰∏∫FeignÈÖçÁΩÆËøûÊé•Ê±†ÔºåÊÄßËÉΩÂèØÊèêÂçá15%Â∑¶Âè≥Ôºâ ÁÅµÊ¥ªÊÄß ÊûÅ‰Ω≥ ‰∏≠Á≠âÔºàÂÜÖÁΩÆÂäüËÉΩËÉΩÊª°Ë∂≥Â§ßÂ§öÊï∞È°πÁõÆÁöÑÈúÄÊ±ÇÔºâ HystrixÂÆπÈîôÊäÄÊúØÁöÑÂºïÂÖ•Ëá≥Ê≠§ÔºåÊàë‰ª¨Â∑≤ÂÆûÁé∞ÊúçÂä°ÂèëÁé∞„ÄÅË¥üËΩΩÂùáË°°ÔºåÂêåÊó∂Ôºå‰ΩøÁî®Feign‰πüÂÆûÁé∞‰∫ÜËâØÂ•ΩÁöÑËøúÁ®ãË∞ÉÁî®‚Äî‚ÄîÊàë‰ª¨ÁöÑ‰ª£Á†ÅÊòØÂèØËØª„ÄÅÂèØÁª¥Êä§ÁöÑ„ÄÇÁêÜËÆ∫‰∏äÔºåÊàë‰ª¨Áé∞Âú®Â∑≤ÁªèËÉΩÊûÑÂª∫‰∏Ä‰∏™‰∏çÈîôÁöÑÂàÜÂ∏ÉÂºèÂ∫îÁî®‰∫ÜÔºå‰ΩÜÂæÆÊúçÂä°‰πãÈó¥ÊòØÈÄöËøáÁΩëÁªúÈÄö‰ø°ÁöÑÔºåÁΩëÁªúÂèØËÉΩÂá∫ÈóÆÈ¢òÔºõÂæÆÊúçÂä°Êú¨Ë∫´‰πü‰∏çÂèØËÉΩ100%ÂèØÁî®„ÄÇ Â¶Ç‰ΩïÊèêÂçáÂ∫îÁî®ÁöÑÂèØÁî®ÊÄßÂë¢ÔºüËøôÊòØÊàë‰ª¨ÂøÖÈ°ªËÄÉËôëÁöÑÈóÆÈ¢ò‚Äî‚Äî ‰∏æ‰∏™‰æãÂ≠êÔºöÊüêÂ§ßÂûãÁ≥ªÁªü‰∏≠ÔºåÊúçÂä°AË∞ÉÁî®ÊúçÂä°BÔºåÊüê‰∏™Êó∂ÂàªÔºåÂæÆÊúçÂä°BÁ™ÅÁÑ∂Â¥©Ê∫É‰∫Ü„ÄÇÂæÆÊúçÂä°A‰∏≠Ôºå‰æùÁÑ∂ÊúâÂ§ßÈáèËØ∑Ê±ÇÂú®ËØ∑Ê±ÇBÔºåÂ¶ÇÊûúÊ≤°Êúâ‰ªª‰ΩïÊé™ÊñΩÔºåÂæÆÊúçÂä°AÂæàÂèØËÉΩÂæàÂø´Â∞±‰ºöË¢´ÊãñÊ≠ª‚Äî‚ÄîÂõ†‰∏∫Âú®Java‰∏≠Ôºå‰∏ÄÊ¨°ËØ∑Ê±ÇÂæÄÂæÄÂØπÂ∫îÁùÄ‰∏Ä‰∏™Á∫øÁ®ãÔºåÂ¶ÇÊûú‰∏çÂÅö‰ªª‰ΩïÊé™ÊñΩÔºåÈÇ£ÊÑèÂë≥ÁùÄÂæÆÊúçÂä°AËØ∑Ê±ÇBÁöÑÁ∫øÁ®ãË¶ÅÁ≠âFeign Client/RestTemplateË∂ÖÊó∂Êâç‰ºöÈáäÊîæÔºàËøô‰∏™Êó∂Èó¥‰∏ÄËà¨ÈùûÂ∏∏ÈïøÔºåÈïøËææÂá†ÂçÅÁßíÔºâÔºå‰∫éÊòØÂ∞±‰ºöÊúâÂ§ßÈáèÁöÑÁ∫øÁ®ãË¢´ÈòªÂ°ûÔºåËÄåÁ∫øÁ®ãÂèàÂØπÂ∫îÁùÄËÆ°ÁÆóËµÑÊ∫êÔºàCPU/ÂÜÖÂ≠òÔºâÔºå‰∫éÊòØ‰πéÔºåÂ§ßÈáèÁöÑËµÑÊ∫êË¢´Êµ™Ë¥πÔºåÂπ∂‰∏îË∂äÁßØË∂äÂ§öÔºåÊúÄÁªàÊúçÂä°Âô®Áªà‰∫éÊ≤°ÊúâËµÑÊ∫êÁªôÂæÆÊúçÂä°AÊµ™Ë¥π‰∫ÜÔºåÂæÆÊúçÂä°A‰πüÊåÇ‰∫Ü„ÄÇ Âõ†Ê≠§ÔºåÂú®Â§ßÂûãÂ∫îÁî®‰∏≠ÔºåÂæÆÊúçÂä°‰πãÈó¥ÁöÑÂÆπÈîôÂøÖ‰∏çÂèØÂ∞ëÔºå‰∏ãÈù¢Êù•ËÆ®ËÆ∫Â¶Ç‰ΩïÂÆûÁé∞ÂæÆÊúçÂä°ÁöÑÂÆπÈîô„ÄÇ ÂÆπÈîô‰∏âÊùøÊñß Ë∂ÖÊó∂Êú∫Âà∂Ôºö‰∏ÄÊó¶Ë∂ÖÊó∂ÔºåÂ∞±ÈáäÊîæËµÑÊ∫ê„ÄÇÁî±‰∫éÈáäÊîæËµÑÊ∫êÈÄüÂ∫¶ËæÉÂø´ÔºåÂ∫îÁî®Â∞±‰∏ç‰ºöÈÇ£‰πàÂÆπÊòìË¢´ÊãñÊ≠ª„ÄÇ Ëà±Â£ÅÊ®°ÂºèÔºö‰∏çÊääÈ∏°ËõãÊîæÂú®‰∏Ä‰∏™ÁØÆÂ≠êÈáå„ÄÇ‰Ω†Êúâ‰Ω†ÁöÑÁ∫øÁ®ãÊ±†ÔºåÊàëÊúâÊàëÁöÑÁ∫øÁ®ãÊ±†Ôºå‰Ω†ÁöÑÁ∫øÁ®ãÊ±†Êª°‰∫ÜÂíåÊàëÊ≤°ÂÖ≥Á≥ªÔºå‰Ω†ÊåÇ‰∫Ü‰πüÂíåÊàëÊ≤°ÂÖ≥Á≥ª„ÄÇ Êñ≠Ë∑ØÂô®ÔºöÂÆûÊó∂ÁõëÊµãÂ∫îÁî®ÔºåÂ¶ÇÊûúÂèëÁé∞Âú®‰∏ÄÂÆöÊó∂Èó¥ÂÜÖÂ§±Ë¥•Ê¨°Êï∞/Â§±Ë¥•ÁéáËææÂà∞‰∏ÄÂÆöÈòàÂÄºÔºåÂ∞±‚ÄúË∑≥Èó∏‚ÄùÔºåÊñ≠Ë∑ØÂô®ÊâìÂºÄ‚Äî‚ÄîÊ≠§Êó∂ÔºåËØ∑Ê±ÇÁõ¥Êé•ËøîÂõûÔºåËÄå‰∏çÂéªË∞ÉÁî®ÂéüÊú¨Ë∞ÉÁî®ÁöÑÈÄªËæë„ÄÇ Ë∑≥Èó∏‰∏ÄÊÆµÊó∂Èó¥ÂêéÔºà‰æãÂ¶Ç15ÁßíÔºâÔºåÊñ≠Ë∑ØÂô®‰ºöËøõÂÖ•ÂçäÂºÄÁä∂ÊÄÅÔºåËøôÊòØ‰∏Ä‰∏™Áû¨Èó¥ÊÄÅÔºåÊ≠§Êó∂ÂÖÅËÆ∏‰∏ÄÊ¨°ËØ∑Ê±ÇË∞ÉÁî®ËØ•Ë∞ÉÁöÑÈÄªËæëÔºåÂ¶ÇÊûúÊàêÂäüÔºåÂàôÊñ≠Ë∑ØÂô®ÂÖ≥Èó≠ÔºåÂ∫îÁî®Ê≠£Â∏∏Ë∞ÉÁî®ÔºõÂ¶ÇÊûúË∞ÉÁî®‰æùÁÑ∂‰∏çÊàêÂäüÔºåÊñ≠Ë∑ØÂô®ÁªßÁª≠ÂõûÂà∞ÊâìÂºÄÁä∂ÊÄÅÔºåËøáÊÆµÊó∂Èó¥ÂÜçËøõÂÖ•ÂçäÂºÄÁä∂ÊÄÅÂ∞ùËØï‚Äî‚ÄîÈÄöËøá‚ÄùË∑≥Èó∏‚ÄúÔºåÂ∫îÁî®ÂèØ‰ª•‰øùÊä§Ëá™Â∑±ÔºåËÄå‰∏îÈÅøÂÖçÊµ™Ë¥πËµÑÊ∫êÔºõËÄåÈÄöËøáÂçäÂºÄÁöÑËÆæËÆ°ÔºåÂèØÂÆûÁé∞Â∫îÁî®ÁöÑ‚ÄúËá™Êàë‰øÆÂ§ç‚Äú„ÄÇ Êñ≠Ë∑ØÂô®Áä∂ÊÄÅËΩ¨Êç¢ ÂºïÂÖ•HystrixHystrixÊòØÁî±NetflixÂºÄÊ∫êÁöÑ‰∏Ä‰∏™Âª∂ËøüÂíåÂÆπÈîôÂ∫ìÔºåÁî®‰∫éÈöîÁ¶ªËÆøÈóÆËøúÁ®ãÁ≥ªÁªü„ÄÅÊúçÂä°ÊàñËÄÖÁ¨¨‰∏âÊñπÂ∫ìÔºåÈò≤Ê≠¢Á∫ßËÅîÂ§±Ë¥•Ôºå‰ªéËÄåÊèêÂçáÁ≥ªÁªüÁöÑÂèØÁî®ÊÄß‰∏éÂÆπÈîôÊÄß„ÄÇHystrix‰∏ªË¶ÅÈÄöËøá‰ª•‰∏ãÂá†ÁÇπÂÆûÁé∞Âª∂ËøüÂíåÂÆπÈîô„ÄÇ ÂåÖË£πËØ∑Ê±Ç ‰ΩøÁî®HystrixCommandÔºàÊàñHystrixObservableCommandÔºâÂåÖË£πÂØπ‰æùËµñÁöÑË∞ÉÁî®ÈÄªËæëÔºåÊØè‰∏™ÂëΩ‰ª§Âú®Áã¨Á´ãÁ∫øÁ®ã‰∏≠ÊâßË°å„ÄÇËøô‰ΩøÁî®Âà∞‰∫ÜËÆæËÆ°Ê®°Âºè‰∏≠ÁöÑ‚Äú ÂëΩ‰ª§Ê®°Âºè ‚Äù„ÄÇ Ë∑≥Èó∏Êú∫Âà∂ÔºàÊñ≠Ë∑ØÂô®ÁöÑÂ∫îÁî®Ôºâ ÂΩìÊüêÊúçÂä°ÁöÑÈîôËØØÁéáË∂ÖËøá‰∏ÄÂÆöÈòàÂÄºÊó∂ÔºåHystrixÂèØ‰ª•Ëá™Âä®ÊàñËÄÖÊâãÂä®Ë∑≥Èó∏ÔºåÂÅúÊ≠¢ËØ∑Ê±ÇËØ•ÊúçÂä°‰∏ÄÊÆµÊó∂Èó¥„ÄÇ ËµÑÊ∫êÈöîÁ¶ªÔºàËà±Â£ÅÊ®°ÂºèÁöÑÂ∫îÁî®Ôºâ Hystrix‰∏∫ÊØè‰∏™‰æùËµñÈÉΩÁª¥Êä§‰∫Ü‰∏Ä‰∏™Â∞èÂûãÁöÑÁ∫øÁ®ãÊ±†ÔºàÊàñËÄÖ‰ø°Âè∑ÈáèÔºâ„ÄÇÂ¶ÇÊûúËØ•Á∫øÁ®ãÊ±†Â∑≤Êª°ÔºåÂèëÂæÄËØ•‰æùËµñÁöÑËØ∑Ê±ÇÂ∞±Ë¢´Á´ãÂç≥ÊãíÁªùÔºåËÄå‰∏çÊòØÊéíÈòüÁ≠âÂÄôÔºå‰ªéËÄåÂä†ÈÄüÂ§±Ë¥•Âà§ÂÆö„ÄÇ ÁõëÊéßÔºàË∂ÖÊó∂Ê®°ÂºèÁöÑÂ∫îÁî®Ôºâ HystrixÂèØ‰ª•Ëøë‰πéÂÆûÊó∂Âú∞ÁõëÊéßËøêË°åÊåáÊ†áÂíåÈÖçÁΩÆÁöÑÂèòÂåñÔºå‰æãÂ¶ÇÊàêÂäü„ÄÅÂ§±Ë¥•„ÄÅË∂ÖÊó∂„ÄÅ‰ª•ÂèäË¢´ÊãíÁªùÁöÑËØ∑Ê±ÇÁ≠â„ÄÇ ÂõûÈÄÄÊú∫Âà∂ ÂΩìËØ∑Ê±ÇÂ§±Ë¥•„ÄÅË∂ÖÊó∂„ÄÅË¢´ÊãíÁªùÔºåÊàñÂΩìÊñ≠Ë∑ØÂô®ÊâìÂºÄÊó∂ÔºåÊâßË°åÂõûÈÄÄÈÄªËæë„ÄÇÂõûÈÄÄÈÄªËæëÂèØÁî±ÂºÄÂèë‰∫∫ÂëòËá™Ë°åÊèê‰æõÔºå‰æãÂ¶ÇËøîÂõû‰∏Ä‰∏™Áº∫ÁúÅÂÄº„ÄÇ Ëá™Êàë‰øÆÂ§ç Êñ≠Ë∑ØÂô®ÊâìÂºÄ‰∏ÄÊÆµÊó∂Èó¥ÂêéÔºå‰ºöËá™Âä®ËøõÂÖ•‚ÄúÂçäÂºÄ‚ÄùÁä∂ÊÄÅ„ÄÇÊñ≠Ë∑ØÂô®ÊâìÂºÄ„ÄÅÂÖ≥Èó≠„ÄÅÂçäÂºÄÁöÑÈÄªËæëËΩ¨Êç¢ÔºåÂâçÈù¢Êàë‰ª¨Â∑≤ÁªèËØ¶ÁªÜÊé¢ËÆ®Ëøá‰∫ÜÔºå‰∏çÂÜçËµòËø∞„ÄÇ ÈÄöÁî®ÊñπÂºè‰ΩøÁî®HystrixÊúçÂä°ÈôçÁ∫ß Âä†‰æùËµñÔºö 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;&lt;/dependency&gt; Âä†Ê≥®Ëß£ÔºöÂú®ÂêØÂä®Á±ª‰∏äÊ∑ªÂä†@EnableCircuitBreaker Ê≥®Ëß£„ÄÇ ‰ΩøÁî®Ôºö 12345678910111213141516@HystrixCommand(fallbackMethod = "findByIdFallback")@GetMapping("/users/&#123;id&#125;")public User findById(@PathVariable Long id) &#123; // ËøôÈáåÁî®Âà∞‰∫ÜRestTemplateÁöÑÂç†‰ΩçÁ¨¶ËÉΩÂäõ User user = this.restTemplate.getForObject( "http://microservice-provider-user/users/&#123;id&#125;", User.class, id ); // ...ÁîµÂΩ±ÂæÆÊúçÂä°ÁöÑ‰∏öÂä°... return user;&#125;public User findByIdFallback(Long id) &#123; return new User(id, "ÈªòËÆ§Áî®Êà∑", "ÈªòËÆ§Áî®Êà∑", 0, new BigDecimal(1));&#125; Áî±‰ª£Á†ÅÂèØÁü•ÔºåÂè™ÈúÄ‰ΩøÁî®@HystrixCommand Ê≥®Ëß£ÔºåÂ∞±ÂèØ‰øùÊä§ËØ•API„ÄÇËøôÈáåÁöÑ‚Äù‰øùÊä§‚ÄúÔºåÂÖ∂ÂÆûÂ∏¶Êúâ‰∏âÂ±ÇÂê´‰πâ‚Äî‚Äî‚ÄùË∂ÖÊó∂Êú∫Âà∂‚Äú„ÄÅ‚Äù‰ªìÂ£ÅÊ®°Âºè‚Äú„ÄÅ‚ÄùÊñ≠Ë∑ØÂô®‚ÄúÔºÅ TIPS Êú¨‰æã‰ΩøÁî®‰∫ÜfallbackMethod Â±ûÊÄßÔºåÊåáÂÆö‰∫Ü‰∏Ä‰∏™ÈôçÁ∫ßÊñπÊ≥ïÔºåÂ¶Ç‰∏çÊåáÂÆöÔºåHystrix‰ºöÊúâ‰∏Ä‰∏™ÈªòËÆ§ÁöÑÈôçÁ∫ßÊñπÊ°àÔºåÈÇ£Â∞±ÊòØÊäõÂºÇÂ∏∏ÔºåÂìàÂìàÂìà„ÄÇ Â¶Ç‰ΩïÁü•ÈÅìÊñ≠Ë∑ØÂô®ÊâìÂºÄËøòÊòØÂÖ≥Èó≠Âë¢ÔºüÂè™ÈúÄËÆøÈóÆÂ∫îÁî®ÁöÑ/actuator/health Á´ØÁÇπÔºåÂç≥ÂèØÊü•ÁúãÔºÅÊñ≠Ë∑ØÂô®ÁöÑÁä∂ÊÄÅ‚Äî‚ÄîÂΩìÁÑ∂Ôºå‰Ω†ÂøÖÈ°ªÊ∑ªÂä†Â¶Ç‰∏ãÈÖçÁΩÆÔºö 1234management: endpoint: health: show-details: always ÊµãËØï ÂêØÂä®microservice-discovery-eureka ÂêØÂä®microservice-provider-user ÂêØÂä®microservice-consumer-movie-ribbon-hystrix-common ËÆøÈóÆhttp://localhost:8010/movies/users/1 ÔºåËÉΩÊ≠£Â∏∏ËøîÂõûÁªìÊûú ÂÖ≥Èó≠microservice-provider-user ÔºåÂÜçÊ¨°ËÆøÈóÆhttp://localhost:8010/movies/users/1 ÔºåÂèØËøîÂõûÁ±ª‰ººÂ¶Ç‰∏ãÁªìÊûúÔºåËØ¥ÊòéÂΩìÊúçÂä°Êèê‰æõËÄÖÊó∂ÔºåÊúçÂä°Ê∂àË¥πËÄÖËøõÂÖ•‰∫ÜÂõûÈÄÄÊñπÊ≥ï„ÄÇ 1&#123;"id":1,"username":"ÈªòËÆ§Áî®Êà∑","name":"ÈªòËÆ§Áî®Êà∑","age":0,"balance":1&#125; ËÆøÈóÆhttp://localhost:8010/actuator/health ÔºåÂèØËé∑ÂæóÁ±ª‰ººÂ¶Ç‰∏ãÁªìÊûúÔºö 1234567891011&#123; "status": "UP", "details": &#123; "diskSpace": ..., "refreshScope": ..., "discoveryComposite": ..., "hystrix": &#123; "status": "UP" &#125; &#125;&#125; Áî±ÁªìÊûú‰∏çÈöæÂèëÁé∞ÔºåÊ≠§Êó∂Êñ≠Ë∑ØÂô®Âπ∂Êú™ÊâìÂºÄÔºÅËøôÊòØ‰∏∫‰ªÄ‰πàÂë¢Ôºü ÂéüÂõ†ÊòØÔºöÊ≠§Êó∂Âè™ËØ∑Ê±Ç‰∫Ü‰∏ÄÊ¨°ÔºåÊ≤°ÊúâËææÂà∞HystrixÁöÑÈòàÂÄº‚Äî‚ÄîHystrixËÆæËÆ°Êù•‰øùÊä§È´òÂπ∂ÂèëÂ∫îÁî®ÁöÑÔºåÂÆÉË¶ÅÊ±Ç10ÁßíÔºàÂèØÁî®hystrix.command.default.metrics.rollingStats.timeInMilliseconds Ëá™ÂÆö‰πâÔºâ‰ª•ÂÜÖAPIÈîôËØØÊ¨°Êï∞Ë∂ÖËøá20Ê¨°ÔºàÁî®circuitBreaker.requestVolumeThreshold Ëá™ÂÆö‰πâÔºâÔºåÊ≠§Êó∂ÊâçÂèØËÉΩËß¶ÂèëÊñ≠Ë∑ØÂô®„ÄÇ ÊåÅÁª≠‰∏çÊñ≠Âú∞ËÆøÈóÆhttp://localhost:8010/movies/users/1 Â§öÊ¨°ÔºàËá≥Â∞ë20Ê¨°Ôºâ ÂÜçÊ¨°ËÆøÈóÆhttp://localhost:8010/actuator/health ÔºåÂèØËé∑ÂæóÁ±ª‰ººÂ¶Ç‰∏ãÁªìÊûúÔºö 1234567891011121314&#123; "status": "UP", "details": &#123; "diskSpace": ..., "refreshScope": ..., "discoveryComposite": ..., "hystrix": &#123; "status": "CIRCUIT_OPEN", "details": &#123; "openCircuitBreakers": ["MovieController::findById"] &#125; &#125; &#125;&#125; Áî±ÁªìÊûúÂèØÁü•ÔºåÊ≠§Êó∂Êñ≠Ë∑ØÂô®Â∑≤ÁªèÊâìÂºÄÔºåÂπ∂‰∏îÂàóÂá∫‰∫ÜÊòØÂì™‰∏™APIÁöÑÊñ≠Ë∑ØÂô®Ë¢´ÊâìÂºÄ‰∫Ü„ÄÇ Ëé∑ÂæóÈÄ†ÊàêfallbackÁöÑÂéüÂõ†Âú®ÂÆûÈôÖÈ°πÁõÆ‰∏≠ÔºåÂæàÂèØËÉΩÈúÄË¶ÅËé∑ÂæóÈÄ†ÊàêfallbackÁöÑÂéüÂõ†ÔºåÊ≠§Êó∂ÂèØÂ∞Ü‰ª£Á†Å‰øÆÊîπ‰∏∫Â¶Ç‰∏ãÔºö 1234567891011121314151617@HystrixCommand(fallbackMethod = "findByIdFallback")@GetMapping("/users/&#123;id&#125;")public User findById(@PathVariable Long id) &#123; // ËøôÈáåÁî®Âà∞‰∫ÜRestTemplateÁöÑÂç†‰ΩçÁ¨¶ËÉΩÂäõ User user = this.restTemplate.getForObject( "http://microservice-provider-user/users/&#123;id&#125;", User.class, id ); // ...ÁîµÂΩ±ÂæÆÊúçÂä°ÁöÑ‰∏öÂä°... return user;&#125;public User findByIdFallback(Long id, Throwable throwable) &#123; log.error("ËøõÂÖ•ÂõûÈÄÄÊñπÊ≥ï", throwable); return new User(id, "ÈªòËÆ§Áî®Êà∑", "ÈªòËÆ§Áî®Êà∑", 0, new BigDecimal(1));&#125; Feign Êï¥Âêà HystrixÈªòËÆ§FeignÊòØ‰∏çÂêØÁî®HystrixÁöÑÔºåÂ¶ÇÊûúÈúÄË¶ÅÂêØÁî®ÔºåÂè™ÈúÄË¶ÅÂú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈÖçÁΩÆÂç≥ÂèØÔºö 123feign: hystrix: enabled: true Hystrix Command ËØ¶Ëß£ÁõëÊéßÁ´ØÁÇπ‰∏éÊï∞ÊçÆÂ∫îÁî®Êï¥ÂêàHystrixÔºåÂêåÊó∂Â∫îÁî®ÂåÖÂê´spring-boot-starter-actuator ‰æùËµñÔºåÂ∞±‰ºöÂ≠òÂú®‰∏Ä‰∏™/actuator/hystrix.stream Á´ØÁÇπÔºåÁî®Êù•ÁõëÊéßHystrix Command„ÄÇÂΩìË¢´@HystrixCommand Ê≥®Ëß£‰∫ÜÁöÑÊñπÊ≥ïË¢´Ë∞ÉÁî®Êó∂ÔºåÂ∞±‰ºö‰∫ßÁîüÁõëÊéß‰ø°ÊÅØÔºåÂπ∂Êö¥Èú≤Âà∞ËØ•Á´ØÁÇπ‰∏≠„ÄÇÂΩìÁÑ∂ÔºåËØ•Á´ØÁÇπÈªòËÆ§ÊòØ‰∏ç‰ºöÊö¥Èú≤ÁöÑÔºåÈúÄ‰ΩøÁî®Â¶Ç‰∏ãÈÖçÁΩÆÂ∞ÜÂÖ∂Êö¥Èú≤„ÄÇ 12345management: endpoints: web: exposure: include: 'hystrix.stream' Ê≠§Êó∂ÔºåËÆøÈóÆ/actuator/hystrix.stream ÂèØËøîÂõûÂ¶Ç‰∏ãÁªìÊûúÔºö 1&#123;"type":"HystrixCommand","name":"findById","group":"MovieController","currentTime":1547905939151,"isCircuitBreakerOpen":false,"errorPercentage":0,"errorCount":0,"requestCount":0,"rollingCountBadRequests":0,"rollingCountCollapsedRequests":0,"rollingCountEmit":0,"rollingCountExceptionsThrown":0,"rollingCountFailure":0,"rollingCountFallbackEmit":0,"rollingCountFallbackFailure":0,"rollingCountFallbackMissing":0,"rollingCountFallbackRejection":0,"rollingCountFallbackSuccess":0,"rollingCountResponsesFromCache":0,"rollingCountSemaphoreRejected":0,"rollingCountShortCircuited":0,"rollingCountSuccess":0,"rollingCountThreadPoolRejected":0,"rollingCountTimeout":0,"currentConcurrentExecutionCount":0,"rollingMaxConcurrentExecutionCount":0,"latencyExecute_mean":0,"latencyExecute":&#123;"0":0,"25":0,"50":0,"75":0,"90":0,"95":0,"99":0,"99.5":0,"100":0&#125;,"latencyTotal_mean":0,"latencyTotal":&#123;"0":0,"25":0,"50":0,"75":0,"90":0,"95":0,"99":0,"99.5":0,"100":0&#125;,"propertyValue_circuitBreakerRequestVolumeThreshold":20,"propertyValue_circuitBreakerSleepWindowInMilliseconds":5000,"propertyValue_circuitBreakerErrorThresholdPercentage":50,"propertyValue_circuitBreakerForceOpen":false,"propertyValue_circuitBreakerForceClosed":false,"propertyValue_circuitBreakerEnabled":true,"propertyValue_executionIsolationStrategy":"THREAD","propertyValue_executionIsolationThreadTimeoutInMilliseconds":1000,"propertyValue_executionTimeoutInMilliseconds":1000,"propertyValue_executionIsolationThreadInterruptOnTimeout":true,"propertyValue_executionIsolationThreadPoolKeyOverride":null,"propertyValue_executionIsolationSemaphoreMaxConcurrentRequests":10,"propertyValue_fallbackIsolationSemaphoreMaxConcurrentRequests":10,"propertyValue_metricsRollingStatisticalWindowInMilliseconds":10000,"propertyValue_requestCacheEnabled":true,"propertyValue_requestLogEnabled":true,"reportingHosts":1,"threadPool":"MovieController"&#125; ÂØπ‰∫éFeignÂâçÈù¢ËÆ≤ËøáFeignÈªòËÆ§Â∑≤ÁªèÊï¥Âêà‰∫ÜHystrixÔºå‰ΩÜËøô‰∏™Êï¥ÂêàÂÖ∂ÂÆûÊòØ‚Äú‰∏çÂÆåÊï¥‚ÄùÔºåÂõ†‰∏∫ÂÆÉÈªòËÆ§‰∏çÂ∏¶ÊúâÁõëÊéßÁ´ØÁÇπÔºåÂ¶ÇÊûú‰Ω†Âú®‰ΩøÁî®FeignÁöÑÂêåÊó∂Ôºå‰πüÊÉ≥‰ΩøÁî®ÁõëÊéßÁ´ØÁÇπÔºåÈúÄÊåâÁÖßÂ¶Ç‰∏ãÊ≠•È™§Êìç‰ΩúÔºö Âä†‰æùËµñ 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;&lt;/dependency&gt; Âú®ÂêØÂä®Á±ª‰∏äÊ∑ªÂä†Ê≥®Ëß£@EnableCircuitBreaker Âú®application.yml ‰∏≠Ê∑ªÂä†Â¶Ç‰∏ãÈÖçÁΩÆÔºö 12345management: endpoints: web: exposure: include: 'hystrix.stream' ÂèØËßÜÂåñÁõëÊéßÊï∞ÊçÆËá≥Ê≠§ÔºåÊàë‰ª¨Â∑≤ÂèØÈÄöËøá/actuator/hystrix.strem Á´ØÁÇπËßÇÂØüHystrixËøêË°åÊÉÖÂÜµÔºå‰ΩÜÊñáÂ≠óÂΩ¢ÂºèÁöÑÁõëÊéßÊï∞ÊçÆÂæà‰∏çÁõ¥ËßÇ„ÄÇÁé∞ÂÆûÈ°πÁõÆ‰∏≠‰∏ÄËà¨ÈÉΩÈúÄË¶Å‰∏Ä‰∏™ÂèØËßÜÂåñÁöÑÁïåÈù¢ÔºåËøôÊ†∑ÊâçËÉΩËøÖÈÄü‰∫ÜËß£Á≥ªÁªüÁöÑËøêË°åÊÉÖÂÜµ„ÄÇHystrixÊèê‰æõ‰∫Ü‰∏Ä‰∏™ËΩÆÂ≠ê‚Äî‚ÄîHystrix DashboardÔºåÂÆÉÁöÑ‰ΩúÁî®Âè™Êúâ‰∏Ä‰∏™ÔºåÈÇ£Â∞±ÊòØÂ∞ÜÊñáÂ≠óÂΩ¢ÂºèÁöÑÁõëÊéßÊï∞ÊçÆËΩ¨Êç¢ÊàêÂõæË°®Â±ïÁ§∫„ÄÇ ÁºñÂÜôHystrix Dashboard Âä†‰æùËµñ 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix-dashboard&lt;/artifactId&gt;&lt;/dependency&gt; Âä†Ê≥®Ëß£Ôºö@EnableHystrixDashboard ÂÜôÈÖçÁΩÆÔºö 123# Á´ØÂè£Èöè‰æøÂÜôÔºåËøôÈáåÂè™ÊòØË°®Êòé‰∏ãËá™Â∑±ÁöÑÁ´ØÂè£ËßÑÂàíËÄåÂ∑≤server: port: 8030 ÂêØÂä®ÂêéÔºåËÆøÈóÆhttp://localhost:8030/hystrix Âç≥ÂèØÁúãÂà∞Á±ª‰ººÂ¶Ç‰∏ãÁöÑÁïåÈù¢Ôºö Â∞Ü‰∏äÊñáÁöÑ/actuator/hystrix.stream Á´ØÁÇπÁöÑÂú∞ÂùÄË¥¥Âà∞Âõæ‰∏≠ÔºåÂπ∂ÊåáÂÆöTitleÔºåÁÑ∂ÂêéÁÇπÂáªMonitor Stream ÊåâÈíÆÔºåÂç≥ÂèØÁúãÂà∞Á±ª‰ººÂ¶Ç‰∏ãÁöÑÂõæË°®Ôºö ÂõæË°®Ëß£ËØªTurbine Turbine‰∏äÊñáÁöÑHystrix DashboardÂè™ÊîØÊåÅ‰∏ÄÊ¨°ÁõëÊéß‰∏Ä‰∏™ÂæÆÊúçÂä°ÂÆû‰æãÔºåÊòæÁÑ∂ÊòØ‰∏çËÉΩÊª°Ë∂≥ÈúÄÊ±ÇÁöÑÔºåÊâÄ‰ª•‰∏∫‰∫ÜËÉΩÁõëÊéßÂ§ö‰∏™ÂæÆÊúçÂä°ÔºåNetflixÂÆòÊñπÂÜçÊ¨°ÂèëÊå•ÈÄ†ËΩÆÂ≠êÁöÑÁ≤æÁ•û‚Äî‚ÄîÂÆÉ‰ª¨ÂèàÁºñÂÜô‰∫Ü‰∏Ä‰∏™ÁªÑ‰ª∂ÔºåTurbine„ÄÇ ‰∏çËøáËøô‰∏™È°πÁõÆÂàöÂá∫ÁîüÂ∞±Ê≠ª‰∫ÜÔºå14Âπ¥ÂèëÂ∏ÉÂêéÂ∞±ÂÜç‰πüÊ≤°ÊúâËøõË°åÊõ¥Êñ∞Áª¥Êä§„ÄÇ ÁÆÄ‰ªãTurbineÊòØ‰∏Ä‰∏™ËÅöÂêàHystrixÁõëÊéßÊï∞ÊçÆÁöÑÂ∑•ÂÖ∑ÔºåÂÆÉÂèØÂ∞ÜÊâÄÊúâÁõ∏ÂÖ≥/hystrix.streamÁ´ØÁÇπÁöÑÊï∞ÊçÆËÅöÂêàÂà∞‰∏Ä‰∏™ÁªÑÂêàÁöÑ/turbine.stream‰∏≠Ôºå‰ªéËÄåËÆ©ÈõÜÁæ§ÁöÑÁõëÊéßÊõ¥Âä†Êñπ‰æø„ÄÇ ÂºïÂÖ•TurbineÂêéÔºåÊû∂ÊûÑÂõæÂ¶Ç‰∏ãÔºö ÂºïÂÖ•TurbineÁºñÂÜôTurbine Server Âä†‰æùËµñ 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-turbine&lt;/artifactId&gt;&lt;/dependency&gt; Âä†Ê≥®Ëß£Ôºö@EnableTurbine ÂÜôÈÖçÁΩÆÔºö 123456789101112131415server: port: 8031spring: application: name: microservice-hystrix-turbineeureka: client: service-url: defaultZone: http://localhost:8761/eureka/ instance: prefer-ip-address: trueturbine: # Ë¶ÅÁõëÊéßÁöÑÂæÆÊúçÂä°ÂàóË°®ÔºåÂ§ö‰∏™Áî®,ÂàÜÈöî appConfig: microservice-consumer-movie,microservice-consumer-movie-feign clusterNameExpression: "'default'" ÊµãËØïËøôÊ†∑ÔºåTubineÂç≥ÂèØËÅöÂêàmicroservice-consumer-movie,microservice-consumer-movie-feign‰∏§‰∏™ÊúçÂä°ÁöÑ/actuator/hystrix.stream ‰ø°ÊÅØÔºåÂπ∂Êö¥Èú≤Âú®http://localhost:8031/turbine.stream ÔºåÂ∞ÜËØ•Âú∞ÂùÄË¥¥Âà∞Hystrix Dashboard‰∏äÔºåÂç≥ÂèØÁúãÂà∞Á±ª‰ººÂ¶Ç‰∏ãÁöÑÂõæË°®Ôºö Zuul]]></content>
      <tags>
        <tag>SpringCloud</tag>
        <tag>ÂæÆÊúçÂä°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Âä®ÊÄÅËßÑÂàíÁ¨îËÆ∞]]></title>
    <url>%2F2019%2F12%2F09%2F%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E7%AC%94%E8%AE%B0.html</url>
    <content type="text"><![CDATA[ÈÄíÂΩí„ÄÅÈÄíÊé® ÈÄíÂΩí Ëá™È°∂Âêë‰∏ã ÈÄíÊé® Ëá™Â∫ïÂêë‰∏ä Âä®ÊÄÅËßÑÂàíÈ¢òÁöÑ‰∏ÄËà¨ÊÄùË∑Ø ÂÖàÂÜôÂá∫ÈÄíÂΩíÊÄùË∑Ø ÁÑ∂ÂêéÂâ™Êûù(ÂâçÈù¢‰∫åËÄÖÈÉΩÊòØËá™‰∏äËÄå‰∏ã) ÁÑ∂ÂêéÂÜôÂá∫dp(‰∏çÂêå‰∫éÂâ™ÊûùÁöÑÊòØ dpÊòØËá™Â∫ïÂêë‰∏ä) dpÈóÆÈ¢òÊ†∏ÂøÉÊòØÁ©∑‰∏æÔºådpÁâπÁÇπÊòØÂ≠òÂú® ÈáçÂè†Â≠êÈóÆÈ¢ò ÊúÄ‰ºòÂ≠êÁªìÊûÑ ÁÑ∂ÂêéÂè™Ë¶ÅÂú®Ê≠§Âü∫Á°Ä‰∏äÂàóÂá∫ Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã Âç≥ÂèØ Âä®ÊÄÅËßÑÂàíÁöÑ‰∏âË¶ÅÁ¥†Ôºö ÈáçÂè†Â≠êÈóÆÈ¢ò ÊúÄ‰ºòÂ≠êÁªìÊûÑ Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã ÊÄùÁª¥Ê°ÜÊû∂Ôºö ÊòéÁ°Æ„ÄåÁä∂ÊÄÅ„Äç -&gt; ÂÆö‰πâ dp Êï∞ÁªÑ/ÂáΩÊï∞ÁöÑÂê´‰πâ -&gt; ÊòéÁ°Æ„ÄåÈÄâÊã©„Äç-&gt; ÊòéÁ°Æ base case„ÄÇ]]></content>
  </entry>
  <entry>
    <title><![CDATA[jvmÁ¨îËÆ∞]]></title>
    <url>%2F2019%2F12%2F04%2F%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0.html</url>
    <content type="text"><![CDATA[Á¨¨‰∫åÁ´† JavaÂÜÖÂ≠òÂå∫Âüü‰∏éÂÜÖÂ≠òÊ∫¢Âá∫ÂºÇÂ∏∏1. ËøêË°åÊó∂Êï∞ÊçÆÂå∫ÂüüÂåÖÊã¨ ÊñπÊ≥ïÂå∫„ÄÅÂ†ÜÔºàÂâç‰∏§ËÄÖÈÉΩÊòØÂÖ±‰∫´ÁöÑÔºâ„ÄÅËôöÊãüÊú∫Ê†à„ÄÅÊú¨Âú∞ÊñπÊ≥ïÊ†à„ÄÅÁ®ãÂ∫èËÆ°Êï∞Âô®Ôºà‰∏âËÄÖÊòØÁ∫øÁ®ãÁßÅÊúâÔºâ„ÄÇ ÊñπÊ≥ïÂå∫Ôºö‰∏éJavaÂ†Ü‰∏ÄÊ†∑ÔºåÊòØÂêÑ‰∏™Á∫øÁ®ãÂÖ±‰∫´ÁöÑÂÜÖÂ≠òÂå∫ÂüüÔºåÁî®‰∫éÂ≠òÂÇ®Â∑≤Ë¢´ËôöÊãüÊú∫Âä†ËΩΩÁöÑÁ±ª‰ø°ÊÅØ„ÄÅÂ∏∏Èáè„ÄÅÈùôÊÄÅÂèòÈáèÔºåÂà´ÂêçÁß∞‰∏∫Non-Heap„ÄÇ Â†ÜÔºöJava HeapÊòØJavaËôöÊãüÊú∫ÊâÄÁÆ°ÁêÜÁöÑÂÜÖÂ≠ò‰∏≠ÊúÄÂ§ßÁöÑ‰∏ÄÂùó„ÄÇJavaÂ†ÜÊòØË¢´ÊâÄÊúâÁ∫øÁ®ãÂÖ±‰∫´ÁöÑ‰∏ÄÂùóÂÜÖÂ≠òÂå∫ÂüüÔºåÊ≠§ÂÜÖÂ≠òÂå∫ÂüüÁöÑÂîØ‰∏ÄÁõÆÁöÑÊòØÂ≠òÊîæÂØπË±°ÂÆû‰æãÔºåÂêåÊó∂JavaÂ†ÜÊòØÂûÉÂúæÊî∂ÈõÜÁÆ°ÁêÜÁöÑ‰∏ªË¶ÅÂå∫ÂüüÔºåÂæàÂ§öÊó∂ÂÄô‰πüË¢´Áß∞‰∏∫ GCÂ†Ü„ÄÇ ËôöÊãüÊú∫Ê†àÔºöÊèèËø∞ÁöÑÊòØJavaÊñπÊ≥ïÊâßË°åÁöÑÂÜÖÂ≠òÊ®°ÂûãÔºåÂç≥ÊØè‰∏™ÊñπÊ≥ï‰ºöÂú®ÊâßË°åÁöÑÂêåÊó∂ÂàõÂª∫‰∏Ä‰∏™Ê†àÂ∏ßÁî®‰∫éÂ≠òÂÇ®Â±ÄÈÉ®ÂèòÈáèË°®„ÄÅÊìç‰ΩúÊï∞Ê†à„ÄÅÂä®ÊÄÅÈìæÊé•„ÄÅÊñπÊ≥ïÂá∫Âè£Á≠â‰ø°ÊÅØ„ÄÇÁªèÂ∏∏Êúâ‰∫∫ÊääJavaÂÜÖÂ≠òÂàÜ‰∏∫Â†ÜÂÜÖÂ≠òÂíåÊ†àÂÜÖÂ≠òÔºåËøôÈáåÁöÑÊ†àÂÜÖÂ≠òÂ∞±ÊòØÊåáÁöÑËôöÊãüÊú∫Ê†à„ÄÇ Êú¨Âú∞ÊñπÊ≥ïÊ†àÔºö‰∏éËôöÊãüÊú∫Ê†àÂèëÊå•ÁöÑÂäüËÉΩÂü∫Êú¨‰∏ÄËá¥ÔºåÂå∫Âà´‰∏çËøáÊòØËôöÊãüÊú∫Ê†à‰∏∫ËôöÊãüÊú∫ÊâßË°åJavaÊñπÊ≥ïÊúçÂä°ÔºåËÄåÊú¨Âú∞ÊñπÊ≥ïÊ†àÂàô‰∏∫ËôöÊãüÊú∫‰ΩøÁî®Âà∞ÁöÑNativeÊñπÊ≥ïÊúçÂä°„ÄÇ Á®ãÂ∫èËÆ°Êï∞Âô®Ôºö‰∏ÄÂùóËæÉÂ∞èÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂèØ‰ª•Áúã‰ΩúÊòØÂΩìÂâçÁ∫øÁ®ãÊâÄÊâßË°åÁöÑÂ≠óËäÇÁ†ÅÁöÑË°åÂè∑ÊåáÁ§∫Âô®„ÄÇ ËøêË°åÊó∂Â∏∏ÈáèÊ±†ÔºöÊñπÊ≥ïÂå∫ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇÂ∏∏ÈáèÊ±†ÔºàÁî®‰∫éÂ≠òÊîæÁºñËØëÊúüÁîüÊàêÁöÑÂêÑÁßçÂ≠óÈù¢ÈáèÂíåÁ¨¶Âè∑ÂºïÁî®Ôºâ„ÄÇ Áõ¥Êé•ÂÜÖÂ≠òÔºöÂπ∂‰∏çÊòØËôöÊãüÊú∫ËøêË°åÊó∂Êï∞ÊçÆÂå∫ÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰πü‰∏çÊòØJavaËôöÊãüÊú∫ËßÑËåÉ‰∏≠ÂÆö‰πâÁöÑÂÜÖÂ≠òÂå∫Âüü„ÄÇ„ÄåNIO ‰∏≠‰ºö‰ΩøÁî®„Äç ÂØπÂÆÉÁöÑ‰ΩøÁî®ËøòÊòØ‰∏çÊòØÁâπÂà´‰∫ÜËß£‚Ä¶ Â†ÜÂ§ñÂÜÖÂ≠òÔºöhttps://blog.csdn.net/y3over/article/details/88791958 2. OutOfMemoryErrorÂºÇÂ∏∏ÂåÖÊã¨ JavaÂ†ÜÊ∫¢Âá∫„ÄÅËôöÊãüÊú∫Ê†àÂíåÊú¨Âú∞ÊñπÊ≥ïÊ†àÊ∫¢Âá∫„ÄÅÊñπÊ≥ïÂå∫ÂíåËøêË°åÊó∂Â∏∏ÈáèÊ±†Ê∫¢Âá∫„ÄÅÊú¨Êú∫Áõ¥Êé•ÂÜÖÂ≠òÊ∫¢Âá∫„ÄÇ Â†ÜÊ∫¢Âá∫Ôºå‰∏ªË¶ÅÂ∞±ÊòØ‰∏çÂÅúÁöÑ new ÂØπË±°Âç≥ÂèØÔºõ„Äå-Xms„Äç Ê†àÊ∫¢Âá∫Ôºå‰∏ªË¶ÅÊòØÂÆö‰πâÂ§ßÈáèÁöÑÊú¨Âú∞ÂèòÈáèÔºåÁÑ∂ÂêéÈÄíÂΩíÔºå‰ΩøÂæóÁàÜÊ†àÔºåËøôÊ†∑‰ºöÊúâ StackOverflowErrorÔºåÂ¶ÇÊûúÊÉ≥Ë¶ÅÊúâ OOMÔºåÊúÄÂ•ΩÁöÑÊñπÊ≥ïÂ∞±ÊòØ‰∏çÂÅúÁöÑÂàõÂª∫Á∫øÁ®ãÔºåÂõ†‰∏∫Á≥ªÁªüÂàÜÈÖçÁªôÊ†àÁöÑÂÜÖÂ≠òÊòØÊúâÈôêÁöÑÔºåÊØîÂ¶Ç‰∏ÄËà¨ÊÄªÁöÑÊòØ 2GÔºåÁÑ∂ÂêéÂáèÂéªÂ†ÜÂíåÊñπÊ≥ïÂå∫ÁöÑÂÆπÈáèÔºåÂ∞±ÊòØÊ†àÁöÑÂÆπÈáè‰∫ÜÔºåÂ¶ÇÊûú‰∏çÊñ≠Âú∞ new Á∫øÁ®ãÁöÑËØùÔºåÈÇ£‰πàÊÄªÊúâ‰∏Ä‰∏™Á∫øÁ®ã‰ºöÂÜÖÂ≠ò‰∏çÂ§üÔºåÊ≠§Êó∂Â∞±ËÉΩÂ§üÂºπÂá∫ OOM ‰∫ÜÔºõ„Äå„Äç ÊñπÊ≥ïÂå∫‰∏≠ÁöÑËøêË°åÊó∂Â∏∏ÈáèÊ±†ÁöÑÊ∫¢Âá∫Ôºå‰∏ÄËà¨‰πüÂ∞±ÊòØ‰ΩøÁî® String.inter() ÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ïÊòØ‰∏ÄÊó¶Ê±†‰∏≠Ê≤°ÊúâÈúÄË¶ÅÁöÑÂ∏∏ÈáèÔºåÂ∞±ÂÆö‰πâ‰∏Ä‰∏™ÊîæÂà∞Ê±†‰∏≠ÂéªÔºåÂê¶ÂàôÂ∞±ÊãøÂá∫Ëøô‰∏™Â∏∏ÈáèÁöÑÂú∞ÂùÄÔºåÊàë‰∏çÊñ≠ÁöÑÂÆö‰πâÂ∏∏ÈáèÊîæÂÖ•Â∏∏ÈáèÊ±†ÔºåÈÇ£‰πàÂ∞±ÂæàÂÆπÊòì OOMÔºõ„ÄåPermGen Space„Äç ÊñπÊ≥ïÂå∫Ê∫¢Âá∫ÔºåÊúÄÂü∫Êú¨ÁöÑÊÄùË∑ØÂ∞±ÊòØËøêË°åÊó∂‰∫ßÁîüÂ§ßÈáèÁöÑÁ±ªÂéªÂ°´Êª°ÊñπÊ≥ïÂå∫Áõ¥Âà∞Ê∫¢Âá∫ÔºåËøôÈáåÂÄüÂä©ÁöÑÊòØ GGLib Áõ¥Êé•Êìç‰ΩúÂ≠óËäÇÁ†ÅÁîüÊàêÂ§ßÈáèÁöÑÂä®ÊÄÅÁ±ª„ÄÇ„ÄåËøô‰∏™Âú∞ÊñπÊàë‰∏çÂ§™‰ºö‚Ä¶„Äç„Äå-XX:PermSize„Äç Êú¨Êú∫Áõ¥Êé•ÂÜÖÂ≠òÊ∫¢Âá∫„Äå-XX:MaxDirectMemorySize„Äç 3. Ë°•ÂÖÖÔºöËôöÊãüÊú∫ÈÉ®ÂàÜÂèÇÊï∞-vmargs -Xms128M -Xmx512M -XX:PermSize=64M -XX:MaxPermSize=128M-vmargs ËØ¥ÊòéÂêéÈù¢ÊòØVMÁöÑÂèÇÊï∞ÔºåÊâÄ‰ª•ÂêéÈù¢ÁöÑÂÖ∂ÂÆûÈÉΩÊòØJVMÁöÑÂèÇÊï∞‰∫Ü-Xms128m JVMÂàùÂßãÂàÜÈÖçÁöÑÂ†ÜÂÜÖÂ≠ò-Xmx512m JVMÊúÄÂ§ßÂÖÅËÆ∏ÂàÜÈÖçÁöÑÂ†ÜÂÜÖÂ≠òÔºåÊåâÈúÄÂàÜÈÖç-XX:PermSize=64M JVMÂàùÂßãÂàÜÈÖçÁöÑÈùûÂ†ÜÂÜÖÂ≠ò-XX:MaxPermSize=128M JVMÊúÄÂ§ßÂÖÅËÆ∏ÂàÜÈÖçÁöÑÈùûÂ†ÜÂÜÖÂ≠òÔºåÊåâÈúÄÂàÜÈÖç Á¨¨‰∏âÁ´† ÂûÉÂúæÊî∂ÈõÜÂô®‰∏éÂÜÖÂ≠òÂàÜÈÖçÁ≠ñÁï•ÈóÆÈ¢òÔºö Âì™‰∫õÂÜÖÂ≠òÈúÄË¶ÅÂõûÊî∂ ‰ªÄ‰πàÊó∂ÂÄôÂõûÊî∂ Â¶Ç‰ΩïÂõûÊî∂ QÔºöÂì™‰∫õÂÜÖÂ≠òÈúÄË¶ÅÂõûÊî∂Ôºü ÂÖ∂‰∏≠ÔºåÁ®ãÂ∫èËÆ°Êï∞Âô®„ÄÅËôöÊãüÊú∫Ê†à„ÄÅÊú¨Âú∞ÊñπÊ≥ïÊ†à‰∏â‰∏™Âå∫ÂüüÈöèÁ∫øÁ®ãËÄåÁîü„ÄÅÈöèÁ∫øÁ®ãËÄåÁÅ≠ÔºåÊØè‰∏Ä‰∏™Ê†àÂ∏ßÂàÜÈÖçÂ§öÂ∞ëÂÜÖÂ≠òÂü∫Êú¨‰∏äÊòØÂú®Á±ªÁªìÊûÑÁ°ÆÂÆö‰∏ãÊù•Êó∂Â∞±Â∑≤Áü•ÁöÑÔºàÂ∞ΩÁÆ° JIT ÁºñËØëÊúü‰ºöÂú®ËøêË°åÊúüÈó¥ËøõË°å‰∏Ä‰∫õ‰ºòÂåñÔºå‰ΩÜÂ§ß‰ΩìÂèØ‰ª•ÁêÜËß£‰∏∫ÁºñËØëÊúüÈó¥Â∞±ÂèØÁü•ÔºâÔºåÊâÄ‰ª•ËøôÂá†‰∏™Âå∫ÂüüÁöÑÂàÜÈÖçÂíåÂõûÊî∂ÈÉΩÂÖ∑Â§áÁ°ÆÂÆöÊÄßÔºå‰∏çÈúÄË¶ÅËøáÂ§öËÄÉËôëÂõûÊî∂ÁöÑÈóÆÈ¢òÔºå‰ΩÜÊòØ Java Â†ÜÂíåÊñπÊ≥ïÂå∫ Â∞±‰∏ç‰∏ÄÊ†∑‰∫ÜÔºåËøôÈáåÊòØÂÖ¨ÂÖ±Âå∫ÂüüÔºå‰∏çÊòØÁ∫øÁ®ãÁßÅÊúâÁöÑÔºåÊâÄ‰ª•Âè™ÊúâÂú®ËøêË°åÊúüÈó¥ÊâçËÉΩÁ°ÆÂÆöÂÜÖÂ≠òÁöÑÂç†Áî®ÂàÜÈÖçÊÉÖÂÜµÔºåËøôÈÉ®ÂàÜÁöÑÂÜÖÂ≠òÁöÑÂàÜÈÖçÂíåÂõûÊî∂ÈÉΩÊòØÂä®ÊÄÅÁöÑÔºåÊâÄ‰ª• GC Â∞±ÊòØÊåáÁöÑËøô‰∏ÄÂùóÁöÑÂÜÖÂ≠ò„ÄÇ ÂæàÂ§ö‰∫∫ËÆ§‰∏∫ÊñπÊ≥ïÂå∫ÔºàÊàñËÄÖËØ¥ HotSpot ËôöÊãüÊú∫‰∏≠ÁöÑÊ∞∏‰πÖ‰ª£ÔºâÊòØÊ≤°ÊúâÂûÉÂúæÊî∂ÈõÜÊú∫Âà∂ÁöÑÔºåÁöÑÁ°ÆÂú® java ËôöÊãüÊú∫ËßÑÂàí‰∏≠Á°ÆÂÆûÊ≤°ÊúâË¶ÅÊ±ÇË¶ÅÂú®ÊñπÊ≥ïÂå∫ÂÆûÁé∞ÂûÉÂúæÊî∂ÈõÜÔºåÂõ†‰∏∫ÊÄß‰ª∑ÊØîÂæà‰ΩéÔºåÂú®Â†Ü‰∏≠ÔºåÂ∞§ÂÖ∂ÊòØÊñ∞Áîü‰ª£‰∏≠ÔºåÂ∏∏ËßÑÂ∫îÁî®‰∏ÄÊ¨°ÂûÉÂúæÊî∂ÈõÜÂèØ‰ª•ÂõûÊî∂ 70% - 95% ÁöÑÁ©∫Èó¥ÔºåËÄåÊñπÊ≥ïÂå∫ÁöÑÂûÉÂúæÊî∂ÈõÜÊïàÁéáËøú‰Ωé‰∫éÊ≠§„ÄÇ ‰ΩÜÊòØÔºåÂÖ∂ÂÆûËøòÊòØÊúâÂøÖË¶ÅËøõË°åÂûÉÂúæÊî∂ÈõÜÁöÑÔºåÂ∞§ÂÖ∂ÊòØÂú®Â§ßÈáè‰ΩøÁî®ÂèçÂ∞Ñ„ÄÅÂä®ÊÄÅ‰ª£ÁêÜ„ÄÅGGLibÁ≠â bytecode Ê°ÜÊû∂ÁöÑÂú∫ÊôØÊòØÈúÄË¶ÅÂÖ∑Â§áÁ±ªÂç∏ËΩΩÁöÑÂäüËÉΩÈò≤Ê≠¢ÊñπÊ≥ïÂå∫ OOM ÁöÑ„ÄÇÊ∞∏‰πÖ‰ª£ÁöÑÂûÉÂúæÊî∂ÈõÜ‰∏ªË¶ÅÂõûÊî∂‰∏§ÈÉ®ÂàÜÔºöÂ∫üÂºÉÂ∏∏ÈáèÂíåÊó†Áî®ÁöÑÁ±ªÔºåÂ∫üÂºÉÂ∏∏ÈáèÁöÑÊî∂ÈõÜÊØîËæÉÁÆÄÂçïÔºåÂ∞±ÊòØÊ≤°‰∫∫Áî®‰∫ÜÔºåÂ∞±‰ºöË¢´ËØ∑Âá∫Â∏∏ÈáèÊ±†Ôºå‰ΩÜÊòØÊó†Áî®ÁöÑÁ±ªËøô‰∏™Êù°‰ª∂Â∞±Âæà‰∏•Ëãõ‰∫ÜÔºåÂè™ÊúâÂêåÊó∂ÔºåÊ≥®ÊÑè‰ΩøÁî®Êó∂Êª°Ë∂≥‰∏ãÈù¢ 3 ‰∏™Êù°‰ª∂ÊâçËÉΩÁÆóÊòØ‚ÄúÊó†Áî®ÁöÑÁ±ª‚ÄùÔºö ËØ•Á±ªÊâÄÊúâÂÆû‰æãË¢´ÂõûÊî∂Ôºõ Âä†ËΩΩËØ•Á±ªÁöÑ ClassLoader Â∑≤ÁªèË¢´ÂõûÊî∂Ôºõ ËØ•Á±ªÂØπÂ∫îÁöÑ java.lang.Class ÂØπË±°Ê≤°ÊúâË¢´‰ΩøÁî®Ôºå‰∏îÊó†Ê≥ïÂú®‰ªª‰ΩïÂú∞ÊñπÈÄöËøáÂèçÂ∞ÑËÆøÈóÆËØ•Á±ªÁöÑÊñπÊ≥ï„ÄÇ„ÄåËøô‰∏™Â•ΩÂÉèÈùûÂ∏∏ÁöÑ‰∏•Ê†º‚Ä¶„Äç QÔºö‰ªÄ‰πàÊó∂ÂÄôÂõûÊî∂Ôºü Á¨¨‰∏ÄÊ≠•ËÇØÂÆöÊòØÁ°ÆÂÆöËøô‰∏™ÂØπË±°ÊòØÂê¶Ëøò‚ÄúÊ¥ªÁùÄ‚Äù„ÄÇÈÇ£‰πàÂ¶Ç‰ΩïÁ°ÆÂÆöÂë¢ÔºüÊúâÂì™‰∫õÊñπÊ≥ïÂë¢Ôºü Á¨¨‰∏ÄÁßçÊñπÊ≥ïËôΩÁÑ∂‰∏çÊòØ Java ‰∏≠‰ΩøÁî®ÁöÑÔºå‰ΩÜÊòØ‰πüÊúâ‰∏Ä‰∫õËëóÂêçÊ°à‰æã‰ΩøÁî®Ëøá„ÄÇÈÇ£Â∞±ÊòØËÆ°Êï∞ÁÆóÊ≥ïÔºöÁªôÂØπË±°Ê∑ªÂä†‰∏Ä‰∏™ËÆ°Êï∞Âô®ÔºåÂºïÁî®‰∫Ü‰∏ÄÊ¨°Â∞±Âä†‰∏ÄÔºåÂºïÁî®Â§±ÊïàÂ∞±Âáè‰∏ÄÔºåÂú®‰ªª‰ΩïÊó∂ÂàªËÆ°Êï∞Âô®ÈÉΩ‰∏∫0ÁöÑÂØπË±°Â∞±ÊòØ‰∏çÂèØËÉΩÂÜçË¢´‰ΩøÁî®ÁöÑÔºåÂ∞±ÂèØ‰ª•ÂõûÊî∂„ÄÇ‰ΩÜÊòØËøôÈáåÊºèÊéâ‰∫Ü‰∏ÄÁßçÊÉÖÂÜµÔºåÂ∞±ÊòØÁ±ª‰ºº‰∫éÊ≠ªÈîÅÁöÑÊÉÖÂÜµÔºå‰∏Ä‰∏™ÂºïÁî®‰∫íÁõ∏ÊåÅÊúâÂè¶Â§ñ‰∏Ä‰∏™ÂºïÁî®ÔºåËøôÊ†∑ËôΩÁÑ∂ËÆ°Êï∞Âô®ÁöÑÂÄºÈÉΩ‰∏∫ 1 Ôºå‰ΩÜÊòØ‰∫åËÄÖÂÖ∂ÂÆûÂ∑≤Áªè‰∏çÂèØËÉΩÂÜçË¢´ËÆøÈóÆ‰∫ÜÔºåÁêÜÂ∫îË¢´ÂõûÊî∂Ôºå‰ΩÜËøô‰∏™ÁÆóÊ≥ïÂÅö‰∏çÂà∞Ôºõ Á¨¨‰∫åÁßçÊñπÊ≥ïÂ∞±ÊòØ Java Âíå C# Áî®ÁöÑÊñπÊ≥ï‰∫ÜÔºå‰∏∫Ê†πÊêúÁ¥¢ÁÆóÊ≥ïÔºåÁÆóÊ≥ïÁöÑÂü∫Êú¨ÊÄùË∑ØÂ∞±ÊòØÔºöÂ¶ÇÊûú GC Roots ÂØπË±°Âà∞Ëøô‰∏™ÂØπË±°‰∏çÂèØËææÔºåÂàôËøô‰∏™ÂØπË±°‰∏çÂèØÁî®„ÄÇ Â§ßÂÆ∂ÂèØËÉΩ‰ºöÈóÆ‰∫ÜÔºå‰ªÄ‰πàÊòØ GC Roots ÂØπË±°ÔºåÂèàÂ¶Ç‰ΩïÂÆö‰πâ‰∏çÂèØËææÔºü ÂèØ‰ª•ÂÅö GC Roots ÁöÑÔºåÂÖ∂ÂÆûÂ∞±ÊòØÈÉ®ÂàÜÂØπË±°Ôºö Ê†à‰∏≠Êú¨Âú∞ÂèòÈáèË°® or native ÊñπÊ≥ïÊ†à‰∏≠ÂºïÁî®ÁöÑÂØπË±°Ôºõ ÊñπÊ≥ïÂå∫(non-heap)‰∏≠ÁöÑÁ±ªÈùôÊÄÅÂ±ûÊÄßÂºïÁî®ÁöÑÂèòÈáèÔºõ ÊñπÊ≥ïÂå∫(non-heap)‰∏≠ÁöÑÂ∏∏ÈáèÂºïÁî®ÁöÑÂØπË±°Ôºõ ÈÇ£‰πàÂèàÂ¶Ç‰ΩïÂÆö‰πâ‰∏çÂèØËææÂë¢ÔºüÂç≥‰ª• GC Roots ÁöÑÂØπË±°‰∏∫Ëµ∑ÂßãÁÇπÔºå‰ªéËøô‰∫õËäÇÁÇπÂêë‰∏ãÊêúÁ¥¢ÔºåÊâÄËµ∞ËøáÁöÑË∑ØÂæÑÁß∞‰∏∫ÂºïÁî®ÈìæÔºåÂΩìGC Roots ÂíåËøô‰∏™ÂØπË±°‰∏çÂ≠òÂú®ÂºïÁî®ÈìæÔºåÈÇ£Â∞±ÊòØ‰∏çÂèØËææ„ÄÇ Áé∞Âú®Êàë‰ª¨Â∑≤ÁªèÊ∏ÖÊ•ö‰∫ÜÂ¶Ç‰ΩïÂà§Êñ≠‰∏Ä‰∏™ÂØπË±°ÊòØ ‚ÄúÊ¥ªÁùÄ‚Äù ËøòÊòØ ‚ÄúÊ≠ª‰∫°‚Äù ‰∫ÜÔºåÈÇ£ÊòØ‰∏çÊòØÂØπË±° ‚ÄúÊ¥ªÁùÄ‚Äù ÂÆÉÂ∞±‰∏ç‰ºöË¢´ÂõûÊî∂Âë¢ÔºåÂØπË±° ‚ÄúÊ≠ª‰∫°‚Äù Êàë‰ª¨Â∞±Ë¶ÅÂ∞ÜÂÖ∂ÂõûÊî∂Âë¢ÔºåÁ≠îÊ°àÊòØÂê¶ÂÆöÁöÑÔºàÂ¶ÇÊûúÊòØËÇØÂÆöÁöÑÊàëËøòËØ¥‰∏™ÊØõÂïäÂìàÂìàÂìàÂìàÔºâ„ÄÇÊ≥®ÊÑèÔºåËøôÈáåÁöÑ‰∏§Âè•ËØùÈÉΩÊòØ‰∏çÂØπÁöÑ„ÄÇ È¶ñÂÖàÊòØ ‚ÄúÊ¥ªÁùÄ‚Äù ÁöÑÂØπË±°‰∏çÊòØ‰∏ÄÂÆö‰∏çË¢´ÂõûÊî∂ÁöÑÔºåË¶Å‚ÄúÊ¥ªÁùÄ‚ÄùÔºå‰πüË¶ÅÁúãÂÆÉÊÄé‰πàÊ¥ªÔºåÊÄé‰πà‰∏™Ê¥ªÊ≥ïÔºåÂ∞±ÊòØÂØπÂ∫îÁùÄËøô‰∏™ÈìæË∑ØÁöÑÂº∫Â∫¶ÔºåÂú® jdk1.2 ‰ª•ÂêéÔºåÂºïÁî®ÂàÜ‰∏∫‰∫ÜÂõõÁ±ªÔºåËøô‰∏™ÊàëÂú® Â§öÁ∫øÁ®ãÔºàÂõõÔºâ‚Äî ThreadLocal ‰∏ÄÊñá‰∏≠ÁöÑÂÜÖÂ≠òÊ≥ÑÊºè‰πüÊúâÊèêÂèä„ÄÇ‰ª•‰∏ãÁöÑÈ°∫Â∫èÔºåÂ∞±ÊòØÂºïÁî®‰ªéÂº∫Âà∞Âº±ÁöÑÈ°∫Â∫è„ÄÇ Âº∫ÂºïÁî®„ÄÇÂê¨Ëøô‰∏™ÂêçÂ≠óÂ∞±Áü•ÈÅìËøôÊòØ‰∏äÁ≠â‰∫∫ÔºåËøôÂ∞±ÊòØÊàë‰ª¨Âú®Á®ãÂ∫è‰ª£Á†Å‰∏≠ÊôÆÈÅçÂ≠òÂú®ÁöÑÔºåÁ±ª‰ºº‰∫é ‚ÄúObject obj = new Object()‚Äù ÔºåÂè™Ë¶ÅÂØπË±°ÁöÑÂº∫ÂºïÁî®ËøòÂú®Ôºå‰ªñÂ∞±‰∏ÄÂÆöËÉΩÂ•ΩÂ•ΩÁöÑÊ¥ªÁùÄÔºå‰∏ç‰ºöË¢´ GC ÂõûÊî∂Ôºõ„ÄåReferenceÁ±ª„Äç ËΩØÂºïÁî®„ÄÇÂ∞±ÊòØ‰∏Ä‰∫õÊúâÁî®‰ΩÜÊòØÂèà‰∏çÊòØÂøÖË¶ÅÁöÑÔºåÁ±ª‰ºº‰∫éÂ∑•ÂÖ∑‰∫∫ÔºåË¢´ËΩØÂºïÁî®ÂÖ≥ËÅîÁöÑÂØπË±°ÔºåÂú®Á≥ªÁªüÂç≥Â∞ÜË¶ÅÂèëÁîüOOMÊó∂Ôºå‰ºöÂ∞ÜËøô‰∫õÂØπË±°ËøõË°åÂõûÊî∂ÔºåÂõûÊî∂‰πãÂêéÂèëÁé∞ËøòÊòØÂÜÖÂ≠ò‰∏çÂ§üÔºåÊâç‰ºöÊäõÂá∫ OOM ÂºÇÂ∏∏„ÄÇ„ÄåsoftReferenceÁ±ª„Äç Âº±ÂºïÁî®„ÄÇËøô‰∏™Êõ¥Ê≤°Áî®Ôºå‰ªñÁöÑÁîüÂ≠òÂë®ÊúüÂæàÁü≠ÔºåÂè™ËÉΩÊ¥ªÂú®‰∏ã‰∏ÄÊ¨° GC Â∑•‰Ωú‰πãÂâçÔºåÂΩì GC ÂºÄÂßãÂπ≤Ê¥ªÊó∂ÔºåË¢´Âº±ÂºïÁî®ÂÖ≥ËÅîÁöÑÂØπË±°Â∞±ÂæóÊªöËõã‰∫Ü„ÄÇ„ÄåWeakReference„ÄçËøôÈáåÂÜçÂî†Âè®‰∏Ä‰∏ãÔºåThreadLocalMap ‰∏≠ÁöÑ key ÂØπ ThreadLocal ÁöÑÂºïÁî®Â∞±ÊòØÂº±ÂºïÁî®ÔºåÁõÆÁöÑÂ∞±ÊòØ‰∏∫Èò≤Ê≠¢ÂÜÖÂ≠òÊ≥ÑÊºèÊ∑ªÂä†‰∏Ä‰∏™‰øùÈöúÔºåÂΩì ThreadLocal Â§±Âéª‰∫ÜÂº∫ÂºïÁî®ÂêéÔºå‰ºöË¢´ GC Â§ÑÁêÜÔºåËÄåÊ≠§Êó∂ key ‰∏∫ nullÔºåÂèØ‰ª•Ëß¶ÂèëThreadLocalMap‰∏≠Ê∏ÖÈô§ËÑè Entry ÁöÑÊñπÊ≥ïÈò≤Ê≠¢ÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇ ËôöÂºïÁî®„ÄÇËøô‰∏™ÂèàË¢´Áß∞‰∏∫ÂπΩÁÅµÂºïÁî®ÊàñËÄÖÂπªÂΩ±ÂºïÁî®(Â¶àÁöÑÊàëÊúâÁÇπÊÄïÈ¨º..)Ôºå‰∏Ä‰∏™ÂØπË±°Ë¢´Ëøô‰∏™ËôöÂºïÁî®ÂÖ≥ËÅîÔºåÁ≠â‰∫éÊ≤°ÂÖ≥ËÅîÔºåÂÆåÂÖ®‰∏ç‰ºöÂØπÂÖ∂ÁîüÂ≠òÊó∂Èó¥ÊûÑÊàêÂΩ±ÂìçÔºå‰πüÊó†Ê≥ïÈÄöËøáËôöÂºïÁî®Êù•ÂèñÂæó‰∏Ä‰∏™ÂØπË±°ÂÆû‰æãÔºåÂîØ‰∏ÄÁöÑ‰ΩúÁî®Â∞±ÊòØÂèØ‰ª•Âú®Ëøô‰∏™ÂØπË±°Ë¢´ GC ÂõûÊî∂Êó∂Êî∂Âà∞‰∏Ä‰∏™Á≥ªÁªüÈÄöÁü•ÔºåÂ∞±ÊòØÈòéÁéãÁà∑Êù•Êî∂Â∞∏ÂâçÊ¥æÊù•ÂëäËØâ‰Ω†Ë¶ÅÊ≠ªÁöÑÈÇ£Âá†‰∏™Â∞èÂÖµÁöÑ‰ΩúÁî®(ÊääÊàëËá™Â∑±ËØ¥ÊÄï‰∫Ü‚Ä¶)„ÄÇ„ÄåPhantomReference„Äç ÂÜçÊù•Ëß£ÂÜ≥Á¨¨‰∫å‰∏™ÈóÆÈ¢òÔºåÈÇ£Â∞±ÊòØ‚ÄúÊ≠ª‰∫°‚Äù ÁöÑÂØπË±°Ôºå‰πü‰∏ç‰∏ÄÂÆöÂ∞±Ë¶ÅË¢´ÂõûÊî∂Ôºå‰ªñÂè™ÊòØÂ§Ñ‰∫éÁºìÂàëÈò∂ÊÆµÔºåËøòÂèØ‰ª•ÈÄöËøá‰∏äËØâÊù•Ê¥ªÁùÄÂìàÂìà„ÄÇ(Ëøô‰∏ÄÁ´†ÊòØÁúüÁöÑÊúâÊÑèÊÄùÂïä) Ë¶ÅÁúüÊ≠£ÂÆ£Âëä‰∏Ä‰∏™ÂØπË±°Ê≠ª‰∫°ÔºåËá≥Â∞ëË¶ÅÁªèÂéÜ‰∏§Ê¨°Ê†áËÆ∞ËøáÁ®ãÔºöÁ¨¨‰∏ÄÊ¨°Ê†áËÆ∞Â∞±ÊòØÊ†áËÆ∞ÂÆÉ‰∏çÂèØËææÔºåÂç≥‚ÄúÊ≠ª‰∫°‚ÄùÁöÑÁä∂ÊÄÅÔºåÂêåÊó∂‰ªñÊúâ‰∏ÄÊ¨°‚Äú‰∏äËØâ‚ÄùÁöÑÊú∫‰ºöÔºåÂæàÊòéÊòæ‰∏äËØâÊàêÂäüÂ∞±‰∏ç‰ºöÊ≠ªÔºå‰∏äËØâÂ§±Ë¥•ÈÇ£ËÇØÂÆöÊ≠ªÂÆö‰∫Ü„ÄÇÈÇ£ÔºåÂ¶Ç‰ΩïÊâçËÉΩÊã•ÊúâËøôÊ¨°ÈöæÂæóÁöÑÊú∫‰ºöÂë¢ÔºüÈÇ£Â∞±ÊòØËøô‰∏™Ë¢´Ê†áËÆ∞‰∏∫‚ÄúÊ≠ª‰∫°‚ÄùÁöÑÂØπË±°ÊúâË¶ÜÁõñ finalize() ÊñπÊ≥ïÔºåÂπ∂‰∏îÁ¨¨‰∏ÄÊ¨°Ë∞ÉÁî®ÔºåÊ≥®ÊÑèÔºå‰ªñÂè™Êúâ‰∏ÄÊ¨°‚Äú‰∏äËØâ‚ÄùÁöÑÊú∫‰ºö„ÄÇÂΩìÊª°Ë∂≥‰∏äËØâÊú∫‰ºöÁöÑÊó∂ÂÄôÔºåÂç≥Â§çÂÜô finalize() Âπ∂‰∏îÊòØÁ¨¨‰∏ÄÊ¨°Ë∞ÉÁî®ÔºåÂÆÉ‰ºöË¢´ÊîæÁΩÆÂà∞ F-Queue‰∏≠ÔºåÂπ∂Âú®Á®çÂêéÁî±‰∏ÄÊù°Áî±ËôöÊãüÊú∫Ëá™Âä®ÂàõÂª∫ÁöÑ„ÄÅ‰Ωé‰ºòÂÖàÁ∫ßÁöÑ Finalizer ÂéªËß¶ÂèëËøô‰∏™ ‰ªñÂ§çÂÜôÁöÑ finalize()„ÄåÊ≥®ÊÑèÔºåËøôÈáåÁöÑ FinalizerÁî±‰∫é‰ºòÂÖàÁ∫ßÊØîËæÉ‰ΩéÔºåÊâÄ‰ª•Êàë‰ª¨ÈúÄË¶ÅÂú®Á∫øÁ®ã‰∏≠Á≠âÂæÖ‰ªñ‰∏ÄÊÆµÊó∂Èó¥Ôºå‰ª•Á°Æ‰øùÂÆÉÂ∑≤ÁªèÊâßË°å‰∫Ü„ÄÇÂêåÊó∂ÔºåÊ≥®ÊÑèÔºåËøô‰∏™ Finalizer Âæà‰∏•ËãõÔºåÂÆÉ‰∏ç‰ºöÂÖÅËÆ∏ finalize() ‰∏ÄÁõ¥ÊâßË°åÔºåÊòØÊúâÊó∂Èó¥ÈôêÂà∂ÁöÑÔºåÂ∞±Ë∑ü‰∏äËØâ‰∏ÄÊ†∑ÔºåÊòØÊúâÊúüÈôêÁöÑÔºåËøá‰∫ÜËøô‰∏™ÊúüÈôêÂ∞±Ê≤°Áî®‰∫Ü„ÄÇ„ÄçÔºåÈÇ£ËΩ¨Êú∫ËÇØÂÆöÂ∞±Âú®Ëøô‰∏™ finalize() ‰∏≠‰∫ÜÔºåÂè™Ë¶Å‚ÄúÊ≠ª‰∫°‚ÄùÁöÑÂØπË±°Âú®Ëøô‰∏™Êó∂ÂÄôÂ∞ÜËá™Â∑±‰∏éÂºïÁî®Èìæ‰∏äÁöÑ‰ªª‰Ωï‰∏Ä‰∏™ÂØπË±°Âª∫Á´ãÂÖ≥ËÅîÔºåÊØîÂ¶ÇËá™Â∑±ËµãÂÄºÁªôÊüê‰∏™Á±ªÊàêÂëòÂèòÈáèÔºåËøôÂ∞±ÊÑèÂë≥ÁùÄ‰∏äËØâÊàêÂäüÂπ∂‰∏îÂæóÂà∞Ëß£ÊîæÂï¶ÔºÅÂΩìÁÑ∂Â¶ÇÊûúÊ≤°Êäì‰ΩèËøôÊ¨°Êú∫‰ºöÔºåÈÇ£ËÇØÂÆöÂ∞±Ê≠ªÂÆö‰∫Ü„ÄÇ Ê≥®ÊÑèËøôÈáå finalize() Âè™Êúâ‰∏ÄÊ¨°Êú∫‰ºöÂì¶„ÄÇÂú®Âë®ËÄÅÂ∏àÁöÑ‰π¶‰∏≠Ôºå‰πüÂª∫ËÆÆÊàë‰ª¨ÈÅøÂÖç‰ΩøÁî®ÂÆÉÔºåËôΩÁÑ∂Êå∫Â•ΩÁé©ÁöÑ‚Ä¶‰ΩÜÊòØ finalize() Ê≤°Âï•Áî®ÔºåËÄå‰∏îËøêË°å‰ª£‰ª∑È´òÊòÇÔºå‰∏çÁ°ÆÂÆöÊÄßÂ§ßÔºåÂÆÉËÉΩÂÅöÁöÑÂ∑•‰Ωú try-finally ÂÆåÂÖ®ÂèØ‰ª•ÂÅöÁöÑÊõ¥Â•Ω„ÄÇ QÔºöÂ¶Ç‰ΩïÂõûÊî∂Ôºü Ëøô‰∏™ÈóÆÈ¢òÊØîËæÉÂÆΩÊ≥õÔºåÊàë‰ª¨ÂÅö‰∏Ä‰ª∂‰∫ãÔºåÈ¶ñÂÖàÈúÄË¶ÅÁêÜËÆ∫ÁöÑÊåáÂØºÔºåÁÑ∂ÂêéÂÜçÂéªÂÆûË∑µ„ÄÇÂú®Â¶Ç‰ΩïÂõûÊî∂Ëøô‰ª∂ÈóÆÈ¢ò‰∏äÔºåÊàë‰ª¨ÂÖàË¶ÅÊèêÂá∫‰∏Ä‰∫õÂûÉÂúæÊî∂ÈõÜÔºàÂõûÊî∂ÔºâÁöÑÁÆóÊ≥ïÔºåÁÑ∂ÂêéÂÜçÂà©Áî®Ëøô‰∏™ÊñπÊ≥ïËÆ∫ÂéªÂÖ∑‰ΩìÂÆûÁé∞ÂÜÖÂ≠òÁöÑÂõûÊî∂‚Äî‚Äî-ÂûÉÂúæÊî∂ÈõÜÂô®„ÄÇ ÂûÉÂúæÊî∂ÈõÜÁÆóÊ≥ï„ÄÇÂÖ∂ÂÆûÂ∞±ÊòØ‰ª•‰∏ÄÁßçÊñπÊ≥ï‰∏∫Âü∫Á°ÄÔºåÁÑ∂Âêé‰∏§ÁßçÊñπÊ≥ïÂú®Êüê‰∏™È¢ÜÂüüÔºàÊñ∞Áîü‰ª£ or ËÄÅÂπ¥‰ª£ÔºâÊõ¥‰∏ì‰∏öÔºåÊúÄÂêé‰∏ÄÁßçÊñπÊ≥ïÈõÜÂ§ßÊàê„ÄÇ ÊúÄÂü∫Á°ÄÁöÑÊñπÊ≥ïÔºåÊ†áËÆ∞-Ê∏ÖÈô§ÁÆóÊ≥ï„ÄÇÂàÜ‰∏∫‰∏§Ê≠•ÔºåÂç≥‚ÄúÊ†áËÆ∞‚Äù Âíå ‚ÄúÊ∏ÖÈô§‚ÄùÔºöÈ¶ñÂÖàÊ†áËÆ∞Âá∫Ë¶ÅÂõûÊî∂ÁöÑÂØπË±°ÔºåÁÑ∂ÂêéÂÜçÊ†áËÆ∞ÂÆåÊàêÂêéÁªü‰∏ÄÂõûÊî∂Êéâ„ÄÇÁº∫ÁÇπÔºö‰∏Ä‰∏™ÊòØÊïàÁéáÈóÆÈ¢òÔºåÊ†áËÆ∞ÂíåÊ∏ÖÈô§ÈÉΩÊòØÈúÄË¶ÅËæÉÂ§öÊó∂Èó¥ÔºåÊïàÁéá‰ΩéÔºå‰∏Ä‰∏™ÊòØÁ©∫Èó¥ÈóÆÈ¢òÔºåÊ†áËÆ∞Ê∏ÖÈô§‰πãÂêéÂÆπÊòì‰∫ßÁîüÂ§ßÈáè‰∏çËøûÁª≠ÁöÑÂÜÖÂ≠òÁ¢éÁâáÔºåÈùûÂ∏∏ÂÆπÊòìÈÄ†Êàê‰∏ã‰∏ÄÊ¨°ÊÉ≥ÂàÜÈÖçÂØπË±°Êó∂Êâæ‰∏çÂà∞ËøûÁª≠ÂÜÖÂ≠òËÄå‰∏çÂæóËß¶ÂèëÂÜç‰∏ÄÊ¨°ÁöÑ GC Ôºõ Â§çÂà∂ÁÆóÊ≥ï„ÄÇ‰∏ªË¶ÅÊòØÁî®Âú®Êñ∞Áîü‰ª£‰∏≠ÔºåÂõ†‰∏∫Êñ∞Áîü‰ª£ 98% ÁöÑÂØπË±°ÈÉΩÊòØÊ≠ªÂæóÂø´ÁöÑ‚Ä¶ÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•Â∞ÜÂÜÖÂ≠òÂàÜ‰∏∫‰∏ÄÂùóËæÉÂ§ßÁöÑ Eden Á©∫Èó¥Âíå‰∏§ÂùóËæÉÂ∞èÁöÑ Survivor Á©∫Èó¥„Äå‰∏∫‰ªÄ‰πàË¶ÅËÆæÁ´ã Survivor Âå∫Ôºå‰∏∫‰ΩïÊòØ‰∏§ÂùóÔºå‰∏∫‰Ωï‰∏çÊòØ‰∏ÄÂùó„ÄÅ‰∏âÂùó„ÄÅÂõõÂùóÔºüËÆæÁ´ã Survivor Âå∫‰∏ªË¶ÅÊòØËÄÉËôëÂà∞Èò≤Ê≠¢È¢ëÁπÅ full gcÔºåËÄåËÆæÁ´ã‰∏§ÂùóÔºåÂàôÊòØ‰∏∫‰∫ÜËß£ÂÜ≥minor gcÂÜÖÂ≠òÁ¢éÁâáÁöÑÈóÆÈ¢òÔºåËÆæÁ´ãÂ§™Â§öÂèçËÄå‰ºöÈÄ†Êàê SurvivorÁ©∫Èó¥Â§™Â∞èÔºåÂØºËá¥full gc È¢ëÁπÅÔºåÊâÄ‰ª•‰∏§Âùó Survivor ÊòØÊúÄÂ•ΩÁöÑ„ÄÇ„ÄçÔºåÁÑ∂ÂêéÊØèÊ¨°‰ΩøÁî® Eden Âíå ‰∏ÄÂùó SurvivorÔºåÂè¶Â§ñ‰∏ÄÂùó Survivor Â∞±ÂèØ‰ª•Áî®Êù•Â≠òÂûÉÂúæÊî∂ÈõÜÂÆå‰πãÂêéËøòÂ≠òÊ¥ªÁùÄÁöÑÂØπË±°ÔºåËøôÊ†∑Ê∏ÖÁêÜ‰πüÊñπ‰æøÔºåÊïàÁéáÂæóÂà∞Ëß£ÂÜ≥ÔºåÂêåÊó∂‰πü‰∏ç‰ºöÊúâÁ©∫Èó¥‰∏äÁöÑÈóÆÈ¢òÔºåÂõ†‰∏∫ÂèØ‰ª•Âú®Â§çÂà∂ÁöÑÊó∂ÂÄôÁõ¥Êé•ÁßªÂä®Â†ÜÈ°∂ÊåáÈíàÊåâÈ°∫Â∫èÂàÜÈÖçÂ∞±Ë°å‰∫Ü„ÄÇ‰ΩÜÊòØÂêßÔºåËøô‰πüÊúâ‰∏™ÂæàÊòéÊòæÁöÑÁº∫ÁÇπÔºåÂ∞±ÊòØ Survivor ËøôÂùóÂÜÖÂ≠òË¢´Êµ™Ë¥π‰∫ÜÔºåÂπ∂‰∏îÊàë‰ª¨Âπ∂‰∏çËÉΩ‰øùËØÅÊØèÊ¨°ÂõûÊî∂‰πãÂêéÁöÑÂØπË±°Â§ßÂ∞è‰∏çË∂ÖËøá SurvivorÔºåÂΩì Survivor Á©∫Èó¥‰∏çÂ§üÊó∂ÔºåÊàë‰ª¨ËøòÈúÄË¶ÅÁî®Âà∞‰∏Ä‰∏™Á≠ñÁï•ÔºöÂàÜÈÖçÊãÖ‰øù„ÄÇÂç≥ÂΩì Survivor Á©∫Èó¥‰∏çÂ§üÊó∂ÔºåËøô‰∫õÂØπË±°‰ºöÁõ¥Êé•ÈÄöËøáÂàÜÈÖçÊãÖ‰øùÁ≠ñÁï•ËøõÂÖ•Âà∞ËÄÅÂπ¥‰ª£Ôºõ Ê†áËÆ∞-Êï¥ÁêÜÁÆóÊ≥ï„ÄÇÂõ†‰∏∫ËÄÅÂπ¥‰ª£Â≠òÊ¥ªÁéáÂæàÈ´òÔºåËÇØÂÆöÂ∞±‰∏çËÉΩÁî®Â§çÂà∂ÁÆóÊ≥ï‰∫ÜÔºåËøôÈáåÁöÑÊ†áËÆ∞-Êï¥ÁêÜÁÆóÊ≥ïÔºåÂ∞±ÊòØÂØπÊ†áËÆ∞-Ê∏ÖÈô§ÁöÑÂçáÁ∫ßÔºåÂú®Ê∏ÖÁêÜ‰πãÂâçÔºåÁî±‰∫é‰∏çËÉΩÂÉèÂ§çÂà∂ÁÆóÊ≥ï‰∏ÄÊ†∑Áõ¥Êé•Ê∏ÖÁêÜÔºåÂè™ËÉΩÊòØËÆ©ÊâÄÊúâÂ≠òÊ¥ªÁöÑÂØπË±°ÈÉΩÂêë‰∏ÄÁ´ØÁßªÂä®ÔºåÁÑ∂ÂêéÂÜçÊ∏ÖÁêÜÊéâËæπÁïå‰ª•Â§ñÁöÑÂÜÖÂ≠òÔºõ „ÄåG1 Â∞±Áî®‰∫ÜËøôÁßçÁÆóÊ≥ï„ÄÇ„Äç ÂàÜ‰ª£Êî∂ÈõÜÁÆóÊ≥ï„ÄÇÂè™ÊòØÊ†πÊçÆÂØπË±°ÁöÑÂ≠òÊ¥ªÂë®ÊúüÁöÑ‰∏çÂêåÂ∞ÜÂÜÖÂ≠òÂàíÂàÜ‰∏∫Êñ∞Áîü‰ª£ÂíåËÄÅÂπ¥‰ª£ÔºåÁÑ∂ÂêéÊñ∞Áîü‰ª£‰ΩøÁî®Â§çÂà∂ÁÆóÊ≥ïÔºåËÄÅÂπ¥‰ª£‰ΩøÁî®Ê†áËÆ∞-Ê∏ÖÁêÜ or Ê†áËÆ∞-Êï¥ÁêÜ„ÄÇ ÂûÉÂúæÊî∂ÈõÜÁÆóÊ≥ïÁöÑÂÆûÁé∞‚Äî‚ÄîÂûÉÂúæÊî∂ÈõÜÂô® Êó¢ÁÑ∂ÂûÉÂúæÊî∂ÈõÜÁÆóÊ≥ïÔºåÊòØÊåâÁÖßÊñ∞Áîü‰ª£ÂíåËÄÅÂπ¥‰ª£ÂàÜÂà´ÂéªËÆæËÆ°ÁöÑÔºåÈÇ£Ëá™ÁÑ∂ÂûÉÂúæÊî∂ÈõÜÂô®ËÇØÂÆö‰πüÊòØÊåâÁÖßÊñ∞Áîü‰ª£ÂíåËÄÅÂπ¥‰ª£ÂéªÂÆûÁé∞„ÄÇ Êñ∞Áîü‰ª£ÁöÑÊî∂ÈõÜÂô®ÂåÖÊã¨ Serial ParNew Parallel Scavenge 2.ËÄÅÂπ¥‰ª£ÁöÑÊî∂ÈõÜÂô®ÂåÖÊã¨ Serial Old Parallel Old CMS 3.ÂõûÊî∂Êï¥‰∏™JavaÂ†Ü(Êñ∞Áîü‰ª£ÂíåËÄÅÂπ¥‰ª£) G1Êî∂ÈõÜÂô® ÂÖ∑‰ΩìÁöÑÊê≠ÈÖçÂ¶Ç‰∏äÂõæÊâÄÁ§∫„ÄÇ‰∏ãÈù¢ÂÖ∑‰ΩìËÆ≤‰∏Ä‰∏ãÁî®ÁöÑÂú∫ÊôØÂíå‰ºòÁº∫ÁÇπ„ÄÇ Êñ∞Áîü‰ª£Êî∂ÈõÜÂô®Ôºö Serial‰∏≤Ë°åÊî∂ÈõÜÂô®-Â§çÂà∂ÁÆóÊ≥ï SerialÊî∂ÈõÜÂô®ÊòØÊñ∞Áîü‰ª£ÂçïÁ∫øÁ®ãÊî∂ÈõÜÂô®Ôºå‰ºòÁÇπÊòØÁÆÄÂçïÈ´òÊïàÔºåÊòØÊúÄÂü∫Êú¨„ÄÅÂèëÂ±ïÂéÜÂè≤ÊúÄÊÇ†‰πÖÁöÑÊî∂ÈõÜÂô®„ÄÇÂÆÉÂú®ËøõË°åÂûÉÂúæÊî∂ÈõÜÊó∂ÔºåÂøÖÈ°ªÊöÇÂÅúÂÖ∂‰ªñÊâÄÊúâÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÔºåÁõ¥Âà∞ÂÆÉÊî∂ÈõÜÂÆåÊàê„ÄÇ‰ΩÜ‰æùÁÑ∂ÊòØËôöÊãüÊú∫ËøêË°åÂú®ClientÊ®°Âºè‰∏ãÈªòËÆ§Êñ∞Áîü‰ª£Êî∂ÈõÜÂô®ÔºåÂØπ‰∫éËøêË°åÂú®ClientÊ®°Âºè‰∏ãÁöÑËôöÊãüÊú∫Êù•ËØ¥ÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÈÄâÊã©„ÄÇ ParNewÊî∂ÈõÜÂô®-Â§çÂà∂ÁÆóÊ≥ï ‰πüÊòØÊñ∞Áîü‰ª£Âπ∂Ë°åÊî∂ÈõÜÂô®ÔºåÂÖ∂ÂÆûÂ∞±ÊòØSerialÊî∂ÈõÜÂô®ÁöÑÂ§öÁ∫øÁ®ãÁâàÊú¨„ÄÇ‰∏ª‰πâÂè™ËÉΩÂÅöÂà∞Âπ∂Ë°åÔºå‰∏çËÉΩÂπ∂Âèë„ÄÇÈô§‰∫Ü‰ΩøÁî®Â§öÁ∫øÁ®ãËøõË°åÂûÉÂúæÊî∂ÈõÜ‰πãÂ§ñÔºåÂÖ∂‰ΩôË°å‰∏∫ÂåÖÊã¨SerialÊî∂ÈõÜÂô®ÂèØÁî®ÁöÑÊâÄÊúâÊéßÂà∂ÂèÇÊï∞„ÄÅÊî∂ÈõÜÁÆóÊ≥ï„ÄÅStop The World„ÄÅÂØπË±°ÂàÜÈÖçËßÑÂàô„ÄÅÂõûÊî∂Á≠ñÁï•Á≠âÈÉΩ‰∏éSerial Êî∂ÈõÜÂô®ÂÆåÂÖ®‰∏ÄÊ†∑„ÄÇ Âπ∂Ë°åÔºöÊåáÂ§öÊù°ÂûÉÂúæÊî∂ÈõÜÁ∫øÁ®ãÂπ∂Ë°åÂ∑•‰ΩúÔºå‰ΩÜÊ≠§Êó∂Áî®Êà∑Á∫øÁ®ã‰ªçÁÑ∂Â§Ñ‰∫éÁ≠âÂæÖÁä∂ÊÄÅÔºõ Âπ∂ÂèëÔºöÁî®Êà∑Á∫øÁ®ãÂíåÂ§öÂûÉÂúæÊî∂ÈõÜÁ∫øÁ®ãÂêåÊó∂ÊâßË°åÔºà‰ΩÜ‰∏ç‰∏ÄÂÆöÊòØÂπ∂Ë°åÁöÑÔºåÂèØËÉΩÊòØ‰∫§ÊõøÊâßË°åÔºâ Parallel ScavengeÔºàÂπ∂Ë°åÂõûÊî∂ÔºâÊî∂ÈõÜÂô®-Â§çÂà∂ÁÆóÊ≥ïÊñ∞Áîü‰ª£Âπ∂Ë°åÊî∂ÈõÜÂô®ÔºåËøΩÊ±ÇÈ´òÂêûÂêêÈáèÔºåÈ´òÊïàÂà©Áî® CPU„ÄÇËØ•Êî∂ÈõÜÂô®ÁöÑÁõÆÊ†áÊòØËææÂà∞‰∏Ä‰∏™ÂèØÊéßÂà∂ÁöÑÂêûÂêêÈáèÔºàThroughputÔºâ„ÄÇÊâÄË∞ìÂêûÂêêÈáèÂ∞±ÊòØCPUÁî®‰∫éËøêË°åÁî®Êà∑‰ª£Á†ÅÁöÑÊó∂Èó¥‰∏éCPUÊÄªÊ∂àËÄóÊó∂Èó¥ÁöÑÊØîÂÄºÔºåÂç≥ ÂêûÂêêÈáè=ËøêË°åÁî®Êà∑‰ª£Á†ÅÊó∂Èó¥/ÔºàËøêË°åÁî®Êà∑‰ª£Á†ÅÊó∂Èó¥+ÂûÉÂúæÊî∂ÈõÜÊó∂Èó¥ÔºâÔºåÊâÄ‰ª•ËØ•Êî∂ÈõÜÂô®‰πüË¢´Â∏∏Áß∞‰∏∫ ‚ÄúÂêûÂêêÈáè‰ºòÂÖà‚ÄùÊî∂ÈõÜÂô®„ÄÇ ÂÆÉÂíå ParNew ÁöÑ‰∏ªË¶ÅÂå∫Âà´Êúâ‰∏§‰∏™Ôºö ÂÖ≥Ê≥®ÁÇπ‰∏ç‰∏ÄÊ†∑Ôºå‰∏Ä‰∏™ÊòØ‰∏∫‰∫ÜÂÅúÈ°øÊó∂Èó¥Êõ¥Áü≠ÔºåËøôÈÄÇÂêàÁî®Êà∑‰∫§‰∫íÔºå‰∏Ä‰∏™ÂàôÊòØ‰∏∫‰∫ÜÊúÄÈ´òÁöÑÂà©Áî® CPU Êó∂Èó¥ÔºåÈÄÇÂêàÂêéÂè∞ËøêÁÆóÔºõ Parallel Scanvenge Êúâ GC Ëá™ÈÄÇÂ∫îÁöÑË∞ÉËäÇÁ≠ñÁï•ÔºåÊó†ÈúÄËá™Â∑±ËÆæÁΩÆÊñ∞Áîü‰ª£Â§ßÂ∞è„ÄÅEden Âíå SurvivorÁöÑÊØî‰æãÁ≠âÁ≠âÔºåÂè™ÈúÄË¶ÅÊääÂü∫Êú¨ÁöÑÂÜÖÂ≠òÊï∞ÊçÆÔºàÂ¶ÇÂ†ÜÂ§ßÂ∞è„ÄÅÂêûÂêêÈáèÔºâËÆæÁΩÆÂ•ΩÂç≥ÂèØ„ÄÇ Â•ΩÂÉèÈÉΩÊòØ‰ºòÁÇπÔºå‰ΩÜÊòØÂÖ∂Êúâ‰∏Ä‰∏™Ëá¥ÂëΩÁöÑÁº∫Èô∑ÔºåÂ∞±ÊòØÂÆÉ‰∏çËÉΩË∑ü CMS Êê≠ÈÖçÔºåÊâÄ‰ª•CMS ËøòÊòØ‰∏ÄËà¨Âíå ParNew ËÅîÂêà‰ΩøÁî®„ÄÇ ËÄÅÂπ¥‰ª£Êî∂ÈõÜÂô®Ôºö Serial Old Êî∂ÈõÜÂô®-Ê†áËÆ∞ - Êï¥ÁêÜÁÆóÊ≥ï Serial OldÊòØSerialÊî∂ÈõÜÂô®ÁöÑËÄÅÂπ¥‰ª£ÁâàÊú¨ÔºåÂÆÉÂêåÊ†∑ÊòØ‰∏Ä‰∏™ÂçïÁ∫øÁ®ã(‰∏≤Ë°å)Êî∂ÈõÜÂô®Ôºå‰ΩøÁî®Ê†áËÆ∞Êï¥ÁêÜÁÆóÊ≥ï„ÄÇËøô‰∏™Êî∂ÈõÜÂô®ÁöÑ‰∏ªË¶ÅÊÑè‰πâ‰πüÊòØÂú®‰∫éÁªôClientÊ®°Âºè‰∏ãÁöÑËôöÊãüÊú∫‰ΩøÁî®„ÄÇ Â¶ÇÊûúÂú®ServerÊ®°Âºè‰∏ãÔºå‰∏ªË¶Å‰∏§Â§ßÁî®ÈÄîÔºö Ôºà1ÔºâÂú®JDK1.5‰ª•Âèä‰πãÂâçÁöÑÁâàÊú¨‰∏≠‰∏éParallel ScavengeÊî∂ÈõÜÂô®Êê≠ÈÖç‰ΩøÁî®Ôºõ Ôºà2Ôºâ‰Ωú‰∏∫CMSÊî∂ÈõÜÂô®ÁöÑÂêéÂ§áÈ¢ÑÊ°àÔºåÂú®Âπ∂ÂèëÊî∂ÈõÜÂèëÁîüConcurrent Mode FailureÊó∂‰ΩøÁî®„ÄÇ Parallel Old Êî∂ÈõÜÂô®-Ê†áËÆ∞ - Êï¥ÁêÜÁÆóÊ≥ï Parallel Old ÊòØParallel ScavengeÊî∂ÈõÜÂô®ÁöÑËÄÅÂπ¥‰ª£ÁâàÊú¨Ôºå‰ΩøÁî®Â§öÁ∫øÁ®ãÂíå‚ÄúÊ†áËÆ∞-Êï¥ÁêÜ‚ÄùÁÆóÊ≥ï„ÄÇËøô‰∏™Êî∂ÈõÜÂô®Âú®1.6‰∏≠ÊâçÂºÄÂßãÊèê‰æõ„ÄÇ CMS Êî∂ÈõÜÂô®-Ê†áËÆ∞ - Ê∏ÖÈô§ÁÆóÊ≥ï CMS(Concurrent Mark Sweep)Êî∂ÈõÜÂô®ÊòØ‰∏ÄÁßç‰ª•Ëé∑ÂèñÊúÄÁü≠ÂõûÊî∂ÂÅúÈ°øÊó∂Èó¥‰∏∫ÁõÆÊ†áÁöÑÊî∂ÈõÜÂô®„ÄÇÈÄÇÁî®‰∫é‰∫íËÅîÁΩëÁ´ôÁöÑÊúçÂä°Âô®Á´Ø„ÄÇÊèêÈ´òÂìçÂ∫îÈÄüÂ∫¶„ÄÇ ÂÆÉÁöÑËøê‰ΩúËøáÁ®ãÁõ∏ÂØπÂâçÈù¢Âá†ÁßçÊî∂ÈõÜÂô®Êù•ËØ¥Êõ¥Â§çÊùÇ‰∏Ä‰∫õÔºåÊï¥‰∏™ËøáÁ®ãÂàÜ‰∏∫4‰∏™Ê≠•È™§Ôºö ÂàùÂßãÊ†áËÆ∞„ÄÇÊ†áËÆ∞ GC Roots ËÉΩÁõ¥Êé•ÂÖ≥ËÅîÂà∞ÁöÑÂØπË±°ÔºåÈÄüÂ∫¶ÈùûÂ∏∏Âø´Ôºõ Âπ∂ÂèëÊ†áËÆ∞ÔºåÊî∂ÈõÜÂô®Á∫øÁ®ãÂíåÁî®Êà∑Á∫øÁ®ãÂêåÊ≠•ËøõË°åÔºõ ÈáçÊñ∞Ê†áËÆ∞Ôºå‰øÆÊ≠£Âπ∂ÂèëÊ†áËÆ∞ÊúüÈó¥ÁöÑÂèòÂåñÔºõ Âπ∂ÂèëÊ∏ÖÈô§„ÄÇ ÊâÄ‰ª•‰ºòÁÇπÂæàÊòéÊòæÔºö1. Âπ∂ÂèëÊî∂ÈõÜÔºõ2. ‰ΩéÂÅúÈ°øÔºåÊâÄ‰ª•ÂèàÁß∞‰∏∫ ‚ÄúÂπ∂Âèë‰ΩéÂÅúÈ°øÊî∂ÈõÜÂô®‚ÄùÔºõ Áº∫ÁÇπ‰πüÊúâÔºö ÂØπ CPU ËµÑÊ∫êÊïèÊÑüÔºåÈªòËÆ§ÂêØÁî® ÔºàCPU Êï∞Èáè + 3Ôºâ/4ÔºåcpuÂ∞ëÁöÑËØùÈÇ£ÂΩ±ÂìçÂæàÂ§ßÔºõ Êó†Ê≥ïÂ§ÑÁêÜÊµÆÂä®ÂûÉÂúæ„ÄåÊ∏ÖÁêÜÈò∂ÊÆµÂèØËÉΩ‰ºöÊúâÊñ∞ÁöÑÂûÉÂúæ‰∫ßÁîü„ÄçÔºåÂèØËÉΩÂá∫Áé∞‚ÄúConcurrent Mode Failure‚ÄùÂ§±Ë¥•ËÄåÂØºËá¥Âè¶‰∏ÄÊ¨°Full GCÁöÑ‰∫ßÁîü„ÄÇÂú®JDK1.5ÁöÑÈªòËÆ§ËÆæÁΩÆ‰∏ãÔºåCMSÊî∂ÈõÜÂô®ÂΩìËÄÅÂπ¥‰ª£‰ΩøÁî®‰∫Ü68%ÁöÑÁ©∫Èó¥ÂêéÂ∞±‰ºöË¢´ÊøÄÊ¥ª„ÄÇ CMSÊòØÂü∫‰∫é‚ÄúÊ†áËÆ∞-Ê∏ÖÈô§‚ÄùÁÆóÊ≥ïÂÆûÁé∞ÁöÑÊî∂ÈõÜÂô®ÔºåÊâãÊú∫ÁªìÊùüÊó∂‰ºöÊúâÂ§ßÈáèÁ©∫Èó¥Á¢éÁâá‰∫ßÁîü„ÄÇÁ©∫Èó¥Á¢éÁâáËøáÂ§öÔºåÂèØËÉΩ‰ºöÂá∫Áé∞ËÄÅÂπ¥‰ª£ËøòÊúâÂæàÂ§ßÁ©∫Èó¥Ââ©‰ΩôÔºå‰ΩÜÊòØÊó†Ê≥ïÊâæÂà∞Ë∂≥Â§üÂ§ßÁöÑËøûÁª≠Á©∫Èó¥Êù•ÂàÜÈÖçÂΩìÂâçÂØπË±°Ôºå‰∏çÂæó‰∏çÊèêÂâçËß¶ÂèëFullGC„ÄÇ Êñ∞Áîü‰ª£ÂíåËÄÅÂπ¥‰ª£ÂûÉÂúæÊî∂ÈõÜÂô®Ôºö G1 Êî∂ÈõÜÂô®-ÂàÜ‰ª£Êî∂ÈõÜÁÆóÊ≥ï ‚Äî ÂÖºÈ°æ ÂêûÂêêÈáè &amp; ‰ΩéÂÅúÈ°ø Áã¨ÁâπÁöÑÂàÜ‰ª£ÂûÉÂúæÂõûÊî∂Âô®,ÂàÜ‰ª£GC: ÂàÜ‰ª£Êî∂ÈõÜÂô®, ÂêåÊó∂ÂÖºÈ°æÂπ¥ËΩª‰ª£ÂíåËÄÅÂπ¥‰ª£Ôºõ ‰ΩøÁî®ÂàÜÂå∫ÁÆóÊ≥ï, ‰∏çË¶ÅÊ±Çeden, Âπ¥ËΩª‰ª£ÊàñËÄÅÂπ¥‰ª£ÁöÑÁ©∫Èó¥ÈÉΩËøûÁª≠Ôºõ Âπ∂Ë°åÊÄß: ÂõûÊî∂ÊúüÈó¥, ÂèØÁî±Â§ö‰∏™Á∫øÁ®ãÂêåÊó∂Â∑•‰Ωú, ÊúâÊïàÂà©Áî®Â§öÊ†∏cpuËµÑÊ∫êÔºõ Á©∫Èó¥Êï¥ÁêÜ: ÂõûÊî∂ËøáÁ®ã‰∏≠, ‰ºöËøõË°åÈÄÇÂΩìÂØπË±°ÁßªÂä®, ÂáèÂ∞ëÁ©∫Èó¥Á¢éÁâáÔºõ ÂèØÈ¢ÑËßÅÊÄß: G1ÂèØÈÄâÂèñÈÉ®ÂàÜÂå∫ÂüüËøõË°åÂõûÊî∂, ÂèØ‰ª•Áº©Â∞èÂõûÊî∂ËåÉÂõ¥, ÂáèÂ∞ëÂÖ®Â±ÄÂÅúÈ°ø„ÄÇ G1Êî∂ÈõÜÂô®ÁöÑÈò∂ÊÆµÂàÜ‰ª•‰∏ãÂá†‰∏™Ê≠•È™§Ôºö 1„ÄÅÂàùÂßãÊ†áËÆ∞ÔºàÂÆÉÊ†áËÆ∞‰∫Ü‰ªéGC RootÂºÄÂßãÁõ¥Êé•ÂèØËææÁöÑÂØπË±°ÔºâÔºõ 2„ÄÅÂπ∂ÂèëÊ†áËÆ∞Ôºà‰ªéGC RootsÂºÄÂßãÂØπÂ†Ü‰∏≠ÂØπË±°ËøõË°åÂèØËææÊÄßÂàÜÊûêÔºåÊâæÂá∫Â≠òÊ¥ªÂØπË±°ÔºâÔºõ 3„ÄÅÊúÄÁªàÊ†áËÆ∞ÔºàÊ†áËÆ∞ÈÇ£‰∫õÂú®Âπ∂ÂèëÊ†áËÆ∞Èò∂ÊÆµÂèëÁîüÂèòÂåñÁöÑÂØπË±°ÔºåÂ∞ÜË¢´ÂõûÊî∂ÔºâÔºõ 4„ÄÅÁ≠õÈÄâÂõûÊî∂ÔºàÈ¶ñÂÖàÂØπÂêÑ‰∏™RegionÁöÑÂõûÊî∂‰ª∑ÂÄºÂíåÊàêÊú¨ËøõË°åÊéíÂ∫èÔºåÊ†πÊçÆÁî®Êà∑ÊâÄÊúüÂæÖÁöÑGCÂÅúÈ°øÊó∂Èó¥ÊåáÂÆöÂõûÊî∂ËÆ°ÂàíÔºå‰ºòÂÖàÂõûÊî∂ÂûÉÂúæÊúÄÂ§öÁöÑRegionÔºåÂõ†Ê≠§Áß∞‰∏∫ Garbage FirstÔºâ„ÄÇ ÁªèÂ∏∏‰ΩøÁî®ÁöÑÂèÇÊï∞Ôºö -XX:+UseSerialGCÔºöÂú®Êñ∞Áîü‰ª£ÂíåËÄÅÂπ¥‰ª£‰ΩøÁî®‰∏≤Ë°åÊî∂ÈõÜÂô®-XX:+UseParNewGCÔºöÂú®Êñ∞Áîü‰ª£‰ΩøÁî®Âπ∂Ë°åÊî∂ÈõÜÂô®-XX:+UseParallelGC ÔºöÊñ∞Áîü‰ª£‰ΩøÁî®Âπ∂Ë°åÂõûÊî∂Êî∂ÈõÜÂô®ÔºåÊõ¥Âä†ÂÖ≥Ê≥®ÂêûÂêêÈáè-XX:+UseParallelOldGCÔºöËÄÅÂπ¥‰ª£‰ΩøÁî®Âπ∂Ë°åÂõûÊî∂Êî∂ÈõÜÂô®-XX:ParallelGCThreadsÔºöËÆæÁΩÆÁî®‰∫éÂûÉÂúæÂõûÊî∂ÁöÑÁ∫øÁ®ãÊï∞-XX:+UseConcMarkSweepGCÔºöÊñ∞Áîü‰ª£‰ΩøÁî®Âπ∂Ë°åÊî∂ÈõÜÂô®ÔºåËÄÅÂπ¥‰ª£‰ΩøÁî®CMS+‰∏≤Ë°åÊî∂ÈõÜÂô®-XX:ParallelCMSThreadsÔºöËÆæÂÆöCMSÁöÑÁ∫øÁ®ãÊï∞Èáè-XX:+UseG1GCÔºöÂêØÁî®G1ÂûÉÂúæÂõûÊî∂Âô® ‰∏äÈù¢‰∏â‰∏™ÈóÆÈ¢òÔºåÂü∫Êú¨Ëß£ÂÜ≥‰∫ÜÂûÉÂúæÊî∂ÈõÜÊñπÈù¢ÁöÑÈóÆÈ¢ò‰∫ÜÔºåÈÇ£ÂõûËøáÂ§¥Êù•ÔºåÂØπË±°ÂèàÊòØÂ¶Ç‰ΩïÂàÜÈÖçÂÜÖÂ≠òÁöÑÂë¢Ôºü ÂØπË±°‰ºòÂÖàÂú®Êñ∞Áîü‰ª£ Eden Âå∫‰∏≠ÂàÜÈÖçÔºåÂΩì Eden Âå∫Ê≤°ÊúâË∂≥Â§üÁöÑÁ©∫Èó¥ËøõË°åÂàÜÈÖçÊó∂ÔºåËôöÊãüÊú∫‰ºöÂèëËµ∑‰∏ÄÊ¨° Minor GCÔºåÂ∞Ü GC ÂêéËøòÂ≠òÊ¥ªÁöÑÂØπË±°ËΩ¨ÁßªSurvivorÂå∫ÔºåÂ¶ÇÊûúSurvivorÂå∫Ê∫¢Âá∫‰∫Ü‰ºöËΩ¨ÁßªÂà∞ËÄÅÂπ¥‰ª£‰∏≠„ÄÇ Êñ∞Áîü‰ª£GCÔºàMinor GCÔºâÔºöÊåáÂèëÁîüÂú®Êñ∞Áîü‰ª£ÁöÑÂûÉÂúæÊî∂ÈõÜÂä®‰ΩúÔºåÂõ†‰∏∫ Java ÂØπË±°Â§ßÈÉΩÂÖ∑ÊúâÊ≠ªÂæóÂø´ÁöÑÁâπÊÄßÔºåÊâÄ‰ª• Minor GC ‰ºöÈùûÂ∏∏ÁöÑÈ¢ëÁπÅÔºåÈÄüÂ∫¶‰πüÂæàÂø´Ôºõ ËÄÅÂπ¥‰ª£GCÔºàMajor GC/Full GCÔºâ:ÊåáÂèëÁîüÂú®ËÄÅÂπ¥‰ª£ÁöÑ GCÔºåÂá∫Áé∞‰∫Ü Major GCÔºåÁªèÂ∏∏‰ºö‰º¥ÈöèËá≥Â∞ë‰∏ÄÊ¨° Minor GCÔºåÂΩìÁÑ∂‰πüÂπ∂ÈùûÁªùÂØπÔºåÂú® ParallelScaVenge Â∞±ÊúâÁõ¥Êé•ËøõË°å Major GC ÁöÑÁ≠ñÁï•ÈÄâÊã©ËøáÁ®ã„ÄÇMajor GC ÁöÑÈÄüÂ∫¶ÊØî Minor GC ÊÖ¢ 10ÂÄç‰ª•‰∏ä„ÄÇ Â§ßÂØπË±°‰ºöÁõ¥Êé•ËøõÂÖ•ËÄÅÂπ¥‰ª£ÔºåÂõ†‰∏∫Â∞±ÁÆóÂÆâÊéíËøõÊñ∞Áîü‰ª£ÁöÑ Eden Âå∫ÔºåEden Âå∫Âèä‰∏§‰∏™ SurvivorÂå∫‰πãÈó¥‰ºöËøõË°åÂ§ßÈáèÁöÑÂÜÖÂ≠òÊã∑Ë¥ùÔºåËÄå‰∏îÊûÅÊúâÂèØËÉΩ Survivor Ë£Ö‰∏ç‰∏ãËøõËÄåËß¶ÂèëÂàÜÈÖçÊãÖ‰øùÊú∫Âà∂ËΩ¨ÁßªÂà∞ËÄÅÂπ¥‰ª£Ôºå‰∏éÂÖ∂ËøôÊ†∑Ôºå‰∏çÂ¶ÇÁõ¥Êé•Â∞ÜÂ§ßÂØπË±°Áõ¥Êé•ËøõÂÖ•ËÄÅÂπ¥‰ª£„ÄÇ ‰∏äÊñá‰∏ÄÁõ¥Âú®ËÆ≤Êñ∞Áîü‰ª£ÂíåËÄÅÂπ¥‰ª£ÔºåÈÇ£‰∫åËÄÖÂà∞Â∫ïÊòØÂ¶Ç‰ΩïÁïåÂÆöÂë¢Ôºü ËôöÊãüÊú∫ÁªôÊØè‰∏™ÂØπË±°ÈÉΩÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÂØπË±°Âπ¥ÈæÑËÆ°Êï∞Âô®ÔºåÂ¶ÇÊûúÂØπË±°Âú®Êñ∞Áîü‰ª£ÁöÑ Eden Âå∫ÂüüÂá∫ÁîüÂπ∂‰∏îÁªèËøáÁ¨¨‰∏ÄÊ¨° Minor GC Âêé‰ªçÁÑ∂ÁïôÂú® Survivor ‰∏≠ÔºåÈÇ£‰πà‰ªñÁöÑÂØπË±°Âπ¥ÈæÑÂèò‰∏∫ 1 Â≤ÅÔºå‰ªéÊ≠§‰πãÂêéÔºåËØ•ÂØπË±°Âú® Survivor ÊØèÁÜ¨Ëøá‰∏ÄÊ¨° Minor GC ÔºåÂπ¥ÈæÑÂ∞±‰ºöÂ¢ûÂä†‰∏ÄÂ≤ÅÔºåÈªòËÆ§‰ºöÂà∞ 15 Â≤ÅÊâçÊôãÂçáÂà∞ËÄÅÂπ¥‰ª£‰∏≠ÔºåÈòàÂÄºÂèØ‰ª•ÈÄöËøáÂèÇÊï∞ -XX:MaxTenuringThresholdËÆæÁΩÆ„ÄÇ ÂΩìÁÑ∂Ôºå‰∏∫‰∫ÜÈÄÇÂ∫î‰∏çÂêåÁ®ãÂ∫èÁöÑÂÜÖÂ≠òÊÉÖÂÜµÔºåËôöÊãüÊú∫Âπ∂‰∏ç‰ºöÊÄªÊòØÊåâÁÖßÂØπË±°Âπ¥ÈæÑÂ§ß‰∫éMaxTenuringThresholdÊâçÊôãÂçáÂà∞ËÄÅÂπ¥‰ª£ÔºåÂ¶ÇÊûú Survivor Á©∫Èó¥‰∏≠Áõ∏ÂêåÂπ¥ÈæÑÁöÑÂØπË±°ÁöÑÊÄªÂ§ßÂ∞èÂ∑≤ÁªèË∂ÖËøá‰∫Ü Survivor ÁöÑÁ©∫Èó¥ÁöÑ‰∏ÄÂçäÔºåÂàôÂπ¥ÈæÑÂ§ß‰∫éÊàñÁ≠â‰∫éËØ•Âπ¥ÈæÑÁöÑÂØπË±°Áõ¥Êé•Â∞±ÂèØ‰ª•ÊôãÂçáÂà∞ËÄÅÂπ¥‰ª£„ÄÇ ÈÇ£‰∏∫‰ΩïË¶ÅÊúâËøôÁßçÂä®ÊÄÅÂπ¥ÈæÑËÆ°ÁÆóÂë¢Ôºü Â¶ÇÊûúÂõ∫ÂÆöÊåâÁÖßMaxTenuringThresholdËÆæÂÆöÁöÑÈòàÂÄº‰Ωú‰∏∫ÊôãÂçáÊù°‰ª∂Ôºö aÔºâMaxTenuringThresholdËÆæÁΩÆÁöÑËøáÂ§ßÔºåÂéüÊú¨Â∫îËØ•ÊôãÂçáÁöÑÂØπË±°‰∏ÄÁõ¥ÂÅúÁïôÂú®SurvivorÂå∫ÔºåÁõ¥Âà∞SurvivorÂå∫Ê∫¢Âá∫Ôºå‰∏ÄÊó¶Ê∫¢Âá∫ÂèëÁîüÔºåEden+Svuvivor‰∏≠ÂØπË±°Â∞Ü‰∏çÂÜç‰æùÊçÆÂπ¥ÈæÑÂÖ®ÈÉ®ÊèêÂçáÂà∞ËÄÅÂπ¥‰ª£ÔºåËøôÊ†∑ÂØπË±°ËÄÅÂåñÁöÑÊú∫Âà∂Â∞±Â§±Êïà‰∫Ü„ÄÇ bÔºâMaxTenuringThresholdËÆæÁΩÆÁöÑËøáÂ∞èÔºå‚ÄúËøáÊó©ÊôãÂçá‚ÄùÂç≥ÂØπË±°‰∏çËÉΩÂú®Êñ∞Áîü‰ª£ÂÖÖÂàÜË¢´ÂõûÊî∂ÔºåÂ§ßÈáèÁü≠ÊúüÂØπË±°Ë¢´ÊôãÂçáÂà∞ËÄÅÂπ¥‰ª£ÔºåËÄÅÂπ¥‰ª£Á©∫Èó¥ËøÖÈÄüÂ¢ûÈïøÔºåÂºïËµ∑È¢ëÁπÅÁöÑMajor GC„ÄÇÂàÜ‰ª£ÂõûÊî∂Â§±Âéª‰∫ÜÊÑè‰πâÔºå‰∏•ÈáçÂΩ±ÂìçGCÊÄßËÉΩ„ÄÇ Âú®Êú¨Á´†ÁöÑÊúÄÂêéÔºåÂÜçÊù•ËØ¶ÁªÜÂèôËø∞‰∏Ä‰∏ãÁ©∫Èó¥ÂàÜÈÖçÊãÖ‰øù„ÄÇ Âú®ÂèëÁîü Minor GCÊó∂ÔºåËôöÊãüÊú∫ ‰ºöÊ£ÄÊµã‰∏Ä‰∏ã‰πãÂâçÊØèÊ¨°ÊôãÂçáÂà∞ËÄÅÂπ¥‰ª£ÁöÑÂπ≥ÂùáÂ§ßÂ∞èÊòØÂê¶Â§ß‰∫éËÄÅÂπ¥‰ª£ÁöÑÂâ©‰ΩôÁ©∫Èó¥Â§ßÂ∞èÔºàÂõ†‰∏∫Âú®ÂÆûÈôÖÂõûÊî∂‰πãÂâçÊòØÊó†Ê≥ïÁ°ÆÂÆöÊú¨ËΩÆÁöÑÂØπË±°Â§ßÂ∞èÊòØÂ§öÂ∞ëÔºåÂè™ËÉΩÊåâ‰ª•ÂæÄÁöÑÁªèÈ™åÂÄº‰º∞ËÆ°Ôºâ Â¶ÇÊûúÂ§ß‰∫éÔºåËØ¥ÊòéÔºåÂ¥©‰∫ÜÔºåÂè™ËÉΩËøõË°å Full GC‰∫Ü; Â¶ÇÊûúÂ∞è‰∫éÔºåÂàôÂÜçÊü•Áúã HandlePromotionFailureÔºàÂ§ÑÁêÜÊôãÂçáÂ§±Ë¥•ÔºâÁöÑËÆæÁΩÆÔºàÈªòËÆ§ÊâìÂºÄÔºå‰∏çÁÑ∂Full GC Â§™È¢ëÁπÅ‰∫ÜÔºåÊÖ¢ÁöÑ‰∏ÄÊâπÔºâÔºå Â¶ÇÊûúÂÖÅËÆ∏ÔºåÂàôÂè™‰ºöËøõË°å Minor GCÔºåÂ¶ÇÊûúMinor GCÂêéÊãÖ‰øùÂ§±Ë¥•ÔºåÈÇ£Â∞±Ê≤°ÂäûÊ≥ï‰∫ÜÂè™ËÉΩÈÄâÊã©Full GCÔºåÂê¶ÂàôÂ¶ÇÊûú‰∏çÂÖÅËÆ∏Â§±Ë¥•ÔºåÈÇ£Â∞±Âè™ËÉΩËøõË°å Full GC„ÄÇ Ë∞àÂà∞Ëøô‰πàÂ§öÊ¨° Full GCÔºåMinor GCÈÇ£ÊàëÊÉ≥ÈóÆ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ¶ÇÊûú Full GC or Minor GC È¢ëÁπÅÔºåÊúâÂì™‰∫õÂéüÂõ†ÂØºËá¥Ôºü Full GC È¢ëÁπÅÔºö ÂÖàÊù•ÂàÜÊûê‰∏Ä‰∏ãÔºå‰ªÄ‰πàÊó∂ÂÄô‰ºöËß¶Âèë Full GC: Á®ãÂ∫èÊâßË°å‰∫ÜSystem.gc() //Âª∫ËÆÆjvmÊâßË°åfullgcÔºåÂπ∂‰∏ç‰∏ÄÂÆö‰ºöÊâßË°å ÊâßË°å‰∫Üjmap -histo:live pidÂëΩ‰ª§ //Ëøô‰∏™‰ºöÁ´ãÂç≥Ëß¶Âèëfullgc‚Ä¶Ëøô‰∏™ÂèØ‰ª•‰∏çËÆ≤ Âú®ÊâßË°åminor gcÁöÑÊó∂ÂÄôËøõË°åÁöÑ‰∏ÄÁ≥ªÂàóÊ£ÄÊü• // ‰∏âÊ¨° fullgc ÁöÑÂèØËÉΩ ‰ΩøÁî®‰∫ÜÂæàÂ§öÁü≠ÂëΩÁöÑÂ§ßÂØπË±° // Â§ßÂØπË±°Áõ¥Êé•ËøõÂÖ•Âà∞ËÄÅÂπ¥‰ª£ Âú®Á®ãÂ∫è‰∏≠ÈïøÊúüÊåÅÊúâ‰∫ÜÂØπË±°ÁöÑÂºïÁî® //ÂØπË±°Âπ¥ÈæÑËææÂà∞ÊåáÂÆöÈòàÂÄº‰πü‰ºöËøõÂÖ•ËÄÅÂπ¥‰ª£ È¶ñÂÖà 1 2 Ëøô‰∏§ÊÉÖÂÜµÊàë‰ª¨‰∏çËÄÉËôëÔºåÁ¨¨ 4 5 ÁßçÊÉÖÂÜµ‰πü‰∏çÁî®ÂàÜÊûê‰∫ÜÔºåÈáçÁÇπÊòØÁ¨¨ 3 ÁßçÊÉÖÂÜµÔºåminor gc ÂêéÂØºËá¥ full gcÔºåÊàëËßâÂæóÂéüÂõ†ÂèØËÉΩÊúâÔºö Eden ËÆæÁΩÆËøáÂ∞è or Survivor ËÆæÁΩÆËøáÂ∞èÔºåÂØºËá¥È¢ëÁπÅËß¶Âèë minor gc or ÊãÖ‰øùÁ≠ñÁï•Ëß¶ÂèëÔºåËøôÁßçÊÉÖÂÜµ‰∏ã‰∏ÄÊ¨° full gcÂêéÔºåÂâ©‰ΩôÁöÑÂØπË±°Â∫îËØ•ÂæàÂ∞ë„ÄÇ ÂèØËÉΩÊòØËÄÅÂπ¥‰ª£ÂÜÖÂ≠òËÆæÁΩÆËøáÂ∞èÔºåÂØºËá¥ÂæàÂÆπÊòì full gc„ÄÇËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰∏ÄÊ¨° full gc ÂêéÔºåÂú®ËÄÅÂπ¥‰ª£‰∏≠ÂÜÖÂ≠òÂ∫îËØ•‰∏ç‰ºöÂáèÂ∞ëÂæàÂ§öÔºåÂõûÊî∂ÁéáÂæà‰Ωé„ÄÇ ÊâÄ‰ª•ÊÄªÁöÑÊù•ËØ¥ÔºåÂÖàÁúã‰∏ÄÊ¨°ÂõûÊî∂ full gc ÂêéÁöÑÁªìÊûúÔºåÁÑ∂ÂêéÂÜçËøõË°åÂà§Êñ≠„ÄÇ Minor GC È¢ëÁπÅÔºö ÈÇ£Â∞±Âè™ËÉΩÊòØ Eden ËÆæÁΩÆÁöÑÂ§™Â∞è‰∫Ü„ÄÇ JVM Ë∞É‰ºòÁöÑÂü∫Êú¨ÊÄùË∑ØÔºö Â¶ÇÊûúÊòØ CMS ÈÄöËøáÁúãJDKËá™Â∏¶ÁöÑÂõæÂΩ¢ÂåñÂ∑•ÂÖ∑ÔºåÊ£ÄÊü•Á∫øÁ®ãÁöÑÁä∂ÊÄÅ„ÄÇ‰∫ÜËß£Âà∞‰∏Ä‰∏™JavaËøõÁ®ãÊúâÂ§öÂ∞ëÁ∫øÁ®ãÔºåÊØè‰∏™Á∫øÁ®ã‰ªÄ‰πàÁä∂ÊÄÅÔºåÊòØ‰∏çÊòØÂú®Á≠âÁùÄÈîÅÔºöËøõÁ®ãÁöÑCPUÂíåÂÜÖÂ≠òÂç†Áî®‰∫ÜÂ§öÂ∞ëÔºõ Â¶ÇÊûúÂèëÁé∞Á®ãÂ∫èË∑ëÂæóÂæàÊÖ¢ÔºåÂ∞±Áî®ÂõæÂΩ¢ÂåñÁïåÈù¢ÂéªÁúã GC Êó•ÂøóÔºõ ÊÄªÁöÑÊù•ËØ¥Â∞±ÊòØË¶ÅÂéªÂêàÁêÜËÆæÁΩÆÂπ¥ËΩª‰ª£ÂíåËÄÅÂπ¥‰ª£ÁöÑÂ§ßÂ∞èÔºåËøôÊòØ‰∏Ä‰∏™Ëø≠‰ª£ÁöÑËøáÁ®ãÔºåÂèØ‰ª•ÈááÁî® JVM ÈªòËÆ§ÁöÑÈÖçÁΩÆÈÄöËøáÂéãÂäõÊµãËØïÂéªÂàÜÊûê GC Êó•ÂøóÔºõ Â¶ÇÊûúÂèëÁé∞ÁªèÂ∏∏ Minor GCÔºåÂπ∂‰∏îÂõûÊî∂ÁéáÂπ∂‰∏çÈ´òÔºåÂàôËØ¥Êòé Eden Âå∫ËÆæÁΩÆÁöÑËøáÂ∞èÔºõ Â¶ÇÊûúÂèëÁé∞ÁªèÂ∏∏ Full GCÔºåÂÖàËÄÉËôëÊòØ‰∏çÂ∏¶Ëá™Â∑±ÂÜôÁöÑ‰ª£Á†ÅÊúâÈóÆÈ¢òÔºåÊØîÂ¶ÇÊâßË°å‰∫Ü System.gc()„ÄÅ‰ΩøÁî®‰∫ÜËøáÂ§öÂÖ®Â±ÄÂèòÈáè„ÄÅ‰ΩøÁî®‰∫ÜÂæàÂ§öÁü≠ÂëΩÁöÑÂ§ßÂØπË±°ÔºåÁÑ∂ÂêéÂ¶ÇÊûúÊéíÊü•‰∏çÂá∫Êù•Ôºõ ÂÜçËÄÉËôëÂèÇÊï∞Ë∞É‰ºòÔºåÂ¶ÇÊûúÂèëÁé∞ Full GC ÂêéÂÜÖÂ≠òÂç†ÊúâÁéá‰∏ãÊù•‰∫ÜÔºåËØ¥ÊòéÊ∏ÖÈô§‰∫ÜÂ§ßÈáèÂûÉÂúæÔºåÂèØ‰ª•ËÄÉËôëË∞ÉÂ§ßÂπ¥ËΩª‰ª£ Eden or SurvivorÔºåÂ¶ÇÊûúÊ≤°‰∏ãÊù•ÔºåÂèØËÉΩÊòØ ÂÜÖÂ≠òÊ≥ÑÊºè or ËÄÅÂπ¥‰ª£Â§™Â∞è„ÄÇ Â¶ÇÊûúÊòØ G1ÔºåÂàôÁõ¥Êé•Ë∞ÉÂ§ßÂ†ÜÁöÑÂÜÖÂ≠òÂ∫îËØ•Â∞±Ë°å‰∫Ü„ÄÇÂõ†‰∏∫G1Êî∂ÈõÜÂô®ÈááÁî®‰∫ÜÂ±ÄÈÉ®Âå∫ÂüüÊî∂ÈõÜÁ≠ñÁï•ÔºåÂçïÊ¨°ÂûÉÂúæÊî∂ÈõÜÁöÑÊó∂Èó¥ÂèØÊéßÔºåÂèØ‰ª•ÁÆ°ÁêÜËæÉÂ§ßÁöÑJavaÂ†Ü„ÄÇ Á¨¨ÂÖ≠Á´† Á±ªÊñá‰ª∂ÁªìÊûÑÁºñËØëËøáÁ®ãËøô‰∏ÄÁ´†ÂÖ∂ÂÆûËøòÊòØÊØîËæÉÁÆÄÂçï‰ΩÜÊòØÊûØÁá•ÁöÑÔºå‰∏ªË¶ÅÊòØËÆ≤‰∫Ü Class Êñá‰ª∂Â≠óËäÇÁ†ÅÁªìÊûÑ„ÄÇ Â∞Ü .java Êñá‰ª∂ÂèòÊàê .class Êñá‰ª∂ÔºåÂ∞±ÊòØÊàë‰ª¨Â∏∏ËØ¥ÁöÑÁºñËØëËøáÁ®ãÔºåËøô‰∏ÄËøáÁ®ãÊòØÈù† javac Ëøô‰∏™ÁºñËØëÂô®ÂÆåÊàêÁöÑ„ÄÇJava Âíå C/C++ ‰∏ç‰∏ÄÊ†∑ÔºåC/C++ ÊòØÈÄöËøáÁõ¥Êé•Â∞ÜÊ∫ê‰ª£Á†ÅÁºñËØëÊàêÁõÆÊ†áÊú∫Âô®Á†ÅÔºàCPUÁõ¥Êé•ÊâßË°åÁöÑÊåá‰ª§ÈõÜÂêàÔºâÔºåËÄå Java ÂàôÊòØÂú®‰∏≠Èó¥Âä†‰∫Ü‰∏ÄÂ±ÇÂ≠óËäÇÁ†ÅÔºå‰πüÂ∞±ÊòØÊää javaÊñá‰ª∂ËΩ¨Êç¢Êàê class Â≠óËäÇÁ†ÅÔºåÁÑ∂Âêé JVM ËÉΩÂ§üËØÜÂà´Â≠óËäÇÁ†ÅÔºå‰πüÂ∞±ÊòØËÉΩÂ§üÂä†ËΩΩ .class Êñá‰ª∂ÔºàËøõËÄåÂÜçÈÄöËøá JVM Â∞ÜÂ≠óËäÇÁ†ÅËΩ¨Êç¢‰∏∫Êú∫Âô®Á†ÅÔºåËøô‰∏ÄÊ≠•‰πüÂèØÊ≤°ÊúâÔºâ„ÄÇ ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚ÄîÁâàÊùÉÂ£∞ÊòéÔºöÊú¨Êñá‰∏∫CSDNÂçö‰∏ª„ÄåÈ∫¶Áî∞„ÄçÁöÑÂéüÂàõÊñáÁ´†ÔºåÈÅµÂæ™ CC 4.0 BY-SA ÁâàÊùÉÂçèËÆÆÔºåËΩ¨ËΩΩËØ∑ÈôÑ‰∏äÂéüÊñáÂá∫Â§ÑÈìæÊé•ÂèäÊú¨Â£∞Êòé„ÄÇÂéüÊñáÈìæÊé•Ôºöhttps://blog.csdn.net/itmyhome1990/article/details/78847266 Class Êñá‰ª∂ÁªÑÊàê‰ªª‰Ωï‰∏Ä‰∏™ClassÊñá‰ª∂ÈÉΩÂØπÂ∫îÁùÄÂîØ‰∏Ä‰∏Ä‰∏™Á±ªÊàñÊé•Âè£ÁöÑÂÆö‰πâ‰ø°ÊÅØÔºå‰ΩÜÂèçËøáÊù•ËØ¥ÔºåÁ±ªÊàñÊé•Âè£Âπ∂‰∏ç‰∏ÄÂÆöÈÉΩÂæóÂÆö‰πâÂú®Êñá‰ª∂ÈáåÔºàË≠¨Â¶ÇÁ±ªÊàñÊé•Âè£‰πüÂèØ‰ª•ÈÄöËøáÁ±ªÂä†ËΩΩÂô®Áõ¥Êé•ÁîüÊàêÔºâ„ÄÇClass Êñá‰ª∂ÊòØ‰∏ÄÁªÑ‰ª• 8 ‰ΩçÂ≠óËäÇ‰∏∫Âü∫Á°ÄÂçï‰ΩçÁöÑ‰∫åËøõÂà∂ÊµÅ„ÄÇ Ê†πÊçÆ Java ËôöÊãüÊú∫ËßÑËåÉÁöÑËßÑÂÆöÔºåClass Êñá‰ª∂Ê†ºÂºèÈááÁî®‰∏ÄÁßçÁ±ª‰ºº‰∫éCËØ≠Ë®ÄÁªìÊûÑ‰ΩìÁöÑ‰º™ÁªìÊûÑÊù•Â≠òÂÇ®Êï∞ÊçÆÔºåËøôÁßç‰º™ÁªìÊûÑ‰∏≠Âè™Êúâ‰∏§ÁßçÊï∞ÊçÆÁ±ªÂûãÔºöÊó†Á¨¶Âè∑Êï∞ÂíåË°® Êó†Á¨¶Âè∑Êï∞Â±û‰∫éÂü∫Êú¨ÁöÑÊï∞ÊçÆÁ±ªÂûãÔºå‰ª•u1„ÄÅ u2„ÄÅ u4„ÄÅ u8Êù•ÂàÜÂà´‰ª£Ë°®1‰∏™Â≠óËäÇ„ÄÅ 2‰∏™Â≠óËäÇ„ÄÅ 4‰∏™Â≠óËäÇÂíå8‰∏™Â≠óËäÇÁöÑÊó†Á¨¶Âè∑Êï∞ÔºåÊó†Á¨¶Âè∑Êï∞ÂèØ‰ª•Áî®Êù•ÊèèËø∞Êï∞Â≠ó„ÄÅ Á¥¢ÂºïÂºïÁî®„ÄÅ Êï∞ÈáèÂÄºÊàñËÄÖÊåâÁÖßUTF-8ÁºñÁ†ÅÊûÑÊàêÂ≠óÁ¨¶‰∏≤ÂÄº„ÄÇ Ë°®ÊòØÁî±Â§ö‰∏™Êó†Á¨¶Âè∑Êï∞ÊàñËÄÖÂÖ∂‰ªñË°®‰Ωú‰∏∫Êï∞ÊçÆÈ°πÊûÑÊàêÁöÑÂ§çÂêàÊï∞ÊçÆÁ±ªÂûãÔºåÊâÄÊúâË°®ÈÉΩ‰π†ÊÉØÊÄßÂú∞‰ª•‚Äú_info‚ÄùÁªìÂ∞æ„ÄÇ Ë°®Áî®‰∫éÊèèËø∞ÊúâÂ±ÇÊ¨°ÂÖ≥Á≥ªÁöÑÂ§çÂêàÁªìÊûÑÁöÑÊï∞ÊçÆÔºåÊï¥‰∏™ Class Êñá‰ª∂Êú¨Ë¥®‰∏äÂ∞±ÊòØ‰∏ÄÂº†Ë°®ÔºåÂÆÉÁî±Â¶Ç‰∏ãË°®ÊâÄÁ§∫ÁöÑÊï∞ÊçÆÈ°πÊûÑÊàê„ÄÇ Â¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåÊï¥‰∏™ Class Êñá‰ª∂ ÊåâÂ¶Ç‰∏ãÊéíÂàóÔºöÈ≠îÊï∞(4) ‚Äì Ê¨°ÁâàÊú¨Âè∑(2) ‚Äì ‰∏ªÁâàÊú¨Âè∑(2) ‚Äì Â∏∏ÈáèÊ±†Â∏∏ÈáèÊï∞(2) ‚Äì Â∏∏ÈáèÊ±†Ë°®(‰∏çÁ°ÆÂÆöÈïøÂ∫¶) ‚Äì ËÆøÈóÆÊ†áÂøó(2) ‚Äì Á±ªÁ¥¢Âºï(2) ‚Äì Áà∂Á±ªÁ¥¢Âºï(2) ‚Äì ÂÆûÁé∞ÁöÑÊé•Âè£Êï∞(2) ‚Äì ÂÆûÁé∞ÁöÑÊé•Âè£ÈõÜÂêà(2) ‚Äì ÂÆûÁé∞ÁöÑÂ≠óÊÆµÊï∞(2) ‚Äì Â≠óÊÆµÈõÜÂêàË°®(‰∏çÁ°ÆÂÆöÈïøÂ∫¶) ‚Äì ÊñπÊ≥ïÊï∞(2) ‚Äì ÊñπÊ≥ïÈõÜÂêàË°®(‰∏çÁ°ÆÂÆöÈïøÂ∫¶) ‚Äì Â±ûÊÄßÊï∞(2) ‚Äì Â±ûÊÄßÈõÜÂêàË°®(‰∏çÁ°ÆÂÆöÈïøÂ∫¶)„ÄÇ ÂÖ∑‰ΩìÁªÑÊàêÈÉ®ÂàÜ1. È≠îÊï∞ÊØè‰∏™ClassÊñá‰ª∂ÁöÑÂ§¥4‰∏™Â≠óËäÇÁß∞‰∏∫È≠îÊï∞ÔºàMagic NumberÔºâÔºåÂÆÉÁöÑÂîØ‰∏Ä‰ΩúÁî®ÊòØÁ°ÆÂÆöËøô‰∏™Êñá‰ª∂ÊòØÂê¶‰∏∫‰∏Ä‰∏™ËÉΩË¢´ËôöÊãüÊú∫Êé•ÂèóÁöÑClassÊñá‰ª∂„ÄÇ 2. ClassÊñá‰ª∂ÁöÑÁâàÊú¨Á¥ßÊé•ÁùÄÈ≠îÊï∞ÁöÑ4‰∏™Â≠óËäÇÂ≠òÂÇ®ÁöÑÊòØClassÊñá‰ª∂ÁöÑÁâàÊú¨Âè∑ÔºöÁ¨¨5ÂíåÁ¨¨6‰∏™Â≠óËäÇÊòØÊ¨°ÁâàÊú¨Âè∑ÔºàMinorVersionÔºâÔºåÁ¨¨7ÂíåÁ¨¨8‰∏™Â≠óËäÇÊòØ‰∏ªÁâàÊú¨Âè∑ÔºàMajor VersionÔºâ„ÄÇ JavaÁöÑÁâàÊú¨Âè∑ÊòØ‰ªé45ÂºÄÂßãÁöÑÔºåJDK 1.1‰πãÂêéÁöÑÊØè‰∏™JDKÂ§ßÁâàÊú¨ÂèëÂ∏É‰∏ªÁâàÊú¨Âè∑Âêë‰∏äÂä†1ÔºàJDK 1.0ÔΩû1.1‰ΩøÁî®‰∫Ü45.0ÔΩû45.3ÁöÑÁâàÊú¨Âè∑ÔºâÔºåÈ´òÁâàÊú¨ÁöÑJDKËÉΩÂêë‰∏ãÂÖºÂÆπ‰ª•ÂâçÁâàÊú¨ÁöÑClassÊñá‰ª∂Ôºå‰ΩÜ‰∏çËÉΩËøêË°å‰ª•ÂêéÁâàÊú¨ÁöÑClassÊñá‰ª∂ÔºåÂç≥‰ΩøÊñá‰ª∂Ê†ºÂºèÂπ∂Êú™ÂèëÁîü‰ªª‰ΩïÂèòÂåñÔºåËôöÊãüÊú∫‰πüÂøÖÈ°ªÊãíÁªùÊâßË°åË∂ÖËøáÂÖ∂ÁâàÊú¨Âè∑ÁöÑClassÊñá‰ª∂„ÄÇ 3. Â∏∏ÈáèÊ±†Â∏∏ÈáèÊ±†ÂèØ‰ª•ÁêÜËß£‰∏∫ClassÊñá‰ª∂‰πã‰∏≠ÁöÑËµÑÊ∫ê‰ªìÂ∫ìÔºåÂÆÉÊòØClassÊñá‰ª∂ÁªìÊûÑ‰∏≠‰∏éÂÖ∂‰ªñÈ°πÁõÆÂÖ≥ËÅîÊúÄÂ§öÁöÑÊï∞ÊçÆÁ±ªÂûãÔºå‰πüÊòØÂç†Áî®ClassÊñá‰ª∂Á©∫Èó¥ÊúÄÂ§ßÁöÑÊï∞ÊçÆÈ°πÁõÆ‰πã‰∏ÄÔºåÂêåÊó∂ÂÆÉËøòÊòØÂú®ClassÊñá‰ª∂‰∏≠Á¨¨‰∏Ä‰∏™Âá∫Áé∞ÁöÑË°®Á±ªÂûãÊï∞ÊçÆÈ°πÁõÆ„ÄÇ Â∏∏ÈáèÊ±†‰∏≠‰∏ªË¶ÅÂ≠òÊîæ‰∏§Â§ßÁ±ªÂ∏∏ÈáèÔºöÂ≠óÈù¢ÈáèÔºàLiteralÔºâÂíåÁ¨¶Âè∑ÂºïÁî®ÔºàSymbolic ReferencesÔºâ„ÄÇÂ≠óÈù¢ÈáèÊØîËæÉÊé•Ëøë‰∫éJavaËØ≠Ë®ÄÂ±ÇÈù¢ÁöÑÂ∏∏ÈáèÊ¶ÇÂøµÔºåÂ¶ÇÊñáÊú¨Â≠óÁ¨¶‰∏≤„ÄÅ Â£∞Êòé‰∏∫finalÁöÑÂ∏∏ÈáèÂÄºÁ≠â„ÄÇ ËÄåÁ¨¶Âè∑ÂºïÁî®ÂàôÂ±û‰∫éÁºñËØëÂéüÁêÜÊñπÈù¢ÁöÑÊ¶ÇÂøµÔºåÂåÖÊã¨‰∫Ü‰∏ãÈù¢‰∏âÁ±ªÂ∏∏ÈáèÔºö Á±ªÂíåÊé•Âè£ÁöÑÂÖ®ÈôêÂÆöÂêçÔºàFully Qualified NameÔºâ Â≠óÊÆµÁöÑÂêçÁß∞ÂíåÊèèËø∞Á¨¶ÔºàDescriptorÔºâ ÊñπÊ≥ïÁöÑÂêçÁß∞ÂíåÊèèËø∞Á¨¶ Â∏∏ÈáèÊ±†‰∏≠ÁöÑÊØè‰∏ÄÈ°πÂèàÂØπÂ∫îÁùÄ‰∏Ä‰∏™Ë°®ÔºåÊÄªÂÖ±11ÁßçÊï∞ÊçÆÁ±ªÂûãÁöÑÁªìÊûÑÔºåÊ≥®ÊÑè tag = 2 Ëøô‰∏™ÂÄºÊ≤°ÊúâÔºö 4. ËÆøÈóÆÊ†áÂøóÂú®Â∏∏ÈáèÊ±†ÁªìÊùü‰πãÂêéÔºåÁ¥ßÊé•ÁùÄÁöÑ‰∏§‰∏™Â≠óËäÇ‰ª£Ë°®ËÆøÈóÆÊ†áÂøó(access_flags),Ëøô‰∏™Ê†áÂøóÁî®‰∫éËØÜÂà´‰∏Ä‰∫õÁ±ªÊàñËÄÖÊé•Âè£Â±ÇÊ¨°ÁöÑËÆøÈóÆ‰ø°ÊÅØÔºåÂåÖÊã¨ÔºöËøô‰∏™ClassÊòØÁ±ªËøòÊòØÊé•Âè£ÔºõÊòØÂê¶ÂÆö‰πâ‰∏∫publicÁ±ªÂûãÔºõÊòØÂê¶ÂÆö‰πâ‰∏∫abstractÁ±ªÂûãÔºõÂ¶ÇÊûúÊòØÁ±ªÁöÑËØùÔºåÊòØÂê¶Ë¢´Â£∞Êòé‰∏∫finalÁ≠â„ÄÇ 5. Á±ªÁ¥¢Âºï„ÄÅ Áà∂Á±ªÁ¥¢Âºï‰∏éÊé•Âè£Á¥¢ÂºïÈõÜÂêàÁ±ªÁ¥¢ÂºïÔºàthis_classÔºâÂíåÁà∂Á±ªÁ¥¢ÂºïÔºàsuper_classÔºâÈÉΩÊòØ‰∏Ä‰∏™u2Á±ªÂûãÁöÑÊï∞ÊçÆÔºåËÄåÊé•Âè£Á¥¢ÂºïÈõÜÂêàÔºàinterfacesÔºâÊòØ‰∏ÄÁªÑu2Á±ªÂûãÁöÑÊï∞ÊçÆÁöÑÈõÜÂêàÔºåClassÊñá‰ª∂‰∏≠Áî±Ëøô‰∏âÈ°πÊï∞ÊçÆÊù•Á°ÆÂÆöËøô‰∏™Á±ªÁöÑÁªßÊâøÂÖ≥Á≥ª„ÄÇ Á±ªÁ¥¢ÂºïÁî®‰∫éÁ°ÆÂÆöËøô‰∏™Á±ªÁöÑÂÖ®ÈôêÂÆöÂêçÔºåÁà∂Á±ªÁ¥¢ÂºïÁî®‰∫éÁ°ÆÂÆöËøô‰∏™Á±ªÁöÑÁà∂Á±ªÁöÑÂÖ®ÈôêÂÆöÂêç„ÄÇ Áî±‰∫éJavaËØ≠Ë®Ä‰∏çÂÖÅËÆ∏Â§öÈáçÁªßÊâøÔºåÊâÄ‰ª•Áà∂Á±ªÁ¥¢ÂºïÂè™Êúâ‰∏Ä‰∏™ÔºåÈô§‰∫Üjava.lang.Object‰πãÂ§ñÔºåÊâÄÊúâÁöÑJavaÁ±ªÈÉΩÊúâÁà∂Á±ªÔºåÂõ†Ê≠§Èô§‰∫Üjava.lang.ObjectÂ§ñÔºåÊâÄÊúâJavaÁ±ªÁöÑÁà∂Á±ªÁ¥¢ÂºïÈÉΩ‰∏ç‰∏∫0„ÄÇ Êé•Âè£Á¥¢ÂºïÈõÜÂêàÂ∞±Áî®Êù•ÊèèËø∞Ëøô‰∏™Á±ªÂÆûÁé∞‰∫ÜÂì™‰∫õÊé•Âè£ÔºåËøô‰∫õË¢´ÂÆûÁé∞ÁöÑÊé•Âè£Â∞ÜÊåâimplementsËØ≠Âè•ÔºàÂ¶ÇÊûúËøô‰∏™Á±ªÊú¨Ë∫´ÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåÂàôÂ∫îÂΩìÊòØextendsËØ≠Âè•ÔºâÂêéÁöÑÊé•Âè£È°∫Â∫è‰ªéÂ∑¶Âà∞Âè≥ÊéíÂàóÂú®Êé•Âè£Á¥¢ÂºïÈõÜÂêà‰∏≠„ÄÇ Á±ªÁ¥¢Âºï„ÄÅ Áà∂Á±ªÁ¥¢ÂºïÂíåÊé•Âè£Á¥¢ÂºïÈõÜÂêàÈÉΩÊåâÈ°∫Â∫èÊéíÂàóÂú®ËÆøÈóÆÊ†áÂøó‰πãÂêéÔºåÁ±ªÁ¥¢ÂºïÂíåÁà∂Á±ªÁ¥¢ÂºïÁî®‰∏§‰∏™u2Á±ªÂûãÁöÑÁ¥¢ÂºïÂÄºË°®Á§∫ÔºåÂÆÉ‰ª¨ÂêÑËá™ÊåáÂêë‰∏Ä‰∏™Á±ªÂûã‰∏∫CONSTANT_Class_infoÁöÑÁ±ªÊèèËø∞Á¨¶Â∏∏ÈáèÔºåÈÄöËøáCONSTANT_Class_infoÁ±ªÂûãÁöÑÂ∏∏Èáè‰∏≠ÁöÑÁ¥¢ÂºïÂÄºÂèØ‰ª•ÊâæÂà∞ÂÆö‰πâÂú®CONSTANT_Utf8_infoÁ±ªÂûãÁöÑÂ∏∏Èáè‰∏≠ÁöÑÂÖ®ÈôêÂÆöÂêçÂ≠óÁ¨¶‰∏≤„ÄÇ ÂØπ‰∫éÊé•Âè£Á¥¢ÂºïÈõÜÂêàÔºåÂÖ•Âè£ÁöÑÁ¨¨‰∏ÄÈ°π‚Äî‚Äîu2Á±ªÂûãÁöÑÊï∞ÊçÆ‰∏∫Êé•Âè£ËÆ°Êï∞Âô®Ôºàinterfaces_countÔºâÔºåË°®Á§∫Á¥¢ÂºïË°®ÁöÑÂÆπÈáè„ÄÇ Â¶ÇÊûúËØ•Á±ªÊ≤°ÊúâÂÆûÁé∞‰ªª‰ΩïÊé•Âè£ÔºåÂàôËØ•ËÆ°Êï∞Âô®ÂÄº‰∏∫0ÔºåÂêéÈù¢Êé•Âè£ÁöÑÁ¥¢ÂºïË°®‰∏çÂÜçÂç†Áî®‰ªª‰ΩïÂ≠óËäÇ„ÄÇ 6. Â≠óÊÆµË°®ÈõÜÂêàÂ≠óÊÆµË°®Ôºàfield_infoÔºâÁî®‰∫éÊèèËø∞Êé•Âè£ÊàñËÄÖÁ±ª‰∏≠Â£∞ÊòéÁöÑÂèòÈáè„ÄÇÂÖ∂ÂÆû‰πüÂ∞±ÊòØÁ±ªÁöÑÈùôÊÄÅÂèòÈáèÊàñËÄÖÊòØÂÆû‰æãÊàêÂëòÂèòÈáè„ÄÇ Â≠óÊÆµÔºàfieldÔºâÂåÖÊã¨Á±ªÁ∫ßÂèòÈáè‰ª•ÂèäÂÆû‰æãÁ∫ßÂèòÈáèÔºå‰ΩÜ‰∏çÂåÖÊã¨Âú®ÊñπÊ≥ïÂÜÖÈÉ®Â£∞ÊòéÁöÑÂ±ÄÈÉ®ÂèòÈáè„ÄÇ Êàë‰ª¨ÂèØ‰ª•ÊÉ≥‰∏ÄÊÉ≥Âú®Java‰∏≠ÊèèËø∞‰∏Ä‰∏™Â≠óÊÆµÂèØ‰ª•ÂåÖÂê´‰ªÄ‰πà‰ø°ÊÅØÔºüÂèØ‰ª•ÂåÖÊã¨ÁöÑ‰ø°ÊÅØÊúâÔºöÂ≠óÊÆµÁöÑ‰ΩúÁî®ÂüüÔºàpublic„ÄÅ private„ÄÅ protected‰øÆÈ•∞Á¨¶Ôºâ„ÄÅ ÊòØÂÆû‰æãÂèòÈáèËøòÊòØÁ±ªÂèòÈáèÔºàstatic‰øÆÈ•∞Á¨¶Ôºâ„ÄÅ ÂèØÂèòÊÄßÔºàfinalÔºâ„ÄÅ Âπ∂ÂèëÂèØËßÅÊÄßÔºàvolatile‰øÆÈ•∞Á¨¶ÔºåÊòØÂê¶Âº∫Âà∂‰ªé‰∏ªÂÜÖÂ≠òËØªÂÜôÔºâ„ÄÅ ÂèØÂê¶Ë¢´Â∫èÂàóÂåñÔºàtransient‰øÆÈ•∞Á¨¶Ôºâ„ÄÅ Â≠óÊÆµÊï∞ÊçÆÁ±ªÂûãÔºàÂü∫Êú¨Á±ªÂûã„ÄÅ ÂØπË±°„ÄÅ Êï∞ÁªÑÔºâ„ÄÅ Â≠óÊÆµÂêçÁß∞„ÄÇ ‰∏äËø∞Ëøô‰∫õ‰ø°ÊÅØ‰∏≠ÔºåÂêÑ‰∏™‰øÆÈ•∞Á¨¶ÈÉΩÊòØÂ∏ÉÂ∞îÂÄºÔºåË¶Å‰πàÊúâÊüê‰∏™‰øÆÈ•∞Á¨¶ÔºåË¶Å‰πàÊ≤°ÊúâÔºåÂæàÈÄÇÂêà‰ΩøÁî®Ê†áÂøó‰ΩçÊù•Ë°®Á§∫„ÄÇ ËÄåÂ≠óÊÆµÂè´‰ªÄ‰πàÂêçÂ≠ó„ÄÅ Â≠óÊÆµË¢´ÂÆö‰πâ‰∏∫‰ªÄ‰πàÊï∞ÊçÆÁ±ªÂûãÔºåËøô‰∫õÈÉΩÊòØÊó†Ê≥ïÂõ∫ÂÆöÁöÑÔºåÂè™ËÉΩÂºïÁî®Â∏∏ÈáèÊ±†‰∏≠ÁöÑÂ∏∏ÈáèÊù•ÊèèËø∞„ÄÇ 7. ÊñπÊ≥ïË°®ÈõÜÂêàÂíåÂ≠óÊÆµË°®Âü∫Êú¨‰∏ÄÊ†∑Ôºå‰ªÖÂú®ËÆøÈóÆÊ†áÂøóÂíåÂ±ûÊÄßË°®ÈõÜÂêàÁöÑÂèØÈÄâÈ°πÊúâ‰∫õÂå∫Âà´„ÄÇÂ∞±ÊòØÁúãÊñπÊ≥ïÊúâÊ≤°ÊúâË¢´ synchronized„ÄÅabstract„ÄÅfinalÁ≠â‰øÆÈ•∞„ÄÇ 8. Â±ûÊÄßË°®ÈõÜÂêàÂ±ûÊÄßË°®ÈõÜÂêà‰∏≠ÂåÖÂê´‰∫ÜÂ§ßÈáèÁöÑÊï∞ÊçÆ‰ø°ÊÅØÔºå‰∏äÈù¢ÁöÑÊâÄÊúâÁ±ªÂûãÈÉΩÊúâÂçÅÂàÜ‰∏•Ê†ºÈ°∫Â∫èÔºåÈïøÂ∫¶ÔºåÂ§ßÂ∞è„ÄÇËÄåÂ±ûÊÄßË°®‰∏≠Â∞±Ê≤°ÊúâÈÇ£‰πà‰∏•Ê†º‰∫ÜÔºåÊàë‰ª¨ÁºñÂÜôÁöÑÊúÄÂ§öÁöÑCodeÂ∞±Â≠òÊîæÂú®Â±ûÊÄßË°®ÈõÜÂêà‰∏≠ÁöÑCODEË°®‰∏≠Ôºå‰∏ÄÂÖ±Êúâ21È°πÊØîÂ¶ÇËøòÂåÖÂê´ÔºöExceptionË°®Á≠âÁ≠â„ÄÇÂÖ∑‰ΩìÁöÑÊØè‰∏Ä‰∏™È°πÈÉΩÊòØÊúâÊÑè‰πâÁöÑÔºåÊúâÁÇπÂ§öÁÆÄÂçïÁöÑ‰ªãÁªç‰∏Ä‰∏ã‰∏ªË¶ÅÁöÑÔºö 1„ÄÅCode Â±ûÊÄß JavaÊñπÊ≥ï‰ΩìÈáåÈù¢ÁöÑ‰ª£Á†ÅÁªèËøáJavacÁºñËØë‰πãÂêéÔºåÊúÄÁªàÂèò‰∏∫Â≠óËäÇÁ†ÅÊåá‰ª§Â≠òÂÇ®Âú®CodeÂ±ûÊÄßÂÜÖÔºåCodeÂ±ûÊÄßÂá∫Áé∞Âú®ÊñπÊ≥ïË°®ÁöÑÂ±ûÊÄßÈõÜÂêà‰∏≠Ôºå‰ΩÜÂú®Êé•Âè£ÊàñÊäΩË±°Á±ª‰∏≠Â∞±‰∏çÂ≠òÂú®CodeÂ±ûÊÄß„ÄÇ 2„ÄÅExceptionÂ±ûÊÄß Âàó‰∏æÂá∫ÊñπÊ≥ï‰∏≠ÂèØËÉΩÊäõÂá∫ÁöÑÂèóÊü•ÂºÇÂ∏∏„ÄÇ 3„ÄÅLineNumberTableÂ±ûÊÄß ÊèèËø∞JavaÊ∫êÁ†ÅË°åÂè∑‰∏éÂ≠óËäÇÁ†ÅË°åÂè∑ÔºàÂ≠óËäÇÁ†ÅÁöÑÂÅèÁßªÈáèÔºâ‰πãÈó¥ÁöÑÂØπÂ∫îÂÖ≥Á≥ª„ÄÇ‰∏ªË¶ÅÊòØÂ¶ÇÊûúÊäõÂá∫ÂºÇÂ∏∏Êó∂ÔºåÁºñËØëÂô®‰ºöÊòæÁ§∫Ë°åÂè∑ÔºåÂ∞±ÊòØËøô‰∏™Â±ûÊÄßÁöÑ‰ΩúÁî®„ÄÇ 4„ÄÅLocalVariableTableÂ±ûÊÄß ÊèèËø∞Ê†àÂ∏ß‰∏≠Â±ÄÈÉ®ÂèòÈáèË°®‰∏≠ÁöÑÂèòÈáè‰∏éJavaÊ∫êÁ†Å‰∏≠ÂÆö‰πâÁöÑÂèòÈáè‰πãÈó¥ÁöÑÂÖ≥Á≥ª„ÄÇÁî®Â§ÑÂú®‰∫éÂΩìÂà´‰∫∫‰ΩøÁî®Ëøô‰∏™ÊñπÊ≥ïÊòØËÉΩÂ§üÊòæÁ§∫Âá∫ÊñπÊ≥ïÂÆö‰πâÁöÑÂèÇÊï∞Âêç„ÄÇ 5„ÄÅSourseFileÂ±ûÊÄß ËÆ∞ÂΩïÁîüÊàêËøô‰∏™ClassÊñá‰ª∂ÁöÑÊ∫êÁ†ÅÊñá‰ª∂ÂêçÁß∞ÔºåÊäõÂá∫ÂºÇÂ∏∏Êó∂ËÉΩÂ§üÊòæÁ§∫ÈîôËØØ‰ª£Á†ÅÊâÄÂ±ûÁöÑÊñá‰ª∂Âêç„ÄÇ 6„ÄÅConstantValueÂ±ûÊÄß ÈÄöÁü•ËôöÊãüÊú∫Ëá™Âä®‰∏∫ÈùôÊÄÅÂèòÈáèËµãÂÄºÔºåÂè™ÊúâË¢´staticÂ≠óÁ¨¶‰øÆÈ•∞ÁöÑÂèòÈáèÔºàÁ±ªÂèòÈáèÔºâÊâçÂèØ‰ª•ÊúâËøôÈ°πÂ±ûÊÄß„ÄÇ 7„ÄÅInnerClassÂ±ûÊÄß Áî®‰∫éËÆ∞ÂΩïÂÜÖÈÉ®Á±ª‰∏éÂÆø‰∏ªÁ±ª‰πãÈó¥ÁöÑÂÖ≥ËÅî„ÄÇ 8„ÄÅDeprecatedÂíåSyntheticÂ±ûÊÄß Ëøô‰∏§‰∏™ÈÉΩÊòØÊ†áÂøóÁ±ªÂûãÁöÑÂ∏ÉÂ∞îÂ±ûÊÄßÔºåDeprecatedË°®Á§∫‰∏çÂÜçÊé®Ëçê‰ΩøÁî®ÔºåÊ≥®Ëß£@deprecatedSyntheticË°®Á§∫Ê≠§Â≠óÊÆµÊàñÊñπÊ≥ïÊòØÁî±ÁºñËØëÂô®Ëá™Ë°åÊ∑ªÂä†ÁöÑ„ÄÇ Demo‰∏∫‰∫ÜÊõ¥Â•ΩÁöÑÁêÜËß£ Class ÁöÑÁªÑÊàêÈÉ®ÂàÜÔºåÊàëÂÜ≥ÂÆöÂÜô‰∏Ä‰∏™ demoÔºåËÆ©Êàë‰ª¨‰∏ÄÊ≠•Ê≠•Êù•ÂàÜÊûê‰∏Ä‰∏ã„ÄÇ Ê∫ê‰ª£Á†Å12345678910111213141516package JVM;public class SubClass extends SuperClass &#123; @Override public void A()&#123; super.A(); System.out.println(2222); &#125; public static void main(String[] args) &#123; test_heap_outOfMemory t = new test_heap_outOfMemory(); t.C(); SubClass subClass = new SubClass(); subClass.A(); &#125;&#125; Byte Code viewer123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869// class version 52.0 (52)// access flags 0x21public class JVM/SubClass extends JVM/SuperClass &#123; // compiled from: SubClass.java // access flags 0x1 public &lt;init&gt;()V L0 LINENUMBER 3 L0 ALOAD 0 INVOKESPECIAL JVM/SuperClass.&lt;init&gt; ()V RETURN L1 LOCALVARIABLE this LJVM/SubClass; L0 L1 0 MAXSTACK = 1 MAXLOCALS = 1 // access flags 0x1 public A()V L0 LINENUMBER 6 L0 ALOAD 0 INVOKESPECIAL JVM/SuperClass.A ()V L1 LINENUMBER 7 L1 GETSTATIC java/lang/System.out : Ljava/io/PrintStream; SIPUSH 2222 INVOKEVIRTUAL java/io/PrintStream.println (I)V L2 LINENUMBER 8 L2 RETURN L3 LOCALVARIABLE this LJVM/SubClass; L0 L3 0 MAXSTACK = 2 MAXLOCALS = 1 // access flags 0x9 public static main([Ljava/lang/String;)V L0 LINENUMBER 11 L0 NEW JVM/test_heap_outOfMemory DUP INVOKESPECIAL JVM/test_heap_outOfMemory.&lt;init&gt; ()V ASTORE 1 L1 LINENUMBER 12 L1 ALOAD 1 INVOKEVIRTUAL JVM/test_heap_outOfMemory.C ()V L2 LINENUMBER 13 L2 NEW JVM/SubClass DUP INVOKESPECIAL JVM/SubClass.&lt;init&gt; ()V ASTORE 2 L3 LINENUMBER 14 L3 ALOAD 2 INVOKEVIRTUAL JVM/SubClass.A ()V L4 LINENUMBER 17 L4 RETURN L5 LOCALVARIABLE args [Ljava/lang/String; L0 L5 0 LOCALVARIABLE t LJVM/test_heap_outOfMemory; L1 L5 1 LOCALVARIABLE subClass LJVM/SubClass; L3 L5 2 MAXSTACK = 2 MAXLOCALS = 3&#125; jsclasslibÊàë‰ª¨‰ΩøÁî® jsclasslib Ëøô‰∏™ÂèØËßÜÂåñÁïåÈù¢Êù•Áúã‰∏Ä‰∏ãÂÖ∑‰ΩìÁöÑ class ‰ø°ÊÅØ„ÄÇ È¶ñÂÖàÂèØ‰ª•ÁúãÂà∞Ôºå jdkÁöÑÁâàÊú¨ÁöÑ‰∏ªÁâàÊú¨Âè∑ÊòØ 1.8ÔºåÊ¨°ÁâàÊú¨Âè∑ÊòØ 0ÔºåÂ∏∏ÈáèÊ±†ÁöÑÊÄªÊï∞ÊòØ34ÔºåËÆøÈóÆÊ†áÂøóÔºåÂç≥ËØ•Á±ªÊòØ public or defaultÔºåÁÑ∂ÂêéÂ∑¶ËæπÂØπÂ∫îÁöÑÊúâÂ∏∏ÈáèÊ±†„ÄÅÊé•Âè£Ë°®„ÄÅÂ≠óÊÆµË°®„ÄÅÂ±ûÊÄßË°®„ÄÅÊñπÊ≥ïË°®„ÄÇ ËØ¶ÁªÜÂàÜÊûêÂèØ‰ª•ÁúãËøô‰∏™Ôºöhttps://juejin.im/post/5b5ac6d76fb9a04f8d6bc7d6#heading-29 Á¨¨‰∏ÉÁ´† ËôöÊãüÊú∫Á±ªÂä†ËΩΩÊú∫Âà∂ ÂèÇËÄÉÔºöhttps://juejin.im/post/5ae2d580f265da0b851c95ea#heading-17 1. Ê¶ÇËø∞Âú®Á¨¨ÂÖ≠Á´†ÔºåËÆ≤Âà∞‰∫Ü Class Êñá‰ª∂ÔºåÈÇ£Êàë‰ª¨ÊòØÂ¶Ç‰ΩïÂ∞Ü Class Êñá‰ª∂Âä†ËΩΩÂà∞ËôöÊãüÊú∫ÔºåÁÑ∂ÂêéËøêË°åÂíå‰ΩøÁî®Âë¢Ôºü 1.1 ËôöÊãüÊú∫Á±ªÂä†ËΩΩÊú∫Âà∂ÁöÑÊ¶ÇÂøµËôöÊãüÊú∫ÊääÊèèËø∞Á±ªÁöÑÊï∞ÊçÆ‰ªéclassÊñá‰ª∂Âä†ËΩΩÂà∞ÂÜÖÂ≠òÔºåÂπ∂ÂØπÊï∞ÊçÆËøõË°åÊ†°È™å„ÄÅËΩ¨Êç¢Ëß£ÊûêÂíåÂàùÂßãÂåñ„ÄÇÊúÄÁªàÂΩ¢ÊàêÂèØ‰ª•Ë¢´ËôöÊãüÊú∫ÊúÄÁõ¥Êé•‰ΩøÁî®ÁöÑjavaÁ±ªÂûãÁöÑËøáÁ®ãÂ∞±ÊòØËôöÊãüÊú∫ÁöÑÁ±ªÂä†ËΩΩÊú∫Âà∂„ÄÇ 1.2 JavaËØ≠Ë®ÄÁöÑÂä®ÊÄÅÂä†ËΩΩÂíåÂä®ÊÄÅËøûÊé•Âè¶Â§ñÈúÄË¶ÅÊ≥®ÊÑèÁöÑÂæàÈáçË¶ÅÁöÑ‰∏ÄÁÇπÊòØÔºöjavaËØ≠Ë®Ä‰∏≠Á±ªÂûãÁöÑÂä†ËΩΩËøûÊé•‰ª•ÂèäÂàùÂßãÂåñËøáÁ®ãÈÉΩÊòØÂú®Á®ãÂ∫èËøêË°åÊúüÈó¥ÂÆåÊàêÁöÑÔºåËøôÁßçÁ≠ñÁï•ËôΩÁÑ∂‰ºö‰ΩøÁ±ªÂä†ËΩΩÊó∂Á®çÂæÆÂ¢ûÂä†‰∏Ä‰∫õÊÄßËÉΩÂºÄÈîÄÔºå‰ΩÜÊòØ‰ºö‰∏∫javaÂ∫îÁî®Á®ãÂ∫èÊèê‰æõÈ´òÂ∫¶ÁöÑÁÅµÊ¥ªÊÄß„ÄÇjavaÈáåÂ§©ÁîüÂ∞±ÂèØ‰ª•Âä®ÊÄÅÊâ©Â±ïËØ≠Ë®ÄÁâπÊÄßÂ∞±ÊòØ‰æùËµñËøêË°åÊúüÈó¥Âä®ÊÄÅÂä†ËΩΩÂíåÂä®ÊÄÅËøûÊé•Ëøô‰∏™ÁâπÁÇπÂÆûÁé∞ÁöÑ„ÄÇÊØîÂ¶ÇÔºåÂ¶ÇÊûúÁºñÂÜô‰∏Ä‰∏™Èù¢ÂêëÊé•Âè£ÁöÑÁ®ãÂ∫èÔºåÂèØ‰ª•Á≠âÂà∞ËøêË°åÊó∂ÂÜçÊåáÂÆöÂÖ∂ÂÖ∑‰ΩìÂÆûÁé∞Á±ª„ÄÇ Ê≥®ÊÑèÔºå‰∏ãÊñáÁöÑ Class Êñá‰ª∂ÂÖ∂ÂÆûÊòØÊåá‰∏Ä‰∏≤‰∫åËøõÂà∂ÁöÑÂ≠óËäÇÊµÅÔºåÂèØ‰ª•Ê≤°ÊúâÂøÖË¶ÅÊòØÊñá‰ª∂ÂΩ¢ÂºèÔºåÂêåÊó∂ÔºåÊØè‰∏™ Class Êñá‰ª∂ÈÉΩÂèØËÉΩ‰ª£Ë°®‰∏Ä‰∏™Á±ªÊàñÊé•Âè£„ÄÇ 2. Á±ªÂä†ËΩΩÊó∂Êú∫Á±ªÁöÑÊï¥‰∏™ÁîüÂëΩÂë®ÊúüÂåÖÊã¨Ôºö Âä†ËΩΩ(Loading) ‚Äî‚Äî È™åËØÅ(Verification) ‚Äî‚Äî ÂáÜÂ§á(Preparation) ‚Äî‚Äî ÂàùÂßãÂåñ(Initialization) ‚Äî‚Äî- ‰ΩøÁî®(Using) ‚Äî‚Äî Âç∏ËΩΩ(Unloading) ÔºåÂÖ∂‰∏≠ È™åËØÅ„ÄÅÂáÜÂ§á„ÄÅËß£Êûê ÁªüÁß∞‰∏∫ËøûÊé•(Linking) ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂè™ÊúâÂä†ËΩΩ„ÄÅÈ™åËØÅ„ÄÅÂáÜÂ§á„ÄÅÂàùÂßãÂåñ„ÄÅÂç∏ËΩΩËøô 5 ‰∏™Èò∂ÊÆµÁöÑÈ°∫Â∫èÊòØÁ°ÆÂÆöÁöÑÔºåÂΩìÁÑ∂Á°ÆÂÆöÁöÑ‰πüÂè™ÊòØÂºÄÂßãÁöÑÊó∂Èó¥ÔºåÂõ†‰∏∫Ëøô‰∫õÈò∂ÊÆµÈÉΩÊòØ‰∫íÁõ∏‰∫§ÂèâÂú∞Ê∑∑ÂêàËøõË°åÔºåÈÄöÂ∏∏‰ºöÂú®‰∏Ä‰∏™Èò∂ÊÆµÊâßË°åÁöÑËøáÁ®ã‰∏≠ÂéªÂØπË∞ÉÁî®ÂíåÊøÄÊ¥ªÂè¶Â§ñ‰∏Ä‰∏™Èò∂ÊÆµ„ÄÇËÄåËß£ÊûêÈò∂ÊÆµÔºåÂèØ‰ª•Âú®ÂàùÂßãÂåñÂêéÂÜçÂºÄÂßãÔºåËøôÂ∞±ÊòØ‰∏∫‰∫ÜÊîØÊåÅ Java ÁöÑËøêË°åÊó∂ÁªëÂÆö„ÄÇ ËôöÊãüÊú∫ jvm Âπ∂Ê≤°ÊúâËßÑËåÉ‰ªÄ‰πàÊó∂ÂÄôÂºÄÂßãÂä†ËΩΩÔºå‰ΩÜÊòØËßÑÂÆö‰∫ÜÂàùÂßãÂåñÁöÑÊó∂Èó¥ÔºåÊúâ‰∏îÂè™Êúâ4ÁßçÊÉÖÂÜµÊâç‰ºöÁ´ãÂç≥ÂØπÁ±ªËøõË°å‚ÄúÂàùÂßãÂåñ‚Äù(Ëá™ÁÑ∂Âä†ËΩΩ„ÄÅÈ™åËØÅ„ÄÅÂáÜÂ§áÈÉΩË¶ÅÂú®‰πãÂâçÂºÄÂßã)Ôºö ‰ΩøÁî® new ÂÖ≥ÈîÆÂ≠óÂÆû‰æãÂåñÂØπË±°ÁöÑÊó∂ÂÄô„ÄÅËØªÂèñÊàñËÆæÁΩÆ‰∏Ä‰∏™Á±ªÁöÑÈùôÊÄÅÂ≠óÊÆµÁöÑÊó∂ÂÄôÔºàÊ≥®ÊÑèÔºöfinal‰øÆÈ•∞Âπ∂‰∏îÂú®ÁºñËØëÂâçÈó¥Â∞±Â∑≤ÁªèÂ∞ÜÁªìÊûúÊîæÁΩÆÂú®‰∫ÜÂ∏∏ÈáèÊ±†‰∏≠ÁöÑÈùôÊÄÅÂ≠óÊÆµÈô§Â§ñÔºâÔºå‰ª•ÂèäË∞ÉÁî®‰∏Ä‰∏™Á±ªÁöÑÈùôÊÄÅÊñπÊ≥ïÁöÑÊó∂ÂÄôÔºõ ‰ΩøÁî®java.lang.reflectÂåÖÁöÑÊñπÊ≥ïÂØπÁ±ªËøõË°åÂèçÂ∞ÑË∞ÉÁî®ÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÁ±ªÊ≤°ÊúâÂàùÂßãÂåñÔºåÂàôÈúÄË¶ÅÂÖàËß¶ÂèëÂÖ∂ÂàùÂßãÂåñ„ÄÇ„ÄåÂèçÂ∞ÑÁöÑËøáÁ®ãÊàëÂú®Âè¶Â§ñ‰∏ÄÁØáÊñáÁ´†Â∑≤ÁªèËÆ≤Ëøá‰∫Ü„ÄÇ„Äç ÂΩìÂàùÂßãÂåñ‰∏Ä‰∏™Á±ªÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÂèëÁé∞ÂÖ∂Áà∂Á±ªÊ≤°ÊúâË¢´ÂàùÂßãÂåñÂ∞±‰ºöÂÖàÂàùÂßãÂåñÂÆÉÁöÑÁà∂Á±ª„ÄÇ ÂΩìËôöÊãüÊú∫ÂêØÂä®ÁöÑÊó∂ÂÄôÔºåÁî®Êà∑ÈúÄË¶ÅÊåáÂÆö‰∏Ä‰∏™Ë¶ÅÊâßË°åÁöÑ‰∏ªÁ±ªÔºàÂ∞±ÊòØÂåÖÂê´main()ÊñπÊ≥ïÁöÑÈÇ£‰∏™Á±ªÔºâÔºåËôöÊãüÊú∫‰ºöÂÖàÂàùÂßãÂåñËøô‰∏™Á±ªÔºõ ‰ª•‰∏ä 4 ÁßçÁß∞‰πã‰∏∫ÂØπÁ±ªÁöÑ‰∏ªÂä®‰ΩøÁî®Ôºå‰ºöËß¶ÂèëÁõ∏Â∫îÁöÑÂàùÂßãÂåñÔºåËÄåÊØîËæÉÂÖ∏ÂûãÂá†ÁßçË¢´Âä®‰ΩøÁî®Ôºå‰∏ç‰ºöËß¶ÂèëÂàùÂßãÂåñÁöÑÊÉÖÂÜµÊúâÔºö ÈÄöËøáÂ≠êÁ±ªËÆøÈóÆÁà∂Á±ªÁöÑ static ÂèòÈáèÔºå‰∏ç‰ºöÂºïËµ∑Â≠êÁ±ªÁöÑÂàùÂßãÂåñÔºõ ÂÆö‰πâÂºïÁî®Êï∞ÁªÑÔºå‰∏ç‰ºöÂàùÂßãÂåñÁ±ªÔºõ 12Obj[] arrays = new Obj[10]; ‰∏äÈù¢ËØ¥ÁöÑÔºåÁî® final ‰øÆÈ•∞Âπ∂‰∏îÂú®ÁºñËØëÊúüÈó¥(ÁîüÊàê.classÊñá‰ª∂ÊúüÈó¥)Â∞±Â∑≤ÁªèÂ∞ÜÁªìÊûúÂÜôÂÖ•‰∫ÜÂ∏∏ÈáèÊ±†‰∏≠„ÄÇ ÂΩìÁÑ∂ÔºåÂØπ‰∫éÊé•Âè£Êù•ËØ¥Ôºå‰∏éÁ±ªÁõ∏ÊØîÂú®ÂàùÂßãÂåñÈò∂ÊÆµ‰πüÁï•Êúâ‰∏çÂêåÔºà‰∏ªÂä®‰ΩøÁî®Âè™Êúâ3ÁßçÊÉÖÂÜµÔºâÔºåÂ∞±ÊòØÂú®ÂàùÂßãÂåñ‰∏Ä‰∏™Êé•Âè£Êó∂ÔºåÂ¶ÇÊûúÂèëÁé∞Áà∂‰∫≤Êé•Âè£Ê≤°ÊúâÂàùÂßãÂåñÔºåÂπ∂‰∏ç‰ºöÂéªÂàùÂßãÂåñÁà∂‰∫≤Êé•Âè£ÔºåËÄåÊòØÁ≠âÁî®Âà∞‰∫ÜÊâç‰ºöÂéªÂàùÂßãÂåñ„ÄÇ 3. Á±ªÂä†ËΩΩËøáÁ®ãÊé•‰∏ãÊù•ËØ¶ÁªÜËÆ≤‰∏Ä‰∏ãÁ±ªÂä†ËΩΩÁöÑÂÖ®ËøáÁ®ãÔºå‰πüÂ∞±ÊòØÂä†ËΩΩ„ÄÅÈ™åËØÅ„ÄÅÂáÜÂ§á„ÄÅËß£Êûê„ÄÅÂàùÂßãÂåñËøô 5 ‰∏™Èò∂ÊÆµÁöÑËøáÁ®ã„ÄÇ 3.1 Âä†ËΩΩ‚ÄúÂä†ËΩΩ‚Äù ÊòØ ‚ÄúÁ±ªÂä†ËΩΩ‚Äù ËøáÁ®ãÁöÑ‰∏Ä‰∏™Èò∂ÊÆµÔºåÂàá‰∏çÂèØÂ∞Ü‰∫åËÄÖÊ∑∑Ê∑Ü„ÄÇ Âä†ËΩΩÈò∂ÊÆµÁî±‰∏â‰∏™Âü∫Êú¨Âä®‰ΩúÁªÑÊàêÔºö ÈÄöËøáÁ±ªÂûãÁöÑÂÆåÂÖ®ÈôêÂÆöÂêçÔºå‰∫ßÁîü‰∏Ä‰∏™‰ª£Ë°®ËØ•Á±ªÂûãÁöÑ‰∫åËøõÂà∂Êï∞ÊçÆÊµÅÔºàÊ†πÊú¨Ê≤°ÊúâÊåáÊòé‰ªéÂì™ÈáåËé∑Âèñ„ÄÅÊÄéÊ†∑Ëé∑ÂèñÔºåÂèØ‰ª•ËØ¥‰∏Ä‰∏™ÈùûÂ∏∏ÂºÄÊîæÁöÑÂπ≥Âè∞‰∫ÜÔºâÔºõ Ëß£ÊûêËøô‰∏™‰∫åËøõÂà∂Êï∞ÊçÆÊµÅ‰∏∫ÊñπÊ≥ïÂå∫ÂÜÖÁöÑËøêË°åÊó∂Êï∞ÊçÆÁªìÊûÑÔºõ Âú® Java Â†Ü‰∏≠ÂàõÂª∫‰∏Ä‰∏™Ë°®Á§∫ËØ•Á±ªÂûãÁöÑjava.lang.ClassÁ±ªÁöÑÂÆû‰æãÔºå‰Ωú‰∏∫ÊñπÊ≥ïÂå∫Ëøô‰∏™Á±ªÁöÑÂêÑÁßçÊï∞ÊçÆÁöÑËÆøÈóÆÂÖ•Âè£„ÄÇ ÈÄöËøáÁ±ªÂûãÁöÑÂÆåÂÖ®ÈôêÂÆöÂêçÔºå‰∫ßÁîü‰∏Ä‰∏™‰ª£Ë°®ËØ•Á±ªÂûãÁöÑ‰∫åËøõÂà∂Êï∞ÊçÆÊµÅÁöÑÂá†ÁßçÂ∏∏ËßÅÂΩ¢ÂºèÔºö ‰ªézipÂåÖ‰∏≠ËØªÂèñÔºåÊàê‰∏∫Êó•ÂêéJAR„ÄÅEAR„ÄÅWARÊ†ºÂºèÁöÑÂü∫Á°ÄÔºõ ‰ªéÁΩëÁªú‰∏≠Ëé∑ÂèñÔºåËøôÁßçÂú∫ÊôØÊúÄÂÖ∏ÂûãÁöÑÂ∫îÁî®Â∞±ÊòØAppletÔºõ ËøêË°åÊó∂ËÆ°ÁÆóÁîüÊàêÔºåËøôÁßçÂú∫ÊôØÊúÄÂ∏∏Áî®ÁöÑÂ∞±ÊòØÂä®ÊÄÅ‰ª£ÁêÜÊäÄÊúØ‰∫ÜÔºõ Áî±ÂÖ∂‰ªñÊñá‰ª∂ÁîüÊàêÔºåÊØîÂ¶ÇÊàë‰ª¨ÁöÑJSP„ÄÇ 3.2 È™åËØÅÈ™åËØÅÊòØËøûÊé•Èò∂ÊÆµÁöÑÁ¨¨‰∏ÄÊ≠•ÔºåËøô‰∏ÄÈò∂ÊÆµÁöÑÁõÆÁöÑÊòØ‰∏∫‰∫ÜÁ°Æ‰øùClassÊñá‰ª∂ÁöÑÂ≠óËäÇÊµÅ‰∏≠ÂåÖÂê´ÁöÑ‰ø°ÊÅØÁ¨¶ÂêàÂΩìÂâçËôöÊãüÊú∫ÁöÑË¶ÅÊ±ÇÔºåÂπ∂‰∏î‰∏ç‰ºöÂç±ÂÆ≥ËôöÊãüÊú∫Ëá™Ë∫´ÁöÑÂÆâÂÖ®„ÄÇ ËôöÊãüÊú∫Â¶ÇÊûú‰∏çÊ£ÄÊü•ËæìÂÖ•ÁöÑÂ≠óËäÇÊµÅÔºåÂπ∂ÂØπÂÖ∂ÂÆåÂÖ®‰ø°‰ªªÁöÑËØùÔºåÂæàÂèØËÉΩ‰ºöÂõ†‰∏∫ËΩΩÂÖ•‰∫ÜÊúâÂÆ≥ÁöÑÂ≠óËäÇÊµÅËÄåÂØºËá¥Á≥ªÁªüÂ¥©Ê∫ÉÔºåÊâÄ‰ª•È™åËØÅÊòØËôöÊãüÊú∫ÂØπËá™Ë∫´‰øùÊä§ÁöÑ‰∏ÄÈ°πÈáçË¶ÅÂ∑•‰Ωú„ÄÇËøô‰∏™Èò∂ÊÆµÊòØÂê¶‰∏•Ë∞®ÔºåÁõ¥Êé•ÂÜ≥ÂÆö‰∫ÜjavaËôöÊãüÊú∫ÊòØÂê¶ËÉΩÊâøÂèóÊÅ∂ÊÑè‰ª£Á†ÅÁöÑÊîªÂáª„ÄÇ ‰ªéÊï¥‰Ωì‰∏äÁúãÔºåÈ™åËØÅÈò∂ÊÆµÂ§ßËá¥‰∏ä‰ºöÂÆåÊàê4‰∏™Èò∂ÊÆµÁöÑÊ†°È™åÂ∑•‰ΩúÔºöÊñá‰ª∂Ê†ºÂºèÈ™åËØÅ„ÄÅÂÖÉÊï∞ÊçÆÈ™åËØÅ„ÄÅÂ≠óËäÇÁ†ÅÈ™åËØÅ„ÄÅÁ¨¶Âè∑ÂºïÁî®È™åËØÅ„ÄÇ Êñá‰ª∂Ê†ºÂºèÈ™åËØÅ„ÄÇ‰∏ªË¶ÅÊòØÁ°Æ‰øùËæìÂÖ•ÁöÑÂ≠óËäÇÊµÅËÉΩÂ§üÊ≠£Á°ÆÁöÑËß£ÊûêÂπ∂Â≠òÂÇ®‰∫éÊñπÊ≥ïÂå∫‰πã‰∏≠ÔºåËøôÈò∂ÊÆµÁöÑÈ™åËØÅÂü∫‰∫éÂ≠óËäÇÊµÅËøõË°åÔºåËØ•È™åËØÅÁªìÊùüÂêéÔºåÂ≠óËäÇÊµÅÂ∞±ËøõÂÖ•Âà∞‰∫ÜÂÜÖÂ≠ò‰∏≠ÁöÑÊñπÊ≥ïÂå∫ÔºåËøõË°åÂ≠òÂÇ®ÔºåÊâÄ‰ª•ÂêéÁª≠‰∏â‰∏™È™åËØÅÈò∂ÊÆµÂÖ®ÊòØÂü∫‰∫éÊñπÊ≥ïÂå∫ÁöÑÂ≠òÂÇ®ÁªìÊûÑÔºõ ÂÖÉÊï∞ÊçÆÈ™åËØÅ„ÄÇÁé∞Âú®ÂÖ∂ÂÆû jdk1.8 ‰πãÂêéÊ≤°ÊúâÊñπÊ≥ïÂå∫‰∫ÜÔºåÊîπÂêçÂè´ÂÅöÂÖÉÊï∞ÊçÆÂå∫„ÄÇËøô‰∏™Èò∂ÊÆµÊòØÂØπÂ≠óËäÇÁ†ÅÊèèËø∞ÁöÑ‰ø°ÊÅØËøõË°åËØ≠‰πâÂàÜÊûêÔºå‰øùËØÅÊòØ javaËßÑËåÉÁöÑ‰ø°ÊÅØÔºõ Â≠óËäÇÁ†ÅÈ™åËØÅ„ÄÇÈ™åËØÅ‰∏≠ÊúÄÂ§çÊùÇÁöÑÔºå‰∏ªË¶ÅÂ∑•‰ΩúÊòØËøõË°åÊï∞ÊçÆÊµÅÂíåÊéßÂà∂ÊµÅÂàÜÊûêÔºå‰øùËØÅÁ±ªÁöÑÊñπÊ≥ïÂú®ËøêË°åÊó∂‰∏ç‰ºöÂÅöÂá∫Âç±ÂÆ≥ËôöÊãüÊú∫ÂÆâÂÖ®ÁöÑË°å‰∏∫Ôºõ Á¨¶Âè∑ÂºïÁî®È™åËØÅ„ÄÇËøô‰∏™È™åËØÅ‰ºöÂèëÁîüÂú®ËôöÊãüÊú∫Â∞ÜÁ¨¶Âè∑ÂºïÁî®ËΩ¨Âåñ‰∏∫Áõ¥Êé•ÂºïÁî®ÁöÑÊó∂ÂÄôÔºå‰πüÂ∞±ÊòØÂú®Ëß£ÊûêËøáÁ®ã‰∏≠ÁöÑÂèëÁîüÔºåÂèØ‰ª•Áúã‰ΩúÊòØÂØπÁ±ªËá™Ë∫´‰ª•Â§ñÁöÑ‰ø°ÊÅØËøõË°åÂåπÈÖçÊÄßÁöÑÊ†°È™åÔºåÁ°Æ‰øùËß£ÊûêÂä®‰ΩúËÉΩÂ§üÊ≠£Â∏∏ÊâßË°å„ÄÇ È™åËØÅÁöÑÂÜÖÂÆπ‰∏ªË¶ÅÊúâÔºö Á¨¶Âè∑ÂºïÁî®‰∏≠ÈÄöËøáÂ≠óÁ¨¶‰∏≤ÊèèËø∞ÁöÑÂÖ®ÈôêÂÆöÂêçÊòØÂê¶ËÉΩÊâæÂà∞ÂØπÂ∫îÁöÑÁ±ªÔºõ Âú®ÊåáÂÆöÁ±ª‰∏≠ÊòØÂê¶Â≠òÂú®Á¨¶Âè∑ÊñπÊ≥ïÁöÑÂ≠óÊÆµÊèèËø∞ÂèäÁÆÄÂçïÂêçÁß∞ÊâÄÊèèËø∞ÁöÑÊñπÊ≥ïÂíåÂ≠óÊÆµÔºõ Á¨¶Âè∑ÂºïÁî®‰∏≠ÁöÑÁ±ª„ÄÅÂ≠óÊÆµÂíåÊñπÊ≥ïÁöÑËÆøÈóÆÊÄßÔºàprivate„ÄÅprotected„ÄÅpublic„ÄÅdefaultÔºâÊòØÂê¶ÂèØË¢´ÂΩìÂâçÁ±ªËÆøÈóÆ„ÄÇ 3.3 ÂáÜÂ§á Ëøô‰∏ÄÂùóÊàëÊúâ‰∏Ä‰∫õ‰∏çÂ§™ÁêÜËß£Ôºå‰∏∫‰ªÄ‰πàÂú®ÂàùÂßãÂåñÈò∂ÊÆµÔºåÂ≠óËäÇÁ†ÅÂ∞±Ë¢´ÁºñËØëÊàêÊåá‰ª§Â≠òÊîæÂú®ÊûÑÈÄ†Âô®\() ÊñπÊ≥ï‰∏≠‰∫ÜÔºüÔºüÔºüÔºüÂï•Êó∂ÂÄôÁºñËØëÊàêÊåá‰ª§ÁöÑÂïäÔºåËøô‰∏™ÊûÑÈÄ†ÊñπÊ≥ïÂèàÊòØ‰ªÄ‰πàÊó∂ÂÄô‰∫ßÁîüÁöÑ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ ÂõûÁ≠îÔºöÁºñËØëÊàêÊåá‰ª§ÔºåÊòØÂú®Ê∫ê‰ª£Á†ÅÈÄöËøá javac ÁºñËØëÊàê class Êñá‰ª∂Êó∂ÁîüÊàêÁöÑÔºåÂú®Á¨¨ÂÖ≠Á´†ÊúâËÆ≤ÔºåÂú®ÊñπÊ≥ïË°®‰∏≠ÔºåÊúâÂ≠òÊîæÂ±ûÊÄßË°®ÔºåËÄåÂ±ûÊÄßË°®ÈáåÊúâ‰∏Ä‰∏™ Code Â±ûÊÄßÔºåÈáåÈù¢Â∞±ÊòØÂ≠òÂÇ®ÁöÑ Java ‰ª£Á†ÅÁºñËØëÂêéÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§„ÄÇ ÂáÜÂ§áÈò∂ÊÆµÊòØÊ≠£Âºè‰∏∫Á±ªÂèòÈáèÂàÜÈÖçÂÜÖÂ≠òÂπ∂ËÆæÁΩÆÁ±ªÂèòÈáèÂàùÂßãÂÄºÁöÑÈò∂ÊÆµÔºåËøô‰∫õÂèòÈáèÊâÄ‰ΩøÁî®ÁöÑÂÜÖÂ≠òÈÉΩÂ∞ÜÂú®ÊñπÊ≥ïÂå∫‰∏≠ËøõË°åÂàÜÈÖç„ÄÇÔºàÂ§áÊ≥®ÔºöËøôÊó∂ÂÄôËøõË°åÂÜÖÂ≠òÂàÜÈÖçÁöÑ‰ªÖÂåÖÊã¨Á±ªÂèòÈáèÔºàË¢´static‰øÆÈ•∞ÁöÑÂèòÈáèÔºâÔºåËÄå‰∏çÂåÖÊã¨ÂÆû‰æãÂèòÈáèÔºåÂÆû‰æãÂèòÈáèÂ∞Ü‰ºöÂú®ÂØπË±°ÂÆû‰æãÂåñÊó∂ÈöèÁùÄÂØπË±°‰∏ÄËµ∑ÂàÜÈÖçÂú®JavaÂ†Ü‰∏≠Ôºâ„ÄÇ ÂàùÂßãÂÄºÈÄöÂ∏∏ÊòØÊï∞ÊçÆÁ±ªÂûãÁöÑÈõ∂ÂÄºÔºö ÂØπ‰∫éÔºö 1public static int value = 123; ÈÇ£‰πàÂèòÈáèvalueÂú®ÂáÜÂ§áÈò∂ÊÆµËøáÂêéÁöÑÂàùÂßãÂÄº‰∏∫0ËÄå‰∏çÊòØ123ÔºåËøôÊó∂ÂÄôÂ∞öÊú™ÂºÄÂßãÊâßË°å‰ªª‰ΩïjavaÊñπÊ≥ïÔºåÊäävalueËµãÂÄº‰∏∫123ÁöÑÂä®‰ΩúÂ∞ÜÂú®ÂàùÂßãÂåñÈò∂ÊÆµÊâç‰ºöË¢´ÊâßË°å„ÄÇ ‰∏Ä‰∫õÁâπÊÆäÊÉÖÂÜµÔºö ÂØπ‰∫éÔºö 1public static final int value = 123; ÁºñËØëÊó∂ Javac Â∞Ü‰ºö‰∏∫ value ÁîüÊàê ConstantValueÂ±ûÊÄßÔºåÂú®ÂáÜÂ§áÈò∂ÊÆµ ËôöÊãüÊú∫ Â∞±‰ºöÊ†πÊçÆ ConstantValue ÁöÑËÆæÁΩÆÂ∞Ü value ËµãÂÄº‰∏∫123„ÄÇ Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÁöÑÈõ∂ÂÄºÔºö 3.4 Ëß£ÊûêËß£ÊûêÈò∂ÊÆµÊòØËôöÊãüÊú∫Â∞ÜÂ∏∏ÈáèÊ±†ÂÜÖÁöÑÁ¨¶Âè∑ÂºïÁî®ÊõøÊç¢‰∏∫Áõ¥Êé•ÂºïÁî®ÁöÑËøáÁ®ã„ÄÇ ÈÇ£‰πàÁ¨¶Âè∑ÂºïÁî®‰∏éÁõ¥Êé•ÂºïÁî®Êúâ‰ªÄ‰πàÂÖ≥ËÅîÂë¢Ôºü 3.4.1 Áúã‰∏§ËÄÖÁöÑÊ¶ÇÂøµÁ¨¶Âè∑ÂºïÁî®(Symbolic References)Ôºö Á¨¶Âè∑ÂºïÁî®‰ª•‰∏ÄÁªÑÁ¨¶Âè∑Êù•ÊèèËø∞ÊâÄÂºïÁî®ÁöÑÁõÆÊ†áÔºåÁ¨¶Âè∑ÂèØ‰ª•ÊòØÁ¨¶ÂêàÁ∫¶ÂÆöÁöÑ‰ªª‰ΩïÂΩ¢ÂºèÁöÑÂ≠óÈù¢ÈáèÔºåÁ¨¶Âè∑ÂºïÁî®‰∏éËôöÊãüÊú∫ÂÆûÁé∞ÁöÑÂÜÖÂ≠òÂ∏ÉÂ±ÄÊó†ÂÖ≥ÔºåÂºïÁî®ÁöÑÁõÆÊ†áÂπ∂‰∏ç‰∏ÄÂÆöÂ∑≤ÁªèÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠„ÄÇ Áõ¥Êé•ÂºïÁî®ÔºàDirect ReferencesÔºâ: Áõ¥Êé•ÂºïÁî®ÂèØ‰ª•ÊòØÁõ¥Êé•ÊåáÂêëÁõÆÊ†áÁöÑÊåáÈíà„ÄÅÁõ∏ÂØπÂÅèÁßªÈáèÊàñÊòØ‰∏Ä‰∏™ËÉΩÈó¥Êé•ÂÆö‰ΩçÂà∞ÁõÆÊ†áÁöÑÂè•ÊüÑ„ÄÇÁõ¥Êé•ÂºïÁî®‰∏éËôöÊãüÊú∫ÂÆûÁé∞ÁöÑÂÜÖÂ≠òÂ∏ÉÂ±ÄÁõ∏ÂÖ≥ÔºåÂºïÁî®ÁöÑÁõÆÊ†áÂøÖÂÆöÂ∑≤ÁªèÂú®ÂÜÖÂ≠ò‰∏≠Â≠òÂú®„ÄÇ ËôöÊãüÊú∫ËßÑËåÉÊ≤°ÊúâËßÑÂÆöËß£ÊûêÈò∂ÊÆµÂèëÁîüÁöÑÂÖ∑‰ΩìÊó∂Èó¥ÔºåËôöÊãüÊú∫ÂÆûÁé∞ÂèØ‰ª•Ê†πÊçÆÈúÄË¶ÅÊù•Âà§Êñ≠Âà∞Â∫ïÊòØÂú®Á±ªË¢´Âä†ËΩΩÊó∂Ëß£Êûê„Äå‰∏ÄËà¨ÊòØÈùôÊÄÅÊñπÊ≥ïÂíåÁßÅÊúâÊñπÊ≥ï‰∏§Â§ßÁ±ªÔºåÁ¨¶Âêà‚ÄúÁºñËØëÊúüÂèØÁü•ÔºåËøêË°åÊúü‰∏çÂèØÂèò‚ÄùÔºåÂõ†‰∏∫Ëøô‰∏§Á±ªÊñπÊ≥ï‰∏çÂèØËÉΩÈÄöËøáÁªßÊâøÊàñËÄÖÂÖ∂‰ªñÊñπÂºèËøõË°åÈáçÂÜô„ÄÇÁ¨¨ÂÖ´Á´†ÊúâËØ¶ÁªÜËÆ≤„ÄÇ„ÄçËøòÊòØÁ≠âÂà∞‰∏Ä‰∏™Á¨¶Âè∑ÂºïÁî®Â∞ÜË¶ÅË¢´‰ΩøÁî®ÂâçÊâçÂéªËß£Êûê„ÄÇ 3.4.2 ÂØπËß£ÊûêÁªìÊûúËøõË°åÁºìÂ≠òÂêå‰∏ÄÁ¨¶Âè∑ÂºïÁî®ËøõË°åÂ§öÊ¨°Ëß£ÊûêËØ∑Ê±ÇÊòØÂæàÂ∏∏ËßÅÁöÑÔºåÈô§ invokedynamic Êåá‰ª§‰ª•Â§ñÔºåËôöÊãüÊú∫ÂÆûÁé∞ÂèØ‰ª•ÂØπÁ¨¨‰∏ÄÊ¨°Ëß£ÊûêÁªìÊûúËøõË°åÁºìÂ≠òÔºåÊù•ÈÅøÂÖçËß£ÊûêÂä®‰ΩúÈáçÂ§çËøõË°å„ÄÇÊó†ËÆ∫ÊòØÂê¶ÁúüÊ≠£ÊâßË°å‰∫ÜÂ§öÊ¨°Ëß£ÊûêÂä®‰ΩúÔºåËôöÊãüÊú∫ÈúÄË¶Å‰øùËØÅÁöÑÊòØÂú®Âêå‰∏Ä‰∏™ÂÆû‰Ωì‰∏≠ÔºåÂ¶ÇÊûú‰∏Ä‰∏™ÂºïÁî®Á¨¶Âè∑‰πãÂâçÂ∑≤ÁªèË¢´ÊàêÂäüËß£ÊûêËøáÔºåÈÇ£‰πàÂêéÁª≠ÁöÑÂºïÁî®Ëß£ÊûêËØ∑Ê±ÇÂ∞±Â∫îÂΩì‰∏ÄÁõ¥ÊàêÂäüÔºõÂêåÊ†∑ÁöÑÔºåÂ¶ÇÊûú Á¨¨‰∏ÄÊ¨°Ëß£ÊûêÂ§±Ë¥•ÔºåÈÇ£‰πàÂÖ∂‰ªñÊåá‰ª§ÂØπËøô‰∏™Á¨¶Âè∑ÁöÑËß£ÊûêËØ∑Ê±Ç‰πüÂ∫îËØ•Êî∂Âà∞Áõ∏ÂêåÁöÑÂºÇÂ∏∏„ÄÇ 3.4.3 Ëß£ÊûêÂä®‰ΩúÁöÑÁõÆÊ†áËß£ÊûêÂä®‰Ωú‰∏ªË¶ÅÈíàÂØπÁ±ªÊàñÊé•Âè£„ÄÅÂ≠óÊÆµ„ÄÅÁ±ªÊñπÊ≥ï„ÄÅÊé•Âè£ÊñπÊ≥ï„ÄÅÊñπÊ≥ïÁ±ªÂûã„ÄÅÊñπÊ≥ïÂè•ÊüÑÂíåË∞ÉÁî®ÁÇπÈôêÂÆöÁ¨¶7Á±ªÁ¨¶Âè∑ÂºïÁî®ËøõË°å„ÄÇÂâçÈù¢ÂõõÁßçÂºïÁî®ÁöÑËß£ÊûêËøáÁ®ãÔºåÂØπ‰∫éÂêéÈù¢‰∏âÁßçÔºå‰∏éJDK1.7Êñ∞Â¢ûÁöÑÂä®ÊÄÅËØ≠Ë®ÄÊîØÊåÅÊÅØÊÅØÁõ∏ÂÖ≥ÔºåÁî±‰∫éjavaËØ≠Ë®ÄÊòØ‰∏ÄÈó®ÈùôÊÄÅÁ±ªÂûãËØ≠Ë®ÄÔºåÂõ†Ê≠§Ê≤°Êúâ‰ªãÁªç invokedynamic Êåá‰ª§ÁöÑËØ≠‰πâ‰πãÂâçÔºåÊ≤°ÊúâÂäûÊ≥ïÂ∞Ü‰ªñ‰ª¨ÂíåÁé∞Âú®ÁöÑjavaËØ≠Ë®ÄÂØπÂ∫î‰∏ä„ÄÇ 3.5 ÂàùÂßãÂåñÁ±ªÂàùÂßãÂåñÈò∂ÊÆµÊòØÁ±ªÂä†ËΩΩÁöÑÊúÄÂêé‰∏ÄÊ≠•ÔºåÂâçÈù¢ÁöÑÁ±ªÂä†ËΩΩËøáÁ®ã‰∏≠ÔºåÈô§‰∫ÜÂú®Âä†ËΩΩÈò∂ÊÆµÁî®Êà∑Â∫îÁî®Á®ãÂ∫èÂèØ‰ª•ÈÄöËøáËá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®ÂèÇ‰∏é‰πãÂ§ñÔºåÂÖ∂‰ΩôÂä®‰ΩúÂÆåÂÖ®Áî±ËôöÊãüÊú∫‰∏ªÂØºÂíåÊéßÂà∂„ÄÇÂà∞‰∫ÜÂàùÂßãÂåñÈò∂ÊÆµÔºåÊâçÁúüÊ≠£ÂºÄÂßãÊâßË°åÁ±ª‰∏≠ÂÆö‰πâÁöÑjavaÁ®ãÂ∫è‰ª£Á†ÅÔºàÊàñËÄÖËØ¥ÊòØÂ≠óËäÇÁ†ÅÔºâ„ÄÇ ÂàùÂßãÂåñÈò∂ÊÆµÔºå‰∏ªË¶ÅËøòÊòØÂéªÊâßË°åÁ±ªÊûÑÈÄ†Âô® \() ÊñπÊ≥ïÁöÑËøáÁ®ã„ÄÇ„ÄåÂï•Êó∂ÂÄôÊúâËøô‰∏™ÊûÑÈÄ†ÊñπÊ≥ïÁöÑ‰π¶‰∏≠ËØ¥ÂêéÈù¢‰ºöËØ¥„ÄÇ„ÄÇ„ÄÇ„ÄÇÂ•ΩÁöÑÂêß„ÄÇ„ÄÇ„ÄÇ„ÄÇÁªßÁª≠ÂæÄ‰∏ãÁúã„Äç‰πüÂ∞±ÊòØËøõË°åÁ¨¨‰∫åÊ¨°ÁöÑËµãÂÄºÔºåÂÖ∂‰∏≠ \() Ôºö \() ÊòØÁî±ÁºñËØëÂô®(javac???)Ëá™Âä®Êî∂ÈõÜÁ±ª‰∏≠ÁöÑÊâÄÊúâÁ±ªÂèòÈáèÁöÑËµãÂÄºÂä®‰ΩúÂíåÈùôÊÄÅËØ≠Âè•Âùó(‰πüÂ∞±ÊòØÊâÄÊúâ static ÂèòÈáè Âíå ÈùôÊÄÅËØ≠Âè•Âùó) ÂêàÂπ∂‰∫ßÁîüÁöÑÔºåÈ°∫Â∫èÊåâÁÖßÂÖàÂêéÈ°∫Â∫è„ÄÇÂêåÊó∂Ê≥®ÊÑèÂì¶Ôºåstatic ÈùôÊÄÅ‰ª£Á†ÅÂùóÔºåÂèØ‰ª•ËµãÂÄºÂêéÈù¢ÂÆö‰πâÁöÑÈùôÊÄÅÂèòÈáèÔºå‰∏çËøáË≤å‰ººÊ≤°ÊØõÁî®„ÄÇ„ÄÇ„ÄÇ„ÄÇ 12345678public class SuperClass &#123; static &#123; System.out.println("SubClass init!"); A = 2; // ÂèçÊ≠£ÂÆÉ‰πü‰∏ç‰ºöË¢´ usedÔºåÂõ†‰∏∫‰ºöË¢´Ë¶ÜÁõñÊéâ &#125; public static int A = 1;&#125; \() Ëøô‰∏™ÊñπÊ≥ïÂæàÁâõÂèâÔºå‰∏∫Âï•Âë¢ÔºåÂõ†‰∏∫ÂÆÉ‰ºöÈªòËÆ§ÂÖàË∞ÉÁî®Áà∂Á±ªÁöÑ \() ÔºåÂéãÊ†πÂ∞±‰∏çÈúÄË¶ÅÂéªÊòæÁ§∫ÁöÑË∞ÉÁî®ÔºåÊâÄ‰ª•Á¨¨‰∏Ä‰∏™Ë¢´ÊâßË°åÁöÑ \() ÊñπÊ≥ïÁöÑÁ±ªËÇØÂÆöÊòØjava.lang.ObjectÔºõ Êó¢ÁÑ∂Áà∂Á±ªË¶ÅÂÖàÊâßË°åÔºåÈÇ£ËÇØÂÆöÈùôÊÄÅËØ≠Âè•ÂùóËÇØÂÆö‰πüÊòØ‰ºòÂÖàÊâßË°åÁöÑÔºåËøô‰∏™ËÆ©ÊàëÊÉ≥Âà∞‰∫Ü‰πãÂâçÁöÑË¢´Âä®Ë∞ÉÁî®Á±ªÁöÑ‰æãÂ≠êÔºåÂ¶ÇÊûúÂ≠êÁ±ªË∞ÉÁî®Áà∂Á±ªÁöÑ static ÂèòÈáèÔºåÈÇ£‰πàÂ≠êÁ±ªÊòØ‰∏ç‰ºöË¢´ÂàùÂßãÂåñÁöÑÔºõ \() ÂØπ‰∫éÁ±ªÊàñËÄÖÊé•Âè£‰∏çÊòØÂøÖÈ°ªÁöÑÔºåÂ¶ÇÊûúÊ≤°Êúâ static ÂèòÈáè Âíå ÈùôÊÄÅËØ≠Âè•ÂùóÔºåÈÇ£‰πàÂ∞±‰∏ç‰ºöÊúâËøô‰∏™ÊñπÊ≥ïÔºåÂΩìÁÑ∂Êé•Âè£Êú¨Ë∫´Â∞±‰∏çÂèØËÉΩÊúâ ÈùôÊÄÅËØ≠Âè•ÂùóÔºåÂêåÊó∂Ë¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÊâßË°åÊé•Âè£ÁöÑ \() ÊñπÊ≥ï‰∏çÈúÄË¶ÅÂéªÂÖàÊâßË°å Áà∂Êé•Âè£ÁöÑ \() ÔºåÁà∂Êé•Âè£Âè™ÊúâË¢´Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÊâçÂéªÊâßË°åÔºåËøôÁÇπË∑üÊé•Âè£‰∏ªÂä®Ë∞ÉÁî®ÂéüÂàô‰øùÊåÅ‰∏ÄËá¥„ÄÇ \() Á∫øÊÄßÂÆâÂÖ®ÔºåÊòØÈÄöËøáÂä†ÈîÅ‰øùÊåÅÂêåÊ≠•ÁöÑ„ÄÇ 4. Á±ªÂä†ËΩΩÂô®ÂõûÈ°æ‰∏Ä‰∏ãÔºåÁ±ªÂä†ËΩΩÁöÑÁ¨¨‰∏ÄÊ≠• ‚ÄúÂä†ËΩΩ‚Äù ÊÄªÂÖ±ËøõË°å‰∫Ü‰∏â‰∏™Âü∫Êú¨Âä®‰ΩúÔºö ÈÄöËøáÁ±ªÂûãÁöÑÂÆåÂÖ®ÈôêÂÆöÂêçÔºå‰∫ßÁîü‰∏Ä‰∏™‰ª£Ë°®ËØ•Á±ªÂûãÁöÑ‰∫åËøõÂà∂Êï∞ÊçÆÊµÅÔºàÊ†πÊú¨Ê≤°ÊúâÊåáÊòé‰ªéÂì™ÈáåËé∑Âèñ„ÄÅÊÄéÊ†∑Ëé∑ÂèñÔºåÂèØ‰ª•ËØ¥‰∏Ä‰∏™ÈùûÂ∏∏ÂºÄÊîæÁöÑÂπ≥Âè∞‰∫ÜÔºâÔºõ Ëß£ÊûêËøô‰∏™‰∫åËøõÂà∂Êï∞ÊçÆÊµÅ‰∏∫ÊñπÊ≥ïÂå∫ÂÜÖÁöÑËøêË°åÊó∂Êï∞ÊçÆÁªìÊûÑÔºõ Âú® Java Â†Ü‰∏≠ÂàõÂª∫‰∏Ä‰∏™Ë°®Á§∫ËØ•Á±ªÂûãÁöÑjava.lang.ClassÁ±ªÁöÑÂÆû‰æãÔºå‰Ωú‰∏∫ÊñπÊ≥ïÂå∫Ëøô‰∏™Á±ªÁöÑÂêÑÁßçÊï∞ÊçÆÁöÑËÆøÈóÆÂÖ•Âè£„ÄÇ Êàë‰ª¨Áü•ÈÅìÔºåÁ¨¨‰∏Ä‰∏™Âä®‰ΩúÔºåÂæàÁâõÈÄºÔºåÂè™Ë¶ÅÂæóÂà∞Á±ªÂûãÁöÑÂÆåÂÖ®ÈôêÂÆöÂêçÔºåÂ∞±ËÉΩ‰∫ßÁîü‰∏Ä‰∏™‰ª£Ë°®ËØ•Á±ªÂûãÁöÑ‰∫åËøõÂà∂Êï∞ÊçÆÊµÅÔºåÈÇ£Ëøô‰∏™ÊòØÂ¶Ç‰ΩïÂÅöÂà∞ÁöÑÂë¢ÔºüÂ∞±ÊòØÈÄöËøáÁ±ªÂä†ËΩΩÂô®ÔºåÊ≥®ÊÑèÂì¶ÔºåËøô‰∏™ÊòØÊîæÂà∞‰∫Ü jvm Â§ñÈÉ®ÂéªÂÆûÁé∞ÁöÑÔºå‰πüÂ∞±ÊòØÊàë‰ª¨ÂèØ‰ª•Ëá™Â∑±ÂÜ≥ÂÆöÂ¶Ç‰ΩïÂéªËé∑ÂèñÈúÄË¶ÅÁöÑÁ±ªÔºåÂè™Ë¶Å‰Ω†Êää‰∫åËøõÂà∂Êï∞ÊçÆÊµÅÊ≤°ÊØõÁóÖÁöÑËΩ¨ÂåñÂà∞ÊñπÊ≥ïÂå∫ÁöÑËøêË°åÊó∂Êï∞ÊçÆÁªìÊûÑÂç≥ÂèØ„ÄÇ 4.1 Á±ª‰∏éÁ±ªÂä†ËΩΩÂô®ÂØπ‰∫é‰ªªÊÑè‰∏Ä‰∏™Á±ªÔºåÈÉΩÈúÄË¶ÅÁî±Âä†ËΩΩÂÆÉÁöÑÁ±ªÂä†ËΩΩÂô®ÂíåËøô‰∏™Á±ªÊú¨Ë∫´‰∏ÄÂêåÁ°ÆÁ´ãÂÖ∂Âú®JavaËôöÊãüÊú∫‰∏≠ÁöÑÂîØ‰∏ÄÊÄß„ÄÇÂ¶ÇÊûú‰∏§‰∏™Á±ªÊù•Ê∫ê‰∫éÂêå‰∏Ä‰∏™ClassÊñá‰ª∂ÔºåÂè™Ë¶ÅÂä†ËΩΩÂÆÉ‰ª¨ÁöÑÁ±ªÂä†ËΩΩÂô®‰∏çÂêåÔºåÈÇ£‰πàËøô‰∏§‰∏™Á±ªÂ∞±ÂøÖÂÆö‰∏çÁõ∏Á≠â„ÄÇÂÖ∂ÂÆûÂæàÂÆπÊòìÁêÜËß£ÔºåÁ±ªÂä†ËΩΩÂô®‰∏çÂêåÔºåÈÇ£‰∫ßÁîüÁöÑ‰∫åËøõÂà∂ÊµÅÂøÖÁÑ∂‰∏çÂêå„ÄÇ 4.2 Á±ªÂä†ËΩΩÂô®‰ªãÁªç‰ªé Java ËôöÊãüÊú∫ÁöÑËßíÂ∫¶ÂàÜ‰∏∫‰∏§Áßç‰∏çÂêåÁöÑÁ±ªÂä†ËΩΩÂô®Ôºö ÂêØÂä®Á±ªÂä†ËΩΩÂô®ÔºàBootstrap ClassLoaderÔºâÔºå‰ΩøÁî®C++ËØ≠Ë®ÄÂÆûÁé∞ÔºåÊòØËôöÊãüÊú∫Ëá™Ë∫´ÁöÑ‰∏ÄÈÉ®ÂàÜÔºõ ÂÖ∂‰ªñÁ±ªÂä†ËΩΩÂô®„ÄÇÁî±JavaËØ≠Ë®ÄÂÆûÁé∞ÔºåÁã¨Á´ã‰∫éËôöÊãüÊú∫‰πãÂ§ñÔºåÂπ∂‰∏îÂÖ®ÈÉΩÁªßÊâøËá™java.lang.ClassLoaderÁ±ª„ÄÇÔºàËøôÈáåÂè™Èôê‰∫éHotSpotËôöÊãüÊú∫Ôºâ„ÄÇ ‰ªé Java ÂºÄÂèë‰∫∫ÂëòÁöÑËßíÂ∫¶ÁúãÔºåÂ§ßÈÉ®ÂàÜJavaÁ®ãÂ∫èÈÉΩ‰ºö‰ΩøÁî®Âà∞‰ª•‰∏ã3ÁßçÁ≥ªÁªüÊèê‰æõÁöÑÁ±ªÂä†ËΩΩÂô®Ôºö ÂêØÂä®Á±ªÂä†ËΩΩÂô®ÔºàBootstrap ClassLoaderÔºâÔºö Ëøô‰∏™Á±ªÂä†ËΩΩÂô®Ë¥üË¥£Â∞ÜÂ≠òÊîæÂú®&lt;JAVA_HOME&gt;\libÁõÆÂΩï‰∏≠ÁöÑÔºåÊàñËÄÖË¢´-XbootclasspathÂèÇÊï∞ÊâÄÊåáÂÆöÁöÑË∑ØÂæÑ‰∏≠ÁöÑÔºåÂπ∂‰∏îÊòØËôöÊãüÊú∫ËØÜÂà´ÁöÑÔºà‰ªÖÊåâÁÖßÊñá‰ª∂ÂêçËØÜÂà´ÔºåÂ¶Çrt.jarÔºåÂêçÂ≠ó‰∏çÁ¨¶ÂêàÁöÑÁ±ªÂ∫ìÂç≥‰ΩøÊîæÂú®libÁõÆÂΩï‰∏≠‰πü‰∏ç‰ºöË¢´Âä†ËΩΩÔºâÁ±ªÂ∫ìÂä†ËΩΩÂà∞ËôöÊãüÊú∫ÂÜÖÂ≠ò‰∏≠„ÄÇ Êâ©Â±ïÁ±ªÂä†ËΩΩÂô®ÔºàExtension ClassLoaderÔºâÔºö Ëøô‰∏™Âä†ËΩΩÂô®Áî±sun.misc.Launcher$ExtClassLoaderÂÆûÁé∞ÔºåÂÆÉË¥üË¥£Âä†ËΩΩ&lt;JAVA_HOME&gt;\lib\extÁõÆÂΩï‰∏≠ÁöÑÔºåÊàñËÄÖË¢´java.ext.dirsÁ≥ªÁªüÂèòÈáèÊâÄÊåáÂÆöÁöÑË∑ØÂæÑ‰∏≠ÁöÑÊâÄÊúâÁ±ªÂ∫ìÔºåÂºÄÂèëËÄÖÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®Êâ©Â±ïÁ±ªÂä†ËΩΩÂô®„ÄÇ Â∫îÁî®Á®ãÂ∫èÁ±ªÂä†ËΩΩÂô®ÔºàApplication ClassLoaderÔºâÔºö Ëøô‰∏™Á±ªÂä†ËΩΩÂô®Áî±sun.misc.Launcher$AppClassLoaderÂÆûÁé∞„ÄÇÁî±‰∫éËøô‰∏™Á±ªÂä†ËΩΩÂô®ÊòØClassLoader‰∏≠ÁöÑgetSystemClassLoader()ÊñπÊ≥ïÁöÑËøîÂõûÂÄºÔºåÊâÄ‰ª•‰∏ÄËà¨‰πüÁß∞ÂÆÉ‰∏∫Á≥ªÁªüÁ±ªÂä†ËΩΩÂô®„ÄÇÂÆÉË¥üË¥£Âä†ËΩΩÁî®Êà∑Á±ªË∑ØÂæÑÔºàClassPathÔºâ‰∏äÊâÄÊåáÂÆöÁöÑÁ±ªÂ∫ìÔºåÂºÄÂèëËÄÖÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®Ëøô‰∏™Á±ªÂä†ËΩΩÂô®ÔºåÂ¶ÇÊûúÂ∫îÁî®Á®ãÂ∫è‰∏≠Ê≤°ÊúâËá™ÂÆö‰πâËøáËá™Â∑±ÁöÑÁ±ªÂä†ËΩΩÂô®Ôºå‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãËøô‰∏™Â∞±ÊòØÁ®ãÂ∫è‰∏≠ÈªòËÆ§ÁöÑÁ±ªÂä†ËΩΩÂô®„ÄÇ Êàë‰ª¨ÁöÑÂ∫îÁî®Á®ãÂ∫èÈÉΩÊòØÁî±Ëøô3ÁßçÁ±ªÂä†ËΩΩÂô®‰∫íÁõ∏ÈÖçÂêàËøõË°åÂä†ËΩΩÁöÑÔºåÂ¶ÇÊûúÊúâÂøÖË¶ÅÔºåËøòÂèØ‰ª•Âä†ÂÖ•Ëá™Â∑±ÂÆö‰πâÁöÑÁ±ªÂä†ËΩΩÂô®„ÄÇ 4.3 Âèå‰∫≤ÂßîÊ¥æÊ®°ÂûãË¶ÅÊ±ÇÈô§‰∫ÜÈ°∂Â±ÇÁöÑÂêØÂä®Á±ªÂä†ËΩΩÂô®‰ª•Â§ñÔºåÊâÄÊúâÁöÑÁ±ªÂä†ËΩΩÂô®ÈÉΩÂ∫îËØ•ÊúâÁà∂Á±ªÂä†ËΩΩÂô®ÔºåËøôÈáåÁöÑÁà∂Â≠êÂÖ≥Á≥ª‰∏çÊòØÈÄöËøáÁªßÊâøÊù•ÁöÑÔºåËÄåÊòØÈÄöËøáÁªÑÂêàÂÖ≥Á≥ª„ÄÇ Tip: ÁªÑÂêàÂíåÁªßÊâøÁöÑÂå∫Âà´‰∏éËÅîÁ≥ª ÁªßÊâø‰∏éÁªÑÂêàÈÉΩÊòØÈù¢ÂêëÂØπË±°‰∏≠‰ª£Á†ÅÂ§çÁî®ÁöÑÊñπÂºè„ÄÇ ÁªßÊâøÂú®ÁºñÁ†ÅËøáÁ®ã‰∏≠Â∞±Ë¶ÅÊåáÂÆöÂÖ∑‰ΩìÁöÑÁà∂Á±ªÔºåÂÖ∂ÂÖ≥Á≥ªÂú®ÁºñËØëÊúüÂ∞±Á°ÆÂÆöÔºåËÄåÁªÑÂêàÁöÑÂÖ≥Á≥ª‰∏ÄËà¨Âú®ËøêË°åÊó∂Á°ÆÂÆö„ÄÇ ÁªßÊâøÂº∫Ë∞ÉÁöÑÊòØ is-a ÁöÑÂÖ≥Á≥ªÔºåËÄåÁªÑÂêàÂº∫Ë∞ÉÁöÑÊòØhas-a ÁöÑÂÖ≥Á≥ª„ÄÇ ÂÖ∂ÂÆûÂæàÂ•ΩÁêÜËß£Âï¶ÔºåÁªßÊâøÂ∞±ÊòØË¶ÅÂú®Á±ªÂ£∞ÊòéÊó∂ÊòæÂºè extendsÔºåËÄåÁªÑÂêà‰∏çÁî®ÔºåÁªÑÂêàÂèØ‰ª•ÁÆÄÂçïÁöÑÁêÜËß£‰∏∫Âú®‰∏Ä‰∏™ÂØπË±°ÔºàÁ±ªÔºâ‰∏≠Áî®Âà∞‰∫ÜÂè¶Â§ñ‰∏Ä‰∏™ÂØπË±°ÔºàÁ±ªÔºâ„ÄÇ ‰∏ÄËà¨‰ºòÂÖàËÄÉËôëÁªÑÂêàÔºåÂõ†‰∏∫javaÈáå‰∏çÂÖÅËÆ∏Â§öÈáçÁªßÊâø„ÄÇ ÂìàÂìàÂìàÔºåÊàëÂèàÊúâÈóÆÈ¢ò‰∫ÜÔºå‰∏∫‰ªÄ‰πà java ‰∏çÊîØÊåÅÂ§öÈáçÁªßÊâøÂë¢Ôºü ÊàëËßâÂæó‰∏ªË¶ÅÊòØÊúâ‰∏ÄÁßçÊÉÖÂÜµÂæàÂÆπÊòìÈÄ†Êàê‰∫å‰πâÊÄßÔºåÂ∞±ÊòØ A ÊòØÊúÄÈ°∂Â±ÇÁöÑÔºåÁÑ∂Âêé B Âíå C ÁªßÊâø‰∫Ü A ÔºåÂêåÊó∂Â§çÂÜô‰∫Ü A ÁöÑ ‰∏Ä‰∏™ÊñπÊ≥ïÔºåÂ¶ÇÊûú D Ê≠§Êó∂Â§öÈáçÁªßÊâø B Âíå CÔºåÈÇ£Ë∞ÉÁî®ÂêåÊ†∑ÁöÑÊñπÊ≥ïÁöÑÊó∂ÂÄôÂ∞±‰ºö‰∫ßÁîü‰∫å‰πâÊÄß‰∫Ü‚Ä¶ Âèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÁöÑÂ∑•‰ΩúËøáÁ®ãÔºö Â¶ÇÊûú‰∏Ä‰∏™Á±ªÂä†ËΩΩÂô®Êî∂Âà∞‰∫ÜÁ±ªÂä†ËΩΩÁöÑËØ∑Ê±ÇÔºåÂÖàÊääËøô‰∏™ËØ∑Ê±ÇÂßîÊ¥æÁªôÁà∂Á±ªÂä†ËΩΩÂô®ÂéªÂÆåÊàêÔºàÊâÄ‰ª•ÊâÄÊúâÁöÑÂä†ËΩΩËØ∑Ê±ÇÊúÄÁªàÈÉΩÂ∫îËØ•‰º†ÈÄÅÂà∞È°∂Â±ÇÁöÑÂêØÂä®Á±ªÂä†ËΩΩÂô®‰∏≠ÔºâÔºåÂè™ÊúâÂΩìÁà∂Âä†ËΩΩÂô®ÂèçÈ¶àËá™Â∑±Êó†Ê≥ïÂÆåÊàêÂä†ËΩΩËØ∑Ê±Ç(ÂÆÉÁöÑÊêúÁ¥¢ËåÉÂõ¥Ê≤°ÊúâÊâæÂà∞ÊâÄÈúÄË¶ÅÁöÑÁ±ª)Êó∂ÔºåÂ≠êÂä†ËΩΩÂô®Êâç‰ºöÂ∞ùËØïËá™Â∑±ÂéªÂä†ËΩΩ„ÄÇ ‰ΩøÁî®Âèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÊù•ÁªÑÁªáÁ±ªÂä†ËΩΩÂô®‰πãÈó¥ÁöÑÂÖ≥Á≥ªÔºåÊúâ‰∏Ä‰∏™ÊòæËÄåÊòìËßÅÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØjavaÁ±ªÈöèÁùÄÂÆÉÁöÑÁ±ªÂä†ËΩΩÂô®‰∏ÄËµ∑ÂÖ∑Â§á‰∫Ü‰∏ÄÁßçÂ∏¶Êúâ‰ºòÂÖàÁ∫ßÁöÑÂ±ÇÊ¨°ÂÖ≥Á≥ª„ÄÇ Ê≥®ÊÑèÔºöÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÊòØ Java ËÆæËÆ°ËÄÖ‰ª¨Êé®ËçêÁªôÂºÄÂèëËÄÖ‰ª¨ÁöÑ‰∏ÄÁßçÁ±ªÂä†ËΩΩÂô®ÂÆûÁé∞ÊñπÂºèÔºåÂπ∂‰∏çÊòØ‰∏Ä‰∏™Âº∫Âà∂ÊÄß ÁöÑÁ∫¶ÊùüÊ®°Âûã„ÄÇÂú® Java ÁöÑ‰∏ñÁïå‰∏≠Â§ßÈÉ®ÂàÜÁöÑÁ±ªÂä†ËΩΩÂô®ÈÉΩÈÅµÂæ™Ëøô‰∏™Ê®°ÂûãÔºå‰ΩÜ‰πüÊúâ‰æãÂ§ñ„ÄÇ 4.4 Á†¥ÂùèÂèå‰∫≤ÂßîÊ¥æÊ®°Âûã‰∏âÊ¨°Â§ßÁ†¥Âùè„ÄÇ Á¨¨‰∏ÄÊ¨°Á†¥ÂùèÊòØÂõ†‰∏∫Á±ªÂä†ËΩΩÂô®ÂíåÊäΩË±°Á±ªjava.lang.ClassLoaderÂú®JDK1.0Â∞±Â≠òÂú®ÁöÑÔºåËÄåÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÂú®JDK1.2‰πãÂêéÊâçË¢´ÂºïÂÖ•Ôºå‰∏∫‰∫ÜÂÖºÂÆπÂ∑≤ÁªèÂ≠òÂú®ÁöÑÁî®Êà∑Ëá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®ÔºåÂºïÂÖ•Âèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÊó∂ÂÅö‰∫Ü‰∏ÄÂÆöÁöÑÂ¶•ÂçèÔºöÂú®java.lang.ClassLoader‰∏≠ÂºïÂÖ•‰∫Ü‰∏Ä‰∏™findClass()ÊñπÊ≥ïÔºåÂú®Ê≠§‰πãÂâçÔºåÁî®Êà∑ÂéªÁªßÊâøjava.lang.ClassloaderÁöÑÂîØ‰∏ÄÁõÆÁöÑÂ∞±ÊòØÈáçÂÜôloadClass()ÊñπÊ≥ï„ÄÇJDK1.2‰πãÂêé‰∏çÊèêÂÄ°Áî®Êà∑ÂéªË¶ÜÁõñloadClass()ÊñπÊ≥ïÔºåËÄåÊòØÊääËá™Â∑±ÁöÑÁ±ªÂä†ËΩΩÈÄªËæëÂÜôÂà∞findClass()ÊñπÊ≥ï‰∏≠ÔºåÂ¶ÇÊûúloadClass()ÊñπÊ≥ï‰∏≠Â¶ÇÊûúÁà∂Á±ªÂä†ËΩΩÂ§±Ë¥•ÔºåÂàô‰ºöË∞ÉÁî®Ëá™Â∑±ÁöÑfindClass()ÊñπÊ≥ïÊù•ÂÆåÊàêÂä†ËΩΩÔºåËøôÊ†∑Â∞±ÂèØ‰ª•‰øùËØÅÊñ∞ÂÜôÂá∫Êù•ÁöÑÁ±ªÂä†ËΩΩÂô®ÊòØÁ¨¶ÂêàÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãËßÑÂàôÁöÑ„ÄÇ Á¨¨‰∫åÊ¨°Á†¥ÂùèÊòØÂõ†‰∏∫Ê®°ÂûãËá™Ë∫´ÁöÑÁº∫Èô∑ÔºåÁé∞ÂÆû‰∏≠Â≠òÂú®ËøôÊ†∑ÁöÑÂú∫ÊôØÔºöÂü∫Á°ÄÁöÑÁ±ªÂä†ËΩΩÂô®ÈúÄË¶ÅÊ±ÇË∞ÉÁî®Áî®Êà∑ÁöÑ‰ª£Á†ÅÔºåËÄåÂü∫Á°ÄÁöÑÁ±ªÂä†ËΩΩÂô®ÂèØËÉΩ‰∏çËÆ§ËØÜÁî®Êà∑ÁöÑ‰ª£Á†Å„ÄÇ‰∏∫Ê≠§ÔºåJavaËÆæËÆ°Âõ¢ÈòüÂºïÂÖ•ÁöÑËÆæËÆ°ÊòØ ‚ÄúÁ∫øÁ®ã‰∏ä‰∏ãÊñáÁ±ªÂä†ËΩΩÂô®ÔºàThread Context ClassLoaderÔºâ‚Äù„ÄÇËøôÊ†∑ÂèØ‰ª•ÈÄöËøáÁà∂Á±ªÂä†ËΩΩÂô®ËØ∑Ê±ÇÂ≠êÁ±ªÂä†ËΩΩÂô®ÂéªÂÆåÊàêÁ±ªÂä†ËΩΩÂä®‰Ωú„ÄÇÂ∑≤ÁªèËøùËÉå‰∫ÜÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÁöÑ‰∏ÄËà¨ÊÄßÂéüÂàô„ÄÇ Á¨¨‰∏âÊ¨°Á†¥Âùè ÊòØÁî±‰∫éÁî®Êà∑ÂØπÁ®ãÂ∫èÂä®ÊÄÅÊÄßÁöÑËøΩÊ±ÇÂØºËá¥ÁöÑ„ÄÇËøôÈáåÊâÄËØ¥ÁöÑÂä®ÊÄÅÊÄßÊòØÊåáÔºö‚Äú‰ª£Á†ÅÁÉ≠ÊõøÊç¢‚Äù„ÄÅ‚ÄúÊ®°ÂùóÁÉ≠ÈÉ®ÁΩ≤‚ÄùÁ≠âÁ≠âÊØîËæÉÁÉ≠Èó®ÁöÑËØç„ÄÇËØ¥ÁôΩ‰∫ÜÂ∞±ÊòØÂ∏åÊúõÂ∫îÁî®Á®ãÂ∫èËÉΩÂ§üÂÉèÊàë‰ª¨ÁöÑËÆ°ÁÆóÊú∫Â§ñËÆæ‰∏ÄÊ†∑ÔºåÊé•‰∏äÈº†Ê†á„ÄÅUÁõò‰∏çÁî®ÈáçÂêØÊú∫Âô®Â∞±ËÉΩÁ´ãÂç≥‰ΩøÁî®„ÄÇOSGiÊòØÂΩìÂâç‰∏öÁïå‚Äú‰∫ãÂÆû‰∏ä‚ÄùÁöÑJavaÊ®°ÂùóÂåñÊ†áÂáÜÔºåOSGiÂÆûÁé∞Ê®°ÂùóÂåñÁÉ≠ÈÉ®ÁΩ≤ÁöÑÂÖ≥ÈîÆÊòØÂÆÉËá™ÂÆö‰πâÁöÑÁ±ªÂä†ËΩΩÂô®Êú∫Âà∂ÁöÑÂÆûÁé∞„ÄÇÊØè‰∏Ä‰∏™Á®ãÂ∫èÊ®°ÂùóÔºàOSGi‰∏≠Áß∞‰∏∫BundleÔºâÈÉΩÊúâ‰∏Ä‰∏™Ëá™Â∑±ÁöÑÁ±ªÂä†ËΩΩÂô®ÔºåÂΩìÈúÄË¶ÅÊõ¥Êç¢‰∏Ä‰∏™BundleÊó∂ÔºåÂ∞±ÊääBundleËøûÂêåÁ±ªÂä†ËΩΩÂô®‰∏ÄËµ∑Êç¢Êéâ‰ª•ÂÆûÁé∞‰ª£Á†ÅÁöÑÁÉ≠ÊõøÊç¢„ÄÇÂú®OSGiÁéØÂ¢É‰∏ãÔºåÁ±ªÂä†ËΩΩÂô®‰∏çÂÜçÊòØÂèå‰∫≤ÂßîÊ¥æÊ®°Âûã‰∏≠ÁöÑÊ†ëÁä∂ÁªìÊûÑÔºåËÄåÊòØËøõ‰∏ÄÊ≠•ÂèëÂ±ï‰∏∫Êõ¥Âä†Â§çÊùÇÁöÑÁΩëÁä∂ÁªìÊûÑ„ÄÇ „ÄåÂ•ΩÂè≠ÔºåËøô‰∏ÄÂùóÊàë‰∏çÂ§™ÊáÇ‚Ä¶„Äç Á¨¨ÂÖ´Á´† ËôöÊãüÊú∫Â≠óËäÇÁ†ÅÊâßË°åÂºïÊìé 1. Ê¶ÇËø∞ÊâßË°åÂºïÊìéÊòØËôöÊãüÊú∫‰∏≠ÊúÄÊ†∏ÂøÉÁöÑÁªÑÊàêÈÉ®ÂàÜ‰πã‰∏ÄÔºå‚ÄúËôöÊãüÊú∫‚ÄùÂèØ‰ª•Ëá™Ë°åÂà∂ÂÆöÊåá‰ª§ÈõÜ‰∏éÊâßË°åÂºïÊìéÁöÑÁªìÊûÑ‰ΩìÁ≥ªÔºåÂπ∂‰∏îËÉΩÂ§üÊâßË°åÈÇ£‰∫õ‰∏çË¢´Á°¨‰ª∂Áõ¥Êé•ÊîØÊåÅÁöÑÊåá‰ª§ÈõÜÊ†ºÂºè„ÄÇ Âú® Java ËôöÊãüÊú∫ËßÑËåÉ‰∏≠ÔºåÁΩÆÈ°∂‰∫ÜËôöÊãüÊú∫Â≠óËäÇÁ†ÅÊâßË°åÂºïÊìéÁöÑÊ¶ÇÂøµÊ®°ÂûãÔºåËøô‰∏™Ê¶ÇÂøµÊ®°ÂûãÊàê‰∏∫‰∫ÜÂêÑ‰∏™ËôöÊãüÊú∫ÊâßË°åÂºïÊìéÁöÑÁªü‰∏ÄÂ§ñËßÇÔºå‰ΩÜÊòØÂÜÖÈÉ®ÂÆûÁé∞ÂêÑ‰∏çÁõ∏ÂêåÔºåÊúâÁöÑÊòØÈÄöËøáËß£ÈáäÂô®Ëß£ÈáäÊâßË°åÔºåÊúâÁöÑÂàôÊòØÈÄöËøáÂç≥Êó∂ÁºñËØëÂô®(JIT)ÊâßË°åÔºå‰ΩÜ‰ªéÂ§ñËßÇ‰∏äÁúãÔºåÈÉΩÊòØËæìÂÖ•Â≠óËäÇÁ†ÅÊñá‰ª∂ÔºåËæìÂá∫ÊâßË°åÁªìÊûú„ÄÇ 2. ËøêË°åÊó∂Ê†àÂ∏ßÊ†àÂ∏ßÔºàStack FrameÔºâÊòØÁî®‰∫éÊîØÊåÅËôöÊãüÊú∫ËøõË°å ÊñπÊ≥ïË∞ÉÁî®ÂíåÊñπÊ≥ïÊâßË°å ÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂÆÉÊòØËôöÊãüÊú∫ËøêË°åÊó∂Êï∞ÊçÆÂå∫‰∏≠ÁöÑËôöÊãüÊú∫Ê†àÁöÑÊ†àÂÖÉÁ¥†ÔºåÊØè‰∏Ä‰∏™Ê†àÂ∏ßÈÉΩÂåÖÂê´‰∫Ü Â±ÄÈÉ®ÂèòÈáèË°®„ÄÅÊìç‰ΩúÊï∞Ê†à„ÄÅÂä®ÊÄÅËøûÊé•„ÄÅÊñπÊ≥ïËøîÂõûÂú∞ÂùÄÂíå‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑÈôÑÂä†‰ø°ÊÅØ„ÄÇÊ†àÂ∏ßÁöÑÂ§ßÂ∞èÊó©Â∞±ÂÜôÂÖ•Âà∞‰∫Ü class Êñá‰ª∂‰∏≠ÁöÑ code Â±ûÊÄß‰∏≠‰∫ÜÔºåÂπ∂‰∏îÂØπ‰∫éÊâßË°åÂºïÊìéÊù•ËØ¥ÔºåÂè™ÊúâÊ†àÈ°∂ÁöÑÊ†àÂ∏ßÊâçÊòØÊúâÊïàÁöÑÔºåÁß∞‰∏∫ÂΩìÂâçÊ†àÂ∏ßÔºåËøô‰∏™Ê†àÂ∏ßÊâÄÂÖ≥ËÅîÁöÑÊñπÊ≥ïÁß∞‰∏∫ÂΩìÂâçÊñπÊ≥ï„ÄÇ 2.1 Â±ÄÈÉ®ÂèòÈáèË°®Â±ÄÈÉ®ÂèòÈáèË°®ÊòØ‰∏ÄÁªÑÂèòÈáèÂÄºÂ≠òÂÇ®Á©∫Èó¥ÔºåÁî®‰∫éÂ≠òÊîæÊñπÊ≥ïÂèÇÊï∞ÂíåÊñπÊ≥ïÂÜÖÂÆö‰πâÁöÑÂ±ÄÈÉ®ÂèòÈáè„ÄÇ ÂΩìÁÑ∂ÔºåÂ±ÄÈÉ®ÂèòÈáèË°®ÁöÑÂ§ßÂ∞èÊó©Âú® Code Â±ûÊÄßÁöÑ max_locals Êï∞ÊçÆÈ°π‰∏≠Â∞±ÂÆö‰πâ‰∫Ü„ÄÇ Â±ÄÈÉ®ÂèòÈáèË°®‰ª• ÂèòÈáèÊßΩÔºàSlotÔºâ ‰∏∫ÊúÄÂ∞èÂçï‰ΩçÔºåÈªòËÆ§‰∏Ä‰∏™ Slot ‰∏∫32‰ΩçÔºåÂ¶ÇÊûúÊòØ64‰ΩçÁöÑÊï∞ÊçÆÁªìÊûÑ‰ºö‰∏∫ÂÖ∂ÂàÜÈÖçËøûÁª≠‰∏§‰∏™ Slot Á©∫Èó¥„ÄÇ ÂØπ‰∫éÂ±ÄÈÉ®ÂèòÈáèË°®ÔºåÊúâ‰∏âÁÇπÈúÄË¶ÅÊèêÈÜíÔºö ÊñπÊ≥ïÊâßË°åÊó∂ÔºåËôöÊãüÊú∫‰ΩøÁî®Â±ÄÈÉ®ÂèòÈáèË°®ÂÆåÊàê‰ªéÊìç‰ΩúÊ†àÊ†àÈ°∂ÁöÑÂèÇÊï∞ÂÄºÂà∞ÂèÇÊï∞ÂèòÈáèÂàóË°®ÁöÑ‰º†ÈÄíËøáÁ®ãÔºåÂ¶ÇÊûúÊòØÂÆû‰æãÊñπÊ≥ïÂàôÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÈªòËÆ§ÊòØÂØπË±°ÂÆû‰æãÁöÑÂºïÁî®Ôºå‰πüÂ∞±ÊòØthisÔºåÂâ©‰∏ãÁöÑÂèÇÊï∞‰ªé 1 ÂºÄÂßãÔºõ Slot ÊòØÂèØ‰ª•ÈáçÁî®ÁöÑÔºõ Â±ÄÈÉ®ÂèòÈáèÂπ∂Ê≤°ÊúâÂÉèÁ±ªÂèòÈáè‰∏ÄÊ†∑Â≠òÂú®‚ÄúÂáÜÂ§áÈò∂ÊÆµ‚Äù(Á±ªÂä†ËΩΩÁöÑËøûÊé•ËøáÁ®ãÁöÑÁ¨¨‰∫åÊ≠•)ÔºåÊâÄ‰ª•Â¶ÇÊûúË¶Å‰ΩøÁî®Â±ÄÈÉ®ÂèòÈáèËÇØÂÆöË¶ÅÂÖàËµãÂàùÂÄº„ÄÇ 2.2 Êìç‰ΩúÊï∞Ê†àÊìç‰ΩúÊï∞Ê†àÔºå‰πüË¢´Áß∞‰∏∫Êìç‰ΩúÊ†àÔºåÂêåÂ±ÄÈÉ®ÂèòÈáèË°®‰∏ÄÊ†∑ÔºåÂÆπÈáè‰πüÊòØÂú® Code Â±ûÊÄßÁöÑ max_stacks Êï∞ÊçÆÈ°π‰πã‰∏≠Êó©Â∞±ÂÜôÂÖ•‰∫ÜÔºåÂêåÊ†∑ÁöÑÔºåÊ†à‰∏≠ÁöÑÂü∫Êú¨Âçï‰Ωç‰πüÊòØ Slot(32‰Ωç)Ôºå32‰ΩçÊï∞ÊçÆÁ±ªÂûãÂç†Ê†àÂÆπÈáè‰∏∫ 1Ôºå64 ‰ΩçÁöÑÂç† 2 ÔºåÊñπÊ≥ïÁöÑÊâßË°åËøáÁ®ãÔºåÂ∞±ÊòØÂÖ•Ê†àÂá∫Ê†àÁöÑËøáÁ®ãÔºåÊâÄ‰ª•ÔºåJava ËôöÊãüÊú∫ÁöÑËß£ÈáäÊâßË°åÂºïÊìéÁß∞‰∏∫ ‚ÄúÂü∫‰∫éÊ†àÁöÑÊâßË°åÂºïÊìé‚Äù„ÄÇ Âè¶Â§ñÔºåÂú®Ê¶ÇÂøµÊ®°Âûã‰∏≠Ôºå‰∏§‰∏™Ê†àÂ∏ß‰Ωú‰∏∫ËôöÊãüÊú∫Ê†àÁöÑÂÖÉÁ¥†ÔºåÁõ∏‰∫í‰πãÈó¥ÊòØÂÆåÂÖ®Áã¨Á´ãÁöÑÔºå‰ΩÜÊòØÂú®Â§ßÂ§öÊï∞ËôöÊãüÊú∫‰∏≠‰ºöÂÅöÂá∫‰ºòÂåñ‚Äî‚Äî ‰ª§‰∏§‰∏™Ê†àÂ∏ßÂá∫Áé∞‰∏ÄÈÉ®ÂàÜÈáçÂè†ÔºåËøôÊ†∑Âú®ËøõË°åÊñπÊ≥ïË∞ÉÁî®ÁöÑÊó∂ÂÄôÂ∞±ÂèØ‰ª•ÂÖ±Áî®‰∏ÄÈÉ®ÂàÜÊï∞ÊçÆÔºåÊó†ÈúÄËøõË°åÈ¢ùÂ§ñÁöÑÂèÇÊï∞Â§çÂà∂‰º†ÈÄí‰∫Ü„ÄÇ 2.3 Âä®ÊÄÅËøûÊé•Âä®ÊÄÅËøûÊé•Â∞±ÊòØÁî®Êù•Â≠òÂÇ®ÈÉ®ÂàÜÊú™ËΩ¨Âåñ‰∏∫Áõ¥Êé•ÂºïÁî®ÁöÑÁ¨¶Âè∑ÂºïÁî®ÔºåÂ∞ÜÂÖ∂ËΩ¨Âåñ‰∏∫Áõ¥Êé•ÂºïÁî®„ÄÇÂú®‰πãÂâçÁöÑÁ±ªÂä†ËΩΩËøáÁ®ã‰∏≠ÁöÑËß£ÊûêÈÉ®ÂàÜÊàë‰ª¨Ë∞àÂà∞ËøáÔºåClass Êñá‰ª∂ÁöÑÂ∏∏ÈáèÊ±†Â≠òÂÇ®‰∫ÜÂ§ßÈáèÁöÑÁ¨¶Âè∑ÂºïÁî®ÔºåÂõ†‰∏∫ java ‰∏çÂÉè C++ ‰∏ÄÊ†∑Âú®ÁºñËØë‰πãÂâçÊúâËøûÊé•ÁöÑËøáÁ®ãÔºåÊâÄ‰ª• java Âú®‰∏≠Èó¥Á©øÊèí‰∫ÜËøûÊé•ËøáÁ®ãÔºåÁ¨¨‰∏ÄÊ¨°Â∞ÜÁ¨¶Âè∑ÂºïÁî®ËΩ¨Âåñ‰∏∫Áõ¥Êé•ÂºïÁî®ÊòØÂú®Á±ªÂä†ËΩΩ‰∏≠ÁöÑËß£ÊûêÔºåËøôÁßçËΩ¨ÂåñÁß∞‰∏∫ÈùôÊÄÅËß£ÊûêÔºåÁ¨¨‰∫åÊ¨°ÂàôÊòØÂú®ÊØè‰∏ÄÊ¨°ÁöÑËøêË°åÊúüÈó¥ËΩ¨Âåñ‰∏∫Áõ¥Êé•ÂºïÁî®ÔºåÁß∞‰∏∫ Âä®ÊÄÅËøûÊé•„ÄÇ Ëá≥‰∫éÂì™‰∫õÁ¨¶Âè∑ÂºïÁî®ÊòØÈùôÊÄÅËß£ÊûêÂÆåÊàêÔºåÂì™‰∫õÊòØÂä®ÊÄÅËøûÊé•Ôºå‰ºöÂú®Êé•‰∏ãÊù•ÁöÑÊñπÊ≥ïË∞ÉÁî®‰∏ÄËäÇ‰∏≠Ë∞àÂà∞„ÄÇ 2.4 ÊñπÊ≥ïËøîÂõûÂú∞ÂùÄÂ≠òÂÇ®ÁöÑÂ∞±ÊòØ Áî®Êù•Â∏ÆÂä©ÊÅ¢Â§ç‰∏äÂ±ÇÊñπÊ≥ïÁöÑÊâßË°åÁä∂ÊÄÅ ÁöÑ‰∏Ä‰∫õ‰ø°ÊÅØÔºåÂ¶ÇÊûúÊñπÊ≥ïÊòØÊ≠£Â∏∏ÈÄÄÂá∫ÁöÑÔºåÈÇ£‰πà‰∏ÄËà¨‰ºöÂ≠òÂÇ®Ë∞ÉÁî®ËÄÖÔºà‰∏äÂ±ÇÊñπÊ≥ïÔºâÁöÑ PC ËÆ°Êï∞ÂÄºÔºåÊù•‰Ωú‰∏∫ËøîÂõûÂú∞ÂùÄ„ÄÇËÄåÊñπÊ≥ïÂºÇÂ∏∏ÈÄÄÂá∫ÁöÑËØùÔºåËøîÂõûÂú∞ÂùÄ‰∏ÄËà¨Â∞±ÊòØÈÄöËøáÂºÇÂ∏∏Â§ÑÁêÜÂô®Ë°®Êù•Á°ÆÂÆö‰∫ÜÔºåËøô‰∏™Êó∂ÂÄôÔºåÊñπÊ≥ïËøîÂõûÂú∞ÂùÄËøô‰∏ÄÂùó‰∏ÄËà¨‰∏ç‰ºö‰øùÂ≠ò‰ªª‰Ωï‰ø°ÊÅØ„ÄÇ ËøôÈáåÊèêÂà∞‰∫Ü‰∏§ÁßçÈÄÄÂá∫ÊñπÂºèÔºö Ê≠£Â∏∏ÂÆåÊàêÂá∫Âè£ÔºàNormal Method Invocation CompletionÔºåËØùËØ¥ÁøªËØë‰∏çÂ∫îËØ•ÊòØÊ≠£Â∏∏ÁöÑÂÆåÊàêÊñπÊ≥ïË∞ÉÁî®ÔºüÔºüÔºüÔºâ„ÄÇÊ≠§Êó∂ÈÄÄÂá∫ÊñπÊ≥ïÁöÑÊìç‰ΩúÂ∫îËØ•ÊòØÔºöÊÅ¢Â§ç‰∏äÂ±ÇÊñπÊ≥ïÁöÑÂ±ÄÈÉ®ÂèòÈáèË°®ÂíåÊìç‰ΩúÊï∞Ê†àÔºåÂ¶ÇÊûúÊúâËøîÂõûÂÄºÂ∞±ÂéãÂÖ•Ë∞ÉÁî®ËÄÖÁöÑÊ†àÂ∏ß‰∏≠ÁöÑÊìç‰ΩúÊï∞Ê†à‰∏≠ÔºåÁÑ∂ÂêéË∞ÉÊï¥PCËÆ°Êï∞ÂÄº„ÄÇ ÂºÇÂ∏∏ÂÆåÊàêÂá∫Âè£ÔºàAbrupt Method Invocation CompletionÔºåÊàëËßâÂæóÁøªËØëÊàêÂºÇÂ∏∏ÁöÑÊñπÊ≥ïË∞ÉÁî®‰ºöÊõ¥Â•Ω‚Ä¶Ôºâ„ÄÇÊ≠§Êó∂ÈÄÄÂá∫ÊñπÊ≥ïÁöÑÊìç‰ΩúÂ∫îËØ•Âíå‰∏äËÄÖ‰∏ÄÊ†∑ÔºåÂΩìÁÑ∂‰∫ÜÔºåËøôÈáåËÇØÂÆöÊòØ‰∏ç‰ºöÊúâËøîÂõûÂÄºÁöÑ„ÄÇ 2.5 ÈôÑÂä†‰ø°ÊÅØÂèØ‰ª•Â¢ûÂä†‰æãÂ¶ÇË∞ÉËØïÁõ∏ÂÖ≥ÁöÑ‰ø°ÊÅØÔºå‰∏ÄËà¨Âú®ÂÆûÈôÖÂºÄÂèë‰∏≠Ôºå‰ºöÊää Âä®ÊÄÅËøûÊé•„ÄÅÊñπÊ≥ïËøîÂõûÂú∞ÂùÄÂíåÈôÑÂä†‰ø°ÊÅØÂΩí‰∏∫‰∏ÄÁ±ªÔºåÁß∞‰πã‰∏∫Ê†àÂ∏ß‰ø°ÊÅØ„ÄÇ 3. ÊñπÊ≥ïË∞ÉÁî®ÊñπÊ≥ïË∞ÉÁî®ÁöÑÂîØ‰∏Ä‰ªªÂä°Â∞±ÊòØÊääËØ•ÊñπÊ≥ïË∞ÉÁî®ÁöÑÊñπÊ≥ïÁ°ÆÂÆöÔºåÊöÇÊó∂‰∏çÊ∂âÂèäÂà∞ÊñπÊ≥ïÂÜÖÈÉ®ÁöÑÂÖ∑‰ΩìËøêË°åËøáÁ®ãÔºå‰∏∫‰ªÄ‰πàËøô‰∏™Ë¶ÅÂçïÁã¨ÊãéÂá∫Êù•ËÆ≤Âë¢ÔºüÂõ†‰∏∫Âú®Á®ãÂ∫èËøêË°åËøáÁ®ã‰∏≠ÔºåËøõË°åÊñπÊ≥ïË∞ÉÁî®Êó∂ÊúÄÊôÆÈÅç„ÄÅÊúÄÈ¢ëÁπÅÁöÑÊìç‰ΩúÔºåÂπ∂‰∏îÁî±‰∫éÂä®ÊÄÅËøûÊé•ÁöÑÂéüÂõ†ÔºåÊâÄ‰ª•ÊñπÊ≥ïË∞ÉÁî®ËøòÊòØÊå∫Â§çÊùÇÁöÑ‚Ä¶ 3.1 Ëß£Êûê‰πãÂâçÂú®Á±ªÂä†ËΩΩËøáÁ®ã‰∏≠Â∑≤ÁªèËßÅËøá‰∏ÄÊ¨° Ëß£Êûê ‰∫ÜÔºåÊ≤°ÈîôÔºåËøô‰∏§‰∏™Ëß£ÊûêÊòØ‰∏Ä‰∏™ÊÑèÊÄù„ÄÇ‰πãÂâçÊ≤°ÂÖ∑‰ΩìËÆ≤ÁöÑÂéüÂõ†ÊòØÔºåËøôÈáåÂèàË¶ÅËÆ≤‰∏ÄÈÅç‚Ä¶ Âú®Á±ªÂä†ËΩΩÁöÑËß£ÊûêÈò∂ÊÆµÔºå‰ºöÂ∞ÜÂÖ∂‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜÁ¨¶Âè∑ÂºïÁî®ËΩ¨Êç¢‰∏∫Áõ¥Êé•ÂºïÁî®ÔºåËøôÈÉ®ÂàÜË¶ÅÂÖ∑Â§á‰∏ãÈù¢Ëøô‰∏™Êù°‰ª∂ÔºöÊñπÊ≥ïÂú®Á®ãÂ∫èËøêË°å‰πãÂâçÂ∞±Êúâ‰∏Ä‰∏™ÂèØÁ°ÆÂÆöÁöÑË∞ÉÁî®Ê®°ÊùøÔºåÂπ∂‰∏îËøô‰∏™ÊñπÊ≥ïÁöÑË∞ÉÁî®ÁâàÊú¨Âú®ËøêË°åÊúüÈó¥ÊòØ‰∏çÂèØ‰ª•ÊîπÂèòÁöÑÔºå‰πüÂ∞±ÊòØËØ¥ÂøÖÈ°ªÂú®javacÁºñËØëÊó∂Â∞±ÈúÄË¶ÅÁ°ÆÂÆö‰∏ãÊù•ÔºåÁ¨¶Âêà‚ÄúÁºñËØëÊúüÂèØÁü•ÔºåËøêË°åÊúü‰∏çÂèØÂèòÁöÑË¶ÅÊ±Ç‚Äù„ÄÇËøôÁ±ªÊñπÊ≥ïË∞ÉÁî®Â∞±Áß∞‰πã‰∏∫Ëß£Êûê„ÄÇ Á¨¶ÂêàËøô‰∏™Ë¶ÅÊ±ÇÁöÑÊúâÔºö ÈùôÊÄÅÊñπÊ≥ïÔºå‰∏éÁ±ªÂûãÁõ¥Êé•Áõ∏ÂÖ≥Ôºå‰∏ç‰ºöË¢´ÈáçÂÜôÔºõ private‰øÆÈ•∞ÁöÑÊñπÊ≥ïÔºå‰∏ç‰ºöË¢´Â§ñÈÉ®ËÆøÈóÆËÄåÂØºËá¥ÈáçÂÜôÔºõ ÂÆû‰æãÂåñÊûÑÈÄ†Âô®\ÊñπÊ≥ïÔºå‰πüÂêåÊ†∑Á¨¶Âêà‚ÄúÁºñËØëÊúüÂèØÁü•ÔºåËøêË°åÊúü‰∏çÂèØÂèò‚ÄùÔºå‰∏ç‰ºöË¢´ÈáçÂÜôÔºõ Áà∂Á±ªÊñπÊ≥ï„ÄÇËøô‰∏™Âú∞ÊñπÊòØÈöæÁÇπÔºåÂèØËÉΩÁêÜËß£‰∏ä‰ºöÊúâÁÇπÊ≠ß‰πâÔºåËøôÈáåËÆ≤ÁöÑÊòØÊåáÂú®ÈáçÂÜôÁöÑÊñπÊ≥ï‰∏≠Ë∞ÉÁî® super.ÊñπÊ≥ïÂêç()ÔºåÂú®ËøôÈáåË∞ÉÁî®Áà∂Á±ªÁöÑËøô‰∏™ÊñπÊ≥ïÔºåÂèØ‰ª•Á°Æ‰øù‰∏ç‰ºöË¢´ÈáçÂÜôÔºåÊòØÂõ∫ÂÆöÁöÑË∞ÉÁî®‰∫ÜËøô‰∏™ÊñπÊ≥ï„ÄÇÂ¶Ç‰∏ã‰æãÊâÄÁ§∫Ôºö 12345678910package JVM;public class SuperClass &#123; protected void A() &#123; System.out.println("aaaaaa"); &#125; protected void B() &#123; System.out.println("bbbbbb"); &#125;&#125; 1234567891011121314151617package JVM;public class SubClass extends SuperClass &#123; @Override public void A()&#123; super.A(); // invokespecial System.out.println(2222); &#125; public static void main(String[] args) &#123; test_heap_outOfMemory t = new test_heap_outOfMemory(); t.C(); SubClass subClass = new SubClass(); subClass.A(); // invokevirtual,Âõ†‰∏∫ÂèØËÉΩË¢´ÈáçÂÜô // subClass.B() ‰πüÊòØ invokevirtualÔºåÂõ†‰∏∫‰πüÂèØËÉΩË¢´ÈáçÂÜô &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869// class version 52.0 (52)// access flags 0x21public class JVM/SubClass extends JVM/SuperClass &#123; // compiled from: SubClass.java // access flags 0x1 public &lt;init&gt;()V L0 LINENUMBER 3 L0 ALOAD 0 INVOKESPECIAL JVM/SuperClass.&lt;init&gt; ()V RETURN L1 LOCALVARIABLE this LJVM/SubClass; L0 L1 0 MAXSTACK = 1 MAXLOCALS = 1 // access flags 0x1 public A()V L0 LINENUMBER 6 L0 ALOAD 0 INVOKESPECIAL JVM/SuperClass.A ()V L1 LINENUMBER 7 L1 GETSTATIC java/lang/System.out : Ljava/io/PrintStream; SIPUSH 2222 INVOKEVIRTUAL java/io/PrintStream.println (I)V L2 LINENUMBER 8 L2 RETURN L3 LOCALVARIABLE this LJVM/SubClass; L0 L3 0 MAXSTACK = 2 MAXLOCALS = 1 // access flags 0x9 public static main([Ljava/lang/String;)V L0 LINENUMBER 11 L0 NEW JVM/test_heap_outOfMemory DUP INVOKESPECIAL JVM/test_heap_outOfMemory.&lt;init&gt; ()V ASTORE 1 L1 LINENUMBER 12 L1 ALOAD 1 INVOKEVIRTUAL JVM/test_heap_outOfMemory.C ()V L2 LINENUMBER 13 L2 NEW JVM/SubClass DUP INVOKESPECIAL JVM/SubClass.&lt;init&gt; ()V ASTORE 2 L3 LINENUMBER 14 L3 ALOAD 2 INVOKEVIRTUAL JVM/SubClass.A ()V L4 LINENUMBER 17 L4 RETURN L5 LOCALVARIABLE args [Ljava/lang/String; L0 L5 0 LOCALVARIABLE t LJVM/test_heap_outOfMemory; L1 L5 1 LOCALVARIABLE subClass LJVM/SubClass; L3 L5 2 MAXSTACK = 2 MAXLOCALS = 3&#125; Â¶Ç‰∏ä‰æãÊâÄÁ§∫ÔºåË∞àÂà∞ÁöÑ invokespecial„ÄÅinvokestatic Â∞±ÊòØËß£ÊûêÈò∂ÊÆµË∞ÉÁî®ÁöÑÊåá‰ª§ÔºåÂÖ∑‰ΩìÁöÑË∞ÉÁî®Â≠óËäÇÁ†ÅÊåá‰ª§Â¶Ç‰∏ãÔºö invokestaticÔºöË∞ÉÁî®ÈùôÊÄÅÊñπÊ≥ïÔºõ invokespecialÔºöË∞ÉÁî®ÂÆû‰æãÊûÑÈÄ†Âô®ÊñπÊ≥ï \„ÄÅÁßÅÊúâÊñπÊ≥ï„ÄÅÁà∂Á±ªÊñπÊ≥ïÔºõ invokevirtualÔºöË∞ÉÁî®ÊâÄÊúâÁöÑËôöÊñπÊ≥ïÔºõ invokeinterfaceÔºöË∞ÉÁî®Êé•Âè£ÊñπÊ≥ïÔºå‰ºöÂú®ËøêË°åÊó∂Á°ÆËÆ§‰∏Ä‰∏™ÂÆûÁé∞Ê≠§Êé•Âè£ÁöÑÂØπË±°Ôºõ invokedynamicÔºöJDK1.7Êñ∞Âä†ÂÖ•ÁöÑ‰∏Ä‰∏™ËôöÊãüÊú∫Êåá‰ª§ÔºåÁõ∏ÊØî‰∫é‰πãÂâçÁöÑÂõõÊù°Êåá‰ª§Ôºå‰ªñ‰ª¨ÁöÑÂàÜÊ¥æÈÄªËæëÈÉΩÊòØÂõ∫ÂåñÂú®JVMÂÜÖÈÉ®ÔºåËÄå invokedynamic ÂàôÁî®‰∫éÂ§ÑÁêÜÊñ∞ÁöÑÊñπÊ≥ïÂàÜÊ¥æÔºöÂÆÉÂÖÅËÆ∏Â∫îÁî®Á∫ßÂà´ÁöÑ‰ª£Á†ÅÊù•Á°ÆÂÆöÊâßË°åÂì™‰∏Ä‰∏™ÊñπÊ≥ïË∞ÉÁî®ÔºåÂè™ÊúâÂú®Ë∞ÉÁî®Ë¶ÅÊâßË°åÁöÑÊó∂ÂÄôÔºåÊâç‰ºöËøõË°åËøôÁßçÂà§Êñ≠,‰ªéËÄåËææÂà∞Âä®ÊÄÅËØ≠Ë®ÄÁöÑÊîØÊåÅ„ÄÇ(Invoke dynamic method) Âè™Ë¶ÅË¢´ invokestatic„ÄÅinvokespecialË∞ÉÁî®ÁöÑÊñπÊ≥ïÈÉΩÊòØÂèØ‰ª•Âú®Ëß£ÊûêÈò∂ÊÆµÁ°ÆÂÆöÂîØ‰∏ÄÁöÑË∞ÉÁî®ÁâàÊú¨ÁöÑÔºåÊâÄ‰ª•‰ªñ‰ª¨Âú®Á±ªÂä†ËΩΩÁöÑÊó∂ÂÄôÂ∞±‰ºöÊääÁ¨¶Âè∑ÂºïÁî®ËΩ¨Êç¢‰∏∫ÂØπËØ•ÊñπÊ≥ïÁöÑÁõ¥Êé•ÂºïÁî®ÔºåËøôÂõõÁ±ªÊñπÊ≥ïÔºàÈùôÊÄÅÊñπÊ≥ï„ÄÅÂÆû‰æãÊûÑÈÄ†Âô®ÊñπÊ≥ï„ÄÅÁßÅÊúâÊñπÊ≥ï„ÄÅÁà∂Á±ªÊñπÊ≥ïÔºâÁªüÁß∞‰∏∫ÈùûËôöÊñπÊ≥ï„ÄåÂΩìÁÑ∂ÂÖ∂ÂÆûÈùûËôöÊñπÊ≥ïÔºåËøòÊúâ‰∏ÄÁ±ªÔºåÈÇ£Â∞±ÊòØÁî® final ‰øÆÈ•∞ÁöÑÊñπÊ≥ï„ÄçÔºåÂÖ∂‰ªñÊñπÊ≥ïÁªüÁß∞‰∏∫ËôöÊñπÊ≥ïÔºàfinal ‰øÆÈ•∞ÁöÑÊñπÊ≥ïÈô§Â§ñÔºâ„ÄÇÂÖ∂ÂÆû final ‰øÆÈ•∞ÁöÑÊñπÊ≥ïÔºå‰πüÊòØÂú®ÁºñËØëÊúüÈó¥Â∞±ÂèØ‰ª•Á°ÆÂÆöÁöÑÔºå‰ΩÜÊòØÂÆÉÊØîËæÉÁâπÊÆäÔºåÂπ∂‰∏çÊòØÁî®ÁöÑ‰∏äËø∞‰∏§‰∏™Êåá‰ª§ÂÆåÊàêË∞ÉÁî®ÔºåËÄåÊòØ‰ΩøÁî®‰∫Ü invokevirtual‚Ä¶ Ëá≥‰∫é‰∏∫‰ªÄ‰πàÔºåÊàëËßâÂæóËøô‰ΩçÊúãÂèãËØ¥ÁöÑÊå∫Â•ΩÁöÑÁöÑÔºö ‰ΩúËÄÖÔºöRednaxelaFXÈìæÊé•Ôºöhttps://www.zhihu.com/question/45131640/answer/98820081Êù•Ê∫êÔºöÁü•‰πéËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ QÔºö‰∏∫‰ªÄ‰πàjava‰∏≠Ë∞ÉÁî®finalÊñπÊ≥ïÊòØÁî®invokevirtualÊåá‰ª§ËÄå‰∏çÊòØinvokespecial? AÔºö ‰∏çÁü•ÈÅìÂΩìÊó∂È´òÂè∏‰ª§ÂíåÂõ¢ÈòüÊàêÂëòÂÆûÈôÖÊòØÂá∫‰∫é‰ªÄ‰πàÂéüÂõ†ËøôÊ†∑ËÆæËÆ°ÁöÑ„ÄÇËøôÈáåÊàëÂè™ËÉΩÂÅö‰∫õÊé®Êñ≠„ÄÇ Ë¢´final‰øÆÈ•∞ÁöÑnon-privateÊñπÊ≥ïÔºåÁ°ÆÂÆûË∑üprivateÊñπÊ≥ï‰∏ÄÊ†∑ÂèØ‰ª•ÈùôÊÄÅÂà§ÂÆöË∞ÉÁî®ÁõÆÊ†á„ÄÇÊàë‰ª¨ËØ¥Ëøô‰∏§ÁßçÊñπÊ≥ïÈÉΩÂèØ‰ª•Ë¢´statically resolved„ÄÇ ÂÆÉ‰ª¨ÊúÄÂ§ßÁöÑ‰∏Ä‰∏™Â∑ÆÂà´ÊòØÔºö ‰∏Ä‰∏™privateÊñπÊ≥ïÊòØÂè™ÂèØËÉΩÂú®‰∏Ä‰∏™Á±ªÈáåÂ£∞ÊòéÂπ∂ÂÆö‰πâÁöÑÔºåÂÆÉ‰∏çÂèØËÉΩË¶ÜÂÜôÔºàoverrideÔºâ‰ªª‰ΩïÂü∫Á±ªÁöÑÊñπÊ≥ï„ÄÇ ËÄå‰∏Ä‰∏™final non-privateÊñπÊ≥ïÂàôÂèØ‰ª•Ë¶ÜÂÜôÂü∫Á±ªÁöÑËôöÊñπÊ≥ïÔºåÂπ∂‰∏îÂèØ‰ª•Ë¢´Âü∫Á±ªÂºïÁî®ÈÄöËøáinvokevirtualË∞ÉÁî®Âà∞„ÄÇ ÂâçËÄÖÂæàÊòéÊòæÔºå‰∏æ‰æãËØ¥Êòé‰∏Ä‰∏ãÂêéËÄÖ„ÄÇ 1234567891011121314151617181920&gt; &gt; class Base &#123;&gt; void foo() &#123; System.out.println("Base"); &#125;&gt; &#125;&gt; &gt; class Derived extends Base &#123;&gt; @Override&gt; final void foo() &#123; System.out.println("Derived"); &#125;&gt; &#125;&gt; &gt; public class Test &#123;&gt; public static void main(String[] args) &#123;&gt; Derived d = new Derived();&gt; d.foo(); // (1) È¢ò‰∏ªÁöÑÈóÆÈ¢òÊòØ‰∏∫‰ªÄ‰πàËøô‰∏™ÊÉÖÂÜµ‰∏ã‰ªçÁÑ∂Áî®invokevirtual&gt; Base b = d; // (2) BaseÁ±ªÂûãÂºïÁî®ÊåáÂêëDerivedÁ±ªÂûãÂÆû‰æã&gt; b.foo(); // ÈÄöËøáinvokevirtualË∞ÉÁî®Âà∞final Derived.foo()&gt; &#125;&gt; &#125;&gt; &gt; ÊâÄ‰ª•ÔºåÂéüÂßãËÆæËÆ°ËÄÖÊàñËÆ∏ÊòØÂá∫‰∫é‰∏ÄËá¥ÊÄßÁöÑËÄÉËôëÔºåÈÄâÊã©ËÆ©Ëøô‰∫õfinalÊñπÊ≥ï‰πüÁî®invokevirtualÊù•Ë∞ÉÁî®ÔºåËÄå‰∏çÊòØÁî®invokespecial„ÄÇÂè¶Â§ñÊ≠£Â¶ÇËØÑËÆ∫Âå∫ÊâÄËØ¥ÔºåËøô‰∏ÄËá¥ÊÄß‰πüÂ∏¶Êù•‰∫ÜÊõ¥Â•ΩÁöÑ‰∫åËøõÂà∂ÂÖºÂÆπÊÄß‚Äî‚ÄîÂ¶ÇÊûú‰∏ä‰æã‰∏≠Test‰∏éDerivedÂàÜÁ¶ªÁºñËØëÔºåÂú®TestÁºñËØëÊó∂Derived.foo()ÊòØfinalÔºåËÄåÂêéÊù•DerivedÂéªÊéâ‰∫Üfoo()ÁöÑfinalÂπ∂‰∏îÂçïÁã¨ÈáçÊñ∞ÁºñËØë‰∫ÜÁöÑËØùÔºåÂ∑≤ÁºñËØëÁöÑTest‰ª£Á†Å‰ªçÁÑ∂ÂèØ‰ª•Ê≠£Á°ÆÊâßË°å‚Äî‚ÄîÁîöËá≥Â¶ÇÊûúDerivedËøõ‰∏ÄÊ≠•ÊúâÂ≠êÁ±ªË¶ÜÂÜô‰∫Üfoo()‰πüÊ≤°ÈóÆÈ¢ò„ÄÇ ‰∫åËøõÂà∂ÂÖºÂÆπÊÄßÔºàbinary compatibilityÔºâÂíåÂàÜÁ¶ªÁºñËØëÔºàseparate compilationÔºâÂèØÊòØJavaÁöÑÂçñÁÇπÔºåÁÑ∂ËÄåÂêåÊó∂‰πüÊòØÊØíÁò§‚Ä¶ÔºàÂèπÊ∞î ÂÖ≥‰∫éÊÄßËÉΩ ‰∫ãÂÆû‰∏äÊ≠§Â§ÑÂú®ClassÊñá‰ª∂Èáå‰ΩøÁî®invokevirtualÊù•ÂÆûÁé∞ÂØπfinalÊñπÊ≥ïÁöÑË∞ÉÁî®Âπ∂‰∏ç‰ºöÂΩ±Âìç‰∏Ä‰∏™ÂÆûÁé∞ÂæóÂ•ΩÁöÑJVMÁöÑÊÄßËÉΩ„ÄÇHotSpot VM‰ºöÂØπ‰∏äËø∞(1)ÁöÑÊÉÖÂÜµÂú®Ëß£ÈáäÂô®ÈáåÂèØ‰ª•ÊääinvokevirtualÊîπÂÜô‰∏∫‰∏Ä‰∏™Ë°å‰∏∫Ë∑üinvokespecialÁõ∏‰ººÁöÑÂÜÖÈÉ®Â≠óËäÇÁ†ÅÊåá‰ª§ÔºåÂè´ÂÅöfast_invokevfinalÔºå‰∏çÈúÄË¶ÅÊü•vtableÂ∞±ÂèØ‰ª•Ë∞ÉÁî®Âà∞ÁõÆÊ†áÊñπÊ≥ïÔºà‰∏çËøáÁõÆÂâçÂú®x86‰∏äHotSpotÂπ∂Ê≤°Êúâ‰ΩøÁî®Ëøô‰∏™‰ºòÂåñÔºâ„ÄÇSPARC‰∏äÁöÑ‰æãÂ≠êÁúãËøôÈáåÔºöjdk8u/jdk8u/hotspot: d109bda16490 src/cpu/sparc/vm/templateTable_sparc.cppËÄåÂú®JITÁºñËØëÂô®ÈáåËøôÁßçinvokevirtual‰πü‰ºöË¢´Áúã‰ΩúË∑üinvokespecial‰∏ÄÊ†∑Êù•Â§ÑÁêÜ„ÄÇ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÂèØ‰ª•ÁúãC1ËøôÈáåÔºöjdk8u/jdk8u/hotspot: d109bda16490 src/share/vm/c1/c1_GraphBuilder.cpp ÈùôÊÄÅËß£ÊûêÁöÑÊñπÊ≥ïË∞ÉÁî®Áß∞‰∏∫Ëß£ÊûêË∞ÉÁî®ÔºåËøòÊúâ‰∏ÄÁßçË∞ÉÁî®ÊñπÂºèÔºåÁß∞‰∏∫ ÂàÜÊ¥æË∞ÉÁî®ÔºàDispatchÔºâ 3.2 ÂàÜÊ¥æË∞ÉÁî®Âç≥Â∞ÜË¶ÅËÆ≤ÁöÑÂàÜÊ¥æË∞ÉÁî®ÔºåÂÖ∂ÂÆûÂõäÊã¨‰∫ÜËß£ÊûêË∞ÉÁî®ÁöÑÊ≠•È™§ÔºåËß£Êûê‰∏éÂàÜÊ¥æÂπ∂‰∏çÊòØÊéí‰ªñ‰∫íÊñ•ÁöÑÂÖ≥Á≥ªÔºåËÄåÊòØ‰∏çÂêåÂ±ÇÊ¨°‰∏äÁ≠õÈÄâÂíåÁ°ÆÂÆöÁõÆÊ†áÊñπÊ≥ïÁöÑËøáÁ®ãÔºå‰∫åËÄÖÊòØËÅîÂêàËµ∑Êù•‰∏ÄËµ∑‰ΩøÁî®ÁöÑÔºåËøôÈáåÁöÑÂàÜÊ¥æÊõ¥Â§öÁöÑÊòØÊè≠Á§∫Â§öÊÄÅÊÄßÁöÑÁâπÂæÅ„ÄÇ„ÄåÂ•ΩÂè≠ÔºåËøô‰∏ÄÂùóÂÖ∂ÂÆûÊàëÊòØÊúâÁÇπ‰∏çËµûÂêåÁöÑÔºåÊàëËßâÂæóÂ∞±ÊòØÊúâÁÇπ‰∫íÊñ•ÁöÑÊÑüËßâÂïäÔºå‰∏Ä‰∏™ÊòØÁî®Âú®ÈùûËôöÂáΩÊï∞Ôºå‰∏Ä‰∏™Áî®Âú®‰∫ÜËôöÂáΩÊï∞„ÄÇ„Äç 3.2.1 ÈùôÊÄÅÂàÜÊ¥æ ‚Äî ÈáçËΩΩ‰πüÂ∞±ÊòØÊàë‰ª¨Â∏∏ËØ¥ÁöÑÂ§öÊÄÅ‰∏≠ÁöÑÈáçËΩΩËøáÁ®ã„ÄÇËôöÊãüÊú∫ÔºàÂáÜÁ°ÆÁöÑËØ¥ÊòØÁºñËØëÊúüÔºâÂú®ÈáçËΩΩÊó∂ÊòØÈÄöËøáÂèÇÊï∞ÁöÑÈùôÊÄÅÁ±ªÂûãËÄå‰∏çÊòØÂÆûÈôÖÁ±ªÂûã‰Ωú‰∏∫Âà§ÂÆö‰æùÊçÆÁöÑ„ÄÇÂπ∂‰∏îÁî±‰∫éÈùôÊÄÅÁ±ªÂûãÂú®ÁºñËØëÊúüÈó¥Â∞±ÂèØÁü•ÔºåÊâÄ‰ª•Âú®ÁºñËØëÊúüÈó¥Ôºåjavac ÁºñËØëÊúüÂ∞±Ê†πÊçÆÂèÇÊï∞ÁöÑÈùôÊÄÅÁ±ªÂûãÂÜ≥ÂÆö‰∫Ü‰ΩøÁî®Âì™‰∏™ÈáçËΩΩÁâàÊú¨„ÄÇ ÊâÄÊúâ‰æùËµñÈùôÊÄÅÁ±ªÂûãÊù•ÂÆö‰ΩçÊñπÊ≥ïÊâßË°åÁâàÊú¨ÁöÑÂàÜÊ¥æÂä®‰ΩúÔºåÂ∞±Áß∞‰∏∫ÈùôÊÄÅÂàÜÊ¥æÔºåÊúÄÂÖ∏ÂûãÁöÑÂ∞±ÊòØÊñπÊ≥ïÈáçËΩΩÔºåÂõ†Ê≠§Á°ÆÂÆöÈùôÊÄÅÂàÜÊ¥æÁöÑÂä®‰ΩúÂÆûÈôÖ‰∏äÂπ∂‰∏çÊòØÁî±jvmÊù•ÂÆåÊàêÁöÑ„ÄÇÂè¶Â§ñÔºåÁºñËØëÊúüËôΩÁÑ∂ËÉΩÂ§üÁ°ÆÂÆöÂá∫ÊñπÊ≥ïÁöÑÈáçËΩΩÁâàÊú¨Ôºå‰ΩÜÊòØÂú®ÂæàÂ§öÊÉÖÂÜµ‰∏ãËøô‰∏™ÈáçËΩΩÁâàÊú¨Âπ∂‰∏çÊòØ‚ÄúÂîØ‰∏ÄÁöÑ‚ÄùÔºåÂæÄÂæÄÂè™ËÉΩÂéªÁ°ÆÂÆö‰∏Ä‰∏™‚ÄúÊõ¥Âä†ÂêàÈÄÇÁöÑ‚ÄùÁâàÊú¨ÔºåÁîöËá≥ÊúâÁöÑÊó∂ÂÄô‰ºöÂõ†‰∏∫Á±ªÂûã‰∏çÊòéÁ°ÆÔºåÈÄâÊã©ËøáÂ§öÔºàÂÆûÁé∞ÁöÑÊé•Âè£ÂæàÂ§öÔºâÔºåËÄåÂØºËá¥Êä•Èîô„ÄÇ ÂΩìÁÑ∂ÔºåËøôÈáåÂæóÊòéÁ°Æ‰∏Ä‰∏ãÈùôÊÄÅÁ±ªÂûãÂíåÂÆûÈôÖÁ±ªÂûãÁöÑÊ¶ÇÂøµ„ÄÇ Human human = new Man() Âõ∫ÂÆöÂØπË±°.ÊñπÊ≥ï(human) ÈùôÊÄÅÁ±ªÂûãÔºöÂèòÈáè human ÁöÑÈùôÊÄÅÁ±ªÂûã‰∏∫ Human Âä®ÊÄÅÁ±ªÂûãÔºöÂèòÈáè human ÁöÑÂä®ÊÄÅÁ±ªÂûã‰∏∫ Man ÁÆÄÂçïËÆ∞ÂøÜÔºåÈáçËΩΩÂ∞±ÊòØÂêå‰∏Ä‰∏™Á±ª‰∏ãÂêåÂêçÊñπÊ≥ïÂèÇÊï∞‰∏çÂêåÔºåÊâÄ‰ª•ÂÜ≥ÂÆöÊùÉÂú®ÂèÇÊï∞ÔºåÂ¶ÇÊûúÂèÇÊï∞‰∏™Êï∞Áõ∏ÂêåÔºåÈÇ£ÂÜ≥ÂÆöÊùÉÂ∞±ÊòØÂèÇÊï∞ÁöÑÁ±ªÂûãÔºåËÄåÂèÇÊï∞ÁöÑÁ±ªÂûãÂú®ÁºñËØëÊúüÈó¥Â∞±Â∑≤ÁªèÁ°ÆÂÆö‰∫ÜÔºåÊòØÁî±ÂÖ∂ÈùôÊÄÅÁ±ªÂûãÂÜ≥ÂÆöÁöÑ„ÄÇ 3.2.2 Âä®ÊÄÅÂàÜÊ¥æ ‚Äî ÈáçÂÜôÈáçÂÜôË∑üÈáçËΩΩÂæà‰∏ç‰∏ÄÊ†∑ÔºåÈáçÂÜôÊòØÁ±ªÂØπÊé•Âè£ÊàñÁà∂Á±ªÊñπÊ≥ïÁöÑÈáçÂÜôÔºåËøô‰∏™Êó∂ÂÄôÂØπË±°ÈÉΩ‰∏ç‰∏ÄÊ†∑‰∫ÜÔºåÊâÄ‰ª•‰ºöÁî®Âà∞ÂÆûÈôÖÁ±ªÂûã„ÄÇ People human = new Human(); human.ÊñπÊ≥ï() ÁÆÄÂçïËÆ∞ÂøÜÔºåÈáçÂÜôÂ∞±ÊòØ‰∏Ä‰∏™Á±ªË¶ÜÁõñ‰∫ÜÊé•Âè£ÊàñËÄÖÁà∂Á±ªÁöÑÊñπÊ≥ïÔºåÊ≠§Êó∂ÁöÑÂèòÈáèÊòØ‰∏Ä‰∏™ÂØπË±°Ôºå‰∏çÊòØ‰∏äÊñáÁöÑÂèÇÊï∞ÔºåÊâÄ‰ª•Ê≠§Êó∂ËÇØÂÆöÂ∞±ÊòØÁî±Âä®ÊÄÅÁ±ªÂûãÂÜ≥ÂÆö‰∫Ü„ÄÇ 3.2.3 ÂçïÂàÜÊ¥æÂíåÂ§öÂàÜÊ¥æÂÆóÈáèÔºöÊñπÊ≥ïÁöÑÊé•Êî∂ËÄÖ‰∏éÊñπÊ≥ïÁöÑÂèÇÊï∞ÁªüÁß∞‰∏∫ÊñπÊ≥ïÁöÑÂÆóÈáè„ÄÇ ÈùôÊÄÅÂàÜÊ¥æÊòØÂ§öÂàÜÊ¥æÁ±ªÂûãÔºåÂä®ÊÄÅÂàÜÊ¥æÊòØÂçïÂàÜÊ¥æÁ±ªÂûã‚Ä¶„ÄåÂ•ΩÁªïÂïä‚Ä¶‰∏çÂ§™ÊáÇ‚Ä¶„Äç ÊÄªËÄåË®Ä‰πãÔºåÈùôÊÄÅÂ§öÂàÜÊ¥æ„ÄÅÂä®ÊÄÅÂçïÂàÜÊ¥æ„ÄÇ„ÄÇ„ÄÇ„ÄÇ 3.2.4 Âä®ÊÄÅÂçïÂàÜÊ¥æÁöÑÂÆûÁé∞‰ºòÂåñÁî±‰∫éÂä®ÊÄÅÂçïÂàÜÊ¥æÊòØÈùûÂ∏∏È¢ëÁπÅÁöÑÂä®‰ΩúÔºåÊâÄ‰ª•Âü∫‰∫éÊÄßËÉΩÁöÑËÄÉËôëÔºå‰ª•Á©∫Èó¥Êç¢Êó∂Èó¥ÔºåÊúÄÂ∏∏Áî®ÁöÑ‚ÄúÁ®≥ÂÆö‰ºòÂåñ‚ÄùÊâãÊÆµÂ∞±ÊòØÂú®ÊñπÊ≥ïÂå∫‰∏≠Âª∫Á´ã‰∏Ä‰∏™ ËôöÊñπÊ≥ïË°®„ÄÇÂ¶ÇÊûúÂ≠êÁ±ªÈáçÂÜô‰∫ÜÁà∂Á±ªÊñπÊ≥ïÔºåÂàô‰∏§ËÄÖÂØπË±°ÁöÑÊñπÊ≥ïÁöÑÂÖ•Âè£Âú∞ÂùÄ‰∏ç‰∏ÄÊ†∑ÔºåÂ¶ÇÊûúÂ≠êÁ±ªÊ≤°ÊúâÈáçÂÜôÔºåÂàôÈÉΩÊåáÂêëÁà∂Á±ªÁöÑÊñπÊ≥ïÁöÑÂÖ•Âè£Âú∞ÂùÄ„ÄÇ Èô§‰∫ÜÂª∫Á´ãËôöÊñπÊ≥ïË°®ÔºåËøò‰ºö‰ΩøÁî® ‚ÄúÂÜÖËÅîÁºìÂ≠ò‚Äù Âíå Âü∫‰∫é ‚ÄúÁ±ªÂûãÁªßÊâøÂÖ≥Á≥ªÂàÜÊûê‚Äù ÊäÄÊúØÁöÑÂÆàÊä§ÂÜÖËÅî‰∏§ÁßçÈùûÁ®≥ÂÆöÁöÑ‰ºòÂåñÊñπÂºè„ÄÇ 4. Âü∫‰∫éÊ†àÁöÑÂ≠óËäÇÁ†ÅËß£ÈáäÊâßË°åÂºïÊìé‰∏ä‰∏ÄËäÇËÆ≤ÂÆå‰∫ÜÂ¶Ç‰ΩïË∞ÉÁî®ÊñπÊ≥ïÔºåËøô‰∏ÄËäÇËÆ≤Â¶Ç‰ΩïÊâßË°åÊñπÊ≥ïÂÜÖÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§„ÄÇÊâßË°åÊñπÊ≥ïÂÜÖÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§Êúâ‰∏§ÁßçÊñπÊ≥ïÔºöÈÄöËøáËß£ÈáäÂô®Ëß£ÈáäÊâßË°å Âíå ÈÄöËøá JIT Á≠âÂç≥Êó∂ÁºñËØëÂô®ÁºñËØëÊâßË°åÔºå‰∏ãÈù¢ËÆ≤‰∏Ä‰∏ãÁ¨¨‰∏ÄÁßçÔºöÂü∫‰∫éÊ†àÁöÑÂ≠óËäÇÁ†ÅËß£ÈáäÊâßË°å„ÄÇ Java ÁºñËØëÂô®ËæìÂá∫ÁöÑÊåá‰ª§ÊµÅÔºåÂü∫Êú¨‰∏äÂ∞±ÊòØ‰∏ÄÁßçÂü∫‰∫éÊ†àÁöÑÊåá‰ª§ÈõÜÊû∂ÊûÑÔºåÊåá‰ª§ÊµÅÈáåÈù¢ÁöÑÊåá‰ª§Â§ßÈÉ®ÂàÜÈÉΩÊòØÈõ∂Âú∞ÂùÄÊåá‰ª§ÔºåÂõ†‰∏∫ÈÉΩ‰æùËµñÊìç‰ΩúÊï∞Ê†àËøõË°åÂ∑•‰Ωú„ÄÇËÄå‰∏ªÊµÅÁöÑÂü∫‰∫éÂØÑÂ≠òÂô®ÁöÑÊåá‰ª§ÈõÜ‰∏ÄËà¨ÈÉΩÊòØ‰∫åÂú∞ÂùÄÊåá‰ª§ÈõÜ„ÄÇ Âü∫‰∫éÊ†àÁöÑÊåá‰ª§ÈõÜÊúÄÂ§ß‰ºòÁÇπÂ∞±ÊòØÂèØÁßªÊ§çÊÄßÔºåÁºñËØëÂô®ÂÆûÁé∞Êõ¥ÁÆÄÂçï„ÄÅ‰ª£Á†ÅÊõ¥Á¥ßÂáë‚Ä¶‰ΩÜÊòØÁº∫ÁÇπÂ∞±ÊòØÊÖ¢,ËÄå‰∏îË¶ÅÈ¢ëÁπÅÁöÑÂÖ•Ê†àÂá∫Ê†àÔºåÊÑèÂë≥ÁùÄÈ¢ëÁπÅËÆøÈóÆÂÜÖÂ≠òÔºåÈÄüÂ∫¶Â∞±‰∏ãÊù•‰∫ÜÔºåËôΩÁÑ∂ÂèØ‰ª•ÈááÁî®Ê†àÈ°∂ÁºìÂ≠òÔºå‰ΩÜÊòØÊØïÁ´üÊ≤ªÊ†π‰∏çÊ≤ªÊú¨‚Ä¶ Á¨¨‰πùÁ´† Á±ªÂä†ËΩΩÂèäÊâßË°åÂ≠êÁ≥ªÁªüÁöÑÊ°à‰æã‰∏éÂÆûÊàòÂú® Class Êñá‰ª∂Ê†ºÂºèÂíåÊâßË°åÂºïÊìéÊìç‰ΩúËøôÈÉ®ÂàÜÈáåÔºåÂü∫Êú¨ÈÉΩÊòØÊúâËôöÊãüÊú∫Áõ¥Êé•ÊéßÂà∂ÔºåÁî®Êà∑Á®ãÂ∫èÊó†Ê≥ïÂØπÂÖ∂ËøõË°åÊîπÂèò„ÄÇËÉΩÈÄöËøáÁ®ãÂ∫èËøõË°åÊìç‰ΩúÁöÑÔºå‰∏ªË¶ÅÊòØÂ≠óËäÇÁ†ÅÁîüÊàê‰∏éÁ±ªÂä†ËΩΩÂô®Ëøô‰∏§ÈÉ®ÂàÜÁöÑÂäüËÉΩ„ÄÇ Á±ªÂä†ËΩΩÂô®ÁöÑÂ¢ûÂº∫ ‰∏ªË¶ÅÊòØ TomcatÊúçÂä°Âô®ÁöÑÁ±ªÂä†ËΩΩÂô® Âíå OSGi Ëøô‰∏™ÁÅµÊ¥ªÁöÑÁ±ªÂä†ËΩΩÂô®Êû∂ÊûÑ Â≠óËäÇÁ†ÅÁîüÊàêÊäÄÊúØ‰∏éÂä®ÊÄÅ‰ª£ÁêÜÁöÑÂÆûÁé∞ ÂåÖÊã¨ javac„ÄÅAOP„ÄÅÂä®ÊÄÅ‰ª£ÁêÜ„ÄÅÂèçÂ∞ÑÁ≠âÈÉΩÁî®Âà∞‰∫ÜÂ≠óËäÇÁ†ÅÁîüÊàêÊäÄÊúØ„ÄÇ Á¨¨ÂçÅÁ´† Êó©ÊúüÔºàÁºñËØëÊúüÔºâ‰ºòÂåñ1. Ê¶ÇËø∞ÁºñËØëÊúüÔºåÂú® java ÈáåÂàÜ‰∏∫‰∏âÁ±ªÔºå ‰∏ÄÁ±ªÊòØ‰ªé .java Êñá‰ª∂ ËΩ¨Âèò‰∏∫ .class Êñá‰ª∂ÁöÑËøáÁ®ãÔºåËøôÊòØÂâçÁ´ØÁºñËØëÁöÑËøáÁ®ãÔºåÊàë‰ª¨‰πãÂâçÊèêÂà∞ÁöÑÁºñËØëÂô®ÈÉΩÊòØÊåáËøô‰∏™„ÄÇ‰ΩøÁî®Âà∞ÁöÑÂâçÁ´ØÁºñËØëÂô®‰∏ÄËà¨Â∞±ÊòØ javac„ÄÇ ËøòÊúâÊåáËôöÊãüÊú∫ÁöÑÂêéÁ´ØËøêË°åÊúüÁºñËØëÔºåÊääÂ≠óËäÇÁ†ÅËΩ¨ÂèòÊàêÊú∫Âô®Á†ÅÁöÑËøáÁ®ã„ÄÇ‰ΩøÁî®Âà∞ÁöÑÂêéÁ´ØËøêË°åÊúüÁºñËØëÂô®Êúâ JITÁºñËØëÂô®ÔºàJust In Time CompilerÔºâ„ÄÇ ËøòÊúâ‰∏ÄÁ±ªÂæàÂ∞ëËßÅÔºåÁß∞‰∏∫ÈùôÊÄÅÊèêÂâçÁºñËØëÂô®ÔºàAOTÁºñËØëÂô®ÔºåAhead Of Time CompilerÔºâÁõ¥Êé•Êää *.java Êñá‰ª∂ÁºñËØëÊàêÊú¨Âú∞Êú∫Âô®‰ª£Á†ÅÁöÑËøáÁ®ã„ÄÇ ÂØπ‰∫é Javac ÁºñËØëÂô®Êù•ËØ¥ÔºåÂØπ‰ª£Á†ÅÁöÑËøêË°åÊïàÁéáÊ≤°Êúâ‰ºòÂåñÊé™ÊñΩÔºå‰ΩÜÊòØÂØπÁ®ãÂ∫èÂëòÁöÑÁºñÁ†ÅÈ£éÊ†ºÂíåÁºñÁ†ÅÊïàÁéáÂÅö‰∫ÜÂæàÂ§ö‰ºòÂåñÔºåÂØπ‰∫é JIT Êù•ËØ¥ÔºåÂØπÁ®ãÂ∫è‰ºòÂåñÂÅö‰∫ÜÂæàÂ§ö‰ºòÂåñ„ÄÇ 2. Javac ÁºñËØëÂô®2.1 ÁºñËØëËøáÁ®ãÁºñËØëËøáÁ®ãÂàÜ‰∏∫‰∏â‰∏™ËøáÁ®ãÔºö Ëß£Êûê‰∏éÂ°´ÂÖÖÁ¨¶Âè∑Ë°®ÁöÑËøáÁ®ãÔºõ ÊèíÂÖ•ÂºèÊ≥®Ëß£Â§ÑÁêÜÂô®ÁöÑÊ≥®Ëß£Â§ÑÁêÜËøáÁ®ãÔºõ ËØ≠‰πâÂàÜÊûê‰∏éÂ≠óËäÇÁ†ÅÁîüÊàêËøáÁ®ã„ÄÇ 2.2 Ëß£Êûê‰∏éÂ°´ÂÖÖÁ¨¶Âè∑Ë°®Ëß£ÊûêÊ≠•È™§ Áî± parseFiles() ÊñπÊ≥ïÂÆåÊàêÔºåÂåÖÊã¨‰∫ÜËØçÊ≥ïÂàÜÊûê„ÄÅËØ≠Ê≥ïÂàÜÊûêÔºõ ËØçÊ≥ïÂàÜÊûêÂ∞±ÊòØÂ∞ÜÊ∫ê‰ª£Á†ÅÁöÑÂ≠óÁ¨¶ÊµÅËΩ¨Âèò‰∏∫Ê†áËÆ∞ÔºàTokenÔºâÈõÜÂêàÔºåËØçÊ≥ïÂàÜÊûêËøáÁ®ãÁî± com.sun.tools.javac.parser.Scanner Á±ªÂÆûÁé∞Ôºõ ËØ≠Ê≥ïÂàÜÊûêÂ∞±ÊòØÊ†πÊçÆ Token Â∫èÂàóÊù•ÊûÑÈÄ†ÊäΩË±°ËØ≠Ê≥ïÊ†ëÁöÑËøáÁ®ãÔºåÊäΩË±°ËØ≠Ê≥ïÊ†ëÔºàASTÔºåAbstract Syntax TreeÔºâÊòØ‰∏ÄÁßçÁî®Êù•ÊèèËø∞Á®ãÂ∫è‰ª£Á†ÅËØ≠Ê≥ïÁªìÊûÑÁöÑÊ†ëÂΩ¢Ë°®Á§∫ÊñπÊ≥ï„ÄÇ Â°´ÂÖÖÁ¨¶Âè∑Ë°®Á¨¶Âè∑Ë°®ÔºàSymbol TableÔºâÊòØ‰∏ÄÁªÑÁî±Á¨¶Âè∑Âú∞ÂùÄÂíåÁ¨¶Âè∑‰ø°ÊÅØÊûÑÊàêÁöÑË°®Ê†ºÔºåÁ±ª‰ºº‰∫éÈîÆÂÄºÂØπÂΩ¢Âºè„ÄÇ Á¨¶Âè∑Ë°®‰∏≠ÊâÄÁôªËÆ∞ÁöÑ‰ø°ÊÅØÂú®ÁºñËØëÁöÑ‰∏çÂêåÈò∂ÊÆµÈÉΩË¶ÅÁî®Âà∞„ÄÇÂú®ËØ≠‰πâÂàÜÊûê‰∏≠ÔºåÁ¨¶Âè∑Ë°®ÊâÄÁôªËÆ∞ÁöÑÂÜÖÂÆπÂ∞ÜÁî®‰∫éËØ≠‰πâÊ£ÄÊü•Âíå‰∫ßÁîü‰∏≠Èó¥‰ª£Á†Å„ÄÇÂú®ÁõÆÊ†á‰ª£Á†ÅÁîüÊàêÈò∂ÊÆµÔºåÂΩìÂØπÁ¨¶Âè∑Ë°®ËøõË°åÂú∞ÂùÄÂàÜÈÖçÊó∂ÔºåÁ¨¶Âè∑Ë°®ÊòØÂú∞ÂùÄÂàÜÈÖçÁöÑ‰æùÊçÆ„ÄÇÁî± com.sun.tools.javac.comp.Enter Á±ªÂÆûÁé∞„ÄÇ 2.3 Ê≥®Ëß£Â§ÑÁêÜÂô®Á±ª‰ºº‰∫éÁºñËØëÂô®ÁöÑÊèí‰ª∂„ÄÇÊèíÂÖ•ÂºèÊ≥®Ëß£Â§ÑÁêÜÂô®ÁöÑÂàùÂßãËøáÁ®ãÊòØÂú® initPorcessAnnotations() ÊñπÊ≥ï‰∏≠ÂÆåÊàêÁöÑÔºåËÄåÊâßË°åËøáÁ®ãÊòØÂú® processAnnotations() ÊñπÊ≥ï‰∏≠ÂÆåÊàêÁöÑ„ÄÇ 2.4 ËØ≠‰πâÂàÜÊûê‰∏éÂ≠óËäÇÁ†ÅÁîüÊàêËØ≠Ê≥ïÂàÜÊûê‰πãÂêéÔºåÁºñËØëÂô®Ëé∑Âæó‰∫ÜÁ®ãÂ∫è‰ª£Á†ÅÁöÑÊäΩË±°ËØ≠Ê≥ïÊ†ëÔºåËØ≠Ê≥ïÊ†ëËÉΩË°®Á§∫‰∏Ä‰∏™ÁªìÊûÑÊ≠£Á°ÆÁöÑÊ∫êÁ®ãÂ∫èÁöÑÊäΩË±°Ôºå‰ΩÜÊòØÂç¥Êó†Ê≥ï‰øùËØÅÊ∫êÁ®ãÂ∫èÊòØÁ¨¶ÂêàÈÄªËæëÁöÑ„ÄÇËÄåËØ≠‰πâÂàÜÊûêÁöÑ‰∏ªË¶Å‰ªªÂä°Â∞±ÊòØÂØπÁªìÊûÑ‰∏äÊ≠£Á°ÆÁöÑÊ∫êÁ®ãÂ∫èËøõË°å‰∏ä‰∏ãÊñáÊúâÂÖ≥ÊÄßË¥®ÁöÑÂÆ°Êü•„ÄÇ ËØ≠‰πâÂàÜÊûêÁöÑÂÖ∑‰ΩìÊ≠•È™§Â¶Ç‰∏ãÔºö Ê†áËÆ∞Ê£ÄÊü•ÔºöÊ£ÄÊü•ËØ∏Â¶ÇÂèòÈáè‰ΩøÁî®ÂâçÊòØÂê¶Â∑≤ÁªèË¢´Â£∞Êòé„ÄÅÂèòÈáè‰∏éËµãÂÄº‰πãÈó¥ÁöÑÊï∞ÊçÆÁ±ªÂûãËÉΩÂ§üÂåπÈÖçÁ≠âÁ≠âÔºõ Êï∞ÊçÆÂèäÊéßÂà∂ÊµÅÂàÜÊûêÔºöÂõõÈòü‰∏ä‰∏ãÊñáÈÄªËæëÊõ¥Ëøõ‰∏ÄÊ≠•ÁöÑÈ™åËØÅÔºåÂèØ‰ª•ÁõëÂØüÂ§ÑËØ∏Â¶ÇÁ®ãÂ∫èÂ±ÄÈÉ®ÂèòÈáèÂú®‰ΩøÁî®ÂâçÊòØÂê¶ÊúâËµãÂÄº„ÄÅÊñπÊ≥ïÁöÑÊØèÊù°Ë∑ØÂæÑÊòØÂê¶ÈÉΩÊúâËøîÂõûÂÄº„ÄÅÊòØÂê¶ÊâÄÊúâÁöÑÂèóÊü•ÂºÇÂ∏∏ÈÉΩË¢´Ê≠£Á°ÆÂ§ÑÁêÜ‰∫ÜÁ≠âÈóÆÈ¢ò„ÄÇ Ëß£ËØ≠Ê≥ïÁ≥ñÔºöËØ≠Ê≥ïÁ≥ñÔºå‰πüÁß∞Á≥ñË°£ËØ≠Ê≥ïÔºåÊåáÁöÑÊòØÂú®ËÆ°ÁÆóÊú∫ËØ≠Ë®Ä‰∏≠Ê∑ªÂä†ÁöÑÊüêÁßçËØ≠Ê≥ïÔºåËøôÁßçËØ≠Ê≥ïÂØπËØ≠Ë®ÄÁöÑÂäüËÉΩÂπ∂Ê≤°ÊúâÂΩ±ÂìçÔºå‰ΩÜÊòØ‰ºöÊõ¥Êñπ‰æøÁ®ãÂ∫èÂëò‰ΩøÁî®„ÄÇÈÄöÂ∏∏Êù•ËØ¥ËØ≠Ê≥ïÁ≥ñËÉΩÂ§üÂ¢ûÂä†Á®ãÂ∫èÁöÑÂèØËØªÊÄßÔºåÂáèÂ∞ëÁ®ãÂ∫èÂá∫ÈîôÁöÑÊú∫‰ºö„ÄÇÁî± desugar() ÊñπÊ≥ïËß¶Âèë„ÄÇ Â≠óËäÇÁ†ÅÁîüÊàêÔºåËøôÊòØÁºñËØëËøáÁ®ãÁöÑÊúÄÂêé‰∏Ä‰∏™Èò∂ÊÆµÔºåÊääÂâçÈù¢ÂêÑ‰∏™Ê≠•È™§ÁîüÊàêÁöÑ‰ø°ÊÅØÔºàËØ≠Ê≥ïÊ†ë„ÄÅÁ¨¶Âè∑Ë°®ÔºâËΩ¨Êç¢ÊàêÂ≠óËäÇÁ†ÅÂÜôÂà∞Á£ÅÁõòÂéªÔºåËøòËøõË°å‰∫ÜÂ∞ëÈáèÁöÑ‰ª£Á†ÅÊ∑ªÂä†ÂíåËΩ¨Êç¢Â∑•‰ΩúÔºå‰æãÂ¶Ç‰πãÂâç‰∏ÄÁõ¥Ê≤°ÊúâËß£ÂÜ≥ÁöÑ Á±ªÊûÑÈÄ†Âô® \ ËøòË¶Å ÂÆû‰æãÊûÑÈÄ†Âô® \ÊñπÊ≥ï„ÄåËøôÈáåÁöÑÂÆû‰æãÊûÑÈÄ†Âô®‰∏çÊòØÈªòËÆ§ÁöÑÊûÑÈÄ†Âô®„ÄçÂ∞±ÊòØÂú®Ëøô‰∏™Èò∂ÊÆµË¢´Ê∑ªÂä†Âà∞ËØ≠Ê≥ïÊ†ë‰πã‰∏≠ÂéªÁöÑ„ÄÇ 3. Java ËØ≠Ê≥ïÁ≥ñÁöÑÂë≥ÈÅì3.1 Ê≥õÂûãÊú¨Ë¥®ÊòØÂèÇÊï∞ÂåñÁ±ªÂûãÔºå‰πüÂ∞±ÊòØËØ¥ÊâÄÊìç‰ΩúÁöÑÊï∞ÊçÆÁ±ªÂûãË¢´ÊåáÂÆö‰∏∫‰∏Ä‰∏™ÂèÇÊï∞ÔºåËøôÁßçÂèÇÊï∞Á±ªÂûãÂèØ‰ª•Áî®Âú®Á±ª„ÄÅÊé•Âè£„ÄÅÊñπÊ≥ïÁöÑÂàõÂª∫‰∏≠ÔºåÂàÜ‰∏∫Ê≥õÂûãÁ±ª„ÄÅÊ≥õÂûãÊé•Âè£„ÄÅÊ≥õÂûãÊñπÊ≥ï„ÄÇ java ÈáåÈù¢ÁöÑÊ≥õÂûãÊòØ‰º™Ê≥õÂûãÔºåÂπ∂‰∏çÊòØÂÉè C++ ‰∏ÄÊ†∑ÁúüÊ≠£ÁöÑÊ≥õÂûãÔºåJava ÈáåÈù¢ÁöÑÊ≥õÂûãÂÆûÁé∞ÊñπÂºèÁß∞‰∏∫ Á±ªÂûãÊì¶Èô§„ÄÇ 12345678910import java.util.List;public class Test &#123; public static void method(List&lt;Integer&gt; list)&#123; System.out.println("Integer ÁöÑÊ≥õÂûã"); &#125; public static void method(List&lt;String&gt; list)&#123; System.out.println("String ÁöÑÊ≥õÂûã"); &#125;&#125; ËøôÊ†∑ÁöÑÂÜôÊ≥ïÂú® idea ‰∏≠Âπ∂‰∏çËÉΩÈÄöËøáÔºå‰ºöÊèêÁ§∫‰∏§‰∏™ÊñπÊ≥ï‰∏ÄÊ†∑ÔºåÊó†Ê≥ïÈáçËΩΩÔºåÂéüÂõ†Â∞±ÊòØÂú®ÁºñËØëÊó∂Â∞±‰ºöÂ∞Ü‰∏§ËÄÖÁöÑÊ≥õÂûãÊì¶Èô§„ÄÇ 3.2 Ëá™Âä®Ë£ÖÁÆ±„ÄÅÊãÜÁÆ±„ÄÅÈÅçÂéÜÂæ™ÁéØ123456789101112131415161718192021222324252627282930313233import java.util.Arrays;import java.util.Iterator;import java.util.List;/** * Ëá™Âä®Ë£ÖÁÆ±„ÄÅÊãÜÁÆ±„ÄÅÈÅçÂéÜÂæ™ÁéØ */public class Test &#123; public static void main(String[] args) &#123; // Ëá™Âä®Ë£ÖÁÆ±„ÄÅÊãÜÁÆ±„ÄÅÈÅçÂéÜÂæ™ÁéØÁöÑËØ≠Ê≥ïÁ≥ñ List&lt;Integer&gt; list1 = Arrays.asList(1,2,3,4); // ÊàñËÄÖÂÜôÊàê List&lt;Integer&gt; list = [1,2,3,4]; int sum1 = 0; for(int i : list1)&#123; sum1 = sum1 + i; &#125; System.out.println(sum1); // ÁºñËØë‰πãÂêéÁöÑÂéüÊ†∑ List list2 = Arrays.asList(new Integer[]&#123; Integer.valueOf(1), Integer.valueOf(2), Integer.valueOf(3), Integer.valueOf(4), &#125;); int sum2 = 0; Iterator localIterator = list2.iterator(); while(localIterator.hasNext())&#123; sum2 = sum2 + ((Integer) localIterator.next()).intValue(); &#125; System.out.println(sum2); &#125;&#125; 123456789101112131415161718192021/** * Ëá™Âä®Ë£ÖÁÆ±ÁöÑÈô∑Èò± */class Test2&#123; public static void main(String[] args) &#123; Integer a = 1; Integer b = 2; Integer c = 3; Integer d = 3; Integer e = 321; Integer f = 321; Long g = 3L; System.out.println(c == d); // true System.out.println(e == f); // false System.out.println(c == (a + b)); // true System.out.println(c.equals(a + b)); // true// System.out.println(g == d); // Êä•ÈîôÔºåÂõ†‰∏∫ == ‰∏ç‰ºöËá™Âä®ÊãÜÁÆ±ÔºåÂè™ÊúâÈÅáÂà∞‰∫ÜÁÆóÊúØËøêÁÆóÊâç‰ºöÊãÜÁÆ± System.out.println(g == (a + b)); // true System.out.println(g.equals(a + b)); // falseÔºåËôΩÁÑ∂ equals()‰ºöËá™Âä®ÊãÜÁÆ±Ôºå‰ΩÜÊòØ‰∏ç‰ºöÂ§ÑÁêÜÊï∞ÊçÆËΩ¨ÂûãÁöÑÈóÆÈ¢ò &#125;&#125; Tip: Integer ÁöÑÁºìÂ≠òÈóÆÈ¢òÔºå‰πãÂâçÂà∑ LeetCode Â∞±Â∑≤ÁªèÈÅáÂà∞Ëøá‰∫Ü„ÄÇËøôÈáåÂÜçÊèêÂèä‰∏ÄÊ¨°ÔºÅ ÂÖ∑‰ΩìÁöÑ Integer Âíå int ÁöÑÂå∫Âà´ËßÅ ‚ÄúÈõ∂Á¢éÁü•ËØÜÁÇπ‚Äù ËøôÁØáÊñáÁ´†ÔºÅ Á¨¨ÂçÅ‰∏ÄÁ´† ÊôöÊúüÔºàËøêË°åÊúüÔºâ‰ºòÂåñ1. Ê¶ÇËø∞Âç≥Êó∂ÁºñËØëÂô®ÔºàJust In Time CompilerÔºâÔºå‰πüÁß∞‰∏∫ JIT ÁºñËØëÂô®ÔºåÂÆÉÁöÑ‰∏ªË¶ÅÂ∑•‰ΩúÊòØÊääÁÉ≠ÁÇπ‰ª£Á†ÅÁºñËØëÊàê‰∏éÊú¨Âú∞Âπ≥Âè∞Áõ∏ÂÖ≥ÁöÑÊú∫Âô®Á†ÅÔºåÂπ∂ËøõË°åÂêÑÁßçÂ±ÇÊ¨°ÁöÑ‰ºòÂåñÔºå‰ªéËÄåÊèêÈ´ò‰ª£Á†ÅÊâßË°åÁöÑÊïàÁéá„ÄÇÂÆÉÂπ∂‰∏çÊòØÂøÖÈúÄÁöÑ„ÄÇ ÈÇ£‰πà‰ªÄ‰πàÊòØÁÉ≠ÁÇπ‰ª£Á†ÅÂë¢ÔºüÊàë‰ª¨Áü•ÈÅìËôöÊãüÊú∫ÈÄöËøáËß£ÈáäÂô®ÔºàInterpreterÔºâÊù•ÊâßË°åÂ≠óËäÇÁ†ÅÊñá‰ª∂ÔºåÂΩìËôöÊãüÊú∫ÂèëÁé∞Êüê‰∏™ÊñπÊ≥ïÊàñ‰ª£Á†ÅÂùóÁöÑËøêË°åÁâπÂà´È¢ëÁπÅÊó∂ÔºåÂ∞±‰ºöÊääËøô‰∫õ‰ª£Á†ÅËÆ§ÂÆö‰∏∫‚ÄúÁÉ≠ÁÇπ‰ª£Á†Å‚ÄùÔºàHot Spot CodeÔºâ„ÄÇ Âç≥Êó∂ÁºñËØëÂô®ÁºñËØëÊÄßËÉΩÁöÑÂ•ΩÂùè„ÄÅ‰ª£Á†Å‰ºòÂåñÁ®ãÂ∫¶ÁöÑÈ´ò‰ΩéÊòØË°°Èáè‰∏ÄÊ¨æÂïÜÁî®ËôöÊãüÊú∫‰ºòÁßÄ‰∏éÂê¶ÁöÑÂÖ≥ÈîÆÊåáÊ†á‰πã‰∏ÄÔºåÂÆÉ‰πüÊòØËôöÊãüÊú∫ÊúÄÊ†∏ÂøÉ‰∏îÊúÄËÉΩ‰ΩìÁé∞ÊäÄÊúØÊ∞¥Âπ≥ÁöÑÈÉ®ÂàÜ„ÄÇ 2. HotSpotËôöÊãüÊú∫ÂÜÖÁöÑÂç≥Êó∂ÁºñËØëÂô®2.1 Ëß£ÈáäÂô®‰∏éÁºñËØëÂô®HotSpot ËôöÊãüÊú∫ÂåÖÂê´Ëß£ÈáäÂô®ÂíåÁºñËØëÂô®„ÄÇÂÆÉ‰ª¨ÊòØÊÄé‰πàÊê≠ÈÖçÂ∑•‰ΩúÁöÑÂë¢ÔºüÂΩìÁ®ãÂ∫èÂêØÂä®ÁöÑÊó∂ÂÄôÔºåËß£ÈáäÂô®È¶ñÂÖàÂèëÊå•‰ΩúÁî®ÔºåÂÆÉËÉΩÁõ¥Êé•ËøêË°åÂ≠óËäÇÁ†ÅÊñá‰ª∂ÔºõÈöèÁùÄÊó∂Èó¥ÁöÑÊé®ÁßªÔºåË∂äÊù•Ë∂äÂ§öÁöÑÁÉ≠ÁÇπ‰ª£Á†ÅË¢´ÁºñËØëÂô®ÁºñËØëÊàêÊú∫Âô®Á†ÅÔºå‰ªéËÄåËé∑ÂèñÊõ¥È´òÁöÑÊâßË°åÊïàÁéá„ÄÇÂêåÊó∂ÔºåËß£ÈáäÂô®ËøòÂèØ‰ª•‰Ωú‰∏∫ÁºñËØëÂô®ÊøÄËøõ‰ºòÂåñÊó∂ÁöÑ‰∏Ä‰∏™‚ÄúÈÄÉÁîüÈó®‚ÄùÔºåÂΩìÁºñËØëÂô®ÁöÑÊøÄËøõ‰ºòÂåñÊâãÊÆµ‰∏çÊàêÁ´ãÊó∂ÔºåÂ¶ÇÂä†ËΩΩ‰∫ÜÊñ∞Á±ªÂêéÁ±ªÂûãÁªßÊâøÁªìÊûÑÂá∫Áé∞ÂèòÂåñÁ≠âÔºåÂèØ‰ª•ÈÄöËøáÈÄÜ‰ºòÂåñÔºàDeoptimizationÔºâÈÄÄÂõûÂà∞Ëß£ÈáäÁä∂ÊÄÅÁªßÁª≠Áî±Ëß£ÈáäÂô®ÊâßË°å„ÄÇËß£ÈáäÂô®‰∏éÁºñËØëÂô®ÁöÑ‰∫§‰∫íÂ¶ÇÂõæÊâÄÁ§∫Ôºö HotSpot‰∏≠ÁöÑÁºñËØëÂô®ÂèàÂàÜ‰∏∫‰∏§ÁßçÔºåC1 ÁºñËØëÂô®ÔºàClient CompilerÔºâÂíå C2 ÁºñËØëÂô®ÔºàServer CompilerÔºâÔºåHotSpot ËôöÊãüÊú∫‰ºöÈÄâÊã©Âì™‰∏™ÁºñËØëÂô®ÊòØÁî±ËôöÊãüÊú∫ËøêË°å‰∫é Client Ê®°ÂºèËøòÊòØ Server Ê®°ÂºèÂÜ≥ÂÆöÁöÑ„ÄÇ ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåËôöÊãüÊú∫ÈááÁî®Ëß£ÈáäÂô®Âíå‰∏ÄÁßçÁºñËØëÂô®Êê≠ÈÖçÁöÑÊñπÂºèÂ∑•‰ΩúÔºå‰ΩÜÊòØÂú®ÂàÜÂ±ÇÁºñËØëÁ≠ñÁï•‰∏ãÔºåC1 ÁºñËØëÂô®Âíå C2 ÁºñËØëÂô®Â∞Ü‰ºöÂêåÊó∂Â∑•‰ΩúÔºåÂàÜÂ±ÇÁºñËØëÊ†πÊçÆÁºñËØëÂô®ÁºñËØë„ÄÅ‰ºòÂåñÁöÑËßÑÊ®°ÂíåËÄóÊó∂ÔºåÂàíÂàÜÂá∫‰∏çÂêåÁöÑÁºñËØëÂ±ÇÊ¨°Ôºö Á¨¨0Â±ÇÔºöÁ®ãÂ∫èËß£ÈáäÊâßË°åÔºåËß£ÈáäÂô®‰∏çÂºÄÂêØÊÄßËÉΩÁõëÊéßÂäüËÉΩÔºåËß¶Âèë C1 ÁºñËØë„ÄÇ Á¨¨1Â±ÇÔºöC1 ÁºñËØëÔºåÂ∞ÜÂ≠óËäÇÁ†ÅÁºñËØëÊàêÊú¨Âú∞‰ª£Á†ÅÔºåËøõË°åÁÆÄÂçï„ÄÅÂèØÈù†ÁöÑ‰ºòÂåñÔºåÂ¶ÇÊúâÂøÖË¶ÅËß£ÈáäÂô®Â∞ÜÂºÄÂßãÊÄßËÉΩÁõëÊéß„ÄÇ Á¨¨2Â±ÇÔºöC2 ÁºñËØëÔºåÂ∞ÜÂ≠óËäÇÁ†ÅÁºñËØëÊàêÊú¨Âú∞‰ª£Á†ÅÔºåÂêØÁî®‰∏Ä‰∫õÁºñËØëËÄóÊó∂ËæÉÈïøÁöÑ‰ºòÂåñÔºåÁîöËá≥‰ºöÊ†πÊçÆÊÄßËÉΩÁõëÊéß‰ø°ÊÅØËøõË°å‰∏Ä‰∫õ‰∏çÂèØÈù†ÁöÑÊøÄËøõ‰ºòÂåñ„ÄÇ tipsÔºö ‰ΩøÁî® ‚Äú-client‚Äù Âº∫Âà∂ËôöÊãüÊú∫ËøêË°å‰∫é Client Ê®°Âºè„ÄÇ ‰ΩøÁî® ‚Äú-server‚Äù Âº∫Âà∂ËôöÊãüÊú∫ËøêË°å‰∫é Server Ê®°Âºè„ÄÇ ‰ΩøÁî® ‚Äú-Xint‚Äù Âº∫Âà∂ËôöÊãüÊú∫Âè™‰ΩøÁî®Ëß£ÈáäÂô®ÊâßË°åÁ®ãÂ∫èÔºåÁºñËØëÂô®‰∏çÂ∑•‰Ωú„ÄÇ ‰ΩøÁî® ‚Äú-Xcomp‚Äù Âº∫Âà∂ËôöÊãüÊú∫Âè™‰ΩøÁî®ÁºñËØëÂô®ÊâßË°åÁ®ãÂ∫èÔºåËß£ÈáäÂô®‰Ωú‰∏∫ÁºñËØëÂô®ÁöÑ‚ÄúÈÄÉÁîüÈó®‚Äù„ÄÇ ‰ΩøÁî® ‚Äú-XX:+TieredCompilation‚Äù ÂºÄÂêØÂàÜÂ±ÇÁºñËØë„ÄÇËôöÊãüÊú∫ Server Ê®°Âºè‰∏ãÈªòËÆ§ÂºÄÂêØ„ÄÇ 2.2 ÁºñËØëÂØπË±°‰∏éËß¶ÂèëÊù°‰ª∂‚ÄúÁÉ≠ÁÇπ‰ª£Á†Å‚Äù ÂàÜ‰∏∫‰∏§Á±ªÔºö Ë¢´Â§öÊ¨°Ë∞ÉÁî®ÁöÑÊñπÊ≥ïÔºõ„ÄåÊôÆÈÄöÁöÑÁºñËØëËØ∑Ê±Ç„Äç„ÄåÊñπÊ≥ïË∞ÉÁî®ËÆ°Êï∞Âô®„Äç Ë¢´Â§öÊ¨°ÊâßË°åÁöÑÂæ™ÁéØ‰Ωì„ÄÇ„ÄåOSRÁºñËØëËØ∑Ê±Ç„Äç„ÄåÂõûËæπËÆ°Êï∞Âô®„Äç Ë¶ÅÊµãËØïÂÖ∂Êàê‰∏∫‚ÄúÁÉ≠ÁÇπ‰ª£Á†Å‚ÄùÔºåÊúâ‰∏§ÁßçÊØîËæÉ‰∏ªÊµÅÁöÑÁÉ≠ÁÇπÊé¢ÊµãÊñπÂºèÔºö Âü∫‰∫éÈááÊ†∑ÁöÑÁÉ≠ÁÇπÊé¢ÊµãÔºåÂë®ÊúüÊÄßÊé¢ÊµãÂêÑ‰∏™Á∫øÁ®ãÊ†àÈ°∂ÔºåËôΩÁÑ∂ÁÆÄÂçïÈ´òÊïàÔºå‰ΩÜÊòØÂÆπÊòìÂèóÂà∞Á∫øÁ®ãÈòªÂ°ûÁöÑÂΩ±ÂìçËÄåÊâ∞‰π±Êé¢ÊµãÔºõ Âü∫‰∫éËÆ°Êï∞Âô®ÁöÑÁÉ≠ÁÇπÊé¢ÊµãÔºå‰∏∫ÊØè‰∏™ÊñπÊ≥ïÔºàÁîöËá≥ÊòØ‰ª£Á†ÅÂùóÔºâÂª∫Á´ãËÆ°Êï∞Âô®ÔºåÁªüËÆ°ÊâßË°åÊ¨°Êï∞ÔºåÂ¶ÇÊûúÊâßË°åÊ¨°Êï∞ËææÂà∞‰∏ÄÂÆöÁöÑÈòàÂÄºÔºåÂ∞±ÊääËøôÈÉ®ÂàÜ‰ª£Á†ÅÁºñËØëÊàêÊú∫Âô®Á†Å„ÄÇ HotSpot ÈááÁî®ÁöÑÊòØÂü∫‰∫éËÆ°Êï∞Âô®ÁöÑÁÉ≠ÁÇπÊé¢ÊµãÔºå‰∏∫ÊØè‰∏™ÊñπÊ≥ïÂáÜÂ§á‰∫Ü‰∏§‰∏™ËÆ°Êï∞Âô®ÔºöÊñπÊ≥ïË∞ÉÁî®ËÆ°Êï∞Âô®ÔºàInvocation CounterÔºâÂíå ÂõûËæπËÆ°Êï∞Âô®ÔºàBack Edge CounterÔºâ„ÄÇ Âú®ÈªòËÆ§ËÆæÁΩÆ‰∏ãÔºåÊñπÊ≥ïËÆ°Êï∞Âô®ÁªüËÆ°ÁöÑÂπ∂‰∏çÊòØÊñπÊ≥ïË¢´Ë∞ÉÁî®ÁöÑÁªùÂØπÊ¨°Êï∞ÔºåËÄåÊòØ‰∏ÄÂÆöÊó∂Èó¥ÂÜÖÁöÑÊâßË°åÊ¨°Êï∞ÔºåË∂ÖËøá‰∫ÜÊó∂Èó¥Â¶ÇÊûúËøòÊ≤°ÊúâËææÂà∞ÈòàÂÄºÔºåÂ∞±‰ºöÂ∞ÜÊñπÊ≥ïËÆ°Êï∞Âô®ÁöÑÂÄºÂáèÂéª‰∏ÄÂçäÔºåËøô‰∏™ËøáÁ®ãÁß∞‰∏∫ ÊñπÊ≥ïËÆ°Êï∞Âô®ÁöÑ ÁÉ≠Â∫¶Ë°∞ÂáèÔºàCounter DecayÔºâÔºåËÄåËøôÊÆµÊó∂Èó¥Â∞±Áß∞‰∏∫Ê≠§ÊñπÊ≥ïÁªüËÆ°ÁöÑÂçäË°∞Âë®ÊúüÔºàCounter Half Life TimeÔºâÔºåËøõË°åÁÉ≠Â∫¶Ë°∞ÂáèÁöÑÂä®‰ΩúÂÆûÂú®ËôöÊãüÊú∫ËøõË°åÂûÉÂúæÊî∂ÈõÜÈ°∫Â∏¶ËøõË°åÁöÑ„ÄÇËÄåÂõûËæπËÆ°Êï∞Âô®ÈÄÇÁî®‰∫éÁªüËÆ°ÊñπÊ≥ï‰∏≠Âæ™ÁéØ‰Ωì‰ª£Á†ÅÁöÑÊâßË°åÊ¨°Êï∞Ôºå‰πãÊâÄ‰ª•Âè´‚ÄúÂõûËæπ‚ÄùÔºåÂèØ‰ª•ÁêÜËß£‰∏∫‰∏Ä‰∏™Âæ™ÁéØ‰ΩìÁªìÊùü‰∏ÄÊ¨°ÂèàÂõûÂà∞ÂºÄÂ§¥ÔºàÊ≠ªÁ©∫Âæ™ÁéØ‰∏çÁÆóÂõûËæπÔºâÔºåÊòæÁÑ∂Âª∫Á´ãÂõûËæπËÆ°Êï∞Âô®ÁªüËÆ°ÁöÑÁõÆÁöÑÊòØ‰∏∫‰∫ÜËß¶ÂèëOSRÔºàOn Stack ReplacementÔºåÊ†à‰∏äÊõøÊç¢ÔºâÁºñËØë„ÄÇÂõûËæπËÆ°Êï∞Âô®Ê≤°ÊúâËÆ°Êï∞ÁÉ≠Â∫¶Ë°∞ÂáèÁöÑËøáÁ®ãÔºåÁªüËÆ°ÁöÑÂ∞±ÊòØÊñπÊ≥ï‰ΩìÂÜÖÂæ™ÁéØ‰ΩìÊâßË°åÁöÑÁªùÂØπÊ¨°Êï∞„ÄÇ 3. ‰ºòÂåñÊäÄÊúØ3.1 ÊñπÊ≥ïÂÜÖËÅîÊñπÊ≥ïÂÜÖËÅîÁöÑÈáçË¶ÅÊÄßË¶Å‰ºò‰∫éÂÖ∂‰ªñ‰ºòÂåñÊé™ÊñΩÔºåÂÆÉÁöÑ‰∏ªË¶ÅÁõÆÁöÑÊúâ‰∏§‰∏™Ôºå‰∏ÄÊòØÂéªÈô§ÊñπÊ≥ïË∞ÉÁî®ÁöÑÊàêÊú¨Ôºå‰∫åÊòØ‰∏∫ÂÖ∂‰ªñ‰ºòÂåñÂª∫Á´ãËâØÂ•ΩÁöÑÂü∫Á°Ä„ÄÇ ÊñπÊ≥ïÂÜÖËÅîÁöÑË°å‰∏∫ÂæàÁÆÄÂçïÔºåÂ∞±ÊòØÊääÁõÆÊ†áÊñπÊ≥ïÁöÑ‰ª£Á†Å‚ÄúÂ§çÂà∂‚ÄùÂà∞ÂèëËµ∑Ë∞ÉÁî®ÁöÑÊñπÊ≥ï‰πã‰∏≠ÔºåÈÅøÂÖçÂèëÁîüÁúüÂÆûÁöÑÊñπÊ≥ïË∞ÉÁî®ËÄåÂ∑≤„ÄÇÂú®ÂàÜÊ¥æË∞ÉÁî®‰∏≠ËÆ≤Ëøá„ÄÇ 3.2 ÂÖ¨ÂÖ±Â≠êË°®ËææÂºèÊ∂àÈô§Â¶ÇÊûú‰∏Ä‰∏™Ë°®ËææÂºè E Â∑≤ÁªèËÆ°ÁÆóËøá‰∫ÜÔºåÂπ∂‰∏î‰ªéÂÖàÂâçÁöÑËÆ°ÁÆóÂà∞Áé∞Âú® E ‰∏≠ÊâÄÊúâÂèòÈáèÁöÑÂÄºÈÉΩÊ≤°ÊúâÂèëÁîüÂèòÂåñÔºåÈÇ£‰πà E ÁöÑËøôÊ¨°Âá∫Áé∞Â∞±Êàê‰∏∫‰∫ÜÂÖ¨ÂÖ±Â≠êË°®ËææÂºè„ÄÇÂØπ‰∫éËøôÁßçË°®ËææÂºèÔºåÊ≤°ÊúâÂøÖË¶ÅËä±Êó∂Èó¥ÂÜçÂØπÂÆÉËøõË°åËÆ°ÁÆóÔºåÂè™ÈúÄË¶ÅÁõ¥Êé•Áî®ÂâçÈù¢ËÆ°ÁÆóËøáÁöÑË°®ËææÂºèÁªìÊûú‰ª£Êõø E Â∞±ÂèØ‰ª•‰∫Ü„ÄÇÊàë‰ª¨Êù•‰∏æ‰∏™‰æãÂ≠êÊù•Ê®°Êãü‰∏ãÂÆÉÁöÑ‰ºòÂåñËøáÁ®ãÔºö 1234567891011public static void main(String[] args) &#123; int a = 1; int b = 1; int c = 1; int d = (c * b) * 12 + a + (a + b * c); // 1. ÊèêÂèñÂÖ¨ÂÖ±Â≠êË°®ËææÂºè int E = c * b; d = E * 12 + a + (a + E); // 2. ‰ª£Êï∞ÂåñÁÆÄ d = E * 13 + a * 2;&#125; 3.3 Êï∞ÁªÑËæπÁïåÊ£ÄÊü•Ê∂àÈô§ÂΩìÊàë‰ª¨Â∞ùËØïÂØπÊï∞ÁªÑË∂äÁïåËÆøÈóÆÁöÑÊó∂ÂÄôÔºåJava ‰ºöÂêëÊàë‰ª¨Êäõ‰∏Ä‰∏™ java.lang.ArrayIndexOutOfBoundsExceptionÔºåËøôÂØπËΩØ‰ª∂ÂºÄÂèëËÄÖÊù•ËØ¥ÊòØ‰∏Ä‰ª∂ÂæàÂ•ΩÁöÑ‰∫ãÊÉÖÔºåÂç≥‰ΩøÊ≤°Êúâ‰∏ìÈó®ÁºñÂÜôÈò≤Âæ°‰ª£Á†ÅÔºå‰πüÂèØ‰ª•ÈÅøÂÖçÂ§ßÈÉ®ÂàÜÁöÑÊ∫¢Âá∫ÊîªÂáªÔºå‰ΩÜÊòØÂØπËôöÊãüÊú∫Êù•ËØ¥ÔºåÊÑèÂë≥ÁùÄÊØè‰∏ÄÊ¨°ÁöÑÊï∞ÁªÑËÆøÈóÆÈÉΩÂ∏¶Êúâ‰∏ÄÊ¨°ÈöêÂê´ÁöÑÊù°‰ª∂Âà§ÂÆöÊìç‰ΩúÔºåÂç≥Êï∞ÁªÑËæπÁïåÊ£ÄÊü•ÔºåÈÇ£‰πàÊúâÊ≤°ÊúâÂäûÊ≥ïÊ∂àÈô§ËøôÁßçÊ£ÄÊü•Âë¢Ôºü ËôöÊãüÊú∫‰∏ÄËà¨ÊòØÂú®Âç≥Êó∂ÁºñËØëÊúüÈó¥ÈÄöËøáÊï∞ÊçÆÊµÅÂàÜÊûêÊù•Á°ÆÂÆöÊòØÂê¶ÂèØ‰ª•Ê∂àÈô§ËøôÁßçÊ£ÄÊü•ÔºåÊØîÂ¶Ç foo[3] ÁöÑËÆøÈóÆÔºåÂè™ÊúâÂú®ÁºñËØëÁöÑÊó∂ÂÄôÁ°ÆÂÆö 3 ‰∏ç‰ºöË∂ÖËøá foo.length - 1 ÁöÑÂÄºÔºåÂ∞±ÂèØ‰ª•Âà§Êñ≠ËØ•Ê¨°Êï∞ÁªÑËÆøÈóÆÊ≤°ÊúâË∂äÁïåÔºåÂ∞±ÂèØ‰ª•ÊääÊï∞ÁªÑËæπÁïåÊ£ÄÊü•Ê∂àÈô§„ÄÇ 3.4 ÈÄÉÈÄ∏ÂàÜÊûêÈÄÉÈÄ∏ÂàÜÊûêÁöÑÂü∫Êú¨Ë°å‰∏∫Â∞±ÊòØÂàÜÊûêÂØπË±°Âä®ÊÄÅ‰ΩúÁî®ÂüüÔºöÂΩì‰∏Ä‰∏™ÂØπË±°Âú®ÊñπÊ≥ïË¢´ÂÆö‰πâÂêéÔºåÂÆÉÂèØËÉΩË¢´Â§ñÈÉ®ÊñπÊ≥ïÊâÄÂºïÁî®Ôºå‰æãÂ¶Ç‰Ωú‰∏∫Ë∞ÉÁî®ÂèÇÊï∞‰º†ÈÄíÂà∞ÂÖ∂‰ªñÊñπÊ≥ï‰∏≠ÔºåÁß∞‰∏∫ÊñπÊ≥ïÈÄÉÈÄ∏ÔºõÁîöËá≥ËøòÊúâÂèØËÉΩË¢´Â§ñÈÉ®Á∫øÁ®ãËÆøÈóÆÂà∞ÔºåË≠¨Â¶ÇËµãÂÄºÁªôÁ±ªÂèòÈáèÊàñÂèØ‰ª•Âú®ÂÖ∂‰ªñÁ∫øÁ®ã‰∏≠ËÆøÈóÆÁöÑÂÆû‰æãÂèòÈáèÔºåÁß∞‰∏∫Á∫øÁ®ãÈÄÉÈÄ∏„ÄÇ Â¶ÇÊûúËÉΩËØÅÊòé‰∏Ä‰∏™ÂØπË±°‰∏ç‰ºöÈÄÉÈÄ∏Âà∞ÊñπÊ≥ïÊàñËÄÖÁ∫øÁ®ã‰πãÂ§ñÔºåÂàôÂèØ‰ª•‰∏∫Ëøô‰∏™ÂèòÈáèËøõË°å‰∏Ä‰∫õÈ´òÊïàÁöÑ‰ºòÂåñÔºö 1) Ê†à‰∏äÂàÜÈÖçÂ¶ÇÊûúÁ°ÆÂÆö‰∏Ä‰∏™ÂØπË±°‰∏ç‰ºöÈÄÉÈÄ∏Âá∫ÊñπÊ≥ï‰πãÂ§ñÔºåÂÅáÂ¶ÇËÉΩ‰ΩøÁî®Ê†à‰∏äÂàÜÈÖçËøô‰∏™ÂØπË±°ÔºåÈÇ£Â§ßÈáèÁöÑÂØπË±°Â∞±‰ºöÈöèÁùÄÊñπÊ≥ïÁöÑÁªìÊùüËÄåËá™Âä®ÈîÄÊØÅ‰∫ÜÔºåÂûÉÂúæÊî∂ÈõÜÁ≥ªÁªüÁöÑÂéãÂäõÂ∞Ü‰ºöÂ∞èÂæàÂ§ö„ÄÇÁÑ∂ËÄåÈÅóÊÜæÁöÑÊòØÔºåÁõÆÂâçÁöÑ HotSpot ËôöÊãüÊú∫ËøòÊ≤°ÊúâÂÆûÁé∞ËøôÈ°π‰ºòÂåñ„ÄÇ 2ÔºâÂêåÊ≠•Ê∂àÈô§Â¶ÇÊûúÁ°ÆÂÆö‰∏Ä‰∏™ÂØπË±°‰∏ç‰ºöË¢´ÂÖ∂‰ªñÁ∫øÁ®ãËÆøÈóÆÂà∞ÔºåÈÇ£‰πàËøô‰∏™ÂèòÈáèÂ∞±‰∏çÂ≠òÂú®Á∫øÁ®ãÈó¥ÁöÑ‰∫âÊä¢ÔºåÂØπËøô‰∏™ÂèòÈáèÂÆûÊñΩÁöÑÂêåÊ≠•Êé™ÊñΩ‰πüÂèØ‰ª•Ê∂àÈô§Êéâ„ÄÇ 3ÔºâÊ†áÈáèÊõøÊç¢Ê†áÈáèÔºöÊó†Ê≥ïË¢´Ëøõ‰∏ÄÊ≠•ÂàÜËß£ÁöÑÊï∞ÊçÆÔºåÊØîÂ¶ÇÂéüÂßãÊï∞ÊçÆÁ±ªÂûãÔºàint„ÄÅlong‰ª•Âèä reference Á±ªÂûãÔºâËÅöÂêàÈáèÔºöÂèØ‰ª•Ë¢´ÊåÅÁª≠ÂàÜËß£ÁöÑÊï∞ÊçÆÔºåÂÖ∏ÂûãÁöÑÂ∞±ÊòØ Java ‰∏≠ÂØπË±°ÔºåÂÆÉ‰ª¨ËøòÂèØ‰ª•Ë¢´ÂàÜËß£ÊàêÊàêÂëòÂèòÈáèÁ≠â„ÄÇ Ê†áÈáèÊõøÊç¢ÊåáÁöÑÊòØÂ¶ÇÊûúÊää‰∏Ä‰∏™ Java ÂØπË±°ÊãÜÊï£ÂàÜËß£ÔºåÊ†πÊçÆÁ®ãÂ∫èËÆøÈóÆÁöÑÊÉÖÂÜµÔºåÂ∞ÜÂÖ∂‰ΩøÁî®Âà∞ÁöÑÊàêÂëòÂèòÈáèÊÅ¢Â§çÂà∞ÂéüÂßãÁ±ªÂûãÊù•ËÆøÈóÆ„ÄÇ Â¶ÇÊûúËÉΩÁ°ÆÂÆö‰∏Ä‰∏™ÂØπË±°‰∏ç‰ºöË¢´Â§ñÈÉ®ËÆøÈóÆÔºåÂπ∂‰∏îËøô‰∏™ÂØπË±°ÂèØ‰ª•Ë¢´ÊãÜÊï£ÁöÑËØùÔºåÈÇ£Á®ãÂ∫èÁúüÊ≠£ÊâßË°åÁöÑÊó∂ÂÄôÂ∞±ÂèØËÉΩ‰∏çÂàõÂª∫Ëøô‰∏™ÂØπË±°ÔºåËÄåÊîπ‰∏∫Áõ¥Êé•ÂàõÂª∫ÂÆÉÁöÑËã•Âπ≤‰∏™Ë¢´Ëøô‰∏™ÊñπÊ≥ï‰ΩøÁî®Âà∞ÁöÑÊàêÂëòÂèòÈáèÊù•‰ª£Êõø„ÄÇ tipsÔºö -XX:+DoEscapeAnalysis ÊâãÂä®ÂºÄÂêØ/ÂÖ≥Èó≠ÈÄÉÈÄ∏ÂàÜÊûêÔºåÈªòËÆ§ÂºÄÂêØÔºåC2 ÁºñËØëÂô®ÊúâÊïà -XX:+PrintEscapeAnalysis Êü•ÁúãÈÄÉÈÄ∏ÂàÜÊûêÁöÑÁªìÊûúÔºàdebug ËôöÊãüÊú∫ÊîØÊåÅÔºâ -XX:+EliminateAllocations ÊâãÂä®ÂºÄÂêØ/ÂÖ≥Èó≠Ê†áÈáèÊõøÊç¢ÔºåÈªòËÆ§ÂºÄÂêØ -XX:+PrintEliminateAllocations Êü•ÁúãÊ†áÈáèÊõøÊç¢ÊÉÖÂÜµÔºàdebug ËôöÊãüÊú∫ÊîØÊåÅÔºâ -XX:+EliminateLocks ÊâãÂä®ÂºÄÂêØ/ÂÖ≥Èó≠ÂêåÊ≠•Ê∂àÈô§ÔºåÈªòËÆ§ÂºÄÂêØ Á¨¨ÂçÅ‰∫åÁ´† JavaÂÜÖÂ≠òÊ®°Âûã‰∏éÁ∫øÁ®ã1. Á°¨‰ª∂ÁöÑÊïàÁéá‰∏é‰∏ÄËá¥ÊÄßËôöÊãüÊú∫‰∏éÁâ©ÁêÜËÆ°ÁÆóÊú∫ÁöÑÂπ∂ÂèëÊúâ‰∏Ä‰∫õÁõ∏‰ºº‰πãÂ§Ñ„ÄÇ 1.1 ÁºìÂ≠ò‰∏ÄËá¥ÊÄßÂçèËÆÆ‰∏∫‰∫ÜËß£ÂÜ≥Â§ö‰∏™Â§ÑÁêÜÂô®ÁöÑËøêÁÆó‰ªªÂä°ÂèØËÉΩÊ∂âÂèäÂà∞Âêå‰∏ÄÂùó‰∏ªÂÜÖÂ≠òÔºåËÄå‰ªñ‰ª¨ÁöÑÁºìÂ≠òÊï∞ÊçÆÂèà‰∏ç‰∏ÄËá¥ÁöÑÈóÆÈ¢òÔºåÂºïÂÖ•‰∫ÜÁºìÂ≠ò‰∏ÄËá¥ÊÄßÂçèËÆÆÔºåvolatile Â∞±ÊòØÁî®Âà∞‰∫Ü MESI Ëøô‰∏™ÁºìÂ≠ò‰∏ÄËá¥ÊÄßÂçèËÆÆ„ÄÇ 1.2 Êåá‰ª§ÈáçÊéíÂ∫è‰ºòÂåñ‰∏∫‰∫Ü‰øùËØÅÂ§ÑÁêÜÂô®Âà©Áî®ÁéáÊúÄÂ§ßÂåñÔºåÂ§ÑÁêÜÂô®‰ºöÂØπÊåá‰ª§ÈáçÊéíÂ∫èÔºåËÄå jvm ‰∏≠ÁöÑ JIT ÁºñËØëÂô® ‰πüÂêåÊ†∑Â¶ÇÊ≠§ÔºåÊúâÁ±ª‰ººÁöÑÊåá‰ª§ÈáçÊéíÂ∫è‰ºòÂåñÔºåÂú® volatile ‰∏≠‰∏∫‰∫Ü‰øùËØÅ happens-before ÊòØÊèíÂÖ• ÂÜÖÂ≠òÂ±èÈöú Èò≤Ê≠¢ Êåá‰ª§ÈáçÊéíÂ∫èÁöÑ„ÄÇ 2. Java ÂÜÖÂ≠òÊ®°Âûãjava ËôöÊãüÊú∫ËßÑËåÉ‰∏≠ËØïÂõæÂÆö‰πâ‰∏ÄÁßç Java ÂÜÖÂ≠òÊ®°ÂûãÔºàJava Memory ModelÔºåJMMÔºâÊù•Â±èËîΩÊéâÂêÑÁßçÁ°¨‰ª∂ÂíåÊìç‰ΩúÁ≥ªÁªüÁöÑÂÜÖÂ≠òËÆøÈóÆÂ∑ÆÂºÇÔºå‰ª•ÂÆûÁé∞ËÆ© Java Á®ãÂ∫èÂú®ÂêÑÁßçÂπ≥Âè∞‰∏ãÈÉΩËÉΩËææÂà∞‰∏ÄËá¥ÁöÑÂπ∂ÂèëÊïàÊûú„ÄÇ 2.1 ‰∏ªÂÜÖÂ≠òÂíåÂ∑•‰ΩúÂÜÖÂ≠òJava ÂÜÖÂ≠òÊ®°ÂûãËßÑÂÆöÊâÄÊúâÁöÑÂÖ±‰∫´ÂèòÈáèÈÉΩÂ∫îËØ•Â≠òÂÇ®Âú®‰∏ªÂÜÖÂ≠ò‰∏≠ÔºåÊØèÊù°Á∫øÁ®ãÊúâËá™Â∑±ÁöÑÂ∑•‰ΩúÂÜÖÂ≠òÔºåÂ∑•‰ΩúÂÜÖÂ≠ò‰∏≠‰øùÂ≠ò‰∫ÜÁ∫øÁ®ãÁã¨ÊúâÁöÑÂèòÈáèÔºåÁ∫øÁ®ã‰πãÈó¥ÊòØÈöîÁ¶ªÁöÑÔºåÂÄº‰º†ÈÄíÂøÖÈ°ªÈÄöËøá‰∏ªÂÜÖÂ≠òÊìç‰Ωú„ÄÇ 2.2 ÂÜÖÂ≠òÈó¥ÁöÑ‰∫§‰∫íÊìç‰ΩúÂÖ≥‰∫é‰∏ªÂÜÖÂ≠òÂíåÂ∑•‰ΩúÂÜÖÂ≠òÂ¶Ç‰Ωï‰∫§‰∫íÔºåJMM ÂÆö‰πâ‰∫Ü8ÁßçÂéüÂ≠êÊìç‰ΩúÔºö lockÔºö‰ΩúÁî®‰∫é‰∏ªÂÜÖÂ≠òÁöÑÂèòÈáèÔºåÂ∞ÜÂèòÈáèÊ†áËØÜ‰∏∫Á∫øÁ®ãÁã¨Âç†ÁöÑÁä∂ÊÄÅ„ÄÇÁ±ª‰ººÁã¨Âç†ÈîÅ„ÄÇ unlockÔºö‰ΩúÁî®‰∫é‰∏ªÂÜÖÂ≠òÁöÑÂèòÈáèÔºåÂ∞ÜÂèòÈáèÁöÑÈîÅÈáäÊîæ„ÄÇ readÔºö‰ΩúÁî®‰∫é‰∏ªÂÜÖÂ≠òÂèòÈáèÔºåÂ∞ÜÂèòÈáè‰ªé‰∏ªÂÜÖÂ≠òËØªÂà∞Â∑•‰ΩúÂÜÖÂ≠ò‰∏≠„ÄÇ loadÔºö‰ΩúÁî®‰∫éÂ∑•‰ΩúÂÜÖÂ≠òÂèòÈáèÔºåreadÊìç‰ΩúÂÆåÂêéÈúÄË¶ÅloadÊù•Â§çÂà∂‰∏Ä‰ªΩÂèòÈáèÂâØÊú¨ÊîæÂà∞Â∑•‰ΩúÂÜÖÂ≠ò‰∏≠„ÄÇ useÔºö‰ΩúÁî®‰∫éÂ∑•‰ΩúÂÜÖÂ≠òÂèòÈáèÔºåÊääÂ∑•‰ΩúÂÜÖÂ≠ò‰∏≠ÁöÑÂÄº‰º†ÈÄíÁªôÊâßË°åÂºïÊìéÔºåÊØèÂΩìËôöÊãüÊú∫ÈÅáÂà∞‰∏Ä‰∏™ÈúÄË¶Å‰ΩøÁî®Âà∞ÂèòÈáèÂÄºÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§Êó∂Â∞±‰ºöÊâßË°åËøô‰∏™Êìç‰Ωú„ÄÇ assignÔºö‰ΩúÁî®‰∫éÂ∑•‰ΩúÂÜÖÂ≠òÂèòÈáèÔºåÂÆÉÊää‰∏Ä‰∏™‰ªéÊâßË°åÂºïÊìéÊé•Êî∂Âà∞ÁöÑÂÄºËµãÂÄºÁªôÂ∑•‰ΩúÂÜÖÂ≠òÁöÑÂèòÈáèÔºåÊØèÂΩìËôöÊãüÊú∫ÈÅáÂà∞‰∏Ä‰∏™ÁªôÂèòÈáèËµãÂÄºÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§Â∞±ÊâßË°åËøô‰∏™Êìç‰Ωú„ÄÇ storeÔºö‰ΩúÁî®‰∫éÂ∑•‰ΩúÂÜÖÂ≠òÁöÑÂèòÈáèÔºåÊää‰∏Ä‰∏™Â∑•‰ΩúÂÜÖÂ≠ò‰∏≠ÁöÑÂèòÈáè‰º†ÈÄÅÂà∞‰∏ªÂÜÖÂ≠ò‰∏≠Ôºå‰ª•‰æøÈöèÂêéÁöÑ write ‰ΩøÁî®„ÄÇ writeÔºö‰ΩúÁî®‰∫é‰∏ªÂÜÖÂ≠òÁöÑÂèòÈáèÔºåÊää store Êìç‰ΩúÂæóÂà∞ÁöÑÂèòÈáèÂÜôÂÖ•Âà∞‰∏ªÂÜÖÂ≠ò‰∏≠ÁöÑÂèòÈáè„ÄÇ 2.3 ÂØπ‰∫é volatile ÂûãÂèòÈáèÁöÑÁâπÊÆäËßÑÂàôVolatile Âè™ÂÖ∑ÊúâÂèØËßÅÊÄßÂíåÊúâÂ∫èÊÄßÔºåÂπ∂‰∏çËÉΩ‰øùËØÅÂéüÂ≠êÊÄß„ÄÇ Âú®‰ª•‰∏ã‰∏§Êù°ËßÑÂàôÁöÑËøêÁÆóÂú∫ÊôØ‰∏ãÔºåvolatile ÊâçÂÖ∑ÊúâÂéüÂ≠êÊÄßÔºö ËøêÁÆóÁªìÊûú‰∏ç‰æùËµñ‰∫éÂèòÈáèÁöÑÂΩìÂâçÂÄºÔºåÊàñËÄÖËÉΩÂ§üÁ°Æ‰øùÂè™ÊúâÂçï‰∏ÄÁöÑÁ∫øÁ®ã‰øÆÊîπÂèòÈáèÁöÑÂÄºÔºõ ÂèòÈáè‰∏çÈúÄË¶Å‰∏éÂÖ∂‰ªñÁöÑÁä∂ÊÄÅÂèòÈáèÂÖ±ÂêåÂèÇ‰∏é‰∏çÂèòÁ∫¶Êùü„ÄÇ ÂèØËßÅÊÄßÔºåÊòØÊåá‰∏ÄÊù°Á∫øÁ®ã‰øÆÊîπ‰∫ÜÂΩìÂâçÂèòÈáèÁöÑÂÄºÔºåÂÖ∂‰ªñÁ∫øÁ®ãËÉΩÁ´ãÂç≥ÊÑüÁü•Âà∞Ëøô‰∏™Êñ∞ÂÄº„ÄÇËÄåÊôÆÈÄöÂèòÈáèÂøÖÈ°ªÈÄöËøá‰∏ªÂÜÖÂ≠òÂèòÈáè‰º†ÈÄíÊù•ÂÆåÊàê„ÄÇ ÊúâÂ∫èÊÄßÔºåÊòØÊåáÁ¶ÅÊ≠¢‰∫ÜÊåá‰ª§ÈáçÊéíÂ∫è‰ºòÂåñÔºåÊôÆÈÄöÂèòÈáè‰ªÖ‰ªÖ‰øùËØÅÂú®ËØ•ÊñπÊ≥ïÁöÑÊâßË°åËøáÁ®ã‰∏≠ÊâÄÊúâ‰æùËµñËµãÂÄºÁöÑÁªìÊûúÈÉΩËÉΩÂ§üÂæóÂà∞Ê≠£Á°ÆÁöÑÁªìÊûúÔºåËÄå‰∏çËÉΩ‰øùËØÅÂèòÈáèËµãÂÄºÊìç‰ΩúÁöÑÈ°∫Â∫è‰∏éÁ®ãÂ∫è‰ª£Á†Å‰∏≠ÁöÑÊâßË°åÈ°∫Â∫è‰∏ÄËá¥„ÄÇvolatileÈÄöËøáÊèíÂÖ•ÂÜÖÂ≠òÂ±èÈöúÔºå‰øùËØÅ‰∫ÜÊúâÂ∫èÊÄßÔºå‰ΩÜÊòØËøôÂ∞±Â∏¶Êù•‰∫ÜvolatileÁöÑÂÜôÊìç‰Ωú‰ºöÊØîËæÉÊÖ¢‰∏Ä‰∫õ„ÄÇ Êúâ‰∏™ÂÖ∏ÂûãÁöÑ‰æãÂ≠êÂ∞±ÊòØÂçï‰æãÊ®°Âºè‰∏ãÁöÑÂèåÈáçÊ£ÄÈ™åÈîÅÔºö 1234567891011121314public class Singleton &#123; private volatile static Singleton instance; private Singleton () &#123;&#125; public static Singleton getSingleton() &#123; if (instance == null) &#123; synchronized (Singleton.class) &#123; if (instance == null) &#123; instance = new Singleton(); &#125; &#125; &#125; return instance; &#125; &#125; Áß∞ÂÖ∂‰∏∫ÂèåÈáçÊ£ÄÊü•ÈîÅÔºåÊòØÂõ†‰∏∫‰ºöÊúâ‰∏§Ê¨°Ê£ÄÊü• instance == nullÔºå‰∏ÄÊ¨°ÊòØÂú®ÂêåÊ≠•ÂùóÂ§ñÔºå‰∏ÄÊ¨°ÊòØÂú®ÂêåÊ≠•ÂùóÂÜÖ„ÄÇ‰∏∫‰ªÄ‰πàÂú®ÂêåÊ≠•ÂùóÂÜÖËøòË¶ÅÂÜçÊ£ÄÈ™å‰∏ÄÊ¨°ÔºüÂõ†‰∏∫ÂèØËÉΩ‰ºöÊúâÂ§ö‰∏™Á∫øÁ®ã‰∏ÄËµ∑ËøõÂÖ•ÂêåÊ≠•ÂùóÂ§ñÁöÑ ifÔºåÂ¶ÇÊûúÂú®ÂêåÊ≠•ÂùóÂÜÖ‰∏çËøõË°å‰∫åÊ¨°Ê£ÄÈ™åÁöÑËØùÂ∞±‰ºöÁîüÊàêÂ§ö‰∏™ÂÆû‰æã‰∫Ü ËÄå instance = new Singleton() ËøôÂè•ÔºåÂπ∂ÈùûÊòØ‰∏Ä‰∏™ÂéüÂ≠êÊìç‰ΩúÔºå‰∫ãÂÆû‰∏äÂú® JVM ‰∏≠ËøôÂè•ËØùÂÅö‰∫Ü‰∏ãÈù¢ 3 ‰ª∂‰∫ãÔºö Áªô instance ÂàÜÈÖçÂÜÖÂ≠ò Ë∞ÉÁî® Singleton ÁöÑÊûÑÈÄ†ÂáΩÊï∞Êù•ÂàùÂßãÂåñÊàêÂëòÂèòÈáè Â∞Ü instance ÂØπË±°ÊåáÂêëÂàÜÈÖçÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºàÊâßË°åÂÆåËøôÊ≠• instance Â∞±‰∏∫Èùû null ‰∫ÜÔºâ ‰ΩÜÊòØÂú® JVM ÁöÑÂç≥Êó∂ÁºñËØëÂô®‰∏≠Â≠òÂú®Êåá‰ª§ÈáçÊéíÂ∫èÁöÑ‰ºòÂåñ„ÄÇ‰πüÂ∞±ÊòØËØ¥‰∏äÈù¢ÁöÑÁ¨¨‰∫åÊ≠•ÂíåÁ¨¨‰∏âÊ≠•ÁöÑÈ°∫Â∫èÊòØ‰∏çËÉΩ‰øùËØÅÁöÑÔºåÊúÄÁªàÁöÑÊâßË°åÈ°∫Â∫èÂèØËÉΩÊòØ 1-2-3 ‰πüÂèØËÉΩÊòØ 1-3-2„ÄÇÂ¶ÇÊûúÊòØÂêéËÄÖÔºåÂàôÂú® 3 ÊâßË°åÂÆåÊØï„ÄÅ2 Êú™ÊâßË°å‰πãÂâçÔºåË¢´Á∫øÁ®ã‰∫åÊä¢Âç†‰∫ÜÔºåËøôÊó∂ instance Â∑≤ÁªèÊòØÈùû null ‰∫ÜÔºà‰ΩÜÂç¥Ê≤°ÊúâÂàùÂßãÂåñÔºâÔºåÊâÄ‰ª•Á∫øÁ®ã‰∫å‰ºöÁõ¥Êé•ËøîÂõû instanceÔºåÁÑ∂Âêé‰ΩøÁî®ÔºåÁÑ∂ÂêéÈ°∫ÁêÜÊàêÁ´†Âú∞Êä•Èîô ÊâÄ‰ª•ÈúÄË¶ÅÂ∞Ü instance ÂèòÈáèÂ£∞ÊòéÊàê volatile„ÄÇ 2.4 ÂØπ‰∫é long Âíå double ÂûãÂèòÈáèÁöÑÁâπÊÆäËßÑÂàôJMM Ë¶ÅÊ±Çlock„ÄÅunlock„ÄÅread„ÄÅload„ÄÅuse„ÄÅassign„ÄÅstore„ÄÅwrite Ëøô 8 ‰∏™Êìç‰ΩúÂÖ∑ÊúâÂéüÂ≠êÊÄßÔºå‰ΩÜÊòØÂØπ‰∫é 64 ‰ΩçÁöÑÊï∞ÊçÆÁ±ªÂûãÔºàlong Âíå doubleÔºâÔºåÊúâ‰∏ÄÊù°ÂÆΩÊùæÁöÑËßÑÂÆöÔºöÂÖÅËÆ∏ËôöÊãüÊú∫Â∞ÜÊ≤°ÊúâË¢´ volatile ‰øÆÈ•∞ÁöÑ 64 ‰ΩçÊï∞ÊçÆÁöÑËØªÂÜôÊìç‰ΩúÂàíÂàÜ‰∏∫‰∏§Ê¨° 32 ‰ΩçÁöÑÊìç‰ΩúÊù•ËøõË°åÔºåÂç≥ÂÖÅËÆ∏ËôöÊãüÊú∫ÂÆûÁé∞ÈÄâÊã©ÂèØ‰ª•‰∏ç‰øùËØÅ 64 ‰ΩçÊï∞ÊçÆÁ±ªÂûãÁöÑ load„ÄÅstore„ÄÅread„ÄÅwrite ËøôÂõõ‰∏™Êìç‰ΩúÁöÑÂéüÂ≠êÊÄßÔºåËøôÁÇπÂ∞±ÊòØÊâÄË∞ìÁöÑ long Âíå double ÁöÑÈùûÂéüÂ≠êÊÄßÂçèÂÆöÔºåÊâÄ‰ª•ÂèØËÉΩÂ§ö‰∏™Á∫øÁ®ãÂÖ±‰∫´‰∏Ä‰∏™Êú™Â£∞Êòé‰∏∫ volatile ÁöÑ long ÊàñËÄÖ double ÂèòÈáèÊó∂ÔºåËØªÂèñÂà∞ÁöÑÂÄº‰ºöÂæàÂ•áÊÄ™Ôºå‰∏çËøáÁé∞Âú®Âü∫Êú¨ÊâÄÊúâÂïÜÁî®ÁöÑËôöÊãüÊú∫ÈÉΩÂÆûÁé∞‰∫Ü 64 ‰ΩçÊï∞ÊçÆÁöÑËØªÂÜôÊìç‰Ωú‰Ωú‰∏∫ÂéüÂ≠êÊìç‰ΩúÊù•ÂØπÂæÖ„ÄÇ 2.5 ÂéüÂ≠êÊÄß„ÄÅÂèØËßÅÊÄß„ÄÅÊúâÂ∫èÊÄßJMM ÁöÑ‰∏â‰∏™ÁâπÂæÅÔºöÂéüÂ≠êÊÄß„ÄÅÂèØËßÅÊÄß„ÄÅÊúâÂ∫èÊÄß„ÄÇ ÂéüÂ≠êÊÄßÔºöÊúâ JMM Áõ¥Êé•‰øùËØÅÁöÑÂéüÂ≠êÊÄßÂèòÈáèÊìç‰ΩúÂåÖÊã¨ read„ÄÅload„ÄÅuse„ÄÅassign„ÄÅstore„ÄÅwriteÔºålong Âíå double ÁöÑÈùûÂéüÂ≠êÊÄßÂçèÂÆö‰æãÂ§ñ‚Ä¶Â¶ÇÊûúÊÉ≥Ë¶ÅÊõ¥Â§ßËåÉÂõ¥ÁöÑÂéüÂ≠êÊÄß‰øùËØÅÔºåÊúâ lock Âíå lock ‰øùËØÅÔºåÂ∫ïÂ±ÇÊèê‰æõ‰∫Ü monitorenter„ÄÅmonitorexit ‰∏§‰∏™Â≠óËäÇÁ†ÅÊåá‰ª§‰øùËØÅÂÖ∑ÊúâÂéüÂ≠êÊÄß„ÄÇ ÂèØËßÅÊÄßÔºöÊòØÊåá‰∏ÄÊù°Á∫øÁ®ã‰øÆÊîπ‰∫ÜÂΩìÂâçÂèòÈáèÁöÑÂÄºÔºåÂÖ∂‰ªñÁ∫øÁ®ãËÉΩÁ´ãÂç≥ÊÑüÁü•Âà∞Ëøô‰∏™Êñ∞ÂÄº„ÄÇËÄåÊôÆÈÄöÂèòÈáèÂøÖÈ°ªÈÄöËøá‰∏ªÂÜÖÂ≠òÂèòÈáè‰º†ÈÄíÊù•ÂÆåÊàê„ÄÇÈô§‰∫Ü volatileÔºåËøòÂèØ‰ª•ÂÆûÁé∞ÂèØËßÅÊÄßÁöÑÂÖ≥ÈîÆÂ≠óÊúâ synchronized Âíå final„ÄÇ volatile ÂÆûÁé∞ÂèØËßÅÊÄßÁöÑÂéüÂõ†Â∞±ÊòØÈÅµÂæ™‰∫Ü MESI ÁºìÂ≠ò‰∏ÄËá¥ÊÄßÂçèËÆÆÔºåÂèØ‰ª•‰øùËØÅÂèòÈáè‰øÆÊîπÂÆåÂêéÁ´ãÂç≥ÂêåÊ≠•Âà∞‰∏ªÂÜÖÂ≠òÔºåËÄåÂÖ∂‰ªñÁöÑÁ∫øÁ®ã‰∏≠ÁöÑÂ∑•‰ΩúÂÜÖÂ≠òÁöÑÂèòÈáèÂÄº‰ΩúÂ∫üÔºåÈúÄË¶Å‰ªé‰∏ªÂÜÖÂ≠òÂÜçÈáçÊñ∞ËØªÂèñ„ÄÇ Synchronized ÂÆûÁé∞ÂèØËßÅÊÄßÁöÑÂéüÂõ†ÊòØ ‚ÄúÂØπ‰∏Ä‰∏™ÂèòÈáèÊâßË°å unlock Êìç‰Ωú‰πãÂâçÔºå‰ºöÁ°Æ‰øùÂÖàÊääËØ•ÂèòÈáèÂêåÊ≠•Âõû‰∏ªÂÜÖÂ≠ò‰∏≠ÔºàÊâßË°å store Âíå write Êåá‰ª§Ôºâ‚Äù„ÄÇ final ÂÆûÁé∞ÂèØËßÅÊÄßÁöÑÂéüÂõ†ÊòØË¢´ final ‰øÆÈ•∞Â•ΩÁöÑÂ≠óÊÆµÂú®ÊûÑÈÄ†Âô®‰∏≠‰∏ÄÊó¶Ë¢´ÂàùÂßãÂåñÂÆåÊàêÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂ∞±ËÉΩÁúãËßÅ final Â≠óÊÆµÁöÑÂÄºÔºåÂπ∂‰∏îÊó†Ê≥ï‰øÆÊîπÔºåÊâÄ‰ª•Â∞±ËÉΩ‰øùËØÅÂèØËßÅÊÄß‰∫Ü„ÄÇ ÊúâÂ∫èÊÄßÔºöÂ¶ÇÊûúÂú®Êú¨Á∫øÁ®ãËßÇÂØüÔºåÊâÄÊúâÁöÑÊìç‰ΩúÈÉΩÊòØÊúâÂ∫èÁöÑÔºõÂ¶ÇÊûúÂú®‰∏Ä‰∏™Á∫øÁ®ã‰∏≠ËßÇÂØüÂè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãÔºåÊâÄÊúâÁöÑÊìç‰ΩúÈÉΩÊòØÊó†Â∫èÁöÑ„ÄÇÂâçÂçäÂè•ÊòØÊåá‚ÄúÁ∫øÁ®ãÂÜÖË°®Áé∞‰∏∫‰∏≤Ë°åÁöÑËØ≠‰πâ‚ÄùÔºåÂêéÂçäÂè•ÊòØÊåá‚ÄúÊåá‰ª§ÈáçÊéíÂ∫è‚ÄùÂíå‚ÄúÂ∑•‰ΩúÂÜÖÂ≠ò‰∏é‰∏ªÂÜÖÂ≠òÂêåÊ≠•Âª∂Ëøü‚ÄùÁé∞Ë±°ÔºåJava Êèê‰æõ‰∫Ü volatile Âíå synchronized ‰∏§‰∏™ÂÖ≥ÈîÆÂ≠ó‰øùËØÅÁ∫øÁ®ãÁöÑÊúâÂ∫èÊÄß„ÄÇvolatile ÂÖ≥ÈîÆÂ≠óÊú¨Ë∫´Â∞±ÂåÖÂê´‰∫ÜÁ¶ÅÊ≠¢Êåá‰ª§ÈáçÊéíÂ∫èÁöÑËØ≠‰πâÔºåËÄå synchronized ÂàôÊòØÁî±‚Äú‰∏Ä‰∏™ÂèòÈáèÂú®Âêå‰∏ÄÊó∂ÂàªÂè™ÂÖÅËÆ∏‰∏ÄÊù°Á∫øÁ®ãÂØπÂÖ∂ËøõË°åÂä†ÈîÅÊìç‰Ωú‚ÄùËøôÊù°ËßÑÂàôËé∑ÂæóÁöÑ„ÄÇ 2.6 ÂÖàË°åÂèëÁîüÔºàhappens-beforeÔºâÂéüÂàôhappens-before ÂéüÂàôÈùûÂ∏∏ÈáçË¶ÅÔºåÂÆÉÊòØÂà§Êñ≠ÊòØÂê¶Â≠òÂú®Á´û‰∫âÔºåÁ∫øÁ®ãÊòØÂê¶ÂÆâÂÖ®ÁöÑ‰∏ªË¶Å‰æùÊçÆ„ÄÇÊåá‰ª§ÈáçÊéíÂ∫èÁöÑÂâçÊèêÊòØË¶ÅÈÅµÂÆà happens-before ÂéüÂàô„ÄÇ ÂÖàË°åÂèëÁîüÊòØ JMM ‰∏≠ÂÆö‰πâÁöÑ‰∏§È°πÊìç‰Ωú‰πãÈó¥ÁöÑÂÅèÂ∫èÂÖ≥Á≥ªÔºåÂ¶ÇÊûúËØ¥ A ÂÖàË°åÂèëÁîü‰∫é BÔºåÂÖ∂ÂÆûÂ∞±ÊòØËØ¥Âú®Êìç‰Ωú B ‰πãÂâçÔºåÊìç‰Ωú A ‰∫ßÁîüÁöÑÂΩ±ÂìçËÉΩÂ§üË¢´Êìç‰Ωú B ËßÇÂØüÂà∞„ÄÇ„ÄåTipÔºöÊó∂Èó¥‰∏äÁöÑÂÖàÂêéÈ°∫Â∫èÂíåÂÖàË°åÂèëÁîüÂéüÂàôÊ≤°ÊúâÂ§™Â§ßÁöÑÂÖ≥Á≥ªÔºåÊâÄ‰ª•Âú®Ë°°ÈáèÂÆâÂÖ®ÈóÆÈ¢òÁöÑÊó∂ÂÄôÈúÄË¶Å‰ª• happens-before ÂéüÂàô‰∏∫ÂáÜ„Äç Â§©ÁÑ∂ÁöÑ happens-beforeÂéüÂàôÊúâÔºö Á®ãÂ∫èÊ¨°Â∫èËßÑÂàôÔºå‰∏Ä‰∏™Á∫øÁ®ãÂÜÖÁöÑ‰ª£Á†ÅËá™‰∏äËÄå‰∏ãËøêË°åÔºõ ÁÆ°Á®ãÈîÅÂÆöËßÑÂàôÔºåunlockÂøÖÈ°ªÂú®lock‰πãÂêéÔºåÂΩìÁÑ∂ËÇØÂÆöÊìç‰ΩúÁöÑÊòØÂêå‰∏Ä‰∏™ÂêåÊ≠•ÂØπË±°Ôºõ volatileÂèòÈáèËßÑÂàôÔºåÂØπ‰∏Ä‰∏™ volatile ÂèòÈáèÁöÑÂÜôÊìç‰ΩúÊÄªÊòØÂÖàË°åÂèëÁîü‰∫éÂêéÈù¢ÂØπËøô‰∏™ÂèòÈáèÁöÑËØªÊìç‰ΩúÔºõ Á∫øÁ®ãÂêØÂä®ËßÑÂàôÔºå‰ªª‰ΩïÁ∫øÁ®ãÁöÑËøê‰ΩúÈÉΩÂøÖÈ°ªÂú® start ‰πãÂêéÔºõ Á∫øÁ®ãÁªàÊ≠¢ËßÑÂàôÔºå‰ªª‰ΩïÁ∫øÁ®ãÁöÑÁªìÊùüÈÉΩÂøÖÈ°ªÂú®ËØ•Á∫øÁ®ã‰ªª‰ΩïÊìç‰Ωú‰πãÂêéÔºõ Á∫øÁ®ã‰∏≠Êñ≠ËßÑÂàôÔºåinterrupt() Ë∞ÉÁî®‰πãÂêéÊâç‰ºöÊúâ‰∏≠Êñ≠Êó∂Èó¥ÁöÑÂèëÁîüÔºõ ÂØπË±°ÁªàÁªìËßÑÂàôÔºåÊûÑÈÄ†ÂáΩÊï∞ÂÖà‰∫é finalize() ÂèëÁîüÔºõ ‰º†ÈÄíÊÄßÔºå A ÂÖà‰∫é BÔºåB ÂÖà‰∫é CÔºåÂàô A ÂÖà‰∫é C„ÄÇ 3. Java ‰∏éÁ∫øÁ®ã3.1 Á∫øÁ®ãÁöÑÂÆûÁé∞ÂÆûÁé∞Á∫øÁ®ã‰∏ªË¶ÅÊúâ‰∏âÁßçÊñπÂºèÔºö ‰ΩøÁî®ÂÜÖÊ†∏Á∫øÁ®ãÂÆûÁé∞Ôºõ ‰ΩøÁî®Áî®Êà∑Á∫øÁ®ãÂÆûÁé∞Ôºõ ‰ΩøÁî®Áî®Êà∑Á∫øÁ®ãÂä†‰∏äËΩªÈáèÁ∫ßËøõÁ®ãÊ∑∑ÂêàÂÆûÁé∞„ÄÇ 3.1.1 ‰ΩøÁî®ÂÜÖÊ†∏Á∫øÁ®ãÂÆûÁé∞ÂÜÖÊ†∏Á∫øÁ®ãÔºàKernel ThreadÔºåKLTÔºâÂ∞±ÊòØÁõ¥Êé•Áî±Êìç‰ΩúÁ≥ªÁªüÂÜÖÊ†∏ÊîØÊåÅÁöÑÁ∫øÁ®ãÔºåËøôÁßçÁ∫øÁ®ãÁî±ÂÜÖÊ†∏Êù•ÂÆåÊàêÁ∫øÁ®ãÂàáÊç¢ÔºåÂÜÖÊ†∏ÈÄöËøáÊìçÁ∫µË∞ÉÂ∫¶Âô®Êù•ÂØπÁ∫øÁ®ãËøõË°åË∞ÉÂ∫¶„ÄÇËÄåÁ®ãÂ∫è‰∏ÄËà¨‰∏ç‰ºö‰ΩøÁî®ÂÜÖÊ†∏Á∫øÁ®ãÔºå‰ºöÈÄöËøá‰∏Ä‰∏™‰∏≠Èó¥‰ª∂‚Äî- ËΩªÈáèÁ∫ßËøõÁ®ãÔºåÊù•ÂíåÂÜÖÊ†∏Á∫øÁ®ã1Ôºö1Êò†Â∞Ñ„ÄÇ 3.1.2 ‰ΩøÁî®Áî®Êà∑Á∫øÁ®ãÂÆûÁé∞Áî®Êà∑Á∫øÁ®ãÂ∞±ÊòØÁ≥ªÁªüÂÜÖÊ†∏ÊÑüÂèó‰∏çÂà∞ÁöÑÁ∫øÁ®ãÔºåÊâÄ‰ª•Áî®Êà∑ÁöÑÂª∫Á´ã„ÄÅÂêåÊ≠•„ÄÅÈîÄÊØÅÂíåË∞ÉÂ∫¶ÂÆåÂÖ®Âú®Áî®Êà∑ÊÄÅ‰∏≠ÂÆåÊàêÔºå‰∏çÈúÄË¶ÅÂÜÖÊ†∏ÁöÑÂ∏ÆÂä©„ÄÇ‰ΩÜÊòØËøô‰∏™ÂÆûÁé∞Ëµ∑Êù•ÂæàÂõ∞ÈöæÔºåÂü∫Êú¨ÈÉΩÊîæÂºÉ‰ΩøÁî®‰∫Ü„ÄÇËøõÁ®ãÂíåÂÜÖÊ†∏Á∫øÁ®ã 1ÔºöN„ÄÇ 3.1.3 Ê∑∑Âêà‰ΩøÁî®Â§öÂØπÂ§öÁöÑÁ∫øÁ®ãÊ®°ÂûãÔºåËΩªÈáèÁ∫ßËøõÁ®ãÂíåÁî®Êà∑Á∫øÁ®ã M ÔºöN„ÄÇ 3.1.4 Java Á∫øÁ®ãÁöÑÂÆûÁé∞Êàë‰ª¨‰ΩøÁî®ÁöÑ jdk ÊòØÈááÁî®ÁöÑÂÜÖÊ†∏Á∫øÁ®ãÂÆûÁé∞ÁöÑÔºåËΩªÈáèÁ∫ßËøõÁ®ãÂíåÂÜÖÊ†∏Á∫øÁ®ã1Ôºö1„ÄÇ 3.2 Java Á∫øÁ®ãË∞ÉÂ∫¶Á∫øÁ®ãË∞ÉÂ∫¶ÊòØÊåáÁ≥ªÁªü‰∏∫Á∫øÁ®ãÂàÜÈÖçÂ§ÑÁêÜÂô®‰ΩøÁî®ÊùÉÁöÑËøáÁ®ãÔºå‰∏ªË¶ÅÁöÑË∞ÉÂ∫¶ÊñπÂºèÊúâ‰∏§ÁßçÔºåÂàÜÂà´ÊòØ ÂçèÂêåÂºèÔºàCooperative Threads-SchedulingÔºâÁ∫øÁ®ãË∞ÉÂ∫¶ Âíå Êä¢Âç†ÂºèÔºàPreemptive Threads-SchedulingÔºâÁ∫øÁ®ãË∞ÉÂ∫¶„ÄÇ Java ‰ΩøÁî®ÁöÑÂΩìÁÑ∂ÊòØÊä¢Âç†ÂºèÁ∫øÁ®ãË∞ÉÂ∫¶ÔºåÂõ†‰∏∫ÂçèÂêåÂºèÁ∫øÁ®ãË∞ÉÂ∫¶ËôΩÁÑ∂ÂÆûÁé∞ÁÆÄÂçï‰ΩÜÊòØÁ∫øÁ®ãÊâßË°åÊó∂Èó¥‰∏çÂèØÊéßÔºåÂ¶ÇÊûúÁ∫øÁ®ãÁºñÂÜôÊúâÈóÆÈ¢ò‰∏çÈÄöÁü•Á≥ªÁªüËøõË°åÁ≥ªÁªüÂàáÊç¢ÈÇ£‰πàÁ®ãÂ∫èÂ∞±‰ºö‰∏ÄÁõ¥Â†µÂ°û„ÄÇËôΩÁÑ∂ËØ¥ Java Á∫øÁ®ãË∞ÉÂ∫¶ÊòØÁ≥ªÁªüËá™Âä®ÂÆåÊàêÁöÑÔºå‰ΩÜÊòØÊàë‰ª¨ÂèØ‰ª•ËÆæÁΩÆÁ∫øÁ®ã‰ºòÂÖàÁ∫ßÔºå‰ºòÂÖàÁ∫ßË∂äÈ´òË∂äÂÆπÊòìË¢´Á≥ªÁªüÈÄâÊã©Ôºå‰∏çËøáÂÖ∂ÂÆûÁ∫øÁ®ã‰ºòÂÖàÁ∫ß‰πü‰∏çÈù†Ë∞±ÔºåÂõ†‰∏∫ java ÁöÑÁ∫øÁ®ãÊòØË¢´Êò†Â∞ÑÂà∞Á≥ªÁªüÁöÑÂéüÁîüÁ∫øÁ®ã‰∏äÂÆûÁé∞ÔºåÊâÄ‰ª•ÊúÄÁªàÁöÑË∞ÉÂ∫¶ËøòÊòØ os ËØ¥‰∫ÜÁÆó„ÄÇ 3.3 Áä∂ÊÄÅËΩ¨Êç¢Java ÁöÑÁ∫øÁ®ãÊúâ 5 ÁßçÁä∂ÊÄÅÔºö Êñ∞Âª∫ÔºàNewÔºâ:ÂàõÂª∫ÂêéÂ∞öÊú™ÂêØÂä®ÁöÑÁ∫øÁ®ãÂ§Ñ‰∫éËøôÁßçÁä∂ÊÄÅ Ôºõ ËøêË°åÔºàRunnableÔºâÔºöÂåÖÊã¨‰∫ÜÊìç‰ΩúÁ≥ªÁªüÁ∫øÁ®ãÁä∂ÊÄÅ‰∏≠ÁöÑ Running Âíå ReadyÔºå‰πüÂ∞±ÊòØÂ§Ñ‰∫éÊ≠§Áä∂ÊÄÅÁöÑÁ∫øÁ®ãÊúâÂèØËÉΩÊ≠£Âú®ÊâßË°åÔºå‰πüÊúâÂèØËÉΩÊ≠£Âú®Á≠âÂæÖ cpu ÂàÜÈÖçÊó∂Èó¥ÁâáÔºõ Á≠âÂæÖÔºàWaitingÔºâÔºöÂ§Ñ‰∫éËøôÁßçÁä∂ÊÄÅÁöÑËøõÁ®ã‰∏ç‰ºöË¢´ÂàÜÈÖç cpu ÊâßË°åÊó∂Èó¥ÔºåÂÆÉ‰ª¨Ë¶ÅËÆ©Á∫øÁ®ãÊòæÁ§∫ÁöÑÂî§ÈÜí„ÄÇ‰ª•‰∏ãÊñπÊ≥ï‰ºöËÆ©Á∫øÁ®ãËøõÂÖ•Âà∞Ëøô‰∏™Áä∂ÊÄÅÔºö Object.wait() „ÄåÂèØËÆæÁΩÆÊó∂Èó¥„Äç Thread.join() „ÄåÂèØËÆæÁΩÆÊó∂Èó¥„Äç LockSupport.park()„ÄÅLockSupport.parkNanos()„ÄÅLockSupport.parkUntil() ÈòªÂ°ûÔºàBlockedÔºâÔºö‰∏éÁ≠âÂæÖÁä∂ÊÄÅÁöÑÂå∫Âà´ÊòØÔºå‚ÄúÈòªÂ°ûÁä∂ÊÄÅ‚ÄùÂú®Á≠âÂæÖËé∑ÂèñÂà∞‰∏Ä‰∏™ÊéíÂÆÉÈîÅÔºåËøô‰∏™Êó∂Èó¥Â∞ÜÂú®Âè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãÊîæÂºÉËøô‰∏™ÈîÅÁöÑÊó∂ÂÄôÊñπÂºèÔºåËÄå‚ÄúÁ≠âÂæÖÁä∂ÊÄÅ‚ÄùÂàôÊòØÂú®Á≠âÂæÖ‰∏ÄÊÆµÊó∂Èó¥ÔºåÊàñËÄÖÂî§ÈÜíÂä®‰ΩúÁöÑÂèëÁîü„ÄÇÂú® synchronized ÁöÑÊó∂ÂÄôÔºåÁ∫øÁ®ãËøõÂÖ•ÂêåÊ≠•Âå∫ÂüüÔºåÂ∞±‰ºöËøõÂÖ•ÈòªÂ°ûÁä∂ÊÄÅÔºõ ÁªìÊùüÔºàTerminatedÔºâÔºöÂ∑≤ÁªàÊ≠¢Á∫øÁ®ãÁöÑÁ∫øÁ®ãÁä∂ÊÄÅÔºåÁ∫øÁ®ãÂ∑≤ÁªèÁªìÊùüÊâßË°å„ÄÇ Á¨¨ÂçÅ‰∏âÁ´† Á∫øÁ®ãÂÆâÂÖ®‰∏éÈîÅ‰ºòÂåñ1. Á∫øÁ®ãÂÆâÂÖ®Á∫øÁ®ãÂÆâÂÖ®ÁöÑÂÆö‰πâÔºö ÂΩìÂ§ö‰∏™Á∫øÁ®ãËÆøÈóÆ‰∏Ä‰∏™ÂØπË±°Êó∂ÔºåÂ¶ÇÊûú‰∏çÁî®ËÄÉËôëËøô‰∫õÁ∫øÁ®ãÂú®ËøêË°åÊó∂ÁéØÂ¢É‰∏ãÁöÑË∞ÉÂ∫¶Âíå‰∫§ÊõøÊâßË°åÔºå‰πü‰∏çÈúÄË¶ÅËøõË°åÈ¢ùÂ§ñÁöÑÂêåÊ≠•ÔºåÊàñËÄÖÂú®Ë∞ÉÁî®ÊñπËøõË°å‰ªª‰ΩïÂÖ∂‰ªñÁöÑÂçèË∞ÉÊìç‰ΩúÔºåÔºàÂçïÊ¨°ÔºâË∞ÉÁî®Ëøô‰∏™ÂØπË±°ÁöÑË°å‰∏∫Â∞±ËÉΩÂ§üËé∑ÂèñÂà∞Ê≠£Á°ÆÁöÑÁªìÊûúÔºåÈÇ£‰πàËøô‰∏™ÂØπË±°Â∞±ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇ ÊåâÁÖßÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ‚ÄúÂÆâÂÖ®Á®ãÂ∫¶‚ÄùÔºåÁî±Âº∫Ëá≥Âº±Êù•ÊéíÂ∫èÔºåÂèØ‰ª•Â∞Ü Java ËØ≠Ë®Ä‰∏≠ÂêÑÁßçÊìç‰ΩúÂÖ±‰∫´ÁöÑÊï∞ÊçÆÂàÜ‰∏∫‰ª•‰∏ã‰∫îÁ±ªÔºö‰∏çÂèØÂèò„ÄÅÁªùÂØπÁ∫øÁ®ãÂÆâÂÖ®„ÄÅÁõ∏ÂØπÁ∫øÁ®ãÂÆâÂÖ®„ÄÅÁ∫øÁ®ãÂÖºÂÆπÂíåÁ∫øÁ®ãÁã¨Á´ã„ÄÇ 1.1 ‰∏çÂèØÂèòÂç≥ÂèØÁúã‰∏çÂèØÊîπÁöÑÊï∞ÊçÆÔºåfinal ‰øÆÈ•∞„ÄÇ 1.2 ÁªùÂØπÁ∫øÁ®ãÂÆâÂÖ®ÈõÜÂêà‰∏≠ÁöÑ Vector„ÄÅConcurrentHashMapÂπ∂ÈùûÁªùÂØπÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÔºåÂõ†‰∏∫Â¶ÇÊûú‰∏ç‰ΩøÁî®Ëø≠‰ª£Âô®ÂéªÂà†Èô§ÂÖÉÁ¥†ÁöÑËØùÔºåÈÅçÂéÜÁöÑÊó∂ÂÄô‰æùÁÑ∂‰ºöÂá∫Áé∞ÈóÆÈ¢ò„ÄÇ 1.3 Áõ∏ÂØπÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÂçïÊ¨°Ë∞ÉÁî®‰∏çÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂä†ÂêåÊ≠•Êé™ÊñΩÔºåËøôÂ∞±ÊòØÁõ∏ÂØπÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÔºåÁ±ª‰ºº‰∫é HasTable„ÄÅVector„ÄÅCollections ÁöÑ synchronizedCollection()Á≠âÁ≠â„ÄÇ 1.4 Á∫øÁ®ãÂÖºÂÆπÁ∫øÁ®ãÂÖºÂÆπÊòØÊåáÂØπË±°Êú¨Ë∫´‰∏çÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå‰ΩÜÊòØÂèØ‰ª•ÈÄöËøáË∞ÉÁî®Á´ØÊ≠£Á°ÆÁöÑ‰ΩøÁî®ÂêåÊ≠•ÊâãÊÆµÊù•‰øùËØÅÂØπË±°Âú®Âπ∂ÂèëÁéØÂ¢É‰∏≠ÂÆâÂÖ®ÁöÑ‰ΩøÁî®ÔºåÂ¶Ç ArrayList„ÄÅHashMap„ÄÇ 1.5 Á∫øÁ®ãÂØπÁ´ãÁ∫øÁ®ãÂØπÁ´ãÊòØ‰∏çÁÆ°Ë∞ÉÁî®Á´ØÊòØÂê¶ÈááÂèñ‰∫ÜÂêåÊ≠•Êé™ÊñΩÔºåÈÉΩÊó†Ê≥ïÂú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÂπ∂Âèë‰ΩøÁî®ÁöÑ‰ª£Á†Å„ÄÇËøôÁßç‰ª£Á†ÅÂ∞±‰∏çË¶ÅÂÜô‰∫Ü‚Ä¶ÊØîÂ¶Ç System.setIn()„ÄÅSystem.setOut()„ÄÇ 2. ÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®ÁöÑÊñπÊ≥ï2.1 ‰∫íÊñ•ÂêåÊ≠•ÊúÄÂü∫Êú¨ÁöÑÊâãÊÆµÊúâ synchronized„ÄÅReentrantLock„ÄÇËøôÈáå‰πüÊèêÂà∞‰∫Ü ReentrantLockÂá†‰∏™ÁâπÊÄßÔºö ÊúâÁ≠âÂæÖÂèØ‰∏≠Êñ≠ÔºåÂΩìÊåÅÊúâÈîÅÈïøÊúü‰∏çÈáäÊîæÊó∂ÔºåÁ≠âÂæÖÁöÑÁ∫øÁ®ãÂèØ‰ª•ÈÄâÊã©ÊîæÂºÉÁ≠âÂæÖÔºåÊîπ‰∏∫Â§ÑÁêÜÂÖ∂‰ªñ‰∫ãÊÉÖÔºõ ÊúâÂÖ¨Âπ≥ÈîÅÂíåÈùûÂÖ¨Âπ≥ÈîÅÁöÑÈÄâÊã©Ôºõ ÂèØ‰ª•ÁªëÂÆöÂ§ö‰∏™ConditionÔºå‰πüÂ∞±ÊòØÂèØ‰ª•ÊúâÂ§ö‰∏™Êù°‰ª∂ÈòüÂàó„ÄÇ 2.2 ÈùûÈòªÂ°ûÂêåÊ≠•Âü∫‰∫éÂÜ≤Á™ÅÊ£ÄÊµãÁöÑ‰πêËßÇÂπ∂ÂèëÁ≠ñÁï•ÔºåÈÄö‰øóÁöÑÊù•ËØ¥Â∞±ÊòØÂÖàËøõË°åÊìç‰ΩúÔºåÂ¶ÇÊûúÊ≤°ÈóÆÈ¢òÂ∞±ÊàêÂäü‰∫ÜÔºåÂ¶ÇÊûúÊúâÂÖ∂‰ªñÁ∫øÁ®ã‰∫âÁî®Êï∞ÊçÆÔºå‰∫ßÁîü‰∫ÜÂÜ≤Á™ÅÔºåÂ∞±ÂÜçËøõË°åÂÖ∂‰ªñÊé™ÊñΩÔºåËøôÁßç‰πêËßÇÁöÑÂπ∂ÂèëÁ≠ñÁï•‰∏çÈúÄË¶ÅÂ∞ÜÁ∫øÁ®ãÊåÇËµ∑ÔºåÂõ†Ê≠§ËøôÁßçÂêåÊ≠•Êìç‰ΩúÁß∞‰∏∫ÈùûÈòªÂ°ûÂêåÊ≠•„ÄÇ 2.3 Êó†ÂêåÊ≠•ÊñπÊ°àThreadLocal ‚Äî- ËßÅÊàëÁöÑ Â§öÁ∫øÁ®ãÔºàÂõõÔºâ‚Äî- ThreadLocal ‰∏ÄÊñá 3. ÈîÅ‰ºòÂåñ Ëá™ÊóãÈîÅÂíåËá™ÈÄÇÂ∫îËá™ÊóãÈîÅÔºõ ÈîÅÊ∂àÈô§„ÄÇÂèØ‰ª•‰∏çÁî®Áî®Âà∞ÈîÅÁöÑÂú∞ÊñπÔºåÂèØ‰ª•‰∏çÂä†ÈîÅÔºõ ÈîÅÁ≤óÂåñ„ÄÇÂ¶ÇÊûúÊúâ‰∏ÄÁ≥ªÂàóÊìç‰ΩúÂèçÂ§çÁöÑÂä†ÈîÅÂíåËß£ÈîÅÔºåÂ∞±‰ºöÈîÅÂêåÊ≠•ËåÉÂõ¥Êâ©Â§ßÔºõ ËΩªÈáèÁ∫ßÈîÅ„ÄÇÊú¨ÊÑèÊòØÂú®Ê≤°ÊúâÂ§öÁ∫øÁ®ãÁ´û‰∫âÁöÑÂâçÊèê‰∏ãÔºåÊØîÂ¶Ç‰∏§‰∏™Á∫øÁ®ã‰∫§ÊõøÊâßË°åÔºå‰∏ç‰ºöÂèëÁîüÁ´û‰∫âÔºåÊ≠§Êó∂Â∞±ÂèØ‰ª•‰ΩøÁî®ËΩªÈáèÁ∫ßÈîÅ„ÄÇ ÂÅèÂêëÈîÅ„ÄÇÂèØ‰ª•ÊèêÈ´òÂ∏¶ÊúâÂêåÊ≠•‰ΩÜÊó†Á´û‰∫âÁöÑÁ®ãÂ∫èÊÄßËÉΩÔºåÈÄÇÂêàÂçïÁ∫øÁ®ã„ÄÇÂ¶ÇÊûúÂèòÈáèÊÄªÊòØË¢´Â§ö‰∏™Á∫øÁ®ãËÆøÈóÆÔºåÈÇ£‰πàÂÅèÂêëÊ®°ÂºèÊòØÊ≤°ÊúâÊÑè‰πâÁöÑÂπ∂‰∏î‰ºöÊµ™Ë¥πÂºÄÈîÄÂíåÊó∂Èó¥„ÄÇ Ë¶ÅÁêÜËß£ËΩªÈáèÁ∫ßÈîÅÂíåÂÅèÂêëÈîÅÔºåÂ∞±ÈúÄË¶ÅË∞àÂà∞ËôöÊãüÊú∫‰∏≠ÂØπË±°ÁöÑÂÜÖÂ≠òÂ∏ÉÂ±Ä„ÄÇËôöÊãüÊú∫‰∏≠ÁöÑÂØπË±°Â§¥Áî±‰∏§ÈÉ®ÂàÜÁªÑÊàêÔºåÁ¨¨‰∏ÄÈÉ®ÂàÜÊòØÁî®Êù•Â≠òÂÇ®ÂØπË±°Ëá™Ë∫´ÁöÑËøêË°åÊó∂Êï∞ÊçÆÔºå‰æãÂ¶ÇÂìàÂ∏åÁ†ÅÔºàHashCodeÔºâ„ÄÅGC ÂàÜ‰ª£Âπ¥ÈæÑÔºàGC AgeÔºâÁ≠âÁ≠âÔºå‰∏ÄËà¨ÊòØ64‰ΩçÔºåÂÆòÊñπÁß∞‰πã‰∏∫ Mark WordÔºåÂÆÉÊòØÂÆûÁé∞ËΩªÈáèÁ∫ßÈîÅÂíåÂÅèÂêëÈîÅÁöÑÂÖ≥ÈîÆÔºåÂØπË±°Â§¥Èô§‰∫Ü Mark WordÔºåËøòÊúâ‰∏ÄÈÉ®ÂàÜÊòØÁî®Êù•Â≠òÂÇ®ÊåáÂêëÊñπÊ≥ïÂå∫ÂØπË±°Á±ªÂûãÊï∞ÊçÆÁöÑÊåáÈíàÔºåÂ¶ÇÊûúÊòØÊï∞ÁªÑÂØπË±°ÁöÑËØùÔºåËøòÊúâÈ¢ùÂ§ñÁöÑ‰∏ÄÈÉ®ÂàÜÁî®Êù•Â≠òÂÇ®Êï∞ÁªÑÈïøÂ∫¶„ÄÇ Â¶ÇÂõæÊâÄÁ§∫ÔºåÊòØ 32 ‰ΩçÁöÑËôöÊãüÊú∫ÁöÑ Mark Word„ÄÇ Áé∞Âú®ËÆ≤‰∏Ä‰∏ã synchronized ÁöÑÈîÅÂçáÁ∫ßËøáÁ®ãÔºö ÊúÄÂºÄÂßãÁöÑÂØπË±°ÊòØÊó†ÈîÅÊ®°ÂºèÔºåMark Word ÁöÑÂâç 25 ‰ΩçËÆ∞ÂΩïÂØπË±°ÁöÑHashCodeÔºåÈîÅÊ†áÂøó‰ΩçÊòØ01ÔºåÊòØÂê¶ÂÅèÂêëÈîÅÈÇ£‰∏Ä‰ΩçÊòØ0„ÄÇ ÂΩìÂØπË±°Ë¢´ÂΩìÂÅöÂêåÊ≠•ÈîÅÂπ∂Êúâ‰∏Ä‰∏™Á∫øÁ®ãAÊä¢Âà∞‰∫ÜÈîÅÊó∂ÔºåÈîÅÊ†áÂøó‰ΩçËøòÊòØ01Ôºå‰ΩÜÊòØÂê¶ÂÅèÂêëÈîÅÈÇ£‰∏Ä‰ΩçÊîπÊàê1ÔºåÂâç23bitËÆ∞ÂΩïÊä¢Âà∞ÈîÅÁöÑÁ∫øÁ®ãidÔºåÂâ©‰∏ãÁöÑ 2 ‰Ωç ÊòØ epochÔºå‰ª£Ë°®ÂÅèÂêëÁöÑÊó∂Èó¥Êà≥ÔºåË°®Á§∫ËøõÂÖ•ÂÅèÂêëÈîÅÁä∂ÊÄÅ„ÄÇ ÂΩìÁ∫øÁ®ãAÂÜçÊ¨°ËØïÂõæÊù•Ëé∑ÂæóÈîÅÊó∂ÔºåJVMÂèëÁé∞ÂêåÊ≠•ÈîÅÂØπË±°ÁöÑÊ†áÂøó‰ΩçÊòØ01ÔºåÊòØÂê¶ÂÅèÂêëÈîÅÊòØ1Ôºå‰πüÂ∞±ÊòØÂÅèÂêëÁä∂ÊÄÅÔºåMark Word‰∏≠ËÆ∞ÂΩïÁöÑÁ∫øÁ®ãidÂ∞±ÊòØÁ∫øÁ®ãAËá™Â∑±ÁöÑidÔºåË°®Á§∫Á∫øÁ®ãAÂ∑≤ÁªèËé∑Âæó‰∫ÜËøô‰∏™ÂÅèÂêëÈîÅÔºåÂèØ‰ª•ÊâßË°åÂêåÊ≠•ÈîÅÁöÑ‰ª£Á†Å„ÄÇ ÂΩìÁ∫øÁ®ãBËØïÂõæËé∑ÂæóËøô‰∏™ÈîÅÊó∂ÔºåJVMÂèëÁé∞ÂêåÊ≠•ÈîÅÂ§Ñ‰∫éÂÅèÂêëÁä∂ÊÄÅÔºå‰ΩÜÊòØMark Word‰∏≠ÁöÑÁ∫øÁ®ãidËÆ∞ÂΩïÁöÑ‰∏çÊòØBÔºåÈÇ£‰πàÁ∫øÁ®ãB‰ºöÂÖàÁî®CASÊìç‰ΩúËØïÂõæËé∑ÂæóÈîÅÔºåËøôÈáåÁöÑËé∑ÂæóÈîÅÊìç‰ΩúÊòØÊúâÂèØËÉΩÊàêÂäüÁöÑÔºåÂõ†‰∏∫Á∫øÁ®ãA‰∏ÄËà¨‰∏ç‰ºöËá™Âä®ÈáäÊîæÂÅèÂêëÈîÅ„ÄÇÂ¶ÇÊûúÊä¢ÈîÅÊàêÂäüÔºåÂ∞±ÊääMark WordÈáåÁöÑÁ∫øÁ®ãidÊîπ‰∏∫Á∫øÁ®ãBÁöÑidÔºå‰ª£Ë°®Á∫øÁ®ãBËé∑Âæó‰∫ÜËøô‰∏™ÂÅèÂêëÈîÅÔºåÂèØ‰ª•ÊâßË°åÂêåÊ≠•ÈîÅ‰ª£Á†Å„ÄÇÂ¶ÇÊûúÊä¢ÈîÅÂ§±Ë¥•ÔºåÂàôÁªßÁª≠ÊâßË°åÊ≠•È™§5„ÄÇ ÂÅèÂêëÈîÅÁä∂ÊÄÅÊä¢ÈîÅÂ§±Ë¥•Ôºå‰ª£Ë°®ÂΩìÂâçÈîÅÊúâ‰∏ÄÂÆöÁöÑÁ´û‰∫âÔºåÂÅèÂêëÈîÅÂ∞ÜÂçáÁ∫ß‰∏∫ËΩªÈáèÁ∫ßÈîÅ„ÄÇJVM‰ºöÂú®ÂΩìÂâçÁ∫øÁ®ãÁöÑÁ∫øÁ®ãÊ†à‰∏≠ÂºÄËæü‰∏ÄÂùóÂçïÁã¨ÁöÑÁ©∫Èó¥ÔºåÁß∞‰πã‰∏∫ Lock RecordÔºåÈáåÈù¢‰øùÂ≠òÊåáÂêëÂØπË±°ÈîÅMark WordÁöÑÂâØÊú¨ÔºåÂêåÊó∂Âú®ÂØπË±°ÈîÅMark Word‰∏≠‰øùÂ≠òÊåáÂêëËøôÁâáÁ©∫Èó¥ÁöÑÊåáÈíà„ÄÇ‰∏äËø∞‰∏§‰∏™‰øùÂ≠òÊìç‰ΩúÈÉΩÊòØCASÊìç‰ΩúÔºåÂ¶ÇÊûú‰øùÂ≠òÊàêÂäüÔºå‰ª£Ë°®Á∫øÁ®ãÊä¢Âà∞‰∫ÜÂêåÊ≠•ÈîÅÔºåÂ∞±ÊääMark Word‰∏≠ÁöÑÈîÅÊ†áÂøó‰ΩçÊîπÊàê00ÔºåÂèØ‰ª•ÊâßË°åÂêåÊ≠•ÈîÅ‰ª£Á†Å„ÄÇÂ¶ÇÊûú‰øùÂ≠òÂ§±Ë¥•ÔºåË°®Á§∫Êä¢ÈîÅÂ§±Ë¥•ÔºåÁ´û‰∫âÂ§™ÊøÄÁÉàÔºåÁªßÁª≠ÊâßË°åÊ≠•È™§6„ÄÇ ËΩªÈáèÁ∫ßÈîÅÊä¢ÈîÅÂ§±Ë¥•ÔºåJVM‰ºö‰ΩøÁî®Ëá™ÊóãÈîÅÔºåËá™ÊóãÈîÅ‰∏çÊòØ‰∏Ä‰∏™ÈîÅÁä∂ÊÄÅÔºåÂè™ÊòØ‰ª£Ë°®‰∏çÊñ≠ÁöÑÈáçËØïÔºåÂ∞ùËØïÊä¢ÈîÅ„ÄÇ‰ªéJDK1.7ÂºÄÂßãÔºåËá™ÊóãÈîÅÈªòËÆ§ÂêØÁî®ÔºåËá™ÊóãÊ¨°Êï∞Áî±JVMÂÜ≥ÂÆö„ÄÇÂ¶ÇÊûúÊä¢ÈîÅÊàêÂäüÂàôÊâßË°åÂêåÊ≠•ÈîÅ‰ª£Á†ÅÔºåËß£ËΩªÈáèÁ∫ßÈîÅÈîÅ‰πüÊòØÁî® CASÔºåÂ∞ÜÊ†àÂ∏ß‰∏äÁöÑLock RecordÊõøÊç¢ÂõûÂéªÔºåÊõøÊç¢ÊàêÂàöÂ∞±ÂêåÊ≠•ÂÆåÊàê‰∫Ü„ÄÇÂ¶ÇÊûúÂ§±Ë¥•ÂàôÁªßÁª≠ÊâßË°åÊ≠•È™§7„ÄÇ Ëá™ÊóãÈîÅÈáçËØï‰πãÂêéÂ¶ÇÊûúÊä¢ÈîÅ‰æùÁÑ∂Â§±Ë¥•ÔºåÂêåÊ≠•ÈîÅ‰ºöÂçáÁ∫ßËá≥ÈáçÈáèÁ∫ßÈîÅÔºåÈîÅÊ†áÂøó‰ΩçÊîπ‰∏∫10„ÄÇÂú®Ëøô‰∏™Áä∂ÊÄÅ‰∏ãÔºåÊú™Êä¢Âà∞ÈîÅÁöÑÁ∫øÁ®ãÈÉΩ‰ºöË¢´ÈòªÂ°û„ÄÇ https://blog.csdn.net/lkforce/article/details/81128115 ÊÄªÁªìËá≥Ê≠§ÔºåÂë®ÂøóÂçéÂÖàÁîüÁöÑËøôÊú¨„ÄäÊ∑±ÂÖ•ÁêÜËß£ Java ËôöÊãüÊú∫„ÄãÁ¨¨‰∏âÁâà Â∞±Â∑≤ÁªèÂÖ®ÈÉ®Â§ç‰π†ÂÆå‰∏ÄÈÅç‰∫ÜÔºåÊî∂Ëé∑ÂæàÂ§öÔºåÂ§ßÊ¶ÇÊª°ÊâìÊª°ÁÆóËä±‰∫Ü 3 Â§©„Äå2020.03.05 ~ 2020.03.08„ÄçÁöÑÊó∂Èó¥ÂïÉÂÆåÔºåÊé•‰∏ãÊù•ËøòÂæóÂÜçÂ•ΩÂ•ΩÁúãÁúãÔºåÊúâ‰∫õÂú∞ÊñπÊúâÁÇπÂõ´ÂõµÂêûÊû£ÔºåÊØîÂ¶ÇËØ¥Á¨¨ÂÖ≠Á´†ÁöÑ Class Êñá‰ª∂ÁªìÊûÑÔºåÂπ∂Ê≤°ÊúâËá™Â∑±ÂéªÂà©Áî® idea ‰∏≠ÁöÑ Jclasslib ËÆ§ÁúüÂéªÂàÜÊûêÔºåËøòÊúâÂæàÂ§öÂú∞ÊñπËôΩÁÑ∂ÈÉΩÊòØËá™Â∑±Êï≤Â≠óÊï≤Âá∫Êù•ÁöÑÔºå‰ΩÜÊòØÊï≤Âá∫Êù•‰∫ÜÂ∞±ÁªôÂøò‰∫Ü‚Ä¶Êó∂Èó¥ËøòÊòØÂ§™‰ªì‰øÉ‰∫Ü‚Ä¶ÊÄªËÄåË®Ä‰πãÔºåÁªßÁª≠Âä†Ê≤πÂêßÔºÅ]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>JAVA</tag>
        <tag>jvm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂçÅÂ§ßÂÜÖÈÉ®ÊéíÂ∫è]]></title>
    <url>%2F2019%2F10%2F27%2F%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F.html</url>
    <content type="text"><![CDATA[ÂâçË®ÄÊúÄËøë‰∏ÄÁõ¥ÊØîËæÉÂøôÔºåÈ©¨‰∏äÂ∞±Ë¶ÅËÄÉËØï‰∫ÜÔºåÊâÄ‰ª•LeetCodeÁ®çÂæÆÊöÇÊó∂Êîæ‰∫ÜÊîæÔºåÈõÜ‰∏≠Á≤æÂäõÂõûÈ°æ‰∫Ü‰∏ãÂÜÖÈÉ®ÊéíÂ∫èÁÆóÊ≥ïÔºåÊú¨ÁØáÊñáÁ´†‰ºöÂØπÂ∏∏ËßÅÁöÑÂçÅÂ§ßÂÜÖÈÉ®ÊéíÂ∫èÁÆóÊ≥ïËøõË°åÁ≥ªÁªüÁöÑÂõûÈ°æ„ÄÇ Ê¶ÇËø∞ÁÆóÊ≥ïÂàÜÁ±ªÂ∏∏ËßÅÊéíÂ∫èÁÆóÊ≥ïÂèØ‰ª•ÂàÜ‰∏∫‰∏§Â§ßÁ±ªÔºö ÊØîËæÉÊéíÂ∫èÔºöÈÄöËøáÊØîËæÉÊù•ÂÜ≥ÂÆöÂÖÉÁ¥†Èó¥ÁöÑÁõ∏ÂØπÊ¨°Â∫èÔºåÁî±‰∫éÂÖ∂Êó∂Èó¥Â§çÊùÇÂ∫¶‰∏çËÉΩÁ™ÅÁ†¥O(nlogn)ÔºåÂõ†Ê≠§‰πüÁß∞‰∏∫ÈùûÁ∫øÊÄßÊó∂Èó¥ÊØîËæÉÁ±ªÊéíÂ∫è„ÄÇ ÈùûÊØîËæÉÁ±ªÊéíÂ∫èÔºö‰∏çÈÄöËøáÊØîËæÉÊù•ÂÜ≥ÂÆöÂÖÉÁ¥†Èó¥ÁöÑÁõ∏ÂØπÊ¨°Â∫èÔºåÂÆÉÂèØ‰ª•Á™ÅÁ†¥Âü∫‰∫éÊØîËæÉÊéíÂ∫èÁöÑÊó∂Èó¥‰∏ãÁïåÔºå‰ª•Á∫øÊÄßÊó∂Èó¥ËøêË°åÔºåÂõ†Ê≠§‰πüÁß∞‰∏∫Á∫øÊÄßÊó∂Èó¥ÈùûÊØîËæÉÁ±ªÊéíÂ∫è„ÄÇ ÁÆóÊ≥ïÂ§çÊùÇÂ∫¶ Âú®ËøôÈáåË¶ÅËØ¥ÊòéÁöÑÊòØÔºåËøô‰∏™ÂõæÈáåÁöÑÂø´ÊéíÁ©∫Èó¥Â§çÊùÇÂ∫¶Èîô‰∫ÜÔºåÂø´ÊéíÁöÑÂπ≥ÂùáÁ©∫Èó¥Â§çÊùÇÂ∫¶Â∫îËØ•ÊòØ O(logn)ÔºåÂ∞±ÊòØÊ†àÁöÑÊ∑±Â∫¶Ôºå‰ΩÜÊòØÊúÄÂ∑ÆÁöÑÊÉÖÂÜµ‰∏ãÔºåÊØîÂ¶ÇÂÖ®ÊòØÂÄíÂ∫èÔºåÂàôÁ©∫Èó¥Â§çÊùÇÂ∫¶‰∏∫Ê†àÊ∑±Â∫¶ O(n)„ÄÇÂΩíÂπ∂ÊéíÂ∫èÊØèÊ¨°ÈÄíÂΩíÈúÄË¶ÅÁî®Âà∞‰∏Ä‰∏™ËæÖÂä©Ë°®ÔºåÈïøÂ∫¶‰∏éÂæÖÊéíÂ∫èÁöÑË°®Áõ∏Á≠âÔºåËôΩÁÑ∂ÈÄíÂΩíÊ¨°Êï∞ÊòØO(log2n)Ôºå‰ΩÜÊØèÊ¨°ÈÄíÂΩíÈÉΩ‰ºöÈáäÊîæÊéâÊâÄÂç†ÁöÑËæÖÂä©Á©∫Èó¥ÔºåÊâÄ‰ª•‰∏ãÊ¨°ÈÄíÂΩíÁöÑÊ†àÁ©∫Èó¥ÂíåËæÖÂä©Á©∫Èó¥‰∏éËøôÈÉ®ÂàÜÈáäÊîæÁöÑÁ©∫Èó¥Â∞±‰∏çÁõ∏ÂÖ≥‰∫ÜÔºåÂõ†ËÄåÁ©∫Èó¥Â§çÊùÇÂ∫¶ËøòÊòØ O(n)„ÄÇ ÈÉ®ÂàÜË°•ÂÖÖ Á®≥ÂÆöÔºöÂ¶ÇÊûúaÂéüÊú¨Âú®bÂâçÈù¢ÔºåËÄåa=bÔºåÊéíÂ∫è‰πãÂêéa‰ªçÁÑ∂Âú®bÁöÑÂâçÈù¢„ÄÇ ‰∏çÁ®≥ÂÆöÔºöÂ¶ÇÊûúaÂéüÊú¨Âú®bÁöÑÂâçÈù¢ÔºåËÄåa=bÔºåÊéíÂ∫è‰πãÂêé a ÂèØËÉΩ‰ºöÂá∫Áé∞Âú® b ÁöÑÂêéÈù¢„ÄÇ ‰∏çÁ®≥ÂÆöÊéíÂ∫èÁÆóÊ≥ïÔºöË∞êÈü≥ËÆ∞ÂøÜÊ≥ïÔºöÂø´ÔºàÂø´ÊéíÔºâ ‰∫õÔºàÂ∏åÂ∞îÔºâÈÄâÔºàÈÄâÊã©ÔºâÂØπÔºàÂ†ÜÔºâ„ÄÇ ÊÄªÂÖ±4‰∏™‰∏çÁ®≥ÂÆöÔºå6‰∏™Á®≥ÂÆö„ÄÇ ÂÜíÊ≥°ÊéíÂ∫èÂü∫Êú¨ÊÄùÊÉ≥ÂÜíÊ≥°ÊéíÂ∫èÊòØ‰∏ÄÁßçÁÆÄÂçïÁöÑÊéíÂ∫èÁÆóÊ≥ï„ÄÇÂÆÉÈáçÂ§çÂú∞Ëµ∞ËÆøËøáË¶ÅÊéíÂ∫èÁöÑÊï∞ÂàóÔºå‰∏ÄÊ¨°ÊØîËæÉ‰∏§‰∏™ÂÖÉÁ¥†ÔºåÂ¶ÇÊûúÂÆÉ‰ª¨ÁöÑÈ°∫Â∫èÈîôËØØÂ∞±ÊääÂÆÉ‰ª¨‰∫§Êç¢ËøáÊù•„ÄÇËµ∞ËÆøÊï∞ÂàóÁöÑÂ∑•‰ΩúÊòØÈáçÂ§çÂú∞ËøõË°åÁõ¥Âà∞Ê≤°ÊúâÂÜçÈúÄË¶Å‰∫§Êç¢Ôºå‰πüÂ∞±ÊòØËØ¥ËØ•Êï∞ÂàóÂ∑≤ÁªèÊéíÂ∫èÂÆåÊàê„ÄÇËøô‰∏™ÁÆóÊ≥ïÁöÑÂêçÂ≠óÁî±Êù•ÊòØÂõ†‰∏∫Ë∂äÂ∞èÁöÑÂÖÉÁ¥†‰ºöÁªèÁî±‰∫§Êç¢ÊÖ¢ÊÖ¢‚ÄúÊµÆ‚ÄùÂà∞Êï∞ÂàóÁöÑÈ°∂Á´Ø„ÄÇ ÁÆóÊ≥ïÊèèËø∞ ‰∏ÄÊ¨°ÊØîËæÉ‰∏§‰∏™Êï∞Â≠óÔºå‰∏§‰∏§ÊØîËæÉÔºåÂ¶ÇÊûúÂâçËÄÖÊØîÂêéËÄÖÂ§ßÔºåÂàô‰∫§Êç¢Ôºå‰ª•Ê≠§Á±ªÊé®Ôºå‰∏ÄËΩÆ‰∏ãÊù•ÔºåÂ∞±‰ºö‰∫ßÁîü‰∏Ä‰∏™ÊúÄÂ§ßÁöÑÊï∞Ôºõ ÂΩìÊüê‰∏ÄËΩÆÊ≤°Êúâ‰∫ßÁîü‰ªª‰Ωï‰∏ÄÊ¨°‰∫§Êç¢ÔºåÂàôËØ¥ÊòéÂÜíÊ≥°ÂÆåÊàê„ÄÇ Âä®ÂõæÊºîÁ§∫ ‰ª£Á†ÅÂÆûÁé∞1234567891011121314151617181920212223242526272829303132333435363738394041424344package ÊéíÂ∫è;import JAVA_I_O.Buffer.BufferedInputStream;import java.util.ArrayList;import java.util.Arrays;import java.util.Scanner;//ÊµãËØïÁ±ªpublic class SortTest &#123; public static void main(String[] args) throws Exception &#123; System.out.println("ËØ∑ËæìÂÖ•‰∏Ä‰∏™Êï∞ÁªÑÔºåÁî®ÈÄóÂè∑ÂàÜÈöîÔºö"); Scanner sc = new Scanner(System.in); String next = sc.nextLine(); String[] net = next.split(",");// String[] arr = Arrays.copyOf(net,net.length);// int[] arr = new int[0]; ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;Integer&gt;(); for (int i = 0 ; i &lt; net.length ; i++) &#123; arrayList.add(Integer.parseInt(net[i]));// System.out.println(arr[i]); &#125; int size = arrayList.size(); Integer[] arrInt = arrayList.toArray(new Integer[size]); int[] arr = new int[size]; for(int i = 0 ; i &lt; arrInt.length;i++)&#123; arr[i] = arrInt[i]; &#125;// System.out.println(arr[i]);// int[] InsertSortArray = Sort.InsertSort(arr);// int[] SelectSortArray = Sort.SelectSort(arr); Sort.BubbleSort(arr);// int[] ShellSortArray = Sort.ShellSort2(arr);// Sort.quickSort(arr,0,arr.length-1);// Sort.heapSort(arr,arr.length-1);// Sort.courtSort(arr);// Sort.BucketSort(arr);// Sort.radixSort(arr);// for (int i = 0 ; i &lt; ShellSortArray.length ; i++) &#123;// System.out.print(ShellSortArray[i] + " ");// &#125; &#125;&#125; 1234567891011121314151617181920212223242526272829 /** * ÂÜíÊ≥° * * @param sortArray ÂéüÂßãÊï∞ÁªÑ * @return ÊéíÂ∫èÊï∞ÁªÑ */public static void BubbleSort(int[] sortArray) &#123; //Â§çÂà∂‰∏Ä‰ªΩÂéüÂßãÊï∞ÁªÑÔºåÁî®‰∫éÊéíÂ∫èÊìç‰Ωú int[] arr = Arrays.copyOf(sortArray, sortArray.length); //Âæ™ÁéØn-1ËΩÆÔºåÂâ©ÊúÄÂêé‰∏Ä‰∏™Â∞±‰∏çÈúÄË¶Å‰∫§Êç¢‰∫Ü for (int i = 1; i &lt; arr.length; i++) &#123; //Ê†áÂøó‰ΩçÔºåÂΩì‰∏ÄËΩÆ‰∏ãÊù•Ê≤°Êúâ‰ªª‰ΩïÂèòÂåñÊó∂ÔºåËØ¥ÊòéÂÜíÊ≥°ÁªìÊùüÔºåÈúÄË¶ÅÁªìÊùüÂæ™ÁéØ boolean flag = true; //ÊØè‰∏ÄËΩÆÈÉΩË¶Å‰∏§‰∏§ÊØîËæÉÔºåÊ≥®ÊÑèÊØè‰∏ÄËΩÆÁªìÊùüÈÉΩ‰ºöÁ°ÆËÆ§‰∏Ä‰∏™ÂÄºÂú®Ê≠£Á°ÆÁöÑ‰ΩçÁΩÆ‰∏äÔºåÊâÄ‰ª•jÁöÑÈÅçÂéÜÊ¨°Êï∞ÂæóÁ®çÂä†Ê≥®ÊÑè for (int j = 0; j &lt; arr.length - i; j++) &#123; //‰ΩçÁΩÆÂèòÂåñÁöÑÂêåÊó∂ËØ¥ÊòéÂÜíÊ≥°Ê≤°ÊúâÁªìÊùü if (arr[j] &gt; arr[j + 1]) &#123; int temp = arr[j]; arr[j] = arr[j + 1]; arr[j + 1] = temp; flag = false; &#125; &#125; if (flag) &#123; break; &#125; &#125; System.out.println(Arrays.toString(arr));&#125; ÁÆóÊ≥ïÊïàÁéá Êó∂Èó¥Â§çÊùÇÂ∫¶ÔºöÂæàÊòéÊòæÔºåÁúã‰ª£Á†ÅÂ∞±Áü•ÈÅìÔºåÂÜíÊ≥°Êúâ‰∏§‰∏™forÂæ™ÁéØÔºåÊâÄ‰ª•‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÂíåÊúÄÂùèÊÉÖÂÜµ‰∏ãÁöÑÂ§çÊùÇÂ∫¶ÈÉΩ‰∏∫O(n¬≤)ÔºåÊúÄÂ•ΩÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶Â∞±ÊòØ‰∏ÄÊ¨°ÂÜíÊ≥°Â∞±ÂÆåÊàê‰∫ÜÔºåÂç≥‰∏∫O(n); Á©∫Èó¥Â§çÊùÇÂ∫¶ÔºöÂú®ÂÜíÊ≥°‰∏≠ÔºåÂè™Áî®‰∫ÜtempÊù•Â≠òÂÇ®‰∏≠Èó¥ÂèòÈáè‰∫§Êç¢ÔºåÊ≤°ÊúâÁî®Âà∞ÂÖ∂‰ªñÁ©∫Èó¥(ÊàëÁöÑ‰ª£Á†Å‰∏≠ÁöÑÂ§çÂà∂ÂàùÂßãÊï∞ÁªÑÁöÑÂÆπÈáèÂÖ∂ÂÆûÂèØ‰ª•ÁúÅÂéª)ÔºåÊâÄ‰ª•Á©∫Èó¥Â§çÊùÇÂ∫¶ÊòØO(1); Á®≥ÂÆöÊÄßÔºö‰∫§Êç¢ËøáÁ®ã‰∏≠ÔºåÂ¶ÇÊûúÁõ∏ÈÇª‰∏§ËÄÖÁöÑÂÄº‰∏ÄÊ†∑ÔºåÂàô‰∏ç‰ºö‰∫§Êç¢ÔºåÊâÄ‰ª•ÊòéÊòæÂÜíÊ≥°ÊéíÂ∫èÊòØÁ®≥ÂÆöÁöÑ„ÄÇ tips Â§ñÂæ™ÁéØ n-1Ê¨°Ôºõ Ê≥®ÊÑèÊ∑ªÂä†Ê†áÂøó‰ΩçÔºåÂà§Êñ≠ÂÜíÊ≥°ÊòØÂê¶ÁªìÊùüÔºõ Ê≥®ÊÑèÂÜÖÈÉ®Âæ™ÁéØÁöÑÊ¨°Êï∞ÔºåÊØèÂ§ñÈÉ®Âæ™ÁéØÁªìÊùü‰∏ÄÊ¨°ÔºåÂ∞±Á°ÆÂÆö‰∏Ä‰∏™Êï∞ÁöÑÊúÄÁªà‰ΩçÁΩÆ„ÄÇ Âø´ÈÄüÊéíÂ∫èÂü∫Êú¨ÊÄùÊÉ≥Âø´ÈÄüÊéíÂ∫èÔºàQuicksortÔºâÊòØÂØπÂÜíÊ≥°ÊéíÂ∫èÁöÑ‰∏ÄÁßçÊîπËøõÔºåÂÄüÁî®‰∫ÜÂàÜÊ≤ªÁöÑÊÄùÊÉ≥ÔºåÁî±C. A. R. HoareÂú®1962Âπ¥ÊèêÂá∫„ÄÇÂÆÉÁöÑÂü∫Êú¨ÊÄùÊÉ≥ÊòØÔºöÈÄöËøá‰∏ÄË∂üÊéíÂ∫èÂ∞ÜË¶ÅÊéíÂ∫èÁöÑÊï∞ÊçÆÂàÜÂâ≤ÊàêÁã¨Á´ãÁöÑ‰∏§ÈÉ®ÂàÜÔºåÂÖ∂‰∏≠‰∏ÄÈÉ®ÂàÜÁöÑÊâÄÊúâÊï∞ÊçÆÈÉΩÊØîÂè¶Â§ñ‰∏ÄÈÉ®ÂàÜÁöÑÊâÄÊúâÊï∞ÊçÆÈÉΩË¶ÅÂ∞èÔºåÁÑ∂ÂêéÂÜçÊåâÊ≠§ÊñπÊ≥ïÂØπËøô‰∏§ÈÉ®ÂàÜÊï∞ÊçÆÂàÜÂà´ËøõË°åÂø´ÈÄüÊéíÂ∫èÔºåÊï¥‰∏™ÊéíÂ∫èËøáÁ®ãÂèØ‰ª•ÈÄíÂΩíËøõË°åÔºå‰ª•Ê≠§ËææÂà∞Êï¥‰∏™Êï∞ÊçÆÂèòÊàêÊúâÂ∫èÂ∫èÂàó„ÄÇ ÁÆóÊ≥ïÊèèËø∞ È¶ñÂÖàÈÄâÂÆö‰∏Ä‰∏™Âü∫ÂáÜÂÄºÔºàpivotÔºâÔºåÊàë‰∏ÄËà¨ÁöÑÂÅöÊ≥ïÊòØÈÄâÂÆöÊúÄÂ∑¶ËæπÁöÑ‰Ωú‰∏∫Âü∫ÂáÜÔºõ ÂÆö‰πâ‰∏§‰∏™ÊåáÈíàÔºå‰∏Ä‰∏™ÊåáÂêëÊúÄÂè≥ËæπÔºå‰∏Ä‰∏™ÊåáÂêëÊúÄÂ∑¶ËæπÔºåÁÑ∂ÂêéÊ≥®ÊÑèËÆ©Âè≥ËæπÁöÑÂÖàÂä®ÔºåÁ≠âÂè≥ËæπÊåáÈíàÊâÄÊåáÁöÑÊï∞ÂÄºÂ∞è‰∫épivotÊó∂ÔºåÂè≥ËæπÊåáÈíà‰∏çÂÜçÂæÄÂ∑¶Ëµ∞Ôºå‰∏çÂáÜÂä®‰∫ÜÔºåÁÑ∂ÂêéÁßªÂä®Â∑¶ËæπÊåáÈíàÔºåÁ≠âÂ∑¶ËæπÊåáÈíàÊâÄÊåáÂêëÁöÑÊï∞ÂÄºÂ§ß‰∫épivotÊó∂ÔºåÂ∑¶ËæπÊåáÈíàÂÅú‰∏ãÔºå‰∏çÂÜçÂêëÂè≥ÁßªÂä®ÔºåÁÑ∂Âêé‰∫åËÄÖ‰∫§Êç¢Ôºõ ‰∫§Êç¢ÂÆåÊØïÂêéÔºåÈáçÂ§çÁ¨¨‰∫åÊ≠•ÔºåÂè≥ËæπÊåáÈíàÁªßÁª≠ÂêëÂ∑¶ÔºåÈáçÂ§çÔºõ Áõ¥Âà∞Â∑¶Âè≥‰∏§‰∏™ÊåáÈíàÁõ∏ÈÅáÔºå‰∏§‰∏™ÈÉΩÂÅú‰∏ãÔºåÂ∞ÜÊåáÂêëÁöÑÊï∞ÂÄºÂíåpivot‰∫§Êç¢ÔºåËá≥Ê≠§Êï∞ÁªÑÂ∞±ÂàÜÊàê‰∫Ü‰∏§‰∏™Â≠êÊï∞ÁªÑÔºåpivotÂ∑¶‰æßÊØîÂÖ∂Â∞èÔºåÂè≥ËæπÊØîÂÖ∂Â§ßÔºõ ÁÑ∂ÂêéÈÄíÂΩíÂ≠êÊï∞ÁªÑÔºåÁõ¥Âà∞Â≠êÊï∞ÁªÑ‰∏∫0Ôºàlow &gt; highÔºâ„ÄÇ Âä®ÂõæÊºîÁ§∫ ‰ª£Á†ÅÂÆûÁé∞1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253/** * Âø´ÈÄüÊéíÂ∫è * ÂêéÁª≠ÊâÄÊúâÊµãËØïÈÉΩË∑üÂÜíÊ≥°ÈÇ£Á´†ÂÜôÁöÑ‰∏ÄÊ†∑ * @param sortArray ÂéüÂßãÊï∞ÁªÑ * @param low ÊúÄÂ∑¶‰æß * @param high ÊúÄÂè≥‰æß */public static void quickSort(int[] sortArray, int low, int high) &#123; //ÂΩìlow = high Êó∂ÔºåËØ¥ÊòéÂ≠êÊï∞ÁªÑÂè™Ââ©‰∏Ä‰∏™Êï∞‰∫ÜÔºåËøòÊéí‰∏™Èî§Â≠êÂïä if (low &lt; high) &#123; //ÊãøÂà∞Âü∫ÂáÜÂÄºÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÊÑâÂø´ÁöÑÈÄíÂΩí‰∫Ü int pivot = partition(sortArray, low, high); //Ê≥®ÊÑèÂì¶ÔºåÈÄíÂΩíÊó∂ÂèØÊ≤°ÊúâÊääpivotÊîæÂÖ•ÂÖ∂‰∏≠ quickSort(sortArray, low, pivot - 1); quickSort(sortArray, pivot + 1, high); System.out.println(Arrays.toString(sortArray)); &#125;&#125;/** * Âø´Êéí‰∏ªÊÄùË∑Ø * @param sortArray * @param low * @param high * @return */private static int partition(int[] sortArray, int low, int high) &#123; //Êàë‰∏™‰∫∫‰π†ÊÉØÊòØÊääÊúÄÂ∑¶ËæπÂÆö‰∏∫Âü∫ÂáÜÂÄºÔºåÂÖ∑‰ΩìÊñπÊ≥ïÊúâÂæàÂ§öÂï¶ÔºåÈöè‰æø‰Ω†ÔºåÁà±ÂíãÂíãÁöÑ int pivot = low; //ÂÆö‰πâÂ∑¶Âè≥‰∏§ÊåáÈíà int p = low; int q = high; //Áõ∏ÈÅáÂ∞±ÁªìÊùü‰∫ÜÂìàÔºåÁÑ∂ÂêéÁõ¥Êé•‰∫§Êç¢Âü∫ÂáÜÂíåÊåáÂêëÁöÑÊï∞ÂÄºÂ∞±Ë°åÂíØ while (p &lt; q) &#123; //Ê≤°Áõ∏ÈÅáÂπ∂‰∏îÂè≥ÊåáÈíàÊåáÂêëÁöÑÂÄºÊØîÂü∫ÂáÜÂÄºÂ§ßÔºåÂ∞±ÂêëÂ∑¶ÁßªÂä®ÔºåËã•ÊØîÂü∫ÂáÜÂÄºÂ∞èÔºåÈÇ£Â∞±ÂæóÂÅú‰∏ã while (p &lt; q &amp;&amp; sortArray[pivot] &lt;= sortArray[q]) q--; while (p &lt; q &amp;&amp; sortArray[pivot] &gt;= sortArray[p]) p++; //ÈÉΩÂÅú‰∏ã‰∫ÜÂ∞±‰∫§Êç¢Âè≠ÔºÅ swap(sortArray, p, q); &#125; swap(sortArray, pivot, p); //‰∏çË¶ÅÂøòËÆ∞ÊúÄÂêéË¶ÅËøîÂõûËøô‰∏™Âü∫ÂáÜÂÄº return p;&#125;public static void swap(int[] sum, int i, int j) &#123; int temp = sum[i]; sum[i] = sum[j]; sum[j] = temp;&#125; ÁÆóÊ≥ïÊïàÁéáÂø´ÊéíÂòõÔºåÁî®‰∫ÜÂàÜÊ≤ªÁöÑÊÄùÊÉ≥ÂíØÔºåÊâÄ‰ª•Â§çÊùÇÂ∫¶ËÇØÂÆöÊòØÊØîÂÜíÊ≥°‰ΩéÁöÑÔºåËá≥‰∫éÊòØÂ§öÂ∞ëÔºåÊàë‰ª¨Á®çÂä†ÂàÜÊûê‰∏Ä‰∏ãÔºö Êó∂Èó¥Â§çÊùÇÂ∫¶ÔºöÂàÜÊ≤ªÊÄùÊÉ≥Ôºå‰ΩÜÊòØÁªùÂ£Å‰∏çÊòØÁ∫øÊÄßÁöÑÔºåÂõ†‰∏∫ÂÆÉ‰∏ÄËΩÆ‰∏ãÊù•ÊêûÊù•ÊêûÂéªÔºå‰∫§Êç¢Ëøô‰∫§Êç¢ÈÇ£ÁöÑÔºåÊâÄ‰ª•‰∏ÄËΩÆÊòØO(n),ÁªºÂêàÂâçÈù¢ÁöÑÂàÜÊ≤ªÂ∞±ÊòØnlogN‰∫Ü„ÄÇÊàëËØ¥ÁöÑÊòØÊúÄÂ•ΩÊÉÖÂÜµÂíåÂπ≥ÂùáÊÉÖÂÜµÂìàÔºåÊúÄÂùèÈÇ£ËÇØÂÆöËøòÊòØO(n¬≤)ÔºåÂõ†‰∏∫ÂèØËÉΩ‰Ω†Âæà‰∏çÂπ∏ÔºåÂü∫ÂáÜÂÄºÂ∞±ÊòØÊúÄÂ§ßÁöÑÔºåÁÑ∂ÂêéÂ∞±ÂæóÁñØÁãÇ‰∫§Êç¢„ÄÇ Á©∫Èó¥Â§çÊùÇÂ∫¶Ôºö‰∏çÁûéÁöÑÈÉΩÁúãÂæóÂá∫Êù•ÔºåÂ∞±Áî®‰∫Ü‰∏Ä‰∏™temp‰∏≠Èó¥ÂèòÈáèÁî®Êù•Â≠òÂÄºÔºåÊâÄ‰ª•ÊòØO(1) „ÄÇ Á®≥ÂÆöÊÄßÔºöÂìéÂëÄËÇØÂÆöÊòØ‰∏çÁ®≥ÂÆöÁöÑÂïäÔºå‰∏§‰∏™ÊåáÈíàÂú®ÈÇ£Êç¢Êù•Êç¢ÂéªÔºåËÉΩÁ®≥ÂÆöÂòõ‚Ä¶ tips Ê≥®ÊÑèÈÄíÂΩíÊó∂ÁöÑÂ≠ê‰∏≤ÊòØ‰∏çÂåÖÊã¨pivotÁöÑÔºå‰∏Ä‰∏™ÊòØ(low,pivot-1)Ôºå‰∏Ä‰∏™ÊòØ(pivot+1,high)Ôºõ ‰∏§‰∏™ÊåáÈíàÁõ∏ÈÅáÔºå‰∏çÁî®Âà§Êñ≠ÂíåpivotÂÄºÁöÑÂ§ßÂ∞èÔºåÁõ¥Êé•‰∫§Êç¢Âç≥ÂèØÔºåÂõ†‰∏∫‰∏§‰∏™ÊåáÈíàÂè™‰ºöÊúâ‰∏Ä‰∏™Âú®ÁßªÂä®ÔºåÈÇ£‰πàÊ≠§Êó∂Ê≠§ÂàªÂè¶‰∏Ä‰∏™ÊåáÈíà‰∏ÄÂÆöÊòØÈùôÊ≠¢ÁöÑÔºåÂÅáÂ¶ÇÊ≠§Êó∂ÊòØÂè≥ËæπÁöÑÊåáÈíàÁßªÂä®ÔºåÈÇ£‰πàÁõ∏ÈÅáÁöÑ‰ΩçÁΩÆÂç≥Â∑¶ÊåáÈíàÂÅú‰∏ãÁöÑ‰ΩçÁΩÆÔºåËÄåÂ∑¶ÊåáÈíàÂÅú‰∏ãËØ¥Êòé‰πãÂâçÂè≥ËæπÊåáÈíà‰πüÂÅú‰∏ãÊù•ËøáÂπ∂‰∏îÂíåÂ∑¶ËæπÊåáÈíàÊåáÂêëÁöÑÊï∞ËøõË°å‰∫Ü‰∫§Êç¢(Âõ†‰∏∫Âè™ÊúâÂè≥ËæπÂÅú‰∏ãÔºåÂ∑¶ËæπÊâçËÉΩÁßªÂä®)ÔºåÈÇ£‰πàÊ≠§Êó∂Â∑¶ËæπÊåáÂêëÁöÑÊï∞ÊòØ‰∏ÄÂÆöÊØîpivotÂ∞èÁöÑÔºåÊâÄ‰ª•ÂøÖÁÑ∂ÂèØ‰ª•Áõ¥Êé•‰∫§Êç¢ÔºåÊç¢‰∏™ËßíÂ∫¶ËÄÉËôë‰πüÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ ËøòÊúâÔºåÊàë‰∏ÄÁõ¥Âº∫Ë∞ÉÂøÖÈ°ªÂè≥ÊåáÈíàÂÖàÂä®(ÂÖ∂ÂÆûÂè™Ë¶ÅÊòØÂíåÂü∫ÂáÜÁõ∏ÂèçÊñπÂêëÁöÑÊåáÈíàÂÖàÂä®Â∞±Ë°å)Ôºå‰∏∫‰ªÄ‰πàÊçèÔºåÂõ†‰∏∫ÂòõÔºåÁªô‰Ω†‰∏æ‰∏™‰æãÂ≠êÂêßÔºåÂÅáÂ¶ÇÊúâËøôÊ†∑‰∏Ä‰∏™Êï∞ÁªÑ 9,3,4,5,6,7,10 ,Â∑¶ËæπÁöÑÂÖàÂä®ÈÇ£Â∞±Âáâ‰∫ÜÂïäÔºåÂõ†‰∏∫ÊúÄÂêé‰Ω†ÈÉΩÂÆöÂú®10Ôºå‰∏ÄÂè´Êç¢Â∞±ÂèòÊàê‰∫Ü10,3,4,5,6,7,9ÔºåËøôËøòÁé©‰∏™Èî§Â≠êÂïä‚Äî‚Äî‚Äî‚Äì&gt; Âø´Êéí‰ªéÂè≥ËæπÂºÄÂßãÁöÑÂéüÂõ† Ëá≥‰∫éÂø´ÊéíÁöÑ‰ºòÂåñ ÈááÁî®‰∏âÊï∞Âèñ‰∏≠Ê≥ï 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768package ÊéíÂ∫è.‰∫åÂà∑ÊéíÂ∫è;import java.util.Arrays;import java.util.Scanner;public class quickSort &#123; public static void main(String[] args) &#123; Scanner scanner = new Scanner(System.in); System.out.print("ËØ∑ËæìÂÖ•Êï∞ÁªÑÁöÑÂ§ßÂ∞èÔºö "); int len = scanner.nextInt(); int[] nums = new int[len]; for (int i = 0;i &lt; len;i++)&#123; nums[i] = scanner.nextInt(); &#125; quick(nums,0,len-1); System.out.println(Arrays.toString(nums)); &#125; public static void quick(int[] nums,int left,int right)&#123; if(left &lt; right)&#123; int partition = partition(nums,left,right); quick(nums,left,partition-1); quick(nums,partition+1,right); &#125; &#125; private static int partition(int[] nums, int left, int right) &#123; // Âü∫ÂáÜÂÄº // ‰ºòÂåñÔºåÂ∞±ÊòØÂ∞ΩÈáèËÉΩÂÅöÂà∞ÂàÜÊ≤ªÔºå‰πüÂ∞±ÊòØÈÄâÂèñÁöÑÂü∫ÂáÜÂÄºÂ∞ΩÈáèÂú®‰∏≠Èó¥ÊòØÊÄßËÉΩÊúÄÂ•ΩÁöÑ int mid = (left + right)/2; dealPivot(nums,left,mid,right); int pivot = left; // ÂÆö‰πâ‰∏§‰∏™ÊåáÈíà int p = left; int q = right; while(p &lt; q)&#123; while(p &lt; q &amp;&amp; nums[q] &gt;= nums[pivot])&#123; q--; &#125; while(p &lt; q &amp;&amp; nums[p] &lt;= nums[pivot])&#123; p++; &#125; swap(nums,p,q); &#125; swap(nums,p,pivot); return p; &#125; private static void dealPivot(int[] nums, int left, int mid, int right) &#123; if((left - mid) * (mid - right) &gt; 0)&#123; // left &lt; mid &lt; right swap(nums,left,mid); return; &#125; else if((mid - left) * (left - right) &gt; 0)&#123; // left ÊòØ‰∏≠Èó¥ÂÄº return; &#125; swap(nums,left,right); return; &#125; private static void swap(int[] nums, int p, int q) &#123; int temp = nums[p]; nums[p] = nums[q]; nums[q] = temp; &#125;&#125; ‰∏âË∑ØÂø´ÊéíÔºåËøô‰∏™ÈÄÇÁî®‰∫éÊúâÂ§ßÈáèÁõ∏ÂêåÊï∞Â≠óÁöÑÊï∞ÁªÑ „ÄåLeetCode Á¨¨ 75 È¢ò„Äç https://www.bilibili.com/video/av73100790?from=search&amp;seid=4070762078682607758 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354class quickSortByThree&#123; public static void main(String[] args) &#123; Scanner scanner = new Scanner(System.in); System.out.print("ËØ∑ËæìÂÖ•Ë¶ÅËæìÂÖ•ÁöÑÊéíÂ∫èÊï∞ÁªÑÁöÑÈïøÂ∫¶Ôºö" ); int len = scanner.nextInt(); int[] nums = new int[len]; for(int i = 0; i &lt; len;i++)&#123; nums[i] = scanner.nextInt(); &#125; quickSortByThreeWays(nums,0,len-1); System.out.println(Arrays.toString(nums)); &#125; private static void quickSortByThreeWays(int[] nums, int left, int right) &#123; if(left &lt; right)&#123; // Ê≠§Êó∂ÈúÄË¶ÅËøîÂõûÁöÑÂÄºÊòØ‰∏§‰∏™Ôºå‰∏Ä‰∏™ÊòØÂü∫ÂáÜÂÄºÁöÑÊúÄÁªà‰ΩçÁΩÆÔºåËøòÊúâ‰∏Ä‰∏™ÊòØ‰∏éÂü∫ÂáÜÂÄºÁõ∏ÂêåÁöÑÊúÄÂêé‰∏Ä‰∏™Êï∞ÁöÑ‰ΩçÁΩÆ // ÈÄÇÁî®‰∫éÂæàÂ§öÁõ∏ÂêåÊï∞Â≠óÁöÑÊï∞ÁªÑÊéíÂ∫èÔºåÂÆòÊñπÁöÑ Arrays.sort() ‰πüÊòØÈááÁî®ÁöÑ‰∏âË∑ØÂø´Êéí int[] par = quickThreePartition(nums,left,right); int lt = par[0]; int gt = par[1]; quickSortByThreeWays(nums,left,lt-1); quickSortByThreeWays(nums,gt+1,right); &#125; &#125; private static int[] quickThreePartition(int[] nums, int left, int right) &#123; int pivot = left; // ÂÆö‰πâ‰∏â‰∏™ÊåáÈíà int cur = left + 1; int lt = left + 1; // nums[left...lt-1] ÈÉΩÊòØ Â∞è‰∫é pivot ÁöÑ int gt = right; // nums[gt...right] ÈÉΩÊòØ Â§ß‰∫é pivot ÁöÑ while(cur &lt;= gt)&#123; if(nums[cur] &lt; nums[pivot])&#123; swap(nums,cur,lt); cur++; lt++; &#125; else if(nums[cur] &gt; nums[pivot])&#123; swap(nums,gt,cur); gt--; &#125; else cur++; &#125; swap(nums,lt-1,pivot); return new int[]&#123;lt-1,gt&#125;; &#125; private static void swap(int[] nums, int p, int q) &#123; int temp = nums[p]; nums[p] = nums[q]; nums[q] = temp; &#125;&#125; ÁÆÄÂçïÊèíÂÖ•ÊéíÂ∫èÂü∫Êú¨ÊÄùÊÉ≥ÁúãÂêçÂ≠óÂè≠ÔºåÊèíÂÖ•ÔºåËøòÂ∞ºÁéõÁÆÄÂçïÊèíÂÖ•ÔºåÈ°æÂêçÊÄù‰πâÔºåÂ∞±ÊòØÊääËøô‰∏™ÂæÖÊéíÂ∫èÊï∞ÁªÑÁúãÊàêÊòØ‰∏ÄÊ≠•Ê≠•ÊèíÂ•ΩÁöÑÊï∞ÁªÑÔºåÁî®ÁöÑÊòØÊúÄÁÆÄÂçïÁöÑÊñπÊ≥ï„ÄÇÂÆÉÁöÑÂ∑•‰ΩúÂéüÁêÜÊòØÈÄöËøáÊûÑÂª∫ÊúâÂ∫èÂ∫èÂàóÔºåÂØπ‰∫éÊú™ÊéíÂ∫èÊï∞ÊçÆÔºåÂú®Â∑≤ÊéíÂ∫èÂ∫èÂàó‰∏≠‰ªéÂêéÂêëÂâçÊâ´ÊèèÔºåÊâæÂà∞Áõ∏Â∫î‰ΩçÁΩÆÂπ∂ÊèíÂÖ•„ÄÇ ÁÆóÊ≥ïÊèèËø∞‰∏ÄËà¨Êù•ËØ¥ÔºåÊèíÂÖ•ÊéíÂ∫èÈÉΩÈááÁî® in-place Âú®Êï∞ÁªÑ‰∏äÂÆûÁé∞„ÄÇÂÖ∑‰ΩìÁÆóÊ≥ïÊèèËø∞Â¶Ç‰∏ãÔºö ‰ªéÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÂºÄÂßãÔºåËØ•ÂÖÉÁ¥†ÂèØ‰ª•ËÆ§‰∏∫Â∑≤ÁªèË¢´ÊéíÂ∫èÔºõ ÂèñÂá∫‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÂú®Â∑≤ÁªèÊéíÂ∫èÁöÑÂÖÉÁ¥†Â∫èÂàó‰∏≠‰ªéÂêéÂêëÂâçÊâ´ÊèèÔºõ Â¶ÇÊûúËØ•ÂÖÉÁ¥†ÔºàÂ∑≤ÊéíÂ∫èÔºâÂ§ß‰∫éÊñ∞ÂÖÉÁ¥†ÔºåÂ∞ÜËØ•ÂÖÉÁ¥†ÁßªÂà∞‰∏ã‰∏Ä‰ΩçÁΩÆÔºõ ÈáçÂ§çÊ≠•È™§3ÔºåÁõ¥Âà∞ÊâæÂà∞Â∑≤ÊéíÂ∫èÁöÑÂÖÉÁ¥†Â∞è‰∫éÊàñËÄÖÁ≠â‰∫éÊñ∞ÂÖÉÁ¥†ÁöÑ‰ΩçÁΩÆÔºõ Â∞ÜÊñ∞ÂÖÉÁ¥†ÊèíÂÖ•Âà∞ËØ•‰ΩçÁΩÆÂêéÔºõ ÈáçÂ§çÊ≠•È™§2~5„ÄÇ Ê≥®ÔºöÂï•ÊòØin-placeÁü•ÈÅì‰∏çÔºöÂéüÂú∞ÁÆóÊ≥ï) Âä®ÂõæÊºîÁ§∫ ‰ª£Á†ÅÂÆûÁé∞1234567891011121314151617181920212223/** * Áõ¥Êé•ÊèíÂÖ•ÊéíÂ∫è * ÊàëÊ≤°Êúâin-placeÂìàÔºå‰ΩÜÊòØÊòØÂèØ‰ª•ÁöÑ * @param SortArray ÂéüÂßãÊï∞ÁªÑ * @return ÊéíÂ∫èÊï∞ÁªÑ */ public static void InsertSort(int[] SortArray) &#123; int[] arr = Arrays.copyOf(SortArray, SortArray.length); //‰ªé1ÂºÄÂßãÂì¶ÔºåÂõ†‰∏∫Á¨¨‰∏Ä‰∏™Êï∞ÈªòËÆ§ÊòØÊéíÂ•ΩÂ∫èÁöÑÂï¶ for (int i = 1; i &lt; arr.length; i++) &#123; int temp = arr[i]; int j = i; for (; (j &gt; 0 &amp;&amp; arr[j - 1] &gt; temp); j--) &#123; //Ëøô‰∏ÄÊ≠•ÊúÄÂÖ≥ÈîÆÔºåÂõ†‰∏∫Ë¶ÅÊ≥®ÊÑèÊØèÂΩìÊèíÂÖ•‰∏Ä‰∏™Êï∞Â≠óÔºåÂÖ∂ÂêéÈù¢ÈÉΩË¶ÅÂæÄÂêéÈ°∫Áßª‰∏Ä‰ΩçÔºå‰∏çÁÑ∂ÁöÑËØùÂ∞±Á©∫‰∏çÂá∫Ë¶ÅÊèíÂÖ•ÁöÑ‰ΩçÁΩÆÔºÅÔºÅÔºÅ arr[j] = arr[j - 1]; &#125; //Â¶ÇÊûúÊ≤°ÊúâÂèòÂåñÔºåÂàôtemp‰æùÁÑ∂Á≠â‰∫éarr[i],Â¶ÇÊûúÂèòÂåñÔºåÂàôÂ∞Üarr[i]ÁßªÂä®ËøáÊù•Â∞±Ë°å //Ê≥®ÊÑè‰∏çËÉΩÁõ¥Êé•arr[j] = arr[i]Âì¶ÔºåÂõ†‰∏∫Ê≠§Êó∂ÁöÑiÁ¥¢ÂºïÂÄºÂ∑≤ÁªèÂèØËÉΩÂèòÂåñÂï¶ÔºÅÔºÅÔºÅÔºÅtempÈùûÂ∏∏ÁöÑÂÖ≥ÈîÆÔºÅÔºÅ arr[j] = temp; &#125; System.out.println(Arrays.toString(arr)); &#125; ÁÆóÊ≥ïÊïàÁéá Êó∂Èó¥Â§çÊùÇÂ∫¶ÔºöËøôÁßçÁõ¥Êé•ÊèíÂÖ•È∫ªÁÉ¶ÁöÑ‰∏ÄÁ¨îÔºåÂ¶ÇÊûúÊòØÂéüÊï∞ÁªÑÊòØÂÄíÂ∫èÔºåÈÇ£ÊØè‰∏ÄËΩÆÈÉΩÂæóÁñØÁãÇÊèíÔºåÊØ´Êó†ÁñëÈóÆÊúÄÂùèÊÉÖÂÜµ‰∏ãÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØO(n¬≤)ÔºåÊúÄÂ•ΩÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶Â∞±ÊòØ‰∏ÄÊ¨°ÈÉΩ‰∏çÁî®ÁªôÂêéÊù•ËÄÖËÆ©‰ΩçÔºåÈÇ£‰πàÂ∞±ÊòØÁ∫øÊÄßÂ§çÊùÇÂ∫¶‰∫ÜO(n)ÔºåÂπ≥Âùá‰∏ãÊù•‰æùÊóßÊòØO(¬≤)„ÄÇ Á©∫Èó¥Â§çÊùÇÂ∫¶Ôºöin-place,O(1) „ÄÇ Á®≥ÂÆöÊÄßÔºöÂΩìÁÑ∂ÊòØÁ®≥ÂÆöÁöÑÂï¶ÔºÅ tips Ê≥®ÊÑèÊèíÂÖ•ÁöÑÊó∂ÂÄôÊòØÂ∞ÜÊØîÊèíÂÖ•ÁöÑÊï∞Â§ßÁöÑÂ∑≤ÁªèÊéíÂ∫èÂ•ΩÁöÑÊï∞ÂÖ®ÈÉ®ÂêéÁßª‰∏Ä‰ΩçÂì¶ÔºÅÔºÅÔºÅÁªôÊúïËÆ©‰ΩçÁöÑËµ∂ËÑö‚Ä¶ Áî®tempÊù•‰øùÂ≠òÂΩìÂâçÈúÄË¶ÅÊèíÂÖ•ÁöÑÊï∞ÊçÆÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑÔºåËøô‰πüÊòØÊèíÂÖ•ÊéíÂ∫èÂîØ‰∫åÈúÄË¶ÅÊ≥®ÊÑèÁöÑÂú∞ÊñπÔºåËøòË¶Å‰∏Ä‰∏™ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÂú∞ÊñπÂ∞±ÊòØÂÖ®ÈÉ®ÂêéÁßª‰∏Ä‰Ωç„ÄÇ Â∏åÂ∞îÊéíÂ∫èÂü∫Êú¨ÊÄùÊÉ≥Â∏åÂ∞îÊéíÂ∫èÂèàÂè´Áº©Â∞èÂ¢ûÈáèÊéíÂ∫èÔºå1959Âπ¥ShellÂèëÊòé„ÄÇÊòØÊèíÂÖ•ÊéíÂ∫èÁöÑ‰∏ÄÁßçÈ´òÈÄüËÄåÁ®≥ÂÆöÁöÑÊîπËøõÁâàÊú¨„ÄÇ Â∏åÂ∞îÊéíÂ∫èÊòØÂÖàÂ∞ÜÊï¥‰∏™ÂæÖÊéíÂ∫èÁöÑËÆ∞ÂΩïÂ∫èÂàóÂàÜÂâ≤Êàê‰∏∫Ëã•Âπ≤Â≠êÂ∫èÂàóÂàÜÂà´ËøõË°åÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èÔºåÂæÖÊï¥‰∏™Â∫èÂàó‰∏≠ÁöÑËÆ∞ÂΩï‚ÄúÂü∫Êú¨ÊúâÂ∫è‚ÄùÊó∂ÔºåÂÜçÂØπÂÖ®‰ΩìËÆ∞ÂΩïËøõË°å‰æùÊ¨°Áõ¥Êé•ÊèíÂÖ•ÊéíÂ∫è„ÄÇ ÁÆóÊ≥ïÊèèËø∞Â∏åÂ∞îÊéíÂ∫èÊúânÁßçÊ≠•ÈïøÊñπÂºèÔºåËøôÈáå‰ªãÁªç‰∏§ÁßçÔºå‰∏ÄÁßçÊòØÂæ™ÁéØÊäòÂçäÔºåÂè¶‰∏ÄÁßçÊòØ gap = gap * 3 + 1„ÄÇ ÂÖ∑‰ΩìÔºöÂ∏åÂ∞îÊéíÂ∫èÂ¢ûÈáèÂ∫èÂàó‰ªãÁªç „ÄÇ ÂÖàÂ∞ÜÊï¥‰∏™ÂæÖÊéíÂ∫èÁöÑËÆ∞ÂΩïÂ∫èÂàóÂàÜÂâ≤Êàê‰∏∫Ëã•Âπ≤Â≠êÂ∫èÂàóÂàÜÂà´ËøõË°åÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èÔºåÂÖ∑‰ΩìÁÆóÊ≥ïÊèèËø∞Ôºö ÈÄâÊã©‰∏Ä‰∏™Â¢ûÈáèÂ∫èÂàót1Ôºåt2Ôºå‚Ä¶ÔºåtkÔºåÂÖ∂‰∏≠ti&gt;tjÔºåtk=1Ôºõ ÊåâÂ¢ûÈáèÂ∫èÂàó‰∏™Êï∞kÔºåÂØπÂ∫èÂàóËøõË°åk Ë∂üÊéíÂ∫èÔºõ ÊØèË∂üÊéíÂ∫èÔºåÊ†πÊçÆÂØπÂ∫îÁöÑÂ¢ûÈáètiÔºåÂ∞ÜÂæÖÊéíÂ∫èÂàóÂàÜÂâ≤ÊàêËã•Âπ≤ÈïøÂ∫¶‰∏∫m ÁöÑÂ≠êÂ∫èÂàóÔºåÂàÜÂà´ÂØπÂêÑÂ≠êË°®ËøõË°åÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫è„ÄÇ‰ªÖÂ¢ûÈáèÂõ†Â≠ê‰∏∫1 Êó∂ÔºåÊï¥‰∏™Â∫èÂàó‰Ωú‰∏∫‰∏Ä‰∏™Ë°®Êù•Â§ÑÁêÜÔºåË°®ÈïøÂ∫¶Âç≥‰∏∫Êï¥‰∏™Â∫èÂàóÁöÑÈïøÂ∫¶„ÄÇ Âä®ÂõæÊºîÁ§∫ ‰ª£Á†ÅÂÆûÁé∞1234567891011121314151617181920212223/*** ÂÖ∂ÂÆûÂ∞±ÊòØÂ∞ÜÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èÁöÑÈó¥Èöî1Âèò‰∏∫Êõ¥Â§ßÔºå‰πüÂ∞±ÊòØÂÖ∂ÂÆûÂ∞±Â§ö‰∫Ü‰∏Ä‰∏™Âæ™ÁéØÔºåÂ∞±ÊòØÂ§öÊ¨°Áº©Â∞èÈó¥ÈöîÁöÑÂæ™ÁéØÔºåÂÖ∂‰ªñË∑üÁõ¥Êé•ÊèíÂÖ•ÊòØ‰∏ÄÊ†∑ÁöÑ** @param sortArray* @return*/ public static int[] ShellSort2(int[] sortArray) &#123; int[] arr = Arrays.copyOf(sortArray, sortArray.length); int size = sortArray.length; for (int increment = size / 2; increment &gt; 0; increment /= 2) &#123; for (int i = increment; i &lt; size; i++) &#123; int temp = arr[i]; int j = i; for (; (j &gt; 0 &amp;&amp; arr[j - increment] &gt; temp); j -= increment) &#123; //Ëøô‰∏ÄÊ≠•ÊúÄÂÖ≥ÈîÆÔºåÂõ†‰∏∫Ë¶ÅÊ≥®ÊÑèÊØèÂΩìÊèíÂÖ•‰∏Ä‰∏™Êï∞Â≠óÔºåÂÖ∂ÂêéÈù¢ÈÉΩË¶ÅÂæÄÂêéÈ°∫Áßªincrement‰ΩçÔºå‰∏çÁÑ∂ÁöÑËØùÂ∞±Á©∫‰∏çÂá∫Ë¶ÅÊèíÂÖ•ÁöÑ‰ΩçÁΩÆÔºÅÔºÅÔºÅ arr[j] = arr[j - increment]; &#125; //Â¶ÇÊûúÊ≤°ÊúâÂèòÂåñÔºåÂàôtemp‰æùÁÑ∂Á≠â‰∫éarr[i],Â¶ÇÊûúÂèòÂåñÔºåÂàôÂ∞Üarr[i]ÁßªÂä®ËøáÊù•Â∞±Ë°å arr[j] = temp; &#125; &#125; return arr; &#125; 12345678910111213141516171819202122232425262728293031 /** * ‰∏çÊòØÊàëÂÜôÁöÑ * * @param sourceArray * @return * @throws Exception */public static int[] ShellSort1(int[] sourceArray) throws Exception &#123; // ÂØπ arr ËøõË°åÊã∑Ë¥ùÔºå‰∏çÊîπÂèòÂèÇÊï∞ÂÜÖÂÆπ int[] arr = Arrays.copyOf(sourceArray, sourceArray.length); int gap = 1; while (gap &lt; arr.length) &#123; gap = gap * 3 + 1; &#125; while (gap &gt; 0) &#123; for (int i = gap; i &lt; arr.length; i++) &#123; int tmp = arr[i]; int j = i; for (; j &gt;= 0 &amp;&amp; arr[j - gap] &gt; tmp; j -= gap) &#123; arr[j] = arr[j - gap]; &#125; arr[j] = tmp; &#125; gap = (int) Math.floor(gap / 3); &#125; return arr;&#125; ÁÆóÊ≥ïÊïàÁéá Êó∂Èó¥Â§çÊùÇÂ∫¶ÔºöÊúÄÂùèÂíåÊúÄÂ•ΩÊàë‰ª¨ÈÉΩÁü•ÈÅìÔºåËøô‰∏™Â∞±Ë∑üÁõ¥Êé•ÊèíÂÖ•Ê≤°Âå∫Âà´ÔºåÊúÄÂ•ΩÊúÄÂùèÈÉΩÊòØÂèñÂÜ≥‰∫éÂéüÊï∞ÁªÑÂ∫èÂàóÔºåÊâÄ‰ª•ÊúÄÂ•ΩÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰æùÊóßÊòØO(n)ÔºåÊúÄÂùèÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰æùÊóßÊòØO(n¬≤)ÔºåÂπ≥ÂùáÂ§çÊùÇÂ∫¶ÔºüÊàëtm‰πü‰∏çÁü•ÈÅì‰∏∫Âï•ÔºåËÆ∞‰ΩèÂ∞±ÊòØÂï¶ÔºåO(n^1.3)„ÄÇ Á©∫Èó¥Â§çÊùÇÂ∫¶ÔºöËøô‰∏™ÁÆÄÂçïÁöÑ‰∏ÄÊâπÔºåËøò‰∏çÂ∞±ÊòØO(1)„ÄÇ Á®≥ÂÆöÊÄßÔºöËøôÁßçË∑≥Ë∑ÉÊÄßÁöÑÂΩìÁÑ∂ÊòØ‰∏çÁ®≥ÂÆö‰∫Ü„ÄÇ‰æãÂ¶Çarr = {3,2,2}„ÄÇ tipsÁÆÄÂçïÁöÑ‰∏ÄÊâπ‚Ä¶‰∏çÂ∞±ÊòØÊääÁõ¥Êé•ÊèíÂÖ•ÁöÑ1ÂèòÊàê increment Âòõ ‚Ä¶‚Ä¶ Ê≤°Âï•ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÔºÅ ÂïäÔºÅÔºÅÔºÅ‰∏çÂØπÔºåÂÖ∂ÂÆûËøòÊòØÊúâ‰∏Ä‰∏™ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÔºÅÔºÅÔºÅ ËøôÈáåÊòØ‰∏âÈáçÂæ™ÁéØÔºåÂõ†‰∏∫ÈÇ£‰∏™Ê≠•ÈïøË¶ÅÂèòÂåñÔºåÁÑ∂Âêé‰∏çÂêåÊ≠•ÈïøÈÉΩË¶ÅËøõË°åÊéíÂ∫èÔºå‰∏ÄÊ¨°ÊéíÂ∫èÊòØ‰∏§ÈáçÂæ™ÁéØ over ÁÆÄÂçïÈÄâÊã©ÊéíÂ∫èÂü∫Êú¨ÊÄùÊÉ≥ÈÄâÊã©ÊéíÂ∫èÔºåÊÑèÂú®Á™ÅÂá∫ÈÄâÊã© ‰∫åÂ≠óÔºåÊâÄ‰ª•Êàë‰ª¨Ë¶ÅÂÅöÁöÑÂ∞±ÊòØÊúâ‰∏Ä‰∏™ÈÄâÊã©ÁöÑËøáÁ®ãÔºåËá≥‰∫éÁÆÄÂçïÈÄâÊã©ÔºåÁÆÄËÄåË®Ä‰πãÂ∞±ÊòØÈùûÂ∏∏ÈùûÂ∏∏ÁÆÄÂçïÁöÑÈÄâÊã©ÊéíÂ∫èÔºåÈÇ£‰∏çÂ∞±ÊòØÊØèÊ¨°ÈÉΩÊâæ‰∏™ÊúÄÂ∞èÂÄºÂæÄÂâçÊâîÂòõ‚Ä¶ ÈÄâÊã©ÊéíÂ∫è(Selection-sort)ÊòØ‰∏ÄÁßçÁÆÄÂçïÁõ¥ËßÇÁöÑÊéíÂ∫èÁÆóÊ≥ï„ÄÇÂÆÉÁöÑÂ∑•‰ΩúÂéüÁêÜÔºöÈ¶ñÂÖàÂú®Êú™ÊéíÂ∫èÂ∫èÂàó‰∏≠ÊâæÂà∞ÊúÄÂ∞èÔºàÂ§ßÔºâÂÖÉÁ¥†ÔºåÂ≠òÊîæÂà∞ÊéíÂ∫èÂ∫èÂàóÁöÑËµ∑Âßã‰ΩçÁΩÆÔºåÁÑ∂ÂêéÔºåÂÜç‰ªéÂâ©‰ΩôÊú™ÊéíÂ∫èÂÖÉÁ¥†‰∏≠ÁªßÁª≠ÂØªÊâæÊúÄÂ∞èÔºàÂ§ßÔºâÂÖÉÁ¥†ÔºåÁÑ∂ÂêéÊîæÂà∞Â∑≤ÊéíÂ∫èÂ∫èÂàóÁöÑÊú´Â∞æ„ÄÇ‰ª•Ê≠§Á±ªÊé®ÔºåÁõ¥Âà∞ÊâÄÊúâÂÖÉÁ¥†ÂùáÊéíÂ∫èÂÆåÊØï„ÄÇ ÁÆóÊ≥ïÊèèËø∞n‰∏™ËÆ∞ÂΩïÁöÑÁõ¥Êé•ÈÄâÊã©ÊéíÂ∫èÂèØÁªèËøá n-1 Ë∂üÁõ¥Êé•ÈÄâÊã©ÊéíÂ∫èÂæóÂà∞ÊúâÂ∫èÁªìÊûú„ÄÇÂÖ∑‰ΩìÁÆóÊ≥ïÊèèËø∞Â¶Ç‰∏ãÔºö(Ëøô‰πàÂÆòÊñπËÇØÂÆöÊòØÂ§çÂà∂ÁöÑÂï¶ÂìàÂìàÂìàÂìàÂìà) ÂàùÂßãÁä∂ÊÄÅÔºöÊó†Â∫èÂå∫‰∏∫R[1..n]ÔºåÊúâÂ∫èÂå∫‰∏∫Á©∫Ôºõ Á¨¨iË∂üÊéíÂ∫è(i=1,2,3‚Ä¶n-1)ÂºÄÂßãÊó∂ÔºåÂΩìÂâçÊúâÂ∫èÂå∫ÂíåÊó†Â∫èÂå∫ÂàÜÂà´‰∏∫R[1..i-1]ÂíåR(i..nÔºâ„ÄÇËØ•Ë∂üÊéíÂ∫è‰ªéÂΩìÂâçÊó†Â∫èÂå∫‰∏≠-ÈÄâÂá∫ÂÖ≥ÈîÆÂ≠óÊúÄÂ∞èÁöÑËÆ∞ÂΩï R[k]ÔºåÂ∞ÜÂÆÉ‰∏éÊó†Â∫èÂå∫ÁöÑÁ¨¨1‰∏™ËÆ∞ÂΩïR‰∫§Êç¢Ôºå‰ΩøR[1..i]ÂíåR[i+1..n)ÂàÜÂà´Âèò‰∏∫ËÆ∞ÂΩï‰∏™Êï∞Â¢ûÂä†1‰∏™ÁöÑÊñ∞ÊúâÂ∫èÂå∫ÂíåËÆ∞ÂΩï‰∏™Êï∞ÂáèÂ∞ë1‰∏™ÁöÑÊñ∞Êó†Â∫èÂå∫Ôºõ(ËøôÁßçÂ±ÅËØùËØªËµ∑Êù•ÁÆÄÁõ¥Â∞±ÊòØÊµ™Ë¥πÁîüÂëΩ) n-1Ë∂üÁªìÊùüÔºåÊï∞ÁªÑÊúâÂ∫èÂåñ‰∫Ü„ÄÇ Ê≥®ÔºöÂ∞±ÊòØËØ¥ ‚Äî‚Äî‚Äì ÊØèÊ¨°ÈÅçÂéÜÊï∞ÁªÑÈÉΩÈÄâ‰∏Ä‰∏™ÊúÄÂ∞èÁöÑÊâîÂà∞ÊúÄÂâçÈù¢ÔºàË∑üË¶ÅÊâîÁöÑ‰ΩçÁΩÆÁöÑÊï∞ËøõË°å‰∫§Êç¢ÔºâÔºåÁÑ∂Âêé‰ªéÂâ©‰∏ãÁöÑËøòÊ≤°ÊéíÂ∫èÁöÑÁªßÁª≠ÈÅçÂéÜÔºåÁªßÁª≠ÊâîÔºåÊâî‰∫Ün-1Ê¨°Â∞±ÁªìÊùü‰∫ÜÂè≠„ÄÇ Âä®ÂõæÊºîÁ§∫ ‰ª£Á†ÅÂÆûÁé∞1234567891011121314151617181920212223242526272829/** * ÁÆÄÂçïÈÄâÊã©ÊéíÂ∫è * * @param SortArray ÂéüÂßãÊï∞ÁªÑ * @return ÊéíÂ∫èÊï∞ÁªÑ */public static int[] SelectSort(int[] SortArray) &#123; int[] arr = Arrays.copyOf(SortArray, SortArray.length); //Ê≥®ÊÑèÊòØn-1ËΩÆÔºå‰∏ÄËΩÆ‰∏Ä‰∏™ÊúÄÂ∞èÂÄºÔºåÊúÄÂêéÈÇ£‰∏™‰∏çÁî®ËΩÆ‰∫Ü for (int i = 0; i &lt; arr.length - 1; i++) &#123; //ÊúÄÂºÄÂßãÈªòËÆ§Á¨¨‰∏Ä‰∏™ÊòØÊúÄÂ∞èÁöÑÔºåÁÑ∂ÂêéËøõÂÖ•ÂÜÖÂ±ÇÂæ™ÁéØÔºåÂàÜÂà´ËøõË°åÊØîËæÉÔºå‰∏ÄÂÆöË¶ÅËÆ∞ÂΩï‰∏ãminÁöÑ‰∏ãÊ†áÔºåËøôÊòØÊúÄÂêéÊØîËæÉÂÆå‰∫§Êç¢ÁöÑÂÖ≥ÈîÆ //ÊØè‰∏ÄÊ¨°Âæ™ÁéØÁöÑÁõÆÁöÑÂ∞±ÊòØÊâæÂà∞‰∏Ä‰∏™ÊúÄÂ∞èÂÄºÔºåÁÑ∂Âêé‰∏éÂΩìÂâçÂ§ñÈÉ®Âæ™ÁéØÁöÑÂÄºËøõË°å‰∏Ä‰∏™‰∫§Êç¢ int min = i; for (int j = i + 1; j &lt; arr.length; j++) &#123; //min = Math.min(min,arr[j]); if (arr[min] &gt; arr[j]) &#123; min = j; &#125; &#125; //Âà§Êñ≠ÊòØÂê¶ÈúÄË¶Å‰∫§Êç¢ if (i != min) &#123; int temp = arr[i]; arr[i] = arr[min]; arr[min] = temp; &#125; &#125; return arr;&#125; ÁÆóÊ≥ïÊïàÁéáÂøÖÈ°ªË¶ÅÂêêÊßΩÁöÑÊòØÔºåËøô‰∏™Áõ¥Êé•ÈÄâÊã©ÊéíÂ∫èÊòØÂûÉÂúæ‰∏≠ÁöÑÊàòÊñóÊú∫ÔºåÂõ†‰∏∫ÂÆÉÊó†ËßÜ‰ªª‰ΩïÊï∞ÁªÑÔºåÂπ≤Âï•ÈÉΩÊòØÂ∫üÁâ©ÁöÑO(n¬≤)Êó∂Èó¥Â§çÊùÇÂ∫¶ÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅ Êó∂Èó¥Â§çÊùÇÂ∫¶ÔºöO(n¬≤) Ôºõ Á©∫Èó¥Â§çÊùÇÂ∫¶ÔºöO(1) Ôºõ Á®≥ÂÆöÊÄßÔºöÂΩìÁÑ∂ÊòØ‰∏çÁ®≥ÂÆöÁöÑ‰∫ÜÔºåÊ∂âÂèäÂà∞ÁûéÈ∏°ÂÑø‰∫§Êç¢Ôºà‰∏ç‰∏¥ËøëÔºâÁöÑÔºåÂ∞±ËÇØÂÆö‰∏çÁ®≥ÂÆöÁöÑÂï¶„ÄÇ tipsÊ≤°Âï•Ê≥®ÊÑèÁÇπÔºåÂ∞±ÊòØÈùûÂ∏∏ÁöÑÂûÉÂúæÔºå‰∏çË¶ÅÁî®‚Ä¶ Â†ÜÊéíÂ∫èÂü∫Êú¨ÊÄùÊÉ≥Ëøô‰∏™ÁâõÈÄºÂãíÔºåÊàë‰∏™‰∫∫ÊúÄÊ¨£ËµèËøô‰∏™ÔºåÂõ†‰∏∫java‰∏≠ÁöÑPriorityQueueÁî®‰∫ÜÂ†ÜÊéíÂ∫è‚Ä¶Âú®ÂÅök‰∏™ÊúâÂ∫èÈìæË°®ÂêàÂπ∂Á≠âÈóÆÈ¢òÊó∂ÔºåÁî®PriorityQueueÁÆÄÁõ¥Â∞±ÊòØÁ•ûÂô®Âïä‚Ä¶ Â†ÜÊéíÂ∫èÁöÑÂü∫Êú¨ÊÄùÊÉ≥ÊòØÔºöÂ∞ÜÂæÖÊéíÂ∫èÂ∫èÂàóÊûÑÈÄ†Êàê‰∏Ä‰∏™Â§ßÈ°∂Â†ÜÔºåÊ≠§Êó∂ÔºåÊï¥‰∏™Â∫èÂàóÁöÑÊúÄÂ§ßÂÄºÂ∞±ÊòØÂ†ÜÈ°∂ÁöÑÊ†πËäÇÁÇπ„ÄÇÂ∞ÜÂÖ∂‰∏éÊú´Â∞æÂÖÉÁ¥†ËøõË°å‰∫§Êç¢ÔºåÊ≠§Êó∂Êú´Â∞æÂ∞±‰∏∫ÊúÄÂ§ßÂÄº„ÄÇÁÑ∂ÂêéÂ∞ÜÂâ©‰Ωôn-1‰∏™ÂÖÉÁ¥†ÈáçÊñ∞ÊûÑÈÄ†Êàê‰∏Ä‰∏™Â†ÜÔºåËøôÊ†∑‰ºöÂæóÂà∞n‰∏™ÂÖÉÁ¥†ÁöÑÊ¨°Â∞èÂÄº„ÄÇÂ¶ÇÊ≠§ÂèçÂ§çÊâßË°åÔºå‰æøËÉΩÂæóÂà∞‰∏Ä‰∏™ÊúâÂ∫èÂ∫èÂàó‰∫Ü„ÄÇ ÁÆóÊ≥ïÊèèËø∞ Â∞ÜÊó†ÈúÄÂ∫èÂàóÊûÑÂª∫Êàê‰∏Ä‰∏™Â†ÜÔºåÊ†πÊçÆÂçáÂ∫èÈôçÂ∫èÈúÄÊ±ÇÈÄâÊã©Â§ßÈ°∂Â†ÜÊàñÂ∞èÈ°∂Â†Ü; Â∞ÜÂ†ÜÈ°∂ÂÖÉÁ¥†‰∏éÊú´Â∞æÂÖÉÁ¥†‰∫§Êç¢ÔºåÂ∞ÜÊúÄÂ§ßÂÖÉÁ¥†‚ÄùÊ≤â‚ÄùÂà∞Êï∞ÁªÑÊú´Á´Ø; ÈáçÊñ∞Ë∞ÉÊï¥ÁªìÊûÑÔºå‰ΩøÂÖ∂Êª°Ë∂≥Â†ÜÂÆö‰πâÔºåÁÑ∂ÂêéÁªßÁª≠‰∫§Êç¢Â†ÜÈ°∂ÂÖÉÁ¥†‰∏éÂΩìÂâçÊú´Â∞æÂÖÉÁ¥†ÔºåÂèçÂ§çÊâßË°åË∞ÉÊï¥+‰∫§Êç¢Ê≠•È™§ÔºåÁõ¥Âà∞Êï¥‰∏™Â∫èÂàóÊúâÂ∫è„ÄÇ Âä®ÂõæÊºîÁ§∫ ‰ª£Á†ÅÂÆûÁé∞123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475 /** * Â†ÜÊéíÂ∫è * * @param sortArray * @param len Ê≥®ÊÑèËøôÈáåÊòØarr.lengthÔºåË∑ü‰πãÂâç‰∏ç‰∏ÄÊ†∑ÔºåÂ†ÜÊéíÂ∫èÊòØ‰ªé1ÂºÄÂßãÁöÑ */ public static void heapSort(int[] sortArray, int len) &#123; //Âª∫Á´ãÂ§ßÊ†πÂ†Ü BuildMaxHeap(sortArray, len); //ÊØèÊ¨°ÈÉΩÂ∞ÜÊ†πÂèñÂá∫ÔºåÁÑ∂ÂêéÂ∞ÜÊúÄÂ∫ï‰∏ãÁöÑÊîæÂà∞Ê†πÔºåÁÑ∂ÂêéËøõË°åÂ†ÜË∞ÉÊï¥ for (int i = len; i &gt; 0; i--) &#123; swap(sortArray, i, 0);// AdjustDown(sortArray,0,i-1); AdjustDown2(sortArray, 0, i - 1); &#125; System.out.println(Arrays.toString(sortArray)); &#125; /** * ÂÖàÂÜô‰∏Ä‰∏™ÈÄíÂΩíÁöÑÔºåÊØîËæÉÂ•ΩÁêÜËß£ * * @param sortArray * @param i * @param len */ private static void AdjustDown(int[] sortArray, int i, int len) &#123; //Ê≥®ÊÑèËøôÈáåÁöÑlenÊòØlength-1ÔºåÁÑ∂ÂêéÊ†πÁöÑÂ∫èÂè∑ÊòØ1ÔºåÊâÄ‰ª•leftÊòØ2i+1 int left = 2 * i + 1; int right = 2 * i + 2; int largest = i; if (left &lt;= len &amp;&amp; sortArray[left] &gt; sortArray[largest]) largest = left; if (right &lt;= len &amp;&amp; sortArray[right] &gt; sortArray[largest]) largest = right; if (largest != i) &#123; swap(sortArray, largest, i); AdjustDown(sortArray, largest, len); &#125; &#125; /** * ÂÜô‰∏Ä‰∏™ÈùûÈÄíÂΩíÁöÑÂêßÔºåÊ≥®ÊÑèÂìàÔºåËøôÈáåÁöÑlenÊòØlength-1ÔºåË∑ü‰∏äÈù¢ÁöÑ‰∏ÄÊ†∑ * * @param sortArray * @param i * @param len */ private static void AdjustDown2(int[] sortArray, int i, int len) &#123; int t = i; for (int m = 2 * i + 1; m &lt;= len; m = t * 2 + 1) &#123; if (sortArray[m] &gt; sortArray[t]) t = m; if (m + 1 &lt;= len &amp;&amp; sortArray[m + 1] &gt; sortArray[t]) t = m + 1; if (t == i) break; else &#123; swap(sortArray, t, (m - 1) / 2); i = (m - 1) / 2; &#125; &#125; &#125; private static void BuildMaxHeap(int[] sortArray, int len) &#123; double lens = len; //Ê≥®ÊÑèÊòØ‰ªélens/2ÂºÄÂßã for (int i = (int) Math.round((lens / 2)) - 1; i &gt;= 0; i--) &#123;// System.out.println(i);// AdjustDown(sortArray,i,len); AdjustDown2(sortArray, i, len); &#125; &#125; ÁÆóÊ≥ïÊïàÁéá Êó∂Èó¥Â§çÊùÇÂ∫¶ÔºöÂπ≥ÂùáÊó∂Èó¥„ÄÅÊúÄÂùèÂíåÊúÄÂ•ΩÊÉÖÂÜµ‰∏ãÈÉΩ‰∏ÄÊ†∑ÔºåÈÉΩÊòØO(nlogn) „ÄÇ Âª∫Á´ãÂ†ÜÁöÑËøáÁ®ã, ‰ªélength/2 ‰∏ÄÁõ¥Â§ÑÁêÜÂà∞0, Êó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(n); Ë∞ÉÊï¥Â†ÜÁöÑËøáÁ®ãÊòØÊ≤øÁùÄÂ†ÜÁöÑÁà∂Â≠êËäÇÁÇπËøõË°åË∞ÉÊï¥, ÊâßË°åÊ¨°Êï∞‰∏∫Â†ÜÁöÑÊ∑±Â∫¶, Êó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(lgn); Â†ÜÊéíÂ∫èÁöÑËøáÁ®ãÁî±nÊ¨°Á¨¨‚ë°Ê≠•ÂÆåÊàê, Êó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(nlgn)„ÄÇ Á©∫Èó¥Â§çÊùÇÂ∫¶ÔºöO(1)„ÄÇ Á®≥ÂÆöÊÄßÔºöÁî±‰∫éÂ†ÜÊéíÂ∫è‰∏≠ÂàùÂßãÂåñÂ†ÜÁöÑËøáÁ®ãÊØîËæÉÊ¨°Êï∞ËæÉÂ§ö, Âõ†Ê≠§ÂÆÉ‰∏çÂ§™ÈÄÇÁî®‰∫éÂ∞èÂ∫èÂàó„ÄÇÂêåÊó∂Áî±‰∫éÂ§öÊ¨°‰ªªÊÑè‰∏ãÊ†áÁõ∏‰∫í‰∫§Êç¢‰ΩçÁΩÆ, Áõ∏ÂêåÂÖÉÁ¥†‰πãÈó¥ÂéüÊú¨Áõ∏ÂØπÁöÑÈ°∫Â∫èË¢´Á†¥Âùè‰∫Ü, Âõ†Ê≠§, ÂÆÉÊòØ‰∏çÁ®≥ÂÆöÁöÑÊéíÂ∫è„ÄÇ tips Â†ÜÊéíÂ∫èÔºå‰∏ªË¶ÅÂ∞±ÊòØÊääÊ†πÊãøÂá∫Êù•ÔºåÁÑ∂ÂêéÂâ©‰∏ãÁöÑË∞ÉÊï¥ÊàêÊúÄÂ§ßÂ†ÜÔºåÊâÄ‰ª•Á¨¨‰∏Ä‰∏™ÊãøÂá∫Êù•ÁöÑÊúÄÂ§ßÁöÑÂ∞±Â∫îËØ•ÊîæÂà∞ÊúÄÂ•Ω‰∏Ä‰∏™‰ΩçÁΩÆÔºå‰∏ÄÂÖ±Âæ™ÁéØ n-1 Ê¨°Âç≥ÂèØÔºõ Ê≥®ÊÑè‰ª£Á†Å‰∏≠ÁöÑ len ÊòØ length-1„ÄÇ ËøòÊúâ‰∏Ä‰∏™ÂÆπÊòìÂá∫ÈîôÁöÑÂú∞ÊñπÂú®Âª∫Á´ãÂ§ßÊ†πÂ†ÜÁöÑÊó∂ÂÄôÔºåi Â∫îËØ•ÊòØ‰ªéÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÁöÑÁà∂‰∫≤ËäÇÁÇπÂºÄÂßãË∞ÉÊï¥„ÄÇ ÂÜôÁöÑÈùûÈÄíÂΩíËøòÊòØ‰∏çÂ§™Â•Ω‚Ä¶ËôΩÁÑ∂Â•ΩÂÉèËÉΩÈÄöËøáÔºåÈùûÈÄíÂΩí‰∏≠‰ª£Á†Å‰∏≠ÁöÑmÊòØÊåáËäÇÁÇπÁöÑÂ∑¶Â≠©Â≠êÔºåÂ¶ÇÊûúÊúâ‰∫§Êç¢ÔºåÂàáÂãøÂøòËÆ∞Êõ¥Êñ∞Êñ∞ÁöÑÁà∂‰∫≤ËäÇÁÇπ(i = (m-1)/2)ÔºåÁÑ∂ÂêéËøõË°å‰∏ã‰∏ÄÊ≠•ÂíåÂ≠©Â≠êËäÇÁÇπÁöÑÊØîËæÉ„ÄÇ ÂΩíÂπ∂ÊéíÂ∫èÂü∫Êú¨ÊÄùÊÉ≥ÂΩíÂπ∂ÊéíÂ∫èÊòØÂª∫Á´ãÂú®ÂΩíÂπ∂Êìç‰Ωú‰∏äÁöÑ‰∏ÄÁßçÊúâÊïàÁöÑÊéíÂ∫èÁÆóÊ≥ï„ÄÇËØ•ÁÆóÊ≥ïÊòØÈááÁî® ÂàÜÊ≤ªÊ≥ïÔºàDivide and ConquerÔºâÁöÑ‰∏Ä‰∏™ÈùûÂ∏∏ÂÖ∏ÂûãÁöÑÂ∫îÁî®„ÄÇÂ∞ÜÂ∑≤ÊúâÂ∫èÁöÑÂ≠êÂ∫èÂàóÂêàÂπ∂ÔºåÂæóÂà∞ÂÆåÂÖ®ÊúâÂ∫èÁöÑÂ∫èÂàóÔºõÂç≥ÂÖà‰ΩøÊØè‰∏™Â≠êÂ∫èÂàóÊúâÂ∫èÔºåÂÜç‰ΩøÂ≠êÂ∫èÂàóÊÆµÈó¥ÊúâÂ∫è„ÄÇËã•Â∞Ü‰∏§‰∏™ÊúâÂ∫èË°®ÂêàÂπ∂Êàê‰∏Ä‰∏™ÊúâÂ∫èË°®ÔºåÁß∞‰∏∫ 2-Ë∑ØÂΩíÂπ∂„ÄÇ ÁÆóÊ≥ïÊèèËø∞ ÊääÈïøÂ∫¶‰∏∫nÁöÑËæìÂÖ•Â∫èÂàóÂàÜÊàê‰∏§‰∏™ÈïøÂ∫¶‰∏∫n/2ÁöÑÂ≠êÂ∫èÂàóÔºåÁÑ∂ÂêéÂ≠êÂ∫èÂàóÈ¶ñÁ´ØÂêÑÁª¥Êä§‰∏Ä‰∏™ÊåáÈíàÔºå‰∫íÁõ∏ÊØîËæÉÔºõ ÂØπËøô‰∏§‰∏™Â≠êÂ∫èÂàóÂàÜÂà´ÈááÁî®ÂΩíÂπ∂ÊéíÂ∫èÔºõ Â∞Ü‰∏§‰∏™ÊéíÂ∫èÂ•ΩÁöÑÂ≠êÂ∫èÂàóÂêàÂπ∂Êàê‰∏Ä‰∏™ÊúÄÁªàÁöÑÊéíÂ∫èÂ∫èÂàó„ÄÇ Âä®ÂõæÊºîÁ§∫ ‰ª£Á†ÅÂÆûÁé∞1234567891011121314151617181920212223242526272829303132333435363738394041424344454647 /** * Ëá™Â∑±ÂÜô‰∏Ä‰∏™ Â∫ïÂ±ÇÊòØÊï∞ÁªÑ */ public static void mergeSort(int[] sortArray, int low, int high) &#123; int mid = (low + high) / 2; if (low &lt; high) &#123; //Ê≥®ÊÑèÂíåÂø´ÊéíÂå∫ÂàÜ‰∏Ä‰∏ãÔºåËøôÈáåÁöÑmidÊòØË¶ÅÂú®ÈÄíÂΩíÈáåÈù¢ÁöÑ mergeSort(sortArray, low, mid); mergeSort(sortArray, mid + 1, high); //ÊÄùË∑ØÂ∞±ÊòØÂÖà‰∏ÄÂàÜ‰∏∫‰∫åÂÜçÂêà‰∫å‰∏∫‰∏Ä merge(sortArray, low, mid, high); System.out.println(Arrays.toString(sortArray)); &#125; &#125; private static void merge(int[] sortArray, int low, int mid, int high) &#123; //Áâ∫Áâ≤‰∫ÜÁ©∫Èó¥ÔºåÂºïÂÖ•‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑÁ©∫Èó¥Êù•Â≠òÂÇ®ÊéíÂ•ΩÂ∫èÁöÑÊï∞ÁªÑ int[] temp = new int[high - low + 1]; int i = low; int j = mid + 1; int k = 0; while (i &lt;= mid &amp;&amp; j &lt;= high) &#123; if (sortArray[i] &lt; sortArray[j]) &#123; temp[k++] = sortArray[i++]; &#125; else &#123; temp[k++] = sortArray[j++]; &#125; &#125; //ÈùûÂ∏∏‰∏•ÈáçÁöÑÈîôËØØÔºåif‰∏≠ÁöÑj++Âêé‰ºöÂΩ±Âìç‰∏ã‰∏Ä‰∏™ifÔºåÊâÄ‰ª•‰ºöË∂ÖÂá∫Á¥¢ÂºïÂÄº„ÄÇÊï∞ÁªÑË∂äÁïå// while(i &gt; mid)&#123;// temp[k++] = sortArray[j++];// &#125;// while(j &gt; high)&#123;// temp[k++] = sortArray[i++];// &#125; while (i &lt;= mid) &#123; temp[k++] = sortArray[i++]; &#125; while (j &lt;= high) &#123; temp[k++] = sortArray[j++]; &#125; for (int t = 0; t &lt; temp.length; t++) &#123; //ËøôÈáå‰πüÊòØÊòìÈîôÁÇπÔºåÊ≥®ÊÑèsortArrayÁöÑ‰∏ãÊ†áÊòØ‰ªélowÂºÄÂßãÁöÑ sortArray[low + t] = temp[t]; &#125; &#125; ÁÆóÊ≥ïÊïàÁéá Êó∂Èó¥Â§çÊùÇÂ∫¶ÔºöÂΩíÂπ∂ÊéíÂ∫èÂèØÁÆóÊòØÊéíÂ∫èÁÆóÊ≥ï‰∏≠ÁöÑ‚Äù‰Ωº‰ΩºËÄÖ‚Äù„ÄÇÂÅáËÆæÊï∞ÁªÑÈïøÂ∫¶‰∏∫nÔºåÈÇ£‰πàÊãÜÂàÜÊï∞ÁªÑÂÖ±ÈúÄlogn, ÂèàÊØèÊ≠•ÈÉΩÊòØ‰∏Ä‰∏™ÊôÆÈÄöÁöÑÂêàÂπ∂Â≠êÊï∞ÁªÑÁöÑËøáÁ®ãÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(n)Ôºå ÊïÖÂÖ∂ÁªºÂêàÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(nlogn)„ÄÇÊ≥®ÊÑèÔºåÂπ≥ÂùáÊó∂Èó¥Â§çÊùÇÂ∫¶„ÄÅÊúÄÂ•ΩÊó∂Èó¥Â§çÊùÇÂ∫¶„ÄÅÊúÄÂùèÊó∂Èó¥Â§çÊùÇÂ∫¶ÈÉΩÊòØO(nlogn)„ÄÇ Á©∫Èó¥Â§çÊùÇÂ∫¶ÔºöÈúÄË¶Å‰∏Ä‰∏™È¢ùÂ§ñÁöÑÊï∞ÁªÑÊù•Â≠òÂÇ®ÊéíÂ∫èÂ•ΩÁöÑÊï∞ÁªÑÔºåÊâÄ‰ª•ÊòØO(N)„ÄÇ Á®≥ÂÆöÊÄßÔºöÁ®≥ÂÆö„ÄÇ tips È¶ñÂÖàÊ≥®ÊÑèÈÄíÂΩíÈÉ®ÂàÜÔºåË∑üÂø´ÊéíÊúâÊâÄÂå∫Âà´ÔºåÂø´ÊéíÊòØÊéíÂ∫è‰∏ÄËΩÆÁªìÊùüÂêéÊâçËÉΩËøîÂõû‰∏≠Èó¥ËäÇÁÇπÔºåËÄåÂΩíÂπ∂ÊòØÁõ¥Êé•ÁÆóÂá∫‰∏≠Èó¥ËäÇÁÇπÔºåÂπ∂‰∏îÂΩíÂπ∂ÁöÑmidÊòØË¶ÅÂèÇ‰∏éÈÄíÂΩíÁöÑÔºåËÄåÂø´Êéí‰∏≠ÁöÑÂü∫ÂáÜÂÄº‰∏çÈúÄË¶ÅÂèÇÂä†ÈÄíÂΩí„ÄÇ ÂêàÂπ∂ËøáÁ®ã„ÄÇÈ¶ñÂÖàÊòØË¶Ånew‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÁªÑÊù•Â≠òÂÇ®ÊéíÂ∫èÂ•ΩÁöÑÊï∞ÁªÑÔºå‰∏§‰∏™ÊåáÈíàËΩÆÊµÅÊØîËæÉÔºåÂ¶ÇÊûúÂ∫ïÂ±ÇÊòØÈìæË°®Ôºå‰∏§‰∏™Â§¥ÁªìÁÇπ‰∫íÁõ∏ÊØîËæÉÔºåÊúÄÂêéÂêàÂπ∂‰πãÂêéËøîÂõû‰∏Ä‰∏™Â§¥ÁªìÁÇπÂç≥ÂèØ„ÄÇ Ê≥®ÊÑèÊúÄÂêéÂ∞ÜÂêàÂπ∂ÊéíÂ∫èÂ•ΩÁöÑÊï∞ÁªÑÊîæÂõûÂà∞ÂéüÊï∞ÁªÑÊó∂Ôºå‰∏ãÊ†áÊòØ‰ªé low ÂºÄÂßãÁöÑ„ÄÇ ËÆ°Êï∞ÊéíÂ∫èËÆ°Êï∞ÊéíÂ∫è„ÄÅÂü∫Êï∞ÊéíÂ∫è„ÄÅÊ°∂ÊéíÂ∫èÂ±û‰∫éÈùûÊØîËæÉÊéíÂ∫è„ÄÇÈùûÊØîËæÉÊéíÂ∫èÊòØÈÄöËøáÁ°ÆÂÆöÊØè‰∏™ÂÖÉÁ¥†‰πãÂâçÔºåÂ∫îËØ•ÊúâÂ§öÂ∞ë‰∏™ÂÖÉÁ¥†Êù•ÊéíÂ∫è„ÄÇÈíàÂØπÊï∞ÁªÑarrÔºåËÆ°ÁÆóarr[i]‰πãÂâçÊúâÂ§öÂ∞ë‰∏™ÂÖÉÁ¥†ÔºåÂàôÂîØ‰∏ÄÁ°ÆÂÆö‰∫Üarr[i]Âú®ÊéíÂ∫èÂêéÊï∞ÁªÑ‰∏≠ÁöÑ‰ΩçÁΩÆ„ÄÇ ÈùûÊØîËæÉÊéíÂ∫èÂè™Ë¶ÅÁ°ÆÂÆöÊØè‰∏™ÂÖÉÁ¥†‰πãÂâçÁöÑÂ∑≤ÊúâÁöÑÂÖÉÁ¥†‰∏™Êï∞Âç≥ÂèØÔºåÊâÄÊúâ‰∏ÄÊ¨°ÈÅçÂéÜÂç≥ÂèØËß£ÂÜ≥„ÄÇÁÆóÊ≥ïÊó∂Èó¥Â§çÊùÇÂ∫¶O(n)„ÄÇÈùûÊØîËæÉÊéíÂ∫èÊó∂Èó¥Â§çÊùÇÂ∫¶‰ΩéÔºå‰ΩÜÁî±‰∫éÈùûÊØîËæÉÊéíÂ∫èÈúÄË¶ÅÂç†Áî®Á©∫Èó¥Êù•Á°ÆÂÆöÂîØ‰∏Ä‰ΩçÁΩÆ„ÄÇÊâÄ‰ª•ÂØπÊï∞ÊçÆËßÑÊ®°ÂíåÊï∞ÊçÆÂàÜÂ∏ÉÊúâ‰∏ÄÂÆöÁöÑË¶ÅÊ±Ç„ÄÇ Âü∫Êú¨ÊÄùÊÉ≥ËÆ°Êï∞ÊéíÂ∫èÈúÄË¶ÅÂç†Áî®Â§ßÈáèÁ©∫Èó¥ÔºåÂÆÉ‰ªÖÈÄÇÁî®‰∫éÊï∞ÊçÆÊØîËæÉÈõÜ‰∏≠ÁöÑÊÉÖÂÜµ„ÄÇÊØîÂ¶Ç [0~100]Ôºå[10000~19999] ËøôÊ†∑ÁöÑÊï∞ÊçÆ„ÄÇ ËÆ°Êï∞ÊéíÂ∫èÁöÑÂü∫Êú¨ÊÄùÊÉ≥ÊòØÔºö ÂØπÊØè‰∏Ä‰∏™ËæìÂÖ•ÁöÑÂÖÉÁ¥†arr[i]ÔºåÁ°ÆÂÆöÂ∞è‰∫é arr[i] ÁöÑÂÖÉÁ¥†‰∏™Êï∞„ÄÇÊâÄ‰ª•ÂèØ‰ª•Êää arr[i] ÊîæÂà∞ÂÆÉËæìÂá∫Êï∞ÁªÑ‰∏≠ÁöÑ‰ΩçÁΩÆ‰∏ä„ÄÇ ÂÅáËÆæÊúâ5‰∏™Êï∞Â∞è‰∫é arr[i]ÔºåÊâÄ‰ª• arr[i] Â∫îËØ•ÊîæÂú®Êï∞ÁªÑÁöÑÁ¨¨6‰∏™‰ΩçÁΩÆ‰∏ä„ÄÇ ÂÖ∂Ê†∏ÂøÉÂú®‰∫éÂ∞ÜËæìÂÖ•ÁöÑÊï∞ÊçÆÂÄºËΩ¨Âåñ‰∏∫ÈîÆÂ≠òÂÇ®Âú®È¢ùÂ§ñÂºÄËæüÁöÑÊï∞ÁªÑÁ©∫Èó¥‰∏≠„ÄÇ ‰Ωú‰∏∫‰∏ÄÁßçÁ∫øÊÄßÊó∂Èó¥Â§çÊùÇÂ∫¶ÁöÑÊéíÂ∫èÔºåËÆ°Êï∞ÊéíÂ∫èË¶ÅÊ±ÇËæìÂÖ•ÁöÑÊï∞ÊçÆÂøÖÈ°ªÊòØÊúâÁ°ÆÂÆöËåÉÂõ¥ÁöÑÊï¥Êï∞„ÄÇ ÁÆóÊ≥ïÊèèËø∞ ÊâæÂá∫ÂæÖÊéíÂ∫èÁöÑÊï∞ÁªÑ‰∏≠ÊúÄÂ§ßÂíåÊúÄÂ∞èÁöÑÂÖÉÁ¥†Ôºõ ÁªüËÆ°Êï∞ÁªÑ‰∏≠ arr[i] ÁöÑÂÖÉÁ¥†Âá∫Áé∞ÁöÑÊ¨°Êï∞ÔºåÂ∞Ü arr[i] - min ‰Ωú‰∏∫ËæÖÂä©Êï∞ÁªÑhelperÁöÑÁ¥¢ÂºïÂÄºÔºõ ÂØπÊâÄÊúâÁöÑËÆ°Êï∞Á¥ØÂä†Ôºåhelper Á¥¢ÂºïÂÄºÂØπÂ∫îÁöÑÂÄºÂç≥‰∏∫ËØ• arr[i] Âá∫Áé∞ÁöÑÊ¨°Êï∞Ôºõ ÂèçÂêëÂ°´ÂÖÖÁõÆÊ†áÊï∞ÁªÑÔºöÂ∞Ü helper ‰∏≠ÁöÑÂÖÉÁ¥†Ê†πÊçÆÁ¥¢Âºï‰æùÊ¨°ÊîæÂõûÂéüÊï∞ÁªÑÔºåÁ¥¢ÂºïÂØπÂ∫îÁöÑÊï∞ÂÄºÂç≥‰∏∫ËØ•Êï∞Âá∫Áé∞ÁöÑÊ¨°Êï∞ÔºåÊØèÊîæ‰∏Ä‰∏™ÂÖÉÁ¥†Â∞±Â∞Ü helper[arr[i]-min] ÂáèÂéª1„ÄÇ Âä®ÂõæÊºîÁ§∫ ‰ª£Á†ÅÂÆûÁé∞12345678910111213141516171819202122232425/** * ËÆ°Êï∞ÊéíÂ∫è * Ë¶ÅÊúâ‰∏§‰∏™Êï∞ÁªÑÔºåÂàÜÂà´ÊòØÂéüÊï∞ÁªÑÔºå‰∏≠Èó¥Êï∞ÁªÑÁî®Êù•ÊéíÂ∫èÁöÑ * * @param sortArray */public static void courtSort(int[] sortArray) &#123; int max = Integer.MIN_VALUE; int min = Integer.MAX_VALUE; for (int i = 0; i &lt; sortArray.length; i++) &#123; max = Math.max(max, sortArray[i]); min = Math.min(min, sortArray[i]); &#125; int[] helparr = new int[max - min + 1]; for (int i = 0; i &lt; sortArray.length; i++) &#123; helparr[sortArray[i] - min]++; &#125; int index = 0; for (int i = 0; i &lt; helparr.length; i++) &#123; while (helparr[i]-- &gt; 0) &#123; sortArray[index++] = i + min; &#125; &#125; System.out.println(Arrays.toString(sortArray));&#125; ÁÆóÊ≥ïÊïàÁéá Êó∂Èó¥Â§çÊùÇÂ∫¶ÔºöÂΩìËæìÂÖ•ÂÖÉÁ¥†ÊòØ n ‰∏™ 0Âà∞ k ‰πãÈó¥ÁöÑÊï¥Êï∞Êó∂ÔºåÂπ≥ÂùáÊó∂Èó¥„ÄÅÊúÄÂùèÂíåÊúÄÂ•ΩÊÉÖÂÜµ‰∏ãÈÉΩ‰∏ÄÊ†∑ÔºåÈÉΩÊòØO(n+k) „ÄÇÂÖ∂ÊéíÂ∫èÈÄüÂ∫¶Âø´‰∫é‰ªª‰ΩïÊØîËæÉÊéíÂ∫èÁÆóÊ≥ï„ÄÇÂΩìk‰∏çÊòØÂæàÂ§ßÂπ∂‰∏îÂ∫èÂàóÊØîËæÉÈõÜ‰∏≠Êó∂ÔºåËÆ°Êï∞ÊéíÂ∫èÊòØ‰∏Ä‰∏™ÂæàÊúâÊïàÁöÑÊéíÂ∫èÁÆóÊ≥ï„ÄÇ Á©∫Èó¥Â§çÊùÇÂ∫¶ÔºöO(n+k) „ÄÇ Á®≥ÂÆöÊÄßÔºöÁ®≥ÂÆö„ÄÇ tips Ê≥®ÊÑèÔºö‰∏∫‰∫ÜËäÇÁúÅÁ©∫Èó¥Ôºåhelper ÂøÖÈ°ªÊòØ arr[i]-min‰Ωú‰∏∫Á¥¢ÂºïÂÄº„ÄÇ Âú®Â∞ÜÊéíÂ∫èÂ•ΩÁöÑÊï∞ÁªÑÊîæÂõûÂéüÊï∞ÁªÑÊó∂ÔºåÂà´Âøò‰∫ÜÊää‰∏≠Èó¥Êï∞ÁªÑÁ¥¢ÂºïÂØπÂ∫îÁöÑÂÄºÂáèÂéª1ÔºåÂΩì‰∏∫0Êó∂ËØ¥ÊòéËØ•Á¥¢Âºï‰ª£Ë°®ÁöÑÂÄº‰∏çÂ≠òÂú®„ÄÇ Ê°∂ÊéíÂ∫èÂü∫Êú¨ÊÄùÊÉ≥ Ê°∂ÊéíÂ∫èÊòØËÆ°Êï∞ÊéíÂ∫èÁöÑÂçáÁ∫ßÁâà„ÄÇÂÆÉÂà©Áî®‰∫ÜÂáΩÊï∞ÁöÑÊò†Â∞ÑÂÖ≥Á≥ªÔºåÈ´òÊïà‰∏éÂê¶ÁöÑÂÖ≥ÈîÆÂ∞±Âú®‰∫éËøô‰∏™Êò†Â∞ÑÂáΩÊï∞ÁöÑÁ°ÆÂÆö„ÄÇ Ê°∂ÊéíÂ∫è (Bucket sort) ÁöÑÂ∑•‰ΩúÁöÑÂéüÁêÜÔºöÂÅáËÆæËæìÂÖ•Êï∞ÊçÆÊúç‰ªéÂùáÂåÄÂàÜÂ∏ÉÔºåÂ∞ÜÊï∞ÊçÆÂàÜÂà∞ÊúâÈôêÊï∞ÈáèÁöÑÊ°∂ÈáåÔºåÊØè‰∏™Ê°∂ÂÜçÂàÜÂà´ÊéíÂ∫èÔºàÊúâÂèØËÉΩÂÜç‰ΩøÁî®Âà´ÁöÑÊéíÂ∫èÁÆóÊ≥ïÊàñÊòØ‰ª•ÈÄíÂΩíÊñπÂºèÁªßÁª≠‰ΩøÁî®Ê°∂ÊéíÂ∫èËøõË°åÊéíÔºâ„ÄÇ Ê°∂ÊéíÂ∫èÂèØÁî®‰∫éÊúÄÂ§ßÊúÄÂ∞èÂÄºÁõ∏Â∑ÆËæÉÂ§ßÁöÑÊï∞ÊçÆÊÉÖÂÜµÔºåÊØîÂ¶Ç[9012,19702,39867,68957,83556,102456]„ÄÇ‰ΩÜÊ°∂ÊéíÂ∫èË¶ÅÊ±ÇÊï∞ÊçÆÁöÑÂàÜÂ∏ÉÂøÖÈ°ªÂùáÂåÄÔºåÂê¶ÂàôÂèØËÉΩÂØºËá¥Êï∞ÊçÆÈÉΩÈõÜ‰∏≠Âà∞‰∏Ä‰∏™Ê°∂‰∏≠„ÄÇÊØîÂ¶Ç[104,150,123,132,20000], ËøôÁßçÊï∞ÊçÆ‰ºöÂØºËá¥Ââç4‰∏™Êï∞ÈÉΩÈõÜ‰∏≠Âà∞Âêå‰∏Ä‰∏™Ê°∂‰∏≠„ÄÇÂØºËá¥Ê°∂ÊéíÂ∫èÂ§±Êïà„ÄÇ Ê°∂ÊéíÂ∫èÁöÑÂü∫Êú¨ÊÄùÊÉ≥ÊòØÔºöÊääÊï∞ÁªÑ arr ÂàíÂàÜ‰∏∫n‰∏™Â§ßÂ∞èÁõ∏ÂêåÂ≠êÂå∫Èó¥ÔºàÊ°∂ÔºâÔºåÊØè‰∏™Â≠êÂå∫Èó¥ÂêÑËá™ÊéíÂ∫èÔºåÊúÄÂêéÂêàÂπ∂„ÄÇËÆ°Êï∞ÊéíÂ∫èÊòØÊ°∂ÊéíÂ∫èÁöÑ‰∏ÄÁßçÁâπÊÆäÊÉÖÂÜµÔºåÂèØ‰ª•ÊääËÆ°Êï∞ÊéíÂ∫èÂΩìÊàêÊØè‰∏™Ê°∂ÈáåÂè™Êúâ‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÊÉÖÂÜµ„ÄÇ ÁÆóÊ≥ïÊèèËø∞ ÊâæÂá∫ÂæÖÊéíÂ∫èÊï∞ÁªÑ‰∏≠ÁöÑÊúÄÂ§ßÂÄº max„ÄÅÊúÄÂ∞èÂÄº minÔºõ Êàë‰ª¨‰ΩøÁî® Âä®ÊÄÅÊï∞ÁªÑ ArrayList ‰Ωú‰∏∫Ê°∂ÔºåÊ°∂ÈáåÊîæÁöÑÂÖÉÁ¥†‰πüÁî® ArrayList Â≠òÂÇ®„ÄÇÊ°∂ÁöÑÊï∞Èáè‰∏∫ (max-min)/BucketSize+1Ôºõ ÈÅçÂéÜÊï∞ÁªÑ arrÔºåËÆ°ÁÆóÊØè‰∏™ÂÖÉÁ¥† arr[i] ÊîæÁöÑÊ°∂Ôºõ ÊØè‰∏™Ê°∂ÂêÑËá™ÊéíÂ∫èÔºõ ÈÅçÂéÜÊ°∂Êï∞ÁªÑÔºåÊääÊéíÂ∫èÂ•ΩÁöÑÂÖÉÁ¥†ÊîæËøõËæìÂá∫Êï∞ÁªÑ„ÄÇ ÂõæÁâáÊºîÁ§∫ ‰ª£Á†ÅÂÆûÁé∞1234567891011121314151617181920212223242526272829303132/** * Ê°∂ÊéíÂ∫è * * @param sortArray */public static void BucketSort(int[] sortArray) &#123; //1.ËÆæÁΩÆÂõ∫ÂÆöÊï∞ÈáèÁöÑÁ©∫Ê°∂ int max = Integer.MIN_VALUE; int BucketSize = 5; int min = Integer.MAX_VALUE; for (int i = 0; i &lt; sortArray.length; i++) &#123; max = Math.max(max, sortArray[i]); min = Math.min(min, sortArray[i]); &#125; int BucketCount = (max - min) / BucketSize + 1; //2.ÊääÊï∞ÊçÆÊîæÂà∞ÂØπÂ∫îÊ°∂‰∏≠ ArrayList&lt;ArrayList&lt;Integer&gt;&gt; buckets = new ArrayList&lt;&gt;(BucketCount); for (int i = 0; i &lt; BucketCount; i++) &#123; buckets.add(new ArrayList&lt;Integer&gt;()); &#125; for (int i = 0; i &lt; sortArray.length; i++) &#123; int num = (sortArray[i] - min) / BucketSize; buckets.get(num).add(sortArray[i]); &#125; //3.ÊéíÂ∫è for (int i = 0; i &lt; buckets.size(); i++) &#123; //Áõ¥Êé•Áî®ÁöÑÊòØÈõÜÂêàËá™Â∏¶ÁöÑÊéíÂ∫èÔºåÂèØ‰ª•ÈÄâÊã©ÊèíÂÖ•ÊàñËÄÖÈÄíÂΩí‰ΩøÁî®Ê°∂ÊéíÂ∫è Collections.sort(buckets.get(i)); &#125; System.out.println(buckets.toString()); &#125; ÁÆóÊ≥ïÊïàÁéá Êó∂Èó¥Â§çÊùÇÂ∫¶ÔºöÊ°∂ÊéíÂ∫èÊúÄÂ•ΩÊÉÖÂÜµ‰∏ã‰ΩøÁî®Á∫øÊÄßÊó∂Èó¥ O(n)ÔºåÊ°∂ÊéíÂ∫èÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÔºåÂèñÂÜ≥‰∏éÂØπÂêÑ‰∏™Ê°∂‰∏≠Êï∞ÊçÆËøõË°åÊéíÂ∫èÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÔºåÂõ†‰∏∫ÂÖ∂ÂÆÉÈÉ®ÂàÜÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÈÉΩ‰∏∫ O(n)„ÄÇÂæàÊòæÁÑ∂ÔºåÊ°∂ÁöÑËåÉÂõ¥ÂàíÂàÜÁöÑË∂äÂ∞èÔºåÊ°∂Ë∂äÂ§öÔºåÂêÑ‰∏™Ê°∂‰πãÈó¥ÁöÑÊï∞ÊçÆË∂äÂ∞ëÔºåÊéíÂ∫èÊâÄÁî®ÁöÑÊó∂Èó¥‰πü‰ºöË∂äÂ∞ë„ÄÇÊâÄ‰ª•ÊúÄÂ∑ÆÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(n¬≤)ÔºåÂπ≥ÂùáÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(n+k)ÔºåÊúÄÂ•ΩÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(n)„ÄÇ Á©∫Èó¥Â§çÊùÇÂ∫¶ÔºöO(n+k) „ÄÇ Á®≥ÂÆöÊÄßÔºöÁ®≥ÂÆö„ÄÇ tips Ê°∂ÊúÄÂ•ΩÊòØÁî®ArrayListÔºåÈáåÈù¢ÁöÑÊï∞ÊçÆÊúÄÂ•Ω‰πüÊòØArrayListË£ÖËΩΩÔºåÂõ†‰∏∫ËøôÊ†∑Êñπ‰æøÂä®ÊÄÅÁöÑÊ∑ªÂä†Êï∞ÊçÆÂà∞Ê°∂‰∏≠„ÄÇ Ê°∂ÂÜÖÊéíÂ∫èÂèØ‰ª•Èöè‰æøÈÄâÊã©‰∏ÄÁßçÊéíÂ∫èÁÆóÊ≥ïÔºåËøôÈáåÈááÁî®ÁöÑÊòØjavaÈõÜÊàêÂ•ΩÁöÑÈõÜÂêàÊéíÂ∫èÁöÑÊñπÊ≥ï„ÄÇ Âü∫Êï∞ÊéíÂ∫èÂü∫Êú¨ÊÄùÊÉ≥Âü∫Êï∞ÊéíÂ∫èÔºàRadix SortÔºâÊòØÊåâÁÖß‰Ωé‰ΩçÂÖàÊéíÂ∫èÔºåÁÑ∂ÂêéÊî∂ÈõÜÔºõÂÜçÊåâÁÖßÈ´ò‰ΩçÊéíÂ∫èÔºåÁÑ∂ÂêéÂÜçÊî∂ÈõÜÔºõ‰æùÊ¨°Á±ªÊé®ÔºåÁõ¥Âà∞ÊúÄÈ´ò‰Ωç„ÄÇÊúâÊó∂ÂÄôÊúâ‰∫õÂ±ûÊÄßÊòØÊúâ‰ºòÂÖàÁ∫ßÈ°∫Â∫èÁöÑÔºåÂÖàÊåâ‰Ωé‰ºòÂÖàÁ∫ßÊéíÂ∫èÔºåÂÜçÊåâÈ´ò‰ºòÂÖàÁ∫ßÊéíÂ∫è„ÄÇÊúÄÂêéÁöÑÊ¨°Â∫èÂ∞±ÊòØÈ´ò‰ºòÂÖàÁ∫ßÈ´òÁöÑÂú®ÂâçÔºåÈ´ò‰ºòÂÖàÁ∫ßÁõ∏ÂêåÁöÑ‰Ωé‰ºòÂÖàÁ∫ßÈ´òÁöÑÂú®Ââç„ÄÇ ÁÆóÊ≥ïÊèèËø∞ ÂèñÂæóÊï∞ÁªÑ‰∏≠ÁöÑÊúÄÂ§ßÊï∞ÔºåÂπ∂ÂèñÂæó‰ΩçÊï∞Ôºõ arr ‰∏∫ÂéüÂßãÊï∞ÁªÑÔºå‰ªéÊúÄ‰Ωé‰ΩçÂºÄÂßãÂèñÊØè‰∏™‰ΩçÁªÑÊàê radix Êï∞ÁªÑÔºõ ÂØπ radix ËøõË°åËÆ°Êï∞ÊéíÂ∫èÔºàÂà©Áî®ËÆ°Êï∞ÊéíÂ∫èÈÄÇÁî®‰∫éÂ∞èËåÉÂõ¥Êï∞ÁöÑÁâπÁÇπÔºâÔºõ Âä®ÂõæÊºîÁ§∫ ‰ª£Á†ÅÂÆûÁé∞123456789101112131415161718192021222324252627282930313233343536373839/** Âü∫Êï∞ÊéíÂ∫è * ÂèØ‰ª•ÈááÁî®Ê°∂ÁöÑÊÄùÊÉ≥Ôºå‰πüÂèØ‰ª•ÈááÁî®ÈòüÂàóÁöÑÊÄùÊÉ≥ * * @param array */ public static void radixSort(int[] array) &#123; if (array == null || array.length &lt; 2) return; // 1.ÂÖàÁÆóÂá∫ÊúÄÂ§ßÊï∞ÁöÑ‰ΩçÊï∞Ôºõ int max = array[0]; for (int i = 1; i &lt; array.length; i++) &#123; max = Math.max(max, array[i]); &#125; int maxDigit = 0; while (max != 0) &#123; max /= 10; maxDigit++; &#125; int mod = 10, div = 1; //Ê°∂ÂèØ‰ª•Áî®‰∫åÁª¥Êï∞ÁªÑÂÆûÁé∞Ôºå‰πüÂèØ‰ª•Áî®ArrayListÂÆûÁé∞ÔºåÊé®ËçêÂàóË°®ÔºåÂõ†‰∏∫ÊòØÂä®ÊÄÅÁöÑ ArrayList&lt;ArrayList&lt;Integer&gt;&gt; bucketList = new ArrayList&lt;ArrayList&lt;Integer&gt;&gt;(); for (int i = 0; i &lt; 10; i++) &#123; bucketList.add(new ArrayList&lt;Integer&gt;()); &#125; for (int i = 0; i &lt; maxDigit; i++, mod *= 10, div *= 10) &#123; for (int j = 0; j &lt; array.length; j++) &#123; int num = (array[j] % mod) / div; bucketList.get(num).add(array[j]); &#125; int index = 0; for (int j = 0; j &lt; bucketList.size(); j++) &#123; for (int k = 0; k &lt; bucketList.get(j).size(); k++) &#123; array[index++] = bucketList.get(j).get(k); &#125; bucketList.get(j).clear(); &#125; &#125; System.out.println(Arrays.toString(array)); &#125; ÁÆóÊ≥ïÊïàÁéá Êó∂Èó¥Â§çÊùÇÂ∫¶ÔºöÂü∫Êï∞ÊéíÂ∫èÂü∫‰∫éÂàÜÂà´ÊéíÂ∫èÔºåÂàÜÂà´Êî∂ÈõÜÔºåÊâÄ‰ª•ÊòØÁ®≥ÂÆöÁöÑ„ÄÇ‰ΩÜÂü∫Êï∞ÊéíÂ∫èÁöÑÊÄßËÉΩÊØîÊ°∂ÊéíÂ∫èË¶ÅÁï•Â∑ÆÔºåÊØè‰∏ÄÊ¨°ÂÖ≥ÈîÆÂ≠óÁöÑÊ°∂ÂàÜÈÖçÈÉΩÈúÄË¶Å O(n)ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÔºåËÄå‰∏îÂàÜÈÖç‰πãÂêéÂæóÂà∞Êñ∞ÁöÑÂÖ≥ÈîÆÂ≠óÂ∫èÂàóÂèàÈúÄË¶Å O(n)ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶„ÄÇÂÅáÂ¶ÇÂæÖÊéíÊï∞ÊçÆÂèØ‰ª•ÂàÜ‰∏∫ d‰∏™ÂÖ≥ÈîÆÂ≠óÔºåÂàôÂü∫Êï∞ÊéíÂ∫èÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶Â∞ÜÊòØ O(d*2n) ÔºåÂΩìÁÑ∂ d Ë¶ÅËøúËøúÂ∞è‰∫é nÔºåÂõ†Ê≠§Âü∫Êú¨‰∏äËøòÊòØÁ∫øÊÄßÁ∫ßÂà´ÁöÑ„ÄÇÊúÄÂ•Ω„ÄÅÊúÄÂ∑Æ„ÄÅÂπ≥ÂùáÊó∂Èó¥Â§çÊùÇÂ∫¶ÈÉΩÊòØO(n*k)Á∫ßÂà´ÁöÑ„ÄÇ Á©∫Èó¥Â§çÊùÇÂ∫¶ÔºöO(n+k)ÔºåÂÖ∂‰∏≠k‰∏∫Ê°∂ÁöÑÊï∞Èáè„ÄÇ‰∏ÄËà¨Êù•ËØ¥ n&gt;&gt;kÔºåÂõ†Ê≠§È¢ùÂ§ñÁ©∫Èó¥ÈúÄË¶ÅÂ§ßÊ¶Ç n ‰∏™Â∑¶Âè≥„ÄÇ Á®≥ÂÆöÊÄßÔºöÁ®≥ÂÆö„ÄÇ tips Ê≥®ÊÑèÊØè‰∏™Ê°∂ÂÜÖÊï∞ÊçÆÊéíÂ∫èÂ•ΩÁÑ∂ÂêéËøîÂõûÁªôÂéüÊï∞ÁªÑÂêéÔºåËÆ∞ÂæóclearÔºõ ÁÇπÁùõ‰πãÁ¨îÊòØ Â∞ÜÂü∫Êï∞ÊéíÂ∫èËΩ¨Êç¢‰∏∫ËÆ°Êï∞ÊéíÂ∫èÔºåÂàÜÂà´ÂØπÂÖ∂‰∏™‰Ωç„ÄÅÂçÅ‰Ωç‚Ä¶ËøõË°åËÆ°Êï∞ÊéíÂ∫è„ÄÇ ÂèÇËÄÉÊñáÁåÆ ÂçÅÂ§ßÁªèÂÖ∏ÊéíÂ∫èÁÆóÊ≥ï ÂçÅÂ§ßÁªèÂÖ∏ÊéíÂ∫èÁÆóÊ≥ï‰πãJAVAÂÆûÁé∞ ËÆ°Êï∞ÊéíÂ∫èÂíåÊ°∂ÊéíÂ∫è‰πãJAVAÂÆûÁé∞ ÂçÅÂ§ßÁªèÂÖ∏ÊéíÂ∫èÁÆóÊ≥ïÂä®Áîª‰∏éËß£ÊûêÔºåÁúãÊàëÂ∞±Â§ü‰∫ÜÔºÅÔºàÈÖç‰ª£Á†ÅÂÆåÂÖ®ÁâàÔºâ Èù¢ËØïÂøÖÂ§áÔºöÂÖ´ÁßçÊéíÂ∫èÁÆóÊ≥ïÂéüÁêÜÂèäJavaÂÆûÁé∞]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>JAVA</tag>
        <tag>ÊéíÂ∫è</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[darkmode for mac]]></title>
    <url>%2F2019%2F10%2F24%2Fdarkmode%E6%95%99%E7%A8%8B.html</url>
    <content type="text"><![CDATA[MacÁ´ØdarkmodeËÆæÁΩÆMacÁ´ØÂ§ñËßÇÂÖ∑‰ΩìÊìç‰ΩúÊñπÂºè ÊâìÂºÄ Á≥ªÁªüÂÅèÂ•ΩËÆæÁΩÆ ÁÇπÂáª ÈÄöÁî® ‰øÆÊîπ Â§ñËßÇ ‰øÆÊîπÂÆå‰πãÂêéÔºåÈÉ®ÂàÜËΩØ‰ª∂‰ºöËá™Âä®ÈÄÇÈÖçÁ≥ªÁªüÁöÑÁéØÂ¢ÉËâ≤Ôºå‰æãÂ¶ÇchromeÔºåÁΩëÊòì‰∫ëÁ≠âÁ≠â„ÄÇ ‰øÆÊîπchromeÁΩëÈ°µÈ¢úËâ≤Âú®Ë∞∑Ê≠åÊèí‰ª∂ÂïÜÂ∫ó‰∏≠Êü•Êâæ‰∏ÄÊ¨æDark ReaderÁöÑÊèí‰ª∂ÔºåÂèØ‰ª•ÂÆåÁæéÈÖçÂêàÊöóÈªëÊ®°ÂºèÁöÑ‰ΩøÁî® Ëá™Âä®ÂàáÊç¢ÁôΩÂ§©ÈªëÂ§úÁöÑÊ®°Âºè‰∏ãËΩΩ‰∏ÄÊ¨æÂè´ÂÅöDarkNightÁöÑËΩØ‰ª∂ÔºåÂèØ‰ª•Ê†πÊçÆÂΩìÂú∞ÁöÑÊó•ËêΩÊó•Âá∫Êó∂Èó¥Ëá™Âä®ÂàáÊç¢Â±è‰øùÔºåÈÖçÂêàÊöóÈªëÊ®°ÂºèÁöÑ‰ΩøÁî®„ÄÇ]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>mac</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javaÂÆûÁé∞ÂçïÈìæË°®]]></title>
    <url>%2F2019%2F10%2F16%2Fjava%E5%AE%9E%E7%8E%B0%E5%8D%95%E9%93%BE%E8%A1%A8.html</url>
    <content type="text"><![CDATA[JavaÂÆûÁé∞ÂçïÂêëÈìæË°®Âü∫Êú¨ÂäüËÉΩÂÖàËØ¥‰∏Ä‰∏ãÔºåÂèÇËÄÉÂÄüÈâ¥ÁöÑÂçöÂÆ¢ÊúâÔºö JavaÂÆûÁé∞ÂçïÂêëÈìæË°®Âü∫Êú¨ÂäüËÉΩ JavaÂçïÈìæË°®ÂèçËΩ¨ ËØ¶ÁªÜËøáÁ®ã ‰ªéÈìæË°®‰∏≠Âà†Èô§ÈáçÂ§çÊï∞ÊçÆÔºà‰∏âÁßçÊñπÊ≥ï) Ë°•ÂÖÖÂÜôÁöÑÊ≤°‰∫∫ÂÆ∂Â•ΩÔºåËøôÈÉ®ÂàÜ‰∏ªË¶ÅÊòØÂØπÁ¨¨‰∏Ä‰∏™ÂçöÂÆ¢ÁöÑË°•ÂÖÖÔºåÂÖ∂ÂçïÂêëÈìæË°®‰∏≠ÁöÑÈìæË°®ÂèçËΩ¨Âíå‰ªéÈìæË°®‰∏≠Âà†Èô§ÈáçÂ§çÊï∞ÊçÆËß£ÈáäÁöÑ‰∏çÂ§üÊ∏ÖÊô∞ÔºåÂêéÈù¢‰∏§‰∏™ÂçöÂÆ¢ÊòØÊâ©Â±ïËøô‰∏§‰∏™Áü•ËØÜÁÇπÁöÑÔºåÂú®ÁúãËøô‰∏™Áü•ËØÜÁÇπÁöÑÂêåÊó∂ÔºåÂèëÁé∞Áî®Âà∞‰∫ÜÈÉ®ÂàÜHashTableÁöÑÁü•ËØÜÔºåËøáÊÆµÊó∂Èó¥ÈúÄË¶ÅÊääËøô‰∏™Áü•ËØÜÁÇπ‰πüÂÆåÂñÑ‰∏Ä‰∏ã„ÄÇ]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>ÈìæË°®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[transientÂÖ≥ÈîÆÂ≠ó]]></title>
    <url>%2F2019%2F10%2F12%2Ftransient%E5%85%B3%E9%94%AE%E5%AD%97.html</url>
    <content type="text"><![CDATA[transientÂÖ≥ÈîÆÂ≠ó‰ΩúÁî®(ËΩ¨ËΩΩ)‰ΩúÁî®Âèä‰ΩøÁî®ÊñπÊ≥ï‚Äã Êàë‰ª¨ÈÉΩÁü•ÈÅì‰∏Ä‰∏™ÂØπË±°Âè™Ë¶ÅÂÆûÁé∞‰∫ÜSerilizableÊé•Âè£ÔºåËøô‰∏™ÂØπË±°Â∞±ÂèØ‰ª•Ë¢´Â∫èÂàóÂåñÔºåjavaÁöÑËøôÁßçÂ∫èÂàóÂåñÊ®°Âºè‰∏∫ÂºÄÂèëËÄÖÊèê‰æõ‰∫ÜÂæàÂ§ö‰æøÂà©ÔºåÊàë‰ª¨ÂèØ‰ª•‰∏çÂøÖÂÖ≥Á≥ªÂÖ∑‰ΩìÂ∫èÂàóÂåñÁöÑËøáÁ®ãÔºåÂè™Ë¶ÅËøô‰∏™Á±ªÂÆûÁé∞‰∫ÜSerilizableÊé•Âè£ÔºåËøô‰∏™Á±ªÁöÑÊâÄÊúâÂ±ûÊÄßÂíåÊñπÊ≥ïÈÉΩ‰ºöËá™Âä®Â∫èÂàóÂåñ„ÄÇ ‚Äã ÁÑ∂ËÄåÂú®ÂÆûÈôÖÂºÄÂèëËøáÁ®ã‰∏≠ÔºåÊàë‰ª¨Â∏∏Â∏∏‰ºöÈÅáÂà∞ËøôÊ†∑ÁöÑÈóÆÈ¢òÔºåËøô‰∏™Á±ªÁöÑÊúâ‰∫õÂ±ûÊÄßÈúÄË¶ÅÂ∫èÂàóÂåñÔºåËÄåÂÖ∂‰ªñÂ±ûÊÄß‰∏çÈúÄË¶ÅË¢´Â∫èÂàóÂåñÔºåÊâì‰∏™ÊØîÊñπÔºåÂ¶ÇÊûú‰∏Ä‰∏™Áî®Êà∑Êúâ‰∏Ä‰∫õÊïèÊÑü‰ø°ÊÅØÔºàÂ¶ÇÂØÜÁ†ÅÔºåÈì∂Ë°åÂç°Âè∑Á≠âÔºâÔºå‰∏∫‰∫ÜÂÆâÂÖ®Ëµ∑ËßÅÔºå‰∏çÂ∏åÊúõÂú®ÁΩëÁªúÊìç‰ΩúÔºà‰∏ªË¶ÅÊ∂âÂèäÂà∞Â∫èÂàóÂåñÊìç‰ΩúÔºåÊú¨Âú∞Â∫èÂàóÂåñÁºìÂ≠ò‰πüÈÄÇÁî®Ôºâ‰∏≠Ë¢´‰º†ËæìÔºåËøô‰∫õ‰ø°ÊÅØÂØπÂ∫îÁöÑÂèòÈáèÂ∞±ÂèØ‰ª•Âä†‰∏ätransientÂÖ≥ÈîÆÂ≠ó„ÄÇÊç¢Âè•ËØùËØ¥ÔºåËøô‰∏™Â≠óÊÆµÁöÑÁîüÂëΩÂë®Êúü‰ªÖÂ≠ò‰∫éË∞ÉÁî®ËÄÖÁöÑÂÜÖÂ≠ò‰∏≠ËÄå‰∏ç‰ºöÂÜôÂà∞Á£ÅÁõòÈáåÊåÅ‰πÖÂåñ„ÄÇ ‚Äã ÊÄª‰πãÔºåjava ÁöÑtransientÂÖ≥ÈîÆÂ≠ó‰∏∫Êàë‰ª¨Êèê‰æõ‰∫Ü‰æøÂà©Ôºå‰Ω†Âè™ÈúÄË¶ÅÂÆûÁé∞SerilizableÊé•Âè£ÔºåÂ∞Ü‰∏çÈúÄË¶ÅÂ∫èÂàóÂåñÁöÑÂ±ûÊÄßÂâçÊ∑ªÂä†ÂÖ≥ÈîÆÂ≠ótransientÔºåÂ∫èÂàóÂåñÂØπË±°ÁöÑÊó∂ÂÄôÔºåËøô‰∏™Â±ûÊÄßÂ∞±‰∏ç‰ºöÂ∫èÂàóÂåñÂà∞ÊåáÂÆöÁöÑÁõÆÁöÑÂú∞‰∏≠„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081import java.io.FileInputStream;import java.io.FileNotFoundException;import java.io.FileOutputStream;import java.io.IOException;import java.io.ObjectInputStream;import java.io.ObjectOutputStream;import java.io.Serializable;/** * @description ‰ΩøÁî®transientÂÖ≥ÈîÆÂ≠ó‰∏çÂ∫èÂàóÂåñÊüê‰∏™ÂèòÈáè * Ê≥®ÊÑèËØªÂèñÁöÑÊó∂ÂÄôÔºåËØªÂèñÊï∞ÊçÆÁöÑÈ°∫Â∫è‰∏ÄÂÆöË¶ÅÂíåÂ≠òÊîæÊï∞ÊçÆÁöÑÈ°∫Â∫è‰øùÊåÅ‰∏ÄËá¥ * * @author Alexia * @date 2013-10-15 */public class TransientTest &#123; public static void main(String[] args) &#123; User user = new User(); user.setUsername("Alexia"); user.setPasswd("123456"); System.out.println("read before Serializable: "); System.out.println("username: " + user.getUsername()); System.err.println("password: " + user.getPasswd()); try &#123; ObjectOutputStream os = new ObjectOutputStream( new FileOutputStream("C:/user.txt")); os.writeObject(user); // Â∞ÜUserÂØπË±°ÂÜôËøõÊñá‰ª∂ os.flush(); os.close(); &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; try &#123; ObjectInputStream is = new ObjectInputStream(new FileInputStream( "C:/user.txt")); user = (User) is.readObject(); // ‰ªéÊµÅ‰∏≠ËØªÂèñUserÁöÑÊï∞ÊçÆ is.close(); System.out.println("\nread after Serializable: "); System.out.println("username: " + user.getUsername()); System.err.println("password: " + user.getPasswd()); &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; &#125;&#125;class User implements Serializable &#123; private static final long serialVersionUID = 8294180014912103005L; private String username; private transient String passwd; public String getUsername() &#123; return username; &#125; public void setUsername(String username) &#123; this.username = username; &#125; public String getPasswd() &#123; return passwd; &#125; public void setPasswd(String passwd) &#123; this.passwd = passwd; &#125;&#125; 1234567read before Serializable: username: Alexiapassword: 123456read after Serializable: username: Alexiapassword: null ÂØÜÁ†ÅÂ≠óÊÆµ‰∏∫nullÔºåËØ¥ÊòéÂèçÂ∫èÂàóÂåñÊó∂Ê†πÊú¨Ê≤°Êúâ‰ªéÊñá‰ª∂‰∏≠Ëé∑ÂèñÂà∞‰ø°ÊÅØ„ÄÇ transient‰ΩøÁî®Â∞èÁªì ‰∏ÄÊó¶ÂèòÈáèË¢´transient‰øÆÈ•∞ÔºåÂèòÈáèÂ∞Ü‰∏çÂÜçÊòØÂØπË±°ÊåÅ‰πÖÂåñÁöÑ‰∏ÄÈÉ®ÂàÜÔºåËØ•ÂèòÈáèÂÜÖÂÆπÂú®Â∫èÂàóÂåñÂêéÊó†Ê≥ïËé∑ÂæóËÆøÈóÆ„ÄÇ transientÂÖ≥ÈîÆÂ≠óÂè™ËÉΩ‰øÆÈ•∞ÂèòÈáèÔºåËÄå‰∏çËÉΩ‰øÆÈ•∞ÊñπÊ≥ïÂíåÁ±ª„ÄÇÊ≥®ÊÑèÔºåÊú¨Âú∞ÂèòÈáèÊòØ‰∏çËÉΩË¢´transientÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞ÁöÑ„ÄÇÂèòÈáèÂ¶ÇÊûúÊòØÁî®Êà∑Ëá™ÂÆö‰πâÁ±ªÂèòÈáèÔºåÂàôËØ•Á±ªÈúÄË¶ÅÂÆûÁé∞SerializableÊé•Âè£„ÄÇ Ë¢´transientÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞ÁöÑÂèòÈáè‰∏çÂÜçËÉΩË¢´Â∫èÂàóÂåñÔºå‰∏Ä‰∏™ÈùôÊÄÅÂèòÈáè‰∏çÁÆ°ÊòØÂê¶Ë¢´transient‰øÆÈ•∞ÔºåÂùá‰∏çËÉΩË¢´Â∫èÂàóÂåñ„ÄÇ Á¨¨‰∏âÁÇπÂèØËÉΩÊúâ‰∫õ‰∫∫ÂæàËø∑ÊÉëÔºåÂõ†‰∏∫ÂèëÁé∞Âú®UserÁ±ª‰∏≠ÁöÑusernameÂ≠óÊÆµÂâçÂä†‰∏ästaticÂÖ≥ÈîÆÂ≠óÂêéÔºåÁ®ãÂ∫èËøêË°åÁªìÊûú‰æùÁÑ∂‰∏çÂèòÔºåÂç≥staticÁ±ªÂûãÁöÑusername‰πüËØªÂá∫Êù•‰∏∫‚ÄúAlexia‚Äù‰∫ÜÔºåËøô‰∏ç‰∏éÁ¨¨‰∏âÁÇπËØ¥ÁöÑÁüõÁõæÂêóÔºüÂÆûÈôÖ‰∏äÊòØËøôÊ†∑ÁöÑÔºöÁ¨¨‰∏âÁÇπÁ°ÆÂÆûÊ≤°ÈîôÔºà‰∏Ä‰∏™ÈùôÊÄÅÂèòÈáè‰∏çÁÆ°ÊòØÂê¶Ë¢´transient‰øÆÈ•∞ÔºåÂùá‰∏çËÉΩË¢´Â∫èÂàóÂåñÔºâÔºåÂèçÂ∫èÂàóÂåñÂêéÁ±ª‰∏≠staticÂûãÂèòÈáèusernameÁöÑÂÄº‰∏∫ÂΩìÂâçJVM‰∏≠ÂØπÂ∫îstaticÂèòÈáèÁöÑÂÄºÔºåËøô‰∏™ÂÄºÊòØJVM‰∏≠ÁöÑ‰∏çÊòØÂèçÂ∫èÂàóÂåñÂæóÂá∫ÁöÑÔºå‰∏çÁõ∏‰ø°ÔºüÂ•ΩÂêßÔºå‰∏ãÈù¢ÊàëÊù•ËØÅÊòéÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384import java.io.FileInputStream;import java.io.FileNotFoundException;import java.io.FileOutputStream;import java.io.IOException;import java.io.ObjectInputStream;import java.io.ObjectOutputStream;import java.io.Serializable;/** * @description ‰ΩøÁî®transientÂÖ≥ÈîÆÂ≠ó‰∏çÂ∫èÂàóÂåñÊüê‰∏™ÂèòÈáè * Ê≥®ÊÑèËØªÂèñÁöÑÊó∂ÂÄôÔºåËØªÂèñÊï∞ÊçÆÁöÑÈ°∫Â∫è‰∏ÄÂÆöË¶ÅÂíåÂ≠òÊîæÊï∞ÊçÆÁöÑÈ°∫Â∫è‰øùÊåÅ‰∏ÄËá¥ * * @author Alexia * @date 2013-10-15 */public class TransientTest &#123; public static void main(String[] args) &#123; User user = new User(); user.setUsername("Alexia"); user.setPasswd("123456"); System.out.println("read before Serializable: "); System.out.println("username: " + user.getUsername()); System.err.println("password: " + user.getPasswd()); try &#123; ObjectOutputStream os = new ObjectOutputStream( new FileOutputStream("C:/user.txt")); os.writeObject(user); // Â∞ÜUserÂØπË±°ÂÜôËøõÊñá‰ª∂ os.flush(); os.close(); &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; try &#123; // Âú®ÂèçÂ∫èÂàóÂåñ‰πãÂâçÊîπÂèòusernameÁöÑÂÄº User.username = "jmwang"; ObjectInputStream is = new ObjectInputStream(new FileInputStream( "C:/user.txt")); user = (User) is.readObject(); // ‰ªéÊµÅ‰∏≠ËØªÂèñUserÁöÑÊï∞ÊçÆ is.close(); System.out.println("\nread after Serializable: "); System.out.println("username: " + user.getUsername()); System.err.println("password: " + user.getPasswd()); &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; &#125;&#125;class User implements Serializable &#123; private static final long serialVersionUID = 8294180014912103005L; public static String username; private transient String passwd; public String getUsername() &#123; return username; &#125; public void setUsername(String username) &#123; this.username = username; &#125; public String getPasswd() &#123; return passwd; &#125; public void setPasswd(String passwd) &#123; this.passwd = passwd; &#125;&#125; 1234567read before Serializable: username: Alexiapassword: 123456read after Serializable: username: jmwangpassword: null ËøôËØ¥ÊòéÂèçÂ∫èÂàóÂåñÂêéÁ±ª‰∏≠staticÂûãÂèòÈáèusernameÁöÑÂÄº‰∏∫ÂΩìÂâçJVM‰∏≠ÂØπÂ∫îstaticÂèòÈáèÁöÑÂÄºÔºå‰∏∫‰øÆÊîπÂêéjmwangÔºåËÄå‰∏çÊòØÂ∫èÂàóÂåñÊó∂ÁöÑÂÄºAlexia„ÄÇ 3. transient‰ΩøÁî®ÁªÜËäÇ‚Äî‚ÄîË¢´transientÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞ÁöÑÂèòÈáèÁúüÁöÑ‰∏çËÉΩË¢´Â∫èÂàóÂåñÂêóÔºü123456789101112131415161718192021222324252627282930313233343536373839404142434445464748import java.io.Externalizable;import java.io.File;import java.io.FileInputStream;import java.io.FileOutputStream;import java.io.IOException;import java.io.ObjectInput;import java.io.ObjectInputStream;import java.io.ObjectOutput;import java.io.ObjectOutputStream;/** * @descripiton ExternalizableÊé•Âè£ÁöÑ‰ΩøÁî® * * @author Alexia * @date 2013-10-15 * */public class ExternalizableTest implements Externalizable &#123; private transient String content = "ÊòØÁöÑÔºåÊàëÂ∞Ü‰ºöË¢´Â∫èÂàóÂåñÔºå‰∏çÁÆ°ÊàëÊòØÂê¶Ë¢´transientÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞"; @Override public void writeExternal(ObjectOutput out) throws IOException &#123; out.writeObject(content); &#125; @Override public void readExternal(ObjectInput in) throws IOException, ClassNotFoundException &#123; content = (String) in.readObject(); &#125; public static void main(String[] args) throws Exception &#123; ExternalizableTest et = new ExternalizableTest(); ObjectOutput out = new ObjectOutputStream(new FileOutputStream( new File("test"))); out.writeObject(et); ObjectInput in = new ObjectInputStream(new FileInputStream(new File( "test"))); et = (ExternalizableTest) in.readObject(); System.out.println(et.content); out.close(); in.close(); &#125;&#125; contentÂèòÈáè‰ºöË¢´Â∫èÂàóÂåñÂêóÔºü Â•ΩÂêßÔºåÊàëÊääÁ≠îÊ°àÈÉΩËæìÂá∫Êù•‰∫ÜÔºåÊòØÁöÑÔºåËøêË°åÁªìÊûúÂ∞±ÊòØÔºöÊòØÁöÑÔºåÊàëÂ∞Ü‰ºöË¢´Â∫èÂàóÂåñÔºå‰∏çÁÆ°ÊàëÊòØÂê¶Ë¢´transientÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞ ËøôÊòØ‰∏∫‰ªÄ‰πàÂë¢Ôºå‰∏çÊòØËØ¥Á±ªÁöÑÂèòÈáèË¢´transientÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞‰ª•ÂêéÂ∞Ü‰∏çËÉΩÂ∫èÂàóÂåñ‰∫ÜÂêóÔºü ‚Äã Êàë‰ª¨Áü•ÈÅìÂú®Java‰∏≠ÔºåÂØπË±°ÁöÑÂ∫èÂàóÂåñÂèØ‰ª•ÈÄöËøáÂÆûÁé∞‰∏§ÁßçÊé•Âè£Êù•ÂÆûÁé∞ÔºåËã•ÂÆûÁé∞ÁöÑÊòØSerializableÊé•Âè£ÔºåÂàôÊâÄÊúâÁöÑÂ∫èÂàóÂåñÂ∞Ü‰ºöËá™Âä®ËøõË°åÔºåËã•ÂÆûÁé∞ÁöÑÊòØExternalizableÊé•Âè£ÔºåÂàôÊ≤°Êúâ‰ªª‰Ωï‰∏úË•øÂèØ‰ª•Ëá™Âä®Â∫èÂàóÂåñÔºåÈúÄË¶ÅÂú®writeExternalÊñπÊ≥ï‰∏≠ËøõË°åÊâãÂ∑•ÊåáÂÆöÊâÄË¶ÅÂ∫èÂàóÂåñÁöÑÂèòÈáèÔºåËøô‰∏éÊòØÂê¶Ë¢´transient‰øÆÈ•∞Êó†ÂÖ≥„ÄÇÂõ†Ê≠§Á¨¨‰∫å‰∏™‰æãÂ≠êËæìÂá∫ÁöÑÊòØÂèòÈáècontentÂàùÂßãÂåñÁöÑÂÜÖÂÆπÔºåËÄå‰∏çÊòØnull„ÄÇ ËΩ¨ËΩΩ‰∫éÔºöJava transientÂÖ≥ÈîÆÂ≠ó‰ΩøÁî®Â∞èËÆ∞]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>transient</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetcodeÂ≠¶‰π†]]></title>
    <url>%2F2019%2F10%2F12%2Fleetcode%E7%83%AD%E9%A2%98100.html</url>
    <content type="text"><![CDATA[Á¨¨1È¢òÔºö‰∏§Êï∞‰πãÂíåÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Êï¥Êï∞Êï∞ÁªÑ nums Âíå‰∏Ä‰∏™ÁõÆÊ†áÂÄº targetÔºåËØ∑‰Ω†Âú®ËØ•Êï∞ÁªÑ‰∏≠ÊâæÂá∫Âíå‰∏∫ÁõÆÊ†áÂÄºÁöÑÈÇ£ ‰∏§‰∏™ Êï¥Êï∞ÔºåÂπ∂ËøîÂõû‰ªñ‰ª¨ÁöÑÊï∞ÁªÑ‰∏ãÊ†á„ÄÇ‰Ω†ÂèØ‰ª•ÂÅáËÆæÊØèÁßçËæìÂÖ•Âè™‰ºöÂØπÂ∫î‰∏Ä‰∏™Á≠îÊ°à„ÄÇ‰ΩÜÊòØÔºå‰Ω†‰∏çËÉΩÈáçÂ§çÂà©Áî®Ëøô‰∏™Êï∞ÁªÑ‰∏≠ÂêåÊ†∑ÁöÑÂÖÉÁ¥†„ÄÇ Á§∫‰æãÁªôÂÆö nums = [2, 7, 11, 15], target = 9 Âõ†‰∏∫ nums[0] + nums[1] = 2 + 7 = 9ÊâÄ‰ª•ËøîÂõû [0, 1] ÊàëÁöÑÊÄùË∑Ø ÂÖàÊéíÂ∫è ÊéíÈô§ÊØîtargetÂ§ßÁöÑÊï∞ ‰ªéÊúÄÈù†ËøëtargetÁöÑÊï∞ÂºÄÂßãÈÅçÂéÜ ËÆ∞ÂΩïÊâæÂà∞ÁöÑÊï∞ÁöÑ‰∏ãÊ†áËæìÂá∫Âç≥ÂèØ ÊàëÁöÑ‰ª£Á†ÅÔºàÊú™ACÔºâ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566import java.util.Arrays;public class twoNumbersSum &#123; public int[] twoSum(int[] nums, int target) &#123; //ÂÖàÊéíÂ∫è int[] nums_copy = Arrays.copyOf(nums,nums.length); Arrays.sort(nums_copy); int i; //ÊéíÈô§ÊØîtargetÂ§ßÁöÑÊï∞ //‰ªéÊúÄÈù†ËøëtargetÁöÑÊï∞ÂºÄÂßãÈÅçÂéÜ //ËÆ∞ÂΩïÊâæÂà∞ÁöÑÊï∞ÁöÑ‰∏ãÊ†áÔºåËæìÂá∫Âç≥ÂèØ int t; int k; for(i = nums_copy.length-1; i &gt; 0 ;i--)&#123; if(nums_copy[i] &lt;= target)&#123; if(Arrays.binarySearch(nums_copy,0,i,target-nums_copy[i]) &gt;= 0)&#123; if(nums_copy[i] * 2 == target) &#123; int[] twobro = new int[2]; int d=0; for(int h=0;h&lt;nums.length;h++)&#123; if(nums[h] == nums_copy[i])&#123; twobro[d] = h; d++; &#125; &#125; return twobro; &#125; else&#123; for(int m=0;m &lt; nums.length;m++)&#123; if(nums[m] == nums_copy[i])&#123; t = m; &#125; if(nums[m] == (target-nums_copy[i]))&#123; k = m; &#125; &#125; k = Arrays.binarySearch(nums,target-nums_copy[i]); t = Arrays.binarySearch(nums,nums_copy[i]); &#125; return new int[]&#123;k,t&#125;; &#125; &#125; &#125; return null; &#125; public static void main(String[] args) &#123; twoNumbersSum tws = new twoNumbersSum(); int[] receive = new int[20]; receive = tws.twoSum(new int[]&#123;0,4,3,0&#125;,0); if(receive == null) &#123; System.out.println("‰∏çÂ≠òÂú®"); &#125; else&#123; System.out.println(receive[0] + "\n" + receive[1]); &#125; &#125;&#125; Ê≠£Á°ÆÊÄùË∑ØÂà©Áî® HashMap ËÆ∞ÂΩïÊï∞ÁªÑÂÖÉÁ¥†ÂÄºÂíåÂØπÂ∫îÁöÑ‰∏ãÊ†áÔºåÂØπ‰∫é‰∏Ä‰∏™Êï∞ nums[i]ÔºåÂà§Êñ≠ target - nums[i] ÊòØÂê¶Â≠òÂú® HashMap ‰∏≠ÔºåÂ≠òÂú®ÁöÑËØùÔºåËøîÂõû‰∏§‰∏™‰∏ãÊ†áÁªÑÊàêÁöÑÊï∞ÁªÑ„ÄÇÊ≥®ÊÑèÔºåÂ∑≤Â≠òÂú®ÁöÑÂÖÉÁ¥†‰∏ãÊ†áÂú®ÂâçÔºåÂΩìÂâçÂÖÉÁ¥†‰∏ãÊ†áÂú®Âêé„ÄÇ Ê≠£Á°Æ‰ª£Á†Å123456789101112class Solution &#123; public int[] twoSum(int[] nums, int target) &#123; Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(); for (int i = 0; i &lt; nums.length; ++i) &#123; if (map.containsKey(target - nums[i])) &#123; return new int[] &#123;map.get(target - nums[i]), i&#125;; &#125; map.put(nums[i], i); &#125; return null; &#125;&#125; Ê∂âÂèäÁöÑÁü•ËØÜÁÇπÊï∞ÁªÑÂÜÖÂÆπ ‰∏ÄÁª¥Âíå‰∫åÁª¥Êï∞ÁªÑ‰∏ÄÁª¥Êï∞ÁªÑÔºöint[] a = new int[4];‰∫åÁª¥Êï∞ÁªÑÔºö 1234//Á¨¨‰∏ÄË°å4‰∏™ÂÖÉÁ¥†ÔºåÁ¨¨‰∫åË°å5‰∏™ÂÖÉÁ¥†int[][] a = new int[2][];a[0] = new int[4];a[1] = new int[5]; ArraysÁ±ªjava.util.ArraysÁ±ªËÉΩÂ§üÊñπ‰æøÁöÑÊìç‰ΩúÊï∞ÁªÑÔºåÊèê‰æõÁöÑÊâÄÊúâÊñπÊ≥ïÈÉΩÊòØÈùôÊÄÅÁöÑÔºö 12345678910import java.util.Arrays;public int[] twoSum(int[] nums, int target) &#123; int[] nums_copy = Arrays.copyOf(nums,nums.length); Arrays.fill(nums,2); Integer index = Arrays.binarySearch(nums,target); Arrays.equals(nums,nums_copy); Arrays.sort(nums); return new int[]&#123;0,0,0&#125;;&#125; ÊÄªÂÖ±5‰∏™ÊñπÊ≥ïÔºåÂàÜÂà´ÊòØcopyOf,fill,binarySearch,equals,sort„ÄÇÁ¨¨‰∏Ä‰∏™Áî®Êù•Â§çÂà∂ÂéüÂßãÊï∞ÁªÑÔºåÊñπ‰æøÂêéÁª≠ÊéíÂ∫èÁöÑÊìç‰ΩúÔºåfillÊòØÁî®Êù•ÂàùÂßãÂåñÊï∞ÁªÑÊØîËæÉÊñπ‰æøÔºåÂèØ‰ª•Â∞ÜÊâÄÊúâÊï∞ÁªÑ‰∏≠ÁöÑÂÄºÂÖ®ÈÉ®ÂàùÂßãÂåñ‰∏∫Âêå‰∏Ä‰∏™ÂÄºÔºåbinarySearchÊòØ‰∫åÂàÜÊü•ÊâæÔºåËøîÂõûÁöÑÊòØËØ•Êï∞ÁöÑÁ¥¢ÂºïÂÄºÔºåsortÊòØÁî®Êù•ÊéíÂ∫èÁöÑ„ÄÇ binarySearch()Ëá™Â∑±ÂÜô‰ª£Á†ÅÁöÑÊó∂ÂÄôÁî®Âà∞‰∫ÜËøô‰∏™ÊñπÊ≥ïÔºåÈ¶ñÂÖàËØ•ÊñπÊ≥ïÈúÄË¶ÅÊï∞ÁªÑÊéíÂ•ΩÂ∫èÊâçËÉΩË∞ÉÁî®ÔºåÂÖ∂Ê¨°ÂæàÁâπÂà´ÁöÑÊòØÔºåÂ¶ÇÊûúË¶ÅÊâæÁöÑÂÄºÂú®Êï∞ÁªÑ‰∏≠ÔºåÂàô‰ºöËøîÂõûÊêúÁ¥¢ÈîÆÁöÑÁ¥¢ÂºïÔºå‰ΩÜÊòØÔºåÊ≥®ÊÑèÔºöÂÄº‰∏çÂ≠òÂú®‰∫éÊï∞ÁªÑÁöÑËØù‰ºöËøîÂõû-1ÊàñËÄÖÊòØÁõÆÊ†áÂÄºÈúÄË¶ÅÊèíÂÖ•ÁöÑ‰ΩçÁΩÆÔºå‰ªé1ÂºÄÂßãÊï∞Ëµ∑Ôºå‰∏çÊòØ0Âì¶ÔºÅÔºÅÔºÅËøô‰∏™ÂÜôÁöÑË¥ºÂ•ΩÂìàÂìàÂìàÂìàÔºöÊï∞ÁªÑÊü•ËØ¢ArraysÁ±ªÁöÑbinarySearch()ÊñπÊ≥ïËØ¶Ëß£ map.containsKeyÂíåmap.get()Âå∫Âà´hashmapÂà§Êñ≠ÊòØÂê¶Â≠òÂú®keyÊó∂Ôºå‰ΩøÁî®get(key)==nullÂà§Êñ≠ËøòÊòØcontainsKeyÔºükeyÂÄºÂèØËÉΩ‰∏∫nullÔºåËã•Ê≠§Êó∂MapÈõÜÂêàÂÄºÂØπË±°‰∏∫nullÔºåÂπ∂‰∏îÊ≤°Êúâ‰∏™Êï∞ÈôêÂà∂ÔºåÊâÄ‰ª•ÂΩìget()ÊñπÊ≥ïÁöÑËøîÂõûÂÄº‰∏∫nullÊó∂ÔºåÂèØËÉΩÊúâ‰∏§ÁßçÊÉÖÂÜµÔºå‰∏ÄÁßçÊòØÂú®ÈõÜÂêà‰∏≠Ê≤°ÊúâËØ•ÈîÆÂØπË±°ÔºåÂè¶‰∏ÄÁßçÊòØËØ•ÈîÆÂØπË±°Ê≤°ÊúâÊò†Â∞Ñ‰ªª‰ΩïÂÄºÂØπË±°ÔºåÂç≥ÂÄºÂØπË±°‰∏∫null„ÄÇÂõ†Ê≠§ÔºåÂú®MapÈõÜÂêà‰∏≠‰∏çÂ∫îËØ•Âà©Áî®get(Object key)ÊñπÊ≥ïÊù•Âà§Êñ≠ÊòØÂê¶Â≠òÂú®Êüê‰∏™ÈîÆÔºåËÄåÂ∫îËØ•Âà©Áî®containsKey()ÊñπÊ≥ïÊù•Âà§Êñ≠,containsKeyÊñπÊ≥ïÁî®Êù•Âà§Êñ≠MapÈõÜÂêàÂØπË±°‰∏≠ÊòØÂê¶ÂåÖÂê´ÊåáÂÆöÁöÑÈîÆÂêç„ÄÇ‰∏ÄÂè•ËØùÊ¶ÇÊã¨:get()Â¶ÇÊûúÂæóÂà∞nullÔºåÂèØËÉΩËøôÊòØÈîÆÂØπÂ∫îÁöÑÂÄºÂØπË±°‰∏∫null‰πüÂèØËÉΩÊòØ‰∏çÂ≠òÂú®ËØ•ÈîÆÔºåËÄåcontainsKeyÂàôÊòØfalseÊàñtrueÔºå‰∏çÂ≠òÂú®ËøôÁßçÁñëÈóÆ„ÄÇ Êâ©ÂÖÖ:map.containsKey()„ÄÅmap.containsValue()„ÄÅmap.get() getÁöÑËøáÁ®ãÊòØÂÖàËÆ°ÁÆóhashÔºåÁÑ∂ÂêéÈÄöËøáhash‰∏étable.lengthÂèñÊë∏ËÆ°ÁÆóindexÂÄºÔºåÁÑ∂ÂêéÈÅçÂéÜtable[index]‰∏äÁöÑÈìæË°®ÔºåÁõ¥Âà∞ÊâæÂà∞keyÔºåÁÑ∂ÂêéËøîÂõûÔºõ 1234567891011121314public V get(Object key) &#123; if (key == null) return getForNullKey();//Â§ÑÁêÜnullÂÄº int hash = hash(key.hashCode());//ËÆ°ÁÆóhash //Âú®table[index]ÈÅçÂéÜÊü•ÊâækeyÔºåËã•ÊâæÂà∞ÂàôËøîÂõûvalueÔºåÊâæ‰∏çÂà∞ËøîÂõûnull for (Entry&lt;K,V&gt; e = table[indexFor(hash, table.length)]; e != null; e = e.next) &#123; Object k; if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) return e.value; &#125; return null; &#125; containsKeyÊñπÊ≥ï‰πüÊòØÂÖàËÆ°ÁÆóhashÔºåÁÑ∂Âêé‰ΩøÁî®hashÂíåtable.lengthÂèñÊë∏ÂæóÂà∞indexÂÄºÔºåÈÅçÂéÜtable[index]ÂÖÉÁ¥†Êü•ÊâæÊòØÂê¶ÂåÖÂê´keyÁõ∏ÂêåÁöÑÂÄºÔºõ 123456789101112131415public boolean containsKey(Object key) &#123; return getEntry(key) != null; &#125;final Entry&lt;K,V&gt; getEntry(Object key) &#123; int hash = (key == null) ? 0 : hash(key.hashCode()); for (Entry&lt;K,V&gt; e = table[indexFor(hash, table.length)]; e != null; e = e.next) &#123; Object k; if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) return e; &#125; return null; &#125; Áúã‰ª£Á†ÅËÉΩÁúãÂà∞Âå∫Âà´Ôºå‰∏Ä‰∏™ÊòØËøîÂõûkeyÂØπÂ∫îÁöÑvalueÂÄºÔºå‰∏Ä‰∏™ÊòØËøîÂõûÊòØÂê¶ÊúâËØ•keyÁöÑbooleanÂèòÈáè„ÄÇ containsValueÊñπÊ≥ïÂ∞±ÊØîËæÉÁ≤óÊö¥‰∫ÜÔºåÂ∞±ÊòØÁõ¥Êé•ÈÅçÂéÜÊâÄÊúâÂÖÉÁ¥†Áõ¥Âà∞ÊâæÂà∞valueÔºåÁî±Ê≠§ÂèØËßÅHashMapÁöÑcontainsValueÊñπÊ≥ïÊú¨Ë¥®‰∏äÂíåÊôÆÈÄöÊï∞ÁªÑÂíålistÁöÑcontainsÊñπÊ≥ïÊ≤°‰ªÄ‰πàÂå∫Âà´Ôºå‰Ω†Âà´ÊåáÊúõÂÆÉ‰ºöÂÉècontainsKeyÈÇ£‰πàÈ´òÊïà„ÄÇ 1234567891011public boolean containsValue(Object value) &#123; if (value == null) return containsNullValue(); Entry[] tab = table; for (int i = 0; i &lt; tab.length ; i++) for (Entry e = tab[i] ; e != null ; e = e.next) if (value.equals(e.value)) return true; return false; &#125; Áü•ËØÜÁº∫Èô∑ ÂéãÊ†πÊ≤°ÊÉ≥Âà∞Áî®MapÂéªÂÅö Ëá™Â∑±Âè™ËÄÉËôëÂà∞‰∫ÜÂÖ®ÊòØÊ≠£Êï∞ÁöÑÊÉÖÂÜµÔºåÊâÄ‰ª•Áî®‰∫ÜÊéíÂ∫èÂíåË∑ü0Âà§Êñ≠ÔºåÂ¶ÇÊûúÂê´ÊúâË¥üÊï∞ÁöÑËØùÂ∞±ÂÅö‰∏ç‰∫Ü‰∫Ü‚Ä¶‚Ä¶ Êî∂Ëé∑Âú®ÈÅáÂà∞Êï∞ÁªÑÈóÆÈ¢òÊó∂ÔºåÂèØ‰ª•ËÄÉËôëÁî®mapÔºåÂõ†‰∏∫Á¥¢ÂºïÂíåÊï∞ÂÄºÂ∞±ÊòØ‰∏Ä‰∏™Â§©ÁîüÁöÑmapÈõÜÂêàÔºåÂ¶ÇÊûúÊàëÁü•ÈÅìÊï∞ÂÄºÔºåÊàëÂ∞±ÂèØ‰ª•ÈÄöËøámapÊâæÂà∞ÂÖ∂Á¥¢ÂºïÔºåÊú¨È¢òÊÄùË∑ØÂ∞±ÊòØËøôÊ†∑ÔºåÂΩìÂ∑≤Áü•‰∏Ä‰∏™ÂÄºÊòØÊàëÊâÄÈúÄË¶ÅÁöÑÔºåÁõ¥Êé•‰ªémap‰∏≠ÊãøÂá∫Â∞±Ë°å„ÄÇ ÊèíÂÖ•Áü•ËØÜÁÇπÊó¢ÁÑ∂Â§ç‰π†Âà∞‰∫ÜmapÔºåÈÇ£Â∞±Áªôlist„ÄÅsetÂíåmapÊù•‰∏Ä‰∏™ÂÖ®ÈÉ®ÁöÑÂ§ç‰π†ÂêßÔºÅÔºÅÔºÅÂòøÂòøÂºÄÂßãÂêßÔºÅÔºÅÔºÅÂÖàÊù•‰∏ä‰∏™ÈìæÊé•Ôºå‰∏ªË¶ÅÊòØÁúãÁöÑËøô‰∏™ÂÜôÁöÑÔºöJavaÈõÜÂêà‰∏≠List,Set‰ª•ÂèäMapÁ≠âÈõÜÂêà‰ΩìÁ≥ªËØ¶Ëß£(Âè≤‰∏äÊúÄÂÖ®) collectionÂÖà‰∏ä‰∏™ÂõæÔºöËøô‰∏™ÂõæÁîªÁöÑÂ•ΩÂïäÂìàÂìàÂìàÂìàÂìàÂìàÂìà‰∏çÁûéÁöÑÈÉΩÁúãÂæóÂà∞ÔºåCollectionËøô‰∏™Êé•Âè£‰∏ãÊúâ‰∏â‰∏™Êé•Âè£ÁªßÊâøÔºåÂàÜÂà´ÊòØSet„ÄÅList„ÄÅQueue(Êàë‰ªñÂ¶àÂ•ΩÂÉèÊ≤°ÊÄé‰πàÁî®ËøáQueueÂïäÔºå‰ª•ÂêéË¶ÅÂ§öÁî®ÁÇπ‰∫Ü)ÔºåSetÊúâ‰∏â‰∏™ÂÆûÁé∞Á±ªÔºåÂàÜÂà´ÊòØHashSet„ÄÅLinkedHashSet„ÄÅTreeSetÔºåListÊúâ‰∏â‰∏™ÂÆûÁé∞Á±ªÔºåÂàÜÂà´ÊòØArrayList„ÄÅVector(ÊÑüËßâÁé∞Âú®ÊòØ‰∏çÊòØÁî®ÁöÑÊØîËæÉÂ∞ëÂïä‚Ä¶)„ÄÅLinkedListÔºåÂí¶Ëøô‰∏™LinkedListÁâõÈÄºÂïäÔºåÁ´üÁÑ∂ËøòÊòØQueueÁöÑÂÆûÁé∞Á±ªÔºå‰∏çËøáÁúãÂà´‰∫∫ÂçöÂÆ¢Â•ΩÂÉèÊòØËØ¥ÁªßÊâøQueueÈÉ®ÂàÜÁöÑLinkedListÊòØË¢´ÈòâÂâ≤‰∫ÜÁöÑÂÆûÁé∞Á±ªÔºå‰πüÂ∞±ÊòØQueue‰∏çËÉΩËÆøÈóÆÂà∞LinkedListÁöÑÊâÄÊúâÊñπÊ≥ï(ÁÆ°ÂÆÉÂë¢ÊàëÈÉΩÊ≤°Áî®Ëøá‚Ä¶)ÔºåËøòÊúâ‰∏Ä‰∏™PriorityQueue,ÁúãÂêçÂ≠óÂ∞±Áü•ÈÅìÊòØ‰ºòÂÖàÁ∫ßÈòüÂàóÂï¶ÔºÅ(Â¶àÂëÄÁúãÁöÑËµÑÊñôÂ§™Â§öÔºåÊÉ≥ÂçïÁã¨ÂºÄ‰∏ÄÁØáÊù•ÊÄªÁªìÈõÜÂêàÊ∫êÁ†ÅÂíåMapÊ∫êÁ†Å‰∫Ü‚Ä¶ÁÆó‰∫ÜÂÖàËøôÊ†∑ÂÜôÁùÄÂêß) ####ÂÖàÂàó‰∏™ÊèêÁ∫≤Ôºö 1.ÂÖàÁªºËø∞‰∏Ä‰∏ãcollection‰∏≠‰∏â‰∏™ÂÑøÂ≠êÊé•Âè£ÂæóÂêÑ‰∏™ÂÆûÁé∞Á±ªÁöÑÁâπÁÇπÔºåÊØîÂ¶ÇÂ∫ïÂ±ÇÂÆûÁé∞Ôºå‰ºòÁº∫ÁÇπÁ≠âÁ≠âÔºõ ËøòÊúâË¶ÅËÄÉËôëÁöÑÂ∞±ÊòØbase caseÔºåÁî±‰∫éÊòØÊúÄÁü≠ÈÄíÂΩíÂ≠êÂ∫èÂàóËá≥Â∞ë‰∏∫1ÔºåÊâÄ‰ª•base case‰∏∫1ÔºåÊâÄ‰ª•dpÊï∞ÁªÑÂÖ®ÈÉ®ÂàùÂßãÂåñ‰∏∫1Âç≥ÂèØ„ÄÇ 3.Èù¢ËØïÂ∏∏ÈóÆÂà∞ÁöÑÁÇπ ÁªºËø∞‚Äî List ÊúâÂ∫è,ÂèØÈáçÂ§ç ArrayList‰ºòÁÇπ: Â∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÊòØÊï∞ÁªÑÔºåÊü•ËØ¢Âø´ÔºåÂ¢ûÂà†ÊÖ¢„ÄÇÁº∫ÁÇπ: Á∫øÁ®ã‰∏çÂÆâÂÖ®ÔºåÊïàÁéáÈ´òÁâπÁÇπ: ÂÖÅËÆ∏nullÔºå‰∏çÂêåÊ≠•Vector‰ºòÁÇπ: Â∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÊòØÊï∞ÁªÑÔºåÊü•ËØ¢Âø´ÔºåÂ¢ûÂà†ÊÖ¢„ÄÇÁº∫ÁÇπ: Á∫øÁ®ãÂÆâÂÖ®ÔºåÊïàÁéá‰Ωétips:ÊâÄË∞ìÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÔºåÊòØÁõ∏ÂØπÁöÑÔºåÂú®vectorÂÜÖÈÉ®ÂÜÖÈÉ®ÂÜÖÈÉ®ÔºåÂÖ∂ÊâÄÊúâÊñπÊ≥ï‰∏ç‰ºöË¢´Â§öÁ∫øÁ®ãÊâÄËÆøÈóÆÔºåÂçï‰∏™ÊñπÊ≥ïÁöÑÂéüÂ≠êÊÄßÔºàÊ≥®ÔºöÂéüÂ≠êÊÄßÔºåÁ®ãÂ∫èÁöÑÂéüÂ≠êÊÄßÂç≥‰∏ç‰ºöË¢´Á∫øÁ®ãË∞ÉÂ∫¶Êú∫Âà∂ÊâìÊñ≠ÔºâÔºåÂπ∂‰∏çËÉΩ‰øùËØÅÂ§çÂêàÊìç‰Ωú‰πüÂÖ∑ÊúâÂéüÂ≠êÊÄßÔºåÊâÄ‰ª•Â¶ÇÊûúÊòØÂ§çÂêàÊìç‰ΩúÔºåÂêåÊ†∑Á∫øÁ®ã‰∏çÂÆâÂÖ®ÔºÅÔºÅÂ¶ÇÊûúË¶Å‰øùËØÅÁúüÊ≠£ÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÔºåËøòÈúÄË¶Å‰ª•vectorÂØπË±°‰∏∫ÈîÅÔºåÊù•ËøõË°åÊìç‰ΩúÔºå‰ΩÜËøôÊ†∑Â∞±Ë∑üArrayListÊ≤°Âï•Âå∫Âà´‰∫Ü‚Ä¶‚Äî‚Äî‚Äî‚Äì&gt; VectorÊòØÁ∫øÁ®ãÂÆâÂÖ®ÂêóÁâπÁÇπÔºöÂÖÅËÆ∏nullÔºå‰∏çÂêåÊ≠•LinkedList‰ºòÁÇπ: Â∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÊòØÂèåÂêëÈìæË°®ÔºåÊü•ËØ¢ÊÖ¢ÔºåÂ¢ûÂà†Âø´„ÄÇÊïÖÊó¢ÂèØ‰ª•ÂÅöQueueÔºåÂèàÂèØ‰ª•ÂÅöStack„ÄÇÁº∫ÁÇπ: Á∫øÁ®ã‰∏çÂÆâÂÖ®ÔºåÊïàÁéáÈ´òÁâπÁÇπÔºöÂÖÅËÆ∏nullÔºå‰∏çÂêåÊ≠• ‚ÄîSet Êó†Â∫è,ÂîØ‰∏Ä HashSetÔºà‰∏çÂêåÊ≠•ÔºåÂÖÅËÆ∏nullÔºâÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÊòØÂìàÂ∏åË°®(Êó†Â∫è,ÂîØ‰∏Ä)ÔºåÂÖ∂ÂÆûÂ∞±ÊòØHashMapÁöÑÂÆû‰æãÔºåÂè™‰∏çËøáÂÄºÊòØkeyÔºåvalueÊòØ‰∏Ä‰∏™Âõ∫ÂÆöÁöÑÂØπË±°„ÄÇÂ¶Ç‰ΩïÊù•‰øùËØÅÂÖÉÁ¥†ÂîØ‰∏ÄÊÄß?1.‰æùËµñ‰∏§‰∏™ÊñπÊ≥ïÔºöhashCode()Âíåequals() LinkedHashSetÔºà‰∏çÂêåÊ≠•ÔºåÂÖÅËÆ∏nullÔºâÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÊòØÂèåÂêëÈìæË°®ÂíåÂìàÂ∏åË°®„ÄÇ(FIFOÊèíÂÖ•ÊúâÂ∫è,ÂîØ‰∏Ä)ÔºåÂÆûÈôÖ‰∏ä‰æùÊóßÊòØLinkedHashMapÁöÑÂÆû‰æãÔºåÂæÖ‰ºöÊ∫êÁ†ÅÂàÜÊûêÁúãÁúã1.Áî±ÈìæË°®‰øùËØÅÂÖÉÁ¥†ÊúâÂ∫è2.Áî±ÂìàÂ∏åË°®‰øùËØÅÂÖÉÁ¥†ÂîØ‰∏Ä TreeSetÔºàÂÖÅËÆ∏nullÔºå‰∏çÂêåÊ≠•ÔºâÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÊòØÁ∫¢ÈªëÊ†ë„ÄÇ(ÂîØ‰∏ÄÔºåÊúâÂ∫èÔºåËøôÈáåÁöÑÊúâÂ∫èÊåáÁöÑÊòØÊéíÂ∫èÂ•ΩÁöÑÔºå‰∏çÊòØËØ¥FIFO‰πãÁ±ªÁöÑ)ÔºåÂÆûÈôÖ‰∏ä‰æùÊóßÊòØTreeMapÁöÑÂÆû‰æã Â¶Ç‰Ωï‰øùËØÅÂÖÉÁ¥†ÊéíÂ∫èÁöÑÂë¢?Ëá™ÁÑ∂ÊéíÂ∫è(ÈáçÂÜô):1.StudentÁ±ª‰∏≠ÂÆûÁé∞ ComparableÊé•Âè£ 2.ÈáçÂÜôComparableÊé•Âè£‰∏≠ÁöÑComparetorÊñπÊ≥ïÊØîËæÉÂô®ÊéíÂ∫è:1.ÂçïÁã¨ÂàõÂª∫‰∏Ä‰∏™ÊØîËæÉÁ±ªÔºåËøôÈáå‰ª•MyComparator‰∏∫‰æãÔºåÂπ∂‰∏îË¶ÅËÆ©ÂÖ∂ÁªßÊâøComparatorÊé•Âè£ 2.ÈáçÂÜôComparatorÊé•Âè£‰∏≠ÁöÑCompareÊñπÊ≥ï2.Â¶Ç‰Ωï‰øùËØÅÂÖÉÁ¥†ÂîØ‰∏ÄÊÄßÁöÑÂë¢?Ê†πÊçÆÊØîËæÉÁöÑËøîÂõûÂÄºÊòØÂê¶ÊòØ0Êù•ÂÜ≥ÂÆö -Queue PriorityQueueÔºö‰ºòÂÖàÁ∫ßÈòüÂàóÔºåÊåâÁÖßÂ§ßÂ∞èÊéíÂ∫èÂ•Ω‰∫ÜÁöÑÈòüÂàóÔºåÂπ∂‰∏çÈÅµÂæ™ÂÖàËøõÂÖàÂá∫Ôºå‰∏çÂÖÅËÆ∏nullÂÖÉÁ¥†ÔºåÂ§¥ÈÉ®ÊòØÊúÄÂ∞èÂÖÉÁ¥†ÔºåÂ∫ïÂ±ÇÈááÁî®ÁöÑÊï∞ÁªÑÂíåÂ†Ü„ÄÇ PriorityQueue‰∏çÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇÂ¶ÇÊûúÂ§ö‰∏™Á∫øÁ®ã‰∏≠ÁöÑ‰ªªÊÑèÁ∫øÁ®ã‰ªéÁªìÊûÑ‰∏ä‰øÆÊîπ‰∫ÜÂàóË°®Ôºå ÂàôËøô‰∫õÁ∫øÁ®ã‰∏çÂ∫îÂêåÊó∂ËÆøÈóÆPriorityQueue ÂÆû‰æãÔºåËøôÊó∂ËØ∑‰ΩøÁî®Á∫øÁ®ãÂÆâÂÖ®ÁöÑPriorityBlockingQueue Á±ª„ÄÇ ‰∏çÂÖÅËÆ∏ÊèíÂÖ• null ÂÖÉÁ¥†„ÄÇ PriorityQueueÂÆûÁé∞ÊèíÂÖ•ÊñπÊ≥ïÔºàoffer„ÄÅpoll„ÄÅremove() Âíå add ÊñπÊ≥ïÔºâ ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØO(log(n)) ÔºõÂÆûÁé∞ remove(Object) Âíå contains(Object) ÊñπÊ≥ïÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØO(n) ÔºõÂÆûÁé∞Ê£ÄÁ¥¢ÊñπÊ≥ïÔºàpeek„ÄÅelement Âíå sizeÔºâÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØO(1)„ÄÇÊâÄ‰ª•Âú®ÈÅçÂéÜÊó∂ÔºåËã•‰∏çÈúÄË¶ÅÂà†Èô§ÂÖÉÁ¥†ÔºåÂàô‰ª•peekÁöÑÊñπÂºèÈÅçÂéÜÊØè‰∏™ÂÖÉÁ¥†„ÄÇ ÊñπÊ≥ïiterator()‰∏≠Êèê‰æõÁöÑËø≠‰ª£Âô®Âπ∂‰∏ç‰øùËØÅ‰ª•ÊúâÂ∫èÁöÑÊñπÂºèÈÅçÂéÜPriorityQueue‰∏≠ÁöÑÂÖÉÁ¥†„ÄÇÂâ©‰ΩôÊúâÂÖ≥QueueÈòüÂàóÁúã‚Äî‚Äì&gt; JavaÈõÜÂêàÔºà‰∏ÉÔºâ QueueËØ¶Ëß£ ÂàÜÂà´ÈòêËø∞Ëøô‰∏™ËøòÊòØÂè¶ÂºÄ‰∏ÄÁØáÂêß‚Ä¶ÂÜÖÂÆπÂ§™Â§ö‰∫Ü‚Ä¶Â§üÂÜô‰∏§ÊòüÊúü‰∫ÜÔºÅÔºÅËøòÊòØ‰∏çÊîæÂú®ËøôÂñßÂÆæÂ§∫‰∏ª‰∫Ü!! map ÂÖ∑‰ΩìÂ±ïÂºÄËßÅÂè¶‰∏ÄÁØáÂçöÂÆ¢ÔºöMapÊ∫êÁ†ÅÂàÜÊûê Á¨¨2È¢òÔºö‰∏§Êï∞Áõ∏Âä†È¢òÁõÆÁªôÂá∫‰∏§‰∏™ ÈùûÁ©∫ ÁöÑÈìæË°®Áî®Êù•Ë°®Á§∫‰∏§‰∏™ÈùûË¥üÁöÑÊï¥Êï∞„ÄÇÂÖ∂‰∏≠ÔºåÂÆÉ‰ª¨ÂêÑËá™ÁöÑ‰ΩçÊï∞ÊòØÊåâÁÖß ÈÄÜÂ∫è ÁöÑÊñπÂºèÂ≠òÂÇ®ÁöÑÔºåÂπ∂‰∏îÂÆÉ‰ª¨ÁöÑÊØè‰∏™ËäÇÁÇπÂè™ËÉΩÂ≠òÂÇ® ‰∏Ä‰Ωç Êï∞Â≠ó„ÄÇ Â¶ÇÊûúÔºåÊàë‰ª¨Â∞ÜËøô‰∏§‰∏™Êï∞Áõ∏Âä†Ëµ∑Êù•ÔºåÂàô‰ºöËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÈìæË°®Êù•Ë°®Á§∫ÂÆÉ‰ª¨ÁöÑÂíå„ÄÇ ÊÇ®ÂèØ‰ª•ÂÅáËÆæÈô§‰∫ÜÊï∞Â≠ó 0 ‰πãÂ§ñÔºåËøô‰∏§‰∏™Êï∞ÈÉΩ‰∏ç‰ºö‰ª• 0 ÂºÄÂ§¥„ÄÇ Á§∫‰æã123ËæìÂÖ•Ôºö(2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)ËæìÂá∫Ôºö7 -&gt; 0 -&gt; 8ÂéüÂõ†Ôºö342 + 465 = 807 ÊàëÁöÑÊÄùË∑Ø ÂÖàËÆ≤ËæìÂÖ•ËæìÂá∫„ÄÇË¶ÅËæìÂÖ•‰∏§‰∏™ÈìæË°®ÔºåÈ¶ñÂÖàÂ∞±Ë¶ÅÊûÑÈÄ†NodeÂÆû‰ΩìÁ±ªÔºåÊ≥®ÊÑèÊûÑÈÄ†ÂáΩÊï∞ÊúâÂ§ö‰∏™ÔºåÊ†πÊçÆÂèÇÊï∞ÁöÑ‰∏çÂêåËøõË°åÈÄâÊã©ÔºåËæìÂá∫ÂêåËæìÂÖ•ÔºåÂ∞ÜÁªÑÂêàÂ•ΩÁöÑÈìæË°®ÁöÑÂ§¥ÁªìÁÇπ(ÊúâÊï∞ÊçÆÁöÑ)ËøîÂõûÂêéÔºåÂ∞±ÂèØ‰ª•Âæ™ÁéØÂ∞ÜÊï¥‰∏™ÈìæË°®ÊâìÂç∞Âá∫Êù•‰∫ÜÔºõ ÂÜçËÆ≤ÂÆûÁé∞„ÄÇËßÅ‰ª£Á†ÅÊ≥®Èáä„ÄÇ ÊàëÁöÑ‰ª£Á†ÅÔºàACÔºâ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100package ÈìæË°®ÂÆûÁé∞_java.leecodeÁ¨¨‰∫åÈ¢ò;public class leecode_second_Link &#123; public static void main(String[] args) &#123; Node head = new Node(2); Node node1 = new Node(5); Node node2 = new Node(8); Node node3 = new Node(7); head.setNext(node1); node1.setNext(node2); node2.setNext(node3); // ÊâìÂç∞ÈìæË°®1 Node temp = head; while (temp != null) &#123; if(temp.next == null) &#123; System.out.println(temp.getData()); &#125; else &#123; System.out.print(temp.getData() + "--&gt;"); &#125; temp = temp.getNext(); &#125; System.out.println("+"); Node head_sec = new Node(2); Node node1_sec = new Node(4); Node node2_sec = new Node(6); Node node3_sec = new Node(7); head_sec.setNext(node1_sec); node1_sec.setNext(node2_sec); node2_sec.setNext(node3_sec); // ÊâìÂç∞ÈìæË°®2 Node temp1 = head_sec; while (temp1 != null) &#123; if(temp1.next == null) &#123; System.out.println(temp1.getData()); &#125; else &#123; System.out.print(temp1.getData() + "--&gt;"); &#125; temp1 = temp1.getNext(); &#125; System.out.println("="); Node head3 = new leecode_second_Link().addTwoNums(head,head_sec); //ÊâìÂç∞ÊÄªÂíåÈìæË°® Node temp3 = head3; while(temp3 != null)&#123; if(temp3.next == null) &#123; System.out.println(temp3.getData()); &#125; else &#123; System.out.print(temp3.getData() + "--&gt;"); &#125; temp3 = temp3.getNext(); &#125; &#125; public Node addTwoNums(Node head1,Node head2)&#123; //Ê≤°Âï•Áî®ÔºåÂàùÂßãÂåñÂ§¥ÁªìÁÇπ(ÂèØ‰ª•‰∏çÂ∏¶Êï∞ÊçÆ) Node res = new Node(0); //tempÊòØÂêéÈù¢Áî®Êù•ÈÅçÂéÜÈìæË°®ÁöÑ Node temp = res; //Ëøô‰∏™ÊòØÂïÜÔºåÁî®Êù•Ëøõ‰ΩçÁªô‰∏ã‰∏Ä‰ΩçÁöÑ int quo = 0; //Âæ™ÁéØÔºåÂè™ÊúâÂΩìÁ¨¨‰∏Ä‰∏™ÈìæË°®‰∏≠ÁöÑÂÄº‰∏∫Á©∫‰∏îÁ¨¨‰∫å‰∏™ÈìæË°®‰∏≠ÁöÑÂÄº‰∏∫Á©∫‰∏îÊ≤°Êúâ‰∫ÜËøõ‰ΩçÔºåËÆ°ÁÆóÊâçÁÆóÁªìÊùü while(head1 != null || head2 != null || quo != 0)&#123; //t‰∏∫‰∏§ÈìæË°®Áõ∏Âêå‰ΩçÁΩÆÁöÑÂíåÂä†‰∏äÂâçÈù¢‰∏Ä‰ΩçÁöÑËøõ‰Ωç int t = (head1 == null ? 0 : head1.data ) + (head2 == null ? 0 : head2.data) + quo; //ÂïÜ quo = t/10; //Êñ∞ÈìæË°®Âú®ËØ•‰ΩçÁöÑÂÄº Node head3 = new Node(t % 10); //Êñ∞ÈìæË°®ÁöÑÁ¨¨‰∏Ä‰∏™ÂÄº temp.next = head3; //Âè™ÊúâËøôÊ†∑ÔºåÊâçËÉΩËÆ©ÈìæË°®next‰∏ãÂéªÔºåËøô‰∏§Ê≠•Ë¶ÅÂ≠¶‰ºöÔºå‰ª•ÂêéÈìæË°®ÁªèÂ∏∏Ë¶ÅÁî® temp = head3; //ÂàÜÂà´Áúã‰∏§‰∏™ÈìæË°®ÊòØÂê¶‰∏∫Á©∫ÔºåÂ¶ÇÊûú‰∏∫Á©∫ËØ¥ÊòéËØ•‰ΩçÂ∑≤ÁªèÊ≤°‰∫ÜÔºåÂê¶ÂàôÂ∞±next‰∏ãÂéª head1 = (head1 == null ? head1 : head1.next); head2 = (head2 == null ? head2 : head2.next); &#125; //ËøîÂõûÈìæË°®Á¨¨‰∏Ä‰∏™ÊúâÂÄºÁöÑËäÇÁÇπÔºåÁõ∏ÂΩì‰∫éÊúâÂÄºÁöÑÂ§¥ÁªìÁÇπ return res.next; &#125;&#125; 12345678910111213141516171819202122232425262728293031323334353637383940package ÈìæË°®ÂÆûÁé∞_java.leecodeÁ¨¨‰∫åÈ¢ò;public class Node &#123; //Êï∞ÊçÆÂüü public Integer data; //ÊåáÈíàÂüüÔºåÊåáÂêë‰∏ã‰∏Ä‰∏™ËäÇÁÇπ public Node next; public Node() &#123; &#125; public Node(int data) &#123; this.data = data; &#125; public Node(int data, Node next) &#123; this.data = data; this.next = next; &#125; public int getData() &#123; return data; &#125; public void setData(int Data) &#123; this.data = Data; &#125; public Node getNext() &#123; return next; &#125; public void setNext(Node Next) &#123; this.next = Next; &#125;&#125; Ê≠£Á°ÆÊÄùË∑ØÂêåÊó∂ÈÅçÂéÜ‰∏§‰∏™ÈìæË°®ÔºåÂØπÂ∫îÂÄºÁõ∏Âä†(ËøòÊúâ quotient)Ê±Ç‰ΩôÊï∞ÂæóÂà∞ÂÄºÂπ∂ËµãÁªôÊñ∞ÂàõÂª∫ÁöÑÁªìÁÇπ„ÄÇËÄåÂïÜÂàôÁî®quotientÂ≠òÂÇ®Ôºå‰æõ‰∏ãÊ¨°Áõ∏Âä†„ÄÇ Ê≠£Á°Æ‰ª£Á†Å12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152//Â§çÊùÇÁâà/** * Definition for singly-linked list. * public class ListNode &#123; * int val; * ListNode next; * ListNode(int x) &#123; val = x; &#125; * &#125; */class Solution &#123; public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123; ListNode res = new ListNode(-1); ListNode cur = res; int quotient = 0; int t = 0; while (l1 != null &amp;&amp; l2 != null) &#123; t = l1.val + l2.val + quotient; quotient = t / 10; ListNode node = new ListNode(t % 10); cur.next = node; l1 = l1.next; l2 = l2.next; cur = node; &#125; while (l1 != null) &#123; t = l1.val + quotient; quotient = t / 10; ListNode node = new ListNode(t % 10); cur.next = node; l1 = l1.next; cur = node; &#125; while (l2 != null) &#123; t = l2.val + quotient; quotient = t / 10; ListNode node = new ListNode(t % 10); cur.next = node; l2 = l2.next; cur = node; &#125; if (quotient != 0) &#123; cur.next = new ListNode(quotient); cur = cur.next; &#125; return res.next; &#125;&#125; 1234567891011121314151617181920212223242526//ÁÆÄÂåñÁâà/** * Definition for singly-linked list. * public class ListNode &#123; * int val; * ListNode next; * ListNode(int x) &#123; val = x; &#125; * &#125; */class Solution &#123; public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123; ListNode res = new ListNode(-1); ListNode cur = res; int quotient = 0; while (l1 != null || l2 != null || quotient != 0) &#123; int t = (l1 == null ? 0 : l1.val) + (l2 == null ? 0 : l2.val) + quotient; quotient = t / 10; ListNode node = new ListNode(t % 10); cur.next = node; cur = node; l1 = (l1 == null) ? l1 : l1.next; l2 = (l2 == null) ? l2 : l2.next; &#125; return res.next; &#125;&#125; Ê∂âÂèäÁöÑÁü•ËØÜÁÇπjava‰∏≠ÁöÑÂçïÈìæË°®ËßÅÊàëÂÜôÁöÑÂè¶Â§ñ‰∏ÄÁØáÂçöÊñá ‚Äî‚Äî&gt; JavaÂÆûÁé∞ÂçïÂêëÈìæË°® Á¨¨3È¢òÔºöÊó†ÈáçÂ§çÂ≠óÁ¨¶ÁöÑÊúÄÈïøÂ≠ê‰∏≤È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåËØ∑‰Ω†ÊâæÂá∫ÂÖ∂‰∏≠‰∏çÂê´ÊúâÈáçÂ§çÂ≠óÁ¨¶ÁöÑ ÊúÄÈïøÂ≠ê‰∏≤ ÁöÑÈïøÂ∫¶„ÄÇ Á§∫‰æãÁ§∫‰æã 1: 123ËæìÂÖ•: "abcabcbb"ËæìÂá∫: 3 Ëß£Èáä: Âõ†‰∏∫Êó†ÈáçÂ§çÂ≠óÁ¨¶ÁöÑÊúÄÈïøÂ≠ê‰∏≤ÊòØ "abc"ÔºåÊâÄ‰ª•ÂÖ∂ÈïøÂ∫¶‰∏∫ 3„ÄÇ Á§∫‰æã 2: 123ËæìÂÖ•: "bbbbb"ËæìÂá∫: 1Ëß£Èáä: Âõ†‰∏∫Êó†ÈáçÂ§çÂ≠óÁ¨¶ÁöÑÊúÄÈïøÂ≠ê‰∏≤ÊòØ "b"ÔºåÊâÄ‰ª•ÂÖ∂ÈïøÂ∫¶‰∏∫ 1„ÄÇ Á§∫‰æã 3: 1234ËæìÂÖ•: "pwwkew"ËæìÂá∫: 3Ëß£Èáä: Âõ†‰∏∫Êó†ÈáçÂ§çÂ≠óÁ¨¶ÁöÑÊúÄÈïøÂ≠ê‰∏≤ÊòØ "wke"ÔºåÊâÄ‰ª•ÂÖ∂ÈïøÂ∫¶‰∏∫ 3„ÄÇËØ∑Ê≥®ÊÑèÔºå‰Ω†ÁöÑÁ≠îÊ°àÂøÖÈ°ªÊòØ Â≠ê‰∏≤ ÁöÑÈïøÂ∫¶Ôºå"pwke" ÊòØ‰∏Ä‰∏™Â≠êÂ∫èÂàóÔºå‰∏çÊòØÂ≠ê‰∏≤„ÄÇ ÊàëÁöÑÊÄùË∑ØË¶ÅÊâæÂà∞‰∏Ä‰∏™ÊúÄÈïøÂ≠ê‰∏≤ÔºåÂ∞±ÂøÖÈ°ªÊúâ‰∏ÄÂ§¥‰∏ÄÂ∞æÔºåÊâÄ‰ª•Â∞±ÂøÖÈ°ªÊúâ‰∏§‰∏™ÊåáÈíàÔºåÁÑ∂ÂêéÂèàÊòØÂ≠óÁ¨¶‰∏≤ÂØπÂ∫îÁ¥¢ÂºïÂÄºÔºåÊâÄ‰ª•ËÇØÂÆöÊòØÈúÄË¶ÅÁî®mapÊù•Êìç‰ΩúÁöÑÔºåkey‰∏∫Á¥¢ÂºïÂÄºÔºåvalue‰∏∫Á¥¢ÂºïÊâÄÂú®‰ΩçÁΩÆÁöÑÂÄº„ÄÇ‰∫éÊòØËÆæÂÆö‰∏§‰∏™ÊåáÈíàp„ÄÅqÔºåÊúÄÂºÄÂßãÂêåÊó∂ÊåáÂÆöÂú®ÊúÄÂºÄÂßãÁöÑ‰ΩçÁΩÆÔºåÁÑ∂ÂêéqÂêëÂêéÁßªÂä®ÔºåÊØèÁßªÂä®‰∏ÄÊ¨°ÔºåÂè™Ë¶ÅqÂØπÂ∫îÁöÑÂÄºÊ≤°ÊúâÂú®map‰∏≠ÔºåÂ∞±Â∞ÜÂÖ∂ÂÄºÊîæÂÖ•mapÔºåÂπ∂‰∏îËÆ∞ÂΩï‰∏ã‰∏≤ÁöÑÂ§ßÂ∞èÔºåÂΩìÁ¢∞Âà∞‰∫Ümap‰∏≠Áõ∏ÂêåÁöÑÂÄºÊó∂ÔºåÂ∞±Â∞ÜpÂêëÂêéÁßªÂà∞map‰∏≠Âá∫Áé∞ËØ•ÂÄºÁöÑÁ¥¢ÂºïÂêé‰∏Ä‰ΩçÔºåÂêåÊó∂Ê≥®ÊÑèÔºÅÔºÅÔºÅÊ≠§Êó∂pÂèØËÉΩ‰ºöÂõûÊ∫ØÔºåÊâÄ‰ª•Ê≠§Êó∂Ë¶ÅÁî®maxÂáΩÊï∞Âà§Êñ≠‰∏Ä‰∏ãÔºåÁÑ∂ÂêéÁªßÁª≠Âà§Êñ≠‰∏≤ÁöÑÂ§ßÂ∞èÂíåÁªßÁª≠ÈÅçÂéÜÁöÑÊúÄÈïøÂ≠ê‰∏≤ÁöÑÈïøÂ∫¶ÔºåÊúÄÂêéËøîÂõûÊúÄÈïøÂ≠ê‰∏≤ÈïøÂ∫¶Âç≥ÂèØ„ÄÇ ÊàëÁöÑ‰ª£Á†ÅÔºàACÔºâ1234567891011121314151617181920212223242526272829303132package Á¨¨‰∏âÈ¢ò;import java.util.HashMap;import java.util.Scanner;public class lengthOfLongestSubstring &#123; public static void main(String[] args) &#123; Scanner a = new Scanner(System.in); System.out.println("ËØ∑ËæìÂÖ•‰∏≤: "); String string = a.nextLine(); int num = new lengthOfLongestSubstring().lengthofSubstring(string); System.out.println("ÊúÄÈïøÂ≠ê‰∏≤ÁöÑÈïøÂ∫¶‰∏∫Ôºö" + num); &#125; private int lengthofSubstring(String string) &#123; int max = 0; char[] chars = string.toCharArray(); int p=0,q=0; int len = chars.length; HashMap&lt;Character, Integer&gt; map = new HashMap&lt;&gt;(); while(q &lt; len)&#123; if(map.containsKey(chars[q]))&#123; p = Math.max(p,map.get(chars[q])+1); &#125; map.put(chars[q],q); max = Math.max(max,q-p+1); q++; &#125; return max; &#125;&#125; Ê≠£Á°ÆÊÄùË∑ØÂà©Áî®ÊåáÈíà p, qÔºåÂàùÂßãÊåáÂêëÂ≠óÁ¨¶‰∏≤ÂºÄÂ§¥„ÄÇÈÅçÂéÜÂ≠óÁ¨¶‰∏≤Ôºåq ÂêëÂè≥ÁßªÂä®ÔºåËã•ÊåáÂêëÁöÑÂ≠óÁ¨¶Âú® map ‰∏≠ÔºåËØ¥ÊòéÂá∫Áé∞‰∫ÜÈáçÂ§çÂ≠óÁ¨¶ÔºåÊ≠§Êó∂Ôºåp Ë¶ÅÂú®Âá∫Áé∞ÈáçÂ§çÂ≠óÁ¨¶ÁöÑ‰∏ã‰∏Ä‰∏™‰ΩçÁΩÆ map.get(chars[q]) + 1 ÂíåÂΩìÂâç‰ΩçÁΩÆ p ‰πãÈó¥ÂèñËæÉÂ§ßÂÄºÔºåÈò≤Ê≠¢ p ÊåáÈíàÂõûÊ∫Ø„ÄÇÂæ™ÁéØÁöÑËøáÁ®ã‰∏≠ÔºåË¶ÅÂ∞Ü chars[q] ÂèäÂØπÂ∫î‰ΩçÁΩÆÊîæÂÖ• map ‰∏≠Ôºå‰πüÈúÄË¶Å‰∏çÊñ≠ËÆ°ÁÆóÂá∫max ‰∏é q - p + 1 ÁöÑËæÉÂ§ßÂÄºÔºåËµãÁªô max„ÄÇÊúÄÂêéËæìÂá∫ max Âç≥ÂèØ„ÄÇ Ê≠£Á°Æ‰ª£Á†Å123456789101112131415161718192021222324class Solution &#123; public int lengthOfLongestSubstring(String s) &#123; if (s == null || s.length() == 0) &#123; return 0; &#125; char[] chars = s.toCharArray(); int len = chars.length; int p = 0, q = 0; int max = 0; Map&lt;Character, Integer&gt; map = new HashMap&lt;&gt;(); while (q &lt; len) &#123; if (map.containsKey(chars[q])) &#123; // Èò≤Ê≠¢pÊåáÈíàÂõûÊ∫ØÔºåÂØºËá¥ËÆ°ÁÆóÂà∞ÈáçÂ§çÂ≠óÁ¨¶ÁöÑÈïøÂ∫¶ // eg. abba,ÂΩìqÊåáÂêëÊúÄÂè≥ÁöÑaÊó∂ÔºåËã•ÁÆÄÂçïÊääpËµã‰∏∫map.get(chars[q] + 1)ÔºåÂàôÂá∫Áé∞ÊåáÈíàÂõûÊ∫Ø p = Math.max(p, map.get(chars[q]) + 1); &#125; map.put(chars[q], q); max = Math.max(max, q - p + 1); ++q; &#125; return max; &#125;&#125; Ê∂âÂèäÁöÑÁü•ËØÜÁÇπÂ•ΩÂÉèÂπ∂Ê≤°ÊúâÂï•Êñ∞Áü•ËØÜÁÇπÔºåÂÖ∂ÂÆûÂ∞±ÊòØÁî®map‰ª£ÊõøÊåáÈíàÁöÑ‰ΩúÁî®„ÄÇ Á¨¨237È¢òÔºö Âà†Èô§ÈìæË°®‰∏≠ÁöÑËäÇÁÇπÈ¢òÁõÆËØ∑ÁºñÂÜô‰∏Ä‰∏™ÂáΩÊï∞Ôºå‰ΩøÂÖ∂ÂèØ‰ª•Âà†Èô§Êüê‰∏™ÈìæË°®‰∏≠ÁªôÂÆöÁöÑÔºàÈùûÊú´Â∞æÔºâËäÇÁÇπÔºå‰Ω†Â∞ÜÂè™Ë¢´ÁªôÂÆöË¶ÅÊ±ÇË¢´Âà†Èô§ÁöÑËäÇÁÇπ„ÄÇ Á§∫‰æãÁ§∫‰æã 1 123ËæìÂÖ•: head = [4,5,1,9], node = 5ËæìÂá∫: [4,1,9]Ëß£Èáä: ÁªôÂÆö‰Ω†ÈìæË°®‰∏≠ÂÄº‰∏∫ 5 ÁöÑÁ¨¨‰∫å‰∏™ËäÇÁÇπÔºåÈÇ£‰πàÂú®Ë∞ÉÁî®‰∫Ü‰Ω†ÁöÑÂáΩÊï∞‰πãÂêéÔºåËØ•ÈìæË°®Â∫îÂèò‰∏∫ 4 -&gt; 1 -&gt; 9 Á§∫‰æã 2: 123ËæìÂÖ•: head = [4,5,1,9], node = 1ËæìÂá∫: [4,5,9]Ëß£Èáä: ÁªôÂÆö‰Ω†ÈìæË°®‰∏≠ÂÄº‰∏∫ 1 ÁöÑÁ¨¨‰∏â‰∏™ËäÇÁÇπÔºåÈÇ£‰πàÂú®Ë∞ÉÁî®‰∫Ü‰Ω†ÁöÑÂáΩÊï∞‰πãÂêéÔºåËØ•ÈìæË°®Â∫îÂèò‰∏∫ 4 -&gt; 5 -&gt; 9 ËØ¥Êòé: ÈìæË°®Ëá≥Â∞ëÂåÖÂê´‰∏§‰∏™ËäÇÁÇπ„ÄÇ ÈìæË°®‰∏≠ÊâÄÊúâËäÇÁÇπÁöÑÂÄºÈÉΩÊòØÂîØ‰∏ÄÁöÑ„ÄÇ ÁªôÂÆöÁöÑËäÇÁÇπ‰∏∫ÈùûÊú´Â∞æËäÇÁÇπÂπ∂‰∏î‰∏ÄÂÆöÊòØÈìæË°®‰∏≠ÁöÑ‰∏Ä‰∏™ÊúâÊïàËäÇÁÇπ„ÄÇ ‰∏çË¶Å‰ªé‰Ω†ÁöÑÂáΩÊï∞‰∏≠ËøîÂõû‰ªª‰ΩïÁªìÊûú„ÄÇ ÊàëÁöÑÊÄùË∑ØÊú¨È¢òÈ¢òÂπ≤‰∏™‰∫∫ËßâÂæóÊ≤°Êúâ‰∫§‰ª£ÁöÑÂæàÊ∏ÖÊ•öÔºåËÆ©‰∫∫ÊÑüËßâÊúâÁÇπÊë∏‰∏çÁùÄÂ§¥ËÑëÔºåÊ≠£Â∏∏Êù•ËØ¥Â∫îËØ•ÊòØÁªôÂÆö‰∏§‰∏™ÂèÇÊï∞Ôºå‰ΩÜÊòØË¶ÅÂÜôÁöÑÂáΩÊï∞Âè™Êúâ‰∏Ä‰∏™ÂèÇÊï∞ÔºåÊâÄ‰ª•ÊúÄÂºÄÂßã‰ºöËÆ©‰∫∫ÊÑüËßâÂæàÁ™ÅÂÖÄÔºå‰ΩÜÊòØÂÆûÈôÖ‰∏äËøôÈÅìÈ¢òËÆæËÆ°ÁöÑÂæàÂ∑ßÂ¶ôÔºå‰∏çÈúÄË¶ÅÁªôÂÆöÂ§¥ÁªìÁÇπÔºåÂèØ‰ª•ÈááÁî®ÊõøË∫´ÊîªÂáªÔºåÁªôÂÆöÁöÑnodeÂÖ∂ÂÆûÂ∞±ÂèØ‰ª•ÂΩìÂÅöÂ§¥ÁªìÁÇπÊù•Â§ÑÁêÜÔºåÂõ†‰∏∫‰∏çÂèØËÉΩÊòØÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÔºåÊâÄ‰ª•ÂêéÈù¢‰∏ÄÂÆöÊúâËäÇÁÇπÔºåÊïÖÂèØ‰ª•Â∞ÜnodeÂêéËäÇÁÇπÁâ∫Áâ≤ÊéâÔºåËøôÊ†∑Â∞±Áõ∏ÂΩì‰∫éÂ∞ÜnodeÊú¨Ë∫´Âπ≤Êéâ‰∫Ü„ÄÇ ‰∏™‰∫∫ÈÅáÂà∞ÁöÑÂõ∞Èöæ‰∏ªË¶ÅÊòØÂú®ËæìÂÖ•ËæìÂá∫ÔºåÂ∞§ÂÖ∂ÊòØÊûÑÈÄ†ÂçïÈìæË°®ÁöÑËøáÁ®ãËä±Ë¥π‰∫ÜÊØîËæÉÈïøÁöÑÊó∂Èó¥ÔºåÊÄªËÄåË®Ä‰πãËøòÊòØÂØπÂçïÈìæË°®ÁöÑÊìç‰Ωú‰∏çÂ§üÁÜüÁªÉÔºåÊé•‰∏ãÊù•‰ºöÈáçÁÇπÊîªÂÖãÂçïÈìæË°®Ëøô‰∏ÄÂùóÁöÑÁü•ËØÜÁÇπÔºÅ ##ÊàëÁöÑ‰ª£Á†ÅÔºàACÔºâ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455package Á¨¨237È¢ò_Âà†Èô§ÈìæË°®‰∏≠ÁöÑËäÇÁÇπ;import java.util.ArrayList;import java.util.Scanner;public class deleteNode &#123; public static void main(String[] args) &#123; System.out.println("ËØ∑ËæìÂÖ•‰∏Ä‰∏≤Êï∞Â≠ó‰ª£Ë°®ÈìæË°®Ôºö"); Scanner sc = new Scanner(System.in); String head = sc.nextLine(); char[] chars = head.toCharArray();// System.out.println(chars); ArrayList list = new ArrayList(); Node head_first = new Node(-1); Node temp = head_first; for(int i = 0 ; i &lt; chars.length ; i++)&#123; temp.next = new Node(Integer.parseInt(String.valueOf(chars[i]))); temp = temp.next; list.add(chars[i]); &#125; System.out.println("ÊÇ®ËæìÂÖ•ÁöÑÈìæË°®‰∏∫Ôºö "+ list); System.out.println("ËØ∑ÊÇ®ËæìÂÖ•Ë¶ÅÂà†Èô§ÁöÑÊï∞Â≠óÔºö"); String data = sc.nextLine(); int data_int = Integer.parseInt(data); Node temp1 = head_first; for(int i = 0 ; i &lt; chars.length ; i++)&#123; temp1 = temp1.next; if(data_int == temp1.data)&#123; deleteNode(temp1); break; &#125; &#125; System.out.println("Âà†Èô§ÂêéÁöÑÈìæË°®‰∏∫Ôºö"); Node temp3 = head_first.next; for(int i = 0 ; i &lt; chars.length-1 ; i++) &#123; System.out.print(temp3.data + " "); temp3 = temp3.next; &#125; System.out.println("\n"); &#125; public static void deleteNode(Node node) &#123; Node tmp = node.next; node.data = node.next.data; node.next = node.next.next; tmp = null; &#125;&#125; 12345678910111213141516171819202122232425262728293031323334353637383940package Á¨¨237È¢ò_Âà†Èô§ÈìæË°®‰∏≠ÁöÑËäÇÁÇπ;public class Node &#123; //Êï∞ÊçÆÂüü public Integer data; //ÊåáÈíàÂüüÔºåÊåáÂêë‰∏ã‰∏Ä‰∏™ËäÇÁÇπ public Node next; public Node() &#123; &#125; public Node(int data) &#123; this.data = data; &#125; public Node(int data, Node next) &#123; this.data = data; this.next = next; &#125; public int getData() &#123; return data; &#125; public void setData(int Data) &#123; this.data = Data; &#125; public Node getNext() &#123; return next; &#125; public void setNext(Node Next) &#123; this.next = Next; &#125;&#125; Ê≠£Á°ÆÊÄùË∑ØÂè™Êèê‰æõ node ‰æùÁÑ∂ÂèØ‰ª•Ëß£ÂÜ≥Ê≠§È¢ò„ÄÇÂè™Ë¶ÅÊää‰∏ã‰∏™ÁªìÁÇπÁöÑ ÂÄº &amp; next ËµãÁªôÂΩìÂâç nodeÔºåÁÑ∂ÂêéÂà†Èô§‰∏ã‰∏™ÁªìÁÇπÔºåÂ∞±ÂèØ‰ª•ÊêûÂÆö„ÄÇ Ê≠£Á°Æ‰ª£Á†Å12345678910111213141516171819202122/** * Definition for singly-linked list. * public class ListNode &#123; * int val; * ListNode next; * ListNode(int x) &#123; val = x; &#125; * &#125; */class Solution &#123; public void deleteNode(ListNode node) &#123; // ‰øùÂ≠ò‰∏ã‰∏Ä‰∏™ÁªìÁÇπ ListNode tmp = node.next; // Â∞Ü‰∏ã‰∏™ÁªìÁÇπÁöÑÂÄºËµãÁªôÂΩìÂâçË¶ÅÂà†Èô§ÁöÑÁªìÁÇπ node.val = node.next.val; node.next = node.next.next; // tmp ÁΩÆ‰∏∫Á©∫ÔºåËÆ© jvm ËøõË°åÂûÉÂúæÂõûÊî∂ tmp = null; &#125;&#125; Ê∂âÂèäÁöÑÁü•ËØÜÁÇπ ÈìæË°®ÁöÑÊûÑÂª∫ ÈìæË°®Âà†Èô§ ‰∏çË∂≥ÂØπÈìæË°®Êìç‰ΩúËøò‰∏çÊòØÂæàÈ©æËΩªÂ∞±ÁÜüÔºåÊé•‰∏ãÊù•‰ºöÈáçÁÇπËÆ≠ÁªÉÈìæË°®Êìç‰Ωú„ÄÇ Á¨¨19È¢òÔºöÂà†Èô§ÈìæË°®ÁöÑÂÄíÊï∞Á¨¨N‰∏™ËäÇÁÇπÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ÈìæË°®ÔºåÂà†Èô§ÈìæË°®ÁöÑÂÄíÊï∞Á¨¨ n ‰∏™ËäÇÁÇπÔºåÂπ∂‰∏îËøîÂõûÈìæË°®ÁöÑÂ§¥ÁªìÁÇπ„ÄÇ Á§∫‰æã123ÁªôÂÆö‰∏Ä‰∏™ÈìæË°®: 1-&gt;2-&gt;3-&gt;4-&gt;5, Âíå n = 2.ÂΩìÂà†Èô§‰∫ÜÂÄíÊï∞Á¨¨‰∫å‰∏™ËäÇÁÇπÂêéÔºåÈìæË°®Âèò‰∏∫ 1-&gt;2-&gt;3-&gt;5. ËØ¥ÊòéÔºö ÁªôÂÆöÁöÑ n ‰øùËØÅÊòØÊúâÊïàÁöÑ„ÄÇ ÊàëÁöÑÊÄùË∑ØÂà†Èô§ÂÄíÊï∞Á¨¨n‰∏™ËäÇÁÇπÔºåËøô‰∏™ÊÄùË∑ØÊØîËæÉÁÆÄÂçïÔºåÂ∞±ÊòØËøêÁî®‰∏§‰∏™ÊåáÈíà fast Âíå slow Ôºå‰∏Ä‰∏™ÊåáÈíàÊØîÂè¶Â§ñ‰∏Ä‰∏™Â§ön-1Ê≠•ÔºåËøôÊ†∑ÁöÑËØùÂΩìfastÊåáÈíàÂà∞ÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÁöÑÊó∂ÂÄôÔºåslowÊåáÈíàÂàöÂ•ΩÂà∞ËææË¶ÅÂà†Èô§ÁöÑËäÇÁÇπÁöÑ‰ΩçÁΩÆÔºåÊ≠§Êó∂Â∞±ÂèØ‰ª•Áî®‰∏äÈ¢òÁî®ËøáÁöÑÊõøË∫´Áâ∫Áâ≤Ê≥ïÔºåÁâ∫Áâ≤ÊéâË¶ÅÂà†Èô§ËäÇÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπÔºåÂè™ÈúÄË¶ÅÂ∞Ü‰∏ã‰∏Ä‰∏™ËäÇÁÇπÁöÑÂÄºËµãÂÄºÁªôÂΩìÂâçËäÇÁÇπÂπ∂‰∏îÂ∞Üslow.next = slow.next.nextÂç≥ÂèØ„ÄÇ‰ΩÜÊòØÔºåÊúâÁâπÊÆäÊÉÖÂÜµ Ôºö ÂΩìË¶ÅÂà†Èô§ÁöÑËäÇÁÇπÊòØÊúÄÂêé‰∏Ä‰∏™Êó∂ÔºåÊó†Ê≥ïÂÅöÂà∞Áî®‰∏ã‰∏Ä‰∏™ËäÇÁÇπÊõøÊç¢ÔºåËøô‰∏™Êó∂ÂÄôÂ∞±Ë¶ÅÊèêÂâçÈ¢ÑÂà§Ôºå‰∏çËÉΩÁ≠âÂà∞slowÂà∞‰∫ÜÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÊâçËÄÉËôëÂà†Èô§ÔºåË¶ÅÂú®slow.next.next == nullÊó∂Â∞±ËÄÉËôëÔºÅÔºÅÔºÅ ÊàëÁöÑ‰ª£Á†ÅÔºàACÔºâ12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667package Á¨¨19È¢ò;//import Á¨¨237È¢ò_Âà†Èô§ÈìæË°®‰∏≠ÁöÑËäÇÁÇπ.Node;import java.util.ArrayList;import java.util.Scanner;public class removeNthFromEnd &#123; public static void main(String[] args) &#123; System.out.println("ËØ∑ËæìÂÖ•‰∏Ä‰∏≤Êï∞Â≠ó‰ª£Ë°®ÈìæË°®Ôºö"); Scanner sc = new Scanner(System.in); String head = sc.nextLine(); char[] chars = head.toCharArray();// System.out.println(chars); ArrayList list = new ArrayList(); ListNode head_first = new ListNode(-1); ListNode temp = head_first; for(int i = 0 ; i &lt; chars.length ; i++)&#123; temp.next = new ListNode(Integer.parseInt(String.valueOf(chars[i]))); temp = temp.next; list.add(chars[i]); &#125; System.out.println("ÊÇ®ËæìÂÖ•ÁöÑÈìæË°®‰∏∫Ôºö "+ list); System.out.print("ËØ∑ÊÇ®ËæìÂÖ•Ë¶ÅÂà†Èô§ÁöÑÂÄíÊï∞Á¨¨n‰∏™Êï∞ÁöÑËäÇÁÇπÔºån = "); String number = sc.nextLine(); int num = Integer.parseInt(number); ListNode result_node = removeNthFromEnd(head_first.next,num); ListNode temp1 = result_node; while(temp1 != null)&#123;// int data = Integer.parseInt(String.valueOf(temp1.val)); System.out.print(temp1.val); temp1 = temp1.next; &#125; &#125; public static ListNode removeNthFromEnd(ListNode head, int n) &#123; ListNode pre = new ListNode(-1); pre.next = head; ListNode fast = pre; ListNode slow = pre; // Âø´ÊåáÈíàÂÖàËµ∞ n-1 Ê≠• for (int i = 0; i &lt; n-1; ++i) &#123; fast = fast.next; &#125; while (fast.next != null &amp;&amp; slow.next.next != null) &#123; fast = fast.next; slow = slow.next; &#125;// ListNode tmp = slow.next; if(slow.next.next == null &amp;&amp; (n == 1)) &#123; slow.next = null; &#125; else &#123; slow.val = slow.next.val; slow.next = slow.next.next;// tmp = null; &#125; return pre.next; &#125;&#125; 12345678910package Á¨¨19È¢ò;public class ListNode &#123; int val; ListNode next; ListNode(int x) &#123; val = x; &#125; &#125; Ê≠£Á°ÆÊÄùË∑ØÂø´ÊåáÈíà fast ÂÖàËµ∞ n Ê≠•ÔºåÊé•ÁùÄÂø´ÊåáÈíà fast ‰∏éÊÖ¢ÊåáÈíà slow ÂêåÊó∂ÂâçËøõÔºåÁ≠âÂà∞Âø´ÊåáÈíàÊåáÂêëÈìæË°®ÊúÄÂêé‰∏Ä‰∏™ÁªìÁÇπÊó∂ÔºåÂÅúÊ≠¢ÂâçËøõ„ÄÇÁÑ∂ÂêéÂ∞Ü slow ÁöÑ next ÊåáÂêë slow.next.nextÔºåÂç≥Âà†Èô§‰∫ÜÁ¨¨ n ‰∏™ÁªìÁÇπ„ÄÇÊúÄÂêéËøîÂõûÂ§¥ÊåáÈíà„ÄÇ ËøôÈáåËÆæÁΩÆ‰∫Ü pre ËôöÊãüÁªìÁÇπ(ÊåáÂêë head )ÊòØ‰∏∫‰∫ÜÊñπ‰æøÂ§ÑÁêÜÂè™Êúâ‰∏Ä‰∏™ÁªìÁÇπÁöÑÊÉÖÂÜµ„ÄÇ Ê≠£Á°Æ‰ª£Á†Å12345678910111213141516171819202122232425262728/** * Definition for singly-linked list. * public class ListNode &#123; * int val; * ListNode next; * ListNode(int x) &#123; val = x; &#125; * &#125; */class Solution &#123; public ListNode removeNthFromEnd(ListNode head, int n) &#123; ListNode pre = new ListNode(-1); pre.next = head; ListNode fast = pre; ListNode slow = pre; // Âø´ÊåáÈíàÂÖàËµ∞ n Ê≠• for (int i = 0; i &lt; n; ++i) &#123; fast = fast.next; &#125; while (fast.next != null) &#123; fast = fast.next; slow = slow.next; &#125; slow.next = slow.next.next; return pre.next; &#125;&#125; Ê∂âÂèäÁöÑÁü•ËØÜÁÇπÂçïÈìæË°®ÁöÑÂà†Èô§‚Ä¶ÊØîËæÉÁÆÄÂçïÂï¶ ‰∏çË∂≥‰∏™‰∫∫ÊÑüËßâÂÖ∂ÂÆûÁ≠îÊ°àÁöÑËß£Ê≥ïËøòÊòØË¶ÅÊØîÊàëÁöÑÂ•Ω‰∏Ä‰∫õÔºåÂÆÉÊòØÈÄöËøáÁõ¥Êé•ÊâæÂà∞Âà†Èô§ËäÇÁÇπÁöÑÂâç‰∏Ä‰∏™ÔºåËøôÊ†∑Â∞±ÈùûÂ∏∏Â•ΩÂ§ÑÁêÜ‰∫ÜÔºåËÄå‰∏îËøòÊ≤°ÊúâÁâπÊÆäÊÉÖÂÜµ‚Ä¶ÊàëÂ∞±ÂæàÁ¨®‰∫ÜÔºåËøòËá™‰ª•‰∏∫ÊòØÁöÑÁî®‰∫Ü‰∏Ä‰∏™ÊõøË∫´ÊîªÂáªÁöÑÊñπÊ≥ï‚Ä¶Â≠¶Âà∞‰∫ÜÔºÅÔºÅÔºÅË¶ÅËÆ∞ÂæóÁî®Âà∞Âà†Èô§ËäÇÁÇπÁöÑÂâç‰∏Ä‰∏™ËäÇÁÇπÔºåËøôÊâçÊòØÂçïÈìæË°®ÁöÑÂÖ≥ÈîÆ„ÄÇ Á¨¨21È¢òÔºöÂêàÂπ∂‰∏§‰∏™ÊúâÂ∫èÈìæË°®È¢òÁõÆÂ∞Ü‰∏§‰∏™ÊúâÂ∫èÈìæË°®ÂêàÂπ∂‰∏∫‰∏Ä‰∏™Êñ∞ÁöÑÊúâÂ∫èÈìæË°®Âπ∂ËøîÂõû„ÄÇÊñ∞ÈìæË°®ÊòØÈÄöËøáÊãºÊé•ÁªôÂÆöÁöÑ‰∏§‰∏™ÈìæË°®ÁöÑÊâÄÊúâËäÇÁÇπÁªÑÊàêÁöÑ„ÄÇ Á§∫‰æã12ËæìÂÖ•Ôºö1-&gt;2-&gt;4, 1-&gt;3-&gt;4ËæìÂá∫Ôºö1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4 ÊàëÁöÑÊÄùË∑ØÂàõÂª∫‰∏Ä‰∏™Êñ∞ÈìæË°®ÔºåÁÑ∂ÂêéÊØîËæÉ‰∏§‰∏™ÈìæË°®ÔºåÂì™‰∏™Â∞èÂ∞±ËÆ©Êñ∞ÈìæË°®ÁöÑnextÊåáÂêë‰ªñÔºåÂ¶ÇÊûúÊúâ‰∏Ä‰∏™ÊèêÂâçÁªìÊùü‰∫ÜÔºåÂâ©‰∏ãÁöÑÈìæË°®Êé•‰∏äÊñ∞ÈìæË°®ÁöÑÂêéÂçäÈÉ®ÂàÜ„ÄÇ ÊàëÁöÑ‰ª£Á†ÅÔºàACÔºâ123456789101112131415161718192021public static ListNode merge(ListNode l1, ListNode l2)&#123; ListNode prehead = new ListNode(-1); ListNode prev = prehead; while (l1 != null &amp;&amp; l2 != null) &#123; if (l1.val &lt;= l2.val) &#123; prev.next = l1; l1 = l1.next; &#125; else &#123; prev.next = l2; l2 = l2.next; &#125; prev = prev.next; &#125; // exactly one of l1 and l2 can be non-null at this point, so connect // the non-null list to the end of the merged list. prev.next = l1 == null ? l2 : l1; return prehead.next; &#125; 1234567package Á¨¨21È¢ò;public class ListNode &#123; int val; ListNode next; ListNode(int x) &#123; val = x; &#125;&#125; Ê≠£Á°ÆÊÄùË∑ØÂà©Áî®ÈìæË°®Â§©ÁÑ∂ÁöÑÈÄíÂΩíÊÄß„ÄÇÂ¶ÇÊûú l1 ‰∏∫Á©∫ÔºåËøîÂõû l2ÔºõÂ¶ÇÊûú l2 ‰∏∫Á©∫ÔºåËøîÂõû l1„ÄÇÂ¶ÇÊûú l1.val &lt; l2.valÔºåËøîÂõû l1-&gt;mergeTwoLists(l1.next, l2)ÔºõÂê¶ÂàôËøîÂõû l2-&gt;mergeTwoLists(l1, l2.next)„ÄÇ Ê≠£Á°Æ‰ª£Á†Å123456789101112131415161718192021222324/** * Definition for singly-linked list. * public class ListNode &#123; * int val; * ListNode next; * ListNode(int x) &#123; val = x; &#125; * &#125; */class Solution &#123; public ListNode mergeTwoLists(ListNode l1, ListNode l2) &#123; if (l1 == null) &#123; return l2; &#125; if (l2 == null) &#123; return l1; &#125; if (l1.val &lt; l2.val) &#123; l1.next = mergeTwoLists(l1.next, l2); return l1; &#125; l2.next = mergeTwoLists(l1, l2.next); return l2; &#125;&#125; Ê∂âÂèäÁöÑÁü•ËØÜÁÇπÈìæË°®ÁÆóÊ≥ïÈ¢òÈù¢ËØïÂøÖÁúãÂøÖÁúãÂøÖÁúãÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅ Á¨¨23È¢òÔºöÂêàÂπ∂K‰∏™ÊéíÂ∫èÈìæË°®È¢òÁõÆÂêàÂπ∂ k ‰∏™ÊéíÂ∫èÈìæË°®ÔºåËøîÂõûÂêàÂπ∂ÂêéÁöÑÊéíÂ∫èÈìæË°®„ÄÇËØ∑ÂàÜÊûêÂíåÊèèËø∞ÁÆóÊ≥ïÁöÑÂ§çÊùÇÂ∫¶„ÄÇ Á§∫‰æã1234567ËæìÂÖ•:[ 1-&gt;4-&gt;5, 1-&gt;3-&gt;4, 2-&gt;6]ËæìÂá∫: 1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4-&gt;5-&gt;6 ÊàëÁöÑÊÄùË∑ØÊàëÊ≤°ÂÅöÂá∫Êù•ÔºåÁÑ∂ÂêéÁúã‰∫Ü‰∏ãËÆ®ËÆ∫Âå∫ÔºåÂ§ßÊ¶ÇÊÄªÁªìÂá∫‰∏âÁßçÊÄùË∑ØÔºö ËøêÁî®‰ºòÂÖàÁ∫ßÈòüÂàóÔºåÂ∞ÜÊï¥‰∏™ÈìæË°®ÊâîÂà∞‰ºòÂÖàÁ∫ßÈòüÂàó‰∏≠ÔºåÁÑ∂Âêé‰∏Ä‰∏™‰∏™ÂèñÂá∫Êù•Â∞±ÂèØ‰ª•‰∫ÜÔºåËøôÁßçÊÄùË∑Ø‰ª£Á†ÅÂÆûÁé∞ÊØîËæÉÁÆÄÂçïÔºå‰ΩÜÊòØÁî®‰∫Ü‰∫∫ÂÆ∂Â∞ÅË£ÖÂ•ΩÁöÑ‰∏úË•øÔºåÊÄªÊÑüËßâÊúâÁÇπÊäïÊú∫ÂèñÂ∑ßÁöÑÊÑüËßâ‚Ä¶ ËøêÁî®ÂàÜÊ≤ªÂΩíÂπ∂ÁöÑÊÄùÊÉ≥ÔºåK‰∏™ÈìæË°®‰∏§‰∏§ËøõË°åÂΩíÂπ∂„ÄÇ Âº∫Ë°åÂΩíÂπ∂Ôºå‰∏§‰∏™ÂΩíÂπ∂ÂÆåÁõ¥Êé•ÊîæÂà∞ÂêéËÄÖÔºåÁÑ∂ÂêéÂêéËÄÖÂÜçË∑üÂêéÈù¢ÁöÑÊéíÂ∫èÔºåËøôÊ†∑Â§çÊùÇÂ∫¶ÂæàÈ´ò„ÄÇ ÊàëÁöÑ‰ª£Á†Å123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/** * Definition for singly-linked list. * public class ListNode &#123; * int val; * ListNode next; * ListNode(int x) &#123; val = x; &#125; * &#125; */class Solution &#123; public ListNode mergeKLists(ListNode[] lists) &#123; if (lists == null || lists.length == 0) &#123; return null; &#125; int len = lists.length; if (len == 1) &#123; return lists[0]; &#125; // ÂêàÂπ∂ÂâçÂêé‰∏§‰∏™ÈìæË°®ÔºåÁªìÊûúÊîæÂú®Âêé‰∏Ä‰∏™ÈìæË°®‰ΩçÁΩÆ‰∏äÔºå‰æùÊ¨°Âæ™ÁéØ‰∏ãÂéª for (int i = 0; i &lt; len - 1; ++i) &#123; lists[i + 1] = mergeTwoLists(lists[i], lists[i + 1]); &#125; return lists[len - 1]; &#125; /** * ÂêàÂπ∂‰∏§‰∏™ÊúâÂ∫èÈìæË°® * @param l1 * @param l2 * @return listNode */ private ListNode mergeTwoLists(ListNode l1, ListNode l2) &#123; if (l1 == null) &#123; return l2; &#125; if (l2 == null) &#123; return l1; &#125; if (l1.val &lt; l2.val) &#123; l1.next = mergeTwoLists(l1.next, l2); return l1; &#125; l2.next = mergeTwoLists(l1, l2.next); return l2; &#125;&#125; Ê≠£Á°ÆÊÄùË∑Ø Á¨¨‰∏ÄÁßçÔºå‰ºòÂÖàÁ∫ßÈòüÂàóÔºå20ms, Â§çÊùÇÂ∫¶ Êó∂Èó¥Â§çÊùÇÂ∫¶Ôºö O(Nlogk) ÔºåÂÖ∂‰∏≠ k ÊòØÈìæË°®ÁöÑÊï∞ÁõÆ„ÄÇÂºπÂá∫Êìç‰ΩúÊó∂ÔºåÊØîËæÉÊìç‰ΩúÁöÑ‰ª£‰ª∑‰ºöË¢´‰ºòÂåñÂà∞ O(logk) „ÄÇÂêåÊó∂ÔºåÊâæÂà∞ÊúÄÂ∞èÂÄºËäÇÁÇπÁöÑÊó∂Èó¥ÂºÄÈîÄ‰ªÖ‰ªÖ‰∏∫ O(1)„ÄÇÊúÄÂêéÁöÑÈìæË°®‰∏≠ÊÄªÂÖ±Êúâ N ‰∏™ËäÇÁÇπ„ÄÇ Á©∫Èó¥Â§çÊùÇÂ∫¶ÔºöO(n) „ÄÇÂàõÈÄ†‰∏Ä‰∏™Êñ∞ÁöÑÈìæË°®ÈúÄË¶Å O(n) ÁöÑÂºÄÈîÄ„ÄÇO(k) „ÄÇ‰ª•‰∏ä‰ª£Á†ÅÈááÁî®‰∫ÜÈáçÂ§çÂà©Áî®ÂéüÊúâËäÇÁÇπÔºåÊâÄ‰ª•Âè™Ë¶Å O(1) ÁöÑÁ©∫Èó¥„ÄÇÂêåÊó∂‰ºòÂÖàÈòüÂàóÔºàÈÄöÂ∏∏Áî®Â†ÜÂÆûÁé∞ÔºâÈúÄË¶Å O(k) ÁöÑÁ©∫Èó¥ÔºàËøúÊØîÂ§ßÂ§öÊï∞ÊÉÖÂÜµÁöÑ NË¶ÅÂ∞èÔºâ„ÄÇ ËøáÁ®ãÔºö 1.Âõ†‰∏∫ÈìæË°®ÊúâÂ∫èÔºåÊâÄ‰ª•Áî®ÊØè‰∏™ÈìæË°®ÁöÑÈ¶ñÂÖÉÁ¥†ÊûÑÂª∫ÂàùËØïÂ†Ü(Â∞èÈ°∂Â†Ü) ‚Äì ÁöÑÈòüÂàó 2.È¶ñÂÖÉÁ¥†Âá∫ÈòüÔºåËØ•ÂÖÉÁ¥†nextÊåáÂêëÂÖÉÁ¥†ÂÖ•Èòü Á¨¨‰∫åÁßçÔºåÂΩíÂπ∂ÂàÜÊ≤ªÔºåÂÖ∏ÂûãÁöÑÂΩíÂπ∂ÂàÜÊ≤ªÊÄùÊÉ≥ÔºåËá™Â∫ïÂêë‰∏äÔºå‰æùÊ¨°ÂêàÂπ∂(ÂèØÁªìÂêàÂΩíÂπ∂ÊéíÂ∫èÁêÜËß£ÔºåÂ∞ÜÊØè‰∏™ÈìæË°®ÁêÜËß£ÊàêÊéíÂ∫èÁöÑÂÄº)„ÄÇ Â§çÊùÇÂ∫¶ÂàÜÊûê Êó∂Èó¥Â§çÊùÇÂ∫¶Ôºö O(Nlogk) ÔºåÂÖ∂‰∏≠ k ÊòØÈìæË°®ÁöÑÊï∞ÁõÆ„ÄÇÁ©∫Èó¥Â§çÊùÇÂ∫¶ÔºöO(1)ÔºåÊàë‰ª¨ÂèØ‰ª•Áî® O(1) ÁöÑÁ©∫Èó¥ÂÆûÁé∞‰∏§‰∏™ÊúâÂ∫èÈìæË°®ÁöÑÂêàÂπ∂„ÄÇ Á¨¨‰∏âÁßçÔºåÂº∫Ë°åÂÅö„ÄÇËßÅÊàëÁöÑ‰ª£Á†ÅÔºå170ms Áî®Á¨¨‰∏Ä‰∏™Èìæ‰æùÊ¨°ÂíåÂêéÈù¢ÁöÑÊâÄÊúâÈìæËøõË°åÂèåÈìæÂêàÂπ∂ÔºåÂà©Áî®021ÁöÑÂèåÈ°∫Â∫èÈìæÂêàÂπ∂ÔºåÁßíÊùÄÔºÅ‰ΩÜÊòØÊïàÁéáÊûÅ‰ΩéÔºå Êó∂Èó¥Â§çÊùÇÂ∫¶ÊòØO(x(a+b) + (x-1)(a+b+c) + ‚Ä¶ + 1 * (a+b+‚Ä¶+z);[a-z]ÊòØÂêÑÈìæË°®ÈïøÂ∫¶ÔºåxË°®Á§∫ÈìæË°®‰∏™Êï∞-1ÔºåÂèØËßÅÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØÊûÅÂ§ßÁöÑ„ÄÇ Ê≠£Á°Æ‰ª£Á†Å ‰ºòÂÖàÁ∫ßÈòüÂàó 12345678910111213141516171819202122public ListNode mergeKLists(ListNode[] lists) &#123; int len = 0; if((len=lists.length)==0 || lists == null) return null; ListNode preHead = new ListNode(-1); ListNode preNode = preHead; PriorityQueue&lt;ListNode&gt; queue = new PriorityQueue&lt;&gt;(len, new Comparator&lt;ListNode&gt;() &#123; @Override public int compare(ListNode o1, ListNode o2) &#123; return o1.val - o2.val; &#125; &#125;); for (ListNode node : lists) &#123; if(node!=null) queue.add(node); &#125; while(!queue.isEmpty())&#123; ListNode small = queue.poll(); preNode.next = small; if(small.next!=null) queue.add(small.next); //Â∞ÜÊúÄÂ∞èÂÄºËäÇÁÇπÂêéÈù¢ÁöÑËäÇÁÇπÊ∑ªÂä†Âà∞ÈòüÈáå‰∏≠ preNode = preNode.next; &#125; return preHead.next; &#125; ÂΩíÂπ∂ÂàÜÊ≤ª 1234567891011121314151617181920212223242526272829303132333435363738394041/* * @lc app=leetcode.cn id=23 lang=java * * [23] ÂêàÂπ∂K‰∏™ÊéíÂ∫èÈìæË°® */// @lc code=start/** * Definition for singly-linked list. * public class ListNode &#123; * int val; * ListNode next; * ListNode(int x) &#123; val = x; &#125; * &#125; */class Solution &#123; public ListNode mergeKLists(ListNode[] lists) &#123; if (lists == null || lists.length == 0) return null; return merge(lists, 0, lists.length - 1); &#125; private ListNode merge(ListNode[] lists, int left, int right) &#123; if (left == right) return lists[left]; int mid = left + (right - left) / 2; ListNode l1 = merge(lists, left, mid); ListNode l2 = merge(lists, mid + 1, right); return mergeTwoLists(l1, l2); &#125; private ListNode mergeTwoLists(ListNode l1, ListNode l2) &#123; if (l1 == null) return l2; if (l2 == null) return l1; if (l1.val &lt; l2.val) &#123; l1.next = mergeTwoLists(l1.next, l2); return l1; &#125; else &#123; l2.next = mergeTwoLists(l1,l2.next); return l2; &#125; &#125; &#125; Ê∂âÂèäÁöÑÁü•ËØÜÁÇπÂåÖÊã¨‰∫Ü‰ºòÂÖàÁ∫ßÈòüÂàó„ÄÅÊúÄÂ∞èÂ†Ü„ÄÅÂΩíÂπ∂‰ª•Âèä ÂàÜÊ≤ªÁöÑÊÄùÊÉ≥ ‰ºòÂÖàÁ∫ßÈòüÂàó„ÄÇjava‰∏≠ÁöÑ‰ºòÂÖàÁ∫ßÈòüÂàóÊòØPriorityQueueÔºåÊòØÈÄöËøáÊúÄÂ∞èÂ†ÜÂÆûÁé∞ÁöÑ ÊúÄÂ∞èÂ†Ü ÂΩíÂπ∂ ÂàÜÊ≤ª Á¨¨5È¢ò ÊúÄÈïøÂõûÊñáÂ≠ê‰∏≤È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ sÔºåÊâæÂà∞ s ‰∏≠ÊúÄÈïøÁöÑÂõûÊñáÂ≠ê‰∏≤„ÄÇ‰Ω†ÂèØ‰ª•ÂÅáËÆæ s ÁöÑÊúÄÂ§ßÈïøÂ∫¶‰∏∫ 1000„ÄÇ Á§∫‰æãÁ§∫‰æã 1Ôºö 123ËæìÂÖ•: "babad"ËæìÂá∫: "bab"Ê≥®ÊÑè: "aba" ‰πüÊòØ‰∏Ä‰∏™ÊúâÊïàÁ≠îÊ°à„ÄÇ Á§∫‰æã 2Ôºö 12ËæìÂÖ•: "cbbd"ËæìÂá∫: "bb" ÊàëÁöÑÊÄùË∑Ø ÊúÄÂºÄÂßãÁöÑÊÉ≥Ê≥ïÊòØÂ∞ÜÊ∫êÂ≠óÁ¨¶‰∏≤ÁøªËΩ¨ÔºåÁÑ∂ÂêéÂà§Êñ≠ÁøªËΩ¨ÂêéÁöÑÂ≠óÁ¨¶‰∏≤ÂíåÊ∫êÂ≠óÁ¨¶‰∏≤ÁöÑÊúÄÈïøÂÖ¨ÂÖ±Â≠êÂ∫èÂàóÔºå‰ΩÜÊòØË≤å‰ººÊúâÁÇπÈóÆÈ¢òÔºå‰æãÂ¶ÇaccbbdccaÁøªËΩ¨ÂêéÂèò‰∏∫accdbbcca,ÊúÄÈïøÂÖ¨ÂÖ±Â≠êÂ∫èÂàó‰∏∫accÔºå‰ΩÜÊòØÊúÄÈïøÂõûÊñáÂ≠ê‰∏≤‰∏∫bb„ÄÇ ‰ΩÜÊòØ‰∏äÈù¢ÁöÑÊÄùË∑ØÊúâÂèØÂèñ‰πãÂ§ÑÔºåÂÖ∂ÂÆûÈÅáÂà∞ÂõûÊñáÂ≠ê‰∏≤ÊúÄÊ†∏ÂøÉÁöÑÈóÆÈ¢òÊòØ‰ªé‰∏≠Èó¥ÂºÄÂßã‰æùÊ¨°ÊØîËæÉÂ∑¶Âè≥ÊòØÂê¶Áõ∏Á≠âÔºåÁõ¥Âà∞‰∏çÁõ∏Á≠âÔºåËøîÂõûÂ∑¶Âè≥Áõ∏Á≠âÁöÑÂ≠ê‰∏≤ÔºåÂΩìÁÑ∂ËøòÊúâ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ∞±ÊòØËØ•ÂõûÊñáÂ≠ê‰∏≤ÂèØËÉΩÊòØÂçïÊï∞Ôºå‰πüÂèØËÉΩÊòØÂèåÊï∞ÔºåÂçïÊï∞ÁöÑËØùÔºåÁõ¥Êé•ÊØîËæÉËØ•Êï∞ÁöÑÂ∑¶Âè≥Âç≥ÂèØÔºåÂèåÊï∞ÂàôÈúÄË¶ÅÂÖàÂà§Êñ≠ÊúÄÂºÄÂßã‰∏§Êï∞ÊòØÂê¶Áõ∏Á≠â„ÄÇ Êó∂Èó¥Â§çÊùÇÂ∫¶ÊòØO(n¬≤)ÔºåÁ©∫Èó¥Â§çÊùÇÂ∫¶O(1) ÊàëÁöÑ‰ª£Á†ÅÔºàACÔºâÁæéÂÖ∂ÂêçÊõ∞ ‰∏≠ÂøÉÊâ©Â±ïÁÆóÊ≥ï 12345678910111213141516171819202122232425262728package Dynamic_Programming.ÊúÄÈïøÂõûÊñáÂ≠ê‰∏≤;public class Solution &#123; public static String longestPalindrome(String s) &#123; String res = ""; for(int i = 0;i &lt; s.length(); i++)&#123; String single = palindrome(s,i,i); String dou = palindrome(s,i,i+1); res = res.length() &gt; single.length() ? res : single; res = res.length() &gt; dou.length() ? res : dou; &#125; return res; &#125; private static String palindrome(String s, int left, int right) &#123; char[] s1 = s.toCharArray(); while(left &gt;= 0 &amp;&amp; right &lt; s.length() &amp;&amp; s1[left] == s1[right])&#123; left--; right++; &#125; return s.substring(left + 1,right); &#125; public static void main(String[] args) &#123; String res = longestPalindrome("aaabaacc"); System.out.println(res); &#125;&#125; Ê≠£Á°ÆÊÄùË∑ØÂíå‰ª£Á†Ådp12345678910111213141516171819202122232425 private static String dp(String s)&#123; //ÊØèÊ¨°ÈÉΩÂøòËÆ∞‰∫ÜËæπÁïåÂ§ÑÁêÜ if(s == null || s.length() &lt; 1)&#123; return ""; &#125; char[] s1 = s.toCharArray(); int len = s1.length; int max = 1;// int over = 1; int start = 0; boolean res[][] = new boolean[len][len]; //Ê≠§Êó∂ÁöÑjÊòØÊúÄÂè≥ËæπÁöÑÊï∞ //Ê≠§Êó∂ÁöÑiÊòØÊúÄÂ∑¶ËæπÁöÑÊï∞ for(int j = 0; j &lt; s1.length; j++)&#123; for(int i = 0; i &lt;= j ;i++ )&#123; res[i][j] = (j &lt;= i + 2) ? s1[i] == s1[j] : res[i+1][j-1] &amp;&amp; s1[i] == s1[j]; if(res[i][j] &amp;&amp; max &lt; j - i + 1)&#123; max = j - i + 1; start = i; &#125; &#125; &#125; return s.substring(start,start + max); &#125; ÂÖ≥ÈîÆÂ∞±ÊòØÊö¥ÂäõÊ≥ïÔºö res[i][j] = (j &lt;= i + 2) ? s1[i] == s1[j] : res[i+1][j-1] &amp;&amp; s1[i] == s1[j]; ‰∏äÈù¢Â∞±ÊòØdpÊúÄ‰∏∫ÂÖ≥ÈîÆÁöÑÁä∂ÊÄÅËΩ¨ÁßªÈÄíÊé®ÂºèÔºå‰∏∫‰ªÄ‰πàÂú®dp‰∏≠‰∏çÁî®ËÄÉËôëÂõûÊñá‰∏≤ÈïøÂ∫¶ÁöÑÂ•áÂÅ∂Âë¢ÔºåÂõ†‰∏∫ÊàëÁöÑÊñπÊ≥ï‰∏≠ÊòØ‰ªé‰∏≠Èó¥Êâ©Êï£ÔºåÈÇ£‰πàÂ∞±ÂøÖÁÑ∂ÈúÄË¶ÅÂàÜÁ±ªÔºåËÄådpÊòØ‰ªé‰∏§ËæπÂêë‰∏≠Èó¥Èù†ÔºåË¶ÅÊòØÂõûÊñá‰∏≤È¶ñÂ∞æÂøÖÈ°ªÁõ∏ÂêåÔºåËÄåÂΩìÂõûÊñá‰∏≤Â∞è‰∫éÁ≠â‰∫é3Êó∂ÔºåÂè™Ë¶ÅÊØîËæÉÁöÑÈ¶ñÂ∞æÁõ∏Á≠âÔºåÂàôÊó†ÈúÄÂÜçÊØîËæÉÔºåËøôÊ†∑ÂõûÊñá‰∏≤ÁöÑÂ•áÂÅ∂Â∞±‰∏çÈúÄË¶ÅÂÜçËÄÉËôë‰∫Ü„ÄÇ ÁªÜÁªÜÊÉ≥Êù•ÔºåÂÖ∂ÂÆûdpÂ∞±ÊòØ‰∏≠ÂøÉÊâ©Â±ïÊñπÊ≥ïÁöÑÈÄÜÔºå‰∏Ä‰∏™ÊòØ‰ªé‰∏≠Èó¥Âêë‰∏§ËæπÂèëÊï£Ôºå‰∏Ä‰∏™ÊòØ‰∏§ËæπÂêë‰∏≠Èó¥Èù†Êã¢ÔºÅÔºÅ TipsÔºö Ê≥®ÊÑèËæπÁïåÂ§ÑÁêÜÔºåÂõ†‰∏∫ str.substring Ëøô‰∏™ÊòØ‰∏çÂÖÅËÆ∏Â≠óÁ¨¶‰∏≤‰∏∫ null ÁöÑ Êó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(n¬≤)ÔºåÁ©∫Èó¥Â§çÊùÇÂ∫¶‰∏∫O(n¬≤) Ê≥®ÊÑè‰∫åÁª¥Êï∞ÁªÑÁöÑÁª¥Â∫¶ÂàÜÂà´ÊòØ‰ª£Ë°®È¶ñÂíåÂ∞æÔºåÂ≠ê‰∏≤ÊòØÂê¶‰∏∫ÂõûÊñá‰∏≤ÂèñÂÜ≥‰∫éÂ≠êÂ≠ê‰∏≤ÂíåÈ¶ñÂ∞æÊòØÂê¶Áõ∏Á≠âÔºåË¶ÅÊ≥®ÊÑèbase caseÊòØÂ≠ê‰∏≤‰∏∫1‰∏™Â≠óÁ¨¶Êó∂ÔºåÂÆÉÂøÖ‰∏∫ÂõûÊñáÂ≠ê‰∏≤ ÊúÄÊ†∏ÂøÉÁöÑÂ∞±ÊòØÁä∂ÊÄÅËΩ¨ÁßªÁöÑÊù°‰ª∂ÔºåÊòØÂàÜ‰∏∫‰∏§ÁßçÂ∞èÊÉÖÂÜµÔºå‰∏ÄÁßçÊòØÂΩìÊ∫êÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶&lt;=3Êó∂ ÂΩìÊ∫êÂ≠óÁ¨¶‰∏≤ÂÖÉÁ¥†‰∏™Êï∞‰∏∫3‰∏™ÔºåËã•Â∑¶Âè≥ËæπÁïåÁõ∏Á≠âÔºåÂàôÂéªÊéâ‰ªñ‰ª¨ÔºåÂè™Ââ©‰∏Ä‰∏™Â≠óÁ¨¶ÔºåÂøÖ‰∏∫ÂõûÊñá‰∏≤ ÂΩìÊ∫êÂ≠óÁ¨¶‰∏≤ÂÖÉÁ¥†‰∏™Êï∞‰∏∫2‰∏™ÔºåËã•Â∑¶Âè≥ËæπÁïåÁõ∏Á≠âÔºåÂàôÂøÖ‰∏∫ÂõûÊñá‰∏≤ Ê≠§Êó∂ËØ•‰∏≤ÊòØÂê¶‰∏∫ÂõûÊñá‰∏≤Â∞±ÂèñÂÜ≥‰∫éÈ¶ñÂ∞æÔºåÂè¶‰∏ÄÁßçÊÉÖÂÜµÊòØÂΩìÊ∫êÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶&gt;3Êó∂ÔºåÂàôÈúÄË¶ÅÂà§Êñ≠È¶ñÂ∞æÊòØÂê¶Áõ∏Á≠âÂπ∂‰∏îÂéªÈô§È¶ñÂ∞æÂêéÁöÑÂ≠ê‰∏≤ÊòØÂê¶‰∏∫ÂõûÊñá‰∏≤ ÂΩìÂèëÁé∞ÊúâÂõûÊñá‰∏≤Êó∂ÔºåÂàôÂà§Êñ≠‰∏Ä‰∏ãÈïøÂ∫¶ÊòØÂê¶ÊØî‰πãÂâçÂèëÁé∞ÁöÑÈïøÔºåÂ¶ÇÊûúÊòØÔºåÂàôËÆ∞ÂΩïÈïøÂ∫¶ÔºåÂπ∂‰∏îÂ∞ÜÊúÄÈïøÂõûÊñá‰∏≤ÁöÑËµ∑Âßã‰ΩçÁΩÆÊãøÂà∞ÔºåÊúÄÂêéÂÖ®ÈÉ®Âæ™ÁéØÂÆå‰∏ÄÈÅçÂêéÊà™ÂèñÊúÄÈïøÂõûÊñá‰∏≤Âç≥ÂèØ ÈÉ®ÂàÜÁü•ËØÜÁÇπË°•ÂÖÖÊöÇÊó† ÁºñËæëË∑ùÁ¶ª(72)È¢òÁõÆÊèèËø∞Áªô‰Ω†‰∏§‰∏™ÂçïËØç word1 Âíå word2ÔºåËØ∑‰Ω†ËÆ°ÁÆóÂá∫Â∞Ü word1 ËΩ¨Êç¢Êàê word2 ÊâÄ‰ΩøÁî®ÁöÑÊúÄÂ∞ëÊìç‰ΩúÊï∞ „ÄÇ ‰Ω†ÂèØ‰ª•ÂØπ‰∏Ä‰∏™ÂçïËØçËøõË°åÂ¶Ç‰∏ã‰∏âÁßçÊìç‰ΩúÔºö ÊèíÂÖ•‰∏Ä‰∏™Â≠óÁ¨¶ Âà†Èô§‰∏Ä‰∏™Â≠óÁ¨¶ ÊõøÊç¢‰∏Ä‰∏™Â≠óÁ¨¶ Á§∫‰æã 1Ôºö 123456ËæìÂÖ•Ôºöword1 = "horse", word2 = "ros"ËæìÂá∫Ôºö3Ëß£ÈáäÔºöhorse -&gt; rorse (Â∞Ü 'h' ÊõøÊç¢‰∏∫ 'r')rorse -&gt; rose (Âà†Èô§ 'r')rose -&gt; ros (Âà†Èô§ 'e') Á§∫‰æã 2Ôºö 12345678ËæìÂÖ•Ôºöword1 = &quot;intention&quot;, word2 = &quot;execution&quot;ËæìÂá∫Ôºö5Ëß£ÈáäÔºöintention -&gt; inention (Âà†Èô§ &apos;t&apos;)inention -&gt; enention (Â∞Ü &apos;i&apos; ÊõøÊç¢‰∏∫ &apos;e&apos;)enention -&gt; exention (Â∞Ü &apos;n&apos; ÊõøÊç¢‰∏∫ &apos;x&apos;)exention -&gt; exection (Â∞Ü &apos;n&apos; ÊõøÊç¢‰∏∫ &apos;c&apos;)exection -&gt; execution (ÊèíÂÖ• &apos;u&apos;) ‰ª£Á†Å12345678910111213141516171819202122232425class Solution &#123; public int minDistance(String s1, String s2) &#123; int[][] dp = new int[s1.length()+1][s2.length()+1]; for(int i = 0;i&lt;= s1.length();i++)&#123; dp[i][0] = i; &#125; for(int j = 0;j&lt;=s2.length();j++)&#123; dp[0][j] = j; &#125; for(int i = 1;i&lt;= s1.length();i++)&#123; for(int j = 1;j &lt;= s2.length();j++)&#123; if(s1.charAt(i-1) == s2.charAt(j-1))&#123; dp[i][j] = dp[i-1][j-1]; &#125; else&#123; dp[i][j] = Math.min(dp[i-1][j-1] + 1,dp[i-1][j] + 1); dp[i][j] = Math.min(dp[i][j],dp[i][j-1] + 1); &#125; &#125; &#125; return dp[s1.length()][s2.length()]; &#125;&#125; ‰ºöËÆÆÂÆ§ II(253)È¢òÁõÆÊèèËø∞ÁªôÂÆö‰∏Ä‰∏™‰ºöËÆÆÊó∂Èó¥ÂÆâÊéíÁöÑÊï∞ÁªÑÔºåÊØè‰∏™‰ºöËÆÆÊó∂Èó¥ÈÉΩ‰ºöÂåÖÊã¨ÂºÄÂßãÂíåÁªìÊùüÁöÑÊó∂Èó¥ [[s1,e1],[s2,e2],‚Ä¶] (si &lt; ei)Ôºå‰∏∫ÈÅøÂÖç‰ºöËÆÆÂÜ≤Á™ÅÔºåÂêåÊó∂Ë¶ÅËÄÉËôëÂÖÖÂàÜÂà©Áî®‰ºöËÆÆÂÆ§ËµÑÊ∫êÔºåËØ∑‰Ω†ËÆ°ÁÆóËá≥Â∞ëÈúÄË¶ÅÂ§öÂ∞ëÈó¥‰ºöËÆÆÂÆ§ÔºåÊâçËÉΩÊª°Ë∂≥Ëøô‰∫õ‰ºöËÆÆÂÆâÊéí„ÄÇ Á§∫‰æã 1: 12ËæìÂÖ•: [[0, 30],[5, 10],[15, 20]]ËæìÂá∫: 2 Á§∫‰æã 2: 12ËæìÂÖ•: [[7,10],[2,4]]ËæìÂá∫: 1 ‰ª£Á†Å12345678910111213141516171819class Solution &#123; public int minMeetingRooms(int[][] inter) &#123; if(inter == null || inter.length == 0) return 0; PriorityQueue&lt;Integer&gt; queue = new PriorityQueue&lt;&gt;(); Arrays.sort(inter, Comparator.comparingInt(a -&gt; a[0])); queue.add(inter[0][1]); for(int i = 1;i != inter.length;i++)&#123; int last = queue.peek(); if(last &lt;= inter[i][0])&#123; queue.poll(); queue.add(inter[i][1]); &#125; else &#123; queue.add(inter[i][1]); &#125; &#125; return queue.size(); &#125;&#125; Á¨¨96È¢ò ‰∏çÂêåÁöÑ‰∫åÂèâÊêúÁ¥¢Ê†ëÈ¢òÁõÆÊèèËø∞ÁªôÂÆö‰∏Ä‰∏™Êï¥Êï∞ nÔºåÊ±Ç‰ª• 1 ... n ‰∏∫ËäÇÁÇπÁªÑÊàêÁöÑ‰∫åÂèâÊêúÁ¥¢Ê†ëÊúâÂ§öÂ∞ëÁßçÔºü Á§∫‰æã: 12345678910ËæìÂÖ•: 3ËæìÂá∫: 5Ëß£Èáä:ÁªôÂÆö n = 3, ‰∏ÄÂÖ±Êúâ 5 Áßç‰∏çÂêåÁªìÊûÑÁöÑ‰∫åÂèâÊêúÁ¥¢Ê†ë: 1 3 3 2 1 \ / / / \ \ 3 2 1 1 3 2 / / \ \ 2 1 2 3 Ëß£Ê≥ïÂéüÈóÆÈ¢òÂèØÊãÜËß£‰∏∫Â≠êÈóÆÈ¢òÁöÑÊ±ÇËß£„ÄÇ ‰∫åÂèâÊêúÁ¥¢Ê†ëÔºåÂèØ‰ª•ÂàÜÂà´‰ª• 1/2/3..n ÂÅö‰∏∫Ê†πËäÇÁÇπ„ÄÇÊâÄÊúâÊÉÖÂÜµÁ¥ØÂä†Ëµ∑Êù•Ôºå‰πüÂ∞±ÂæóÂà∞‰∫ÜÊúÄÁªàÁªìÊûú„ÄÇ res[n] Ë°®Á§∫Êï¥Êï∞nÁªÑÊàêÁöÑ‰∫åÂèâÊêúÁ¥¢Ê†ë‰∏™Êï∞„ÄÇÂÆÉÁöÑÂ∑¶Â≠êÊ†ëÂèØ‰ª•Êúâ0/1/2...n-1 ‰∏™ËäÇÁÇπÔºåÂè≥Â≠êÊ†ëÂèØ‰ª•Êúân-1/n-2...0 ‰∏™ËäÇÁÇπ„ÄÇres[n] ÊòØÊâÄÊúâËøô‰∫õÊÉÖÂÜµÁöÑÂä†Âíå„ÄÇ Êó∂Èó¥Â§çÊùÇÂ∫¶ÂàÜÊûêÔºöÁä∂ÊÄÅÊÄªÂÖ±Êúâ n ‰∏™ÔºåÁä∂ÊÄÅËΩ¨ÁßªÁöÑÂ§çÊùÇÂ∫¶ÊòØ O(n)ÔºåÊâÄ‰ª•ÊÄªÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØ O(n¬≤)„ÄÇ ÊôÆÈÄöÁöÑdp 123456789101112class Solution &#123; public int numTrees(int n) &#123; int[] dp = new int[n+1]; dp[0] = 1; for(int i=1;i&lt;=n;i++)&#123; for(int j =1;j&lt;=i;j++)&#123; dp[i] += dp[j-1] * dp[i-j]; &#125; &#125; return dp[n]; &#125;&#125; ‰∏äÈù¢ÁöÑËß£Ê≥ïÊòéÊòæËøòÂèØ‰ª•ÂæóÂà∞ÊîπËøõÔºåÂõ†‰∏∫Â∑¶-Âè≥Â≠êÊ†ëÁöÑËäÇÁÇπ‰∏™Êï∞‰∏∫0,n-1,ÂíåÂ∑¶Âè≥Â≠êÊ†ëËäÇÁÇπ‰∏™Êï∞‰∏∫n-1,0„ÄÇËøô‰∏§ËÄÖÁöÑ‰∫åÂèâÊêúÁ¥¢Ê†ëÁöÑÁªìÊûúËÇØÂÆöÊòØ‰∏ÄËá¥ÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨Â∞±Ê≤°ÊúâÂøÖË¶ÅÁÆó‰∏§ÈÅç„ÄÇ‰ΩÜÊòØÂêåÊó∂Ë¶ÅËÄÉËôëÂà∞Â•áÂÅ∂ÁöÑÈóÆÈ¢ò„ÄÇ Â¶ÇÊûún=4ÔºåÈÇ£‰πàG(4) = G(0) G(3) + G(1) G(2) + G(2) G(1) + G(3) G(0) = 2[G(0) G(3) + G(1) G(2)] Â¶ÇÊûún=5ÔºåÈÇ£‰πàG(5) = G(0) G(4) + G(1) G(3) + G(2) G(2) + G(3) G(1) + G(4) G(0) = 2[G(0) G(4) + G(1) G(3) ] + G(2) G(2) 12345678910111213141516171819202122232425262728class Solution &#123; public int numsTrees2(int n)&#123; if (n == 0) &#123; return 0; &#125; int[] dp = new int[n + 1]; dp[0] = 1; dp[1] = 1; // ÈïøÂ∫¶‰∏∫ 1 Âà∞ n for (int i = 2; i &lt;= n; i++) &#123; // Â∞Ü‰∏çÂêåÁöÑÊï∞Â≠ó‰Ωú‰∏∫Ê†πËäÇÁÇπÔºåÂè™ÈúÄË¶ÅËÄÉËôëÂà∞ len for (int root = 1; root &lt;= i / 2; root++) &#123; int left = root - 1; // Â∑¶Â≠êÊ†ëÁöÑÈïøÂ∫¶ int right = i - root; // Âè≥Â≠êÊ†ëÁöÑÈïøÂ∫¶ dp[i] += dp[left] * dp[right]; &#125; dp[i] *= 2;// Âà©Áî®ÂØπÁß∞ÊÄß‰πò 2 // ËÄÉËôëÂ•áÊï∞ÁöÑÊÉÖÂÜµ if ((i &amp; 1) == 1) &#123; int root = (i &gt;&gt; 1) + 1; int left = root - 1; // Â∑¶Â≠êÊ†ëÁöÑÈïøÂ∫¶ int right = i - root; // Âè≥Â≠êÊ†ëÁöÑÈïøÂ∫¶ dp[i] += dp[left] * dp[right]; &#125; &#125; return dp[n]; &#125;&#125; Áü•ËØÜÁÇπË°•ÂÖÖ LeetCode‰∫åÂèâÊ†ë‰∏ìÈ¢ò‚Äî‚Äî&gt;DFSÂíåBFS Á¨¨95È¢ò ‰∏çÂêåÁöÑ‰∫åÂèâÊêúÁ¥¢Ê†ëIIÈ¢òÁõÆÊèèËø∞ÁªôÂÆö‰∏Ä‰∏™Êï¥Êï∞ nÔºåÁîüÊàêÊâÄÊúâÁî± 1 ‚Ä¶ n ‰∏∫ËäÇÁÇπÊâÄÁªÑÊàêÁöÑ‰∫åÂèâÊêúÁ¥¢Ê†ë„ÄÇ Á§∫‰æã123456789ËæìÂÖ•: 3ËæìÂá∫:[ [1,null,3,2], [3,2,null,1], [3,1,null,null,2], [2,1,3], [1,null,2,null,3]] Ëß£Èáä1234567‰ª•‰∏äÁöÑËæìÂá∫ÂØπÂ∫î‰ª•‰∏ã 5 Áßç‰∏çÂêåÁªìÊûÑÁöÑ‰∫åÂèâÊêúÁ¥¢Ê†ëÔºö 1 3 3 2 1 \ / / / \ \ 3 2 1 1 3 2 / / \ \ 2 1 2 3 Ëß£Ê≥ïËøôÈ¢òÂ∞±ÊòØÂÖ∏ÂûãÁöÑËøêÁî®ÈÄíÂΩíÂéªÂÅöÔºåÊòéÁ°Æ‰∏â‰∏™ÁÇπÔºö ÈÄíÂΩíÂá∫Âè£ ÈÄíÂΩíËøîÂõûÂÄº ‰∏ÄÁ∫ßÈÄíÂΩíÈúÄË¶ÅÂÅö‰ªÄ‰πà ÈÄíÂΩíÂá∫Âè£ÂΩìÊ†ëÊ≤°ÊúâËäÇÁÇπ‰∫ÜÔºåÈÄíÂΩíÁªìÊùüÔºåÊÄé‰πàË°®Á§∫Ê†ëÊ≤°ÊúâËäÇÁÇπÂë¢ÔºåÊâÄ‰ª•Â∞±ÈúÄÊñ∞Âª∫‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂèÇÊï∞ÂåÖÊã¨ËäÇÁÇπÁöÑËµ∑ÂßãÂíåÁªàÊ≠¢„ÄÇ ÈÄíÂΩíËøîÂõûÂÄºËøîÂõûÂÄºÂæàÊòéÊòæÂ∞±ÊòØÁ¨¶ÂêàÊù°‰ª∂ÁöÑÂêÑÁßç‰∫åÂèâÊ†ë,ÊòØ‰∏Ä‰∏™Âê´Ê†πËäÇÁÇπÁöÑÂàóË°®(Ê†πÊçÆÈ¢òÁõÆÊúÄÁªàÈúÄË¶ÅÂæóÂà∞ÁöÑ)„ÄÇ ‰∏ÄÁ∫ßÈÄíÂΩíÈúÄË¶ÅÂÅö‰ªÄ‰πàËøô‰∏™ÊòØÊØîËæÉÈöæÁöÑÂú∞ÊñπÔºåÊàë‰ª¨Êù•ÁºïÁºïÁé∞Âú®Êúâ‰ªÄ‰πàÔºåÊàë‰ª¨Áé∞Âú®Êúâ‰∏â‰∏™ËäÇÁÇπÔºåÊ†πËäÇÁÇπÔºåÂ∑¶Â≠êÊ†ëÊ†πËäÇÁÇπÔºåÂè≥Â≠êÊ†ëÊ†πËäÇÁÇπÔºåËøô‰∏â‰∏™ËäÇÁÇπÊàë‰ª¨ÂèØ‰ª•ÈöèÊÑèÂ∞Ü‰ªªÊÑè‰∏Ä‰∏™ËäÇÁÇπÂΩìÂÅöÊ†πËäÇÁÇπÔºåÁÑ∂ÂêéÂéªÁªÑÂêàÂæóÂà∞Êñ∞ÁöÑÊêúÁ¥¢‰∫åÂèâÊ†ë„ÄÇÊ≥®ÊÑèÔºÅÔºÅÔºÅÊàë‰ª¨Âè™ÈúÄË¶ÅÂÖ≥Ê≥®‰∏ÄÁ∫ßÈÄíÂΩíÂ∞±ÂèØ‰ª•‰∫ÜÔºåÊó†ÈúÄÂÖ≥Ê≥®Â§™Â§öÔºåÊàë‰ª¨Áé∞Âú®Êâã‰∏äÂÅáËÆæÂ∞±‰∏â‰∏™ËäÇÁÇπÂàÜÂà´ÊòØ1,2,3ÔºåÈ¶ñÂÖàË¶ÅÂÅöÁöÑÂ∞±ÊòØÈÅçÂéÜ1Ôºå2Ôºå3ÔºåÂàÜÂà´Â∞ÜÂÖ∂‰Ωú‰∏∫Ê†πËäÇÁÇπÔºåÂÅáËÆæ‰ª•2‰∏∫Ê†πËäÇÁÇπÔºå1‰ª£Ë°®Â∞±ÊòØÂ∑¶Â≠êÊ†ëËøîÂõûÁöÑÊ†πËäÇÁÇπÂàóË°®Ôºå3‰ª£Ë°®ÁöÑÊòØÂè≥Â≠êÊ†ëËøîÂõûÁöÑÊ†πËäÇÁÇπÂàóË°®ÔºåÊàë‰ª¨Ë¶ÅÂÅöÁöÑÂ∞±ÊòØÈÅçÂéÜÂ∑¶Âè≥Â≠êÊ†ëÁöÑÊ†πËäÇÁÇπÂàóË°®ÔºåÂàÜÂà´Â∞ÜÂÖ∂Ê∑ªÂä†Âà∞Ê†πËäÇÁÇπÁöÑÂ∑¶Âè≥Â≠êÊ†ëÔºåÁÑ∂ÂêéÂ∞ÜËØ•Ê†πËäÇÁÇπÊ∑ªÂä†Ëá≥ÂàóË°®ÔºåËøîÂõûÂàóË°®Âç≥ÂèØ„ÄÇ ‰ª£Á†Å1234567891011121314151617181920212223242526272829303132333435/** * Definition for a binary tree node. * public class TreeNode &#123; * int val; * TreeNode left; * TreeNode right; * TreeNode(int x) &#123; val = x; &#125; * &#125; */class Solution &#123; public List&lt;TreeNode&gt; generateTrees(int n) &#123; if (n &lt;= 0) return new ArrayList&lt;&gt;(); return generateTrees(1, n); &#125; private List&lt;TreeNode&gt; generateTrees(int left, int right) &#123; List&lt;TreeNode&gt; list = new ArrayList&lt;&gt;(); if (left &gt; right) &#123; list.add(null); &#125; else &#123; for (int i = left; i &lt;= right; i++) &#123; List&lt;TreeNode&gt; leftTrees = generateTrees(left, i - 1); List&lt;TreeNode&gt; rightTrees = generateTrees(i + 1, right); for (TreeNode l : leftTrees) &#123; for (TreeNode r : rightTrees) &#123; TreeNode root = new TreeNode(i); root.left = l; root.right = r; list.add(root); &#125; &#125; &#125; &#125; return list; &#125;&#125; ÈÉ®ÂàÜÁü•ËØÜÁÇπË°•ÂÖÖÊòéÂ§©ÁªßÁª≠ËøõÂÜõ‰∫åÂèâÊ†ëÈÉ®ÂàÜ ÂêåÊó∂Â§ç‰π†Âπ∂‰∏îÊç°ÂõûÊù•ÂéüÂÖàË¶ÅÂÆåÊàêÁöÑÈõÜÂêàÈÇ£ÈÉ®ÂàÜÁöÑÊ∫êÁ†ÅÂàÜÊûêÔºÅÔºà2020.1.1Ôºâ Êù®Ëæâ‰∏âËßí(118)Tip:‰ªäÂ§©Á¨¨‰∏ÄÊ¨°ÂÜôÈ¢òËß£ÔºåËøòÊòØÈùûÂ∏∏ÂºÄÂøÉÁöÑÔºÅÔºÅÔºÅÔºÅÔºÅ ‰ªäÂ§©ÈáçÁÇπÂ∞±ÊòØÊéåÊè°‰∫Ü‰∏Ä‰∏ãÈÄíÂΩíÁöÑÊÄùÊÉ≥ÔºåÊúÄÈáçË¶ÅÁöÑ‰∏âÁÇπÔºÅÔºÅÔºÅÔºÅÔºÅ ÈÄíÂΩíÊÄùÊÉ≥ ÊâæÊï¥‰∏™ÈÄíÂΩíÁöÑÁªàÊ≠¢Êù°‰ª∂ ÊâæËøîÂõûÂÄº Êú¨Âú∞ÈÄíÂΩíÈúÄË¶ÅÂ¶Ç‰ΩïÊìç‰Ωú ‰∏ªË¶ÅÂèÇËÄÉÔºöÈÄíÂΩí È¢òÁõÆÊèèËø∞ÁªôÂÆö‰∏Ä‰∏™ÈùûË¥üÊï¥Êï∞ numRowsÔºåÁîüÊàêÊù®Ëæâ‰∏âËßíÁöÑÂâç numRows Ë°å„ÄÇ Âú®Êù®Ëæâ‰∏âËßí‰∏≠ÔºåÊØè‰∏™Êï∞ÊòØÂÆÉÂ∑¶‰∏äÊñπÂíåÂè≥‰∏äÊñπÁöÑÊï∞ÁöÑÂíå„ÄÇ Á§∫‰æã: 123456789ËæìÂÖ•: 5ËæìÂá∫:[ [1], [1,1], [1,2,1], [1,3,3,1], [1,4,6,4,1]] ÊÄùË∑ØÊñπÊ≥ï‰∏ÄÔºöÈÄíÂΩíÈÄíÂΩíÊñπÊ≥ïÊÄªËÄåË®Ä‰πãÂ∞±ÊòØÊäì‰Ωè‰∏âÁÇπÔºö ÊâæÊï¥‰∏™ÈÄíÂΩíÁöÑÁªàÊ≠¢Êù°‰ª∂ ÊâæËøîÂõûÂÄº ‰∏ÄÊ¨°ÈÄíÂΩíÈúÄË¶ÅÂ¶Ç‰ΩïÊìç‰Ωú ÊâæÊï¥‰∏™ÈÄíÂΩíÁöÑÁªàÊ≠¢Êù°‰ª∂Âí±Êù•ÂàÜÊûê‰∏Ä‰∏ãÈ¢òÁõÆÔºåÈÄíÂΩíÂà∞numRows = 0 Êó∂ÊàñËÄÖnumRows = 1Êó∂ÈÉΩÂèØ‰ª•ÁªàÊ≠¢ÔºåÂõ†‰∏∫Á¨¨‰∏ÄË°åÊØîËæÉÁâπÊÆäÔºåÂè™Êúâ‰∏Ä‰∏™1,ÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•Â∞ÜÂÖ∂ÂΩìÊàêÊï¥‰∏™ÈÄíÂΩíÁöÑÁªàÊ≠¢Êù°‰ª∂ÔºåÂΩìnumRows = 1Êó∂ÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ÁªàÊ≠¢ÈÄíÂΩíÂêë‰∏ãËøîÂõûÂÄº‰∫Ü„ÄÇ ÊâæËøîÂõûÂÄºÊâæËøîÂõûÂÄºÔºåÊàë‰ª¨‰πüÈúÄË¶ÅÂàÜÊûê‰∏ãÔºåÈ¢òÁõÆË¶ÅÊàë‰ª¨Ê±ÇÁöÑÊòØÊï¥‰∏™Êù®Ëæâ‰∏âËßíÁöÑÊâÄÊúâÊï∞ÔºåÈÇ£ÊúÄÂêéÈÄíÂΩíÂæóÂà∞ÁöÑÂ∫îËØ•Â∞±ÊòØ List&lt;List&lt;Integer&gt;&gt; (È¢òÁõÆÁªôÂÆö)Ôºå‰πüÂ∞±ÊòØÊØèÈÄíÂΩíÂÆå‰∏ÄÂ±ÇÔºåÊàë‰ª¨Â∞±Êõ¥Êñ∞ÂÆåListÂπ∂ËøîÂõûÂç≥ÂèØÔºåÊúÄÂêéÈÄíÂΩíÂÆåÊàêÂ∞±ÊòØÊàë‰ª¨Ë¶ÅÁöÑÁ≠îÊ°à„ÄÇ ‰∏ÄÊ¨°ÈÄíÂΩíÈúÄË¶ÅÂ¶Ç‰ΩïÊìç‰ΩúÈÄíÂΩíÁöÑÈöæÁÇπÂ∞±Âú®ËøôÈáåÔºåÂæàÂ§öÁ´•Èù¥ÂàöÂ≠¶ÈÄíÂΩíÊó∂ÔºåÊÄªÊòØÂú®ËøôÈáåÊêûÊôïÔºåÂÖ∂ÂÆûÊàë‰ª¨Âè™ÈúÄË¶ÅÂÖ≥Ê≥®‰∏ÄÊ¨°ÈÄíÂΩíÂç≥ÂèØÔºåÂõ†‰∏∫ÊØè‰∏ÄÂ±ÇÈÄíÂΩíÁöÑËøáÁ®ãÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÊâæÂà∞ÊúÄ‰∏äÂ±ÇÁöÑÈÄíÂΩíÁöÑËßÑÂæãÔºåÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ Â¶ÇÂõæÊâÄÁ§∫ÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÂàÜÊûêÁ¨¨‰∫åË°åÂà∞Á¨¨‰∏âË°åËøôÁ∫ßÈÄíÂΩíÂç≥ÂèØÔºÅÂÖà‰∏ä‰ª£Á†ÅÔºÅ ÈÄíÂΩí ‰ª£Á†Å12345678910111213141516171819202122232425262728293031class Solution &#123; public List&lt;List&lt;Integer&gt;&gt; generate(int numRows) &#123; //Â≠òÂÇ®Ë¶ÅËøîÂõûÁöÑÊù®Ëæâ‰∏âËßí List&lt;List&lt;Integer&gt;&gt; dg = new ArrayList&lt;&gt;(); //Ëã•0Ë°åÔºåÂàôËøîÂõûÁ©∫ if(numRows == 0)&#123; return dg; &#125; //ÈÄíÂΩíÂá∫Âè£ÔºåËøôÊòØÁ¨¨‰∏ÄÊ≠•ÔºÅÊâæÂà∞Âá∫Âè£ if(numRows == 1)&#123; dg.add(new ArrayList&lt;&gt;()); dg.get(0).add(1); return dg; &#125; //ÈÄíÂΩíÔºåÊ≥®ÊÑèËøîÂõûÂÄºÔºÅÔºÅÔºÅËøôÊòØÁ¨¨‰∫åÊ≠• dg = generate(numRows-1); //‰∏ÄÁ∫ßÈÄíÂΩíË¶ÅÂÅöÂï•ÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÁ¨¨‰∫åË°åÂà∞Á¨¨‰∏âË°åÈúÄË¶ÅÂÅöÂï• //È¶ñÂÖàÊòØË¶ÅÁî≥ËØ∑‰∏Ä‰∏™listÊù•Â≠òÂÇ®Á¨¨‰∏âË°åÔºåÁÑ∂ÂêéÈÄöËøáÁ¨¨‰∫åË°åÂæóÂà∞Á¨¨‰∏âË°å //Á¨¨‰∏âË°åÁöÑÈ¶ñÂ∞æ‰∏∫1ÊòØÁ°ÆÂÆö‰∫ÜÁöÑÔºåÁÑ∂ÂêéÂ∞±ÊòØ‰∏≠Èó¥ÁöÑÊï∞Â¶Ç‰ΩïÂæóÂà∞ //ÈÄöËøáËßÇÂØüÂæàÂÆπÊòìÊãøÂà∞forÂæ™ÁéØÈáåÈù¢ÁöÑÂºèÂ≠ê //ÊúÄÂêéÂà´Âøò‰∫ÜËøîÂõûÂÄºÔºÅÔºÅÔºÅ List&lt;Integer&gt; row = new ArrayList&lt;&gt;(); row.add(1); for(int j = 1;j &lt; numRows - 1;j++)&#123; row.add(dg.get(numRows-2).get(j-1) + dg.get(numRows-2).get(j)); &#125; row.add(1); dg.add(row); return dg; &#125;&#125; ÊñπÊ≥ï‰∫åÔºöÂä®ÊÄÅËßÑÂàíÊÄùË∑ØÂÖ∂ÂÆûÂ∑Æ‰∏çÂ§öÔºåÂè™ÊòØ‰∏Ä‰∏™ÈÄíÂΩíÔºå‰∏Ä‰∏™ÂèòÊàê‰∫ÜËø≠‰ª£ËÄåÔºå‰ªÖÊ≠§ËÄåÂ∑≤ÔºÅ 1234567891011121314151617181920212223class Solution &#123; public List&lt;List&lt;Integer&gt;&gt; generate(int numRows) &#123; List&lt;List&lt;Integer&gt;&gt; dp = new ArrayList&lt;&gt;(); if(numRows == 0)&#123; return dp; &#125; dp.add(new ArrayList&lt;&gt;()); dp.get(0).add(1); //Ê≥®ÊÑèËøôÈáåÁöÑ i ÊòØÊåáË°åÊï∞Ôºå‰ΩÜÊòØdpÊòØ‰ªé0ÂºÄÂßãÁöÑ //ÊâÄ‰ª•preRowÊòØi-2 for(int i = 2;i &lt;= numRows;i++)&#123; List&lt;Integer&gt; row = new ArrayList&lt;&gt;(); List&lt;Integer&gt; preRow = dp.get(i-2); row.add(1); for(int j = 1;j &lt; i-1;j++)&#123; row.add(preRow.get(j) + preRow.get(j-1)); &#125; row.add(1); dp.add(row); &#125; return dp; &#125;&#125; ÂçïËØçÊãÜÂàÜ(139)È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ÈùûÁ©∫Â≠óÁ¨¶‰∏≤ s Âíå‰∏Ä‰∏™ÂåÖÂê´ÈùûÁ©∫ÂçïËØçÂàóË°®ÁöÑÂ≠óÂÖ∏ wordDictÔºåÂà§ÂÆö s ÊòØÂê¶ÂèØ‰ª•Ë¢´Á©∫Ê†ºÊãÜÂàÜ‰∏∫‰∏Ä‰∏™ÊàñÂ§ö‰∏™Âú®Â≠óÂÖ∏‰∏≠Âá∫Áé∞ÁöÑÂçïËØç„ÄÇ ËØ¥ÊòéÔºö ÊãÜÂàÜÊó∂ÂèØ‰ª•ÈáçÂ§ç‰ΩøÁî®Â≠óÂÖ∏‰∏≠ÁöÑÂçïËØç„ÄÇ ‰Ω†ÂèØ‰ª•ÂÅáËÆæÂ≠óÂÖ∏‰∏≠Ê≤°ÊúâÈáçÂ§çÁöÑÂçïËØç„ÄÇ Á§∫‰æãÁ§∫‰æã 1Ôºö 123ËæìÂÖ•: s = "leetcode", wordDict = ["leet", "code"]ËæìÂá∫: trueËß£Èáä: ËøîÂõû true Âõ†‰∏∫ "leetcode" ÂèØ‰ª•Ë¢´ÊãÜÂàÜÊàê "leet code"„ÄÇ Á§∫‰æã 2Ôºö 1234ËæìÂÖ•: s = "applepenapple", wordDict = ["apple", "pen"]ËæìÂá∫: trueËß£Èáä: ËøîÂõû true Âõ†‰∏∫ "applepenapple" ÂèØ‰ª•Ë¢´ÊãÜÂàÜÊàê "apple pen apple"„ÄÇÊ≥®ÊÑè‰Ω†ÂèØ‰ª•ÈáçÂ§ç‰ΩøÁî®Â≠óÂÖ∏‰∏≠ÁöÑÂçïËØç„ÄÇ 1234Á§∫‰æã 3ÔºöËæìÂÖ•: s = "catsandog", wordDict = ["cats", "dog", "sand", "and", "cat"]ËæìÂá∫: false ‰ª£Á†Å123456789101112131415class Solution &#123; public boolean wordBreak(String s, List&lt;String&gt; wordDict) &#123; boolean[] dp = new boolean[s.length()+1]; dp[0] = true; for(int i = 1;i &lt;= s.length();i++)&#123; for(int j = 0;j &lt; i;j++)&#123; if(dp[j] == true &amp;&amp; wordDict.contains(s.substring(j,i)))&#123; dp[i] = true; break; &#125; &#125; &#125; return dp[s.length()]; &#125;&#125; Ëß£Á†ÅÊñπÊ≥ï(91)È¢òÁõÆÊèèËø∞1234567‰∏ÄÊù°ÂåÖÂê´Â≠óÊØç A-Z ÁöÑÊ∂àÊÅØÈÄöËøá‰ª•‰∏ãÊñπÂºèËøõË°å‰∫ÜÁºñÁ†ÅÔºö'A' -&gt; 1'B' -&gt; 2...'Z' -&gt; 26ÁªôÂÆö‰∏Ä‰∏™Âè™ÂåÖÂê´Êï∞Â≠óÁöÑÈùûÁ©∫Â≠óÁ¨¶‰∏≤ÔºåËØ∑ËÆ°ÁÆóËß£Á†ÅÊñπÊ≥ïÁöÑÊÄªÊï∞„ÄÇ Á§∫‰æã1234567891011Á§∫‰æã 1:ËæìÂÖ•: "12"ËæìÂá∫: 2Ëß£Èáä: ÂÆÉÂèØ‰ª•Ëß£Á†Å‰∏∫ "AB"Ôºà1 2ÔºâÊàñËÄÖ "L"Ôºà12Ôºâ„ÄÇÁ§∫‰æã 2:ËæìÂÖ•: "226"ËæìÂá∫: 3Ëß£Èáä: ÂÆÉÂèØ‰ª•Ëß£Á†Å‰∏∫ "BZ" (2 26), "VF" (22 6), ÊàñËÄÖ "BBF" (2 2 6) „ÄÇ ÊÄùË∑ØÊâÄÊúâÂèØ‰ª•Áî®dpÁöÑÔºåÂü∫Êú¨ÈÉΩÊúâ‰∏â‰∏™ÊñπÊ≥ïÔºö ÈÄíÂΩí ‚Äî‚Äî-&gt; Â∏¶Â§áÂøòÂΩïÁöÑËá™È°∂Âêë‰∏ã ‚Äî‚Äî-&gt; dp ÈÄíÂΩí1234567891011121314151617181920212223242526272829class Solution &#123; public int numDecodings(String s) &#123; if(s.length() == 0 || s == null)&#123; return 0; &#125; return numDecodingsByRecrusion(s,0,s.length()-1); &#125; private int numDecodingsByRecrusion(String s,int start,int end)&#123; //1.ÈÄíÂΩíÂá∫Âè£ÔºöÊï∞Â≠ó‰∏∫ÊúÄÂêé‰∏Ä‰∏™Êï∞Â≠óÊó∂Âç≥ÁªìÊùüÈÄíÂΩí //2.ËøîÂõûÂÄºÔºöËøîÂõûËß£Á†ÅÊñπÊ≥ïÊï∞ //3.‰∏ÄÊ¨°ÈÄíÂΩíÁöÑËøáÁ®ã if(start &gt; end)&#123; return 1; &#125; if(s.charAt(start) == '0')&#123; return 0; &#125; if(start == end)&#123; return 1; &#125; int num1 = numDecodingsByRecrusion(s,start+1,end); int num2 = 0; if((s.charAt(start) - '0') * 10 + (s.charAt(start+1)-'0') &lt;= 26)&#123; num2 = numDecodingsByRecrusion(s,start+2,end); &#125; return num1+num2; &#125;&#125; Â∏¶Â§áÂøòÂΩïÁöÑËá™È°∂Âêë‰∏ã123456789101112131415161718192021222324252627282930313233343536class Solution &#123; public int numDecodings(String s) &#123; if(s.length() == 0 || s == null)&#123; return 0; &#125; // int res = numDecodingsByRecrusion(s,0,s.length()-1); // int res = numDecodingsByDp(s); HashMap&lt;Integer,Integer&gt; memo = new HashMap&lt;&gt;(); return numDecodingsByMemo(s,0,s.length()-1,memo); &#125; private int numDecodingsByMemo(String s, int start, int end, HashMap&lt;Integer, Integer&gt; memo)&#123; //1.ÈÄíÂΩíÂá∫Âè£ÔºöÊï∞Â≠ó‰∏∫ÊúÄÂêé‰∏Ä‰∏™Êï∞Â≠óÊó∂Âç≥ÁªìÊùüÈÄíÂΩí //2.ËøîÂõûÂÄºÔºöËøîÂõûËß£Á†ÅÊñπÊ≥ïÊï∞ //3.‰∏ÄÊ¨°ÈÄíÂΩíÁöÑËøáÁ®ã if(start &gt; end)&#123; return 1; &#125; if(s.charAt(start) == '0')&#123; return 0; &#125; if(start == end)&#123; return 1; &#125; if(memo.containsKey(start))&#123; return memo.get(start); &#125; int num1 = numDecodingsByMemo(s,start+1,end,memo); int num2 = 0; if((s.charAt(start) - '0') * 10 + (s.charAt(start+1)-'0') &lt;= 26)&#123; num2 = numDecodingsByMemo(s,start+2,end,memo); &#125; memo.put(start,num1+num2); return num1+num2; &#125;&#125; dpÊ≥®ÊÑèÔºöÈöæÁÇπÂú®Â§ÑÁêÜ&#39;0&#39;,&#39;00&#39;Á≠âËæπÁïåÈóÆÈ¢òÔºÅÂ∞§ÂÖ∂ÊòØÂú®dp[n]„ÄÅdp[n-1]ÁöÑËµãÂÄºÈóÆÈ¢ò‰∏äÊúâ‰∏ÄÁÇπÈöæÂ∫¶ÔºåËÄå‰∏îÔºåËøô‰∏™Áî±‰∫éÊòØÂÄíÂ∫èÁöÑÔºåË∑üÂπ≥Êó∂Â§ÑÁêÜÁöÑdpÈóÆÈ¢òÁï•ÂæÆÊúâ‰∫õËÆ∏‰∏çÂêåÔºå‰ª•ÂâçÊòØdp[1]ÂØπÂ∫îÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶ÔºåËÄåËøôÈáåÊòØdp[0]ÂØπÂ∫îÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶„ÄÇ 123456789101112131415161718192021222324252627class Solution &#123; public int numDecodings(String s) &#123; int len = s.length(); int[] dp = new int[len + 1]; dp[len] = 1; //Â∞ÜÈÄíÂΩíÊ≥ïÁöÑÁªìÊùüÊù°‰ª∂ÂàùÂßãÂåñ‰∏∫ 1 //ÊúÄÂêé‰∏Ä‰∏™Êï∞Â≠ó‰∏çÁ≠â‰∫é 0 Â∞±ÂàùÂßãÂåñ‰∏∫ 1 if (s.charAt(len - 1) != '0') &#123; dp[len - 1] = 1; &#125; for (int i = len - 2; i &gt;= 0; i--) &#123; //ÂΩìÂâçÊï∞Â≠óÊó∂ 0 ÔºåÁõ¥Êé•Ë∑≥ËøáÔºå0 ‰∏ç‰ª£Ë°®‰ªª‰ΩïÂ≠óÊØç if (s.charAt(i) == '0') &#123; continue; &#125; int ans1 = dp[i + 1]; //Âà§Êñ≠‰∏§‰∏™Â≠óÊØçÁªÑÊàêÁöÑÊï∞Â≠óÊòØÂê¶Â∞è‰∫éÁ≠â‰∫é 26 int ans2 = 0; int ten = (s.charAt(i) - '0') * 10; int one = s.charAt(i + 1) - '0'; if (ten + one &lt;= 26) &#123; ans2 = dp[i + 2]; &#125; dp[i] = ans1 + ans2; &#125; return dp[0]; &#125;&#125; Èõ∂Èí±ÂÖëÊç¢(322)‰∏ÄÁª¥dpÊï∞ÁªÑÔºåÁÆÄÂçïÁöÑ‰∏ÄÊâπ‚Ä¶ 12345678910111213141516class Solution &#123; public int coinChange(int[] coins, int amount) &#123; //ÈùûÂ∏∏ÊòéÊòæÁöÑ‰ΩøÁî®dp int[] dp = new int[amount+1]; //‰ª£Ë°®ÁöÑÊòØÂØπÂ∫îÈí±Êï∞ÊâÄÈúÄÁöÑÊúÄÂ∞ëÁöÑÁ°¨Â∏Å‰∏™Êï∞ Arrays.fill(dp,amount+1); dp[0] = 0; for(int i = 0;i &lt;= amount;i++)&#123; for(int j = 0;j &lt; coins.length;j++)&#123; if(coins[j] &lt;= i)&#123; dp[i] = Math.min(dp[(i-coins[j])]+1,dp[i]); &#125; &#125; &#125; return dp[amount] == amount+1 ? -1:dp[amount]; &#125;&#125; ÂõûÊñáÂ≠ê‰∏≤(647)ÊÄùË∑ØÂêåÁ¨¨5È¢òÔºÅÔºÅÔºÅÔºÅ 12345678910111213141516class Solution &#123; public int countSubstrings(String s) &#123; int res = 0; boolean dp[][] = new boolean[s.length()][s.length()]; for (int i = 0; i &lt; s.length(); i++) &#123; for (int j = 0; j &lt;= i; j++) &#123; //dpÁöÑÂá∫Âè£Â∞±ÊòØÈïøÂ∫¶Âú®3‰ª•ÂÜÖ(ÂåÖÊã¨3),Ê≥®ÊÑèj‰∏∫ÂºÄÂßãÔºåi‰∏∫ÁªìÊùü if (s.charAt(j) == s.charAt(i) &amp;&amp; ((i - j &lt;= 2) || dp[j + 1][i - 1])) &#123; dp[j][i] = true; res++; &#125; &#125; &#125; return res; &#125;&#125; ÁéØÂΩ¢ÈìæË°®I(141)È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ÈìæË°®ÔºåÂà§Êñ≠ÈìæË°®‰∏≠ÊòØÂê¶ÊúâÁéØ„ÄÇ ‰∏∫‰∫ÜË°®Á§∫ÁªôÂÆöÈìæË°®‰∏≠ÁöÑÁéØÔºåÊàë‰ª¨‰ΩøÁî®Êï¥Êï∞ pos Êù•Ë°®Á§∫ÈìæË°®Â∞æËøûÊé•Âà∞ÈìæË°®‰∏≠ÁöÑ‰ΩçÁΩÆÔºàÁ¥¢Âºï‰ªé 0 ÂºÄÂßãÔºâ„ÄÇ Â¶ÇÊûú pos ÊòØ -1ÔºåÂàôÂú®ËØ•ÈìæË°®‰∏≠Ê≤°ÊúâÁéØ„ÄÇ ÊÄùË∑Ø ÊñπÊ≥ï‰∏ÄÔºö‰ΩøÁî®SetÈõÜÂêàÂ≠òÂÇ®Â∑≤ÁªèÂá∫Áé∞ËøáÁöÑËäÇÁÇπÔºåÂ¶ÇÊûúÂÜçÊ¨°Âá∫Áé∞ÔºåÂàôÁõ¥Êé•ËøîÂõûtrueÔºåÂ¶ÇÊûúÊ≤°ÊúâÂÜçÂá∫Áé∞ÔºåÂàô‰∏ÄÂÆö‰ºöÊúânullËäÇÁÇπÁöÑÂá∫Áé∞„ÄÇ ÊñπÊ≥ï‰∫åÔºöËøêÁî®Âø´ÊÖ¢ÊåáÈíàÁöÑÊñπÊ≥ïÔºåÂø´ÊåáÈíàËµ∞ÂæóÂø´ÔºåÂ¶ÇÊûúÈÅçÂéÜÂà∞nullËäÇÁÇπÔºåÂàôËØ¥Êòé‰∏çÂ≠òÂú®ÁéØÔºåÂ¶ÇÊûúÂø´ÊåáÈíàÂíåÊÖ¢ÊåáÈíà‰ºöÁõ∏ÈÅáÔºåÂàôËØ¥ÊòéÂ≠òÂú®ÁéØ„ÄÇ ‰ª£Á†Å ÊñπÊ≥ï‰∏Ä 123456789101112131415public class Solution &#123; public boolean hasCycle(ListNode head) &#123; HashSet&lt;ListNode&gt; set = new HashSet&lt;&gt;(); while(head != null)&#123; if(!set.contains(head))&#123; set.add(head); &#125; else&#123; return true; &#125; head = head.next; &#125; return false; &#125;&#125; ÊñπÊ≥ï‰∫å 1234567891011121314151617public class Solution &#123; public boolean hasCycle(ListNode head) &#123; if(head == null || head.next == null)&#123; return false; &#125; ListNode slow = head.next; ListNode fast = head.next.next; while(slow != fast)&#123; if(fast == null || fast.next == null)&#123; return false; &#125; slow = slow.next; fast = fast.next.next; &#125; return true; &#125;&#125; ÁéØÂΩ¢ÈìæË°® II(142)Ëøô‰∏™È¢òÁøªËØëÁöÑ‰∏ÄÂù®Â±é‚Ä¶È¢òÁõÆÊï¥Êù•Êï¥Âéª‰∏çÁü•ÈÅìÂú®ËØ¥‰ªÄ‰πàÔºåÁúüÁöÑÊòØÊúç‰∫ÜËÄ∂ÔºÅ ÂÖ∂ÂÆûÈ¢òÁõÆÂ∞±‰∏Ä‰∏™ÊÑèÊÄùÔºåÁªôÂÆö‰∏Ä‰∏™ÊúâÁéØÈìæË°®ÔºåË¶Å‰Ω†ËøîÂõûÁéØÁöÑÂÖ•Âè£ÔºÅ ÊÄùË∑ØËøôÁßçÊÄùË∑ØÈÉΩË¶ÅËÆ≤ÁÉÇ‰∫ÜÂêß..Â∞±ÊòØ‰ΩøÁî®Âø´ÊÖ¢ÊåáÈíàÔºåÁ¨¨‰∏ÄÊ¨°Áõ∏ÈÅáÂêéÔºåÂø´ÊåáÈíàÁªßÁª≠Ëµ∞ÔºåÊÖ¢ÊåáÈíàÂõûÂà∞Ëµ∑ÁÇπÔºåÁ¨¨‰∫åÊ¨°Áõ∏ÈÅáÁöÑÂú∞ÊñπÂ∞±ÊòØÁéØÁöÑËµ∑ÁÇπ„ÄÇ ‰ª£Á†Å12345678910111213141516171819202122232425262728/** * Definition for singly-linked list. * class ListNode &#123; * int val; * ListNode next; * ListNode(int x) &#123; * val = x; * next = null; * &#125; * &#125; */public class Solution &#123; public ListNode detectCycle(ListNode head) &#123; ListNode fast = head, slow = head; while (true) &#123; if (fast == null || fast.next == null) return null; fast = fast.next.next; slow = slow.next; if (fast == slow) break; &#125; fast = head; while (slow != fast) &#123; slow = slow.next; fast = fast.next; &#125; return fast; &#125;&#125; 4. ÂØªÊâæ‰∏§‰∏™ÊúâÂ∫èÊï∞ÁªÑÁöÑ‰∏≠‰ΩçÊï∞È¢òÁõÆÁªôÂÆö‰∏§‰∏™Â§ßÂ∞è‰∏∫ m Âíå n ÁöÑÊúâÂ∫èÊï∞ÁªÑ nums1 Âíå nums2„ÄÇ ËØ∑‰Ω†ÊâæÂá∫Ëøô‰∏§‰∏™ÊúâÂ∫èÊï∞ÁªÑÁöÑ‰∏≠‰ΩçÊï∞ÔºåÂπ∂‰∏îË¶ÅÊ±ÇÁÆóÊ≥ïÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(log(m + n))„ÄÇ ‰Ω†ÂèØ‰ª•ÂÅáËÆæ nums1 Âíå nums2 ‰∏ç‰ºöÂêåÊó∂‰∏∫Á©∫„ÄÇ Á§∫‰æã 1: 1234nums1 = [1, 3]nums2 = [2]Âàô‰∏≠‰ΩçÊï∞ÊòØ 2.0 Á§∫‰æã 2: 1234nums1 = [1, 2]nums2 = [3, 4]Âàô‰∏≠‰ΩçÊï∞ÊòØ (2 + 3)/2 = 2.5 ÊÄùË∑Ø Â¶ÇÊûúÊ≤°ÊúâÊó∂Èó¥Â§çÊùÇÂ∫¶ÁöÑËØùÔºåÈÇ£ËøôÈÅìÈ¢òÊúâÈùûÂ∏∏Â§öÁöÑÊÄùË∑ØÂèØ‰ª•ÂÅöÔºåÂèØ‰ª•ÂÖàÊéíÂ∫èÂÜçÂèñ‰∏≠‰ΩçÊï∞ÔºåÂèØ‰ª•ÈááÁî®‰∏§‰∏™ÊúâÂ∫èÊï∞ÁªÑËøõË°åÂΩíÂπ∂ÊéíÂ∫èÔºåËøôÊ†∑ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(m+n) ,Ëææ‰∏çÂà∞ O(log(m+n)) ÁúãÂà∞log(m+n)ÔºåÂ∞±Â∫îËØ•ÊÉ≥Âà∞‰∫åÂàÜÊü•ÊâæÔºåËøôÈÅìÈ¢ò‰πüÁöÑÁ°ÆÂèØ‰ª•Áî®‰∫åÂàÜÂéªÂÅö„ÄÇÈ¶ñÂÖàÊàë‰ª¨ÊòéÁ°Æ‰∏Ä‰∏ãËøôÈáåÁöÑ‰∏≠‰ΩçÊï∞ÊòØ‰ªÄ‰πàÊÑèÊÄùÔºüËøôÈáåËØ¥ÁöÑÊòØÊ±Ç‰∏§‰∏™ÊúâÂ∫èÊï∞ÁªÑ(m + n)ÁöÑ‰∏≠‰ΩçÊï∞ÔºåÂ¶ÇÊûú m + n ‰∏∫Â•áÊï∞ÔºåÂàô‰∏≠‰ΩçÊï∞ÁöÑ‰∏ãÊ†á‰∏∫ (m + n + 1)/2 [‰∏ãÊ†á‰ªé1ÂºÄÂßãÔºÅ]ÔºåÂ¶ÇÊûú m + n ‰∏∫ÂÅ∂Êï∞ÔºåÂàô‰∏≠‰ΩçÊï∞ÁöÑÂÄº‰∏∫‰∏ãÊ†á‰∏∫ (m + n + 1)/2 „ÄÅ(m + n + 2)/2ÁöÑÊï∞ÁöÑÂπ≥ÂùáÂÄºÔºåÊâÄ‰ª•ÂÖ∂ÂÆûÂèØ‰ª•Áªü‰∏Ä‰∏Ä‰∏ãÔºå‰πüÂ∞±ÊòØ‰∏çËÆ∫Â•áÊï∞ËøòÊòØÂÅ∂Êï∞Ôºå‰∏≠‰ΩçÊï∞ÁöÑÂÄº = ‰∏ãÊ†á‰∏∫ (m + n + 1)/2 „ÄÅ(m + n + 2)/2ÁöÑÊï∞ÁöÑÂπ≥ÂùáÂÄºÔºÅÔºÅÔºÅÊâÄ‰ª•ÈóÆÈ¢òÂ∞±ËΩ¨Êç¢‰∏∫Ê±ÇÁ¨¨ (m + n + 1)/2„ÄÅ (m + n + 2)/2Â§ßÁöÑÊï∞‰∫ÜÔºåËá≥‰∫éÊ±ÇÁ¨¨KÂ§ßÁöÑÊï∞ÈóÆÈ¢òÔºåËøô‰∏™ÊñπÊ≥ïÂ∞±ÂæàÂ§ö‰∫ÜÔºå‰ªéËøúÂè§ÁöÑÂø´ÊéíÂà∞Â†ÜÊéíÂ∫èÔºåÂæÖ‰ºö‰ºöÊãìÂ±ï‰∏Ä‰∏ãÔºÅÂõûÂà∞Ê≠£È¢òÔºåÂ¶Ç‰ΩïÂú®‰∏§‰∏™ÊúâÂ∫èÊï∞ÁªÑ‰∏≠Èó¥ÂèñÂà∞Á¨¨KÂ§ßÁöÑÊï∞ËøòÂøÖÈ°ªÊòØlogÁ∫ßÂà´ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÔºåÈÇ£Âè™ËÉΩÈÄâÊã©‰∫åÂàÜ‰∫ÜÔºåËøôÈáåÁöÑ‰∫åÂàÜÊØîËæÉÁâπÊÆäÔºåÊòØÂØπ‰∏§‰∏™Êï∞ÁªÑÂèñÁ¨¨K/2Â§ßÁöÑÊï∞ÔºåÊúâ‰∫∫‰ºöÈóÆ‰∫ÜÔºå‰∏∫‰ΩïÊòØËøôÊ†∑ÂèñÂë¢ÔºüÂõ†‰∏∫Âú®ÊØèÊ¨°ÂàíÂàÜÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÈÉΩË¶ÅÁ°Æ‰øùÁ¨¨KÂ§ßÁöÑÊï∞Êú™Ë¢´ÂéªÈô§ÔºåÊâÄ‰ª•‰∏§‰∏™Êï∞ÁªÑÂàÜÂà´ÂèñK/2ÔºåËøôÊ†∑ËÉΩÁ°Æ‰øùÊúâ m + n - k‰∏™Êï∞ÊòØ‰∏ÄÂÆöÂ§ß‰∫éÊàë‰ª¨Ë¶ÅÂèñÁöÑÊï∞ÁöÑÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÊàë‰ª¨ÁöÑ‰∫åÂàÜÔºåÂ∞±ÊòØ‰∏ÄÊ≠•Ê≠•ÂéªÈô§ÊØî‰∏≠‰ΩçÊï∞Â∞èÁöÑÊï∞ÔºåÁõ¥Âà∞ÈÅçÂéÜÂà∞‰∏≠‰ΩçÊï∞‰∏∫Ê≠¢ÔºåËÄå‰ªÄ‰πàÊó∂ÂÄôËÉΩÈÅçÂéÜÂà∞‰∏≠‰ΩçÊï∞Âë¢ÔºüÈöæÁÇπÂ∞±Âú®‰∫éËæπÁïåÊØîËæÉÂ§çÊùÇÔºåÊØîÂ¶ÇÔºöÊï∞ÁªÑÈïøÂ∫¶ËøáÁü≠ÂØºËá¥Âèñ‰∏çÂà∞K/2„ÄÅKÂ¶ÇÊûú‰∏∫1ÁöÑËØùÊòØ‰∏çËÉΩÂèñK/2ÁöÑ(‰∏ãÊ†á‰ªé1ÂºÄÂßãÔºåËøôÊ†∑‰ºöË∂äÁïå)„ÄÅÂçï‰∏™Êï∞ÁªÑÂèØËÉΩÂ∑≤ÁªèÈÅçÂéÜÂÆåÂè¶Â§ñ‰∏Ä‰∏™ËøòÊ≤°ÈÅçÂéÜÂÆåÁ≠âÁ≠â„ÄÇ ‰ª£Á†ÅÂÆûÁé∞ÊñπÊ≥ï‰∏ÄËßÅÂΩíÂπ∂ÊéíÂ∫èÁöÑÂÅöÊ≥ï(Êó∂Èó¥Â§çÊùÇÂ∫¶ÂÖ∂ÂÆûÊòØ‰∏çÁ¨¶ÂêàË¶ÅÊ±ÇÁöÑ) ÊñπÊ≥ï‰∫å123456789101112131415161718192021222324252627282930313233343536/** * ÊñπÊ≥ï‰∫å * @param nums1 * @param nums2 * @return */public static double findMedianSortedArrays(int[] nums1, int[] nums2) &#123; return (findMedianSortedArraysByRecursion(nums1,0,nums2,0,(nums1.length + nums2.length + 1)/2) + findMedianSortedArraysByRecursion(nums1,0,nums2,0,(nums1.length + nums2.length + 2)/2))/2.0;&#125;/** * ÈÄíÂΩí‰∏âÈÉ®Êõ≤ * 1„ÄÅÊâæÂà∞ÈÄíÂΩíÂá∫Âè£ÔºåÂΩìÈÅçÂéÜÁöÑÊï∞ÁöÑ‰∏ãÊ†áÂ§ß‰∫éÁ≠â‰∫éÊï∞ÁªÑÊú¨Ë∫´ÈïøÂ∫¶ÔºåËØ¥ÊòéÂèØ‰ª•ÁªìÊùü‰∫ÜÔºåÊ≥®ÊÑèËøôÈáåÊòØÂ§ß‰∫éÁ≠â‰∫éÂì¶ÔºåÂõ†‰∏∫‰∏ãÊ†áÊòØ‰ªé0ÂºÄÂßãÁöÑÔºÅ * ËøòË¶Å‰∏Ä‰∏™ÈÄíÂΩíÂá∫Âè£Â∞±ÊòØÔºåÂΩìk‰∏∫1Êó∂ÔºåÂç≥ÊâæÊúÄÂ∞èÁöÑÈÇ£‰∏™Êï∞ÔºåÂàôÁõ¥Êé•ÊØîËæÉÊï∞ÁªÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†Âç≥ÂèØ * 2„ÄÅÊâæÂà∞ËøîÂõûÂÄºÔºåËøîÂõûÁ¨¨KÂ§ßÁöÑÊï∞ÁöÑÂÄºÂç≥ÂèØ * 3„ÄÅÊØè‰∏ÄËΩÆÈÄíÂΩíÈúÄË¶ÅÂÅöÁöÑ‰∫ãÊÉÖÔºåÊàë‰ª¨ÈúÄË¶Å‰ªéËµ∑ÂßãÁÇπÂºÄÂßãÔºåÂØªÊâæÁ¨¨KÂ§ßÁöÑÊï∞ÔºåÂç≥ÂàÜÂà´Âú®‰∏§‰∏™Êï∞ÁªÑ‰∏≠ÊâæÂà∞Á¨¨K/2Â§ßÁöÑÊï∞ * Ëã•‰∏Ä‰∏™Êï∞ÁªÑ‰∏≠Êâæ‰∏çÂà∞Á¨¨K/2‰∏™Êï∞ÔºåÂàôËØ¥ÊòéÂè¶Â§ñ‰∏Ä‰∏™Êï∞ÁªÑÁöÑÂâçK/2ÁöÑÊï∞ÂØπÊàë‰ª¨Ê≤°ÊúâÊÑè‰πâ * @param nums1 * @param nums1_start * @param nums2 * @param nums2_start * @param k * @return */private static double findMedianSortedArraysByRecursion(int[] nums1, int nums1_start, int[] nums2, int nums2_start, int k) &#123; if(nums1_start &gt;= nums1.length) return nums2[nums2_start+k-1]; if(nums2_start &gt;= nums2.length) return nums1[nums1_start+k-1]; if(k == 1)&#123; return Math.min(nums1[nums1_start],nums2[nums2_start]); &#125; int mid_num1 = (nums1_start + k/2 - 1) &lt; nums1.length ? nums1[nums1_start + k/2 -1] : Integer.MAX_VALUE; int mid_num2 = (nums2_start + k/2 - 1) &lt; nums2.length ? nums2[nums2_start + k/2 -1] : Integer.MAX_VALUE; return mid_num1 &gt; mid_num2 ? findMedianSortedArraysByRecursion(nums1,nums1_start,nums2,nums2_start+k/2,k-k/2) : findMedianSortedArraysByRecursion(nums1,nums1_start+k/2,nums2,nums2_start,k-k/2);&#125; 17. ÁîµËØùÂè∑Á†ÅÁöÑÂ≠óÊØçÁªÑÂêàÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™‰ªÖÂåÖÂê´Êï∞Â≠ó 2-9 ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåËøîÂõûÊâÄÊúâÂÆÉËÉΩË°®Á§∫ÁöÑÂ≠óÊØçÁªÑÂêà„ÄÇ ÁªôÂá∫Êï∞Â≠óÂà∞Â≠óÊØçÁöÑÊò†Â∞ÑÂ¶Ç‰∏ãÔºà‰∏éÁîµËØùÊåâÈîÆÁõ∏ÂêåÔºâ„ÄÇÊ≥®ÊÑè 1 ‰∏çÂØπÂ∫î‰ªª‰ΩïÂ≠óÊØç„ÄÇ Á§∫‰æã: 12ËæìÂÖ•Ôºö"23"ËæìÂá∫Ôºö["ad", "ae", "af", "bd", "be", "bf", "cd", "ce", "cf"]. ÊÄùË∑ØÈòüÂàóÂÖàÂÆö‰πâ‰∏Ä‰∏™StringÂ≠óÁ¨¶‰∏≤Êï∞ÁªÑÔºåÁÑ∂ÂêéÈÅçÂéÜËæìÂÖ•ÁöÑÊï∞Â≠óÔºåÊãøÂà∞ÊØè‰∏Ä‰∏™Êï∞Â≠óÔºåÁÑ∂ÂêéÂà©Áî®ÈòüÂàóÔºåÂÖàÂ∞ÜÂâç‰∏ÄÊ¨°Âæ™ÁéØÁöÑÂ≠óÁ¨¶‰∏≤ÈÅçÂéÜ(ËøôÈáåÈùûÂ∏∏Â∑ßÂ¶ôÔºåÂõ†‰∏∫ i ‰ªé 0 ÂºÄÂßãÔºåÈÇ£‰πàÁ¨¨ n Ê¨°Âæ™ÁéØÁöÑ i ‰∏∫ n-1 ,Âç≥ÊòØÂâç‰∏ÄÊ¨°Âæ™ÁéØÁöÑÂ≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶)ÔºåÊØèÊ¨°ÈÅçÂéÜÂâç‰∏ÄÊ¨°Âæ™ÁéØÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂ∞±Â∞ÜÂÖ∂Âá∫ÈòüÂàóÔºåÁÑ∂ÂêéÂ∞ÜÊñ∞ÁöÑÂ≠óÁ¨¶‰∏≤ÊãºÊé•Â•ΩÁõ¥Êé•ÊîæÂÖ•ÈòüÂàóÔºåÁ±ª‰ºº‰∫éÊ†ëÁöÑÂ±ÇÂ∫èÈÅçÂéÜÔºåÂè™ÊòØËøôÈáåÈùûÂ∏∏Â∑ßÂ¶ôÂú∞ËøêÁî®‰∫ÜÈòüÂ§¥ÂÖÉÁ¥†ÁöÑÈïøÂ∫¶Âíå i ÁöÑÂÖ≥Á≥ª„ÄÇ ÂõûÊ∫ØÂõûÊ∫ØÊòØ‰∏ÄÁßçÈÄöËøáÁ©∑‰∏æÊâÄÊúâÂèØËÉΩÊÉÖÂÜµÊù•ÊâæÂà∞ÊâÄÊúâËß£ÁöÑÁÆóÊ≥ï„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™ÂÄôÈÄâËß£ÊúÄÂêéË¢´ÂèëÁé∞Âπ∂‰∏çÊòØÂèØË°åËß£ÔºåÂõûÊ∫ØÁÆóÊ≥ï‰ºöËàçÂºÉÂÆÉÔºåÂπ∂Âú®ÂâçÈù¢ÁöÑ‰∏Ä‰∫õÊ≠•È™§ÂÅöÂá∫‰∏Ä‰∫õ‰øÆÊîπÔºåÂπ∂ÈáçÊñ∞Â∞ùËØïÊâæÂà∞ÂèØË°åËß£„ÄÇ ÁªôÂá∫Â¶Ç‰∏ãÂõûÊ∫ØÂáΩÊï∞ backtrack(combination, next_digits) ÔºåÂÆÉÂ∞Ü‰∏Ä‰∏™ÁõÆÂâçÂ∑≤Áªè‰∫ßÁîüÁöÑÁªÑÂêà combination ÂíåÊé•‰∏ãÊù•ÂáÜÂ§áË¶ÅËæìÂÖ•ÁöÑÊï∞Â≠ó next_digits ‰Ωú‰∏∫ÂèÇÊï∞„ÄÇ Â¶ÇÊûúÊ≤°ÊúâÊõ¥Â§öÁöÑÊï∞Â≠óÈúÄË¶ÅË¢´ËæìÂÖ•ÔºåÈÇ£ÊÑèÂë≥ÁùÄÂΩìÂâçÁöÑÁªÑÂêàÂ∑≤Áªè‰∫ßÁîüÂ•Ω‰∫Ü„ÄÇÂ¶ÇÊûúËøòÊúâÊï∞Â≠óÈúÄË¶ÅË¢´ËæìÂÖ•ÔºöÈÅçÂéÜ‰∏ã‰∏Ä‰∏™Êï∞Â≠óÊâÄÂØπÂ∫îÁöÑÊâÄÊúâÊò†Â∞ÑÁöÑÂ≠óÊØç„ÄÇÂ∞ÜÂΩìÂâçÁöÑÂ≠óÊØçÊ∑ªÂä†Âà∞ÁªÑÂêàÊúÄÂêéÔºå‰πüÂ∞±ÊòØ combination = combination + letter„ÄÇÈáçÂ§çËøô‰∏™ËøáÁ®ãÔºåËæìÂÖ•Ââ©‰∏ãÁöÑÊï∞Â≠óÔºö backtrack(combination + letter, next_digits[1:])„ÄÇ ‰ª£Á†ÅÂÆûÁé∞ÈòüÂàóÂÆûÁé∞1234567891011121314151617class Solution &#123; public List&lt;String&gt; letterCombinations(String digits) &#123; LinkedList&lt;String&gt; ans = new LinkedList&lt;String&gt;(); if(digits.isEmpty()) return ans; String[] mapping = new String[] &#123;"0", "1", "abc", "def", "ghi", "jkl", "mno", "pqrs", "tuv", "wxyz"&#125;; ans.add(""); for(int i =0; i&lt;digits.length();i++)&#123; int x = Character.getNumericValue(digits.charAt(i)); while(ans.peek().length()==i)&#123; String t = ans.remove(); for(char s : mapping[x].toCharArray()) ans.add(t+s); &#125; &#125; return ans; &#125;&#125; ÂõûÊ∫ØÂÆûÁé∞1234567891011121314151617181920212223242526272829303132333435363738394041class Solution &#123; Map&lt;String, String&gt; phone = new HashMap&lt;String, String&gt;() &#123;&#123; put("2", "abc"); put("3", "def"); put("4", "ghi"); put("5", "jkl"); put("6", "mno"); put("7", "pqrs"); put("8", "tuv"); put("9", "wxyz"); &#125;&#125;; List&lt;String&gt; output = new ArrayList&lt;String&gt;(); public void backtrack(String combination, String next_digits) &#123; // if there is no more digits to check if (next_digits.length() == 0) &#123; // the combination is done output.add(combination); &#125; // if there are still digits to check else &#123; // iterate over all letters which map // the next available digit String digit = next_digits.substring(0, 1); String letters = phone.get(digit); for (int i = 0; i &lt; letters.length(); i++) &#123; String letter = phone.get(digit).substring(i, i + 1); // append the current letter to the combination // and proceed to the next digits backtrack(combination + letter, next_digits.substring(1)); &#125; &#125; &#125; public List&lt;String&gt; letterCombinations(String digits) &#123; if (digits.length() != 0) backtrack("", digits); return output; &#125;&#125; 22. Êã¨Âè∑ÁîüÊàê##È¢òÁõÆ ÁªôÂá∫ n ‰ª£Ë°®ÁîüÊàêÊã¨Âè∑ÁöÑÂØπÊï∞ÔºåËØ∑‰Ω†ÂÜôÂá∫‰∏Ä‰∏™ÂáΩÊï∞Ôºå‰ΩøÂÖ∂ËÉΩÂ§üÁîüÊàêÊâÄÊúâÂèØËÉΩÁöÑÂπ∂‰∏îÊúâÊïàÁöÑÊã¨Âè∑ÁªÑÂêà„ÄÇ ‰æãÂ¶ÇÔºåÁªôÂá∫ n = 3ÔºåÁîüÊàêÁªìÊûú‰∏∫Ôºö 1234567[ "((()))", "(()())", "(())()", "()(())", "()()()"] ÊÄùË∑ØdpÁÆÄÂçïÊù•ËØ¥ÔºåÂú®Ê±ÇN‰∏™Êã¨Âè∑ÁöÑÊéíÂàóÁªÑÂêàÊó∂ÔºåÊääÁ¨¨NÁßçÊÉÖÂÜµÔºà‰πüÂ∞±ÊòØN‰∏™Êã¨Âè∑ÊéíÂàóÁªÑÂêàÔºâËßÜ‰∏∫ÂçïÁã¨Êãø‰∏Ä‰∏™Êã¨Âè∑EÂá∫Êù•ÔºåÂâ©‰∏ãÁöÑN-1‰∏™Êã¨Âè∑ÂàÜ‰∏∫‰∏§ÈÉ®ÂàÜÔºåP‰∏™Êã¨Âè∑ÂíåQ‰∏™Êã¨Âè∑ÔºåP+Q=N-1ÔºåÁÑ∂ÂêéËøô‰∏§ÈÉ®ÂàÜÂàÜÂà´Â§Ñ‰∫éÊã¨Âè∑EÂÜÖÂíåÊã¨Âè∑EÁöÑÂè≥ËæπÔºåÂêÑËá™ËøõË°åÊã¨Âè∑ÁöÑÊéíÂàóÁªÑÂêà„ÄÇÁî±‰∫éÊàë‰ª¨ÊòØ‰∏ÄÊ≠•Ê≠•ËÆ°ÁÆóÂæóÂà∞N‰∏™Êã¨Âè∑ÁöÑÊÉÖÂÜµÁöÑÔºåÊâÄ‰ª•Â∞è‰∫éÁ≠â‰∫éN-1‰∏™Êã¨Âè∑ÁöÑÊéíÂàóÁªÑÂêàÊñπÂºèÊàë‰ª¨ÊòØÂ∑≤Áü•ÁöÑÔºàÁî®ÂêàÈÄÇÁöÑÊï∞ÊçÆÁªìÊûÑÂ≠òÂÇ®ÔºåÊñπ‰æøÂêéÁª≠Ë∞ÉÁî®Ôºå‰∏îÂú®Â≠òÂÇ®Êó∂ÂèØÂà©Áî®ÁâπÂÆöÊï∞ÊçÆÁªìÊûÑÂÆûÁé∞È¢òÁõÆÊüê‰∫õË¶ÅÊ±ÇÔºåÂ¶ÇÊéíÂ∫èÔºåÂéªÈáçÁ≠âÔºâÔºå‰∏îP+Q=N-1ÔºåPÂíåQÊòØÂ∞è‰∫éÁ≠â‰∫éN-1ÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨ËÉΩÁõ¥Êé•ÂæóÂà∞P‰∏™ÂíåQ‰∏™Êã¨Âè∑ÁöÑÊÉÖÂÜµÔºåËøõËÄåÂæóÂà∞N‰∏™Êã¨Âè∑ÁöÑÁªìÊûúÔºÅ Ëøô‰∏™ÁÆóÊ≥ï‰∏ªË¶ÅÁöÑÂü∫ÁÇπÂ∞±ÊòØÂ∞ÜÊéíÂàóÁªÑÂêàÁöÑÊÉÖÂÜµÂàÜ‰∏∫‰∫ÜÊã¨Âè∑ÂÜÖÂíåÊã¨Âè∑Â§ñËøô‰∏§ÁßçÊÉÖÂÜµÔºå‰∏î‰ªÖÂ≠òÂú®‰∏§ÁßçÊÉÖÂÜµÔºÅËá≥‰∫é‰∏∫‰ªÄ‰πàÔºåÂéüÂõ†Âú®‰∫éÊ•º‰∏ªÁöÑÁÆóÊ≥ïÁöÑÂâçÊèêÊòØÂçïÁã¨ÊãøÂá∫Êù•ÁöÑÊã¨Âè∑EÁöÑÂ∑¶ËæπÂú®N‰∏™Êã¨Âè∑ÊâÄÊúâÊéíÂàóÁªÑÂêàÊÉÖÂÜµ‰∏≠ÈÉΩÊòØÂ§Ñ‰∫éÊúÄÂ∑¶ËæπÔºåÊâÄ‰ª•‰∏çÂ≠òÂú®Êã¨Âè∑‰Ωç‰∫éÊã¨Âè∑EÁöÑÂ∑¶ËæπÁöÑÊÉÖÂÜµ„ÄÇÂõ†Ê≠§ÔºåN-1‰∏™Êã¨Âè∑ÔºàÊãøÂá∫‰∫ÜÊã¨Âè∑EÔºâ‰ªÖÂèØËÉΩÂàÜÂ∏É‰∫éÊã¨Âè∑EÂÜÖÂíåÊã¨Âè∑EÂ§ñÔºåÂàÜ‰∏∫‰∏§ÁßçÂ≠êÊÉÖÂÜµËÆ®ËÆ∫ÔºÅ ËøôÁßçÊÄùÊÉ≥ËøòÂèØ‰ª•Â∫îÁî®‰∫éÂÖ∂‰ªñÁ±ª‰ººÁöÑÈ¢òÁöÑÊ±ÇËß£‰∏≠ÔºåÂç≥ÊÄéÊ†∑ÂêàÁêÜÈ´òÊïàÁöÑÂà©Áî®ÂâçÈù¢Ê≠•È™§ÁöÑËÆ°ÁÆóÁªìÊûúÂæóÂá∫ÂΩìÂâçÊ≠•È™§ÁªìÊûúÔºå‰ªéËÄåÂæóÂá∫ÊúÄÁªàÁªìÊûú„ÄÇ ÈÄíÂΩíÂè™ÊúâÂú®Êàë‰ª¨Áü•ÈÅìÂ∫èÂàó‰ªçÁÑ∂‰øùÊåÅÊúâÊïàÊó∂ÊâçÊ∑ªÂä† ‚Äò(‚Äò or ‚Äò)‚ÄôÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáË∑üË∏™Âà∞ÁõÆÂâç‰∏∫Ê≠¢ÊîæÁΩÆÁöÑÂ∑¶Êã¨Âè∑ÂíåÂè≥Êã¨Âè∑ÁöÑÊï∞ÁõÆÊù•ÂÅöÂà∞Ëøô‰∏ÄÁÇπÔºåÂ¶ÇÊûúÊàë‰ª¨ËøòÂâ©‰∏Ä‰∏™‰ΩçÁΩÆÔºåÊàë‰ª¨ÂèØ‰ª•ÂºÄÂßãÊîæ‰∏Ä‰∏™Â∑¶Êã¨Âè∑„ÄÇ Â¶ÇÊûúÂÆÉ‰∏çË∂ÖËøáÂ∑¶Êã¨Âè∑ÁöÑÊï∞ÈáèÔºåÊàë‰ª¨ÂèØ‰ª•Êîæ‰∏Ä‰∏™Âè≥Êã¨Âè∑„ÄÇ ‰ª£Á†ÅÂÆûÁé∞dp123456789101112131415161718192021222324252627class Solution &#123; public List&lt;String&gt; generateParenthesis(int n) &#123; // dp.get(i)Ë°®Á§∫Êàë‰ª¨Ë¶ÅÊ±ÇÁöÑListÔºådp.get(0)Âç≥Ë°®Á§∫Áî±0‰∏™Êã¨Âè∑ÁªÑÊàêÁöÑÂ≠óÁ¨¶‰∏≤ÁöÑÂàóË°® List&lt;LinkedList&lt;String&gt;&gt; dp = new LinkedList&lt;&gt;(); if( n == 0) return dp.get(0); LinkedList&lt;String&gt; zero = new LinkedList&lt;&gt;(); zero.add(""); dp.add(zero); //ËÆ°ÁÆódpÊï∞ÁªÑÁöÑÂÄº for(int i = 1;i &lt;= n;i++)&#123; LinkedList&lt;String&gt; single = new LinkedList&lt;&gt;(); //ÊØè‰∏™dpÁöÑÂÄºÈÉΩÊòØÁî±‰∏§ÈÉ®ÂàÜÁªÑÊàêÁöÑ for(int j = 0;j &lt; i;j++)&#123; LinkedList&lt;String&gt; str1 = dp.get(j); LinkedList&lt;String&gt; str2 = dp.get(i-j-1); for(String s1:str1)&#123; for(String s2:str2)&#123; String str = "(" + s1 + ")" + s2; single.add(str); &#125; &#125; &#125; dp.add(single); &#125; return dp.get(n); &#125;&#125; ÈÄíÂΩí1234567891011121314151617181920212223/** * Ââ™Êûù + ÂõûÊ∫Ø * ÈÄíÂΩí‰∏âÈÉ®Êõ≤ * 1„ÄÅÊâæÂà∞ÈÄíÂΩíÂá∫Âè£ÔºåÂΩìÂΩìÂâçÂ≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶‰∏∫2nÊó∂ÔºåÂç≥ËØ•Â≠óÁ¨¶‰∏≤Ê∑ªÂä†ÂÆåÊàê * 2„ÄÅËøîÂõûÂÄºÔºåÊó†ÈúÄËøîÂõû‰ªª‰Ωï‰∏úË•øÔºåÂè™ÈúÄË¶ÅÂú®ÊØèÊ¨°ÈÄíÂΩíÂÆåÊàêÊó∂Â∞ÜÊãºÊé•Â•ΩÁöÑÂ≠óÁ¨¶‰∏≤Âä†Âà∞Ë¶ÅËøîÂõûÁöÑÂàóË°®Âç≥ÂèØ * 3„ÄÅ‰∏ÄÊ¨°ÈÄíÂΩíÈúÄË¶ÅÂÅöÁöÑ‰∫ãÔºöÂ¶ÇÊûúÂ∑¶Êã¨Âè∑ÔºåÂ∞è‰∫énÔºåÂàôÈúÄË¶Åopen+1ÔºåÂ¶ÇÊûúÂè≥Êã¨Âè∑Â∞è‰∫éÂ∑¶Êã¨Âè∑ÔºåÂàôÈúÄË¶ÅÊ∑ªÂä†Âè≥Êã¨Âè∑ * @param n * @return */public static List&lt;String&gt; generateParenthesis(int n) &#123; List&lt;String&gt; res = new LinkedList&lt;&gt;(); backtrack(res,"",0,0, n); return res;&#125;public static void backtrack(List&lt;String&gt; ans, String cur, int open, int close, int max)&#123; if (cur.length() == max * 2) &#123; ans.add(cur); return; &#125; if (open &lt; max) backtrack(ans, cur+"(", open+1, close, max); if (close &lt; open) backtrack(ans, cur+")", open, close+1, max);&#125; 31. ‰∏ã‰∏Ä‰∏™ÊéíÂàóÈ¢òÁõÆÂÆûÁé∞Ëé∑Âèñ‰∏ã‰∏Ä‰∏™ÊéíÂàóÁöÑÂáΩÊï∞ÔºåÁÆóÊ≥ïÈúÄË¶ÅÂ∞ÜÁªôÂÆöÊï∞Â≠óÂ∫èÂàóÈáçÊñ∞ÊéíÂàóÊàêÂ≠óÂÖ∏Â∫è‰∏≠‰∏ã‰∏Ä‰∏™Êõ¥Â§ßÁöÑÊéíÂàó„ÄÇ Â¶ÇÊûú‰∏çÂ≠òÂú®‰∏ã‰∏Ä‰∏™Êõ¥Â§ßÁöÑÊéíÂàóÔºåÂàôÂ∞ÜÊï∞Â≠óÈáçÊñ∞ÊéíÂàóÊàêÊúÄÂ∞èÁöÑÊéíÂàóÔºàÂç≥ÂçáÂ∫èÊéíÂàóÔºâ„ÄÇ ÂøÖÈ°ª ÂéüÂú∞ ‰øÆÊîπÔºåÂè™ÂÖÅËÆ∏‰ΩøÁî®È¢ùÂ§ñÂ∏∏Êï∞Á©∫Èó¥„ÄÇ ‰ª•‰∏ãÊòØ‰∏Ä‰∫õ‰æãÂ≠êÔºåËæìÂÖ•‰Ωç‰∫éÂ∑¶‰æßÂàóÔºåÂÖ∂Áõ∏Â∫îËæìÂá∫‰Ωç‰∫éÂè≥‰æßÂàó„ÄÇ 12341,2,3 ‚Üí 1,3,23,2,1 ‚Üí 1,2,31,1,5 ‚Üí 1,5,1158476531 -&gt; 158513467 ÊÄùË∑Ø ‰ªéÂè≥ÂêëÂ∑¶ÔºåÊâæÂà∞Á¨¨‰∏Ä‰∏™ÈùûÂÄíÂ∫èÁöÑÊï∞Â≠óÔºå‰æãÂ¶Ç‰∏äÈù¢ÁöÑ158476531Ôºå‰ªéÂè≥ÂêëÂ∑¶ÁöÑÁ¨¨‰∏Ä‰∏™ÈùûÂÄíÂ∫èÁöÑÊï∞Â≠óÊòØ4 ÁÑ∂ÂêéÂÜç‰ªéÂè≥ÂêëÂ∑¶ÈÅçÂéÜ‰∏ÄÊ¨°ÔºåÊâæÂà∞Á¨¨‰∏Ä‰∏™ÊØî4Â§ßÁöÑÊï∞ÔºåËøôÈáåÊòØÂè≥ËæπÊï∞Á¨¨‰∏â‰∏™ 5Ôºå‰∫§Êç¢ 4 Âíå 5,Êï∞Â≠óÂèò‰∏∫ 158576431,ËøôÊòæÁÑ∂‰∏çÊòØÊàë‰ª¨Ë¶ÅÁöÑÁ≠îÊ°à ÁÑ∂ÂêéÂ∞Ü 5 ÂêéÈù¢ÁöÑÊï∞Â≠óÁøªËΩ¨Ôºå‰πüÂ∞±ÊòØÂ∞Ü 76431 ÁøªËΩ¨,‰∫éÊòØÊï∞Â≠óÂèò‰∏∫ 158513467 ‰ª£Á†ÅÂÆûÁé∞12345678910111213141516171819202122232425262728293031323334353637class Solution &#123; public void nextPermutation(int[] nums) &#123; int i = nums.length - 2; for(; i &gt;= 0; i--)&#123; if(nums[i] &lt; nums[i+1])&#123; break; &#125; &#125; if(i &gt;= 0)&#123; int j = nums.length -1; for(; j &gt; i; j--)&#123; if(nums[j] &gt; nums[i])&#123; break; &#125; &#125; swap(nums,i,j); &#125; reverse(nums,i+1); System.out.println(Arrays.toString(nums)); &#125; private void reverse(int[] nums, int start) &#123; int i = start, j = nums.length - 1; while (i &lt; j) &#123; swap(nums, i, j); i++; j--; &#125; &#125; private void swap(int[] nums, int i, int j) &#123; int temp = nums[i]; nums[i] = nums[j]; nums[j] = temp; &#125;&#125; 32. ÊúÄÈïøÊúâÊïàÊã¨Âè∑È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Âè™ÂåÖÂê´ ‚Äò(‚Äò Âíå ‚Äò)‚Äô ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÊâæÂá∫ÊúÄÈïøÁöÑÂåÖÂê´ÊúâÊïàÊã¨Âè∑ÁöÑÂ≠ê‰∏≤ÁöÑÈïøÂ∫¶„ÄÇ Á§∫‰æã 1: 123ËæìÂÖ•: "(()"ËæìÂá∫: 2Ëß£Èáä: ÊúÄÈïøÊúâÊïàÊã¨Âè∑Â≠ê‰∏≤‰∏∫ "()" Á§∫‰æã 2: 123ËæìÂÖ•: ")()())"ËæìÂá∫: 4Ëß£Èáä: ÊúÄÈïøÊúâÊïàÊã¨Âè∑Â≠ê‰∏≤‰∏∫ "()()" ÊÄùË∑Ø ÊÄùË∑Ø‰∏ÄÔºöÊ†à + dp ÂâçÊñáÁ¨¨20È¢ò ÊúâÊïàÁöÑÊã¨Âè∑ ÔºåÂ∞±ÊòØÈááÁî® Ê†à ÂéªÂÅöÁöÑÔºåÈÇ£‰πàËøô‰∏™ÂæàËá™ÁÑ∂ÁöÑ‰πüÂêåÊ†∑ÊòØÈááÁî®Ê†àÂéªÂÅöÔºåÂá°ÊòØÁ¢∞Âà∞‰∫ÜÊã¨Âè∑ÔºåÂü∫Êú¨ÈÉΩÊòØÁî®Ê†àÂéªÂÅöÂ§ÑÁêÜÔºåÂõ†‰∏∫Á¨¶ÂêàÂêéËøõÂÖàÂá∫ÁöÑÂéüÂàô„ÄÇ ÁÑ∂ÂêéÂèàÊòØÂØªÊâæÂ≠ê‰∏≤ÈïøÂ∫¶ÔºåÈÇ£Ëá™ÁÑ∂ÊòØË¶ÅÁî®Âà∞dpÔºåÊïÖÈááÁî®ÁöÑÊñπÊ≥ïÂæàÊòéÊòæÂ∞±ÊòØÊ†à + dp„ÄÇ ÊÄùË∑Ø‰∫åÔºöÊ†à ‰∏éÊâæÂà∞ÊØè‰∏™ÂèØËÉΩÁöÑÂ≠êÂ≠óÁ¨¶‰∏≤ÂêéÂÜçÂà§Êñ≠ÂÆÉÁöÑÊúâÊïàÊÄß‰∏çÂêåÔºåÊàë‰ª¨ÂèØ‰ª•Áî®Ê†àÂú®ÈÅçÂéÜÁªôÂÆöÂ≠óÁ¨¶‰∏≤ÁöÑËøáÁ®ã‰∏≠ÂéªÂà§Êñ≠Âà∞ÁõÆÂâç‰∏∫Ê≠¢Êâ´ÊèèÁöÑÂ≠êÂ≠óÁ¨¶‰∏≤ÁöÑÊúâÊïàÊÄßÔºåÂêåÊó∂ÈÉΩÊòØÊúÄÈïøÊúâÊïàÂ≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶„ÄÇÊàë‰ª¨È¶ñÂÖàÂ∞Ü ‚àí1 ÊîæÂÖ•Ê†àÈ°∂„ÄÇÂØπ‰∫éÈÅáÂà∞ÁöÑÊØè‰∏™ ‚Äò(‚Äô ÔºåÊàë‰ª¨Â∞ÜÂÆÉÁöÑ‰∏ãÊ†áÊîæÂÖ•Ê†à‰∏≠„ÄÇÂØπ‰∫éÈÅáÂà∞ÁöÑÊØè‰∏™ ‚Äò)‚Äô ÔºåÊàë‰ª¨ÂºπÂá∫Ê†àÈ°∂ÁöÑÂÖÉÁ¥†Âπ∂Â∞ÜÂΩìÂâçÂÖÉÁ¥†ÁöÑ‰∏ãÊ†á‰∏éÂºπÂá∫ÂÖÉÁ¥†‰∏ãÊ†á‰ΩúÂ∑ÆÔºåÂæóÂá∫ÂΩìÂâçÊúâÊïàÊã¨Âè∑Â≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶„ÄÇÈÄöËøáËøôÁßçÊñπÊ≥ïÔºåÊàë‰ª¨ÁªßÁª≠ËÆ°ÁÆóÊúâÊïàÂ≠êÂ≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶ÔºåÂπ∂ÊúÄÁªàËøîÂõûÊúÄÈïøÊúâÊïàÂ≠êÂ≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶ ÊàëËÆ§‰∏∫ËøôÁßçÊÄùË∑ØÊúÄÁ≤æÂ¶ôÁöÑÂú∞ÊñπÂú®‰∫é‰ªñÊèêÂâçÂéãÊ†à‰∫Ü-1ÔºåËøôÊòØËøô‰∏™ÊñπÊ≥ïÊúÄÂ¶ôÁöÑÂú∞ÊñπÔºåËÄåÂú®ÈÅçÂéÜÂÖÉÁ¥†Êó∂ÔºåÊØèÊ¨°ÈÉΩ‰ºöÊúâÂéãÊ†àÊàñËÄÖÂºπÊ†àÁöÑÊìç‰ΩúÔºåËøôÊ†∑Â∞±ËÉΩÁü•ÈÅìÊúÄÈïøÊúâÊïàÂ≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶ÔºåÂõ†‰∏∫‰∏ÄÊó¶‰∏çÊòØÊúâÊïàÂ≠óÁ¨¶‰∏≤‰∫ÜÔºåÊ†àÂ∞±‰ºöÂèòÁ©∫Ôºå‰∏ã‰∏Ä‰∏™Â°´ÂÖ•ÁöÑ‰∏ÄÂÆöÊòØÊúâÊïàÂ≠óÁ¨¶‰∏≤ÁöÑÂâç‰∏Ä‰Ωç‚Ä¶‰∏çËøáÊàëËøòÊòØËßâÂæóÊàëÁöÑÊñπÊ≥ïÊõ¥ÂÆπÊòìËÆ©‰∫∫ÁêÜËß£ÔºåËøô‰∏™ÊñπÊ≥ïÂè™ËÉΩÊ¨£Ëµè‰∫Ü„ÄÇ ‰ΩúËÄÖÔºöLeetCodeÈìæÊé•Ôºöhttps://leetcode-cn.com/problems/longest-valid-parentheses/solution/zui-chang-you-xiao-gua-hao-by-leetcode/Êù•Ê∫êÔºöÂäõÊâ£ÔºàLeetCodeÔºâËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ ‰ª£Á†Å ÊÄùË∑Ø‰∏Ä 1234567891011121314151617181920212223242526272829class Solution &#123; public int longestValidParentheses(String s) &#123; Stack&lt;Integer&gt; stack=new Stack&lt;Integer&gt;(); int max = 0; // ‰øùÂ≠ò‰∏ä‰∏Ä‰∏™ÊúâÊïàÊã¨Âè∑ÁöÑÈïøÂ∫¶ int last_num; int[] num = new int[s.length()+1]; boolean[] dp = new boolean[s.length()+1]; for(int i = 0;i &lt; s.length();i++)&#123; if(s.charAt(i) == '(')&#123; stack.push(i); &#125; else if(!stack.isEmpty() &amp;&amp; s.charAt(i) == ')')&#123; //ËøôÈáåÁöÑÊòØiÊòØ‰ªé0ÂºÄÂßãÁöÑÔºåÊâÄ‰ª•ËøôÂÖ∂ÂÆûÊòØÁ¨¨ i+1 ‰∏™Êï∞ dp[i+1] = true; //Â¶ÇÊûúÂèñÂá∫Êù•ÁöÑÊï∞ÂØπÂ∫îÁöÑÁ¥¢ÂºïÁöÑÂâç‰∏Ä‰Ωç‰πüÊòØÊúâÊïàÊã¨Âè∑ÔºåÊ≥®ÊÑèÂì¶ÔºåËøôÈáåÁöÑdpÊòØ‰ªé1ÂºÄÂßãÁöÑÔºÅ // ÊâÄ‰ª•‰∏çÁî®Âáè1‰∫ÜÔºåÁõ¥Êé•Â∞±ÊòØdp[stack.peek()],numÊï∞ÁªÑÂêåÁêÜ // dpÊï∞ÁªÑÂíånumÊï∞ÁªÑÔºåÁ¥¢ÂºïÂÄº‰∏∫ i+1 if(dp[stack.peek()] == true)&#123; last_num = num[stack.peek()]; &#125; else last_num = 0; num[i+1] = i - stack.pop() + 1 + last_num; max = Math.max(max,num[i+1]); &#125; &#125; return max; &#125;&#125; ÊÄùË∑Ø‰∫å „ÄêÁ≤æÂ¶ôÊó†ÊØîÔºåÈÄÇÂΩìËÆ∞ÂøÜ„Äë 123456789101112131415161718192021public class Solution &#123; public int longestValidParentheses(String s) &#123; int maxans = 0; Stack&lt;Integer&gt; stack = new Stack&lt;&gt;(); stack.push(-1); for (int i = 0; i &lt; s.length(); i++) &#123; if (s.charAt(i) == '(') &#123; stack.push(i); &#125; else &#123; stack.pop(); if (stack.empty()) &#123; stack.push(i); &#125; else &#123; maxans = Math.max(maxans, i - stack.peek()); &#125; &#125; &#125; return maxans; &#125;&#125; 5152. Â∞ÜÁü©ÈòµÊåâÂØπËßíÁ∫øÊéíÂ∫èÈ¢òÁõÆÁªô‰Ω†‰∏Ä‰∏™ m * n ÁöÑÊï¥Êï∞Áü©Èòµ mat ÔºåËØ∑‰Ω†Â∞ÜÂêå‰∏ÄÊù°ÂØπËßíÁ∫ø‰∏äÁöÑÂÖÉÁ¥†Ôºà‰ªéÂ∑¶‰∏äÂà∞Âè≥‰∏ãÔºâÊåâÂçáÂ∫èÊéíÂ∫èÂêéÔºåËøîÂõûÊéíÂ•ΩÂ∫èÁöÑÁü©Èòµ„ÄÇ Á§∫‰æã 1Ôºö 12ËæìÂÖ•Ôºömat = [[3,3,1,1],[2,2,1,2],[1,1,1,2]]ËæìÂá∫Ôºö[[1,1,1,1],[1,2,2,2],[1,2,3,3]] ÊÄùË∑Ø ‰ΩøÁî®ÁöÑÊòØ NÁöáÂêé ÈóÆÈ¢òÁöÑÁºñÁ†ÅÊäÄÂ∑ßÔºö‰∏ªÂØπËßíÁ∫ø‰∏äÂÖÉÁ¥†ÁöÑÁâπÁÇπÊòØÔºöÁ∫µÂùêÊ†á - Ê®™ÂùêÊ†á = ÂÆöÂÄº „ÄêÈöæÁÇπ„Äë ‰∏∫‰∫ÜËÉΩÂ§üÊîæËøõÊï∞ÁªÑ‰∏≠ÔºåÂä†‰∏äÂÅèÁßª m - 1 „ÄÇ„ÄêÈöæÁÇπ„Äë ‰∏§Ê¨°ÈÅçÂéÜÔºöÁ¨¨‰∏ÄÊ¨°ÈÅçÂéÜÊääÊï∞ÊçÆÊã∑Ë¥ùÂà∞ÂØπËßíÁ∫øÊï∞ÁªÑ‰∏≠ÔºåÁÑ∂ÂêéÊéíÂ∫èÔºõÁ¨¨‰∫åÊ¨°ÈÅçÂéÜÊääÂØπËßíÁ∫øÊï∞ÁªÑÂÜôÂõûÂéüÂßãÊï∞ÁªÑÔºàÊàñËÄÖÊñ∞ÂºÄ‰∏Ä‰∏™Êï∞ÁªÑÔºâÂùáÂèØ„ÄÇ ‰ΩúËÄÖÔºöliweiwei1419ÈìæÊé•Ôºöhttps://leetcode-cn.com/problems/sort-the-matrix-diagonally/solution/bao-li-jie-fa-by-liweiwei1419/Êù•Ê∫êÔºöÂäõÊâ£ÔºàLeetCodeÔºâ ‰ª£Á†Å123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051import java.util.ArrayList;import java.util.Arrays;import java.util.Collections;public class Solution &#123; public int[][] diagonalSort(int[][] mat) &#123; // Ë°åÊï∞ int m = mat.length; // ÂàóÊï∞ int n = mat[0].length; // ‰∏ªÂØπËßíÁ∫øÁöÑÊù°Êï∞ int dLen = m + n - 1; // ÊØè‰∏ÄÊù°ÂØπËßíÁ∫øÈÉΩÂàõÂª∫‰∏Ä‰∏™Âä®ÊÄÅÊï∞ÁªÑ ArrayList&lt;Integer&gt;[] diagonal = new ArrayList[dLen]; for (int i = 0; i &lt; dLen; i++) &#123; diagonal[i] = new ArrayList&lt;&gt;(m); &#125; // ÈÅçÂéÜÂéüÂßãÁü©ÈòµÔºåÊääÂéüÂßãÁü©Èòµ‰∏≠ÁöÑÂÖÉÁ¥†ÊîæËøõÂØπÂ∫îÁöÑÂä®ÊÄÅÊï∞ÁªÑ‰∏≠ // ‰∏ªÂØπËßíÁ∫ø‰∏äÂÖÉÁ¥†ÁöÑÁâπÁÇπÊòØÔºöÁ∫µÂùêÊ†á - Ê®™ÂùêÊ†á = ÂÆöÂÄº // Âä†‰∏äÂÅèÁßª m - 1 ÊòØ‰∏∫‰∫ÜËÉΩÂ§üÊîæËøõÊï∞ÁªÑ‰∏≠ for (int i = 0; i &lt; m; i++) &#123; for (int j = 0; j &lt; n; j++) &#123; diagonal[j - i + (m - 1)].add(mat[i][j]); &#125; &#125; // ÂØπÊØè‰∏Ä‰∏™ÂØπËßíÁ∫ø‰∏äÁöÑÂä®ÊÄÅÊï∞ÁªÑÂàÜÂà´ËøõË°åÂçáÂ∫èÊéíÂ∫è for (int i = 0; i &lt; dLen; i++) &#123; Collections.sort(diagonal[i]); &#125; int[][] res = new int[m][n]; // ÂØπËßíÁ∫øÊï∞ÁªÑ‰∏äËøòÊú™ÂèñÂá∫ÁöÑÂÖÉÁ¥†ÁöÑ‰∏ãÊ†áÔºåÂàùÂßãÂåñÁöÑÊó∂ÂÄôÂùá‰∏∫ 0 int[] next = new int[dLen]; for (int i = 0; i &lt; m; i++) &#123; for (int j = 0; j &lt; n; j++) &#123; // ÂØπËßíÁ∫øÁöÑÂùêÊ†á int index = j - i + (m - 1); // ËÆ∞ÂΩïÁªìÊûú res[i][j] = diagonal[index].get(next[index]); // Áª¥Êä§ next Êï∞ÁªÑÁöÑÂÄº next[index]++; &#125; &#125; return res; &#125;&#125; ‰ΩúËÄÖÔºöliweiwei1419ÈìæÊé•Ôºöhttps://leetcode-cn.com/problems/sort-the-matrix-diagonally/solution/bao-li-jie-fa-by-liweiwei1419/Êù•Ê∫êÔºöÂäõÊâ£ÔºàLeetCodeÔºâËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ 51. NÁöáÂêéÂõûÊ∫ØÁÆóÊ≥ïËøôÁØáÊñáÁ´†ÊòØÂæà‰πÖ‰πãÂâçÁöÑ‰∏ÄÁØá„ÄäÂõûÊ∫ØÁÆóÊ≥ïËØ¶Ëß£„ÄãÁöÑËøõÈò∂ÁâàÔºå‰πãÂâçÈÇ£ÁØá‰∏çÂ§üÊ∏ÖÊ•öÔºåÂ∞±‰∏çÂøÖÁúã‰∫ÜÔºåÁúãËøôÁØáÂ∞±Ë°å„ÄÇÊääÊ°ÜÊû∂Áªô‰Ω†ËÆ≤Ê∏ÖÊ•öÔºå‰Ω†‰ºöÂèëÁé∞ÂõûÊ∫ØÁÆóÊ≥ïÈóÆÈ¢òÈÉΩÊòØ‰∏Ä‰∏™Â•óË∑Ø„ÄÇ Â∫üËØù‰∏çÂ§öËØ¥ÔºåÁõ¥Êé•‰∏äÂõûÊ∫ØÁÆóÊ≥ïÊ°ÜÊû∂„ÄÇËß£ÂÜ≥‰∏Ä‰∏™ÂõûÊ∫ØÈóÆÈ¢òÔºåÂÆûÈôÖ‰∏äÂ∞±ÊòØ‰∏Ä‰∏™ÂÜ≥Á≠ñÊ†ëÁöÑÈÅçÂéÜËøáÁ®ã„ÄÇ‰Ω†Âè™ÈúÄË¶ÅÊÄùËÄÉ 3 ‰∏™ÈóÆÈ¢òÔºö 1„ÄÅË∑ØÂæÑÔºö‰πüÂ∞±ÊòØÂ∑≤ÁªèÂÅöÂá∫ÁöÑÈÄâÊã©„ÄÇ 2„ÄÅÈÄâÊã©ÂàóË°®Ôºö‰πüÂ∞±ÊòØ‰Ω†ÂΩìÂâçÂèØ‰ª•ÂÅöÁöÑÈÄâÊã©„ÄÇ 3„ÄÅÁªìÊùüÊù°‰ª∂Ôºö‰πüÂ∞±ÊòØÂà∞ËææÂÜ≥Á≠ñÊ†ëÂ∫ïÂ±ÇÔºåÊó†Ê≥ïÂÜçÂÅöÈÄâÊã©ÁöÑÊù°‰ª∂„ÄÇ Â¶ÇÊûú‰Ω†‰∏çÁêÜËß£Ëøô‰∏â‰∏™ËØçËØ≠ÁöÑËß£ÈáäÔºåÊ≤°ÂÖ≥Á≥ªÔºåÊàë‰ª¨ÂêéÈù¢‰ºöÁî®„ÄåÂÖ®ÊéíÂàó„ÄçÂíå„ÄåN ÁöáÂêéÈóÆÈ¢ò„ÄçËøô‰∏§‰∏™ÁªèÂÖ∏ÁöÑÂõûÊ∫ØÁÆóÊ≥ïÈóÆÈ¢òÊù•Â∏Æ‰Ω†ÁêÜËß£Ëøô‰∫õËØçËØ≠ÊòØ‰ªÄ‰πàÊÑèÊÄùÔºåÁé∞Âú®‰Ω†ÂÖàÁïôÁùÄÂç∞Ë±°„ÄÇ ‰ª£Á†ÅÊñπÈù¢ÔºåÂõûÊ∫ØÁÆóÊ≥ïÁöÑÊ°ÜÊû∂Ôºö 12345678910result = []def backtrack(Ë∑ØÂæÑ, ÈÄâÊã©ÂàóË°®): if Êª°Ë∂≥ÁªìÊùüÊù°‰ª∂: result.add(Ë∑ØÂæÑ) returnfor ÈÄâÊã© in ÈÄâÊã©ÂàóË°®: ÂÅöÈÄâÊã© backtrack(Ë∑ØÂæÑ, ÈÄâÊã©ÂàóË°®) Êí§ÈîÄÈÄâÊã© ÂÖ∂Ê†∏ÂøÉÂ∞±ÊòØ for Âæ™ÁéØÈáåÈù¢ÁöÑÈÄíÂΩíÔºåÂú®ÈÄíÂΩíË∞ÉÁî®‰πãÂâç„ÄåÂÅöÈÄâÊã©„ÄçÔºåÂú®ÈÄíÂΩíË∞ÉÁî®‰πãÂêé„ÄåÊí§ÈîÄÈÄâÊã©„ÄçÔºåÁâπÂà´ÁÆÄÂçï„ÄÇ ‰ªÄ‰πàÂè´ÂÅöÈÄâÊã©ÂíåÊí§ÈîÄÈÄâÊã©Âë¢ÔºåËøô‰∏™Ê°ÜÊû∂ÁöÑÂ∫ïÂ±ÇÂéüÁêÜÊòØ‰ªÄ‰πàÂë¢Ôºü‰∏ãÈù¢Êàë‰ª¨Â∞±ÈÄöËøá„ÄåÂÖ®ÊéíÂàó„ÄçËøô‰∏™ÈóÆÈ¢òÊù•Ëß£ÂºÄ‰πãÂâçÁöÑÁñëÊÉëÔºåËØ¶ÁªÜÊé¢Á©∂‰∏Ä‰∏ãÂÖ∂‰∏≠ÁöÑÂ••Â¶ôÔºÅ ‰∏Ä„ÄÅÂÖ®ÊéíÂàóÈóÆÈ¢òÊàë‰ª¨Âú®È´ò‰∏≠ÁöÑÊó∂ÂÄôÂ∞±ÂÅöËøáÊéíÂàóÁªÑÂêàÁöÑÊï∞Â≠¶È¢òÔºåÊàë‰ª¨‰πüÁü•ÈÅì n ‰∏™‰∏çÈáçÂ§çÁöÑÊï∞ÔºåÂÖ®ÊéíÂàóÂÖ±Êúâ n! ‰∏™„ÄÇ PSÔºö‰∏∫‰∫ÜÁÆÄÂçïÊ∏ÖÊô∞Ëµ∑ËßÅÔºåÊàë‰ª¨ËøôÊ¨°ËÆ®ËÆ∫ÁöÑÂÖ®ÊéíÂàóÈóÆÈ¢ò‰∏çÂåÖÂê´ÈáçÂ§çÁöÑÊï∞Â≠ó„ÄÇ ÈÇ£‰πàÊàë‰ª¨ÂΩìÊó∂ÊòØÊÄé‰πàÁ©∑‰∏æÂÖ®ÊéíÂàóÁöÑÂë¢ÔºüÊØîÊñπËØ¥Áªô‰∏â‰∏™Êï∞ [1,2,3]Ôºå‰Ω†ËÇØÂÆö‰∏ç‰ºöÊó†ËßÑÂæãÂú∞‰π±Á©∑‰∏æÔºå‰∏ÄËà¨ÊòØËøôÊ†∑Ôºö ÂÖàÂõ∫ÂÆöÁ¨¨‰∏Ä‰Ωç‰∏∫ 1ÔºåÁÑ∂ÂêéÁ¨¨‰∫å‰ΩçÂèØ‰ª•ÊòØ 2ÔºåÈÇ£‰πàÁ¨¨‰∏â‰ΩçÂè™ËÉΩÊòØ 3ÔºõÁÑ∂ÂêéÂèØ‰ª•ÊääÁ¨¨‰∫å‰ΩçÂèòÊàê 3ÔºåÁ¨¨‰∏â‰ΩçÂ∞±Âè™ËÉΩÊòØ 2 ‰∫ÜÔºõÁÑ∂ÂêéÂ∞±Âè™ËÉΩÂèòÂåñÁ¨¨‰∏Ä‰ΩçÔºåÂèòÊàê 2ÔºåÁÑ∂ÂêéÂÜçÁ©∑‰∏æÂêé‰∏§‰Ωç‚Ä¶‚Ä¶ ÂÖ∂ÂÆûËøôÂ∞±ÊòØÂõûÊ∫ØÁÆóÊ≥ïÔºåÊàë‰ª¨È´ò‰∏≠Êó†Â∏àËá™ÈÄöÂ∞±‰ºöÁî®ÔºåÊàñËÄÖÊúâÁöÑÂêåÂ≠¶Áõ¥Êé•ÁîªÂá∫Â¶Ç‰∏ãËøôÊ£µÂõûÊ∫ØÊ†ëÔºö Âè™Ë¶Å‰ªéÊ†πÈÅçÂéÜËøôÊ£µÊ†ëÔºåËÆ∞ÂΩïË∑ØÂæÑ‰∏äÁöÑÊï∞Â≠óÔºåÂÖ∂ÂÆûÂ∞±ÊòØÊâÄÊúâÁöÑÂÖ®ÊéíÂàó„ÄÇÊàë‰ª¨‰∏çÂ¶®ÊääËøôÊ£µÊ†ëÁß∞‰∏∫ÂõûÊ∫ØÁÆóÊ≥ïÁöÑ„ÄåÂÜ≥Á≠ñÊ†ë„Äç„ÄÇ ‰∏∫Âï•ËØ¥ËøôÊòØÂÜ≥Á≠ñÊ†ëÂë¢ÔºåÂõ†‰∏∫‰Ω†Âú®ÊØè‰∏™ËäÇÁÇπ‰∏äÂÖ∂ÂÆûÈÉΩÂú®ÂÅöÂÜ≥Á≠ñ„ÄÇÊØîÂ¶ÇËØ¥‰Ω†Á´ôÂú®‰∏ãÂõæÁöÑÁ∫¢Ëâ≤ËäÇÁÇπ‰∏äÔºö ‰Ω†Áé∞Âú®Â∞±Âú®ÂÅöÂÜ≥Á≠ñÔºåÂèØ‰ª•ÈÄâÊã© 1 ÈÇ£Êù°Ê†ëÊûùÔºå‰πüÂèØ‰ª•ÈÄâÊã© 3 ÈÇ£Êù°Ê†ëÊûù„ÄÇ‰∏∫Âï•Âè™ËÉΩÂú® 1 Âíå 3 ‰πã‰∏≠ÈÄâÊã©Âë¢ÔºüÂõ†‰∏∫ 2 Ëøô‰∏™Ê†ëÊûùÂú®‰Ω†Ë∫´ÂêéÔºåËøô‰∏™ÈÄâÊã©‰Ω†‰πãÂâçÂÅöËøá‰∫ÜÔºåËÄåÂÖ®ÊéíÂàóÊòØ‰∏çÂÖÅËÆ∏ÈáçÂ§ç‰ΩøÁî®Êï∞Â≠óÁöÑ„ÄÇ Áé∞Âú®ÂèØ‰ª•Ëß£Á≠îÂºÄÂ§¥ÁöÑÂá†‰∏™ÂêçËØçÔºö[2] Â∞±ÊòØ„ÄåË∑ØÂæÑ„ÄçÔºåËÆ∞ÂΩï‰Ω†Â∑≤ÁªèÂÅöËøáÁöÑÈÄâÊã©Ôºõ[1,3] Â∞±ÊòØ„ÄåÈÄâÊã©ÂàóË°®„ÄçÔºåË°®Á§∫‰Ω†ÂΩìÂâçÂèØ‰ª•ÂÅöÂá∫ÁöÑÈÄâÊã©Ôºõ„ÄåÁªìÊùüÊù°‰ª∂„ÄçÂ∞±ÊòØÈÅçÂéÜÂà∞Ê†ëÁöÑÂ∫ïÂ±ÇÔºåÂú®ËøôÈáåÂ∞±ÊòØÈÄâÊã©ÂàóË°®‰∏∫Á©∫ÁöÑÊó∂ÂÄô„ÄÇ Â¶ÇÊûúÊòéÁôΩ‰∫ÜËøôÂá†‰∏™ÂêçËØçÔºåÂèØ‰ª•Êää„ÄåË∑ØÂæÑ„ÄçÂíå„ÄåÈÄâÊã©„ÄçÂàóË°®‰Ωú‰∏∫ÂÜ≥Á≠ñÊ†ë‰∏äÊØè‰∏™ËäÇÁÇπÁöÑÂ±ûÊÄßÔºåÊØîÂ¶Ç‰∏ãÂõæÂàóÂá∫‰∫ÜÂá†‰∏™ËäÇÁÇπÁöÑÂ±ûÊÄßÔºö Êàë‰ª¨ÂÆö‰πâÁöÑ backtrack ÂáΩÊï∞ÂÖ∂ÂÆûÂ∞±ÂÉè‰∏Ä‰∏™ÊåáÈíàÔºåÂú®ËøôÊ£µÊ†ë‰∏äÊ∏∏Ëµ∞ÔºåÂêåÊó∂Ë¶ÅÊ≠£Á°ÆÁª¥Êä§ÊØè‰∏™ËäÇÁÇπÁöÑÂ±ûÊÄßÔºåÊØèÂΩìËµ∞Âà∞Ê†ëÁöÑÂ∫ïÂ±ÇÔºåÂÖ∂„ÄåË∑ØÂæÑ„ÄçÂ∞±ÊòØ‰∏Ä‰∏™ÂÖ®ÊéíÂàó„ÄÇ ÂÜçËøõ‰∏ÄÊ≠•ÔºåÂ¶Ç‰ΩïÈÅçÂéÜ‰∏ÄÊ£µÊ†ëÔºüËøô‰∏™Â∫îËØ•‰∏çÈöæÂêß„ÄÇÂõûÂøÜ‰∏Ä‰∏ã‰πãÂâç„ÄåÂ≠¶‰π†Êï∞ÊçÆÁªìÊûÑÁöÑÊ°ÜÊû∂ÊÄùÁª¥„ÄçÂÜôËøáÔºåÂêÑÁßçÊêúÁ¥¢ÈóÆÈ¢òÂÖ∂ÂÆûÈÉΩÊòØÊ†ëÁöÑÈÅçÂéÜÈóÆÈ¢òÔºåËÄåÂ§öÂèâÊ†ëÁöÑÈÅçÂéÜÊ°ÜÊû∂Â∞±ÊòØËøôÊ†∑Ôºö 123456void traverse(TreeNode root) &#123; for (TreeNode child : root.childern) // ÂâçÂ∫èÈÅçÂéÜÈúÄË¶ÅÁöÑÊìç‰Ωú traverse(child); // ÂêéÂ∫èÈÅçÂéÜÈúÄË¶ÅÁöÑÊìç‰Ωú&#125; ËÄåÊâÄË∞ìÁöÑÂâçÂ∫èÈÅçÂéÜÂíåÂêéÂ∫èÈÅçÂéÜÔºå‰ªñ‰ª¨Âè™ÊòØ‰∏§‰∏™ÂæàÊúâÁî®ÁöÑÊó∂Èó¥ÁÇπÔºåÊàëÁªô‰Ω†ÁîªÂº†Âõæ‰Ω†Â∞±ÊòéÁôΩ‰∫ÜÔºö ÂâçÂ∫èÈÅçÂéÜÁöÑ‰ª£Á†ÅÂú®ËøõÂÖ•Êüê‰∏Ä‰∏™ËäÇÁÇπ‰πãÂâçÁöÑÈÇ£‰∏™Êó∂Èó¥ÁÇπÊâßË°åÔºåÂêéÂ∫èÈÅçÂéÜ‰ª£Á†ÅÂú®Á¶ªÂºÄÊüê‰∏™ËäÇÁÇπ‰πãÂêéÁöÑÈÇ£‰∏™Êó∂Èó¥ÁÇπÊâßË°å„ÄÇ ÂõûÊÉ≥Êàë‰ª¨ÂàöÊâçËØ¥ÁöÑÔºå„ÄåË∑ØÂæÑ„ÄçÂíå„ÄåÈÄâÊã©„ÄçÊòØÊØè‰∏™ËäÇÁÇπÁöÑÂ±ûÊÄßÔºåÂáΩÊï∞Âú®Ê†ë‰∏äÊ∏∏Ëµ∞Ë¶ÅÊ≠£Á°ÆÁª¥Êä§ËäÇÁÇπÁöÑÂ±ûÊÄßÔºåÈÇ£‰πàÂ∞±Ë¶ÅÂú®Ëøô‰∏§‰∏™ÁâπÊÆäÊó∂Èó¥ÁÇπÊêûÁÇπÂä®‰ΩúÔºö Áé∞Âú®Ôºå‰Ω†ÊòØÂê¶ÁêÜËß£‰∫ÜÂõûÊ∫ØÁÆóÊ≥ïÁöÑËøôÊÆµÊ†∏ÂøÉÊ°ÜÊû∂Ôºü 12345678for ÈÄâÊã© in ÈÄâÊã©ÂàóË°®: # ÂÅöÈÄâÊã© Â∞ÜËØ•ÈÄâÊã©‰ªéÈÄâÊã©ÂàóË°®ÁßªÈô§ Ë∑ØÂæÑ.add(ÈÄâÊã©) backtrack(Ë∑ØÂæÑ, ÈÄâÊã©ÂàóË°®) # Êí§ÈîÄÈÄâÊã© Ë∑ØÂæÑ.remove(ÈÄâÊã©) Â∞ÜËØ•ÈÄâÊã©ÂÜçÂä†ÂÖ•ÈÄâÊã©ÂàóË°® Êàë‰ª¨Âè™Ë¶ÅÂú®ÈÄíÂΩí‰πãÂâçÂÅöÂá∫ÈÄâÊã©ÔºåÂú®ÈÄíÂΩí‰πãÂêéÊí§ÈîÄÂàöÊâçÁöÑÈÄâÊã©ÔºåÂ∞±ËÉΩÊ≠£Á°ÆÂæóÂà∞ÊØè‰∏™ËäÇÁÇπÁöÑÈÄâÊã©ÂàóË°®ÂíåË∑ØÂæÑ„ÄÇ ‰∏ãÈù¢ÔºåÁõ¥Êé•ÁúãÂÖ®ÊéíÂàó‰ª£Á†ÅÔºö 1234567891011121314151617181920212223242526272829303132List&lt;List&lt;Integer&gt;&gt; res = new LinkedList&lt;&gt;();/* ‰∏ªÂáΩÊï∞ÔºåËæìÂÖ•‰∏ÄÁªÑ‰∏çÈáçÂ§çÁöÑÊï∞Â≠óÔºåËøîÂõûÂÆÉ‰ª¨ÁöÑÂÖ®ÊéíÂàó */List&lt;List&lt;Integer&gt;&gt; permute(int[] nums) &#123; // ËÆ∞ÂΩï„ÄåË∑ØÂæÑ„Äç LinkedList&lt;Integer&gt; track = new LinkedList&lt;&gt;(); backtrack(nums, track); return res;&#125;// Ë∑ØÂæÑÔºöËÆ∞ÂΩïÂú® track ‰∏≠// ÈÄâÊã©ÂàóË°®Ôºönums ‰∏≠‰∏çÂ≠òÂú®‰∫é track ÁöÑÈÇ£‰∫õÂÖÉÁ¥†// ÁªìÊùüÊù°‰ª∂Ôºönums ‰∏≠ÁöÑÂÖÉÁ¥†ÂÖ®ÈÉΩÂú® track ‰∏≠Âá∫Áé∞void backtrack(int[] nums, LinkedList&lt;Integer&gt; track) &#123; // Ëß¶ÂèëÁªìÊùüÊù°‰ª∂ if (track.size() == nums.length) &#123; res.add(new LinkedList(track)); return; &#125; for (int i = 0; i &lt; nums.length; i++) &#123; // ÊéíÈô§‰∏çÂêàÊ≥ïÁöÑÈÄâÊã© if (track.contains(nums[i])) continue; // ÂÅöÈÄâÊã© track.add(nums[i]); // ËøõÂÖ•‰∏ã‰∏ÄÂ±ÇÂÜ≥Á≠ñÊ†ë backtrack(nums, track); // ÂèñÊ∂àÈÄâÊã© track.removeLast(); &#125;&#125; Êàë‰ª¨ËøôÈáåÁ®çÂæÆÂÅö‰∫Ü‰∫õÂèòÈÄöÔºåÊ≤°ÊúâÊòæÂºèËÆ∞ÂΩï„ÄåÈÄâÊã©ÂàóË°®„ÄçÔºåËÄåÊòØÈÄöËøá nums Âíå track Êé®ÂØºÂá∫ÂΩìÂâçÁöÑÈÄâÊã©ÂàóË°®Ôºö Ëá≥Ê≠§ÔºåÊàë‰ª¨Â∞±ÈÄöËøáÂÖ®ÊéíÂàóÈóÆÈ¢òËØ¶Ëß£‰∫ÜÂõûÊ∫ØÁÆóÊ≥ïÁöÑÂ∫ïÂ±ÇÂéüÁêÜ„ÄÇÂΩìÁÑ∂ÔºåËøô‰∏™ÁÆóÊ≥ïËß£ÂÜ≥ÂÖ®ÊéíÂàó‰∏çÊòØÂæàÈ´òÊïàÔºåÂ∫î‰∏∫ÂØπÈìæË°®‰ΩøÁî® contains ÊñπÊ≥ïÈúÄË¶Å O(N) ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶„ÄÇÊúâÊõ¥Â•ΩÁöÑÊñπÊ≥ïÈÄöËøá‰∫§Êç¢ÂÖÉÁ¥†ËææÂà∞ÁõÆÁöÑÔºå‰ΩÜÊòØÈöæÁêÜËß£‰∏Ä‰∫õÔºåËøôÈáåÂ∞±‰∏çÂÜô‰∫ÜÔºåÊúâÂÖ¥Ë∂£ÂèØ‰ª•Ëá™Ë°åÊêúÁ¥¢‰∏Ä‰∏ã„ÄÇ ‰ΩÜÊòØÂøÖÈ°ªËØ¥ÊòéÁöÑÊòØÔºå‰∏çÁÆ°ÊÄé‰πà‰ºòÂåñÔºåÈÉΩÁ¨¶ÂêàÂõûÊ∫ØÊ°ÜÊû∂ÔºåËÄå‰∏îÊó∂Èó¥Â§çÊùÇÂ∫¶ÈÉΩ‰∏çÂèØËÉΩ‰Ωé‰∫é O(N!)ÔºåÂõ†‰∏∫Á©∑‰∏æÊï¥Ê£µÂÜ≥Á≠ñÊ†ëÊòØÊó†Ê≥ïÈÅøÂÖçÁöÑ„ÄÇËøô‰πüÊòØÂõûÊ∫ØÁÆóÊ≥ïÁöÑ‰∏Ä‰∏™ÁâπÁÇπÔºå‰∏çÂÉèÂä®ÊÄÅËßÑÂàíÂ≠òÂú®ÈáçÂè†Â≠êÈóÆÈ¢òÂèØ‰ª•‰ºòÂåñÔºåÂõûÊ∫ØÁÆóÊ≥ïÂ∞±ÊòØÁ∫ØÊö¥ÂäõÁ©∑‰∏æÔºåÂ§çÊùÇÂ∫¶‰∏ÄËà¨ÈÉΩÂæàÈ´ò„ÄÇ ÊòéÁôΩ‰∫ÜÂÖ®ÊéíÂàóÈóÆÈ¢òÔºåÂ∞±ÂèØ‰ª•Áõ¥Êé•Â•óÂõûÊ∫ØÁÆóÊ≥ïÊ°ÜÊû∂‰∫ÜÔºå‰∏ãÈù¢ÁÆÄÂçïÁúãÁúã N ÁöáÂêéÈóÆÈ¢ò„ÄÇ ‰∫å„ÄÅN ÁöáÂêéÈóÆÈ¢òËøô‰∏™ÈóÆÈ¢òÂæàÁªèÂÖ∏‰∫ÜÔºåÁÆÄÂçïËß£Èáä‰∏Ä‰∏ãÔºöÁªô‰Ω†‰∏Ä‰∏™ N√óN ÁöÑÊ£ãÁõòÔºåËÆ©‰Ω†ÊîæÁΩÆ N ‰∏™ÁöáÂêéÔºå‰ΩøÂæóÂÆÉ‰ª¨‰∏çËÉΩ‰∫íÁõ∏ÊîªÂáª„ÄÇ PSÔºöÁöáÂêéÂèØ‰ª•ÊîªÂáªÂêå‰∏ÄË°å„ÄÅÂêå‰∏ÄÂàó„ÄÅÂ∑¶‰∏äÂ∑¶‰∏ãÂè≥‰∏äÂè≥‰∏ãÂõõ‰∏™ÊñπÂêëÁöÑ‰ªªÊÑèÂçï‰Ωç„ÄÇ Ëøô‰∏™ÈóÆÈ¢òÊú¨Ë¥®‰∏äË∑üÂÖ®ÊéíÂàóÈóÆÈ¢òÂ∑Æ‰∏çÂ§öÔºåÂÜ≥Á≠ñÊ†ëÁöÑÊØè‰∏ÄÂ±ÇË°®Á§∫Ê£ãÁõò‰∏äÁöÑÊØè‰∏ÄË°åÔºõÊØè‰∏™ËäÇÁÇπÂèØ‰ª•ÂÅöÂá∫ÁöÑÈÄâÊã©ÊòØÔºåÂú®ËØ•Ë°åÁöÑ‰ªªÊÑè‰∏ÄÂàóÊîæÁΩÆ‰∏Ä‰∏™ÁöáÂêé„ÄÇ Áõ¥Êé•Â•óÁî®Ê°ÜÊû∂: 123456789101112131415161718192021222324252627282930313233vector&lt;vector&lt;string&gt;&gt; res;/* ËæìÂÖ•Ê£ãÁõòËæπÈïø nÔºåËøîÂõûÊâÄÊúâÂêàÊ≥ïÁöÑÊîæÁΩÆ */vector&lt;vector&lt;string&gt;&gt; solveNQueens(int n) &#123; // '.' Ë°®Á§∫Á©∫Ôºå'Q' Ë°®Á§∫ÁöáÂêéÔºåÂàùÂßãÂåñÁ©∫Ê£ãÁõò„ÄÇ vector&lt;string&gt; board(n, string(n, '.')); backtrack(board, 0); return res;&#125;// Ë∑ØÂæÑÔºöboard ‰∏≠Â∞è‰∫é row ÁöÑÈÇ£‰∫õË°åÈÉΩÂ∑≤ÁªèÊàêÂäüÊîæÁΩÆ‰∫ÜÁöáÂêé// ÈÄâÊã©ÂàóË°®ÔºöÁ¨¨ row Ë°åÁöÑÊâÄÊúâÂàóÈÉΩÊòØÊîæÁΩÆÁöáÂêéÁöÑÈÄâÊã©// ÁªìÊùüÊù°‰ª∂Ôºörow Ë∂ÖËøá board ÁöÑÊúÄÂêé‰∏ÄË°åvoid backtrack(vector&lt;string&gt;&amp; board, int row) &#123; // Ëß¶ÂèëÁªìÊùüÊù°‰ª∂ if (row == board.size()) &#123; res.push_back(board); return; &#125; int n = board[row].size(); for (int col = 0; col &lt; n; col++) &#123; // ÊéíÈô§‰∏çÂêàÊ≥ïÈÄâÊã© if (!isValid(board, row, col)) continue; // ÂÅöÈÄâÊã© board[row][col] = 'Q'; // ËøõÂÖ•‰∏ã‰∏ÄË°åÂÜ≥Á≠ñ backtrack(board, row + 1); // Êí§ÈîÄÈÄâÊã© board[row][col] = '.'; &#125;&#125; ËøôÈÉ®ÂàÜ‰∏ªË¶Å‰ª£Á†ÅÔºåÂÖ∂ÂÆûË∑üÂÖ®ÊéíÂàóÈóÆÈ¢òÂ∑Æ‰∏çÂ§öÔºåisValid ÂáΩÊï∞ÁöÑÂÆûÁé∞‰πüÂæàÁÆÄÂçïÔºö 12345678910111213141516171819202122/* ÊòØÂê¶ÂèØ‰ª•Âú® board[row][col] ÊîæÁΩÆÁöáÂêéÔºü */bool isValid(vector&lt;string&gt;&amp; board, int row, int col) &#123; int n = board.size(); // Ê£ÄÊü•ÂàóÊòØÂê¶ÊúâÁöáÂêé‰∫íÁõ∏ÂÜ≤Á™Å for (int i = 0; i &lt; n; i++) &#123; if (board[i][col] == 'Q') return false; &#125; // Ê£ÄÊü•Âè≥‰∏äÊñπÊòØÂê¶ÊúâÁöáÂêé‰∫íÁõ∏ÂÜ≤Á™Å for (int i = row - 1, j = col + 1; i &gt;= 0 &amp;&amp; j &lt; n; i--, j++) &#123; if (board[i][j] == 'Q') return false; &#125; // Ê£ÄÊü•Â∑¶‰∏äÊñπÊòØÂê¶ÊúâÁöáÂêé‰∫íÁõ∏ÂÜ≤Á™Å for (int i = row - 1, j = col - 1; i &gt;= 0 &amp;&amp; j &gt;= 0; i--, j--) &#123; if (board[i][j] == 'Q') return false; &#125; return true;&#125; ÂáΩÊï∞ backtrack ‰æùÁÑ∂ÂÉè‰∏™Âú®ÂÜ≥Á≠ñÊ†ë‰∏äÊ∏∏Ëµ∞ÁöÑÊåáÈíàÔºåÈÄöËøá row Âíå col Â∞±ÂèØ‰ª•Ë°®Á§∫ÂáΩÊï∞ÈÅçÂéÜÂà∞ÁöÑ‰ΩçÁΩÆÔºåÈÄöËøá isValid ÂáΩÊï∞ÂèØ‰ª•Â∞Ü‰∏çÁ¨¶ÂêàÊù°‰ª∂ÁöÑÊÉÖÂÜµÂâ™ÊûùÔºö Â¶ÇÊûúÁõ¥Êé•Áªô‰Ω†Ëøô‰πà‰∏ÄÂ§ßÊÆµËß£Ê≥ï‰ª£Á†ÅÔºåÂèØËÉΩÊòØÊáµÈÄºÁöÑ„ÄÇ‰ΩÜÊòØÁé∞Âú®ÊòéÁôΩ‰∫ÜÂõûÊ∫ØÁÆóÊ≥ïÁöÑÊ°ÜÊû∂Â•óË∑ØÔºåËøòÊúâÂï•ÈöæÁêÜËß£ÁöÑÂë¢ÔºüÊó†ÈùûÊòØÊîπÊîπÂÅöÈÄâÊã©ÁöÑÊñπÂºèÔºåÊéíÈô§‰∏çÂêàÊ≥ïÈÄâÊã©ÁöÑÊñπÂºèËÄåÂ∑≤ÔºåÂè™Ë¶ÅÊ°ÜÊû∂Â≠ò‰∫éÂøÉÔºå‰Ω†Èù¢ÂØπÁöÑÂè™Ââ©‰∏ãÂ∞èÈóÆÈ¢ò‰∫Ü„ÄÇ ÂΩì N = 8 Êó∂ÔºåÂ∞±ÊòØÂÖ´ÁöáÂêéÈóÆÈ¢òÔºåÊï∞Â≠¶Â§ß‰Ω¨È´òÊñØÁ©∑Â∞Ω‰∏ÄÁîüÈÉΩÊ≤°ÊúâÊï∞Ê∏ÖÊ•öÂÖ´ÁöáÂêéÈóÆÈ¢òÂà∞Â∫ïÊúâÂá†ÁßçÂèØËÉΩÁöÑÊîæÁΩÆÊñπÊ≥ïÔºå‰ΩÜÊòØÊàë‰ª¨ÁöÑÁÆóÊ≥ïÂè™ÈúÄË¶Å‰∏ÄÁßíÂ∞±ÂèØ‰ª•ÁÆóÂá∫Êù•ÊâÄÊúâÂèØËÉΩÁöÑÁªìÊûú„ÄÇ ‰∏çËøáÁúüÁöÑ‰∏çÊÄ™È´òÊñØ„ÄÇËøô‰∏™ÈóÆÈ¢òÁöÑÂ§çÊùÇÂ∫¶Á°ÆÂÆûÈùûÂ∏∏È´òÔºåÁúãÁúãÊàë‰ª¨ÁöÑÂÜ≥Á≠ñÊ†ëÔºåËôΩÁÑ∂Êúâ isValid ÂáΩÊï∞Ââ™ÊûùÔºå‰ΩÜÊòØÊúÄÂùèÊó∂Èó¥Â§çÊùÇÂ∫¶‰ªçÁÑ∂ÊòØ O(N^(N+1))ÔºåËÄå‰∏îÊó†Ê≥ï‰ºòÂåñ„ÄÇÂ¶ÇÊûú N = 10 ÁöÑÊó∂ÂÄôÔºåËÆ°ÁÆóÂ∞±Â∑≤ÁªèÂæàËÄóÊó∂‰∫Ü„ÄÇ ÊúâÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨Âπ∂‰∏çÊÉ≥ÂæóÂà∞ÊâÄÊúâÂêàÊ≥ïÁöÑÁ≠îÊ°àÔºåÂè™ÊÉ≥Ë¶Å‰∏Ä‰∏™Á≠îÊ°àÔºåÊÄé‰πàÂäûÂë¢ÔºüÊØîÂ¶ÇËß£Êï∞Áã¨ÁöÑÁÆóÊ≥ïÔºåÊâæÊâÄÊúâËß£Ê≥ïÂ§çÊùÇÂ∫¶Â§™È´òÔºåÂè™Ë¶ÅÊâæÂà∞‰∏ÄÁßçËß£Ê≥ïÂ∞±ÂèØ‰ª•„ÄÇ ÂÖ∂ÂÆûÁâπÂà´ÁÆÄÂçïÔºåÂè™Ë¶ÅÁ®çÂæÆ‰øÆÊîπ‰∏Ä‰∏ãÂõûÊ∫ØÁÆóÊ≥ïÁöÑ‰ª£Á†ÅÂç≥ÂèØÔºö 1234567891011121314151617181920// ÂáΩÊï∞ÊâæÂà∞‰∏Ä‰∏™Á≠îÊ°àÂêéÂ∞±ËøîÂõû truebool backtrack(vector&lt;string&gt;&amp; board, int row) &#123; // Ëß¶ÂèëÁªìÊùüÊù°‰ª∂ if (row == board.size()) &#123; res.push_back(board); return true; &#125; ... for (int col = 0; col &lt; n; col++) &#123; ... board[row][col] = 'Q'; if (backtrack(board, row + 1)) return true; board[row][col] = '.'; &#125; return false;&#125; ËøôÊ†∑‰øÆÊîπÂêéÔºåÂè™Ë¶ÅÊâæÂà∞‰∏Ä‰∏™Á≠îÊ°àÔºåfor Âæ™ÁéØÁöÑÂêéÁª≠ÈÄíÂΩíÁ©∑‰∏æÈÉΩ‰ºöË¢´ÈòªÊñ≠„ÄÇ‰πüËÆ∏‰Ω†ÂèØ‰ª•Âú® N ÁöáÂêéÈóÆÈ¢òÁöÑ‰ª£Á†ÅÊ°ÜÊû∂‰∏äÔºåÁ®çÂä†‰øÆÊîπÔºåÂÜô‰∏Ä‰∏™Ëß£Êï∞Áã¨ÁöÑÁÆóÊ≥ïÔºü ‰∏â„ÄÅÊúÄÂêéÊÄªÁªìÂõûÊ∫ØÁÆóÊ≥ïÂ∞±ÊòØ‰∏™Â§öÂèâÊ†ëÁöÑÈÅçÂéÜÈóÆÈ¢òÔºåÂÖ≥ÈîÆÂ∞±ÊòØÂú®ÂâçÂ∫èÈÅçÂéÜÂíåÂêéÂ∫èÈÅçÂéÜÁöÑ‰ΩçÁΩÆÂÅö‰∏Ä‰∫õÊìç‰ΩúÔºåÁÆóÊ≥ïÊ°ÜÊû∂Â¶Ç‰∏ãÔºö 12345def backtrack(...): for ÈÄâÊã© in ÈÄâÊã©ÂàóË°®: ÂÅöÈÄâÊã© backtrack(...) Êí§ÈîÄÈÄâÊã© ÂÜô backtrack ÂáΩÊï∞Êó∂ÔºåÈúÄË¶ÅÁª¥Êä§Ëµ∞ËøáÁöÑ„ÄåË∑ØÂæÑ„ÄçÂíåÂΩìÂâçÂèØ‰ª•ÂÅöÁöÑ„ÄåÈÄâÊã©ÂàóË°®„ÄçÔºåÂΩìËß¶Âèë„ÄåÁªìÊùüÊù°‰ª∂„ÄçÊó∂ÔºåÂ∞Ü„ÄåË∑ØÂæÑ„ÄçËÆ∞ÂÖ•ÁªìÊûúÈõÜ„ÄÇ ÂÖ∂ÂÆûÊÉ≥ÊÉ≥ÁúãÔºåÂõûÊ∫ØÁÆóÊ≥ïÂíåÂä®ÊÄÅËßÑÂàíÊòØ‰∏çÊòØÊúâÁÇπÂÉèÂë¢ÔºüÊàë‰ª¨Âú®Âä®ÊÄÅËßÑÂàíÁ≥ªÂàóÊñáÁ´†‰∏≠Â§öÊ¨°Âº∫Ë∞ÉÔºåÂä®ÊÄÅËßÑÂàíÁöÑ‰∏â‰∏™ÈúÄË¶ÅÊòéÁ°ÆÁöÑÁÇπÂ∞±ÊòØ„ÄåÁä∂ÊÄÅ„Äç„ÄåÈÄâÊã©„ÄçÂíå„Äåbase case„ÄçÔºåÊòØ‰∏çÊòØÂ∞±ÂØπÂ∫îÁùÄËµ∞ËøáÁöÑ„ÄåË∑ØÂæÑ„ÄçÔºåÂΩìÂâçÁöÑ„ÄåÈÄâÊã©ÂàóË°®„ÄçÂíå„ÄåÁªìÊùüÊù°‰ª∂„ÄçÔºü ÊüêÁßçÁ®ãÂ∫¶‰∏äËØ¥ÔºåÂä®ÊÄÅËßÑÂàíÁöÑÊö¥ÂäõÊ±ÇËß£Èò∂ÊÆµÂ∞±ÊòØÂõûÊ∫ØÁÆóÊ≥ï„ÄÇÂè™ÊòØÊúâÁöÑÈóÆÈ¢òÂÖ∑ÊúâÈáçÂè†Â≠êÈóÆÈ¢òÊÄßË¥®ÔºåÂèØ‰ª•Áî® dp table ÊàñËÄÖÂ§áÂøòÂΩï‰ºòÂåñÔºåÂ∞ÜÈÄíÂΩíÊ†ëÂ§ßÂπÖÂâ™ÊûùÔºåËøôÂ∞±ÂèòÊàê‰∫ÜÂä®ÊÄÅËßÑÂàí„ÄÇËÄå‰ªäÂ§©ÁöÑ‰∏§‰∏™ÈóÆÈ¢òÔºåÈÉΩÊ≤°ÊúâÈáçÂè†Â≠êÈóÆÈ¢òÔºå‰πüÂ∞±ÊòØÂõûÊ∫ØÁÆóÊ≥ïÈóÆÈ¢ò‰∫ÜÔºåÂ§çÊùÇÂ∫¶ÈùûÂ∏∏È´òÊòØ‰∏çÂèØÈÅøÂÖçÁöÑ„ÄÇ ‰ΩúËÄÖÔºölabuladongÈìæÊé•Ôºöhttps://leetcode-cn.com/problems/n-queens/solution/hui-su-suan-fa-xiang-jie-by-labuladong/Êù•Ê∫êÔºöÂäõÊâ£ÔºàLeetCodeÔºâËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ Tip: JavaÂÜôÊ≥ï „ÄêNÁöáÂêé„Äë 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455class Solution &#123; public List&lt;List&lt;String&gt;&gt; res; public List&lt;List&lt;String&gt;&gt; solveNQueens(int n) &#123; if (n &lt;= 0) return null; res = new LinkedList&lt;&gt;(); char[][] board = new char[n][n]; for (char[] chars : board) Arrays.fill(chars, '.'); backtrack(board, 0); return res; &#125; private static List&lt;String&gt; charToString(char[][] array) &#123; List&lt;String&gt; result = new LinkedList&lt;&gt;(); for (char[] chars : array) &#123; result.add(String.valueOf(chars)); &#125; return result; &#125; /** * Ë∑ØÂæÑÔºöboard‰∏≠Â∞è‰∫érowÁöÑÈÇ£‰∫õË°åÈÉΩÂ∑≤ÁªèÊàêÂäüÊîæÁΩÆ‰∫ÜÁöáÂêé * ÂèØÈÄâÊã©ÂàóË°®: Á¨¨rowË°åÁöÑÊâÄÊúâÂàóÈÉΩÊòØÊîæÁΩÆQÁöÑÈÄâÊã© * ÁªìÊùüÊù°‰ª∂: rowË∂ÖËøáboardÁöÑÊúÄÂêé‰∏ÄË°å * * @param board * @param row */ private void backtrack(char[][] board, int row) &#123; if (row == board.length) &#123; res.add(charToString(board)); return; &#125; int n = board[row].length; for (int col = 0; col &lt; n; col++) &#123; if (!isValid(board, row, col)) continue; board[row][col] = 'Q'; backtrack(board, row + 1); board[row][col] = '.'; &#125; &#125; private boolean isValid(char[][] board, int row, int col) &#123; int rows = board.length; // check is valid in col for (char[] chars : board) if (chars[col] == 'Q') return false; // check is valide upright for (int i = row - 1, j = col + 1; i &gt;= 0 &amp;&amp; j &lt; rows; i--, j++) &#123; if (board[i][j] == 'Q') return false; &#125; // check is valide upleft for (int i = row - 1, j = col - 1; i &gt;= 0 &amp;&amp; j &gt;= 0; i--, j--) &#123; if (board[i][j] == 'Q') return false; &#125; return true; &#125;&#125; ‰ª£Á†ÅÊù•Ëá™Ôºö https://leetcode-cn.com/u/kpcoding/ 42. Êé•Èõ®Ê∞¥È¢òÁõÆÁªôÂÆö n ‰∏™ÈùûË¥üÊï¥Êï∞Ë°®Á§∫ÊØè‰∏™ÂÆΩÂ∫¶‰∏∫ 1 ÁöÑÊü±Â≠êÁöÑÈ´òÂ∫¶ÂõæÔºåËÆ°ÁÆóÊåâÊ≠§ÊéíÂàóÁöÑÊü±Â≠êÔºå‰∏ãÈõ®‰πãÂêéËÉΩÊé•Â§öÂ∞ëÈõ®Ê∞¥„ÄÇ Á§∫‰æã: 12ËæìÂÖ•: [0,1,0,2,1,0,1,3,2,1,2,1]ËæìÂá∫: 6 ÊÄùË∑ØËßÅ‰ª£Á†Å ‰ª£Á†Å123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109/** * Êö¥ÂäõÊ≥ï * Â∞±ÊòØÊâæÂ∑¶Âè≥Êü±Â≠êÁöÑÊúÄÂ§ßÂÄºÁöÑÊúÄÂ∞èÂÄºÔºåÂç≥Math.min(L_max,R_max),ÁÑ∂ÂêéÂáèÂéªËá™Ë∫´È´òÂ∫¶Â∞±ÊòØËÉΩÊé•ÁöÑÈõ®Ê∞¥ * ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåÊ±ÇÂ∑¶Âè≥Êü±Â≠êÊúÄÂ§ßÂÄºÊó∂ÈúÄË¶ÅÊääËá™Â∑±ËÆ°ÁÆóÂú®ÂÜÖÔºÅÔºÅÔºÅ * @param height * @return */ public int trapByViolence(int[] height)&#123; int res = 0; for(int i = 0;i &lt; height.length;i++)&#123; int L_max = 0; int R_max = 0; for(int j = i;j &gt;= 0;j--)&#123; L_max = Math.max(L_max,height[j]); &#125; for(int j = i;j &lt; height.length;j++)&#123; R_max = Math.max(R_max,height[j]); &#125; res = res + Math.min(L_max,R_max) - height[i]; &#125; return res; &#125; /** * dpÂ§ßÊ≥ï * Áî®Á©∫Èó¥Êç¢Êó∂Èó¥ÔºåÊää L_max„ÄÅR_max ËÆ∞ÂΩï‰∏ãÊù•ÔºåÂ∞±‰∏çÁî®ÈáçÂ§çËÆ°ÁÆó‰∫Ü * @param height * @return */ public int trapByDp(int[] height)&#123; int res = 0; int len = height.length; if(len == 0) return 0; int[] L_max = new int[len]; int[] R_max = new int[len]; L_max[0] = height[0]; R_max[len-1] = height[len-1]; for(int i = 1;i &lt; len;i++)&#123; L_max[i] = Math.max(L_max[i-1],height[i]); &#125; for(int i = len - 2;i &gt;= 0;i--)&#123; R_max[i] = Math.max(R_max[i+1],height[i]); &#125; for(int i = 0;i &lt; height.length;i++)&#123; res = res + Math.min(L_max[i],R_max[i]) - height[i]; &#125; return res; &#125; /** * ÂèåÊåáÈíà‰πãÂõ∫ÂÆöÊúÄÈ´òÁÇπ * ÂÖàÊâæÂà∞ÊúÄÈ´òÁÇπÔºåÁÑ∂ÂêéÂ∑¶ËæπÂêëÊúÄÈ´òÁÇπÈù†ËøëÔºåÂè≥Ëæπ‰πüÂêëÊúÄÈ´òÁÇπÈù†ËøëÔºåÂ∑¶ËæπÂè™ÈúÄË¶ÅËÄÉËôëÂ∑¶ËæπÔºåÂè≥ËæπÂè™ÈúÄË¶ÅËÄÉËôëÂè≥Ëæπ * @param height * @return */ public int trapByDouble(int[] height)&#123; int res = 0; int len = height.length; if(len == 0) return 0; int max = 0; int max_index = -1; for(int i = 0;i &lt; len;i++)&#123; if(height[i] &gt; max)&#123; max = height[i]; max_index = i; &#125; &#125; int L_max = height[0]; for(int i = 0;i &lt; max_index;i++)&#123; if(height[i] &gt; L_max) L_max = height[i]; else res = res + L_max - height[i]; &#125; int R_max = height[len-1]; for(int i = len - 1;i &gt; max_index;i--)&#123; if(height[i] &gt; R_max) R_max = height[i]; else res = res + R_max - height[i]; &#125; return res; &#125; /** * ÂèåÊåáÈíàÊ≥ï‰∫å * Êï¥‰ΩìÊÄùË∑ØÂÖ∂ÂÆûÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂè™ÊòØËøô‰∏™Êõ¥ÁÆÄ‰æø‰∏ÄÁÇπËÄåÂ∑≤ÔºåÊó†ÈúÄÊâæÊúÄÈ´òÁÇπÔºåÂè™Ë¶ÅÁ°Æ‰øùÈÅçÂéÜÁöÑÊï∞Âè™ÈúÄË¶ÅËÄÉËôë‰∏ÄËæπÂç≥ÂèØ * @param height * @return */ public int trapByDouble2(int[] height)&#123; int res = 0; int len = height.length; int left = 0; int right = len - 1; if(len == 0) return 0; int L_max = height[0]; int R_max = height[len-1]; //‰∏ÄÂÆöÂú®ÊúÄÈ´òÁÇπÁõ∏ÈÅáÔºåÊâÄ‰ª•Êó†ÈúÄ left &lt;= right while(left &lt; right)&#123; L_max = Math.max(L_max, height[left]); R_max = Math.max(R_max, height[right]); if (L_max &lt; R_max) &#123; res = res + L_max - height[left]; left++; &#125; else &#123; res = res + R_max - height[right]; right--; &#125; &#125; return res; &#125; 33. ÊêúÁ¥¢ÊóãËΩ¨ÊéíÂ∫èÊï∞ÁªÑÈ¢òÁõÆÂÅáËÆæÊåâÁÖßÂçáÂ∫èÊéíÂ∫èÁöÑÊï∞ÁªÑÂú®È¢ÑÂÖàÊú™Áü•ÁöÑÊüê‰∏™ÁÇπ‰∏äËøõË°å‰∫ÜÊóãËΩ¨„ÄÇ ( ‰æãÂ¶ÇÔºåÊï∞ÁªÑ [0,1,2,4,5,6,7] ÂèØËÉΩÂèò‰∏∫ [4,5,6,7,0,1,2] )„ÄÇ ÊêúÁ¥¢‰∏Ä‰∏™ÁªôÂÆöÁöÑÁõÆÊ†áÂÄºÔºåÂ¶ÇÊûúÊï∞ÁªÑ‰∏≠Â≠òÂú®Ëøô‰∏™ÁõÆÊ†áÂÄºÔºåÂàôËøîÂõûÂÆÉÁöÑÁ¥¢ÂºïÔºåÂê¶ÂàôËøîÂõû -1 „ÄÇ ‰Ω†ÂèØ‰ª•ÂÅáËÆæÊï∞ÁªÑ‰∏≠‰∏çÂ≠òÂú®ÈáçÂ§çÁöÑÂÖÉÁ¥†„ÄÇ ‰Ω†ÁöÑÁÆóÊ≥ïÊó∂Èó¥Â§çÊùÇÂ∫¶ÂøÖÈ°ªÊòØ O(log n) Á∫ßÂà´„ÄÇ 123456789Á§∫‰æã 1:ËæìÂÖ•: nums = [4,5,6,7,0,1,2], target = 0ËæìÂá∫: 4Á§∫‰æã 2:ËæìÂÖ•: nums = [4,5,6,7,0,1,2], target = 3ËæìÂá∫: -1 ÊÄùË∑ØÈ¢òÁõÆË¶ÅÊ±Ç O(logN) ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÔºåÂü∫Êú¨ÂèØ‰ª•Êñ≠ÂÆöÊú¨È¢òÊòØÈúÄË¶Å‰ΩøÁî®‰∫åÂàÜÊü•ÊâæÔºåÊÄé‰πàÂàÜÊòØÂÖ≥ÈîÆ„ÄÇÁî±‰∫éÈ¢òÁõÆËØ¥Êï∞Â≠ó‰∫ÜÊó†ÈáçÂ§çÔºå‰∏æ‰∏™‰æãÂ≠êÔºö1 2 3 4 5 6 7 ÂèØ‰ª•Â§ßËá¥ÂàÜ‰∏∫‰∏§Á±ªÔºåÁ¨¨‰∏ÄÁ±ª 2 3 4 5 6 7 1 ËøôÁßçÔºå‰πüÂ∞±ÊòØ nums[start] &lt;= nums[mid]„ÄÇÊ≠§‰æãÂ≠ê‰∏≠Â∞±ÊòØ 2 &lt;= 5„ÄÇËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂâçÂçäÈÉ®ÂàÜÊúâÂ∫è„ÄÇÂõ†Ê≠§Â¶ÇÊûú nums[start] &lt;=target&lt;nums[mid]ÔºåÂàôÂú®ÂâçÂçäÈÉ®ÂàÜÊâæÔºåÂê¶ÂàôÂéªÂêéÂçäÈÉ®ÂàÜÊâæ„ÄÇÁ¨¨‰∫åÁ±ª 6 7 1 2 3 4 5 ËøôÁßçÔºå‰πüÂ∞±ÊòØ nums[start] &gt; nums[mid]„ÄÇÊ≠§‰æãÂ≠ê‰∏≠Â∞±ÊòØ 6 &gt; 2„ÄÇËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂêéÂçäÈÉ®ÂàÜÊúâÂ∫è„ÄÇÂõ†Ê≠§Â¶ÇÊûú nums[mid] &lt;target&lt;=nums[end]ÔºåÂàôÂú®ÂêéÂçäÈÉ®ÂàÜÊâæÔºåÂê¶ÂàôÂéªÂâçÂçäÈÉ®ÂàÜÊâæ„ÄÇ Ê≠§È¢òÊúâ‰∏™Â≠òÂú®ÈáçÂ§çÊï∞Â≠óÁöÑÂèòÂΩ¢È¢òÔºåÂèØÂèÇËÄÉ Ê≠§È¢òËß£ „ÄÇ ‰ΩúËÄÖÔºöreedfanÈìæÊé•Ôºöhttps://leetcode-cn.com/problems/search-in-rotated-sorted-array/solution/ji-bai-liao-9983de-javayong-hu-by-reedfan/Êù•Ê∫êÔºöÂäõÊâ£ÔºàLeetCodeÔºâËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ ‰ª£Á†ÅÂÆûÁé∞123456789101112131415161718192021222324252627282930class Solution &#123; public int search(int[] nums, int target) &#123; int start = 0; int end = nums.length - 1; while(start &lt;= end)&#123; int mid = start + (end - start)/2; if(nums[mid] == target) return mid; //ÊúÄÂÆπÊòìÈîôÁöÑÁÇπÔºåÂ∞±ÊòØÂàóË°®Âè™Êúâ‰∏§‰∏™Êï∞Â≠óÊó∂ÔºåmidÂíåstartÊòØÂêå‰∏Ä‰∏™Êï∞ÔºåÊ≠§Êó∂ÂøÖÈ°ªÊòØÂâçÂçäÈÉ®ÂàÜÊúâÂ∫è if(nums[mid] &gt;= nums[start])&#123; // ËØ¥ÊòéÂâçÂçäÈÉ®ÂàÜÊúâÂ∫è if(nums[start] &lt;= target &amp;&amp; target &lt; nums[mid])&#123; end = mid - 1; &#125; else &#123; start = mid + 1; &#125; &#125; else &#123; // ËØ¥ÊòéÂêéÂçäÈÉ®ÂàÜÊúâÂ∫è if(nums[mid] &lt; target &amp;&amp; target &lt;= nums[end])&#123; start = mid + 1; &#125; else &#123; end = mid - 1; &#125; &#125; &#125; return -1; &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536class Solution &#123; public int search(int[] nums, int target) &#123; int start = 0; int end = nums.length - 1; while(start &lt;= end)&#123; int mid = start + (end - start)/2; if(nums[mid] == target) return mid; if (nums[start] == nums[mid]) &#123; start++; continue; &#125; //ÊúÄÂÆπÊòìÈîôÁöÑÁÇπÔºåÂ∞±ÊòØÂàóË°®Âè™Êúâ‰∏§‰∏™Êï∞Â≠óÊó∂ÔºåmidÂíåstartÊòØÂêå‰∏Ä‰∏™Êï∞ÔºåÊ≠§Êó∂ÂøÖÈ°ªÊòØÂâçÂçäÈÉ®ÂàÜÊúâÂ∫è // num[mid] == nums[start] Âè™‰ºöÂú®ÂàóË°®Âè™Êúâ‰∏§‰∏™Êï∞Êó∂ÊâçÁõ∏Á≠âÔºåÊâÄ‰ª•ÊâçÂèØ‰ª•‰∏äÈù¢ÈÇ£Ê†∑Â§ÑÁêÜ // Ê≠£Â∏∏ÂÖ∂ÂÆûÊòØ‰∏çÂ∫îËØ•ÈÇ£Ê†∑Â§ÑÁêÜÔºåËÄåÂ∫îËØ•ÊòØÂΩìnum[mid] == nums[start]ÔºåÁõ¥Êé•start++ÔºåÁÑ∂ÂêéËøõË°å‰∏ã‰∏ÄÊ¨°Âæ™ÁéØ if(nums[mid] &gt; nums[start])&#123; // ËØ¥ÊòéÂâçÂçäÈÉ®ÂàÜÊúâÂ∫è if(nums[start] &lt;= target &amp;&amp; target &lt; nums[mid])&#123; end = mid - 1; &#125; else &#123; start = mid + 1; &#125; &#125; else &#123; // ËØ¥ÊòéÂêéÂçäÈÉ®ÂàÜÊúâÂ∫è if(nums[mid] &lt; target &amp;&amp; target &lt;= nums[end])&#123; start = mid + 1; &#125; else &#123; end = mid - 1; &#125; &#125; &#125; return -1; &#125;&#125; Tip: 81È¢òÊÄùË∑Ø‰∏ÄÊ†∑ 123456789101112131415161718192021222324252627282930313233343536373839404142class Solution &#123; public boolean search(int[] nums, int target) &#123; if (nums == null || nums.length == 0) &#123; return false; &#125; int start = 0; int end = nums.length - 1; int mid; while (start &lt;= end) &#123; mid = start + (end - start) / 2; if (nums[mid] == target) &#123; return true; &#125; if (nums[start] == nums[mid]) &#123; start++; continue; &#125; // ÂâçÂçäÈÉ®ÂàÜÊúâÂ∫è // [1,3,1,1,1] if (nums[start] &lt; nums[mid]) &#123; // targetÂú®ÂâçÂçäÈÉ®ÂàÜ if (nums[mid] &gt; target &amp;&amp; nums[start] &lt;= target) &#123; end = mid - 1; &#125; else &#123; // Âê¶ÂàôÔºåÂéªÂêéÂçäÈÉ®ÂàÜÊâæ start = mid + 1; &#125; &#125; else &#123; // ÂêéÂçäÈÉ®ÂàÜÊúâÂ∫è // targetÂú®ÂêéÂçäÈÉ®ÂàÜ if (nums[mid] &lt; target &amp;&amp; nums[end] &gt;= target) &#123; start = mid + 1; &#125; else &#123; // Âê¶ÂàôÔºåÂéªÂêéÂçäÈÉ®ÂàÜÊâæ end = mid - 1; &#125; &#125; &#125; // ‰∏ÄÁõ¥Ê≤°ÊâæÂà∞ÔºåËøîÂõûfalse return false; &#125;&#125; 34. Âú®ÊéíÂ∫èÊï∞ÁªÑ‰∏≠Êü•ÊâæÂÖÉÁ¥†ÁöÑÁ¨¨‰∏Ä‰∏™ÂíåÊúÄÂêé‰∏Ä‰∏™‰ΩçÁΩÆÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ÊåâÁÖßÂçáÂ∫èÊéíÂàóÁöÑÊï¥Êï∞Êï∞ÁªÑ numsÔºåÂíå‰∏Ä‰∏™ÁõÆÊ†áÂÄº target„ÄÇÊâæÂá∫ÁªôÂÆöÁõÆÊ†áÂÄºÂú®Êï∞ÁªÑ‰∏≠ÁöÑÂºÄÂßã‰ΩçÁΩÆÂíåÁªìÊùü‰ΩçÁΩÆ„ÄÇ ‰Ω†ÁöÑÁÆóÊ≥ïÊó∂Èó¥Â§çÊùÇÂ∫¶ÂøÖÈ°ªÊòØ O(log n) Á∫ßÂà´„ÄÇ Â¶ÇÊûúÊï∞ÁªÑ‰∏≠‰∏çÂ≠òÂú®ÁõÆÊ†áÂÄºÔºåËøîÂõû [-1, -1]„ÄÇ 12345678Á§∫‰æã 1:ËæìÂÖ•: nums = [5,7,7,8,8,10], target = 8ËæìÂá∫: [3,4]Á§∫‰æã 2:ËæìÂÖ•: nums = [5,7,7,8,8,10], target = 6ËæìÂá∫: [-1,-1] ÊÄùË∑ØËßÅ labuladong ÂÖ¨‰ºóÂè∑Á¨îËÆ∞ ÂÆûÁé∞‰ª£Á†Å1234567891011121314151617181920212223242526272829303132333435363738394041424344454647class Solution &#123; public int[] searchRange(int[] nums, int target) &#123; if(nums.length == 0) return new int[]&#123;-1,-1&#125;; return new int[]&#123;searchLeft(nums,target),searchRight(nums,target)&#125;; &#125; public int searchLeft(int[] nums,int target)&#123; int left = 0; int right = nums.length - 1; while(left &lt;= right)&#123; // Èò≤Ê≠¢Ê∫¢Âá∫ int mid = left + (right - left)/2; if(nums[mid] &gt;= target) right = mid - 1; else left = mid + 1; &#125; // ‰∏äÈù¢ÁöÑwhileÂæ™ÁéØÂêéÔºåÊúÄÂêé‰∏ÄÊ¨°Âæ™ÁéØ left == mid, right = left - 1 = mid - 1 // Ëã•ÊúâÁ¨¶ÂêàË¶ÅÊ±ÇÁöÑtargetÔºåÂàô‰ºöÊúâ‰∏§ÁßçÊÉÖÂÜµÔºö // 1. left Âíå right Âú® target ÂÄºÁöÑÊúÄÂ∑¶Á¥¢ÂºïÂ§ÑÁöÑÂâç‰∏Ä‰ΩçÁõ∏ÈÅáÔºåÊ≠§Êó∂ left ‰ºöÂêëÂè≥‰∏Ä‰ΩçÔºåÂà∞ËææÊúÄÂ∑¶ target Â§Ñ,ËÄå right ‰ºöÂÅúÂú®ÂéüÂú∞ÔºåÂºπÂá∫ while // 2. left Âíå right Âú® target ÂÄºÁöÑÊúÄÂ∑¶Á¥¢ÂºïÂ§ÑÁõ∏ÈÅáÔºåÊ≠§Êó∂ left ‰∏çÂä®ÔºåÂà∞ËææÊúÄÂ∑¶ target Â§Ñ,ËÄå right ‰ºöÂêëÂ∑¶‰∏Ä‰ΩçÔºåÂºπÂá∫ while // Ê≥®ÊÑèÔºöÊ≠§Êó∂ÁöÑ left ÈÉΩÊòØÂ§ÑÂú® target ÊúÄÂ∑¶Á¥¢ÂºïÂ§Ñ // Â¶ÇÊûúÊ≤°ÊúâÁ¨¶ÂêàË¶ÅÊ±ÇÁöÑtargetÔºåÂàôÊúâ‰∏âÁßçÊÉÖÂÜµÔºö // 1.ÊâÄÊúâÂÄºÂùáÂ∞è‰∫étargetÔºåÊ≠§Êó∂Ôºåleft‰ºöÂú® nums[nums.length-1]Â§Ñ‰∏érightÁõ∏ÈÅáÔºåÁÑ∂Âêéleft Âä† 1ÔºåË∑≥Âá∫Âæ™ÁéØÔºåÊ≠§Êó∂left == nums.length // 2.ÊâÄÊúâÂÄºÂùáÂ§ß‰∫étargetÔºåÊ≠§Êó∂right‰ºö‰∏çÊñ≠ÂêëÂ∑¶ÔºåÁõ¥Ëá≥ left = right = 0 Áõ∏ÈÅáÔºåÊ≠§Êó∂ right Âáè 1ÔºåË∑≥Âá∫Âæ™ÁéØÔºåÊ≠§Êó∂ left == 0 // 3.target‰Ωç‰∫éÂÄºÁöÑ‰∏≠Èó¥Ôºå‰ΩÜÊòØÊ≤°ÊúâÂÄºÂèñÂà∞ÔºåÊ≠§Êó∂Ë∑üÊúâtargetÊÉÖÂÜµÊòØÁ±ª‰ººÁöÑÔºåÊúÄÁªà left ‰ºöÂÅúÁïôÂú®ÊØî target Â§ßÁöÑÁ¨¨‰∏Ä‰∏™Êï∞‰∏ä // ÊÄªÁªì‰∏äÈù¢ 5 ÁßçÊÉÖÂÜµÔºåleft ‰∏∫ nums.length Êó∂ÔºåÂè¶ÂÖ∂‰∏∫ nums.length - 1,Ê≠§Êó∂Áõ¥Êé•Âà§Êñ≠ nums[left] Âç≥ÂèØÔºåËã•‰∏∫targetÂàôÁõ¥Êé•ËøîÂõû left // Âê¶ÂàôËøîÂõû -1 int pos = (left == nums.length) ? nums.length - 1 : left; if(nums[pos] != target) return -1; return left; &#125; public int searchRight(int[] nums,int target)&#123; int left = 0; int right = nums.length - 1; while(left &lt;= right)&#123; // Èò≤Ê≠¢Ê∫¢Âá∫ int mid = left + (right - left)/2; if(nums[mid] &lt;= target) left = mid + 1; else right = mid - 1; &#125; // Âêå‰∏äÂàÜÊûê // ÊúÄÂ∑¶ÂíåÊúÄÂè≥Âè™Êúâ‰∏Ä‰∏™Âå∫Âà´ÔºåÂ∞±ÊòØ left Êç¢Êàê‰∫Ü right Ôºånums.length Êç¢Êàê‰∫Ü -1 int pos = (right == -1)? 0 : right; if(nums[pos] != target) return -1; return right; &#125;&#125; 39. ÁªÑÂêàÊÄªÂíåÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Êó†ÈáçÂ§çÂÖÉÁ¥†ÁöÑÊï∞ÁªÑ candidates Âíå‰∏Ä‰∏™ÁõÆÊ†áÊï∞ target ÔºåÊâæÂá∫ candidates ‰∏≠ÊâÄÊúâÂèØ‰ª•‰ΩøÊï∞Â≠óÂíå‰∏∫ target ÁöÑÁªÑÂêà„ÄÇ candidates ‰∏≠ÁöÑÊï∞Â≠óÂèØ‰ª•Êó†ÈôêÂà∂ÈáçÂ§çË¢´ÈÄâÂèñ„ÄÇ ËØ¥ÊòéÔºö ÊâÄÊúâÊï∞Â≠óÔºàÂåÖÊã¨ targetÔºâÈÉΩÊòØÊ≠£Êï¥Êï∞„ÄÇ Ëß£ÈõÜ‰∏çËÉΩÂåÖÂê´ÈáçÂ§çÁöÑÁªÑÂêà„ÄÇ Á§∫‰æã 1: 123456ËæìÂÖ•: candidates = [2,3,6,7], target = 7,ÊâÄÊ±ÇËß£ÈõÜ‰∏∫:[ [7], [2,2,3]] Á§∫‰æã 2: 1234567ËæìÂÖ•: candidates = [2,3,5], target = 8,ÊâÄÊ±ÇËß£ÈõÜ‰∏∫:[ [2,2,2,2], [2,3,3], [3,5]] ÊÄùË∑ØÁõ¥Êé•‰∏äÂõûÊ∫ØÁÆóÊ≥ïÊ°ÜÊû∂„ÄÇËß£ÂÜ≥‰∏Ä‰∏™ÂõûÊ∫ØÈóÆÈ¢òÔºåÂÆûÈôÖ‰∏äÂ∞±ÊòØ‰∏Ä‰∏™ÂÜ≥Á≠ñÊ†ëÁöÑÈÅçÂéÜËøáÁ®ã„ÄÇ‰Ω†Âè™ÈúÄË¶ÅÊÄùËÄÉ 3 ‰∏™ÈóÆÈ¢òÔºö 1„ÄÅË∑ØÂæÑÔºö‰πüÂ∞±ÊòØÂ∑≤ÁªèÂÅöÂá∫ÁöÑÈÄâÊã©„ÄÇ 2„ÄÅÈÄâÊã©ÂàóË°®Ôºö‰πüÂ∞±ÊòØ‰Ω†ÂΩìÂâçÂèØ‰ª•ÂÅöÁöÑÈÄâÊã©„ÄÇ 3„ÄÅÁªìÊùüÊù°‰ª∂Ôºö‰πüÂ∞±ÊòØÂà∞ËææÂÜ≥Á≠ñÊ†ëÂ∫ïÂ±ÇÔºåÊó†Ê≥ïÂÜçÂÅöÈÄâÊã©ÁöÑÊù°‰ª∂„ÄÇ ‰ª£Á†ÅÊñπÈù¢ÔºåÂõûÊ∫ØÁÆóÊ≥ïÁöÑÊ°ÜÊû∂Ôºö 12345678910result = []def backtrack(Ë∑ØÂæÑ, ÈÄâÊã©ÂàóË°®): if Êª°Ë∂≥ÁªìÊùüÊù°‰ª∂: result.add(Ë∑ØÂæÑ) returnfor ÈÄâÊã© in ÈÄâÊã©ÂàóË°®: ÂÅöÈÄâÊã© backtrack(Ë∑ØÂæÑ, ÈÄâÊã©ÂàóË°®) Êí§ÈîÄÈÄâÊã© ÂÖ∂Ê†∏ÂøÉÂ∞±ÊòØ for Âæ™ÁéØÈáåÈù¢ÁöÑÈÄíÂΩíÔºåÂú®ÈÄíÂΩíË∞ÉÁî®‰πãÂâç„ÄåÂÅöÈÄâÊã©„ÄçÔºåÂú®ÈÄíÂΩíË∞ÉÁî®‰πãÂêé„ÄåÊí§ÈîÄÈÄâÊã©„ÄçÔºåÁâπÂà´ÁÆÄÂçï„ÄÇ labuladong ÂõûÊ∫ØÊ°ÜÊû∂ÔºÅÔºÅÔºÅËÄÅÂì•ÂÜôÁöÑÊñáÁ´†ÁúüÊòØÂπ≤ÂáÄÂà©ËêΩÔºÅ demo(ÂÖ®ÊéíÂàó)123456789101112131415161718192021222324252627282930313233List&lt;List&lt;Integer&gt;&gt; res = new LinkedList&lt;&gt;();/* ‰∏ªÂáΩÊï∞ÔºåËæìÂÖ•‰∏ÄÁªÑ‰∏çÈáçÂ§çÁöÑÊï∞Â≠óÔºåËøîÂõûÂÆÉ‰ª¨ÁöÑÂÖ®ÊéíÂàó */List&lt;List&lt;Integer&gt;&gt; permute(int[] nums) &#123; // ËÆ∞ÂΩï„ÄåË∑ØÂæÑ„Äç // ËøôÈáåÁöÑ ÈÄâÊã©ÂàóË°® Âç≥ÂåÖÂê´Âú®nums‰∏≠ LinkedList&lt;Integer&gt; track = new LinkedList&lt;&gt;(); backtrack(nums, track); return res;&#125;// Ë∑ØÂæÑÔºöËÆ∞ÂΩïÂú® track ‰∏≠// ÈÄâÊã©ÂàóË°®Ôºönums ‰∏≠ÁöÑÂÖÉÁ¥†// ÁªìÊùüÊù°‰ª∂Ôºönums ‰∏≠ÁöÑÂÖÉÁ¥†ÂÖ®ÈÉΩÂú® track ‰∏≠Âá∫Áé∞void backtrack(int[] nums, LinkedList&lt;Integer&gt; track) &#123; // Ëß¶ÂèëÁªìÊùüÊù°‰ª∂ if (track.size() == nums.length) &#123; res.add(new LinkedList(track)); return; &#125; for (int i = 0; i &lt; nums.length; i++) &#123; // ÊéíÈô§‰∏çÂêàÊ≥ïÁöÑÈÄâÊã© if (track.contains(nums[i])) continue; // ÂÅöÈÄâÊã© track.add(nums[i]); // ËøõÂÖ•‰∏ã‰∏ÄÂ±ÇÂÜ≥Á≠ñÊ†ë backtrack(nums, track); // ÂèñÊ∂àÈÄâÊã©ÔºåËøîÂõû‰∏ä‰∏ÄÂ±ÇÂÜ≥Á≠ñÊ†ë track.removeLast(); &#125;&#125; ‰ª£Á†ÅÂÆûÁé∞ÂÖàÊåâÁÖßdemoÂÜô‰∏Ä‰∏™Â∑Æ‰∏çÂ§öÁöÑÔºåËøô‰∏™ÊöÇÊó∂Êó†Ê≥ïÂÅöÂà∞ÂéªÈáçÔºÅ 1234567891011121314151617181920212223242526272829303132333435363738public class combinationSum_39 &#123; public static void main(String[] args) &#123; combinationSum(new int[]&#123;2,3,6,7&#125;,7); System.out.println(res); &#125; public static List&lt;List&lt;Integer&gt;&gt; res = new LinkedList&lt;&gt;(); public static List&lt;List&lt;Integer&gt;&gt; combinationSum(int[] candidates, int target) &#123; LinkedList&lt;Integer&gt; track = new LinkedList&lt;&gt;(); // ÊéíÂ∫èÁöÑÂéüÂõ†ÊòØÂú®ÂõûÊ∫ØÁöÑÊó∂ÂÄôÊØîËæÉÂÆπÊòìÂâ™Êûù Arrays.sort(candidates); // Â•óÁî®‰∏äÈù¢ÁöÑÂÖ¨ÂºèÔºåcandidatesÊòØÊåáÈÄâÊã©ÂàóË°®ÔºåtargetÁî®Êù•Âà§Êñ≠ÊòØÂê¶ÁªìÊùü‰ª•ÂèäÁî®‰∫éÂâ™Êûù // trackÂàôÊòØË∑ØÂæÑÔºåÂç≥Â∑≤ÁªèÂÅöÂá∫ÁöÑÈÄâÊã© backtrack(candidates, target, track); return res; &#125; private static void backtrack(int[] candidates, int target, LinkedList&lt;Integer&gt; track) &#123; //ÂÖàÂà§Êñ≠ÁªìÊùüÊù°‰ª∂ if (target &lt; 0) return; if (target == 0)&#123; // ÂΩìtargetÁ≠â‰∫é0ÁöÑÊó∂ÂÄôÔºåÂ∞ÜË∑ØÂæÑÂä†ÂÖ•Âà∞ÁªìÊûúÂàóË°®‰∏≠ res.add(new LinkedList&lt;&gt;(track)); return; &#125; // ÈÅçÂéÜÈÄâÊã©ÂàóË°®ÔºåËøôÈáåÊ≤°ÊúâÂéªÈáç //‰∏ãÈù¢‰ºöËÆæÁΩÆstartÔºåÊØèÊ¨°ÈÄíÂΩíÁöÑÊó∂ÂÄôÂè™Âú®candidates‰∏≠ÂΩìÂâçÂèä‰πãÂêéÁöÑÊï∞Â≠ó‰∏≠ÈÄâÊã©„ÄÇ for(int i = 0;i &lt; candidates.length;i++)&#123; // ËøôÂ∞±ÊòØÊéíÂ∫èÁöÑÂ•ΩÂ§ÑÔºåÂèØ‰ª•Áõ¥Êé•ËøôÊ†∑Ââ™ÊûùÔºåÂê¶ÂàôËøòÂæóÈÅçÂéÜ if(target &lt; candidates[i]) break; track.add(candidates[i]); backtrack(candidates,target-candidates[i],track); track.removeLast(); &#125; &#125;&#125; 1ËæìÂá∫Ôºö[[2, 2, 3], [2, 3, 2], [3, 2, 2], [7]] ÂéªÈáç‰πãÂêéÁöÑ‰ª£Á†ÅÔºö 123456789101112131415161718192021222324252627282930public class combinationSum_39 &#123; public static void main(String[] args) &#123; combinationSum(new int[]&#123;2,3,6,7&#125;,7); System.out.println(res); &#125; public static List&lt;List&lt;Integer&gt;&gt; res = new LinkedList&lt;&gt;(); public static List&lt;List&lt;Integer&gt;&gt; combinationSum(int[] candidates, int target) &#123; LinkedList&lt;Integer&gt; track = new LinkedList&lt;&gt;(); Arrays.sort(candidates); backtrack(candidates, 0, target, track); return res; &#125; private static void backtrack(int[] candidates, int start, int target, LinkedList&lt;Integer&gt; track) &#123; if (target &lt; 0) return; if (target == 0)&#123; res.add(new LinkedList&lt;&gt;(track)); return; &#125; for(int i = start;i &lt; candidates.length;i++)&#123; if(target &lt; candidates[i]) break; track.add(candidates[i]); backtrack(candidates,i,target-candidates[i],track); track.removeLast(); &#125; &#125;&#125; 1ËæìÂá∫Ôºö[[2, 2, 3], [7]] 146. LRUÁºìÂ≠òÊú∫Âà∂È¢òÁõÆËøêÁî®‰Ω†ÊâÄÊéåÊè°ÁöÑÊï∞ÊçÆÁªìÊûÑÔºåËÆæËÆ°ÂíåÂÆûÁé∞‰∏Ä‰∏™ LRU (ÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®) ÁºìÂ≠òÊú∫Âà∂„ÄÇÂÆÉÂ∫îËØ•ÊîØÊåÅ‰ª•‰∏ãÊìç‰ΩúÔºö Ëé∑ÂèñÊï∞ÊçÆ get Âíå ÂÜôÂÖ•Êï∞ÊçÆ put „ÄÇ Ëé∑ÂèñÊï∞ÊçÆ get(key) - Â¶ÇÊûúÂØÜÈí• (key) Â≠òÂú®‰∫éÁºìÂ≠ò‰∏≠ÔºåÂàôËé∑ÂèñÂØÜÈí•ÁöÑÂÄºÔºàÊÄªÊòØÊ≠£Êï∞ÔºâÔºåÂê¶ÂàôËøîÂõû -1„ÄÇÂÜôÂÖ•Êï∞ÊçÆ put(key, value) - Â¶ÇÊûúÂØÜÈí•‰∏çÂ≠òÂú®ÔºåÂàôÂÜôÂÖ•ÂÖ∂Êï∞ÊçÆÂÄº„ÄÇÂΩìÁºìÂ≠òÂÆπÈáèËææÂà∞‰∏äÈôêÊó∂ÔºåÂÆÉÂ∫îËØ•Âú®ÂÜôÂÖ•Êñ∞Êï∞ÊçÆ‰πãÂâçÂà†Èô§ÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁöÑÊï∞ÊçÆÂÄºÔºå‰ªéËÄå‰∏∫Êñ∞ÁöÑÊï∞ÊçÆÂÄºÁïôÂá∫Á©∫Èó¥„ÄÇ Áõ∏‰ø°Â¶ÇÊûúÊúâËÆ§ÁúüÁúãËøá LinkedHashMap Ê∫êÁ†ÅÁöÑÂ∞è‰ºô‰º¥Ôºå‰∏ÄÂÆö‰ºöÂæàÂø´ÁöÑË∑üÂÆòÊñπÈ¢òËß£ÂÜôÁöÑ‰∏ÄÊ®°‰∏ÄÊ†∑ÔºÅ ÁÆÄÂçï‰ªãÁªçLinkedHashMapÔºàË∑üÈ¢òÁõÆÊúâÂÖ≥ÁöÑÁü•ËØÜÁÇπÔºâHashMap Â§ßÂÆ∂ÈÉΩÊ∏ÖÊ•öÔºåÂ∫ïÂ±ÇÊòØ Êï∞ÁªÑ + Á∫¢ÈªëÊ†ë + ÈìæË°® Ôºà‰∏çÊ∏ÖÊ•ö‰πüÊ≤°ÊúâÂÖ≥Á≥ªÔºâÔºåÂêåÊó∂ÂÖ∂ÊòØÊó†Â∫èÁöÑÔºåËÄå LinkedHashMap ÂàöÂ•ΩÂ∞±ÊØî HashMap Â§öËøô‰∏Ä‰∏™ÂäüËÉΩÔºåÂ∞±ÊòØÂÖ∂Êèê‰æõ ÊúâÂ∫èÔºåÂπ∂‰∏îÔºåLinkedHashMapÁöÑÊúâÂ∫èÂèØ‰ª•Êåâ‰∏§ÁßçÈ°∫Â∫èÊéíÂàóÔºå‰∏ÄÁßçÊòØÊåâÁÖßÊèíÂÖ•ÁöÑÈ°∫Â∫èÔºå‰∏ÄÁßçÊòØÊåâÁÖßËØªÂèñÁöÑÈ°∫Â∫èÔºàËøô‰∏™È¢òÁõÆÁöÑÁ§∫‰æãÂ∞±ÊòØÂëäËØâÊàë‰ª¨Ë¶ÅÊåâÁÖßËØªÂèñÁöÑÈ°∫Â∫èËøõË°åÊéíÂ∫èÔºâÔºåËÄåÂÖ∂ÂÜÖÈÉ®ÊòØÈù† Âª∫Á´ã‰∏Ä‰∏™ÂèåÂêëÈìæË°® Êù•Áª¥Êä§Ëøô‰∏™È°∫Â∫èÁöÑÔºåÂú®ÊØèÊ¨°ÊèíÂÖ•„ÄÅÂà†Èô§ÂêéÔºåÈÉΩ‰ºöË∞ÉÁî®‰∏Ä‰∏™ÂáΩÊï∞Êù•ËøõË°å ÂèåÂêëÈìæË°®ÁöÑÁª¥Êä§ ÔºåÂáÜÂ§áÁöÑÊù•ËØ¥ÔºåÊòØÊúâ‰∏â‰∏™ÂáΩÊï∞Êù•ÂÅöËøô‰ª∂‰∫ãÔºåËøô‰∏â‰∏™ÂáΩÊï∞ÈÉΩÁªüÁß∞‰∏∫ ÂõûË∞ÉÂáΩÊï∞ ÔºåËøô‰∏â‰∏™ÂáΩÊï∞ÂàÜÂà´ÊòØÔºö void afterNodeAccess(Node p) { } ÂÖ∂‰ΩúÁî®Â∞±ÊòØÂú®ËÆøÈóÆÂÖÉÁ¥†‰πãÂêéÔºåÂ∞ÜËØ•ÂÖÉÁ¥†ÊîæÂà∞ÂèåÂêëÈìæË°®ÁöÑÂ∞æÂ∑¥Â§Ñ(ÊâÄ‰ª•Ëøô‰∏™ÂáΩÊï∞Âè™ÊúâÂú®ÊåâÁÖßËØªÂèñÁöÑÈ°∫Â∫èÁöÑÊó∂ÂÄôÊâç‰ºöÊâßË°å)Ôºå‰πãÊâÄ‰ª•ÊèêËøô‰∏™ÔºåÊòØÂª∫ËÆÆÂ§ßÂÆ∂ÂéªÁúãÁúãÔºåÂ¶Ç‰Ωï‰ºòÁæéÁöÑÂÆûÁé∞Âú®ÂèåÂêëÈìæË°®‰∏≠Â∞ÜÊåáÂÆöÂÖÉÁ¥†ÊîæÂÖ•ÈìæÂ∞æÔºÅ void afterNodeRemoval(Node p) { } ÂÖ∂‰ΩúÁî®Â∞±ÊòØÂú®Âà†Èô§ÂÖÉÁ¥†‰πãÂêéÔºåÂ∞ÜÂÖÉÁ¥†‰ªéÂèåÂêëÈìæË°®‰∏≠Âà†Èô§ÔºåËøòÊòØÈùûÂ∏∏Âª∫ËÆÆÂ§ßÂÆ∂ÂéªÁúãÁúãËøô‰∏™ÂáΩÊï∞ÁöÑÔºåÂæà‰ºòÁæéÁöÑÊñπÂºèÂú®ÂèåÂêëÈìæË°®‰∏≠Âà†Èô§ËäÇÁÇπÔºÅ void afterNodeInsertion(boolean evict) { } Ëøô‰∏™ÊâçÊòØÊàë‰ª¨È¢òÁõÆ‰∏≠‰ºöÁî®Âà∞ÁöÑÔºåÂú®ÊèíÂÖ•Êñ∞ÂÖÉÁ¥†‰πãÂêéÔºåÈúÄË¶ÅÂõûË∞ÉÂáΩÊï∞Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÁßªÈô§‰∏ÄÁõ¥‰∏çÁî®ÁöÑÊüê‰∫õÂÖÉÁ¥†ÔºÅ ÂÖ∂Ê¨°ÔºåÊàëÂÜç‰ªãÁªç‰∏Ä‰∏ã LinkedHashMap ÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºÅ ÂÖ∂‰∏ªË¶ÅÊòØ‰∏§‰∏™ÊûÑÈÄ†ÊñπÊ≥ïÔºå‰∏Ä‰∏™ÊòØÁªßÊâø HashMap Ôºå‰∏Ä‰∏™ÊòØÂèØ‰ª•ÈÄâÊã© accessOrder ÁöÑÂÄº(ÈªòËÆ§ falseÔºå‰ª£Ë°®ÊåâÁÖßÊèíÂÖ•È°∫Â∫èÊéíÂ∫è)Êù•Á°ÆÂÆöÊòØÊåâÊèíÂÖ•È°∫Â∫èËøòÊòØËØªÂèñÈ°∫Â∫èÊéíÂ∫è„ÄÇ 1234567891011121314151617181920212223/** //Ë∞ÉÁî®Áà∂Á±ªHashMapÁöÑÊûÑÈÄ†ÊñπÊ≥ï„ÄÇ */public LinkedHashMap() &#123; super(); accessOrder = false;&#125;// ËøôÈáåÁöÑ accessOrder ÈªòËÆ§ÊòØ‰∏∫falseÔºåÂ¶ÇÊûúË¶ÅÊåâËØªÂèñÈ°∫Â∫èÊéíÂ∫èÈúÄË¶ÅÂ∞ÜÂÖ∂ËÆæ‰∏∫ true// initialCapacity ‰ª£Ë°® map ÁöÑ ÂÆπÈáèÔºåloadFactor ‰ª£Ë°®Âä†ËΩΩÂõ†Â≠ê (ÈªòËÆ§Âç≥ÂèØ)public LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder) &#123; super(initialCapacity, loadFactor); this.accessOrder = accessOrder;&#125; ÊÄùË∑Ø &amp; ‰ª£Á†Å‰∏ãÈù¢ÊòØÊàëËá™Â∑±Âú®ÂàÜÊûê LinkedHashMap Ê∫êÁ†ÅÊó∂ÂÅöÁöÑ‰∏Ä‰∫õÁ¨îËÆ∞ÔºåÂ∫îËØ•ÊòØÊØîËæÉÊ∏ÖÊ•öÁöÑÔºå‰∏ª‰ΩìÊÑèÊÄùÂ∞±ÊòØÊàë‰ª¨Ë¶ÅÁªßÊâø LinkedHashMapÔºåÁÑ∂ÂêéÂ§çÂÜô removeEldestEntry()ÂáΩÊï∞ÔºåÂ∞±ËÉΩÊã•ÊúâÊàë‰ª¨Ëá™Â∑±ÁöÑÁºìÂ≠òÁ≠ñÁï•ÔºÅ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// Âú®ÊèíÂÖ•‰∏Ä‰∏™Êñ∞ÂÖÉÁ¥†‰πãÂêéÔºåÂ¶ÇÊûúÊòØÊåâÊèíÂÖ•È°∫Â∫èÊéíÂ∫èÔºåÂç≥Ë∞ÉÁî®newNode()‰∏≠ÁöÑlinkNodeLast()ÂÆåÊàê// Â¶ÇÊûúÊòØÊåâÁÖßËØªÂèñÈ°∫Â∫èÊéíÂ∫èÔºåÂç≥Ë∞ÉÁî®afterNodeAccess()ÂÆåÊàê// ÈÇ£‰πàËøô‰∏™ÊñπÊ≥ïÊòØÂπ≤ÂòõÁöÑÂë¢ÔºåËøô‰∏™Â∞±ÊòØËëóÂêçÁöÑ LRU ÁÆóÊ≥ïÂï¶// Âú®ÊèíÂÖ•ÂÆåÊàê‰πãÂêéÔºåÈúÄË¶ÅÂõûË∞ÉÂáΩÊï∞Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÁßªÈô§Êüê‰∫õÂÖÉÁ¥†ÔºÅ// LinkedHashMap ÂáΩÊï∞ÈÉ®ÂàÜÊ∫êÁ†Å/** \* ÊèíÂÖ•Êñ∞ËäÇÁÇπÊâç‰ºöËß¶ÂèëËØ•ÊñπÊ≥ïÔºåÂõ†‰∏∫Âè™ÊúâÊèíÂÖ•Êñ∞ËäÇÁÇπÊâçÈúÄË¶ÅÂÜÖÂ≠ò \* Ê†πÊçÆ HashMap ÁöÑ putVal ÊñπÊ≥ï, evict ‰∏ÄÁõ¥ÊòØ true \* removeEldestEntry ÊñπÊ≥ïË°®Á§∫ÁßªÈô§ËßÑÂàô, Âú® LinkedHashMap Èáå‰∏ÄÁõ¥ËøîÂõû false \* ÊâÄ‰ª•Âú® LinkedHashMap ÈáåËøô‰∏™ÊñπÊ≥ïÁõ∏ÂΩì‰∫é‰ªÄ‰πàÈÉΩ‰∏çÂÅö */void afterNodeInsertion(boolean evict) &#123; // possibly remove eldest LinkedHashMap.Entry&lt;K,V&gt; first; // Ê†πÊçÆÊù°‰ª∂Âà§Êñ≠ÊòØÂê¶ÁßªÈô§ÊúÄËøëÊúÄÂ∞ëË¢´ËÆøÈóÆÁöÑËäÇÁÇπ if (evict &amp;&amp; (first = head) != null &amp;&amp; removeEldestEntry(first)) &#123; K key = first.key; removeNode(hash(key), key, null, false, true); &#125;&#125;// ÁßªÈô§ÊúÄËøëÊúÄÂ∞ëË¢´ËÆøÈóÆÊù°‰ª∂‰πã‰∏ÄÔºåÈÄöËøáË¶ÜÁõñÊ≠§ÊñπÊ≥ïÂèØÂÆûÁé∞‰∏çÂêåÁ≠ñÁï•ÁöÑÁºìÂ≠ò// LinkedHashMapÊòØÈªòËÆ§ËøîÂõûfalseÁöÑÔºåÊàë‰ª¨ÂèØ‰ª•ÁªßÊâøLinkedHashMapÁÑ∂ÂêéÂ§çÂÜôËØ•ÊñπÊ≥ïÂç≥ÂèØ// ‰æãÂ¶Ç LeetCode Á¨¨ 146 È¢òÂ∞±ÊòØÈááÁî®ËØ•ÁßçÊñπÊ≥ïÔºåÁõ¥Êé• return size() &gt; capacity;protected boolean removeEldestEntry(Map.Entry&lt;K,V&gt; eldest) &#123; return false; ÈÄöËøá‰∏äËø∞‰ª£Á†ÅÔºåÊàë‰ª¨Â∞±Â∑≤ÁªèÁü•ÈÅì‰∫ÜÂè™Ë¶ÅÂ§çÂÜô removeEldestEntry() Âç≥ÂèØÔºåËÄåÊù°‰ª∂Â∞±ÊòØ map ÁöÑÂ§ßÂ∞è‰∏çË∂ÖËøá ÁªôÂÆöÁöÑÂÆπÈáèÔºåË∂ÖËøá‰∫ÜÂ∞±Âæó‰ΩøÁî® LRU ‰∫ÜÔºÅÁÑ∂ÂêéÊ†πÊçÆÈ¢òÁõÆÁªôÂÆöÁöÑËØ≠Âè•ÊûÑÈÄ†ÂíåË∞ÉÁî®Ôºö 123456789101112/** \* LRUCache ÂØπË±°‰ºö‰ª•Â¶Ç‰∏ãËØ≠Âè•ÊûÑÈÄ†ÂíåË∞ÉÁî®: \* LRUCache obj = new LRUCache(capacity); \* int param_1 = obj.get(key); \* obj.put(key,value); */ ÂæàÊòéÊòæÊàë‰ª¨Âè™ÈúÄË¶ÅÁõ¥Êé•ÁªßÊâøÁà∂Á±ªÁöÑputÂáΩÊï∞Âç≥ÂèØÔºåÂõ†‰∏∫È¢òÁõÆÊ≤°ÊúâÁâπÊÆäË¶ÅÊ±ÇÔºåÊïÖÂèØ‰ª•‰∏çÂÜôÔºÅËá≥‰∫é get() ÂáΩÊï∞ÔºåÈ¢òÁõÆÊòØÊúâË¶ÅÊ±ÇÁöÑÔºÅ Ëé∑ÂèñÊï∞ÊçÆ get(key) - Â¶ÇÊûúÂØÜÈí• (key) Â≠òÂú®‰∫éÁºìÂ≠ò‰∏≠ÔºåÂàôËé∑ÂèñÂØÜÈí•ÁöÑÂÄºÔºàÊÄªÊòØÊ≠£Êï∞ÔºâÔºåÂê¶ÂàôËøîÂõû -1„ÄÇ ÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•Ë∞ÉÁî® LinkedHashMap ‰∏≠ÁöÑ getOrDefault()ÔºåÂÆåÁæéÁ¨¶ÂêàËøô‰∏™Ë¶ÅÊ±ÇÔºåÂç≥ÂΩìkey‰∏çÂ≠òÂú®Êó∂‰ºöËøîÂõûÈªòËÆ§ÂÄº -1„ÄÇ Ëá≥Ê≠§ÔºåÊàë‰ª¨Â∞±Âü∫Êú¨ÂÆåÊàê‰∫ÜÊú¨È¢òÁöÑË¶ÅÊ±ÇÔºåÂè™Ë¶ÅÂÜô‰∏Ä‰∏™ÊûÑÈÄ†ÂáΩÊï∞Âç≥ÂèØÔºåÁ≠îÊ°àÁöÑ super(capacity, 0.75F, true);ÔºåÊ≤°ÁúãËøáÊ∫êÁ†ÅÁöÑÂ∞è‰ºô‰º¥ÂèØËÉΩ‰∏çÂ§™Ê∏ÖÊ•öËøô‰∏™ÊûÑÈÄ†ÂáΩÊï∞ÔºåËøôÂ∞±ÊòØÊàë‰∏äÊñáËÆ≤ÁöÑ LinkedHashMap ‰∏≠ÁöÑÂ∏∏Áî®ÁöÑÁ¨¨‰∫å‰∏™ÊûÑÈÄ†ÊñπÊ≥ïÔºåÂÖ∑‰ΩìÂ§ßÂÆ∂ÂèØ‰ª•ÁúãÊàë‰∏äÈù¢‰ª£Á†ÅÁöÑÊ≥®ÈáäÔºÅ Ëá≥Ê≠§ÔºåÂ§ßÂäüÂëäÊàêÔºÅ 1234567891011121314151617181920212223242526272829303132333435363738394041424344class LRUCache extends LinkedHashMap&lt;Integer, Integer&gt;&#123; private int capacity; public LRUCache(int capacity) &#123; super(capacity, 0.75F, true); this.capacity = capacity; &#125; public int get(int key) &#123; return super.getOrDefault(key, -1); &#125; // Ëøô‰∏™ÂèØ‰∏çÂÜô public void put(int key, int value) &#123; super.put(key, value); &#125; @Override protected boolean removeEldestEntry(Map.Entry&lt;Integer, Integer&gt; eldest) &#123; return size() &gt; capacity; &#125;&#125; 148. ÊéíÂ∫èÈìæË°®È¢òÁõÆÂú® O(n log n) Êó∂Èó¥Â§çÊùÇÂ∫¶ÂíåÂ∏∏Êï∞Á∫ßÁ©∫Èó¥Â§çÊùÇÂ∫¶‰∏ãÔºåÂØπÈìæË°®ËøõË°åÊéíÂ∫è„ÄÇ Á§∫‰æã 1: 12ËæìÂÖ•: 4-&gt;2-&gt;1-&gt;3ËæìÂá∫: 1-&gt;2-&gt;3-&gt;4 Á§∫‰æã 2: 12ËæìÂÖ•: -1-&gt;5-&gt;3-&gt;4-&gt;0ËæìÂá∫: -1-&gt;0-&gt;3-&gt;4-&gt;5 ÊÄùË∑Ø È¢òÁõÆË¶ÅÊ±ÇÊó∂Èó¥Á©∫Èó¥Â§çÊùÇÂ∫¶ÂàÜÂà´‰∏∫ O(nlogn) Âíå O(1)ÔºåÊ†πÊçÆÊó∂Èó¥Â§çÊùÇÂ∫¶Êàë‰ª¨Ëá™ÁÑ∂ÊÉ≥Âà∞‰∫åÂàÜÊ≥ïÔºå‰ªéËÄåËÅîÊÉ≥Âà∞ÂΩíÂπ∂ÊéíÂ∫èÔºõ ÂØπÊï∞ÁªÑÂÅöÂΩíÂπ∂ÊéíÂ∫èÁöÑÁ©∫Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(n) ÔºåÂàÜÂà´Áî±Êñ∞ÂºÄËæüÊï∞ÁªÑ O(n) ÂíåÈÄíÂΩíÂáΩÊï∞Ë∞ÉÁî® O(logn) ÁªÑÊàêÔºåËÄåÊ†πÊçÆÈìæË°®ÁâπÊÄßÔºö Êï∞ÁªÑÈ¢ùÂ§ñÁ©∫Èó¥ÔºöÈìæË°®ÂèØ‰ª•ÈÄöËøá‰øÆÊîπÂºïÁî®Êù•Êõ¥ÊîπËäÇÁÇπÈ°∫Â∫èÔºåÊó†ÈúÄÂÉèÊï∞ÁªÑ‰∏ÄÊ†∑ÂºÄËæüÈ¢ùÂ§ñÁ©∫Èó¥Ôºõ ÈÄíÂΩíÈ¢ùÂ§ñÁ©∫Èó¥ÔºöÈÄíÂΩíË∞ÉÁî®ÂáΩÊï∞Â∞ÜÂ∏¶Êù• O(logn) ÁöÑÁ©∫Èó¥Â§çÊùÇÂ∫¶ÔºåÂõ†Ê≠§Ëã•Â∏åÊúõËææÂà∞ O(1) Á©∫Èó¥Â§çÊùÇÂ∫¶ÔºåÂàô‰∏çËÉΩ‰ΩøÁî®ÈÄíÂΩí„ÄÇ „ÄêËøôÈáåÂí±ËøòÊòØÁî®‰∏ãÈÄíÂΩíÔºåÈôç‰ΩéÈöæÂ∫¶ÔºÅ„Äë ÈÄöËøáÈÄíÂΩíÂÆûÁé∞ÈìæË°®ÂΩíÂπ∂ÊéíÂ∫èÔºåÊúâ‰ª•‰∏ã‰∏§‰∏™ÁéØËäÇÔºö ÂàÜÂâ≤ cut ÁéØËäÇÔºö ÊâæÂà∞ÂΩìÂâçÈìæË°®‰∏≠ÁÇπÔºåÂπ∂‰ªé‰∏≠ÁÇπÂ∞ÜÈìæË°®Êñ≠ÂºÄÔºà‰ª•‰æøÂú®‰∏ãÊ¨°ÈÄíÂΩí cut Êó∂ÔºåÈìæË°®ÁâáÊÆµÊã•ÊúâÊ≠£Á°ÆËæπÁïåÔºâÔºõ Êàë‰ª¨‰ΩøÁî® fast,slow Âø´ÊÖ¢ÂèåÊåáÈíàÊ≥ïÔºåÂ•áÊï∞‰∏™ËäÇÁÇπÊâæÂà∞‰∏≠ÁÇπÔºåÂÅ∂Êï∞‰∏™ËäÇÁÇπÊâæÂà∞‰∏≠ÂøÉÂ∑¶ËæπÁöÑËäÇÁÇπ„ÄÇ ÊâæÂà∞‰∏≠ÁÇπ slow ÂêéÔºåÊâßË°å slow.next = None Â∞ÜÈìæË°®ÂàáÊñ≠„ÄÇ ÈÄíÂΩíÂàÜÂâ≤Êó∂ÔºåËæìÂÖ•ÂΩìÂâçÈìæË°®Â∑¶Á´ØÁÇπ head Âíå‰∏≠ÂøÉËäÇÁÇπ slow ÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπ tmp(Âõ†‰∏∫ÈìæË°®ÊòØ‰ªé slow ÂàáÊñ≠ÁöÑ)„ÄÇ cut ÈÄíÂΩíÁªàÊ≠¢Êù°‰ª∂Ôºö ÂΩìhead.next == NoneÊó∂ÔºåËØ¥ÊòéÂè™Êúâ‰∏Ä‰∏™ËäÇÁÇπ‰∫ÜÔºåÁõ¥Êé•ËøîÂõûÊ≠§ËäÇÁÇπ„ÄÇ ÂêàÂπ∂ merge ÁéØËäÇÔºö Â∞Ü‰∏§‰∏™ÊéíÂ∫èÈìæË°®ÂêàÂπ∂ÔºåËΩ¨Âåñ‰∏∫‰∏Ä‰∏™ÊéíÂ∫èÈìæË°®„ÄÇ ÂèåÊåáÈíàÊ≥ïÂêàÂπ∂ÔºåÂª∫Á´ãËæÖÂä©ListNode h ‰Ωú‰∏∫Â§¥ÈÉ®„ÄÇ ËÆæÁΩÆ‰∏§ÊåáÈíà left, right ÂàÜÂà´ÊåáÂêë‰∏§ÈìæË°®Â§¥ÈÉ®ÔºåÊØîËæÉ‰∏§ÊåáÈíàÂ§ÑËäÇÁÇπÂÄºÂ§ßÂ∞èÔºåÁî±Â∞èÂà∞Â§ßÂä†ÂÖ•ÂêàÂπ∂ÈìæË°®Â§¥ÈÉ®ÔºåÊåáÈíà‰∫§ÊõøÂâçËøõÔºåÁõ¥Ëá≥Ê∑ªÂä†ÂÆå‰∏§‰∏™ÈìæË°®„ÄÇ ËøîÂõûËæÖÂä©ListNode h ‰Ωú‰∏∫Â§¥ÈÉ®ÁöÑ‰∏ã‰∏™ËäÇÁÇπ h.next„ÄÇ Êó∂Èó¥Â§çÊùÇÂ∫¶ O(l + r)Ôºål, r ÂàÜÂà´‰ª£Ë°®‰∏§‰∏™ÈìæË°®ÈïøÂ∫¶„ÄÇ ÂΩìÈ¢òÁõÆËæìÂÖ•ÁöÑ head == None Êó∂ÔºåÁõ¥Êé•ËøîÂõûNone„ÄÇ ‰ª£Á†Å1234567891011121314151617181920212223242526272829class Solution &#123; public ListNode sortList(ListNode head) &#123; if (head == null || head.next == null) return head; ListNode fast = head.next, slow = head; while (fast != null &amp;&amp; fast.next != null) &#123; slow = slow.next; fast = fast.next.next; &#125; ListNode tmp = slow.next; slow.next = null; ListNode left = sortList(head); ListNode right = sortList(tmp); ListNode h = new ListNode(0); ListNode res = h; while (left != null &amp;&amp; right != null) &#123; if (left.val &lt; right.val) &#123; h.next = left; left = left.next; &#125; else &#123; h.next = right; right = right.next; &#125; h = h.next; &#125; h.next = left != null ? left : right; return res.next; &#125;&#125; ‰ΩúËÄÖÔºöjydÈìæÊé•Ôºöhttps://leetcode-cn.com/problems/sort-list/solution/sort-list-gui-bing-pai-xu-lian-biao-by-jyd/Êù•Ê∫êÔºöÂäõÊâ£ÔºàLeetCodeÔºâËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ ‰∏çÁ¨¶ÂêàÊó∂Èó¥Â§çÊùÇÂ∫¶ÁöÑË∑ØËøá‰∏Ä‰∏ãÔºö 123456789101112131415161718public ListNode sortList(ListNode head) &#123; List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); while (head !=null) &#123; list.add(head.val); head = head.next; &#125; Collections.sort(list); return createLinkedList(list); &#125; // listÈÄíÂΩíËΩ¨ÈìæË°® private ListNode createLinkedList(List&lt;Integer&gt; data) &#123; if(data.isEmpty()) &#123; //Â¶ÇÊûú‰∏∫Á©∫ËøîÂõûnull return null; &#125; ListNode firstNode = new ListNode(data.get(0)); //ÊØèÊ¨°ÂèñÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥† firstNode.next = createLinkedList(data.subList(1, data.size()));//Á¨¨‰∫å‰∏™ÂÖÉÁ¥†‰ªé‰∏ãÊ†á‰∏∫1ÂºÄÂßãÂèñ‰Ωô‰∏ãlist return firstNode; &#125; 437. Ë∑ØÂæÑÊÄªÂíå IIIÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™‰∫åÂèâÊ†ëÔºåÂÆÉÁöÑÊØè‰∏™ÁªìÁÇπÈÉΩÂ≠òÊîæÁùÄ‰∏Ä‰∏™Êï¥Êï∞ÂÄº„ÄÇ ÊâæÂá∫Ë∑ØÂæÑÂíåÁ≠â‰∫éÁªôÂÆöÊï∞ÂÄºÁöÑË∑ØÂæÑÊÄªÊï∞„ÄÇ Ë∑ØÂæÑ‰∏çÈúÄË¶Å‰ªéÊ†πËäÇÁÇπÂºÄÂßãÔºå‰πü‰∏çÈúÄË¶ÅÂú®Âè∂Â≠êËäÇÁÇπÁªìÊùüÔºå‰ΩÜÊòØË∑ØÂæÑÊñπÂêëÂøÖÈ°ªÊòØÂêë‰∏ãÁöÑÔºàÂè™ËÉΩ‰ªéÁà∂ËäÇÁÇπÂà∞Â≠êËäÇÁÇπÔºâ„ÄÇ ‰∫åÂèâÊ†ë‰∏çË∂ÖËøá1000‰∏™ËäÇÁÇπÔºå‰∏îËäÇÁÇπÊï∞ÂÄºËåÉÂõ¥ÊòØ [-1000000,1000000] ÁöÑÊï¥Êï∞„ÄÇ Á§∫‰æãÔºö 123456789101112131415root = [10,5,-3,3,2,null,11,3,-2,null,1], sum = 8 10 / \ 5 -3 / \ \ 3 2 11 / \ \3 -2 1ËøîÂõû 3„ÄÇÂíåÁ≠â‰∫é 8 ÁöÑË∑ØÂæÑÊúâ:1. 5 -&gt; 32. 5 -&gt; 2 -&gt; 13. -3 -&gt; 11 ÊÄùË∑ØÂõûÊ∫ØÔºåÂè™‰∏çËøáËøôÈáåÁöÑÈÄâÊã©Êù°‰ª∂ÔºåÊØîËæÉÁâπÊÆäÔºåÂπ∂‰∏î ÂÅöÈÄâÊã© Âíå Êí§ÈîÄÈÄâÊã© ÂæóÁ®çÂæÆÊ≥®ÊÑè‰∏Ä‰∏ãÔºåËøôÈáåÂèØ‰ª•Áõ¥Êé•Áî® if else„ÄÇ ‰ª£Á†Å12345678910111213141516171819202122232425262728293031323334353637/** * Definition for a binary tree node. * public class TreeNode &#123; * int val; * TreeNode left; * TreeNode right; * TreeNode(int x) &#123; val = x; &#125; * &#125; */class Solution &#123; public int res = 0; public int pathSum(TreeNode root, int sum) &#123; if (root == null) return res; if (root != null) &#123; res = path(root,sum,0) + res; &#125; if(root.left != null) pathSum(root.left,sum); if(root.right != null) pathSum(root.right,sum); return res; &#125; public int path(TreeNode root, int sum,int count) &#123; if (root == null) return count; sum = sum - root.val; if (sum == 0) &#123; count++; &#125; if (root.left != null) &#123; count = path(root.left, sum, count); &#125; if (root.right != null) &#123; count = path(root.right, sum, count); &#125; return count; &#125;&#125; 124. ‰∫åÂèâÊ†ë‰∏≠ÁöÑÊúÄÂ§ßË∑ØÂæÑÂíåÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ÈùûÁ©∫‰∫åÂèâÊ†ëÔºåËøîÂõûÂÖ∂ÊúÄÂ§ßË∑ØÂæÑÂíå„ÄÇ Êú¨È¢ò‰∏≠ÔºåË∑ØÂæÑË¢´ÂÆö‰πâ‰∏∫‰∏ÄÊù°‰ªéÊ†ë‰∏≠‰ªªÊÑèËäÇÁÇπÂá∫ÂèëÔºåËææÂà∞‰ªªÊÑèËäÇÁÇπÁöÑÂ∫èÂàó„ÄÇËØ•Ë∑ØÂæÑËá≥Â∞ëÂåÖÂê´‰∏Ä‰∏™ËäÇÁÇπÔºå‰∏î‰∏ç‰∏ÄÂÆöÁªèËøáÊ†πËäÇÁÇπ„ÄÇ Á§∫‰æã 1: 1234567ËæìÂÖ•: [1,2,3] 1 / \ 2 3ËæìÂá∫: 6 Á§∫‰æã 2: 123456789ËæìÂÖ•: [-10,9,20,null,null,15,7] -10 / \ 9 20 / \ 15 7ËæìÂá∫: 42 ÊÄùË∑ØËøôÈ¢òËøòÊòØÊå∫ÈöæÁöÑÔºåË¶ÅÊ±ÇÊúÄÂ§ßË∑ØÂæÑÂíåÔºåÂèØ‰ª•ÈááÁî®ÈÄíÂΩíÔºåÈÄíÂΩíÂ∞±ÊòØ‰∏âÈÉ®Êõ≤Ôºö 1„ÄÅÁ°ÆÂÆöÈÄíÂΩíÂá∫Âè£ÔºåËøô‰∏™ÁÆÄÂçïÔºåroot == null Âç≥ÈÄÄÂá∫ 2„ÄÅÁ°ÆÂÆöËøîÂõûÂÄºÔºåËøô‰∏™ÊòØÊú¨È¢òÊúÄÈöæÁöÑÔºåËøîÂõûÁöÑÊòØ‰ª•ËØ•ËäÇÁÇπÁªìÂ∞æÁöÑÊúÄÂ§ßË∑ØÂæÑÂíåÔºÅÔºÅÔºÅ 3„ÄÅ‰∏ÄÁ∫ßÈÄíÂΩíÈúÄË¶ÅÂÅöÁöÑ‰∫ãÔºåÂÖ∂ÂÆûÂ∞±ÊòØÂéªÁÆóÊúÄÂ§ßÁöÑË∑ØÂæÑÂíåÔºåËøô‰∏™ÂæàÁÆÄÂçïÔºåÂú®‰∫åÂèâÊ†ë‰∏≠Ôºå‰∏ÄÁ∫ßÈÄíÂΩíÂÖ∂ÂÆû‰πüÂ∞±ÊòØ‰∏â‰∏™ËäÇÁÇπÔºåÂàÜÂà´ÊòØÊ†πËäÇÁÇπÔºåÂ∑¶Â≠êÊ†ëËäÇÁÇπÔºåÂè≥Â≠êÊ†ëËäÇÁÇπÔºåÊó¢ÁÑ∂ÊØè‰∏™ËäÇÁÇπËøîÂõûÁöÑÊòØ ‰ª•ËØ•ËäÇÁÇπÁªìÂ∞æÁöÑÊúÄÂ§ßË∑ØÂæÑÂíåÔºåÂàôÊàë‰ª¨ÂèØ‰ª•Âú®ÊØèÁ∫ßÈÄíÂΩíÊó∂ÂéªÊõ¥Êñ∞‰∏Ä‰∏ãÊúÄÂ§ßÁöÑË∑ØÂæÑÂíåÔºåÂç≥ Â∑¶Â≠êÊ†ëËäÇÁÇπËøîÂõûÊù•ÁöÑ‰ª•ÂÖ∂ËäÇÁÇπÁªìÂ∞æÁöÑÊúÄÂ§ßË∑ØÂæÑÂíå + Ê†πËäÇÁÇπÁöÑÂÄº + Âè≥Â≠êÊ†ëËäÇÁÇπËøîÂõûÁöÑ‰ª•ËØ•ËäÇÁÇπÁªìÂ∞æÁöÑÊúÄÂ§ßË∑ØÂæÑÂíå„ÄÇ ‰ª£Á†Å1234567891011121314151617181920212223242526class Solution &#123; int max_sum = Integer.MIN_VALUE; public int max_gain(TreeNode node) &#123; if (node == null) return 0; // max sum on the left and right sub-trees of node int left_gain = Math.max(max_gain(node.left), 0); int right_gain = Math.max(max_gain(node.right), 0); // the price to start a new path where `node` is a highest node int price_newpath = node.val + left_gain + right_gain; // update max_sum if it's better to start a new path max_sum = Math.max(max_sum, price_newpath); // for recursion : // return the max gain if continue the same path return node.val + Math.max(left_gain, right_gain); &#125; public int maxPathSum(TreeNode root) &#123; max_gain(root); return max_sum; &#125;&#125; 48. ÊóãËΩ¨ÂõæÂÉèÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ n √ó n ÁöÑ‰∫åÁª¥Áü©ÈòµË°®Á§∫‰∏Ä‰∏™ÂõæÂÉè„ÄÇ Â∞ÜÂõæÂÉèÈ°∫Êó∂ÈíàÊóãËΩ¨ 90 Â∫¶„ÄÇ ËØ¥ÊòéÔºö ‰Ω†ÂøÖÈ°ªÂú®ÂéüÂú∞ÊóãËΩ¨ÂõæÂÉèÔºåËøôÊÑèÂë≥ÁùÄ‰Ω†ÈúÄË¶ÅÁõ¥Êé•‰øÆÊîπËæìÂÖ•ÁöÑ‰∫åÁª¥Áü©Èòµ„ÄÇËØ∑‰∏çË¶Å‰ΩøÁî®Âè¶‰∏Ä‰∏™Áü©ÈòµÊù•ÊóãËΩ¨ÂõæÂÉè„ÄÇ Á§∫‰æã 1: 12345678910111213ÁªôÂÆö matrix = [ [1,2,3], [4,5,6], [7,8,9]],ÂéüÂú∞ÊóãËΩ¨ËæìÂÖ•Áü©ÈòµÔºå‰ΩøÂÖ∂Âèò‰∏∫:[ [7,4,1], [8,5,2], [9,6,3]] Á§∫‰æã 2: 123456789101112131415ÁªôÂÆö matrix =[ [ 5, 1, 9,11], [ 2, 4, 8,10], [13, 3, 6, 7], [15,14,12,16]], ÂéüÂú∞ÊóãËΩ¨ËæìÂÖ•Áü©ÈòµÔºå‰ΩøÂÖ∂Âèò‰∏∫:[ [15,13, 2, 5], [14, 3, 4, 1], [12, 6, 8, 9], [16, 7,10,11]] ÊÄùË∑ØÁøªËΩ¨ + ËΩ¨ÁΩÆ ‰ª£Á†Å12345678910111213141516171819202122232425//1.ÂÖàËΩ¨ÁΩÆÂÜçÁøªËΩ¨ÔºåÊ≥®ÊÑèËøôÈáåÁøªËΩ¨ÊòØ Ë°å ÁøªËΩ¨ÔºåÊØîÂ¶Ç Á¨¨‰∏ÄË°å 1 2 3ÔºåË°åÁøªËΩ¨Âèò‰∏∫ 3 2 1//2.ÂÖàÁøªËΩ¨ÂÜçËΩ¨ÁΩÆÔºåËøôÈáåÁöÑÁøªËΩ¨ÊòØ Âàó ÁøªËΩ¨ÔºåÊØîÂ¶ÇÁ¨¨‰∏ÄÂàó 1 4 7ÔºåÁøªËΩ¨‰∏∫ 7 4 1//3.Â¶ÇÊûúÊòØÈÄÜÊó∂ÈíàÔºåÂàôÊòØÊåâÁÖßÂâØÂØπËßíÁ∫øËøõË°åËΩ¨ÁΩÆclass Solution &#123; public void rotate(int[][] matrix) &#123; int n = matrix.length; // ËøôÈáåÊòØÂÖàËΩ¨ÁΩÆÂÜçÁøªËΩ¨ for (int i = 0; i &lt; n; i++) &#123; for (int j = i; j &lt; n; j++) &#123; int tmp = matrix[j][i]; matrix[j][i] = matrix[i][j]; matrix[i][j] = tmp; &#125; &#125; // Ë°åÁøªËΩ¨ 1 2 3Âèò‰∏∫ 3 2 1 for (int i = 0; i &lt; n; i++) &#123; for (int j = 0; j &lt; n / 2; j++) &#123; int tmp = matrix[i][j]; matrix[i][j] = matrix[i][n - j - 1]; matrix[i][n - j - 1] = tmp; &#125; &#125; &#125;&#125; 49. Â≠óÊØçÂºÇ‰ΩçËØçÂàÜÁªÑÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Êï∞ÁªÑÔºåÂ∞ÜÂ≠óÊØçÂºÇ‰ΩçËØçÁªÑÂêàÂú®‰∏ÄËµ∑„ÄÇÂ≠óÊØçÂºÇ‰ΩçËØçÊåáÂ≠óÊØçÁõ∏ÂêåÔºå‰ΩÜÊéíÂàó‰∏çÂêåÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ Á§∫‰æã: 123456ËæìÂÖ•: ["eat", "tea", "tan", "ate", "nat", "bat"],ËæìÂá∫:[ ["ate","eat","tea"], ["nat","tan"], ["bat"] ËØ¥ÊòéÔºö ÊâÄÊúâËæìÂÖ•Âùá‰∏∫Â∞èÂÜôÂ≠óÊØç„ÄÇ ‰∏çËÄÉËôëÁ≠îÊ°àËæìÂá∫ÁöÑÈ°∫Â∫è„ÄÇ ÊÄùË∑Ø ÊØè‰∏™ÂçïËØçËøõË°åÂ≠óÊØçÊéíÂ∫èÔºåÊéíÂÆåÂ∫èÂêéÂ≠òÂÖ•map‰∏≠ÔºåkeyÁõ∏ÂêåÁöÑÂ≠òÂÖ•Âêå‰∏Ä‰∏™list‰∏≠Âç≥ÂèØ„ÄÇ ÊØè‰∏™ÂçïËØçÈÉΩÊòØÁî± 26 ‰∏™Â≠óÊØçÁªÑÊàêÁöÑÔºåËøô‰∏™ÊñπÊ≥ïÊó†ÈúÄÂØπÊØè‰∏™ÂçïËØçÁöÑÂ≠óÊØçËøõË°åÊéíÂ∫èÔºåÁ±ª‰ºº‰∫éÊ°∂ÁöÑÊ¶ÇÂøµÔºåÊØè‰∏™ÂçïËØç‰∏çÂêåÁöÑÂ≠óÁ¨¶ÊîæÂÖ• 26 ‰∏™Ê°∂‰∏≠ÔºåÂ≠óÊØçÂºÇ‰ΩçËØçÂØπÂ∫îÁöÑÊ°∂‰∏≠ÁöÑÊï∞ÂÄºÂ∫îËØ•ÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂ∞ÜÊ°∂‰∏≠Êï∞ÊçÆÁõ∏ÂêåÁöÑÂ≠óÊØçÂΩìÊàê‰∏Ä‰∏™keyÔºåÂ≠òÂÖ•map‰∏≠ÔºåÁÑ∂ÂêékeyÁõ∏ÂêåÁöÑÂ≠òÂÖ•Âêå‰∏Ä‰∏™list‰∏≠ÔºåÊàë‰∏™‰∫∫ËÆ§‰∏∫ËøôÁßçÊñπÊ≥ïÂØπÂ≠óÊØçÂæàÂ§öÂæàÂ§öÁöÑÂçïËØçÊòØÈùûÂ∏∏ÊúâÁî®ÁöÑÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏äÊõ¥Â∞è„ÄÇ ‰ª£Á†ÅÊÄùË∑Ø‰∏Ä 1234567891011121314class Solution &#123; public List&lt;List&lt;String&gt;&gt; groupAnagrams(String[] strs) &#123; if (strs.length == 0) return new ArrayList(); Map&lt;String, List&gt; ans = new HashMap&lt;String, List&gt;(); for (String s : strs) &#123; char[] ca = s.toCharArray(); Arrays.sort(ca); String key = String.valueOf(ca); if (!ans.containsKey(key)) ans.put(key, new ArrayList()); ans.get(key).add(s); &#125; return new ArrayList(ans.values()); &#125;&#125; ÊÄùË∑Ø‰∫å 123456789101112131415161718192021class Solution &#123; public List&lt;List&lt;String&gt;&gt; groupAnagrams(String[] strs) &#123; if (strs.length == 0) return new ArrayList(); Map&lt;String, List&gt; ans = new HashMap&lt;String, List&gt;(); int[] count = new int[26]; for (String s : strs) &#123; Arrays.fill(count, 0); for (char c : s.toCharArray()) count[c - 'a']++; StringBuilder sb = new StringBuilder(""); for (int i = 0; i &lt; 26; i++) &#123; sb.append('#'); sb.append(count[i]); &#125; String key = sb.toString(); if (!ans.containsKey(key)) ans.put(key, new ArrayList()); ans.get(key).add(s); &#125; return new ArrayList(ans.values()); &#125;&#125; 136. Âè™Âá∫Áé∞‰∏ÄÊ¨°ÁöÑÊï∞Â≠óÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ÈùûÁ©∫Êï¥Êï∞Êï∞ÁªÑÔºåÈô§‰∫ÜÊüê‰∏™ÂÖÉÁ¥†Âè™Âá∫Áé∞‰∏ÄÊ¨°‰ª•Â§ñÔºåÂÖ∂‰ΩôÊØè‰∏™ÂÖÉÁ¥†ÂùáÂá∫Áé∞‰∏§Ê¨°„ÄÇÊâæÂá∫ÈÇ£‰∏™Âè™Âá∫Áé∞‰∫Ü‰∏ÄÊ¨°ÁöÑÂÖÉÁ¥†„ÄÇ ËØ¥ÊòéÔºö ‰Ω†ÁöÑÁÆóÊ≥ïÂ∫îËØ•ÂÖ∑ÊúâÁ∫øÊÄßÊó∂Èó¥Â§çÊùÇÂ∫¶„ÄÇ ‰Ω†ÂèØ‰ª•‰∏ç‰ΩøÁî®È¢ùÂ§ñÁ©∫Èó¥Êù•ÂÆûÁé∞ÂêóÔºü Á§∫‰æã 1: 12ËæìÂÖ•: [2,2,1]ËæìÂá∫: 1 Á§∫‰æã 2: 12ËæìÂÖ•: [4,1,2,1,2]ËæìÂá∫: 4 ÊÄùË∑Ø ÊãøÂà∞ÊâãÔºåË¶ÅÊ±ÇÊó∂Èó¥Â§çÊùÇÂ∫¶Âú® O( n )ÔºåÁ¨¨‰∏ÄÂèçÂ∫îÊòØ‰ΩøÁî®ÂìàÂ∏åË°® HashMap Êù•ÂÆåÊàêÔºåÈÅçÂéÜ‰∏ÄÈÅçÊï∞ÁªÑÔºåÁÑ∂ÂêéÊâæÂà∞ value == 1ÁöÑÂç≥ÂèØÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶ O(n)ÔºåÁ©∫Èó¥Â§çÊùÇÂ∫¶‰∏∫O(n)„ÄÇ ‰ΩÜÊòØÈ¢òÁõÆË¶ÅÊ±Ç‰∏ç‰ΩøÁî®È¢ùÂ§ñÁ©∫Èó¥ÔºåÂç≥Á©∫Èó¥Â§çÊùÇÂ∫¶ O(1)ÔºåËøô‰∏™Â∞±ÂæàÈöæ‰∫ÜÔºåÂè™ËÉΩÊö¥ÂäõÊ≥ïÔºåÂ∞±ÊòØÊØèÊü•‰∏Ä‰∏™Êï∞Â≠óÔºåÊàë‰ª¨Â∞±ÂéªÂâ©‰∏ãÁöÑÊï∞Â≠ó‰∏≠ÂéªÊâæÔºåÂ¶ÇÊûúÊâæ‰∏çÂà∞ÔºåÂç≥‰ΩøÊàë‰ª¨ÈúÄË¶ÅÁöÑÔºå‰ΩÜÊòØËøô‰∏™Êó∂Èó¥Â§çÊùÇÂ∫¶ÊòØO(n¬≤)„ÄÇ ÊúÄÂêé‰∏Ä‰∏™ÊòØÊúÄÈ™öÁöÑÔºåÁõ¥Êé•ÂºÇÊàñÂ∞±Ë°å‰∫Ü‚Ä¶ ‰ª£Á†Å123456789class Solution &#123; public int singleNumber(int[] nums) &#123; int a = nums[0]; for(int i = 1;i &lt; nums.length;i++)&#123; a = a ^ nums[i]; &#125; return a; &#125;&#125; 55. Ë∑≥Ë∑ÉÊ∏∏ÊàèÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ÈùûË¥üÊï¥Êï∞Êï∞ÁªÑÔºå‰Ω†ÊúÄÂàù‰Ωç‰∫éÊï∞ÁªÑÁöÑÁ¨¨‰∏Ä‰∏™‰ΩçÁΩÆ„ÄÇÊï∞ÁªÑ‰∏≠ÁöÑÊØè‰∏™ÂÖÉÁ¥†‰ª£Ë°®‰Ω†Âú®ËØ•‰ΩçÁΩÆÂèØ‰ª•Ë∑≥Ë∑ÉÁöÑÊúÄÂ§ßÈïøÂ∫¶„ÄÇ Âà§Êñ≠‰Ω†ÊòØÂê¶ËÉΩÂ§üÂà∞ËææÊúÄÂêé‰∏Ä‰∏™‰ΩçÁΩÆ„ÄÇ Á§∫‰æã 1: 123ËæìÂÖ•: [2,3,1,1,4]ËæìÂá∫: trueËß£Èáä: Êàë‰ª¨ÂèØ‰ª•ÂÖàË∑≥ 1 Ê≠•Ôºå‰ªé‰ΩçÁΩÆ 0 Âà∞Ëææ ‰ΩçÁΩÆ 1, ÁÑ∂ÂêéÂÜç‰ªé‰ΩçÁΩÆ 1 Ë∑≥ 3 Ê≠•Âà∞ËææÊúÄÂêé‰∏Ä‰∏™‰ΩçÁΩÆ„ÄÇ Á§∫‰æã 2: 123ËæìÂÖ•: [3,2,1,0,4]ËæìÂá∫: falseËß£Èáä: Êó†ËÆ∫ÊÄéÊ†∑Ôºå‰Ω†ÊÄª‰ºöÂà∞ËææÁ¥¢Âºï‰∏∫ 3 ÁöÑ‰ΩçÁΩÆ„ÄÇ‰ΩÜËØ•‰ΩçÁΩÆÁöÑÊúÄÂ§ßË∑≥Ë∑ÉÈïøÂ∫¶ÊòØ 0 Ôºå ÊâÄ‰ª•‰Ω†Ê∞∏Ëøú‰∏çÂèØËÉΩÂà∞ËææÊúÄÂêé‰∏Ä‰∏™‰ΩçÁΩÆ„ÄÇ ÊÄùË∑Ø ÂõûÊ∫Ø Ë¥™ÂøÉÁÆóÊ≥ïÔºåÊØèÊ¨°ÈÉΩÊâæÂà∞ËÉΩË∑≥Âà∞ÁöÑÊúÄËøúË∑ùÁ¶ªÔºåÁÑ∂ÂêéÂú®ÂéüÂú∞Âà∞ÊúÄËøúË∑ùÁ¶ª‰πãÈó¥ÈÅçÂéÜÔºåÁúãËÉΩÂê¶ÁªßÁª≠Ë∑≥Âà∞Êõ¥ËøúÔºåÂ¶ÇÊûúÂèØ‰ª•ÔºåÂ∞±Êõ¥Êñ∞ÊúÄËøúË∑ùÁ¶ªÂÄºÔºåÂ¶ÇÊûúÊúÄËøúË∑ùÁ¶ªÂÄºËÉΩÂ§ü‰∏çÂ∞è‰∫éÊúÄÂêé‰∏Ä‰∏™‰ΩçÁΩÆÔºåËØ¥ÊòéÂèØ‰ª•Ë∑≥Âà∞ÔºåÂê¶Âàô‰∏çË°å„ÄÇ ËØÑËÆ∫Âå∫ÁúãÂà∞ÁöÑÔºåÂÖ∂ÂÆûË∑üË¥™ÂøÉÁÆóÊ≥ïÊÄùÊÉ≥Á±ª‰ººÔºå‰ΩÜÊòØÂèàÊúâÁÇπ‰∏ç‰∏ÄÊ†∑ÔºåÂ∞±ÊòØËÆ∞ÂΩïÊØè‰∏™ËäÇÁÇπËÉΩË∑≥Âà∞ÁöÑÊúÄËøúË∑ùÁ¶ªÔºå‰∏çÊñ≠Êõ¥Êñ∞ÊúÄËøúË∑ùÁ¶ªÔºåÂ¶ÇÊûúÊúâÊüê‰∏™ËäÇÁÇπÁöÑ‰∏ãÊ†áÊØîkÂÄºÂ§ßÔºåËØ¥ÊòéÂà∞‰∏ç‰∫ÜËØ•ËäÇÁÇπÔºåÂç≥Êúâ‰∏™Êå°ÊùøÊå°Âú®‰∫ÜËøô‰∏™ËäÇÁÇπ‰πãÂâçÔºåËøá‰∏çÊù•ÔºåÊ≠§Êó∂Â∞±ÊòØÊó†Ê≥ïÂà∞ËææÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÔºåÂ¶ÇÊûúÂÖ®Á®ãÈÉΩÊ≤°ÊúâË¢´Êå°ÊùøÊå°‰ΩèÔºå‰∏îÊå°ÊùøÁöÑÂÄºËøá‰∫ÜÊúÄÂêé‰∏Ä‰∏™‰ΩçÁΩÆÔºåÂç≥ÂèØ‰ª•Âà∞ËææÊúÄÂêé‰∏Ä‰∏™‰ΩçÁΩÆ„ÄÇ ‰ª£Á†Å ÂõûÊ∫Ø„ÄêË∂ÖÂá∫Êó∂Èó¥ÈôêÂà∂„Äë 123456789101112131415161718192021class Solution &#123; public boolean canJump(int[] nums) &#123; if(nums.length == 0) return true; return canJumpByRecursion_In(0, nums); &#125; private boolean canJumpByRecursion_In(int position,int[] nums) &#123; if (position == nums.length - 1) &#123; return true; &#125; int furthestJump = Math.min(position + nums[position], nums.length - 1); for (int nextPosition = position + 1; nextPosition &lt;= furthestJump; nextPosition++) &#123; if (canJumpByRecursion_In(nextPosition, nums)) &#123; return true; &#125; &#125; return false; &#125;&#125; Ë¥™ÂøÉ 12345678910class Solution &#123; public boolean canJump(int[] nums) &#123; int furthest = 0; for(int i = 0;i &lt;= furthest;i++)&#123; if(furthest &gt;= nums.length-1) return true; if(i + nums[i] &gt; furthest) furthest = i + nums[i]; &#125; return false; &#125;&#125; ËØÑËÆ∫Âå∫Á•û‰ªô 1234567891011class Solution &#123; public boolean canJump(int[] nums) &#123; int furthest = 0; for(int i = 0;i &lt;= nums.length-1;i++)&#123; if(furthest &gt;= nums.length-1) break; if(i &gt; furthest) return false; if(i + nums[i] &gt; furthest) furthest = i + nums[i]; &#125; return true; &#125;&#125; 56. ÂêàÂπ∂Âå∫Èó¥È¢òÁõÆÁªôÂá∫‰∏Ä‰∏™Âå∫Èó¥ÁöÑÈõÜÂêàÔºåËØ∑ÂêàÂπ∂ÊâÄÊúâÈáçÂè†ÁöÑÂå∫Èó¥„ÄÇ Á§∫‰æã 1: 123ËæìÂÖ•: [[1,3],[2,6],[8,10],[15,18]]ËæìÂá∫: [[1,6],[8,10],[15,18]]Ëß£Èáä: Âå∫Èó¥ [1,3] Âíå [2,6] ÈáçÂè†, Â∞ÜÂÆÉ‰ª¨ÂêàÂπ∂‰∏∫ [1,6]. Á§∫‰æã 2: 123ËæìÂÖ•: [[1,4],[4,5]]ËæìÂá∫: [[1,5]]Ëß£Èáä: Âå∫Èó¥ [1,4] Âíå [4,5] ÂèØË¢´ËßÜ‰∏∫ÈáçÂè†Âå∫Èó¥„ÄÇ ÊÄùË∑ØÂÖàÊåâÈ¶ñ‰ΩçÁΩÆËøõË°åÊéíÂ∫è; Êé•‰∏ãÊù•,Â¶Ç‰ΩïÂà§Êñ≠‰∏§‰∏™Âå∫Èó¥ÊòØÂê¶ÈáçÂè†Âë¢?ÊØîÂ¶Ç a = [1,4],b = [2,3] ÂΩì a[1] &gt;= b[0] ËØ¥Êòé‰∏§‰∏™Âå∫Èó¥ÊúâÈáçÂè† ‰ΩÜÊòØÂ¶Ç‰ΩïÊääËøô‰∏™Âå∫Èó¥ÊâæÂá∫Êù•Âë¢? Â∑¶Ëæπ‰ΩçÁΩÆ‰∏ÄÂÆöÊòØÁ°ÆÂÆöÔºåÂ∞±ÊòØ a[0]ÔºåËÄåÂè≥Ëæπ‰ΩçÁΩÆÊòØ max(a[1], b[1]) ÊâÄ‰ª•,Êàë‰ª¨Â∞±ËÉΩÊâæÂá∫Êï¥‰∏™Âå∫Èó¥‰∏∫:[1,4] ‰ª£Á†Å12345678910111213141516171819202122232425262728class Solution &#123; public int[][] merge(int[][] intervals) &#123; LinkedList&lt;int[]&gt; res = new LinkedList&lt;&gt;(); if (intervals == null || intervals.length == 0) &#123; return res.toArray(new int[0][]); &#125; // ÊåâÊï∞ÁªÑÈ¶ñÂÖÉÁ¥†ÊéíÂ∫è Arrays.sort(intervals, new Comparator&lt;int[]&gt;() &#123; @Override public int compare(int[] o1, int[] o2) &#123; return o1[0] - o2[0]; &#125; &#125;); // Â¶ÇÊûúÈÅçÂéÜÂà∞ÁöÑÊï∞ÁªÑÁöÑÂàùÂßãÂÄº ÊØî res ÁöÑÊúÄÊñ∞Ê∑ªÂä†ÁöÑÊï∞ÁªÑÁöÑÊú´Â∞æÂÄºËøòÂ§ßÔºåËØ¥ÊòéÊ≤°ÊúâÈáçÂè†ÔºåÂèØ‰ª•Áõ¥Êé•Ê∑ªÂä† // Âê¶ÂàôÔºåÁõ¥Êé•ÊØîËæÉ‰∏§‰∏™Êï∞ÁªÑÁöÑÊú´Â∞æÂÄºÂ∞±Ë°åÔºåÂõ†‰∏∫ÊòØÊåâÊï∞ÁªÑÈ¶ñÂÖÉÁ¥†ÊéíÂ•ΩÂ∫èÁöÑÔºåÊâÄ‰ª•Âè™ÈúÄË¶ÅËÄÉËôëÊú´Â∞æÂÄºÊõøÊç¢Â∞±Ë°å for (int i = 0; i &lt; intervals.length; i++) &#123; if (res.isEmpty() || res.getLast()[1] &lt; intervals[i][0]) &#123; res.add(intervals[i]); &#125; else &#123; res.getLast()[1] = Math.max(res.getLast()[1], intervals[i][1]); &#125; &#125; // list.toArray(new int[0][])ÔºåËøôÊòØÊï∞ÁªÑÈõÜ‰ΩìÂº∫ËΩ¨Á±ªÂûãÁöÑÊñπÊ≥ï // new int[0][]ÊòØÂëäËØâÁ®ãÂ∫èÈúÄË¶ÅËΩ¨ÊàêËøôÊ†∑ÁöÑÁ±ªÂûã // ÈïøÂ∫¶Â§öÂ§ßÊòØÊó†ÊâÄË∞ìÁöÑÔºåÂõ†‰∏∫ËΩ¨Êç¢ÂêéÁöÑÈïøÂ∫¶ÊòØÊåâÁÖß‰Ω†ÁöÑlistÈïøÂ∫¶Êù•ÂÆöÁöÑ return res.toArray(new int[0][0]); &#125;&#125; 75. È¢úËâ≤ÂàÜÁ±ªÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ÂåÖÂê´Á∫¢Ëâ≤„ÄÅÁôΩËâ≤ÂíåËìùËâ≤Ôºå‰∏ÄÂÖ± n ‰∏™ÂÖÉÁ¥†ÁöÑÊï∞ÁªÑÔºåÂéüÂú∞ÂØπÂÆÉ‰ª¨ËøõË°åÊéíÂ∫èÔºå‰ΩøÂæóÁõ∏ÂêåÈ¢úËâ≤ÁöÑÂÖÉÁ¥†Áõ∏ÈÇªÔºåÂπ∂ÊåâÁÖßÁ∫¢Ëâ≤„ÄÅÁôΩËâ≤„ÄÅËìùËâ≤È°∫Â∫èÊéíÂàó„ÄÇ Ê≠§È¢ò‰∏≠ÔºåÊàë‰ª¨‰ΩøÁî®Êï¥Êï∞ 0„ÄÅ 1 Âíå 2 ÂàÜÂà´Ë°®Á§∫Á∫¢Ëâ≤„ÄÅÁôΩËâ≤ÂíåËìùËâ≤„ÄÇ Ê≥®ÊÑè:‰∏çËÉΩ‰ΩøÁî®‰ª£Á†ÅÂ∫ì‰∏≠ÁöÑÊéíÂ∫èÂáΩÊï∞Êù•Ëß£ÂÜ≥ËøôÈÅìÈ¢ò„ÄÇ Á§∫‰æã: 12ËæìÂÖ•: [2,0,2,1,1,0]ËæìÂá∫: [0,0,1,1,2,2] ËøõÈò∂Ôºö ‰∏Ä‰∏™Áõ¥ËßÇÁöÑËß£ÂÜ≥ÊñπÊ°àÊòØ‰ΩøÁî®ËÆ°Êï∞ÊéíÂ∫èÁöÑ‰∏§Ë∂üÊâ´ÊèèÁÆóÊ≥ï„ÄÇÈ¶ñÂÖàÔºåËø≠‰ª£ËÆ°ÁÆóÂá∫0„ÄÅ1 Âíå 2 ÂÖÉÁ¥†ÁöÑ‰∏™Êï∞ÔºåÁÑ∂ÂêéÊåâÁÖß0„ÄÅ1„ÄÅ2ÁöÑÊéíÂ∫èÔºåÈáçÂÜôÂΩìÂâçÊï∞ÁªÑ„ÄÇ ‰Ω†ËÉΩÊÉ≥Âá∫‰∏Ä‰∏™‰ªÖ‰ΩøÁî®Â∏∏Êï∞Á©∫Èó¥ÁöÑ‰∏ÄË∂üÊâ´ÊèèÁÆóÊ≥ïÂêóÔºü ÊÄùË∑Ø‰∏âË∑ØÂΩíÂπ∂ÔºåÂÖ∂ÂÆû‰πüÊòØ Arrays.sort() ËøôÈáåÈááÁî®ÁöÑÊñπÊ≥ïÔºå‰πüÊòØ‰∏âËâ≤ÊóóÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ ‰∏â‰∏™ÊåáÈíàÔºåÂàÜÂà´ÊòØ left„ÄÅcur„ÄÅright„ÄÇleftÊåáÂêëÊï∞ÁªÑÊúÄÂ∑¶‰æßÔºårightÊåáÂêëÊï∞ÁªÑÊúÄÂè≥‰æßÔºåcur‰ª£Ë°®ÂΩìÂâçÊ≠£Âú®ÈÅçÂéÜÁöÑÊï∞ÁªÑÂÖÉÁ¥†ÔºåÂΩì cur ÈÅçÂéÜÁöÑÂÖÉÁ¥†ÊòØ 0 Êó∂ÔºåÂ∞Ü cur ÊåáÂêëÁöÑÂÖÉÁ¥† ‰∏é p0 ÊåáÂêëÁöÑÂÖÉÁ¥†‰∫§Êç¢ÔºåÁÑ∂Âêé cur++Ôºåp0++„ÄÇÂΩì cur ÈÅçÂéÜÁöÑÂÖÉÁ¥†ÊòØ 1 Êó∂Ôºåcur++„ÄÇÂΩì cur ÈÅçÂéÜÁöÑÂÖÉÁ¥†ÊòØ 2 Êó∂ÔºåÂ∞Ü cur ÊåáÂêëÁöÑÂÖÉÁ¥†‰∏é p2 ÊåáÂêëÁöÑÂÖÉÁ¥†‰∫§Êç¢ÔºåÁÑ∂Âêé p2‚ÄìÔºåcur‰∏çÂä®ÔºÅÔºÅÔºÅÁõ¥Âà∞ cur &gt; p2 ,Âæ™ÁéØÁªìÊùüÔºàÂç≥ÂÖ®ÈÉ®Êâ´ÊèèÂÆåÊØïÔºâ„ÄÇ ÂØπ‰∫é‰ª•‰∏äÔºåÊúâ‰∏Ä‰∏™ÈöæÁÇπÔºÅ ‰∏∫‰Ωï cur Âú®‰∏é p0 ‰∫§Êç¢Êó∂ÈúÄË¶Å p0++Ôºåcur++ÔºõËÄåÂú® cur ‰∏é p2 ‰∫§Êç¢Êó∂ÔºåÂç¥Âè™ÈúÄË¶Å p2‚ÄìÔºü ÂØπ‰∫é‰∏äÈù¢Ëøô‰∏™ÈóÆÈ¢òÔºåÊúâ‰∏§ÁßçËß£ÈáäÊÄùË∑ØÔºö1.cur ‰∏é p0 ‰∫§Êç¢ÈúÄË¶ÅËá™Âä†ÔºåÊòØÂõ†‰∏∫ÂÖ∂Â∑¶ËæπÂ∑≤ÁªèÊâ´ÊèèËøá‰∫ÜÔºå‰∫§Êç¢ËøáÊù•ÁöÑÂÄº‰πüÊòØ‰πãÂâçÂ∞±Êâ´ÊèèËøá‰∫ÜÁöÑÔºåËÄåÂè≥Ëæπ‰∏çÊòØÔºå p2 d‰∫§Êç¢ËøáÊù•ÁöÑÂÄº cur Âπ∂Ê≤°ÊúâÊâ´ÊèèËøáÔºõ2.ÂΩì cur ‰∏é p0 ‰∏çÊòØ‰∏Ä‰∏™ÊåáÂêëÂêå‰∏Ä‰∏™Á¥¢ÂºïÂÄºÊó∂ÔºåÈÇ£ cur ÊåáÂêëÁöÑÁ¥¢ÂºïÂÄºÂ¶ÇÊûúÂèëÁîü‰∫§Êç¢ÔºåÈÇ£‰∫§Êç¢ËøáÊù•ÁöÑ‰∏ÄÂÆöÊòØ 1ÔºàÂéüÂõ†ÊòØÂè™ÊúâÂΩìÈÅçÂéÜËøáÁöÑËäÇÁÇπÊúâ1Ôºåp0 Âíå cur Êâç‰∏ç‰ºöÂêåÊ≠•ÔºâÔºåËÄå Â¶ÇÊûúÁ¥¢ÂºïÊòØ 1 ÂàöÂ•Ω‰πüÂ∞±‰∏çÁî®Êúâ‰ªª‰ΩïÊìç‰ΩúÔºåÊâÄ‰ª•ÂèØ‰ª•Áõ¥Êé•ÁªßÁª≠ÂêëÂè≥Êâ´ÊèèÔºåÂΩì cur Âíå p0 ÊåáÂêëÁöÑÊòØÂêå‰∏Ä‰∏™Á¥¢ÂºïÔºåÈÇ£‰∫§Êç¢Â∞±Á≠â‰∫éÊ≤°‰∫§Êç¢ÔºåÊïÖ‰πüÊòØÁõ¥Êé•ÂèØ‰ª•ÂêëÂè≥Êâ´ÊèèÔºåÂè≥ËæπÁöÑÂ∞±‰∏çË°å„ÄÇ ‰ª£Á†Å12345678910111213141516171819202122class Solution &#123; public void sortColors(int[] nums) &#123; int left = 0, cur = 0; int right = nums.length - 1; while (cur &lt;= right) &#123; if (nums[cur] == 0) &#123; swap(nums, left, cur); left++; cur++; &#125; else if (nums[cur] == 2) &#123; swap(nums, right, cur); right--; &#125; else cur++; &#125; &#125; public void swap(int[] nums, int a, int b) &#123; int temp = nums[a]; nums[a] = nums[b]; nums[b] = temp; &#125;&#125; 78. Â≠êÈõÜÈ¢òÁõÆÁªôÂÆö‰∏ÄÁªÑ‰∏çÂê´ÈáçÂ§çÂÖÉÁ¥†ÁöÑÊï¥Êï∞Êï∞ÁªÑ numsÔºåËøîÂõûËØ•Êï∞ÁªÑÊâÄÊúâÂèØËÉΩÁöÑÂ≠êÈõÜÔºàÂπÇÈõÜÔºâ„ÄÇ ËØ¥ÊòéÔºöËß£ÈõÜ‰∏çËÉΩÂåÖÂê´ÈáçÂ§çÁöÑÂ≠êÈõÜ„ÄÇ Á§∫‰æã: 123456789101112ËæìÂÖ•: nums = [1,2,3]ËæìÂá∫:[ [3], [1], [2], [1,2,3], [1,3], [2,3], [1,2], []] ÊÄùË∑ØÂæàÊòéÊòæÔºå‰∏ÄÁúãÂ∞±ÊòØÂõûÊ∫ØÔºåÊÄùË∑ØË∑ü ÂÖ®ÊéíÂàó„ÄÅN ÁöáÂêéÈóÆÈ¢ò‰∏ÄÊ†∑ ‰ª£Á†Å1234567891011121314151617181920class Solution &#123; List&lt;List&lt;Integer&gt;&gt; res = new ArrayList(); public List&lt;List&lt;Integer&gt;&gt; subsets(int[] nums)&#123; LinkedList track = new LinkedList(); return subsets_in(nums,0, track); &#125; public List&lt;List&lt;Integer&gt;&gt; subsets_in(int[] nums,int start,LinkedList track) &#123; // Ê≥®ÊÑèÔºåËøôÈáåÂøÖÈ°ªnew‰∏Ä‰∏™Êñ∞ÁöÑÂØπË±°ÔºåÂê¶ÂàôÁöÑËØùÊØèÊ¨°Ê∑ªÂä†ÈÉΩÊòØÊåáÂêëÂêå‰∏Ä‰∏™ÂØπË±° // ÊúÄÂêétrack‰ºöÂèòÁ©∫ÔºåÊâÄÊúâÁöÑÊ∑ªÂä†ÁöÑÂàóË°®ÈÉΩ‰ºöÂèòÁ©∫ res.add(new LinkedList(track)); for(int i = start;i &lt; nums.length;i++)&#123; track.add(nums[i]); subsets_in(nums,i+1,track); track.removeLast(); &#125; return res; &#125;&#125; 79. ÂçïËØçÊêúÁ¥¢È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™‰∫åÁª¥ÁΩëÊ†ºÂíå‰∏Ä‰∏™ÂçïËØçÔºåÊâæÂá∫ËØ•ÂçïËØçÊòØÂê¶Â≠òÂú®‰∫éÁΩëÊ†º‰∏≠„ÄÇ ÂçïËØçÂøÖÈ°ªÊåâÁÖßÂ≠óÊØçÈ°∫Â∫èÔºåÈÄöËøáÁõ∏ÈÇªÁöÑÂçïÂÖÉÊ†ºÂÜÖÁöÑÂ≠óÊØçÊûÑÊàêÔºåÂÖ∂‰∏≠‚ÄúÁõ∏ÈÇª‚ÄùÂçïÂÖÉÊ†ºÊòØÈÇ£‰∫õÊ∞¥Âπ≥Áõ∏ÈÇªÊàñÂûÇÁõ¥Áõ∏ÈÇªÁöÑÂçïÂÖÉÊ†º„ÄÇÂêå‰∏Ä‰∏™ÂçïÂÖÉÊ†ºÂÜÖÁöÑÂ≠óÊØç‰∏çÂÖÅËÆ∏Ë¢´ÈáçÂ§ç‰ΩøÁî®„ÄÇ Á§∫‰æã: 12345678910board =[ ['A','B','C','E'], ['S','F','C','S'], ['A','D','E','E']]ÁªôÂÆö word = "ABCCED", ËøîÂõû true.ÁªôÂÆö word = "SEE", ËøîÂõû true.ÁªôÂÆö word = "ABCB", ËøîÂõû false. ÊÄùË∑Ø‰æùÊóßÊòØ‚Ä¶ ÂõûÊ∫Ø ‰ª£Á†Å1234567891011121314151617181920212223242526272829303132class Solution &#123; public boolean exist(char[][] board, String word) &#123; boolean[][] visited = new boolean[board.length][board[0].length]; for (int i = 0; i &lt; board.length; i++) &#123; for (int j = 0; j &lt; board[0].length; j++) &#123; if (word.charAt(0) == board[i][j] &amp;&amp; backtrack(i, j, 0, word, visited, board)) return true; &#125; &#125; return false; &#125; private boolean backtrack(int i, int j, int index, String word, boolean[][] visited, char[][] board) &#123; // Ëß¶ÂèëÁªìÊùüÊù°‰ª∂ if (index == word.length()) return true; if (i &gt;= board.length || i &lt; 0 || j &gt;= board[0].length || j &lt; 0 || board[i][j] != word.charAt(index) || visited[i][j]) return false; // ÂÅöÈÄâÊã© visited[i][j] = true; // ËøõÂÖ•‰∏ã‰∏ÄÂ±ÇÂÜ≥Á≠ñ if (backtrack(i + 1, j, index + 1, word, visited, board) || backtrack(i - 1, j, index + 1, word, visited, board) || backtrack(i, j + 1, index + 1, word, visited, board) || backtrack(i, j - 1, index + 1, word, visited, board)) return true; // Êí§ÈîÄÈÄâÊã© visited[i][j] = false; // ÂõûÊ∫Ø return false; &#125;&#125; 84. Êü±Áä∂Âõæ‰∏≠ÊúÄÂ§ßÁöÑÁü©ÂΩ¢È¢òÁõÆÁªôÂÆö n ‰∏™ÈùûË¥üÊï¥Êï∞ÔºåÁî®Êù•Ë°®Á§∫Êü±Áä∂Âõæ‰∏≠ÂêÑ‰∏™Êü±Â≠êÁöÑÈ´òÂ∫¶„ÄÇÊØè‰∏™Êü±Â≠êÂΩºÊ≠§Áõ∏ÈÇªÔºå‰∏îÂÆΩÂ∫¶‰∏∫ 1 „ÄÇ Ê±ÇÂú®ËØ•Êü±Áä∂Âõæ‰∏≠ÔºåËÉΩÂ§üÂãæÂãíÂá∫Êù•ÁöÑÁü©ÂΩ¢ÁöÑÊúÄÂ§ßÈù¢ÁßØ„ÄÇ ‰ª•‰∏äÊòØÊü±Áä∂ÂõæÁöÑÁ§∫‰æãÔºåÂÖ∂‰∏≠ÊØè‰∏™Êü±Â≠êÁöÑÂÆΩÂ∫¶‰∏∫ 1ÔºåÁªôÂÆöÁöÑÈ´òÂ∫¶‰∏∫ [2,1,5,6,2,3]„ÄÇ ÊÄùË∑Ø Êö¥ÂäõÊ≥ïÔºåÊØè‰∏™È´òÂ∫¶ÈÉΩËÆ°ÁÆó‰∏ÄÈÅçÊúÄÈïøÁöÑËøûÁª≠ÁöÑÂ∫ïÔºåÁÑ∂ÂêéÂèñÊúÄÂ§ßÂÄº„ÄÇ ÂÖ∂ÂÆûËøôÈÅìÈ¢òÁöÑÊú¨Ë¥®Â∞±ÊòØËΩ¨Âåñ‰∏∫Ê±ÇÊØè‰∏™È´òÂ∫¶ÂØπÂ∫îÁöÑÊúÄÈïøÁöÑËøûÁª≠ÁöÑÂ∫ïÔºåÂç≥ÂØπ‰∏§ËæπÂàÜÂà´ÊâæÁ¨¨‰∏Ä‰∏™Â∞è‰∫éÈÅçÂéÜÁöÑÊï∞ÁöÑÈ´òÂ∫¶ÁöÑÁ¥¢ÂºïÂÄºÔºàÂç≥Ê±ÇÁü©ÂΩ¢ÁöÑÊúÄÈïøÁöÑÂ∫ïÔºâÔºåËøôÁÇπÂíåÊé•Èõ®Ê∞¥ ÊúâÁÇπÁõ∏‰ººÔºåÂêåÊó∂ÔºåÈááÁî®ÂçïË∞ÉÈÄíÂ¢ûÊ†àÁöÑÊñπÊ≥ï Ë∑ü Ê±ÇÊúÄÂ§ßÊúâÊïàÊã¨Âè∑ ËøôÈÅìÈ¢òÊúâÂºÇÊõ≤ÂêåÂ∑•‰πãÂ§ÑÔºåÈÉΩÊòØÈááÁî®‰∫ÜÊ†àÂ≠òÂèñÊï∞ÁªÑÁ¥¢ÂºïÂÄºÁöÑÊñπÊ≥ïÔºÅ ‰∏∫‰ΩïËØ¥ÂçïË∞ÉÈÄíÂ¢ûÊ†àÔºà‰∏•Ê†ºÈÄíÂ¢ûÔºâËÉΩÈùûÂ∏∏ËΩªÊùæÁöÑÊâæÂà∞ height[i] ÁöÑ ‰∏§ËæπÂàöÂ•ΩÊØîÂÆÉÁöÑÈ´òÂ∫¶Â∞èÁöÑÁ¨¨‰∏Ä‰∏™Êï∞ Âë¢Ôºü ËøôÈáåÊàë‰ª¨ÂÖàÂÅáËÆæÊâÄÊúâÁöÑÈ´òÂ∫¶ÈÉΩÊòØ‰∏ç‰ºöÁõ∏ÂêåÁöÑ„ÄÇ È¶ñÂÖàÁî±‰∫éÊ†àÊòØÈÄíÂ¢ûÁöÑÔºåÂΩì height[i] ÊØîÊ†àÈ°∂ÁöÑÁ¥¢ÂºïÂÄºÂØπÂ∫îÁöÑÈ´òÂ∫¶ Â§ßÊó∂ÔºåÁõ¥Êé•ÂéãÂÖ•Ê†àÂç≥ÂèØÔºåÂê¶ÂàôËØ¥Êòé height[i] ÊØîÊ†àÈ°∂ÁöÑÁ¥¢ÂºïÂÄºÂØπÂ∫îÁöÑÈ´òÂ∫¶Â∞èÔºåÂàôÊ†àÈ°∂ÂØπÂ∫îÁöÑÂè≥ËæπÁ¨¨‰∏Ä‰∏™Â∞è‰∫éÂÆÉÁöÑÈ´òÂ∫¶ÁöÑÊï∞ÊâæÂà∞‰∫ÜÔºåÂ∞±ÊòØ height[i]ÔºåÁÑ∂ÂêéÊääÊ†àÈ°∂ÂÖÉÁ¥†ÂºπÂá∫ÔºåÊñ∞Ê†àÈ°∂ÁöÑÂÖÉÁ¥†Âç≥ÊòØÂàöÊâçÂºπÊ†àÂÖÉÁ¥†Â∑¶ËæπÁ¨¨‰∏Ä‰∏™Â∞è‰∫éÂÆÉÁöÑÈ´òÂ∫¶ÁöÑÊï∞ÔºåËøôÊ†∑Â∞±ÂæàËΩªÊùæÁöÑÊâæÂà∞‰∫Ü‰∏§ËæπÂàÜÂà´Â∞è‰∫é Ê†àÈ°∂ÂÖÉÁ¥†ÁöÑÊï∞ÔºåËøôÊ†∑ÂèñÊõ¥Êñ∞ÊúÄÂ§ßÂÄºÂ∞±Ë°å‰∫Ü„ÄÇ ÊâÄ‰ª•ÔºåÊàë‰ª¨Áé∞Âú®Êù•ËÄÉËôë‰∏Ä‰∏ãÂèñÊ∂àÂºÄÂßãÈÇ£‰∏™ÂâçÊèêÊù°‰ª∂ÔºåÁé∞Âú®ÊúâÁöÑÈ´òÂ∫¶ÊòØ‰ºöÁõ∏ÂêåÁöÑÔºåËøô‰∏™Êù°‰ª∂Êàë‰ª¨ÊÄé‰πàÂ§ÑÁêÜÂë¢ÔºüÂΩìÈù¢‰∏¥Ê†àÈ°∂ÂÖÉÁ¥†ÂíåÈÅçÂéÜÁöÑÂÖÉÁ¥†ÂØπÂ∫îÁöÑÈ´òÂ∫¶Áõ∏ÂêåÊó∂ÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÊõ¥Êñ∞Ê†àÈ°∂ÂÖÉÁ¥†ÁöÑÂÄºÔºàÂç≥Â∞ÜÂÖ∂Â≠òÂÖ•ÁöÑÁ¥¢ÂºïÂèò‰∏∫Êñ∞ÁöÑÊàë‰ª¨Ê≠£Âú®ÈÅçÂéÜÁöÑÂÖÉÁ¥†ÁöÑÁ¥¢ÂºïÂÄºÔºâÔºåÊàë‰∏æ‰∏™‰æãÂ≠êÔºåÊØîÂ¶ÇËØ¥ 2 5 6 7 5 6 3ÔºåÂΩìÈÅçÂéÜÂà∞ÊúÄÂêé‰∏Ä‰∏™Êï∞ 5 Êó∂ÔºåÊ≠§Êó∂Ê†àÈ°∂ÂÄº‰∏∫ 1ÔºàÁ¥¢Âºï 1 ÂØπÂ∫îÁöÑÈ´òÂ∫¶ÊòØ 5 ÔºâÔºåÊàë‰ª¨Âè™Ë¶ÅÊääÊ†àÈ°∂ÂÄºÂèò‰∏∫ 4 Âç≥ÂèØ„ÄÇ ÂΩìÁÑ∂ËøôÊ†∑ËøòÊúâ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ∞±ÊòØÂÅáÂ¶ÇÊòØ 2 5 6 7ÔºåÈ´òÂ∫¶‰∏ÄÁõ¥ÈÄíÂ¢ûÔºåÂõõ‰∏™ÂÄºÂÖ®ÈÉ®ÂÖ•Ê†à‰∫ÜÔºåÊ≠§Êó∂ÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥† 7 ÁöÑ Âè≥ËæπÁ¨¨‰∏Ä‰∏™Â∞è‰∫éÂÆÉÁöÑÈ´òÂ∫¶ÂÖ∂ÂÆûÊ≤°ÊúâÔºåÊàë‰ª¨ÂèØ‰ª•‰ª§ÂÖ∂‰∏∫ height.length„ÄÇ ‰ª£Á†Å Êö¥ÂäõÊ≥ï 1234567891011121314151617181920212223242526272829class Solution &#123; public int largestRectangleArea(int[] heights) &#123; HashSet&lt;Integer&gt; heightsSet = new HashSet&lt;Integer&gt;(); //ÂæóÂà∞ÊâÄÊúâÁöÑÈ´òÂ∫¶Ôºå‰πüÂ∞±ÊòØÂéªÈáç„ÄÇ for (int i = 0; i &lt; heights.length; i++) &#123; heightsSet.add(heights[i]); &#125; int maxArea = 0; //ÈÅçÂéÜÊØè‰∏Ä‰∏™È´òÂ∫¶ for (int h : heightsSet) &#123; int width = 0; int maxWidth = 1; //ÊâæÂá∫ËøûÁª≠ÁöÑÂ§ß‰∫éÁ≠â‰∫éÂΩìÂâçÈ´òÂ∫¶ÁöÑÊü±ÂΩ¢‰∏™Êï∞ÁöÑÊúÄÂ§ßÂÄº for (int i = 0; i &lt; heights.length; i++) &#123; if (heights[i] &gt;= h) &#123; width++; //Âá∫Áé∞Â∞è‰∫éÂΩìÂâçÈ´òÂ∫¶ÁöÑÂ∞±ÂΩíÈõ∂ÔºåÂπ∂‰∏îÊõ¥Êñ∞ÊúÄÂ§ßÂÆΩÂ∫¶ &#125; else &#123; maxWidth = Math.max(width, maxWidth); width = 0; &#125; &#125; maxWidth = Math.max(width, maxWidth); //Êõ¥Êñ∞ÊúÄÂ§ßÂå∫ÂüüÁöÑÈù¢ÁßØ maxArea = Math.max(maxArea, h * maxWidth); &#125; return maxArea; &#125;&#125; ‰ΩúËÄÖÔºöwindliangÈìæÊé•Ôºöhttps://leetcode-cn.com/problems/largest-rectangle-in-histogram/solution/xiang-xi-tong-su-de-si-lu-fen-xi-duo-jie-fa-by-1-7/Êù•Ê∫êÔºöÂäõÊâ£ÔºàLeetCodeÔºâËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ ÂçïË∞ÉÈÄíÂ¢ûÊ†àÊ≥ï 123456789101112131415161718192021222324class Solution &#123; public int largestRectangleArea(int[] heights)&#123; Stack&lt;Integer&gt; stack = new Stack&lt;&gt;(); int max = 0; stack.push(-1); for(int i = 0; i &lt; heights.length; i++)&#123; // 1. Ê†à‰∏≠ÂÄº‰∏çÁ≠â‰∫é -1 ‰∏î Ê†àÈ°∂ÂÖÉÁ¥†ÂØπÂ∫îÁöÑÈ´òÂ∫¶ Â§ß‰∫é Ê≠£Âú®ÈÅçÂéÜÁöÑÂÖÉÁ¥†ÁöÑÈ´òÂ∫¶ while(stack.peek() != -1 &amp;&amp; heights[stack.peek()] &gt; heights[i])&#123; max = Math.max(max,heights[stack.pop()] * (i - stack.peek() - 1)); &#125; // 2. Ê†à‰∏≠ÂÄº‰∏çÁ≠â‰∫é -1 ‰∏î Ê†àÈ°∂ÂÖÉÁ¥†ÂØπÂ∫îÁöÑÈ´òÂ∫¶ == Ê≠£Âú®ÈÅçÂéÜÁöÑÂÖÉÁ¥†ÁöÑÈ´òÂ∫¶ // Áõ¥Êé•ÊääÂΩìÂâçÊ†àÈ°∂ÂºπÊ†àÂç≥ÂèØ if(stack.peek() != -1 &amp;&amp; heights[stack.peek()] == heights[i])&#123; stack.pop(); &#125; stack.push(i); &#125; // ÈÅçÂéÜÂÆå‰∫ÜÔºå‰ΩÜÊòØÊ≤°ËÆ°ÁÆóÂÆå while(stack.peek() != -1)&#123; max = Math.max(max,heights[stack.pop()] * (heights.length - stack.peek() - 1)); &#125; return max; &#125;&#125; 85. ÊúÄÂ§ßÁü©ÂΩ¢È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™‰ªÖÂåÖÂê´ 0 Âíå 1 ÁöÑ‰∫åÁª¥‰∫åËøõÂà∂Áü©ÈòµÔºåÊâæÂá∫Âè™ÂåÖÂê´ 1 ÁöÑÊúÄÂ§ßÁü©ÂΩ¢ÔºåÂπ∂ËøîÂõûÂÖ∂Èù¢ÁßØ„ÄÇ Á§∫‰æã: 12345678ËæìÂÖ•:[ ["1","0","1","0","0"], ["1","0","1","1","1"], ["1","1","1","1","1"], ["1","0","0","1","0"]]ËæìÂá∫: 6 ÊÄùË∑ØÊÄùË∑ØÂêå84È¢òÔºåÊØè‰∏ÄË°åÈÉΩË∞ÉÁî®84È¢òÁöÑÁÆóÊ≥ïÂç≥ÂèØ„ÄÇ ‰ª£Á†Å1234567891011121314151617181920212223242526272829303132333435363738class Solution &#123; public int maximalRectangle(char[][] matrix) &#123; if (matrix.length == 0) return 0; int maxarea = 0; int[] dp = new int[matrix[0].length]; for(int i = 0; i &lt; matrix.length; i++) &#123; for(int j = 0; j &lt; matrix[0].length; j++) &#123; // update the state of this row's histogram using the last row's histogram // by keeping track of the number of consecutive ones dp[j] = matrix[i][j] == '1' ? dp[j] + 1 : 0; &#125; // update maxarea with the maximum area from this row's histogram maxarea = Math.max(maxarea, largestRectangleArea(dp)); &#125; return maxarea; &#125; public int largestRectangleArea(int[] heights)&#123; Stack&lt;Integer&gt; stack = new Stack&lt;&gt;(); int max = 0; stack.push(-1); for(int i = 0; i &lt; heights.length; i++)&#123; while(stack.peek() != -1 &amp;&amp; heights[stack.peek()] &gt; heights[i])&#123; max = Math.max(max,heights[stack.pop()] * (i - stack.peek() - 1)); &#125; if(stack.peek() != -1 &amp;&amp; heights[stack.peek()] == heights[i])&#123; stack.pop(); &#125; stack.push(i); &#125; while(stack.peek() != -1)&#123; max = Math.max(max,heights[stack.pop()] * (heights.length - stack.peek() - 1)); &#125; return max; &#125;&#125; 121. ‰π∞ÂçñËÇ°Á•®ÁöÑÊúÄ‰Ω≥Êó∂Êú∫È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Êï∞ÁªÑÔºåÂÆÉÁöÑÁ¨¨ i ‰∏™ÂÖÉÁ¥†ÊòØ‰∏ÄÊîØÁªôÂÆöËÇ°Á•®Á¨¨ i Â§©ÁöÑ‰ª∑Ê†º„ÄÇ Â¶ÇÊûú‰Ω†ÊúÄÂ§öÂè™ÂÖÅËÆ∏ÂÆåÊàê‰∏ÄÁ¨î‰∫§ÊòìÔºàÂç≥‰π∞ÂÖ•ÂíåÂçñÂá∫‰∏ÄÊîØËÇ°Á•®ÔºâÔºåËÆæËÆ°‰∏Ä‰∏™ÁÆóÊ≥ïÊù•ËÆ°ÁÆó‰Ω†ÊâÄËÉΩËé∑ÂèñÁöÑÊúÄÂ§ßÂà©Ê∂¶„ÄÇ Ê≥®ÊÑè‰Ω†‰∏çËÉΩÂú®‰π∞ÂÖ•ËÇ°Á•®ÂâçÂçñÂá∫ËÇ°Á•®„ÄÇ Á§∫‰æã 1: 1234ËæìÂÖ•: [7,1,5,3,6,4]ËæìÂá∫: 5Ëß£Èáä: Âú®Á¨¨ 2 Â§©ÔºàËÇ°Á•®‰ª∑Ê†º = 1ÔºâÁöÑÊó∂ÂÄô‰π∞ÂÖ•ÔºåÂú®Á¨¨ 5 Â§©ÔºàËÇ°Á•®‰ª∑Ê†º = 6ÔºâÁöÑÊó∂ÂÄôÂçñÂá∫ÔºåÊúÄÂ§ßÂà©Ê∂¶ = 6-1 = 5 „ÄÇ Ê≥®ÊÑèÂà©Ê∂¶‰∏çËÉΩÊòØ 7-1 = 6, Âõ†‰∏∫ÂçñÂá∫‰ª∑Ê†ºÈúÄË¶ÅÂ§ß‰∫é‰π∞ÂÖ•‰ª∑Ê†º„ÄÇ Á§∫‰æã 2: 123ËæìÂÖ•: [7,6,4,3,1]ËæìÂá∫: 0Ëß£Èáä: Âú®ËøôÁßçÊÉÖÂÜµ‰∏ã, Ê≤°Êúâ‰∫§ÊòìÂÆåÊàê, ÊâÄ‰ª•ÊúÄÂ§ßÂà©Ê∂¶‰∏∫ 0„ÄÇ ÊÄùË∑ØÂÅáËÆæÂΩìÂâçÂú®Á¨¨ i Â§©Ôºå‰ª§ minPrice Ë°®Á§∫Ââç i-1 Â§©ÁöÑÊúÄ‰Ωé‰ª∑Ê†ºÔºõ‰ª§ maxProfit Ë°®Á§∫Ââç i-1 Â§©ÁöÑÊúÄÂ§ßÊî∂Áõä„ÄÇÈÇ£‰πàËÄÉËôëÁ¨¨ i Â§©ÁöÑÊî∂ÁõäÊó∂ÔºåÂ≠òÂú®‰∏§ÁßçÊÉÖÂÜµÔºö Âú®Á¨¨ i Â§©ÂçñÂá∫„ÄÇÂæàÊòæÁÑ∂ÔºåÊÉ≥Ë¶ÅËé∑ÂæóÊúÄÂ§ßÊî∂ÁõäÔºåÂ∫îËØ•Âú®Ââç i-1 Â§©‰∏≠‰ª∑Ê†ºÊúÄ‰ΩéÁöÑÊó∂ÂÄô‰π∞ÂÖ•ÔºåÂç≥Ê≠§Êó∂ÁöÑÊî∂Áõä‰∏∫Ôºöprices[i] - minPrice„ÄÇÔºàÂèØËÉΩ‰ºöÂá∫Áé∞Ë¥üÊï∞Ôºå‰ΩÜÊòØÊ≤°ÂÖ≥Á≥ªÔºâ ‰∏çÂú®Á¨¨ i Â§©ÂçñÂá∫„ÄÇÈÇ£‰πàÁ¨¨ i Â§©ÁöÑÊúÄÂ§ßÊî∂ÁõäÂ∞±Á≠â‰∫éÂâç i -1 Â§©‰∏≠ÁöÑÊúÄÂ§ßÊî∂Áõä Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã‰∏∫ÔºöÁ¨¨ i Â§©ÊúÄÂ§ßÊî∂Áõä = max( Âú®Á¨¨ i Â§©ÂçñÂá∫ÁöÑÊâÄÂæóÊî∂Áõä , Ââç i-1 Â§©ÁöÑÊúÄÂ§ßÊî∂Áõä) ‰ª£Á†Å1234567891011class Solution &#123; public int maxProfit(int[] prices) &#123; int minPrice = Integer.MAX_VALUE; int maxProfit = 0; for (int i = 0; i &lt; prices.length; i++) &#123; minPrice = Math.min(minPrice, prices[i]); maxProfit = Math.max(maxProfit, prices[i] - minPrice); &#125; return maxProfit; &#125;&#125; 128. ÊúÄÈïøËøûÁª≠Â∫èÂàóÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Êú™ÊéíÂ∫èÁöÑÊï¥Êï∞Êï∞ÁªÑÔºåÊâæÂá∫ÊúÄÈïøËøûÁª≠Â∫èÂàóÁöÑÈïøÂ∫¶„ÄÇ Ë¶ÅÊ±ÇÁÆóÊ≥ïÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(n)„ÄÇ Á§∫‰æã: 123ËæìÂÖ•: [100, 4, 200, 1, 3, 2]ËæìÂá∫: 4Ëß£Èáä: ÊúÄÈïøËøûÁª≠Â∫èÂàóÊòØ [1, 2, 3, 4]„ÄÇÂÆÉÁöÑÈïøÂ∫¶‰∏∫ 4„ÄÇ ÊÄùË∑Ø Êö¥ÂäõÊ≥ï„ÄÇ‰ªéÂ§¥Âà∞Â∞æÈÅçÂéÜÊØè‰∏™Êï∞ÔºåÁÑ∂ÂêéÂØπÊØè‰∏™Êï∞ÂéªÊâæÊï∞ÁªÑ‰∏≠ÊòØÂê¶Â≠òÂú®‰∏ã‰∏Ä‰∏™Êï∞ÔºåÂ¶ÇÊûúÂ≠òÂú®ÔºåÂ∞±ÊâæÊòØÂê¶Â≠òÂú®‰∏ã‰∏Ä‰∏™ÂÜç‰∏ã‰∏Ä‰∏™ÁöÑÊï∞Ôºå‰ª•Ê≠§Á±ªÊé®„ÄÇ ÊéíÂ∫è‰πãÂêéÂÜçËøõË°åÂà§Êñ≠ÔºåËøô‰∏™ÂæàÁÆÄÂçï‚Ä¶‰∏çËÆ≤‰∫Ü„ÄÇ Áî® Set Â≠òÂÇ®Êï∞ÁªÑÔºåËøôÊ†∑Êü•ËØ¢ÊòØÂê¶ÊúâËØ•Êï∞ÁöÑÊó∂ÂÄôÔºåÁõ¥Êé•Â∞±ÊòØ O(1) ÁöÑÂ§çÊùÇÂ∫¶ÔºåÂêåÊó∂‰∏çÈúÄË¶ÅÊï∞ÁªÑ‰ªéÂ§¥Âà∞Â∞æÈÅçÂéÜÔºåÂè™ÊúâÂú®ÔºàÈÅçÂéÜÁöÑÂÖÉÁ¥†ÂÄº - 1Ôºâ ‰∏çÂú® Set ‰∏≠ÔºåÊâçÂºÄÂßãÂà§Êñ≠ÂÖ∂‰∏ã‰∏Ä‰∏™ÊòØÂê¶Âú® Set ‰∏≠ÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÂáèÂ∞ëÈÅçÂéÜÁöÑÊ¨°Êï∞„ÄÇ ‰ª£Á†Å Êö¥Âäõ 12345678910111213141516171819202122232425262728class Solution &#123; private boolean arrayContains(int[] arr, int num) &#123; for (int i = 0; i &lt; arr.length; i++) &#123; if (arr[i] == num) &#123; return true; &#125; &#125; return false; &#125; public int longestConsecutive(int[] nums) &#123; int longestStreak = 0; for (int num : nums) &#123; int currentNum = num; int currentStreak = 1; while (arrayContains(nums, currentNum + 1)) &#123; currentNum += 1; currentStreak += 1; &#125; longestStreak = Math.max(longestStreak, currentStreak); &#125; return longestStreak; &#125;&#125; ÊéíÂ∫è 1234567891011121314151617181920212223242526class Solution &#123; public int longestConsecutive(int[] nums) &#123; if (nums.length == 0) &#123; return 0; &#125; Arrays.sort(nums); int longestStreak = 1; int currentStreak = 1; for (int i = 1; i &lt; nums.length; i++) &#123; if (nums[i] != nums[i-1]) &#123; if (nums[i] == nums[i-1]+1) &#123; currentStreak += 1; &#125; else &#123; longestStreak = Math.max(longestStreak, currentStreak); currentStreak = 1; &#125; &#125; &#125; return Math.max(longestStreak, currentStreak); &#125;&#125; Set 1234567891011121314151617181920212223242526class Solution &#123; public int longestConsecutive(int[] nums) &#123; Set&lt;Integer&gt; num_set = new HashSet&lt;Integer&gt;(); for (int num : nums) &#123; num_set.add(num); &#125; int longestStreak = 0; for (int num : num_set) &#123; if (!num_set.contains(num-1)) &#123; int currentNum = num; int currentStreak = 1; while (num_set.contains(currentNum+1)) &#123; currentNum += 1; currentStreak += 1; &#125; longestStreak = Math.max(longestStreak, currentStreak); &#125; &#125; return longestStreak; &#125;&#125; ÂÖ∑‰ΩìËßÅ ÂÆòÊñπÈ¢òËß£Ôºöhttps://leetcode-cn.com/problems/longest-consecutive-sequence/solution/zui-chang-lian-xu-xu-lie-by-leetcode/ 152. ‰πòÁßØÊúÄÂ§ßÂ≠êÂ∫èÂàóÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Êï¥Êï∞Êï∞ÁªÑ nums ÔºåÊâæÂá∫‰∏Ä‰∏™Â∫èÂàó‰∏≠‰πòÁßØÊúÄÂ§ßÁöÑËøûÁª≠Â≠êÂ∫èÂàóÔºàËØ•Â∫èÂàóËá≥Â∞ëÂåÖÂê´‰∏Ä‰∏™Êï∞Ôºâ„ÄÇ Á§∫‰æã 1: 123ËæìÂÖ•: [2,3,-2,4]ËæìÂá∫: 6Ëß£Èáä: Â≠êÊï∞ÁªÑ [2,3] ÊúâÊúÄÂ§ß‰πòÁßØ 6„ÄÇ Á§∫‰æã 2: 123ËæìÂÖ•: [-2,0,-1]ËæìÂá∫: 0Ëß£Èáä: ÁªìÊûú‰∏çËÉΩ‰∏∫ 2, Âõ†‰∏∫ [-2,-1] ‰∏çÊòØÂ≠êÊï∞ÁªÑ„ÄÇ ÊÄùË∑ØËøôÂÖ∂ÂÆûËØ¥ÁôΩ‰∫ÜÂ∞±ÊòØÂ≠ê‰∏≤ÁöÑÈ¢òÁõÆÔºåÊâÄ‰ª•ÂøÖÈ°ª‰ΩøÁî®Âä®ÊÄÅËßÑÂàíÂéªÂÅö„ÄÇÂÅö dp ÁöÑÈ¢òÁõÆÔºåÊàëËßâÂæóÈ¶ñÂÖàÊúÄÈáçË¶ÅÁöÑ‰∏çÊòØÁä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ãÔºåËÄåÊòØdpÊï∞ÁªÑÁöÑÂê´‰πâÊòØ‰ªÄ‰πàÔºåÂè™ÊúâËøô‰∏™Á°ÆÂÆöÂØπ‰∫ÜÔºåÁä∂ÊÄÅÊñπÁ®ãÊâçËÉΩÂæàÂ•ΩÁöÑÂàóÂá∫Êù•ÔºÅÔºÅÔºÅ ËøôÈáåÁöÑ dp Êï∞ÁªÑÊåáÁöÑÊòØ‰ª•Á¨¨ i ‰∏™Êï∞ ÁªìÂ∞æÁöÑ ËøûÁª≠Â≠êÂ∫èÂàóÔºåÁî±‰∫éÂ≠òÂú®Ë¥üÊï∞ÔºåÊâÄ‰ª•ÂøÖÈ°ªÁª¥Êä§‰∏§‰∏™ dp Êï∞ÁªÑÔºåÂÖ∂ÂÆûËøôÈáåÊ†πÊú¨Áî®‰∏çÂà∞Êï∞ÁªÑÔºå‰ΩÜÊòØ‰∏∫‰∫ÜÊõ¥Âä†Ê∏ÖÊô∞ÁöÑÁúãÂà∞ dp ÁöÑÊÄùÊÉ≥ÔºåÊàëËøòÊòØÁî®Êï∞ÁªÑÊù•Ë°®ËææÂêß„ÄÇ Êàë‰ª¨ÂÖàËÄÉËôëÈÉΩÊòØÊ≠£Êï∞ÁöÑÊÉÖÂÜµ„ÄÇdp_max[i] ÁöÑÂê´‰πâÊàë‰ª¨Â∑≤ÁªèËÆ≤Ëøá‰∫ÜÔºådp_max[i] = Math.max(nums[i-1],dp_max[i-1]*nums[i-1])ÔºåÂç≥ dp_max[i] Ëøô‰∏™ÂÄºÂè™‰ºöÂú®Ëøô‰∏§ËÄÖ‰∫ßÁîüÔºåË¶Å‰πà ‰πò‰∏ä‰πãÂâçÁöÑ‰ºöÊõ¥Â§ßÔºåË¶Å‰πà ËàçÂºÉÂâçÈù¢ÁöÑ„ÄÇ Êé•‰∏ãÊù•ËÄÉËôëË¥üÊï∞ÁöÑÊÉÖÂÜµÔºåÊâÄ‰ª•Êàë‰ª¨ÊúâÂøÖË¶ÅÁª¥Êä§‰∏Ä‰∏™ dp_minÔºåÊÄùË∑ØÊòØ‰∏ÄÊ®°‰∏ÄÊ†∑ÁöÑÔºåÂΩìÈÅçÂéÜÁöÑÂÖÉÁ¥†‰∏∫Ë¥üÊï∞Êó∂ÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÊää dp_max[i-1]Ôºådp_min[i-1]‰∫§Êç¢Âç≥ÂèØ„ÄÇ ÊúÄÂêéÔºåÂè™Ë¶ÅÊâæÂà∞ÊâÄÊúâdp_max‰∏≠ÁöÑÊï∞ÂÄºÊúÄÂ§ßÁöÑÈÇ£‰∏™ÔºåÂ∞±ÊòØÊàë‰ª¨ÈúÄË¶ÅÁöÑÂÄº‰∫Ü„ÄÇ ‰ª£Á†Å1234567891011121314151617181920212223242526class Solution &#123; public int maxProduct(int[] nums) &#123; int[] dp_max = new int[nums.length+1]; int[] dp_min = new int[nums.length+1]; if(nums.length == 0) return 0; int max = Integer.MIN_VALUE; // Áî±‰∫éÂ≠òÂú®Ë¥üÊï∞ÔºåÊâÄ‰ª•ÈúÄË¶ÅÁª¥Êä§‰∏§‰∏™Êï∞ÁªÑ // dp_max[i] ÊåáÁöÑÊòØ‰ª•Á¨¨ i ‰∏™Êï∞ÁªìÂ∞æÁöÑ ‰πòÁßØÊúÄÂ§ß ÁöÑËøûÁª≠Â≠êÂ∫èÂàó // dp_min[i] ÊåáÁöÑÊòØ‰ª•Á¨¨ i ‰∏™Êï∞ÁªìÂ∞æÁöÑ ‰πòÁßØÊúÄÂ∞è ÁöÑËøûÁª≠Â≠êÂ∫èÂàó dp_max[0] = 1; dp_min[0] = 1; for (int i = 1;i &lt;= nums.length;i++)&#123; // Â¶ÇÊûúÊï∞ÁªÑÁöÑÊï∞ÊòØË¥üÊï∞ÔºåÈÇ£‰πà‰ºöÂØºËá¥ max ÂèòÊàê minÔºåmin ÂèòÊàê max // ÊïÖÈúÄË¶Å‰∫§Êç¢dp if(nums[i-1] &lt; 0)&#123; int temp = dp_min[i-1]; dp_min[i-1] = dp_max[i-1]; dp_max[i-1] = temp; &#125; dp_min[i] = Math.min(nums[i-1],dp_min[i-1]*nums[i-1]); dp_max[i] = Math.max(nums[i-1],dp_max[i-1]*nums[i-1]); max = Math.max(max,dp_max[i]); &#125; return max; &#125;&#125; 155. ÊúÄÂ∞èÊ†àÈ¢òÁõÆËÆæËÆ°‰∏Ä‰∏™ÊîØÊåÅ pushÔºåpopÔºåtop Êìç‰ΩúÔºåÂπ∂ËÉΩÂú®Â∏∏Êï∞Êó∂Èó¥ÂÜÖÊ£ÄÁ¥¢Âà∞ÊúÄÂ∞èÂÖÉÁ¥†ÁöÑÊ†à„ÄÇ push(x) ‚Äì Â∞ÜÂÖÉÁ¥† x Êé®ÂÖ•Ê†à‰∏≠„ÄÇ pop() ‚Äì Âà†Èô§Ê†àÈ°∂ÁöÑÂÖÉÁ¥†„ÄÇ top() ‚Äì Ëé∑ÂèñÊ†àÈ°∂ÂÖÉÁ¥†„ÄÇ getMin() ‚Äì Ê£ÄÁ¥¢Ê†à‰∏≠ÁöÑÊúÄÂ∞èÂÖÉÁ¥†„ÄÇ Á§∫‰æã: 12345678MinStack minStack = new MinStack();minStack.push(-2);minStack.push(0);minStack.push(-3);minStack.getMin(); --&gt; ËøîÂõû -3.minStack.pop();minStack.top(); --&gt; ËøîÂõû 0.minStack.getMin(); --&gt; ËøîÂõû -2. ÊÄùË∑Øhttps://leetcode-cn.com/problems/min-stack/solution/xiang-xi-tong-su-de-si-lu-fen-xi-duo-jie-fa-by-38/ Áî®‰∏§‰∏™Ê†àÔºå‰∏Ä‰∏™Ê†à‰∏ìÈó®Â≠òÊúÄÂ∞èÂÄºÔºå‰∏ªË¶ÅÂ∞±ÊòØÂÖ•Ê†àÂíåÂá∫Ê†àÂÅöÂà∞ÂêåÊ≠•Â∞±Ë°å„ÄÇÂ≠òÊúÄÂ∞èÂÄºÁöÑÊ†àÁöÑÂÖ∑‰ΩìÊìç‰ΩúÊµÅÁ®ãÂ¶Ç‰∏ãÔºö Â∞ÜÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÂÖ•Ê†à„ÄÇ Êñ∞Âä†ÂÖ•ÁöÑÂÖÉÁ¥†Â¶ÇÊûúÂ§ß‰∫éÊ†àÈ°∂ÂÖÉÁ¥†ÔºåÈÇ£‰πàÊñ∞Âä†ÂÖ•ÁöÑÂÖÉÁ¥†Â∞±‰∏çÂ§ÑÁêÜ„ÄÇ Êñ∞Âä†ÂÖ•ÁöÑÂÖÉÁ¥†Â¶ÇÊûúÂ∞è‰∫éÁ≠â‰∫éÊ†àÈ°∂ÂÖÉÁ¥†ÔºåÈÇ£‰πàÂ∞±Â∞ÜÊñ∞ÂÖÉÁ¥†ÂÖ•Ê†à„ÄÇ Âá∫Ê†àÂÖÉÁ¥†‰∏çÁ≠â‰∫éÊ†àÈ°∂ÂÖÉÁ¥†Ôºå‰∏çÊìç‰Ωú„ÄÇ Âá∫Ê†àÂÖÉÁ¥†Á≠â‰∫éÊ†àÈ°∂ÂÖÉÁ¥†ÔºåÈÇ£‰πàÂ∞±Â∞ÜÊ†àÈ°∂ÂÖÉÁ¥†Âá∫Ê†à„ÄÇ Áî®‰∏Ä‰∏™Ê†àÔºåÂΩìÊúâÊõ¥Â∞èÁöÑÂÄºÊù•ÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÊää‰πãÂâçÁöÑÊúÄÂ∞èÂÄºÂÖ•Ê†àÔºåÂΩìÂâçÊõ¥Â∞èÁöÑÂÄºÂÜçÂÖ•Ê†àÂç≥ÂèØ„ÄÇÂΩìËøô‰∏™ÊúÄÂ∞èÂÄºË¶ÅÂá∫Ê†àÁöÑÊó∂ÂÄôÔºå‰∏ã‰∏Ä‰∏™ÂÄº‰æøÊòØ‰πãÂâçÁöÑÊúÄÂ∞èÂÄº‰∫Ü„ÄÇ Ê†à‰∏≠Â≠òÂÇ®ÈìæË°®ÔºåÂÖ∂‰∏≠ËÆæÂÆö‰∏Ä‰∏™ËäÇÁÇπÂåÖÊã¨ÂÖ∂ valÔºåÂíåÂΩìÂâçÊúÄÂ∞èÂÄº„ÄÇ ‰ª£Á†Å ‰∏§‰∏™Ê†à 123456789101112131415161718192021222324252627282930313233343536373839404142class MinStack &#123; /** initialize your data structure here. */ private Stack&lt;Integer&gt; stack; private Stack&lt;Integer&gt; minStack; public MinStack() &#123; stack = new Stack&lt;&gt;(); minStack = new Stack&lt;&gt;(); &#125; public void push(int x) &#123; stack.push(x); if (!minStack.isEmpty()) &#123; int top = minStack.peek(); //Â∞è‰∫éÁöÑÊó∂ÂÄôÊâçÂÖ•Ê†à if (x &lt;= top) &#123; minStack.push(x); &#125; &#125;else&#123; minStack.push(x); &#125; &#125; public void pop() &#123; int pop = stack.pop(); int top = minStack.peek(); //Á≠â‰∫éÁöÑÊó∂ÂÄôÂÜçÂá∫Ê†à if (pop == top) &#123; minStack.pop(); &#125; &#125; public int top() &#123; return stack.peek(); &#125; public int getMin() &#123; return minStack.peek(); &#125;&#125; Âçï‰∏™Ê†à 1234567891011121314151617181920212223242526272829class MinStack &#123; int min = Integer.MAX_VALUE; Stack&lt;Integer&gt; stack = new Stack&lt;Integer&gt;(); public void push(int x) &#123; //ÂΩìÂâçÂÄºÊõ¥Â∞è if(x &lt;= min)&#123; //Â∞Ü‰πãÂâçÁöÑÊúÄÂ∞èÂÄº‰øùÂ≠ò stack.push(min); //Êõ¥Êñ∞ÊúÄÂ∞èÂÄº min=x; &#125; stack.push(x); &#125; public void pop() &#123; //Â¶ÇÊûúÂºπÂá∫ÁöÑÂÄºÊòØÊúÄÂ∞èÂÄºÔºåÈÇ£‰πàÂ∞Ü‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†Êõ¥Êñ∞‰∏∫ÊúÄÂ∞èÂÄº if(stack.pop() == min) &#123; min=stack.pop(); &#125; &#125; public int top() &#123; return stack.peek(); &#125; public int getMin() &#123; return min; &#125;&#125; Â≠òÂÇ®ÈìæË°® 123456789101112131415161718192021222324252627282930313233343536373839404142class MinStack &#123; class Node&#123; int value; int min; Node next; Node(int x, int min)&#123; this.value=x; this.min=min; next = null; &#125; &#125; Node head; //ÊØèÊ¨°Âä†ÂÖ•ÁöÑËäÇÁÇπÊîæÂà∞Â§¥ÈÉ® public void push(int x) &#123; if(null==head)&#123; head = new Node(x,x); &#125;else&#123; //ÂΩìÂâçÂÄºÂíå‰πãÂâçÂ§¥ÁªìÁÇπÁöÑÊúÄÂ∞èÂÄºËæÉÂ∞èÁöÑÂÅö‰∏∫ÂΩìÂâçÁöÑ min Node n = new Node(x, Math.min(x,head.min)); n.next=head; head=n; &#125; &#125; public void pop() &#123; if(head!=null) head =head.next; &#125; public int top() &#123; if(head!=null) return head.value; return -1; &#125; public int getMin() &#123; if(null!=head) return head.min; return -1; &#125;&#125; 5330. ÂàÜË£Ç‰∫åÂèâÊ†ëÁöÑÊúÄÂ§ß‰πòÁßØÈ¢òÁõÆÁªô‰Ω†‰∏ÄÊ£µ‰∫åÂèâÊ†ëÔºåÂÆÉÁöÑÊ†π‰∏∫ root „ÄÇËØ∑‰Ω†Âà†Èô§ 1 Êù°ËæπÔºå‰Ωø‰∫åÂèâÊ†ëÂàÜË£ÇÊàê‰∏§Ê£µÂ≠êÊ†ëÔºå‰∏îÂÆÉ‰ª¨Â≠êÊ†ëÂíåÁöÑ‰πòÁßØÂ∞ΩÂèØËÉΩÂ§ß„ÄÇ Áî±‰∫éÁ≠îÊ°àÂèØËÉΩ‰ºöÂæàÂ§ßÔºåËØ∑‰Ω†Â∞ÜÁªìÊûúÂØπ 10^9 + 7 ÂèñÊ®°ÂêéÂÜçËøîÂõû„ÄÇ Á§∫‰æã 1Ôºö 123ËæìÂÖ•Ôºöroot = [1,2,3,4,5,6]ËæìÂá∫Ôºö110Ëß£ÈáäÔºöÂà†Èô§Á∫¢Ëâ≤ÁöÑËæπÔºåÂæóÂà∞ 2 Ê£µÂ≠êÊ†ëÔºåÂíåÂàÜÂà´‰∏∫ 11 Âíå 10 „ÄÇÂÆÉ‰ª¨ÁöÑ‰πòÁßØÊòØ 110 Ôºà11*10 Á§∫‰æã 2Ôºö 123ËæìÂÖ•Ôºöroot = [1,null,2,3,4,null,null,5,6]ËæìÂá∫Ôºö90Ëß£ÈáäÔºöÁßªÈô§Á∫¢Ëâ≤ÁöÑËæπÔºåÂæóÂà∞ 2 Ê£µÂ≠êÊ†ëÔºåÂíåÂàÜÂà´ÊòØ 15 Âíå 6 „ÄÇÂÆÉ‰ª¨ÁöÑ‰πòÁßØ‰∏∫ 90 Ôºà15*6Ôºâ ‰ª£Á†Å123456789101112131415161718192021222324252627282930313233/** * Definition for a binary tree node. * public class TreeNode &#123; * int val; * TreeNode left; * TreeNode right; * TreeNode(int x) &#123; val = x; &#125; * &#125; */class Solution &#123; private static final long MOD = (long) (1e9 + 7); public int maxProduct(TreeNode root) &#123; Set&lt;Long&gt; ss = new HashSet&lt;&gt;(); long sum = dfs(root, ss); long ans = 0; for (Long s : ss) &#123; ans = Math.max(ans, s * (sum - s)); &#125; return (int) (ans % MOD); &#125; private long dfs(TreeNode root, Set&lt;Long&gt; ss) &#123; if (root == null) &#123; return 0; &#125; long l = dfs(root.left, ss); long r = dfs(root.right, ss); ss.add(l); ss.add(r); return l + r + root.val; &#125;&#125; 206. ÂèçËΩ¨ÈìæË°®È¢òÁõÆÂèçËΩ¨‰∏Ä‰∏™ÂçïÈìæË°®„ÄÇ Á§∫‰æã: 12ËæìÂÖ•: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULLËæìÂá∫: 5-&gt;4-&gt;3-&gt;2-&gt;1-&gt;NULL ÊÄùË∑ØËø≠‰ª£ËÆæÁΩÆ‰∏â‰∏™ËäÇÁÇπpre„ÄÅcur„ÄÅnext Ôºà1ÔºâÊØèÊ¨°Êü•ÁúãcurËäÇÁÇπÊòØÂê¶‰∏∫NULLÔºåÂ¶ÇÊûúÊòØÔºåÂàôÁªìÊùüÂæ™ÁéØÔºåËé∑ÂæóÁªìÊûú Ôºà2ÔºâÂ¶ÇÊûúcurËäÇÁÇπ‰∏çÊòØ‰∏∫NULLÔºåÂàôÂÖàËÆæÁΩÆ‰∏¥Êó∂ÂèòÈáènext‰∏∫curÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπ Ôºà3ÔºâËÆ©curÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπÂèòÊàêÊåáÂêëpreÔºåËÄåÂêépreÁßªÂä®curÔºåcurÁßªÂä®Âà∞next Ôºà4ÔºâÈáçÂ§çÔºà1ÔºâÔºà2ÔºâÔºà3Ôºâ ÈÄíÂΩíÊãøÂà∞Êâã‰πãÂêéÔºåÊòØÁõ¥Êé•‰ΩøÁî®ÁöÑÈÄíÂΩíÁöÑÂÅöÊ≥ïÔºåÁúãËØÑËÆ∫Âå∫Â§ßÂÆ∂Â•ΩÂÉèÂØπÈÄíÂΩíÁöÑËøáÁ®ãÈÉΩËßâÂæóÂæàÁªïÔºåÂÖ∂ÂÆûÊàë‰∏™‰∫∫ËßâÂæóÂ§ßÂÆ∂ÊääËøô‰∏™ÊÉ≥Â§çÊùÇ‰∫ÜÔºå‰∏ãÈù¢ÊàëÊù•ËØïÁùÄÂ∏ÆÂ§ßÂÆ∂‰∏ÄËµ∑ÁêÜËß£‰∏Ä‰∏ãÔºÅÈÄíÂΩíÔºåÂ∞±ÊòØ‰∏âÈÉ®Êõ≤Ôºö 1„ÄÅÊâæÂà∞ÈÄíÂΩíÂá∫Âè£ 2„ÄÅÁ°ÆÂÆöËøîÂõûÂÄº 3„ÄÅÂàÜÊûêÂçïÊ¨°ÈÄíÂΩíÈúÄË¶ÅÂÅöÁöÑ‰∫ãÊÉÖ ‰∏ãÈù¢ÔºåÊàë‰ª¨Êù•ÂÖ∑‰ΩìÂàÜÊûê‰∏Ä‰∏ãÔºö È¶ñÂÖàÔºåÊâæÂà∞ÈÄíÂΩíÂá∫Âè£ÔºåËøô‰∏™ËøòÊòØÈùûÂ∏∏ÁÆÄÂçïÁöÑÔºåÂ∞±ÊòØÂΩìÂâçÂç≥Â∞ÜÂèçËΩ¨ÁöÑËäÇÁÇπ‰∏∫ null ÊàñËÄÖÊòØ ÂèçËΩ¨ÈìæË°® ‰∏∫ null Êó∂Ôºà‰∏ÄËΩÆÈÄíÂΩíÂÖ∂ÂÆûÂ∞±Âè™Êúâ‰∏§‰∏™ËäÇÁÇπÔºåÂêéÈù¢‰ºöËÆ≤ÔºâÔºåËØ¥ÊòéÂ∑≤ÁªèÂÖ®ÈÉ®ÂèçËΩ¨ÂÆåÊØï‰∫ÜÔºåÂç≥ÈÄíÂΩíÂá∫Âè£Ôºõ ÂÖ∂Ê¨°ÔºåÁ°ÆÂÆöËøîÂõûÂÄºÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅËøîÂõûÂèçËΩ¨ÈìæË°®ÁöÑÂ§¥ÁªìÁÇπÂç≥ÂèØÔºõ ÊúÄÂêéÔºåÂàÜÊûêÂçïÊ¨°ÈÄíÂΩíÈúÄË¶ÅÂÅöÁöÑ‰∫ãÊÉÖÔºåÊàëËßâÂæóÂ§ßÂÆ∂ËßâÂæóÈÄíÂΩíÊØîËæÉÈöæÁêÜËß£ÁöÑÂú∞ÊñπÂ∞±ÊòØÂú®ËøôÔºåÂÖ∂ÂÆûÊòØÂ§ßÂÆ∂ÊääÈÄíÂΩíÂ§çÊùÇÂåñ‰∫ÜÔºåÈÄíÂΩíÂÖ∂ÂÆûÊØè‰∏ÄËΩÆÂÅöÁöÑ‰∫ãÊÉÖÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÔºåÊàë‰ª¨‰∏çÈúÄË¶ÅÂéªÈáçÂ§çËÄÉËôëÔºåËøôÊ†∑ÂèçËÄå‰ºöÂæà‰π±ÔºåÂè™ÈúÄË¶ÅËÄÉËôëÂçïËΩÆÈÄíÂΩíÈúÄË¶ÅÂÅö‰ªÄ‰πàÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇÂú®ËøôÈáåÔºåÊàë‰ª¨Â∞±Âè™Êúâ‰∏§‰∏™ËäÇÁÇπÔºå‰∏Ä‰∏™ÊòØÂç≥Â∞ÜÂèçËΩ¨ÁöÑËäÇÁÇπÂÖÉÁ¥†Ôºå‰∏Ä‰∏™ÊòØÂ∑≤ÁªèÂèçËΩ¨ÂÆåÊØïÁöÑÈìæË°®Â§¥ÁªìÁÇπ„ÄÇ Êàë‰ª¨Ë¶ÅÂÅöÁöÑ‰∏ÄËΩÆÈÄíÂΩíÂè™ÊòØ Â∞ÜÂΩìÂâçËäÇÁÇπÂä†ÂÖ•Âà∞ÂèçËΩ¨ÈìæË°®‰∏≠Ôºå‰ªÖÊ≠§ËÄåÂ∑≤„ÄÇ ‰ª£Á†Å Ëø≠‰ª£ 123456789101112131415161718192021/** * Definition for singly-linked list. * public class ListNode &#123; * int val; * ListNode next; * ListNode(int x) &#123; val = x; &#125; * &#125; */class Solution &#123; public ListNode reverseList(ListNode head) &#123; ListNode prev = null; ListNode curr = head; while (curr != null) &#123; ListNode nextTemp = curr.next; curr.next = prev; prev = curr; curr = nextTemp; &#125; return prev; &#125;&#125; ÈÄíÂΩí 123456789101112131415161718192021222324/** * Definition for singly-linked list. * public class ListNode &#123; * int val; * ListNode next; * ListNode(int x) &#123; val = x; &#125; * &#125; */class Solution &#123; public ListNode reverseList(ListNode head) &#123; // Â¶ÇÊûúÂΩìÂâçË¶ÅÂèçËΩ¨ÁöÑËäÇÁÇπ‰∏∫ null ÊàñËÄÖÂèçËΩ¨ÈìæË°®‰∏∫ null // head.next ‰∏∫ nullÔºåÂç≥ÂèçËΩ¨ÈìæË°®ÁöÑÂ∞æÁªìÁÇπ‰∏çÂ≠òÂú®ÔºåÂç≥ÂèçËΩ¨ÈìæË°®‰∏çÂ≠òÂú® if (head == null || head.next == null) return head; // ËäÇÁÇπ p ÂÖ∂ÂÆûÂ∞±ÊòØÂèçËΩ¨ÈìæË°®ÁöÑÂ§¥ËäÇÁÇπ ListNode p = reverseList(head.next); // Êàë‰ª¨Â∞ÜÂèçËΩ¨ÈìæË°®ÁöÑÂ∞æÁªìÁÇπÔºàhead.nextÔºâÁöÑ lianext ÊåáÂêëÂΩìÂâçÂç≥Â∞ÜÂèçËΩ¨ÁöÑËäÇÁÇπ head.next.next = head; // ÁÑ∂ÂêéËÆ©ÂΩìÂâçËäÇÁÇπÂèòÊàêÂèçËΩ¨ÈìæË°®ÁöÑÂ∞æÁªìÁÇπ head.next = null; // ËøîÂõûÂèçËΩ¨ÈìæË°®ÁöÑÂ§¥ÁªìÁÇπ return p; &#125;&#125; 160. Áõ∏‰∫§ÈìæË°®È¢òÁõÆÁºñÂÜô‰∏Ä‰∏™Á®ãÂ∫èÔºåÊâæÂà∞‰∏§‰∏™ÂçïÈìæË°®Áõ∏‰∫§ÁöÑËµ∑ÂßãËäÇÁÇπ„ÄÇ „ÄêÊ≥®ÊÑèÔºöËøôÈáåÁõ∏‰∫§ËäÇÁÇπÂπ∂‰∏çÊòØÁúãÈìæË°®ÁöÑÂÄºÁõ∏Á≠âÂ∞±‰ª£Ë°®Áõ∏‰∫§ÔºåÂæóÊòØ‰∏§‰∏™ËäÇÁÇπÁõ¥Êé•Áõ∏Á≠âÊâç‰ª£Ë°®Áõ∏‰∫§ÔºåÊåáÂêëÂêå‰∏ÄÂùóÂÜÖÂ≠ò„ÄÇ„Äë Â¶Ç‰∏ãÈù¢ÁöÑ‰∏§‰∏™ÈìæË°®Ôºö Âú®ËäÇÁÇπ c1 ÂºÄÂßãÁõ∏‰∫§„ÄÇ Á§∫‰æã 1Ôºö 123ËæìÂÖ•ÔºöintersectVal = 8, listA = [4,1,8,4,5], listB = [5,0,1,8,4,5], skipA = 2, skipB = 3ËæìÂá∫ÔºöReference of the node with value = 8ËæìÂÖ•Ëß£ÈáäÔºöÁõ∏‰∫§ËäÇÁÇπÁöÑÂÄº‰∏∫ 8 ÔºàÊ≥®ÊÑèÔºåÂ¶ÇÊûú‰∏§‰∏™ÂàóË°®Áõ∏‰∫§Âàô‰∏çËÉΩ‰∏∫ 0Ôºâ„ÄÇ‰ªéÂêÑËá™ÁöÑË°®Â§¥ÂºÄÂßãÁÆóËµ∑ÔºåÈìæË°® A ‰∏∫ [4,1,8,4,5]ÔºåÈìæË°® B ‰∏∫ [5,0,1,8,4,5]„ÄÇÂú® A ‰∏≠ÔºåÁõ∏‰∫§ËäÇÁÇπÂâçÊúâ 2 ‰∏™ËäÇÁÇπÔºõÂú® B ‰∏≠ÔºåÁõ∏‰∫§ËäÇÁÇπÂâçÊúâ 3 ‰∏™ËäÇÁÇπ„ÄÇ Á§∫‰æã 2Ôºö 123ËæìÂÖ•ÔºöintersectVal = 2, listA = [0,9,1,2,4], listB = [3,2,4], skipA = 3, skipB = 1ËæìÂá∫ÔºöReference of the node with value = 2ËæìÂÖ•Ëß£ÈáäÔºöÁõ∏‰∫§ËäÇÁÇπÁöÑÂÄº‰∏∫ 2 ÔºàÊ≥®ÊÑèÔºåÂ¶ÇÊûú‰∏§‰∏™ÂàóË°®Áõ∏‰∫§Âàô‰∏çËÉΩ‰∏∫ 0Ôºâ„ÄÇ‰ªéÂêÑËá™ÁöÑË°®Â§¥ÂºÄÂßãÁÆóËµ∑ÔºåÈìæË°® A ‰∏∫ [0,9,1,2,4]ÔºåÈìæË°® B ‰∏∫ [3,2,4]„ÄÇÂú® A ‰∏≠ÔºåÁõ∏‰∫§ËäÇÁÇπÂâçÊúâ 3 ‰∏™ËäÇÁÇπÔºõÂú® B ‰∏≠ÔºåÁõ∏‰∫§ËäÇÁÇπÂâçÊúâ 1 ‰∏™ËäÇÁÇπ„ÄÇ Á§∫‰æã 3Ôºö 1234ËæìÂÖ•ÔºöintersectVal = 0, listA = [2,6,4], listB = [1,5], skipA = 3, skipB = 2ËæìÂá∫ÔºönullËæìÂÖ•Ëß£ÈáäÔºö‰ªéÂêÑËá™ÁöÑË°®Â§¥ÂºÄÂßãÁÆóËµ∑ÔºåÈìæË°® A ‰∏∫ [2,6,4]ÔºåÈìæË°® B ‰∏∫ [1,5]„ÄÇÁî±‰∫éËøô‰∏§‰∏™ÈìæË°®‰∏çÁõ∏‰∫§ÔºåÊâÄ‰ª• intersectVal ÂøÖÈ°ª‰∏∫ 0ÔºåËÄå skipA Âíå skipB ÂèØ‰ª•ÊòØ‰ªªÊÑèÂÄº„ÄÇËß£ÈáäÔºöËøô‰∏§‰∏™ÈìæË°®‰∏çÁõ∏‰∫§ÔºåÂõ†Ê≠§ËøîÂõû null„ÄÇ Ê≥®ÊÑèÔºö Â¶ÇÊûú‰∏§‰∏™ÈìæË°®Ê≤°Êúâ‰∫§ÁÇπÔºåËøîÂõû null„ÄÇ Âú®ËøîÂõûÁªìÊûúÂêéÔºå‰∏§‰∏™ÈìæË°®‰ªçÈ°ª‰øùÊåÅÂéüÊúâÁöÑÁªìÊûÑ„ÄÇ ÂèØÂÅáÂÆöÊï¥‰∏™ÈìæË°®ÁªìÊûÑ‰∏≠Ê≤°ÊúâÂæ™ÁéØ„ÄÇ Á®ãÂ∫èÂ∞ΩÈáèÊª°Ë∂≥ O(n) Êó∂Èó¥Â§çÊùÇÂ∫¶Ôºå‰∏î‰ªÖÁî® O(1) ÂÜÖÂ≠ò„ÄÇ ÊÄùË∑Ø ÊúÄÂºÄÂßãÁöÑÊÄùË∑ØÂ∞±ÊòØÔºåÊâæÂà∞ ÈïøÈìæË°®ÂíåÁü≠ÈìæË°®ÁöÑÈïøÂ∫¶Â∑Æ c ÔºåËøôÊ†∑Á¨¨‰∫åÊ¨°ÈÅçÂéÜÁöÑÊó∂ÂÄôÔºåÈïøÈìæË°®‰ªéÁ¨¨ c+1 ‰∏™ËäÇÁÇπÂá∫ÂèëÔºåÁü≠ÈìæË°®‰ªéÁ¨¨‰∏Ä‰∏™ËäÇÁÇπÂá∫ÂèëÔºåËøôÊ†∑ÊúÄÂêé‰∫åËÄÖÂøÖÊòØÂêåÊó∂Âà∞ËææÁªàÁÇπÁöÑÔºåËÄå‰∫åËÄÖÂ¶ÇÊûúÊúâÁõ∏‰∫§ÔºåÂàôÂú®ÈÅçÂéÜÁöÑÊó∂ÂÄôËäÇÁÇπÂøÖÁõ∏Á≠âÔºåÁ¨¨‰∏Ä‰∏™Áõ∏Á≠âÁöÑËäÇÁÇπÂ∞±ÊòØÁõ∏‰∫§ÁöÑËµ∑ÂßãËäÇÁÇπ„ÄÇ ËøòÊúâ‰∏Ä‰∏™ÊÄùË∑ØÂèØ‰ª•ÊâæÂà∞Áõ∏‰∫§ÁöÑËµ∑ÂßãËäÇÁÇπÔºåÊàë‰ª¨Êó†ÈúÄÂéªËÆ°ÁÆóÈïøÈìæË°®ÂíåÁü≠ÈìæË°®ÁöÑÈïøÂ∫¶Â∑Æ cÔºåÂè™ÈúÄË¶ÅËÆ©‰∏§‰∏™ÊåáÈíà p1„ÄÅp2 ÂêåÊó∂‰ªéÈìæË°®Â§¥ÁªìÁÇπÂ§ÑÂá∫ÂèëÔºåÂÅáËÆæ ÈïøÈìæË°®ÈïøÂ∫¶‰∏∫ aÔºåÁü≠ÈìæË°®ÁöÑÈïøÂ∫¶‰∏∫ bÔºåÂΩìÁü≠ÈìæË°®ÊåáÈíàp2ÈÅçÂéÜÂà∞ nullÔºåÂç≥ÈÅçÂéÜÂÆå‰∫ÜÁü≠ÈìæË°®ÔºåÂ∞ÜÂÖ∂ÁßªÂà∞ÈïøÈìæË°®Â§¥ÁªìÁÇπÁªßÁª≠ÈÅçÂéÜÔºåÂêåÊó∂p1‰πüÁªßÁª≠ÂêëÂâçÈÅçÂéÜÔºåÂΩìp1ÈÅçÂéÜÂà∞ null Êó∂ÔºåÂ∞ÜÂÖ∂ÁßªÂà∞Áü≠ÈìæË°®Â§¥ËäÇÁÇπÁªßÁª≠ÈÅçÂéÜÔºåËøôÊ†∑ Â¶ÇÊûúÈïøÈìæË°®ÂíåÁü≠ÈìæË°®Áõ∏‰∫§ÔºåÂàô p1 Âíå p2 ÂøÖ‰ºöÂú®Áõ∏‰∫§Ëµ∑ÂßãÂ§ÑÁõ∏ÈÅáÔºåÂ¶ÇÊûú‰∏§‰∏™ÈìæË°®‰∏çÁõ∏‰∫§Ôºåp1 Âíå p2 ‰ºöÂú® null Â§ÑÁõ∏ÈÅá„ÄÇ ‰ª£Á†Å Code I 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859/** * Definition for singly-linked list. * public class ListNode &#123; * int val; * ListNode next; * ListNode(int x) &#123; * val = x; * next = null; * &#125; * &#125; */public class Solution &#123; public ListNode getIntersectionNode(ListNode headA, ListNode headB) &#123; if (headA == null || headB == null) return null; ListNode p1 = headA; ListNode p2 = headB; while(p1 != null &amp;&amp; p2 != null)&#123; p1 = p1.next; p2 = p2.next; &#125; // ËØ¥Êòé headA ÊòØÁü≠ÈìæË°® if(p1 == null)&#123; // ËÆ°ÁÆóÂ∑ÆÂÄº int difference = 0; while(p2 != null)&#123; p2 = p2.next; difference++; &#125; p1 = headA; p2 = headB; for(int i = 0;i &lt; difference;i++)&#123; p2 = p2.next; &#125; while (p1 != p2)&#123; p1 = p1.next; p2 = p2.next; &#125; return p1; &#125; // ËØ¥Êòé headB ÊòØÁü≠ÈìæË°® else&#123; int difference = 0; while(p1 != null)&#123; p1 = p1.next; difference++; &#125; p1 = headA; p2 = headB; for(int i = 0;i &lt; difference;i++)&#123; p1 = p1.next; &#125; while (p1 != p2)&#123; p1 = p1.next; p2 = p2.next; &#125; return p1; &#125; &#125;&#125; Code II 123456789public ListNode getIntersectionNode(ListNode headA, ListNode headB) &#123; if (headA == null || headB == null) return null; ListNode pA = headA, pB = headB; while (pA != pB) &#123; pA = pA == null ? headB : pA.next; pB = pB == null ? headA : pB.next; &#125; return pA;&#125; 234. ÂõûÊñáÈìæË°®È¢òÁõÆËØ∑Âà§Êñ≠‰∏Ä‰∏™ÈìæË°®ÊòØÂê¶‰∏∫ÂõûÊñáÈìæË°®„ÄÇ Á§∫‰æã 1: 12ËæìÂÖ•: 1-&gt;2ËæìÂá∫: false Á§∫‰æã 2: 12ËæìÂÖ•: 1-&gt;2-&gt;2-&gt;1ËæìÂá∫: true ÊÄùË∑Ø ÈìæË°®ËΩ¨ÂàóË°® 1.Âø´ÊÖ¢ÊåáÈíàÊâæÂà∞ÈìæË°®ÁöÑ‰∏≠ÁÇπ2.ÁøªËΩ¨ÈìæË°®ÂâçÂçäÈÉ®ÂàÜ3.ÂõûÊñáÊ†°È™å ‰∏ÄËæπÁøªËΩ¨‰∏ÄËæπÂø´ÊÖ¢ÊåáÈíàÈÅçÂéÜ ‰ª£Á†Å Case I 1234567891011121314151617181920212223242526class Solution &#123; public boolean isPalindrome(ListNode head) &#123; List&lt;Integer&gt; vals = new ArrayList&lt;&gt;(); // Convert LinkedList into ArrayList. ListNode currentNode = head; while (currentNode != null) &#123; vals.add(currentNode.val); currentNode = currentNode.next; &#125; // Use two-pointer technique to check for palindrome. int front = 0; int back = vals.size() - 1; while (front &lt; back) &#123; // Note that we must use ! .equals instead of != // because we are comparing Integer, not int. if (!vals.get(front).equals(vals.get(back))) &#123; return false; &#125; front++; back--; &#125; return true; &#125;&#125; Case II 123456789101112131415161718192021222324252627282930313233343536public boolean isPalindrome(ListNode head) &#123; if (head == null || head.next == null) &#123; return true; &#125; //Âø´ÊÖ¢ÊåáÈíàÊâæÂà∞ÈìæË°®ÁöÑ‰∏≠ÁÇπ ListNode fast = head.next.next; ListNode slow = head.next; while (fast != null &amp;&amp; fast.next != null) &#123; fast = fast.next.next; slow = slow.next; &#125; //ÁøªËΩ¨ÈìæË°®ÂâçÂçäÈÉ®ÂàÜ ListNode pre = null; ListNode next = null; while (head != slow) &#123; next = head.next; head.next = pre; pre = head; head = next; &#125; //Â¶ÇÊûúÊòØÂ•áÊï∞‰∏™ËäÇÁÇπÔºåÂéªÊéâÂêéÂçäÈÉ®ÂàÜÁöÑÁ¨¨‰∏Ä‰∏™ËäÇÁÇπ„ÄÇ if (fast != null) &#123; slow = slow.next; &#125; //ÂõûÊñáÊ†°È™å while (pre != null) &#123; if (pre.val != slow.val) &#123; return false; &#125; pre = pre.next; slow = slow.next; &#125; return true; &#125; Case III 12345678910111213141516171819202122232425public boolean isPalindrome(ListNode head) &#123; if(head == null || head.next == null) &#123; return true; &#125; ListNode slow = head, fast = head; ListNode pre = head, prepre = null; while(fast != null &amp;&amp; fast.next != null) &#123; pre = slow; slow = slow.next; fast = fast.next.next; pre.next = prepre; prepre = pre; &#125; if(fast != null) &#123; slow = slow.next; &#125; while(pre != null &amp;&amp; slow != null) &#123; if(pre.val != slow.val) &#123; return false; &#125; pre = pre.next; slow = slow.next; &#125; return true;&#125; 169. Â§öÊï∞ÂÖÉÁ¥†È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Â§ßÂ∞è‰∏∫ n ÁöÑÊï∞ÁªÑÔºåÊâæÂà∞ÂÖ∂‰∏≠ÁöÑÂ§öÊï∞ÂÖÉÁ¥†„ÄÇÂ§öÊï∞ÂÖÉÁ¥†ÊòØÊåáÂú®Êï∞ÁªÑ‰∏≠Âá∫Áé∞Ê¨°Êï∞Â§ß‰∫é ‚åä n/2 ‚åã ÁöÑÂÖÉÁ¥†„ÄÇ ‰Ω†ÂèØ‰ª•ÂÅáËÆæÊï∞ÁªÑÊòØÈùûÁ©∫ÁöÑÔºåÂπ∂‰∏îÁªôÂÆöÁöÑÊï∞ÁªÑÊÄªÊòØÂ≠òÂú®Â§öÊï∞ÂÖÉÁ¥†„ÄÇ Á§∫‰æã 1: 12ËæìÂÖ•: [3,2,3]ËæìÂá∫: 3 Á§∫‰æã 2: 12ËæìÂÖ•: [2,2,1,1,1,2,2]ËæìÂá∫: 2 ÊÄùË∑Ø ÂìàÂ∏åË°®Â≠òÂÇ®„ÄÇ ÊäïÁ•®ÁÆóÊ≥ïÔºåÂ¶ÇÊûúÊàë‰ª¨Êää‰ºóÊï∞ËÆ∞‰∏∫ +1 ÔºåÊääÂÖ∂‰ªñÊï∞ËÆ∞‰∏∫ ‚àí1 ÔºåÂ∞ÜÂÆÉ‰ª¨ÂÖ®ÈÉ®Âä†Ëµ∑Êù•ÔºåÊòæÁÑ∂ÂíåÂ§ß‰∫é 0 Ôºå‰ªéÁªìÊûúÊú¨Ë∫´Êàë‰ª¨ÂèØ‰ª•ÁúãÂá∫‰ºóÊï∞ÊØîÂÖ∂‰ªñÊï∞Â§ö„ÄÇÊú¨Ë¥®‰∏äÔºå Boyer-Moore ÁÆóÊ≥ïÂ∞±ÊòØÊâæ nums ÁöÑ‰∏Ä‰∏™ÂêéÁºÄ suf ÔºåÂÖ∂‰∏≠ suf[0] Â∞±ÊòØÂêéÁºÄ‰∏≠ÁöÑ‰ºóÊï∞„ÄÇÊàë‰ª¨Áª¥Êä§‰∏Ä‰∏™ËÆ°Êï∞Âô®ÔºåÂ¶ÇÊûúÈÅáÂà∞‰∏Ä‰∏™Êàë‰ª¨ÁõÆÂâçÁöÑÂÄôÈÄâ‰ºóÊï∞ÔºåÂ∞±Â∞ÜËÆ°Êï∞Âô®Âä†‰∏ÄÔºåÂê¶ÂàôÂáè‰∏Ä„ÄÇÂè™Ë¶ÅËÆ°Êï∞Âô®Á≠â‰∫é 0 ÔºåÊàë‰ª¨Â∞±Â∞Ü nums ‰∏≠‰πãÂâçËÆøÈóÆÁöÑÊï∞Â≠óÂÖ®ÈÉ® ÂøòËÆ∞ ÔºåÂπ∂Êää‰∏ã‰∏Ä‰∏™Êï∞Â≠óÂΩìÂÅöÂÄôÈÄâÁöÑ‰ºóÊï∞„ÄÇ ‰ª£Á†Å Case I 123456789101112class Solution &#123; public int majorityElement(int[] nums) &#123; int majority = nums.length / 2; Map&lt;Integer, Integer&gt; numCount = new HashMap&lt;&gt;(); for (int num : nums) &#123; int count = numCount.getOrDefault(num, 0) + 1; if (count &gt; majority) return num; numCount.put(num, count); &#125; return -1; &#125;&#125; Case II 123456789101112131415class Solution &#123; public int majorityElement(int[] nums) &#123; int count = 0; Integer candidate = null; for (int num : nums) &#123; if (count == 0) &#123; candidate = num; &#125; count += (num == candidate) ? 1 : -1; &#125; return candidate; &#125;&#125; 200. Â≤õÂ±øÊï∞ÈáèÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Áî± ‚Äò1‚ÄôÔºàÈôÜÂú∞ÔºâÂíå ‚Äò0‚ÄôÔºàÊ∞¥ÔºâÁªÑÊàêÁöÑÁöÑ‰∫åÁª¥ÁΩëÊ†ºÔºåËÆ°ÁÆóÂ≤õÂ±øÁöÑÊï∞Èáè„ÄÇ‰∏Ä‰∏™Â≤õË¢´Ê∞¥ÂåÖÂõ¥ÔºåÂπ∂‰∏îÂÆÉÊòØÈÄöËøáÊ∞¥Âπ≥ÊñπÂêëÊàñÂûÇÁõ¥ÊñπÂêë‰∏äÁõ∏ÈÇªÁöÑÈôÜÂú∞ËøûÊé•ËÄåÊàêÁöÑ„ÄÇ‰Ω†ÂèØ‰ª•ÂÅáËÆæÁΩëÊ†ºÁöÑÂõõ‰∏™ËæπÂùáË¢´Ê∞¥ÂåÖÂõ¥„ÄÇ Á§∫‰æã 1: 1234567ËæìÂÖ•:11110110101100000000ËæìÂá∫: 1 Á§∫‰æã 2: 1234567ËæìÂÖ•:11000110000010000011ËæìÂá∫: 3 ÊÄùË∑ØÊÄùË∑Ø‰∏ÄÔºöÊ∑±Â∫¶‰ºòÂÖàÈÅçÂéÜDFS ÁõÆÊ†áÊòØÊâæÂà∞Áü©Èòµ‰∏≠ ‚ÄúÂ≤õÂ±øÁöÑÊï∞Èáè‚Äù Ôºå‰∏ä‰∏ãÂ∑¶Âè≥Áõ∏ËøûÁöÑ 1 ÈÉΩË¢´ËÆ§‰∏∫ÊòØËøûÁª≠Â≤õÂ±ø„ÄÇ dfsÊñπÊ≥ïÔºö ËÆæÁõÆÂâçÊåáÈíàÊåáÂêë‰∏Ä‰∏™Â≤õÂ±ø‰∏≠ÁöÑÊüê‰∏ÄÁÇπ (i, j)ÔºåÂØªÊâæÂåÖÊã¨Ê≠§ÁÇπÁöÑÂ≤õÂ±øËæπÁïå„ÄÇ ‰ªé (i, j) ÂêëÊ≠§ÁÇπÁöÑ‰∏ä‰∏ãÂ∑¶Âè≥ (i+1,j),(i-1,j),(i,j+1),(i,j-1) ÂÅöÊ∑±Â∫¶ÊêúÁ¥¢„ÄÇ ÁªàÊ≠¢Êù°‰ª∂Ôºö (i, j) Ë∂äËøáÁü©ÈòµËæπÁïå; grid[i][j]== 0Ôºå‰ª£Ë°®Ê≠§ÂàÜÊîØÂ∑≤Ë∂äËøáÂ≤õÂ±øËæπÁïå„ÄÇ ÊêúÁ¥¢Â≤õÂ±øÁöÑÂêåÊó∂ÔºåÊâßË°å grid[i][j] = ‚Äò0‚ÄôÔºåÂç≥Â∞ÜÂ≤õÂ±øÊâÄÊúâËäÇÁÇπÂà†Èô§Ôºå‰ª•ÂÖç‰πãÂêéÈáçÂ§çÊêúÁ¥¢Áõ∏ÂêåÂ≤õÂ±ø„ÄÇ ‰∏ªÂæ™ÁéØÔºö ÈÅçÂéÜÊï¥‰∏™Áü©ÈòµÔºåÂΩìÈÅáÂà∞ grid[i][j] == ‚Äò1‚Äô Êó∂Ôºå‰ªéÊ≠§ÁÇπÂºÄÂßãÂÅöÊ∑±Â∫¶‰ºòÂÖàÊêúÁ¥¢ dfsÔºåÂ≤õÂ±øÊï∞ count + 1 ‰∏îÂú®Ê∑±Â∫¶‰ºòÂÖàÊêúÁ¥¢‰∏≠Âà†Èô§Ê≠§Â≤õÂ±ø„ÄÇ ÊúÄÁªàËøîÂõûÂ≤õÂ±øÊï∞ count Âç≥ÂèØ„ÄÇ ÊÄùË∑Ø‰∫åÔºöÂπøÂ∫¶‰ºòÂÖàÈÅçÂéÜBFS ‰∏ªÂæ™ÁéØÂíåÊÄùË∑Ø‰∏ÄÁ±ª‰ººÔºå‰∏çÂêåÁÇπÊòØÂú®‰∫éÊêúÁ¥¢ÊüêÂ≤õÂ±øËæπÁïåÁöÑÊñπÊ≥ï‰∏çÂêå„ÄÇ bfs ÊñπÊ≥ïÔºö ÂÄüÁî®‰∏Ä‰∏™ÈòüÂàó queueÔºåÂà§Êñ≠ÈòüÂàóÈ¶ñÈÉ®ËäÇÁÇπ (i, j) ÊòØÂê¶Êú™Ë∂äÁïå‰∏î‰∏∫ 1Ôºö Ëã•ÊòØÂàôÁΩÆÈõ∂ÔºàÂà†Èô§Â≤õÂ±øËäÇÁÇπÔºâÔºåÂπ∂Â∞ÜÊ≠§ËäÇÁÇπ‰∏ä‰∏ãÂ∑¶Âè≥ËäÇÁÇπ (i+1,j),(i-1,j),(i,j+1),(i,j-1) Âä†ÂÖ•ÈòüÂàóÔºõ Ëã•‰∏çÊòØÂàôË∑≥ËøáÊ≠§ËäÇÁÇπÔºõ Âæ™ÁéØ pop ÈòüÂàóÈ¶ñËäÇÁÇπÔºåÁõ¥Âà∞Êï¥‰∏™ÈòüÂàó‰∏∫Á©∫ÔºåÊ≠§Êó∂Â∑≤ÁªèÈÅçÂéÜÂÆåÊ≠§Â≤õÂ±ø„ÄÇ ‰ª£Á†Å Case I 12345678910111213141516171819202122class Solution &#123; public int numIslands(char[][] grid) &#123; int count = 0; for(int i = 0; i &lt; grid.length; i++) &#123; for(int j = 0; j &lt; grid[0].length; j++) &#123; if(grid[i][j] == '1')&#123; dfs(grid, i, j); count++; &#125; &#125; &#125; return count; &#125; private void dfs(char[][] grid, int i, int j)&#123; if(i &lt; 0 || j &lt; 0 || i &gt;= grid.length || j &gt;= grid[0].length || grid[i][j] == '0') return; grid[i][j] = '0'; dfs(grid, i + 1, j); dfs(grid, i, j + 1); dfs(grid, i - 1, j); dfs(grid, i, j - 1); &#125;&#125; Case II 1234567891011121314151617181920212223242526272829class Solution &#123; public int numIslands(char[][] grid) &#123; int count = 0; for(int i = 0; i &lt; grid.length; i++) &#123; for(int j = 0; j &lt; grid[0].length; j++) &#123; if(grid[i][j] == '1')&#123; bfs(grid, i, j); count++; &#125; &#125; &#125; return count; &#125; private void bfs(char[][] grid, int i, int j)&#123; Queue&lt;int[]&gt; list = new LinkedList&lt;&gt;(); list.add(new int[] &#123; i, j &#125;); while(!list.isEmpty())&#123; int[] cur = list.remove(); i = cur[0]; j = cur[1]; if(0 &lt;= i &amp;&amp; i &lt; grid.length &amp;&amp; 0 &lt;= j &amp;&amp; j &lt; grid[0].length &amp;&amp; grid[i][j] == '1') &#123; grid[i][j] = '0'; list.add(new int[] &#123; i + 1, j &#125;); list.add(new int[] &#123; i - 1, j &#125;); list.add(new int[] &#123; i, j + 1 &#125;); list.add(new int[] &#123; i, j - 1 &#125;); &#125; &#125; &#125;&#125; ‰ΩúËÄÖÔºöjydÈìæÊé•Ôºöhttps://leetcode-cn.com/problems/number-of-islands/solution/number-of-islands-shen-du-you-xian-bian-li-dfs-or-/Êù•Ê∫êÔºöÂäõÊâ£ÔºàLeetCodeÔºâËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ Âπ∂Êü•ÈõÜ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980class Solution &#123; class UnionFind &#123; int count; // # of connected components int[] parent; int[] rank; public UnionFind(char[][] grid) &#123; // for problem 200 count = 0; int m = grid.length; int n = grid[0].length; parent = new int[m * n]; rank = new int[m * n]; for (int i = 0; i &lt; m; ++i) &#123; for (int j = 0; j &lt; n; ++j) &#123; if (grid[i][j] == '1') &#123; parent[i * n + j] = i * n + j; ++count; &#125; rank[i * n + j] = 0; &#125; &#125; &#125; public int find(int i) &#123; // path compression if (parent[i] != i) parent[i] = find(parent[i]); return parent[i]; &#125; public void union(int x, int y) &#123; // union with rank int rootx = find(x); int rooty = find(y); if (rootx != rooty) &#123; if (rank[rootx] &gt; rank[rooty]) &#123; parent[rooty] = rootx; &#125; else if (rank[rootx] &lt; rank[rooty]) &#123; parent[rootx] = rooty; &#125; else &#123; parent[rooty] = rootx; rank[rootx] += 1; &#125; --count; &#125; &#125; public int getCount() &#123; return count; &#125; &#125; public int numIslands(char[][] grid) &#123; if (grid == null || grid.length == 0) &#123; return 0; &#125; int nr = grid.length; int nc = grid[0].length; int num_islands = 0; UnionFind uf = new UnionFind(grid); for (int r = 0; r &lt; nr; ++r) &#123; for (int c = 0; c &lt; nc; ++c) &#123; if (grid[r][c] == '1') &#123; grid[r][c] = '0'; if (r - 1 &gt;= 0 &amp;&amp; grid[r-1][c] == '1') &#123; uf.union(r * nc + c, (r-1) * nc + c); &#125; if (r + 1 &lt; nr &amp;&amp; grid[r+1][c] == '1') &#123; uf.union(r * nc + c, (r+1) * nc + c); &#125; if (c - 1 &gt;= 0 &amp;&amp; grid[r][c-1] == '1') &#123; uf.union(r * nc + c, r * nc + c - 1); &#125; if (c + 1 &lt; nc &amp;&amp; grid[r][c+1] == '1') &#123; uf.union(r * nc + c, r * nc + c + 1); &#125; &#125; &#125; &#125; return uf.getCount(); &#125;&#125; 221. ÊúÄÂ§ßÊ≠£ÊñπÂΩ¢È¢òÁõÆÂú®‰∏Ä‰∏™Áî± 0 Âíå 1 ÁªÑÊàêÁöÑ‰∫åÁª¥Áü©ÈòµÂÜÖÔºåÊâæÂà∞Âè™ÂåÖÂê´ 1 ÁöÑÊúÄÂ§ßÊ≠£ÊñπÂΩ¢ÔºåÂπ∂ËøîÂõûÂÖ∂Èù¢ÁßØ„ÄÇ Á§∫‰æã: 12345678ËæìÂÖ•: 1 0 1 0 01 0 1 1 11 1 1 1 11 0 0 1 0ËæìÂá∫: 4 ÊÄùË∑ØÂâçÈù¢ÂÅö‰∫Ü‰∏ÄÈ¢òÊ±Ç ÊúÄÂ§ßÈïøÊñπÂΩ¢ÁöÑÈ¢òÁõÆÔºåÂΩìÊó∂ÁöÑÊÄùË∑ØÊòØÁî®ÁöÑÁ¨¨ 84 È¢ò Êü±Áä∂Âõæ‰∏≠ÊúÄÂ§ßÁöÑÁü©ÂΩ¢ ÔºåÂàÜÂà´Ê±ÇÊØè‰∏ÄË°åÁöÑÊúÄÂ§ßÁü©ÂΩ¢ÔºåÊúÄÂêéÂæóÂà∞ Êï¥‰∏™ÁöÑÊúÄÂ§ßÈïøÊñπÂΩ¢„ÄÇËøôÈáåÊ±ÇÊ≠£ÊñπÂΩ¢ÔºåÂ∞±‰∏çËÉΩÁî®ÈÇ£ÁßçÊñπÊ≥ï‰∫ÜÔºåÂøÖÈ°ªÂæóÂè¶ËæüËπäÂæÑ„ÄÇ ËøôÈáåÈááÁî®ÁöÑÊòØ dpÔºåÊó¢ÁÑ∂ÊòØÊâæÊúÄÂ§ßÊ≠£ÊñπÂΩ¢ÔºåÂÖ∂ÂÆûÊâæÂØπ dpÊï∞ÁªÑ‰ª£Ë°®‰ªÄ‰πà Âíå Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã Â¶Ç‰ΩïÂÜôÔºåÂ∞±ÂÆåÊàê‰∫ÜÔºåËøôÈáåÁöÑ dp Êï∞ÁªÑ‰ª£Ë°®‰ª• ËØ•ÂÖÉÁ¥†‰∏∫Âè≥‰∏ãËßíÁöÑÊ≠£ÊñπÂΩ¢ËæπÈïøÔºåÊïÖ dp(i, j)=min(dp(i‚àí1, j), dp(i‚àí1, j‚àí1), dp(i, j‚àí1))+1 ‰ª£Á†Å12345678910111213141516public class Solution &#123; public int maximalSquare(char[][] matrix) &#123; int rows = matrix.length, cols = rows &gt; 0 ? matrix[0].length : 0; int[][] dp = new int[rows + 1][cols + 1]; int maxsqlen = 0; for (int i = 1; i &lt;= rows; i++) &#123; for (int j = 1; j &lt;= cols; j++) &#123; if (matrix[i-1][j-1] == '1')&#123; dp[i][j] = Math.min(Math.min(dp[i][j - 1], dp[i - 1][j]), dp[i - 1][j - 1]) + 1; maxsqlen = Math.max(maxsqlen, dp[i][j]); &#125; &#125; &#125; return maxsqlen * maxsqlen; &#125;&#125; Áî±‰∫éÂΩìÂâç dp[i][j] Âè™Áî®Âà∞‰∫ÜÂ∑¶‰∏ä„ÄÅÂ∑¶Ëæπ„ÄÅ‰∏äËæπ‰∏â‰∏™ÂÖÉÁ¥†ÔºåÊâÄ‰ª•‰∏çÈúÄË¶ÅÂª∫Á´ã‰∏Ä‰∏™‰∫åÁª¥Êï∞ÁªÑÂéªÊìç‰ΩúÔºåÂè™ÈúÄË¶ÅÁî®‰∏Ä‰∏™‰∏ÄÁª¥ÁöÑÊï∞ÁªÑÂéªÂ≠òÊØè‰∏ÄË°åÂØπÂ∫îÁöÑÂàóÁöÑÊï∞Â∞±Ë°å‰∫ÜÔºåÂèØ‰ª•Â§çÁî®ÔºåËá≥‰∫é Â∑¶‰∏äËßí ÁöÑÊï∞ÔºåÂèØ‰ª•Áî®‰∏Ä‰∏™ÂèòÈáèÂçïÁã¨ËÆ∞ÂΩï‰∏Ä‰∏ãÔºàËøô‰∏™ÊòØÁúüÁöÑÁâõÁöÆÔºâ 1234567891011121314151617181920public class Solution &#123; public int maximalSquare(char[][] matrix) &#123; int rows = matrix.length, cols = rows &gt; 0 ? matrix[0].length : 0; int[] dp = new int[cols + 1]; int maxsqlen = 0, prev = 0; for (int i = 1; i &lt;= rows; i++) &#123; for (int j = 1; j &lt;= cols; j++) &#123; int temp = dp[j]; if (matrix[i - 1][j - 1] == '1') &#123; dp[j] = Math.min(Math.min(dp[j - 1], prev), dp[j]) + 1; maxsqlen = Math.max(maxsqlen, dp[j]); &#125; else &#123; dp[j] = 0; &#125; prev = temp; &#125; &#125; return maxsqlen * maxsqlen; &#125;&#125; 207. ËØæÁ®ãË°®È¢òÁõÆÁé∞Âú®‰Ω†ÊÄªÂÖ±Êúâ n Èó®ËØæÈúÄË¶ÅÈÄâÔºåËÆ∞‰∏∫ 0 Âà∞ n-1„ÄÇ Âú®ÈÄâ‰øÆÊüê‰∫õËØæÁ®ã‰πãÂâçÈúÄË¶Å‰∏Ä‰∫õÂÖà‰øÆËØæÁ®ã„ÄÇ ‰æãÂ¶ÇÔºåÊÉ≥Ë¶ÅÂ≠¶‰π†ËØæÁ®ã 0 Ôºå‰Ω†ÈúÄË¶ÅÂÖàÂÆåÊàêËØæÁ®ã 1 ÔºåÊàë‰ª¨Áî®‰∏Ä‰∏™ÂåπÈÖçÊù•Ë°®Á§∫‰ªñ‰ª¨: [0,1] ÁªôÂÆöËØæÁ®ãÊÄªÈáè‰ª•ÂèäÂÆÉ‰ª¨ÁöÑÂÖàÂÜ≥Êù°‰ª∂ÔºåÂà§Êñ≠ÊòØÂê¶ÂèØËÉΩÂÆåÊàêÊâÄÊúâËØæÁ®ãÁöÑÂ≠¶‰π†Ôºü Á§∫‰æã 1: 123ËæìÂÖ•: 2, [[1,0]] ËæìÂá∫: trueËß£Èáä: ÊÄªÂÖ±Êúâ 2 Èó®ËØæÁ®ã„ÄÇÂ≠¶‰π†ËØæÁ®ã 1 ‰πãÂâçÔºå‰Ω†ÈúÄË¶ÅÂÆåÊàêËØæÁ®ã 0„ÄÇÊâÄ‰ª•ËøôÊòØÂèØËÉΩÁöÑ„ÄÇ Á§∫‰æã 2: 123ËæìÂÖ•: 2, [[1,0],[0,1]]ËæìÂá∫: falseËß£Èáä: ÊÄªÂÖ±Êúâ 2 Èó®ËØæÁ®ã„ÄÇÂ≠¶‰π†ËØæÁ®ã 1 ‰πãÂâçÔºå‰Ω†ÈúÄË¶ÅÂÖàÂÆåÊàêËØæÁ®ã 0ÔºõÂπ∂‰∏îÂ≠¶‰π†ËØæÁ®ã 0 ‰πãÂâçÔºå‰Ω†ËøòÂ∫îÂÖàÂÆåÊàêËØæÁ®ã 1„ÄÇËøôÊòØ‰∏çÂèØËÉΩÁöÑ„ÄÇ ÊÄùË∑ØËøôÈ¢òÊú¨Ë¥®Â∞±ÊòØÊãìÊâëÊéíÂ∫èÔºåËß£ÂÜ≥ÊãìÊâëÊéíÂ∫èÔºå‰∏ÄËà¨Â∞±ÊòØ‰∏§‰∏™ÊñπÊ≥ïÔºöBFS Âíå DFS„ÄÇÂÖ∂Ê†∏ÂøÉÈÉΩÊòØËÉΩÊãìÊâëÊéíÂ∫èÁöÑÈÉΩÊòØÊúâÂêëÊó†ÁéØÂõæ„ÄÇBFS ‰∏ªË¶ÅÊòØ‰ªé ÂÖ•Â∫¶Âá∫Â∫¶ËÄÉËôëÔºåËÄå DFS ‰∏ªË¶Å‰ªéÊúâÊó†ÁéØËÄÉËôë„ÄÇ ËØ¶ÁªÜÊÄùË∑ØËßÅÔºö https://leetcode-cn.com/problems/course-schedule/solution/course-schedule-tuo-bu-pai-xu-bfsdfsliang-chong-fa/ ‰ª£Á†Å BFS 12345678910111213141516171819202122232425262728293031class Solution &#123; // BFS public boolean canFinish(int numCourses, int[][] prerequisites) &#123; // ËÆ∞ÂΩïÊØè‰∏™ÁªìÁÇπÁöÑÂÖ•Â∫¶ÔºåÁ±ª‰ºº‰∫éÈÇªÊé•Ë°® int[] indegrees = new int[numCourses]; // ÁªüËÆ°ÊØè‰∏™ÁªìÁÇπÁöÑÂÖ•Â∫¶Êï∞ // Ëøô‰∏™È¢òÁõÆÁöÑÂ•ΩÂ§ÑÊòØËØæÁ®ãÊòØ‰ªé0ÂºÄÂßãÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨Áî≥ËØ∑Á©∫Èó¥ÂæàÊñπ‰æø for(int[] cp : prerequisites) indegrees[cp[0]]++; // ÈòüÂàóÁî®Êù•Â≠òÂÇ®ÂÖ•Â∫¶‰∏∫0ÁöÑÁªìÁÇπ LinkedList&lt;Integer&gt; queue = new LinkedList&lt;&gt;(); // Â¶ÇÊûúÊâæÂà∞ÂÖ•Â∫¶‰∏∫0ÁöÑÔºåÊîæÂÖ•ÈòüÂ∞æ for(int i = 0; i &lt; numCourses; i++)&#123; if(indegrees[i] == 0) queue.addLast(i); &#125; // Âè™Ë¶ÅÈòüÂàó‰∏ç‰∏∫Á©∫ÔºåÂ∞±‰∏ÄÁõ¥Âæ™ÁéØ while(!queue.isEmpty()) &#123; // ÂèñÂá∫ÈòüÈ¶ñÂÖÉÁ¥† Integer pre = queue.removeFirst(); // Áõ∏ÂΩì‰∫éÂà†Èô§Êìç‰ΩúÔºåËØ¥ÊòéÊ≠§Èó®ËØæÁ®ãÂ∑≤ÁªèÂ≠¶ÂÆå numCourses--; // ÁÑ∂ÂêéÊääËøôÈó®ËØæÁ®ãÁöÑÂá∫Â∫¶Âà†Èô§ // Âπ∂ÊääÊñ∞ÁöÑÂÖ•Â∫¶‰∏∫0ÁöÑËØæÁ®ãÂä†ÂÖ•ÈòüÂàó for(int[] req : prerequisites) &#123; if(req[1] != pre) continue; if(--indegrees[req[0]] == 0) queue.add(req[0]); &#125; &#125; // ÈòüÂàó‰∏∫Á©∫ÔºåÂ¶ÇÊûúËÉΩÂÖ®ÈÉ®Â≠¶‰π†ÂÆåÔºånumCourses == 0ÔºåÂê¶Âàô‰∏çËÉΩÂÖ®ÈÉ®Â≠¶‰π†ÂÆå return numCourses == 0; &#125;&#125; DFS 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849class Solution &#123; /** * DFS ÊñπÊ≥ï * @param numCourses * @param prerequisites * @return */ public boolean canFinish(int numCourses, int[][] prerequisites) &#123; // Áî®Êù•Ë°®Á§∫ËäÇÁÇπ‰πãÈó¥ÊòØÂê¶ÊúâËæπ,Á±ª‰ºº‰∫é ÈÇªÊé•Áü©Èòµ int[][] arc = new int[numCourses][numCourses]; for(int[] cp:prerequisites)&#123; arc[cp[1]][cp[0]] = 1; &#125; // ÂØπÊØè‰∏™ËäÇÁÇπÂàÜÂà´ËøõË°ådfs // dfs ‰∏ªË¶ÅÊòØÂà§Êñ≠ÊòØÂê¶ÊúâÁéØÁöÑÂ≠òÂú®ÔºåÂú®ËøôÈáåÊàë‰ª¨ÂºïÂÖ• flag // flag == 1Ôºå‰ª£Ë°®ËØ•ËäÇÁÇπÊú¨ËΩÆdfsÂ∑≤ÁªèËÆøÈóÆËøá‰∫Ü,Âç≥Ê≠£Âú®ËÆøÈóÆÁöÑËäÇÁÇπ // flag == -1Ôºå‰ª£Ë°®‰ª•ÂâçÁöÑdfsËÆøÈóÆËøá‰∫Ü // flag == 0Ôºå‰ª£Ë°®ËØ•ËäÇÁÇπ‰ªéÊú™ËÆøÈóÆËøá // Âè™ÊúâÂΩìÊàë‰ª¨ËÆøÈóÆÂà∞‰∫Ü flag == 1ÁöÑËäÇÁÇπÔºåËØ¥ÊòéÂ≠òÂú®ÁéØ int[] flag = new int[numCourses]; for(int i = 0;i &lt; numCourses;i++)&#123; if(dfs(arc,i,flag) == false) return false; &#125; return true; &#125; /** * dfs ÂÖ∑‰ΩìÊµÅÁ®ã * @param arc * @param i * @param flag * @return */ private boolean dfs(int[][] arc, int i, int[] flag) &#123; // ÂèëÁé∞ÊòØÊú¨ËΩÆ dfs Ê≠£Âú®ËÆøÈóÆÁöÑËäÇÁÇπÔºåÊïÖÂ≠òÂú®ÁéØ if(flag[i] == 1) return false; // ÊòØÂÖ∂‰ªñÁªìÁÇπÂèëËµ∑ÁöÑ dfsÔºåÊ≤°ÊúâÂÖ≥Á≥ªÔºå‰∏çËÉΩÂà§Êñ≠ÊòØÂê¶ÊúâÁéØ if(flag[i] == -1) return true; // Ê†áËÆ∞‰∏Ä‰∏ãÊú¨ËΩÆdfsÊ≠£Âú®ËÆøÈóÆËØ•ËäÇÁÇπ flag[i] = 1; // ËøõË°å dfsÔºåÂèëÁé∞ÊúâÁéØÔºåËøîÂõû false for(int j = 0;j &lt; arc.length;j++)&#123; if(arc[i][j] == 1 &amp;&amp; dfs(arc,j,flag) == false) return false; &#125; // ËØ•ËäÇÁÇπÁöÑ dfs ÁªìÊùüÔºåÊ†áÂøó‰ΩçÂèò‰∏∫ -1 flag[i] = -1; return true; &#125;&#125; 208. ÂÆûÁé∞ Trie (ÂâçÁºÄÊ†ë)È¢òÁõÆÂÆûÁé∞‰∏Ä‰∏™ Trie (ÂâçÁºÄÊ†ë)ÔºåÂåÖÂê´ insert, search, Âíå startsWith Ëøô‰∏â‰∏™Êìç‰Ωú„ÄÇ Á§∫‰æã: 12345678Trie trie = new Trie();trie.insert("apple");trie.search("apple"); // ËøîÂõû truetrie.search("app"); // ËøîÂõû falsetrie.startsWith("app"); // ËøîÂõû truetrie.insert("app"); trie.search("app"); // ËøîÂõû true ËØ¥Êòé: ‰Ω†ÂèØ‰ª•ÂÅáËÆæÊâÄÊúâÁöÑËæìÂÖ•ÈÉΩÊòØÁî±Â∞èÂÜôÂ≠óÊØç a-z ÊûÑÊàêÁöÑ„ÄÇ ‰øùËØÅÊâÄÊúâËæìÂÖ•Âùá‰∏∫ÈùûÁ©∫Â≠óÁ¨¶‰∏≤„ÄÇ ÊÄùË∑Ø https://blog.csdn.net/qq_43152052/article/details/101109415 Â§ß‰Ω¨ÂØπ leetcode ÂâçÁºÄÊ†ëÁöÑ‰π†È¢òÊÄªÁªì ‰ª£Á†Å123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899package LeetCode_100_hotest;class Trie_208 &#123; public static void main(String[] args) &#123; Trie obj = new Trie(); String word = "apple"; String prefix = "app"; obj.insert(word); boolean param_2 = obj.search(word); boolean param_3 = obj.startsWith(prefix); System.out.println("param_2:" + param_2); System.out.println("param_3:" + param_3); &#125;&#125;class Trie &#123; private TrieNode root; public Trie() &#123; root = new TrieNode(); &#125; // Inserts a word into the trie. public void insert(String word) &#123; TrieNode node = root; for (int i = 0; i &lt; word.length(); i++) &#123; char currentChar = word.charAt(i); if (!node.containsKey(currentChar)) &#123; node.put(currentChar, new TrieNode()); &#125; node = node.get(currentChar); &#125; node.setEnd(); &#125; private TrieNode searchPrefix(String word) &#123; TrieNode node = root; for (int i = 0; i &lt; word.length(); i++) &#123; char curLetter = word.charAt(i); if (node.containsKey(curLetter)) &#123; node = node.get(curLetter); &#125; else &#123; return null; &#125; &#125; return node; &#125; // Returns if the word is in the trie. public boolean search(String word) &#123; TrieNode node = searchPrefix(word); return node != null &amp;&amp; node.isEnd(); &#125; public boolean startsWith(String prefix) &#123; TrieNode node = searchPrefix(prefix); return node != null; &#125;&#125;class TrieNode &#123; // R links to node children // ËøôÈáå‰∏çÊ≠¢ÊòØ left„ÄÅrightÔºåÊâÄ‰ª•ÂøÖÈ°ªÊòØ‰∏Ä‰∏™Êï∞ÁªÑÁªÑÊàê private TrieNode[] links; private final int R = 26; private boolean isEnd; public TrieNode() &#123; links = new TrieNode[R]; &#125; public boolean containsKey(char ch) &#123; return links[ch -'a'] != null; &#125; public TrieNode get(char ch) &#123; return links[ch -'a']; &#125; public void put(char ch, TrieNode node) &#123; links[ch -'a'] = node; &#125; public void setEnd() &#123; isEnd = true; &#125; public boolean isEnd() &#123; return isEnd; &#125;&#125;/** * Your Trie object will be instantiated and called as such: * Trie obj = new Trie(); * obj.insert(word); * boolean param_2 = obj.search(word); * boolean param_3 = obj.startsWith(prefix); */ 739. ÊØèÊó•Ê∏©Â∫¶È¢òÁõÆÊ†πÊçÆÊØèÊó• Ê∞îÊ∏© ÂàóË°®ÔºåËØ∑ÈáçÊñ∞ÁîüÊàê‰∏Ä‰∏™ÂàóË°®ÔºåÂØπÂ∫î‰ΩçÁΩÆÁöÑËæìÂÖ•ÊòØ‰Ω†ÈúÄË¶ÅÂÜçÁ≠âÂæÖÂ§ö‰πÖÊ∏©Â∫¶Êâç‰ºöÂçáÈ´òË∂ÖËøáËØ•Êó•ÁöÑÂ§©Êï∞„ÄÇÂ¶ÇÊûú‰πãÂêéÈÉΩ‰∏ç‰ºöÂçáÈ´òÔºåËØ∑Âú®ËØ•‰ΩçÁΩÆÁî® 0 Êù•‰ª£Êõø„ÄÇ ‰æãÂ¶ÇÔºåÁªôÂÆö‰∏Ä‰∏™ÂàóË°® temperatures = [73, 74, 75, 71, 69, 72, 76, 73]Ôºå‰Ω†ÁöÑËæìÂá∫Â∫îËØ•ÊòØ [1, 1, 4, 2, 1, 1, 0, 0]„ÄÇ ÊèêÁ§∫ÔºöÊ∞îÊ∏© ÂàóË°®ÈïøÂ∫¶ÁöÑËåÉÂõ¥ÊòØ [1, 30000]„ÄÇÊØè‰∏™Ê∞îÊ∏©ÁöÑÂÄºÁöÑÂùá‰∏∫ÂçéÊ∞èÂ∫¶ÔºåÈÉΩÊòØÂú® [30, 100] ËåÉÂõ¥ÂÜÖÁöÑÊï¥Êï∞„ÄÇ ÊÄùË∑ØÂæàÊòéÊòæÊòØÈááÁî®ÂçïË∞ÉÊ†àÁöÑÊñπÊ≥ïÔºåÂÖ∑‰ΩìËßÅ https://labuladong.gitbook.io/algo/shu-ju-jie-gou-xi-lie/dan-tiao-zhan ‰ª£Á†Å1234567891011121314class Solution &#123; public int[] dailyTemperatures(int[] T) &#123; Stack&lt;Integer&gt; stack = new Stack&lt;&gt;(); int[] ans = new int[T.length]; for(int i = T.length - 1; i &gt;= 0;i--)&#123; while(!stack.isEmpty() &amp;&amp; T[i] &gt;= T[stack.peek()])&#123; stack.pop(); &#125; ans[i] = stack.isEmpty() == true ? 0 : (stack.peek() - i); stack.push(i); &#125; return ans; &#125;&#125; 621. ‰ªªÂä°Ë∞ÉÂ∫¶Âô®È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Áî®Â≠óÁ¨¶Êï∞ÁªÑË°®Á§∫ÁöÑ CPU ÈúÄË¶ÅÊâßË°åÁöÑ‰ªªÂä°ÂàóË°®„ÄÇÂÖ∂‰∏≠ÂåÖÂê´‰ΩøÁî®Â§ßÂÜôÁöÑ A - Z Â≠óÊØçË°®Á§∫ÁöÑ26 Áßç‰∏çÂêåÁßçÁ±ªÁöÑ‰ªªÂä°„ÄÇ‰ªªÂä°ÂèØ‰ª•‰ª•‰ªªÊÑèÈ°∫Â∫èÊâßË°åÔºåÂπ∂‰∏îÊØè‰∏™‰ªªÂä°ÈÉΩÂèØ‰ª•Âú® 1 ‰∏™Âçï‰ΩçÊó∂Èó¥ÂÜÖÊâßË°åÂÆå„ÄÇCPU Âú®‰ªª‰Ωï‰∏Ä‰∏™Âçï‰ΩçÊó∂Èó¥ÂÜÖÈÉΩÂèØ‰ª•ÊâßË°å‰∏Ä‰∏™‰ªªÂä°ÔºåÊàñËÄÖÂú®ÂæÖÂëΩÁä∂ÊÄÅ„ÄÇ ÁÑ∂ËÄåÔºå‰∏§‰∏™Áõ∏ÂêåÁßçÁ±ªÁöÑ‰ªªÂä°‰πãÈó¥ÂøÖÈ°ªÊúâÈïøÂ∫¶‰∏∫ n ÁöÑÂÜ∑Âç¥Êó∂Èó¥ÔºåÂõ†Ê≠§Ëá≥Â∞ëÊúâËøûÁª≠ n ‰∏™Âçï‰ΩçÊó∂Èó¥ÂÜÖ CPU Âú®ÊâßË°å‰∏çÂêåÁöÑ‰ªªÂä°ÔºåÊàñËÄÖÂú®ÂæÖÂëΩÁä∂ÊÄÅ„ÄÇ ‰Ω†ÈúÄË¶ÅËÆ°ÁÆóÂÆåÊàêÊâÄÊúâ‰ªªÂä°ÊâÄÈúÄË¶ÅÁöÑÊúÄÁü≠Êó∂Èó¥„ÄÇ Á§∫‰æã 1 123ËæìÂÖ•: tasks = ["A","A","A","B","B","B"], n = 2ËæìÂá∫: 8ÊâßË°åÈ°∫Â∫è: A -&gt; B -&gt; (ÂæÖÂëΩ) -&gt; A -&gt; B -&gt; (ÂæÖÂëΩ) -&gt; A -&gt; B. ÊÄùË∑Ø Ê°∂ÊÄùÊÉ≥ÔºåÊØè‰∏™Ê°∂Âõ∫ÂÆöÂ§ßÂ∞è‰∏∫ n+1ÔºàÈô§ÊúÄÂêé‰∏Ä‰∏™Ê°∂‰πãÂ§ñÔºâÔºåËøôÊ†∑ÂèØ‰ª•Á°Æ‰øùÁõ∏ÂêåÁöÑ‰ªªÂä°ÂèØ‰ª•ÂàÜÂú®‰∏çÂêåÁöÑÊ°∂‰∏≠ ÂΩìÁÑ∂ÔºåÊØè‰∏™‰ªªÂä°Âú®Ê°∂‰∏≠ÁöÑÊ¨°Â∫èÊòØÂõ∫ÂÆöÁöÑÔºåÊØîÂ¶ÇËØ¥ A Âú®Ê°∂Â∫ïÔºåÈÇ£‰πàÂú®ÊØè‰∏™Ê°∂‰∏≠ A ÈÉΩÂú®Â∫ïÈÉ®ÔºåËøôÊ†∑ÂèØ‰ª•Á°Æ‰øùÁõ∏Âêå‰ªªÂä°ÁöÑÈó¥ÈöîÊó∂Èó¥ÈÉΩ‰∏çÂ∞è‰∫é n Ê°∂ÁöÑÊï∞ÈáèÁî± Êã•ÊúâÊúÄÂ§ö‰ªªÂä°Êï∞ÁöÑÈÇ£‰∏™‰ªªÂä°ÂÜ≥ÂÆöÔºåÂè™Ë¶Å‰ªñ‰øùËØÅ‰∫ÜÂÜ∑Âç¥Êó∂Èó¥ÔºåÂÖ∂‰ªñÁöÑ‰∏ÄÂÆöÂèØ‰ª• ÁªìÊûúÂ∞±ÊòØ (n+1) \ (count - 1) + ÊúÄÂêé‰∏Ä‰∏™Ê°∂ÁöÑÂ§ßÂ∞è*Ôºåcount ‰∏∫Ê°∂ÁöÑÊï∞ÈáèÔºåÂõ†‰∏∫ÊúÄÂêé‰∏Ä‰∏™Ê°∂Êó†ÈúÄÂõ∫ÂÆöÂ§ßÂ∞è count ÂæàÂ•ΩÊ±ÇÔºåÈÇ£ÊúÄÂêé‰∏Ä‰∏™Ê°∂Â§ßÂ∞èÂ¶Ç‰ΩïÊ±ÇÂë¢ÔºåÂæàÊòéÊòæÂ∞±ÊòØ Êã•ÊúâÊúÄÂ§öÊï∞‰ªªÂä°ÁöÑ‰∏™Êï∞ÔºåÊØîÂ¶ÇAAABBBCCCDDEEÔºåÈÇ£ÊúÄÂêé‰∏Ä‰∏™Ê°∂ÁöÑÂ§ßÂ∞èÂ∞±ÊòØ 3ÔºåÂõ†‰∏∫ A B C ÈÉΩÊòØÊã•Êúâ 3 ‰∏™‰ªªÂä°Êï∞ Â¶ÇÊûúÂÜ∑Âç¥Êó∂Èó¥ËøáÁü≠Ôºå‰ªªÂä°Êï∞ËøáÂ§öÔºå‰πüÂ∞±ÊòØËØ¥Ê°∂‰∏çÂ§üÁî®‰∫ÜÔºåÊØîÂ¶ÇËØ¥ AAABBBCCCDDEE ‰∏î n = 2 ËøôÁßçÊÉÖÂÜµÔºåÊ≠§Êó∂ Ê°∂ÁöÑÂ§ßÂ∞è‰∏∫ 3ÔºåÊ°∂ÁöÑÊï∞Èáè‰∏∫ 3„ÄÇÁ¨¨‰∏Ä‰∏™Ê°∂ ABC ÔºåÁ¨¨‰∫å‰∏™ ABCÔºåÁ¨¨‰∏â‰∏™ ABCÔºåÊ≠§Êó∂ÁöÑ D Âíå E Êàë‰ª¨ÂèØ‰ª•ÁêÜËß£‰∏∫ÊåâÁÖß‰∏ÄÂÆöÊ¨°Â∫èÊîæÂú®Ê°∂‰πã‰∏äÂ∞±Ë°å Ôºå‰πüÂ∞±ÊòØ‰∏çÁî®ÊîæÂà∞Ê°∂‰∏≠ÔºåËøôÊ†∑‰∏ç‰ºöÂΩ±ÂìçÊ°∂ÂÜÖÂÖÉÁ¥† Áî±‰∫é D Âíå E ÁöÑÂá∫Áé∞Ê¨°Êï∞ÊòØ‰∏ÄÂÆöÂ∞è‰∫éÊ°∂ÁöÑÊï∞ÈáèÁöÑÔºåÊâÄ‰ª•ÊúÄÂ§öÊØè‰∏™Ê°∂‰∏äÊîæ‰∏Ä‰∏™Áõ∏Âêå‰ªªÂä°ÔºåËøôÊ†∑ D Âíå E ÊåâÊ¨°Â∫èÊéíÂ∏ÉÊòØ‰∏ÄÂÆöÁ¨¶ÂêàË¶ÅÊ±ÇÁöÑ Ê≠§Êó∂ÁöÑÁ≠îÊ°àÂ∞±ÊòØ ‰ªªÂä°ÊÄªÊï∞ ‰∫ÜÔºåÂõ†‰∏∫ÊâÄÊúâÁöÑÊ°∂ÈÉΩÊª°‰∫ÜÔºåÂπ∂‰∏îÂ§öÂá∫Êù•ÁöÑ‰πüÊòØ‰ªªÂä°ÔºåÊ≤°ÊúâÂæÖÂëΩÊó∂Èó¥ ÊïÖÁ≠îÊ°àÂ∞±ÊòØ ‰∏§‰∏™Êó∂Èó¥ ÁöÑÊúÄÂ§ßÂÄº ‰ª£Á†Å1234567891011121314151617181920class Solution &#123; public int leastInterval(char[] tasks, int n) &#123; HashMap&lt;Character, Integer&gt; task_map = new HashMap&lt;&gt;(); // ËÆ∞ÂΩï Âçï‰∏™‰ªªÂä°Âá∫Áé∞ÁöÑÊúÄÂ§öÁöÑÊ¨°Êï∞ int max_count = 0; // ËÆ∞ÂΩï ÊúâÊúÄÂ§ö‰ªªÂä°Êï∞ÁöÑ ‰ªªÂä°‰∏™Êï∞ int difference = 0; for (Character task : tasks) &#123; int count = task_map.getOrDefault(task, 0) + 1; task_map.put(task, count); max_count = Math.max(max_count,count); &#125; for(Map.Entry&lt;Character, Integer&gt; entry:task_map.entrySet())&#123; if(entry.getValue() == max_count) difference++; &#125; int number1 = (n + 1) * (max_count - 1) + difference; int number2 = tasks.length; return Math.max(number1,number2); &#125;&#125; 581. ÊúÄÁü≠Êó†Â∫èËøûÁª≠Â≠êÊï∞ÁªÑÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Êï¥Êï∞Êï∞ÁªÑÔºå‰Ω†ÈúÄË¶ÅÂØªÊâæ‰∏Ä‰∏™ËøûÁª≠ÁöÑÂ≠êÊï∞ÁªÑÔºåÂ¶ÇÊûúÂØπËøô‰∏™Â≠êÊï∞ÁªÑËøõË°åÂçáÂ∫èÊéíÂ∫èÔºåÈÇ£‰πàÊï¥‰∏™Êï∞ÁªÑÈÉΩ‰ºöÂèò‰∏∫ÂçáÂ∫èÊéíÂ∫è„ÄÇ ‰Ω†ÊâæÂà∞ÁöÑÂ≠êÊï∞ÁªÑÂ∫îÊòØÊúÄÁü≠ÁöÑÔºåËØ∑ËæìÂá∫ÂÆÉÁöÑÈïøÂ∫¶„ÄÇ Á§∫‰æã 1: 123ËæìÂÖ•: [2, 6, 4, 8, 10, 9, 15]ËæìÂá∫: 5Ëß£Èáä: ‰Ω†Âè™ÈúÄË¶ÅÂØπ [6, 4, 8, 10, 9] ËøõË°åÂçáÂ∫èÊéíÂ∫èÔºåÈÇ£‰πàÊï¥‰∏™Ë°®ÈÉΩ‰ºöÂèò‰∏∫ÂçáÂ∫èÊéíÂ∫è„ÄÇ ÊÄùË∑ØÊàëÈááÁî®ÁöÑÊòØÊéíÂ∫è ‰ª£Á†Å12345678910111213141516171819202122232425class Solution &#123; public int findUnsortedSubarray(int[] nums) &#123; int[] copy = Arrays.copyOf(nums,nums.length); Arrays.sort(copy); int start = 0; int end = 0; for(int i = 0;i &lt; nums.length;i++)&#123; if(nums[i] != copy[i])&#123; start = i; break; &#125; &#125; for(int j = nums.length-1;j &gt;= 0;j--)&#123; if(nums[j] != copy[j])&#123; end = j; // ÂÖ∂ÂÆûËøôÊ≠•Â∫îËØ•ÊîæÂà∞ÊúÄÂêé end - start + 1 // ‰ΩÜÊòØ‰∏∫‰∫ÜÈò≤Ê≠¢num.length == 0 ‰ª•Âèä Ê≠£Â∫èÁöÑÊï∞ÁªÑ ÁªìÊûúÊ≠£Á°Æ // Â∞±ÊîæÂà∞‰∫ÜËøôÈáå end++; break; &#125; &#125; return end - start; &#125;&#125; 560. Âíå‰∏∫KÁöÑÂ≠êÊï∞ÁªÑÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Êï¥Êï∞Êï∞ÁªÑÂíå‰∏Ä‰∏™Êï¥Êï∞ kÔºå‰Ω†ÈúÄË¶ÅÊâæÂà∞ËØ•Êï∞ÁªÑ‰∏≠Âíå‰∏∫ k ÁöÑËøûÁª≠ÁöÑÂ≠êÊï∞ÁªÑÁöÑ‰∏™Êï∞„ÄÇ Á§∫‰æã 1 : 12ËæìÂÖ•:nums = [1,1,1], k = 2ËæìÂá∫: 2 , [1,1] ‰∏é [1,1] ‰∏∫‰∏§Áßç‰∏çÂêåÁöÑÊÉÖÂÜµ„ÄÇ ÊÄùË∑Ø Êö¥ÂäõÊ≥ïÔºå‰∏§Ê¨° for Âæ™ÁéØÔºåÈ¶ñÂÖàÊòØ startÔºåÁÑ∂Âêé end ‰ªéÁ¨¨‰∏Ä‰∏™Êï∞ÂºÄÂßãÔºåÂΩìÁ¢∞Âà∞ sum = k Êó∂ count Â∞± + 1 dp„ÄÇdp[i] Ë°®Á§∫‰ªé0Âà∞Á¨¨ i ‰∏™Êï∞ÁöÑÊÄªÂíåÔºåÂàô dp[j] - dp[i] = kÔºåËøô‰∏™ dp[i] ÁöÑ‰∏™Êï∞Â∞±ÊòØ ËøûÁª≠Â≠êÊï∞ÁªÑÁöÑ‰∏™Êï∞ÔºåËøôÈáåÂèØ‰ª•Áî® HashMap Áõ¥Êé•Â≠òÂÇ® Âíå ‰ª•Âèä Âíå Âá∫Áé∞ÁöÑÊ¨°Êï∞ÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÈùûÂ∏∏Êñπ‰æøÁöÑÊ±ÇÂæó dp[i] ÁöÑ‰∏™Êï∞„ÄÇ ‰ª£Á†Å Êö¥ÂäõÊ≥ï 12345678910111213141516class Solution &#123; public int subarraySum(int[] nums, int k) &#123; if (nums.length == 0) return 0; int res = 0; for (int i = 0; i &lt; nums.length; i++) &#123; int sum = 0; for (int j = i; j &lt; nums.length; j++) &#123; sum += nums[j]; if (sum == k) &#123; res++; &#125; &#125; &#125; return res; &#125;&#125; dp 123456789101112131415161718192021222324import java.util.HashMap;class Solution &#123; public static void main(String[] args) &#123; new Solution().subarraySum(new int[]&#123;0, 0, 0, 0, 0, 0, 0, 0, 0, 0&#125;, 0); &#125; public int subarraySum(int[] nums, int k) &#123; if (nums == null || nums.length == 0) return 0; //dp[i]Ë°®Á§∫Ââçi‰∏™Êï∞ÁöÑÂíå int[] dp = new int[nums.length + 1]; for (int i = 1; i &lt;= nums.length; i++) &#123; dp[i] = dp[i - 1] + nums[i - 1]; &#125; int ret = 0; HashMap&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(); for (int i = 0; i &lt; dp.length; i++) &#123; if (map.containsKey(dp[i] - k)) ret += map.get(dp[i] - k); map.put(dp[i], map.getOrDefault(dp[i], 0) + 1); &#125; return ret; &#125;&#125; dp ‰ºòÂåñ 123456789101112131415public class Solution &#123; public int subarraySum(int[] nums, int k) &#123; int count = 0, sum = 0; HashMap&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(); // Âíå‰∏∫0ÁöÑÊÄªÂíåÔºåÂá∫Áé∞‰∫Ü‰∏ÄÊ¨° map.put(0, 1); for (int i = 0; i &lt; nums.length; i++) &#123; sum += nums[i]; if (map.containsKey(sum - k)) count += map.get(sum - k); map.put(sum, map.getOrDefault(sum, 0) + 1); &#125; return count; &#125;&#125; 238. Èô§Ëá™Ë∫´‰ª•Â§ñÊï∞ÁªÑÁöÑ‰πòÁßØÈ¢òÁõÆÁªôÂÆöÈïøÂ∫¶‰∏∫ n ÁöÑÊï¥Êï∞Êï∞ÁªÑ numsÔºåÂÖ∂‰∏≠ n &gt; 1ÔºåËøîÂõûËæìÂá∫Êï∞ÁªÑ output ÔºåÂÖ∂‰∏≠ output[i] Á≠â‰∫é nums ‰∏≠Èô§ nums[i] ‰πãÂ§ñÂÖ∂‰ΩôÂêÑÂÖÉÁ¥†ÁöÑ‰πòÁßØ„ÄÇ Á§∫‰æã: 12ËæìÂÖ•: [1,2,3,4]ËæìÂá∫: [24,12,8,6] ËØ¥Êòé: ËØ∑‰∏çË¶Å‰ΩøÁî®Èô§Ê≥ïÔºå‰∏îÂú® O(n) Êó∂Èó¥Â§çÊùÇÂ∫¶ÂÜÖÂÆåÊàêÊ≠§È¢ò„ÄÇ ËøõÈò∂Ôºö‰Ω†ÂèØ‰ª•Âú®Â∏∏Êï∞Á©∫Èó¥Â§çÊùÇÂ∫¶ÂÜÖÂÆåÊàêËøô‰∏™È¢òÁõÆÂêóÔºüÔºà Âá∫‰∫éÂØπÁ©∫Èó¥Â§çÊùÇÂ∫¶ÂàÜÊûêÁöÑÁõÆÁöÑÔºåËæìÂá∫Êï∞ÁªÑ‰∏çË¢´ËßÜ‰∏∫È¢ùÂ§ñÁ©∫Èó¥„ÄÇÔºâ ÊÄùË∑Ø Â∑¶Ëæπ‰πòÁßØ \ Âè≥Ëæπ‰πòÁßØ*ÔºåÈ¢òÁõÆ‰∏≠Ë¶ÅÊ±Ç‰ΩøÁî® O(1) ÁöÑÁ©∫Èó¥Â§çÊùÇÂ∫¶Ôºå‰ΩÜÊòØ ËæìÂá∫Êï∞ÁªÑ ‰∏çË¢´ËßÜ‰∏∫È¢ùÂ§ñÁ©∫Èó¥Ôºå‰∫éÊòØÂèØ‰ª•Áî®Â∑¶Ëæπ‰πòÁßØ * Âè≥Ëæπ‰πòÁßØÔºåÂÖ∑‰ΩìËßÅ‰ª£Á†ÅÔºÅ ‰ª£Á†Å123456789101112131415161718class Solution &#123; public int[] productExceptSelf(int[] nums) &#123; int[] res = new int[nums.length]; res[0] = 1; for(int i = 1;i &lt; nums.length;i++)&#123; // Ê≠§Êó∂ÊòØËÆ°ÁÆóÊØè‰∏™ÂÄºÁöÑÂ∑¶Ëæπ‰πòÁßØ res[i] = res[i-1] * nums[i-1]; &#125; // Ê≠§Êó∂ÈúÄË¶Å‰∏Ä‰∏™ÂèòÈáèÊù•Ë°®Á§∫Âè≥Ëæπ‰πòÁßØ // ‰ΩÜÊòØ‰∏çÈúÄË¶ÅÊï∞ÁªÑÔºåÂõ†‰∏∫‰ªéÂè≥ËæπÂºÄÂßãÁÆóÔºåÁÆóÂÆå‰∏Ä‰∏™Â∞±ÂèØ‰ª•Ê∏ÖÈô§ÂÆÉ int right = 1; for(int j = nums.length - 1;j &gt;= 0;j--)&#123; res[j] = res[j] * right; right = right * nums[j]; &#125; return res; &#125;&#125; 239. ÊªëÂä®Á™óÂè£ÊúÄÂ§ßÂÄºÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Êï∞ÁªÑ numsÔºåÊúâ‰∏Ä‰∏™Â§ßÂ∞è‰∏∫ k ÁöÑÊªëÂä®Á™óÂè£‰ªéÊï∞ÁªÑÁöÑÊúÄÂ∑¶‰æßÁßªÂä®Âà∞Êï∞ÁªÑÁöÑÊúÄÂè≥‰æß„ÄÇ‰Ω†Âè™ÂèØ‰ª•ÁúãÂà∞Âú®ÊªëÂä®Á™óÂè£ÂÜÖÁöÑ k ‰∏™Êï∞Â≠ó„ÄÇÊªëÂä®Á™óÂè£ÊØèÊ¨°Âè™ÂêëÂè≥ÁßªÂä®‰∏Ä‰Ωç„ÄÇ ËøîÂõûÊªëÂä®Á™óÂè£‰∏≠ÁöÑÊúÄÂ§ßÂÄº„ÄÇ Á§∫‰æã: 123456789101112ËæìÂÖ•: nums = [1,3,-1,-3,5,3,6,7], Âíå k = 3ËæìÂá∫: [3,3,5,5,6,7] Ëß£Èáä: ÊªëÂä®Á™óÂè£ÁöÑ‰ΩçÁΩÆ ÊúÄÂ§ßÂÄº--------------- -----[1 3 -1] -3 5 3 6 7 3 1 [3 -1 -3] 5 3 6 7 3 1 3 [-1 -3 5] 3 6 7 5 1 3 -1 [-3 5 3] 6 7 5 1 3 -1 -3 [5 3 6] 7 6 1 3 -1 -3 5 [3 6 7] 7 ÊèêÁ§∫Ôºö 1‰Ω†ÂèØ‰ª•ÂÅáËÆæ k ÊÄªÊòØÊúâÊïàÁöÑÔºåÂú®ËæìÂÖ•Êï∞ÁªÑ‰∏ç‰∏∫Á©∫ÁöÑÊÉÖÂÜµ‰∏ãÔºå1 ‚â§ k ‚â§ ËæìÂÖ•Êï∞ÁªÑÁöÑÂ§ßÂ∞è„ÄÇ ËøõÈò∂Ôºö 1‰Ω†ËÉΩÂú®Á∫øÊÄßÊó∂Èó¥Â§çÊùÇÂ∫¶ÂÜÖËß£ÂÜ≥Ê≠§È¢òÂêóÔºü ÊÄùË∑Ø Êö¥ÂäõÊ≥ï ÂèåÁ´ØÈòüÂàóÊ≥ï„ÄÇÈÅçÂéÜÊï∞ÁªÑÔºåÂ∞ÜÊï∞Â≠òÊîæÂú®ÂèåÂêëÈòüÂàó‰∏≠ÔºåÂπ∂Áî®L,RÊù•Ê†áËÆ∞Á™óÂè£ÁöÑÂ∑¶ËæπÁïåÂíåÂè≥ËæπÁïå„ÄÇÈòüÂàó‰∏≠‰øùÂ≠òÁöÑÂπ∂‰∏çÊòØÁúüÁöÑÊï∞ÔºåËÄåÊòØËØ•Êï∞ÂÄºÂØπÂ∫îÁöÑÊï∞ÁªÑ‰∏ãÊ†á‰ΩçÁΩÆÔºåÂπ∂‰∏îÊï∞ÁªÑ‰∏≠ÁöÑÊï∞Ë¶Å‰ªéÂ§ßÂà∞Â∞èÊéíÂ∫è„ÄÇÂ¶ÇÊûúÂΩìÂâçÈÅçÂéÜÁöÑÊï∞ÊØîÈòüÂ∞æÁöÑÂÄºÂ§ßÔºåÂàôÈúÄË¶ÅÂºπÂá∫ÈòüÂ∞æÂÄºÔºåÁõ¥Âà∞ÈòüÂàóÈáçÊñ∞Êª°Ë∂≥‰ªéÂ§ßÂà∞Â∞èÁöÑË¶ÅÊ±Ç„ÄÇÂàöÂºÄÂßãÈÅçÂéÜÊó∂ÔºåLÂíåRÈÉΩ‰∏∫0ÔºåÊúâ‰∏Ä‰∏™ÂΩ¢ÊàêÁ™óÂè£ÁöÑËøáÁ®ãÔºåÊ≠§ËøáÁ®ãÊ≤°ÊúâÊúÄÂ§ßÂÄºÔºåL‰∏çÂä®ÔºåRÂêëÂè≥Áßª„ÄÇÂΩìÁ™óÂè£Â§ßÂ∞èÂΩ¢ÊàêÊó∂ÔºåLÂíåR‰∏ÄËµ∑ÂêëÂè≥ÁßªÔºåÊØèÊ¨°ÁßªÂä®Êó∂ÔºåÂà§Êñ≠ÈòüÈ¶ñÁöÑÂÄºÁöÑÊï∞ÁªÑ‰∏ãÊ†áÊòØÂê¶Âú®[L,R]‰∏≠ÔºåÂ¶ÇÊûú‰∏çÂú®ÂàôÈúÄË¶ÅÂºπÂá∫ÈòüÈ¶ñÁöÑÂÄºÔºåÂΩìÂâçÁ™óÂè£ÁöÑÊúÄÂ§ßÂÄºÂç≥‰∏∫ÈòüÈ¶ñÁöÑÊï∞„ÄÇ „ÄêÊúâÁÇπÈöæÔºåÈÄÇÂΩìËÆ∞ÂøÜÊ≠•È™§„Äë ‰ΩúËÄÖÔºöhanyuhuangÈìæÊé•Ôºöhttps://leetcode-cn.com/problems/sliding-window-maximum/solution/shuang-xiang-dui-lie-jie-jue-hua-dong-chuang-kou-2/Êù•Ê∫êÔºöÂäõÊâ£ÔºàLeetCodeÔºâËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ dp„ÄÇËøô‰∏™Â∞±Êõ¥È™ö‰∫Ü‚Ä¶ËßÅÂÆòÊñπÈ¢òËß£ÊñπÊ≥ï‰∏â ‰ª£Á†Å Êö¥ÂäõÊ≥ï 1234567891011121314class Solution &#123; public int[] maxSlidingWindow(int[] nums, int k) &#123; if(nums.length == 0) return new int[]&#123;&#125;; int[] res = new int[nums.length+1-k]; for(int i = 0;i &lt;= nums.length-k;i++)&#123; int max = Integer.MIN_VALUE; for(int j = 0;j &lt; k;j++)&#123; max = Math.max(max,nums[i+j]); &#125; res[i] = max; &#125; return res; &#125;&#125; ÂèåÁ´ØÈòüÂàóÊ≥ï 123456789101112131415161718192021222324252627class Solution &#123; public int[] maxSlidingWindow(int[] nums, int k) &#123; if(nums == null || nums.length &lt; 2) return nums; // ÂèåÂêëÈòüÂàó ‰øùÂ≠òÂΩìÂâçÁ™óÂè£ÊúÄÂ§ßÂÄºÁöÑÊï∞ÁªÑ‰ΩçÁΩÆ ‰øùËØÅÈòüÂàó‰∏≠Êï∞ÁªÑ‰ΩçÁΩÆÁöÑÊï∞ÂÄºÊåâ‰ªéÂ§ßÂà∞Â∞èÊéíÂ∫è LinkedList&lt;Integer&gt; queue = new LinkedList(); // ÁªìÊûúÊï∞ÁªÑ int[] result = new int[nums.length-k+1]; // ÈÅçÂéÜnumsÊï∞ÁªÑ for(int i = 0;i &lt; nums.length;i++)&#123; // ‰øùËØÅ‰ªéÂ§ßÂà∞Â∞è Â¶ÇÊûúÂâçÈù¢Êï∞Â∞èÂàôÈúÄË¶Å‰æùÊ¨°ÂºπÂá∫ÔºåÁõ¥Ëá≥Êª°Ë∂≥Ë¶ÅÊ±Ç while(!queue.isEmpty() &amp;&amp; nums[queue.peekLast()] &lt;= nums[i])&#123; queue.pollLast(); &#125; // Ê∑ªÂä†ÂΩìÂâçÂÄºÂØπÂ∫îÁöÑÊï∞ÁªÑ‰∏ãÊ†á queue.addLast(i); // Âà§Êñ≠ÂΩìÂâçÈòüÂàó‰∏≠ÈòüÈ¶ñÁöÑÂÄºÊòØÂê¶ÊúâÊïà if(queue.peek() &lt;= i-k)&#123; queue.poll(); &#125; // ÂΩìÁ™óÂè£ÈïøÂ∫¶‰∏∫kÊó∂ ‰øùÂ≠òÂΩìÂâçÁ™óÂè£‰∏≠ÊúÄÂ§ßÂÄº if(i+1 &gt;= k)&#123; result[i+1-k] = nums[queue.peek()]; &#125; &#125; return result; &#125;&#125; dp 12345678910111213141516171819202122232425262728class Solution &#123; public int[] maxSlidingWindow(int[] nums, int k) &#123; int n = nums.length; if (n * k == 0) return new int[0]; if (k == 1) return nums; int [] left = new int[n]; left[0] = nums[0]; int [] right = new int[n]; right[n - 1] = nums[n - 1]; for (int i = 1; i &lt; n; i++) &#123; // from left to right if (i % k == 0) left[i] = nums[i]; // block_start else left[i] = Math.max(left[i - 1], nums[i]); // from right to left int j = n - i - 1; if ((j + 1) % k == 0) right[j] = nums[j]; // block_end else right[j] = Math.max(right[j + 1], nums[j]); &#125; int [] output = new int[n - k + 1]; for (int i = 0; i &lt; n - k + 1; i++) output[i] = Math.max(left[i + k - 1], right[i]); return output; &#125;&#125; 240. ÊêúÁ¥¢‰∫åÁª¥Áü©Èòµ IIÈ¢òÁõÆÁºñÂÜô‰∏Ä‰∏™È´òÊïàÁöÑÁÆóÊ≥ïÊù•ÊêúÁ¥¢ m x n Áü©Èòµ matrix ‰∏≠ÁöÑ‰∏Ä‰∏™ÁõÆÊ†áÂÄº target„ÄÇËØ•Áü©ÈòµÂÖ∑Êúâ‰ª•‰∏ãÁâπÊÄßÔºö ÊØèË°åÁöÑÂÖÉÁ¥†‰ªéÂ∑¶Âà∞Âè≥ÂçáÂ∫èÊéíÂàó„ÄÇ ÊØèÂàóÁöÑÂÖÉÁ¥†‰ªé‰∏äÂà∞‰∏ãÂçáÂ∫èÊéíÂàó„ÄÇ Á§∫‰æã: Áé∞ÊúâÁü©Èòµ matrix Â¶Ç‰∏ãÔºö 1234567[ [1, 4, 7, 11, 15], [2, 5, 8, 12, 19], [3, 6, 9, 16, 22], [10, 13, 14, 17, 24], [18, 21, 23, 26, 30]] ÁªôÂÆö target = 5ÔºåËøîÂõû true„ÄÇ ÁªôÂÆö target = 20ÔºåËøîÂõû false„ÄÇ ÊÄùË∑ØÊö¥ÂäõÊ≥ïÁõ¥Êé•ÂÖàË°åÂêéÂàóÈÅçÂéÜÔºåÈÅçÂéÜÂà∞‰∫Ü target ÈÄÄÂá∫„ÄÇ ‰∫åÂàÜÊü•ÊâæÊ≥ï‰ª•ÂØπËßíÁ∫ø‰∏∫ÁïåÈôêÔºåÂØπËßíÁ∫ø‰πã‰∏äÁöÑËøõË°å Ë°å‰∫åÂàÜÊü•ÊâæÔºåÂØπËßíÁ∫ø‰πã‰∏ãÁöÑËøõË°å Âàó‰∫åÂàÜÊü•Êâæ„ÄÇ ÂáèÊ≤ªÊ≥ïÂÖ∂ÂÆûÂ∞±ÊòØÈÄâÂÆö‰∏Ä‰∏™ÁâπÊÆäÁöÑÂá∫ÂèëÁÇπ„ÄÇ ÈÄâÂ∑¶‰∏äËßíÔºåÂæÄÂè≥Ëµ∞ÂíåÂæÄ‰∏ãËµ∞ÈÉΩÂ¢ûÂ§ßÔºå‰∏çËÉΩÈÄâ ÈÄâÂè≥‰∏ãËßíÔºåÂæÄ‰∏äËµ∞ÂíåÂæÄÂ∑¶Ëµ∞ÈÉΩÂáèÂ∞èÔºå‰∏çËÉΩÈÄâ ÈÄâÂ∑¶‰∏ãËßíÔºåÂæÄÂè≥Ëµ∞Â¢ûÂ§ßÔºåÂæÄ‰∏äËµ∞ÂáèÂ∞èÔºåÂèØÈÄâ ÈÄâÂè≥‰∏äËßíÔºåÂæÄ‰∏ãËµ∞Â¢ûÂ§ßÔºåÂæÄÂ∑¶Ëµ∞ÂáèÂ∞èÔºåÂèØÈÄâ ËøôÈáåÊàë‰ª¨ÈÄâÂÆöÂ∑¶‰∏ãËßíÂÖÉÁ¥†ÔºÅÔºÅÂÖ∑‰ΩìÊìç‰ΩúÂ¶Ç‰∏ãÔºö * ËÆæÁü©ÈòµÂ∑¶‰∏ãËßíÂÖÉÁ¥† matrix\[i][j] ÔºåÂÆÉÊòØÁ¨¨ i Ë°åÊúÄÂ∞èÂÄºÔºåÂêåÊó∂‰πüÊòØÁ¨¨ j ÂàóÊúÄÂ§ßÂÄº Ëã• target &lt; matrix[i][j] (Â∞è‰∫éÁ¨¨ i Ë°åÊúÄÂ∞èÂÄº)ÔºåÂàôÊéíÈô§Á¨¨ i Ë°åÔºå‰ª§ i‚Äì Ëã• target &gt; matrix[i][j] (Â§ß‰∫éÁ¨¨ j ÂàóÊúÄÂ§ßÂÄº)ÔºåÂàôÊéíÈô§Á¨¨ j ÂàóÔºå‰ª§ j++ Âæ™ÁéØ 2~3 Áõ¥Âà∞ÊâæÂà∞ targetÔºåÊàñÊâÄÊúâË°åÂàóÂùáË¢´ÊéíÈô§ ‰ª£Á†Å Êö¥ÂäõÊ≥ï 123456789101112class Solution &#123; public boolean searchMatrix(int[][] matrix, int target) &#123; for (int i = 0; i &lt; matrix.length; i++) &#123; for (int j = 0; j &lt; matrix[0].length; j++) &#123; if (matrix[i][j] == target) &#123; return true; &#125; &#125; &#125; return false; &#125;&#125; ‰∫åÂàÜ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748class Solution &#123; private boolean binarySearch(int[][] matrix, int target, int start, boolean vertical) &#123; int lo = start; int hi = vertical ? matrix[0].length-1 : matrix.length-1; while (hi &gt;= lo) &#123; int mid = (lo + hi)/2; if (vertical) &#123; // searching a column if (matrix[start][mid] &lt; target) &#123; lo = mid + 1; &#125; else if (matrix[start][mid] &gt; target) &#123; hi = mid - 1; &#125; else &#123; return true; &#125; &#125; else &#123; // searching a row if (matrix[mid][start] &lt; target) &#123; lo = mid + 1; &#125; else if (matrix[mid][start] &gt; target) &#123; hi = mid - 1; &#125; else &#123; return true; &#125; &#125; &#125; return false; &#125; public boolean searchMatrix(int[][] matrix, int target) &#123; // an empty matrix obviously does not contain `target` if (matrix == null || matrix.length == 0) &#123; return false; &#125; // iterate over matrix diagonals int shorterDim = Math.min(matrix.length, matrix[0].length); for (int i = 0; i &lt; shorterDim; i++) &#123; boolean verticalFound = binarySearch(matrix, target, i, true); boolean horizontalFound = binarySearch(matrix, target, i, false); if (verticalFound || horizontalFound) &#123; return true; &#125; &#125; return false; &#125;&#125; ÂáèÊ≤ªÊ≥ï 12345678910111213141516171819class Solution &#123; public boolean searchMatrix(int[][] matrix, int target) &#123; // start our "pointer" in the bottom-left int row = matrix.length-1; int col = 0; while (row &gt;= 0 &amp;&amp; col &lt; matrix[0].length) &#123; if (matrix[row][col] &gt; target) &#123; row--; &#125; else if (matrix[row][col] &lt; target) &#123; col++; &#125; else &#123; // found it return true; &#125; &#125; return false; &#125;&#125; 279. ÂÆåÂÖ®Âπ≥ÊñπÊï∞È¢òÁõÆÁªôÂÆöÊ≠£Êï¥Êï∞ nÔºåÊâæÂà∞Ëã•Âπ≤‰∏™ÂÆåÂÖ®Âπ≥ÊñπÊï∞ÔºàÊØîÂ¶Ç 1, 4, 9, 16, ...Ôºâ‰ΩøÂæóÂÆÉ‰ª¨ÁöÑÂíåÁ≠â‰∫é n„ÄÇ‰Ω†ÈúÄË¶ÅËÆ©ÁªÑÊàêÂíåÁöÑÂÆåÂÖ®Âπ≥ÊñπÊï∞ÁöÑ‰∏™Êï∞ÊúÄÂ∞ë„ÄÇ Á§∫‰æã 1: 123ËæìÂÖ•: n = 12ËæìÂá∫: 3 Ëß£Èáä: 12 = 4 + 4 + 4. Á§∫‰æã 2: 123ËæìÂÖ•: n = 13ËæìÂá∫: 2Ëß£Èáä: 13 = 4 + 9. ÊÄùË∑Ødp ‰ª£Á†Å123456789101112class Solution &#123; public int numSquares(int n) &#123; int[] dp = new int[n + 1]; // ÈªòËÆ§ÂàùÂßãÂåñÂÄºÈÉΩ‰∏∫0 for (int i = 1; i &lt;= n; i++) &#123; dp[i] = i; // ÊúÄÂùèÁöÑÊÉÖÂÜµÂ∞±ÊòØÊØèÊ¨°+1 for (int j = 1; i - j * j &gt;= 0; j++) &#123; dp[i] = Math.min(dp[i], dp[i - j * j] + 1); // Âä®ÊÄÅËΩ¨ÁßªÊñπÁ®ã &#125; &#125; return dp[n]; &#125;&#125; 283. ÁßªÂä®Èõ∂È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Êï∞ÁªÑ numsÔºåÁºñÂÜô‰∏Ä‰∏™ÂáΩÊï∞Â∞ÜÊâÄÊúâ 0 ÁßªÂä®Âà∞Êï∞ÁªÑÁöÑÊú´Â∞æÔºåÂêåÊó∂‰øùÊåÅÈùûÈõ∂ÂÖÉÁ¥†ÁöÑÁõ∏ÂØπÈ°∫Â∫è„ÄÇ Á§∫‰æã: 12ËæìÂÖ•: [0,1,0,3,12]ËæìÂá∫: [1,3,12,0,0] ËØ¥Êòé: ÂøÖÈ°ªÂú®ÂéüÊï∞ÁªÑ‰∏äÊìç‰ΩúÔºå‰∏çËÉΩÊã∑Ë¥ùÈ¢ùÂ§ñÁöÑÊï∞ÁªÑ„ÄÇ Â∞ΩÈáèÂáèÂ∞ëÊìç‰ΩúÊ¨°Êï∞„ÄÇ ÊÄùË∑ØÂÖàÂ§çÂà∂ÂêéË°•0 ‰ª£Á†Å1234567891011121314151617class Solution &#123; public void moveZeroes(int[] nums) &#123; int index = 0; for(int i = 0;i &lt; nums.length;i++)&#123; if(nums[i] != 0)&#123; // ÂÖàÂ§çÂà∂ nums[index] = nums[i]; index++; &#125; &#125; // Ë°•0 while(index &lt; nums.length)&#123; nums[index] = 0; index++; &#125; &#125;&#125; 287. ÂØªÊâæÈáçÂ§çÊï∞È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ÂåÖÂê´ n + 1 ‰∏™Êï¥Êï∞ÁöÑÊï∞ÁªÑ numsÔºåÂÖ∂Êï∞Â≠óÈÉΩÂú® 1 Âà∞ n ‰πãÈó¥ÔºàÂåÖÊã¨ 1 Âíå nÔºâÔºåÂèØÁü•Ëá≥Â∞ëÂ≠òÂú®‰∏Ä‰∏™ÈáçÂ§çÁöÑÊï¥Êï∞„ÄÇÂÅáËÆæÂè™Êúâ‰∏Ä‰∏™ÈáçÂ§çÁöÑÊï¥Êï∞ÔºåÊâæÂá∫Ëøô‰∏™ÈáçÂ§çÁöÑÊï∞„ÄÇ Á§∫‰æã 1: 12ËæìÂÖ•: [1,3,4,2,2]ËæìÂá∫: 2 Á§∫‰æã 2: 12ËæìÂÖ•: [3,1,3,4,2]ËæìÂá∫: 3 ËØ¥ÊòéÔºö ‰∏çËÉΩÊõ¥ÊîπÂéüÊï∞ÁªÑÔºàÂÅáËÆæÊï∞ÁªÑÊòØÂè™ËØªÁöÑÔºâ„ÄÇ Âè™ËÉΩ‰ΩøÁî®È¢ùÂ§ñÁöÑ O(1) ÁöÑÁ©∫Èó¥„ÄÇ Êó∂Èó¥Â§çÊùÇÂ∫¶Â∞è‰∫é O(n2) „ÄÇ Êï∞ÁªÑ‰∏≠Âè™Êúâ‰∏Ä‰∏™ÈáçÂ§çÁöÑÊï∞Â≠óÔºå‰ΩÜÂÆÉÂèØËÉΩ‰∏çÊ≠¢ÈáçÂ§çÂá∫Áé∞‰∏ÄÊ¨°„ÄÇ ÊÄùË∑Ø ÊéíÂ∫èÂêéÔºåÁõ∏ÈÇªÂÖÉÁ¥†Â¶ÇÊûúÁõ∏Á≠âÔºåÂàô return Áî® set Â≠òÂÇ®Ôºå‰∏ÄÊó¶ÂèëÁé∞ key Â∑≤ÁªèÂ≠òÂú®ÔºåÁõ¥Êé•ËøîÂõûÔºåÂê¶ÂàôÂ≠òÂÖ• map ‰∏≠ ÂÖ∂ÂÆûËøôÊòØ‰∏Ä‰∏™ÈìæË°®‰∏≠ÈùûÂ∏∏Â∏∏ËßÅÁöÑÈóÆÈ¢òÔºåÂ∞±ÊòØÂØªÊâæÁéØÁöÑÂÖ•Âè£ÈóÆÈ¢òÔºån ‰∏™‰∏çÂêåÁöÑÊï∞ÔºåÁõ∏ÂêåÁöÑÈÇ£‰∏™Êï∞ÂÖ∂ÂÆûÂ∞±ÊòØÂΩ¢Êàê‰∏Ä‰∏™ÁéØ„ÄÇÂç≥ÂÖÉÁ¥†Á¥¢Âºï‰∏ãÊ†á‰∏∫ËäÇÁÇπ nodeÔºåËÄå node ÁöÑ next ÊåáÈíàÂàôÊòØ ÂÖÉÁ¥†ÂÄº ÊâÄÂØπÂ∫îÁöÑÁ¥¢Âºï‰∏ãÊ†áÂÄº„ÄÇ Tip: ‰æãÂ¶Ç[2,1,2,3,4]ÔºåËøô‰∏™ÊòØÁ¨¶ÂêàÈ¢òÁõÆË¶ÅÊ±Ç‰∏îÁ¨¶ÂêàËá™Âæ™ÁéØÁöÑÊÉÖÂÜµÔºåÂú®nums[2]Â§ÑÔºåÁ¥¢ÂºïÂÄºÂíåÂÖÉÁ¥†ÂÄºÁõ∏Á≠âÔºåÂú®ËøôÈáåÁöÑÁ°ÆÔºåÂø´ÊÖ¢ÊåáÈíà‰ºöÂú®2ÁöÑ‰ΩçÁΩÆ‰∏çÂÅúÊåáÂêëËá™Â∑±Ôºå‰ΩÜÊòØÂè™Ë¶ÅÂèëÁîüËøôÁßçËá™Âæ™ÁéØÁöÑÊÉÖÂÜµÔºåÈÇ£‰πàÈáçÂ§çÁöÑÊï∞Â≠óÂ∞±ÊòØËøô‰∏™ÔºåÊàë‰ª¨‰æùÊóßÂèØ‰ª•‰ΩøÁî®Âø´ÊÖ¢ÊåáÈíàÁöÑÊñπÊ≥ïÂéªÂÅöÔºåÂõ†‰∏∫Êàë‰ª¨ÁöÑÂÅöÊ≥ïÂ∞±ÊòØÂÖàÊ±Ç‰∏ÄÊ¨°Áõ∏ÈÅáÔºåÁÑ∂ÂêéÊÖ¢ÊåáÈíàÂõûÂà∞ÂéüÁÇπÔºåÁ¨¨‰∫åÊ¨°Áõ∏ÈÅáÂ∞±ÊòØÁéØÁöÑËµ∑ÁÇπÔºåÂú®ËøôÈáåÔºåÊó¢ÁÑ∂ÊòØËá™Âæ™ÁéØÁöÑÔºåÈÇ£‰πàÂΩìÁÑ∂ÊúÄÂêéÁ¨¨‰∫åÊ¨°Áõ∏ÈÅáËøòÊòØÂú®ËøôÈáåÔºåÁ≠îÊ°àÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ ‰∫åÂàÜÊ≥ï ‰ª£Á†Å ÊéíÂ∫è 1234567891011class Solution &#123; public int findDuplicate(int[] nums) &#123; Arrays.sort(nums); for (int i = 1; i &lt; nums.length; i++) &#123; if (nums[i] == nums[i-1]) &#123; return nums[i]; &#125; &#125; return -1; &#125;&#125; Set Â≠òÂÇ® 123456789101112class Solution &#123; public int findDuplicate(int[] nums) &#123; Set&lt;Integer&gt; seen = new HashSet&lt;Integer&gt;(); for (int num : nums) &#123; if (seen.contains(num)) &#123; return num; &#125; seen.add(num); &#125; return -1; &#125;&#125; Âø´ÊÖ¢ÊåáÈíà 12345678910111213141516171819class Solution &#123; public int findDuplicate(int[] nums) &#123; // Find the intersection point of the two runners. int slow = nums[0]; int fast = nums[0]; do &#123; slow = nums[slow]; fast = nums[nums[fast]]; &#125; while (slow != fast); // Find the "entrance" to the cycle. slow = nums[0]; while (fast != slow) &#123; fast = nums[fast]; slow = nums[slow]; &#125; return fast; &#125;&#125; ‰∫åÂàÜ 1234567891011121314151617181920212223class Solution &#123; public int findDuplicate(int[] nums) &#123; int left = 0; int right = nums.length - 1; while(left &lt;= right)&#123; int mid = left + (right - left)/2; int count = 0; int mid_count = 0; for(int i = 0;i &lt; nums.length;i++)&#123; if(nums[i] &lt;= mid) count++; if(nums[i] == mid) mid_count++; &#125; // Â¶ÇÊûú [left,mid] Ê≤°ÊúâÂá∫Áé∞ÈáçÂ§çÊï∞Â≠óÔºåcount &lt;= mid // Âê¶ÂàôËØ¥ÊòéÂú®Ëøô‰∏™Âå∫Èó¥Âá∫Áé∞‰∫ÜÈáçÂ§çÁöÑ // ËøôÈáåË∑üÂ∏∏ËßÅÁöÑ ‰∫åÂàÜÊúâ‰∏ÄÁÇπÁÇπ‰∏çÂêåÔºåËøôÈáå right = midÔºå‰∏çÊòØ right = mid - 1 // Âõ†‰∏∫ÊàëÂú®‰∏äÈù¢ËÆ°ÁÆó count ÁöÑÊó∂ÂÄô ÊòØÊúâËÆ°ÁÆó mid ÁöÑ if(mid_count &gt; 1) return mid; if(count &gt; mid) right = mid - 1; else left = mid + 1; &#125; return -1; &#125;&#125; 301. Âà†Èô§Êó†ÊïàÁöÑÊã¨Âè∑ÔºàÊöÇÊó∂Êú™ÂÅöÂìà~ ÂÖàÊää‰ª£Á†ÅË¥¥‰∏Ä‰∏ã Á¨¨‰∫åÈÅçÂÜôÔºâ È¢òÁõÆÂà†Èô§ÊúÄÂ∞èÊï∞ÈáèÁöÑÊó†ÊïàÊã¨Âè∑Ôºå‰ΩøÂæóËæìÂÖ•ÁöÑÂ≠óÁ¨¶‰∏≤ÊúâÊïàÔºåËøîÂõûÊâÄÊúâÂèØËÉΩÁöÑÁªìÊûú„ÄÇ ËØ¥Êòé: ËæìÂÖ•ÂèØËÉΩÂåÖÂê´‰∫ÜÈô§ ( Âíå ) ‰ª•Â§ñÁöÑÂ≠óÁ¨¶„ÄÇ Á§∫‰æã 1: 12ËæìÂÖ•: "()())()"ËæìÂá∫: ["()()()", "(())()"] Á§∫‰æã 2: 12ËæìÂÖ•: "(a)())()"ËæìÂá∫: ["(a)()()", "(a())()"] Á§∫‰æã 3: 12ËæìÂÖ•: ")("ËæìÂá∫: [""] ÊÄùË∑Ø‰ª£Á†Å12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788class Solution &#123; public List&lt;String&gt; removeInvalidParentheses(String s) &#123; // ÁªüËÆ°ÈúÄË¶ÅÂà†Èô§ÁöÑÂ∑¶Êã¨Âè∑ÂíåÂè≥Êã¨Âè∑Êï∞Èáè int left = 0, right = 0; for (int i = 0; i &lt; s.length(); i++) &#123; char c = s.charAt(i); if (c == '(') &#123; left++; &#125; else if (c == ')') &#123; if (left &gt; 0) left--; else right++; &#125; &#125; // ÂºÄÂßãÂà†Èô§ List&lt;String&gt; res = new ArrayList&lt;&gt;(); List&lt;String&gt; array = new ArrayList&lt;&gt;(); Set&lt;String&gt; set = new HashSet&lt;&gt;(); array.add(s); // ÂÖàÂà†Â∑¶Êã¨Âè∑ while (left-- &gt; 0) &#123; List&lt;String&gt; tempArray = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; array.size(); i++) &#123; String ss = array.get(i); for (int j = 0; j &lt; ss.length(); j++) &#123; if (ss.charAt(j) == '(') &#123; String sss = ss.substring(0, j) + ss.substring(j + 1); if (!set.contains(sss)) &#123; set.add(sss); tempArray.add(sss); &#125; &#125; &#125; &#125; array = tempArray; &#125; // Âà†Âè≥Êã¨Âè∑ while (right-- &gt; 0) &#123; List&lt;String&gt; tempArray = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; array.size(); i++) &#123; String ss = array.get(i); for (int j = 0; j &lt; ss.length(); j++) &#123; if (ss.charAt(j) == ')') &#123; String sss = ss.substring(0, j) + ss.substring(j + 1); if (!set.contains(sss)) &#123; set.add(sss); tempArray.add(sss); &#125; &#125; &#125; &#125; array = tempArray; &#125; // ÂØπÂà†Èô§ÂêéÂ≠óÁ¨¶‰∏≤ËøõË°åÈ™åËØÅ for (int i = 0; i &lt; array.size(); i++) &#123; String str = array.get(i); if (this.checkVaild(str)) &#123; res.add(str); &#125; &#125; return res; &#125; private boolean checkVaild(String s) &#123; Stack&lt;Character&gt; stack = new Stack&lt;&gt;(); for (int i = 0; i &lt; s.length(); i++) &#123; char c = s.charAt(i); if (c == '(' ) &#123; stack.push(c); &#125; else if (c == ')') &#123; if (stack.empty() || stack.peek() == ')') &#123; stack.push(c); &#125; else &#123; stack.pop(); &#125; &#125; &#125; if (stack.empty()) return true; return false; &#125;&#125; 312. Êà≥Ê∞îÁêÉ„ÄêË∑ü‰∏äÈù¢‰∏ÄÊ†∑ÔºåËøô‰∏§È¢òÊ≤°ÂÅöÂë¢ÔºÅ„Äë È¢òÁõÆÊúâ n ‰∏™Ê∞îÁêÉÔºåÁºñÂè∑‰∏∫0 Âà∞ n-1ÔºåÊØè‰∏™Ê∞îÁêÉ‰∏äÈÉΩÊ†áÊúâ‰∏Ä‰∏™Êï∞Â≠óÔºåËøô‰∫õÊï∞Â≠óÂ≠òÂú®Êï∞ÁªÑ nums ‰∏≠„ÄÇ Áé∞Âú®Ë¶ÅÊ±Ç‰Ω†Êà≥Á†¥ÊâÄÊúâÁöÑÊ∞îÁêÉ„ÄÇÊØèÂΩì‰Ω†Êà≥Á†¥‰∏Ä‰∏™Ê∞îÁêÉ i Êó∂Ôºå‰Ω†ÂèØ‰ª•Ëé∑Âæó nums[left] * nums[i] * nums[right] ‰∏™Á°¨Â∏Å„ÄÇ ËøôÈáåÁöÑ left Âíå right ‰ª£Ë°®Âíå i Áõ∏ÈÇªÁöÑ‰∏§‰∏™Ê∞îÁêÉÁöÑÂ∫èÂè∑„ÄÇÊ≥®ÊÑèÂΩì‰Ω†Êà≥Á†¥‰∫ÜÊ∞îÁêÉ i ÂêéÔºåÊ∞îÁêÉ left ÂíåÊ∞îÁêÉ right Â∞±ÂèòÊàê‰∫ÜÁõ∏ÈÇªÁöÑÊ∞îÁêÉ ÊÄùË∑ØË∂ÖËØ¶ÁªÜÂõûÊ∫ØÂà∞dp ‰ª£Á†Å123456789101112131415161718192021222324252627282930313233343536class Solution &#123; public static int maxCoins(int[] nums) &#123; //ÈÅøÂÖçÁ©∫ÊåáÈíàÂºÇÂ∏∏ if (nums == null) &#123; return 0; &#125; //ÂàõÂª∫ËôöÊãüËæπÁïå int length = nums.length; int[] nums2 = new int[length + 2]; System.arraycopy(nums, 0, nums2, 1, length); nums2[0] = 1; nums2[length + 1] = 1; length = nums2.length; //ÂàõÂª∫dpË°® length = nums2.length; int[][] dp = new int[length][length]; //ÂºÄÂßãdpÔºöi‰∏∫beginÔºåj‰∏∫endÔºåk‰∏∫Âú®i„ÄÅjÂå∫Èó¥ÂàíÂàÜÂ≠êÈóÆÈ¢òÊó∂ÁöÑËæπÁïå for (int i = length - 2; i &gt; -1; i--) &#123; for (int j = i + 2; j &lt; length; j++) &#123; //Áª¥Êä§‰∏Ä‰∏™ÊúÄÂ§ßÂÄºÔºõÂ¶ÇÊûúi„ÄÅjÁõ∏ÈÇªÔºåÂÄº‰∏∫0 int max = 0; for (int k = i + 1; k &lt; j; k++) &#123; int temp = dp[i][k] + dp[k][j] + nums2[i] * nums2[k] * nums2[j]; if (temp &gt; max) &#123; max = temp; &#125; &#125; dp[i][j] = max; &#125; &#125; return dp[0][length-1]; &#125;&#125; 338. ÊØîÁâπ‰ΩçËÆ°Êï∞È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ÈùûË¥üÊï¥Êï∞ num„ÄÇÂØπ‰∫é 0 ‚â§ i ‚â§ num ËåÉÂõ¥‰∏≠ÁöÑÊØè‰∏™Êï∞Â≠ó i ÔºåËÆ°ÁÆóÂÖ∂‰∫åËøõÂà∂Êï∞‰∏≠ÁöÑ 1 ÁöÑÊï∞ÁõÆÂπ∂Â∞ÜÂÆÉ‰ª¨‰Ωú‰∏∫Êï∞ÁªÑËøîÂõû„ÄÇ Á§∫‰æã 1: 12ËæìÂÖ•: 2ËæìÂá∫: [0,1,1] Á§∫‰æã 2: 12ËæìÂÖ•: 5ËæìÂá∫: [0,1,1,2,1,2] ËøõÈò∂: ÁªôÂá∫Êó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(n*sizeof(integer))ÁöÑËß£Á≠îÈùûÂ∏∏ÂÆπÊòì„ÄÇ‰ΩÜ‰Ω†ÂèØ‰ª•Âú®Á∫øÊÄßÊó∂Èó¥O(n)ÂÜÖÁî®‰∏ÄË∂üÊâ´ÊèèÂÅöÂà∞ÂêóÔºü Ë¶ÅÊ±ÇÁÆóÊ≥ïÁöÑÁ©∫Èó¥Â§çÊùÇÂ∫¶‰∏∫O(n)„ÄÇ ‰Ω†ËÉΩËøõ‰∏ÄÊ≠•ÂÆåÂñÑËß£Ê≥ïÂêóÔºüË¶ÅÊ±ÇÂú®C++Êàñ‰ªª‰ΩïÂÖ∂‰ªñËØ≠Ë®Ä‰∏≠‰∏ç‰ΩøÁî®‰ªª‰ΩïÂÜÖÁΩÆÂáΩÊï∞Êù•ÊâßË°åÊ≠§Êìç‰Ωú„ÄÇ ÊÄùË∑Ø ‰ªé 191. ‰Ωç1ÁöÑ‰∏™Êï∞ ‰∏≠ÂêØÂèëËÄåÊù•Ôºån &amp;Ôºàn-1ÔºâËøôÁßçÁßÄÁöÑ‰∏ÄÊâπÁöÑÊìç‰Ωú ÂØπ‰∏äËø∞ÊñπÊ≥ïÊúâ‰∏Ä‰∏™ÊîπËøõÁâàÔºåÂä®ÊÄÅËßÑÂàíÁâàÊú¨ÁöÑ ‰ª£Á†Å Case I 123456789101112131415161718class Solution &#123; public int[] countBits(int num) &#123; int[] res = new int[num+1]; for(int i = 0;i &lt;= num;i++)&#123; res[i] = hammingWeight(i); &#125; return res; &#125; public int hammingWeight(int n) &#123; int sum = 0; while(n != 0)&#123; sum++; n = n &amp; (n-1); &#125; return sum; &#125;&#125; Case II 123456789class Solution &#123; public int[] countBits(int num) &#123; int[] dp = new int[num+1]; for(int i = 1;i &lt;= num;i++)&#123; dp[i] = dp[i&amp;(i-1)] + 1; &#125; return dp; &#125;&#125; 347. Ââç K ‰∏™È´òÈ¢ëÂÖÉÁ¥†È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ÈùûÁ©∫ÁöÑÊï¥Êï∞Êï∞ÁªÑÔºåËøîÂõûÂÖ∂‰∏≠Âá∫Áé∞È¢ëÁéáÂâç k È´òÁöÑÂÖÉÁ¥†„ÄÇ Á§∫‰æã 1: 12ËæìÂÖ•: nums = [1,1,1,2,2,3], k = 2ËæìÂá∫: [1,2] Á§∫‰æã 2: 12ËæìÂÖ•: nums = [1], k = 1ËæìÂá∫: [1] ËØ¥ÊòéÔºö ‰Ω†ÂèØ‰ª•ÂÅáËÆæÁªôÂÆöÁöÑ k ÊÄªÊòØÂêàÁêÜÁöÑÔºå‰∏î 1 ‚â§ k ‚â§ Êï∞ÁªÑ‰∏≠‰∏çÁõ∏ÂêåÁöÑÂÖÉÁ¥†ÁöÑ‰∏™Êï∞„ÄÇ ‰Ω†ÁöÑÁÆóÊ≥ïÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÂøÖÈ°ª‰ºò‰∫é O(n log n) , n ÊòØÊï∞ÁªÑÁöÑÂ§ßÂ∞è„ÄÇ ÊÄùË∑Ø ÂÄüÂä© 2020-02-02 Âë®ËµõÁöÑ‰∏ÄÈÅìÈ¢òÁöÑÊÄùË∑ØÔºåÂ∞ÜÂÖ∂Â≠òÂÖ• mapÔºåÁÑ∂ÂêéÁî® list Â≠òÂÇ® mapÔºåÁÑ∂ÂêéÂà©Áî®ÈõÜÂêàÁöÑÊéíÂ∫èÊñπÊ≥ïÔºåÂØπÂÖ∂ËøõË°åÊéíÂ∫èÔºåÂÜçËΩ¨Êàê mapÔºåÁÑ∂ÂêéÁî® iterator ÈÅçÂéÜÂç≥ÂèØ„ÄÇ ÊÄùË∑ØÂü∫Êú¨‰∏ÄËá¥Ôºå‰ΩÜÊòØÂÖ∂ÂÆûËøôÈáåÊéíÂ∫è‰πãÂêéÊ†πÊú¨Áî®‰∏çÂà∞ value ‰∫ÜÔºåÊâÄ‰ª•Ê†πÊú¨Ê≤°ÂøÖË¶ÅÂÜçËΩ¨Êàê mapÔºåÊâÄ‰ª•ÂèØ‰ª•‰∏çÁî® list ÂéªÂ≠òÂÇ® entry ÂØπË±°ÔºåÁõ¥Êé•Áî® PriorityQueue ÂéªÂØπ value ÊéíÂ∫èÔºåÁÑ∂ÂêéÂ≠òÂÇ® key ÂÄºÂ∞±ÂèØ‰ª•‰∫ÜÔºåÂõ†‰∏∫ PriorityQueue ÊòØÊúÄÂ∞èÂ†ÜÂÆûÁé∞ÁöÑÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶Âè™Êúâ O(nlogn) Ëøô‰∏™ÊñπÊ≥ï‰∏çÁî®ÊéíÂ∫èÔºåÁî® map Â≠òÂÇ®ÂÆå‰πãÂêéÔºåÁõ¥Êé•ÊîæÂà∞Ê°∂‰∏≠ÔºàvalueÂÄº‰Ωú‰∏∫Ê°∂ÁöÑÂ∫èÂè∑ÔºâÔºåÂ≠òÂÖ• key„ÄÇ ‰ª£Á†Å Case I 12345678910111213141516171819202122232425262728293031323334class Solution &#123; public List&lt;Integer&gt; topKFrequent(int[] nums, int k) &#123; Map&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;(); for (int i = 0; i &lt; nums.length; i++) &#123; if (map.get(nums[i]) != null) &#123; map.put(nums[i], map.get(nums[i]) + 1); &#125; else &#123; map.put(nums[i], 1); &#125; &#125; List&lt;Map.Entry&lt;Integer, Integer&gt;&gt; list = new ArrayList(map.entrySet()); // Êåâ value ÊéíÂ∫èÔºåÈôçÂ∫èÊéíÂ∫è Collections.sort(list, (o1, o2) -&gt; &#123; int compare = (o1.getValue()).compareTo(o2.getValue()); return -compare; &#125;); Map&lt;Integer, Integer&gt; returnMap = new LinkedHashMap&lt;Integer, Integer&gt;(); for (Map.Entry&lt;Integer, Integer&gt; entry : list) &#123; returnMap.put(entry.getKey(), entry.getValue()); &#125; int i = 0; List&lt;Integer&gt; res = new ArrayList(); for(Map.Entry&lt;Integer, Integer&gt; entry:returnMap.entrySet())&#123; if(i == k)&#123; break; &#125; else &#123; res.add(entry.getKey()); i++; &#125; &#125; return res; &#125;&#125; Case II 12345678910111213141516171819202122232425262728class Solution &#123; public List&lt;Integer&gt; topKFrequent(int[] nums, int k) &#123; // build hash map : character and how often it appears HashMap&lt;Integer, Integer&gt; count = new HashMap(); for (int n: nums) &#123; count.put(n, count.getOrDefault(n, 0) + 1); &#125; // init heap 'the less frequent element first' PriorityQueue&lt;Integer&gt; heap = new PriorityQueue&lt;Integer&gt;((n1, n2) -&gt; count.get(n1) - count.get(n2)); // keep k top frequent elements in the heap for (int n: count.keySet()) &#123; heap.add(n); if (heap.size() &gt; k) // ÊòØ Â†Ü ÂÆûÁé∞ÁöÑÔºåÁÑ∂Âêé‰∏äËø∞ÊûÑÈÄ†ÁöÑÊòØÂçáÂ∫èÊéíÂàóÔºåÊúÄÂ∞èÁöÑÂú®Á¨¨‰∏Ä‰∏™ÔºåÊúÄÂ§ßÁöÑÂú®ÊúÄÂêé heap.poll(); &#125; // build output list List&lt;Integer&gt; top_k = new LinkedList(); while (!heap.isEmpty()) top_k.add(heap.poll()); Collections.reverse(top_k); return top_k; &#125;&#125; Case III 12345678910111213141516171819202122232425262728293031323334//Âü∫‰∫éÊ°∂ÊéíÂ∫èÊ±ÇËß£„ÄåÂâç K ‰∏™È´òÈ¢ëÂÖÉÁ¥†„Äçclass Solution &#123; public List&lt;Integer&gt; topKFrequent(int[] nums, int k) &#123; List&lt;Integer&gt; res = new ArrayList(); // ‰ΩøÁî®Â≠óÂÖ∏ÔºåÁªüËÆ°ÊØè‰∏™ÂÖÉÁ¥†Âá∫Áé∞ÁöÑÊ¨°Êï∞ÔºåÂÖÉÁ¥†‰∏∫ÈîÆÔºåÂÖÉÁ¥†Âá∫Áé∞ÁöÑÊ¨°Êï∞‰∏∫ÂÄº HashMap&lt;Integer,Integer&gt; map = new HashMap(); for(int num : nums)&#123; if (map.containsKey(num)) &#123; map.put(num, map.get(num) + 1); &#125; else &#123; map.put(num, 1); &#125; &#125; //Ê°∂ÊéíÂ∫è //Â∞ÜÈ¢ëÁéá‰Ωú‰∏∫Êï∞ÁªÑ‰∏ãÊ†áÔºåÂØπ‰∫éÂá∫Áé∞È¢ëÁéá‰∏çÂêåÁöÑÊï∞Â≠óÈõÜÂêàÔºåÂ≠òÂÖ•ÂØπÂ∫îÁöÑÊï∞ÁªÑ‰∏ãÊ†á List&lt;Integer&gt;[] list = new List[nums.length+1]; for(int key : map.keySet())&#123; // Ëé∑ÂèñÂá∫Áé∞ÁöÑÊ¨°Êï∞‰Ωú‰∏∫‰∏ãÊ†á int i = map.get(key); if(list[i] == null)&#123; list[i] = new ArrayList(); &#125; list[i].add(key); &#125; // ÂÄíÂ∫èÈÅçÂéÜÊï∞ÁªÑËé∑ÂèñÂá∫Áé∞È°∫Â∫è‰ªéÂ§ßÂà∞Â∞èÁöÑÊéíÂàó for(int i = list.length - 1;i &gt;= 0 &amp;&amp; res.size() &lt; k;i--)&#123; if(list[i] == null) continue; res.addAll(list[i]); &#125; return res; &#125;&#125; 394. Â≠óÁ¨¶‰∏≤Ëß£Á†ÅÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ÁªèËøáÁºñÁ†ÅÁöÑÂ≠óÁ¨¶‰∏≤ÔºåËøîÂõûÂÆÉËß£Á†ÅÂêéÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ ÁºñÁ†ÅËßÑÂàô‰∏∫: k[encoded_string]ÔºåË°®Á§∫ÂÖ∂‰∏≠ÊñπÊã¨Âè∑ÂÜÖÈÉ®ÁöÑ encoded_string Ê≠£Â•ΩÈáçÂ§ç k Ê¨°„ÄÇÊ≥®ÊÑè k ‰øùËØÅ‰∏∫Ê≠£Êï¥Êï∞„ÄÇ ‰Ω†ÂèØ‰ª•ËÆ§‰∏∫ËæìÂÖ•Â≠óÁ¨¶‰∏≤ÊÄªÊòØÊúâÊïàÁöÑÔºõËæìÂÖ•Â≠óÁ¨¶‰∏≤‰∏≠Ê≤°ÊúâÈ¢ùÂ§ñÁöÑÁ©∫Ê†ºÔºå‰∏îËæìÂÖ•ÁöÑÊñπÊã¨Âè∑ÊÄªÊòØÁ¨¶ÂêàÊ†ºÂºèË¶ÅÊ±ÇÁöÑ„ÄÇ Ê≠§Â§ñÔºå‰Ω†ÂèØ‰ª•ËÆ§‰∏∫ÂéüÂßãÊï∞ÊçÆ‰∏çÂåÖÂê´Êï∞Â≠óÔºåÊâÄÊúâÁöÑÊï∞Â≠óÂè™Ë°®Á§∫ÈáçÂ§çÁöÑÊ¨°Êï∞ k Ôºå‰æãÂ¶Ç‰∏ç‰ºöÂá∫Áé∞ÂÉè 3a Êàñ 2[4] ÁöÑËæìÂÖ•„ÄÇ Á§∫‰æã: 123s = "3[a]2[bc]", ËøîÂõû "aaabcbc".s = "3[a2[c]]", ËøîÂõû "accaccacc".s = "2[abc]3[cd]ef", ËøîÂõû "abcabccdcdcdef". ÊÄùË∑Ø Ê†à ÈÄíÂΩí ‰ª£Á†Å Ê†à 12345678910111213141516171819202122232425262728293031public String decodeString(String s) &#123; StringBuilder res = new StringBuilder(); int multi = 0; // Â≠òÂÇ®Êï∞Â≠ó Stack&lt;Integer&gt; stack_multi = new Stack&lt;&gt;(); // Â≠òÂÇ®Â≠óÁ¨¶‰∏≤ÔºåÂ≠óÁ¨¶‰∏≤ÂàÜ‰∏∫‰∏§Á±ªÔºå‰∏ÄÁ±ªÊòØÂú®'[' ‰πãÂâçÁöÑÔºåËøô‰∏™ÈúÄË¶ÅÂéãÊ†àÔºåÁÑ∂ÂêéÊãºÊé•ÁöÑ // ‰∏ÄÁ±ªÊòØÂú®']'‰πãÂâçÁöÑÔºåËøôÁ±ªÊòØÁî®Êù•Âú®Êã¨Âè∑ÂÜÖÈÉ®‰πò‰ª•ÂÄçÊï∞ÁöÑ Stack&lt;String&gt; stack_res = new Stack&lt;&gt;(); for(Character c : s.toCharArray()) &#123; if(c == '[') &#123; // Â∞ÜÂÄçÊï∞ÂéãÊ†à stack_multi.push(multi); // Â∞ÜÂ∑¶Êã¨Âè∑‰πãÂâçÁöÑÂ≠óÁ¨¶‰∏≤ÂéãÊ†àÔºåÊñπ‰æøÂêéÁª≠ÊãºÊé• stack_res.push(res.toString()); multi = 0; // Ê∏ÖÁ©∫ÁöÑÂéüÂõ†ÊòØÂõ†‰∏∫Ë¶Å‰æø‰∫é‰∏ã‰∏ÄÊ¨°Â∑¶Êã¨Âè∑‰πãÂâçÁöÑÂ≠óÊØçÁöÑ‰øùÂ≠ò res = new StringBuilder(); &#125; else if(c == ']') &#123; // Áî®Êù• ÊãºÊé•Â≠óÁ¨¶‰∏≤ StringBuilder tmp = new StringBuilder(); int cur_multi = stack_multi.pop(); for(int i = 0; i &lt; cur_multi; i++) tmp.append(res); res = new StringBuilder(stack_res.pop() + tmp); &#125; // ËÆ∞ÂæóÂ§ÑÁêÜ multi ÂèØËÉΩÊòØÂ§ö‰ΩçÊï∞ÁöÑÊÉÖÂÜµÔºÅÔºÅÔºÅ else if(c &gt;= '0' &amp;&amp; c &lt;= '9') multi = multi * 10 + Integer.parseInt(c + ""); else res.append(c); &#125; return res.toString();&#125; ÈÄíÂΩí 12345678910111213141516171819202122232425262728293031323334class Solution &#123; public String decodeString(String s) &#123; return dfs(s, 0)[0]; &#125; /** * ÈÄíÂΩí‰∏âÈÉ®Êõ≤ * 1„ÄÅÈÄíÂΩíÂá∫Âè£ÔºåÂΩìÈÅçÂéÜÂÆå‰∫ÜÊúÄÂêé‰∏Ä‰∏™Â≠óÁ¨¶ÔºåÈÄíÂΩíÁªìÊùü * 2„ÄÅÈÄíÂΩíËøîÂõûÂÄºÔºåËøîÂõûÊã¨Âè∑ÂÜÖÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂπ∂‰∏î‰∏∫‰∫ÜÊñπ‰æøÂú®‰∏ÄËΩÆÈÄíÂΩí‰∏≠ËøõË°åÊãºÊé•Ôºå‰πüÂ∞ÜÂè≥Êã¨Âè∑ÁöÑÁ¥¢ÂºïËøîÂõû * 3„ÄÅ‰∏ÄËΩÆÈÄíÂΩíÂÅöÁöÑ‰∫ãÊÉÖÔºåÂ∞±ÊòØÂ∞ÜËøîÂõûÁöÑÂ≠óÁ¨¶‰∏≤ËøõË°åÊâ©Â±ïÔºåÁÑ∂ÂêéÊãºÊé•ÂâçËÄÖÂíåÂêéËÄÖÁöÑÂ≠óÁ¨¶‰∏≤ * @param s * @param i * @return */ private String[] dfs(String s, int i) &#123; StringBuilder res = new StringBuilder(); int multi = 0; while (i &lt; s.length()) &#123; if (s.charAt(i) &gt;= '0' &amp;&amp; s.charAt(i) &lt;= '9') multi = multi * 10 + Integer.parseInt(String.valueOf(s.charAt(i))); else if (s.charAt(i) == '[') &#123; String[] tmp = dfs(s, i + 1); i = Integer.parseInt(tmp[0]); while (multi &gt; 0) &#123; res.append(tmp[1]); multi--; &#125; &#125; else if (s.charAt(i) == ']') return new String[]&#123;String.valueOf(i), res.toString()&#125;; else res.append(s.charAt(i)); i++; &#125; return new String[]&#123;res.toString()&#125;; &#125;&#125; 448. ÊâæÂà∞ÊâÄÊúâÊï∞ÁªÑ‰∏≠Ê∂àÂ§±ÁöÑÊï∞Â≠óÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ËåÉÂõ¥Âú® 1 ‚â§ a[i] ‚â§ n ( n = Êï∞ÁªÑÂ§ßÂ∞è ) ÁöÑ Êï¥ÂûãÊï∞ÁªÑÔºåÊï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†‰∏Ä‰∫õÂá∫Áé∞‰∫Ü‰∏§Ê¨°ÔºåÂè¶‰∏Ä‰∫õÂè™Âá∫Áé∞‰∏ÄÊ¨°„ÄÇ ÊâæÂà∞ÊâÄÊúâÂú® [1, n] ËåÉÂõ¥‰πãÈó¥Ê≤°ÊúâÂá∫Áé∞Âú®Êï∞ÁªÑ‰∏≠ÁöÑÊï∞Â≠ó„ÄÇ ÊÇ®ËÉΩÂú®‰∏ç‰ΩøÁî®È¢ùÂ§ñÁ©∫Èó¥‰∏îÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(n)ÁöÑÊÉÖÂÜµ‰∏ãÂÆåÊàêËøô‰∏™‰ªªÂä°Âêó? ‰Ω†ÂèØ‰ª•ÂÅáÂÆöËøîÂõûÁöÑÊï∞ÁªÑ‰∏çÁÆóÂú®È¢ùÂ§ñÁ©∫Èó¥ÂÜÖ„ÄÇ Á§∫‰æã: 12345ËæìÂÖ•:[4,3,2,7,8,2,3,1]ËæìÂá∫:[5,6] ÊÄùË∑Ø https://leetcode-cn.com/problems/find-all-numbers-disappeared-in-an-array/solution/ti-jie-bu-shi-yong-e-wai-kong-jian-by-gehui1007/ Â∞±ÊòØÁî®Ê≠£Ë¥üÂè∑ÂéªÁª¥Êä§‰∏Ä‰∏™ÁÆÄÊòìÁöÑ mapÔºåÊ†áËÆ∞ÊòØÂê¶Âá∫Áé∞ËØ•Êï∞„ÄÇÈ¢òÁõÆÈôêÂà∂ÊòØÊï∞ÊòØÂú® 1 ~ n ‰πãÈó¥ÁöÑÔºåËÄå‰∏ÄÂÖ±Êúâ n ‰∏™Êï∞ÔºåÊàë‰ª¨Ëøô‰πàÊÉ≥ÔºåÁî®Êï∞ÁªÑÂÖÉÁ¥†ÁöÑÂÄº‰ª£Ë°® Êï∞ÁªÑ‰∏≠Âá∫Áé∞ÁöÑÊï∞ÁöÑÁ¥¢ÂºïÔºåÊØîÂ¶ÇËØ¥[4,3,2,7,8,2,3,1]ÔºåÁ¨¨‰∏Ä‰∏™Êï∞ÊòØ 4ÔºåÂ∞±‰ª£Ë°®‰∫ÜÁ¨¨ 4‰∏™Êï∞Ôºå‰πüÂ∞±ÊòØ 7ÔºåÂ∞ÜÂÖ∂Ê†áÂøó‰Ωç -1Ôºå‰ª•Ê≠§Á±ªÊé®ÔºåÈÄöËøáËøôÁßçÊñπÂºèÊï∞ÁªÑÂèò‰∏∫ [-4,-3,-2,-7,8,2,-3,-1]ÔºåÊïÖÂÜçÈÅçÂéÜ‰∏ÄÈÅçÔºå‰∏∫Ê≠£Êï∞ÁöÑÂç≥Êú™Âá∫Áé∞ÁöÑÊï∞Â≠ó„ÄÇ Áî®ËøôÁßçÊÄùË∑ØËøòÂèØ‰ª•Ëß£ÂÜ≥ 442. Êï∞ÁªÑ‰∏≠ÈáçÂ§çÁöÑÊï∞ÊçÆ ÔºåÊÄùË∑Ø‰∏ÄÊ®°‰∏ÄÊ†∑ÔºåÂΩìÈÅçÂéÜÊó∂ÂèëÁé∞ÂÖÉÁ¥†Ôºà‰ª£Ë°®Êï∞ÁªÑ‰∏ãÊ†áÔºâÊâÄÊåáÂêëÁöÑÊï∞ÊòØË¥üÊï∞ÔºåËØ¥ÊòéÈÇ£‰∏™Êï∞Â∑≤ÁªèÂá∫Áé∞‰∫Ü‰∏ÄÊ¨°ÔºåÊ≠§Êó∂Ê≠§Êï∞Â∞±Âá∫Áé∞‰∫Ü‰∏§Ê¨°ÔºåËÆ∞ÂΩï‰∏ãÊù•Âç≥ÂèØ„ÄÇ ‰ª£Á†Å1234567891011121314class Solution &#123; public List&lt;Integer&gt; findDisappearedNumbers(int[] nums) &#123; List&lt;Integer&gt; res = new ArrayList(); for(int num:nums)&#123; num = Math.abs(num); if(nums[num-1] &lt; 0) continue; else nums[num-1] = -nums[num-1]; &#125; for(int i =0;i &lt; nums.length;i++)&#123; if(nums[i] &gt; 0) res.add(i+1); &#125; return res; &#125;&#125; 442È¢ò‰ª£Á†Å 123456789public List&lt;Integer&gt; findDuplicates(int[] nums) &#123; List&lt;Integer&gt; res = new ArrayList(); for(int num:nums)&#123; num = Math.abs(num); if(nums[num-1] &lt; 0) res.add(num); else nums[num-1] = -nums[num-1]; &#125; return res;&#125; 399. Èô§Ê≥ïÊ±ÇÂÄº„ÄêÂõæËÆ∫Áü•ËØÜÔºåÊöÇÊó∂‰∏çÂ§™‰ºöÔºå‰ªé leetcodeËã±ÊñáÁâàÁöÑ È´òÂàÜÂå∫ Ê∫ú‰∫ÜÂá†‰∏™È´òËµûÁ≠îÊ°àËøáÊù•Ôºå‰ª•ÂêéÊ¨£Ëµè‰∏Ä‰∏ã„Äë È¢òÁõÆÁªôÂá∫ÊñπÁ®ãÂºè A / B = k, ÂÖ∂‰∏≠ A Âíå B Âùá‰∏∫‰ª£Ë°®Â≠óÁ¨¶‰∏≤ÁöÑÂèòÈáèÔºå k ÊòØ‰∏Ä‰∏™ÊµÆÁÇπÂûãÊï∞Â≠ó„ÄÇÊ†πÊçÆÂ∑≤Áü•ÊñπÁ®ãÂºèÊ±ÇËß£ÈóÆÈ¢òÔºåÂπ∂ËøîÂõûËÆ°ÁÆóÁªìÊûú„ÄÇÂ¶ÇÊûúÁªìÊûú‰∏çÂ≠òÂú®ÔºåÂàôËøîÂõû -1.0„ÄÇ Á§∫‰æã : 123ÁªôÂÆö a / b = 2.0, b / c = 3.0ÈóÆÈ¢ò: a / c = ?, b / a = ?, a / e = ?, a / a = ?, x / x = ? ËøîÂõû [6.0, 0.5, -1.0, 1.0, -1.0 ] 123ÁªôÂÆö a / b = 2.0, b / c = 3.0ÈóÆÈ¢ò: a / c = ?, b / a = ?, a / e = ?, a / a = ?, x / x = ? ËøîÂõû [6.0, 0.5, -1.0, 1.0, -1.0 ] ÊÄùË∑Ø dfs Âπ∂Êü•ÈõÜ ‰ª£Á†Å dfs Á¨¨‰∏Ä‰∏™ÁâàÊú¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344class Solution &#123; public double[] calcEquation(List&lt;List&lt;String&gt;&gt; equations, double[] values, List&lt;List&lt;String&gt;&gt; queries) &#123; List&lt;String[]&gt; arr = new ArrayList&lt;&gt;(); for(List&lt;String&gt; a:equations)&#123; List&lt;String&gt; tmp; tmp = a; arr.add(tmp.toArray(new String[0])); &#125; String[][] eq = arr.toArray(new String[0][0]); List&lt;String[]&gt; arr1 = new ArrayList&lt;&gt;(); for(List&lt;String&gt; a:queries)&#123; List&lt;String&gt; tmp; tmp = a; arr1.add(tmp.toArray(new String[0])); &#125; String[][] q = arr1.toArray(new String[0][0]); return calcEquation_dfs(eq,values,q); &#125; public double[] calcEquation_dfs(String[][] eq, double[] vals, String[][] q) &#123; Map&lt;String, Map&lt;String, Double&gt;&gt; m = new HashMap&lt;&gt;(); for (int i = 0; i &lt; vals.length; i++) &#123; m.putIfAbsent(eq[i][0], new HashMap&lt;&gt;()); m.putIfAbsent(eq[i][1], new HashMap&lt;&gt;()); m.get(eq[i][0]).put(eq[i][1], vals[i]); m.get(eq[i][1]).put(eq[i][0], 1 / vals[i]); &#125; double[] r = new double[q.length]; for (int i = 0; i &lt; q.length; i++) r[i] = dfs(q[i][0], q[i][1], 1, m, new HashSet&lt;&gt;()); return r; &#125; double dfs(String s, String t, double r, Map&lt;String, Map&lt;String, Double&gt;&gt; m, Set&lt;String&gt; seen) &#123; if (!m.containsKey(s) || !seen.add(s)) return -1; if (s.equals(t)) return r; Map&lt;String, Double&gt; next = m.get(s); for (String c : next.keySet()) &#123; double result = dfs(c, t, r * next.get(c), m, seen); if (result != -1) return result; &#125; return -1; &#125;&#125; dfs Á¨¨‰∫å‰∏™ÁâàÊú¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859class Solution &#123; public double[] calcEquation(List&lt;List&lt;String&gt;&gt; equations, double[] values, List&lt;List&lt;String&gt;&gt; queries) &#123; List&lt;String[]&gt; arr = new ArrayList&lt;&gt;(); for(List&lt;String&gt; a:equations)&#123; List&lt;String&gt; tmp; tmp = a; arr.add(tmp.toArray(new String[0])); &#125; String[][] eq = arr.toArray(new String[0][0]); List&lt;String[]&gt; arr1 = new ArrayList&lt;&gt;(); for(List&lt;String&gt; a:queries)&#123; List&lt;String&gt; tmp; tmp = a; arr1.add(tmp.toArray(new String[0])); &#125; String[][] q = arr1.toArray(new String[0][0]); return calcEquation_dfs(eq,values,q); &#125; HashSet&lt;String&gt; seen = new HashSet&lt;&gt;(); HashMap&lt;String, String&gt; root = new HashMap&lt;&gt;(); HashMap&lt;String, Double&gt; vals = new HashMap&lt;&gt;(); HashMap&lt;String, HashMap&lt;String, Double&gt;&gt; edges = new HashMap&lt;&gt;(); public double[] calcEquation_dfs(String[][] equations, double[] values, String[][] queries) &#123; int n = equations.length, m = queries.length; for (int i = 0; i &lt; n; ++i) &#123; String x = equations[i][0], y = equations[i][1]; if (!edges.containsKey(x)) edges.put(x, new HashMap&lt;String, Double&gt;()); if (!edges.containsKey(y) ) edges.put(y, new HashMap&lt;String, Double&gt;()); edges.get(x).put(y, values[i]); edges.get(y).put(x, 1 / values[i]); &#125; for (String x : edges.keySet()) &#123; if (!seen.contains(x)) dfs(x, x, 1); &#125; double[] res = new double[m]; for (int i = 0; i &lt; m; ++i) &#123; String x = queries[i][0], y = queries[i][1]; String px = root.getOrDefault(x, x), py = root.getOrDefault(y, y); if (px != py) res[i] = -1.0; else res[i] = vals.get(x) / vals.get(y); &#125; return res; &#125; public void dfs(String x, String p, double v) &#123; vals.put(x, v); root.put(x, p); seen.add(x); for (String y : edges.get(x).keySet()) &#123; if (!seen.contains(y)) dfs(y, p, v * edges.get(y).get(x)); &#125; &#125;&#125; Dfs Á¨¨‰∏â‰∏™ÁâàÊú¨ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970class Solution &#123; public double[] calcEquation(List&lt;List&lt;String&gt;&gt; equations, double[] values, List&lt;List&lt;String&gt;&gt; queries) &#123; List&lt;String[]&gt; arr = new ArrayList&lt;&gt;(); for(List&lt;String&gt; a:equations)&#123; List&lt;String&gt; tmp; tmp = a; arr.add(tmp.toArray(new String[0])); &#125; String[][] eq = arr.toArray(new String[0][0]); List&lt;String[]&gt; arr1 = new ArrayList&lt;&gt;(); for(List&lt;String&gt; a:queries)&#123; List&lt;String&gt; tmp; tmp = a; arr1.add(tmp.toArray(new String[0])); &#125; String[][] q = arr1.toArray(new String[0][0]); return calcEquation_dfs(eq,values,q); &#125; public double[] calcEquation_dfs(String[][] equations, double[] values, String[][] queries) &#123; /* Build graph. */ Map&lt;String, Map&lt;String, Double&gt;&gt; graph = buildGraph(equations, values); double[] result = new double[queries.length]; for (int i = 0; i &lt; queries.length; i++) &#123; result[i] = getPathWeight(queries[i][0], queries[i][1], new HashSet&lt;&gt;(), graph); &#125; return result; &#125; private double getPathWeight(String start, String end, Set&lt;String&gt; visited, Map&lt;String, Map&lt;String, Double&gt;&gt; graph) &#123; /* Rejection case. */ if (!graph.containsKey(start)) return -1.0; /* Accepting case. */ if (graph.get(start).containsKey(end)) return graph.get(start).get(end); visited.add(start); for (Map.Entry&lt;String, Double&gt; neighbour : graph.get(start).entrySet()) &#123; if (!visited.contains(neighbour.getKey())) &#123; double productWeight = getPathWeight(neighbour.getKey(), end, visited, graph); if (productWeight != -1.0) return neighbour.getValue() * productWeight; &#125; &#125; return -1.0; &#125; private Map&lt;String, Map&lt;String, Double&gt;&gt; buildGraph(String[][] equations, double[] values) &#123; Map&lt;String, Map&lt;String, Double&gt;&gt; graph = new HashMap&lt;&gt;(); String u, v; for (int i = 0; i &lt; equations.length; i++) &#123; u = equations[i][0]; v = equations[i][1]; graph.putIfAbsent(u, new HashMap&lt;&gt;()); graph.get(u).put(v, values[i]); graph.putIfAbsent(v, new HashMap&lt;&gt;()); graph.get(v).put(u, 1 / values[i]); &#125; return graph; &#125;&#125; Âπ∂Êü•ÈõÜ I 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677class Solution &#123; public double[] calcEquation(List&lt;List&lt;String&gt;&gt; equations, double[] values, List&lt;List&lt;String&gt;&gt; queries) &#123; List&lt;String[]&gt; arr = new ArrayList&lt;&gt;(); for(List&lt;String&gt; a:equations)&#123; List&lt;String&gt; tmp; tmp = a; arr.add(tmp.toArray(new String[0])); &#125; String[][] eq = arr.toArray(new String[0][0]); List&lt;String[]&gt; arr1 = new ArrayList&lt;&gt;(); for(List&lt;String&gt; a:queries)&#123; List&lt;String&gt; tmp; tmp = a; arr1.add(tmp.toArray(new String[0])); &#125; String[][] q = arr1.toArray(new String[0][0]); return calcEquation_union(eq,values,q); &#125; /** 1. Thoughts - check if we have enough info to get the result - if yes, calculate; if not, return -1.0 - Method: union find - a/b = 2.0 --&gt; b is the root of a; the distance from a to b is 1/2.0 - if two nums have the same root, we can get the result; a/b=2.0, b/c=3.0 index a b c root b c c dist 2 3 1 - if we want to know a/c = ?: a = 2 * b = 2 * 3 * c =&gt; a/c = 6.0 2. Corner case - if any input is null, return null - no enough info, return -1.0 3. Steps - go through equations to union elements with the same root and update root map and distance map - go through each query: check if has the same root; find relative dist*/ public double[] calcEquation_union(String[][] e, double[] values, String[][] q) &#123; double[] res = new double[q.length]; Map&lt;String, String&gt; root = new HashMap&lt;&gt;(); Map&lt;String, Double&gt; dist = new HashMap&lt;&gt;(); for (int i = 0; i &lt; e.length; i++) &#123; String r1 = find(root, dist, e[i][0]); String r2 = find(root, dist, e[i][1]); root.put(r1, r2); dist.put(r1, dist.get(e[i][1]) * values[i] / dist.get(e[i][0])); &#125; for (int i = 0; i &lt; q.length; i++) &#123; if (!root.containsKey(q[i][0]) || !root.containsKey(q[i][1])) &#123; res[i] = -1.0; continue; &#125; String r1 = find(root, dist, q[i][0]); String r2 = find(root, dist, q[i][1]); if (!r1.equals(r2)) &#123; res[i] = -1.0; continue; &#125; res[i] = (double) dist.get(q[i][0]) / dist.get(q[i][1]); &#125; return res; &#125; private String find(Map&lt;String, String&gt; root, Map&lt;String, Double&gt; dist, String s) &#123; if (!root.containsKey(s)) &#123; root.put(s, s); dist.put(s, 1.0); return s; &#125; if (root.get(s).equals(s)) return s; String lastP = root.get(s); String p = find(root, dist, lastP); root.put(s, p); dist.put(s, dist.get(s) * dist.get(lastP)); return p; &#125;&#125; Âπ∂Êü•ÈõÜ ‚Äî‚Äî&gt; Â§ß‰Ω¨ÁöÑÂπ∂Êü•ÈõÜÂíåDFS 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556class Solution &#123; public double[] calcEquation(List&lt;List&lt;String&gt;&gt; equations, double[] values, List&lt;List&lt;String&gt;&gt; queries) &#123; List&lt;String[]&gt; arr = new ArrayList&lt;&gt;(); for(List&lt;String&gt; a:equations)&#123; List&lt;String&gt; tmp; tmp = a; arr.add(tmp.toArray(new String[0])); &#125; String[][] eq = arr.toArray(new String[0][0]); List&lt;String[]&gt; arr1 = new ArrayList&lt;&gt;(); for(List&lt;String&gt; a:queries)&#123; List&lt;String&gt; tmp; tmp = a; arr1.add(tmp.toArray(new String[0])); &#125; String[][] q = arr1.toArray(new String[0][0]); return calcEquation_union(eq,values,q); &#125; Map&lt;String, String&gt;parents = new HashMap&lt;&gt;(); Map&lt;String, Double&gt;vals = new HashMap&lt;&gt;(); public double[] calcEquation_union(String[][] equs, double[] values, String[][] queries) &#123; double[] res = new double[queries.length]; for (int i = 0; i &lt; values.length ; ++i ) union(equs[i][0], equs[i][1], values[i]); for (int i = 0; i &lt; queries.length; ++i) &#123; String x = queries[i][0], y = queries[i][1]; res[i] = (parents.containsKey(x) &amp;&amp; parents.containsKey(y) &amp;&amp; find(x) == find(y)) ? vals.get(x) / vals.get(y) : -1.0; &#125; return res; &#125; public void add(String x) &#123; if (parents.containsKey(x)) return; parents.put(x, x); vals.put(x, 1.0); &#125; public String find(String x) &#123; String p = parents.getOrDefault(x, x); if (x != p) &#123; String pp = find(p); vals.put(x, vals.get(x) * vals.get(p)); parents.put(x, pp); &#125; return parents.getOrDefault(x, x); &#125; public void union(String x, String y, double v) &#123; add(x); add(y); String px = find(x), py = find(y); parents.put(px, py); vals.put(px, v * vals.get(y) / vals.get(x)); &#125;&#125; 406. Ê†πÊçÆË∫´È´òÈáçÂª∫ÈòüÂàóÈ¢òÁõÆÂÅáËÆæÊúâÊâì‰π±È°∫Â∫èÁöÑ‰∏ÄÁæ§‰∫∫Á´ôÊàê‰∏Ä‰∏™ÈòüÂàó„ÄÇ ÊØè‰∏™‰∫∫Áî±‰∏Ä‰∏™Êï¥Êï∞ÂØπ(h, k)Ë°®Á§∫ÔºåÂÖ∂‰∏≠hÊòØËøô‰∏™‰∫∫ÁöÑË∫´È´òÔºåkÊòØÊéíÂú®Ëøô‰∏™‰∫∫ÂâçÈù¢‰∏îË∫´È´òÂ§ß‰∫éÊàñÁ≠â‰∫éhÁöÑ‰∫∫Êï∞„ÄÇ ÁºñÂÜô‰∏Ä‰∏™ÁÆóÊ≥ïÊù•ÈáçÂª∫Ëøô‰∏™ÈòüÂàó„ÄÇ Á§∫‰æã 12345ËæìÂÖ•:[[7,0], [4,4], [7,1], [5,0], [6,1], [5,2]]ËæìÂá∫:[[5,0], [7,0], [5,2], [6,1], [4,4], [7,1]] ÊÄùË∑ØÂÆòÊñπÈ¢òËß£ËÆ≤ÁöÑ‰∏çÈîôÔºåÈ´ò‰∏™Â≠êÁöÑÁúº‰∏≠ÔºåÁüÆ‰∏™Â≠êÁõ∏ÂΩì‰∫é‰∏çÂ≠òÂú®ÔºåÊâÄ‰ª•È´ò‰∏™Â≠êÂÖàÊåâËßÑÁü©Á´ôÂ•ΩÔºåÂêéÈù¢ÁüÆ‰∏™Â≠êÁöÑÊèíÂÖ•‰∏ç‰ºöÂΩ±ÂìçÂÖ∂È°∫Â∫èÔºåÊâÄ‰ª•Êàë‰ª¨ÂÖàÊääÈ´ò‰∏™Â≠êÂÆâÊéíÂÆåÔºåÁüÆ‰∏™Â≠êÂèØ‰ª•Áõ¥Êé•Êåâ k ÂÄº‰ªéÂ∞èÂà∞Â§ßÊèíÂÖ•Ôºåk ÂÄºÂç≥‰ªñ‰ª¨ÂΩìÊó∂ÊèíÂÖ•ÁöÑ‰∏ãÊ†áÂÄº„ÄÇ ‰ª£Á†Å12345678910111213class Solution &#123; public int[][] reconstructQueue(int[][] people) &#123; // ÂâçÈù¢Ë∫´È´òÂ∫îËØ•ÈôçÂ∫èÔºåÂêéÈù¢ÁöÑkÂ∫îËØ•ÂçáÂ∫èÊéíÂàó Arrays.sort(people, (o1, o2) -&gt; o1[0] == o2[0] ? o1[1] - o2[1] : o2[0] - o1[0]); ArrayList&lt;int[]&gt; res = new ArrayList(); for(int[] p:people)&#123; // È´ò‰∏™Â≠êÊó†ËßÜÁüÆ‰∏™Â≠êÔºåÊâÄ‰ª•ÁüÆ‰∏™Â≠êÁöÑÊèíÂÖ•ÂØπ‰πãÂâçÊèíÂÖ•ÁöÑÈ´ò‰∏™Â≠êÊ≤°ÊúâÂΩ±Âìç // ÊïÖÁüÆ‰∏™Â≠êÂèØ‰ª•Áõ¥Êé•Êåâ k ÂΩìÊàêÂ∫èÂè∑ÊèíÂÖ• res.add(p[1],p); &#125; return res.toArray(new int[0][0]); &#125;&#125; 416. ÂàÜÂâ≤Á≠âÂíåÂ≠êÈõÜÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Âè™ÂåÖÂê´Ê≠£Êï¥Êï∞ÁöÑÈùûÁ©∫Êï∞ÁªÑ„ÄÇÊòØÂê¶ÂèØ‰ª•Â∞ÜËøô‰∏™Êï∞ÁªÑÂàÜÂâ≤Êàê‰∏§‰∏™Â≠êÈõÜÔºå‰ΩøÂæó‰∏§‰∏™Â≠êÈõÜÁöÑÂÖÉÁ¥†ÂíåÁõ∏Á≠â„ÄÇ Ê≥®ÊÑè: ÊØè‰∏™Êï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†‰∏ç‰ºöË∂ÖËøá 100 Êï∞ÁªÑÁöÑÂ§ßÂ∞è‰∏ç‰ºöË∂ÖËøá 200 Á§∫‰æã 1: 12345ËæìÂÖ•: [1, 5, 11, 5]ËæìÂá∫: trueËß£Èáä: Êï∞ÁªÑÂèØ‰ª•ÂàÜÂâ≤Êàê [1, 5, 5] Âíå [11]. Á§∫‰æã 2: 12345ËæìÂÖ•: [1, 2, 3, 5]ËæìÂá∫: falseËß£Èáä: Êï∞ÁªÑ‰∏çËÉΩÂàÜÂâ≤Êàê‰∏§‰∏™ÂÖÉÁ¥†ÂíåÁõ∏Á≠âÁöÑÂ≠êÈõÜ. ÊÄùË∑ØËßÅ liweiÂ§ß‰Ω¨ÊÄùË∑ØÔºåËøô‰∏™‰ºòÂåñÁöÑÂ•óË∑ØÔºåÂÄºÂæóÂ≠¶‰π†„ÄÇ https://leetcode-cn.com/problems/partition-equal-subset-sum/solution/0-1-bei-bao-wen-ti-xiang-jie-zhen-dui-ben-ti-de-yo/ ‰ª£Á†Å1234567891011121314151617181920212223242526272829public class Solution &#123; public boolean canPartition(int[] nums) &#123; int len = nums.length; int sum = 0; for (int num : nums) &#123; sum += num; &#125; if ((sum &amp; 1) == 1) &#123; return false; &#125; int target = sum / 2; boolean[] dp = new boolean[target + 1]; dp[0] = true; if (nums[0] &lt;= target) &#123; dp[nums[0]] = true; &#125; for (int i = 1; i &lt;= len; i++) &#123; for (int j = target; j &gt;= nums[i]; j--) &#123; if (dp[target]) &#123; return true; &#125; dp[j] = dp[j] || dp[j - nums[i]]; &#125; &#125; return dp[target]; &#125;&#125; 438. ÊâæÂà∞Â≠óÁ¨¶‰∏≤‰∏≠ÊâÄÊúâÂ≠óÊØçÂºÇ‰ΩçËØçÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ s Âíå‰∏Ä‰∏™ÈùûÁ©∫Â≠óÁ¨¶‰∏≤ pÔºåÊâæÂà∞ s ‰∏≠ÊâÄÊúâÊòØ p ÁöÑÂ≠óÊØçÂºÇ‰ΩçËØçÁöÑÂ≠ê‰∏≤ÔºåËøîÂõûËøô‰∫õÂ≠ê‰∏≤ÁöÑËµ∑ÂßãÁ¥¢Âºï„ÄÇ Â≠óÁ¨¶‰∏≤Âè™ÂåÖÂê´Â∞èÂÜôËã±ÊñáÂ≠óÊØçÔºåÂπ∂‰∏îÂ≠óÁ¨¶‰∏≤ s Âíå p ÁöÑÈïøÂ∫¶ÈÉΩ‰∏çË∂ÖËøá 20100 Á§∫‰æã 1: 123456789ËæìÂÖ•:s: "cbaebabacd" p: "abc"ËæìÂá∫:[0, 6]Ëß£Èáä:Ëµ∑ÂßãÁ¥¢ÂºïÁ≠â‰∫é 0 ÁöÑÂ≠ê‰∏≤ÊòØ "cba", ÂÆÉÊòØ "abc" ÁöÑÂ≠óÊØçÂºÇ‰ΩçËØç„ÄÇËµ∑ÂßãÁ¥¢ÂºïÁ≠â‰∫é 6 ÁöÑÂ≠ê‰∏≤ÊòØ "bac", ÂÆÉÊòØ "abc" ÁöÑÂ≠óÊØçÂºÇ‰ΩçËØç„ÄÇ Á§∫‰æã 2: 12345678910ËæìÂÖ•:s: "abab" p: "ab"ËæìÂá∫:[0, 1, 2]Ëß£Èáä:Ëµ∑ÂßãÁ¥¢ÂºïÁ≠â‰∫é 0 ÁöÑÂ≠ê‰∏≤ÊòØ "ab", ÂÆÉÊòØ "ab" ÁöÑÂ≠óÊØçÂºÇ‰ΩçËØç„ÄÇËµ∑ÂßãÁ¥¢ÂºïÁ≠â‰∫é 1 ÁöÑÂ≠ê‰∏≤ÊòØ "ba", ÂÆÉÊòØ "ab" ÁöÑÂ≠óÊØçÂºÇ‰ΩçËØç„ÄÇËµ∑ÂßãÁ¥¢ÂºïÁ≠â‰∫é 2 ÁöÑÂ≠ê‰∏≤ÊòØ "ab", ÂÆÉÊòØ "ab" ÁöÑÂ≠óÊØçÂºÇ‰ΩçËØç„ÄÇ ÊÄùË∑ØÊªëÂä®Á™óÂè£ÁÆóÊ≥ïÔºåËßÅ Âè¶Â§ñ‰∏ÄÁØáÊñáÁ´†ÔºöÊªëÂä®Á™óÂè£ÊäÄÂ∑ßÊÄªÁªìÔºàÂÅáË£ÖÊúâÈìæÊé•Ôºâ ‰ª£Á†Å12345678910111213141516171819202122232425262728293031323334353637383940class Solution &#123; public List&lt;Integer&gt; findAnagrams(String s, String p) &#123; // Áî®‰∫éËøîÂõûÂ≠óÊØçÂºÇ‰ΩçËØçÁöÑËµ∑ÂßãÁ¥¢Âºï List&lt;Integer&gt; res = new ArrayList&lt;&gt;(); // Áî® map Â≠òÂÇ®ÁõÆÊ†áÂÄº‰∏≠ÂêÑ‰∏™ÂçïËØçÂá∫Áé∞ÁöÑÊ¨°Êï∞ HashMap&lt;Character, Integer&gt; map = new HashMap&lt;&gt;(); for (Character c : p.toCharArray()) map.put(c, map.getOrDefault(c, 0)+1); // Áî®Âè¶Â§ñ‰∏Ä‰∏™ map Â≠òÂÇ®ÊªëÂä®Á™óÂè£‰∏≠ÊúâÊïàÂ≠óÁ¨¶Âá∫Áé∞ÁöÑÊ¨°Êï∞ HashMap&lt;Character, Integer&gt; window = new HashMap&lt;&gt;(); int left = 0; // Â∑¶ÊåáÈíà int right = 0; // Âè≥ÊåáÈíà int valid = p.length(); // Âè™ÊúâÂΩì valid == 0 Êó∂ÔºåÊâçËØ¥Êòé window ‰∏≠ÂåÖÂê´‰∫ÜÁõÆÊ†áÂ≠ê‰∏≤ while (right &lt; s.length()) &#123; // Â¶ÇÊûúÁõÆÊ†áÂ≠ê‰∏≤‰∏≠ÂåÖÂê´‰∫ÜËØ•Â≠óÁ¨¶ÔºåÊâçÂ≠òÂÖ• window ‰∏≠ if (map.containsKey(s.charAt(right))) &#123; window.put(s.charAt(right), window.getOrDefault(s.charAt(right), 0)+1); // Âè™ÊúâÂΩì window ‰∏≠ËØ•ÊúâÊïàÂ≠óÁ¨¶Êï∞Èáè‰∏çÂ§ß‰∫émap‰∏≠ËØ•Â≠óÁ¨¶Êï∞ÈáèÔºåÊâçËÉΩÁÆó‰∏ÄÊ¨°ÊúâÊïàÂåÖÂê´ if (window.get(s.charAt(right)) &lt;= map.get(s.charAt(right))) &#123; valid--; &#125; &#125; // Â¶ÇÊûú window Á¨¶ÂêàË¶ÅÊ±ÇÔºåÂç≥‰∏§‰∏™ map Â≠òÂÇ®ÁöÑÊúâÊïàÂ≠óÁ¨¶Áõ∏ÂêåÔºåÂ∞±ÂèØ‰ª•ÁßªÂä®Â∑¶ÊåáÈíà‰∫Ü // ‰ΩÜÊòØÂè™Êúâ‰∫å‰∏™mapÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÂÆåÂÖ®Áõ∏ÂêåÔºåÊâçÂèØ‰ª•ËÆ∞ÂΩïÂΩìÂâçÁöÑËµ∑ÂßãÁ¥¢ÂºïÔºå‰πüÂ∞±ÊòØleftÊåáÈíàÊâÄÂú®‰ΩçÁΩÆ while (valid == 0) &#123; if (right - left + 1 == p.length()) res.add(left); // Â¶ÇÊûúÂ∑¶ÊåáÈíàÊåáÁöÑÊòØÊúâÊïàÂ≠óÁ¨¶,ÈúÄË¶ÅÊõ¥Êîπ window ‰∏≠ÁöÑ key ÂØπÂ∫îÁöÑ value // Â¶ÇÊûú ÊúâÊïàÂ≠óÁ¨¶ÂØπÂ∫îÁöÑÊï∞ÈáèÊØîÁõÆÊ†áÂ≠ê‰∏≤Â∞ëÔºåËØ¥ÊòéÊó†Ê≥ïÂåπÈÖç‰∫Ü if (map.containsKey(s.charAt(left))) &#123; window.put(s.charAt(left), window.get(s.charAt(left))-1); if (window.get(s.charAt(left)) &lt; map.get(s.charAt(left))) &#123; valid++; &#125; &#125; left++; &#125; right++; &#125; return res; &#125;&#125; Áî®Êï∞ÁªÑ‰ª£Êõø map 123456789101112131415161718192021222324252627282930313233343536class Solution &#123; public List&lt;Integer&gt; findAnagrams(String s, String p) &#123; if(s == null || s.length() == 0) return new ArrayList&lt;&gt;(); List&lt;Integer&gt; res = new ArrayList&lt;&gt;(); int[] needs = new int[26]; //Áî±‰∫éÈÉΩÊòØÂ∞èÂÜôÂ≠óÊØçÔºåÂõ†Ê≠§Áõ¥Êé•Áî®26‰∏™ÈïøÂ∫¶ÁöÑÊï∞ÁªÑ‰ª£ÊõøÂéüÊù•ÁöÑHashMap int[] window = new int[26]; int left = 0, right = 0, total = p.length(); //Áî®totalÊ£ÄÊµãÁ™óÂè£‰∏≠ÊòØÂê¶Â∑≤ÁªèÊ∂µÁõñ‰∫Üp‰∏≠ÁöÑÂ≠óÁ¨¶ for(char ch : p.toCharArray())&#123; needs[ch - 'a'] ++; &#125; while(right &lt; s.length())&#123; char chr = s.charAt(right); if(needs[chr - 'a'] &gt; 0)&#123; window[chr - 'a'] ++; if(window[chr - 'a'] &lt;= needs[chr - 'a'])&#123; total --; &#125; &#125; while(total == 0)&#123; if(right-left+1 == p.length())&#123; res.add(left); &#125; char chl = s.charAt(left); if(needs[chl - 'a'] &gt; 0)&#123; window[chl - 'a'] --; if(window[chl - 'a'] &lt; needs[chl - 'a'])&#123; total ++; &#125; &#125; left ++; &#125; right ++; &#125; return res; &#125;&#125; 494. ÁõÆÊ†áÂíåÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ÈùûË¥üÊï¥Êï∞Êï∞ÁªÑÔºåa1, a2, ‚Ä¶, an, Âíå‰∏Ä‰∏™ÁõÆÊ†áÊï∞ÔºåS„ÄÇÁé∞Âú®‰Ω†Êúâ‰∏§‰∏™Á¨¶Âè∑ + Âíå -„ÄÇÂØπ‰∫éÊï∞ÁªÑ‰∏≠ÁöÑ‰ªªÊÑè‰∏Ä‰∏™Êï¥Êï∞Ôºå‰Ω†ÈÉΩÂèØ‰ª•‰ªé + Êàñ -‰∏≠ÈÄâÊã©‰∏Ä‰∏™Á¨¶Âè∑Ê∑ªÂä†Âú®ÂâçÈù¢„ÄÇ ËøîÂõûÂèØ‰ª•‰ΩøÊúÄÁªàÊï∞ÁªÑÂíå‰∏∫ÁõÆÊ†áÊï∞ S ÁöÑÊâÄÊúâÊ∑ªÂä†Á¨¶Âè∑ÁöÑÊñπÊ≥ïÊï∞„ÄÇ Á§∫‰æã 1: 1234567891011ËæìÂÖ•: nums: [1, 1, 1, 1, 1], S: 3ËæìÂá∫: 5Ëß£Èáä: -1+1+1+1+1 = 3+1-1+1+1+1 = 3+1+1-1+1+1 = 3+1+1+1-1+1 = 3+1+1+1+1-1 = 3‰∏ÄÂÖ±Êúâ5ÁßçÊñπÊ≥ïËÆ©ÊúÄÁªàÁõÆÊ†áÂíå‰∏∫3„ÄÇ Ê≥®ÊÑè: Êï∞ÁªÑÈùûÁ©∫Ôºå‰∏îÈïøÂ∫¶‰∏ç‰ºöË∂ÖËøá20„ÄÇ ÂàùÂßãÁöÑÊï∞ÁªÑÁöÑÂíå‰∏ç‰ºöË∂ÖËøá1000„ÄÇ ‰øùËØÅËøîÂõûÁöÑÊúÄÁªàÁªìÊûúËÉΩË¢´32‰ΩçÊï¥Êï∞Â≠ò‰∏ã„ÄÇ ÊÄùË∑Ø Êö¥ÂäõÊ≥ï ÔºåËßÅÂÆòÊñπÈ¢òËß£ https://leetcode-cn.com/problems/target-sum/solution/mu-biao-he-by-leetcode/ DpÔºåÊàëÂÅöÁöÑÊó∂ÂÄôÁ¨¨‰∏ÄÂèçÂ∫îÊòØÁî®ÁöÑ dpÔºå‰ΩÜÊòØËøôÈáåÊúâ‰∏™Âõ∞ÈöæÔºådp‰∏çËÉΩÁî®‰∫åÁª¥Êï∞ÁªÑË°®Á§∫ÔºåÂõ†‰∏∫ÂèØËÉΩË∂äÁïåÔºå‰∏ãÊ†á‰∏∫Ë¥üÊï∞ÔºåÊâÄ‰ª•ÂèØ‰ª•Áî® hashmapÔºådp[i][j] ËΩ¨Âåñ‰∏∫ i ÂΩì keyÔºåj ÂΩì value„ÄÇ ËΩ¨Âåñ‰∏∫ 0-1 ËÉåÂåÖÈóÆÈ¢ò„ÄÇ https://leetcode-cn.com/problems/target-sum/solution/python-dfs-xiang-jie-by-jimmy00745/ https://leetcode-cn.com/problems/target-sum/solution/dong-tai-gui-hua-ji-bai-liao-98de-javayong-hu-by-r/ ‰ª£Á†Å123456789101112131415161718public class Solution &#123; public int findTargetSumWays(int[] nums, int S) &#123; int[] dp = new int[2001]; dp[nums[0] + 1000] = 1; dp[-nums[0] + 1000] += 1; for (int i = 1; i &lt; nums.length; i++) &#123; int[] next = new int[2001]; for (int sum = -1000; sum &lt;= 1000; sum++) &#123; if (dp[sum + 1000] &gt; 0) &#123; next[sum + nums[i] + 1000] += dp[sum + 1000]; next[sum - nums[i] + 1000] += dp[sum + 1000]; &#125; &#125; dp = next; &#125; return S &gt; 1000 ? 0 : dp[S + 1000]; &#125;&#125; 215. Êï∞ÁªÑ‰∏≠ÁöÑÁ¨¨K‰∏™ÊúÄÂ§ßÂÖÉÁ¥†È¢òÁõÆÊó†Â∫èÊï∞ÁªÑÁ¨¨KÂ§ßÁöÑÊï∞ Á§∫‰æã 1 12ËæìÂÖ•: [3,2,1,5,6,4] Âíå k = 2ËæìÂá∫: 5 ÊÄùË∑Ø Âø´Êéí Â§ßÈ°∂Â†Ü Â∞èÈ°∂Â†Ü ‰ºòÂÖàÁ∫ßÈòüÂàóÂÆûÁé∞ == Â∞èÈ°∂Â†ÜÂÆûÁé∞ ‰ª£Á†Å Âø´Êéí 123456789101112131415161718192021222324252627282930313233343536373839404142434445/** * Âø´ÈÄüÈÄâÊã©ÁöÑÊÄùÊÉ≥ */public int findKthLargest(int[] nums, int k) &#123; int left = 0, right = nums.length - 1; while (true)&#123; // Á¨¨‰∏ÄÊ¨°ÂÅö partition ÂæóÂà∞ÁöÑ‰∏ãÊ†á‰ΩçÁΩÆ int index = partition(nums, left, right); if (index == k - 1) &#123; return nums[index]; &#125; else if (index &lt; k - 1) &#123; left = index + 1; &#125; else &#123; right = index - 1; &#125; &#125;&#125;private int partition(int[] nums, int left, int right) &#123; int pivot = nums[right]; int pivotIndex = right; while (left &lt; right) &#123; while (left &lt; right &amp;&amp; nums[left] &gt;= pivot) &#123; left++; &#125; while (left &lt; right &amp;&amp; nums[right] &lt;= pivot) &#123; right--; &#125; // ‰∫§Êç¢ pivot Âíå swap(nums, left, right); &#125; nums[pivotIndex] = nums[left]; nums[left] = pivot; return left;&#125;public void swap(int[] nums, int i, int j)&#123; int temp = nums[i]; nums[i] = nums[j]; nums[j] = temp;&#125;‰ΩúËÄÖÔºökelly2018ÈìæÊé•Ôºöhttps://leetcode-cn.com/problems/kth-largest-element-in-an-array/solution/java-liang-chong-fang-fa-xiao-ding-dui-kuai-su-xua/Êù•Ê∫êÔºöÂäõÊâ£ÔºàLeetCodeÔºâËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ Â§ßÊ†πÂ†Ü 12345678910111213141516171819202122232425262728293031323334353637383940414243class Solution &#123; public int findKthLargest(int[] nums, int k) &#123; int heapSize = nums.length; buildMaxHeap(nums, heapSize); for (int i = nums.length - 1; i &gt;= nums.length - k + 1; --i) &#123; swap(nums, 0, i); --heapSize; maxHeapify(nums, 0, heapSize); &#125; return nums[0]; &#125; public void buildMaxHeap(int[] a, int heapSize) &#123; for (int i = heapSize / 2; i &gt;= 0; --i) &#123; maxHeapify(a, i, heapSize); &#125; &#125; public void maxHeapify(int[] a, int i, int heapSize) &#123; int l = i * 2 + 1, r = i * 2 + 2, largest = i; if (l &lt; heapSize &amp;&amp; a[l] &gt; a[largest]) &#123; largest = l; &#125; if (r &lt; heapSize &amp;&amp; a[r] &gt; a[largest]) &#123; largest = r; &#125; if (largest != i) &#123; swap(a, i, largest); maxHeapify(a, largest, heapSize); &#125; &#125; public void swap(int[] a, int i, int j) &#123; int temp = a[i]; a[i] = a[j]; a[j] = temp; &#125;&#125;‰ΩúËÄÖÔºöLeetCode-SolutionÈìæÊé•Ôºöhttps://leetcode-cn.com/problems/kth-largest-element-in-an-array/solution/shu-zu-zhong-de-di-kge-zui-da-yuan-su-by-leetcode-/Êù•Ê∫êÔºöÂäõÊâ£ÔºàLeetCodeÔºâËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ Â∞èÊ†πÂ†Ü 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152class Solution &#123; public int findKthLargest(int[] nums, int k) &#123; // ÂÖàÂà©Áî®Ââç k ‰∏™ËäÇÁÇπÊûÑÂª∫‰∏Ä‰∏™Â†Ü, nums[0] ÊòØÂ∞èÈ°∂Â†ÜÁöÑÂ†ÜÈ°∂ÂÖÉÁ¥† buildHeap(nums, k); for (int i = k; i &lt; nums.length; i++) &#123; if (nums[i] &lt; nums[0]) &#123; continue; &#125; swap(nums,i,0); heapify(nums, k, 0); &#125; return nums[0]; &#125; private void buildHeap(int[] nums, int k) &#123; for (int i = k / 2 - 1; i &gt;= 0 ; i--) &#123; heapify(nums, k, i); &#125; &#125; private void heapify(int[] nums, int k, int i) &#123; // ÊúÄÂ∞èÂÄºÁöÑÁ¥¢Âºï int minPos = i; while (true) &#123; int left = i * 2 + 1; int right = i * 2 + 2; // Â∑¶Â≠êÊ†ëÊØîÊ†πÂ∞èÔºåÂ∞ÜÊúÄÂ∞èÂÄºÁöÑ‰ΩçÁΩÆËÆ∞ÂΩï‰∏∫Â∑¶Â≠êÊ†ë if (left &lt; k &amp;&amp; nums[left] &lt; nums[minPos]) &#123; minPos = left; &#125; if (right &lt; k &amp;&amp; nums[right] &lt; nums[minPos]) &#123; minPos = right; &#125; if (minPos == i) &#123; break; &#125; // ‰∫§Êç¢ÊúÄÂ∞èÂÄºÂíåÊ†πËäÇÁÇπÔºåÁªßÁª≠ËøõË°åË∞ÉÊï¥ swap(nums, minPos, i); i = minPos; &#125; &#125; public void swap(int[] nums, int i, int j)&#123; int temp = nums[i]; nums[i] = nums[j]; nums[j] = temp; &#125;&#125;‰ΩúËÄÖÔºökelly2018ÈìæÊé•Ôºöhttps://leetcode-cn.com/problems/kth-largest-element-in-an-array/solution/java-liang-chong-fang-fa-xiao-ding-dui-kuai-su-xua/Êù•Ê∫êÔºöÂäõÊâ£ÔºàLeetCodeÔºâËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ ‰ºòÂÖàÁ∫ßÈòüÂàó 1234567891011121314151617181920public int findKthLargest(int[] nums, int k) &#123; // ÈªòËÆ§Â∞èÈ°∂Â†Ü PriorityQueue&lt;Integer&gt; heap = new PriorityQueue&lt;Integer&gt;(k); for (int num : nums) &#123; if (heap.size() &lt; k)&#123; heap.offer(num); &#125; else &#123; if (num &gt; heap.peek())&#123; heap.poll(); heap.offer(num); &#125; &#125; &#125; return heap.peek();&#125;‰ΩúËÄÖÔºökelly2018ÈìæÊé•Ôºöhttps://leetcode-cn.com/problems/kth-largest-element-in-an-array/solution/java-liang-chong-fang-fa-xiao-ding-dui-kuai-su-xua/Êù•Ê∫êÔºöÂäõÊâ£ÔºàLeetCodeÔºâËëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ Ê±ÇÊ†πÂè∑nÊÄùË∑Ø‰∫åÂàÜ ‰ª£Á†Å1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162package ÁªÉÊâãÁÆóÊ≥ï;import java.text.DecimalFormat;class Main &#123; public static double sqrt(double num) &#123; if (num &lt; 0) &#123; return -1; &#125; double low = 0; double high = num / 2; double precision = 0.000001; //Ê†ºÂºèÂåñÔºå‰øùËØÅËæìÂá∫‰ΩçÊï∞ DecimalFormat df = new DecimalFormat("#.00"); double res = high; while (Math.abs(num - (res * res)) &gt; precision) &#123; if (high * high &gt; num) &#123; double n = high - (high - low) / 2; if (n * n &gt; num) &#123; high = n; &#125; else if (n * n &lt; num) &#123; low = n; &#125; else &#123; return Double.valueOf(df.format(n)); &#125; res = n; &#125; else if (high * high &lt; num) &#123; double m = high + (high - low) / 2; if (m * m &gt; num) &#123; low = high; high = m; &#125; else if (m * m &lt; num) &#123; low = high; high = m; &#125; else &#123; return Double.valueOf(df.format(m)); &#125; res = m; &#125; else &#123; return Double.valueOf(df.format(high)); &#125; &#125; return Double.valueOf(df.format(res)); &#125; public static void main(String[] args) &#123; System.out.println(sqrt(16)); &#125;&#125;public class SqrtN &#123; public static void main(String[] args) &#123; &#125;&#125; 343. Êï¥Êï∞ÊãÜÂàÜÈ¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Ê≠£Êï¥Êï∞ nÔºåÂ∞ÜÂÖ∂ÊãÜÂàÜ‰∏∫Ëá≥Â∞ë‰∏§‰∏™Ê≠£Êï¥Êï∞ÁöÑÂíåÔºåÂπ∂‰ΩøËøô‰∫õÊï¥Êï∞ÁöÑ‰πòÁßØÊúÄÂ§ßÂåñ„ÄÇ ËøîÂõû‰Ω†ÂèØ‰ª•Ëé∑ÂæóÁöÑÊúÄÂ§ß‰πòÁßØ„ÄÇ Á§∫‰æã : 123ËæìÂÖ•: 10ËæìÂá∫: 36Ëß£Èáä: 10 = 3 + 3 + 4, 3 √ó 3 √ó 4 = 36 ÊÄùË∑ØÁ¨¨‰∏ÄÊÉ≥Ê≥ïÂ∞±ÊòØ dpÔºådp[i] ‰∏∫Êï¥Êï∞ iÔºåÂ∞Ü i ÊãÜÂàÜÊàêËá≥Â∞ë‰∏§‰∏™Êï¥Êï∞ÁöÑÂíåÔºåÂÖ∂Êï¥Êï∞ÁöÑ‰πòÁßØÁöÑÊúÄÂ§ßÂÄº„ÄÇ Âàô dp[i] = Math.max(dp[i],Math.max(dp[i-j],i-j) * j) ‰ª£Á†Å1234567891011121314class Solution &#123; public int integerBreak(int n) &#123; // dp[i] Ë°®Á§∫ i Ë¢´ÊãÜÂàÜÊàêËá≥Â∞ë‰∏§‰∏™Ê≠£Êï¥Êï∞ÁöÑÂíå // dp[0] = dp[1] = 0 // dp[i] = j * Math.max(dp[i-j],i-j) int[] dp = new int[n+1]; for(int i = 2;i &lt;= n;i++)&#123; for(int j = 1;j &lt; i;j++)&#123; dp[i] = Math.max(j * Math.max(dp[i-j],i-j),dp[i]); &#125; &#125; return dp[n]; &#125;&#125; 440. Â≠óÂÖ∏Â∫èÁöÑÁ¨¨KÂ∞èÊï∞Â≠óÈ¢òÁõÆÁªôÂÆöÊï¥Êï∞ n Âíå kÔºåÊâæÂà∞ 1 Âà∞ n ‰∏≠Â≠óÂÖ∏Â∫èÁ¨¨ k Â∞èÁöÑÊï∞Â≠ó„ÄÇ Ê≥®ÊÑèÔºö1 ‚â§ k ‚â§ n ‚â§ 109„ÄÇ Á§∫‰æã : 12345678ËæìÂÖ•:n: 13 k: 2ËæìÂá∫:10Ëß£Èáä:Â≠óÂÖ∏Â∫èÁöÑÊéíÂàóÊòØ [1, 10, 11, 12, 13, 2, 3, 4, 5, 6, 7, 8, 9]ÔºåÊâÄ‰ª•Á¨¨‰∫åÂ∞èÁöÑÊï∞Â≠óÊòØ 10„ÄÇ ÊÄùË∑ØÂâçÁºÄÊ†ëÔºåÊâÄ‰ª•ÊÄùË∑ØÂ∞±ÊòØÔºö Á°ÆÂÆöÊåáÂÆöÂâçÁºÄ‰∏ãÊâÄÊúâÂ≠êËäÇÁÇπÊï∞Ôºõ Ëã• k Â±û‰∫éÂΩìÂâçÂâçÁºÄ‰∏ãÔºåÂàôÂéªÂ≠êÊ†ëÈáåÈù¢ÁúãÔºõ Á¨¨ k ‰∏™Êï∞‰∏çÂ±û‰∫éÂΩìÂâçÂâçÁºÄ‰∏ãÔºåÂ∞±Êâ©Â§ßÂâçÁºÄÔºåÂæÄÂêéÁúã„ÄÇ ‰ª£Á†Å12345678910111213141516171819202122232425262728293031323334353637383940package ‰∫åÂà∑LeetCodeÂíåÂâëÊåáoffer.ÈìæË°®.‰∏âÂà∑ÈìæË°®;public class findKthNumber_440 &#123; public static void main(String[] args) &#123; findKthNumber_440 ff = new findKthNumber_440(); ff.findKthNumber(13,2); &#125; public int findKthNumber(int n, int k) &#123; int curr = 1; // Ê≠§Êó∂Á¨¨‰∏Ä‰∏™Á°ÆÂÆöËäÇÁÇπÊòØ 1ÔºåÊ≠§Êó∂Êàë‰ª¨ÈúÄË¶ÅÂéªÈô§Á¨¨‰∏Ä‰∏™ËäÇÁÇπ 1ÔºåÂΩì k ‰∏∫ 0 Êó∂ÔºåÂ∞±ËØ¥ÊòéÊâÄÊúâÁªìÁÇπÈÉΩÊâæÂà∞‰∫ÜÔºåÊ≠§Êó∂ÈúÄË¶ÅÁöÑÂÄºÂ∞±ÊòØ curr----ÂΩìÂâçÁ°ÆÂÆöÁöÑÈúÄË¶ÅËäÇÁÇπ k = k - 1; while (k &gt; 0) &#123; //ËÆ°ÁÆóÂâçÁºÄ‰πãÂâçÁöÑstepÊï∞ int steps = getSteps(n, curr, curr + 1); //ÂâçÁºÄÈó¥Ë∑ùÂ§™Â§ßÔºåÈúÄË¶ÅÊ∑±ÂÖ•‰∏ÄÂ±Ç if (steps &gt; k) &#123; curr *= 10; //Â§ö‰∫Ü‰∏Ä‰∏™Á°ÆÂÆöËäÇÁÇπÔºåÁªßÁª≠-1 k -= 1; &#125; //Èó¥Ë∑ùÂ§™Â∞èÔºåÈúÄË¶ÅÊâ©Â§ßÂâçÁºÄËåÉÂõ¥ else &#123; curr += 1; k -= steps; &#125; &#125; return curr; &#125; private int getSteps(int n, long curr, long next) &#123; int steps = 0; while (curr &lt;= n) &#123; steps += Math.min(n + 1, next) - curr; curr *= 10; next *= 10; &#125; return steps; &#125;&#125; 114. ‰∫åÂèâÊ†ëÂ±ïÂºÄ‰∏∫ÈìæË°®È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™‰∫åÂèâÊ†ëÔºåÂéüÂú∞Â∞ÜÂÆÉÂ±ïÂºÄ‰∏∫‰∏Ä‰∏™ÂçïÈìæË°®„ÄÇ ‰æãÂ¶ÇÔºåÁªôÂÆö‰∫åÂèâÊ†ëÔºö 12345 1 / \ 2 5 / \ \3 4 6 Â∞ÜÂÖ∂Â±ïÂºÄ‰∏∫Ôºö 12345678910111 \ 2 \ 3 \ 4 \ 5 \ 6 ÊÄùË∑ØÂÖ∂ÂÆûÂ∞±ÊòØÂÖàÊääÊ†πËäÇÁÇπÁöÑÂè≥Â≠êÊ†ëÊîæÁΩÆÂà∞Ê†πËäÇÁÇπÂ∑¶ËæπÔºåÁÑ∂ÂêéÂ∞ÜÂ∑¶Â≠êÊ†ëÊîæÂà∞Âè≥Â≠êÊ†ëÁöÑ‰ΩçÁΩÆÔºåÂ∞ÜÂ∑¶Â≠êÊ†ëÁΩÆ‰∏∫Á©∫„ÄÇ ‰ª£Á†Å1234567891011121314151617181920public void flatten(TreeNode root) &#123; while (root != null) &#123; //Â∑¶Â≠êÊ†ë‰∏∫ nullÔºåÁõ¥Êé•ËÄÉËôë‰∏ã‰∏Ä‰∏™ËäÇÁÇπ if (root.left == null) &#123; root = root.right; &#125; else &#123; // ÊâæÂ∑¶Â≠êÊ†ëÊúÄÂè≥ËæπÁöÑËäÇÁÇπ TreeNode pre = root.left; while (pre.right != null) &#123; pre = pre.right; &#125; //Â∞ÜÂéüÊù•ÁöÑÂè≥Â≠êÊ†ëÊé•Âà∞Â∑¶Â≠êÊ†ëÁöÑÊúÄÂè≥ËæπËäÇÁÇπ pre.right = root.right; // Â∞ÜÂ∑¶Â≠êÊ†ëÊèíÂÖ•Âà∞Âè≥Â≠êÊ†ëÁöÑÂú∞Êñπ root.right = root.left; root.left = null; // ËÄÉËôë‰∏ã‰∏Ä‰∏™ËäÇÁÇπ root = root.right; &#125; &#125; 752. ÊâìÂºÄËΩ¨ÁõòÈîÅÈ¢òÁõÆ‰Ω†Êúâ‰∏Ä‰∏™Â∏¶ÊúâÂõõ‰∏™ÂúÜÂΩ¢Êã®ËΩÆÁöÑËΩ¨ÁõòÈîÅ„ÄÇÊØè‰∏™Êã®ËΩÆÈÉΩÊúâ10‰∏™Êï∞Â≠óÔºö &#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39; „ÄÇÊØè‰∏™Êã®ËΩÆÂèØ‰ª•Ëá™Áî±ÊóãËΩ¨Ôºö‰æãÂ¶ÇÊää &#39;9&#39; Âèò‰∏∫ &#39;0&#39;Ôºå&#39;0&#39; Âèò‰∏∫ &#39;9&#39; „ÄÇÊØèÊ¨°ÊóãËΩ¨ÈÉΩÂè™ËÉΩÊóãËΩ¨‰∏Ä‰∏™Êã®ËΩÆÁöÑ‰∏Ä‰ΩçÊï∞Â≠ó„ÄÇ ÈîÅÁöÑÂàùÂßãÊï∞Â≠ó‰∏∫ &#39;0000&#39; Ôºå‰∏Ä‰∏™‰ª£Ë°®Âõõ‰∏™Êã®ËΩÆÁöÑÊï∞Â≠óÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ ÂàóË°® deadends ÂåÖÂê´‰∫Ü‰∏ÄÁªÑÊ≠ª‰∫°Êï∞Â≠óÔºå‰∏ÄÊó¶Êã®ËΩÆÁöÑÊï∞Â≠óÂíåÂàóË°®ÈáåÁöÑ‰ªª‰Ωï‰∏Ä‰∏™ÂÖÉÁ¥†Áõ∏ÂêåÔºåËøô‰∏™ÈîÅÂ∞Ü‰ºöË¢´Ê∞∏‰πÖÈîÅÂÆöÔºåÊó†Ê≥ïÂÜçË¢´ÊóãËΩ¨„ÄÇ Â≠óÁ¨¶‰∏≤ target ‰ª£Ë°®ÂèØ‰ª•Ëß£ÈîÅÁöÑÊï∞Â≠óÔºå‰Ω†ÈúÄË¶ÅÁªôÂá∫ÊúÄÂ∞èÁöÑÊóãËΩ¨Ê¨°Êï∞ÔºåÂ¶ÇÊûúÊó†ËÆ∫Â¶Ç‰Ωï‰∏çËÉΩËß£ÈîÅÔºåËøîÂõû -1„ÄÇ Á§∫‰æã 1: 123456ËæìÂÖ•Ôºödeadends = [&quot;0201&quot;,&quot;0101&quot;,&quot;0102&quot;,&quot;1212&quot;,&quot;2002&quot;], target = &quot;0202&quot;ËæìÂá∫Ôºö6Ëß£ÈáäÔºöÂèØËÉΩÁöÑÁßªÂä®Â∫èÂàó‰∏∫ &quot;0000&quot; -&gt; &quot;1000&quot; -&gt; &quot;1100&quot; -&gt; &quot;1200&quot; -&gt; &quot;1201&quot; -&gt; &quot;1202&quot; -&gt; &quot;0202&quot;„ÄÇÊ≥®ÊÑè &quot;0000&quot; -&gt; &quot;0001&quot; -&gt; &quot;0002&quot; -&gt; &quot;0102&quot; -&gt; &quot;0202&quot; ËøôÊ†∑ÁöÑÂ∫èÂàóÊòØ‰∏çËÉΩËß£ÈîÅÁöÑÔºåÂõ†‰∏∫ÂΩìÊã®Âä®Âà∞ &quot;0102&quot; Êó∂Ëøô‰∏™ÈîÅÂ∞±‰ºöË¢´ÈîÅÂÆö„ÄÇ Á§∫‰æã 2: 1234ËæìÂÖ•: deadends = [&quot;8888&quot;], target = &quot;0009&quot;ËæìÂá∫Ôºö1Ëß£ÈáäÔºöÊääÊúÄÂêé‰∏Ä‰ΩçÂèçÂêëÊóãËΩ¨‰∏ÄÊ¨°Âç≥ÂèØ &quot;0000&quot; -&gt; &quot;0009&quot;„ÄÇ Á§∫‰æã 3: 1234ËæìÂÖ•: deadends = [&quot;8887&quot;,&quot;8889&quot;,&quot;8878&quot;,&quot;8898&quot;,&quot;8788&quot;,&quot;8988&quot;,&quot;7888&quot;,&quot;9888&quot;], target = &quot;8888&quot;ËæìÂá∫Ôºö-1Ëß£ÈáäÔºöÊó†Ê≥ïÊóãËΩ¨Âà∞ÁõÆÊ†áÊï∞Â≠ó‰∏î‰∏çË¢´ÈîÅÂÆö„ÄÇ Á§∫‰æã 4: 12ËæìÂÖ•: deadends = [&quot;0000&quot;], target = &quot;8888&quot;ËæìÂá∫Ôºö-1 ÊÄùË∑Ø‰ΩøÁî® BFSÔºå‰ΩÜÊòØË¶ÅÊ≥®ÊÑèÂá†ÁÇπÔºö ‰ºöËµ∞ÂõûÂ§¥Ë∑Ø„ÄÇÊØîÂ¶ÇËØ¥Êàë‰ª¨‰ªé &quot;0000&quot; Êã®Âà∞ &quot;1000&quot;Ôºå‰ΩÜÊòØÁ≠â‰ªéÈòüÂàóÊãøÂá∫ &quot;1000&quot; Êó∂ÔºåËøò‰ºöÊã®Âá∫‰∏Ä‰∏™ &quot;0000&quot;ÔºåËøôÊ†∑ÁöÑËØù‰ºö‰∫ßÁîüÊ≠ªÂæ™ÁéØÔºõ Ê≥®ÊÑèÁªàÊ≠¢Êù°‰ª∂Ôºõ Ë¶ÅÂØπ deaddends ËøõË°åÂ§ÑÁêÜÔºõ ‰ª£Á†Å1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859class Solution &#123; public int openLock(String[] deadends, String target) &#123; // Â≠òÂÇ®ÂΩìÂâçÈúÄË¶ÅÂπøÂ∫¶ÊêúÁ¥¢ÁöÑËäÇÁÇπ LinkedList&lt;String&gt; queue = new LinkedList(); // Â≠òÂÇ®ÂΩìÂâçÈÅçÂéÜËøáÁöÑÁªÑÂêàÔºåÈò≤Ê≠¢Ëµ∞ÂõûÂ§¥Ë∑Ø,ÂèØ‰ª•Áõ¥Êé•Â∞ÜÊ≠ªÈîÅÁöÑÊï∞Â≠óÁªÑÂêàÊîæÂà∞Â∑≤visited Set&lt;String&gt; visited = new HashSet(); // Â≠òÂÇ®Ê≠ªÈîÅÊï∞Â≠óÁªÑÂêà // Set&lt;String&gt; deadSet = new HashSet(); for(String dead : deadends) visited.add(dead); if(visited.contains("0000")) return -1; queue.offer("0000"); visited.add("0000"); int count = 0; while(!queue.isEmpty())&#123; // Âà´Âøò‰∫ÜÊâ©Êï£ËäÇÁÇπ int sz = queue.size(); for(int i = 0;i &lt; sz;i++)&#123; String cur = queue.poll(); // Âà§Êñ≠ÊòØÂê¶Âà∞ËææÁªàÁÇπ // if(deadSet.contains(cur)) continue; if(target.equals(cur)) return count; for(int j = 0;j &lt; 4;j++)&#123; String up = plusOne(cur,j); if(!visited.contains(up))&#123; queue.offer(up); visited.add(up); &#125; String down = minusOne(cur,j); if(!visited.contains(down))&#123; queue.offer(down); visited.add(down); &#125; &#125; &#125; count++; &#125; return -1; &#125; // Â∞Ü s[j] Âêë‰∏äÊã®Âä®‰∏ÄÊ¨° public String plusOne(String s, int j) &#123; char[] ch = s.toCharArray(); if (ch[j] == '9') ch[j] = '0'; else ch[j] += 1; return new String(ch); &#125; // Â∞Ü s[i] Âêë‰∏ãÊã®Âä®‰∏ÄÊ¨° public String minusOne(String s, int j) &#123; char[] ch = s.toCharArray(); if (ch[j] == '0') ch[j] = '9'; else ch[j] -= 1; return new String(ch); &#125;&#125;]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>JAVA</tag>
        <tag>ÁÆóÊ≥ï</tag>
        <tag>Leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexoÊèê‰∫§ÊñáÁ´†Âá∫Áé∞ÈóÆÈ¢ò]]></title>
    <url>%2F2019%2F10%2F09%2F%E8%A7%A3%E5%86%B3hexo%E6%97%A0%E6%B3%95git%E4%B8%8A%E7%9A%84%E9%97%AE%E9%A2%98.html</url>
    <content type="text"><![CDATA[ÈóÆÈ¢òËÆ∞ÂΩïhexoÂèëÂ∏ÉÊñáÁ´†Êä•ÈîôËÆ∞ÂΩïÔºöUnhandled rejection TypeError: Cannot set property ‚ÄòlastIndex‚Äô of undefinedÂèëÂ∏ÉÊñáÁ´†Êó∂Âá∫Áé∞ÈóÆÈ¢òÔºåÂêåÊó∂Êä•ÁöÑÈîôËøòÊúâÔºöxcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun Ëß£ÂÜ≥Êé™ÊñΩÂèëÁé∞ÊòØgitÂá∫Áé∞ÈóÆÈ¢òÔºÅÔºÅÔºÅ ÊéßÂà∂Á´ØËæìÂÖ•Ôºö 1brew install git 1xcode-select --install Âú®xcode-selectÊåá‰ª§ÂÆâË£ÖÂ•Ω‰πãÂêéÔºåÂÜçÂëΩ‰ª§Ê£ÄÊü•‰∏Ä‰∏ãgitÊåá‰ª§ÁöÑÂ∏ÆÂä©‰ø°ÊÅØÔºö 1git -h ÂèØ‰ª•Ê≠£Á°ÆËæìÂá∫Áõ∏Â∫îÁöÑÂ∏ÆÂä©‰ø°ÊÅØÔºåÊÑèÂë≥ÁùÄgitÂ∑≤ÁªèË¢´‰øÆÂ§çÂ•Ω‰∫Ü„ÄÇ ÂéüÂõ†Êõ¥Êñ∞‰∫ÜCatalinaÂØºËá¥ÁöÑÔºåÊñ∞Á≥ªÁªüËæ£È∏°ÂìàÂìàÂìàÂìàÂìàÂìà]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂñúÂ§ßÊôÆÂ•î]]></title>
    <url>%2F2019%2F10%2F09%2F%E5%96%9C%E5%A4%A7%E6%99%AE%E5%A5%94.html</url>
    <content type="text"><![CDATA[ÂºÄÂøÉÂìáÔºÅÔºÅÔºÅÁªà‰∫éÂÜôÂà∞10wÂ≠ó‰∫ÜÔºÅÔºÅÔºÅÁªßÁª≠Âä†Ê≤πÔºÅÔºÅ]]></content>
      <categories>
        <category>ÂêêÊßΩ</category>
      </categories>
      <tags>
        <tag>happy </tag>
        <tag>happy day</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ListÊ∫êÁ†ÅÂàÜÊûê]]></title>
    <url>%2F2019%2F10%2F07%2FList%20%26%20Queue%20%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90.html</url>
    <content type="text"><![CDATA[ArrayList Ê∫êÁ†ÅÂàÜÊûêÔºàËΩ¨ËΩΩÔºâ‰∏çÁü•ÈÅìÂêÑ‰ΩçÊúãÂèãÔºåËøòËÆ∞ÂæóÂºÄÂ∑•ÂâçÂà∂ÂÆöÁöÑÂ≠¶‰π†ÁõÆÊ†á‰πàÔºü ÊúâÊ≤°Êúâ‰∏ÄÁõ¥‰∏∫‰∫ÜÈÇ£‰∏™ÁõÆÊ†áÂ∫üÂØùÂøòÈ£üÂë¢ÔºüÁªß ÊêûÊáÇ Java ÂÜÖÈÉ®Á±ª ÂêéÂºÄÂßãÊé¢Á¥¢ÊÄªÁªì Java ÈõÜÂêàÊ°ÜÊû∂Ê∫êÁ†ÅÁöÑÁü•ËØÜÔºåÂ∏åÊúõËÉΩÁªôËá™Â∑±Â§ØÂÆûÂü∫Á°ÄÔºå‰πüÂ∏åÊúõËÉΩ‰∏∫Ëá™Â∑±ÂÆûÁé∞ÁõÆÊ†áÊõ¥Ëøë‰∏ÄÊ≠•„ÄÇ ArrayList Ê∫êÁ†ÅÂàÜÊûêÊÄùË∑ØArrayList ÊòØÊàë‰ª¨ App ÂºÄÂèë‰∏≠Â∏∏Áî®ÁöÑ Java ÈõÜÂêàÁ±ªÔºå‰ªéÂ≠¶‰π† Java ÂºÄÂßãÊàë‰ª¨Âü∫Êú¨‰∏äÂ∞±ÂØπÂÆÉÂ§©Â§©Áõ∏ËßÅ‰∫ÜÔºå‰ΩÜÊòØÈÄöËøáÊé¢Á¥¢ArrayList Ê∫êÁ†ÅÔºåÊàë‰ª¨Â∞Ü‰ºöÊääÂÆÉ‰ªéÊôÆÈÄöÊúãÂèãÂèòÊàêÁü•Ê†πÁü•Â∫ïÁöÑËÄÅÊúãÂèã,Êú¨ÊñáÂ∞Ü‰ªé‰ª•‰∏ãÂá†ÈÉ®ÂàÜÂºÄÂßãÂàÜÊûê ArrayListÔºö ArrayList Ê¶ÇËø∞ ArrayList ÁöÑÊûÑÈÄ†ÂáΩÊï∞Ôºå‰πüÂ∞±ÊòØÊàë‰ª¨ÂàõÂª∫‰∏Ä‰∏™ ArrayList ÁöÑÊñπÊ≥ï ArrayList ÁöÑÊ∑ªÂä†ÂÖÉÁ¥†ÁöÑÊñπÊ≥ïÔºå ‰ª•Âèä ArrayList ÁöÑÊâ©ÂÆπÊú∫Âà∂ ArrayList ÁöÑÂà†Èô§ÂÖÉÁ¥†ÁöÑÂ∏∏Áî®ÊñπÊ≥ï ArrayList ÁöÑ ÊîπÊü•Â∏∏Áî®ÊñπÊ≥ï ArrayList ÁöÑ toArray ÊñπÊ≥ï ArrayList ÁöÑÈÅçÂéÜÊñπÊ≥ïÔºå‰ª•ÂèäÂ∏∏ËßÅÁöÑÈîôËØØÊìç‰ΩúÂç≥‰∫ßÁîüÈîôËØØÊìç‰ΩúÁöÑÂéüÂõ† ArrayList Ê¶ÇËø∞ArrayListÁöÑÂü∫Êú¨ÁâπÁÇπ ArrayList Â∫ïÂ±ÇÊòØ‰∏Ä‰∏™Âä®ÊÄÅÊâ©ÂÆπÁöÑÊï∞ÁªÑÁªìÊûÑ ÂÖÅËÆ∏Â≠òÊîæÔºà‰∏çÊ≠¢‰∏Ä‰∏™Ôºâ null ÂÖÉÁ¥† ÂÖÅËÆ∏Â≠òÊîæÈáçÂ§çÊï∞ÊçÆÔºåÂ≠òÂÇ®È°∫Â∫èÊåâÁÖßÂÖÉÁ¥†ÁöÑÊ∑ªÂä†È°∫Â∫è ArrayList Âπ∂‰∏çÊòØ‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®ÁöÑÈõÜÂêà„ÄÇÂ¶ÇÊûúÈõÜÂêàÁöÑÂ¢ûÂà†Êìç‰ΩúÈúÄË¶Å‰øùËØÅÁ∫øÁ®ãÁöÑÂÆâÂÖ®ÊÄßÔºåÂèØ‰ª•ËÄÉËôë‰ΩøÁî® CopyOnWriteArrayList „Äé‰ΩøÁî®ÁöÑÊòØ ReentrantLock ‰øùËØÅÂêåÊ≠•Ôºå‰ΩÜÊòØÊúâÂº±‰∏ÄËá¥ÊÄßÔºåÂõ†‰∏∫ÂÜôÊï∞ÊçÆÊó∂ÊòØÂÖàÊã∑Ë¥ùÂÜçÂ§çÂà∂ÂõûÂéª„ÄÇ„ÄèÊàñËÄÖ‰ΩøÁî® collections.synchronizedList(List l) ÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®ÁöÑArrayListÁ±ª„ÄÇÂΩìÁÑ∂‰∫ÜÔºåÊ≤°ÊúâÁªùÂØπÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÔºåËøôÈáåÁöÑÁ∫øÁ®ãÂÆâÂÖ®Âè™ËÉΩ‰øùËØÅÂçï‰∏™ÊñπÊ≥ïÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÔºåÂ¶ÇÊûúÂ§çÂêàÊìç‰ΩúÔºåÊØîÂ¶Ç‰∏Ä‰∏™Á∫øÁ®ã‰∏çÊñ≠ËØªÂèñ‰∏Ä‰∏™Êï∞ÔºåÂè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ã‰∏çÊñ≠Âà†Èô§‰∏Ä‰∏™Êï∞Ôºå‰∏§‰∏™ÊñπÊ≥ïÁöÑÂ§çÂêàÊìç‰ΩúÔºå‰πü‰ºöÂØºËá¥Á∫øÁ®ã‰∏çÂÆâÂÖ®ÔºåËøôÂùóÊàëÂú® jvm ÁöÑÊúÄÂêé‰∏ÄËäÇ‰πüÊúâËÆ≤„ÄÇ ArrayList ÁöÑÁªßÊâøÂÖ≥Á≥ª12public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable ‰ªé ArrayList ÁöÑÁªßÊâøÂÖ≥Á≥ªÊù•ÁúãÔºå ArrayList ÁªßÊâøËá™ AbstractList ÔºåÂÆûÁé∞‰∫ÜList\, RandomAccess, Cloneable, java.io.Serializable Êé•Âè£„ÄÇ ÂÖ∂‰∏≠ AbstractListÂíå List\ ÊòØËßÑÂÆö‰∫Ü ArrayList ‰Ωú‰∏∫‰∏Ä‰∏™ÈõÜÂêàÊ°ÜÊû∂ÂøÖÈ°ªÂÖ∑Â§áÁöÑ‰∏Ä‰∫õÂ±ûÊÄßÂíåÊñπÊ≥ïÔºåArrayList Êú¨Ë∫´Ë¶ÜÂÜô‰∫ÜÂü∫Á±ªÂíåÊé•Âè£ÁöÑÂ§ßÈÉ®ÂàÜÊñπÊ≥ïÔºåËøôÂ∞±ÂåÖÂê´Êàë‰ª¨Ë¶ÅÂàÜÊûêÁöÑÂ¢ûÂà†ÊîπÊü•Êìç‰Ωú„ÄÇ ArrayList ÂÆûÁé∞ RandomAccess Êé•Âè£Ê†áËØÜÁùÄÂÖ∂ÊîØÊåÅÈöèÊú∫Âø´ÈÄüËÆøÈóÆÔºåÊü•ÁúãÊ∫êÁ†ÅÂèØ‰ª•Áü•ÈÅì RandomAccess ÂÖ∂ÂÆûÂè™ÊòØ‰∏Ä‰∏™Ê†áËØÜÔºåÊ†áËØÜÊüê‰∏™Á±ªÊã•ÊúâÈöèÊú∫Âø´ÈÄüËÆøÈóÆÁöÑËÉΩÂäõÔºåÈíàÂØπ ArrayList ËÄåË®ÄÈÄöËøá get(index) ÂéªËÆøÈóÆÂÖÉÁ¥†ÂèØ‰ª•ËææÂà∞ O(1) ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶„ÄÇÊúâ‰∫õÈõÜÂêàÁ±ª‰∏çÊã•ÊúâËøôÁßçÈöèÊú∫Âø´ÈÄüËÆøÈóÆÁöÑËÉΩÂäõÔºåÊØîÂ¶Ç LinkedList Â∞±Ê≤°ÊúâÂÆûÁé∞Ëøô‰∏™Êé•Âè£„ÄÇ ArrayList ÂÆûÁé∞ Cloneable Êé•Âè£Ê†áËØÜÁùÄ‰ªñÂèØ‰ª•Ë¢´ÂÖãÈöÜ/Â§çÂà∂ÔºåÂÖ∂ÂÜÖÈÉ®ÂÆûÁé∞‰∫Ü clone ÊñπÊ≥ï‰æõ‰ΩøÁî®ËÄÖË∞ÉÁî®Êù•ÂØπ ArrayList ËøõË°åÂÖãÈöÜÔºå‰ΩÜÂÖ∂ÂÆûÁé∞Âè™ÈÄöËøá Arrays.copyOf ÂÆåÊàê‰∫ÜÂØπ ArrayList ËøõË°å„ÄåÊµÖÊã∑Ë¥ù„ÄçÔºå‰πüÂ∞±ÊòØ‰Ω†ÊîπÂèò ArrayList cloneÂêéÁöÑÈõÜÂêà‰∏≠ÁöÑÂÖÉÁ¥†ÔºåÊ∫êÈõÜÂêà‰∏≠ÁöÑÂÖÉÁ¥†‰πü‰ºöÊîπÂèòÔºåÂØπ‰∫éÊ∑±ÊµÖÊã∑Ë¥ùÊàëÂ∑≤ÁªèÂçïÁã¨Êï¥ÁêÜ‰∏ÄÁØáÊñáÁ´†Êù•ËÆ≤Ëø∞ËøôÈáå‰∏çÂÜçËøáÂ§öÁöÑËØ¥„ÄÇ ÂØπ‰∫é java.io.Serializable Ê†áËØÜÁùÄÈõÜÂêàÂèØË¢´Ë¢´Â∫èÂàóÂåñ„ÄÇ Êàë‰ª¨ÂèëÁé∞‰∫Ü‰∏Ä‰∫õÊúâË∂£ÁöÑ‰∫ãÊÉÖÔºåÈô§‰∫Ü List\ ‰ª•Â§ñÔºåArrayList ÂÆûÁé∞ÁöÑÊé•Âè£ÈÉΩÊòØÊ†áËØÜÊé•Âè£ÔºåÊ†áËØÜÁùÄËøô‰∏™Á±ªÂÖ∑ÊúâÊÄéÊ†∑ÁöÑÁâπÁÇπÔºåÁúãËµ∑Êù•Êõ¥ÂÉèÊòØ‰∏Ä‰∏™Â±ûÊÄß„ÄÇ ArrayList ÁöÑÊûÑÈÄ†ÊñπÊ≥ïÂú®ËØ¥ÊûÑÈÄ†ÊñπÊ≥ï‰πãÂâçÊàë‰ª¨Ë¶ÅÂÖàÁúã‰∏ã‰∏éÊûÑÈÄ†ÂèÇÊï∞ÊúâÂÖ≥ÁöÑÂá†‰∏™ÂÖ®Â±ÄÂèòÈáèÔºö 1234567891011121314151617181920212223/*** ArrayList ÈªòËÆ§ÁöÑÊï∞ÁªÑÂÆπÈáè*/ private static final int DEFAULT_CAPACITY = 10;/*** ËøôÊòØ‰∏Ä‰∏™ÂÖ±‰∫´ÁöÑÁ©∫ÁöÑÊï∞ÁªÑÂÆû‰æãÔºåÂΩì‰ΩøÁî® ArrayList(0) ÊàñËÄÖ ArrayList(Collection&lt;? extends E&gt; c) * Âπ∂‰∏î c.size() = 0 ÁöÑÊó∂ÂÄôËÆ≤ elementData Êï∞ÁªÑËÆ≤ÊåáÂêëËøô‰∏™ÂÆû‰æãÂØπË±°„ÄÇ*/ private static final Object[] EMPTY_ELEMENTDATA = &#123;&#125;;/*** Âè¶‰∏Ä‰∏™ÂÖ±‰∫´Á©∫Êï∞ÁªÑÂÆû‰æãÔºåÁ¨¨‰∏ÄÊ¨° add ÂÖÉÁ¥†ÁöÑÊó∂ÂÄôÂ∞Ü‰ΩøÁî®ÂÆÉÊù•Âà§Êñ≠Êï∞ÁªÑÂ§ßÂ∞èÊòØÂê¶ËÆæÁΩÆ‰∏∫ DEFAULT_CAPACITY*/ private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;/*** ÁúüÊ≠£Ë£ÖËΩΩÈõÜÂêàÂÖÉÁ¥†ÁöÑÂ∫ïÂ±ÇÊï∞ÁªÑ * Ëá≥‰∫é transient ÂÖ≥ÈîÆÂ≠óËøôÈáåÁÆÄÂçïËØ¥‰∏ÄÂè•ÔºåË¢´ÂÆÉ‰øÆÈ•∞ÁöÑÊàêÂëòÂèòÈáèÊó†Ê≥ïË¢´ Serializable Â∫èÂàóÂåñ * ÊúâÂÖ¥Ë∂£ÁöÑÂèØ‰ª•ÂéªÁΩë‰∏äÊü•Áõ∏ÂÖ≥ËµÑÊñô* https://www.jianshu.com/p/14876ef38721 Ëøô‰∏™ÂÜôÂæóÂ•Ω*/ transient Object[] elementData; // non-private to simplify nested class access ÂÖ∂‰∏≠ÊúÄÈúÄË¶ÅÂÖ≥Ê≥®ÁöÑÂ∞±ÊòØ transient ‰øÆÈ•∞‰∫Ü elementDataÔºåÊàë‰ª¨Áü•ÈÅì transient ‰øÆÈ•∞ÁöÑÂèòÈáèÊòØÈò≤Ê≠¢ÂèòÈáèË¢´Â∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñÔºåÈÇ£‰∏∫‰Ωï ArrayList ÁªßÊâø‰∫Ü SerializableÔºåÂç¥Â∞ÜÂÖ∂ÂÜÖÈÉ®ÂÖÉÁ¥†Âèò‰∏∫ transient Âë¢ÔºüÂõ†‰∏∫ elementData ÊòØ‰∏Ä‰∏™ÁºìÂ≠òÊï∞ÁªÑÔºå‰ºöÈ¢ÑÁïô‰∏Ä‰∫õÂÆπÈáèÔºåÁ≠âÂÆπÈáè‰∏çË∂≥Êó∂ÂÜçÊâ©ÂÖÖÂÆπÈáèÔºåÈÇ£‰πàÊúâ‰∫õÁ©∫Èó¥ÂèØËÉΩÂ∞±Ê≤°ÊúâÂÆûÈôÖÂ≠òÂÇ®ÂÖÉÁ¥†ÔºåÈááÁî®‰∏äÈù¢ÁöÑÊñπÂºèÊù•ÂÆûÁé∞Â∫èÂàóÂåñÊó∂ÔºåÂ∞±ÂèØ‰ª•‰øùËØÅÂè™Â∫èÂàóÂåñÂÆûÈôÖÂ≠òÂÇ®ÁöÑÈÇ£‰∫õÂÖÉÁ¥†ÔºåËÄå‰∏çÊòØÊï¥‰∏™Êï∞ÁªÑÔºå‰ªéËÄåËäÇÁúÅÁ©∫Èó¥ÂíåÊó∂Èó¥„ÄÇ ËøòÊúâÂ∞±ÊòØÔºåÈÇ£ ArrayList ÊòØÂ¶Ç‰ΩïÂÆûÁé∞Â∫èÂàóÂåñÁöÑÂë¢ÔºüÊòØÂõ†‰∏∫ÂÖ∂ÂÜô‰∫Ü writeObject() Âíå readObject() ÔºåËôΩÁÑ∂Ëøô‰∏§‰∏™ÊñπÊ≥ïÈÉΩÊòØ‰ΩøÁî®ÁöÑÁßÅÊúâÊñπÊ≥ïÔºå‰ΩÜÂ¶Ç‰ΩïË∞ÉÁî®ÁöÑÂë¢ÔºüÂ∞±ÊòØÈÄöËøáÂèçÂ∞ÑÊú∫Âà∂Âæó‰ª•Ë∞ÉÁî®ÁöÑ„ÄÇÂèçÂ∞ÑÈáåÈù¢ÊòØÊúâ setAccessible() ÂèØ‰ª•ÂøΩÁï•ÊñπÊ≥ïÂâçÁöÑ private„ÄÇ ÂÖ∑‰ΩìËßÅÔºö ‰ΩúËÄÖÔºöÊ±™ÂíåÂëÜÂñµÈìæÊé•Ôºöhttps://www.jianshu.com/p/14876ef38721Êù•Ê∫êÔºöÁÆÄ‰π¶Ëëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ„ÄÇÂïÜ‰∏öËΩ¨ËΩΩËØ∑ËÅîÁ≥ª‰ΩúËÄÖËé∑ÂæóÊéàÊùÉÔºåÈùûÂïÜ‰∏öËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ ÂØπ‰∫é‰∏äËø∞Âá†‰∏™ÊàêÂëòÂèòÈáèÔºåÊàë‰ª¨Âè™ÊòØÂú®Ê≥®Èáä‰∏≠ÁÆÄÂçïÁöÑËØ¥ÊòéÔºåÂØπ‰∫é‰ªñ‰ª¨ÂÖ∑‰ΩìÊúâ‰ªÄ‰πà‰ΩúÁî®ÔºåÂú®‰∏ãËæπÂàÜÊûêÊûÑÈÄ†ÊñπÊ≥ïÂíåÊâ©ÂÆπÊú∫Âà∂ÁöÑÊó∂ÂÄôÂ∞Ü‰ºöÊõ¥ËØ¶ÁªÜÁöÑËÆ≤Ëß£„ÄÇ ArrayList ‰∏ÄÂÖ±‰∏âÁßçÊûÑÈÄ†ÊñπÂºèÔºåÊàë‰ª¨ÂÖà‰ªéÊó†ÂèÇÁöÑÊûÑÈÄ†ÊñπÊ≥ïÊù•ÂºÄÂßãÔºö Êó†ÂèÇÊûÑÈÄ†ÊñπÊ≥ï123456/*** ÊûÑÈÄ†‰∏Ä‰∏™ÂàùÂßãÂÆπÈáè‰∏∫10ÁöÑÁ©∫ÂàóË°®„ÄÇ*/public ArrayList() &#123; this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;&#125; ËøôÊòØÊàë‰ª¨ÁªèÂ∏∏‰ΩøÁî®ÁöÑ‰∏Ä‰∏™ÊûÑÈÄ†ÊñπÊ≥ïÔºåÂÖ∂ÂÜÖÈÉ®ÂÆûÁé∞Âè™ÊòØÂ∞Ü elementData ÊåáÂêë‰∫ÜÊàë‰ª¨ÂàöÊâçËÆ≤Âæó DEFAULTCAPACITY_EMPTY_ELEMENTDATA Ëøô‰∏™Á©∫Êï∞ÁªÑÔºåËøô‰∏™Á©∫Êï∞ÁªÑÁöÑÂÆπÈáèÊòØ 0Ôºå ‰ΩÜÊòØÊ∫êÁ†ÅÊ≥®ÈáäÂç¥ËØ¥ËøôÊòØÊûÑÈÄ†‰∏Ä‰∏™ÂàùÂßãÂÆπÈáè‰∏∫10ÁöÑÁ©∫ÂàóË°®„ÄÇËøôÊòØ‰∏∫‰ªÄ‰πàÔºüÂÖ∂ÂÆûÂú®ÈõÜÂêàË∞ÉÁî® add ÊñπÊ≥ïÊ∑ªÂä†ÂÖÉÁ¥†ÁöÑÊó∂ÂÄôÂ∞Ü‰ºöË∞ÉÁî® ensureCapacityInternal ÊñπÊ≥ïÔºåÂú®Ëøô‰∏™ÊñπÊ≥ïÂÜÖÈÉ®Âà§Êñ≠‰∫ÜÔºö 123if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123; minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);&#125; ÂèØËßÅÔºåÂ¶ÇÊûúÈááÁî®Êó†ÂèÇÊï∞ÊûÑÈÄ†ÊñπÊ≥ïÁöÑÊó∂ÂÄôÁ¨¨‰∏ÄÊ¨°Ê∑ªÂä†ÂÖÉÁ¥†ËÇØÂÆöËµ∞Ëøõ if Âà§Êñ≠‰∏≠ minCapacity Â∞ÜË¢´ËµãÂÄº‰∏∫ 10ÔºåÊâÄ‰ª•ÊûÑÈÄ†‰∏Ä‰∏™ÂàùÂßãÂÆπÈáè‰∏∫10ÁöÑÁ©∫ÂàóË°® ‰πüÂ∞±ÊòØËøô‰∏™ÊÑèÊÄù„ÄÇ ÊåáÂÆöÂàùÂßãÂÆπÈáèÁöÑÊûÑÈÄ†ÊñπÊ≥ï12345678910111213141516/*** ÊûÑÈÄ†‰∏Ä‰∏™ÂÖ∑ÊúâÊåáÂÆöÂàùÂßãÂÆπÈáèÁöÑÁ©∫ÂàóË°®„ÄÇ* @param ÂàùÂßãÂÆπÈáè * @throws Â¶ÇÊûúÂèÇÊï∞Â∞è‰∫é 0 Â∞Ü‰ºöÊäõÂá∫ IllegalArgumentException ÂèÇÊï∞‰∏çÂêàÊ≥ïÂºÇÂ∏∏ */ public ArrayList(int initialCapacity) &#123; if (initialCapacity &gt; 0) &#123; this.elementData = new Object[initialCapacity]; &#125; else if (initialCapacity == 0) &#123; this.elementData = EMPTY_ELEMENTDATA; &#125; else &#123; throw new IllegalArgumentException("Illegal Capacity: "+ initialCapacity); &#125;&#125; Â¶ÇÊûúÊàë‰ª¨È¢ÑÂÖàÁü•ÈÅì‰∏Ä‰∏™ÈõÜÂêàÂÖÉÁ¥†ÁöÑÂÆπÁ∫≥ÁöÑ‰∏™Êï∞ÁöÑÊó∂ÂÄôÊé®Ëçê‰ΩøÁî®Ëøô‰∏™ÊûÑÈÄ†ÊñπÊ≥ïÔºåÊØîÂ¶ÇÊàë‰ª¨Êúâ‰∏™FragmentPagerAdapter ‰∏ÄÂÖ±ÈúÄË¶ÅË£Ö 15 ‰∏™ Fragment ÔºåÈÇ£‰πàÊàë‰ª¨Â∞±ÂèØ‰ª•Âú®ÊûÑÈÄ†ÈõÜÂêàÁöÑÊó∂ÂÄôÁîüÊàê‰∏Ä‰∏™ÂàùÂßãÂÆπÈáè‰∏∫ 15 ÁöÑ‰∏Ä‰∏™ÈõÜÂêà„ÄÇÊúâ‰∫∫‰ºöËÆ§‰∏∫ ArrayList Ëá™Ë∫´ÂÖ∑ÊúâÂä®ÊÄÅÊâ©ÂÆπÁöÑÊú∫Âà∂ÔºåÊó†ÈúÄËøô‰πàÈ∫ªÁÉ¶Ôºå‰∏ãÈù¢Êàë‰ª¨ËÆ≤Ëß£Êâ©ÂÆπÊú∫Âà∂ÁöÑÊó∂ÂÄôÊàë‰ª¨Â∞±‰ºöÂèëÁé∞ÔºåÊØèÊ¨°Êâ©ÂÆπÊòØÈúÄË¶ÅÊúâ‰∏ÄÂÆöÁöÑÂÜÖÂ≠òÂºÄÈîÄÁöÑÔºåËÄåËøô‰∏™ÂºÄÈîÄÂú®È¢ÑÂÖàÁü•ÈÅìÂÆπÈáèÁöÑÊó∂ÂÄôÊòØÂèØ‰ª•ÈÅøÂÖçÁöÑ„ÄÇ Ê∫ê‰ª£Á†Å‰∏≠ÊåáÂÆöÂàùÂßãÂÆπÈáèÁöÑÊûÑÈÄ†ÊñπÊ≥ïÂÆûÁé∞ÔºåÂà§Êñ≠‰∫ÜÂ¶ÇÊûú Êàë‰ª¨ÊåáÂÆöÂÆπÈáèÂ§ß‰∫é 0 ÔºåÂ∞Ü‰ºöÁõ¥Êé• new ‰∏Ä‰∏™Êï∞ÁªÑÔºåËµãÂÄºÁªô elementData ÂºïÁî®‰Ωú‰∏∫ÈõÜÂêàÁúüÊ≠£ÁöÑÂ≠òÂÇ®Êï∞ÁªÑÔºåËÄåÊåáÂÆöÂÆπÈáèÁ≠â‰∫é 0 ÁöÑÊó∂ÂÄô‰ΩøÁî®ÊàêÂëòÂèòÈáè EMPTY_ELEMENTDATA ‰Ωú‰∏∫ÊöÇÊó∂ÁöÑÂ≠òÂÇ®Êï∞ÁªÑÔºåËøôÊòØ EMPTY_ELEMENTDATA Ëøô‰∏™Á©∫Êï∞ÁªÑÁöÑ‰∏Ä‰∏™Áî®Â§ÑÔºà‰∏çÂøÖÂ§™Ëøá‰∫éÁ∫†EMPTY_ELEMENTDATA ÁöÑ‰ΩúÁî®ÔºåÂÖ∂ÂÆûÂÆÉÁöÑÂú®Ê∫êÁ†Å‰∏≠Âá∫Áé∞ÁöÑÈ¢ëÁéáÂπ∂‰∏çÈ´òÔºâ„ÄÇ ‰ΩøÁî®Âè¶‰∏™‰∏Ä‰∏™ÈõÜÂêà Collection ÁöÑÊûÑÈÄ†ÊñπÊ≥ï12345678910111213141516/*** ÊûÑÈÄ†‰∏Ä‰∏™ÂåÖÂê´ÊåáÂÆöÈõÜÂêàÂÖÉÁ¥†ÁöÑÂàóË°®ÔºåÂÖÉÁ¥†ÁöÑÈ°∫Â∫èÁî±ÈõÜÂêàÁöÑËø≠‰ª£Âô®ËøîÂõû„ÄÇ* @param Ê∫êÈõÜÂêàÔºåÂÖ∂ÂÖÉÁ¥†Â∞ÜË¢´ÊîæÁΩÆÂà∞Ëøô‰∏™ÈõÜÂêà‰∏≠„ÄÇ * @Â¶ÇÊûúÂèÇÊï∞‰∏∫ nullÔºåÂ∞Ü‰ºöÊäõÂá∫ NullPointerException Á©∫ÊåáÈíàÂºÇÂ∏∏*/public ArrayList(Collection&lt;? extends E&gt; c) &#123; elementData = c.toArray(); if ((size = elementData.length) != 0) &#123; // c.toArray ÂèØËÉΩ(ÈîôËØØÂú∞)‰∏çËøîÂõû Object[]Á±ªÂûãÁöÑÊï∞ÁªÑ ÂèÇËßÅ jdk ÁöÑ bug ÂàóË°®(6260652) if (elementData.getClass() != Object[].class) elementData = Arrays.copyOf(elementData, size, Object[].class); &#125; else &#123; // Â¶ÇÊûúÈõÜÂêàÂ§ßÂ∞è‰∏∫Á©∫Â∞ÜËµãÂÄº‰∏∫ EMPTY_ELEMENTDATA Á≠âÂêå‰∫é new ArrayList(0); this.elementData = EMPTY_ELEMENTDATA; &#125; &#125; ÁúãÂÆåËøô‰∏™‰ª£Á†ÅÊàëÊúÄÁñëÊÉëÁöÑÂú∞ÊñπÊòØ Collection.toArray() Âíå Arrays.copyOf() Ëøô‰∏§‰∏™ÊñπÊ≥ïÁöÑ‰ΩøÁî®ÔºåÁúãÊù•ÊÉ≥ÊòéÁôΩËøô‰∏™ÊûÑÈÄ†ÂèÇÊï∞ÂÖ∑‰ΩìÂÅö‰∫Ü‰ªÄ‰πàÂøÖÈ°ªÁêÜËß£Ëøô‰∏§‰∏™ÊñπÊ≥ï‰∫Ü„ÄÇ Object[] Collection.toArray() ÊñπÊ≥ïÊàë‰ª¨ÈÉΩÁü•ÈÅì Collection ÊòØÈõÜÂêàÊ°ÜÊû∂ÁöÑË∂ÖÁ±ªÔºåÂÖ∂ÂÆû Collection.toArray ÊòØ‰∫§ÁªôÂÖ∑‰ΩìÁöÑÈõÜÂêàÂ≠êÁ±ªÂéªÂÆûÁé∞ÁöÑÔºåËøôÂ∞±ËØ¥Êòé‰∏çÂêåÁöÑÈõÜÂêàÂèØËÉΩÊúâ‰∏çÂêåÁöÑÂÆûÁé∞„ÄÇ‰ªñÁî®Êù•Â∞Ü‰∏Ä‰∏™ÈõÜÂêàËΩ¨Âåñ‰∏∫‰∏Ä‰∏™ Object[] Êï∞ÁªÑÔºå‰∫ãÂÆû‰∏äÁöÑÁúüÁöÑÊòØËøôÊ†∑ÁöÑ‰πàÔºüÂèÇËßÅ jdk ÁöÑ bug ÂàóË°®(6260652)ÂèàÊòØ‰ªÄ‰πàÊÑèÊÄùÂë¢ ÔºüÊàë‰ª¨Êù•Áúã‰∏ã‰∏ãËæπÁöÑËøô‰∏™‰æãÂ≠êÔºö 12345678910111213List&lt;String&gt; subClasses = Arrays.asList("abc","def");// class java.util.Arrays$ArrayList System.out.println(list.getClass()); Object[] objects = subClasses.toArray();// class java.lang.String; Object[] objArray = list.toArray(); //ËøôÈáåËøîÂõûÁöÑÊòØ String[]System.out.println(objects.getClass().getSimpleName()); objArray[0] = new Object(); // cause ArrayStoreException Âí¶Ôºü‰∏∫Âï•ËøôÈáåÂπ∂‰∏çÊòØ‰∏Ä‰∏™ Object Êï∞ÁªÑÂë¢ÔºüÂÖ∂ÂÆûÊàë‰ª¨Ê≥®ÊÑèÂà∞Ôºålist.getClass ÂæóÂà∞ÁöÑÂπ∂‰∏çÊòØÊàë‰ª¨‰ΩøÁî®ÁöÑ ArrayList ËÄåÊòØ Arrays ÁöÑÂÜÖÈÉ®Á±ª Arrays$ArrayList„ÄÇ 123456789ArrayList(E[] array) &#123; //ËøôÈáåÂè™ÊòØÊ£ÄÊü•‰∫ÜÊï∞ÁªÑÊòØÂê¶‰∏∫Á©∫Ôºå‰∏ç‰∏∫Á©∫Áõ¥Êé•Â∞ÜÂéüÊï∞ÁªÑËµãÂÄºÁªôËøô‰∏™ ArrayList ÁöÑÂ≠òÂÇ®Êï∞ÁªÑ„ÄÇ a = Objects.requireNonNull(array);&#125;@Overridepublic Object[] toArray()&#123; return a.clone();&#125; ËÄåÊàë‰ª¨Ë∞ÉÁî®ÁöÑ toArray ÊñπÊ≥ïÂ∞±ÊòØËøô‰∏™ÂÜÖÈÉ®ÂØπ‰∫é Collection.toArray ÁöÑÂÆûÁé∞Ôºå a.clone() ,ËøôÈáå clone Âπ∂‰∏ç‰ºöÊîπÂèò‰∏Ä‰∏™Êï∞ÁªÑÁöÑÁ±ªÂûãÔºåÊâÄ‰ª•ÂΩìÂéüÂßãÊï∞ÁªÑ‰∏≠ÊîæÁöÑ String Á±ªÂûãÁöÑÊó∂ÂÄôÂ∞±‰ºöÂá∫Áé∞‰∏äËæπÁöÑËøôÁßçÊÉÖÂÜµ‰∫Ü„ÄÇ ÂÖ∂ÂÆûÊàë‰ª¨ÂèØ‰ª•ËÆ§‰∏∫ËøôÊòØ jdk ÁöÑ‰∏Ä‰∏™ bugÔºåÊó©Âú® 05Âπ¥ÁöÑÊó∂ÂÄôË¢´‰∫∫ÊèêÂá∫Êù•‰∫ÜÔºå‰ΩÜÊòØ‰∏ÄÁõ¥Ê≤°‰øÆÂ§çÔºå‰ΩÜÊòØÂú®Êñ∞ÁöÑ „Äåjdk 1.9„Äç ÁßçËøô‰∏™ bug Ë¢´‰øÆÂ§ç‰∫Ü„ÄÇ ÊúâÂÖ¥Ë∂£ÁöÑÂèØ‰ª•ËøΩË∏™ bug 6260652 Áúã‰∏ã„ÄÇ Arrays.copyOf ÊñπÊ≥ïËøô‰∏™ÊñπÊ≥ïÊòØÂú®ÈõÜÂêàÊ∫êÁ†Å‰∏≠Â∏∏ËßÅÁöÑ‰∏Ä‰∏™ÊñπÊ≥ïÔºå‰ªñÊúâÂæàÂ§öÈáçËΩΩÊñπÂºè,Êàë‰ª¨Êù•Áúã‰∏ãÊúÄÊ†πÊú¨ÁöÑÊñπÊ≥ïÔºö 1234567891011public static &lt;T,U&gt; T[] copyOf(U[] original, int newLength, Class&lt;? extends T[]&gt; newType) &#123; @SuppressWarnings("unchecked") //Ê†πÊçÆclassÁöÑÁ±ªÂûãÊòØÂê¶ÊòØ Object[] Êù•ÂÜ≥ÂÆöÊòØ new ËøòÊòØÂèçÂ∞ÑÂéªÊûÑÈÄ†‰∏Ä‰∏™Ê≥õÂûãÊï∞ÁªÑ T[] copy = ((Object)newType == (Object)Object[].class) ? (T[]) new Object[newLength] : (T[]) Array.newInstance(newType.getComponentType(), newLength); //‰ΩøÁî® native ÊñπÊ≥ïÊâπÈáèËµãÂÄºÂÖÉÁ¥†Ëá≥Êñ∞Êï∞ÁªÑ‰∏≠„ÄÇ System.arraycopy(original, 0, copy, 0, Math.min(original.length, newLength)); return copy;&#125; ‰∏äËæπÁöÑÊ≥®Èáä‰πüÁúãÂá∫Êù•‰∫ÜÔºåArrays.copyOf ÊñπÊ≥ïÂ§çÂà∂Êï∞ÁªÑÁöÑÊó∂ÂÄôÂÖàÂà§Êñ≠‰∫ÜÊåáÂÆöÁöÑÊï∞ÁªÑÁ±ªÂûãÊòØÂê¶‰∏∫ Object[] Á±ªÂûãÔºåÂê¶Âàô‰ΩøÁî®ÂèçÂ∞ÑÂéªÊûÑÈÄ†‰∏Ä‰∏™ÊåáÂÆöÁ±ªÂûãÁöÑÊï∞ÁªÑ„ÄÇÊúÄÂêé‰ΩøÁî® System.arraycopy Ëøô‰∏™ native ÊñπÊ≥ïÔºåÂéªÂÆûÁé∞ÊúÄÁªàÁöÑÊï∞ÁªÑËµãÂÄºÔºånewLength Â¶ÇÊûúÊØî original.length Â§ßÁöÑÊó∂ÂÄô‰ºöÂ∞ÜÂ§ö‰ΩôÁöÑÁ©∫Èó¥ËµãÂÄº‰∏∫ null Áî±‰∏ãËæπÁöÑ‰æãÂ≠êÂèØËßÅ: 12345String[] arrString = &#123;"abc","def"&#125;;Object[] copyOf = Arrays.copyOf(arrString, 5, Object[].class);//[abc, def, null, null, null]System.out.println(Arrays.toString(copyOf)); ÂΩìÁÑ∂ ArrayList(Collection&lt;? extends E&gt; c) Â§çÂà∂ÁöÑÊó∂ÂÄô‰º†ÈÄíÁöÑÊòØ c.size() ÊâÄ‰ª•‰∏ç‰ºöÂá∫Áé∞ null„ÄÇ ex: ÂØπ‰∫é System.arraycopy ËØ•ÊñπÊ≥ïÔºåÊú¨Êñá‰∏çÂÜçÂ±ïÂºÄËÆ®ËÆ∫ÔºåÊúâ‰∏ÄÁØáÂØπ‰∫éÂÖ∂ÂàÜÊûêÂæàÂ•ΩÁöÑÊñáÁ´†Â§ßÂÆ∂ÂèØ‰ª•ÂéªÂèÇËÄÉSystemÔºöSystem.arraycopyÊñπÊ≥ïËØ¶Ëß£ okÔºåÁªï‰∫ÜËøô‰πàÂ§ßÁöÑÂúàÂ≠êÁªà‰∫éÊòéÁôΩ‰∫ÜÔºåArrayList(Collection&lt;? extends E&gt; c)Âπ≤‰∫ÜÂï•‰∫ÜÔºåÂÖ∂ÂÆûÂ∞±ÊòØÂ∞Ü‰∏Ä‰∏™ÈõÜÂêà‰∏≠ÁöÑÂÖÉÁ¥†Â°ûÂà∞ ArrayList Â∫ïÂ±ÇÁöÑÊï∞ÁªÑ‰∏≠„ÄÇËá≥Ê≠§Êàë‰ª¨‰πüÂ∞Ü ArrayList ÁöÑÊûÑÈÄ†Á†îÁ©∂ÂÆå‰∫Ü„ÄÇ ArrayListÁöÑÊ∑ªÂä†ÂÖÉÁ¥† &amp; Êâ©ÂÆπÊú∫Âà∂Êï≤ÈªëÊùø‰∫ÜÔºÅËøôÂùóÊòØÈù¢ËØïÁöÑÂ∏∏ÂÆ¢‰∫ÜÔºåÊâÄ‰ª•ÂøÖÈ°ª‰ªîÁªÜÁ†îÁ©∂‰∏ã‰∫Ü„ÄÇÊàë‰ª¨ÂÖàÁúã‰∏ãÂ¶Ç‰ΩïÁªô‰∏Ä‰∏™ ArrayList Ê∑ªÂä†‰∏Ä‰∏™ÂÖÉÁ¥†: Âú®ÈõÜÂêàÊú´Â∞æÊ∑ªÂä†‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÊñπÊ≥ï123456789101112131415//ÊàêÂëòÂèòÈáè size Ê†áËØÜÈõÜÂêàÂΩìÂâçÂÖÉÁ¥†‰∏™Êï∞ÂàùÂßã‰∏∫ 0int sizeÔºõ/*** Â∞ÜÊåáÂÆöÂÖÉÁ¥†Ê∑ªÂä†Âà∞ÈõÜÂêàÔºàÂ∫ïÂ±ÇÊï∞ÁªÑÔºâÊú´Â∞æ* @param Â∞ÜË¶ÅÊ∑ªÂä†ÁöÑÂÖÉÁ¥†* @return ËøîÂõû true Ë°®Á§∫Ê∑ªÂä†ÊàêÂäü*/public boolean add(E e) &#123; //Ê£ÄÊü•ÂΩìÂâçÂ∫ïÂ±ÇÊï∞ÁªÑÂÆπÈáèÔºåÂ¶ÇÊûúÂÆπÈáè‰∏çÂ§üÂàôËøõË°åÊâ©ÂÆπ ensureCapacityInternal(size + 1); // Increments modCount!! //Â∞ÜÊï∞ÁªÑÊ∑ªÂä†‰∏Ä‰∏™ÂÖÉÁ¥†Ôºåsize Âä† 1 elementData[size++] = e; return true;&#125; Ë∞ÉÁî® add ÊñπÊ≥ïÁöÑÊó∂ÂÄôÊÄª‰ºöË∞ÉÁî® ensureCapacityInternal Êù•Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅËøõË°åÊï∞ÁªÑÊâ©ÂÆπÔºå ensureCapacityInternal ÂèÇÊï∞‰∏∫ÂΩìÂâçÈõÜÂêàÈïøÂ∫¶ size + 1ÔºåËøôÂæàÂ•ΩÁêÜËß£ÔºåÊòØÂê¶ÈúÄË¶ÅÊâ©ÂÖÖÈïøÂ∫¶ÔºåÈúÄË¶ÅÁúãÂΩìÂâçÂ∫ïÂ±ÇÊï∞ÁªÑÊòØÂê¶Â§üÊîæ size + 1‰∏™ÂÖÉÁ¥†ÁöÑ„ÄÇ Êâ©ÂÆπÊú∫Âà∂1234567891011121314151617//Êâ©ÂÆπÊ£ÄÊü•private void ensureCapacityInternal(int minCapacity) &#123; //Â¶ÇÊûúÊòØÊó†ÂèÇÊûÑÈÄ†ÊñπÊ≥ïÊûÑÈÄ†ÁöÑÁöÑÈõÜÂêàÔºåÁ¨¨‰∏ÄÊ¨°Ê∑ªÂä†ÂÖÉÁ¥†ÁöÑÊó∂ÂÄô‰ºöÊª°Ë∂≥Ëøô‰∏™Êù°‰ª∂ minCapacity Â∞Ü‰ºöË¢´ËµãÂÄº‰∏∫ 10 if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123; minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity); &#125; // Â∞Ü size + 1 Êàñ 10 ‰º†ÂÖ• ensureExplicitCapacity ËøõË°åÊâ©ÂÆπÂà§Êñ≠ ensureExplicitCapacity(minCapacity);&#125;private void ensureExplicitCapacity(int minCapacity) &#123; //Êìç‰ΩúÊï∞Âä† 1 Áî®‰∫é‰øùËØÅÂπ∂ÂèëËÆøÈóÆ modCount++; // Â¶ÇÊûú ÂΩìÂâçÊï∞ÁªÑÁöÑÈïøÂ∫¶ÊØîÊ∑ªÂä†ÂÖÉÁ¥†ÂêéÁöÑÈïøÂ∫¶Ë¶ÅÂ∞èÂàôËøõË°åÊâ©ÂÆπ if (minCapacity - elementData.length &gt; 0) grow(minCapacity);&#125; ‰∏äËæπÁöÑÊ∫êÁ†Å‰∏ªË¶ÅÂÅö‰∫ÜÊâ©ÂÆπÂâçÁöÑÂà§Êñ≠Êìç‰ΩúÔºåÊ≥®ÊÑèÂèÇÊï∞‰∏∫ÂΩìÂâçÈõÜÂêàÂÖÉÁ¥†‰∏™Êï∞+1ÔºåÁ¨¨‰∏ÄÊ¨°Ê∑ªÂä†ÂÖÉÁ¥†ÁöÑÊó∂ÂÄô size + 1 = 1 ,ËÄå elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA, ÈïøÂ∫¶‰∏∫ 0 Ôºå1 - 0 &gt; 0, ÊâÄ‰ª•ÈúÄË¶ÅËøõË°å grow Êìç‰Ωú‰πüÂ∞±ÊòØÊâ©ÂÆπ„ÄÇ 1234567891011121314151617181920212223242526272829303132333435/*** ÈõÜÂêàÁöÑÊúÄÂ§ßÈïøÂ∫¶ Integer.MAX_VALUE - 8 ÊòØ‰∏∫‰∫ÜÂáèÂ∞ëÂá∫ÈîôÁöÑÂá†Áéá Integer ÊúÄÂ§ßÂÄºÂ∑≤ÁªèÂæàÂ§ß‰∫Ü*/private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;/*** Â¢ûÂä†ÂÆπÈáèÔºå‰ª•Á°Æ‰øùÂÆÉËá≥Â∞ëËÉΩÂÆπÁ∫≥ÊúÄÂ∞èÂÆπÈáèÂèÇÊï∞ÊåáÂÆöÁöÑÂÖÉÁ¥†‰∏™Êï∞„ÄÇ* @param Êª°Ë∂≥Êù°‰ª∂ÁöÑÊúÄÂ∞èÂÆπÈáè*/private void grow(int minCapacity) &#123; //Ëé∑ÂèñÂΩìÂâç elementData ÁöÑÂ§ßÂ∞èÔºå‰πüÂ∞±ÊòØ List ‰∏≠ÂΩìÂâçÁöÑÂÆπÈáè int oldCapacity = elementData.length; //oldCapacity &gt;&gt; 1 Á≠â‰ª∑‰∫é oldCapacity / 2 ÊâÄ‰ª•Êñ∞ÂÆπÈáè‰∏∫ÂΩìÂâçÂÆπÈáèÁöÑ 1.5 ÂÄç int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); //Â¶ÇÊûúÊâ©Â§ß1.5ÂÄçÂêé‰ªçÊóßÊØî minCapacity Â∞èÈÇ£‰πàÁõ¥Êé•Á≠â‰∫é minCapacity if (newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; //Â¶ÇÊûúÊñ∞Êï∞ÁªÑÂ§ßÂ∞èÊØî MAX_ARRAY_SIZE Â∞±ÈúÄË¶ÅËøõ‰∏ÄÊ≠•ÊØîËæÉ minCapacity Âíå MAX_ARRAY_SIZE ÁöÑÂ§ßÂ∞è if (newCapacity - MAX_ARRAY_SIZE &gt; 0) newCapacity = hugeCapacity(minCapacity); // minCapacityÈÄöÂ∏∏Êé•Ëøë size Â§ßÂ∞è //‰ΩøÁî® Arrays.copyOf ÊûÑÂª∫‰∏Ä‰∏™ÈïøÂ∫¶‰∏∫ newCapacity Êñ∞Êï∞ÁªÑ Âπ∂Â∞Ü elementData ÊåáÂêëÊñ∞Êï∞ÁªÑ elementData = Arrays.copyOf(elementData, newCapacity);&#125;/*** ÊØîËæÉ minCapacity ‰∏é Integer.MAX_VALUE - 8 ÁöÑÂ§ßÂ∞èÂ¶ÇÊûúÂ§ßÂàôÊîæÂºÉ-8ÁöÑËÆæÂÆöÔºåËÆæÁΩÆ‰∏∫ Integer.MAX_VALUE */private static int hugeCapacity(int minCapacity) &#123; if (minCapacity &lt; 0) // overflow throw new OutOfMemoryError(); return (minCapacity &gt; MAX_ARRAY_SIZE) ? Integer.MAX_VALUE : MAX_ARRAY_SIZE;&#125; Áî±Ê≠§ÁúãÊù• ArrayList ÁöÑÊâ©ÂÆπÊú∫Âà∂ÁöÑÁü•ËØÜÁÇπ‰∏ÄÂÖ±Âèà‰∏§‰∏™ ÊØèÊ¨°Êâ©ÂÆπÁöÑÂ§ßÂ∞è‰∏∫ÂéüÊù•Â§ßÂ∞èÁöÑ 1.5 ÂÄç ÔºàÂΩìÁÑ∂ËøôÈáåÊ≤°ÊúâÂåÖÂê´ 1.5ÂÄçÂêéÂ§ß‰∫é MAX_ARRAY_SIZE ÁöÑÊÉÖÂÜµÔºâÊâ©ÂÆπÁöÑËøáÁ®ãÂÖ∂ÂÆûÊòØ‰∏Ä‰∏™Â∞ÜÂéüÊù•ÂÖÉÁ¥†Êã∑Ë¥ùÂà∞‰∏Ä‰∏™Êâ©ÂÆπÂêéÊï∞ÁªÑÂ§ßÂ∞èÁöÑÈïøÂ∫¶Êñ∞Êï∞ÁªÑ‰∏≠„ÄÇÊâÄ‰ª• ArrayList ÁöÑÊâ©ÂÆπÂÖ∂ÂÆûÊòØÁõ∏ÂØπÊù•ËØ¥ÊØîËæÉÊ∂àËÄóÊÄßËÉΩÁöÑ„ÄÇ Âú®ÊåáÂÆöËßíÊ†á‰ΩçÁΩÆÊ∑ªÂä†ÂÖÉÁ¥†ÁöÑÊñπÊ≥ï123456789101112131415161718/*** Â∞ÜÊåáÂÆöÁöÑÂÖÉÁ¥†ÊèíÂÖ•ËØ•ÂàóË°®‰∏≠ÁöÑÊåáÂÆö‰ΩçÁΩÆ„ÄÇÂ∞ÜÂΩìÂâç‰ΩçÁΩÆÁöÑÂÖÉÁ¥†(Â¶ÇÊûúÊúâ)Âíå‰ªª‰ΩïÂêéÁª≠ÂÖÉÁ¥†ÁßªÂà∞Âè≥Ëæπ(Â∞Ü‰∏Ä‰∏™ÂÖÉÁ¥†Ê∑ªÂä†Âà∞ÂÆÉ‰ª¨ÁöÑÁ¥¢Âºï‰∏≠)„ÄÇ* @param Ë¶ÅÊèíÂÖ•ÁöÑÁ¥¢Âºï‰ΩçÁΩÆ* @param Ë¶ÅÊ∑ªÂä†ÁöÑÂÖÉÁ¥†* @throws Â¶ÇÊûú index Â§ß‰∫éÈõÜÂêàÈïøÂ∫¶ Â∞è‰∫é 0 ÂàôÊäõÂá∫ËßíÊ†áË∂äÁïå IndexOutOfBoundsException ÂºÇÂ∏∏*/public void add(int index, E element) &#123; // Ê£ÄÊü•ËßíÊ†áÊòØÂê¶Ë∂äÁïå rangeCheckForAdd(index); // Êâ©ÂÆπÊ£ÄÊü• ensureCapacityInternal(size + 1); //Ë∞ÉÁî® native ÊñπÊ≥ïÊñ∞ÂûãÊï∞ÁªÑÊã∑Ë¥ù System.arraycopy(elementData, index, elementData, index + 1,size - index); // Ê∑ªÂä†Êñ∞ÂÖÉÁ¥† elementData[index] = element; size++;&#125; Êàë‰ª¨Áü•ÈÅì‰∏Ä‰∏™Êï∞ÁªÑÊòØ‰∏çËÉΩÂú®ËßíÊ†á‰ΩçÁΩÆÁõ¥Êé•ÊèíÂÖ•ÂÖÉÁ¥†ÁöÑÔºåArrayList ÈÄöËøáÊï∞ÁªÑÊã∑Ë¥ùÁöÑÊñπÊ≥ïÂ∞ÜÊåáÂÆöËßíÊ†á‰ΩçÁΩÆ‰ª•ÂèäÂÖ∂ÂêéÁª≠ÂÖÉÁ¥†Êï¥‰ΩìÂêëÂêéÁßªÂä®‰∏Ä‰∏™‰ΩçÁΩÆÔºåÁ©∫Âá∫ index ËßíÊ†áÁöÑ‰ΩçÁΩÆÔºåÊù•ËµãÂÄºÊñ∞ÁöÑÂÖÉÁ¥†„ÄÇ Â∞Ü‰∏Ä‰∏™Êï∞ÁªÑ src Ëµ∑Âßã srcPos ËßíÊ†á‰πãÂêé length ÈïøÂ∫¶Èó¥ÁöÑÂÖÉÁ¥†ÔºåËµãÂÄºÂà∞ dest Êï∞ÁªÑ‰∏≠ destPos Âà∞ destPos + length -1ÈïøÂ∫¶ËßíÊ†á‰ΩçÁΩÆ‰∏ä„ÄÇÂè™ÊòØÂú® add ÊñπÊ≥ï‰∏≠ src Âíå dest ‰∏∫Âêå‰∏Ä‰∏™Êï∞ÁªÑËÄåÂ∑≤„ÄÇ 123public static native void arraycopy(Object src, int srcPos, Object dest, int destPos, int length); ÊâπÈáèÊ∑ªÂä†ÂÖÉÁ¥†Áî±‰∫éÊâπÈáèÊ∑ªÂä†ÂíåÊ∑ªÂä†‰∏Ä‰∏™ÂÖÉÁ¥†ÈÄªËæëÂ§ßÊ¶ÇÁõ∏ÂêåÂàôËøôÈáå‰∏çËØ¶ÁªÜËØ¥‰∫ÜÔºå‰ª£Á†ÅÊ≥®ÈáäÂèØ‰ª•‰∫ÜËß£Êï¥‰∏™Ê∑ªÂä†ÊµÅÁ®ã„ÄÇ Âú®Êï∞ÁªÑÊú´Â∞æÊ∑ªÂä† 12345678910111213public boolean addAll(Collection&lt;? extends E&gt; c) &#123; // Ë∞ÉÁî® c.toArray Â∞ÜÈõÜÂêàËΩ¨ÂåñÊï∞ÁªÑ Object[] a = c.toArray(); // Ë¶ÅÊ∑ªÂä†ÁöÑÂÖÉÁ¥†ÁöÑ‰∏™Êï∞ int numNew = a.length; //Êâ©ÂÆπÊ£ÄÊü•‰ª•ÂèäÊâ©ÂÆπ ensureCapacityInternal(size + numNew); // Increments modCount //Â∞ÜÂèÇÊï∞ÈõÜÂêà‰∏≠ÁöÑÂÖÉÁ¥†Ê∑ªÂä†Âà∞ÂéüÊù•Êï∞ÁªÑ [sizeÔºåsize + numNew -1] ÁöÑËßíÊ†á‰ΩçÁΩÆ‰∏ä„ÄÇ System.arraycopy(a, 0, elementData, size, numNew); size += numNew; //‰∏éÂçï‰∏ÄÊ∑ªÂä†ÁöÑ add ÊñπÊ≥ï‰∏çÂêåÁöÑÊòØÊâπÈáèÊ∑ªÂä†ÊúâËøîÂõûÂÄºÔºåÂ¶ÇÊûú numNew == 0 Ë°®Á§∫Ê≤°ÊúâË¶ÅÊ∑ªÂä†ÁöÑÂÖÉÁ¥†ÂàôÈúÄË¶ÅËøîÂõû false return numNew != 0;&#125; Âú®Êï∞ÁªÑÊåáÂÆöËßíÊ†á‰ΩçÁΩÆÊ∑ªÂä†1234567891011121314151617181920public boolean addAll(int index, Collection&lt;? extends E&gt; c) &#123; //ÂêåÊ†∑Ê£ÄÊü•Ë¶ÅÊèíÂÖ•ÁöÑ‰ΩçÁΩÆÊòØÂê¶‰ºöÂØºËá¥ËßíÊ†áË∂äÁïå rangeCheckForAdd(index); Object[] a = c.toArray(); int numNew = a.length; ensureCapacityInternal(size + numNew); //ËøôÈáåÂÅö‰∫ÜÂà§Êñ≠ÔºåÂ¶ÇÊûúË¶ÅnumMoved &gt; 0 ‰ª£Ë°®ÊèíÂÖ•ÁöÑ‰ΩçÁΩÆÂú®ÈõÜÂêà‰∏≠Èó¥‰ΩçÁΩÆÔºåÂíåÂú® numMoved == 0ÊúÄÂêé‰ΩçÁΩÆ ÂàôË°®Á§∫Ë¶ÅÂú®Êï∞ÁªÑÊú´Â∞æÊ∑ªÂä† Â¶ÇÊûú &lt; 0 rangeCheckForAdd Â∞±Ë∑ëÂá∫‰∫ÜËßíÊ†áË∂äÁïå int numMoved = size - index; if (numMoved &gt; 0) System.arraycopy(elementData, index, elementData, index + numNew, numMoved); System.arraycopy(a, 0, elementData, index, numNew); size += numNew; return numNew != 0;&#125;private void rangeCheckForAdd(int index) &#123; if (index &gt; size || index &lt; 0) throw new IndexOutOfBoundsException(outOfBoundsMsg(index));&#125; ‰∏§‰∏™ÊñπÊ≥ï‰∏çÂêåÁöÑÂú∞ÊñπÂú®‰∫éÂ¶ÇÊûúÁßªÂä®ËßíÊ†áÂç≥‰πãÂêéÁöÑÂÖÉÁ¥†ÔºåaddAll(int index, Collection&lt;? extends E&gt; c)ÈáåÂÅö‰∫ÜÂà§Êñ≠ÔºåÂ¶ÇÊûúË¶Å numMoved &gt; 0 ‰ª£Ë°®ÊèíÂÖ•ÁöÑ‰ΩçÁΩÆÂú®ÈõÜÂêà‰∏≠Èó¥‰ΩçÁΩÆÔºåÂíåÂú® numMoved == 0 ÊúÄÂêé‰ΩçÁΩÆ ÂàôË°®Á§∫Ë¶ÅÂú®Êï∞ÁªÑÊú´Â∞æÊ∑ªÂä† Â¶ÇÊûú numMoved &lt; 0 ÔºårangeCheckForAdd Â∞±ÊäõÂá∫‰∫ÜËßíÊ†áË∂äÁïåÂºÇÂ∏∏‰∫Ü„ÄÇ ‰∏éÂçï‰∏ÄÊ∑ªÂä†ÁöÑ add ÊñπÊ≥ï‰∏çÂêåÁöÑÊòØÊâπÈáèÊ∑ªÂä†ÊúâËøîÂõûÂÄºÔºåÂ¶ÇÊûú numNew == 0 Ë°®Á§∫Ê≤°ÊúâË¶ÅÊ∑ªÂä†ÁöÑÂÖÉÁ¥†ÂàôÈúÄË¶ÅËøîÂõû false„ÄÇ ArrayList Âà†Èô§ÂÖÉÁ¥†Ê†πÊçÆËßíÊ†áÁßªÈô§ÂÖÉÁ¥†1234567891011121314151617181920212223242526/*** Â∞Ü‰ªª‰ΩïÂêéÁª≠ÂÖÉÁ¥†ÁßªÂà∞Â∑¶Ëæπ(‰ªéÂÆÉ‰ª¨ÁöÑÁ¥¢Âºï‰∏≠ÂáèÂéª‰∏Ä‰∏™)„ÄÇ*/public E remove(int index) &#123; //Ê£ÄÊü• index ÊòØÂê¶ &gt;= size rangeCheck(index); modCount++; //index ‰ΩçÁΩÆÁöÑÂÖÉÁ¥† E oldValue = elementData(index); // ÈúÄË¶ÅÁßªÂä®ÁöÑÂÖÉÁ¥†‰∏™Êï∞ int numMoved = size - index - 1; if (numMoved &gt; 0) //ÈááÁî®Êã∑Ë¥ùËµãÂÄºÁöÑÊñπÊ≥ïÂ∞Ü index ‰πãÂêéÊâÄÊúâÁöÑÂÖÉÁ¥† ÂêëÂâçÁßªÂä®‰∏Ä‰∏™‰ΩçÁΩÆ System.arraycopy(elementData, index+1, elementData, index, numMoved); // Â∞Ü element Êú´Â∞æÁöÑÂÖÉÁ¥†‰ΩçÁΩÆËÆæ‰∏∫ null elementData[--size] = null; // clear to let GC do its work // ËøîÂõû index ‰ΩçÁΩÆÁöÑÂÖÉÁ¥† return oldValue;&#125;// ÊØîËæÉË¶ÅÁßªÈô§ÁöÑËßíÊ†á‰ΩçÁΩÆÂíåÂΩìÂâç elementData ‰∏≠ÂÖÉÁ¥†ÁöÑ‰∏™Êï∞private void rangeCheck(int index) &#123; if (index &gt;= size) throw new IndexOutOfBoundsException(outOfBoundsMsg(index));&#125; Ê†πÊçÆËßíÊ†áÁßªÈô§ÂÖÉÁ¥†ÁöÑÊñπÊ≥ïÊ∫êÁ†ÅÂ¶Ç‰∏äÊâÄÁ§∫ÔºåÂÄºÂæóÊ≥®ÊÑèÁöÑÂú∞ÊñπÊòØÔºö rangeCheck Âíå rangeCheckForAdd ÊñπÊ≥ï‰∏çÂêå ÔºårangeCheck Âè™Ê£ÄÊü•‰∫Ü indexÊòØÂê¶Â§ß‰∫éÁ≠â‰∫é sizeÔºåÂõ†‰∏∫Êàë‰ª¨Áü•ÈÅì size ‰∏∫ elementData Â∑≤Â≠òÂÇ®Êï∞ÊçÆÁöÑ‰∏™Êï∞ÔºåÊàë‰ª¨Âè™ËÉΩÁßªÈô§ elementData Êï∞ÁªÑ‰∏≠ [0 , size -1] ÁöÑÂÖÉÁ¥†ÔºåÂê¶ÂàôÂ∫îËØ•ÊäõÂá∫ËßíÊ†áË∂äÁïå„ÄÇ ‰ΩÜÊòØ‰∏∫‰ªÄ‰πàÊ≤°ÊúâÂíå rangeCheckForAdd ‰∏ÄÊ†∑Ê£ÄÊü•Â∞è‰∫é0ÁöÑËßíÊ†áÂë¢ÔºåÊòØ‰∏çÊòØremove(-1) ‰∏ç‰ºöÊäõÂºÇÂ∏∏Âë¢Ôºü ÂÖ∂ÂÆû‰∏çÊòØÁöÑÔºåÂõ†‰∏∫ rangeCheck(index); ÂêéÊàë‰ª¨ÂéªË∞ÉÁî® elementData(index) ÁöÑÊó∂ÂÄô‰πü‰ºöÊäõÂá∫ IndexOutOfBoundsException ÁöÑÂºÇÂ∏∏ÔºåËøôÊòØÊï∞ÁªÑÊú¨Ë∫´ÊäõÂá∫ÁöÑÔºå‰∏çÊòØ ArrayList ÊäõÂá∫ÁöÑ„ÄÇÈÇ£‰∏∫‰ªÄ‰πàË¶ÅÊ£ÄÊü•&gt;= size Âë¢Ôºü Êï∞ÁªÑÊú¨Ë∫´‰∏ç‰πü‰ºöÊ£ÄÊü•‰πàÔºü ÂìàÂìà.. ÁªÜÂøÉÁöÑÂêåÂ≠¶ËÇØÂÆöÁü•ÈÅì elementData.length Âπ∂‰∏ç‰∏ÄÂÆöÁ≠â‰∫é sizeÔºåÊØîÂ¶ÇÔºö 123456ArrayList&lt;String&gt; testRemove = new ArrayList&lt;&gt;(10); testRemove.add("1"); testRemove.add("2"); // java.lang.IndexOutOfBoundsException: Index: 2, Size: 2 String remove = testRemove.remove(2); System.out.println("remove = " + remove + ""); new ArrayList&lt;&gt;(10) Ë°®Á§∫ elementData ÂàùÂßãÂÆπÈáè‰∏∫10ÔºåÊâÄ‰ª• elementData.length = 10 ËÄåÊàë‰ª¨Âè™ÁªôÈõÜÂêàÊ∑ªÂä†‰∫Ü‰∏§‰∏™ÂÖÉÁ¥†ÊâÄ‰ª• size = 2 Ëøô‰πüÂ∞±ÊòØ‰∏∫Âï•Ë¶Å rangeCheck ÁöÑÂéüÂõ†‰∫Ü„ÄÇ ÁßªÈô§ÊåáÂÆöÂÖÉÁ¥†1234567891011121314151617181920212223242526272829303132333435/*** Âà†Èô§ÊåáÂÆöÂÖÉÁ¥†ÔºåÂ¶ÇÊûúÂÆÉÂ≠òÂú®ÂàôÂèç‰ºö trueÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®ËøîÂõû false„ÄÇ* Êõ¥ÂáÜÁ°ÆÂú∞ËØ¥ÊòØÂà†Èô§ÈõÜÂêà‰∏≠Á¨¨‰∏ÄÂá∫Áé∞ o ÂÖÉÁ¥†‰ΩçÁΩÆÁöÑÂÖÉÁ¥† Ôºå* ‰πüÂ∞±ÊòØËØ¥Âè™‰ºöÂà†Èô§‰∏Ä‰∏™ÔºåÂπ∂‰∏îÂ¶ÇÊûúÊúâÈáçÂ§çÁöÑËØùÔºåÂè™‰ºöÂà†Èô§Á¨¨‰∏Ä‰∏™Ê¨°Âá∫Áé∞ÁöÑ‰ΩçÁΩÆ„ÄÇ*/public boolean remove(Object o) &#123; // Â¶ÇÊûúÂÖÉÁ¥†‰∏∫Á©∫ÂàôÂè™ÈúÄÂà§Êñ≠ == ‰πüÂ∞±ÊòØÂÜÖÂ≠òÂú∞ÂùÄ if (o == null) &#123; for (int index = 0; index &lt; size; index++) if (elementData[index] == null) &#123; //ÂæóÂà∞Á¨¨‰∏Ä‰∏™Á≠â‰∫é null ÁöÑÂÖÉÁ¥†ËßíÊ†áÂπ∂ÁßªÈô§ËØ•ÂÖÉÁ¥† ËøîÂõû ture fastRemove(index); return true; &#125; &#125; else &#123; // Â¶ÇÊûúÂÖÉÁ¥†‰∏ç‰∏∫Á©∫ÂàôÈúÄË¶ÅÁî® equals Âà§Êñ≠„ÄÇ for (int index = 0; index &lt; size; index++) if (o.equals(elementData[index])) &#123; //ÂæóÂà∞Á¨¨‰∏Ä‰∏™Á≠â‰∫é o ÁöÑÂÖÉÁ¥†ËßíÊ†áÂπ∂ÁßªÈô§ËØ•ÂÖÉÁ¥† ËøîÂõû ture fastRemove(index); return true; &#125; &#125; return false;&#125;//ÁßªÈô§ÂÖÉÁ¥†ÁöÑÈÄªËæëÂíå remve(Index)‰∏ÄÊ†∑ private void fastRemove(int index) &#123; modCount++; int numMoved = size - index - 1; if (numMoved &gt; 0) System.arraycopy(elementData, index+1, elementData, index, numMoved); elementData[--size] = null; // clear to let GC do its work&#125; Áî±‰∏äËæπ‰ª£Á†ÅÂèØ‰ª•ÁúãÂá∫Êù•ÔºåÁßªÈô§ÂÖÉÁ¥†ÂíåÁßªÈô§ÊåáÂÆöËßíÊ†áÂÖÉÁ¥†‰∏ÄÊ†∑ÊúÄÁªàÈÉΩÊòØÈÄöËøá System.arraycopy Â∞Ü index ‰πãÂêéÁöÑÂÖÉÁ¥†ÂâçÁßª‰∏Ä‰ΩçÔºåÂπ∂ÈáäÊîæÂéüÊù•‰Ωç‰∫é size ‰ΩçÁΩÆÁöÑÂÖÉÁ¥†„ÄÇ ËøòÂèØ‰ª•ÁúãÂá∫ÔºåÂ¶ÇÊûúÊï∞ÁªÑ‰∏≠ÊúâÊåáÂÆöÂ§ö‰∏™‰∏é o Áõ∏ÂêåÁöÑÂÖÉÁ¥†Âè™‰ºöÁßªÈô§ËßíÊ†áÊúÄÂ∞èÁöÑÈÇ£‰∏™ÔºåÂπ∂‰∏î null Âíå Èùûnull ÁöÑÊó∂ÂÄôÂà§Êñ≠ÊñπÊ≥ï‰∏ç‰∏ÄÊ†∑„ÄÇËá≥‰∫é equals Âíå == ÁöÑÂå∫Âà´ÔºåËøòÊúâ hashCode ÊñπÊ≥ïÔºåÊàë‰ºö‰πãÂêéÂú®ÊÄªÁªì‰∏ÄÁØáÂçïÁã¨ÁöÑÊñáÁ´†„ÄÇÁ≠â‰∏çÊÄ•ÁöÑÂèØ‰ª•ÂÖàÂéªÁΩë‰∏äÊâæÊâæÂñΩ„ÄÇ Ê≥®ÊÑèÔºå‰ª•‰∏ãÂá†ÁÇπÔºö Integer ÈáçÂÜôÁöÑ equals ÊñπÊ≥ïÊúâËá™Âä®ÊãÜÁÆ±Ôºõ equalsÂ¶ÇÊûú‰∏çÈáçÂÜôÔºåÈÇ£Ë∑ü == ÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂ¶ÇÊûúË¶ÅÈáçÂÜôÔºåÂøÖÈ°ª equal Âíå hashcode ÈÉΩÈáçÂÜôÔºõ ÊúÄÂ•ΩÁöÑ‰æãÂ≠êÂ∞±ÊòØ HashSetÔºåÂ¶ÇÊûúkey‰∏çÈáçÂÜô hashcode()ÔºåÈÇ£ÂèØËÉΩequalsÁõ∏Á≠â‰ΩÜÊòØ‰ºöÂØºËá¥Â≠òÂÖ•‰∏§‰∏™‰∏ÄÊ†∑ÁöÑ„ÄÇ ÊâπÈáèÁßªÈô§/‰øùÁïô removeAll/retainAllArrayList Êèê‰æõ‰∫Ü removeAll/retainAll Êìç‰ΩúÔºåËøô‰∏§‰∏™Êìç‰ΩúÂàÜÂà´ÊòØ ÊâπÈáèÂà†Èô§‰∏éÂèÇÊï∞ÈõÜÂêà‰∏≠ÂÖ±Âêå‰∫´ÊúâÁöÑÂÖÉÁ¥† Âíå ÊâπÈáèÂà†Èô§‰∏éÂèÇÊï∞ÈõÜÂêà‰∏≠‰∏çÂÖ±Âêå‰∫´ÊúâÁöÑÂÖÉÁ¥†Ôºå‰øùÁïôÂÖ±Âêå‰∫´ÊúâÁöÑÂÖÉÁ¥†Ôºå‰∏§‰∏™ÊñπÊ≥ïÂè™Êúâ‰∏Ä‰∏™ÂèÇÊï∞‰∏çÂêå!!! 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/** ÊâπÈáèÂà†Èô§‰∏éÂèÇÊï∞ÈõÜÂêà‰∏≠ÂÖ±Âêå‰∫´ÊúâÁöÑÂÖÉÁ¥†*/public boolean removeAll(Collection&lt;?&gt; c) &#123; //Âà§Á©∫ Â¶ÇÊûú‰∏∫Á©∫ÂàôÊäõÂá∫ NullPointerException ÂºÇÂ∏∏ Objects ÁöÑÊñπÊ≥ï Objects.requireNonNull(c); return batchRemove(c, false);&#125; /** Âè™‰øùÁïô‰∏é c ‰∏≠ÂÖÉÁ¥†Áõ∏ÂêåÁöÑÂÖÉÁ¥†Áõ∏ÂêåÁöÑÂÖÉÁ¥†*/public boolean retainAll(Collection&lt;?&gt; c) &#123; Objects.requireNonNull(c); return batchRemove(c, true);&#125; /** ÊâπÈáèÂà†Èô§ÁöÑÊåáÂÆöÊñπÊ≥ï */private boolean batchRemove(Collection&lt;?&gt; c, boolean complement) &#123; final Object[] elementData = this.elementData; // r w ‰∏§‰∏™ËßíÊ†á r ‰∏∫ elementData ‰∏≠ÂÖÉÁ¥†ÁöÑÁ¥¢Âºï // w ‰∏∫Âà†Èô§ÂÖÉÁ¥†ÂêéÈõÜÂêàÁöÑÈïøÂ∫¶ int r = 0, w = 0; boolean modified = false; try &#123; for (; r &lt; size; r++) // Â¶ÇÊûú c ÂΩìÂâçÈõÜÂêà‰∏≠‰∏çÂåÖÂê´ÂΩìÂâçÂÖÉÁ¥†ÔºåÈÇ£‰πàÂàô‰øùÁïô if (c.contains(elementData[r]) == complement) elementData[w++] = elementData[r]; &#125; finally &#123; // Â¶ÇÊûúc.containsÔºàoÔºâÂèØËÉΩ‰ºöÊäõÂá∫ÂºÇÂ∏∏ÔºåÂ¶ÇÊûúÊäõÂá∫ÂºÇÂ∏∏Âêé r!=size ÂàôÂ∞Ü r ‰πãÂêéÁöÑÂÖÉÁ¥†‰∏çÂú®ÊØîËæÉÁõ¥Êé•ÊîæÂÖ•Êï∞ÁªÑ if (r != size) &#123; System.arraycopy(elementData, r, elementData, w, size - r); // w Âä†‰∏äÂâ©‰ΩôÂÖÉÁ¥†ÁöÑÈïøÂ∫¶ w += size - r; &#125; // Â¶ÇÊûúÈõÜÂêàÁßªÈô§ËøáÂÖÉÁ¥†ÔºåÂàôÈúÄË¶ÅÂ∞Ü w ‰πãÂêéÁöÑÂÖÉÁ¥†ËÆæÁΩÆ‰∏∫ null ÈáäÊîæÂÜÖÂ≠ò if (w != size) &#123; // clear to let GC do its work for (int i = w; i &lt; size; i++) elementData[i] = null; modCount += size - w; size = w; modified = true; &#125; &#125; //ËøîÂõûÊòØÂê¶ÊàêÂäüÁßªÈô§ËøáÂÖÉÁ¥†ÔºåÂì™ÊÄï‰∏Ä‰∏™ return modified;&#125; ÂèØ‰ª•ÁúãÂà∞ÁßªÈô§ÊåáÂÆöÈõÜÂêà‰∏≠ÂåÖÂê´ÁöÑÂÖÉÁ¥†ÁöÑÊñπÊ≥ï‰ª£Á†ÅÈáèÊòØÁõÆÂâçÂàÜÊûê‰ª£Á†Å‰∏≠ÊúÄÈïøÁöÑ‰∫ÜÔºå‰ΩÜÊòØÈÄªËæë‰πüÂæàÊ∏ÖÊô∞Ôºö ‰ªé 0 ÂºÄÂßãÈÅçÂéÜ elementData Â¶ÇÊûú r ‰ΩçÁΩÆÁöÑÂÖÉÁ¥†‰∏çÂ≠òÂú®‰∫éÊåáÂÆöÈõÜÂêà c ‰∏≠ÔºåÈÇ£‰πàÊàë‰ª¨Â∞±Â∞Ü‰ªñÂ§çÂà∂ÁªôÊï∞ÁªÑ w ‰ΩçÁΩÆÔºå Êï¥‰∏™ÈÅçÂéÜËøáÁ®ã‰∏≠ w &lt;= r„ÄÇ Áî±‰∫é c.contains(o)ÂèØËÉΩ‰ºöÊäõÂá∫ÂºÇÂ∏∏ClassCastException/NullPointerExceptionÔºåÂ¶ÇÊûúÂõ†‰∏∫ÂºÇÂ∏∏ËÄåÁªàÊ≠¢ÔºàËøô‰∏§‰∏™ÂºÇÂ∏∏ÊòØÂèØÈÄâÊìç‰ΩúÔºåÈõÜÂêàÊ∫êÁ†Å‰∏≠Âπ∂Ê≤°ÊúâÊòæÁ§∫ÁîüÂëΩËØ•ÊñπÊ≥ï‰∏ÄÂÆö‰ºöÊäõÂºÇÂ∏∏ÔºâÔºåÈÇ£‰πàÊàë‰ª¨Â∞Ü‰ºö‰∫ßÁîü‰∏ÄÊ¨°ÈîôËØØÊìç‰ΩúÔºåÊâÄ‰ª• finally ‰∏≠ÊâßË°å‰∫ÜÂà§Êñ≠Êìç‰ΩúÔºåÂ¶ÇÊûú r!= size ÈÇ£‰πàËÇØÂÆöÊòØÂèëÁîü‰∫ÜÂºÇÂ∏∏ÔºåÈÇ£‰πàÂàôÂ∞Ü r ‰πãÂêéÁöÑÂÖÉÁ¥†‰∏çÂú®ÊØîËæÉÁõ¥Êé•ÊîæÂÖ•Êï∞ÁªÑ„ÄÇÊúÄÁªàÂæóÂà∞ÁöÑÁªìÊûúÂπ∂‰∏ç‰∏ÄÂÆöÊ≠£Á°ÆÊòØÂà†Èô§‰∫ÜÊâÄÊúâ‰∏é c ‰∏≠ÁöÑÂÖÉÁ¥†„ÄÇ ÊâπÈáèÂà†Èô§Âíå‰øùÂ≠ò‰∏≠ÔºåÊ∂âÂèäÈ´òÊïàÁöÑ‰øùÂ≠ò/Âà†Èô§‰∏§‰∏™ÈõÜÂêàÂÖ¨ÊúâÂÖÉÁ¥†ÁöÑÁÆóÊ≥ïÔºåÊòØÂÄºÂæóÊàë‰ª¨Â≠¶‰π†ÁöÑÂú∞Êñπ,ÂÜôÁöÑÁúüÂ•ΩÂìàÂìàÂìàÂìàÂìàÔºÅÔºÅÔºÅ ArrayList ÁöÑÊîπÊü•ÂØπ‰∫é‰∏Ä‰∏™ArrayList ÁöÑÊîπÊü•ÊñπÊ≥ïÂ∞±ÂæàÁÆÄÂçï‰∫ÜÔºåset Âíå get ÊñπÊ≥ï„ÄÇ‰∏ãÈù¢Êàë‰ª¨Áúã‰∏ãÊ∫êÁ†ÅÂêßÔºö ‰øÆÊîπÊåáÂÆöËßíÊ†á‰ΩçÁΩÆÁöÑÂÖÉÁ¥†1234567891011121314public E set(int index, E element) &#123; //ËßíÊ†áË∂äÁïåÊ£ÄÊü• rangeCheck(index); //‰∏ãÊ†áÂèñÊï∞ÊçÆÊ≥®ÊÑèËøôÈáå‰∏çÊòØelementData[index] ËÄåÊòØ elementData(index) ÊñπÊ≥ï E oldValue = elementData(index); //Â∞Ü index ‰ΩçÁΩÆËÆæÁΩÆ‰∏∫Êñ∞ÁöÑÂÖÉÁ¥† elementData[index] = element; // ËøîÂõû‰πãÂâçÂú® index ‰ΩçÁΩÆÁöÑÂÖÉÁ¥† return oldValue;&#125;E elementData(int index) &#123; return (E) elementData[index];&#125; Êü•ËØ¢ÊåáÂÆöËßíÊ†áÁöÑÂÖÉÁ¥†123456public E get(int index) &#123; //Ë∂äÁïåÊ£ÄÊü• rangeCheck(index); //‰∏ãÊ†áÂèñÊï∞ÊçÆÊ≥®ÊÑèËøôÈáå‰∏çÊòØelementData[index] ËÄåÊòØ elementData(index) ÊñπÊ≥ï return elementData(index); &#125; Êü•ËØ¢ÊåáÂÆöÂÖÉÁ¥†ÁöÑËßíÊ†áÊàñËÄÖÈõÜÂêàÊòØÂê¶ÂåÖÂê´Êüê‰∏™ÂÖÉÁ¥†12345678910111213141516171819202122232425262728293031323334353637//ÈõÜÂêà‰∏≠ÊòØÂê¶ÂåÖÂê´ÂÖÉÁ¥† indexOf ËøîÂõû -1 Ë°®Á§∫‰∏çÂåÖÂê´ return false Âê¶ÂàôËøîÂõû truepublic boolean contains(Object o) &#123; return indexOf(o) &gt;= 0;&#125;/*** ËøîÂõûÈõÜÂêà‰∏≠Á¨¨‰∏Ä‰∏™‰∏é o ÂÖÉÁ¥†Áõ∏Á≠âÁöÑÂÖÉÁ¥†ËßíÊ†áÔºåËøîÂõû -1 Ë°®Á§∫ÈõÜÂêà‰∏≠‰∏çÂ≠òÂú®Ëøô‰∏™ÂÖÉÁ¥†* ËøôÈáåËøòÂÅö‰∫ÜÁ©∫ÂÖÉÁ¥†Áõ¥Êé•Âà§Êñ≠ == ÁöÑÊìç‰Ωú*/public int indexOf(Object o) &#123; if (o == null) &#123; for (int i = 0; i &lt; size; i++) if (elementData[i]==null) return i; &#125; else &#123; for (int i = 0; i &lt; size; i++) if (o.equals(elementData[i])) return i; &#125; return -1;&#125;/** * ‰ªé elementData Êú´Â∞æÂºÄÂßãÈÅçÂéÜÈÅçÂéÜÊï∞ÁªÑÔºåÊâÄ‰ª•ËøîÂõûÁöÑÊòØÈõÜÂêà‰∏≠ÊúÄÂêé‰∏Ä‰∏™‰∏é o Áõ∏Á≠âÁöÑÂÖÉÁ¥†ÁöÑËßíÊ†á*/public int lastIndexOf(Object o) &#123; if (o == null) &#123; for (int i = size-1; i &gt;= 0; i--) if (elementData[i]==null) return i; &#125; else &#123; for (int i = size-1; i &gt;= 0; i--) if (o.equals(elementData[i])) return i; &#125; return -1;&#125; ArrayList ÈõÜÂêàÁöÑ toArry ÊñπÊ≥ïÂÖ∂ÂÆû Object[] toArray(); ÊñπÊ≥ïÔºå‰ª•ÂèäÂÖ∂ÈáçËΩΩÂáΩÊï∞ \ T[] toArray(T[] a); ÊòØÊé•Âè£ Collection ÁöÑÊñπÊ≥ïÔºåArrayList ÂÆûÁé∞‰∫ÜËøô‰∏§‰∏™ÊñπÊ≥ïÔºåÂæàÂ∞ëËßÅArrayList Ê∫êÁ†ÅÂàÜÊûêÁöÑÊñáÁ´†ÂàÜÊûêËøô‰∏§‰∏™ÊñπÊ≥ïÔºåÈ°æÂêçÊÄù‰πâËøô‰∏§‰∏™ÊñπÊ≥ïÁöÑÊòØÁî®Êù•ÔºåÂ∞Ü‰∏Ä‰∏™ÈõÜÂêàËΩ¨‰∏∫Êï∞ÁªÑÁöÑÊñπÊ≥ïÔºåÈÇ£‰πà‰∏§ËÄÖÁöÑ‰∏çÂêå‰πãÂ§ÑÊòØÔºåÂêéËÄÖÂèØ‰ª•ÊåáÂÆöÊï∞ÁªÑÁöÑÁ±ªÂûãÔºåÂâçËÄÖËøîÂõû‰∏∫‰∏Ä‰∏™ Object[] Ë∂ÖÁ±ªÊï∞ÁªÑ„ÄÇÈÇ£‰πàÊàë‰ª¨ÂÖ∑‰Ωì‰∏ãÊ∫êÁ†ÅÂÆûÁé∞Ôºö 1234567891011121314public Object[] toArray() &#123; return Arrays.copyOf(elementData, size);&#125;@SuppressWarnings("unchecked")public &lt;T&gt; T[] toArray(T[] a) &#123; if (a.length &lt; size) // Make a new array of a's runtime type, but my contents: return (T[]) Arrays.copyOf(elementData, size, a.getClass()); System.arraycopy(elementData, 0, a, 0, size); if (a.length &gt; size) a[size] = null; return a;&#125; ÂèØ‰ª•ÁúãÂà∞ Object[] toArray() Âè™ÊòØË∞ÉÁî®‰∫Ü‰∏ÄÊ¨° Arrays.copyOf() Â∞ÜÈõÜÂêà‰∏≠ÂÖÉÁ¥†Êã∑Ë¥ùÂà∞‰∏Ä‰∏™Êñ∞ÁöÑ Object[] Êï∞ÁªÑÂπ∂ËøîÂõû„ÄÇËøô‰∏™ Arrays.copyOf() ÊñπÊ≥ïÂâçËæπÂ∑≤ÁªèËÆ≤‰∫Ü„ÄÇÊâÄ‰ª• toArray() ÊñπÊ≥ïÂπ∂Ê≤°Êúâ‰ªÄ‰πàÁñëÈóÆÔºåÊúâÁñëÈóÆÁöÑÂú∞ÊñπÂú®‰∫étoArray(T[] a) „ÄÇ Êàë‰ª¨ÂèØ‰ª•‰º†ÂÖ•‰∏Ä‰∏™ÊåáÂÆöÁ±ªÂûãÁöÑÊ†áÂøóÊï∞ÁªÑ‰Ωú‰∏∫ÂèÇÊï∞ÔºåtoArray(T[] a) ÊñπÊ≥ïÊúÄÁªà‰ºöËøîÂõûËøô‰∏™Á±ªÂûãÁöÑÂåÖÂê´ÈõÜÂêàÂÖÉÁ¥†ÁöÑÊñ∞Êï∞ÁªÑ„ÄÇ‰ΩÜÊòØÊ∫êÁ†ÅÂà§Êñ≠‰∫Ü Ôºö Â¶ÇÊûú a.length &lt; size Âç≥ÂΩìÂâçÈõÜÂêàÂÖÉÁ¥†ÁöÑ‰∏™Êï∞‰∏éÂèÇÊï∞ a Êï∞ÁªÑÂÖÉÁ¥†ÁöÑÂ§ßÂ∞èÁöÑÊó∂ÂÄôÂ∞ÜÂíå toArray() ‰∏ÄÊ†∑ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÁªÑ„ÄÇ Â¶ÇÊûú a.length == size Â∞Ü‰∏ç‰ºö‰∫ßÁîüÊñ∞ÁöÑÊï∞ÁªÑÁõ¥Êé•Â∞ÜÈõÜÂêà‰∏≠ÁöÑÂÖÉÁ¥†Ë∞ÉÁî® System.arraycopy() ÊñπÊ≥ïÂ∞ÜÂÖÉÁ¥†Â§çÂà∂Âà∞ÂèÇÊï∞Êï∞ÁªÑ‰∏≠ÔºåËøîÂõû a„ÄÇ a.length &gt; size ‰πü‰∏ç‰ºö‰∫ßÁîüÊñ∞ÁöÑÊï∞ÁªÑ,‰ΩÜÊòØÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØ a[size] = null; Ëøô‰∏ÄÂè•ÊîπÂèò‰∫ÜÂéüÊï∞ÁªÑ‰∏≠ index = size ‰ΩçÁΩÆÁöÑÂÖÉÁ¥†ÔºåË¢´ÈáçÊñ∞ËÆæÁΩÆ‰∏∫ null ‰∫Ü„ÄÇ ‰∏ãÈù¢Êàë‰ª¨Êù•Áúã‰∏ãÁ¨¨‰∏âÁßçÊÉÖÂÜµÁöÑ‰æãÂ≠êÔºö 12345678910111213141516171819202122232425SubClass[] sourceMore = new SubClass[4]; for (int i = 0; i &lt; sourceMore.length; i++) &#123; sourceMore[i] = new SubClass(i);&#125; //ÂΩì List.toArray(T[] a) ‰∏≠ a.length == list.size ÁöÑÊó∂ÂÄô‰ΩøÁî® Array.copyOf ‰ºöÂ∞Ü list ‰∏≠ÁöÑÂÜÖÂÆπËµãÂÄºÁªô sourceMore Âπ∂Â∞ÜÂÖ∂ËøîÂõû//sourceMore[0,size-1] = list&#123;0, size-1&#125; ËÄå sourceMore[size] = nullSubClass[] sourceMore = new SubClass[4];for (int i = 0; i &lt; sourceMore.length; i++) &#123; sourceMore[i] = new SubClass(i);&#125;//list to Array ‰πãÂâç sourceMore [SubClass&#123;test=0&#125;, SubClass&#123;test=1&#125;, SubClass&#123;test=2&#125;, SubClass&#123;test=3&#125;] sourceEqual.length:: 4System.out.println("list to Array ‰πãÂâç sourceMore " + Arrays.toString(sourceMore) + " sourceEqual.length:: " + sourceMore.length);SubClass[] desSourceMore = tLists.toArray(sourceMore);//list to Array ‰πãÂêé desSourceMore [SubClass&#123;test=1&#125;, SubClass&#123;test=2&#125;, null, SubClass&#123;test=3&#125;]desSourceMore.length:: 4System.out.println("list to Array ‰πãÂêé desSourceMore " + Arrays.toString(desSourceMore) + "desSourceMore.length:: " + desSourceMore.length);//list to Array ‰πãÂêé source [SubClass&#123;test=1&#125;, SubClass&#123;test=2&#125;, null, SubClass&#123;test=3&#125;]sourceEqual.length:: 4System.out.println("list to Array ‰πãÂêé source " + Arrays.toString(sourceMore) + "sourceEqual.length:: " + sourceMore.length);//source == desSource trueSystem.out.println("source == desSource " + (sourceMore == desSourceMore)); ArrayList ÁöÑÈÅçÂéÜArrayList ÁöÑÈÅçÂéÜÊñπÂºè jdk 1.8 ‰πãÂâçÊúâ‰∏âÁßç Ôºöfor Âæ™ÁéØÈÅçÂéÜÔºå foreach ÈÅçÂéÜÔºåËø≠‰ª£Âô®ÈÅçÂéÜ,jdk 1.8 ‰πãÂêéÂèàÂºïÂÖ•‰∫ÜforEach Êìç‰ΩúÔºåÊàë‰ª¨ÂÖàÊù•ÁúãÁúãËø≠‰ª£Âô®ÁöÑÊ∫êÁ†ÅÂÆûÁé∞Ôºö Ëø≠‰ª£Âô®Ëø≠‰ª£Âô® Iterator Ê®°ÂºèÊòØÁî®‰∫éÈÅçÂéÜÂêÑÁßçÈõÜÂêàÁ±ªÁöÑÊ†áÂáÜËÆøÈóÆÊñπÊ≥ï„ÄÇÂÆÉÂèØ‰ª•ÊääËÆøÈóÆÈÄªËæë‰ªé‰∏çÂêåÁ±ªÂûãÁöÑÈõÜÂêàÁ±ª‰∏≠ÊäΩË±°Âá∫Êù•Ôºå‰ªéËÄåÈÅøÂÖçÂêëÂÆ¢Êà∑Á´ØÊö¥Èú≤ÈõÜÂêàÁöÑÂÜÖÈÉ®ÁªìÊûÑ„ÄÇ ArrayList ‰Ωú‰∏∫ÈõÜÂêàÁ±ª‰πü‰∏ç‰æãÂ§ñÔºåËø≠‰ª£Âô®Êú¨Ë∫´Âè™Êèê‰æõ‰∏â‰∏™Êé•Âè£ÊñπÊ≥ïÔºö 12345public interface Iterator &#123; boolean hasNext();//ÊòØÂê¶ËøòÊúâ‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥† Object next();// ËøîÂõûÂΩìÂâçÂÖÉÁ¥† ÂèØ‰ª•ÁêÜËß£‰∏∫‰ªñÁõ∏ÂΩì‰∫é fori ‰∏≠ i Á¥¢Âºï void remove();// ÁßªÈô§‰∏Ä‰∏™ÂΩìÂâçÁöÑÂÖÉÁ¥† ‰πüÂ∞±ÊòØ next ÂÖÉÁ¥†„ÄÇ &#125; ArrayList ‰∏≠Ë∞ÉÁî® iterator() Â∞Ü‰ºöËøîÂõû‰∏Ä‰∏™ÂÜÖÈÉ®Á±ªÂØπË±° Itr ÂÖ∂ÂÆûÁé∞‰∫Ü Iterator Êé•Âè£„ÄÇ 123public Iterator&lt;E&gt; iterator() &#123; return new Itr();&#125; ‰∏ãÈù¢ËÆ©Êàë‰ª¨Áúã‰∏ãÂÖ∂ÂÆûÁé∞ÁöÑÊ∫êÁ†ÅÔºö Ê≠£Â¶ÇÊàë‰ª¨ÁöÑ for Âæ™ÁéØÈÅçÂéÜ‰∏ÄÊ†∑ÔºåÊï∞ÁªÑËßíÊ†áÊÄªÊòØ‰ªé 0 ÂºÄÂßãÁöÑÔºåÊâÄ‰ª• cursor ÂàùÂßãÂÄº‰∏∫ 0 Ôºå hasNext Ë°®Á§∫ÊòØÂê¶ÈÅçÂéÜÂà∞Êï∞ÁªÑÊú´Â∞æÔºåÂç≥ i &lt; size „ÄÇÂØπ‰∫é modCount ÂèòÈáè‰πãÊâÄ‰ª•‰∏ÄÁõ¥Ê≤°Êúâ‰ªãÁªçÊòØÂõ†‰∏∫‰ªñÈõÜÂêàÂπ∂ÂèëËÆøÈóÆÊúâÂÖ≥Á≥ªÔºåÁî®‰∫éÊ†áËÆ∞ÂΩìÂâçÈõÜÂêàË¢´‰øÆÊîπÔºàÂ¢ûÂà†ÔºâÁöÑÊ¨°Êï∞ÔºåÂ¶ÇÊûúÂπ∂ÂèëËÆøÈóÆ‰∫ÜÈõÜÂêàÈÇ£‰πàÂ∞Ü‰ºöÂØºËá¥Ëøô‰∏™ modCount ÁöÑÂèòÂåñÔºåÂú®ÈÅçÂéÜËøáÁ®ã‰∏≠‰∏çÊ≠£Á°ÆÁöÑÊìç‰ΩúÈõÜÂêàÂ∞Ü‰ºöÊäõÂá∫ ConcurrentModificationException ÔºåËøôÊòØ Java „Äåfail-fast ÁöÑÊú∫Âà∂„ÄçÔºåÂØπ‰∫éÂ¶Ç‰ΩïÊ≠£Á°ÆÁöÑÂú®ÈÅçÂéÜËøáÁ®ã‰∏≠Êìç‰ΩúÈõÜÂêàÁ®çÂêé‰ºöÊúâËØ¥Êòé„ÄÇ 12345678private class Itr implements Iterator&lt;E&gt; &#123; int cursor; // ÂØπÁÖß hasNext ÊñπÊ≥ï cursor Â∫îÁêÜËß£‰∏∫‰∏ã‰∏™Ë∞ÉÁî® next ËøîÂõûÁöÑÂÖÉÁ¥† ÂàùÂßã‰∏∫ 0 int lastRet = -1; // ‰∏ä‰∏Ä‰∏™ËøîÂõûÁöÑËßíÊ†á int expectedModCount = modCount;//ÂàùÂßãÂåñÁöÑÊó∂ÂÄôÂ∞ÜÂÖ∂ËµãÂÄº‰∏∫ÂΩìÂâçÈõÜÂêà‰∏≠ÁöÑÊìç‰ΩúÊï∞Ôºå // ÊòØÂê¶ËøòÊúâ‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥† cursor == size Ë°®Á§∫ÂΩìÂâçÈõÜÂêàÂ∑≤ÁªèÈÅçÂéÜÂÆå‰∫Ü ÊâÄ‰ª•Âè™ÊúâÂΩì cursor ‰∏çÁ≠â‰∫é size ÁöÑÊó∂ÂÄô Êâç‰ºöÊúâ‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥† public boolean hasNext() &#123; return cursor != size; &#125; next ÊñπÊ≥ïÊòØÊàë‰ª¨Ëé∑ÂèñÈõÜÂêà‰∏≠ÂÖÉÁ¥†ÁöÑÊñπÊ≥ïÔºånext ËøîÂõûÂΩìÂâçÈÅçÂéÜ‰ΩçÁΩÆÁöÑÂÖÉÁ¥†ÔºåÂ¶ÇÊûúÂú®Ë∞ÉÁî® next ‰πãÂâçÈõÜÂêàË¢´‰øÆÊîπÔºåÂπ∂‰∏îËø≠‰ª£Âô®‰∏≠ÁöÑÊúüÊúõÊìç‰ΩúÊï∞Âπ∂Ê≤°ÊúâÊîπÂèòÔºåÂ∞Ü‰ºöÂºïÂèëConcurrentModificationException„ÄÇnext ÊñπÊ≥ïÂ§öÊ¨°Ë∞ÉÁî® checkForComodification Êù•Ê£ÄÈ™åËøô‰∏™Êù°‰ª∂ÊòØÂê¶ÊàêÁ´ã„ÄÇ 1234567891011121314151617@SuppressWarnings("unchecked") public E next() &#123; // È™åËØÅÊúüÊúõÁöÑÊìç‰ΩúÊï∞‰∏éÂΩìÂâçÈõÜÂêà‰∏≠ÁöÑÊìç‰ΩúÊï∞ÊòØÂê¶Áõ∏Âêå Â¶ÇÊûú‰∏çÂêåÂ∞Ü‰ºöÊäõÂá∫ÂºÇÂ∏∏ checkForComodification(); // Â¶ÇÊûúËø≠‰ª£Âô®ÁöÑÁ¥¢ÂºïÂ∑≤ÁªèÂ§ß‰∫éÈõÜÂêà‰∏≠ÂÖÉÁ¥†ÁöÑ‰∏™Êï∞ÂàôÊäõÂá∫ÂºÇÂ∏∏ÔºåËøôÈáå‰∏çÊäõÂá∫ËßíÊ†áË∂äÁïå int i = cursor; if (i &gt;= size) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; // Áî±‰∫éÂ§öÁ∫øÁ®ãÁöÑÈóÆÈ¢òËøôÈáåÂÜçÊ¨°Âà§Êñ≠ÊòØÂê¶Ë∂äÁïåÔºåÂ¶ÇÊûúÊúâÂºÇÊ≠•Á∫øÁ®ã‰øÆÊîπ‰∫ÜListÔºàÂ¢ûÂà†ÔºâËøôÈáåÂ∞±ÂèØËÉΩ‰∫ßÁîüÂºÇÂ∏∏ if (i &gt;= elementData.length) throw new ConcurrentModificationException(); // cursor ÁßªÂä® cursor = i + 1; //ÊúÄÁªàËøîÂõû ÈõÜÂêà‰∏≠ÂØπÂ∫î‰ΩçÁΩÆÁöÑÂÖÉÁ¥†ÔºåÂπ∂Â∞Ü lastRet ËµãÂÄº‰∏∫Â∑≤ÁªèËÆøÈóÆÁöÑÂÖÉÁ¥†ÁöÑ‰∏ãÊ†á return (E) elementData[lastRet = i]; &#125; Âè™Êúâ Iterator ÁöÑ remove ÊñπÊ≥ï‰ºöÂú®Ë∞ÉÁî®ÈõÜÂêàÁöÑ remove ‰πãÂêéËÆ© ÊúüÊúõ Êìç‰ΩúÊï∞ÊîπÂèò‰ΩøexpectedModCount‰∏é modCount ÂÜçÁõ∏Á≠âÔºåÊâÄ‰ª•ÊòØÂÆâÂÖ®ÁöÑ„ÄÇ 12345678910111213141516171819202122// ÂÆûË¥®Ë∞ÉÁî®‰∫ÜÈõÜÂêàÁöÑ remove ÊñπÊ≥ïÁßªÈô§ÂÖÉÁ¥†public void remove() &#123; // ÊØîÂ¶ÇÊìç‰ΩúËÄÖÊ≤°ÊúâË∞ÉÁî® next ÊñπÊ≥ïÂ∞±Ë∞ÉÁî®‰∫Ü remove Êìç‰ΩúÔºålastRet Á≠â‰∫é -1ÁöÑÊó∂ÂÄôÊäõÂºÇÂ∏∏ if (lastRet &lt; 0) throw new IllegalStateException(); //Ê£ÄÊü•Êìç‰ΩúÊï∞ checkForComodification(); try &#123; //ÁßªÈô§‰∏äÊ¨°Ë∞ÉÁî® next ËÆøÈóÆÁöÑÂÖÉÁ¥† ArrayList.this.remove(lastRet); // ÈõÜÂêà‰∏≠Â∞ë‰∫Ü‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÊâÄ‰ª• cursor ÂêëÂâçÁßªÂä®‰∏Ä‰∏™‰ΩçÁΩÆÔºàË∞ÉÁî® next Êó∂ÂÄô cursor = lastRet + 1Ôºâ cursor = lastRet; //Âà†Èô§ÂÖÉÁ¥†ÂêéËµãÂÄº-1ÔºåÁ°Æ‰øùÂÖàÂâç remove Êó∂ÂÄôÁöÑÂà§Êñ≠ lastRet = -1; //‰øÆÊîπÊìç‰ΩúÊï∞ÊúüÊúõÂÄºÔºå modCount Âú®Ë∞ÉÁî®ÈõÜÂêàÁöÑ remove ÁöÑÊó∂ÂÄôË¢´‰øÆÊîπËøá‰∫Ü„ÄÇ expectedModCount = modCount; &#125; catch (IndexOutOfBoundsException ex) &#123; // ÈõÜÂêàÁöÑ remove ‰ºöÊúâÂèØËÉΩÊäõÂá∫ rangeCheck ÂºÇÂ∏∏Ôºåcatch ÊéâÁªü‰∏ÄÊäõÂá∫ ConcurrentModificationException throw new ConcurrentModificationException(); &#125; &#125; Ê£ÄÊü•ÊúüÊúõÁöÑÊìç‰ΩúÊï∞‰∏éÂΩìÂâçÈõÜÂêàÁöÑÊìç‰ΩúÊï∞ÊòØÂê¶Áõ∏Âêå„ÄÇJava8 ÂèëÂ∏É‰∫ÜÂæàÂ§öÂáΩÊï∞ÂºèÁºñÁ®ãÁöÑÁâπÊÄßÂåÖÊã¨ lamada ÂíåStream Êìç‰Ωú„ÄÇËø≠‰ª£Âô®‰πüÂõ†Ê≠§Ê∑ªÂä†‰∫Ü forEachRemaining ÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ïÂèØ‰ª•Â∞ÜÂΩìÂâçËø≠‰ª£Âô®ËÆøÈóÆÁöÑÂÖÉÁ¥†Ôºànext ÊñπÊ≥ïÔºâÂêéÁöÑÂÖÉÁ¥†‰º†ÈÄíÂá∫ÂéªËøòÊ≤°Áî®Âà∞ËøáÔºåÊ∫êÁ†ÅÂ∞±‰∏çÊîæÂá∫Êù•‰∫Ü,Â§ßÂÆ∂ÊúâÂÖ¥Ë∂£Ëá™Â∑±‰∫ÜËß£‰∏ã„ÄÇ 1234567891011 @Override @SuppressWarnings("unchecked")public void forEachRemaining(Consumer&lt;? super E&gt; consumer) &#123; //... Java8 ÁöÑÊñ∞ÁâπÊÄßÔºåÂèØ‰ª•Â∞ÜÂΩìÂâçËø≠‰ª£Âô®ËÆøÈóÆÁöÑÂÖÉÁ¥†Ôºànext ÊñπÊ≥ïÔºâÂêéÁöÑÂÖÉÁ¥†‰º†ÈÄíÂá∫ÂéªËøòÊ≤°Áî®Âà∞ËøáÔºåÊ∫êÁ†ÅÂ∞±‰∏çÊîæÂá∫Êù•‰∫Ü,Â§ßÂÆ∂ÊúâÂÖ¥Ë∂£Ëá™Â∑±‰∫ÜËß£‰∏ã„ÄÇ &#125; // Ê£ÄÊü•ÊúüÊúõÁöÑÊìç‰ΩúÊï∞‰∏éÂΩìÂâçÈõÜÂêàÁöÑÊìç‰ΩúÊï∞ÊòØÂê¶Áõ∏Âêå final void checkForComodification() &#123; if (modCount != expectedModCount) throw new ConcurrentModificationException(); &#125;&#125; ListIterator Ëø≠‰ª£Âô®ArrayList ÂèØ‰ª•ÈÄöËøá‰ª•‰∏ã‰∏§ÁßçÊñπÂºèËé∑Âèñ ListIterator Ëø≠‰ª£Âô®ÔºåÂå∫Âà´Âú®‰∫éÂàùÂßãËßíÊ†áÁöÑ‰ΩçÁΩÆ„ÄÇ‰∏çÂ∏¶ÂèÇÊï∞ÁöÑËø≠‰ª£Âô®ÈªòËÆ§ÁöÑcursor = 0 123456789public ListIterator&lt;E&gt; listIterator(int index) &#123; if (index &lt; 0 || index &gt; size) throw new IndexOutOfBoundsException("Index: "+index); return new ListItr(index);&#125; public ListIterator&lt;E&gt; listIterator() &#123; return new ListItr(0);&#125; ListItrÂØπË±°ÁªßÊâøËá™ÂâçËæπÂàÜÊûêÁöÑ ItrÔºå‰πüÂ∞±ÊòØËØ¥‰ªñÊã•Êúâ Itr ÁöÑÊâÄÊúâÊñπÊ≥ïÔºåÂπ∂Âú®Ê≠§Âü∫Á°Ä‰∏äËøõË°åÊâ©Â±ïÔºåÂÖ∂Êâ©Â±ï‰∫ÜËÆøÈóÆÂΩìÂâçËßíÊ†áÂâç‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÊñπÊ≥ï„ÄÇ‰ª•ÂèäÂú®ÈÅçÂéÜËøáÁ®ã‰∏≠Ê∑ªÂä†ÂÖÉÁ¥†Âíå‰øÆÊîπÂÖÉÁ¥†ÁöÑÊñπÊ≥ï„ÄÇ ListItr ÁöÑÊûÑÈÄ†ÊñπÊ≥ïÂ¶Ç‰∏ãÔºö 12345private class ListItr extends Itr implements ListIterator&lt;E&gt; &#123; ListItr(int index) &#123; super(); cursor = index;&#125; ListItr ÁöÑ previous ÊñπÊ≥ïÔºö 123456789101112131415161718192021222324252627282930public boolean hasPrevious() &#123; // cursor = 0 Ë°®Á§∫Ê∏∏Ê†áÂú®Êï∞ÁªÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÂ∑¶ËæπÔºåÊ≠§Êó∂ `hasPrevious` ËøîÂõûfalse return cursor != 0;&#125;public int nextIndex() &#123; return cursor;//Ë∞ÉÁî®ËøîÂõûÂΩìÂâçËßíÊ†á‰ΩçÁΩÆ&#125;public int previousIndex() &#123; return cursor - 1;//Ë∞ÉÁî®ËøîÂõû‰∏ä‰∏Ä‰∏™ËßíÊ†á&#125;//ËøîÂõûÂΩìÂâçËßíÊ†áÁöÑ‰∏ä‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÂπ∂ÂâçÁßªÁßªÂä®ËßíÊ†á@SuppressWarnings("unchecked")public E previous() &#123; // fast-fail Ê£ÄÊü• checkForComodification(); int i = cursor - 1; // Â¶ÇÊûúÂâçÁßªËßíÊ†á &lt;0 ‰ª£Ë°®ÈÅçÂéÜÂà∞Êï∞ÁªÑÈÅçÂéÜÂÆåÊàêÔºå‰∏ÄËà¨Âú®Ë∞ÉÁî® previous Ë¶ÅË∞ÉÁî® hasPrevious Âà§Êñ≠ if (i &lt; 0) throw new NoSuchElementException(); //Ëé∑ÂèñÂÖÉÁ¥† Object[] elementData = ArrayList.this.elementData; if (i &gt;= elementData.length) throw new ConcurrentModificationException(); //Ëé∑ÂèñÊàêÂäüÂêé‰øÆÊîπËßíÊ†á‰ΩçÁΩÆÂíå lastRet ‰ΩçÁΩÆ cursor = i; return (E) elementData[lastRet = i];&#125; ListItr ÁöÑ add ÊñπÊ≥ï 1234567891011121314151617public void add(E e) &#123; // fast-fail Ê£ÄÊü• checkForComodification(); try &#123; // Ëé∑ÂèñÂΩìÂâçËßíÊ†á‰ΩçÁΩÆÔºå‰∏ÄËà¨ÁöÑÊòØË∞ÉÁî® previous ÂêéÔºåËßíÊ†áÊîπÂèòÂêéÂêéÂéª cursor int i = cursor; //Ê∑ªÂä†ÂÖÉÁ¥†Âú®ËßíÊ†á‰ΩçÁΩÆ ArrayList.this.add(i, e); //ÈõÜÂêà‰øÆÊîπÂÆåÊàêÂêéË¶ÅÊîπÂèòÂΩìÂâçËßíÊ†á‰ΩçÁΩÆ cursor = i + 1; //ÈáçÊñ∞ÁΩÆ‰Ωç -1 Â¶ÇÊûú‰ΩøÁî®Ëø≠‰ª£Âô®‰øÆÊîπ‰∫ÜËßíÊ†á‰ΩçÁΩÆÂÖÉÁ¥†Âêé‰∏çÂÖÅËÆ∏Á´ãÂàª‰ΩøÁî® set ÊñπÊ≥ï‰øÆÊîπ‰øÆÊîπÂêéËßíÊ†áÊú™Áü•ÁöÑÈ¢ùÂÖÉÁ¥† ÂèÇËÄÉ set ÁöÑÊ∫ê‰ª£Á†Å lastRet = -1; expectedModCount = modCount; &#125; catch (IndexOutOfBoundsException ex) &#123; throw new ConcurrentModificationException(); &#125;&#125; ÂèØËÉΩÂØπÊØî‰∏§‰∏™Ëø≠‰ª£Âô®ÂêéÔºå‰ºöÂØπ cursor ÊåáÂêëÁöÑ‰ΩçÁΩÆÊúâÊâÄÁñëÊÉëÔºåÁé∞Âú®Êàë‰ª¨Êù•Áúã‰∏ã‰∏ÄÊÆµÁ§∫‰æã‰ª£Á†ÅÂØπÂ∫îÁöÑÂõæÔºö 1234567891011121314151617181920private void testListItr()&#123; ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;(); list.add(1); list.add(2); list.add(3); list.add(4); ListIterator&lt;Integer&gt; listIterator = list.listIterator(list.size()); while (listIterator.hasPrevious())&#123; if (listIterator.previous() == 2)&#123; listIterator.add(0); // listIterator.set(10); //Exception in thread "main" java.lang.IllegalStateException &#125; &#125; System.out.println("list " + list.toString());&#125; Áî±Ê≠§ÂèØ‰ª•Áúã cursor ‰∫é Êï∞ÁªÑËßíÊ†á‰∏çÂêåÔºåÂÆÉÂèØ‰ª•Â§ÑÁöÑ‰ΩçÁΩÆÊÄªÊØîËßíÊ†áÂ§ö‰∏Ä‰∏™ÔºåÂõ†‰∏∫Âú®Êàë‰ª¨‰ΩøÁî® Iterator Êìç‰ΩúÈõÜÂêàÁöÑÊó∂ÂÄôÔºåÊÄªÊòØË¶ÅÂÖàÊìç‰Ωú cursor ÁßªÂä®Ôºå listIterator.previous ‰πüÂ•Ω iterator.next() ‰πüÂ•ΩÔºåÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÈÅìÁêÜÔºåÂ¶ÇÊûú‰∏çÊåâÁÖßËßÑÂÆöÂéªËøõË°åÊìç‰ΩúÔºåÂ∏¶Áªô‰ΩøÁî®ËÄÖÁöÑÂè™ÊúâÂºÇÂ∏∏„ÄÇ java8 Êñ∞Â¢ûÂä†ÁöÑÈÅçÂéÜÊñπÊ≥ï forEachjava8Â¢ûÂä†ÂæàÂ§öÂ•ΩÁî®ÁöÑ APIÔºåÂ∑•‰ΩúÂíåÂ≠¶‰π†‰∏≠‰πüÂú®ÊÖ¢ÊÖ¢Êé•Ëß¶Ëøô‰∫õ APIÔºåforEach Êìç‰ΩúÂèØËÉΩÊòØÊàëÁªß lambda ÂêéÔºåÁ¨¨‰∏Ä‰∏™‰ΩøÁî®ÁöÑ API ‰∫ÜÔºàÂõßÔºâÔºåjdk doc ÂØπËøô‰∏™ÊñπÊ≥ïÁöÑËß£ÈáäÊòØÔºö ÂØπÊ≠§ÈõÜÂêàÁöÑÊØè‰∏™Êù°ÁõÆÊâßË°åÁªôÂÆöÊìç‰ΩúÔºåÁõ¥Âà∞Â§ÑÁêÜÂÆåÊâÄÊúâÊù°ÁõÆÊàñÊìç‰ΩúÊäõÂá∫ÂºÇÂ∏∏‰∏∫Ê≠¢„ÄÇ Èô§ÈùûÂÆûÁé∞Á±ªÂè¶ÊúâËßÑÂÆöÔºåÂê¶ÂàôÊåâÁÖßÊù°ÁõÆÈõÜËø≠‰ª£ÁöÑÈ°∫Â∫èÊâßË°åÊìç‰ΩúÔºàÂ¶ÇÊûúÊåáÂÆö‰∫ÜËø≠‰ª£È°∫Â∫èÔºâ„ÄÇÊìç‰ΩúÊäõÂá∫ÁöÑÂºÇÂ∏∏ÈúÄË¶ÅË∞ÉÁî®ËÄÖËá™Â∑±Â§ÑÁêÜ„ÄÇ ÂÖ∂ÂÆûÂÖ∂ÂÜÖÈÉ®ÂÆûÁé∞‰πüÂæàÁÆÄÂçïÔºåÂè™ÊòØ‰∏Ä‰∏™Âà§Êñ≠‰∫ÜÊìç‰ΩúÊï∞ÁöÑ for Âæ™ÁéØÔºåÊâÄ‰ª•Âú®ÊïàÁéá‰∏ä‰∏ç‰ºöÊúâÊèêÂçáÔºå‰ΩÜÊòØÂú®ÂÆâÂÖ®ÊÄß‰∏äÁöÑÁ°ÆÊúâÊèêÂçáÔºå‰πüÂ∞ë‰∫õÂæàÂ§ö‰ª£Á†Å‰∏çÊòØ‰πàÔºü 1234567891011121314151617@Overridepublic void forEach(Consumer&lt;? super E&gt; action) &#123; //Ê£ÄÊü•Ë∞ÉÁî®ËÄÖ‰º†ËøõÊù•ÁöÑÊìç‰ΩúÂáΩÊï∞ÊòØÂê¶‰∏∫Á©∫ Objects.requireNonNull(action); //‰∏éËø≠‰ª£‰∏çÂêåÊúüÊúõÊìç‰ΩúË¢´ËµãÂÄº‰∏∫ final ‰πüÂ∞±ÊòØ forEach ËøáÁ®ã‰∏≠‰∏çÂÖÅËÆ∏Âπ∂Âèë‰øÆÊîπÈõÜÂêàÂê¶Âàô‰ºöÊäõÂá∫ÂºÇÂ∏∏ final int expectedModCount = modCount; @SuppressWarnings("unchecked") final E[] elementData = (E[]) this.elementData; final int size = this.size; //ÊØèÊ¨°ÂèñÂÖÉÁ¥†‰πãÂâçÂà§Êñ≠Êìç‰ΩúÊï∞ÔºåÁ°Æ‰øùÊìç‰ΩúÊ≠£Â∏∏ for (int i=0; modCount == expectedModCount &amp;&amp; i &lt; size; i++) &#123; action.accept(elementData[i]); &#125; if (modCount != expectedModCount) &#123; throw new ConcurrentModificationException(); &#125;&#125; ÂØπ‰∫éÈ´òÁ∫ß for Âæ™ÁéØ‰ª•ÂèäÊúÄÊôÆÈÄöÁöÑ fori ÊñπÊ≥ïËøôÈáå‰∏çÂÜçËµòËø∞„ÄÇ‰∏ãÈù¢Êàë‰ª¨Áúã‰∏ãÈù¢ËØï‰ºöÈóÆÂà∞‰∏Ä‰∏™ÈóÆÈ¢òÔºå‰πüÊòØÊàë‰ª¨Âú®ÂçïÁ∫øÁ®ãÊìç‰ΩúÈõÜÂêàÁöÑÊó∂ÂÄôÈúÄË¶ÅÊ≥®ÊÑèÁöÑ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ¶ÇÊûúÊ≠£Á°ÆÁöÑÂú®ÈÅçÂéÜËøáÁ®ã‰∏≠‰øÆÊîπÈõÜÂêà„ÄÇ ÈîôËØØÊìç‰Ωú 1 Âú® forÂæ™ÁéØ‰øÆÊîπÈõÜÂêàÂêéÁªßÁª≠ÈÅçÂéÜÁ¨¨‰∏Ä‰∏™‰æãÂ≠êÔºö 1234567891011121314List&lt;SubClass&gt; list2 = new ArrayList&lt;&gt;();list2.add(new SubClass(1));list2.add(new SubClass(2));list2.add(new SubClass(3));list2.add(new SubClass(3));for (int i = 0; i &lt; list2.size(); i++) &#123; if (list2.get(i).test == 3) &#123; list2.remove(i); &#125;&#125;System.out.println(list2);//[SubClass&#123;test=1&#125;, SubClass&#123;test=2&#125;, SubClass&#123;test=3&#125;] Ëøô‰∏™‰æãÂ≠êÊàë‰ª¨‰ºöÂèëÁé∞ÔºåÁ®ãÂ∫èÂπ∂Ê≤°ÊúâÊäõÂá∫ÂºÇÂ∏∏Ôºå‰ΩÜÊòØ‰ªéËøêË°åÁªèËøá‰∏äÊù•ÁúãÂπ∂‰∏çÊòØÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÔºåÂõ†‰∏∫ËøòÊúâ SubClass.test = 3ÁöÑÊï∞ÊçÆÂú®ÔºåËøôÊòØÂõ†‰∏∫ remove Êìç‰ΩúÊîπÂèò‰∫Ülist.size(),ËÄå fori ‰∏≠ÊØèÊ¨°ÊâßË°åÈÉΩ‰ºöÈáçÊñ∞Ë∞ÉÁî®‰∏ÄÊ¨°lists2.size()ÔºåÂΩìÊàë‰ª¨Âà†Èô§‰∫ÜÂÄíÊï∞Á¨¨‰∫å‰∏™ÂÖÉÁ¥†ÂêéÔºålist2.size() = 3,i = 3 &lt; 3 ‰∏çÊàêÁ´ãÂàôÊ≤°ÊúâÂú®ËøõË°å remove Êìç‰ΩúÔºåÁü•ÈÅì‰∫Ü‰∏∫‰ªÄ‰πà‰ª•ÂêéÊàë‰ª¨ËØïÁùÄËøôÊ†∑ÊîπÂèò‰∫ÜÂæ™ÁéØÊñπÂºèÔºö 123456789int size = list2.size();for (int i = 0; i &lt; size; i++) &#123; if (list2.get(i).test == 3) &#123; list2.remove(i);//remove ‰ª•Âêé list ÂÜÖÈÉ®Â∞Ü size ÈáçÊñ∞ÊîπÂèò‰∫Ü for Âæ™ÁéØ‰∏ãÊ¨°Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÂèØËÉΩÂ∞±‰∏çËøõÂéª‰∫Ü &#125;&#125;System.out.println(list2);//Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 3, Size: 3 ÊûúÁúüÁ®ãÂ∫èÊäõÂá∫‰∫ÜËßíÊ†áË∂äÁïåÁöÑÂºÇÂ∏∏ÔºåÂõ†‰∏∫ËøôÊ†∑ÊØèÊ¨° fori ÁöÑÊó∂ÂÄôÊàë‰ª¨‰∏çÂéªÊãøÊõ¥Êñ∞ÂêéÁöÑ list ÂÖÉÁ¥†ÁöÑ size Â§ßÂ∞èÔºåÊâÄ‰ª•ÂΩìÊàë‰ª¨Âà†Èô§‰∏Ä‰∏™ÂÖÉÁ¥†ÂêéÔºåsize = 3 ÂΩìÊàë‰ª¨ for Âæ™ÁéØÂéªlist2.get(3)ÁöÑÊó∂ÂÄôÂ∞±‰ºöË¢´ rangeCheckÊñπÊ≥ïÊäõÂá∫ÂºÇÂ∏∏„ÄÇ ÈîôËØØÊìç‰ΩúÂØºËá¥ ConcurrentModificationException ÂºÇÂ∏∏Êàë‰ª¨ÂàÜÊûêËø≠‰ª£Âô®ÁöÑÊó∂ÂÄôÔºåÁü•ÈÅì ConcurrentModificationExceptionÊòØÊåáÂõ†‰∏∫Ëø≠‰ª£Âô®Ë∞ÉÁî® checkForComodification ÊñπÊ≥ïÊØîËæÉ modCount Âíå expectedModCount ÊñπÊ≥ïÂ§ßÂ∞èÁöÑÊó∂ÂÄôÊäõÂá∫ÂºÇÂ∏∏„ÄÇÊàë‰ª¨Âú®ÂàÜÊûê ArrayList ÁöÑÊó∂ÂÄôÂú®ÊØèÊ¨°ÂØπÈõÜÂêàËøõË°å‰øÆÊîπÔºå Âç≥Êúâ add Âíå remove Êìç‰ΩúÁöÑÊó∂ÂÄôÊØèÊ¨°ÈÉΩ‰ºöÂØπ modCount ++„ÄÇ modCount Ëøô‰∏™ÂèòÈáè‰∏ªË¶ÅÁî®Êù•ËÆ∞ÂΩï ArrayList Ë¢´‰øÆÊîπÁöÑÊ¨°Êï∞ÔºåÈÇ£‰πà‰∏∫‰ªÄ‰πàË¶ÅËÆ∞ÂΩïËøô‰∏™Ê¨°Êï∞Âë¢ÔºüÊòØ‰∏∫‰∫ÜÈò≤Ê≠¢Â§öÁ∫øÁ®ãÂØπÂêå‰∏ÄÈõÜÂêàËøõË°å‰øÆÊîπ‰∫ßÁîüÈîôËØØÔºåËÆ∞ÂΩï‰∫ÜËøô‰∏™ÂèòÈáèÔºåÂú®ÂØπ ArrayList ËøõË°åËø≠‰ª£ÁöÑËøáÁ®ã‰∏≠Êàë‰ª¨ËÉΩÂæàÂø´ÁöÑÂèëÁé∞Ëøô‰∏™ÂèòÈáèÊòØÂê¶Ë¢´‰øÆÊîπËøáÔºåÂ¶ÇÊûúË¢´‰øÆÊîπ‰∫Ü ConcurrentModificationException Â∞Ü‰ºö‰∫ßÁîü„ÄÇ‰∏ãÈù¢Êàë‰ª¨Êù•Áúã‰∏ã‰æãÂ≠êÔºåËøô‰∏™‰æãÂ≠êÂπ∂‰∏çÊòØÂú®Â§öÁ∫øÁ®ã‰∏ãÁöÑÔºåËÄåÊòØÂõ†‰∏∫Êàë‰ª¨Âú®Âêå‰∏ÄÁ∫øÁ®ã‰∏≠ÂØπ list ËøõË°å‰∫ÜÈîôËØØÊìç‰ΩúÂØºËá¥ÁöÑÔºö 12345678910111213Iterator&lt;SubClass&gt; iterator = lists.iterator();while (iterator.hasNext()) &#123; SubClass next = iterator.next(); int index = next.test; if (index == 3) &#123; list2.remove(index);//Êìç‰Ωú1Ôºö Ê≥®ÊÑèÊòØ list2.remove Êìç‰Ωú //iterator.remove()Ôºõ/Êìç‰Ωú2 Ê≥®ÊÑèÊòØ iterator.remove Êìç‰Ωú &#125;&#125;//Êìç‰Ωú1Ôºö Exception in thread "main" java.util.ConcurrentModificationException//Êìç‰Ωú2Ôºö [SubClass&#123;test=1&#125;, SubClass&#123;test=2&#125;]System.out.println(list2); Êàë‰ª¨ÂØπÊìç‰Ωú1Ôºå2ÂàÜÂà´ËøêË°åÁ®ãÂ∫èÔºåÂèØ‰ª•ÁúãÂà∞ÔºåÊìç‰Ωú1ÂæàÂø´Â∞±ÊäõÂá∫‰∫Ü java.util.ConcurrentModificationException ÂºÇÂ∏∏ÔºåÊìç‰Ωú2 ÂàôÈ°∫Âà©ËøêË°åÂá∫Ê≠£Â∏∏ÁªìÊûúÔºåÂ¶ÇÊûúÂØπ modCount Ê≥®ÊÑè‰∫ÜÁöÑËØùÔºåÊàë‰ª¨ÂæàÂÆπÊòìÁêÜËß£Ôºålist.remove(index) Êìç‰Ωú‰ºö‰øÆÊîπList ÁöÑ modCountÔºåËÄå iterator.next() ÂÜÖÈÉ®ÊØèÊ¨°‰ºöÊ£ÄÈ™å expectedModCount != modCountÔºåÊâÄ‰ª•ÂΩìÊàë‰ª¨‰ΩøÁî® list.remove ‰∏ã‰∏ÄÊ¨°ÂÜçË∞ÉÁî® iterator.next() Â∞±‰ºöÊä•Èîô‰∫ÜÔºåËÄåiterator.remove‰∏∫‰ªÄ‰πàÊòØÂÆâÂÖ®ÁöÑÂë¢ÔºüÂõ†‰∏∫ÂÖ∂Êìç‰ΩúÂÜÖÈÉ®‰ºöÂú®Ë∞ÉÁî® list.remove ÂêéÈáçÊñ∞Â∞ÜÊñ∞ÁöÑ modCount ËµãÂÄºÁªô expectedModCount„ÄÇÊâÄ‰ª•Êàë‰ª¨Áõ¥Êé•Ë∞ÉÁî® list.remove Êìç‰ΩúÊòØÈîôËØØÁöÑ„ÄÇÂØπ‰∫éÂ§öÁ∫øÁ®ãÁöÑÂΩ±ÂìçËøôÈáå‰∏çÂú®Â±ïÂºÄËøôÈáåÊé®ËçêÊúâÂÖ¥Ë∂£ÁöÑÊúãÂèãÁúã‰∏ãËøô‰∏™ÊñáÁ´† Java ConcurrentModificationExceptionÂºÇÂ∏∏ÂéüÂõ†ÂíåËß£ÂÜ≥ÊñπÊ≥ï; ÁªèËøá‰∫Ü‰∏ÄËΩÆÂàÜÊûêÊàë‰ª¨Êàë‰ª¨Áü•ÈÅì‰∫ÜÈîôËØØ‰∫ßÁîüÂéüÂõ†‰∫ÜÔºå‰ΩÜÊòØÂ§ßÂÆ∂ÊòØÂê¶ËÉΩÁúüÁöÑÂàÜËæ®Âá∫‰ªÄ‰πàÊìç‰ΩúÊòØÈîôËØØÁöÑÂë¢ÔºüÊàë‰ª¨Êù•Áúã‰∏ãËæπËøô‰∏™Èù¢ËØïÈ¢òÔºåËøôÊòØÊàëÂú®ÁΩë‰∏äÊó†ÊÑè‰∏≠ÁúãÂà∞ÁöÑ‰∏ÄÈÅìÂ§ß‰ºóÁÇπËØÑÁöÑÈù¢ËØïÈ¢òÔºö 123456789101112ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();for (int i = 0; i &lt; 10; i++) &#123; list.add("sh" + i);&#125;for (int i = 0; list.iterator().hasNext(); i++) &#123; // hasNext Âè™ÊòØÂà§Êñ≠‰∫Ü cursor != sizeÔºåÂπ∂Ê≤°ÊúâÁßªÂä®cursorÔºåÊâÄ‰ª•Âè™Ë¶Å size ‰∏çÊòØ 0 ÔºåÂ∞±‰∏ç‰ºöÈÄÄÂá∫Âæ™ÁéØ // ÊúÄÂêésize == 5Ôºålist.remove(5)Ë∂äÁïåÔºöIndexOutOfBoundsException // ËøôÈáåÂπ∂‰∏ç‰ºöÂéªÊä• ConcurrentModificationException(),Âõ†‰∏∫list.iterator()ÊØèÊ¨°ÈÉΩ‰ºöÂéªnew‰∏Ä‰∏™Êñ∞ÁöÑItrÂØπË±°ÔºåÊØèÊ¨°ÂàùÂßãÂåñËøô‰∏™ÂØπË±°ÈÉΩ‰ºöÊääÊúÄÊñ∞ÁöÑ modCount ËµãÂÄºÁªô expectedCountÔºåÊâÄ‰ª•‰∏çÂèØËÉΩÂÅöÂà∞ modeCount != expectedCountÔºåËÄå‰∏îÂè™Êúâ iterator.next() ‰ºöÊúâËøô‰∏™ÈîôËØØ„ÄÇ list.remove(i); System.out.println("ÁßòÂØÜ" + list.get(i));&#125; ‰∏ÄÈÅìÈù¢ËØïÈ¢òÁõ∏‰ø°Â§ßÂÆ∂ËÇØÂÆöÁü•ÈÅìËøôÊ†∑Êìç‰ΩúÊòØ‰ºö‰∫ßÁîüÈîôËØØÁöÑÔºå‰ΩÜÊòØÊúÄÁªà‰ºöÊäõÂá∫ËßíÊ†áË∂äÁïåËøòÊòØConcurrentModificationExceptionÂë¢Ôºü ÂÖ∂ÂÆûËøôÈáå‰ºöÊäõÂá∫ËßíÊ†áË∂äÁïåÂºÇÂ∏∏Ôºå‰∏∫‰ªÄ‰πàÂë¢ÔºåÂõ†‰∏∫ for Âæ™ÁéØÁöÑÊù°‰ª∂ list.iterator().hasNext()ÔºåÊàë‰ª¨Áü•ÈÅì list.iterator() Â∞Ü‰ºönew ‰∏Ä‰∏™Êñ∞ÁöÑ iterator ÂØπË±°ÔºåËÄåÂú® new ÁöÑËøáÁ®ã‰∏≠Êàë‰ª¨Â∞Ü ÊØèÊ¨° list.remove ÂêéÁöÑ modCount ËµãÂÄºÁªô‰∫ÜÊñ∞ÁöÑ iterator ÁöÑ expectedModCountÔºåÊâÄ‰ª•‰∏ç‰ºöÊäõÂá∫ ConcurrentModificationException ÂºÇÂ∏∏ÔºåËÄå hasNext ÂÜÖÈÉ®Âè™Âà§Êñ≠‰∫Ü size ÊòØÂê¶Á≠â‰∫é cursor != size ÂΩìÊàë‰ª¨Âà†Èô§‰∫Ü‰∏ÄÂçäÂÖÉÁ¥†‰ª•ÂêéÔºåsize ÂèòÊàê‰∫Ü 5 ËÄåÊñ∞ÁöÑ list.iterator() ÁöÑ cursor Á≠â‰∫é 0 Ôºå0!=5 for Âæ™ÁéØÁªßÁª≠ÔºåÈÇ£‰πàÂΩìÊâßË°åÂà∞ list.removeÔºà5ÔºâÁöÑÊó∂ÂÄôÂ∞±‰ºöÊäõÂá∫ËßíÊ†áË∂äÁïå‰∫Ü„ÄÇ ÊÄªÁªì ArrayList Â∫ïÂ±ÇÊòØ‰∏Ä‰∏™Âä®ÊÄÅÊâ©ÂÆπÁöÑÊï∞ÁªÑÁªìÊûÑ,ÊØèÊ¨°Êâ©ÂÆπÈúÄË¶ÅÂ¢ûÂä†1.5ÂÄçÁöÑÂÆπÈáè ArrayList Êâ©ÂÆπÂ∫ïÂ±ÇÊòØÈÄöËøá Arrays.CopyOf Âíå System.arraycopy Êù•ÂÆûÁé∞ÁöÑ„ÄÇÊØèÊ¨°ÈÉΩ‰ºö‰∫ßÁîüÊñ∞ÁöÑÊï∞ÁªÑÔºåÂíåÊï∞ÁªÑ‰∏≠ÂÜÖÂÆπÁöÑÊã∑Ë¥ùÔºåÊâÄ‰ª•‰ºöËÄóË¥πÊÄßËÉΩÔºåÊâÄ‰ª•Âú®Â§öÂ¢ûÂà†ÁöÑÊìç‰ΩúÁöÑÊÉÖÂÜµÂèØ‰ºòÂÖàËÄÉËôë LinkList ËÄå‰∏çÊòØ ArrayList„ÄÇ ArrayList ÁöÑ toArray ÊñπÊ≥ïÈáçËΩΩÊñπÊ≥ïÁöÑ‰ΩøÁî®„ÄÇ ÂÖÅËÆ∏Â≠òÊîæÔºà‰∏çÊ≠¢‰∏Ä‰∏™Ôºâ null ÂÖÉÁ¥† ÂÖÅËÆ∏Â≠òÊîæÈáçÂ§çÊï∞ÊçÆÔºåÂ≠òÂÇ®È°∫Â∫èÊåâÁÖßÂÖÉÁ¥†ÁöÑÊ∑ªÂä†È°∫Â∫è ArrayList Âπ∂‰∏çÊòØ‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®ÁöÑÈõÜÂêà„ÄÇÂ¶ÇÊûúÈõÜÂêàÁöÑÂ¢ûÂà†Êìç‰ΩúÈúÄË¶Å‰øùËØÅÁ∫øÁ®ãÁöÑÂÆâÂÖ®ÊÄßÔºåÂèØ‰ª•ËÄÉËôë‰ΩøÁî® CopyOnWriteArrayList ÊàñËÄÖ‰Ωøcollections.synchronizedList(List l)ÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®ÁöÑArrayListÁ±ª. ‰∏çÊ≠£Á°ÆËÆøÈóÆÈõÜÂêàÂÖÉÁ¥†ÁöÑÊó∂ÂÄô ConcurrentModificationExceptionÂíå java.lang.IndexOutOfBoundsException ÂºÇÂ∏∏‰∫ßÁîüÁöÑÊó∂Êú∫ÂíåÂéüÁêÜ„ÄÇ Êú¨ÊñáÂèàÈïøÁØáÂ§ßËÆ∫ÁöÑÂàÜÊûê‰∫Ü‰∏ÄÊ≥¢ ArrayList ÁöÑÊ∫êÁ†ÅÔºåÂØπÊàë‰∏™‰∫∫ËÄåË®ÄËøôÂæàÊúâÊÑè‰πâÔºåÂú®Êü•ÁúãÊ∫êÁ†ÅÁöÑËøáÁ®ã‰∏≠ÔºåÊ≥®ÊÑèÂà∞‰∫ÜÂπ≥Êó∂ÂæàÂ∞ëÊúâÊú∫‰ºöÊé•Ëß¶ÁöÑÁü•ËØÜÁÇπ„ÄÇÂΩìÁÑ∂ËøôÂè™ÊòØÈõÜÂêàÊ∫êÁ†ÅÂàÜÊûêÁöÑÂºÄÁ´ØÔºå‰ª•ÂêéËøò‰ºöÊõ¥ÁªÜÔºåÂÖ∂‰ªñÂ∏∏Áî®ÈõÜÂêàÊ∫êÁ†ÅÁöÑÂàÜÊûê„ÄÇÂ¶ÇÊûúÂ§ßÂÆ∂ÊÑüËßâÊàëÂÜôÁöÑËøòÂèØ‰ª•Ôºå ËØ∑ÁïôË®Ä + ÁÇπËµû + ÂÖ≥Ê≥®„ÄÇ ËΩ¨ËΩΩÔºöÊêûÊáÇ Java ArrayList Ê∫êÁ†Å LinkedListÂÖàÂêêÊßΩ‰∏Ä‰∏ãÔºåÊÑüËßâLinkedListÊ∫êÁ†ÅÁúüÁöÑÂæàÁÆÄÂçïÂïäÂìàÂìàÂìàÂìàÂìàÔºåÊÄªÂÖ±‰πüÊâç1000Êù•Ë°å‰ª£Á†Å‚Ä¶ËÄå‰∏îËøû‰∏™Êâ©ÂÆπÈÉΩÊ≤°ÊúâÔºåÂü∫Êú¨‰∏äÂ∞±ÊòØÂØπÂèåÂêëÈìæË°®ÁöÑ‰∏ÄÈ°øÊìç‰ΩúÔºåÊâÄ‰ª•ÂÆÉÊòØ‰∏∫‰∫ÜÂáë‰ª£Á†ÅÈáèÊâÄ‰ª•È°∫Â∏¶Âà©Áî®ÂèåÂêëÈìæË°®ÁöÑÊÄßË¥®ÂÆûÁé∞‰∏Ä‰∏ãÂèåÂêëÈòüÂàóÂòõ‚Ä¶ÁÆó‰∫ÜÔºåËøòÊòØËÄêÁùÄÊÄßË¥®Á®çÂæÆÂàÜÊûê‰∏Ä‰∏ãÂêß‚Ä¶ÔºàÂ∞±ÊòØÂ∞ºÁéõÊñπÊ≥ïÊúâÁÇπÂ§öÔºåÂêçÂ≠óÊàëÈÉΩÁúãÊôïÂï¶‚Ä¶Ôºâ ËØùËØ¥ÂõûÊù•ÔºåËøô‰∫õÈáåÈù¢ÁöÑÂáΩÊï∞Â∞±ÊòØ ÂØπÂèåÂêëÈìæË°®ÂÅöÊüê‰∫õÊìç‰ΩúÁöÑÊ†áÂáÜÁ≠îÊ°àÂêñÔºÅÈáåÈù¢ÂÜôÁöÑ‰ª£Á†ÅÈÉΩÊå∫‰ºòÁæéÁöÑÔºÅÂèØ‰ª•Ê¨£Ëµè‰∏ÄÂìà~ ÁÆó‰∫Ü‚Ä¶‚Ä¶ÊàëÊáíÂæóÂàÜÊûê‰∫ÜÔºåÁõ¥Êé•‰∏¢‰∏™ÈìæÊé•Âêß‚Ä¶‚Ä¶ ÊêûÊáÇ JAVA LinkedList Ê∫êÁ†Å Ê≥®ÊÑèÁÇπ ÁªßÊâøËá™ AbstrackSequentialList Âπ∂ÂÆûÁé∞‰∫Ü List Êé•Âè£‰ª•Âèä Deque ÂèåÂêëÈòüÂàóÊé•Âè£ÔºåÂõ†Ê≠§ LinkedList ‰∏ç‰ΩÜÊã•Êúâ List Áõ∏ÂÖ≥ÁöÑÊìç‰ΩúÊñπÊ≥ïÔºå‰πüÊúâÈòüÂàóÁöÑÁõ∏ÂÖ≥Êìç‰ΩúÊñπÊ≥ï„ÄÇ LinkedList ÈõÜÂêàÂ∫ïÂ±ÇÂÆûÁé∞ÁöÑÊï∞ÊçÆÁªìÊûÑ‰∏∫ÂèåÂêëÈìæË°® LinkedList ÈõÜÂêà‰∏≠ÂÖÉÁ¥†ÂÖÅËÆ∏‰∏∫ null LinkedList ÂÖÅËÆ∏Â≠òÂÖ•ÈáçÂ§çÁöÑÊï∞ÊçÆ LinkedList ‰∏≠ÂÖÉÁ¥†Â≠òÊîæÈ°∫Â∫è‰∏∫Â≠òÂÖ•È°∫Â∫è„ÄÇ LinkedList ÊòØÈùûÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÂ¶ÇÊûúÊÉ≥‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂâçÊèê‰∏ãÊìç‰Ωú LinkedListÔºåÂèØ‰ª•‰ΩøÁî® List list = Collections.synchronizedList(new LinkedList(...)); Êù•ÁîüÊàê‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®ÁöÑ LinkedList ÂÆûÁé∞ListÔºåÂà©Áî®‰∫ÜÂÖ∂ÊòØ‰∏§‰∏™ÂçïÈìæË°®ÁªÑÊàêÁöÑÔºåÂÆûÁé∞DequeÔºåÂà©Áî®ÂÖ∂ÊòØÂèåÂêëÈìæË°®ÁöÑÊÄßË¥®ÔºåÊ≥®ÊÑèÂìàÔºåDequeÊó¢ÂèØ‰ª•ÂΩìÈòüÂàó‰πüÂèØ‰ª•ÂΩìÊ†àÔºåÊâÄ‰ª•ÈòüÂàóÂíåÊ†àÁöÑÊñπÊ≥ïLinkedListÂÖ®Êúâ„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445public interface Deque&lt;E&gt; extends Queue&lt;E&gt; &#123; //‰ªéÂ§¥ÈÉ®ÊèíÂÖ•ÔºàÊäõÂºÇÂ∏∏Ôºâ void addFirst(E e); //‰ªéÂ∞æÈÉ®ÊèíÂÖ•ÔºàÊäõÂºÇÂ∏∏Ôºâ void addLast(E e); //‰ªéÂ§¥ÈÉ®ÊèíÂÖ•ÔºàÁâπÊÆäÂÄºÔºâ boolean offerFirst(E e); //‰ªéÂ∞æÈÉ®ÊèíÂÖ•ÔºàÁâπÊÆäÂÄºÔºâ boolean offerLast(E e); //‰ªéÂ§¥ÈÉ®ÁßªÈô§ÔºàÊäõÂºÇÂ∏∏Ôºâ E removeFirst(); //‰ªéÂ∞æÈÉ®ÁßªÈô§ÔºàÊäõÂºÇÂ∏∏Ôºâ E removeLast(); //‰ªéÂ§¥ÈÉ®ÁßªÈô§ÔºàÁâπÊÆäÂÄºÔºâ E pollFirst(); //‰ªéÂ∞æÈÉ®ÁßªÈô§ÔºàÁâπÊÆäÂÄºÔºâ E pollLast(); //‰ªéÂ§¥ÈÉ®Êü•ËØ¢ÔºàÊäõÂºÇÂ∏∏Ôºâ E getFirst(); //‰ªéÂ∞æÈÉ®Êü•ËØ¢ÔºàÊäõÂºÇÂ∏∏Ôºâ E getLast(); //‰ªéÂ§¥ÈÉ®Êü•ËØ¢ÔºàÁâπÊÆäÂÄºÔºâ E peekFirst(); //‰ªéÂ∞æÈÉ®Êü•ËØ¢ÔºàÁâπÊÆäÂÄºÔºâ E peekLast(); //Ôºà‰ªéÂ§¥Âà∞Â∞æÈÅçÂéÜÂàóË°®Êó∂ÔºåÁßªÈô§ÂàóË°®‰∏≠Á¨¨‰∏ÄÊ¨°Âá∫Áé∞ÁöÑÊåáÂÆöÂÖÉÁ¥†Ôºâ boolean removeFirstOccurrence(Object o); //Ôºà‰ªéÂ§¥Âà∞Â∞æÈÅçÂéÜÂàóË°®Êó∂ÔºåÁßªÈô§ÂàóË°®‰∏≠ÊúÄÂêé‰∏ÄÊ¨°Âá∫Áé∞ÁöÑÊåáÂÆöÂÖÉÁ¥†Ôºâ boolean removeLastOccurrence(Object o); //ÈÉΩÊ≤°Âï•ÈöæÂ∫¶Ôºå‰∏çËß£Èáä‰∫Ü boolean add(E e); boolean offer(E e); E remove(); E poll(); E element(); E peek(); void push(E e); E pop(); boolean remove(Object o); boolean contains(Object o); public int size(); Iterator&lt;E&gt; iterator(); Iterator&lt;E&gt; descendingIterator();&#125; VectorÁÆÄËÄåË®Ä‰πãÔºåVector ‰∏é ArrayList ‰πãÈó¥ÁöÑÂÖ≥Á≥ªÔºåÂ∞±ÊòØ HashMap Âíå HashTable ‰πãÈó¥ÁöÑÂÖ≥Á≥ªÔºåVector ÁöÑÊñπÊ≥ïÂü∫Êú¨‰∏äÈÉΩÊòØ ArrayList ÁöÑÊñπÊ≥ï Âä†‰∏™ synchronized ÂÖ≥ÈîÆÂ≠óÁªÑÊàêÁöÑÔºåËøôËæπËÆ≤‰∏ãÂÆÉ‰∏é ArrayList ÁöÑ‰∏çÂêåÔºåÂ∞±ÂèØ‰ª•ÁªìÊùü‰∫ÜÔºÅ ‰∏çÂêåÁÇπÊúâÔºö Vector Á∫øÁ®ãÂÆâÂÖ®ÔºåÊòØÂêåÊ≠•ÁöÑÔºõArrayList ÈùûÁ∫øÁ®ãÂÆâÂÖ®ÔºåÈùûÂêåÊ≠•ÁöÑ Êâ©ÂÆπÁ≠ñÁï•‰∏çÂêåÔºåArrayList Êâ©ÂÆπÊòØÂèòÊàêÂéüÊù•ÁöÑ 1.5 ÂÄçÔºåËÄå Vector Âíå ArrayDeque Êâ©ÂÆπ‰∏ÄÊ†∑ÔºåÈÉΩÊòØÂèò‰∏∫ÂéüÊù•ÁöÑ‰∏§ÂÄç Vector ÂèØ‰ª•‰ΩøÁî® Enumeration Âíå Iterator ËøõË°åÂÖÉÁ¥†ÈÅçÂéÜÔºåArrayList Âè™Êèê‰æõ‰∫Ü Iterator ÁöÑÊñπÂºè Áî±‰∫é‰ΩøÁî®ÁöÑÁ∫øÁ®ãÂêåÊ≠•ÔºåVector ÁöÑÊïàÁéáÊØî ArrayList ‰ΩéÔºå‰ΩÜÊòØ jdk8 ‰πãÂêéÔºåÁî±‰∫éÂØπ synchronized ÁöÑÂÖ≥ÈîÆÂ≠óÁöÑ‰ºòÂåñÔºåÂºïÂÖ•‰∫Ü ÂÅèÂêëÈîÅ Á≠âËΩªÈáèÁ∫ßÈîÅ‰πãÂêéÔºå Vector Âíå ArrayList ÁöÑÊÄßËÉΩÂ∑ÆÂºÇÂ∑≤Áªè‰∏çÂ§ß‰∫Ü QueueÊ≤°Âï•Â•ΩÂàÜÊûêÁöÑÔºåÂÆûÁé∞Ëøô‰∏™Êé•Âè£ÁöÑÔºåÊé•Ëß¶ÁöÑÊØîËæÉÂ§öÁöÑ‰πüÂ∞±ÊòØ PriorityQueue„ÄÅArrayDeque„ÄÇ Áõ¥Êé•ÊîæÈìæÊé•Ôºö JavaÈõÜÂêàÔºà‰∏ÉÔºâ QueueËØ¶Ëß£ JavaÈõÜÂêàArrayDequeÁ±ªËß£ËØª Ê≠ªÁ£ï javaÈõÜÂêà‰πãArrayDequeÊ∫êÁ†ÅÂàÜÊûê Ê≥®ÊÑèÁÇπÂ∞±ÂÖ∂ÂÆûÁé∞ËÄåË®ÄÔºåArrayDequeÈááÁî®‰∫ÜÂæ™ÁéØÊï∞ÁªÑÁöÑÊñπÂºèÊù•ÂÆåÊàêÂèåÁ´ØÈòüÂàóÁöÑÂäüËÉΩ„ÄÇ Êó†ÈôêÁöÑÊâ©Â±ïÔºåËá™Âä®Êâ©Â±ïÈòüÂàóÂ§ßÂ∞èÁöÑ„ÄÇÔºàÂΩìÁÑ∂Âú®‰∏ç‰ºöÂÜÖÂ≠òÊ∫¢Âá∫ÁöÑÊÉÖÂÜµ‰∏ãÔºâ ÈùûÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå‰∏çÊîØÊåÅÂπ∂ÂèëËÆøÈóÆÂíå‰øÆÊîπ„ÄÇ ÊîØÊåÅfast-fail„ÄÇ ‰Ωú‰∏∫Ê†à‰ΩøÁî®ÁöÑËØùÊØîÊØîÊ†àË¶ÅÂø´„ÄÇ ÂΩìÈòüÂàó‰ΩøÁî®ÊØî LinkedList Ë¶ÅÂø´„ÄÇ nullÂÖÉÁ¥†Ë¢´Á¶ÅÊ≠¢‰ΩøÁî®ÔºåËøô‰∏™Ë∑ü ArrayList Âíå LinkedList ‰πü‰∏ç‰∏ÄÊ†∑ ÂàùÂßãÂÄºË∑ü ArrayList ‰∏ç‰∏ÄÊ†∑ÔºåËøôÈáåÁöÑÂàùÂßãÂÄºÊòØ 16ÔºåÊâ©ÂÆπ‰πüÊòØÁõ¥Êé•Êâ©ÂÆπ‰∏§ÂÄçÔºåË∑ü ArrayList ÁöÑ 1.5 ÂÄç‰∏ç‰∏ÄÊ†∑ÔºåÊâ©ÂÆπÁöÑÊó∂ÂÄôÂà©Áî®‰∫ÜÂÆπÈáèÊòØ2Ê¨°ÂπÇËøô‰∏™ÊÄßË¥®ÔºåË∑ü HashMap ‰∏ÄÊ†∑ÔºåÁõ¥Êé•‰∏é length Áõ∏‰∏éÂç≥ÂèØ„ÄÇ]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
        <category>ÈõÜÂêàÁ±ªÊ∫êÁ†ÅÂàÜÊûê</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>ArrayList</tag>
        <tag>Ê∫êÁ†ÅÂàÜÊûê</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JAVAÂØπÊï∞ÁªÑÁöÑÂõõÁßçÊã∑Ë¥ùÊñπÂºè]]></title>
    <url>%2F2019%2F10%2F07%2FJAVA%E5%AF%B9%E6%95%B0%E7%BB%84%E7%9A%84%E5%9B%9B%E7%A7%8D%E6%8B%B7%E8%B4%9D%E6%96%B9%E5%BC%8F.html</url>
    <content type="text"><![CDATA[Êï∞ÁªÑÊã∑Ë¥ùÁöÑÂõõÁßçÊñπÂºè for clone System.arraycopy arrays.copyof Êï∞ÁªÑÊã∑Ë¥ùÊñπÂºè‰πã‰∏Ä‚Äî‚Äîfor()Â∞±ÊòØforÂæ™ÁéØÂíØÔºÅÔºÅÔºÅ 12345/** 1 for Âæ™ÁéØÊã∑Ë¥ù*/int[] arr1 = new int[len];for (int i = 0; i &lt; len; i++) &#123; arr1[i] = arr0[i];&#125; ‰πüÊòØÊµÖÊã∑Ë¥ùÂíØÔºÅ Êï∞ÁªÑÊã∑Ë¥ùÊñπÂºè‰πã‰∫å‚Äî‚Äîclone()Ôºà‰∏ªË¶ÅÂèÇËÄÉÔºâÁªÜËØ¥ Java ÁöÑÊ∑±Êã∑Ë¥ùÂíåÊµÖÊã∑Ë¥ù Âú® Java ‰∏≠ÔºåÊâÄÊúâÁöÑ Class ÈÉΩÁªßÊâøËá™ Object ÔºåËÄåÂú® Object ‰∏äÔºåÂ≠òÂú®‰∏Ä‰∏™ clone() ÊñπÊ≥ïÔºåÂÆÉË¢´Â£∞Êòé‰∏∫‰∫Ü protected ÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•Âú®ÂÖ∂Â≠êÁ±ª‰∏≠Ôºå‰ΩøÁî®ÂÆÉ„ÄÇËÄåÊó†ËÆ∫ÊòØÊµÖÊã∑Ë¥ùËøòÊòØÊ∑±Êã∑Ë¥ùÔºåÈÉΩÈúÄË¶ÅÂÆûÁé∞ clone() ÊñπÊ≥ïÔºåÊù•ÂÆåÊàêÊìç‰Ωú„ÄÇ È¶ñÂÖàÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºåclone()ÊòØÊµÖÊã∑Ë¥ùÁöÑÊñπÂºèÔºÅÔºÅÔºÅÂÖ∂Ê¨°ÔºåÊàë‰ª¨Â∫îËØ•Â¶Ç‰ΩïÂÆûÁé∞Ê∑±Êã∑Ë¥ùÂë¢ÔºåÊúâ‰∏§ÁßçÊñπÊ≥ïÔºö Áî®Â§öÂ±ÇÊµÖÊã∑Ë¥ùËææÂà∞Ê∑±Êã∑Ë¥ùÁöÑÁõÆÁöÑÔºåË¶ÅÁü•ÈÅìÔºåÊµÖÊã∑Ë¥ùÂíåÊ∑±Êã∑Ë¥ùÁöÑÂå∫Âà´Â∞±ÊòØÂú®Â§ÑÁêÜÂØπË±°ÂºïÁî®Êó∂ÔºåÊµÖÊã∑Ë¥ù‰∏ç‰ºöÂàõÈÄ†Êñ∞ÁöÑÂØπË±°ÔºåËÄåÊ∑±Êã∑Ë¥ù‰ºöÔºå‰ΩÜÊòØÂ¶ÇÊûú‰∏Ä‰∏™ÂØπË±°ÁöÑÂ±ûÊÄßÂèòÊàê‰∫ÜÂü∫Êú¨Á±ªÂûãÊï∞ÊçÆÔºåÈÇ£‰πàÊµÖÊã∑Ë¥ùÂêåÊ†∑‰ºöÂàõÈÄ†Êñ∞ÁöÑÂØπË±°ÔºåÊâÄ‰ª•ËØ¥ÔºåÂ§öÂ±ÇÊµÖÊã∑Ë¥ùÂ∞±ËÉΩËææÂà∞Ê∑±Êã∑Ë¥ùÁöÑÁõÆÁöÑÔºå‰æãÂ¶ÇÔºöÂú®ÂØπfatherClassÂíåchildClassËøõË°å‰∏§Á∫ßÊµÖÊã∑Ë¥ù‰πãÂêéÔºåfatherBÂ∞±ÊúâÊµÖÊã∑Ë¥ùÂèòÊàê‰∫ÜÊ∑±Êã∑Ë¥ùÔºåÂõ†‰∏∫Ê≠§Êó∂Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÂíåChildÂØπË±°ÈÉΩÊòØÊåáÂêë‰∏çÂêåÁöÑÂú∞ÂùÄÁöÑÔºå‰πüÂ∞±ÊòØ‰∫åËÄÖÈÉΩÊòØ‰∏çÂêåÁöÑÂØπË±°ÔºåÊâÄ‰ª•Â∞±ÊòØËææÂà∞‰∫ÜÊ∑±Êã∑Ë¥ùÁöÑÁõÆÁöÑ‰∫Ü„ÄÇ Â∫èÂàóÂåñÔºàserializationÔºâËøô‰∏™ÂØπË±°ÔºåÂÜçÂèçÂ∫èÂàóÂåñÂõûÊù•ÔºåÂ∞±ÂèØ‰ª•ÂæóÂà∞Ëøô‰∏™Êñ∞ÁöÑÂØπË±°ÔºåÊó†ÈùûÂ∞±ÊòØÂ∫èÂàóÂåñÁöÑËßÑÂàôÈúÄË¶ÅÊàë‰ª¨Ëá™Â∑±Êù•ÂÜô„ÄÇÊÄªÁªì‰∏ãÊù•Â∞±ÊòØÂÅö‰∫Ü5‰ª∂‰∫ãÔºö Á°Æ‰øùÂØπË±°Âõæ‰∏≠ÁöÑÊâÄÊúâÁ±ªÈÉΩÊòØÂèØÂ∫èÂàóÂåñÁöÑ ÂàõÂª∫ËæìÂÖ•ËæìÂá∫ÊµÅ ‰ΩøÁî®Ëøô‰∏™ËæìÂÖ•ËæìÂá∫ÊµÅÊù•ÂàõÂª∫ÂØπË±°ËæìÂÖ•ÂíåÂØπË±°ËæìÂá∫ÊµÅ Â∞Ü‰Ω†ÊÉ≥Ë¶ÅÊã∑Ë¥ùÁöÑÂØπË±°‰º†ÈÄíÁªôÂØπË±°ËæìÂá∫ÊµÅ ‰ªéÂØπË±°ËæìÂÖ•ÊµÅ‰∏≠ËØªÂèñÊñ∞ÁöÑÂØπË±°Âπ∂‰∏îËΩ¨Êç¢Âõû‰Ω†ÊâÄÂèëÈÄÅÁöÑÂØπË±°ÁöÑÁ±ª ÊúÄÂêéÔºåÊé®‰∏Ä‰∏™Â∫èÂàóÂåñÂÆûÁé∞Ê∑±Êã∑Ë¥ùÁöÑ‰æãÂ≠êÔºöÂ∫èÂàóÂåñÁöÑÊñπÂºè‰ΩøÂæóÂÖ∂Âèò‰∏∫Ê∑±Êã∑Ë¥ù Êï∞ÁªÑÊã∑Ë¥ùÊñπÂºè‰πã‰∏â‚Äî‚ÄîSystem.arraycopy()nativeÊñπÊ≥ïÔºå‰æùÊóßÊòØ‰∏Ä‰∏™ÊµÖÊã∑Ë¥ù‚Äî‚Äî‚Äì&gt; ËØ¶ÁªÜ‰º†ÈÄÅÈó® Êï∞ÁªÑÊã∑Ë¥ùÊñπÂºè‰πãÂõõ‚Äî‚Äîarrays.copyof()1234567891011public static &lt;T,U&gt; T[] copyOf(U[] original, int newLength, Class&lt;? extends T[]&gt; newType) &#123; @SuppressWarnings("unchecked") //Ê†πÊçÆclassÁöÑÁ±ªÂûãÊòØÂê¶ÊòØ Object[] Êù•ÂÜ≥ÂÆöÊòØ new ËøòÊòØÂèçÂ∞ÑÂéªÊûÑÈÄ†‰∏Ä‰∏™Ê≥õÂûãÊï∞ÁªÑ T[] copy = ((Object)newType == (Object)Object[].class) ? (T[]) new Object[newLength] : (T[]) Array.newInstance(newType.getComponentType(), newLength); //‰ΩøÁî® native ÊñπÊ≥ïÊâπÈáèËµãÂÄºÂÖÉÁ¥†Ëá≥Êñ∞Êï∞ÁªÑ‰∏≠„ÄÇ System.arraycopy(original, 0, copy, 0, Math.min(original.length, newLength)); return copy;&#125; ‰Ω†ÁúãÁúãÔºåÂ∫ïÂ±Ç‰πüÂú®Áî®System.arraycopy()Ëøô‰∏™nativeÊñπÊ≥ïÔºåÊâÄ‰ª•Â∞±‰∏çÂÜçËµòËø∞‰∫ÜÔºåËøô‰∏™Âú®ArrayListÊ∫êÁ†ÅÂàÜÊûê‰∏≠‰πüÊúâÊ∂âÂèäÂì¶ÔºÅÔºÅÔºÅÔºÅ Ê∑±ÊµÖÊã∑Ë¥ùÁöÑÂå∫Âà´Ôºö https://blog.csdn.net/baiye_xing/article/details/71788741?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>Êï∞ÁªÑ</tag>
        <tag>Array</tag>
        <tag>JAVA</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[10.2----10.7Êî∂Ëé∑]]></title>
    <url>%2F2019%2F10%2F02%2F10-2-10-7.html</url>
    <content type="text"><![CDATA[10.2 Â≠¶‰π†ÂÆåajaxÂºÇÊ≠•Ë∞ÉÁî®Ôºõ ÂÆåÊàêÊ∑ªÂä†ÁÑ∂ÂêéÊï∞ÊçÆÂ∫ìÈáåÊúâÊï∞ÊçÆÂπ∂‰∏îËÉΩÊ≠£Â∏∏Ë∑≥ËΩ¨Ôºõ bÁ´ô‰∏äÂÜçÁúãÁúãspringboot+mybatisÁöÑÁªìÂêàÔºõ ÊÄªÁªìÂçöÂÆ¢ÔºåÂàÜÂà´ÊÄªÁªìÂàÜÈ°µÊéíÂ∫èËøòË¶ÅmongodbÂú®springboot‰∏≠ÁöÑÁõ∏ÂÖ≥Êìç‰ΩúÔºõ Êî∂Ëé∑ springbootÂêØÂä®ÂæàÊÖ¢ÁöÑÂéüÂõ†ÔºöÊú™‰øÆÊîπhostÁõÆÂΩïÁöÑÊñá‰ª∂ÔºåÂØºËá¥ÊØèÊ¨°ÂêØÂä®ÈÉΩÂæàÊÖ¢„ÄÇÊ≠•È™§ Âú®terminalÁªàÁ´ØËæìÂÖ•: 1$ hostname Â§çÂà∂‰∏ãÊù•ÔºåÁÑ∂Âêé‰øÆÊîπhostÊñá‰ª∂‰∏≠ÁöÑlocalhostÔºö 1$ sudo vim /etc/hosts ÁÑ∂ÂêéÂ∞ÜËá™Â∑±hostnameÊõøÊç¢Êéâlocalhost 123127.0.0.1&lt;‰∏§‰∏™tab&gt;localhost ÊõøÊç¢‰∏∫$hostname255.255.255.255&lt;‰∏§‰∏™tab&gt;broadcasthost::1&lt;‰∏§‰∏™tab&gt;localhost ÊõøÊç¢‰∏∫$hostname Âú®js‰º†ÂÄºÁªôcontrollerÊó∂Ôºå‰∏ÄÁõ¥‰∏çËÉΩÂ∞ÜjsonÊï∞ÊçÆ‰º†ËøáÂéªÔºåÂéüÂõ†ÊòØÊ≤°ÊúâÁªôdataÁöÑÂÄºÂä†‰∏äJSON.stringify()Â§ÑÁêÜÔºåÂÖ∑‰ΩìÈîôËØØÔºöspringboot Êé•Êî∂ÂèÇÊï∞ÔºåËß£ÊûêjsonÂá∫Áé∞ÈîôËØØÔºöwas expecting ‚Äònull‚Äô, ‚Äòtrue‚Äô, ‚Äòfalse‚Äô or NaNËß£ÂÜ≥ÊñπÊ°àÔºöËßÅ‚Äî-&gt;js‰∏écontroller‰πãÈó¥‰º†ÂÄºÂ∏∏ËßÅÈóÆÈ¢ò JQuery.ajaxajaxÂíåspringboot‰º†ÂÄº jquery‰∏≠Â≠óÁ¨¶‰∏≤ËΩ¨Êó•ÊúüÔºåÊó•ÊúüËΩ¨Â≠óÁ¨¶‰∏≤ MyBatis‰∏ªÈîÆÂõûÂ°´Á≠ñÁï• Ë°®‰∏≠ÈÉ®ÂàÜÂ±ûÊÄßËá™Âä®ÁîüÊàêÔºå‰∏çÈúÄË¶ÅÈ¢ùÂ§ñ‰º†ÂÖ•ÂèÇÊï∞ ÂÖàÊòØÂ∞ùËØï‰∫ÜÂú®bean‰∏≠Âä†@valueÔºåÂä†ËΩΩÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑÈöèÊú∫Êï∞Ôºå‰ΩÜÊòØÂèëÁé∞ÊâßË°å‰∏ÄÊ¨°ÔºåÈöèÊú∫Êï∞ÊòØÂîØ‰∏ÄÁöÑÔºåËøôÊ†∑Â∞±‰∏çËÉΩÂÅöÂà∞ÊèíÂÖ•‰∏ÄÊù°Êï∞ÊçÆÔºåÈöèÊú∫Êï∞Â∞±ÂèòÂåñÔºõ ÂêéÈù¢ÂèëÁé∞ÂèØ‰ª•Âú®mybatisÁõ¥Êé•ÈÖçÁΩÆÁªìÊûúÈõÜÔºåÂ•ΩÂÉè‰πü‰∏çË°å‚Ä¶Âõ†‰∏∫Â¶ÇÊûú‰Ω†Áî®ÁªìÊûúÈõÜÂ∞ÜidËΩ¨Êç¢‰∏∫taskId,ÈÇ£ÂéüÊú¨bean‰∏≠ÁöÑidÂ±ûÊÄßÂ∞±‰ºöÂèñ‰∏çÂà∞ÂÄº‚Ä¶ jQueryËé∑Âèñhtml‰∏≠ÁöÑÂÄºËé∑Âèñhtml‰∏≠ÁöÑÂÄº 10.3Êî∂Ëé∑‰ΩøÁî®ÊúÄÂ§ßÁöÑidÔºÅÔºÅÔºÅmysqlÊèíÂÖ•Êï∞ÊçÆÂêéËøîÂõûËá™Â¢ûIDÁöÑÊñπÊ≥ïÔºàAUTO_INCREMENTÔºâ 10.4Êî∂Ëé∑ Â§çÊùÇjsonËΩ¨ÊàêÂ§öÂ±Çmap 12345678910111213141516171819public Map&lt;String, Object&gt; parseJSON2Map(@RequestBody String jsonStr)&#123; Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;(); JSONObject json = JSONObject.parseObject(jsonStr); for(Object k : json.keySet())&#123; Object v = json.get(k); if(v instanceof JSONArray)&#123; List&lt;Map&lt;String, Object&gt;&gt; list = new ArrayList&lt;Map&lt;String,Object&gt;&gt;(); Iterator it = ((JSONArray)v).iterator(); while(it.hasNext())&#123; Object json2 = it.next(); list.add(parseJSON2Map(json2.toString())); &#125; map.put(k.toString(), list); &#125; else &#123; map.put(k.toString(), v); &#125; &#125; return map; &#125; macÂº∫Âà∂Âà∑Êñ∞ÁºìÂ≠òÔºöcommand + shift + RÊôÆÈÄöÂà∑Êñ∞Ôºöcommand + R Springboot‰ΩøÁî®Â§öÁ∫øÁ®ã ÊúÄËøëÈÅáÂà∞‰∏Ä‰∏™ÈúÄÊ±ÇÔºåÂ∞±ÊòØÂΩìÊúçÂä°Âô®Êé•Âà∞ËØ∑Ê±ÇÂπ∂‰∏çÈúÄË¶Å‰ªªÂä°ÊâßË°åÂÆåÊàêÊâçËøîÂõûÁªìÊûúÔºåÂèØ‰ª•Á´ãÂç≥ËøîÂõûÁªìÊûúÔºåËÆ©‰ªªÂä°ÂºÇÊ≠•ÁöÑÂéªÊâßË°å„ÄÇÂºÄÂßãËÄÉËôëÊòØÁõ¥Êé•ÂêØ‰∏Ä‰∏™Êñ∞ÁöÑÁ∫øÁ®ãÂéªÊâßË°å‰ªªÂä°ÊàñËÄÖÊää‰ªªÂä°Êèê‰∫§Âà∞‰∏Ä‰∏™Á∫øÁ®ãÊ±†ÂéªÊâßË°åÔºåËøô‰∏§ÁßçÊñπÊ≥ïÈÉΩÊòØÂèØ‰ª•ÁöÑ„ÄÇ‰ΩÜÊòØ Spring Ëøô‰πàÂº∫Â§ßÔºåËÇØÂÆöÊúâ‰ªÄ‰πàÊõ¥ÁÆÄÂçïÁöÑÊñπÊ≥ïÔºåÂ∞± google ‰∫Ü‰∏Ä‰∏ãÔºåËøòÁúüÊúâÂë¢„ÄÇÂ∞±ÊòØ‰ΩøÁî® @EnableAsync Âíå @Async Ëøô‰∏§‰∏™Ê≥®Ëß£Â∞± ok ‰∫Ü„ÄÇ‰º†ÈÄÅÈó®ÔºöSpringBootÈùûÂÆòÊñπÊïôÁ®ã | Á¨¨‰∫åÂçÅ‰∏âÁØáÔºö ÂºÇÊ≠•ÊñπÊ≥ï È¶ñÂÖàÂ£∞Êòé‰∏Ä‰∏ãËá™Â∑±Áî®‰∫ÜÊØîËæÉÈïøÁöÑÊó∂Èó¥ÊâçÂºÑÂá∫Êù•ÁöÑÂéüÂõ†ÊòØÔºåËá™Â∑±ÊääÂºÇÊ≠•ÊñπÊ≥ïÂÜôÂà∞‰∫ÜControllerÂ±ÇÔºåÂØºËá¥Âú®controllerÁöÑÂè¶‰∏Ä‰∏™ÊñπÊ≥ïË∞ÉÁî®Êó∂Êó†Ê≥ïÂºÄÂêØÂºÇÊ≠•ÂäüËÉΩÔºåÊâÄ‰ª•ÂØπÊ≠§ÊàëÊúâ‰∏âÁÇπËßÅËß£Ôºö Âú®@SpringBootApplicationÂêØÂä®Á±ª Ê∑ªÂä†Ê≥®Ëß£@EnableAsync ÂºÇÊ≠•ÊñπÊ≥ï‰ΩøÁî®Ê≥®Ëß£@Async ,ËøîÂõûÂÄº‰∏∫voidÊàñËÄÖFuture ÂàáËÆ∞‰∏ÄÁÇπÔºåÂºÇÊ≠•ÊñπÊ≥ïÂíåË∞ÉÁî®ÊñπÊ≥ï‰∏ÄÂÆöË¶Å ÂÜôÂú®‰∏çÂêåÁöÑÁ±ª‰∏≠,Â¶ÇÊûúÂÜôÂú®‰∏Ä‰∏™Á±ª‰∏≠ÔºåÊòØÊ≤°ÊúâÊïàÊûúÁöÑÔºåËá≥‰∫é‰∏∫‰ªÄ‰πà‚Äî-&gt;Âõ†‰∏∫SpringÂÉè@Transaction @AsyncÁ≠âËøô‰∫õÈÉΩÊòØ‰ΩøÁî®‰∫ÜÂä®ÊÄÅ‰ª£ÁêÜÔºåSpringÂÆπÂô®Âú®ÂàùÂßãÂåñÁöÑÊó∂ÂÄôÂ∞±‰ºöÂ∞ÜÂê´ÊúâAOPÊ≥®Ëß£ÁöÑÁ±ªÂØπË±°ÊõøÊç¢‰∏∫‰ª£ÁêÜÂØπË±°ÔºåÂÜçÁî±ProxyÂØπË±°ÂéªË∞ÉÁî®Ë¢´Â¢ûÂº∫ÊñπÊ≥ïÔºåÈáçÁÇπÊù•‰∫ÜÔºöÊñπÊ≥ïÈáåÊÉ≥Áî®Â¢ûÂº∫ÊñπÊ≥ï(Á¨¨‰∏âÁÇπ)ÂàôÈúÄË¶ÅÂæóÂà∞ÂΩìÂâçÁöÑProxyÂØπË±°Ôºå‰ΩÜÂ¶ÇÊûúÊòØÂêå‰∏Ä‰∏™Á±ªÁöÑËØùÔºåÊòØ‰∏ç‰ºöÁªèËøáspringÂÆπÂô®ÁöÑÔºåÊ≠§Êó∂ÊòØÁúüÊ≠£ÁöÑÂØπË±°Êú¨Ë∫´ÂéªË∞ÉÁî®ÊñπÊ≥ïÔºåÂπ∂‰∏çÊòØ‰ª£ÁêÜÂØπË±°ÔºåËøôÊ†∑ÁöÑËØùË¢´Â¢ûÂº∫ÊñπÊ≥ïÂ∞±Â§±Êïà‰∫ÜÔºåËØ¶ÊÉÖËØ∑Áúã -&gt;SpringÁöÑ AopContext.currentProxy()ÊñπÊ≥ï Ëß£ÂÜ≥ÊñπÊ°à ÊàëÈááÁî®ÁöÑÊñπÊ°àÊòØÔºåÂ∞ÜÂºÇÊ≠•ÊñπÊ≥ïÂÜôÂÖ•serviceÂ±ÇÔºåÁÑ∂ÂêéÂÜçcontrollerÂ±Ç‰∏≠Ë∞ÉÁî®ÔºåËøôÊ†∑Â∞±ÁªèËøá‰∫ÜspringÂÆπÂô®ÔºåË∞ÉÁî®ÊñπÊ≥ïÊó∂Â∞±ÊòØÈááÁî®ÁöÑ‰ª£ÁêÜÂØπË±°„ÄÇ Á¨¨‰∫åÁßçÊñπÊ≥ïÔºåÊàëÊ≤°ÊúâÊàêÂäüÔºÅÔºÅÔºÅÔºÅÁúüÁöÑÊòØÊ∞îÁöÑ‰∏çË°åÔºåÂõ†‰∏∫ÊàëÁúãÁΩë‰∏äÂçöÂÆ¢Âà´‰∫∫ÈÉΩÊàêÂäü‰∫Ü‚Ä¶‚Ä¶Â∞±ÊòØÁî®AopContext.currentProxy()Ëøô‰∏™ÊñπÊ≥ï,Ê≠•È™§‰∏∫Ôºö Ê∑ªÂä†‰æùËµñÔºö 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;&lt;/dependency&gt; Âú®ÂêØÂä®Á±ª‰∏≠Ê∑ªÂä†Ê≥®Èáä 1@EnableAspectJAutoProxy(exposeProxy=true,proxyTargetClass=true) ÁÑ∂ÂêéÂú®Ë∞ÉÁî®ÊñπÊ≥ïÂ§ÑÂÜôÔºö 1((TaskController)AopContext.currentProxy()).testAsy("www.baidu.com"); ÊåâÁêÜËØ¥Â∫îËØ•ÂèØ‰ª•‰∫ÜÁöÑÔºåÁªìÊûúÂêßÔºåÊàë‰∏ÄË∑ëÁ®ãÂ∫èÂ∞±Êä•ÈîôÔºåËØ¥ÊàëÁöÑÂì¶‰ª£ÁêÜÊÄé‰πàÊ≤°Êö¥Èú≤ÂïäÔºåÊàëÁúüÊòØÂçßÊßΩ‰∫ÜÔºåÈÇ£‰ªñÂ¶à‰∏çÊòØÂ∑≤ÁªèÈÖçÁΩÆ‰∫ÜÊö¥Èú≤‰∫ÜÂòõÔºÅÔºÅÔºÅÊàëÊúç‰∫ÜÔºÅÔºÅÔºÅÁÆó‰∫ÜÔºåÊáíÂæóÊê≠ÁêÜ‰∫Ü‚Ä¶Áî©‰∏™Ë∑üËøô‰∏™ÂéüÁêÜ‰∏ÄÊ†∑ÁöÑÈìæÊé•ÔºåÂ≠¶‰π†‰∏Ä‰∏ãÔºöJDKÂä®ÊÄÅ‰ª£ÁêÜÁªôSpring‰∫ãÂä°Âüã‰∏ãÁöÑÂùëÔºÅÂÜçÁî©‰∏Ä‰∏™ÈìæÊé•Ôºå‰∏âÁßçÊñπÊ≥ïÈÖçÁΩÆËøô‰∏™exposeProxy(ÁÑ∂ËÄåÊàë‰∏Ä‰∏™ÈÉΩÊ≤°ÊàêÂäü‚Ä¶)‚Äî-&gt;springboot‰∏≠Â¶Ç‰ΩïÈÖçÁΩÆaopÂä®ÊÄÅ‰ª£ÁêÜÊ®°Âºè (ÂéüÂàõ)]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>springboot</tag>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2019-9-26]]></title>
    <url>%2F2019%2F09%2F26%2F2019-9-26.html</url>
    <content type="text"><![CDATA[‰ªäÊó•‰ªªÂä° springboot + mongodb,ÂÆåÊàêmongoÂú®springboot‰∏≠ÁöÑÊê≠Âª∫ÔºåÂÜô‰∏Ä‰∏™Â∞èdemo ÊúÄ‰∏ªË¶ÅÁöÑÊòØÊäärepositoryËøô‰∏ÄÂ±ÇÂÜôÂÆåÔºå‰∏öÂä°ÈÄªËæëÂèØ‰ª•ÊîæÂà∞ÊòéÂ§©Êù•ÂÜô ÂÆåÊàêËøáÁ®ãmongodbÁöÑÂÆâË£ÖmacOS‰∏ãmongodbÁöÑÂÆâË£Ö‰∏éÂêØÂä® Springboot‰∏ãÁöÑÁõ∏ÂÖ≥Ê≥®Ëß£ @DataDataÊ≥®Ëß£‰ΩøÁî® @DocumentÊ†áÊ≥®Âú®ÂÆû‰ΩìÁ±ª‰∏äÔºåÁ±ª‰ºº‰∫éhibernateÁöÑentityÊ≥®Ëß£ÔºåÊ†áÊòéÁî±mongoÊù•Áª¥Êä§ËØ•Ë°®Ôºåcollection‰ª£Ë°®Ë°®ÁöÑÂêçÁß∞„ÄÇSpringBoot‰∏≠MongoDB‰∏≠ÁöÑÁõ∏ÂÖ≥Ê≥®Ëß£ @EntityÁ≠â‰∏ÄÁ≥ªÂàóSpring Data JPAÊ≥®Ëß£ @DynamicUpdate„ÄÅ@DynamicInsert ÊòØhibernateÈáåÈù¢ÁöÑÊ≥®Ëß£ÔºåËøô‰∏§‰∏™Ê≥®Ëß£Âä†‰∏ä‰πãÂêéÂ∞±‰∏ç‰ºö‰∏∫Â≠óÊÆµÂÄº‰∏çÂèòÁöÑÂ≠óÊÆµÁîüÊàêsqlËØ≠Âè•ÔºåËøôÊ†∑sqlÁöÑÈïøÂ∫¶Â∞±ÂáèÂ∞ë‰∫ÜÊèêÈ´ò‰∫Ü‰º†ËæìÊïàÁéáÂíåÊâßË°åÊïàÁéáÔºåÂú®ÊèíÂÖ•Âíå‰øÆÊîπÊï∞ÊçÆÁöÑÊó∂ÂÄô,ËØ≠Âè•‰∏≠Âè™ÂåÖÊã¨Ë¶ÅÊèíÂÖ•ÊàñËÄÖ‰øÆÊîπÁöÑÂ≠óÊÆµ„ÄÇ @Entity Ê†áËØÜËøô‰∏™ÂÆû‰ΩìÁ±ªÊòØ‰∏Ä‰∏™JPAÂÆû‰ΩìÔºåÂëäËØâJPAÂú®Á®ãÂ∫èËøêË°åÁöÑÊó∂ÂÄôËÆ∞ÂæóÁîüÊàêËøô‰∏™ÂÆû‰ΩìÁ±ªÊâÄÂØπÂ∫îÁöÑË°®~ÔºÅ GeneratedValue„ÄÅGenericGeneratorÊòØÁî®‰∫é‰∏ªÈîÆÁîüÊàêÁ≠ñÁï•ÁöÑÔºåÂÖ∑‰ΩìËßÅJPAÊ≥®Ëß£‰∏ªÈîÆÁîüÊàêÁ≠ñÁï•-UUID @ColumnÔºàname = ‚ÄúËá™ÂÆö‰πâÂ≠óÊÆµÂêç‚ÄùÔºålength = ‚ÄúËá™ÂÆö‰πâÈïøÂ∫¶‚ÄùÔºånullable = ‚ÄúÊòØÂê¶ÂèØ‰ª•Á©∫‚ÄùÔºåunique = ‚ÄúÊòØÂê¶ÂîØ‰∏Ä‚ÄùÔºåcolumnDefinition = ‚ÄúËá™ÂÆö‰πâËØ•Â≠óÊÆµÁöÑÁ±ªÂûãÂíåÈïøÂ∫¶‚ÄùÔºâ„ÄÇË°®Á§∫ÂØπËøô‰∏™ÂèòÈáèÊâÄÂØπÂ∫îÁöÑÂ≠óÊÆµÂêçËøõË°å‰∏Ä‰∫õ‰∏™ÊÄßÂåñÁöÑËÆæÁΩÆÔºå‰æãÂ¶ÇÂ≠óÊÆµÁöÑÂêçÂ≠óÔºåÂ≠óÊÆµÁöÑÈïøÂ∫¶ÔºåÊòØÂê¶‰∏∫Á©∫ÂíåÊòØÂê¶ÂîØ‰∏ÄÁ≠âÁ≠âËÆæÁΩÆ„ÄÇ Ââ©‰ΩôÊ≥®ÈáäÔºöSpring Data JPA‰∏≠Â∏∏Áî®ÁöÑÊ≥®Ëß£ËØ¶Ëß£ @ControllerÔºàSpring Boot‰πã Controller Êé•Êî∂ÂèÇÊï∞ÂíåËøîÂõûÊï∞ÊçÆÊÄªÁªì(ÂåÖÊã¨‰∏ä‰º†„ÄÅ‰∏ãËΩΩÊñá‰ª∂)ÔºâControllerÂ±ÇÁöÑÊ≥®Ëß£Â§ßÊ¶ÇÊúâ‰ª•‰∏ã‰∏Ä‰∫õÔºöÔºà‰∏ªË¶ÅÂèÇËÄÉÔºöControllerÂ±Ç‰∏ªË¶ÅÊ≥®Ëß£Ôºâ @Controller:Ê†áÊ≥® Controller Á±ªÔºåÂ§ÑÁêÜ http ËØ∑Ê±Ç @RestController:Ê†áÊ≥® Controller Á±ªÔºåspring 4 Êñ∞Âä†Ê≥®Ëß£ÔºåÁõ∏ÂΩì‰∫é@Controller + @ResponseBody Ôºå‰∏ªË¶ÅÊòØ‰∏∫‰∫Ü‰Ωø http ËØ∑Ê±ÇËøîÂõûÊï∞ÊçÆÊ†ºÂºè‰∏∫ json Ê†ºÂºèÔºåÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÈÉΩÊòØ‰ΩøÁî®Ëøô‰∏™Ê≥®Ëß£ @RequestMapping:ÈÖçÁΩÆ url Êò†Â∞ÑÔºåÂèØ‰ª•‰ΩúÁî®‰∫éÁ±ª‰∏äÔºå‰πüÂèØ‰ª•Âú®ÊñπÊ≥ï‰∏ä 123456789@RestController//Â§ÑÁêÜhttpËØ∑Ê±ÇÔºåËøîÂõûjsonÊ†ºÂºè@RequestMapping(value = "/users")//ÈÖçÁΩÆurlÔºåËÆ©ËØ•Á±ª‰∏ãÁöÑÊâÄÊúâÊé•Âè£urlÈÉΩÊò†Â∞ÑÂú®/users‰∏ãpublic class UserController &#123; @RequestMapping(value = "/myInfo", method = RequestMethod.GET) public String say() &#123; return "ÊàëÊòØÂº†Â∞ëÊûó"; &#125;&#125; @RequestMapping ÂÆö‰πâÂú®Á±ª‰∏äÔºåÊåáÂÆöËØ•Á±ª‰∏ãÁöÑÊâÄÊúâÊé•Âè£ url Êò†Â∞ÑÂú® /users ‰∏ãÔºåÂÆö‰πâÂú®ÊñπÊ≥ï‰∏äÔºåÊåáÂÆö ËØ∑Ê±ÇÊñπÊ≥ïÔºåÂèØ‰ª•ÊåáÂÆöGETÔºåPOSTÔºåDELETEÔºåPUTÂõõÁßçÊ†áÂáÜÁöÑ RestfulapiËØ∑Ê±ÇÊñπÊ≥ï„ÄÇÈÇ£‰πàÊ≠§Êó∂ÁöÑÊé•Âè£ url ‰∏∫Ôºöhttp://127.0.0.1:8080/users/myInfo ËØ∑Ê±ÇÊñπÊ≥ïÔºöGETÔºåÁ±ª‰∏ä‰πüÂèØ‰ª•‰∏çÁî®ÈÖçÁΩÆ url Êò†Â∞ÑÁöÑ„ÄÇ @PathVariableËé∑Âèñ url ‰∏≠ÁöÑÊï∞ÊçÆÔºåÊàë‰ª¨Âú® url ‰∏≠ÊãºÊé•‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ {username}ÔºåÁ±ª‰ºº‰∫éÂú∞ÂùÄÂç†‰ΩçÁ¨¶ÔºåÁî±Áî®Êà∑ËØ∑Ê±ÇÊó∂Ê∑ªÂä†ÔºåËØ∑Ê±ÇËé∑Âèñ„ÄÇÊ≥®ÊÑèÊ≥®Ëß£‰∏≠ÁöÑÂèÇÊï∞ÂøÖÈ°ª‰∏éÂç†‰ΩçÁ¨¶ÂèÇÊï∞‰∏ÄËá¥ 12345678@RestController//Â§ÑÁêÜhttpËØ∑Ê±ÇÔºåËøîÂõûjsonÊ†ºÂºè@RequestMapping(value = "/users")//ÈÖçÁΩÆurlÔºåËÆ©ËØ•Á±ª‰∏ãÁöÑÊâÄÊúâÊé•Âè£urlÈÉΩÊò†Â∞ÑÂú®/users‰∏ãpublic class UserController &#123; @RequestMapping(value = "/myInfo/&#123;username&#125;", method = RequestMethod.GET) public String say(@PathVariable("username") String username) &#123; return username; &#125;&#125; @RequestParamËé∑ÂèñËØ∑Ê±ÇÂèÇÊï∞ÂÄºÔºåÊñπÊ≥ïÈöèÊÑèÂèØ‰ª•ËÆæÁΩÆÔºå‰ΩÜÊòØÈÄöÂ∏∏ÈúÄÊ±ÇÈÉΩÊòØ‰ΩøÁî® POST ËØ∑Ê±ÇÂ§ÑÁêÜË°®ÂçïÊèê‰∫§„ÄÇ 12345678@RestController//Â§ÑÁêÜhttpËØ∑Ê±ÇÔºåËøîÂõûjsonÊ†ºÂºè@RequestMapping(value = "/users")//ÈÖçÁΩÆurlÔºåËÆ©ËØ•Á±ª‰∏ãÁöÑÊâÄÊúâÊé•Âè£urlÈÉΩÊò†Â∞ÑÂú®/users‰∏ãpublic class UserController &#123; @RequestMapping(value = "/myInfo", method = RequestMethod.POST) public String say(@RequestParam(value = "username") String username, @RequestParam(value = "password") String password) &#123; return username + password; &#125;&#125; ÂÅáÂ¶ÇÁî®Êà∑ËæìÂÖ•ÁöÑÁöÑuriÊòØ:http://127.0.0.1:8080/users/myInfo?username=yangweijie&amp;password=123456ÔºåÈÇ£‰πàÊúÄÂêéËøîÂõûÁöÑÊòØyangweijie123456ÔºåÂ¶ÇÊûúÂèÇÊï∞‰∏çÂ∏¶ÂÄº‰∏îÊ∑ªÂä†Â±ûÊÄßrequired=trueÔºåÂàô‰ºöÊä•ÈîôÔºåÊ≠§Êó∂Â∞±Âª∫ËÆÆÊ∑ªÂä†‰∏Ä‰∏™defaultValueÂ±ûÊÄßÔºö 12345678910@RestController//Â§ÑÁêÜhttpËØ∑Ê±ÇÔºåËøîÂõûjsonÊ†ºÂºè@RequestMapping(value = "/users")//ÈÖçÁΩÆurlÔºåËÆ©ËØ•Á±ª‰∏ãÁöÑÊâÄÊúâÊé•Âè£urlÈÉΩÊò†Â∞ÑÂú®/users‰∏ãpublic class UserController &#123; @RequestMapping(value = "/myInfo", method = RequestMethod.POST) public String say(@RequestParam(value = "username",required = false,defaultValue = "Âº†Â∞ëÊûó") String username, @RequestParam(value = "password",required = false,defaultValue = "123456") String password) &#123; return username + password; &#125;&#125; @GetMapping„ÄÅ@PostMapping„ÄÅ@DeleteMapping„ÄÅ@PutMappingÁ≠âÊòØRequestMappingÁöÑÁªÑÂêàÊ≥®Ëß£ÔºåÊ†πÊçÆmethodÁöÑ‰∏çÂêå„ÄÇ @RequestHeaderÂèØ‰ª•ÊääRequestËØ∑Ê±ÇheaderÈÉ®ÂàÜÁöÑÂÄºÁªëÂÆöÂà∞ÊñπÊ≥ïÁöÑÂèÇÊï∞‰∏ä„ÄÇ @CookieValueÂèØ‰ª•ÊääRequest header‰∏≠ÂÖ≥‰∫écookieÁöÑÂÄºÁªëÂÆöÂà∞ÊñπÊ≥ïÁöÑÂèÇÊï∞‰∏ä„ÄÇ RequestBodyËØ•Ê≥®Ëß£Â∏∏Áî®Êù•Â§ÑÁêÜContent-Type: ‰∏çÊòØapplication/x-www-form-urlencodedÁºñÁ†ÅÁöÑÂÜÖÂÆπÔºå‰æãÂ¶Çapplication/json, application/xmlÁ≠âÔºõÂÆÉÊòØÈÄöËøá‰ΩøÁî®HandlerAdapter ÈÖçÁΩÆÁöÑHttpMessageConvertersÊù•Ëß£Êûêpost data bodyÔºåÁÑ∂ÂêéÁªëÂÆöÂà∞Áõ∏Â∫îÁöÑbean‰∏äÁöÑ„ÄÇÂõ†‰∏∫ÈÖçÁΩÆÊúâFormHttpMessageConverterÔºåÊâÄ‰ª•‰πüÂèØ‰ª•Áî®Êù•Â§ÑÁêÜ application/x-www-form-urlencodedÁöÑÂÜÖÂÆπÔºåÂ§ÑÁêÜÂÆåÁöÑÁªìÊûúÊîæÂú®‰∏Ä‰∏™MultiValueMap&lt;String, String&gt;ÈáåÔºåËøôÁßçÊÉÖÂÜµÂú®Êüê‰∫õÁâπÊÆäÈúÄÊ±Ç‰∏ã‰ΩøÁî®ÔºåËØ¶ÊÉÖÊü•ÁúãFormHttpMessageConverter api; ModelAttribute(ÂèÇËÄÉÔºöSpring MVC @ModelAttributeËØ¶Ëß£)@ModelAttributeÊúâ‰∏âÁßçÁî®Ê≥ïÔºö ÂèØ‰ª•Ê†áÊ≥®Âú®ÊñπÊ≥ï‰∏äÔºõ ÂèØ‰ª•Ê†áÊ≥®Âú®ÊñπÊ≥ï‰∏≠ÁöÑÂèÇÊï∞‰∏äÔºõ ËøòÂèØ‰ª•Âíå@RequestMapping‰∏ÄËµ∑Ê†áÊ≥®Âú®ÊñπÊ≥ï‰∏äÔºõÁõÆÁöÑÈÉΩÊòØÂú®RequestMapping‰πãÂâçËøõË°åmodelÂ±ûÊÄßÁöÑÊ≥®ÂÖ•ÔºåÂØπRestControllerÂ•ΩÂÉèÊ≤°Áî®ÔºåÂõ†‰∏∫ÊòØËøîÂõûjsonÊï∞ÊçÆÔºåÂπ∂‰∏çËÉΩÂ∞ÜmodelÈáåÈù¢ÁöÑÊï∞ÊçÆÁõ¥Êé•ËøîÂõûÁªôÈ°µÈù¢„ÄÇÂ¶ÇÊûúÊ≤°Áî®@RestControllerÔºåÂàô@ModelAttributeÊñπÊ≥ïÈÄöÂ∏∏Ë¢´Áî®Êù•Â°´ÂÖÖ‰∏Ä‰∫õÂÖ¨ÂÖ±ÈúÄË¶ÅÁöÑÂ±ûÊÄßÊàñÊï∞ÊçÆÔºåÊØîÂ¶Ç‰∏Ä‰∏™‰∏ãÊãâÂàóË°®ÊâÄÈ¢ÑËÆæÁöÑÂá†ÁßçÁä∂ÊÄÅÔºåÊàñËÄÖÂÆ†Áâ©ÁöÑÂá†ÁßçÁ±ªÂûãÔºåÊàñËÄÖÂéªÂèñÂæó‰∏Ä‰∏™HTMLË°®ÂçïÊ∏≤ÊüìÊâÄÈúÄË¶ÅÁöÑÂëΩ‰ª§ÂØπË±°ÔºåÊØîÂ¶ÇAccountÁ≠â„ÄÇ@ModelAttributeÊ†áÊ≥®ÊñπÊ≥ïÊúâ‰∏§ÁßçÈ£éÊ†ºÔºö 12345678910111213141516// Add one attribute// The return value of the method is added to the model under the name "account"// You can customize the name via @ModelAttribute("myAccount")@ModelAttributepublic Account addAccount(@RequestParam String number) &#123; return accountManager.findAccount(number);&#125;// Add multiple attributes@ModelAttributepublic void populateModel(@RequestParam String number, Model model) &#123; model.addAttribute(accountManager.findAccount(number)); // add more ... &#125; Âú®Á¨¨‰∏ÄÁßçÂÜôÊ≥ï‰∏≠ÔºåÊñπÊ≥ïÈÄöËøáËøîÂõûÂÄºÁöÑÊñπÂºèÈªòËÆ§Âú∞Â∞ÜÊ∑ªÂä†‰∏Ä‰∏™Â±ûÊÄßÔºåÂú®Á¨¨‰∫åÁßçÂÜôÊ≥ï‰∏≠ÔºåÊñπÊ≥ïÊé•Êî∂‰∏Ä‰∏™ModelÂØπË±°ÔºåÁÑ∂ÂêéÂèØ‰ª•ÂêëÂÖ∂‰∏≠Ê∑ªÂä†‰ªªÊÑèÊï∞ÈáèÁöÑÂ±ûÊÄßÔºåÂèØ‰ª•Âú®Ê†πÊçÆÈúÄË¶ÅÔºåÂú®‰∏§ÁßçÈ£éÊ†º‰∏≠ÈÄâÊã©ÂêàÈÄÇÁöÑ‰∏ÄÁßç„ÄÇmodelÈáåÁöÑÊï∞ÊçÆ‰ºöË¢´ÊîæÂÖ•Âà∞request‰∏≠,È°µÈù¢ÈÄöËøárequestÂüüÂèØ‰ª•Ëé∑ÂèñÂà∞„ÄÇ @SessionAttributesÂíå@SessionAttribute@SessionAttributesÊ≥®Ëß£ÁöÑ‰ΩøÁî®Â∞±ÊòØÂ∞ÜÂ±ûÊÄßÊîæÂÖ•sessionÂüüÂÜÖÔºåÁÑ∂ÂêéÂèØ‰ª•Âú®sessionÂüüÂÜÖËøõË°åÁõ∏ÂÖ≥ÁöÑÊìç‰Ωú„ÄÇ SpringMVC‰∏≠@ModelAttributeÂíå@SessionAttributesÊ≥®Ëß£ÁöÑ‰ΩøÁî® @idÔºàÂ•ΩÂÉèÂ¶ÇÊûúË°®‰∏≠Êï∞ÊçÆÂ≠óÊÆµÊòØidÔºå‰ºöÊØîËæÉÁâπÊÆä‰∏ÄÁÇπÔºåspringboot‰ºöËá™Âä®Ê£ÄÁ¥¢‰º†ËøáÊù•ÁöÑÂèÇÊï∞ÊòØÂê¶ÊúâidÔºåÂ¶ÇÊûúÊ≤°Êúâ‰ºöËá™Âä®Ê∑ªÂä†idÔºâ RepositoryÁõ∏ÂÖ≥Ê≥®Ëß£ SpringbootÁöÑÂàÜÈ°µÂíåÊéíÂ∫èÊìç‰ΩúÁî±‰∫éÈááÁî®ÁöÑÊòØMongoÊï∞ÊçÆÂ∫ìÔºåÊâÄ‰ª•ÂÖàÂêé‰ΩøÁî®‰∫ÜMongoTemplate()ÂíåMongoRepository(),MongoTemplateÂú®ÂÜôÊ≥ï‰∏äÊØîMongoRepository Êõ¥Â§çÊùÇ‰∏Ä‰∫õÔºå‰ΩÜÊòØÂ∏¶Êù•Êõ¥Â§öÁöÑÁÅµÊ¥ªÊÄß„ÄÇÂØπ‰∫éÂ§çÊùÇÁöÑÊü•ËØ¢Êìç‰ΩúÔºåÊàë‰ª¨‰∏ÄËà¨‰ΩøÁî®MongoTemplateÔºåÂØπ‰∫é‰∏Ä‰∫õÁÆÄÂçïÁöÑÊü•ËØ¢Êàë‰ª¨‰ºö‰ΩøÁî®MongoRepository „ÄÇÂèØ‰ª•Ëøô‰πàÁêÜËß£ÔºåMongoRepository Âè™ÊòØ‰Ωú‰∏∫‰∏ÄÁßçÂØπ‰∫éÁÆÄÂçïÊü•ËØ¢ÁöÑÁÆÄ‰æøÊìç‰ΩúÔºåËÄåMongoTemplateÊâçÊòØÊàë‰ª¨Âú®ÂÅö‰∏Ä‰∫õÂ§çÊùÇÊü•ËØ¢Êó∂ÁöÑÈ¶ñÈÄâ„ÄÇ MongoRepositoryËá™Â∑±ËøòÂÄüÁî®‰∫Ü‰∏ã@QueryÂíå@ModifyingÊ≥®Ëß£ÔºåÊñπ‰æøËá™Â∑±ÊëÜËÑ±ÂÖ≥ÈîÆÂ≠óÁöÑÊü•ËØ¢ÔºåÂ¶ÇÊûúÈúÄË¶ÅËøõË°åÊõ¥Êñ∞ÊàñËÄÖÂà†Èô§Êï∞ÊçÆÔºåÂàôÈúÄË¶ÅÂú®@Query‰πã‰∏äÂä†‰∏ä@Modifing„ÄÇ]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>springboot</tag>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSÂ≠¶‰π†]]></title>
    <url>%2F2019%2F09%2F21%2FJS%E5%AD%A6%E4%B9%A0.html</url>
    <content type="text"><![CDATA[Â≠¶‰π†ËøáÁ®ãÔºöpromise‚Äî&gt;ÁÆ≠Â§¥ÂáΩÊï∞‚Äî&gt;‰ΩúÁî®Âüü‚Äî&gt;Èó≠ÂåÖ jsÂü∫Á°ÄÂÖ•Èó®ÁØáÂü∫Êú¨ËØ≠Ê≥ïÂèòÈáèÊèêÂçáJavaScript ÂºïÊìéÁöÑÂ∑•‰ΩúÊñπÂºèÊòØÔºåÂÖàËß£Êûê‰ª£Á†ÅÔºåËé∑ÂèñÊâÄÊúâË¢´Â£∞ÊòéÁöÑÂèòÈáèÔºåÁÑ∂ÂêéÂÜç‰∏ÄË°å‰∏ÄË°åÂú∞ËøêË°å„ÄÇËøôÈÄ†ÊàêÁöÑÁªìÊûúÔºåÂ∞±ÊòØÊâÄÊúâÁöÑÂèòÈáèÁöÑÂ£∞ÊòéËØ≠Âè•ÔºåÈÉΩ‰ºöË¢´ÊèêÂçáÂà∞‰ª£Á†ÅÁöÑÂ§¥ÈÉ®ÔºåËøôÂ∞±Âè´ÂÅöÂèòÈáèÊèêÂçáÔºàhoistingÔºâ„ÄÇÂÖ∂‰∏≠ÔºåÂáΩÊï∞ÂêçÂêåÊ†∑Ë¢´ËßÜ‰∏∫ÂèòÈáèÂêçÔºåÊâÄ‰ª•‰∏ÄÊ†∑‰ºöË¢´ÊèêÂçáÂà∞‰ª£Á†ÅÂ§¥ÈÉ®„ÄÇ Ê†áËØÜÁ¨¶ ‰∏çËÉΩ‰ª•Êï∞Â≠óÂºÄÂ§¥ÔºåÂèØ‰ª•‰ª• _ Âíå $ ÂºÄÂ§¥ JavaScript Êúâ‰∏Ä‰∫õ‰øùÁïôÂ≠óÔºå‰∏çËÉΩÁî®‰ΩúÊ†áËØÜÁ¨¶Ôºöarguments„ÄÅbreak„ÄÅcase„ÄÅcatch„ÄÅclass„ÄÅconst„ÄÅcontinue„ÄÅdebugger„ÄÅdefault„ÄÅdelete„ÄÅdo„ÄÅelse„ÄÅenum„ÄÅeval„ÄÅexport„ÄÅextends„ÄÅfalse„ÄÅfinally„ÄÅfor„ÄÅfunction„ÄÅif„ÄÅimplements„ÄÅimport„ÄÅin„ÄÅinstanceof„ÄÅinterface„ÄÅlet„ÄÅnew„ÄÅnull„ÄÅpackage„ÄÅprivate„ÄÅprotected„ÄÅpublic„ÄÅreturn„ÄÅstatic„ÄÅsuper„ÄÅswitch„ÄÅthis„ÄÅthrow„ÄÅtrue„ÄÅtry„ÄÅtypeof„ÄÅvar„ÄÅvoid„ÄÅwhile„ÄÅwith„ÄÅyield„ÄÇ Ê†áÁ≠æjsÂÖÅËÆ∏ËØ≠Âè•ÂâçÈù¢ÂèØ‰ª•Â∏¶ÊúâÊ†áÁ≠æÔºåÊñπ‰æøË∑≥Âá∫ÂùóÂå∫ÂüüÂíåÂ§öÈáçÂæ™ÁéØÔºåÂ∏∏‰∏éforÂæ™ÁéØ„ÄÅcontinue„ÄÅbreakËøûÁî®„ÄÇ Êï∞ÊçÆÁ±ªÂûã##nullÔºåÂ∏ÉÂ∞îÂÄº booleanÂ¶ÇÊûú JavaScript È¢ÑÊúüÊüê‰∏™‰ΩçÁΩÆÂ∫îËØ•ÊòØÂ∏ÉÂ∞îÂÄºÔºå‰ºöÂ∞ÜËØ•‰ΩçÁΩÆ‰∏äÁé∞ÊúâÁöÑÂÄºËá™Âä®ËΩ¨‰∏∫Â∏ÉÂ∞îÂÄº„ÄÇËΩ¨Êç¢ËßÑÂàôÊòØÈô§‰∫Ü‰∏ãÈù¢ÂÖ≠‰∏™ÂÄºË¢´ËΩ¨‰∏∫falseÔºåÂÖ∂‰ªñÂÄºÈÉΩËßÜ‰∏∫true„ÄÇ undefined null false 0 NaN ‚Äú‚ÄùÊàñ‚Äô‚ÄôÔºàÁ©∫Â≠óÁ¨¶‰∏≤Ôºâ Ê≥®ÊÑèÔºå{}Âíå[]ÈÉΩÊòØtrue„ÄÇ Êï∞ÂÄº js‰∏≠ÊâÄÊúâÊï∞ÈÉΩÊòØÂ∞èÊï∞Ôºå64‰ΩçÔºåÂÖ∂‰∏≠Á¨¶Âè∑‰Ωç1‰ΩçÔºåË°®Á§∫ÊåáÊï∞ÁöÑ11‰ΩçÔºåÂâ©‰ΩôÁöÑ52‰ΩçË°®Á§∫Á≤æÂ∫¶Ôºå‰ΩÜÊòØÁî±‰∫éË°®Á§∫Á≤æÂ∫¶ÁöÑÊúÄÈ´ò‰Ωç1.xxxx‰∏≠ÁöÑ1Ë¢´ÁúÅÁï•ÔºåÊâÄ‰ª•ÂèØ‰ª•Ë°®Á§∫53‰ΩçÁ≤æÂ∫¶Ôºõ parseIntÂç≥Â∞ÜÂ≠óÁ¨¶‰∏≤ËΩ¨Êç¢‰∏∫Êï¥Êï∞ÂûãÔºå‰∏çÁÆ°ÊòØ‰∏çÊòØÂ≠óÁ¨¶‰∏≤ÔºåÈÉΩ‰ºöÂÖàËΩ¨Êç¢‰∏∫Â≠óÁ¨¶‰∏≤,ÂÜçËΩ¨‰∏∫Êï¥Êï∞ÂûãÔºåÂÖ∂‰∏≠ÔºåparseIntÂèØ‰ª•‰º†ÂÖ•‰∏§‰∏™ÂèÇÊï∞ÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÂèØ‰ª•ÊòØËΩ¨Êç¢ËøõÂà∂ÂÄºÔºõ Â≠óÁ¨¶‰∏≤ ÊÉ≥ËæìÂá∫Â§öË°åÂ≠óÁ¨¶‰∏≤ÔºåÊúâ‰∏ÄÁßçÂà©Áî®Â§öË°åÊ≥®ÈáäÁöÑÂèòÈÄöÊñπÊ≥ï 12345678(function () &#123; /*line 1line 2line 3*/&#125;).toString().split('\n').slice(1, -1).join('\n')// "line 1// line 2// line 3" Base64ËΩ¨Á†Å Base64 Â∞±ÊòØ‰∏ÄÁßçÁºñÁ†ÅÊñπÊ≥ïÔºåÂèØ‰ª•Â∞Ü‰ªªÊÑèÂÄºËΩ¨Êàê 0ÔΩû9„ÄÅAÔΩûZ„ÄÅa-z„ÄÅ+Âíå/Ëøô64‰∏™Â≠óÁ¨¶ÁªÑÊàêÁöÑÂèØÊâìÂç∞Â≠óÁ¨¶„ÄÇ‰ΩøÁî®ÂÆÉÁöÑ‰∏ªË¶ÅÁõÆÁöÑÔºå‰∏çÊòØ‰∏∫‰∫ÜÂä†ÂØÜÔºåËÄåÊòØ‰∏∫‰∫Ü‰∏çÂá∫Áé∞ÁâπÊÆäÂ≠óÁ¨¶ÔºåÁÆÄÂåñÁ®ãÂ∫èÁöÑÂ§ÑÁêÜ„ÄÇ JavaScript ÂéüÁîüÊèê‰æõ‰∏§‰∏™ Base64 Áõ∏ÂÖ≥ÁöÑÊñπÊ≥ï„ÄÇ btoa()Ôºö‰ªªÊÑèÂÄºËΩ¨‰∏∫ Base64 ÁºñÁ†Å atob()ÔºöBase64 ÁºñÁ†ÅËΩ¨‰∏∫ÂéüÊù•ÁöÑÂÄº 123var string = 'Hello World!';btoa(string) // "SGVsbG8gV29ybGQh"atob('SGVsbG8gV29ybGQh') // "Hello World!" * Ë¶ÅÂ∞ÜÈùû ASCII Á†ÅÂ≠óÁ¨¶ËΩ¨‰∏∫ Base64 ÁºñÁ†ÅÔºåÂøÖÈ°ª‰∏≠Èó¥ÊèíÂÖ•‰∏Ä‰∏™ËΩ¨Á†ÅÁéØËäÇÔºåÂÜç‰ΩøÁî®Ëøô‰∏§‰∏™ÊñπÊ≥ï„ÄÇ 12345678910function b64Encode(str) &#123; return btoa(encodeURIComponent(str));&#125;function b64Decode(str) &#123; return decodeURIComponent(atob(str));&#125;b64Encode('‰Ω†Â•Ω') // "JUU0JUJEJUEwJUU1JUE1JUJE"b64Decode('JUU0JUJEJUEwJUU1JUE1JUJE') // "‰Ω†Â•Ω" ÂØπË±° ÂØπË±°ÁöÑÂºïÁî®‰∏§‰∏™ÂèòÈáèÂêåÊó∂ÊåáÂêëÂêå‰∏Ä‰∏™ÂØπË±°ÔºåÂÖ∂‰∏≠‰ªª‰Ωï‰∏Ä‰∏™ÂèòÈáèÊ∑ªÂä†Â±ûÊÄßÔºåÂè¶‰∏Ä‰∏™ÂèòÈáèÈÉΩÂèØ‰ª•ËØªÂÜôËØ•Â±ûÊÄßÔºå‰ΩÜÊòØÂ¶ÇÊûúÂèñÊ∂àÊüê‰∏™ÂèòÈáèÂØπ‰∫éÂéüÂØπË±°ÁöÑÂºïÁî®ÔºåÂπ∂‰∏ç‰ºöÂΩ±ÂìçÂà∞Âè¶‰∏Ä‰∏™ÂèòÈáèÔºõÊ≥®ÊÑè:‰ªÖÈôê‰∫éÂØπË±°ÔºåÂ¶ÇÊûú‰∏§‰∏™ÂèòÈáèÂêåÊó∂ÊåáÂêëÂêå‰∏Ä‰∏™ÂéüÂßãÁ±ªÂûãÁöÑÂÄºÔºåÈÇ£‰πàÂèòÈáèÊ≠§Êó∂ÈÉΩÊòØÂÄºÁöÑÊã∑Ë¥ùËÄåÂ∑≤Ôºõ Â¶ÇÊûúË°åÈ¶ñÊòØ‰∏Ä‰∏™Â§ßÊã¨Âè∑ÔºåjsÂºïÊìé‰∏ÄÂæãÂ∞ÜÂÖ∂Ëß£Èáä‰∏∫‰ª£Á†ÅÂùóÔºåÂ¶ÇÊûúÊÉ≥Ë¶ÅË°®Á§∫‰∏∫ÂØπË±°ÔºåÂàôÂøÖÈ°ªÂú®Â§ßÊã¨Âè∑ÂâçÂä†‰∏ä‰∏Ä‰∏™ÂúÜÊã¨Âè∑ÔºåËøôÁßçÂ∑ÆÂºÇÂú®evalËØ≠Âè•Ôºà‰ΩúÁî®ÊòØÂØπÂ≠óÁ¨¶‰∏≤Ê±ÇÂÄºÔºâ‰∏≠‰ΩìÁé∞ÁöÑÂ∞§‰∏∫ÊòéÊòæÔºõ 12eval('&#123;foo: 123&#125;') // 123eval('(&#123;foo: 123&#125;)') // &#123;foo: 123&#125; Â±ûÊÄßËØªÂèñÔºö‰∏ÄÁßç‰ΩøÁî®ÁÇπËøêÁÆóÁ¨¶ÔºåÂè¶Â§ñ‰∏ÄÁßçÈááÁî®ÊñπÊã¨Âè∑ËøêÁÆóÁ¨¶ÔºåÊ≥®ÊÑèËã•‰ΩøÁî®ÊñπÊã¨Âè∑ËøêÁÆóÁ¨¶ÔºåÈîÆÂêçÂøÖÈ°ªÊîæÂú®ÂºïÂè∑ÈáåÈù¢ÔºåÂê¶Âàô‰ºöË¢´ÂΩìÂÅöÂèòÈáèÂ§ÑÁêÜÔºö 123456789var foo = 'bar';var obj = &#123; foo: 1, bar: 2&#125;;obj.foo // 1obj[foo] // 2 Êü•Áúã‰∏Ä‰∏™ÂØπË±°Êú¨Ë∫´ÊâÄÊúâÂ±ûÊÄßÔºåÂèØ‰ª•‰ΩøÁî®Object.keysÊñπÊ≥ï 1234567var obj = &#123; key1: 1, key2: 2&#125;;Object.keys(obj);// ['key1', 'key2'] Â±ûÊÄßÁöÑÈÅçÂéÜÔºöfor‚Ä¶in Âæ™ÁéØ: ÂÆÉÈÅçÂéÜÁöÑÊòØÂØπË±°ÊâÄÊúâÂèØÈÅçÂéÜÔºàenumerableÔºâÁöÑÂ±ûÊÄßÔºå‰ºöË∑≥Ëøá‰∏çÂèØÈÅçÂéÜÁöÑÂ±ûÊÄß„ÄÇ ÂÆÉ‰∏ç‰ªÖÈÅçÂéÜÂØπË±°Ëá™Ë∫´ÁöÑÂ±ûÊÄßÔºåËøòÈÅçÂéÜÁªßÊâøÁöÑÂ±ûÊÄß„ÄÇ 123456789101112var obj = &#123;a: 1, b: 2, c: 3&#125;;for (var i in obj) &#123; console.log('ÈîÆÂêçÔºö', i); console.log('ÈîÆÂÄºÔºö', obj[i]);&#125;// ÈîÆÂêçÔºö a// ÈîÆÂÄºÔºö 1// ÈîÆÂêçÔºö b// ÈîÆÂÄºÔºö 2// ÈîÆÂêçÔºö c// ÈîÆÂÄºÔºö 3 withËØ≠Âè•Ôºö‰ΩúÁî®ÊòØÊìç‰ΩúÂêå‰∏Ä‰∏™ÂØπË±°ÁöÑÂ§ö‰∏™Â±ûÊÄßÊó∂ÔºåÊèê‰æõÊñπ‰æøÔºå‰ΩÜÊòØ‰∏çÂª∫ËÆÆ‰ΩøÁî®ÔºåÂõ†‰∏∫Âú®withËØ≠Âè•ÈáåÈù¢Ê≤°ÊúâÊîπÂèò‰ΩúÁî®ÂüüÔºåÂØºËá¥ÁªëÂÆöÂØπË±°‰∏çÊòéÁ°ÆÔºåÂ¶ÇÊûúwithÂå∫ÂùóÂÜÖÈÉ®ÊúâÂèòÈáèÁöÑËµãÂÄºÊìç‰ΩúÔºåÂøÖÈ°ªÊòØÂΩìÂâçÂØπË±°Â∑≤ÁªèÂ≠òÂú®ÁöÑÂ±ûÊÄßÔºåÂê¶Âàô‰ºöÂàõÈÄ†‰∏Ä‰∏™ÂΩìÂâç‰ΩúÁî®ÂüüÁöÑÂÖ®Â±ÄÂèòÈáè„ÄÇ 12345678var obj = &#123;&#125;;with (obj) &#123; p1 = 4; p2 = 5;&#125;obj.p1 // undefinedp1 // 4 ÂáΩÊï∞ÂáΩÊï∞Â£∞Êòé functionÂëΩ‰ª§ 123function print(s)&#123; console.log(s);&#125; ÂáΩÊï∞Ë°®ËææÂºè(Â¶ÇÊûúfunctionÂêéÂ∏¶ÂáΩÊï∞ÂêçÔºåÂáΩÊï∞Âêç‰πüÂè™Âú®ÂáΩÊï∞‰ΩìÂÜÖÈÉ®ÊúâÊïà) 1var print = function()&#123;console.log(s)&#125;; FunctionÊûÑÈÄ†ÂáΩÊï∞ 12345678910var add = new Function( 'x', 'y', 'return x + y');// Á≠âÂêå‰∫éfunction add(x, y) &#123; return x + y;&#125; ÂáΩÊï∞ToStringÂèØ‰ª•Ëß£ÊûêÊ≥®ÈáäÂÆûÁé∞Â§öË°åÂ≠óÁ¨¶‰∏≤Ôºö 12345678910111213var multiline = function (fn) &#123; var arr = fn.toString().split('\n'); return arr.slice(1, arr.length - 1).join('\n');&#125;;function f() &#123;/* ËøôÊòØ‰∏Ä‰∏™ Â§öË°åÊ≥®Èáä*/&#125;multiline(f);// " ËøôÊòØ‰∏Ä‰∏™// Â§öË°åÊ≥®Èáä" ÂáΩÊï∞‰ΩúÁî®ÂüüÂú®ES6‰∏≠ÔºåÊúâ‰∏âÁßç‰ΩúÁî®ÂüüÔºöÂÖ®Â±Ä‰ΩúÁî®Âüü„ÄÅÂùó‰ΩúÁî®Âüü„ÄÅÂáΩÊï∞‰ΩúÁî®Âüü„ÄÇÂáΩÊï∞Êú¨Ë∫´‰πüÊòØ‰∏Ä‰∏™ÂÄºÔºå‰πüÊúâËá™Â∑±ÁöÑ‰ΩúÁî®Âüü„ÄÇÂÆÉÁöÑ‰ΩúÁî®Âüü‰∏éÂèòÈáè‰∏ÄÊ†∑ÔºåÂ∞±ÊòØÂÖ∂Â£∞ÊòéÊó∂ÊâÄÂú®ÁöÑ‰ΩúÁî®ÂüüÔºå‰∏éÂÖ∂ËøêË°åÊó∂ÊâÄÂú®ÁöÑ‰ΩúÁî®ÂüüÊó†ÂÖ≥„ÄÇ 1234567891011var a = 1;var x = function () &#123; console.log(a);&#125;;function f() &#123; var a = 2; x();&#125;f() // 1 ‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåÂáΩÊï∞xÊòØÂú®ÂáΩÊï∞fÁöÑÂ§ñÈÉ®Â£∞ÊòéÁöÑÔºåÊâÄ‰ª•ÂÆÉÁöÑ‰ΩúÁî®ÂüüÁªëÂÆöÂ§ñÂ±ÇÔºåÂÜÖÈÉ®ÂèòÈáèa‰∏ç‰ºöÂà∞ÂáΩÊï∞f‰ΩìÂÜÖÂèñÂÄºÔºåÊâÄ‰ª•ËæìÂá∫1ÔºåËÄå‰∏çÊòØ2„ÄÇ ÊÄª‰πãÔºåÂáΩÊï∞ÊâßË°åÊó∂ÊâÄÂú®ÁöÑ‰ΩúÁî®ÂüüÔºåÊòØÂÆö‰πâÊó∂ÁöÑ‰ΩúÁî®ÂüüÔºåËÄå‰∏çÊòØË∞ÉÁî®Êó∂ÊâÄÂú®ÁöÑ‰ΩúÁî®Âüü„ÄÇÊâÄ‰ª•ËØ¥ÔºåÂ¶ÇÊûúÂáΩÊï∞AË∞ÉÁî®ÂáΩÊï∞B,ÂáΩÊï∞B‰∏ç‰ºöÂºïÁî®ÂáΩÊï∞AÁöÑÂÜÖÂÆπ„ÄÇ ÂèÇÊï∞‰º†ÂÄº ÂáΩÊï∞ÂèÇÊï∞Â¶ÇÊûúÊòØÂéüÂßãÁ±ªÂûãÁöÑÂÄºÔºàÊï∞ÂÄº„ÄÅÂ≠óÁ¨¶‰∏≤„ÄÅÂ∏ÉÂ∞îÂÄºÔºâÔºå‰º†ÈÄíÊñπÂºèÊòØ‰º†ÂÄº‰º†ÈÄíÔºõ ÂáΩÊï∞ÂèÇÊï∞Â¶ÇÊûúÊòØÂ§çÂêàÁ±ªÂûãÁöÑÂÄºÔºàÊï∞ÁªÑ„ÄÅÂØπË±°„ÄÅÂÖ∂‰ªñÂáΩÊï∞ÔºâÔºå‰º†ÈÄíÊñπÂºèÊòØ‰º†ÂùÄ‰º†ÈÄíÔºõ ÂáΩÊï∞ÂÜÖÈÉ®‰øÆÊîπÁöÑÂ¶ÇÊûúÊòØÂèÇÊï∞ÂØπË±°ÁöÑÊüê‰∏™Â±ûÊÄßÔºåÈÇ£‰πà‰ºöÂΩ±ÂìçÂà∞ÂéüÂßãÂÄºÔºåÂ¶ÇÊûúÊòØÊõøÊç¢ÊéâÊï¥‰∏™ÂèÇÊï∞ÔºåÂàô‰∏ç‰ºöÂΩ±ÂìçÂà∞ÂéüÂßãÂÄºÔºö 12345678var obj = [1, 2, 3];function f(o) &#123; o = [2, 3, 4];&#125;f(obj);obj // [1, 2, 3] arguments argumentsÂØπË±°ÂåÖÂê´‰∫ÜÂáΩÊï∞ËøêË°åÊó∂ÁöÑÊâÄÊúâÂèÇÊï∞Ôºå‰ΩÜÊòØÂÆÉÂπ∂‰∏çÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåËÄåÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåÊâÄ‰ª•ÂÆÉ‰∏çËÉΩÁî®Êï∞ÁªÑ‰∏≠ÁöÑsliceÂíåforEachÊñπÊ≥ïÔºõ Âú®Ê≠£Â∏∏Ê®°Âºè‰∏ãÔºåargumentsÂØπË±°ÂèØ‰ª•Âú®ËøêË°åÊó∂‰øÆÊîπÔºå‰ΩÜÊòØÂú®‰∏•Ê†ºÊ®°Âºè‰∏ãÔºå‰øÆÊîπargumentsÂØπË±°ÁöÑÂÄºÂπ∂‰∏ç‰ºöÊîπÂèòÁúüÂÆûÂèÇÊï∞ÁöÑÂÄºÔºõ Â¶ÇÊûúË¶ÅËÆ©argumentsÂØπË±°‰ΩøÁî®Êï∞ÁªÑÊñπÊ≥ïÔºåÁúüÊ≠£ÁöÑËß£ÂÜ≥ÂäûÊ≥ïÂ∞±ÊòØËÆ©argumentsÂØπË±°Âèò‰∏∫Êï∞ÁªÑÔºåÂ∏∏Áî®ÁöÑËΩ¨Êç¢ÊñπÊ≥ïÊúâ‰∏§ÁßçÔºåÂàÜÂà´ÊòØsliceÊñπÊ≥ïÂíåÈÄê‰∏ÄÂ°´ÂÖ•Êñ∞Êï∞ÁªÑÔºö 1234567var args = Array.prototype.slice.call(arguments);// ÊàñËÄÖvar args = [];for (var i = 0; i &lt; arguments.length; i++) &#123; args.push(arguments[i]);&#125; Èó≠ÂåÖÈó≠ÂåÖÔºåÁÆÄËÄåË®Ä‰πãÂ∞±ÊòØÂáΩÊï∞‰∏≠ÁöÑÂáΩÊï∞ÔºåÈó≠ÂåÖÊúÄÂ§ßÁöÑÁâπÁÇπÔºåÂ∞±ÊòØÂÆÉÂèØ‰ª•‚ÄúËÆ∞‰Ωè‚ÄùËØûÁîüÁöÑÁéØÂ¢ÉÔºåÁî®Â§ÑÊúâ‰∏â‰∏™Ôºö 1. ÂèØ‰ª•ËØªÂèñÂáΩÊï∞ÂÜÖÈÉ®ÁöÑÂèòÈáèÔºõ 2. ËÆ©Ëøô‰∫õÂèòÈáèÂßãÁªà‰øùÊåÅÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÂç≥Èó≠ÂåÖÂèØ‰ª•‰ΩøÂæóÂÆÉËØûÁîüÁéØÂ¢É‰∏ÄÁõ¥Â≠òÂú®; 3. Â∞ÅË£ÖÂØπË±°ÁöÑÁßÅÊúâÂ±ûÊÄßÂíåÁßÅÊúâÊñπÊ≥ï„ÄÇ 123456789101112131415161718192021222324252627282930313233function createIncrementor(start) &#123; return function () &#123; return start++; &#125;;&#125;var inc = createIncrementor(5);inc() // 5inc() // 6inc() // 7``` ```jsfunction Person(name) &#123; var _age; function setAge(n) &#123; _age = n; &#125; function getAge() &#123; return _age; &#125; return &#123; name: name, getAge: getAge, setAge: setAge &#125;;&#125;var p1 = Person('Âº†‰∏â');p1.setAge(25);p1.getAge() // 25 ‚ÄúÁ´ãÂç≥Ë∞ÉÁî®ÁöÑÂáΩÊï∞Ë°®ËææÂºè‚ÄùÔºàImmediately-Invoked Function ExpressionÔºâ123(function()&#123; /* code */ &#125;());// ÊàñËÄÖ(function()&#123; /* code */ &#125;)(); ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂè™ÂØπÂåøÂêçÂáΩÊï∞‰ΩøÁî®ËøôÁßç‚ÄúÁ´ãÂç≥ÊâßË°åÁöÑÂáΩÊï∞Ë°®ËææÂºè‚Äù„ÄÇÂÆÉÁöÑÁõÆÁöÑÊúâ‰∏§‰∏™Ôºö‰∏ÄÊòØ‰∏çÂøÖ‰∏∫ÂáΩÊï∞ÂëΩÂêçÔºåÈÅøÂÖç‰∫ÜÊ±°ÊüìÂÖ®Â±ÄÂèòÈáèÔºõ‰∫åÊòØ IIFE ÂÜÖÈÉ®ÂΩ¢Êàê‰∫Ü‰∏Ä‰∏™ÂçïÁã¨ÁöÑ‰ΩúÁî®ÂüüÔºåÂèØ‰ª•Â∞ÅË£Ö‰∏Ä‰∫õÂ§ñÈÉ®Êó†Ê≥ïËØªÂèñÁöÑÁßÅÊúâÂèòÈáè„ÄÇ eval Êú¨Ë¥®ÊòØÂú®ÂΩìÂâçÂüü‰∏≠Ê≥®ÂÖ•‰ª£Á†ÅÔºåÂèØ‰ª•Êé•Âèó‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤‰Ωú‰∏∫ÂèÇÊï∞ÔºåÂπ∂‰∏îÂ∞ÜËØ•Â≠óÁ¨¶‰∏≤ÂΩìÂÅöËØ≠Âè•ÊâßË°åÔºåÂ¶ÇÊûúËØÜÂà´‰∏çÊòØÂ≠óÁ¨¶‰∏≤ÔºåÂàô‰ºöÂéüÊ†∑ËøîÂõû„ÄÇ ÂêåÊó∂ÔºåevalÊ≤°ÊúâËá™Â∑±ÁöÑ‰ΩúÁî®ÂüüÔºå‰ºöÊîπÂèòÂΩìÂâçÂüüÂéüÊúâÂèòÈáèÁöÑÂÄºÔºåÂΩìÁÑ∂Âú®‰∏•Ê†ºÊ®°Âºè‰∏ãÔºåevalÂÜÖÈÉ®Ëá™Â∑±Â£∞ÊòéÁöÑÂèòÈáèÊúâËá™Â∑±ÁöÑ‰ΩúÁî®ÂüüÔºå‰∏ç‰ºöÂΩ±ÂìçÂà∞Â§ñÈÉ®‰ΩúÁî®ÂüüÁöÑÂÄº„ÄÇ Áî±‰∫éÂºïÊìéÊó†Ê≥ïÂàÜËæ®evalÁöÑÂà´ÂêçË∞ÉÁî®ÔºåÊâÄ‰ª•Âú®eval‰ΩøÁî®Âà´ÂêçÊó∂Ôºå‰∏ÄÂæãÈÉΩÊòØÂÖ®Â±Ä‰ΩúÁî®Âüü„ÄÇ Êï∞ÁªÑÊï∞ÁªÑÈÅçÂéÜ Êï∞ÁªÑÈÅçÂéÜÂèØ‰ª•ËÄÉËôë‰ΩøÁî®forÂæ™ÁéØ„ÄÅwhileÂæ™ÁéØ„ÄÅforEachÂæ™ÁéØÔºå‰ºöËøîÂõûÈîÆÂÄºÔºàÈîÆÂêç‰∏∫Êï¥Êï∞ÔºâÔºåfor‚Ä¶in‚Ä¶Âæ™ÁéØ‰ºöÂêåÊó∂ÈÅçÂéÜÈùûÊï¥Êï∞ÈîÆÔºàËøîÂõûÁöÑÊòØÈîÆÂêçÔºâÔºõ Êï∞ÁªÑÈÅçÂéÜÁ©∫‰ΩçÊó∂ÔºåÈúÄË¶ÅÊ†ºÂ§ñÊ≥®ÊÑèÔºåÁ©∫‰ΩçÂíåundefinedÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑÔºåÁ©∫‰ΩçË°®Á§∫Êï∞ÁªÑ‰∏≠Ê≤°ÊúâËøô‰∏™ÂÖÉÁ¥†ÔºåÊâÄ‰ª•Âú®for‚Ä¶in‚Ä¶ÂíåforEachÂæ™ÁéØ‰∏≠‰∏ç‰ºöË¢´ÈÅçÂéÜÂà∞Ôºå‰ΩÜÊòØundefined‰ª£Ë°®Êï∞ÁªÑÊúâËøô‰∏™ÂÖÉÁ¥†ÔºåÊòØ‰ºöÈÅçÂéÜÂà∞ÁöÑÔºõ ËøêÁÆóÁ¨¶ÁÆóÊúØËøêÁÆóÁ¨¶Âä†Ê≥ïËøêÁÆóÁ¨¶ ÂØπË±°ÁöÑÁõ∏Âä†Â¶ÇÊûúËøêÁÆóÂ≠êÊòØÂØπË±°ÔºåÂøÖÈ°ªÂÖàËΩ¨ÊàêÂéüÂßãÁ±ªÂûãÁöÑÂÄºÔºåÂºïÊìé‰ºöËá™Âä®Ë∞ÉÁî®obj.valueof().toString(),ÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•ÈáçÊñ∞valueOf()ÂíåtoString()ÊñπÊ≥ïÂç≥ÂèØÔºåÂÖ∂‰∏≠Êúâ‰∏™Áâπ‰æãÔºåÂΩìËøêÁÆóÂ≠êÊòØ‰∏Ä‰∏™DateÂØπË±°ÁöÑÂÆû‰æãÔºåÈÇ£‰πà‰ºö‰ºòÂÖàÊâßË°åtoStringÊñπÊ≥ï„ÄÇ ÊåáÊï∞ËøêÁÆóÁ¨¶** ‰∏∫ÊåáÊï∞ËøêÁÆóÁ¨¶ÔºåÊòØÂè≥ÁªìÂêàÁöÑÔºåÂΩìÁÑ∂Ôºå‰∏âÂÖÉÊù°‰ª∂ËøêÁÆóÁ¨¶‰πüÊòØÂè≥ÁªìÂêàÁöÑÔºåÂΩìÁÑ∂ËøòÊúâËµãÂÄºËøêÁÆóÁ¨¶Ôºà=Ôºâ‰πüÊòØÂè≥ÁªìÂêàÁöÑ„ÄÇ ÊØîËæÉËøêÁÆóÁ¨¶ ‰∏•Ê†ºÁõ∏Á≠âËøêÁÆóÁ¨¶JavaScript Êèê‰æõ‰∏§ÁßçÁõ∏Á≠âËøêÁÆóÁ¨¶Ôºö== Âíå === „ÄÇÁÆÄÂçïËØ¥ÔºåÂÆÉ‰ª¨ÁöÑÂå∫Âà´ÊòØÁõ∏Á≠âËøêÁÆóÁ¨¶Ôºà==ÔºâÊØîËæÉ‰∏§‰∏™ÂÄºÊòØÂê¶Áõ∏Á≠âÔºå‰∏•Ê†ºÁõ∏Á≠âËøêÁÆóÁ¨¶Ôºà===ÔºâÊØîËæÉÂÆÉ‰ª¨ÊòØÂê¶‰∏∫‚ÄúÂêå‰∏Ä‰∏™ÂÄº‚Äù„ÄÇÂ¶ÇÊûú‰∏§‰∏™ÂÄº‰∏çÊòØÂêå‰∏ÄÁ±ªÂûãÔºå‰∏•Ê†ºÁõ∏Á≠âËøêÁÆóÁ¨¶Ôºà===ÔºâÁõ¥Êé•ËøîÂõûfalseÔºåËÄåÁõ∏Á≠âËøêÁÆóÁ¨¶Ôºà==Ôºâ‰ºöÂ∞ÜÂÆÉ‰ª¨ËΩ¨Êç¢ÊàêÂêå‰∏Ä‰∏™Á±ªÂûãÔºåÂÜçÁî®‰∏•Ê†ºÁõ∏Á≠âËøêÁÆóÁ¨¶ËøõË°åÊØîËæÉ„ÄÇtip: undefinedÂíånull‰∏éËá™Ë∫´‰∏•Ê†ºÁõ∏Á≠âÂ∏ÉÂ∞îËøêÁÆóÁ¨¶Áï•‰∫åËøõÂà∂‰ΩçËøêÁÆóÁ¨¶Áï• ÂÖ∂‰ªñËøêÁÆóÁ¨¶ÔºåËøêÁÆóÈ°∫Â∫èvoid ËøêÁÆóÁ¨¶voidËøêÁÆóÁ¨¶ÁöÑ‰ΩúÁî®ÊòØÊâßË°å‰∏Ä‰∏™Ë°®ËææÂºèÔºåÁÑ∂Âêé‰∏çËøîÂõû‰ªª‰ΩïÂÄºÔºåÊàñËÄÖËØ¥ËøîÂõûundefinedÔºå‰∏ªË¶ÅÁî®ÈÄîÊòØÊµèËßàÂô®ÁöÑ‰π¶Á≠æÂ∑•ÂÖ∑Ôºå‰ª•ÂèäÂú®Ë∂ÖÈìæÊé•‰∏≠ÊèíÂÖ•‰ª£Á†ÅÈò≤Ê≠¢ÁΩëÈ°µË∑≥ËΩ¨„ÄÇ ËØ≠Ê≥ï‰∏ìÈ¢òÈîôËØØÂ§ÑÁêÜÊú∫Âà∂ÂéüÁîüÈîôËØØÁ±ªÂûã SyntaxError ReferenceError RangeError TypeError URIError EvalError Ëá™ÂÆö‰πâÈîôËØØÈô§‰∫Ü JavaScript ÂéüÁîüÊèê‰æõÁöÑ‰∏ÉÁßçÈîôËØØÂØπË±°ÔºåËøòÂèØ‰ª•ÂÆö‰πâËá™Â∑±ÁöÑÈîôËØØÂØπË±° 1234567function UserError(message) &#123; this.message = message || 'ÈªòËÆ§‰ø°ÊÅØ'; this.name = 'UserError';&#125;UserError.prototype = new Error();UserError.prototype.constructor = UserError; ‰∏äÈù¢‰ª£Á†ÅËá™ÂÆö‰πâ‰∏Ä‰∏™ÈîôËØØÂØπË±°UserErrorÔºåËÆ©ÂÆÉÁªßÊâøErrorÂØπË±°„ÄÇÁÑ∂ÂêéÔºåÂ∞±ÂèØ‰ª•ÁîüÊàêËøôÁßçËá™ÂÆö‰πâÁ±ªÂûãÁöÑÈîôËØØ‰∫Ü 1new UserError('ËøôÊòØËá™ÂÆö‰πâÁöÑÈîôËØØÔºÅ'); Ê†áÂáÜÂ∫ìObjectÂõõ‰∏™Áî®Ê≥ïÔºö ObjectÊú¨Ë∫´Â∞±ÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂèØ‰ª•Â∞Ü‰ªªÊÑèÂÄºËΩ¨Êç¢‰∏∫ÂØπË±°Ôºõ ‰∏ç‰ªÖÂèØ‰ª•ÂΩìÂÅöÂ∑•ÂÖ∑ÂáΩÊï∞‰ΩøÁî®ÔºåËøòÂèØ‰ª•ÂΩìÂÅöÊûÑÈÄ†ÂáΩÊï∞‰ΩøÁî®ÔºåÂç≥ÂâçÈù¢ÂèØ‰ª•Âä†newÂëΩ‰ª§Ôºõ 1Ê≥®ÊÑèÔºåÈÄöËøávar obj = new Object()ÁöÑÂÜôÊ≥ïÁîüÊàêÊñ∞ÂØπË±°Ôºå‰∏éÂ≠óÈù¢ÈáèÁöÑÂÜôÊ≥ïvar obj = &#123;&#125;ÊòØÁ≠â‰ª∑ÁöÑ„ÄÇÊàñËÄÖËØ¥ÔºåÂêéËÄÖÂè™ÊòØÂâçËÄÖÁöÑ‰∏ÄÁßçÁÆÄ‰æøÂÜôÊ≥ï„ÄÇ ObjectÁöÑÈùôÊÄÅÊñπÊ≥ïÔºå‰æãÂ¶ÇObject.print,ÊåáÈÉ®ÁΩ≤Âú®ObjectÂØπË±°Ëá™Ë∫´ÁöÑÊñπÊ≥ïÔºõ ObjectÁöÑÂÆû‰æãÊñπÊ≥ïÔºåÂç≥ÂÆö‰πâÂú®Object.prototypeÂØπË±°‰∏äÁöÑÊñπÊ≥ï„ÄÇ Object.prototype.valueof() Object.prototype.toString() Object.prototype.toLocaleString() Object.prototype.hasOwnProperty() Object.prototype.isPrototypeof() Object.prototype.propertyIsEnumerable() Â±ûÊÄßÊèèËø∞ÂØπË±°jsÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÂÜÖÈÉ®Êï∞ÊçÆÁªìÊûÑÔºåÁî®Êù•ÊèèËø∞ÂØπË±°ÁöÑÂ±ûÊÄßÔºåÊØîÂ¶ÇÊòØÂê¶ÂèØÂÜôÂèØËØªÂèØÈÅçÂéÜÔºåËøô‰∏™ÂÜÖÈÉ®Êï∞ÊçÆÁªìÊûÑÂ∞±Áß∞‰πã‰∏∫‚ÄúÂ±ûÊÄßÊèèËø∞ÂØπË±°‚Äù„ÄÇ tip:Object.getOwnPropertyNamesÊñπÊ≥ïËøîÂõû‰∏Ä‰∏™Êï∞ÁªÑÔºåÊàêÂëòÊòØÂèÇÊï∞ÂØπË±°Ëá™Ë∫´ÁöÑÂÖ®ÈÉ®Â±ûÊÄßÁöÑÂ±ûÊÄßÂêçÔºå‰∏çÁÆ°ËØ•Â±ûÊÄßÊòØÂê¶ÂèØÈÅçÂéÜ„ÄÇËÄåËøôË∑üObject.keysÁöÑË°å‰∏∫‰∏çÂêåÔºåObject.keysÂè™ËøîÂõûÂØπË±°Ëá™Ë∫´ÁöÑÂèØÈÅçÂéÜÂ±ûÊÄßÁöÑÂÖ®ÈÉ®Â±ûÊÄßÂêç„ÄÇ 123456789101112Object.keys([]) // []Object.getOwnPropertyNames([]) // [ 'length' ]Object.keys(Object.prototype) // []Object.getOwnPropertyNames(Object.prototype)// ['hasOwnProperty',// 'valueOf',// 'constructor',// 'toLocaleString',// 'isPrototypeOf',// 'propertyIsEnumerable',// 'toString'] ‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåÊï∞ÁªÑËá™Ë∫´ÁöÑlengthÂ±ûÊÄßÊòØ‰∏çÂèØÈÅçÂéÜÁöÑÔºåObject.keys‰∏ç‰ºöËøîÂõûËØ•Â±ûÊÄß„ÄÇÁ¨¨‰∫å‰∏™‰æãÂ≠êÁöÑObject.prototype‰πüÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåÊâÄÊúâÂÆû‰æãÂØπË±°ÈÉΩ‰ºöÁªßÊâøÂÆÉÔºåÂÆÉËá™Ë∫´ÁöÑÂ±ûÊÄßÈÉΩÊòØ‰∏çÂèØÈÅçÂéÜÁöÑ„ÄÇ Object.defineProperty(),Object.defineProperties()Object.defineProperty()ÊñπÊ≥ïÊé•Êî∂‰∏â‰∏™ÂèÇÊï∞Ôºå‰æùÊ¨°Â¶Ç‰∏ãÔºö ObjectÔºöÂ±ûÊÄßÊâÄÂú®ÁöÑÂØπË±° propertyName:Â≠óÁ¨¶‰∏≤ÔºåË°®Á§∫Â±ûÊÄßÂêç attributesObject:Â±ûÊÄßÊèèËø∞ÂØπË±° 1234567891011var obj = Object.defineProperty(&#123;&#125;, 'p', &#123; value: 123, writable: false, enumerable: true, configurable: false&#125;);obj.p // 123obj.p = 246;obj.p // 123 Object.defineProperties()Êé•Êî∂‰∏§‰∏™ÂèÇÊï∞ÔºåÂ¶Ç‰∏ãÔºö 123456789101112var obj = Object.defineProperties(&#123;&#125;, &#123; p1: &#123; value: 123, enumerable: true &#125;, p2: &#123; value: 'abc', enumerable: true &#125;, p3: &#123; get: function () &#123; return this.p1 + this.p2 &#125;, enumerable:true, configurable:true &#125;&#125;);obj.p1 // 123obj.p2 // "abc"obj.p3 // "123abc" Object.prototype.propertyIsEnumerable()ËøîÂõû‰∏Ä‰∏™Â∏ÉÂ∞îÂÄºÔºåÁî®Êù•Âà§Êñ≠Ëá™Ë∫´Â±ûÊÄßÊòØÂê¶ÂèØ‰ª•ÈÅçÂéÜ„ÄÇObject.keysÊòØËøîÂõûÊâÄÊúâÂèØ‰ª•ÈÅçÂéÜÁöÑÂ±ûÊÄßÔºå‰∏çÂåÖÊã¨ÁªßÊâøÁöÑÂ±ûÊÄßÔºåËÄåObject.getOwnPropertyNamesÂàôÊòØËøîÂõûÂåÖÊã¨ÁªßÊâøÁöÑÂ±ûÊÄßÂú®ÂÜÖÁöÑÊâÄÊúâÂèØ‰ª•ÈÅçÂéÜÁöÑÂ±ûÊÄß„ÄÇ es6ÂÖ•Èó®lenÂíåconstÂëΩ‰ª§lenlenÊ≤°ÊúâÂèòÈáèÊèêÂçáÂøÖÈ°ªÂÖàÂ£∞ÊòéÂêéÊâçËÉΩ‰ΩøÁî®ÔºåÊ≥®ÊÑèlenÂèòÈáèÂè™Âú®ÂùóÂå∫ÂüüÂÜÖÊúâÁî®ÔºåÊòØÂùóÁ∫ß‰ΩúÁî®ÂüüÔºåËÄåvar‰∏çÂêåÔºåvarÂÖ∑ÊúâÂÖ®Â±Ä‰ΩúÁî®Âüü„ÄÅÂáΩÊï∞‰ΩúÁî®ÂüüÔºõ ÊöÇÊó∂ÊÄßÊ≠ªÂå∫123456var tmp = 123;if (true) &#123; tmp = 'abc'; // ReferenceError let tmp;&#125; Âú®‰ª£Á†ÅÂùóÂÜÖÔºå‰ΩøÁî®letÂëΩ‰ª§Â£∞ÊòéÂèòÈáè‰πãÂâçÔºåËØ•ÂèòÈáèÈÉΩÊòØ‰∏çÂèØÁî®ÁöÑ„ÄÇËøôÂú®ËØ≠Ê≥ï‰∏äÔºåÁß∞‰∏∫‚ÄúÊöÇÊó∂ÊÄßÊ≠ªÂå∫‚ÄùÔºàtemporal dead zoneÔºåÁÆÄÁß∞ TDZÔºâ„ÄÇÈùûÂ∏∏ÈöêËîΩÁöÑ‚ÄúÊ≠ªÂå∫‚ÄùÔºö 12345function bar(x = y, y = 2) &#123; return [x, y];&#125;bar(); // Êä•Èîô È°∂Â±ÇÂØπË±°ÁöÑÂ±ûÊÄßÈ°∂Â±ÇÂØπË±°ÔºåÂú®ÊµèËßàÂô®ÁéØÂ¢ÉÊåáÁöÑÊòØwindowÂØπË±°ÔºåÂú® Node ÊåáÁöÑÊòØglobalÂØπË±°„ÄÇES5 ‰πã‰∏≠ÔºåÈ°∂Â±ÇÂØπË±°ÁöÑÂ±ûÊÄß‰∏éÂÖ®Â±ÄÂèòÈáèÊòØÁ≠â‰ª∑ÁöÑ„ÄÇ‰ΩÜÂú®ES6‰∏≠ÔºåvarÂëΩ‰ª§ÂíåfunctionÂëΩ‰ª§Â£∞ÊòéÁöÑÂÖ®Â±ÄÂèòÈáèÔºå‰æùÊóßÊòØÈ°∂Â±ÇÂØπË±°ÁöÑÂ±ûÊÄßÔºõÂè¶‰∏ÄÊñπÈù¢ËßÑÂÆöÔºåletÂëΩ‰ª§„ÄÅconstÂëΩ‰ª§„ÄÅclassÂëΩ‰ª§Â£∞ÊòéÁöÑÂÖ®Â±ÄÂèòÈáèÔºå‰∏çÂ±û‰∫éÈ°∂Â±ÇÂØπË±°ÁöÑÂ±ûÊÄß„ÄÇ‰πüÂ∞±ÊòØËØ¥Ôºå‰ªé ES6 ÂºÄÂßãÔºåÂÖ®Â±ÄÂèòÈáèÂ∞ÜÈÄêÊ≠•‰∏éÈ°∂Â±ÇÂØπË±°ÁöÑÂ±ûÊÄßËÑ±Èí©„ÄÇ 1234567var a = 1;// Â¶ÇÊûúÂú® Node ÁöÑ REPL ÁéØÂ¢ÉÔºåÂèØ‰ª•ÂÜôÊàê global.a// ÊàñËÄÖÈááÁî®ÈÄöÁî®ÊñπÊ≥ïÔºåÂÜôÊàê this.awindow.a // 1let b = 1;window.b // undefined node jsÂÖ•Èó®]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰ΩøÁî®Microsoft Remote Desktop for mac Âíå SparkÈÇÆÁÆ±]]></title>
    <url>%2F2019%2F09%2F21%2F%E4%BD%BF%E7%94%A8Microsoft-Remote-Desktop-for-mac-%E5%92%8C-Spark%E9%82%AE%E7%AE%B1.html</url>
    <content type="text"><![CDATA[ÂâçË®ÄÁî±‰∫éËøëÊúüÈúÄË¶ÅËøúÁ®ãÊéßÂà∂windowsÊúçÂä°Âô®ÔºåÊâÄ‰ª•ÈúÄË¶ÅÈÄâÊã©‰∏Ä‰∏™ËøúÁ®ãÊìçÊéßÁöÑËΩØ‰ª∂ÔºåÁî±‰∫émacÁ´ØÂπ∂Ê≤°ÊúâÂµåÂÖ•Áõ∏ÂÖ≥ÁöÑÂäüËÉΩÔºåÂè™ËÉΩÈÄâÊã©Microsoft Remote DesktopÔºåÂπ∂‰∏îÈÅóÊÜæÁöÑÊòØÔºåÂú®‰∏≠ÂõΩÂå∫ÁöÑapp storeÂπ∂Ê≤°ÊúâÂÖÅËÆ∏ÂÖ∂‰∏äÁ∫øÔºåÊâÄ‰ª•Ë¶ÅÂÅöÁöÑÁ¨¨‰∏ÄÊ≠•Â∞±ÊòØÁî≥ËØ∑‰∏Ä‰∏™ÁæéÂå∫Ë¥¶Âè∑„ÄÇ Ê≠•È™§ chromeÊâìÂºÄapple idÊ≥®ÂÜå ÊåâÊ≠•È™§Ê≥®ÂÜåÔºåÂõΩÂÆ∂Â°´ÂÜôÁæéÂõΩÔºåÊ≥®ÂÜåÂÆåÊàê‰πãÂêéÈúÄË¶ÅÁôªÂΩï‰∏Ä‰∏ã ÁôªÂΩïÁöÑÊó∂ÂÄô‰ºöË¶ÅÊ±ÇÂ°´ÂÜôÂú∞ÂùÄÔºå‰ª•‰∏ãÊòØÂèØÁî®ÁöÑ‰ø°ÊÅØË°óÈÅì: 4114 Sepulveda BlvdÔºåÂüéÂ∏Ç: Culver CityÔºåÂ∑û: CAÈÇÆÁºñ: 90230ÁîµËØù: (626) 339-6***ÂïÜÂÆ∂ÂêçÁß∞: Clippinger Chevrolet OldsmobileÊ≥®ÊÑèÁîµËØùÂè∑Á†ÅÂêé‰∏â‰ΩçÈöè‰æøÂ°´ÂÜôÂá†‰∏™Êï∞Â≠ó ÁôªÂΩïApp StoreÔºåÁÑ∂Âêé‰∏ãËΩΩÂç≥ÂèØ‰ΩøÁî® SparkÂÜôËøô‰∏™‰∏ªË¶ÅÊòØÊÉ≥ÂêêÊßΩ‰∏Ä‰∏ãÔºåÁúãÂà∞ÁΩë‰∏äb‰πéÂêÑÁßçËØ¥sparkÂèØ‰ª•Êé•Êî∂Êé®ÈÄÅÔºåÂç≥‰ΩøÊ≤°ÊúâÊâìÂºÄËΩØ‰ª∂ÔºåÊàëÊÉ≥ËØ¥ÁÆÄÁõ¥ÊòØÊîæÂ±ÅÂïäÔºåÂØºËá¥ÊàëÊü•‰∫ÜÂá†‰∏™Â∞èÊó∂ÈÉΩÊ≤°ËÉΩÊàêÂäüÔºåÊ†πÊú¨ÂÅö‰∏çÂà∞Â•ΩÂêóÔºÅÔºÅÔºÅ‰∏ç‰ø°ÔºüÁúãÂÆòÁΩëÊÄé‰πàËØ¥ÁöÑ ‚Äî‚Äî‚Äì&gt;SparkÂ∏ÆÂä©‰∏≠ÂøÉÊâÄ‰ª•Âè™ËÉΩ‰∏ÄÁõ¥ÂºÄÁùÄ‰∫Ü‚Ä¶ÂûÉÂúæÁöÑ‰∏ÄÊâπÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅ]]></content>
      <categories>
        <category>ÂêêÊßΩ</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ÊúÄËøë‰∫ãÂÆú]]></title>
    <url>%2F2019%2F09%2F01%2F%E6%9C%80%E8%BF%91%E4%BA%8B%E5%AE%9C.html</url>
    <content type="text"><![CDATA[ÊúÄËøëÁîüÁóÖ‰∫Ü‚Ä¶Âä†‰∏äÂºÄÂ≠¶‰∫ãÊÉÖÂæàÂ§ö‚Ä¶ÂÅúÊõ¥‰∫Ü‰∏Ä‰∏™ÊòüÊúü Êé•‰∏ãÊù•‰ºöÊÖ¢ÊÖ¢Ë∑ü‰∏äÁöÑÂä†Ê≤πüÜô]]></content>
      <categories>
        <category>ÂêêÊßΩ</category>
      </categories>
      <tags>
        <tag>ËÆ∞ÂΩï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flask + PyJWT ÂÆûÁé∞Âü∫‰∫éJson Web TokenÁöÑÁî®Êà∑ËÆ§ËØÅÊéàÊùÉ]]></title>
    <url>%2F2019%2F08%2F23%2FFlask-PyJWT-%E5%AE%9E%E7%8E%B0%E5%9F%BA%E4%BA%8EJson-Web-Token%E7%9A%84%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81%E6%8E%88%E6%9D%83.html</url>
    <content type="text"><![CDATA[ÂâçË®ÄËøôÊ≥®ÂÆöÂèàÂ∞ÜÊòØ‰∏ÄÁØáÈïøÊñáÔºåÊé•Ëß¶Âà∞ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖ≥‰∫épythonÁöÑÊ°ÜÊû∂flaskÔºåÊú¨ÊñáÂ∞Ü‰ªéÊúÄÂºÄÂßãÁöÑÂÆâË£ÖflaskÔºåÂà∞‰∏émysqlÁªìÂêàÔºåÊúÄÂêéÂà∞Áî®pyjwtÂíåflask-jwtÂíårestfulÂÜô‰∏Ä‰∏™Â∏¶ÊúâtokenÁöÑÊé•Âè£„ÄÇ ÊäÄÊúØÊ†àÁÆÄ‰ªãFlaskÊòØ‰∏Ä‰∏™‰ΩøÁî®PythonÁºñÂÜôÁöÑËΩªÈáèÁ∫ßWebÂ∫îÁî®Ê°ÜÊû∂„ÄÇÂü∫‰∫éWerkzeug WSGI(PythonWebÊúçÂä°Âô®ÁΩëÂÖ≥Êé•Âè£ÔºàPython Web Server Gateway InterfaceÔºåÁº©ÂÜô‰∏∫WSGI)ÊòØPythonÂ∫îÁî®Á®ãÂ∫èÊàñÊ°ÜÊû∂ÂíåWebÊúçÂä°Âô®‰πãÈó¥ÁöÑ‰∏ÄÁßçÊé•Âè£ÔºåÂ∑≤ÁªèË¢´ÂπøÊ≥õÊé•Âèó, ÂÆÉÂ∑≤Âü∫Êú¨ËææÊàêÂÆÉÁöÑÂèØÁßªÊ§çÊÄßÊñπÈù¢ÁöÑÁõÆÊ†á)Â∑•ÂÖ∑ÁÆ±ÂíåJinja2 Ê®°ÊùøÂºïÊìé„ÄÇ Flask‰ΩøÁî®BSDÊéàÊùÉ„ÄÇ Flask‰πüË¢´Áß∞‰∏∫‚Äúmicroframework‚ÄùÔºåÂõ†‰∏∫ÂÆÉ‰ΩøÁî®ÁÆÄÂçïÁöÑÊ†∏ÂøÉÔºåÁî®extensionÂ¢ûÂä†ÂÖ∂‰ªñÂäüËÉΩ„ÄÇFlaskÊ≤°ÊúâÈªòËÆ§‰ΩøÁî®ÁöÑÊï∞ÊçÆÂ∫ì„ÄÅÁ™ó‰ΩìÈ™åËØÅÂ∑•ÂÖ∑„ÄÇÁÑ∂ËÄåÔºåFlask‰øùÁïô‰∫ÜÊâ©Â¢ûÁöÑÂºπÊÄßÔºåÂèØ‰ª•Áî®Flask-extensionÂä†ÂÖ•Ëøô‰∫õÂäüËÉΩÔºöORM„ÄÅÁ™ó‰ΩìÈ™åËØÅÂ∑•ÂÖ∑„ÄÅÊñá‰ª∂‰∏ä‰º†„ÄÅÂêÑÁßçÂºÄÊîæÂºèË∫´‰ªΩÈ™åËØÅÊäÄÊúØ SQLAlchemyFlaskÊòØ‰∏Ä‰∏™ÂæÆÂûãÊ°ÜÊû∂ÔºåËá™Ë∫´Ê≤°ÊúâÊèê‰æõÊï∞ÊçÆÂ∫ìÁÆ°ÁêÜÔºåË°®ÂçïÈ™åËØÅÔºåcookieÂ§ÑÁêÜÁ≠âÂäüËÉΩÔºåÂæàÂ§öÂäüËÉΩÈúÄË¶ÅÈÄöËøáÊâ©Â±ïÊâçËÉΩÂÆûÁé∞ÔºåÊï∞ÊçÆÂ∫ìÁÆ°ÁêÜÂ∞±ÈúÄË¶ÅSQLAlchemy„ÄÇSqlAlchemyÊòØPythonÁºñÁ®ãËØ≠Ë®Ä‰∏ãÁöÑ‰∏ÄÊ¨æORMÊ°ÜÊû∂ÔºåËØ•Ê°ÜÊû∂Âª∫Á´ãÂú®Êï∞ÊçÆÂ∫ìAPI‰πã‰∏äÔºå‰ΩøÁî®ÂÖ≥Á≥ªÂØπË±°Êò†Â∞ÑËøõË°åÊï∞ÊçÆÂ∫ìÊìç‰ΩúÔºåÁÆÄËÄåË®Ä‰πãÔºöÂ∞ÜÂØπË±°ËΩ¨Êç¢ÊàêSQLÔºåÁÑ∂Âêé‰ΩøÁî®Êï∞ÊçÆAPIÊâßË°åSQLÂπ∂Ëé∑ÂèñÊâßË°åÁªìÊûú„ÄÇ The first demo123456789from flask import Flaskapp = Flask(__name__)@app.route("/")def index(): return "hello world"if __name__ == '__main__': app.run() Á¨¨‰∏ÄË°å from‚Ä¶import‚Ä¶Â∞±ÊòØÂØºÂÖ•flask‰∏≠ÁöÑFlaskÊ®°ÂùóÔºå‰∏çÂêå‰∫éÁõ¥Êé•importÔºåfrom‚Ä¶importÁÆÄÂçïÊù•ËØ¥Â∞±ÊòØÂ∏ÆÊàë‰ªéËΩ¶ÈáåÊãøÁì∂Ê∞¥ÔºåËÄåimportÂàôÊòØÊääËΩ¶ÊãøËøáÊù•ÔºåÊâÄ‰ª•‰∫åËÄÖÂú®‰ΩøÁî®ÁöÑÊó∂ÂÄôËøòÊòØÊúâ‰∫õÂå∫Âà´ÁöÑÔºåÂú®ÂØºÂÖ•Êüê‰∏™.pyÊñá‰ª∂Êó∂Ôºå‰ΩøÁî®from‚Ä¶import‚Ä¶ÂèØ‰ª•Áõ¥Êé•Âú®ËØ•Êñá‰ª∂Â§π‰∏ã‰ΩøÁî®importÂêéÁöÑÂáΩÊï∞ÂêçÔºåËÄåÂ¶ÇÊûúÊòØimportÔºåÂ¶ÇÊûúË¶ÅË∞ÉÁî®ÂáΩÊï∞ÂøÖÈ°ªÁî®Á±ª.Ê®°Âùó„ÄÇ Á¨¨‰∫åË°å ËøôË°å‰ª£Á†ÅÈáåÊúâ‰∏Ä‰∏™ÂèÇÊï∞nameÔºåËøô‰∏™ÂèÇÊï∞Áî®Âà∞ÂëäËØâflask‰Ω†ÁöÑapplicationÁöÑÂêçÂ≠óÔºåÂÆòÊñπÊúâ‰∏ÄÂè•ËØùÔºö 12If you are using a single module,__name__ is always the correct value.If you however are using a package, it‚Äôs usually recommended to hardcode the name ofyour package there. ÊÑèÊÄùÂ∞±ÊòØËØ¥ÔºåÂ¶ÇÊûúÊòØÂçï‰∏ÄÁöÑÂ∫îÁî®ÔºåÁî®nameÂ∞±ÂèØ‰ª•‰∫ÜÔºåÂ¶ÇÊûúÊòØ‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èÂåÖÔºåÂ∞±hardcode‰∏Ä‰∏™ÂêçÂ≠óÁªôËøô‰∏™ÂèÇÊï∞„ÄÇÊØîÂ¶ÇÔºö 1app = Flask(‚ÄúmyApp‚Äù) Áî±‰∫éÁõÆÂâçÊàë‰ª¨ÁöÑÂ∫îÁî®ÈÉΩÁõ∏ÂØπÁÆÄÂçïÔºåÊâÄ‰ª•Áªü‰∏Ä‰ΩøÁî®name‰Ωú‰∏∫ÂèÇÊï∞„ÄÇ Á¨¨‰∏âË°å ‰ΩøÁî®route()‰øÆÈ•∞Âô®Ê≥®ÊòéÈÄöËøá‰ªÄ‰πàÊ†∑ÁöÑurlÂèØ‰ª•ËÆøÈóÆÊàë‰ª¨ÁöÑÂáΩÊï∞ÔºåÂêåÊó∂Âú®ÂáΩÊï∞‰∏≠ËøîÂõûË¶ÅÊòæÁ§∫Âú®ÊµèËßàÂô®‰∏≠ÁöÑ‰ø°ÊÅØ„ÄÇ ÊúÄÂêé Ë∞ÉÁî®run()ÊñπÊ≥ïÔºåËøêË°åflask webÂ∫îÁî®Á®ãÂ∫è 12if __name__ == '__main__': app.run() ÂÖ∂‰∏≠if __name__==&#39;__main__&#39;ÁöÑÊÑèÊÄùÊòØÔºåÂ¶ÇÊûúÊ≠§Êñá‰ª∂ÊòØÁõ¥Êé•ËøêË°åÁöÑÊâç‰ºöÊâßË°åapp.run()Ëøô‰∏™ÊñπÊ≥ïÔºåÂ¶ÇÊûúÊòØÈÄöËøáimportÂú®ÂÖ∂ÂÆÉpyÊñá‰ª∂‰∏≠Ë∞ÉÁî®ÁöÑËØùÊòØ‰∏ç‰ºöÊâßË°åÁöÑ„ÄÇ ÊØîÂ¶ÇÊàë‰ª¨‰øÆÊîπcode.py‰∏≠ÁöÑhello_worldÊñπÊ≥ïÔºåÂ¶Ç‰∏ãÔºö 1234567@app.route('/index')def hello_world(): if __name__=='main': return 'Hello World!' else: return "hello my name is "+__name__ Âç≥ÂΩìname‰∏∫mainÊó∂ËøòÊòØÊâßË°åÂéüÊù•ÁöÑÈÄªËæëÔºåËøîÂõûhello worldÔºåÂ¶ÇÊûú‰∏çÊòØÂàôËæìÂá∫Ê≠§Êó∂ÁöÑÂêçÂ≠ó„ÄÇ ÁÑ∂ÂêéÊàë‰ª¨Êñ∞Âª∫‰∏Ä‰∏™sub.pyÊñá‰ª∂ÁÑ∂ÂêéÂØºÂÖ•code.pyÔºåÂπ∂‰∏îÊâßË°åhello_worldÊñπÊ≥ï: 1234567import codedef CallCodeFun(): result = code.hello_world() print(result)CallCodeFun()print(__name__) Ê≠§Êó∂ÁöÑnameÊòØCodeËÄå‰∏çÊòØmainÔºåËÄåÊ≠§Êó∂ÔºåÂú®sub.py‰∏≠Âä†‰∏ÄÂè•print(name)ÂèØ‰ª•ÂèëÁé∞sub.py‰∏≠ÁöÑnameÂèòÊàê‰∫Ümain Áî±Ê≠§Êàë‰ª¨ÂèØ‰ª•ÂæóÂá∫ name Â¶ÇÊûúÊòØ main ÈÇ£‰πà‰ª£Ë°®‰ªñÊòØ‰∏Ä‰∏™ÂÖ•Âè£Êñá‰ª∂ÔºåÁõ¥Êé•ÊâßË°åÁöÑ„ÄÇ tip:Âª∫Êñá‰ª∂Êó∂Êñá‰ª∂ÂêçÊúÄÂ•Ω‰∏çË¶ÅÂè´codeÔºåÂõ†‰∏∫pythonÊúâÊ®°ÂùóÂêçÂ∞±Âè´code„ÄÇ flask-sqlalchemy Êï∞ÊçÆÂ∫ìÈÖçÁΩÆÔºå‰∏ädemo 12345678910111213141516171819202122from flask_sqlalchemy import SQLAlchemyfrom flask import Flaskimport configparser# ÂëäËØâflask appÁöÑÂêçÂ≠óapp = Flask(__name__)//ÈÄöËøáconfigparserËé∑ÂèñËØªÂèñÈÖçÁΩÆÊñá‰ª∂ÁöÑËß£ÈáäÂô®my_config = configparser.ConfigParser()my_config.read('db.conf')# dialect+driver://username:password@host:port/database?charset=utf8# ÈÖçÁΩÆ sqlalchemy Êï∞ÊçÆÂ∫ìÈ©±Âä®://Êï∞ÊçÆÂ∫ìÁî®Êà∑Âêç:ÂØÜÁ†Å@‰∏ªÊú∫Âú∞ÂùÄ:Á´ØÂè£/Êï∞ÊçÆÂ∫ì?ÁºñÁ†Å# py3Êó†Ê≥ïÁªßÁª≠‰ΩøÁî®sqldbÔºåÊâÄ‰ª•ÈááÁî®pymysqlapp.config['SQLALCHEMY_DATABASE_URI'] = 'mysql://' + my_config.get('DB', 'DB_USER') + ':' + \ my_config.get('DB', 'DB_PASSWORD') + '@' + my_config.get('DB', 'DB_HOST') + '/' + \ my_config.get('DB', 'DB_DB') # ËÆæ‰∏∫True Ë°®Á§∫ÊØèÊ¨°ËØ∑Ê±ÇÁªìÊùüÂêéÈÉΩ‰ºöËá™Âä®Êèê‰∫§Êï∞ÊçÆÂ∫ìÁöÑÂèòÂä®Ôºå‰ΩÜÂÉèadd delete insertÁ≠â‰ªçÈúÄË¶Åcommit,Âª∫ËÆÆ‰∏çË¶ÅËÆæ‰∏∫trueapp.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = Truemydb = SQLAlchemy()mydb.init_app(app)if __name__ == "__main__": app.run(debug=True) ‰∏∫‰∫Ü‰Ωø‰ª£Á†ÅÁªìÊûÑÊõ¥Ê∏ÖÊô∞ÔºåËøôÈáå‰ΩøÁî®Âè¶‰∏ÄÁßçÈÖçÁΩÆÊñπÂºèÔºåÂç≥‰ΩøÁî®ÂçïÁã¨ÈÖçÁΩÆÊñá‰ª∂ÁöÑÊñá‰ª∂Êù•ÂÅöÂÖ®Â±ÄFlaskÈÖçÁΩÆ ÁÆ°ÊéßÊâÄÊúâÁöÑÈÖçÁΩÆÊñá‰ª∂conf.py: 1234567DB_USER = 'root'DB_PASSWORD = 'jwyjwy9951206-=-'DB_HOST = 'localhost'DB_DB = 'flask_migrate_demo'DEBUG = True SQLALCHEMY_TRACK_MODIFICATIONS = FalseSQLALCHEMY_DATABASE_URI = 'mysql+pymysql://' + DB_USER + ':' + DB_PASSWORD + '@' + DB_HOST + '/' + DB_DB SQLAlchemyÂÖÅËÆ∏Êàë‰ª¨Ê†πÊçÆÊï∞ÊçÆÂ∫ìÁöÑË°®ÁªìÊûÑÊù•ÂàõÂª∫Êï∞ÊçÆÊ®°ÂûãÔºåÂèç‰πã‰∫¶ÂèØ„ÄÇ ÊâÄ‰ª•Êàë‰ª¨‰∏ÄËà¨Êó†È°ªÊâãÂä®ÁöÑÁôªÂΩïÂà∞Êï∞ÊçÆÂ∫ì‰∏≠‰ΩøÁî® SQL ËØ≠Âè•Êù•ÂàõÂª∫Ë°®, Êàë‰ª¨Âè™ÈúÄÊääÊï∞ÊçÆÊ®°ÂûãÂÆö‰πâÂ•Ω‰∫Ü‰πãÂêé, Ë°®ÁªìÊûÑ‰πüÂ∞±Êúâ‰∫Ü Êñ∞Âª∫model.pyÔºåÂπ∂ÂÆö‰πâ‰∏Ä‰∏™Áî®Êà∑Ë°®Êï∞ÊçÆÊ®°Âûã 12345678from flask_sqlalchemy import SQLAlchemydb = SQLAlchemy()class User(db.Model):user_id = db.Column(db.Integer, primary_key=True)user_name = db.Column(db.String(60), nullable=False)user_password = db.Column(db.String(30), nullable=False)user_nickname = db.Column(db.String(50))user_email = db.Column(db.String(30), nullable=False) Êñ∞Âª∫db.pyÔºåÂà©Áî®Flask-ScriptÂíåFlask-MigrateÔºåÊê≠Âª∫dbÂíåapp‰πãÈó¥ÁöÑÊ°•Ê¢Å 1234567891011from flask import Flaskfrom flask_script import Managerfrom flask_migrate import Migrate, MigrateCommandfrom model import dbapp = Flask(__name__)app.config.from_object('conf')migrate = Migrate(app, db)manager = Manager(app)manager.add_command('db', MigrateCommand)if __name__ == '__main__':manager.run() Flask-ScriptÂíåFlask-Migrate‰ΩøÁî® ÊúÄÂêéÔºåÂú®pycharmÁöÑÊéßÂà∂Âè∞Êâì‰∏ã‰∏âË°åËøÅÁßª‰ª£Á†ÅÔºåËøôÊ†∑Â∞±ËÉΩÂú®Êï∞ÊçÆÂ∫ì‰∏≠ÁúãËßÅË∑ümodelÂ≠óÊÆµ‰∏ÄÊ†∑ÁöÑË°®‰∫Ü 123python db.py db initpython db.py db migratepython db.py db upgrade Á§∫‰æãÊé•Âè£ÂÆûÁé∞ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091# Áî®Âà∞flask‰∏≠ÁöÑFlaskÊ°ÜÊû∂ÔºåjsonifyËøîÂõûjsonÊï∞ÊçÆÔºårequestÂ∞ÜÂâçÁ´ØÂ≠óÊÆµ‰º†ÂÖ•ÂêéÁ´Øfrom flask import Flask, jsonify, request# Â∞Ümodel‰∏≠ÁöÑUserÔºådbÂØπË±°‰º†ÂÖ•from model import db, User# ÂëäËØâflaskËøô‰∏™appË¶ÅÁî®ÂÆÉapp = Flask(__name__)# ËØªÂèñÈÖçÁΩÆÊñá‰ª∂Ôºå‰∏ªË¶ÅÊòØËøûÊé•mysqlapp.config.from_object('conf')# ÂàùÂßãÂåñdb.init_app(app)# ÂºÄÂßãË∑ØÁî±@app.route('/')def index(): return '&lt;h1&gt;Hello Flask!&lt;/h1&gt;'# Â¢û@app.route('/user', methods=['POST'])def addUser(): user_name = request.form.get('user_name') user_password = request.form.get('user_password') user_nickname = request.form.get('user_nickname') user_email = request.form.get('user_email') user = User(user_name=user_name, user_password=user_password, user_nickname=user_nickname, user_email=user_email) try: db.session.add(user) db.session.commit() except: db.session.rollback() db.session.flush() userId = user.user_id if (user.user_id is None): result = &#123;'msg': 'Ê∑ªÂä†Â§±Ë¥•'&#125; return jsonify(data=result) data = User.query.filter_by(user_id=userId).first() result = &#123;'user_id': data.user_id, 'user_name': data.user_name, 'user_nickname': data.user_nickname, 'user_email': data.user_email&#125; return jsonify(data=result)# Êü•@app.route('/user/&lt;int:userId&gt;', methods=['GET'])def getUser(userId): user = User.query.filter_by(user_id=userId).first() if (user is None): result = &#123;'msg': 'Êâæ‰∏çÂà∞Êï∞ÊçÆ'&#125; else: result = &#123;'user_id': user.user_id, 'user_name': user.user_name, 'user_nickname': user.user_nickname, 'user_email': user.user_email&#125; return jsonify(data=result)# Êîπ@app.route('/user/&lt;int:userId&gt;', methods=['PATCH'])def updateUser(userId): user_name = request.form.get('user_name') user_password = request.form.get('user_password') user_nickname = request.form.get('user_nickname') user_email = request.form.get('user_email') try: user = User.query.filter_by(user_id=userId).first() if (user is None): result = &#123;'msg': 'Êâæ‰∏çÂà∞Ë¶Å‰øÆÊîπÁöÑËÆ∞ÂΩï'&#125; return jsonify(data=result) else: user.user_name = user_name user.user_password = user_password user.user_nickname = user_nickname user.user_email = user_email db.session.commit() except: db.session.rollback() db.session.flush() userId = user.user_id data = User.query.filter_by(user_id=userId).first() result = &#123;'user_id': data.user_id, 'user_name': data.user_name, 'user_password': data.user_password, 'user_nickname': data.user_nickname, 'user_email': data.user_email&#125; return jsonify(data=result)# Êü•ÂÖ®ÈÉ®@app.route('/user', methods=['GET'])def getUsers(): data = User.query.all() data_all = [] for user in data: data_all.append(&#123;'user_id': user.user_id, 'user_name': user.user_name, 'user_nickname': user.user_nickname, 'user_email': user.user_email&#125;) return jsonify(users=data_all)# Âà†@app.route('/user/&lt;int:userId&gt;', methods=['DELETE'])def deleteUser(userId): # Âà†Èô§Êï∞ÊçÆ User.query.filter_by(user_id=userId).delete() db.session.commit() return getUsers()if __name__ == '__main__': app.run(debug=app.config['DEBUG']) ‚Äã SQLAlchemy Âá†ÁßçÊü•ËØ¢ÊñπÂºèÊÄªÁªì ‰ΩøÁî®Flask-RESTfulÂø´ÈÄüÂàõÂª∫RESTful APIÊé•Âè£ÂÖàÂÆπÊàëÊääÈ°πÁõÆÂÅöÂÆå‚Ä¶ÂæÖÁª≠‚Ä¶‚Ä¶.Êó†ËÅäÁúãÁúãÊñáÊ°£Ôºöflask-restful‰∏≠ÊñáÂÆòÊñπÊñáÊ°£ ‰ΩøÁî®Flask + PyJWT ÂÆûÁé∞Âü∫‰∫éJson Web TokenÁöÑÁî®Êà∑ËÆ§ËØÅÊéàÊùÉÂæÖÊõ¥‚Ä¶Êó†ËÅäÁúãÁúãÊñáÊ°£ÔºöFlask + PyJWT ÂÆûÁé∞Âü∫‰∫éJson Web TokenÁöÑÁî®Êà∑ËÆ§ËØÅÊéàÊùÉ ÈóÆÈ¢ò1.‰∏ªË¶ÅÈóÆÈ¢òÂ∞±ÊòØflaskÂíåmysqlÁöÑËøûÊé•ÈóÆÈ¢òÔºåÂá∫Áé∞ÁöÑÊúÄÊ£òÊâãÁöÑÈóÆÈ¢òÈ¶ñÂÖàÊòØmysqldbÊòØpy2ÁöÑÔºåpy3Ê≤°ÊúâÔºåÁî®pymysql‰ª£ÊõøÔºåÂú®SQLALCHEMY_DATABASE_URIÊ≥®ÊÑè‰øÆÊîπdriverÈ©±Âä®„ÄÇ2.ÊúÄÁªà‰øÆÊîπÊñπÊ°àÊòØËá™Â∑±Áî®‰∏Ä‰∏™demoÂª∫Â•Ω‰∫ÜÊï∞ÊçÆÂ∫ìÂíåË°®(ËÆ∞Âæó‰øùÂ≠òÂ•Ωdemo)ÔºådemoÂ¶Ç‰∏ãÔºåÁÑ∂ÂêéÂÜçËøêË°åÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ 12345678910111213141516from sqlalchemy import create_engine,Table,Column,Integer,String,MetaData,ForeignKeyengine=create_engine("mysql+pymysql://root:a5230411@localhost:3306/test",echo=True)metadata=MetaData(engine)user=Table('user',metadata, Column('id',Integer,primary_key=True), Column('name',String(20)), Column('fullname',String(40)), )address_table = Table('address', metadata, Column('id', Integer, primary_key=True), Column('user_id', None, ForeignKey('user.id')), Column('email', String(128), nullable=False) )metadata.create_all() 3.Ëß£ÂÜ≥ sqlalchemy Êä•Èîô:(1193, ‚ÄúUnknown system variable ‚Äòtx_isolation‚Äô‚Äù): ‰º†ÈÄÅÈó® ÂèÇËÄÉÁΩëÂùÄ Flask + PyJWT ÂÆûÁé∞Âü∫‰∫éJson Web TokenÁöÑÁî®Êà∑ËÆ§ËØÅÊéàÊùÉ ‰ΩøÁî® Flask ËÆæËÆ° RESTful ÁöÑËÆ§ËØÅ ‰ΩøÁî®Flask-RESTfulÂø´ÈÄüÂàõÂª∫RESTful APIÊé•Âè£ Flask + flask-jwt ÂÆûÁé∞Âü∫‰∫éJson Web TokenÁöÑÁî®Êà∑ËÆ§ËØÅÊéàÊùÉ FlaskÁ®ãÂ∫èÁõÆÂΩïÁªìÊûÑ‚Äî‚ÄîÊûÑÂª∫ÂèØÊâ©Â±ïÁöÑFlaskÂ∫îÁî®Á®ãÂ∫è PythonÁöÑflaskÔºömodels.pyÊù•ÂàõÂª∫mysqlÊï∞ÊçÆÂ∫ì python‰ΩøÁî®sqlalchemyËøûÊé•mysqlÊï∞ÊçÆÂ∫ì Ê∑±ÂÖ•ÊµÖÂá∫Flask(Â≠¶‰π†ÊïôÁ®ã) Ê∑±ÂÖ•ÊµÖÂá∫ÁêÜËß£PythonË£ÖÈ•∞Âô® flask-restful‰∏≠ÊñáÂÆòÊñπÊñáÊ°£]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>flask</tag>
        <tag>PyJWT</tag>
        <tag>restful</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÊ†∏ÂøÉÊäÄÊúØ]]></title>
    <url>%2F2019%2F08%2F20%2FJava%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF.html</url>
    <content type="text"><![CDATA[Á¨¨‰∏ÄÁ´†JavaÁöÑ11‰∏™ÂÖ≥ÈîÆÊúØËØ≠ ÁÆÄÂçïÊÄß Èù¢ÂêëÂØπË±° ÂàÜÂ∏ÉÂºè ÂÅ•Â£ÆÊÄß ÂÆâÂÖ®ÊÄß ‰ΩìÁ≥ªÁªìÊûÑ‰∏≠Á´ã ÂèØÁßªÊ§çÊÄß Ëß£ÈáäÂûã È´òÊÄßËÉΩ Â§öÁ∫øÁ®ã Âä®ÊÄÅÊÄß Java appletÂú®ÁΩëÈ°µ‰∏≠ËøêË°åÁöÑJavaÁ®ãÂ∫èÁß∞‰∏∫applet Á¨¨‰∫åÁ´†ÈÉ®ÂàÜÊúØËØ≠ JDK(java development kit):javaÂºÄÂèëÂ∑•ÂÖ∑ÂåÖ JRE(Java Runtime Environment):ËøêË°åjavaÁ®ãÂ∫èÁî®Êà∑ÊâÄ‰ΩøÁî®ÁöÑËΩØ‰ª∂ SDK(Software Development Kit):ËΩØ‰ª∂ÂºÄÂèëÂåÖ ÂÆâË£ÖËøáÁ®ãMAC‰∏≠JAVAÁéØÂ¢ÉÂèòÈáèÈÖçÁΩÆ‰ª•ÂèäIntellij IDEAÂ¶Ç‰ΩïÈÖçÁΩÆJDKIDEAÁöÑÊ†°Âõ≠ÈÇÆÁÆ±ÊøÄÊ¥ªÊñπÂºèIntelliJ IDEA Â∏∏Áî®Âø´Êç∑ÈîÆ ‰πã Mac ÁâàIntellij IDEAÂø´Êç∑ÁîüÊàêÂ∏∏Áî®‰ª£Á†Å ÁêêÁ¢éÁü•ËØÜÁÇπ 0x1.0p-3:0xË°®Á§∫16ËøõÂà∂Ôºå‰ΩøÁî®pË°®Á§∫ÊåáÊï∞ÔºåÊâÄ‰ª•Â∞±ÊòØ1.0*2ÁöÑ-3Ê¨°Êñπ ‰∏â‰∏™ÁâπÊÆäÁöÑÊµÆÁÇπÊï∞ÂÄºÔºöÊ≠£Êó†Á©∑Â§ß(Double.POSITIVE_INFINITY)„ÄÅË¥üÊó†Á©∑Â§ß(Double.NEGATIVE_INFINITY)„ÄÅNaN(Double.NaN) ÊµÆÁÇπÊï∞ÂÄº‰∏çÈÄÇÁî®‰∫éÊó†Ê≥ïÊé•ÂèóËàçÂÖ•ËØØÂ∑ÆÁöÑËÆ°ÁÆó‰∏≠ÔºåË¶ÅÊÉ≥ÂÆåÂÖ®Ê≤°ÊúâËØØÂ∑ÆÔºåÈúÄË¶Å‰ΩøÁî®BigDecimalÁ±ª ÈÉ®ÂàÜÁâπÊÆäÂ≠óÁ¨¶ÁöÑËΩ¨‰πâÂ∫èÂàóÔºö\b ÈÄÄÊ†º \t Âà∂Ë°® \n Êç¢Ë°å \r ÂõûËΩ¶ \‚ÄúÂèåÂºïÂè∑ \ÂèçÊñúÊù† Âº∫ÁÉàÂª∫ËÆÆ‰∏çË¶ÅÂú®Á®ãÂ∫è‰∏≠‰ΩøÁî®charÁ±ªÂûãÔºåÂõ†‰∏∫unicodeÊó©Â∑≤ÁªèË∂ÖËøá‰∫Ü65536‰∏™ Á¨¨‰∏âÁ´†ÈÉ®ÂàÜÊúØËØ≠ Á±ªÂ∏∏ÈáèÔºöstatic final,Á±ªÂ∏∏ÈáèÁöÑÂÆö‰πâÂú®mainÊñπÊ≥ïÁöÑÂ§ñÈÉ® Êï¥Êï∞Ë¢´0Èô§Â∞Ü‰ºö‰∫ßÁîüÂºÇÂ∏∏ÔºåÊµÆÁÇπÊï∞Ë¢´0Èô§Â∞Ü‰ºöÂæóÂà∞Êó†Á©∑Â§ßÊàñNaNÁªìÊûú public static strictfp void main(String[] args)ÔºåÂú®ËØ•mainÂáΩÊï∞‰∏≠ÊâÄÊúâÊåá‰ª§ÈÉΩÂ∞Ü‰ΩøÁî®‰∏•Ê†ºÁöÑÊµÆÁÇπËÆ°ÁÆó condition ? expression1 : expression2 eg: x&lt;y ? x : y ‰ΩçËøêÁÆóÁ¨¶Ôºö&amp;„ÄÅ|„ÄÅ^„ÄÅ~ÊãìÂ±ïÔºöÂ•áÊï∞‰∏™Êï∞Ôºå‰∏§‰∏™‰∏§‰∏™ÊàêÂØπÊúÄÊúâ‰∏Ä‰∏™ÂçïÁã¨ÔºåÂ¶Ç‰ΩïÊâæÂá∫Ëøô‰∏™ÂçïÁã¨ÁöÑÊï∞Â≠óÊòØÂá†ÔºåÂ§çÊùÇÂ∫¶Âú®O(n)‰ª•ÂÜÖÔºöÁî®ÂºÇÊàñÁöÑÊÄùÊÉ≥Âç≥ÂèØÔºåÂÖ®ÈÉ®ÂºÇÊàñ Áßª‰ΩçËøêÁÆóÁ¨¶: &lt;&lt;(ÁÆóÊï∞Áßª‰Ωç)&gt;&gt; &gt;&gt;&gt;(ÈÄªËæëÂè≥Áßª),ÂÖ∂‰∏≠&gt;&gt;&gt;‰ºöÁî®0Â°´ÂÖÖÈ´ò‰ΩçÔºåÁßª‰ΩçËøêÁÆóÁ¨¶ÁöÑÂè≥Êìç‰ΩúÊï∞Ë¶ÅÊª°Ë∂≥Ê®°32ÁöÑËøêÁÆó(Â¶ÇÊûúÂ∑¶ËæπÊìç‰ΩúÊï∞ÊòØlongÂàôË¶ÅÊª°Ë∂≥Ê®°64)Ôºå1&lt;&lt;35 == 1&lt;&lt;3 == 8 Êûö‰∏æÁ±ªÂûãÔºöenum Size{SMALL,MEDIUM,LARGE } Â≠óÁ¨¶‰∏≤ Â≠ê‰∏≤: 12String greeting = "Hello";String s = greeting.substring(0,3); ÊãºÊé•:Áõ¥Êé•Áî®+ËøûÊé•„ÄÅÂ¶ÇÊûúÈúÄË¶ÅÂ§ö‰∏™Â≠óÁ¨¶‰∏≤ÊîæÂú®‰∏ÄËµ∑ÔºåÂπ∂‰∏îÁî®‰∏Ä‰∏™ÂÆöÁïåÁ¨¶ÂàÜÂâ≤ÔºåÂèØ‰ª•ÈááÁî®ÈùôÊÄÅjoinÊñπÊ≥ïÔºö 12String all = String.join("/","S","M","L","XL")// string: "S/M/L/XL" java‰∏≠‰∏çÂÖÅËÆ∏‰øÆÊîπÂ≠óÁ¨¶Ôºå‰ΩÜÊòØÂèØ‰ª•‰øÆÊîπÂ≠óÁ¨¶‰∏≤ÂèòÈáè*Â≠óÁ¨¶‰∏≤ÊØîËæÉÁî®equalsÊñπÊ≥ïÔºå‰æãÂ¶ÇÔºö‚ÄùHello‚Äù.equals(greeting),‚ÄùHello‚Äù.equalsIgnoreCase(‚Äúhello‚Äù)„ÄåÊó†ËßÜÂ§ßÂ∞èÂÜôÁöÑÊØîËæÉ„Äç java.lang.stringÈÉ®ÂàÜapiStringÁ±ªÂ∏∏Áî®ÊñπÊ≥ï‰πãcharAt()„ÄÅcodePointAt()Á§∫‰æãoffsetByCodePoints()‰∏écodePointAt() Ê≥®ÊÑèlastIndexOf(int cp,int fromindex)ÔºåÊòØËøîÂõû‰ªéindex‰ΩçÁΩÆÂºÄÂßãÊâæÂà∞ÁöÑÁ¨¨‰∏Ä‰∏™Á¨¶ÂêàÁöÑÂ≠óÁ¨¶‰∏≤ÁöÑ‰ΩçÁΩÆ 12345678910111213141516public int lastIndexOf(int ch, int fromIndex) &#123; if (ch &lt; Character.MIN_SUPPLEMENTARY_CODE_POINT) &#123; // handle most cases here (ch is a BMP code point or a // negative value (invalid code point)) final char[] value = this.value; int i = Math.min(fromIndex, value.length - 1); for (; i &gt;= 0; i--) &#123; if (value[i] == ch) &#123; return i; &#125; &#125; return -1; &#125; else &#123; return lastIndexOfSupplementary(ch, fromIndex); &#125; &#125; input ScannerÂú®utilÂåÖ‰∏≠ÔºåÂΩì‰ΩøÁî®ÁöÑÁ±ª‰∏çÂú®java.lang‰∏≠Êó∂ÔºåÈÉΩÈúÄË¶ÅÂØºÂåÖ 1234567Scanner sc = new Scanner(System.in); String nextLine = sc.nextLine(); System.out.println("please input your name:" + nextLine); int nextInt = sc.nextInt(); System.out.println("please input your age:" + nextInt);String next = sc.next();System.out.println("please input your name:" + next);]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[kafka]]></title>
    <url>%2F2019%2F08%2F18%2Fkafka.html</url>
    <content type="text"><![CDATA[ÂàùËØÜkafkakafkaÊ¶ÇÂøµKafkaÊòØ‰∏ÄÁßçÈ´òÂêûÂêêÈáèÁöÑÂàÜÂ∏ÉÂºèÂèëÂ∏ÉËÆ¢ÈòÖÊ∂àÊÅØÁ≥ªÁªüÔºåÂÆÉÂèØ‰ª•Â§ÑÁêÜÊ∂àË¥πËÄÖÂú®ÁΩëÁ´ô‰∏≠ÁöÑÊâÄÊúâÂä®‰ΩúÊµÅÊï∞ÊçÆ,ÊòØÁî®‰∫éÊûÑÂª∫ÂÆûÊó∂Êï∞ÊçÆÁÆ°ÈÅìÂíåÊµÅÂ∫îÁî®Á®ãÂ∫è„ÄÇ Âõõ‰∏™ÊúØËØ≠ TopicKafkaÂ∞ÜÊ∂àÊÅØÁßçÂ≠ê(Feed)ÂàÜÈó®Âà´Á±ªÔºåÊØè‰∏ÄÁ±ªÁöÑÊ∂àÊÅØÁß∞‰πã‰∏∫‰∏Ä‰∏™‰∏ªÈ¢ò(Topic)„ÄÇ ProducerÂèëÂ∏ÉÊ∂àÊÅØÁöÑÂØπË±°Áß∞‰πã‰∏∫‰∏ªÈ¢òÁîü‰∫ßËÄÖ(Kafka topic producer)„ÄÇÁîü‰∫ßËÄÖÂèëÂ∏ÉÊ∂àÊÅØÊó∂Ë¶ÅÈÄâÂÆöTopic‰∏äÁöÑÂàÜÂå∫„ÄÇ ConsumerËÆ¢ÈòÖÊ∂àÊÅØÂπ∂Â§ÑÁêÜÂèëÂ∏ÉÁöÑÊ∂àÊÅØÁöÑÁßçÂ≠êÁöÑÂØπË±°Áß∞‰πã‰∏∫‰∏ªÈ¢òÊ∂àË¥πËÄÖ(consumers)„ÄÇ‰∏ÄËà¨Ê∂àË¥πËÄÖÊ®°ÂûãÂèØ‰ª•ÂàÜ‰∏∫‰∏§Á±ªÔºöÈòüÂàóÂíåÂèëÂ∏É-ËÆ¢ÈòÖÂºè„ÄÇÈòüÂàóÁöÑÂ§ÑÁêÜÊñπÂºèÂ∞±ÊòØ‰∏ÄÊù°Ê∂àÊÅØÂè™Êúâ‰∏Ä‰∏™Ê∂àË¥πËÄÖÁü•ÈÅìÂπ∂Â§ÑÁêÜÔºåÂèëÂ∏É-ËÆ¢ÈòÖÁöÑÂ§ÑÁêÜÊñπÂºèÂàôÊòØÊ∂àÊÅØË¢´ÊâÄÊúâ‰∫∫ÈÉΩÁü•ÈÅìÔºåÊâÄÊúâ‰∫∫ÈÉΩÂèØ‰ª•Êù•Â§ÑÁêÜËØ•Ê∂àÊÅØÔºåkafka‰∏∫Ëøô‰∏§ÁßçÊ®°ÂûãÊèê‰æõ‰∫ÜÂçï‰∏ÄÊäΩË±°Ê®°ÂûãÔºöÊ∂àË¥πËÄÖÁªÑÔºàcosumer groupÔºâ„ÄÇÊØè‰∏™Ê∂àË¥πËÄÖÈÉΩÊúâ‰∏Ä‰∏™ÁªÑÂêçÔºåÂΩìÊâÄÊúâ‰∫∫ÁöÑÁªÑÂêçÈÉΩ‰∏ç‰∏ÄÊ†∑ÁöÑÊó∂ÂÄôÔºåËøô‰∏™Êó∂ÂÄôÂ∞±ÊòØÂèëÂ∏É-ËÆ¢ÈòÖÊ®°ÂºèÔºåÂõ†‰∏∫Ê∂àÊÅØË¶ÅÊåâÁÖßÊ∂àË¥πËÄÖÁªÑ‰∏∫Âçï‰ΩçÂèëÂá∫ÁöÑÔºåËøôÊÑèÂë≥ÁùÄÊ≠§Êó∂ÊØè‰∏™Ê∂àË¥πËÄÖÈÉΩ‰ºöÊî∂Âà∞Ê∂àÊÅØÂπ∂ÂèØ‰ª•ËøõË°åÂ§ÑÁêÜÔºõÂΩìÊâÄÊúâ‰∫∫ÁöÑÊ∂àË¥πËÄÖÁªÑÂêçÂ≠óÈÉΩ‰∏ÄÊ†∑Êó∂ÔºåÊÑèÂë≥ÁùÄÂè™‰ºöÊúâ‰∏Ä‰∏™Ê∂àË¥πËÄÖÊî∂Âà∞Ê∂àÊÅØÂπ∂ÂèØ‰ª•ËøõË°åÂ§ÑÁêÜÔºåÊ≠§Êó∂Â∞±ÊòØÈòüÂàóÊ®°Âºè‰∫Ü„ÄÇ BrokerÂ∑≤ÂèëÂ∏ÉÁöÑÊ∂àÊÅØ‰øùÂ≠òÂú®‰∏ÄÁªÑÊúçÂä°Âô®‰∏≠ÔºåÁß∞‰πã‰∏∫KafkaÈõÜÁæ§„ÄÇÈõÜÁæ§‰∏≠ÁöÑÊØè‰∏Ä‰∏™ÊúçÂä°Âô®ÈÉΩÊòØ‰∏Ä‰∏™‰ª£ÁêÜ(Broker). Ê∂àË¥πËÄÖÂèØ‰ª•ËÆ¢ÈòÖ‰∏Ä‰∏™ÊàñÂ§ö‰∏™‰∏ªÈ¢òÔºàtopicÔºâÔºåÂπ∂‰ªéBrokerÊãâÊï∞ÊçÆÔºå‰ªéËÄåÊ∂àË¥πËøô‰∫õÂ∑≤ÂèëÂ∏ÉÁöÑÊ∂àÊÅØ„ÄÇ ‰∏â‰∏™ÂÖ≥ÈîÆËÉΩÂäõ ÂèëÂ∏ÉÂíåËÆ¢ÈòÖÊ∂àÊÅØÊµÅÔºåÂú®ËøôÊñπÈù¢ÔºåÂÆÉÁ±ª‰ºº‰∫é‰∏Ä‰∏™Ê∂àÊÅØÈòüÂàóÊàñ‰ºÅ‰∏öÊ∂àÊÅØÁ≥ªÁªü ‰ª•ÂÆπÈîôÁöÑÊñπÂºèÂ≠òÂÇ®Ê∂àÊÅØÔºàÊµÅ) Âú®Ê∂àÊÅØÊµÅÂèëÁîüÊó∂Â§ÑÁêÜ‰ªñ‰ª¨ Âõõ‰∏™Ê†∏ÂøÉAPI Â∫îÁî®Á®ãÂ∫è‰ΩøÁî® Producer API ÂèëÂ∏ÉÊ∂àÊÅØÂà∞1‰∏™ÊàñÂ§ö‰∏™topicÔºà‰∏ªÈ¢òÔºâ„ÄÇ Â∫îÁî®Á®ãÂ∫è‰ΩøÁî® Consumer API Êù•ËÆ¢ÈòÖ‰∏Ä‰∏™ÊàñÂ§ö‰∏™topicÔºåÂπ∂Â§ÑÁêÜ‰∫ßÁîüÁöÑÊ∂àÊÅØ Â∫îÁî®Á®ãÂ∫è‰ΩøÁî® Streams API ÂÖÖÂΩì‰∏Ä‰∏™ÊµÅÂ§ÑÁêÜÂô®Ôºå‰ªé1‰∏™ÊàñÂ§ö‰∏™topicÊ∂àË¥πËæìÂÖ•ÊµÅÔºåÂπ∂Áîü‰∫ß‰∏Ä‰∏™ËæìÂá∫ÊµÅÂà∞1‰∏™ÊàñÂ§ö‰∏™ËæìÂá∫topicÔºåÊúâÊïàÂú∞Â∞ÜËæìÂÖ•ÊµÅËΩ¨Êç¢Âà∞ËæìÂá∫ÊµÅ„ÄÇ Connector APIÂÖÅËÆ∏ÊûÑÂª∫ÊàñËøêË°åÂèØÈáçÂ§ç‰ΩøÁî®ÁöÑÁîü‰∫ßËÄÖÊàñÊ∂àË¥πËÄÖÔºåÂ∞ÜtopicËøûÊé•Âà∞Áé∞ÊúâÁöÑÂ∫îÁî®Á®ãÂ∫èÊàñÊï∞ÊçÆÁ≥ªÁªü„ÄÇ‰æãÂ¶ÇÔºå‰∏Ä‰∏™ÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÁöÑËøûÊé•Âô®ÂèØÊçïËé∑ÊØè‰∏Ä‰∏™ÂèòÂåñ„ÄÇ kafkaÂÆâË£ÖËøáÁ®ã kafkaÁöÑÂÆâË£Ö 1brew install kafka ÂÆâË£Ö‰ºö‰æùËµñzookeeper Ê≥®ÊÑèÔºöÂÆâË£ÖÁõÆÂΩïÔºö/usr/local/Cellar/kafka/0.10.2.0 ÂÆâË£ÖÁöÑÈÖçÁΩÆÊñá‰ª∂‰ΩçÁΩÆ/usr/local/etc/kafka/server.properties/usr/local/etc/kafka/zookeeper.properties ÂêØÂä®zookeeper 1zookeeper-server-start /usr/local/etc/kafka/zookeeper.properties &amp; ÂêØÂä®kafka 1kafka-server-start /usr/local/etc/kafka/server.properties &amp; ÂàõÂª∫topicËÆ©Êàë‰ª¨‰ΩøÁî®Âçï‰∏™ÂàÜÂå∫ÂíåÂè™Êúâ‰∏Ä‰∏™ÂâØÊú¨ÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫‚Äútest‚ÄùÁöÑ‰∏ªÈ¢ò 1kafka-topics --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test Êü•ÁúãÂàõÂª∫ÁöÑtopicÊàë‰ª¨Áé∞Âú®ÂèØ‰ª•ÁúãÂà∞ËØ•‰∏ªÈ¢òÔºåÂ¶ÇÊûúÊàë‰ª¨ËøêË°ålist topicÂëΩ‰ª§Ôºö 1kafka-topics --list --zookeeper localhost:2181 ÂèëÈÄÅÊ∂àÊÅØKafkaÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÂëΩ‰ª§Ë°åÂÆ¢Êà∑Á´ØÔºåÂÆÉÂ∞Ü‰ªéÊñá‰ª∂ÊàñÊ†áÂáÜËæìÂÖ•Êé•Êî∂ËæìÂÖ•ÔºåÂπ∂Â∞ÜÂÖ∂‰Ωú‰∏∫Ê∂àÊÅØÂèëÈÄÅÂà∞KafkaÈõÜÁæ§„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÊØèË°åÈÉΩÂ∞Ü‰Ωú‰∏∫ÂçïÁã¨ÁöÑÊ∂àÊÅØÂèëÈÄÅ„ÄÇËøêË°åÁîü‰∫ßËÄÖÔºåÁÑ∂ÂêéÂú®ÊéßÂà∂Âè∞‰∏≠ÈîÆÂÖ•‰∏Ä‰∫õÊ∂àÊÅØÂèëÈÄÅÂà∞ÊúçÂä°Âô®„ÄÇ 1kafka-console-producer --broker-list localhost:9092 --topic test Ê∂àË¥πÊ∂àÊÅØKafkaËøòÊúâ‰∏Ä‰∏™ÂëΩ‰ª§Ë°åÊ∂àË¥πËÄÖÔºåÂ∞ÜÊ∂àÊÅØËΩ¨ÂÇ®Âà∞Ê†áÂáÜËæìÂá∫„ÄÇ 1kafka-console-consumer --bootstrap-server localhost:9092 --topic test --from-beginning TipQ:ÂÆâË£ÖkafkaÂá∫Áé∞ÈîôËØØÔºö 1234kafka: Java 1.8 is required to install this formula.Install AdoptOpenJDK 8 with Homebrew Cask: brew cask install homebrew/cask-versions/adoptopenjdk8Error: An unsatisfied requirement failed this build. A: 1brew cask install homebrew/cask-versions/adoptopenjdk8 bilibiliÂ≠¶‰π†kafkahttps://www.bilibili.com/video/av36607048?p=2 zookeeper ÈªòËÆ§ÊòØÂâçÂè∞ÂêØÂä®(ÂÖ≥Èó≠‰∫ÜÊéßÂà∂Âè∞ÂÅúÊ≠¢)ÔºåÂèØ‰ª•Âú®ÊúÄÂâçÈù¢Âä†‰∏ä nohupÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÂêéÂè∞ÂêØÂä®‰∫Ü„ÄÇ ‰∏â‰∏™ÁõÆÂΩï binÁõÆÂΩï1cd usr/local/Cellar/kafka/2.2.1/bin * configÊñá‰ª∂ 1/usr/local/etc/kafka/server.properties * Êó•Âøó 1234############################# Log Basics ############################## A comma separated list of directories under which to store log fileslog.dirs=/usr/local/var/lib/kafka-logs Âà†Èô§topic1kafka-topics --delete --zookeeper localhost:2181 --topic test]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>kafka</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonÂÆûË∑µwinrmÔºåÂÆûÁé∞ËøúÁ®ãËøûÊé•Ë∞ÉÂ∫¶WindowsÊúçÂä°Âô®]]></title>
    <url>%2F2019%2F08%2F17%2Fpython%E5%AE%9E%E8%B7%B5winrm%EF%BC%8C%E5%AE%9E%E7%8E%B0%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E8%B0%83%E5%BA%A6Windows%E6%9C%8D%E5%8A%A1%E5%99%A8.html</url>
    <content type="text"><![CDATA[ÂâçË®ÄÊúÄËøëÊúâ‰∏™ÈúÄÊ±ÇÔºöÁî®Ëá™Â∑±‰∏ªÊú∫ÊéßÂà∂Â§ö‰∏™windowsËäÇÁÇπÔºåÂÆûÊó∂Ëé∑Âèñ‰ªñ‰ª¨ÁöÑcpuÂíåËøêÂ≠òÂç†Áî®ÊÉÖÂÜµÔºåÈÄöËøáÊü•ËØ¢ÔºåÂÜ≥ÂÆöÈááÁî®python‰∏≠ÁöÑwinrm„ÄÇTip:winrmÊúçÂä°ÊòØwindows ‰∏ÄÁßçÊñπ‰æøËøúÁ®ãÁÆ°ÁêÜÁöÑÊúçÂä°ÔºõÂºÄÂêØwinrm service,‰æø‰∫éÂú®Êó•Â∏∏Â∑•‰Ωú‰∏≠ÔºåËøúÁ®ãÁÆ°ÁêÜÊúçÂä°Âô®ÔºåÊàñÈÄöËøáËÑöÊú¨ÔºåÂêåÊó∂ÁÆ°ÁêÜÂ§öÂè∞ÊúçÂä°Âô®ÔºåÊù•ÊèêÈ´òÂ∑•‰ΩúÊïàÁéá„ÄÇ Â∏∏ËßÑÂÅöÊ≥ïÈÖçÁΩÆËøúÁ®ã‰∏ªÊú∫,‰ΩøÂÖ∂ÊîØÊåÅË¢´ËøúÁ®ãÊéßÂà∂ Êü•Áúãwinrm service listenerÔºàÂàÜ‰∏∫httpÂíåhttpsÔºâ:1winrm e winrm/config/listener Â¶ÇÊûúÊ≤°ÊúâËøîÂõûÔºåÂàôÊ≤°ÊúâÂºÄÂêØwinrmÊúçÂä°„ÄÇ ÂºÄÂêØwinrmÊúçÂä°Ôºö 1winrm quickconfig ‰∏∫winrm service ÈÖçÁΩÆauth: 1winrm set winrm/config/service/auth @&#123;Basic="true"&#125; ‰∏∫winrm service ÈÖçÁΩÆÂä†ÂØÜÊñπÂºè‰∏∫ÂÖÅËÆ∏ÈùûÂä†ÂØÜÔºö 1winrm set winrm/config/service @&#123;AllowUnencrypted="true"&#125; Êü•ÁúãwinrmÊúçÂä°ÁöÑÈÖçÁΩÆÔºö 1winrm get winrm/config ÂÆ¢Êà∑Á´Ø‰∏ªÊú∫ Ë£Öwinrm 1pip install pywinrm ÊµãËØï 1234import winrmwintest = winrm.Session('http://47.98.149.160:5985/wsman',auth=('Administrator','Jwy12345a'))ret = wintest.run_cmd('ipconfig')print(ret) ÈÅáÂà∞ÁöÑÈóÆÈ¢òÂèäËß£ÂÜ≥Êé™ÊñΩ Âú®ÊµãËØïÁéØËäÇÔºåÂØºÂÖ•winrmÂåÖÂêéÔºåÊéßÂà∂Âè∞ÊòæÁ§∫Ôºöwinrm has no attribute session Ëß£ÂÜ≥ÂäûÊ≥ïÔºöpipÂØºÈîô‰∫ÜÂåÖÔºåÂ∫îËØ•ÊòØpywinrmËøô‰∏™ÂåÖÔºåÂ∞ÜpipÂéüÊù•ÁöÑÂåÖÂà†Èô§ÔºåÈáçÊñ∞ÂØºÂÖ•‰∏ÄÈÅç„ÄÇ pycharmÈóÆÈ¢òÔºömodule ‚Äòpip‚Äô has no attribute ‚Äòmain‚Äô Ëß£ÂÜ≥ÂäûÊ≥ïÔºöpipÂçáÁ∫ßÂØºËá¥Êó†Ê≥ïÂØºÂåÖ ÊµãËØïÁöÑÊó∂ÂÄôÔºåÊä•Âá∫‰ª•‰∏ãÈîôËØØÔºö 1requests.exceptions.ConnectTimeout: HTTPConnectionPool(host='47.98.149.160', port=5985): Max retries exceeded with url: /wsman (Caused by ConnectTimeoutError(&lt;urllib3.connection.HTTPConnection object at 0x104921650&gt;, 'Connection to 47.98.149.160 timed out. (connect timeout=30)')) Ëß£ÂÜ≥ÂäûÊ≥ïÔºöÁî±‰∫é‰∫ëÊúçÂä°Âô®ÊúâÂÖ¨ÁΩëipÂú∞ÂùÄÔºåÊâÄ‰ª•Êú¨Êú∫ÂèØ‰ª•pingÈÄöÊúçÂä°Âô®Ôºå‰ΩÜÊòØÁî±‰∫éÊú¨Êú∫‰∏çÂ≠òÂú®ÂÖ¨ÁΩëÂú∞ÂùÄÔºåÊòØÂ±ÄÂüüÁΩëÂú∞ÂùÄÔºåÊâÄ‰ª•ÊúçÂä°Âô®‰∏çËÉΩpingÈÄö‰∏ªÊú∫ÔºåÂØºËá¥‰∫åËÄÖ‰∏çËÉΩÊ≠£Â∏∏ÈÄö‰ø°ÔºåÂè™ËÉΩÊç¢‰∏ÄÁßçÊñπÊ≥ïÔºå‰πüÂ∞±ÊòØÂú®‰∫ëÊúçÂä°Âô®Á´ØËøêË°åÁ®ãÂ∫èÔºåÁ®ãÂ∫èÊèê‰æõ‰∫ÜÂΩìÂâçcpuËøêË°åÊÉÖÂÜµÂíåËøêÂ≠òÊÉÖÂÜµÔºåÊú¨Êú∫ÂèØ‰ª•ÈöèÊó∂ËÆøÈóÆÂπ∂ÂæóÂà∞‰ø°ÊÅØ„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485import timeimport psutil # cd C:\Python36-32\Scripts pip install psutil# Ëé∑ÂèñÊú¨Êú∫Á£ÅÁõò‰ΩøÁî®ÁéáÂíåÂâ©‰ΩôÁ©∫Èó¥G‰ø°ÊÅØimport pymysqlconn = pymysql.connect(user="root", passwd="No.93329332", host="134.175.5.88", port=3306, db="node_status")cur = conn.cursor()flag = 0while(True): # Âæ™ÁéØÁ£ÅÁõòÂàÜÂå∫ content = "" for disk in psutil.disk_partitions(): # ËØªÂÜôÊñπÂºè ÂÖâÁõò or ÊúâÊïàÁ£ÅÁõòÁ±ªÂûã if 'cdrom' in disk.opts or disk.fstype == '': continue disk_name_arr = disk.device.split(':') disk_name = disk_name_arr[0] disk_info = psutil.disk_usage(disk.device) # Á£ÅÁõòÂâ©‰ΩôÁ©∫Èó¥ÔºåÂçï‰ΩçG free_disk_size = disk_info.free // 1024 // 1024 // 1024 # ÂΩìÂâçÁ£ÅÁõò‰ΩøÁî®ÁéáÂíåÂâ©‰ΩôÁ©∫Èó¥G‰ø°ÊÅØ if (disk_name == 'C'): disk_c_name = disk_name disk_c_info = disk_info free_c_disk_size = free_disk_size info = "%sÁõò‰ΩøÁî®ÁéáÔºö%s%%Ôºå Ââ©‰ΩôÁ©∫Èó¥Ôºö%iG" % (disk_c_name, str(disk_c_info.percent), free_c_disk_size) # print(info) # print(disk_name) if (disk_name == 'C'): # ÊãºÊé•Â§ö‰∏™Á£ÅÁõòÁöÑ‰ø°ÊÅØ content = content + info print(content) # return content # cpu‰ø°ÊÅØ cpu_percent = psutil.cpu_percent(interval=1) cpu_info = "CPU‰ΩøÁî®ÁéáÔºö%i%%" % cpu_percent print(cpu_info) # return cpu_info # ÂÜÖÂ≠ò‰ø°ÊÅØ virtual_memory = psutil.virtual_memory() used_memory = virtual_memory.used / 1024 / 1024 / 1024 free_memory = virtual_memory.free / 1024 / 1024 / 1024 memory_percent = virtual_memory.percent memory_info = "ÂÜÖÂ≠ò‰ΩøÁî®Ôºö%0.2fGÔºå‰ΩøÁî®Áéá%0.1f%%ÔºåÂâ©‰ΩôÂÜÖÂ≠òÔºö%0.2fG" % (used_memory, memory_percent, free_memory) print(memory_info) # return memory_info now = time.asctime() if(flag == 0): sql = "INSERT INTO status(ip, \ disk_percent, disk_freesize, CPU_percent, memory_used,memory_free,memory_percent,mytime) \ VALUES ('%s', '%s', '%s', '%s', '%s','%s','%s','%s')" % \ ('106.13.70.159', str(disk_c_info.percent) + "%", str(free_c_disk_size) + "G", str(cpu_percent) + "%",str(used_memory)[:3] + "G",str(free_memory)[:3] + "G",str(memory_percent) + "%",now) flag = 1 else: used_memory_float = str(used_memory)[:3] + 'G' free_memory_folat = str(free_memory)[:3] + 'G' disk_c_info_percent_str = str(disk_c_info.percent) + '%' free_c_disk_size_str = str(free_c_disk_size) + 'G' cpu_percent_str = str(cpu_percent) + '%' memory_percent_str = str(memory_percent) + '%' sql = "update status set disk_percent = '%s', disk_freesize = '%s', \ CPU_percent = '%s', memory_used = '%s' , memory_free = '%s' ,\ memory_percent = '%s' , mytime = '%s' where ip = '106.13.70.159'" % \ (disk_c_info_percent_str,free_c_disk_size_str,cpu_percent_str,used_memory_float,free_memory_folat,memory_percent_str,now) flag = 2 try: # ÊâßË°åsqlËØ≠Âè• cur.execute(sql) # ÊâßË°åsqlËØ≠Âè• conn.commit() if(flag==1): print("insert ok") else: print("update ok") except Exception as e: # ÂèëÁîüÈîôËØØÊó∂ÂõûÊªö conn.rollback() print("failed") print(e) time.sleep(60)# ÂÖ≥Èó≠Êï∞ÊçÆÂ∫ìËøûÊé•conn.close() sql‰∏≠update‰πüÂèØ‰ª• 1sql = "update table set ss = '%s'where id = '1'"% disk]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>winrm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Âü∫‰∫éHexoÁöÑNexT‰∏ªÈ¢ò---‰ªéÂÖ•Èó®Âà∞ÂÖ•Âúü]]></title>
    <url>%2F2019%2F08%2F15%2F%E5%9F%BA%E4%BA%8EHexo%E7%9A%84NexT%E4%B8%BB%E9%A2%98-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F.html</url>
    <content type="text"><![CDATA[ÂâçË®ÄÊú¨ÁØáÊñáÁ´†‰∏ªË¶ÅÊòØÈíàÂØπnexT‰∏ªÈ¢òÁöÑ‰ºòÂåñËØ¥ÊòéÔºå‰ΩøÁî®hexoÂÖ∂‰ªñ‰∏ªÈ¢òÁöÑÁ´•Èù¥ËØ∑ÁªïÈÅì~~Êï¥ÁêÜ‰∏Ä‰∏ãÂ§ßÊ¶Ç‰ºòÂåñÔºö1.Ê†áÈ¢òÈÉ®ÂàÜ‰ºòÂåñÔºåÈ¢úËâ≤Ê†∑ÂºèÔºõ2.ËÆæÁΩÆÂçöÂÆ¢ÊñáÁ´†ËøûÊé•‰∏∫year/month/day/title.htmlÊ†ºÂºè3.MenuÂ¢ûÂä†ÂÖ≥‰∫é„ÄÅÊ†áÁ≠æ„ÄÅÂàÜÁ±ª„ÄÅ‰∫íÂä®„ÄÅÊêúÁ¥¢ËèúÂçï4.Á¶ÅÁî®ÂÖ≥‰∫é„ÄÅÊ†áÁ≠æ„ÄÅÂàÜÁ±ªËèúÂçïËØÑËÆ∫ÂäüËÉΩ5.Ê∑ªÂä†RSS6.ËÆæÁΩÆËÉåÊôØÂõæÁâá7.Canvas_nestÂä®ÊÄÅËÉåÊôØ8.ÂõæÁâáÂø´ÈÄüÂä†ËΩΩËÆæÁΩÆ9.ÂæÆ‰ø°ÊîØ‰ªòÂÆùÊâìËµèÂäüËÉΩ10.ÁÇπÂáªÂá∫Áé∞Ê°ÉÂøÉÊïàÊûú11.‰∏ªÈ°µÊñáÁ´†Ê∑ªÂä†Èò¥ÂΩ±ÊïàÊûú12.ËÆæÁΩÆ‰ª£Á†ÅÈ´ò‰∫Æ13.È°∂Ê†èËÉåÊôØËâ≤14.Â∫ïÊ†èËÉåÊôØËâ≤15.‰øÆÊîπÊñáÁ´†ÂÜÖÈìæÊé•ÊñáÊú¨Ê†∑Âºè16.‰øÆÊîπÊñáÁ´†Â∫ïÈÉ®Ê†áÁ≠æÊ†∑Âºè17.Âú®ÊñáÁ´†Êú´Â∞æÊ∑ªÂä†‚ÄúÊñáÁ´†ÁªìÊùü‚ÄùÊ†áËÆ∞18.ËÆæÁΩÆÂ§¥ÂÉè19.ÁΩëÁ´ôÂ∫ïÈÉ®Âä†‰∏äËÆøÈóÆÈáè20.ÁΩëÁ´ôÂ∫ïÈÉ®Â≠óÊï∞ÁªüËÆ°21.ÁΩëÁ´ôÂ∫ïÈÉ®Ê∑ªÂä†ÁΩëÁ´ôËøêË°åÊó∂Èó¥22.ÁΩëÁ´ôÂ∫ïÈÉ®Ê∑ªÂä†Âä®ÊÄÅÊ°ÉÂøÉ23.Â∫ïÈÉ®ÈöêËóèÁî±HexoÂº∫ÂäõÈ©±Âä®„ÄÅ‰∏ªÈ¢ò‚ÄìNexT.Mist24.ËÆæÁΩÆÁΩëÁ´ôÁöÑÂõæÊ†áFavicon25.ÂÆûÁé∞ÊñáÁ´†ÊñáÂ≠óÁªüËÆ°ÂäüËÉΩÂíåÈòÖËØªÊó∂Èïø26.Âä†Êù•ÂøÖÂäõ‰∫ëË∑üÂ∏ñÂäüËÉΩ27.ÂéªÊéâÂ∫ïÈÉ®ÈáçÂ§çÂ≠óÊï∞ÁªüËÆ°28.‰øÆÊîπÂ≠ó‰ΩìÂ§ßÂ∞è29.‰æßËæπÊ†èÁ§æ‰∫§Â∞èÂõæÊ†áËÆæÁΩÆ30.Ê∑ªÂä†‰æßÊ†èÊé®ËçêÈòÖËØª31.‰øÆÊîπ‰æßËæπÊ†èËÉåÊôØÂõæÁâá32.Ê∑ªÂä†‰æßËæπÊ†èÈü≥‰πê33.‰øÆÊîπ‰æßËæπÊ†èÊñáÂ≠óÈ¢úËâ≤34.Âú®ÊñáÁ´†Â∫ïÈÉ®Â¢ûÂä†ÁâàÊùÉ‰ø°ÊÅØ35.HexoÂçöÂÆ¢Ê∑ªÂä†Á´ôÂÜÖÊêúÁ¥¢36.‰øÆÊîπÈÄâ‰∏≠Â≠óÁ¨¶ÁöÑÈ¢úËâ≤37.Ê∑ªÂä†aplayÈü≥‰πêÊí≠Êîæ38.Ê∑ªÂä†ÂçöÂÆ¢Â∑¶‰∏ãËßíÈó®Á•û(ÁúãÈó®üê∂)39.Â¢ûÂä†‰∫Ü3DÂ∫ìthree_wavesÔºåÈªòËÆ§ÂÖ≥Èó≠40.Â¢ûÂä†‰∫ÜcanvasÈ°µÈù¢‰∏ùÂ∏¶(ËØùËØ¥ËøôÁé©ÊÑèÁúüÁöÑÂæàÂêÉcpuÔºå‰∏ÄÂºÄÊàëÁöÑmacÂ∞±ÈìÅÊùøÁÉß‰∫Ü)41.Â¢ûÂä†‰∫ÜÈ¶ñÈ°µpaceÂä†ËΩΩËøõÂ∫¶42.Â¢ûÂä†ÂõæÁâáÊáíÂä†ËΩΩlazyload43.Â¢ûÂä†‰∫Üfancybox44.Â¢ûÂä†‰∫ÜfastclickËß£ÂÜ≥Âª∂ËøüÈóÆÈ¢ò45.Â¢ûÂä†‰∫ÜgulpÂéãÁº©ÁΩëÈ°µcss jsÊ†∑Âºè46.Êà™Êñ≠È¶ñÈ°µÊñáÁ´†ÂÜÖÂÆπ47.‰ª£Á†ÅÂ§çÂà∂ÂäüËÉΩ hexoÁõÆÂΩïÁªìÊûÑ‰∏ªÁõÆÂΩïÁªìÊûÑ _config.ymlÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂ÔºåÁΩëÁ´ôÁöÑÂæàÂ§ö‰ø°ÊÅØÈÉΩÂú®ËøôÈáåÈÖçÁΩÆÔºåËØ∏Â¶ÇÁΩëÁ´ôÂêçÁß∞ÔºåÂâØÊ†áÈ¢òÔºåÊèèËø∞Ôºå‰ΩúËÄÖÔºåËØ≠Ë®ÄÔºå‰∏ªÈ¢òÔºåÈÉ®ÁΩ≤Á≠âÁ≠âÂèÇÊï∞„ÄÇ package.jsonhexoÊ°ÜÊû∂ÁöÑÂèÇÊï∞ÂíåÊâÄ‰æùËµñÊèí‰ª∂„ÄÇ scaffoldsscaffoldsÊòØ‚ÄúËÑöÊâãÊû∂„ÄÅÈ™®Êû∂‚ÄùÁöÑÊÑèÊÄùÔºåÂΩì‰Ω†Êñ∞Âª∫‰∏ÄÁØáÊñáÁ´†Ôºàhexo new ‚Äòtitle‚ÄôÔºâÁöÑÊó∂ÂÄôÔºåhexoÊòØÊ†πÊçÆËøô‰∏™ÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂ËøõË°åÊûÑÂª∫ÁöÑ„ÄÇÂü∫Êú¨‰∏çÁî®ÂÖ≥ÂøÉ„ÄÇ sourceËøô‰∏™ÁõÆÂΩïÂæàÈáçË¶ÅÔºåÊñ∞Âª∫ÁöÑÊñáÁ´†ÈÉΩÊòØÂú®‰øùÂ≠òÂú®Ëøô‰∏™ÁõÆÂΩï‰∏ãÁöÑ._postsÔºåÈúÄË¶ÅÊñ∞Âª∫ÁöÑÂçöÊñáÈÉΩÊîæÂú®_postsÁõÆÂΩï‰∏ã„ÄÇ_postsÁõÆÂΩï‰∏ãÊòØ‰∏Ä‰∏™‰∏™ markdown Êñá‰ª∂„ÄÇ‰Ω†Â∫îËØ•ÂèØ‰ª•ÁúãÂà∞‰∏Ä‰∏™ hello-world.md ÁöÑÊñá‰ª∂ÔºåÊñáÁ´†Â∞±Âú®Ëøô‰∏™Êñá‰ª∂‰∏≠ÁºñËæë„ÄÇ_posts ÁõÆÂΩï‰∏ãÁöÑmdÊñá‰ª∂Ôºå‰ºöË¢´ÁºñËØëÊàêhtmlÊñá‰ª∂ÔºåÊîæÂà∞ public ÔºàÊ≠§Êñá‰ª∂Áé∞Âú®Â∫îËØ•Ê≤°ÊúâÔºåÂõ†‰∏∫‰Ω†ËøòÊ≤°ÊúâÁºñËØëËøáÔºâÊñá‰ª∂Â§π‰∏ã„ÄÇÈáåÈù¢ËøòÊúâ‰∏Ä‰∏™ÈáçË¶ÅÊñá‰ª∂Â§πÔºöimagesÔºåÊòØÁî®Êù•Â≠òÊîæÂçöÊñáÁöÑÂõæÁâáÁöÑÔºåËøôÈáåÂª∫ËÆÆ‰ΩøÁî®‰∏ÉÁâõ‰∫ëÂõæÂ∫äÊù•Â≠òÂÇ®ÂõæÁâáÔºåÂõ†‰∏∫ÂèØ‰ª•Êõ¥Âø´ÁöÑÂä†ËΩΩÂõæÁâá„ÄÇÂêåÊó∂Âº∫ÁÉàÂª∫ËÆÆÂ§ßÂÆ∂Áî®‰∏ÄÊ¨æhexo‚ÄîclientÊù•ËøõË°åÂèØËßÜÂåñÂçöÂÆ¢ÁöÑ‰π¶ÂÜôÔºå‰∏ÄÁ´ôÂºèÊúçÂä°ÔºåÊîØÊåÅ‰∏ÉÁâõ‰∫ëÂõæÂ∫äÔºåÊé•Â•Ω‰º†ÈÄÅÈó®Ôºöhexoclient„ÄÇ themesÁΩëÁ´ô‰∏ªÈ¢òÁõÆÂΩïÔºåÊàëÁî®ÁöÑÂ∞±ÊòØnexT‰∏ªÈ¢ò„ÄÇ node_moduleshexo‰æùËµñÁöÑÁªÑ‰ª∂ÈÉΩÂú®ÂÖ∂‰∏≠„ÄÇ ‰∏ªÈ¢òÁõÆÂΩïÁªìÊûÑ12345678910111213141516171819202122232425262728293031323334353637‚îú‚îÄ‚îÄ .github #git‰ø°ÊÅØ‚îú‚îÄ‚îÄ languages #Â§öËØ≠Ë®Ä| ‚îú‚îÄ‚îÄ default.yml #ÈªòËÆ§ËØ≠Ë®Ä| ‚îî‚îÄ‚îÄ zh-Hans.yml #ÁÆÄ‰Ωì‰∏≠Êñá| ‚îî‚îÄ‚îÄ zh-tw.yml #ÁπÅ‰Ωì‰∏≠Êñá‚îú‚îÄ‚îÄ layout #Â∏ÉÂ±ÄÔºåÊ†πÁõÆÂΩï‰∏ãÁöÑ*.ejsÊñá‰ª∂ÊòØÂØπ‰∏ªÈ°µÔºåÂàÜÈ°µÔºåÂ≠òÊ°£Á≠âÁöÑÊéßÂà∂| ‚îú‚îÄ‚îÄ _custom #ÂèØ‰ª•Ëá™Â∑±‰øÆÊîπÁöÑÊ®°ÊùøÔºåË¶ÜÁõñÂéüÊúâÊ®°Êùø| | ‚îú‚îÄ‚îÄ _header.swig #Â§¥ÈÉ®Ê†∑Âºè| | ‚îú‚îÄ‚îÄ _sidebar.swig #‰æßËæπÊ†èÊ†∑Âºè| ‚îú‚îÄ‚îÄ _macro #ÂèØ‰ª•Ëá™Â∑±‰øÆÊîπÁöÑÊ®°ÊùøÔºåË¶ÜÁõñÂéüÊúâÊ®°Êùø| | ‚îú‚îÄ‚îÄ post.swig #ÊñáÁ´†Ê®°Êùø| | ‚îú‚îÄ‚îÄ reward.swig #ÊâìËµèÊ®°Êùø| | ‚îú‚îÄ‚îÄ sidebar.swig #‰æßËæπÊ†èÊ®°Êùø| ‚îú‚îÄ‚îÄ _partial #Â±ÄÈÉ®ÁöÑÂ∏ÉÂ±Ä| | ‚îú‚îÄ‚îÄ head #Â§¥ÈÉ®Ê®°Êùø| | ‚îú‚îÄ‚îÄ search #ÊêúÁ¥¢Ê®°Êùø| | ‚îú‚îÄ‚îÄ share #ÂàÜ‰∫´Ê®°Êùø| ‚îú‚îÄ‚îÄ _script #Â±ÄÈÉ®ÁöÑÂ∏ÉÂ±Ä| ‚îú‚îÄ‚îÄ _third-party #Á¨¨‰∏âÊñπÊ®°Êùø| ‚îú‚îÄ‚îÄ _layout.swig #‰∏ªÈ°µÈù¢Ê®°Êùø| ‚îú‚îÄ‚îÄ index.swig #‰∏ªÈ°µÈù¢Ê®°Êùø| ‚îú‚îÄ‚îÄ page #È°µÈù¢Ê®°Êùø| ‚îî‚îÄ‚îÄ tag.swig #tagÊ®°Êùø‚îú‚îÄ‚îÄ scripts #scriptÊ∫êÁ†Å| ‚îú‚îÄ‚îÄ tags #tagsÁöÑscriptÊ∫êÁ†Å| ‚îú‚îÄ‚îÄ marge.js #È°µÈù¢Ê®°Êùø‚îú‚îÄ‚îÄ source #Ê∫êÁ†Å| ‚îú‚îÄ‚îÄ css #cssÊ∫êÁ†Å| | ‚îú‚îÄ‚îÄ _common #*.stylÂü∫Á°Äcss| | ‚îú‚îÄ‚îÄ _custom #*.stylÂ±ÄÈÉ®css| | ‚îî‚îÄ‚îÄ _mixins #mixinsÁöÑcss| ‚îú‚îÄ‚îÄ fonts #Â≠ó‰Ωì| ‚îú‚îÄ‚îÄ images #ÂõæÁâá| ‚îú‚îÄ‚îÄ uploads #Ê∑ªÂä†ÁöÑÊñá‰ª∂| ‚îî‚îÄ‚îÄ js #javascriptÊ∫ê‰ª£Á†Å‚îú‚îÄ‚îÄ _config.yml #‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂‚îî‚îÄ‚îÄ README.md #Áî®GitHubÁöÑÈÉΩÁü•ÈÅì È´òÂ∫¶ÂÆöÂà∂‰ºòÂåñÁØáÊ†áÈ¢òÈÉ®ÂàÜ‰ºòÂåñÔºåÈ¢úËâ≤Ê†∑ÂºèÈ¶ñÂÖà‰Ω†Ë¶ÅÁ°ÆÂÆö‰Ω†ÊòØ‰∏ªÈ¢ò‰∏≠ÁöÑÂì™‰∏™schemeÔºöMuse„ÄÅMist„ÄÅPisces„ÄÅGeminiÔºåÊàëÁöÑÊòØMist,ÊâÄ‰ª•ÊàëÂ∞±Âéªthemes/nexT/source/css/_schemes/Mist/_header.styl‰∏ãÔºåÊ∑ªÂä†‰ª•‰∏ã‰ª£Á†ÅÔºö12345//ÂèØ‰ª•Âä†ÂõæÁâáÔºå‰πüÂèØ‰ª•Ëá™Â∑±Ë∞ÉËâ≤ÂΩ©.header &#123; //background: url('/images/headbg.jpg') repeat !important; background: rgba(#EBF2EA,1) none repeat scroll !important; &#125; ËÆæÁΩÆËÉåÊôØÂõæÁâáÈªòËÆ§Á¶ÅÁî®ÔºåÂèØ‰ª•Âú®themes/nexT/source/css/_custom/custon.stylÊñá‰ª∂‰∏≠ÂêØÁî®12345678//ËÆæÁΩÆËÉåÊôØÂõæÁâábody &#123; background:url(http://pw5u1sbg2.bkt.clouddn.com/145676.jpg); background-repeat: repeat; background-attachment:fixed; background-position:50% 50%; background-size:cover;&#125; Canvas_nestÂä®ÊÄÅËÉåÊôØËÉåÊôØÁöÑÂá†‰ΩïÁ∫øÊù°ÊòØÈááÁî®ÁöÑnestÊïàÊûú, ‰∏Ä‰∏™Âü∫‰∫éhtml5 canvasÁªòÂà∂ÁöÑÁΩëÈ°µËÉåÊôØÊïàÊûú, ÈùûÂ∏∏ËµûÔºÅÊù•Ëá™githubÁöÑÂºÄÊ∫êÈ°πÁõÆcanvas-nest ÁâπÊÄß ‰∏ç‰æùËµñ‰ªª‰ΩïÊ°ÜÊû∂ÊàñËÄÖÂÜÖÂ∫ìÔºåÊØîÂ¶Ç‰∏ç‰æùËµñjQueryÔºå‰ΩøÁî®ÂéüÁîüÁöÑjavascript ÈùûÂ∏∏Â∞èÔºåÂè™Êúâ1.66kbÔºåÂ¶ÇÊûúÂºÄÂêØgzipÔºåÂèØ‰ª•Êõ¥Â∞è ÈùûÂ∏∏ÂÆπÊòìÂÆûÁé∞ÔºåÈÖçÁΩÆÁÆÄÂçïÔºåÂç≥‰Ωø‰Ω†‰∏çÊòØwebÂºÄÂèëËÄÖÔºå‰πüËÉΩÁÆÄÂçïÊêûÂÆöËØ¥Êòé colorÔºöÁ∫øÊù°È¢úËâ≤ÔºåÈªòËÆ§Ôºö ‚Äò0,0,0‚Äô Ôºõ‰∏â‰∏™Êï∞Â≠óÂàÜÂà´‰∏∫(R,G,B)ÔºåËøôÈáåÊé®Ëçê‰∏Ä‰∏™È¢úËâ≤ÈááÈõÜÂô®ÔºöColorSlurpÔºåÂú®AppStore‰∏≠Â∞±ÂèØ‰ª•ÊêúÂà∞ opacityÔºöÁ∫øÊù°ÈÄèÊòéÂ∫¶Ôºà0~1ÔºâÔºåÈªòËÆ§: 0.5 countÔºöÁ∫øÊù°ÁöÑÊÄªÊï∞ÈáèÔºå ÈªòËÆ§Ôºö150 zIndexÔºöËÉåÊôØÁöÑz-indexÂ±ûÊÄßÔºåcssÂ±ûÊÄßÁî®‰∫éÊéßÂà∂ÊâÄÂú®Â±ÇÁöÑ‰ΩçÁΩÆÔºåÈªòËÆ§Ôºö-1‰∏çË∂≥ÂÜÖÂ≠òÂç†Áî®ËøáÈ´òÂÅöÊ≥ïÁõ¥Êé•ÊâæÂà∞‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂ÔºåÂ∞ÜcanvasÊîπ‰∏∫trueÂç≥ÂèØ„ÄÇRSSÂú®‰Ω†ÁöÑhexoÁ´ôÁÇπÁõÆÂΩï‰∏ãÔºö1$ npm install hexo-generator-feed --save ÊâìÂºÄÁ´ôÁÇπÁõÆÂΩï‰∏ãÁöÑ_config.yml:12345678# feed# Dependencies: https://github.com/hexojs/hexo-generator-feedfeed: type: atom path: atom.xml limit: 20 hub: content: Êù•ÂøÖÂäõËØÑËÆ∫Á≥ªÁªüÁ≠âÁ¨¨‰∏âÊñπÊèí‰ª∂ÁôªÂΩï Êù•ÂøÖÂäõ ÔºåËé∑ÂèñLiveRe UIDÔºåÁºñËæë‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂ÔºåÁºñËæëlivere_uidÂ≠óÊÆµÔºåÂ∞ÜidÂ°´ÂÖ•Âç≥ÂèØÔºåÊõ¥Â§öÁ¨¨‰∏âÊñπÈõÜÊàêÊèí‰ª∂ÂèØËßÅÔºönexTÂÆòÁΩëÔºåÂåÖÊã¨ËØÑËÆ∫Á≥ªÁªü„ÄÅÊï∞ÊçÆÁªüËÆ°‰∏éÂàÜÊûê„ÄÅÂÜÖÂÆπÂàÜ‰∫´ÊúçÂä°„ÄÅÊêúÁ¥¢ÊúçÂä°Á≠âÁ≠â„ÄÇ ÊâìËµèÂäüËÉΩnexTÈõÜÊàê‰∫ÜÊîØ‰ªòÂÆùÂæÆ‰ø°ÊâìËµèÂäüËÉΩÔºåÁõ¥Êé•Âú®‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂ÊêúÁ¥¢wechatÊàñËÄÖalipayÂç≥ÂèØ,ÁÑ∂ÂêéË∑ü‰∏äËá™Â∑±ÁöÑÂæÆ‰ø°ÂíåÊîØ‰ªòÂÆùÁöÑÊî∂Èí±Á†ÅÂõæÁâáÂú∞ÂùÄÂç≥ÂèØ„ÄÇ ÁÇπÂáªÂá∫Áé∞Ê°ÉÂøÉÊïàÊûú1!function(e,t,a)&#123;function n()&#123;c(".heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;"),o(),r()&#125;function r()&#123;for(var e=0;e&lt;d.length;e++)d[e].alpha&lt;=0?(t.body.removeChild(d[e].el),d.splice(e,1)):(d[e].y--,d[e].scale+=.004,d[e].alpha-=.013,d[e].el.style.cssText="left:"+d[e].x+"px;top:"+d[e].y+"px;opacity:"+d[e].alpha+";transform:scale("+d[e].scale+","+d[e].scale+") rotate(45deg);background:"+d[e].color+";z-index:99999");requestAnimationFrame(r)&#125;function o()&#123;var t="function"==typeof e.onclick&amp;&amp;e.onclick;e.onclick=function(e)&#123;t&amp;&amp;t(),i(e)&#125;&#125;function i(e)&#123;var a=t.createElement("div");a.className="heart",d.push(&#123;el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:s()&#125;),t.body.appendChild(a)&#125;function c(e)&#123;var a=t.createElement("style");a.type="text/css";try&#123;a.appendChild(t.createTextNode(e))&#125;catch(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName("head")[0].appendChild(a)&#125;function s()&#123;return"rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"&#125;var d=[];e.requestAnimationFrame=function()&#123;return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e)&#123;setTimeout(e,1e3/60)&#125;&#125;(),n()&#125;(window,document); Êñ∞Âª∫ clicklove.js Êñá‰ª∂Âπ∂‰∏îÂ∞Ü‰ª•‰∏ä‰ª£Á†ÅÂ§çÂà∂ËøõÂéªÔºåÁÑ∂Âêé‰øùÂ≠ò„ÄÇ Â∞Ü clicklove.jsÊñá‰ª∂ÊîæÂà∞Ë∑ØÂæÑ /themes/next/source/js/src ÈáåÈù¢ ÁÑ∂ÂêéÊâìÂºÄ \themes\next\layout\_layout.swig Êñá‰ª∂,Âú®Êú´Â∞æÔºàÂú®ÂâçÈù¢ÂºïÁî®‰ºöÂá∫Áé∞Êâæ‰∏çÂà∞ÁöÑbugÔºâÊ∑ªÂä†‰ª•‰∏ã‰ª£Á†ÅÔºö12&lt;!-- È°µÈù¢ÁÇπÂáªÂ∞èÁ∫¢ÂøÉ --&gt;&lt;script type="text/javascript" src="/js/src/clicklove.js"&gt;&lt;/script&gt; ‰∏ªÈ°µÊñáÁ´†Ê∑ªÂä†Èò¥ÂΩ±ÊïàÊûúÊâìÂºÄ themes/next/source/css/_custom/custom.stylÔºåÂêëÈáåÈù¢Âä†‰ª£Á†Å:12345678// ‰∏ªÈ°µÊñáÁ´†Ê∑ªÂä†Èò¥ÂΩ±ÊïàÊûú.post &#123; margin-top: 0px; margin-bottom: 60px; padding: 25px; -webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5); -moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5);&#125; ‰ª£Á†ÅÈ´ò‰∫ÆÁõ¥Êé•Âú®‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂ÊêúÁ¥¢ highlight_themeÔºö1234# Code Highlight theme# Available values: normal | night | night eighties | night blue | night bright# https://github.com/chriskempson/tomorrow-themehighlight_theme: night bright È°∂ÈÉ®Â∫ïÈÉ®ËÉåÊôØËâ≤ÊîπÂèòÈ¶ñÂÖà‰Ω†Ë¶ÅÁ°ÆÂÆö‰Ω†ÊòØ‰∏ªÈ¢ò‰∏≠ÁöÑÂì™‰∏™schemeÔºöMuse„ÄÅMist„ÄÅPisces„ÄÅGeminiÔºåÊàëÁöÑÊòØMist,ÊâÄ‰ª•ÊàëÂ∞±themes/nexT/source/css/_schemes/Mist/_header.styl‰∏ãÔºåÂ∞ÜÈ¢úËâ≤ËøõË°å‰øÆÊîπÂç≥ÂèØ„ÄÇÂ∫ïÈÉ®È¢úËâ≤ÂàôÂú®themes/nexT/source/css/_schemes/Mist/index.styl‰∏≠ËøõË°å‰øÆÊîπÔºö123456789101112131415161718// Footer// --------------------------------------------------.footer &#123; margin-top: 80px; padding: 10px 0; //background: url('/images/headbg.jpg') repeat !important; background: rgba(#EBF2EA,1) none repeat scroll !important; color: $grey-dim;&#125;.footer-inner &#123; margin: 0 auto; text-align: left; +mobile() &#123; width: auto; text-align: center; &#125;&#125; ‰øÆÊîπÊñáÁ´†ÂÜÖÊñáÊú¨ËøûÊé•Ê†∑ÂºèÊâìÂºÄ themes/next/source/css/_custom/custom.styl,Ê∑ªÂä†‰ª£Á†ÅÔºö1234567891011// ÊñáÁ´†ÂÜÖÈìæÊé•ÊñáÊú¨Ê†∑Âºè.post-body p a&#123; color: #0593d3; border-bottom: none; border-bottom: 1px solid #0593d3; &amp;:hover &#123; color: #fc6423; border-bottom: none; border-bottom: 1px solid #fc6423; &#125;&#125; ‰øÆÊîπÁΩëÈ°µÂ∫ïÈÉ® Âú®ÂõæÊ†áÂ∫ì‰∏≠ÊâæÂà∞‰Ω†Ëá™Â∑±ÂñúÊ¨¢ÁöÑÂõæÊ†á, ‰øÆÊîπÊ°ÉÂøÉ,ÊâìÂºÄ themes/next_config.yml ,ÊêúÁ¥¢ÂÖ≥ÈîÆÂ≠ó authoricon,ÊõøÊç¢ÂõæÊ†áÂêçÔºö 12# icon between year and author @Footerauthoricon: id-card ÈöêËóèÁΩëÈ°µÂ∫ïÈÉ® Hexo Âº∫ÂäõÈ©±Âä® ÊâìÂºÄ‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂,ÊêúÁ¥¢ÂÖ≥ÈîÆÂ≠ó copyright ÔºåÂ¶Ç‰∏ã: 12# Footer `powered-by` and `theme-info` copyrightcopyright: false Ê∑ªÂä†ÊñáÁ´†ÁªìÊùüÊ†áËÆ∞Âú®themes/next/layout/_macro/post.swig‰∏≠, Âú®wechat-subscriber.swig‰πãÂâçÊ∑ªÂä†Â¶Ç‰∏ã‰ª£Á†Å:123&lt;div style="text-align:center;color: #ccc;font-size:14px;"&gt;---------------- The End ----------------&lt;/div&gt; ÁªüËÆ°ÂäüËÉΩÔºåÁªüËÆ°ÂäüËÉΩ,ÊòæÁ§∫ÊñáÁ´†Â≠óÊï∞ÁªüËÆ°,ÈòÖËØªÊó∂Èïø,ÊÄªÂ≠óÊï∞Âú®Á´ôÁÇπÁöÑÊ†πÁõÆÂΩï‰∏ãÔºö1$ npm i --save hexo-wordcount ÊâìÂºÄ themes/next/_config.yml ÔºåÊêúÁ¥¢ÂÖ≥ÈîÆÂ≠ó post_wordcountÔºö1234567891011# Post wordcount display settings# Dependencies: https://github.com/willin/hexo-wordcountpost_wordcount: item_text: true #Â≠óÊï∞ÁªüËÆ° wordcount: true #È¢ÑËßàÊó∂Èó¥ min2read: true #ÊÄªÂ≠óÊï∞,ÊòæÁ§∫Âú®È°µÈù¢Â∫ïÈÉ® totalcount: true separated_meta: true ËÆæÁΩÆÂ§¥ÂÉèÊâìÂºÄ themes/next/_config.yml ÔºåÊêúÁ¥¢ÂÖ≥ÈîÆÂ≠ó avatarÔºö123456789101112# Sidebar Avataravatar: # In theme directory (source/images): /images/avatar.gif # In site directory (source/uploads): /uploads/avatar.gif # You can also use other linking images. url: http://pw5u1sbg2.bkt.clouddn.com/avatar.png #/images/avatar.png # If true, the avatar would be dispalyed in circle. rounded: true # The value of opacity should be choose from 0 to 1 to set the opacity of the avatar. opacity: 1 # If true, the avatar would be rotated with the cursor. rotated: false Â∫ïÈÉ®Ê∑ªÂä†ËÆøÈóÆÈáèÂíåÂ≠óÊï∞ÁªüËÆ°ËøêÁî®Á¨¨‰∏âÊñπÊèí‰ª∂ÔºåËßÅnexTÂÆòÁΩëÔºåÊé®ËçêÁôæÂ∫¶ÁªüËÆ°Âíå‰∏çËíúÂ≠êÁªüËÆ°„ÄÇ Â∫ïÈÉ®Ê∑ªÂä†ËøêË°åÊó∂Èó¥ÊâæÂà∞\themes\next\layout\_partials\‰∏ãÈù¢ÁöÑfooter.swigÊñá‰ª∂ÔºåÂú®Êú´Â∞æÊ∑ªÂä†ÊâÄÁ§∫‰ª£Á†ÅÔºö12345678910111213141516171819&lt;div class="run_time" style=" text-align:center;"&gt; &lt;span id="timeDate"&gt;ËΩΩÂÖ•Â§©Êï∞...&lt;/span&gt;&lt;span id="times"&gt;ËΩΩÂÖ•Êó∂ÂàÜÁßí...&lt;/span&gt; &lt;script&gt; var now = new Date(); function createtime() &#123; var grt= new Date("08/06/2019 19:00:00");//Ê≠§Â§Ñ‰øÆÊîπ‰Ω†ÁöÑÂª∫Á´ôÊó∂Èó¥ÊàñËÄÖÁΩëÁ´ô‰∏äÁ∫øÊó∂Èó¥ now.setTime(now.getTime()+250); days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); if(String(hnum).length ==1 )&#123;hnum = "0" + hnum;&#125; minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); mnum = Math.floor(minutes); if(String(mnum).length ==1 )&#123;mnum = "0" + mnum;&#125; seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); snum = Math.round(seconds); if(String(snum).length ==1 )&#123;snum = "0" + snum;&#125; document.getElementById("timeDate").innerHTML = "Êú¨Á´ôÂ∑≤ÂÆâÂÖ®ËøêË°å "+dnum+" Â§© "; document.getElementById("times").innerHTML = hnum + " Â∞èÊó∂ " + mnum + " ÂàÜ " + snum + " Áßí"; &#125; setInterval("createtime()",250); &lt;/script&gt;&lt;/div&gt; Â∫ïÈÉ®Ê∑ªÂä†Á∫¢ÂøÉÊâìÂºÄ themes/next/_config.yml ÔºåÊêúÁ¥¢ÂÖ≥ÈîÆÂ≠ó footerÔºö123456789101112131415footer: # Specify the date when the site was setup. If not defined, current year will be used. since: 2019 # visitors count counter: true # Icon between year and copyright info. icon: # Icon name in fontawesome, see: https://fontawesome.com/v4.7.0/icons/ # `heart` is recommended with animation in red (#ff0000). name: heart # If you want to animate the icon, set it to true. animated: true # Change the color of icon, using Hex Code. color: "#ff0000" Ê∑ªÂä†‰æßËæπÊ†èÈü≥‰πêÊ°ÜÂéªÂæÄÁΩëÊòì‰∫ëÈü≥‰πêÊêúÁ¥¢ÂñúÊ¨¢ÁöÑÈü≥‰πêÔºåÁÇπÂáªÁîüÊàêÂ§ñÈìæÊí≠ÊîæÂô®Ôºå Â§çÂà∂‰ª£Á†ÅÁõ¥Êé•ÊîæÂà∞ÂçöÊñáÊú´Â∞æÂç≥ÂèØÔºåheightËÆæ‰∏∫0ÂèØÈöêËóèÊí≠ÊîæÂô®Ôºå‰ΩÜ‰ªçÁÑ∂ÂèØ‰ª•Êí≠ÊîæÈü≥‰πêÔºåautoËÆæÊàê0ÂèØÊâãÂä®Êí≠ÊîæÔºåÈªòËÆ§ÊòØ1Ëá™Âä®Êí≠ÊîæÔºåÂèØÊää‰ª£Á†ÅÊîæÂà∞themes/next/layout/_custom/sidebar.swigÊñá‰ª∂ÈáåÔºåÊí≠ÊîæÂô®‰ºöÊòæÁ§∫Âú®Á´ôÁÇπÈ¢ÑËßà‰∏≠,Á§∫‰æã‰ª£Á†ÅÂ¶Ç‰∏ãÔºö12&lt;iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=110 src="//music.163.com/outchain/player?type=0&amp;id=2588481240&amp;auto=1&amp;height=90"&gt;&lt;/iframe&gt; Ê∑ªÂä†aplayerÈü≥‰πêÊí≠ÊîæÁî±‰∫éÊàëÊÉ≥Âú®ÂçïÁã¨ÁöÑÈ°µÈù¢Âä†ÂÖ•Ê≠åÂçïÔºåÊâÄ‰ª•È¢ùÂ§ñÂàõ‰∫Ü‰∏™È°µÈù¢Ôºå‰πüÂèØ‰ª•Áõ¥Êé•Âú®ÊñáÁ´†‰∏≠ÊèíÂÖ•ÔºåÂéüÁêÜÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ Êñ∞Âª∫È°µÈù¢ÔºåÂëΩÂêç‰∏∫guestbookÔºö 1hexo new page guestbook ËøôÊó∂ÂÄôÂú® /Hexo/source Êñá‰ª∂Â§π‰∏ã‰ºöÁîüÊàê‰∏Ä‰∏™guestbookÊñá‰ª∂Â§πÔºåÊâìÂºÄÈáåÈù¢ÁöÑindex.mdÔºåÁ§∫‰æãÂ¶Ç‰∏ãÔºö 123456789101112---title: ÁïôË®Ä‰∫íÂä®date: 2019-08-15 12:18:09type: "guestbook"---&lt;div align="center"&gt; &lt;img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1558956326532&amp;di=82cc9907fc903cfb978a35206986d3f6&amp;imgtype=0&amp;src=http%3A%2F%2Fimg.mp.itc.cn%2Fupload%2F20160809%2F31283a3e2d7f411492d3fb27297180ec_th.jpg" /&gt;&lt;/div&gt;[//]: #(aplayÈü≥È¢ëÊí≠Êîæhttps://github.com/MoePlayer/hexo-tag-aplayer)&#123;% meting "2331951308" "netease" "playlist" "autoplay" "mutex:false" "order:random" "listmaxheight:250px" "preload:none" "theme:#f7f7f7"%&#125; meting‰∏≠ÈÖçÁΩÆÂèÇÊï∞Âê´‰πâÂ¶Ç‰∏ãÔºö ÈÄâÈ°π ÈªòËÆ§ÂÄº ÊèèËø∞ id ÂøÖÈ°ªÂÄº Ê≠åÊõ≤ id / Êí≠ÊîæÂàóË°® id / Áõ∏ÂÜå id / ÊêúÁ¥¢ÂÖ≥ÈîÆÂ≠ó server ÂøÖÈ°ªÂÄº Èü≥‰πêÂπ≥Âè∞: netease, tencent, kugou, xiami, baidu type ÂøÖÈ°ªÂÄº song, playlist, album, search, artist fixed false ÂºÄÂêØÂõ∫ÂÆöÊ®°Âºè mini false ÂºÄÂêØÂõ∫ÂÆöÊ®°Âºè loop all ÂàóË°®Âæ™ÁéØÊ®°ÂºèÔºöall, one,none order list ÂàóË°®Êí≠ÊîæÊ®°ÂºèÔºö list, random volume 0.7 Êí≠ÊîæÂô®Èü≥Èáè lrctype 0 Ê≠åËØçÊ†ºÂºèÁ±ªÂûã listfolded false ÊåáÂÆöÈü≥‰πêÊí≠ÊîæÂàóË°®ÊòØÂê¶ÊäòÂè† storagename metingjs LocalStorage ‰∏≠Â≠òÂÇ®Êí≠ÊîæÂô®ËÆæÂÆöÁöÑÈîÆÂêç autoplay true Ëá™Âä®Êí≠ÊîæÔºåÁßªÂä®Á´ØÊµèËßàÂô®ÊöÇÊó∂‰∏çÊîØÊåÅÊ≠§ÂäüËÉΩ mutex true ËØ•ÈÄâÈ°πÂºÄÂêØÊó∂ÔºåÂ¶ÇÊûúÂêåÈ°µÈù¢ÊúâÂÖ∂‰ªñ aplayer Êí≠ÊîæÔºåËØ•Êí≠ÊîæÂô®‰ºöÊöÇÂÅú theme #ad7a86 Êí≠ÊîæÂô®È£éÊ†ºËâ≤ÂΩ©ËÆæÁΩÆ listmaxheight 340px Êí≠ÊîæÂàóË°®ÁöÑÊúÄÂ§ßÈïøÂ∫¶ preload auto Èü≥‰πêÊñá‰ª∂È¢ÑËΩΩÂÖ•Ê®°ÂºèÔºåÂèØÈÄâÈ°πÔºö none, metadata, auto ÊâìÂºÄ‰∏ªÈ¢ò_config.ymlÊñá‰ª∂ÔºåÂú®menu‰∏ãÊñ∞Âª∫‰∏Ä‰∏™Âêç‰∏∫guestbookÁöÑÁ±ªÔºåÂÆåÊàêÂêéÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö 1234567menu: home: / || home tags: /tags/ || tags categories: /categories/ || bookmark archives: /archives/ || archive about: /about/ || user ‰∫íÂä®: /guestbook/ || comments ÊâìÂºÄ/Hexo/themes/hexo-theme-next/languages/zh-Hans.ymlÔºåÊ∑ªÂä†ÂØπÂ∫îÁöÑ‰∏≠ÊñáÁøªËØëÔºö 12menu: guestbook: ‰∫íÂä® Ëá≥Ê≠§ÔºåÊ≠åÂçïÈ°µÈù¢ÂàõÂª∫ÂÆåÊàêÔºåÁé∞Âú®Âè™ÈúÄË¶ÅÂú®Á´ôÁÇπÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂºÄÂêØmetingÊ®°ÂºèÔºåÂú®_config.yml‰∏≠ÊêúÁ¥¢metingÔºö 12aplayer: meting: true TipÂêå‰∏Ä‰∏™Ê≠åÂçï‰∏çËÉΩÂÅöÂà∞ÂÆûÊó∂Âà∑Êñ∞ÔºåÈúÄË¶Å24Â∞èÊó∂ÂêéaplayerÊâç‰ºöËá™Âä®Êõ¥Êñ∞ÁºìÂ≠ò Ê∑ªÂä†ÂçöÂÆ¢Â∑¶‰∏ãËßíÈó®Á•ûÂÆâË£Ö‰æùËµñ:12npm install --save hexo-helper-live2dnpm install --save live2d-widget-model-wanko Á´ôÁÇπÈÖçÁΩÆÊ∑ªÂä†:12345678910111213141516171819202122# hexo-helper-live2dÈÖçÁΩÆ, ÂèÇËÄÉhttps://github.com/EYHN/hexo-helper-live2d/blob/master/README.zh-CN.mdlive2d: enable: true scriptFrom: local pluginRootPath: live2dw/ pluginJsPath: lib/ pluginModelPath: assets/ tagMode: false debug: false model: scale: 1 use: live2d-widget-model-wanko display: superSample: 2 # Ë∂ÖÈááÊ†∑Á≠âÁ∫ß width: 100 height: 100 position: left # ‰ΩçÁΩÆ mobile: show: false react: opacityDefault: 0.9 # ÈªòËÆ§ÈÄèÊòéÂ∫¶ opacityOnHover: 0.5 # Èº†Ê†áÁßª‰∏äÈÄèÊòéÂ∫¶ Â¢ûÂä†È¶ñÈ°µpaceÂä†ËΩΩËøõÂ∫¶ÊâìÂºÄ‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂Ôºö12345678# Progress bar in the top during page loading.# Dependencies: https://github.com/theme-next/theme-next-pacepace: true# Themes list:# pace-theme-big-counter | pace-theme-bounce | pace-theme-barber-shop | pace-theme-center-atom# pace-theme-center-circle | pace-theme-center-radar | pace-theme-center-simple | pace-theme-corner-indicator# pace-theme-fill-left | pace-theme-flash | pace-theme-loading-bar | pace-theme-mac-osx | pace-theme-minimalpace_theme: pace-theme-bounce Â¢ûÂä†ÂõæÁâáÊáíÂä†ËΩΩlazyloadÊâìÂºÄ‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂Ôºö123# Vanilla JavaScript plugin for lazyloading images.# Dependencies: https://github.com/theme-next/theme-next-jquery-lazyloadlazyload: true Â¢ûÂä†fancyboxÂíåfastclickËß£ÂÜ≥Âª∂ËøüÈóÆÈ¢òÊâìÂºÄ‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂Ôºö123456789# Fancybox. There is support for old version 2 and new version 3.# Choose only one variant, do not need to install both.# To install 2.x: https://github.com/theme-next/theme-next-fancybox# To install 3.x: https://github.com/theme-next/theme-next-fancybox3fancybox: true# Polyfill to remove click delays on browsers with touch UIs.# Dependencies: https://github.com/theme-next/theme-next-fastclickfastclick: true Êà™Êñ≠È¶ñÈ°µÊñáÁ´†ÂÜÖÂÆπÊâìÂºÄ‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂ÔºåÊêúÁ¥¢auto_excerptÔºö12345# Automatically Excerpt (Not recommend).# Use &lt;!-- more --&gt; in the post to control excerpt accurately.auto_excerpt: enable: true length: 150 ‰ª£Á†ÅÂ§çÂà∂ÂäüËÉΩ Â§çÂà∂ËØ•ÁΩëÈ°µÁöÑ‰ª£Á†ÅÔºå‰º†ÈÄÅÈó®Ôºöclipboard.min.jsÔºåÁÑ∂ÂêéÂú®themes\next\source\js\src‰∏ãÊñ∞Âª∫clipboard.min.jsÊñá‰ª∂ÔºåÂ∞Ü‰ª•‰∏äÂÜÖÂÆπÂ§çÂà∂ËøõÂéªÂç≥ÂèØÔºõ Âú®themes\next\source\js\srcÁõÆÂΩï‰∏ãÔºåÂàõÂª∫clipboard-use.jsÔºåÊñá‰ª∂ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 123456789101112131415161718 /*È°µÈù¢ËΩΩÂÖ•ÂÆåÊàêÂêéÔºåÂàõÂª∫Â§çÂà∂ÊåâÈíÆ*/ !function (e, t, a) &#123; /* code */ var initCopyCode = function()&#123; var copyHtml = ''; copyHtml += '&lt;button class="btn-copy" data-clipboard-snippet=""&gt;'; //fa fa-globeÂèØ‰ª•ÂéªÂ≠ó‰ΩìÂ∫ìÊõøÊç¢Ëá™Â∑±ÊÉ≥Ë¶ÅÁöÑÂõæÊ†ácopyHtml += ' &lt;i class="fa fa-clipboard"&gt;&lt;/i&gt;&lt;span&gt;copy&lt;/span&gt;'; copyHtml += '&lt;/button&gt;'; $(".highlight .code pre").before(copyHtml); new ClipboardJS('.btn-copy', &#123; target: function(trigger) &#123; return trigger.nextElementSibling; &#125; &#125;); &#125; initCopyCode(); &#125;(window, document); Âú®themes\next\source\css\_custom\custom.stylÊ†∑ÂºèÊñá‰ª∂‰∏≠Ê∑ªÂä†‰∏ãÈù¢‰ª£Á†ÅÔºö 123456789101112131415161718192021222324252627282930313233343536//‰ª£Á†ÅÂùóÂ§çÂà∂ÊåâÈíÆ.highlight&#123; //Êñπ‰æøcopy‰ª£Á†ÅÊåâÈíÆÔºàbtn-copyÔºâÁöÑÂÆö‰Ωç position: relative;&#125;.btn-copy &#123; display: inline-block; cursor: pointer; background-color: #eee; background-image: linear-gradient(#fcfcfc,#eee); border: 1px solid #d5d5d5; border-radius: 3px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; -webkit-appearance: none; font-size: 13px; font-weight: 700; line-height: 20px; color: #333; -webkit-transition: opacity .3s ease-in-out; -o-transition: opacity .3s ease-in-out; transition: opacity .3s ease-in-out; padding: 2px 6px; position: absolute; right: 5px; top: 5px; opacity: 0;&#125;.btn-copy span &#123; margin-left: 5px;&#125;.highlight:hover .btn-copy&#123; opacity: 1;&#125; Âú®themes\next\layout\_layout.swigÊñá‰ª∂‰∏≠ÔºåÊ∑ªÂä†ÂºïÁî®ÔºàÊ≥®ÔºöÂú® swig Êú´Â∞æÊàñ body ÁªìÊùüÊ†áÁ≠æÔºàL2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"superSample":1,"width":250,"height":300,"position":"left"},"mobile":{"show":false},"react":{"opacityDefault":0.9,"opacityOnHover":0.5},"log":false});Ôºâ‰πãÂâçÊ∑ªÂä†ÔºâÔºö 123&lt;!-- ‰ª£Á†ÅÂùóÂ§çÂà∂ÂäüËÉΩ --&gt;&lt;script type="text/javascript" src="/js/src/clipboard.min.js"&gt;&lt;/script&gt; &lt;script type="text/javascript" src="/js/src/clipboard-use.js"&gt;&lt;/script&gt; Â∞ùËØï‰∫Ü‰ΩÜÊú™ÂÆûÁé∞ÁöÑÂäüËÉΩ1.Áî®mob_shareÁöÑapp_keyÊú™ËÉΩÂÆûÁé∞shareÁöÑÂäüËÉΩÔºåÁªèËøáÂÖ∂ÂÆòÊñπ‰∫∫ÂëòÁîµËØùÊ≤üÈÄöÔºåÂ∑≤Áªè‰∏çÂÜçÊîØÊåÅpcÁ´ØÂçöÂÆ¢ÊúçÂä°2.aplayÈü≥‰πêÊí≠ÊîæÊ≠åÂçïÔºå‰∏çËÉΩÂÅöÂà∞ÂÆûÊó∂Êõ¥Êñ∞Ê≠åÂçïÔºåÁ©∂ÂÖ∂ÂéüÂõ†ÊòØÂÖ∂apiËÆæÁΩÆ‰∫Ü24Â∞èÊó∂ÁºìÂ≠òÔºåÂêå‰∏Ä‰∏™Ê≠åÂçï24Â∞èÊó∂ÂÜÖ‰∏ç‰ºöÂèëÁîüÊîπÂèò ÈùûÂ∏∏ÊúâÁõäÁöÑÁΩëÂùÄ NexT‰∏ªÈ¢òËøõÈò∂ Âü∫‰∫éHexoÁöÑ‰∏™‰∫∫ÂçöÂÆ¢Êê≠Âª∫(ËøõÈò∂Áâà) Hexo+Next‰∏ªÈ¢ò‰ºòÂåñ]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>NexT</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂâëÊåáofferÁÆóÊ≥ïÈ¢ò]]></title>
    <url>%2F2019%2F08%2F12%2F%E5%89%91%E6%8C%87offer%E7%AE%97%E6%B3%95%E9%A2%98.html</url>
    <content type="text"><![CDATA[‰∫åÁª¥Êï∞ÁªÑ‰∏≠ÁöÑÊü•ÊâæÈ¢òÁõÆÊèèËø∞Âú®‰∏Ä‰∏™‰∫åÁª¥Êï∞ÁªÑ‰∏≠ÔºàÊØè‰∏™‰∏ÄÁª¥Êï∞ÁªÑÁöÑÈïøÂ∫¶Áõ∏ÂêåÔºâÔºåÊØè‰∏ÄË°åÈÉΩÊåâÁÖß‰ªéÂ∑¶Âà∞Âè≥ÈÄíÂ¢ûÁöÑÈ°∫Â∫èÊéíÂ∫èÔºåÊØè‰∏ÄÂàóÈÉΩÊåâÁÖß‰ªé‰∏äÂà∞‰∏ãÈÄíÂ¢ûÁöÑÈ°∫Â∫èÊéíÂ∫è„ÄÇËØ∑ÂÆåÊàê‰∏Ä‰∏™ÂáΩÊï∞ÔºåËæìÂÖ•ËøôÊ†∑ÁöÑ‰∏Ä‰∏™‰∫åÁª¥Êï∞ÁªÑÂíå‰∏Ä‰∏™Êï¥Êï∞ÔºåÂà§Êñ≠Êï∞ÁªÑ‰∏≠ÊòØÂê¶Âê´ÊúâËØ•Êï¥Êï∞„ÄÇ Ëß£È¢òÊÄùË∑ØË¶ÅÊ±ÇÊó∂Èó¥Â§çÊùÇÂ∫¶ O(M + N)ÔºåÁ©∫Èó¥Â§çÊùÇÂ∫¶ O(1)„ÄÇÂÖ∂‰∏≠ M ‰∏∫Ë°åÊï∞ÔºåN ‰∏∫ÂàóÊï∞„ÄÇËØ•‰∫åÁª¥Êï∞ÁªÑ‰∏≠ÁöÑ‰∏Ä‰∏™Êï∞ÔºåÂ∞è‰∫éÂÆÉÁöÑÊï∞‰∏ÄÂÆöÂú®ÂÖ∂Â∑¶ËæπÔºåÂ§ß‰∫éÂÆÉÁöÑÊï∞‰∏ÄÂÆöÂú®ÂÖ∂‰∏ãËæπ„ÄÇÂõ†Ê≠§Ôºå‰ªéÂè≥‰∏äËßíÂºÄÂßãÊü•ÊâæÔºåÂ∞±ÂèØ‰ª•Ê†πÊçÆ target ÂíåÂΩìÂâçÂÖÉÁ¥†ÁöÑÂ§ßÂ∞èÂÖ≥Á≥ªÊù•Áº©Â∞èÊü•ÊâæÂå∫Èó¥ÔºåÂΩìÂâçÂÖÉÁ¥†ÁöÑÊü•ÊâæÂå∫Èó¥‰∏∫Â∑¶‰∏ãËßíÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇ My code1234567891011121314151617# -*- coding:utf-8 -*-class Solution: # array ‰∫åÁª¥ÂàóË°® def Find(self, target, array): # write code here row = len(array) col = len(array[0]) c = col - 1 r = 0 while(r &lt;= row-1 and c &gt;=0): if(target == array[r][c]): return True elif(target &gt; array[r][c]): r+=1 else: c-=1 return False ÊõøÊç¢Á©∫Ê†ºÈ¢òÁõÆÊèèËø∞ËØ∑ÂÆûÁé∞‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂ∞Ü‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤‰∏≠ÁöÑÊØè‰∏™Á©∫Ê†ºÊõøÊç¢Êàê‚Äú%20‚Äù„ÄÇ‰æãÂ¶ÇÔºåÂΩìÂ≠óÁ¨¶‰∏≤‰∏∫We Are Happy.ÂàôÁªèËøáÊõøÊç¢‰πãÂêéÁöÑÂ≠óÁ¨¶‰∏≤‰∏∫We%20Are%20Happy„ÄÇ Ëß£È¢òÊÄùË∑ØÂ∞ÜÂ≠óÁ¨¶‰∏≤Â§çÂà∂Áªô‰∏Ä‰∏™Êñ∞ÁöÑÂàóË°®ÔºåÁ¢∞Âà∞Á©∫Ê†ºÂàôÊõøÊç¢ÔºåÊ≤°ÊúâÂàôcopyÂéüÂ≠óÁ¨¶‰∏≤ÔºåÊúÄÂêéÂØπÂàóË°®ËøõË°åjoinÔºåËøîÂõûÂ≠óÁ¨¶‰∏≤„ÄÇ ÊòìÈîôÁÇπ My code12345678910111213141516171819202122# -*- coding:utf-8 -*-class Solution: # s Ê∫êÂ≠óÁ¨¶‰∏≤ def replaceSpace(self, s): # write code here t = len(s) j = 0 m = list(s) for i in range(0,t): if(s[i] == ' '): m[j] = '%20' j+=1 else: m[j] = s[i] j+=1 pass return ''.join(m)# s = 'I want to sleep'# solution = Solution()# ss = solution.replaceSpace(s)# print(ss) ‰ªéÂ∞æÂà∞Â§¥ÊâìÂç∞ÈìæË°®È¢òÁõÆÊèèËø∞ËæìÂÖ•‰∏Ä‰∏™ÈìæË°®ÔºåÊåâÈìæË°®ÂÄº‰ªéÂ∞æÂà∞Â§¥ÁöÑÈ°∫Â∫èËøîÂõû‰∏Ä‰∏™ArrayList„ÄÇ Ëß£È¢òÊÄùË∑ØÁü•ËØÜÁÇπË°•ÂÖÖpython‰∏≠ÈìæË°®ÁöÑÊìç‰Ωú1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768class Node(): 'ÂàõÂª∫ËäÇÁÇπ' def __init__(self,data): self.data = data self.next = None class LinkList(): 'ÂàõÂª∫ÂàóË°®' def __init__(self, node): 'ÂàùÂßãÂåñÂàóË°®' self.head = node self.head.next = None self.tail = self.head def add_node(self, node): 'Ê∑ªÂä†ËäÇÁÇπ' self.tail.next = node self.tail = self.tail.next def view(self): 'Êü•ÁúãÂàóË°®' node = self.head link_str = '' while node is not None: if node.next is not None: link_str += str(node.data) + '--&gt;' else: link_str += str(node.data) node = node.next print ('The Linklist is:' + link_str) def length(self): 'ÂàóË°®ÈïøÂ∫¶' node = self.head count = 1 while node.next is not None: count += 1 node = node.next print ('The length of linklist are %d' % count) return count def delete_node(self, index): 'Âà†Èô§ËäÇÁÇπ' if index+1 &gt; self.length(): raise IndexError('index out of bounds') num = 0 node = self.head while True: if num == index-1: break node = node.next num += 1 tmp_node = node.next node.next = node.next.next return tmp_node.data def find_node(self, index): 'Êü•ÁúãÂÖ∑‰ΩìËäÇÁÇπ' if index+1 &gt; self.length(): raise IndexError('index out of bounds') num = 0 node = self.head while True: if num == index: break node = node.next num += 1 return node.data My code123456789101112131415# -*- coding:utf-8 -*-# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: # ËøîÂõû‰ªéÂ∞æÈÉ®Âà∞Â§¥ÈÉ®ÁöÑÂàóË°®ÂÄºÂ∫èÂàóÔºå‰æãÂ¶Ç[1,2,3] def printListFromTailToHead(self, listNode): # write code here res=[] while listNode: res.append(listNode.val) listNode=listNode.next return res[::-1] #ÈÄÜÂ∫èÊâìÂç∞ ÈáçÂª∫‰∫åÂèâÊ†ëÈ¢òÁõÆÊèèËø∞ËæìÂÖ•Êüê‰∫åÂèâÊ†ëÁöÑÂâçÂ∫èÈÅçÂéÜÂíå‰∏≠Â∫èÈÅçÂéÜÁöÑÁªìÊûúÔºåËØ∑ÈáçÂª∫Âá∫ËØ•‰∫åÂèâÊ†ë„ÄÇÂÅáËÆæËæìÂÖ•ÁöÑÂâçÂ∫èÈÅçÂéÜÂíå‰∏≠Â∫èÈÅçÂéÜÁöÑÁªìÊûú‰∏≠ÈÉΩ‰∏çÂê´ÈáçÂ§çÁöÑÊï∞Â≠ó„ÄÇ‰æãÂ¶ÇËæìÂÖ•ÂâçÂ∫èÈÅçÂéÜÂ∫èÂàó{1,2,4,7,3,5,6,8}Âíå‰∏≠Â∫èÈÅçÂéÜÂ∫èÂàó{4,7,2,1,5,3,8,6}ÔºåÂàôÈáçÂª∫‰∫åÂèâÊ†ëÂπ∂ËøîÂõû„ÄÇ Ëß£È¢òÊÄùË∑Ø ÈÄíÂΩí Êï¥‰ΩìÊÄùË∑ØÂ∞±ÊòØÔºöÂà©Áî®ÈÄíÂΩíÁöÑÊÄùÊÉ≥ÔºåË∑üÂΩíÂπ∂ÂíåÂø´ÊéíÊúâÂºÇÊõ≤ÂêåÂ∑•‰πãÂ¶ô„ÄÇÊäì‰ΩèÁ¨¨‰∏Ä‰∏™ËäÇÁÇπÊòØÊ†πËäÇÁÇπÔºåÁÑ∂ÂêéÂú®‰∏≠Â∫èÈÅçÂéÜ‰∏≠ÂÆö‰ΩçËØ•ËäÇÁÇπÔºåÂ∑¶ËæπÂç≥‰∏∫Ê†πËäÇÁÇπÁöÑÂ∑¶Â≠êÊ†ëÔºåÂè≥ËæπÂç≥‰∏∫Ê†πËäÇÁÇπÁöÑÂè≥Â≠êÊ†ë„ÄÇÁÑ∂ÂêéÂØπÂ∑¶Â≠êÊ†ëÂíåÂè≥Â≠êÊ†ëÂàÜÂà´ËøõË°åÈÄíÂΩíÂç≥ÂèØÔºåÁõ¥Âà∞Â∑¶Â≠êÊ†ëÂíåÂè≥Â≠êÊ†ëÈÉΩÊ≤°‰∫Ü„ÄÇ ÈùûÈÄíÂΩí Êï¥‰ΩìÊÄùË∑ØÔºöÊàëËøòÊ≤°ËÆ§ÁúüÁúãÂë¢ÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅ Áî®‰∏§‰∏™Â†ÜÊ†àÊù•ÂàÜÂà´Â≠òÂÇ®‰∫åÂèâÊ†ëÂíåÂÖàÂ∫è‰∏≠Â∫èÂ∫èÂàóÁ¥¢ÂºïÂÄºÔºåË∑üÈÄíÂΩíÊÄùË∑Ø‰∏ÄÊ†∑ÔºåÂÖàÊâæÂà∞Ê†πËäÇÁÇπÔºåÁÑ∂ÂêéÂàÜÂà´Âà§Êñ≠Âú®‰∏≠Â∫èÈÅçÂéÜ‰∏≠ÊòØÂê¶ËøòÊúâÂ∑¶Âè≥Â≠êÊ†ëÔºåÂ¶ÇÊûúÊúâÂàôËÆ°Êï∞ÂÄºcount+=1,ÂΩìÊâæÂà∞‰∏Ä‰∏™ËäÇÁÇπ‰πãÂêéÂ∞±Â∞ÜËÆ°Êï∞ÂÄºcount-=1ÔºåÁõ¥Âà∞‰∏≠Â∫èÈÅçÂéÜ‰∏≠ÂÜç‰πüÊ≤°ÊúâÂ∑¶Âè≥Â≠êÊ†ë„ÄÇ My codeÈÄíÂΩí1234567891011121314151617181920212223242526272829303132333435/** * Definition for binary tree * public class TreeNode &#123; * int val; * TreeNode left; * TreeNode right; * TreeNode(int x) &#123; val = x; &#125; * &#125; */public class Solution &#123; public TreeNode reConstructBinaryTree(int [] pre, int [] in) &#123; if(pre == null || in == null || pre.length == 0 || in.length == 0)&#123; return null; &#125; return constructBinaryTree(pre,in,0,pre.length-1,0,in.length-1); // È¶ñÂÖàÁúãÂÖàÂ∫èÈÅçÂéÜÁöÑÁ¨¨‰∏Ä‰∏™Êï∞ÔºåËøôÊòØÊ†πËäÇÁÇπÔºåÁÑ∂ÂêéÊ†πÊçÆ‰∏≠Â∫èÈÅçÂéÜÁÑ∂ÂêéÂàÜ‰∏∫Â∑¶Âè≥‰∏§‰∏™ËäÇÁÇπÂùó // ÂÜçÁúãÂ∑¶ËæπÁöÑÁ¨¨‰∏Ä‰∏™Êï∞ÔºåËøô‰∏™ËÇØÂÆöÊòØÊ†πËäÇÁÇπÔºåÁÑ∂ÂêéÂÆö‰ΩçÂà∞‰∏≠Â∫èÈÅçÂéÜËØ•Êï∞ÁöÑ‰ΩçÁΩÆÔºåÂÜçÂ∞ÜÂÖ∂ÂàÜ‰∏∫Â∑¶Âè≥‰∏§‰∏™ËäÇÁÇπÂùóÔºå‰ª•Ê≠§Á±ªÊé®„ÄÇ &#125; private TreeNode constructBinaryTree(int[] pre, int[] in, int preStart, int preEnd, int inStart, int inEnd) &#123; if(preStart &gt; preEnd || inStart &gt; inEnd)&#123; return null; &#125; TreeNode node = new TreeNode(pre[preStart]); int mid = inStart; while (pre[preStart] != in[mid]) mid++; int preNumber = mid - inStart; node.left = constructBinaryTree(pre,in,preStart + 1,preStart + preNumber,inStart,mid - 1); node.right = constructBinaryTree(pre,in,preStart + preNumber + 1,preEnd,mid + 1,inEnd); return node; &#125;&#125; ÈùûÈÄíÂΩí123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475/** * Definition for binary tree * public class TreeNode &#123; * int val; * TreeNode left; * TreeNode right; * TreeNode(int x) &#123; val = x; &#125; * &#125; */import java.util.*;public class Solution &#123; public TreeNode reConstructBinaryTree(int [] pre,int [] in) &#123; //pÁî®Êù•‰øùÂ≠ò‰∏§‰∏™Â∫èÂàóÁöÑÁ¥¢ÂºïÂÄº Stack&lt;Integer&gt; p = new Stack&lt;Integer&gt;(); Stack&lt;TreeNode&gt; l = new Stack&lt;TreeNode&gt;(); TreeNode cur = null; p.push(0); p.push(pre.length - 1); p.push(0); p.push(in.length - 1); int count = 1; int pStart = 0; int pEnd = pre.length - 1; int iStart = 0; int iEnd = in.length - 1; TreeNode root = new TreeNode(-1); l.push(root); while( count != 0)&#123; iEnd = p.pop(); iStart = p.pop(); pEnd = p.pop(); pStart = p.pop(); cur = l.pop(); count -= 1; int index = find(pre[pStart], in, iStart, iEnd); cur.val = pre[pStart]; int lenL = index - iStart; if(lenL == 0)&#123; &#125;else&#123; p.push(pStart + 1); p.push(pStart + lenL); p.push(iStart); p.push(index - 1); count += 1; cur.left = new TreeNode(-1); l.push(cur.left); &#125; int lenR = iEnd - index; if(lenR == 0)&#123; &#125;else&#123; p.push(pStart + lenL + 1); p.push(pEnd); p.push(index + 1); p.push(iEnd); count += 1; cur.right = new TreeNode(-1); l.push(cur.right); &#125; &#125; return root; &#125; int find(int target, int[] all, int start , int end)&#123; for(int i = start; i &lt;= end; ++i)&#123; if(all[i] == target) return i; &#125; return -1; &#125;&#125; Áü•ËØÜÁÇπË°•ÂÖÖTips: ‰∫åÂèâÊ†ëÁöÑÂâçÂ∫èÔºå‰∏≠Â∫èÔºåÂêéÂ∫èÈÅçÂéÜÊñπÊ≥ïÊÄªÁªì ÂâçÂ∫èÈÄíÂΩíÂíåÈùûÈÄíÂΩíÁÆóÊ≥ïÂâçÂ∫èÈÄíÂΩíÈÄíÂΩíÁöÑÊñπÊ≥ïÂæàÂÆπÊòìÂÆûÁé∞Ôºå‰πüÂæàÂÆπÊòìÁêÜËß£ÔºöÊàë‰ª¨ÂÖàËÆøÈóÆÊ†πËäÇÁÇπÔºåÁÑ∂ÂêéÈÄíÂΩíËÆøÈóÆÂ∑¶Â≠êÊ†ëÔºåÂÜçÈÄíÂΩíËÆøÈóÆÂè≥Â≠êÊ†ëÔºåÂç≥ÂÆûÁé∞‰∫ÜÊ†π-&gt;Â∑¶-&gt;Âè≥ÁöÑËÆøÈóÆÈ°∫Â∫èÔºåÂõ†‰∏∫‰ΩøÁî®ÁöÑÊòØÈÄíÂΩíÊñπÊ≥ïÔºåÊâÄ‰ª•ÊØè‰∏Ä‰∏™Â≠êÊ†ëÈÉΩÂÆûÁé∞‰∫ÜËøôÊ†∑ÁöÑÈ°∫Â∫è„ÄÇ 1234567891011121314class Solution &#123; public List&lt;Integer&gt; preorderTraversal(TreeNode root) &#123; List&lt;Integer&gt; result = new LinkedList&lt;&gt;(); preorderHelper(root, result); return result; &#125; private void preorderHelper(TreeNode root, List&lt;Integer&gt; result) &#123; if (root == null) return; result.add(root.val); // ËÆøÈóÆÊ†πËäÇÁÇπ preorderHelper(root.left, result); // ÈÄíÂΩíÈÅçÂéÜÂ∑¶Â≠êÊ†ë preorderHelper(root.right, result); //ÈÄíÂΩíÈÅçÂéÜÂè≥Â≠êÊ†ë &#125;&#125; ÂâçÂ∫èÈùûÈÄíÂΩíÂú®Ëø≠‰ª£Ê≥ï‰∏≠ÔºåÊàë‰ª¨‰ΩøÁî®Ê†àÊù•ÂÆûÁé∞„ÄÇÁî±‰∫éÂá∫Ê†àÈ°∫Â∫èÂíåÂÖ•Ê†àÈ°∫Â∫èÁõ∏ÂèçÔºåÊâÄ‰ª•ÊØèÊ¨°Ê∑ªÂä†ËäÇÁÇπÁöÑÊó∂ÂÄôÂÖàÊ∑ªÂä†Âè≥ËäÇÁÇπÔºåÂÜçÊ∑ªÂä†Â∑¶ËäÇÁÇπ„ÄÇËøôÊ†∑Âú®‰∏ã‰∏ÄËΩÆËÆøÈóÆÂ≠êÊ†ëÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöÂÖàËÆøÈóÆÂ∑¶Â≠êÊ†ëÔºåÂÜçËÆøÈóÆÂè≥Â≠êÊ†ëÔºö 123456789101112131415161718class Solution &#123; public List&lt;Integer&gt; preorderTraversal(TreeNode root) &#123; List&lt;Integer&gt; result = new LinkedList&lt;&gt;(); if (root == null) return result; Stack&lt;TreeNode&gt; toVisit = new Stack&lt;&gt;(); toVisit.push(root); TreeNode cur; while (!toVisit.isEmpty()) &#123; cur = toVisit.pop(); result.add(cur.val); // ËÆøÈóÆÊ†πËäÇÁÇπ if (cur.right != null) toVisit.push(cur.right); // Âè≥ËäÇÁÇπÂÖ•Ê†à if (cur.left != null) toVisit.push(cur.left); // Â∑¶ËäÇÁÇπÂÖ•Ê†à &#125; return result; &#125;&#125; ‰∏≠Â∫èÈÄíÂΩíÂíåÈùûÈÄíÂΩíÁÆóÊ≥ï‰∏≠Â∫èÈÄíÂΩíÊó†ËÆ∫ÂØπ‰∫éÂì™ÁßçÊñπÂºèÔºåÈÄíÂΩíÁöÑÊñπÊ≥ïÊÄªÊòØÂæàÂÆπÊòìÂÆûÁé∞ÁöÑÔºå‰πüÊòØÂæàÁ¨¶ÂêàÁõ¥ËßâÁöÑ„ÄÇÂØπ‰∫é‰∏≠Â∫èÈÅçÂéÜÔºåÂ∞±ÊòØÂÖàËÆøÈóÆÂ∑¶Â≠êÊ†ëÔºåÂÜçËÆøÈóÆÊ†πËäÇÁÇπÔºåÂÜçËÆøÈóÆÂè≥Â≠êÊ†ëÔºåÂç≥ Â∑¶-&gt;Ê†π-&gt;Âè≥Ôºö 1234567891011121314class Solution &#123; public List&lt;Integer&gt; inorderTraversal(TreeNode root) &#123; List&lt;Integer&gt; result = new LinkedList&lt;&gt;(); inorderHelper(root, result); return result; &#125; private void inorderHelper(TreeNode root, List&lt;Integer&gt; result) &#123; if(root == null) return; inorderHelper(root.left, result); // ÈÄíÂΩíÈÅçÂéÜÂ∑¶Â≠êÊ†ë result.add(root.val); // ËÆøÈóÆÊ†πËäÇÁÇπ inorderHelper(root.right, result); // ÈÄíÂΩíÈÅçÂéÜÂè≥Â≠êÊ†ë &#125;&#125; ‰∏≠Â∫èÈùûÈÄíÂΩí‰∏≠Â∫èÈÅçÂéÜÁöÑËø≠‰ª£Ê≥ïË¶ÅÁ®çÂæÆÂ§çÊùÇ‰∏ÄÁÇπÔºåÂõ†‰∏∫ÊúÄÂÖàÈÅáÂà∞ÁöÑÊ†πËäÇÁÇπ‰∏çÊòØÊúÄÂÖàËÆøÈóÆÁöÑÔºåÊàë‰ª¨ÈúÄË¶ÅÂÖàËÆøÈóÆÂ∑¶Â≠êÊ†ëÔºåÂÜçÂõûÈÄÄÂà∞Ê†πËäÇÁÇπÔºåÂÜçËÆøÈóÆÊ†πËäÇÁÇπÁöÑÂè≥Â≠êÊ†ëÔºåËøôÈáåÁöÑ‰∏Ä‰∏™ÈöæÁÇπÊòØ‰ªéÂ∑¶Â≠êÊ†ëÂõûÈÄÄÂà∞Ê†πËäÇÁÇπÁöÑÊìç‰ΩúÔºåËôΩÁÑ∂ÂèØ‰ª•Áî®Ê†àÊù•ÂÆûÁé∞ÂõûÈÄÄÔºå‰ΩÜÊòØË¶ÅÊ≥®ÊÑèÂú®Âá∫Ê†àÊó∂‰øùÂ≠òÊ†πËäÇÁÇπÁöÑÂºïÁî®ÔºåÂõ†‰∏∫Êàë‰ª¨ËøòÈúÄË¶ÅÈÄöËøáÊ†πËäÇÁÇπÊù•ËÆøÈóÆÂè≥Â≠êÊ†ëÔºö 123456789101112131415161718class Solution &#123; public List&lt;Integer&gt; inorderTraversal(TreeNode root) &#123; List&lt;Integer&gt; result = new LinkedList&lt;&gt;(); Stack&lt;TreeNode&gt; toVisit = new Stack&lt;&gt;(); TreeNode cur = root; while (cur != null || !toVisit.isEmpty()) &#123; while (cur != null) &#123; toVisit.push(cur); // Ê∑ªÂä†Ê†πËäÇÁÇπ cur = cur.left; // Âæ™ÁéØÊ∑ªÂä†Â∑¶ËäÇÁÇπ &#125; cur = toVisit.pop(); // ÂΩìÂâçÊ†àÈ°∂Â∑≤ÁªèÊòØÊúÄÂ∫ïÂ±ÇÁöÑÂ∑¶ËäÇÁÇπ‰∫ÜÔºåÂèñÂá∫Ê†àÈ°∂ÂÖÉÁ¥†ÔºåËÆøÈóÆËØ•ËäÇÁÇπ result.add(cur.val); cur = cur.right; // Ê∑ªÂä†Âè≥ËäÇÁÇπ &#125; return result; &#125;&#125; Âú®ÁúãËøôÈÉ®ÂàÜ‰ª£Á†Å‰∏≠ÔºåËÑëÊµ∑‰∏≠Ë¶ÅÊúâ‰∏Ä‰∏™Ê¶ÇÂøµÔºöÂΩìÂâçÊ†ëÁöÑÊ†πËäÇÁÇπÁöÑÂ∑¶ËäÇÁÇπÔºåÊòØÂÆÉÁöÑÂ∑¶Â≠êÊ†ëÁöÑÊ†πËäÇÁÇπ„ÄÇÂõ†Ê≠§‰ªé‰∏çÂêåÁöÑÂ±ÇÊ¨°‰∏äÁúãÔºåÂ∑¶ËäÇÁÇπ‰πüÊòØÊ†πËäÇÁÇπ„ÄÇÂè¶Â§ñÔºåLeetCode‰∏ä‰πüÊèê‰æõ‰∫ÜÂÖ≥‰∫é‰∏≠Â∫èÈÅçÂéÜÁöÑÂä®ÊÄÅÂõæÁöÑÊºîÁ§∫ÔºåÊÑüÂÖ¥Ë∂£ÁöÑËØªËÄÖÂèØ‰ª•ÂéªÁúã‰∏ÄÁúã„ÄÇ ÂêéÂ∫èÈÄíÂΩíÂíåÈùûÈÄíÂΩíÁÆóÊ≥ïÂêéÂ∫èÈÄíÂΩíÊó†ËÆ∫ÂØπ‰∫éÂì™ÁßçÊñπÂºèÔºåÈÄíÂΩíÁöÑÊñπÊ≥ïÊÄªÊòØÂæàÂÆπÊòìÂÆûÁé∞ÁöÑÔºå‰πüÊòØÂæàÁ¨¶ÂêàÁõ¥ËßâÁöÑ„ÄÇÂØπ‰∫éÂêéÂ∫èÈÅçÂéÜÔºåÂ∞±ÊòØÂÖàËÆøÈóÆÂ∑¶Â≠êÊ†ëÔºåÂÜçËÆøÈóÆÂè≥Â≠êÊ†ëÔºåÂÜçËÆøÈóÆÊ†πËäÇÁÇπÔºåÂç≥ Â∑¶-&gt;Âè≥-&gt;Ê†πÔºö 1234567891011121314class Solution &#123; public List&lt;Integer&gt; postorderTraversal(TreeNode root) &#123; List&lt;Integer&gt; result = new LinkedList&lt;&gt;(); postorderHelper(root, result); return result; &#125; private void postorderHelper(TreeNode root, List&lt;Integer&gt; result) &#123; if (root == null) return; postorderHelper(root.left, result); // ÈÅçÂéÜÂ∑¶Â≠êÊ†ë postorderHelper(root.right, result); // ÈÅçÂéÜÂè≥Â≠êÊ†ë result.add(root.val); // ËÆøÈóÆÊ†πËäÇÁÇπ &#125;&#125; ÂêéÂ∫èÈùûÈÄíÂΩíÂâçÈù¢ËØ¥ËøáÔºå‰∏é‰∏≠Â∫èÈÅçÂéÜ‰∏çÂêåÁöÑÊòØÔºåÂêéÂ∫èÈÅçÂéÜÂú®ËÆøÈóÆÂÆåÂ∑¶Â≠êÊ†ëÂêë‰∏äÂõûÈÄÄÂà∞Ê†πËäÇÁÇπÁöÑÊó∂ÂÄô‰∏çÊòØÁ´ãÈ©¨ËÆøÈóÆÊ†πËäÇÁÇπÁöÑÔºåËÄåÊòØÂæóÂÖàÂéªËÆøÈóÆÂè≥Â≠êÊ†ëÔºåËÆøÈóÆÂÆåÂè≥Â≠êÊ†ëÂêéÂú®ÂõûÈÄÄÂà∞Ê†πËäÇÁÇπÔºåÂõ†Ê≠§ÔºåÂú®Ëø≠‰ª£ËøáÁ®ã‰∏≠Ë¶ÅÂ§çÊùÇ‰∏ÄÁÇπÔºö 1234567891011121314151617181920212223242526class Solution &#123; public List&lt;Integer&gt; postorderTraversal(TreeNode root) &#123; List&lt;Integer&gt; result = new LinkedList&lt;&gt;(); Stack&lt;TreeNode&gt; toVisit = new Stack&lt;&gt;(); TreeNode cur = root; TreeNode pre = null; while (cur != null || !toVisit.isEmpty()) &#123; while (cur != null) &#123; toVisit.push(cur); // Ê∑ªÂä†Ê†πËäÇÁÇπ cur = cur.left; // ÈÄíÂΩíÊ∑ªÂä†Â∑¶ËäÇÁÇπ &#125; cur = toVisit.peek(); // Â∑≤ÁªèËÆøÈóÆÂà∞ÊúÄÂ∑¶ÁöÑËäÇÁÇπ‰∫Ü //Âú®‰∏çÂ≠òÂú®Âè≥ËäÇÁÇπÊàñËÄÖÂè≥ËäÇÁÇπÂ∑≤ÁªèËÆøÈóÆËøáÁöÑÊÉÖÂÜµ‰∏ãÔºåËÆøÈóÆÊ†πËäÇÁÇπ if (cur.right == null || cur.right == pre) &#123; toVisit.pop(); result.add(cur.val); pre = cur; cur = null; &#125; else &#123; cur = cur.right; // Âè≥ËäÇÁÇπËøòÊ≤°ÊúâËÆøÈóÆËøáÂ∞±ÂÖàËÆøÈóÆÂè≥ËäÇÁÇπ &#125; &#125; return result; &#125;&#125; ËøôÈáåÂ∞§ÂÖ∂Ê≥®ÊÑèÂêéÁª≠ÈÅçÂéÜÂíå‰∏≠Â∫èÈÅçÂéÜ‰∏≠ÂØπ‰∫é‰ªéÊúÄÂ∑¶‰æßËäÇÁÇπÂêë‰∏äÂõûÈÄÄÊó∂ÁöÑÂ§ÑÁêÜÔºö Âú®ÂêéÂ∫èÈÅçÂéÜ‰∏≠ÔºåÊàë‰ª¨È¶ñÂÖà‰ΩøÁî®ÁöÑÊòØÔºö 1cur = toVisit.peek(); Ê≥®ÊÑèÔºåËøôÈáå‰ΩøÁî®ÁöÑÊòØpeekËÄå‰∏çÊòØpopÔºåËøôÊòØÂõ†‰∏∫Êàë‰ª¨ÈúÄË¶ÅÈ¶ñÂÖàÂéªËÆøÈóÆÂè≥ËäÇÁÇπÔºå‰∏ãÈù¢ÁöÑÔºö 1if (cur.right == null || cur.right == pre) Â∞±ÊòØÁî®Êù•Âà§Êñ≠ÊòØÂê¶Â≠òÂú®Âè≥ËäÇÁÇπÔºåÊàñËÄÖÂè≥ËäÇÁÇπÊòØÂê¶Â∑≤ÁªèËÆøÈóÆËøá‰∫ÜÔºåÂ¶ÇÊûúÂè≥ËäÇÁÇπÂ∑≤ÁªèËÆøÈóÆËøá‰∫ÜÔºåÂàôÊé•‰∏ãÊù•ÁöÑÊìç‰ΩúÂ∞±Âíå‰∏≠Â∫èÈÅçÂéÜÁöÑÊÉÖÂÜµÂ∑Æ‰∏çÂ§ö‰∫ÜÔºåÊâÄ‰∏çÂêåÁöÑÊòØÔºåËøôÈáåÂ§ö‰∫Ü‰∏§Ê≠•Ôºö 12pre = cur;cur = null; Ëøô‰∏§Ê≠•ÁöÑÁõÆÁöÑÈÉΩÊòØ‰∏∫‰∫ÜÂú®‰∏ã‰∏ÄËΩÆÈÅçÂéÜ‰∏≠‰∏çÂÜçËÆøÈóÆËá™Â∑±Ôºåcur = nullÂæàÂ•ΩÁêÜËß£ÔºåÂõ†‰∏∫Êàë‰ª¨ÂøÖÈ°ªÂú®‰∏ÄËΩÆÁªìÊùüÂêéÊîπÂèòcurÁöÑÂÄºÔºå‰ª•Ê∑ªÂä†‰∏ã‰∏Ä‰∏™ËäÇÁÇπÔºåÊâÄ‰ª•ÂÆÉÂíåcur = cur.right‰∏ÄÊ†∑ÔºåÁõÆÁöÑÈÉΩÊòØÊåáÂêë‰∏ã‰∏Ä‰∏™ÂæÖÈÅçÂéÜÁöÑËäÇÁÇπÔºåÂè™ÊòØÂú®ËøôÈáåÔºåÂè≥ËäÇÁÇπÂ∑≤ÁªèËÆøÈóÆËøá‰∫ÜÔºåÂàô‰ª•ÂΩìÂâçËäÇÁÇπ‰∏∫Ê†πËäÇÁÇπÁöÑÊï¥‰∏™Â≠êÊ†ëÈÉΩÂ∑≤ÁªèËÆøÈóÆËøá‰∫ÜÔºåÊé•‰∏ãÊù•Â∫îËØ•ÂõûÈÄÄÂà∞ÂΩìÂâçËäÇÁÇπÁöÑÁà∂ËäÇÁÇπÔºåËÄåÂΩìÂâçËäÇÁÇπÁöÑÁà∂ËäÇÁÇπÂ∑≤ÁªèÂú®Ê†àÈáå‰∫ÜÔºåÊâÄ‰ª•Êàë‰ª¨Âπ∂Ê≤°ÊúâÊñ∞ÁöÑËäÇÁÇπË¶ÅÊ∑ªÂä†ÔºåÁõ¥Êé•Â∞ÜcurËÆæ‰∏∫nullÂç≥ÂèØ„ÄÇ pre = cur ÁöÑÁõÆÁöÑÊúâÁÇπÁ±ª‰ºº‰∫éÂ∞ÜÂΩìÂâçËäÇÁÇπÊ†áËÆ∞‰∏∫Â∑≤ËÆøÈóÆÔºåÂÆÉÊòØÂíåifÊù°‰ª∂‰∏≠ÁöÑcur.right == preÈÖçÂêà‰ΩøÁî®ÁöÑ„ÄÇÊ≥®ÊÑèËøôÈáåÁöÑ‰∏§‰∏™curÊåáÁöÑ‰∏çÊòØÂêå‰∏Ä‰∏™ËäÇÁÇπ„ÄÇÊàë‰ª¨ÂÅáËÆæÂΩìÂâçËäÇÁÇπ‰∏∫CÔºåÂΩìÂâçËäÇÁÇπÁöÑÁà∂ËäÇÁÇπ‰∏∫AÔºåËÄåCÊòØAÁöÑÂè≥Â≠©Â≠êÔºåÂàôÂΩìÂâçcurÊòØCÔºå‰ΩÜÂú®‰∏ÄËΩÆ‰∏≠ÔºåcurÂ∞ÜÂèòÊàêAÔºåÂàôÔºö 123 A / \B C (pre) pre = cur Â∞±ÊòØ pre = C if (cur.right == null || cur.right == pre) Â∞±ÊòØ if (A.right == null || A.right == pre) ËøôÈáåÔºåÁî±‰∫éAÊòØÊúâÂè≥ËäÇÁÇπÁöÑÔºåÂÆÉÁöÑÂè≥ËäÇÁÇπÂ∞±ÊòØCÔºåÊâÄ‰ª•A.right == null‰∏çÊàêÁ´ã„ÄÇ‰ΩÜÊòØCËäÇÁÇπÊàë‰ª¨Âú®‰∏ä‰∏ÄËΩÆÂ∑≤ÁªèËÆøÈóÆËøá‰∫ÜÔºåÊâÄ‰ª•ËøôÈáå‰∏∫‰∫ÜÈò≤Ê≠¢ËøõÂÖ•elseËØ≠Âè•ÈáçÂ§çÊ∑ªÂä†ËäÇÁÇπÔºåÊàë‰ª¨Â§öÂä†‰∫Ü‰∏Ä‰∏™A.right == preÊù°‰ª∂ÔºåÂÆÉË°®Á§∫AÁöÑÂè≥ËäÇÁÇπÂ∑≤ÁªèËÆøÈóÆËøá‰∫ÜÔºåÊàë‰ª¨Âæó‰ª•ËøõÂÖ•ifËØ≠Âè•ÂÜÖÔºåÁõ¥Êé•ËÆøÈóÆAËäÇÁÇπ„ÄÇ Áî®‰∏§‰∏™Ê†àÂÆûÁé∞ÈòüÂàóÊóãËΩ¨Êï∞ÁªÑÁöÑÊúÄÂ∞èÊï∞Â≠ótipsÔºöÂè™Ë¶ÅÊòØÂÖ≥‰∫éÊúâÂ∫èÊï∞ÁªÑÔºåÂü∫Êú¨Â∞±Âú®ËÄÉÂØü‰∫åÂàÜÊ≥ï ÊñêÊ≥¢ÈÇ£Â•ëÊï∞ÂàóÂèòÊÄÅË∑≥Âè∞Èò∂]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>ÂâëÊåáoffer</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Âú®macOS‰∏ä‰ΩøÁî®GitHub Pages+HexoÊê≠Âª∫‰∏™‰∫∫ÂçöÂÆ¢]]></title>
    <url>%2F2019%2F08%2F08%2F%E5%9C%A8macOS%E4%B8%8A%E4%BD%BF%E7%94%A8GitHub-Pages-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2.html</url>
    <content type="text"><![CDATA[Êê≠Âª∫ÁéØÂ¢ÉÊìç‰ΩúÁ≥ªÁªüÔºömacos 10.14.5Â∑•ÂÖ∑Ôºögithub Desktop, Node.js, GitÊ°ÜÊû∂ÔºöHexo, Github Pages ÂÖ∑‰ΩìÊ≠•È™§ÂÆâË£ÖgitÁõ¥Êé•Âú®ÁªàÁ´ØËæìÂÖ•git --versionÂà§Êñ≠Ëá™Â∑±Á≥ªÁªüÊòØÂê¶Â∑≤ÊúâgitÔºåÂ¶ÇÊûúÊ≤°ÊúâÔºåÁÇπÂáªËØ•ÈìæÊé•git‰∏ãËΩΩÔºåÂÆâË£ÖÂÆåÂêéËøõÂÖ•ÁªàÁ´ØËæìÂÖ•git --versionÊ£ÄÊü•ÊòØÂê¶ÂÆâË£ÖÊàêÂäü„ÄÇ ÂÆâË£Önode.jsËØù‰∏çÂ§öËØ¥Ôºå‰∏äÈìæÊé•Ôºönode.js‰∏ãËΩΩÔºåÁÑ∂ÂêéÂÇªÁìúÂºèÂÆâË£ÖÂ∞±Ë°å„ÄÇÂÆâË£ÖÂÆå‰πãÂêéËØ∑ËÆ∞ÂæóÂéªÊéßÂà∂Âè∞ÁúãÁúãÊòØÂê¶ÂÆâË£ÖÊàêÂäünode --version,ÁÑ∂ÂêéÊõ¥Êñ∞‰∏Ä‰∏ãnpm,ËæìÂÖ•:npm install -g npm Ê≥®ÂÜåË¥¶Âè∑Âπ∂ÂàõÂª∫ÂçöÂÆ¢‰ªìÂ∫ìa.È¶ñÂÖàËøõÂÖ•githubÂÆòÁΩëÔºögithub,ËøõË°åÁõ∏Â∫îÁöÑÊ≥®ÂÜåÁôªÂΩïÔºåÁÑ∂ÂêéÂàõÂª∫‰ªìÂ∫ìÔºåÂ∞±Âú®Â∑¶‰∏äËßíÈÇ£‰∏™Áå´Áå´ÊóÅËæπ„ÄÇb.Êà≥ËøõÂéª‰πãÂêé,Respository nameÂøÖÈ°ªÊòØ:ÊÇ®ÁöÑgithubË¥¶Êà∑Âêç.github.io,ÁÑ∂ÂêéÂãæÈÄâ‰∏ãÈù¢ÁöÑÂàõÂª∫readmeÔºåÂàõÂª∫ÂÆåÊàê„ÄÇc.ËøõÂÖ•‰ªìÂ∫ìÔºåÁÇπÂáªSettingÔºåÂêØÁî®GitHub Pages,Ê≠§Êó∂‰Ω†ËæìÂÖ•ÊÇ®ÁöÑgithubË¥¶Êà∑Âêç.github.io,Â∞±ËÉΩÁúãÂà∞‰∏çÊòØ404‰∫ÜÔºåËØ¥ÊòéÊ≠§Êó∂ÂçöÂÆ¢Â∑≤ÁªèÂª∫Á´ã‰∫ÜÔºåÊé•‰∏ãÊù•Â∞±ÊòØÂà©Áî®HexoÊ°ÜÊû∂ËÆ©‰Ω†ÁöÑÂçöÂÆ¢ÁæéËµ∑Êù•Âï¶ÔºÅÔºÅÔºÅÔºÅ ÂÆâË£ÖÈÖçÁΩÆHexoa.È¶ñÂÖàÂª∫Á´ã‰∏Ä‰∏™Êñá‰ª∂Â§π(Èöè‰æø‰Ω†Âª∫Âú®Âì™)b.Âú®ËØ•Êñá‰ª∂Â§πÂÜÖÊâìÂºÄÁªàÁ´ØÔºåËæìÂÖ•Ôºö1$ npm install hexo-cli -g Êé•‰∏ãÊù•‰Ω†Â∞±ËÉΩÁúãÂà∞Êñá‰ª∂Â§πÂÜÖÁöÑ‰∏úË•øÂ§ö‰∫ÜËµ∑Êù•ÂìàÂìàÂìàÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÁöÑÊñá‰ª∂ÁªìÊûÑÔºöc.HexoÂ∑≤ÁªèÊúâ‰∫ÜÔºågithub pages‰πüÊúâ‰∫ÜÔºåÁé∞Âú®Â∞±Ââ©Êää‰ªñ‰ª¨ËÅîÁ≥ªËµ∑Êù•‰∫ÜÔºåÊâÄ‰ª•ËøôÊ≠•Â∞±ÊòØÂÖ≥ÈîÆÂíØÔºåÊâìÂºÄ‰∏äÂõæÁ¨¨‰∏Ä‰∏™Êñá‰ª∂Ôºö_config.yml,ÁÑ∂ÂêéÂú®ÊñáÊú¨ÁöÑÁªìÂ∞æÂä†‰∏ä‰∏ãÈù¢ÁöÑ‰∏ÄÊÆµ‰ª£Á†ÅÔºö1234deploy: type: git repository: https://github.com/jeromememory/jeromememory.github.io.git branch: master ÂÖ∂‰∏≠repositoryÂ∞±ÊòØ‰Ω†ÊúÄÂºÄÂßãËÆæÁΩÆÁöÑ‰ªìÂ∫ìÂìüÔºåËÆ∞ÂæóÊõøÊç¢Ëá™Â∑±ÁöÑgithubÁî®Êà∑Âêç„ÄÇ Ê£ÄÊµãÊòØÂê¶ÈÉ®ÁΩ≤ÊàêÂäüÈ¶ñÂÖàÂ¶ÇÊûú‰Ω†ÊÉ≥Âú®Êú¨Âú∞È¢ÑËßà‰Ω†ÁöÑÂçöÂÆ¢ÔºåÂè™ÈúÄË¶ÅÊâìÂºÄÁªàÁ´Ø,È¶ñÂÖàËøõÂÖ•HexoÊñá‰ª∂Â§πÂÜÖÔºåÁÑ∂ÂêéËøõË°å hexo sÂç≥ÂèØÔºö12$ cd /Users/jerome/Hexo $ hexo s ÁÑ∂Âêé‰Ω†Â∞±‰ºöÁúãÂà∞Âú®ÁªàÁ´ØÊèêÁ§∫‰Ω†Âú®localhost:4000È¢ÑËßà‰Ω†ÁöÑÂçöÂÆ¢Âï¶ÔºÅÔºÅÂ¶ÇÊûú‰Ω†ÊÉ≥Âú®ÁΩëÈ°µ‰∏äÁúãÂà∞‰Ω†ÁöÑÂçöÂÆ¢ÔºåÂè™ÈúÄË¶ÅÂú®ÁªàÁ´ØËæìÂÖ•Ôºö12$ hexo g$ hexo d Á®çÁ≠â‰∏ÄÂ∞è‰ºö(github pagesÈúÄË¶Å‰∏ÄÂ∞èÊÆµÊó∂Èó¥Êâç‰ºöÊõ¥Êñ∞)Ôºå‰Ω†Â∞±ËÉΩÂú®‰Ω†‰ªìÂ∫ìÂØπÂ∫îÁöÑÈÇ£‰∏™ÁΩëÂùÄ(ÊÇ®ÁöÑgithubÁî®Êà∑Âêç.io.git)ÁúãÂà∞ÊÇ®ÁöÑÂçöÂÆ¢‰∫ÜÔºåËá≥Ê≠§ÔºåÊÇ®ÁöÑÂçöÂÆ¢Â∫îËØ•Â∞±Â∑≤ÁªèÊê≠Âª∫ÂÆåÊàê‰∫ÜÔºåÂΩìÁÑ∂ÊÇ®ËÇØÂÆö‰ºöËØ¥Ëøô‰πüÂ§™‰∏ë‰∫ÜÂêßÔºåÂØπÔºåÊàë‰πüËßâÂæóÔºåÊâÄ‰ª•Êé•‰∏ãÊù•ËØ∑ÁªßÁª≠Áúã‰∏ãÈù¢ÁöÑÊìç‰ΩúÂêßÔºÅÔºÅÔºÅ Hexo‰∏ªÈ¢òÈÖçÁΩÆÈªòËÆ§ÁöÑ‰∏ªÈ¢òÂæà‰∏ëÔºåÊâÄ‰ª•Ëøô‰∏™Êó∂ÂÄôÊàë‰ª¨Â∞±ÂèØ‰ª•ÂéªgithubËøô‰∏™ÊúÄÂ§ßÁöÑÂºÄÊ∫êÁΩëÁ´ôÊâæ‰∫ÜÔºåÊàëÊé®ËçêHexoÁöÑnext‰∏ªÈ¢òÔºåÊàëËá™Â∑±Áî®ÁöÑÂ∞±ÊòØËøô‰∏™ÔºåÊûÅÁÆÄËá≥ÊûÅÔºåÊâæÂà∞Âà´‰∫∫ÁöÑ‰∏ªÈ¢ò‰πãÂêéÔºåÊää‰ªñÁöÑ‰ª£Á†Åclone‰∏ãÊù•ÔºåÊîæÂà∞/Hexo/themesËøô‰∏™Êñá‰ª∂Â§π‰∏ãÔºöÁÑ∂ÂêéÂéªÂºÄÂßãÁöÑ_config.yml‰∏≠ÂÆö‰ΩçÂà∞themeÔºåÂ∞ÜÂêéÈù¢ÁöÑÂÄºÊîπ‰∏∫‰Ω†ÁöÑ‰∏ªÈ¢òÂêçÔºåÂà´Âøò‰∫ÜÔºåÊîπÂÆåËøô‰∫õÂêéÔºåÊâìÂºÄÁªàÁ´ØÔºåËæìÂÖ•Ôºö12$ hexo g$ hexo d Ëøá‰∏ÄÂ∞è‰ºö‰Ω†Â∞±ËÉΩÁúãÂà∞Ëá™Â∑±ÁöÑ‰∏ªÈ¢òÂèëÁîüÂèòÂåñÂï¶ÔºÅÂâ©‰∏ãÁöÑÂÖ∑‰ΩìÈÖçÁΩÆÔºåÊàëÂ∞±ÂÅ∑ÂÅ∑ÊáíÊîæ‰∏™ÈìæÊé•ÔºöNexT‰∏ªÈ¢òÔºåÂÖ∂‰ªñ‰∏ªÈ¢òÁöÑÂêåÂ≠¶Ôºå‰Ω†‰ª¨‰πüÂèØ‰ª•Ëá™Â∑±Êü•‰∏Ä‰∏ãÂØπÂ∫îÁöÑÂÆòÁΩëÂìüÔºåÈÉΩÂÜôÁöÑË¥ºËØ¶ÁªÜÔºåÂ•ΩÁî®ÔºÅ ÊÄªÁªìËá≥Ê≠§Ôºå‰∏™‰∫∫ÂçöÂÆ¢Â∞±Â∫îËØ•Êê≠Âª∫Â•Ω‰∫ÜÔºåÂ∏åÊúõÂØπÂ§ßÂÆ∂ÊúâÊâÄÊî∂Ëé∑ÔºÅ!(ËØùËØ¥Á¨¨‰∏ÄÁØáÂçöÂÆ¢ÊûúÁÑ∂ÊòØÁãóÂ±Å‰∏çÈÄöÂïäÂ§ßÂÆ∂ÂáëÂêàÁúãÂêß)]]></content>
      <categories>
        <category>Á®ãÂ∫èÁåø</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>GitHub Pages</tag>
      </tags>
  </entry>
</search>
